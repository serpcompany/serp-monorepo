[
  {
    "owner": "aidenwallis",
    "repo": "kysely-d1",
    "content": "TITLE: Implementing Kysely with D1 in a Cloudflare Worker\nDESCRIPTION: Example code demonstrating how to set up a Cloudflare Worker that uses Kysely with D1 to query a key-value store. It shows type definitions, database connection setup, and a simple query to retrieve a value by key.\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/README.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Kysely } from 'kysely';\nimport { D1Dialect } from 'kysely-d1';\n\nexport interface Env {\n  DB: D1Database;\n}\n\ninterface KvTable {\n  key: string;\n  value: string;\n}\n\ninterface Database {\n  kv: KvTable;\n}\n\nexport default {\n  async fetch(request: Request, env: Env): Promise<Response> {\n    const { searchParams } = new URL(request.url);\n    const key = searchParams.get('key');\n    if (!key) {\n      return new Response('No key defined.', { status: 400 });\n    }\n\n    // Create Kysely instance with kysely-d1\n    const db = new Kysely<Database>({ dialect: new D1Dialect({ database: env.DB }) });\n    \n    // Read row from D1 table\n    const result = await db.selectFrom('kv').selectAll().where('key', '=', key).executeTakeFirst();\n    if (!result) {\n      return new Response('No value found', { status: 404 });\n    }\n\n    return new Response(result.value);\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Configuring D1 Database in Wrangler\nDESCRIPTION: Wrangler configuration for connecting to Cloudflare D1 database. Requires database name and ID to be specified.\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/example/README.md#2025-04-17_snippet_1\n\nLANGUAGE: toml\nCODE:\n```\n[[ d1_databases ]]\nbinding = \"DB\" # i.e. available in your Worker on env.DB\ndatabase_name = \"kysely-test\"\ndatabase_id = \"<YOUR ID>\"\n```\n\n----------------------------------------\n\nTITLE: Installing Kysely-D1 Adapter via NPM\nDESCRIPTION: Command to install the kysely-d1 package using npm. This is required to use Kysely with Cloudflare D1.\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm i kysely-d1\n```\n\n----------------------------------------\n\nTITLE: Creating D1 Database Command\nDESCRIPTION: Command to create a new Cloudflare D1 database instance\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/example/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run create-db\n```\n\n----------------------------------------\n\nTITLE: Running Database Setup\nDESCRIPTION: Command to execute the database migration script\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/example/README.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm run setup\n```\n\n----------------------------------------\n\nTITLE: Starting Local Development Server\nDESCRIPTION: Command to run the project in local development mode\nSOURCE: https://github.com/aidenwallis/kysely-d1/blob/main/example/README.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run start\n```"
  }
]
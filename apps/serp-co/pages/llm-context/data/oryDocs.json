[
  {
    "owner": "ory",
    "repo": "docs",
    "content": "TITLE: Example UI Nodes Generated from Identity Schema (JSON)\nDESCRIPTION: Displays an array of UI nodes (input fields and a submit button) generated based on an Ory Kratos Identity Schema. Demonstrates how schema properties (like `traits.email`, `traits.name.first`) and their order translate into specific UI elements with labels and attributes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"type\": \"input\",\n    \"group\": \"profile\",\n    \"attributes\": {\n      \"name\": \"traits.email\",\n      \"type\": \"email\",\n      \"value\": \"foo@ory.sh\",\n      \"disabled\": false\n    },\n    \"messages\": null,\n    \"meta\": {\n      \"label\": {\n        \"id\": 1070002,\n        \"text\": \"E-Mail\",\n        \"type\": \"info\"\n      }\n    }\n  },\n  {\n    \"type\": \"input\",\n    \"group\": \"profile\",\n    \"attributes\": {\n      \"name\": \"traits.name.first\",\n      \"type\": \"text\",\n      \"value\": \"Foo\",\n      \"disabled\": false\n    },\n    \"messages\": null,\n    \"meta\": {\n      \"label\": {\n        \"id\": 1070002,\n        \"text\": \"First Name\",\n        \"type\": \"info\"\n      }\n    }\n  },\n  {\n    \"type\": \"input\",\n    \"group\": \"profile\",\n    \"attributes\": {\n      \"name\": \"traits.name.last\",\n      \"type\": \"text\",\n      \"value\": \"Bar\",\n      \"disabled\": false\n    },\n    \"messages\": null,\n    \"meta\": {\n      \"label\": {\n        \"id\": 1070002,\n        \"text\": \"Last Name\",\n        \"type\": \"info\"\n      }\n    }\n  },\n  {\n    \"type\": \"input\",\n    \"group\": \"profile\",\n    \"attributes\": {\n      \"name\": \"method\",\n      \"type\": \"submit\",\n      \"value\": \"profile\",\n      \"disabled\": false\n    },\n    \"messages\": null,\n    \"meta\": {\n      \"label\": {\n        \"id\": 1070003,\n        \"text\": \"Save\",\n        \"type\": \"info\"\n      }\n    }\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Defining an Ory Kratos Identity Schema (JSON)\nDESCRIPTION: Shows an example JSON Schema defining user identity traits like email, website, consent, and newsletter. This schema dictates the structure, validation rules, and metadata (like titles and order) for user profiles, influencing the generated UI nodes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"minLength\": 3,\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"website\": {\n          \"title\": \"Website\",\n          \"type\": \"string\",\n          \"format\": \"uri\",\n          \"minLength\": 10\n        },\n        \"consent\": {\n          \"title\": \"Consent\",\n          \"const\": true\n        },\n        \"newsletter\": {\n          \"title\": \"Newsletter\",\n          \"type\": \"boolean\"\n        }\n      },\n      \"required\": [\"email\", \"website\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Login Flow with TypeScript SDK\nDESCRIPTION: Demonstrates how to retrieve an existing login flow using the Ory TypeScript SDK by providing the flow ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport getTsLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/get-login-native.ts'\n\n<CodeBlock language=\"ts\" title=\"login.ts\">{getTsLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Creating and Deleting Identity using Ory Identities Go SDK\nDESCRIPTION: Demonstrates how to use the Ory Identities Go SDK to programmatically create a new identity and subsequently delete it. This snippet utilizes core SDK functions for identity lifecycle management, referencing corresponding Ory API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_20\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Ory session response payload format\nDESCRIPTION: Provides the JSON structure of a typical Ory session object, including session identifiers, active status, expiration times, authentication details, user identity info, address verification, and device data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"65dea6f4-5d15-4e61-9eb7-f30190c0b2e2\",\n  \"active\": true,\n  \"expires_at\": \"2022-12-31T13:50:30.427292Z\",\n  \"authenticated_at\": \"2022-12-01T13:50:30.825516Z\",\n  \"authenticator_assurance_level\": \"aal1\",\n  \"authentication_methods\": [\n    {\n      \"method\": \"password\",\n      \"aal\": \"aal1\",\n      \"completed_at\": \"2022-12-01T13:50:30.427375604Z\"\n    }\n  ],\n  \"issued_at\": \"2022-12-01T13:50:30.427292Z\",\n  \"identity\": {\n    \"id\": \"969d7a6e-b8a9-49ea-bf7b-9e2732a41a81\",\n    \"schema_id\": \"9cadbdf1d6bc5c5c521a1c17ea83648c911c5cd74a14d9e6cc11a5790d133339c3524f8a2d35d34f4151d2df10a7b73d19f7bd0f709fd5ace9019e080bbc4df6\",\n    \"state\": \"active\",\n    \"state_changed_at\": \"2022-12-01T13:50:30.331786Z\",\n    \"traits\": {\n      \"consent\": {\n        \"newsletter\": false,\n        \"tos\": \"2022-12-01T13:50:28.706Z\"\n      },\n      \"email\": \"user@example.org\",\n      \"name\": \"User\"\n    },\n    \"verifiable_addresses\": [\n      {\n        \"id\": \"f5f4afde-697e-4e10-a6b6-f870dce927d6\",\n        \"value\": \"user@example.org\",\n        \"verified\": false,\n        \"via\": \"email\",\n        \"status\": \"sent\",\n        \"created_at\": \"2022-12-01T13:50:30.345386Z\",\n        \"updated_at\": \"2022-12-01T13:50:30.345386Z\"\n      }\n    ],\n    \"recovery_addresses\": [\n      {\n        \"id\": \"6e16a3b4-518f-4a5a-b045-95177deb40f1\",\n        \"value\": \"user@example.org\",\n        \"via\": \"email\",\n        \"created_at\": \"2022-12-01T13:50:30.35227Z\",\n        \"updated_at\": \"2022-12-01T13:50:30.35227Z\"\n      }\n    ],\n    \"metadata_public\": null,\n    \"created_at\": \"2022-12-01T13:50:30.340643Z\",\n    \"updated_at\": \"2022-12-01T13:50:30.340643Z\"\n  },\n  \"devices\": [\n    {\n      \"id\": \"592515ee-7b70-4e08-b4d7-fb0b1643cb48\",\n      \"ip_address\": \"2001:a61:1101:8001:cc85:1111:2222:3333\",\n      \"user_agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\",\n      \"location\": \"Berlin, DE\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow using TypeScript SDK (React)\nDESCRIPTION: Demonstrates how to use the Ory Kratos TypeScript SDK within a React application to submit data (like email or verification code) to complete a verification flow, typically handling form submission and state updates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_62\n\nLANGUAGE: tsx\nCODE:\n```\n{submitReactVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Verifying Email Address Claims in Jsonnet\nDESCRIPTION: Highlights the security importance of only mapping email addresses if the provider explicitly marks them as verified (`claims.email_verified: true`). This prevents potential account enumeration or takeover attacks by conditionally mapping the email trait.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_7\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, especially if the value is used for\n      // e.g. verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by GitHub.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Configure NetID OIDC Provider in Ory (YAML)\nDESCRIPTION: This YAML snippet demonstrates the configuration required to add NetID as an OpenID Connect (OIDC) provider within the Ory Identity configuration. It specifies the provider ID, type, client credentials (client_id, client_secret), the location of the data mapping Jsonnet (`mapper_url` either Base64 encoded or as a URL), and the requested claims and scopes from NetID. The `id` field is crucial and should not be changed after initial setup as it is used in the callback URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_4\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: netid # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: netid\n            client_id: .... # Replace this with the OAuth2 Client ID provided by NetID\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by NetID\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4t\n            requested_claims: # for more information navigate to https://developerzone.netid.dev/sso/#claims-and-scopes\n              userinfo:\n                email:\n                  essential: true\n                email_verified:\n                  essential: true\n              id_token:\n                email:\n                  essential: true\n                email_verified:\n                  essential: true\n            scope:\n              - email\n              - openid\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Submitting Login Flow - Ory Go SDK\nDESCRIPTION: Illustrates how to submit user input to complete a login flow using the Ory Go SDK's 'updateLoginFlow' endpoint. This is used after the user provides their credentials or other required information. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_9\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Recovery Flow via cURL (Native API)\nDESCRIPTION: Uses cURL to fetch an existing recovery flow using its ID from the `/self-service/recovery/flows` endpoint, intended for native applications or backend interactions. Includes the shell command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_38\n\nLANGUAGE: shell\nCODE:\n```\n{getRecoveryCurlApi}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(getRecoveryCurlApiJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Implementing Ory Kratos Authentication Middleware for Gin in Go\nDESCRIPTION: Implements a session validation middleware for the Gin web framework using the Ory Kratos Go SDK. The middleware checks the session's validity and active state, redirecting unauthenticated users to the login page. Dependencies include github.com/gin-gonic/gin and github.com/ory/kratos-client-go; a running Kratos Admin API is required. The handler expects an ory_kratos_session cookie; on validation failure, redirects are issued.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_5\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"errors\"\n\t\"net/http\"\n\n\t\"github.com/gin-gonic/gin\"\n\tory \"github.com/ory/kratos-client-go\"\n)\n\ntype kratosMiddleware struct {\n\tory *ory.APIClient\n}\n\nfunc NewMiddleware() *kratosMiddleware {\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4434\", // Kratos Admin API\n\t\t},\n\t}\n\treturn &kratosMiddleware{\n\t\tory: ory.NewAPIClient(configuration),\n\t}\n}\nfunc (k *kratosMiddleware) Session() gin.HandlerFunc {\n\treturn func(c *gin.Context) {\n\t\tsession, err := k.validateSession(c.Request)\n\t\tif err != nil {\n\t\t\tc.Redirect(http.StatusMovedPermanently, \"http://127.0.0.1:4455/login\")\n\t\t\treturn\n\t\t}\n\t\tif !*session.Active {\n\t\t\tc.Redirect(http.StatusMovedPermanently, \"http://your_endpoint\")\n\t\t\treturn\n\t\t}\n\t\tc.Next()\n\t}\n}\nfunc (k *kratosMiddleware) validateSession(r *http.Request) (*ory.Session, error) {\n\tcookie, err := r.Cookie(\"ory_kratos_session\")\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif cookie == nil {\n\t\treturn nil, errors.New(\"no session found in cookie\")\n\t}\n\tresp, _, err := k.ory.FrontendApi.ToSession(context.Background()).Cookie(cookie.String()).Execute()\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn resp, nil\n}\nfunc main() {\n\n\tr := gin.Default()\n\tk := NewMiddleware()\n\n\tr.Use(k.Session())\n\tr.GET(\"/ping\", func(c *gin.Context) {\n\t\tc.JSON(200, gin.H{\n\t\t\t\"message\": \"pong\",\n\t\t})\n\t})\n\tr.Run() // listen and serve on 0.0.0.0:8080 (for windows \"localhost:8080\")\n}\n```\n\n----------------------------------------\n\nTITLE: ExpressJS server with OAuth2 integration\nDESCRIPTION: This JavaScript code defines an ExpressJS server configured to use OAuth2 for authentication. It uses the `express-openid-connect` library to handle the authentication flow and protect routes. The configuration includes setting the client ID, client secret, issuer base URL, redirect URI, and secret. It requires environment variables `ORY_PROJECT_SLUG`, `OAUTH_CLIENT_ID`, and `OAUTH_CLIENT_SECRET` to be set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/oauth2-openid/expressjs.mdx#_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst express = require('express');\nconst { auth } = require('express-openid-connect');\n\nconst app = express();\n\nconst config = {\n  authRequired: false,\n  auth0Logout: true,\n  secret: '__random_string_please_replace__',\n  baseURL: `http://localhost:3000`,\n  clientID: process.env.OAUTH_CLIENT_ID,\n  issuerBaseURL: `https://${process.env.ORY_PROJECT_SLUG}.projects.oryapis.com`\n};\n\n// auth router attaches /login, /logout, and /callback routes to the baseURL\napp.use(auth(config));\n\n// req.isAuthenticated is provided from the auth router\napp.get('/', (req, res) => {\n  res.send(req.oidc.isAuthenticated() ? 'Logged in' : 'Logged out');\n});\n\napp.get('/profile', requiresAuth(), (req, res) => {\n  res.send(JSON.stringify(req.oidc.user, null, 2));\n});\n\nfunction requiresAuth() {\n  return (req, res, next) => {\n    if (req.oidc.isAuthenticated()) {\n      return next();\n    }\n\n    res.status(401).send('Not authorized')\n  };\n}\n\nconst port = process.env.PORT || 3000\napp.listen(port, () => {\n  console.log(`listening on port ${port}`)\n});\n```\n\n----------------------------------------\n\nTITLE: Uploading Updated Ory Identity Configuration using CLI - Shell\nDESCRIPTION: This shell command updates an Ory project's identity configuration using a YAML file. Prerequisites: Ory CLI, valid project and workspace IDs, and an updated config file. Input: configuration file, project, and workspace IDs. Output: Updated configuration on Ory. Limitation: Errors if IDs or configuration file are incorrect.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/25_github.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Ory CLI - Update Identity Config\nDESCRIPTION: This shell script updates the Ory Identities configuration using the provided YAML file. It uses the `ory update identity-config` command, specifying the project, workspace, and the file containing the updated configuration (`identity-config.yaml`). Dependencies include the Ory CLI and a valid YAML configuration file. The output updates the identity configuration in Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/05_generic.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Activating and Deactivating Identities with Ory SDK in JavaScript\nDESCRIPTION: This JavaScript snippet demonstrates how to use the Ory SDK to change the activation state of user identities. It includes import statements and functions to set an identity as active or inactive, enabling control over whether a user can engage with self-service login flows. The snippet requires the Ory SDK for JavaScript to be installed and properly configured with API credentials. The main parameters include the identity ID and the desired state; it outputs the updated identity state or an error if the operation fails.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/identity-state.mdx#_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { V0alpha2Api, Configuration } from '@ory/client';\n\nconst ory = new V0alpha2Api(new Configuration({\n  basePath: 'https://your-ory-server.com',\n}));\n\nasync function setIdentityState(identityId, activate = true) {\n  try {\n    const response = await ory.adminUpdateIdentityStatus(identityId, { state: activate ? 'active' : 'inactive' });\n    console.log(`Identity ${identityId} is now ${activate ? 'active' : 'inactive'}`);\n    return response.data;\n  } catch (error) {\n    console.error('Failed to update identity state:', error);\n    throw error;\n  }\n}\n\n// Example usage\nsetIdentityState('identity123', false);\n```\n\n----------------------------------------\n\nTITLE: Registration Payload in JSON5 (Browser)\nDESCRIPTION: This JSON5 code shows a sample registration payload to be used with the previous cURL (Browser) example.  It defines values for `traits.email`, `traits.tos` and a `transient_payload` field. It conforms to the identity schema requirements of the Ory API. Prerequisites: the identity schema as configured for the Ory instance. Expected Input: the traits and the transient payload. Output: a JSON file with the payload. Limitations: the structure must comply with the Ory API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_21\n\nLANGUAGE: json5\nCODE:\n```\nimport submitRegistrationCurlBrowserJson from '../../../code-examples/curl/registration/submit-registration-browser.json'\n```\n\n----------------------------------------\n\nTITLE: Implementing Registration Page with Ory Elements in Next.js (TypeScript)\nDESCRIPTION: This Next.js page sets up user registration by integrating the Ory Elements SDK, handling both initial flow retrieval and form submission. Dependencies include Next.js, TypeScript, and Ory Elements. The component expects form field values and provides feedback based on Ory server responses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"pages/registration.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/registration.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Defining Email as Primary Identifier in Ory Kratos Identity Schema (JSON)\nDESCRIPTION: This JSON Schema snippet configures the 'email' trait as the unique login identifier for Ory Kratos identities. It sets up credential flows, verification, and recovery using email and supports multiple authentication factors like password, webauthn, totp, code, and passkey. Input should be a valid email string up to 320 characters; ensure required dependencies such as Ory Kratos and draft-07 of JSON Schema. The schema expects only an object with an 'email' field and enforces email formatting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_22\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/registration.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"maxLength\": 320\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating registration flow using Ory SDK in Go, TypeScript, Express.js, and React\nDESCRIPTION: These examples showcase creating and handling registration flows through Ory's SDKs in multiple languages and frameworks. The Go and TypeScript samples target backend or frontend applications respectively, while Express.js is illustrated with a server-side UI integration using Handlebars templates. The React example demonstrates frontend registration UI workflow. Each example abstracts API communication, ensuring correct endpoint usage and handling of registration flow state. Inputs include registration request parameters, outputs encompass flow objects required to render UIs and process user registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_17\n\nLANGUAGE: go\nCODE:\n```\nimport createRegistrationApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-registration.go'\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport createTsRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/create-registration-native.ts'\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport registrationExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/registration-express.ts'\n```\n\nLANGUAGE: handlebars\nCODE:\n```\n<CodeBlock language=\"handlebars\" title=\"main.hbs\">{mainLayoutExpress}</CodeBlock>\n<CodeBlock language=\"handlebars\" title=\"auth.hbs\">{authLayoutExpress}</CodeBlock>\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport createReactRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/create-registration-react.tsx'\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Kratos Registration Flow Data (Shell)\nDESCRIPTION: This snippet uses `curl` and `jq` to programmatically initiate a registration API flow with Ory Kratos and then fetch the full details of the generated flow. It demonstrates how to get the flow ID from the initial API response and use it to retrieve the complete flow object, including UI nodes and state. This is useful for understanding the data structure returned by Kratos for registration flows, including required fields like email and password.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nflowId=$(curl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    http://127.0.0.1:4433/self-service/registration/api | jq -r '.id')\n\ncurl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    \"http://127.0.0.1:4433/self-service/registration/flows?id=$flowId\" | jq\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"d62a3a8d-d3f3-4ca5-af54-0e8747b53b41\",\n  \"type\": \"api\",\n  \"expires_at\": \"2021-12-13T19:55:06.9350485Z\",\n  \"issued_at\": \"2021-12-13T19:45:06.9350485Z\",\n  \"request_url\": \"http://127.0.0.1:4433/self-service/registration/api\",\n  \"ui\": {\n    \"action\": \"http://127.0.0.1:4433/self-service/registration?flow=d62a3a8d-d3f3-4ca5-af54-0e8747b53b41\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"traits.email\",\n          \"type\": \"email\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070002,\n            \"text\": \"E-Mail\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"traits.name.first\",\n          \"type\": \"text\",\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070002,\n            \"text\": \"First Name\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"traits.name.last\",\n          \"type\": \"text\",\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070002,\n            \"text\": \"Last Name\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"password\",\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1040001,\n            \"text\": \"Sign up\",\n            \"type\": \"info\",\n            \"context\": {}\n          }\n        }\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Performing Login Flow for API Clients Using Curl (Shell)\nDESCRIPTION: This shell snippet demonstrates how API clients use curl to interact with Ory Identities login flow endpoints. The first command initializes a login flow by fetching the login UI action URL via HTTP GET and parsing it with jq. The second command completes the login by posting JSON payload with user credentials and the authentication method to the action URL. The response returns a JSON payload containing the session token, detailed session information, and identity details similar to the browser response. Dependencies include curl and jq for HTTP requests and JSON parsing. Inputs include user identifier and password. Outputs include a JSON response representing the authenticated session state.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\n# Inits a Login Flow\nactionUrl=$(\\\n  curl -s -X GET -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/login/api\" \\\n    | jq -r '.ui.action'\\\n)\n\n# Complete Login Flow with password method\ncurl -s -X POST -H  \"Accept: application/json\" -H \"Content-Type: application/json\" \\\n    -d '{\"identifier\": \"api@user.org\", \"password\": \"iohuasf0897zAJHf\", \"method\": \"password\"}' \\\n    \"$actionUrl\" | jq\n\n{\n  \"session_token\": \"oFZzgLpsacUpUy2cvQPtrGa2046WcXCR\",\n  \"session\": {\n    \"id\": \"8f660ce3-69ec-4aeb-9fda-f9230dc3243f\",\n    \"active\": true,\n    \"expires_at\": \"2020-08-25T13:42:15.7411522Z\",\n    \"authenticated_at\": \"2020-08-24T13:42:15.7411522Z\",\n    \"issued_at\": \"2020-08-24T13:42:15.7412042Z\",\n    \"identity\": {\n      \"id\": \"bf32596a-f853-47c4-91e6-a3f41cf4949d\",\n      \"schema_id\": \"default\",\n      \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\",\n      \"traits\": {\n        \"email\": \"api@user.org\",\n        \"name\": {\n          \"last\": \"User\",\n          \"first\": \"API\"\n        }\n      },\n      \"verifiable_addresses\": [\n        {\n          \"id\": \"f877db6c-7dfb-45e3-bbeb-ac8349348128\",\n          \"value\": \"api@user.org\",\n          \"verified\": false,\n          \"via\": \"email\",\n          \"verified_at\": null,\n          \"expires_at\": \"2020-08-24T14:35:59.125873Z\"\n        }\n      ],\n      \"recovery_addresses\": [\n        {\n          \"id\": \"065a908c-82be-4110-bf67-9910f36242b7\",\n          \"value\": \"api@user.org\",\n          \"via\": \"email\"\n        }\n      ]\n    }\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory OAuth2 Login Endpoint (Shell)\nDESCRIPTION: This shell command uses the Ory CLI to configure the login endpoint URL for the OAuth2/OpenID Connect flow. It sets the \"urls/login\" property in the Ory project's OAuth2 configuration, directing Ory to redirect users to this specified URL (`https://login.example.org/oauth2-login`) when authentication is required. Your custom application at this URL must handle the user login process and communicate back to Ory using the provided `login_challenge`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config\n  --replace \"/urls/login=\\\"https://login.example.org/oauth2-login\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Handling Successful Login Response with Ory Identities JSON (JSON)\nDESCRIPTION: This JSON snippet shows the structure of a successful login response from Ory Identities for a browser client after authentication. It contains detailed session information including session ID, expiration, authentication timestamps, and the associated identity details such as traits, verifiable addresses, and recovery addresses. This response is typically returned with an HTTP 200 OK status and a Set-Cookie header. No external dependencies are required to understand the response format. Inputs are not applicable; output is JSON describing authenticated session and identity state.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"session\": {\n    \"id\": \"8f660ce3-69ec-4aeb-9fda-f9230dc3243f\",\n    \"active\": true,\n    \"expires_at\": \"2020-08-25T13:42:15.7411522Z\",\n    \"authenticated_at\": \"2020-08-24T13:42:15.7411522Z\",\n    \"issued_at\": \"2020-08-24T13:42:15.7412042Z\",\n    \"identity\": {\n      \"id\": \"bf32596a-f853-47c4-91e6-a3f41cf4949d\",\n      \"schema_id\": \"default\",\n      \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\",\n      \"traits\": {\n        \"email\": \"api@user.org\",\n        \"name\": {\n          \"last\": \"User\",\n          \"first\": \"API\"\n        }\n      },\n      \"verifiable_addresses\": [\n        {\n          \"id\": \"f877db6c-7dfb-45e3-bbeb-ac8349348128\",\n          \"value\": \"api@user.org\",\n          \"verified\": false,\n          \"via\": \"email\",\n          \"verified_at\": null,\n          \"expires_at\": \"2020-08-24T14:35:59.125873Z\"\n        }\n      ],\n      \"recovery_addresses\": [\n        {\n          \"id\": \"065a908c-82be-4110-bf67-9910f36242b7\",\n          \"value\": \"api@user.org\",\n          \"via\": \"email\"\n        }\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Errors and Status Codes in Go SDK Responses\nDESCRIPTION: Provides an example of robust error handling when using the Ory Hydra Go SDK. It demonstrates how to check the HTTP status code of the response and type-assert the returned error to `*client.GenericOpenAPIError` to access specific error models (like `client.JsonError` or `client.RequestWasHandledResponse`) based on the status code (e.g., 404 Not Found, 410 Gone).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_4\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n  \"fmt\"\n  \"net/http\"\n  \"os\"\n\n  client \"github.com/ory/hydra-client-go\"\n)\n\nfunc main() {\n  consentChallenge := \"consentChallenge_example\" // string |\n\n  configuration := client.NewConfiguration()\n  configuration.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4445\", // Admin API\n    },\n  }\n  apiClient := client.NewAPIClient(configuration)\n  resp, r, err := apiClient.OAuth2Api.GetOAuth2ConsentRequest(context.Background()).ConsentChallenge(consentChallenge).Execute()\n  if err != nil {\n    switch r.StatusCode {\n    case http.StatusNotFound:\n      // Accessing to response details\n      // cast err to *client.GenericOpenAPIError object first and then\n      // to your desired type\n      notFound, ok := err.(*client.GenericOpenAPIError).Model().(client.JsonError)\n      fmt.Println(ok)\n      fmt.Println(*notFound.ErrorDescription)\n    case http.StatusGone:\n\n      r, ok := err.(*client.GenericOpenAPIError).Model().(client.RequestWasHandledResponse)\n      fmt.Println(r, ok)\n      fmt.Println(\"It's gone\")\n    default:\n      fmt.Fprintf(os.Stderr, \"Error when calling `OAuth2Api.GetOAuth2ConsentRequest``: %v\\n\", err)\n      fmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n    }\n  }\n  // response from `GetConsentRequest`: ConsentRequest\n  fmt.Fprintf(os.Stdout, \"Response from `OAuth2Api.GetOAuth2ConsentRequest`: %v\\n\", resp)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 client using Ory Console, CLI, SDK, and REST API\nDESCRIPTION: This snippet illustrates how to create a new OAuth2 client using the Ory Console web UI, CLI commands, SDK code, or REST API calls. The process involves specifying grant types, response types, scopes, redirect URIs, and authentication methods. The SDK and REST API sections include placeholders for detailed examples. The primary purpose is to facilitate secure client registration with various tools.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory create oauth2-client \\\n  --grant-type authorization_code --grant-type refresh_token  --grant-type client_credentials \\\n  --response-type code \\\n  --scope openid --scope offline_access \\\n  --token-endpoint-auth-method client_secret_post \\\n  --redirect-uri https://my-app.com/callback --redirect-uri http://my-other-app.com/callback\n```\n\nLANGUAGE: Markdown\nCODE:\n```\n```mdx-code-block\nimport Codes from '@theme/CodeBlock'\nimport createTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-create.ts'\n\n<Codes language=\"tsx\">{createTs}</Codes>\n```\n```\n\n----------------------------------------\n\nTITLE: Ory Console Tabs Configuration Snippet (mdx-code-block)\nDESCRIPTION: This MDX snippet demonstrates the use of tabbed interface components designed for documentation purposes. It defines a tab group labeled 'console-or-api' with two tabs: one for the Ory Console UI instructions and one for the API instructions. This UI helps users toggle between console-based workflows and API-based commands for setting up SAML SSO. Embedded within are placeholders for React-like components to provide interactive links or routes within the console documentation. No execution or scripting logic is included in this snippet.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_14\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Tabs groupId=\"console-or-api\">\n<TabItem value=\"console\" label=\"Ory Console\">\n```\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n</TabItem>\n<TabItem value=\"api\" label=\"API\">\n```\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Querying Ory Identity Session Information Using Bearer Token (Shell)\nDESCRIPTION: This shell snippet illustrates how to validate an Ory Session Token by making an authorized GET request to the /sessions/whoami endpoint. The Authorization header uses the Bearer scheme with the session token. The response is a detailed JSON output describing the session's ID, active status, expiration, and identity information, including traits, verifiable addresses, and recovery addresses. Dependencies are curl for HTTP requests and jq for JSON formatting. Input is the Bearer token string, output is the session's current state as JSON.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -H \"Authorization: Bearer svX8bE9HTiVpMr7r55TtKtcOkLRhAq1a\" \\\n  https://playground.projects.oryapis.com/sessions/whoami | jq\n\n{\n  \"id\": \"d09fc470-9e11-4e70-855f-0dc1aee7e501\",\n  \"active\": true,\n  \"expires_at\": \"2020-09-05T10:52:52.1350455Z\",\n  \"authenticated_at\": \"2020-09-04T10:52:52.1472702Z\",\n  \"issued_at\": \"2020-09-04T10:52:52.1350737Z\",\n  \"identity\": {\n    \"id\": \"9ee8fb81-9d5c-47a7-9cee-28a0f64dccbb\",\n    \"schema_id\": \"default\",\n    \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\",\n    \"traits\": {\n      \"email\": \"api@user.org\",\n      \"name\": {\n        \"first\": \"API\",\n        \"last\": \"User\"\n      }\n    },\n    \"verifiable_addresses\": [\n      {\n        \"id\": \"3ba119c6-4e9a-466c-8910-40b238229aa6\",\n        \"value\": \"api@user.org\",\n        \"verified\": false,\n        \"via\": \"email\",\n        \"status\": \"pending\",\n        \"verified_at\": null\n      }\n    ],\n    \"recovery_addresses\": [\n      {\n        \"id\": \"9dec10d0-1079-4a5d-b1be-cd15418c640a\",\n        \"value\": \"api@user.org\",\n        \"via\": \"email\"\n      }\n    ]\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Example OAuth2 client configuration JSON - json\nDESCRIPTION: This JSON snippet exemplifies a typical OAuth2 client configuration returned by the ORY CLI. It lists properties such as client_id, authorized grant types, JSON Web Key Sets (JWKS), whitelisted redirect URIs, response types, scopes, subject types, token endpoint authentication methods, and userinfo response signing algorithms. Reviewing these settings is essential to ensure OAuth2 flows work correctly and securely.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"client_id\": \"my-client\",\n  \"grant_types\": [\n    \"authorization_code\"\n  ],\n  \"jwks\": {},\n  \"redirect_uris\": [\n    \"http://127.0.0.1:5556/callback\"\n  ],\n  \"response_types\": [\n    \"code\"\n  ],\n  \"scope\": \"openid offline\",\n  \"subject_type\": \"pairwise\",\n  \"token_endpoint_auth_method\": \"client_secret_basic\",\n  \"userinfo_signed_response_alg\": \"none\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Namespaces in Ory Keto YAML Configuration\nDESCRIPTION: This snippet defines two namespaces, 'groups' and 'reports', in the Ory Keto configuration file. Namespaces isolate different domains of permissions, enabling separation of user groups from resource access control. This YAML fragment is required in the Keto configuration to establish these logical partitions before assigning permissions or roles within these namespaces.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nnamespaces:\n  - id: 0\n    name: groups\n  - id: 1\n    name: reports\n#...\n```\n\n----------------------------------------\n\nTITLE: YAML: Ory Identity Configuration with Twitch\nDESCRIPTION: This YAML configuration snippet demonstrates how to configure Twitch as a social sign-in provider within the Ory selfservice methods.  It specifies the provider ID, provider type, client credentials (client ID and secret), the issuer URL for Twitch, and the URL or Base64 encoded value for mapping user claims. It also requests the email and email_verified claims. Replace the placeholders with the correct values provided by Twitch.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/60_twitch.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: twitch # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: generic\n            client_id: .... # Replace this with the OAuth2 Client ID provided by Twitch\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by Twitch\n            issuer_url: https://id.twitch.tv/oauth2\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - openid\n              - user:read:email # required for email and email_verified claims in the near future\n            requested_claims: # explicitly request email and email_verified claims because twitch doesn't add them by default\n              id_token:\n                email:\n                  essential: true\n                email_verified:\n                  essential: true\n        enabled: true\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session in React Component (TSX)\nDESCRIPTION: This MDX code block imports and displays a React component (TSX). The component uses the Ory SDK (`@ory/client`) configured with `withCredentials: true` to automatically include cookies when calling the `/sessions/whoami` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_67\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport whoamiReact from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/session/whoami-react.tsx'\n\n<CodeBlock language=\"tsx\" title=\"session.tsx\">{whoamiReact}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Adding Microsoft Provider Configuration in Ory Identities (YAML)\nDESCRIPTION: This YAML snippet represents a sample addition to the Ory Identities configuration for enabling Microsoft as an OIDC provider. It specifies the required fields: provider ID (do not change after setup), Azure App registration client_id/client_secret, optional tenant override, the mapper_url pointing to a base64-encoded Jsonnet string or external URL, and standard scopes. This block must be properly inserted into the downloaded identities configuration YAML. Key limitation: mapper_url must refer to a valid and accessible mapping; ids must remain unchanged after initial setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: microsoft # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: microsoft\n            client_id: .... # This is the the Application (client) ID from the App Registration\n            client_secret: .... # This is the generated Secret value from the App Registration\n            microsoft_tenant: .... # This allows you to select the tenant.\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - profile\n              - openid\n              - email\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory JavaScript SDK with Credentials for Cross-Origin Requests - JavaScript\nDESCRIPTION: This code snippet demonstrates how to initialize the Ory JavaScript/TypeScript SDK (using the FrontendApi class from @ory/client) so that cross-origin requests include HTTP cookies for authentication and session management. The baseOptions.withCredentials parameter is set to true to ensure that credentials (cookies) are sent along with CORS requests. To use this, install the @ory/client dependency and import the required modules. The basePath should be set to the URL of your Ory API instance. This configuration is necessary whenever your frontend communicates with the Ory APIs hosted on a different subdomain under the same top-level domain.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-model.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { FrontendApi, Configuration } from \"@ory/client\"\n\nconst ory = new FrontendApi(\n  new Configuration({\n    basePath,\n    baseOptions: {\n      // Ensures we send cookies in the CORS requests.\n      withCredentials: true,\n    },\n  }),\n)\n```\n\n----------------------------------------\n\nTITLE: Making Fetch Requests with Credentials for Ory APIs - JavaScript\nDESCRIPTION: This snippet illustrates how to use the standard Fetch API in a browser environment to make requests to the Ory API endpoint while including browser cookies for authentication. By setting the credentials option to \"include\", the fetch request sends cookies such as session tokens to the server. This approach is necessary for SPA or JavaScript frontend apps that need to maintain authenticated sessions with Ory endpoints configured on compatible domains. The target URL should match your deployed Ory domain or local tunnel. No additional dependencies are required beyond native browser support for fetch.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-model.mdx#_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nfetch(\"https://ory.your-custom-domain.com/\", {\n  credentials: \"include\",\n})\n```\n\n----------------------------------------\n\nTITLE: Create OAuth2 Client using Ory CLI\nDESCRIPTION: This shell script uses the Ory CLI to create a new OAuth2 client in the Ory Network. It sets the client's name, grant types, response types, scopes, and redirect URI. The script requires the Ory Network project ID and client name as input and includes flags to configure the client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client \\\n  --project ORY_NETWORK_PROJECT_SLUG_OR_ID \\\n  --name YOUR_CLIENT_NAME \\\n  --grant-type authorization_code,refresh_token \\\n  --response-type code,id_token \\\n  --scope openid,offline \\\n  --redirect-uri http://127.0.0.1:5555/callback\n```\n\n----------------------------------------\n\nTITLE: Example: Running `ory perform authorization-code` with Client Credentials\nDESCRIPTION: Demonstrates how to run the `ory perform authorization-code` command, providing the essential OAuth 2.0 client ID and client secret via command-line flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform-authorization-code.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory perform authorization-code --client-id ... --client-secret ...\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration via CLI (Shell)\nDESCRIPTION: This shell command updates the Ory Identities configuration for a given project and workspace by uploading a modified YAML file. Requires: Ory CLI, valid project and workspace IDs, and the desired YAML configuration file. Input is the edited config file; output is the updated session policy on the server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Hydra Update OAuth2 Client Example\nDESCRIPTION: This example demonstrates updating a client.  It shows how to update a client with a specific ID, setting redirect URIs, grant types, response types, and scopes.  Dependencies include a running Hydra instance and the appropriate client ID. Input is the client ID and other options. Output is the updated client configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-update-oauth2-client.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nhydra update oauth2-client <client-id-here> --redirect-uri http://localhost/cb --grant-type authorization_code --response-type code --scope core,foobar\n```\n\n----------------------------------------\n\nTITLE: Handler Configuration in JSON\nDESCRIPTION: This snippet shows an example of how to configure a handler in JSON.  The configuration can be defined per Access Rule and this configuration overrides values from the global configuration. This example overrides the anonymous authenticator's subject.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\",\n    \"preserve_host\": true,\n    \"strip_path\": \"/api/v1\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route/<.*>\",\n    \"methods\": [\"GET\", \"POST\"]\n  },\n  \"authenticators\": [{ \"handler\": \"anonymous\", \"config\": { \"subject\": \"anon\" } }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Recovery Flow using Go SDK\nDESCRIPTION: Demonstrates fetching an Ory recovery flow using its unique flow ID with the official Ory Go SDK. This is typically used in Go backend applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_39\n\nLANGUAGE: go\nCODE:\n```\n{getRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Oathkeeper Access Rule Example with Header Mutator (JSON)\nDESCRIPTION: A JSON representation of an Oathkeeper access rule employing the header mutator. It adds X-User and X-Some-Arbitrary-Data headers to the outgoing request, using Go text/template to extract values from session data. Required dependency: Oathkeeper running with proper access rule support. Inputs: matching HTTP requests; outputs: transformed requests with additional headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/<.*>\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"header\",\n      \"config\": {\n        \"headers\": {\n          \"X-User\": \"{{ print .Subject }}\",\n          \"X-Some-Arbitrary-Data\": \"{{ print .Extra.some.arbitrary.data }}\"\n        }\n      }\n    }\n  ]\n}\n\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Identity via Admin API (Shell)\nDESCRIPTION: This shell command uses `curl` to call the Ory Admin API's `/admin/identities` endpoint to create a new user identity. It requires an API key for authorization and specifies the identity schema and traits (like the user's email) in the JSON payload. This step creates the foundational user account.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/40_invite-users.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n  --header \"Authorization: Bearer {ORY_API_KEY}\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n     \"email\": \"$USER_EMAIL_ADDRESS\"\n    }\n  }' https://{project-slug}.projects.oryapis.com/admin/identities\n```\n\n----------------------------------------\n\nTITLE: Creating an OAuth 2.0 Client\nDESCRIPTION: Creates an OAuth 2.0 client using the Hydra CLI. It uses the `hydra create client` command executed within a Docker container. The output is parsed using `jq` to extract the client ID and secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_9\n\nLANGUAGE: Shell\nCODE:\n```\nclient=$(docker compose -f quickstart.yml exec hydra \\\n    hydra create client \\\n    --endpoint http://127.0.0.1:4445/ \\\n    --format json \\\n    --grant-type client_credentials)\n\n# We parse the JSON response using jq to get the client ID and client secret:\nclient_id=$(echo $client | jq -r '.client_id')\nclient_secret=$(echo $client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: Skipping TLS Verification in the Go SDK Client\nDESCRIPTION: Illustrates how to configure the Ory Hydra Go SDK's underlying HTTP client to bypass TLS certificate verification. This is often necessary in development environments using self-signed certificates. It involves creating a custom `http.Client` with a `tls.Config` where `InsecureSkipVerify` is set to `true`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_7\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n  \"crypto/tls\"\n  \"fmt\"\n  \"net/http\"\n\n  client \"github.com/ory/hydra-client-go\"\n)\n\nfunc main() {\n  skipTLSClient := &http.Client{\n    Transport: &http.Transport{\n      TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\n    },\n    Timeout: 10,\n  }\n  config := client.NewConfiguration()\n  config.Servers = []client.ServerConfiguration{\n    {\n      URL: \"https://hydra.localhost:4444\", // Public API URL\n    },\n  }\n  config.HTTPClient = skipTLSClient\n  c := client.NewAPIClient(config)\n  fmt.Println(c.PublicApi.RevokeOAuth2Token(context.Background()).Token(\"some_token\").Execute())\n\n  // ...\n}\n\n```\n\n----------------------------------------\n\nTITLE: Base64-Encoding a Jsonnet Data Mapper for Ory CLI Integration - Shell\nDESCRIPTION: This shell command encodes your 'your-data-mapping.jsonnet' file into Base64, suitable for use as a mapper_url in the Ory configuration. Prerequisites: a valid local Jsonnet file. Input: Jsonnet file path. Output: Base64-encoded string on stdout. Limitation: stdout output must be captured or used appropriately; relies on standard Unix tools.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/25_github.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Example: Updating Identity Schema for Email Verification (Diff)\nDESCRIPTION: Provides a diff example showing how to integrate the email verification configuration (`ory.sh/kratos`) into an existing identity schema's email trait. This enables Ory Kratos to target this email address for verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_account-activation-email-verification.mdx#_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"minLength\": 3,\n+         \"ory.sh/kratos\": {\n+           \"verification\": {\n+             \"via\": \"email\"\n+           }\n+         }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying Running Processes for Ory Kratos and PostgreSQL Using Bash Shell\nDESCRIPTION: Checks active processes to confirm the Ory Kratos service and PostgreSQL backend are running under the expected users and commands, indicating a successful deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_17\n\nLANGUAGE: bash\nCODE:\n```\nps ax | grep kratos\n19191 ?        Ssl    0:00 /opt/kratos/bin/kratos -c /opt/kratos/config/kratos.yml serve\n19206 ?        Ss     0:00 postgres: 12/main: kratos kratos 127.0.0.1(36094) idle\n```\n\n----------------------------------------\n\nTITLE: Configuring 'cookie_session' Authenticator with 'forward_http_headers' in Access Rule\nDESCRIPTION: This YAML snippet shows how to configure the 'cookie_session' authenticator in an Access Rule, specifically demonstrating the use of `forward_http_headers`. This parameter allows specifying which headers from the incoming request should be forwarded to the `check_session_url` endpoint for validation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: cookie_session\n    config:\n      check_session_url: https://session-store-host\n      only:\n        - sessionid\n      forward_http_headers:\n        - Connect\n        - Authorization\n        - Cookie\n        - X-Forwarded-For\n```\n\n----------------------------------------\n\nTITLE: Configuring Mutators in Ory Oathkeeper (YAML)\nDESCRIPTION: Enables and configures the `noop` and `id_token` mutators in Oathkeeper's main configuration file (`oathkeeper.yml`). The `id_token` mutator is set up with its issuer URL, the location of its JWKS file (for signing keys), and a Go template defining the claims to include in the generated JWT, specifically embedding the session's extra data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nmutators:\n  noop:\n    enabled: true\n\n  id_token:\n    enabled: true\n    config:\n      issuer_url: http://127.0.0.1:4455/\n      jwks_url: file:///etc/config/oathkeeper/id_token.jwks.json\n      claims: |\n        {\n          \"session\": {{ .Extra | toJson }}\n        }\n```\n\n----------------------------------------\n\nTITLE: Complete Nginx Configuration with Locations\nDESCRIPTION: This Nginx configuration file integrates the upstream API definitions, server blocks for HTTP and HTTPS, and location directives. Location directives are defined for the root (`/`), admin (`/admin`), and identities (`/identities`) paths. The configuration sets up proxying to the public and admin APIs based on the requested URL. Access control is implemented within the `/admin` location using a remote address and a secret parameter, allowing traffic based on these criteria.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_28\n\nLANGUAGE: nginx\nCODE:\n```\nupstream public_api {\n        server 127.0.0.1:4433;\n        server 127.0.0.1:4433; # We can load balance the traffic to support scaling\n}\nupstream admin_api {\n        server 127.0.0.1:4434;\n        server 127.0.0.1:4434;\n}\nserver {\n        listen 80;\n        server_name accounts.example.com;\n        if ($host = accounts.example.com) {\n                return 301 https://$host$request_uri;\n        } # managed by Certbot\n}\nserver {\n    listen [::]:443 ssl ipv6only=on; # managed by Certbot\n    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/accounts.example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/accounts.example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n    location / {\n                proxy_pass http://public_api;\n                proxy_redirect          off;\n                proxy_set_header        Host            $host;\n                proxy_set_header        X-Real-IP       $remote_addr;\n                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n    location /admin {\n    # Example of managing access control\n    # for the /admin endpoint\n    # in that example we allow access\n    # either from the subnet\n    # or by checking query parameter ?secret=\n                set $allow 0;\n    # Check against remote address\n                if ($remote_addr ~* \"172.24.0.*\") {\n                        set $allow 1;\n                }\n    # Check against ?secret param\n                if ($arg_secret = \"GuQ8alL2\") {\n                        set $allow 1;\n                }\n                if ($allow = 0) {\n                        return 403;\n                }\n\n                rewrite /admin/(.*) /$1  break;\n\n                proxy_pass http://admin_api;\n                proxy_redirect          off;\n                proxy_set_header        Host            $host;\n                proxy_set_header        X-Real-IP       $remote_addr;\n                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    location /identities {\n                proxy_pass http://admin_api;\n                proxy_redirect          off;\n                proxy_set_header        Host            $host;\n                proxy_set_header        X-Real-IP       $remote_addr;\n                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Password Migration Web Hook Configuration - YAML\nDESCRIPTION: Presents YAML configuration for enabling and authenticating a password migration web hook in Ory Identities. Requires specification of the hook URL, authentication type (such as API key), and credential usage. Input includes the configuration values; output is YAML consumed by the Ory configuration backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      config:\n        migrate_hook:\n          enabled: true\n          config:\n            url: https://example.org/migrate-password\n            auth:\n              type: api_key\n              config:\n                name: Authorization\n                value: { API Key value }\n                in: header # alternatively \"cookie\"\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Client JSON Definition Format - JSON\nDESCRIPTION: This snippet specifies the required input format for the 'hydra import client' command. It is an array of JSON objects where each object represents an OAuth 2.0 client including fields such as 'client_secret' and other attributes conforming to Hydra's OAuth 2.0 Client model. This format is critical for the import command to parse and create clients successfully. Input JSON must be valid and match Hydra's expected client schema. Note that this command does not update existing clients; duplicates will cause failure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-client.md#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"client_secret\": \"...\"\n    // ... all other fields of the OAuth 2.0 Client model are allowed here\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Hydra binaries\nDESCRIPTION: Downloads, extracts, and cleans up the Ory Hydra binary from the Github releases page. It navigates to /opt/hydra/bin, downloads the latest release, extracts the archive, and removes unnecessary files. Dependencies: wget, tar. Note: The dynamic substitution of version depends on `useLatestRelease` and `useLatestReleaseFilename` functions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ncd /opt/hydra/bin\n# Download a new version of Ory Hydra\nwget https://github.com/ory/hydra/releases/download/${useLatestRelease(\"hydra\")}/hydra_${useLatestReleaseFilename(\n   \"hydra\",\n   )}-linux_64bit.tar.gz\n# Extract contents\ntar xfvz hydra_${useLatestRelease(\"hydra\")}-linux_64bit.tar.gz\n# Remove redundant files\nrm *md\nrm LICENSE\n```\n\n----------------------------------------\n\nTITLE: Defining Detailed User-facing Error Object Structure in JSON\nDESCRIPTION: This JSON object snippet shows the full error keys used by Ory Kratos to convey detailed user-facing error information, including the HTTP status code, human-readable message, a reason string, and debug info for troubleshooting. This detailed error structure helps implement a comprehensive error UI and aids developers in diagnosing issues based on the data contained within the error response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-facing-errors.md#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"code\": 500,\n  \"message\": \"some message\",\n  \"reason\": \"some reason\",\n  \"debug\": \"some debug info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling PKCE Completely for OIDC Providers in YAML Configuration\nDESCRIPTION: This YAML snippet disables PKCE entirely for an OIDC provider in Ory Identities. Setting 'pkce' to 'never' ensures PKCE will not be performed, even if the provider advertises support. This may be necessary for compatibility or specific use cases. The snippet should be inserted into the identity configuration and applied afterward.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/oidc-pkce.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nselfservice:\n  methods:\n    oidc:\n      enabled: true\n      config:\n        providers:\n          - id: generic\n            provider: generic # or another provider\n            pkce: never # do not perform PKCE even if the provider advertises support for it.\n            # ... other configuration options\n# ...\n```\n\n----------------------------------------\n\nTITLE: Hydra Client Secret Encryption Example\nDESCRIPTION: This example demonstrates how to encrypt a client secret during an update using PGP encryption. The `--keybase` flag encrypts the secret using a Keybase username. Input is the client ID, client name, grant type, response type, scopes, and the keybase username. Output is the updated client with an encrypted secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-update-oauth2-client.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nhydra update oauth2-client e6e96aa5-9cd2-4a70-bf56-ad6434c8aaa2 --name \"my app\" --grant-type client_credentials --response-type token --scope core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: API Response Structure for Native App Registration with Session Hook\nDESCRIPTION: Illustrates the JSON response structure returned by the Ory API when a user registers through a native application (API client) and the 'session' hook is active. The response includes the created session object, a session token for client-side usage, and the user's identity information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/session.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"session\": {\n    \"id\": \"...\"\n    // ...\n  },\n  \"session_token\": \"...\",\n  \"identity\": {\n    \"id\": \"...\"\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Login Flow from Remote Source (MDX)\nDESCRIPTION: This code block uses the `CodeFromRemote` component to embed a code snippet from a remote source, likely a GitHub repository. The purpose is to illustrate a complete example of fetching a login flow in a server-side application, complementing the preceding code example. The imported code provides further context.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/10_crsf.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<CodeFromRemote\n  lang=\"js\"\n  link=\"https://github.com/ory/kratos-selfservice-ui-node/blob/3e4eacea49763f455604fdbd5bea1f90b6f8fee7/src/routes/login.ts#L66\"\n  src=\"https://raw.githubusercontent.com/ory/kratos-selfservice-ui-node/master/src/routes/login.ts\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Deny Authorizer Globally YAML\nDESCRIPTION: YAML configuration snippet demonstrating how to enable the built-in `deny` authorizer handler globally in the Ory Oathkeeper configuration file (`oathkeeper.yml`). Setting `enabled` to `true` activates this authorizer, which always denies access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthorizers:\n  deny:\n    # Set enabled to \"true\" to enable the authenticator, and \"false\" to disable the authenticator. Defaults to \"false\".\n    enabled: true\n```\n\n----------------------------------------\n\nTITLE: Inherited Options from Parent Commands\nDESCRIPTION: Options inherited from the parent 'ory open' command. Includes configuration path, project selection, and automatic confirmation of dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string    Path to the Ory Network configuration file.\n      --project string   The project to use, either project ID or a (partial) slug.\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Refreshing an Access Token using JavaScript Fetch API\nDESCRIPTION: Demonstrates sending a POST request to an OAuth2 token endpoint using the JavaScript `fetch` API to exchange a refresh token for a new access token, ID token (if applicable), and potentially a new refresh token. Requires the token endpoint URL, refresh token, client ID, client secret, and desired scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/refresh-token-grant.mdx#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Set up the endpoint and refresh token\nconst endpoint = \"https://oauth2.example.com/token\"\nconst refreshToken = \"<refresh token>\"\nconst clientId = \"<client id>\"\nconst clientSecret = \"<client secret>\"\n\nconst params = new URLSearchParams({\n  grant_type: \"refresh_token\",\n  refresh_token: refreshToken,\n  scope: \"scope1 scope2\",\n  client_id: clientId,\n  client_secret: clientSecret,\n})\n// Send a POST request to refresh the access token\nfetch(endpoint, {\n  method: \"POST\",\n  headers: {\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\n  },\n  body: params.toString(),\n})\n  .then((response) => {\n    if (!response.ok) {\n      throw new Error(\"Failed to refresh access token\")\n    }\n    return response.json()\n  })\n  .then((data) => {\n    console.log(\"New access token:\", data.access_token)\n    console.log(\"New ID token:\", data.id_token)\n    console.log(\"New refresh token:\", data.refresh_token)\n  })\n  .catch((error) => {\n    console.error(error)\n  })\n```\n\n----------------------------------------\n\nTITLE: Shell commands to clone Ory Kratos repository and run Docker Compose\nDESCRIPTION: This code snippet provides shell commands to clone the Ory Kratos repository and start necessary services using Docker Compose. It ensures the environment is ready for the quickstart demo, including checking for available network ports and running the Docker containers with specified compose files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ngit clone https://github.com/ory/kratos.git\ncd kratos\n\\\ngit checkout ${useLatestRelease('kratos')}\ndocker-compose -f quickstart.yml -f quickstart-standalone.yml up --force-recreate\n# If you have SELinux, run:\ndocker-compose -f quickstart.yml -f quickstart-selinux.yml -f quickstart-standalone.yml up --force-recreate\n```\n\n----------------------------------------\n\nTITLE: Registration Flow Response JSON Structure\nDESCRIPTION: This JSON object represents a UI node within the registration flow, specifically for the email input trait. It includes attributes such as the input's name, type, value, and whether it is disabled. Additionally, it contains messages indicating validation errors and meta-information for the UI label, assisting in rendering and validation feedback in the registration form.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/password.missing.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"traits.email\",\n    \"type\": \"email\",\n    \"value\": \"\",\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000001,\n      \"text\": \"\"\" isn't valid \"email\"\",\n      \"type\": \"error\"\n    },\n    {\n      \"id\": 4000001,\n      \"text\": \"length must be >= 3, but got 0\",\n      \"type\": \"error\"\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"E-Mail\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Keto Engine ACP Ory Globally YAML\nDESCRIPTION: YAML configuration snippet for enabling and setting up the `keto_engine_acp_ory` authorizer globally in `oathkeeper.yml`. It specifies the base URL of the Ory Keto service and placeholder configuration fields for the authorizer.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthorizers:\n  keto_engine_acp_ory:\n    enabled: true\n\n    config:\n      base_url: http://my-keto/\n      required_action: ...\n      required_resource: ...\n      subject: ...\n      flavor: ...\n```\n\n----------------------------------------\n\nTITLE: Creating a Flutter App Project\nDESCRIPTION: Commands to initialize a new Flutter application project named 'myapp' and navigate to its directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nflutter create myapp\ncd myapp\n```\n\n----------------------------------------\n\nTITLE: Relation Tuples Query Definition (Proto)\nDESCRIPTION: Defines the query parameters for listing relationships, allowing for filtering by namespace, object, relation, and subject. The namespace field is required for all queries.  The object, relation, and subject fields are optional and allow for flexible querying.  This snippet does not have external dependencies.  The input parameters are the namespace and optional object, relation, and subject. The output is a list of relationships based on the filter.  There are no inherent limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_3\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### ListRelationTuplesRequest.Query\n\nThe query for listing relationships. Clients can specify any optional field to\npartially filter for specific relationships.\n\nExample use cases (namespace is always required):\n\n- object only: display a list of all permissions referring to a specific object\n- relation only: get all groups that have members; get all directories that have\n  content\n- object & relation: display all subjects that have a specific permission\n  relation\n- subject & relation: display all groups a subject belongs to; display all\n  objects a subject has access to\n- object & relation & subject: check whether the relation tuple already exists\n\n| Field     | Type                                                  | Label | Description                          |\n| --------- | ----------------------------------------------------- | ----- | ------------------------------------ |\n| namespace | [string](#string)                                     |       | Required. The namespace to query.    |\n| object    | [string](#string)                                     |       | Optional. The object to query for.   |\n| relation  | [string](#string)                                     |       | Optional. The relation to query for. |\n| subject   | [Subject](#ory-keto-relation_tuples-v1alpha2-Subject) |       | Optional. The subject to query for.  |\n```\n\n----------------------------------------\n\nTITLE: Tunneling Ory APIs with Project Env Var Bash\nDESCRIPTION: Shows how to use the `ory tunnel` command by setting the Ory project ID or slug using the `ORY_PROJECT` environment variable. The command targets a local application running on `http://localhost:3000`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_1\n\nLANGUAGE: Bash\nCODE:\n```\nORY_PROJECT=<project-id-or-slug> ory tunnel http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Configuring HSM Integration Ory Hydra YAML\nDESCRIPTION: YAML configuration snippet for enabling and specifying the settings for Hardware Security Module (HSM) integration within Ory Hydra. It points to the PKCS#11 library path, the target token label, and the authentication PIN.\n\nDependencies: Ory Hydra, AWS CloudHSM client configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nhsm:\n   enabled: true\n   library: /opt/cloudhsm/lib/libcloudhsm_pkcs11.so\n   token_label: \"hsm1\"\n   pin: \"{{ HSM_PIN }}\"\n```\n\n----------------------------------------\n\nTITLE: Oathkeeper Configuration YAML\nDESCRIPTION: This YAML file configures Ory Oathkeeper.  This file likely defines proxy rules, authentication methods, and various settings to govern how Oathkeeper manages access to services. The specific contents will determine how requests are authenticated, authorized, and routed to backend services.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_4\n\nLANGUAGE: YAML\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Obtaining Access Token Using Basic Authentication with JavaScript\nDESCRIPTION: This JavaScript snippet demonstrates how to obtain an OAuth2 access token using Basic Authentication in the Client Credentials flow. It encodes the client ID and client secret in the Authorization header as a Base64-encoded string. The fetch API sends a POST request to the token endpoint with the Content-Type header set to application/x-www-form-urlencoded and a request body specifying the grant_type and desired scope. The snippet expects the token server's JSON response with access token data. Dependencies include a Base64 and URL encoding function. The snippet assumes variables clientID and clientSecret are provided.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst clientID = \"the-client-id\"\nconst clientSecret = \"the-secret-id\"\nconst basicAuth = bas64_encode(url_encode(clientID) + \":\" + url_encode(clientSecret))\n\nconst requestOptions = {\n  method: \"POST\",\n  headers: {\n    Authorization: \"Basic \" + basicAuth,\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\n  },\n  body: \"grant_type=client_credentials&scope=read\",\n}\n\nfetch(\"https://your-project.projects.oryapis.com/oauth2/token\", requestOptions)\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Minimum Numeric Constraint in Ory (JSON)\nDESCRIPTION: Indicates that a numeric value does not meet the required minimum (must be >= 5). Both actual and minimum values are displayed via context. Used in numeric validation; message id is 4000018.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_41\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000018,\n  \"text\": \"must be \\u003e= 5 but found 3\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual\": 3,\n    \"minimum\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: OpenID Connect ID Token Payload Structure (JSON)\nDESCRIPTION: This JSON snippet illustrates the typical payload structure found within an OpenID Connect ID token, which is a JSON Web Token (JWT). It contains standard claims like issuer (`iss`), subject (`sub`), audience (`aud`), expiration time (`exp`), issued at time (`iat`), and nonce, along with standard OIDC claims providing information about the user such as name, email, and email verification status. This token is used by the client application to verify user identity and session information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/overview/oidc-concepts.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"iss\": \"https://my-domain.projects.oryapis.com\",\n  \"sub\": \"some-identity-id\",\n  \"aud\": \"some-client-id\",\n  \"exp\": 1311281970,\n  \"iat\": 1311280970,\n  \"nonce\": \"KxSty13b2L\",\n  \"name\": \"Jane Doe\",\n  \"given_name\": \"Jane\",\n  \"family_name\": \"Doe\",\n  \"email\": \"jane@example.org\",\n  \"email_verified\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching user settings flow data using cURL and jq in Bash\nDESCRIPTION: This snippet performs a secured GET request to retrieve a specific self-service settings flow from an API endpoint, using an authorization token. The response is filtered with jq to extract UI nodes related to password inputs, facilitating dynamic form rendering or validation handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.policy.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -s -X GET \\n    -H \"Authorization: Bearer $sessionToken\"  \\n    -H \"Accept: application/json\"  \\n    'https://playground.projects.oryapis.com/self-service/settings/flows?id=f71743cd-700d-4a30-9275-8edc90de07cc' | \\n      jq -r '.ui.nodes[] | select(.group==\"password\")'\n```\n\n----------------------------------------\n\nTITLE: Updating Verification/Recovery Addresses with Ory Webhooks JSON5\nDESCRIPTION: Provides a JSON5 example of the response payload structure used by a webhook to update identity verification (`verifiable_addresses`) or recovery (`recovery_addresses`) addresses. These fields replace the existing lists, often needing to align with the `identity.traits`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_14\n\nLANGUAGE: json5\nCODE:\n```\n{\n  identity: {\n    traits: {\n      email: \"john@example.org\",\n    },\n    // highlight-start\n    verifiable_addresses: [\n      {\n        status: \"completed\",\n        value: \"john@example.org\",\n        verified: true,\n        via: \"email\",\n      },\n    ],\n    recovery_addresses: [\n      {\n        value: \"john@example.org\",\n        via: \"email\",\n      },\n    ],\n    // highlight-end\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Setting SECRETS_DEFAULT Environment Variable\nDESCRIPTION: This command shows how to set the `SECRETS_DEFAULT` environment variable when running the Ory Kratos Docker image. This variable is used to specify the secret for signing and verifying signatures and encrypting data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## Example:\n\ndocker run -e SECRETS_DEFAULT=\"CHANGE-ME\" oryd/kratos:{version}\n```\n\n----------------------------------------\n\nTITLE: Data mapping JSONnet snippet for Slack OAuth in Ory\nDESCRIPTION: This Jsonnet snippet defines claim mappings for Slack OAuth integration, setting the email_verified flag and associating the email trait with the claims' email. It is used in both Console and CLI configurations to map OAuth claims to Ory Identity schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/45_slack.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: true,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // It's assumed that Slack requires an email to be verified to be accessible\n      // via OAuth (because they don't provide a email_verified field).\n      email: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Cleaning Up Docker Compose Environment (Shell)\nDESCRIPTION: Provides shell commands using `docker-compose` to stop and remove the Docker containers, networks, and volumes associated with the services defined in the specified compose files (`quickstart.yml` and `quickstart-oathkeeper.yml`). The `-v` flag ensures volumes are removed, and the second command forcefully removes stopped containers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ndocker-compose -f quickstart.yml -f quickstart-oathkeeper.yml down -v\ndocker-compose -f quickstart.yml -f quickstart-oathkeeper.yml rm -f -s -v\n```\n\n----------------------------------------\n\nTITLE: Check Permission with Keto CLI (Shell)\nDESCRIPTION: This shell command uses the Keto CLI to check if a specific subject is allowed to perform a specific action on a given object.  It uses the `keto check` command with the subject, relation, namespace, and object name to verify permission.  The expected output is either \"Allowed\" or \"Denied\".\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n# Is \"*\" allowed to \"view\" the object \"videos\":\"/cats/2.mp4\"?\nketo check \"*\" view videos /cats/2.mp4\n```\n\nLANGUAGE: shell\nCODE:\n```\n# Is \"*\" allowed to \"view\" the object \"videos\":\"/cats/1.mp4\"?\nketo check \"*\" view videos /cats/1.mp4\n```\n\n----------------------------------------\n\nTITLE: Configuring Secrets in `kratos.yml` for Production Use\nDESCRIPTION: This snippet shows YAML changes to replace default insecure secret strings with unique, randomly generated secrets for cookies and cipher encryption. It also adjusts logging settings to prevent leaking sensitive data from logs. Proper secret management is critical for securing user sessions and data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_41\n\nLANGUAGE: YAML\nCODE:\n```\nsecrets:\n  cookie:\n    - xgrxYZLM0jGgJqijvvf73x30URJkRENo\n  cipher:\n    - rtxrVjiWwe85nxB9XeWoDP8U17+sT6kH\n\nlog:\n  leak_sensitive_values: false\n```\n\n----------------------------------------\n\nTITLE: Command-Specific Options for ory create workspace\nDESCRIPTION: Options specific to the 'ory create workspace' command, including help flag and the ability to specify a workspace name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-workspace.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help          help for workspace\n  -n, --name string   The name of the workspace, required when quiet mode is used\n```\n\n----------------------------------------\n\nTITLE: Handling Boolean Checkboxes with Hidden Fields in HTML Forms for Ory Kratos - JavaScript/HTML\nDESCRIPTION: This snippet shows a technique to handle boolean fields in HTML forms that parse correctly with Ory Kratos. Since unchecked checkboxes do not send any value, a hidden input with the value \"false\" is used alongside the checkbox input with the value \"true\". This ensures the field defaults to false if unchecked, allowing Ory Kratos to correctly interpret the boolean value.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/html-forms.md#_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n<input type=\"hidden\" value=\"false\" name=\"traits.path.to.my.boolean\" />\n<input type=\"checkbox\" value=\"true\" name=\"traits.path.to.my.boolean\" />\n```\n\n----------------------------------------\n\nTITLE: Tunneling for Local Development Bash\nDESCRIPTION: Provides a specific example for setting up the Ory Tunnel for local development. The command connects to an Ory project (specified by `--project`) and targets a local application running at `http://localhost:3000`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_6\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Kratos SQL Migration Command Options (Shell)\nDESCRIPTION: Lists the command-line options available for the `kratos migrate sql` command. Options include specifying configuration files (`-c`, `--config`), reading the database connection string from the environment (`-e`, `--read-from-env`), automatically confirming prompts (`-y`, `--yes`), and displaying help information (`-h`, `--help`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-migrate-sql.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n  -h, --help             help for sql\n  -e, --read-from-env    If set, reads the database connection string from the environment variable DSN or config file key dsn.\n  -y, --yes              If set all confirmation requests are accepted without user interaction.\n```\n\n----------------------------------------\n\nTITLE: Basic Syntax for `kratos identities validate` (Shell)\nDESCRIPTION: Demonstrates the basic command-line syntax for validating local identity files using `kratos identities validate`. Identity data can be provided as one or more JSON file paths passed as arguments or piped via standard input.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-validate.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos identities validate <file.json [file-2.json [file-3.json] ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Hydra with Example Configuration\nDESCRIPTION: Complete Helm installation command for Ory Hydra with memory database and example configuration for local testing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\nhelm install hydra-example ory/hydra \\\n    --set 'hydra.config.secrets.system={'$(LC_ALL=C tr -dc 'A-Za-z0-9' < /dev/urandom | base64 | head -c 32)'}' \\\n    --set 'hydra.config.dsn=memory' \\\n    --set 'hydra.config.urls.self.issuer=http://public.hydra.localhost/' \\\n    --set 'hydra.config.urls.login=http://example-idp.localhost/login' \\\n    --set 'hydra.config.urls.consent=http://example-idp.localhost/consent' \\\n    --set 'hydra.config.urls.logout=http://example-idp.localhost/logout' \\\n    --set 'ingress.public.enabled=true' \\\n    --set 'ingress.admin.enabled=true' \\\n    --set 'hydra.dangerousForceHttp=true' \\\n    --set 'hydra.dev=true'\n```\n\n----------------------------------------\n\nTITLE: Listing Help Option for Kratos Version Command - CLI Shell\nDESCRIPTION: Demonstrates the available -h and --help flags for the \"kratos version\" command, which output usage instructions to the console. These flags do not change program state, but provide guidance on usage. No other dependencies; requires Kratos CLI to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-version.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for version\n```\n\n----------------------------------------\n\nTITLE: Displaying Kratos CLI Help\nDESCRIPTION: Shows the available command-line options and help information for the main `kratos` command. Using `-h` or `--help` provides usage details and lists available subcommands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for kratos\n```\n\n----------------------------------------\n\nTITLE: Example using jq to find identities by recovery email domain\nDESCRIPTION: Provides a practical example of how to use the `kratos identities get` command in conjunction with `kratos identities list` and the `jq` command-line JSON processor. This pipeline demonstrates how to filter identities based on a specific recovery email domain ('@ory.sh') using `jq` and then retrieve the full details for those filtered identities by extracting their IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-get.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nTo get the identities with the recovery email address at the domain \"ory.sh\", run:\n\n\t$ kratos identities get $(kratos identities list --format json | jq -r 'map(select(.recovery_addresses[].value | endswith(\"@ory.sh\"))) | .[].id')\n```\n\n----------------------------------------\n\nTITLE: Retrieving Verification Flow via cURL (Native)\nDESCRIPTION: Uses cURL to send a GET request to the `/self-service/verification/flows?id=<flow-id>` endpoint to retrieve an existing verification flow, typically for a native (API-based) application. Displays both the cURL command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_54\n\nLANGUAGE: shell\nCODE:\n```\n{getVerificationCurlApi}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(getVerificationCurlApiJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Embedding Browser Window Screenshot (MDX)\nDESCRIPTION: This MDX snippet uses the imported `BrowserWindow` component to display a screenshot of the Ory Console page for configuring project API keys. It includes a URL attribute for context and an image element within the component.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/personal-access-token.mdx#_snippet_2\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<BrowserWindow url=\"https://console.ory.sh/projects/current/developers\">\n\n![Configure project API keys in the Ory Console](./_static/api_keys/pak.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with HSM Enabled Using Docker Compose\nDESCRIPTION: This shell command launches Ory Hydra with HSM support enabled inside Docker containers. It uses a docker-compose YAML file designed for quickstart setups incorporating SoftHSM/OpenSC. The command builds the containers if necessary and starts the environment, enabling HSM integration testing and development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker-compose -f quickstart-hsm.yml up --build\n```\n\n----------------------------------------\n\nTITLE: Authentication Helper Methods Using Expo SecureStore\nDESCRIPTION: Utility functions in 'src/helpers/auth.tsx' that wrap Expo's SecureStore and AsyncStorage to securely store, retrieve, and delete authentication tokens and session data, ensuring persistence across app sessions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n// getAuthenticatedSession method that uses SecureStore or AsyncStorage\n// Other helper methods for setting and removing tokens\n```\n\n----------------------------------------\n\nTITLE: Goreleaser Environment Preparation - YAML\nDESCRIPTION: A YAML snippet for Ory projects using goreleaser, specifying environment variables and pre-release hooks for Go modules and build tools. Dependencies include Go (with module support) and optional tools like packr2. Essential for successful cross-platform packaging and reproducible builds. Inputs are environment settings and shell hooks; expected to be placed in '.goreleaser.yml'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nenv:\n  - GO111MODULE=on\n\nbefore:\n  hooks:\n    - go mod download\n    # - go install github.com/gobuffalo/packr/v2/packr2\n    # - packr2\n\n```\n\n----------------------------------------\n\nTITLE: Updating OAuth 2.0 Client via Hydra CLI - Shell\nDESCRIPTION: Demonstrates how to update an existing OAuth 2.0 client using the hydra update client CLI command, specifying the client ID, redirect URIs, grant type, response type, and allowed scopes. Requires the Hydra CLI to be installed and configured. Replace <client-id-here> with the target client ID and supply the desired flags for each updated attribute. All unspecified fields will be reverted to defaults or removed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-update-client.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra update client <client-id-here> -c http://localhost/cb -g authorization_code -r code -a core,foobar\n```\n\n----------------------------------------\n\nTITLE: Configuring SQLite Test Database Connection (Go)\nDESCRIPTION: Provides a Go helper function `GetSqlite` used in testing to generate SQLite DSN (Data Source Name) configurations. It allows selecting between an in-memory database (`SQLiteMemory`) or a file-based database (`SQLiteFile`, `SQLiteDebug`), facilitating easier debugging of test failures by persisting the database state to a file (`TestDB.sqlite`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_32\n\nLANGUAGE: go\nCODE:\n```\nfunc GetSqlite(t testing.TB, mode sqliteMode) *DsnT {\n  dsn := &DsnT{\n    MigrateUp:   true,\n    MigrateDown: false,\n  }\n\n  switch mode {\n  case SQLiteMemory:\n    dsn.Name = \"memory\"\n    dsn.Conn = fmt.Sprintf(\"sqlite://file:%s?_fk=true&cache=shared&mode=memory\", t.Name())\n  case SQLiteFile:\n    t.Cleanup(func() {\n      _ = os.Remove(\"TestDB.sqlite\")\n    })\n    fallthrough\n  case SQLiteDebug:\n    dsn.Name = \"sqlite\"\n    dsn.Conn = \"sqlite://file:TestDB.sqlite?_fk=true\"\n  }\n\n  return dsn\n}\n```\n\n----------------------------------------\n\nTITLE: Template content customization based on user identity attributes\nDESCRIPTION: This code demonstrates how to access the `Identity` object within templates to customize email content based on identity attributes such as `id`, `state`, or `traits`. It allows dynamic personalization according to user-specific data stored in the identity schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_6\n\nLANGUAGE: Go\nCODE:\n```\n:::tip\nRead [this document](../manage-identities/overview) to learn more about the Ory Identity and the identity schema.\n:::\n\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identity Configuration\nDESCRIPTION: Use the Ory CLI to list available workspaces and projects to find the necessary IDs, then download the current identity configuration for a specific project in YAML format. This configuration file is used as the basis for making changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/10_sending-sms.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Synopsis for kratos identities get command\nDESCRIPTION: Displays the fundamental command signature for `kratos identities get`. It shows that the command requires one or more identity IDs as arguments and can accept optional flags like `--help` or `--include-credentials`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-get.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities get <id-0 [id-1 ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Run Ory Tunnel for Local Development\nDESCRIPTION: This command uses the Ory CLI to create a tunnel, mirroring Ory API endpoints to the application's domain. This is useful for local development to interact with Ory services, like authentication. The command uses `npx @ory/cli tunnel` and redirects traffic from the Ory API endpoints to the local application, usually running on localhost.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/01_go.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nnpx @ory/cli tunnel --dev http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Command-line flags for importing TLS certificates\nDESCRIPTION: These command-line flags allow specifying the paths to the TLS certificate and key files for enabling HTTPS. Environment variables can be used instead.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/faq.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n--https-tls-cert-path string   Path to the certificate file for HTTP/2 over TLS (https). You can set HTTPS_TLS_KEY_PATH or HTTPS_TLS_KEY instead.\n--https-tls-key-path string    Path to the key file for HTTP/2 over TLS (https). You can set HTTPS_TLS_KEY_PATH or HTTPS_TLS_KEY instead.\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Organization via Ory API - Bash (curl)\nDESCRIPTION: Issues a GET request to fetch the details of a specific organization identified by ORGANIZATION_ID. Requires the relevant PROJECT_ID and authentication via the WORKSPACE_API_KEY. Outputs the organization's metadata as a JSON object. Ensure ORGANIZATION_ID is set to a valid organization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X GET --location \"https://api.console.ory.sh/projects/$PROJECT_ID/organizations/$ORGANIZATION_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Show Help for Alive Command ORY Oathkeeper CLI\nDESCRIPTION: Provides the command-line option to display help documentation specifically for the `alive` subcommand, explaining its usage and available flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-health-alive.md#_snippet_1\n\nLANGUAGE: cli\nCODE:\n```\n  -h, --help   help for alive\n\n```\n\n----------------------------------------\n\nTITLE: Hydra Create Command Options\nDESCRIPTION: Lists the command-line options available for the `hydra create` command. These options allow configuration of the API endpoint, output format, custom HTTP headers, verbosity, and TLS certificate verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for create\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Configuring AES Cipher in Ory Kratos\nDESCRIPTION: This snippet configures the AES cipher algorithm within the Ory Kratos configuration file.  It necessitates a 32-character-long secret string for encryption and decryption. It also requires you to set up secrets key rotation. The 'secrets.cipher' parameter stores the secret. The `ciphers.algorithm` parameter is set to 'aes'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/select-cipher-algorithm.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nsecrets:\n  cipher:\n    - 32-CHARACTER-LONG-STRING-SECRET\nciphers:\n  algorithm: aes\n```\n\n----------------------------------------\n\nTITLE: Setting Cookie Domain in Ory Hydra using YAML\nDESCRIPTION: This YAML snippet specifies the cookie domain for cookies set by Ory Hydra through the 'serve.cookies.domain' key. Setting a domain ensures that cookies are valid and accessible for the intended host and subdomains. The only requirement is a valid domain string in the configuration file. The input is a YAML configuration with the domain specified under the 'serve.cookies' section.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cookies.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\nserve:\n  cookies:\n    domain: example.com\n\n```\n\n----------------------------------------\n\nTITLE: Simulating OAuth2 Introspection Request by Oathkeeper\nDESCRIPTION: This bash snippet illustrates the HTTP request that ORY Oathkeeper makes to the configured introspection URL (`/oauth2/introspect`) when validating a bearer token. It shows the basic POST request with the token included in the request body.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_25\n\nLANGUAGE: bash\nCODE:\n```\nPOST /oauth2/introspect HTTP/1.1\n\ntoken=valid.access.token.from.peter\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client for Client Credentials Grant with Ory CLI in Shell\nDESCRIPTION: Creates an OAuth2 client configured specifically for the Client Credentials Grant flow using the Ory CLI. The client is associated with the previously created project with a specified name and granted the client_credentials grant type. This client will be used for machine-to-machine authentication without user interaction.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Client Credentials Demo\" \\\n  --grant-type client_credentials\n```\n\n----------------------------------------\n\nTITLE: Migrating Legacy Data: Keto CLI, Shell\nDESCRIPTION: Performs the core data migration from the old v0.6 schema to the new v0.7 schema using `keto namespace migrate legacy`. It transforms and transfers data, deleting old tables on success. The `--yes` flag confirms the operation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/v0.7-migration.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nketo namespace migrate legacy --yes\n```\n\n----------------------------------------\n\nTITLE: Exporting Environment Variables for Bulk User Export Shell\nDESCRIPTION: This shell script snippet exports environment variables required for the bulk user export process. These variables include the Auth0 domain, connection ID, and the management API access token.  These variables are crucial for authenticating and interacting with the Auth0 API to retrieve user data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nexport AUTH0_DOMAIN=\"$your_auth0_domain.auth0.com\"\nexport AUTH0_CONNECTION_ID=\"$your_auth0_connection_id\"\nexport AUTH0_TOKEN=\"$your_auth0_management_api_token\"\n```\n\n----------------------------------------\n\nTITLE: Import Example List Component (MDX)\nDESCRIPTION: This code snippet imports the `ExampleList` component from the `@site/src/components/Examples/example-list` module and content from `@site/src/pages/_assets/examples-content`. It then renders the `ExampleList` component, passing in the `customui` object from the imported content as props. This likely displays a list of custom UI examples.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/custom-ui.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport ExampleList from \"@site/src/components/Examples/example-list\"\nimport * as content from \"@site/src/pages/_assets/examples-content\"\n\n<ExampleList {...content.customui} />\n```\n\n----------------------------------------\n\nTITLE: Dumping Hydra tables using pg_dump for migration (PostgreSQL)\nDESCRIPTION: This command uses pg_dump to export specific tables from a PostgreSQL database. It excludes owner and ACL information, quotes all identifiers, and outputs the data to a file named hydra-dump.sql.  The DSN specifies the database connection string.  The -a flag means dump only the data, not the schema.  The tables dumped are those associated with hydra client and OAuth2 data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/merge-multiple-db-secrets.mdx#_snippet_0\n\nLANGUAGE: SQL\nCODE:\n```\npg_dump --verbose -a  \\\n\t--format=p \\\n\t--no-owner \\\n\t--no-acl \\\n\t--quote-all-identifiers \\\n\t-t hydra_client \\\n\t-t hydra_oauth2_authentication_session \\\n\t-t hydra_oauth2_authentication_request \\\n\t-t hydra_oauth2_authentication_request_handled \\\n\t-t hydra_oauth2_consent_request \\\n\t-t hydra_oauth2_consent_request_handled \\\n\t-t hydra_oauth2_code \\\n\t-t hydra_oauth2_access \\\n\t-t hydra_oauth2_refresh \\\n\t-f hydra-dump.sql \\\n\t<DSN>\n```\n\n----------------------------------------\n\nTITLE: Requesting Identities via Token Pagination\nDESCRIPTION: This code snippet demonstrates how to make a GET request to retrieve a page of identities from the Ory API using token-based pagination. It sets the `page_size` and uses the `page_token` for subsequent requests.  Dependencies include the Ory API and access token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/pagination.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nGET https://$PROJECT_SLUG.projects.oryapis.com/admin/identities?page_size=100\nAuthorization: Bearer $ACCESS_TOKEN\n```\n\nLANGUAGE: shell\nCODE:\n```\nGET https://$PROJECT_SLUG.projects.oryapis.com/admin/identities?page_size=100&page_token=30f8507f-40e6-44b9-924f-5f814e3f072e\nAuthorization: Bearer $ACCESS_TOKEN\n```\n\n----------------------------------------\n\nTITLE: Reloading Nginx Service (Bash)\nDESCRIPTION: This command reloads the Nginx service, applying the configuration changes. The `reload` subcommand ensures that the changes are applied without interrupting existing connections.  Dependencies: Nginx service must be running.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_30\n\nLANGUAGE: bash\nCODE:\n```\nservice nginx reload\n```\n\n----------------------------------------\n\nTITLE: Building Custom Docker Image\nDESCRIPTION: This command builds the custom Docker image. It uses the Dockerfile defined in the previous step and tags the image as `ory-oathkeeper-demo`. The image includes the configuration and rules.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ndocker build -t ory-oathkeeper-demo .\n```\n\n----------------------------------------\n\nTITLE: Creating Fizz Migration Files using Ory CLI (Shell)\nDESCRIPTION: Executes the Ory development CLI tool (`ory dev pop migration create`) to generate timestamped `up` and `down` migration files in Fizz format within the specified directory. These files are used to define schema changes and their corresponding rollbacks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_18\n\nLANGUAGE: shell\nCODE:\n```\n.bin/ory dev pop migration create persistence/sql/migrations/templates descriptive_change\n```\n\n----------------------------------------\n\nTITLE: Configuring Identity Schema Trait for Email Verification (JSON)\nDESCRIPTION: Specifies the JSON structure to add to an email trait within the Ory Kratos identity schema. This configuration marks the email address for verification purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_account-activation-email-verification.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"verification\": {\n      \"via\": \"email\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Keto Serve Command Usage\nDESCRIPTION: Shows the basic usage of the `keto serve` command. This command starts the ORY Keto server, enabling it to listen for HTTP and gRPC API requests.  It is crucial for running the authorization service and requires proper configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-serve.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo serve [flags]\n```\n\n----------------------------------------\n\nTITLE: Importing and Including Security Component in MDX\nDESCRIPTION: This snippet imports a reusable security component from a common directory and includes it in the current document. It's a standard pattern for MDX documents to maintain consistent security documentation across the project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/operations/05_api-access-control.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Secure from '../../_common/secure.mdx'\n\n<Secure />\n```\n\n----------------------------------------\n\nTITLE: Running Development Server with npm, yarn, or pnpm\nDESCRIPTION: Provides commands to start the Next.js development server using npm, yarn, or pnpm. The commands initialize the local server at http://localhost:3000, allowing for live editing and previewing of the Next.js pages.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs/README.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n# or\n\nyarn dev\n# or\n\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Basic Jsonnet Object (JSON Syntax)\nDESCRIPTION: Demonstrates the simplest form of a Jsonnet document, which is equivalent to a standard JSON object. This illustrates that basic JSON is valid Jsonnet.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"foo\": \"bar\"\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Jsonnet Code Using the Kratos CLI - Shell\nDESCRIPTION: Uses the Kratos CLI to format Jsonnet scripts according to style guidelines. The command automatically rewrites files in place with consistent formatting. Input is one or more .jsonnet files; output is formatted files. This operation is recommended for maintaining code quality. Requires the Kratos CLI with the 'jsonnet format' subcommand available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nkratos help jsonnet format\n\n# For example:\nkratos jsonnet format --write path/to/files/*.jsonnet\n```\n\n----------------------------------------\n\nTITLE: Setting Complex Configuration via JSON string Environment Variables (Windows CMD)\nDESCRIPTION: This snippet demonstrates how to define complex configuration keys using JSON strings passed in via environment variables in Windows Command Prompt (CMD).\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\n# Windows CMD\nset SOME_NESTED_KEY_AND_ARRAY='[{\"id\":\"foo\"},{\"id\":\"bar\"}]'\n```\n\n----------------------------------------\n\nTITLE: Importing BrowserWindow component in MDX\nDESCRIPTION: Imports the BrowserWindow component from the local theme source for displaying FedCM in an embedded window during documentation or demo pages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/fedcm.mdx#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n```\n\n----------------------------------------\n\nTITLE: Creating Relationships via CLI - Bob - Bash\nDESCRIPTION: This Bash snippet mirrors the previous one, but it creates the relationship tuples based on the bob_policies file. This command will convert the content of `bob_policies` file to relation tuples and use `keto relation-tuple create` command to create them. Error handling is included.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/migrating-legacy-policies.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple parse bob_policies --format json | \\\n  keto relation-tuple create - >/dev/null \\\n  && echo \"Successfully created tuple\" \\\n  || echo \"Encountered error\"\n```\n\n----------------------------------------\n\nTITLE: Querying Ory API with curl and parsing with jq\nDESCRIPTION: This bash snippet uses `curl` to make a GET request to the Ory API. It retrieves settings flows, authenticates using a Bearer token, and specifies JSON as the accepted content type. The output is piped to `jq` to filter and select elements based on the group name 'profile'. The session token must be set in the environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/profile.invalid.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Authorization: Bearer $sessionToken\" \\\n    -H \"Accept: application/json\" \\\n    'https://playground.projects.oryapis.com/self-service/settings/flows?id=f71743cd-700d-4a30-9275-8edc90de07cc' | \\\n      jq -r '.ui.nodes[] | select(.group==\"profile\")'\n```\n\n----------------------------------------\n\nTITLE: Fetching Registration Flow Messages using cURL and jq\nDESCRIPTION: This snippet sends a GET request to the Ory registration flow API using `curl`, specifying the flow ID in the query parameters. The response is piped to `jq`, which filters the JSON output to extract the `ui.messages` array, typically containing user-facing messages related to the flow state (e.g., errors, info). Requires `curl` and `jq` installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/oidc.missing.txt#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -H \"Accept: application/json\" \\\n    'https://playground.projects.oryapis.com/self-service/registration/flows?id=76cec270-1719-4c9e-b09a-4af8281d511e' \\\n    | jq -r '.ui.messages'\n```\n\n----------------------------------------\n\nTITLE: Revoke resources using Ory CLI with options\nDESCRIPTION: This code snippet presents the command-line options available for the 'ory revoke' command, including endpoint specification, output formatting, HTTP headers, and TLS verification. It facilitates users in executing resource revocation with customized settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-revoke.md#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n## ory revoke\n\nRevoke resources\n\n### Options\n\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for revoke\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\"\n```\n\n----------------------------------------\n\nTITLE: Configuring SSL with Certbot (Bash)\nDESCRIPTION: This command uses Certbot to automatically configure SSL/TLS for the specified domain. It retrieves an SSL certificate from Let's Encrypt.  The `-d` option specifies the domain. The command prompts the user for input.  The output indicates that the user should select to redirect HTTP to HTTPS traffic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_25\n\nLANGUAGE: bash\nCODE:\n```\ncertbot --nginx -d oauth2.example.com\n```\n\n----------------------------------------\n\nTITLE: Customizing Migration Arguments for Ory Hydra TTL Job (YAML)\nDESCRIPTION: This YAML block expands on the previous migration job example, showing how to supply a list of custom arguments to the migration job. The 'customArgs' array lets administrators specify Hydra and pg_cron-enabled database names as well as command order. Ensure replacement of placeholders with actual database names before deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/postgresql-ttl-migrations.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nhydra:\n  customMigrations:\n    jobs:\n      oel-postgresql-ttl:\n        enabled: true\n        customArgs:\n          [\n            \"migrate\",\n            \"postgresql-addons\",\n            \"up\",\n            \"--hydra-db-name\",\n            \"<your hydra database>\",\n            \"--pgcron-db-name\",\n            \"<database where pg_cron is installed>\",\n          ]\n\n```\n\n----------------------------------------\n\nTITLE: Define Keto CLI Alias for Docker (Shell)\nDESCRIPTION: This shell command creates an alias for the Keto CLI when running inside a Docker container. It simplifies running Keto CLI commands.  The alias sets the KETO_READ_REMOTE environment variable to point to the Keto instance running within the Docker network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nalias keto=\"docker run -it --network cat-videos-example_default -e KETO_READ_REMOTE=\\\"keto:4466\\\" oryd/keto:v0.7.0-alpha.1\"\n```\n\n----------------------------------------\n\nTITLE: Restarting Ory Kratos Service and Testing Connectivity Using Bash Shell\nDESCRIPTION: Restarts the service to apply the new network binding configuration and attempts to connect to the public endpoint. The expected connection failure confirms that Kratos is no longer accessible on the external IP, enforcing security.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_20\n\nLANGUAGE: bash\nCODE:\n```\nservice kratos restart\ncurl -I http://accounts.example.com:4433\ncurl: (7) Failed to connect to accounts.example.com port 4433: Connection refused\n```\n\n----------------------------------------\n\nTITLE: YAML Array Overwrite Example\nDESCRIPTION: This snippet illustrates how array values are overwritten when merging YAML configuration files. In this case, `file B` overwrites `file A`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_6\n\nLANGUAGE: yml\nCODE:\n```\n---\nfoo:\n  - id: bar\n```\n\nLANGUAGE: yml\nCODE:\n```\n---\nfoo:\n  - id: baz\n```\n\nLANGUAGE: yml\nCODE:\n```\n---\nfoo:\n  - id: baz\n```\n\n----------------------------------------\n\nTITLE: Creating an Ory Network project via CLI\nDESCRIPTION: Shows how to create a new Ory Network project using the CLI, generating a project with a specified name, which is a prerequisite before deploying the proxy for project-specific configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory create project --name \"Command Line Project\"\n```\n\n----------------------------------------\n\nTITLE: Ory CLI Options for Deleting Event Streams - bash\nDESCRIPTION: This snippet lists and describes the command line options directly available for the `ory delete event-stream` command, including help, project, and workspace flags. The `--project` option specifies the project ID or partial slug to use, while `--workspace` indicates the workspace ID or partial name. Additionally, it references inherited options for configuration, output formatting, verbosity, and confirmation automation, which affect command behavior globally.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-event-stream.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help               help for event-stream\n      --project string     The project to use, either project ID or a (partial) slug.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Listing Available Ory Format Jsonnet CLI Options in Bash\nDESCRIPTION: This snippet shows the available command-line options for the 'ory format jsonnet' command. Use the -h or --help flags to display the help message. The -w or --write flag enables writing formatted content back to the original file instead of outputting it to stdout. Required dependencies are the Ory CLI binary and a working shell environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-format-jsonnet.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help    help for jsonnet\n  -w, --write   Write formatted output back to file.\n```\n\n----------------------------------------\n\nTITLE: Keto CLI Global Options\nDESCRIPTION: This snippet describes the global options available for the Keto command-line interface.  These options can be used to configure the Keto CLI's behavior. The '-c' or '--config' option allows you to specify configuration files to load, and '-h' or '--help' displays help information.  The configuration files are overwritten in the order they are specified.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n  -h, --help             help for keto\n```\n\n----------------------------------------\n\nTITLE: Specify Inherited Options ORY Oathkeeper CLI\nDESCRIPTION: Lists command-line options inherited from the parent `oathkeeper health` command. These include options for specifying configuration files and crucially, the endpoint URL of the ORY Oathkeeper management API to target the health check.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-health-alive.md#_snippet_2\n\nLANGUAGE: cli\nCODE:\n```\n  -c, --config strings    Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n  -e, --endpoint string   The endpoint URL of ORY Oathkeeper's management API\n\n```\n\n----------------------------------------\n\nTITLE: Command Options for ory open account-experience\nDESCRIPTION: Available flags specific to the account-experience command. Includes help flag for displaying help information and quiet flag to reduce output verbosity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help    help for account-experience\n  -q, --quiet   Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Options for keto version command\nDESCRIPTION: Available options specific to the 'keto version' command. Currently, only the help flag is available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-version.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for version\n```\n\n----------------------------------------\n\nTITLE: Command Usage: Ory List Organizations (Bash)\nDESCRIPTION: Illustrates the fundamental syntax for invoking the `ory list organizations` command via the command line. It indicates that the command supports various flags to customize its operation and output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-organizations.md#_snippet_0\n\nLANGUAGE: Bash\nCODE:\n```\nory list organizations [flags]\n```\n\n----------------------------------------\n\nTITLE: Ory Kratos Service Startup Logs Sample\nDESCRIPTION: Sample output logs showing the Ory Kratos server starting its public and admin HTTP endpoints, noting TLS is disabled. This serves to verify a successful startup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\nINFO[2022-05-10T20:51:56Z] TLS has not been configured for public, skipping  audience=application service_name=Ory Kratos service_version=${useLatestRelease(\"kratos\")}\nINFO[2022-05-10T20:51:56Z] Starting the public httpd on: 0.0.0.0:4433    audience=application service_name=Ory Kratos service_version=${useLatestRelease(\"kratos\")}\nINFO[2022-05-10T20:51:56Z] TLS has not been configured for admin, skipping  audience=application service_name=Ory Kratos service_version=${useLatestRelease(\"kratos\")}\nINFO[2022-05-10T20:51:56Z] Starting the admin httpd on: 0.0.0.0:4434     audience=application service_name=Ory Kratos service_version=${useLatestRelease(\"kratos\")}\n```\n\n----------------------------------------\n\nTITLE: Displaying Email Label in Ory Interface (JSON)\nDESCRIPTION: Represents the 'Email' label for input fields, applied in registration, login, or recovery forms. Always static, with id 1070007.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070007,\n  \"text\": \"Email\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Array Maximum Items Constraint in Ory (JSON)\nDESCRIPTION: Reports when an array exceeds the allowed number of items (maximum 3 allowed, 4 found). Both counts are included in the context for accuracy. Used in JSON schema-driven form validation; id is 4000023.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_46\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000023,\n  \"text\": \"maximum 3 items allowed, but found 4 items\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual_items\": 4,\n    \"max_items\": 3\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting JSON Code Blocks in Markdown\nDESCRIPTION: Shows the correct way to format a JSON code block within Markdown documentation using triple backticks and the `json` language identifier for syntax highlighting with PrismJS.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n```json\n{some-JSON-code-here}\n```\n```\n\n----------------------------------------\n\nTITLE: Mermaid Diagram for Access Control\nDESCRIPTION: This Mermaid diagram visually represents the access control relationships defined in the Ory Keto configuration. It shows the objects (videos and directories), relations (owner, view), and subjects (users and groups), illustrating how permissions are granted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_7\n\nLANGUAGE: Mermaid\nCODE:\n```\nflowchart TD\n  obj[videos:/cats] --- r1((owner))\n  obj --- r2((view))\n  r1 -.-> r2\n  r1 ----- sub1([\"cat lady\"])\n  r1 -.-> r4\n  obj1 ---- r4((owner))\n  r3 --- all([\"* (anyone)\"])\n  r4 -.-> r3\n  obj1[videos:/cats/1.mp4] --- r3((view))\n  obj2 --- r6((view))\n  r1 -.-> r5\n  obj2[videos/cats/2.mp4] ---- r5((owner))\n  r5 -.-> r6\n  style sub1 fill:lightgreen\n  style all fill:lightgreen\n  style r1 fill:darkgreen,color:white\n  style r2 fill:darkgreen,color:white\n  style r3 fill:darkgreen,color:white\n  style r4 fill:darkgreen,color:white\n  style r5 fill:darkgreen,color:white\n  style r6 fill:darkgreen,color:white\n```\n\n----------------------------------------\n\nTITLE: Importing Theming Components for Documentation\nDESCRIPTION: Imports React components for tab view and code block rendering in the MDX documentation environment. Used to organize and display example code snippets interactively within the documentation interface. These imports are specific to the documentation theme and are unrelated to the core SDK functionality.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/10_python.mdx#_snippet_4\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport Tabs from \"@theme/Tabs\"\nimport TabItem from \"@theme/TabItem\"\nimport CodeBlock from \"@theme/CodeBlock\"\n```\n\n----------------------------------------\n\nTITLE: Enforcing No Additional Properties in Ory Kratos Identity Schema (JSON5)\nDESCRIPTION: This code snippet illustrates how to deny any extra fields in the 'traits' object for Ory Kratos identity schemas by using the 'additionalProperties: false' setting. This keeps identity objects clean and strictly validated. Written in JSON5, it allows comments and trailing commas but requires consumers (such as tools or the backend) to support JSON5 syntax.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_28\n\nLANGUAGE: json5\nCODE:\n```\n{\n  properties: {\n    traits: {\n      type: \"object\",\n      properties: {\n        // ...\n      },\n      additionalProperties: false,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Mapping Yandex Claims to Ory Identity Traits using Jsonnet\nDESCRIPTION: Defines a Jsonnet script to map user data (claims) received from Yandex to the Ory Identity schema's traits. It specifically handles the email field, checking for its presence as Yandex might not provide it or the 'email' scope might not be granted. Yandex doesn't return an `id_token`, so Ory fetches user info via API and makes it available in `std.extVar('claims')`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Yandex doesn't provide an 'email_verified' field.\n      //\n      // Email might be empty if the user isn't allowed the 'email' scope.\n      [if 'email' in claims then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Enforcing MFA Levels in Ory Kratos (YAML)\nDESCRIPTION: YAML configuration snippet for Ory Kratos defining the required Authentication Assurance Level (AAL) for accessing user settings (`selfservice.flows.settings.required_aal`) and validating sessions (`session.whoami.required_aal`). Setting `required_aal` to `highest_available` for settings forces users with MFA configured to use it, while `aal1` for `whoami` allows sessions without requiring initial MFA completion.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/15_mfa.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nselfservice:\n  flows:\n    settings:\n      required_aal: highest_available\n# ...\nsession:\n  whoami:\n    required_aal: aal1\n# ...\n```\n\n----------------------------------------\n\nTITLE: Patching Ory OAuth2 & OpenID Connect Configuration via CLI - Bash\nDESCRIPTION: This Bash CLI snippet demonstrates how to patch the OAuth2 and OpenID Connect configuration of an Ory Network project. It uses JSON-Patch operations such as --replace, --add, and --remove to update specific keys in the configuration without overwriting the entire config. The command requires specifying the target project via its ID or slug and optionally allows formatting the output in various formats such as json-pretty. This snippet exemplifies the command syntax and the expected JSON output structure reflecting the patched configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-oauth2-config.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory patch oauth2-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\n\t--replace '/strategies/access_token=\"jwt\"' \\n\t--add '/ttl/login_consent_request=\"1h\"' \\n\t--remove '/strategies/scope' \\n\t--format json-pretty\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory SDK Client in JavaScript\nDESCRIPTION: This snippet demonstrates how to install and configure the Ory JavaScript SDK (~1.0.0). It imports the necessary API classes from '@ory/client', configures the base URL and access token with support for HTTP request options like CORS and timeout. It then initializes API instances for modules 'identity', 'frontend', and 'oauth2', replacing the previous v0alpha2 API object. Expected inputs include the project domain URL and environment variable ORY_API_KEY for authorization. Outputs are modular API instances for interaction with Ory services.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm i @ory/client@~1.0.0\n```\n\nLANGUAGE: diff\nCODE:\n```\nimport {\n  Configuration,\n- V0alpha2Api\n+ OAuth2Api,\n+ IdentityApi,\n+ FrontendApi,\n} from \"@ory/client\"\n\nconst config = new Configuration({\n  basePath: \"https://{your-project}.projects.oryapis.com/\",\n  accessToken: process.env.ORY_API_KEY,\n  baseOptions: {\n    withCredentials: true, // Important for CORS\n    timeout: 30000, // 30 seconds\n  },\n})\n\nconst ory = {\n- v0alpha2: V0alpha2Api\n+ identity: new IdentityApi(config),\n+ frontend: new FrontendApi(config),\n+ oauth2: new OAuth2Api(config),\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Ory Flow Errors with SDK (TypeScript)\nDESCRIPTION: Illustrates how to handle different levels of errors (request, method, field) when interacting with Ory flows using the Ory SDK in TypeScript. It demonstrates accessing error messages within the `.then()` block (for errors within successful responses) and the `.catch()` block (for failed requests), specifically checking for 400 Bad Request errors containing flow data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_72\n\nLANGUAGE: typescript\nCODE:\n```\n  // call the sdk\n  // sdk...\n  .then(({data: flow}) => {\n    // error message can also exist inside the flow data even when the request is successful.\n    // This is the case when retrieving the login flow using the flow ID and the flow was submitted previously\n    // but still contains errors.\n\n    // method level error\n    // messages is an array of error messages\n    err.response?.data?.ui.messages.forEach((message) => {\n      console.log(message)\n    })\n\n    // field level error\n    err.response?.data?.ui.nodes.forEach(({ messages }) => {\n      // messages is an array of error messages\n      messages.forEach((message) => {\n        console.log(message)\n      })\n    })\n  })\n  .catch((err: AxiosError) => {\n    // if the request failed but the response is not just an error\n    // it will contain flow data which can be used to display error messages\n    // this is common when submitting a form (e.g. login or registration)\n    // and getting a response status 400 `Bad Request` back.\n\n    if (err.response.status === 400) {\n      // method level error\n      // messages is an array of error messages\n      err.response?.data?.ui.messages.forEach((message) => {\n        console.log(message)\n      })\n\n      // field level error\n      err.response?.data?.ui.nodes.forEach(({ messages }) => {\n        // messages is an array of error messages\n        messages.forEach((message) => {\n          console.log(message)\n        })\n      })\n    } else {\n      // request level error\n      if (err.response?.data?.error) {\n        console.log(err.response.data.error)\n      }\n    }\n  })\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Verification Flow using TypeScript SDK (Native)\nDESCRIPTION: Shows how to initiate an Ory email verification flow using the Ory TypeScript SDK, suitable for Node.js backends or native applications interacting with the `/self-service/verification/api` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_51\n\nLANGUAGE: ts\nCODE:\n```\n{createTsVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Creating an OAuth 2.0 Client in Ory Hydra using Docker CLI\nDESCRIPTION: This command runs the Ory Hydra CLI within a Docker container to create a new OAuth 2.0 client. It connects to the specified Hydra Admin URL (`HYDRA_ADMIN_URL`) over the `hydraguide` network. Key parameters define the client's ID, secret, allowed grant types, response types, scopes (including OpenID Connect and offline access), and callback URL. The `--skip-tls-verify` flag is used to bypass TLS certificate validation, necessary for self-signed certificates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\ndocker run --rm -it \\\n  -e HYDRA_ADMIN_URL=https://ory-hydra-example--hydra:4445 \\\n  --network hydraguide \\\n  oryd/hydra:v1.10.6 \\\n  clients create --skip-tls-verify \\\n    --id facebook-photo-backup \\\n    --secret some-secret \\\n    --grant-types authorization_code,refresh_token,client_credentials,implicit \\\n    --response-types token,code,id_token \\\n    --scope openid,offline,photos.read \\\n    --callbacks http://127.0.0.1:9010/callback\n```\n\n----------------------------------------\n\nTITLE: Implementing Apple Social Sign-In with Ory in React Native - TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates the integration of Apples native sign-in SDK within a React Native app to authenticate users through Ory. It requires configuring an Apple social sign-in provider in Ory with the matching client_id, generating and submitting a nonce, acquiring an id_token from Apple, and forwarding these to Orys updateRegistrationFlow or updateLoginFlow endpoints for validation and session creation. The snippet depends on the Apple SDK for native authentication and Ory SDK for managing flows. Inputs include the id_token and nonce; outputs are the session token or identity established by Ory. This implementation assumes correct audience configuration in Ory and uses Apples public keys for token verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport React from 'react'\nimport {appleAuth} from '@invertase/react-native-apple-authentication'\nimport {useOry} from '@ory/client'\n\nconst AppleSignIn = () => {\n\tconst ory = useOry()\n\n\tconst signIn = async () => {\n\t\t// Generate a random nonce\n\t\tconst nonce = generateRandomNonce()\n\n\t\t// Start Apple sign-in\n\t\tconst appleResponse = await appleAuth.performRequest({\n\t\t\trequestedOperation: appleAuth.Operation.LOGIN,\n\t\t\trequestedScopes: [appleAuth.Scope.EMAIL, appleAuth.Scope.FULL_NAME],\n\t\t\tnonce,\n\t\t})\n\n\t\tif (!appleResponse.identityToken) {\n\t\t\tthrow new Error('Apple Sign-In failed: No identity token returned')\n\t\t}\n\n\t\t// Send id_token and nonce to Ory updateLoginFlow or updateRegistrationFlow\n\t\tconst result = await ory.updateLoginFlow({\n\t\t\tid_token: appleResponse.identityToken,\n\t\t\tid_token_nonce: nonce,\n\t\t})\n\n\t\t// Handle successful login session creation here\n\t\tconsole.log('User logged in', result)\n\t}\n\n\treturn <Button title=\"Sign in with Apple\" onPress={signIn} />\n}\n\nfunction generateRandomNonce() {\n\t// Implementation to generate cryptographically secure nonce\n\treturn 'random-string'\n}\n\nexport default AppleSignIn\n```\n\n----------------------------------------\n\nTITLE: TypeScript Example: Initialize Login Flow\nDESCRIPTION: This code snippet demonstrates how to initialize a self-service login flow in a React Native application using the Ory SDK. It uses `FrontendApi` to call the API and then renders a UI based on the nodes in the returned flow object.  It sets up a configuration to use the Ory API and uses the `initializeSelfServiceLoginFlowWithoutBrowser` method. The UI rendering part uses `map` to iterate through each node and renders based on node type.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport React, { useState, useEffect } from 'react'\nimport { Text, TextInput, View } from 'react-native'\nimport { Configuration, FrontendApi, LoginFlow } from '@ory/client'\n\nconst kratos = new FrontendApi(\n  new Configuration({ basePath: 'https://playground.projects.oryapis.com/api/kratos/public' })\n)\n\nexport default function Login () {\n  const [flow, setFlow] = useState<LoginFlow | undefined>(undefined)\n\n  useEffect(() => {\n    kratos.initializeSelfServiceLoginFlowWithoutBrowser().then(({ data: flow }) => {\n      setFlow(flow)\n    })\n  }, [])\n\n  if (!flow) {\n    return null\n  }\n\n  // This is a non-functional, code example. It's missing state management and so on.\n  // The idea is to show how initializing such a flow would look like in an API scenario.\n  return (\n    <View>\n      <Text>Login</Text>\n\n      {flow.ui.nodes.map((node) => {\n        switch (node.type) {\n          case 'input':\n            return <TextInput value={node.attributes.value} /* placeholder, name, ... *//>\n          default:\n            // ...\n        }\n      })}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing SPA Login Flow with cURL\nDESCRIPTION: This cURL command initializes the Login Flow for client-side (AJAX) browser clients.  It sends an HTTP GET request to the `/self-service/login/browser` endpoint with `Accept: application/json` and expects a JSON response containing flow details, including the flow ID, UI action, and nodes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ncurl -v -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/login/browser | jq\n```\n\n----------------------------------------\n\nTITLE: Authentication Template with Handlebars\nDESCRIPTION: This code snippet provides the authentication template for the user interface for the Express.js recovery flow. This allows you to reuse components in the application. Dependencies: Handlebars. Prerequisites: setup the Handlebars engine properly. Expected input: User data for the authentication flow. Output: HTML components. Limitations: dependent on the application structure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_34\n\nLANGUAGE: handlebars\nCODE:\n```\nimport recoveryExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/recovery-express.ts'\n```\n\n----------------------------------------\n\nTITLE: Register and Auto-Login with Session Using cURL\nDESCRIPTION: Executes a registration followed by an automatic login by including the session cookie and token in the response if the 'session' after hook is enabled. Requires obtaining the registration action URL and sending user credentials, resulting in a session object and user identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_11\n\nLANGUAGE: Shell\nCODE:\n```\nactionUrl=$(\\\n  curl -s -X GET -H \"Accept: application/json\" \\n    \"https://playground.projects.oryapis.com/self-service/registration/api\" \\n    | jq -r '.ui.action'\\\n)\\n\\ncurl -s -X POST -H  \"Accept: application/json\" -H \"Content-Type: application/json\" \\n    -d '{\"traits.email\": \"registration-api@user.org\", \"password\": \"fhAzi860a\", \"method\": \"password\"}' \\n    \"$actionUrl\" | jq\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Claims Mapping Snippet for Patreon Identity Traits\nDESCRIPTION: This Jsonnet code snippet maps Patreon claims to the Ory identity schema traits, specifically handling the email claim. It retrieves claims from an external variable and constructs an identity traits object, supporting optional claims based on Patreon capabilities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/82_patreon.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      [if \"email\" in claims then \"email\" else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting User Sessions using Ory SDK (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to revoke and delete all sessions of a specific user using the Ory TypeScript SDK. The `deleteIdentitySessions` functionality is utilized.  This operation forcibly logs the user out of all their sessions and deletes all session data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_20\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeDisableAndDeleteSessions from \\\"!!raw-loader!@site/code-examples/sdk/typescript/src/session/delete-sessions-native.ts\\\"\n```\n\n----------------------------------------\n\nTITLE: Checking session status using cURL for REST API\nDESCRIPTION: Provides example cURL commands for verifying active user sessions via Authorization header with token or cookie. To be run in CLI to test session activity with the /sessions/whoami endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl -H \"Authorization: Bearer {your-session-token}\" \\\n  \"https://$PROJECT_SLUG.projects.oryapis.com/sessions/whoami\"\n```\n\nLANGUAGE: shell\nCODE:\n```\ncurl -H \"Cookie: ory_session_...=...\" \\\n  \"https://$PROJECT_SLUG.projects.oryapis.com/sessions/whoami\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Registration Page with Ory Elements in React (TypeScript)\nDESCRIPTION: This snippet demonstrates how to set up a user registration page using React and the Ory Elements SDK. The registration flow is initialized by fetching flow data from the URL or server, and form submissions are handled to create new users via Ory's self-service APIs. Dependencies include React, TypeScript, and Ory Elements; expected inputs are registration form values, and outputs include flow state updates and UI feedback for the user.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/Registration.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Registration.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Implementing Logout Endpoint Using Ory SDK in TypeScript\nDESCRIPTION: This TypeScript code demonstrates how to implement a custom OIDC logout endpoint using the Ory SDK. It handles both back-channel and front-channel logout requests and includes logic to redirect users to the homepage after completing the logout process. Dependencies include the Ory SDK for OAuth2/OIDC integration, Node.js, and valid Ory API credentials. The input consists of HTTP logout requests from clients or IdPs, while the output is a completed logout session and an HTTP redirect. This implementation must run server-side and cannot be used in browser-only or mobile apps due to security requirements.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/logout.mdx#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport revokeClient from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/logout.ts'\nimport CodeBlock from '@theme/CodeBlock'\n\n<CodeBlock language=\"js\">{revokeClient}</CodeBlock>\n\n```\n\n----------------------------------------\n\nTITLE: Creating a Development Ory Project using Shell\nDESCRIPTION: Uses the `ory create project` command in the shell to create a free development project named \"My Development Project\". Development projects are intended for testing, have rate limits, and lack custom domain support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/local-development.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"My Development Project\"\n```\n\n----------------------------------------\n\nTITLE: Querying Login Flow with Password Credentials via Ory API in Shell\nDESCRIPTION: This snippet demonstrates how to request login flow details from Ory Identities using the password method via an HTTP GET call with curl. It requires curl, jq, and a valid flow ID. The API returns a JSON containing the form structure needed for password authentication, including hidden CSRF tokens and required fields. Inputs include a valid Ory Login Flow ID, and the output is a structured JSON representing the UI and form requirements for password-based login.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/self-service/login/flows?id=42e26bc5-8014-400c-b463-dc5c3738c242' | jq\n\n{\n  \"id\": \"42e26bc5-8014-400c-b463-dc5c3738c242\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T10:04:44.506336771Z\",\n  \"issued_at\": \"2021-04-28T09:54:44.506336771Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/login/browser\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/login?flow=42e26bc5-8014-400c-b463-dc5c3738c242\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"8RygCHIdyMXVc3jxIAf/6uAuv/jBJLo5mt6nXdcB/JOzncLRu5510BNZNOjvA6Soii504s1Yq/sgvfOXxzck6g==\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"identifier\",\n          \"type\": \"text\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070004,\n            \"text\": \"ID\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"password\",\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1010001,\n            \"text\": \"Sign in\",\n            \"type\": \"info\",\n            \"context\": {}\n          }\n        }\n      }\n    ]\n  },\n  \"forced\": false\n}\n\n```\n\n----------------------------------------\n\nTITLE: Adding Authentication Check to Home Page in Next.js 13\nDESCRIPTION: Implementation of session verification on the Next.js 13 home page that checks if a user is signed in and redirects to the login page if not.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// Code content referenced from external file\n// This would be the content of src/pages/index.tsx\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Verification Flow using Go SDK\nDESCRIPTION: Demonstrates initiating an Ory email verification flow using the Ory Go SDK. This typically involves calling the appropriate SDK function to interact with the `/self-service/verification/api` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_49\n\nLANGUAGE: go\nCODE:\n```\n{createVerificaitonApi}\n```\n\n----------------------------------------\n\nTITLE: Configuring Secrets in Ory Kratos YAML\nDESCRIPTION: Defines the initial secret configuration for Ory Kratos, specifying different categories of secrets such as default, cookie, and cipher, each with a list of secrets ordered by usage recency. This setup is essential for cryptographic operations like encryption and signing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/secret-key-rotation.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nsecrets:\n  default:\n    - old-default-secret\n  cookie:\n    - old-cookie-secret\n  cipher:\n    - old-32-long-secret-key\n```\n\n----------------------------------------\n\nTITLE: Implementing Settings Page with Ory Elements in React (TypeScript)\nDESCRIPTION: This React snippet handles user account settings using Ory Elements, dynamically altering available options such as passwordless registration based on the project configuration. The page requires React, TypeScript, and Ory Elements, accepts settings data and user preferences, and reflects changes in the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/Settings.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Settings.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Implementing Browser Login Flow with Express.js\nDESCRIPTION: Shows how to implement a browser-based login flow using Express.js and the Ory TypeScript SDK. Includes the route handler and supporting Handlebars templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport loginExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/login-express.ts'\n\n<CodeBlock language=\"ts\" title=\"index.ts\">{loginExpress}</CodeBlock>\n```\n\nLANGUAGE: handlebars\nCODE:\n```\nimport authLayoutExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/auth.hbs'\nimport mainLayoutExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/main.hbs'\n\n<CodeBlock language=\"handlebars\" title=\"main.hbs\">{mainLayoutExpress}</CodeBlock>\n<CodeBlock language=\"handlebars\" title=\"auth.hbs\">{authLayoutExpress}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Configuring WebAuthn MFA in Ory Kratos (YAML)\nDESCRIPTION: YAML configuration to enable and set up the WebAuthn MFA method in Ory Kratos under `selfservice.methods.webauthn`. It specifies the Relying Party (RP) details like `display_name`, `id` (top-level domain), and `origin` (exact URL including scheme, host, and port) for the WebAuthn prompts. The `origin` must precisely match the URL initiating the flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/15_mfa.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    webauthn:\n      config:\n        passwordless: false\n        rp:\n          display_name: SAMPLE_NAME\n          # Set 'id' to the top-level domain.\n          id: loginpage.com\n          # Set 'origin' to the exact URL of the page that prompts the user to use WebAuthn. You must include the scheme, host, and port.\n          origin: https://loginpage.auth.com:4455\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Deleting Specific Session using Ory Identities Go SDK\nDESCRIPTION: Provides an example using the Ory Identities Go SDK to invalidate and delete a single, specific user session identified by its session ID. This is used to terminate individual user sessions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_23\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow using TypeScript SDK (Native)\nDESCRIPTION: Demonstrates how to use the Ory Kratos TypeScript SDK to submit data to complete a verification flow within a Node.js or native TypeScript application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_61\n\nLANGUAGE: ts\nCODE:\n```\n{submitTsVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Configuring Google Provider in Ory Identity Config (YAML)\nDESCRIPTION: This YAML snippet shows how to configure the Google social sign-in provider within the Ory identity configuration file (`identity-config.yaml`), typically managed via the Ory CLI. It defines the provider `id` ('google'), specifies the Google `client_id` and `client_secret`, sets the `mapper_url` (using either a Base64 encoded Jsonnet string or a URL pointing to the Jsonnet file), lists the requested OAuth `scope` (e.g., 'email', 'profile'), and details specific `requested_claims` from the ID token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/10_google.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: google # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: google\n            client_id: .... # Replace this with the OAuth2 Client ID\n            client_secret: .... # Replace this with the OAuth2 Client secret\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - email\n              - profile\n            # other supported scopes can be found in Google OAuth 2.0 dev docs\n            requested_claims:\n              id_token:\n                email:\n                  essential: true\n                email_verified:\n                  essential: true\n                given_name:\n                  essential: true\n                family_name: null\n                hd: null # If you want the Google Workspace domain\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Password Migration Web Hook Identifier Payload - JSON\nDESCRIPTION: Specifies the payload sent by Ory Identities to a configured password migration webhook. Contains 'identifier' (login) and 'password' as fields. The payload is used during authentication and must be received/processed by the migration endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identifier\": \"pw-migration@example.org\",\n  \"password\": \"the-password\"\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking a Specific User Session in TypeScript (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK (native) to revoke a specific session (identified by its ID) belonging to the authenticated user via the self-service frontend API. Cannot revoke the current session. Requires the Ory Session Cookie and proper CORS configuration for AJAX calls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport revokeSessionNative from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/revoke-session-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"revoke-session-native.ts\">{revokeSessionNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Updating OAuth2 Issuer URL with Ory CLI (shell)\nDESCRIPTION: This shell command utilizes the Ory CLI's `patch` command to modify the OAuth2 configuration of a project. It specifically targets the `/urls/self/issuer` path to replace its value with the new desired URL, typically the primary custom domain.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/issuer-url.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace '/urls/self/issuer=\"https://auth.myexample.org\"'\n```\n\n----------------------------------------\n\nTITLE: Requesting OAuth2 Authorization with PKCE in Mobile Native Applications (JavaScript and Shell)\nDESCRIPTION: This snippet constructs an authorization URL for mobile/native apps using PKCE with a custom redirect scheme. It generates a code verifier and challenge, then opens the system browser to initiate OAuth2 authorization, ensuring secure, proof-based client authentication in public client scenarios.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory create oauth2-client --token-endpoint-auth-method none\n\n// Request consent\nconst clientId = \"your_client_id\"\nconst { codeChallenge, codeVerifier } = await generatePKCES256()\nconst authorizationUrl = `https://auth-server.com/authorize?response_type=code&client_id=${clientId}&redirect_uri=myapp://callback&scope=openid&state=12345&code_challenge_method=S256&code_challenge=${codeChallenge}`\n\n// Launch browser\nBrowser.openURL(authorizationUrl)\n```\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Exchange code for token\nconst code = \"authorization_code_received_from_auth_server\"\nconst tokenUrl = \"https://$PROJECT_SLUG.projects.oryapis.com/oauth2/token\"\nconst requestBody = `grant_type=authorization_code&client_id=${clientId}&code_verifier=${codeVerifier}&code=${code}`\n\nfetch(tokenUrl, {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: requestBody,\n})\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n  .catch((error) => console.error(error))\n```\n\n----------------------------------------\n\nTITLE: Rendering UI Payloads as JSON5 for Ory Identity Self-Service Forms\nDESCRIPTION: This JSON5 snippet represents a UI payload generated by Ory Identities for self-service flows like login and settings. It contains metadata such as id, expiration, and a 'ui' object with form action, method, and a list of UI nodes representing form inputs. Dependencies include correct backend integration to supply this payload, and proper parsing on the frontend to render forms. The nodes array contains form elements with attributes such as name, type, value, and validation flags, allowing near 1:1 mapping to HTML forms. Expected output is a structured UI payload facilitating customizable forms without manual state management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_0\n\nLANGUAGE: json5\nCODE:\n```\n{\nid: \"9b527900-2199-4221-9252-7971b3362282\",\ntype: \"browser\",\nexpires_at: \"2021-04-28T13:55:36.046466067Z\",\nissued_at: \"2021-04-28T12:55:36.046466067Z\",\nui: {\n  action: \"https://playground.projects.oryapis.com/self-service/settings?flow=9b527900-2199-4221-9252-7971b3362282\",\n  method: \"POST\",\n  nodes: [\n    {\n      type: \"input\",\n      group: \"default\",\n      attributes: {\n        node_type: \"input\",\n        name: \"csrf_token\",\n        type: \"hidden\",\n        value: \"U3r/lgEfT8rA1Lg0Eeo06oGO8mX6T4TKoe/z7rbInhvYeacbRg0IW9zrqnpU1wmQJXKiekNzdLnypx5naHXoPg==\",\n        required: true,\n        disabled: false\n      },\n      messages: null,\n      meta: {}\n    },\n    {\n      type: \"input\",\n      group: \"profile\",\n      attributes: {\n        node_type: \"input\",\n        name: \"traits.email\",\n        type: \"email\",\n        value: \"foo@ory.sh\",\n        disabled: false\n      },\n      messages: null,\n      meta: {\n        label: {\n          id: 1070002,\n          text: \"E-Mail\",\n          type: \"info\"\n        }\n      }\n    }\n    // ...\n  ]\n}\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Registration Flow for API Clients - Ory Identities - shell-session\nDESCRIPTION: This snippet initializes a registration flow suitable for API-driven clients such as mobile apps. It uses 'curl' with GET and 'Accept: application/json' to contact the API endpoint. The JSON response contains the flow ID, type, expiry, and form action URL for submission. Requires network connectivity and access rights. Expected output is a JSON with all flow details for subsequent registration steps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_4\n\nLANGUAGE: shell-session\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/registration/api | jq\n\n{\n  \"id\": \"c7ed95c7-2710-436c-a7d0-09ac771a3e8b\",\n  \"type\": \"api\",\n  \"expires_at\": \"2021-07-09T10:41:34.883536226Z\",\n  ...\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/registration?flow=c7ed95c7-2710-436c-a7d0-09ac771a3e8b\",\n    \"method\": \"POST\",\n     \"method\": \"POST\",\n    \"method\": \"POST\",\n    \"nodes\": [ /* ... */ ]\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Creating and Populating Rules File\nDESCRIPTION: This code creates the `rules.json` file. It defines three access rules: one allowing access with a header mutator, another denying access and providing a redirect or JSON response depending on the Accept header, and a third allowing access with the id_token mutator. Each rule specifies the upstream URL, matching criteria, authenticators, authorizers, mutators, and error handlers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat << EOF > rules.json\n[\n  {\n    \"id\": \"allow-anonymous-with-header-mutator\",\n    \"version\": \"${useLatestRelease('oathkeeper')}\",\n    \"upstream\": {\n      \"url\": \"https://httpbin.org/anything/header\"\n    },\n    \"match\": {\n      \"url\": \"http://<127.0.0.1|localhost>:4455/anything/header\",\n      \"methods\": [\n        \"GET\"\n      ]\n    },\n    \"authenticators\": [\n      {\n        \"handler\": \"anonymous\"\n      }\n    ],\n    \"authorizer\": {\n      \"handler\": \"allow\"\n    },\n    \"mutators\": [\n      {\n        \"handler\": \"header\",\n        \"config\": {\n          \"headers\": {\n            \"X-User\": \"{{ print .Subject }}\"\n          }\n        }\n      }\n    ]\n  },\n  {\n    \"id\": \"deny-anonymous\",\n    \"version\": \"${useLatestRelease('oathkeeper')}\",\n    \"upstream\": {\n      \"url\": \"https://httpbin.org/anything/deny\"\n    },\n    \"match\": {\n      \"url\": \"http://<127.0.0.1|localhost>:4455/anything/deny\",\n      \"methods\": [\n        \"GET\"\n      ]\n    },\n    \"authenticators\": [\n      {\n        \"handler\": \"anonymous\"\n      }\n    ],\n    \"authorizer\": {\n      \"handler\": \"deny\"\n    },\n    \"mutators\": [\n      {\n        \"handler\": \"noop\"\n      }\n    ],\n    \"errors\": [\n      {\n        \"handler\": \"json\",\n        \"config\": {\n          \"when\": [\n            {\n              \"request\": {\n                \"header\": {\n                  \"accept\": [\"application/json\"]\n                }\n              }\n            }\n          ]\n        }\n      },\n      {\n        \"handler\": \"redirect\",\n        \"config\": {\n          \"when\": [\n            {\n              \"request\": {\n                \"header\": {\n                  \"accept\": [\"text/*\"]\n                }\n              }\n            }\n          ]\n        }\n      }\n    ]\n  },\n  {\n    \"id\": \"allow-anonymous-with-id-token-mutator\",\n    \"version\": \"${useLatestRelease('oathkeeper')}\",\n    \"upstream\": {\n      \"url\": \"https://httpbin.org/anything/id_token\"\n    },\n    \"match\": {\n      \"url\": \"http://<127.0.0.1|localhost>:4455/anything/id_token\",\n      \"methods\": [\n        \"GET\"\n      ]\n    },\n    \"authenticators\": [\n      {\n        \"handler\": \"anonymous\"\n      }\n    ],\n    \"authorizer\": {\n      \"handler\": \"allow\"\n    },\n    \"mutators\": [\n      {\n        \"handler\": \"id_token\"\n      }\n    ]\n  }\n]\nEOF\n```\n\n----------------------------------------\n\nTITLE: HTML Form Implementation for Ory Authentication\nDESCRIPTION: Demonstrates how to implement an HTML form that uses the flow UI action and method properties from the Ory authentication flow response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<form action=\"{flow.ui.action}\" method=\"{flow.ui.method}\">...</form>\n```\n\n----------------------------------------\n\nTITLE: Enabling PKCE for OIDC Providers in YAML Configuration\nDESCRIPTION: This YAML snippet configures the OIDC method under Ory Identities' self-service settings to enable PKCE. Setting 'pkce' to 'auto' allows Ory to automatically use PKCE if the OIDC provider advertises support. It requires specifying the issuer URL for automatic OIDC configuration. This snippet is used within the identity configuration file before applying changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/oidc-pkce.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nselfservice:\n  methods:\n    oidc:\n      enabled: true\n      config:\n        providers:\n          - id: generic\n            provider: generic # or another provider\n            issuer_url: https://accounts.google.com # must be set to enable automatic configuration\n            pkce: auto # default: perform PKCE if the provider advertises support for it\n            # ... other configuration options\n# ...\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth 2.0 Token Introspection in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the Ory SDK in TypeScript to perform OAuth 2.0 token introspection. It shows the implementation of checking token validity and retrieving token information such as associated user and scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-token-introspection.mdx#_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport tsExample from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/token-introspect.ts'\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Jsonnet Snippet (Shell)\nDESCRIPTION: This shell command encodes the Jsonnet data mapping snippet using Base64.  The encoded string is then used in the `mapper_url` of the Ory Identities configuration. This allows the configuration to include the mapping directly, without relying on external URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Authentication for HTTP Email (YAML)\nDESCRIPTION: YAML configuration example for securing the HTTP email delivery request using Basic Authentication. It sets the `auth` type to `basic_auth` and provides the required username (`user`) and password (`password`). All properties shown under `config` are mandatory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/03_mail-courier-http.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  delivery_strategy: http\n  http:\n    request_config:\n      # ... other config\n      auth:\n        type: basic_auth\n        config:\n          user: My-User\n          password: My-Pass-Value\n```\n\n----------------------------------------\n\nTITLE: Adding Verification Hook After Specific Login Methods Using Ory CLI\nDESCRIPTION: Uses the Ory CLI `patch identity-config` command to add the `verification` hook to the `after` login flow for password, OIDC, and WebAuthn methods. This hook triggers the verification process after login if the user's address associated with the login method is not yet verified.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --add '/selfservice/flows/login/after/password/hooks=[{\"hook\": \"verification\"}]' \\\n  --add '/selfservice/flows/login/after/oidc/hooks=[{\"hook\": \"verification\"}]' \\\n  --add '/selfservice/flows/login/after/webauthn/hooks=[{\"hook\": \"verification\"}]'\n```\n\n----------------------------------------\n\nTITLE: Setting Authorization Header with Access Token in Javascript\nDESCRIPTION: This JavaScript snippet demonstrates how to include an access token in the Authorization header when making an API request to a resource server. It uses the `node-fetch` library to make a GET request, including the access token as a Bearer token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/overview/oauth2-concepts.mdx#_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst fetch = require(\"node-fetch\")\nconst accessToken = \"your_access_token_here\"\n\nfetch(\"https://api.example.com/resource\", {\n  headers: {\n    Authorization: \"Bearer \" + accessToken,\n  },\n})\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n  .catch((error) => console.error(error))\n```\n\n----------------------------------------\n\nTITLE: Defining Mandatory Fields for Registration - JSON\nDESCRIPTION: This JSON schema defines the structure for user identity data, focusing on mandatory fields. It uses the `required` property to enforce that the `email` field and `last` field under `name` are filled out during user registration.  It also showcases configuration details like `format`, `title`, and `maxLength` for input validation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.basic.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"Email address\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"maxLength\": 320\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"required\": [\n            \"last\"\n          ],\n          \"properties\": {\n            \"first\": {\n              \"type\": \"string\",\n              \"title\": \"First name\",\n              \"maxLength\": 256\n            },\n            \"last\": {\n              \"type\": \"string\",\n              \"title\": \"Last name\",\n              \"maxLength\": 256\n            }\n          }\n        }\n      },\n      \"required\": [\n        \"email\"\n      ],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Ory CLI Commands in Shell\nDESCRIPTION: Shows how to list all available commands in the Ory CLI and get detailed help for specific commands using the --help flag. It explains that 'ory help' outputs all commands with brief descriptions, while adding '--help' to any command displays command-specific flags and usage details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory help\n```\n\n----------------------------------------\n\nTITLE: Retrieving existing registration flow using Ory SDK in Go, TypeScript, and React\nDESCRIPTION: These code snippets illustrate retrieving current registration flow details using Ory SDKs in Go, TypeScript, and React. The SDKs abstract the HTTP requests to `/self-service/registration/flows` endpoint and manage flow identifiers. The Go backend example is suited for server applications, while the TypeScript and React examples integrate within frontend or full-stack apps. Inputs are the flow ID identifying the ongoing registration, and the outputs include flow state and data required for interaction or UI updates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_19\n\nLANGUAGE: go\nCODE:\n```\nimport getRegistrationApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-registration.go'\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport getTsRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/get-registration-native.ts'\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport getReactRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/get-registration-react.tsx'\n```\n\n----------------------------------------\n\nTITLE: Example: Creating an Ory OAuth2 Client with Common Flags (Shell)\nDESCRIPTION: Provides a practical example of creating an OAuth 2.0 client using the Ory CLI with common configuration flags. It sets the client name (`-n`), redirect URI (`-c`), grant type (`-g`), response type (`-r`), and allowed scopes (`-a`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-oauth2-client.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client -n \"my app\" -c http://localhost/cb -g authorization_code -r code -a core,foobar\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Page with Ory Elements in React (TypeScript)\nDESCRIPTION: This snippet illustrates a React component handling the Ory login flow. It retrieves or initializes the login process, manages form data, and communicates with Ory's authentication API to verify user credentials. Prerequisites are React, TypeScript, and Ory Elements, requiring login credentials and returning authentication status.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/Login.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Login.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Creating Native Login Flow with TypeScript SDK\nDESCRIPTION: Example showing how to implement a native login flow using the Ory TypeScript SDK. This is used for mobile applications and other non-browser clients.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport createTsLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/create-login-native.ts'\n\n<CodeBlock language=\"ts\" title=\"login.ts\">{createTsLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Marking Address as Verifiable in Identity Schema - JSON Schema - Diff\nDESCRIPTION: This diff patch illustrates how to modify a JSON identity schema to mark an email address as verifiable for Ory. The change is to add a `verification` object with `via: email` under the `ory.sh/kratos` extension for the email property. The schema must conform to JSON Schema draft-07 and be used for user identities in Ory. Required for enabling verification flows tied to email addresses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            },\n+           \"verification\": {\n+             \"via\": \"email\"\n+           }\n          }\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Identity Tokens with Ory CLI in Bash\nDESCRIPTION: Demonstrates how to retrieve OIDC/OAuth2 tokens associated with an identity using the Ory CLI. This requires the Ory CLI to be installed and authenticated. Parameters include the identity ID and project ID; tokens are fetched by specifying the credential type (`-i oidc`). Output is formatted as YAML. Input is the identity ID and project ID; output is the detailed identity information with credential tokens if available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/85_get-tokens.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory get identity \"$identity_id\" --project \"$PROJECT_ID\" \\\n  -i oidc --format yaml\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Identity SDK with Custom Domain in TypeScript\nDESCRIPTION: This snippet demonstrates initializing the Ory IdentityApi client using the official @ory/client SDK in TypeScript. It uses a Configuration object where the basePath is set to a custom domain URL for the Ory project, enabling API requests to the specified endpoint. The baseOptions include 'withCredentials: true' to allow sending credentials such as cookies with requests, which is typically necessary for authenticated sessions. Dependencies include the @ory/client package installed in the environment. The snippet assumes prior setup of appropriate API keys or client credentials depending on whether Admin or Public APIs are accessed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/api/_common/api-types.mdx#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { Configuration, IdentityApi } from \"@ory/client\"\\n\\nconst identity = new IdentityApi(\\n  new Configuration({\\n    basePath: \"https://ory.your-custom-domain.com\",\\n    baseOptions: {\\n      withCredentials: true,\\n    },\\n  }),\\n)\n```\n\n----------------------------------------\n\nTITLE: Exporting OAuth2 and OpenID Configuration in YAML Format\nDESCRIPTION: This command retrieves the OAuth2 and OpenID configuration for a specific project and workspace, outputting it in YAML format. The YAML output is optimized for integration with self-hosted Ory Hydra instances, facilitating environment setup and configuration management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nory get oauth2-config --project <project-id> --workspace <workspace-id> --format yaml\n```\n\n----------------------------------------\n\nTITLE: Activating and Deactivating Identities with Ory SDK in Go\nDESCRIPTION: This Go snippet shows how to utilize the Ory SDK to modify user identity states programmatically. It sets up the client configuration and uses the provided method to activate or deactivate an identity by specifying the identity ID and target state. The code requires the Ory Go SDK and proper API server configuration. Inputs are the identity identifier and boolean flag for activation; outputs include the updated identity object or errors for failure conditions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/identity-state.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"log\"\n\n\tory \"github.com/ory/client-go\"\n)\n\nfunc main() {\n\tclient := ory.NewAPIClient(ory.NewConfiguration())\n\tidentityId := \"identity123\"\n\tactivate := false\n\n\tctx := context.Background()\n\tupdate := ory.AdminUpdateIdentityStatusBody{\n\t\tState: \"inactive\",\n\t}\n\tif activate {\n\t\tupdate.State = \"active\"\n\t}\n\n\tidentity, resp, err := client.V0alpha2Api.AdminUpdateIdentityStatus(ctx, identityId).AdminUpdateIdentityStatusBody(update).Execute()\n\tif err != nil {\n\t\tlog.Fatalf(\"Failed to update identity state: %v\", err)\n\t}\n\n\tfmt.Printf(\"Identity %s state updated to %s\\n\", identityId, *identity.State)\n\t_ = resp\n}\n```\n\n----------------------------------------\n\nTITLE: Listing All Sessions in TypeScript (Administrative)\nDESCRIPTION: Uses the initialized TypeScript SDK client to list all sessions across the system via the administrative API. Requires an API Key. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_12\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeGetSessions from \"!!raw-loader!@site/code-examples/sdk/typescript/src/session/get-sessions-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"Listing all sessions\">{nativeGetSessions}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Enabling Passkey Authentication - Self-hosted Ory Kratos\nDESCRIPTION: This YAML configuration enables the passkey strategy for a self-hosted Ory Kratos instance.  It sets `enabled` to `true`, configures `display_name`, `id`, and `origins`. The `id` should be your top-level domain and origins should specify the exact URLs where WebAuthn will prompt.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    passkey:\n      enabled: true\n      config:\n        rp:\n          display_name: Your Application name\n          # Set 'id' to the top-level domain.\n          id: localhost\n          # Set 'origin' to the exact URL of the page that prompts the user to use WebAuthn. You must include the scheme, host, and port.\n          origins:\n            - http://localhost:4455\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client Using Ory CLI with Basic Authentication (Bash)\nDESCRIPTION: This CLI command creates an OAuth2 client configured to use the Basic Authentication method at the token endpoint. It sets the client name, associates the client with a specific project, specifies the client_credentials grant type, and sets the token-endpoint-auth-method to client_secret_basic. This is a prerequisite to use the Basic Authentication code example.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Client Credentials Demo\" \\\n  --grant-type client_credentials \\\n  --token-endpoint-auth-method client_secret_basic\n```\n\n----------------------------------------\n\nTITLE: Handling Two-Factor Authentication Requirement in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to handle the `session_aal2_required` error returned by the `/sessions/whoami` endpoint when a user is required to complete two-factor authentication (2FA). It redirects the user to the login page with the `aal2=true` query parameter. It depends on the Ory SDK and Axios for making API requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nsdk\n  .toSession()\n  .then(({ data: session }) => {\n    // set the session data which contains the user Identifier and other traits.\n  })\n  .catch((err: AxiosError) => {\n    switch (error.response?.status) {\n      case 403: {\n        // the user might have a session, but would require 2FA (Two-Factor Authentication)\n        if (error.response?.data.error?.id === \"session_aal2_required\") {\n          navigate(\"/login?aal2=true\", { replace: true })\n          return\n        }\n      }\n    }\n  })\n```\n\n----------------------------------------\n\nTITLE: Creating OpenID Connect ID Token JWKS with Ory Hydra CLI (Bash)\nDESCRIPTION: This Bash snippet uses the Ory Hydra CLI to create a new JSON Web Key Set (JWKS) for OpenID Connect ID Token signing. The command requires the Hydra CLI tool, an accessible Hydra admin API (over HTTP), and specifies key set name and algorithm (RS256) as parameters. The generated key will be used for ID token signing, and no additional input is needed beyond endpoint details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/secrets-key-rotation.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra create jwks --endpoint=http://ory-hydra-admin-api/ hydra.openid.id-token --alg RS256\n```\n\n----------------------------------------\n\nTITLE: API response for a created identity after import\nDESCRIPTION: JSON response example containing the details of the newly created identity, including ID, schema, traits, verified addresses, recovery addresses, and timestamps, post-import.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{13-15}\n{\n  \"id\": \"880052ae-d32c-4b56-b82d-0dc711080910\",\n  \"schema_id\": \"preset://email\",\n  \"schema_url\": \"https://$PROJECT_SLUG.projects.oryapis.com/schemas/cHJlc2V0Oi8vZW1haWw\",\n  \"state\": \"active\",\n  \"state_changed_at\": \"2022-02-24T15:33:17.845589803Z\",\n  \"traits\": {\n    \"email\": \"docs-verify@example.org\"\n  },\n  \"verifiable_addresses\": [\n    {\n      \"id\": \"c3f67b59-ab58-410b-971a-06b80f38468a\",\n      \"value\": \"docs-verify@example.org\",\n      \"verified\": true,\n      \"via\": \"email\",\n      \"status\": \"completed\",\n      \"created_at\": \"2022-02-24T15:33:17.848941Z\",\n      \"updated_at\": \"2022-02-24T15:33:17.848941Z\"\n    }\n  ],\n  \"recovery_addresses\": [\n    {\n      \"id\": \"819b53bf-79e3-452e-8a9b-0323ec9d193c\",\n      \"value\": \"docs-verify@example.org\",\n      \"via\": \"email\",\n      \"created_at\": \"2022-02-24T15:33:17.849758Z\",\n      \"updated_at\": \"2022-02-24T15:33:17.849758Z\"\n    }\n  ],\n  \"created_at\": \"2022-02-24T15:33:17.848475Z\",\n  \"updated_at\": \"2022-02-24T15:33:17.848475Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Initialize Flow and Extract ID - Shell\nDESCRIPTION: Shows how to programmatically initialize a browser-based self-service login flow, store the session cookies in a temporary file, and extract the generated flow ID from the JSON response using `jq`. This snippet demonstrates the initial request step similar to the previous one but focuses on capturing the flow ID and cookies required for subsequent API calls by the self-service UI to fetch the flow's details and form data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n# A cookie jar for storing the CSRF tokens\ncookieJar=$(mktemp)\nflowId=$(curl -s -X GET \\\n    --cookie-jar $cookieJar --cookie $cookieJar \\\n    -H \"Accept: application/json\" \\\n    https://playground.projects.oryapis.com/self-service/login/browser | jq -r '.id')\n```\n\n----------------------------------------\n\nTITLE: Shell Script to Initialize Login API Flow\nDESCRIPTION: This shell script initializes a login API flow by sending a GET request to a specified endpoint. It uses `curl` to make the HTTP request and `jq` to parse the JSON response. The output is a JSON object representing the flow. The primary purpose is to get the necessary information to start the login process in an API flow. It gets information such as the ID and UI information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_10\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/login/api | jq\n```\n\n----------------------------------------\n\nTITLE: ExpressJS middleware for session validation\nDESCRIPTION: Sample code for an ExpressJS server to verify sessions by handling both Ory Session Cookies and Tokens, ensuring secure API endpoint protection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n{expressjs}\n```\n\n----------------------------------------\n\nTITLE: Configuring Traefik ForwardAuth for Ory Oathkeeper (YAML/Docker Labels)\nDESCRIPTION: This YAML configuration example uses Docker labels to configure Traefik's ForwardAuth middleware. It defines a middleware named 'oathkeeper' that directs authentication requests to the Ory Oathkeeper decision endpoint (`http://oathkeeper:4456/decisions`). It also specifies that the `X-Id-Token` and `Authorization` headers from Oathkeeper's response should be passed along. Finally, it demonstrates applying this middleware to a service route named 'service'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/traefik-proxy-integration.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nedge-router:\n  image: traefik\n  # further configuration\n  labels:\n    - traefik.http.middlewares.oathkeeper.forwardauth.address=http://oathkeeper:4456/decisions\n    - traefik.http.middlewares.oathkeeper.forwardauth.authResponseHeaders=X-Id-Token,Authorization\n    # further labels\n\nservice:\n  image: my-service\n  # further configuration\n  labels:\n    - traefik.http.routers.service.middlewares=oathkeeper\n    # further labels\n```\n\n----------------------------------------\n\nTITLE: Implementing Verification Page with Ory Elements in Next.js (TypeScript)\nDESCRIPTION: This Next.js implementation creates an account verification flow using Ory Elements, handling tokens and updating verification state in the UI. The page uses Next.js, TypeScript, and Ory Elements and expects verification codes or user actions as inputs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"pages/verification.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/verification.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Obtaining Access Token Using Body Authentication with JavaScript\nDESCRIPTION: This JavaScript snippet illustrates how to acquire an OAuth2 access token by sending client credentials as form parameters in the request body (client_secret_post). It constructs URL-encoded parameters including grant_type, client_id, client_secret, and scope. The fetch API performs a POST request with the Content-Type header set properly, expecting the token endpoint to respond with a JSON containing the access token. The snippet uses the URLSearchParams API to create the request body.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst clientID = \"the-client-id\"\nconst clientSecret = \"the-secret-id\"\n\nconst qs = new URLSearchParams()\nqs.set(\"grant_type\", \"client_credentials\")\nqs.set(\"client_id\", clientID)\nqs.set(\"client_secret\", clientSecret)\nqs.set(\"scope\", read)\n\nconst requestOptions = {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: qs.toString(),\n}\n\nfetch(\"https://your-project.projects.oryapis.com/oauth2/token\", requestOptions)\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session with Fetch API (TypeScript)\nDESCRIPTION: Demonstrates how to check an Ory session from a client-side application (SPA) using the browser's Fetch API. It makes a GET request to the `/sessions/whoami` endpoint (exposed via Ory Tunnel) and includes credentials (cookies) using `credentials: 'include'`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_66\n\nLANGUAGE: typescript\nCODE:\n```\nawait fetch('https://localhost:4000/sessions/whoami', { // <-- your Ory CLI tunnel URL\n  method: 'GET',\n  // highlight-next-line\n  credentials: 'include',\n}).then((response) => response.json())\n```\n\n----------------------------------------\n\nTITLE: Updated Secret Key Rotation YAML Configuration (YAML)\nDESCRIPTION: This YAML configuration demonstrates rotating cookie and system encryption keys by prepending the new key to the beginning of each array. Ory Hydra will use only the first key for encryption and signing, while all listed keys will be valid for decryption and verification. This pattern allows backward compatibility and seamless key migration, ensuring older data remains accessible.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/secrets-key-rotation.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nsecrets:\n  cookie:\n    - the-new-cookie-encryption-key # the new key must be the first entry\n    - the-old-cookie-encryption-key\n  system:\n    - the-new-system-encryption-key # the new key must be the first entry\n    - the-old-system-encryption-key\n```\n\n----------------------------------------\n\nTITLE: Define document view permissions in OPL TypeScript\nDESCRIPTION: Defines the 'view' permission for a Document in OPL using TypeScript. It checks if the user is a viewer, editor, or owner of the document, or if they have view access to a parent folder. Requires @ory/keto-namespace-types for type definitions. The input is a Context object containing the subject (user). The output is a boolean indicating whether the user has view access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\nclass User implements Namespace {}\n\nclass Document implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n\n  permits = {\n      view: (ctx: Context): boolean =>\n        this.related.viewers.includes(ctx.subject) ||\n        this.related.editors.includes(ctx.subject) ||\n        this.related.owners.includes(ctx.subject) ||\n        this.related.parents.traverse((parent) => parent.permits.view(ctx)),\n  }\n}\n\nclass Folder implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Performing Authorization Code Grant\nDESCRIPTION: Starts a server that performs the OAuth 2.0 Authorization Code Flow using Ory Hydra. It requires the client ID and secret created previously.  The web server runs on http://127.0.0.1:5555.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_13\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml exec hydra \\\n    hydra perform authorization-code \\\n    --client-id $code_client_id \\\n    --client-secret $code_client_secret \\\n    --endpoint http://127.0.0.1:4444/ \\\n    --port 5555 \\\n    --scope openid --scope offline\n```\n\n----------------------------------------\n\nTITLE: Custom Email Template Configuration (YAML)\nDESCRIPTION: This YAML snippet demonstrates how to configure custom email templates in the Ory Identities configuration file. It specifies the Base64-encoded HTML and plaintext templates for various email types (recovery, verification, login, registration).  It requires the `identity-config.yaml` file to be properly formatted and the Base64-encoded templates to be valid.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n   courier:\n     smtp:\n       from_name: MyProject via Ory\n       templates:\n         recovery:\n           invalid:\n             email:\n               body:\n                 html: \"base64://ENCODED_HTML_TEMPLATE\"\n                 plaintext: \"base64://ENCODED_PLAINTEXT_TEMPLATE\"\n           valid:\n             email:\n               body: {}\n         verification:\n           invalid:\n             email:\n               body: {}\n           valid:\n             email:\n               body: {}\n         login:\n           valid:\n             email:\n               body: {}\n         registration:\n           valid:\n             email:\n               body: {}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Verification Flow via cURL (Browser)\nDESCRIPTION: Uses cURL to send a GET request to the `/self-service/verification/flows?id=<flow-id>` endpoint to retrieve an existing verification flow for a browser-based application. Includes managing cookies using the -c (store) and -b (read) flags for subsequent requests. Displays both the cURL command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_53\n\nLANGUAGE: shell\nCODE:\n```\n{getVerificationCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(getVerificationCurlBrowserJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Informing User on Recovery Code Email Sent Status in Ory (JSON)\nDESCRIPTION: This snippet notifies the user that a recovery code was sent to their email. It is used after initiating a password recovery process. Relies on Ory's email system and expects an existing user email as input; no dynamic templating required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1060003,\n  \"text\": \"An email containing a recovery code has been sent to the email address you provided. If you have not received an email, check the spelling of the address and make sure to use the address you registered with.\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client for Authorization Code Grant with Ory CLI in Shell\nDESCRIPTION: Creates an OAuth2 client configured for the Authorization Code Grant flow with refresh token support, specifying response type and redirect URI. This client facilitates user authentication and authorization through OIDC, enabling applications to act on users' behalf with consent.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Authorization Code Grant with OpenID Connect Demo\" \\\n  --grant-type authorization_code,refresh_token \\\n  --response-type code \\\n  --redirect-uri http://127.0.0.1:4446/callback\n```\n\n----------------------------------------\n\nTITLE: Authorizing Ory Project Admin API Calls (shell)\nDESCRIPTION: This shell snippet demonstrates how to authorize a request to an Ory Network Project Admin API endpoint. The Project API Key is included in the `Authorization` header using the `Bearer` scheme. This specific example shows a GET request to list identities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/personal-access-token.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nGET /admin/identities HTTP/1.1\nHost: $PROJECT_SLUG.projects.oryapis.com\nAccept: application/json\n# highlight-next-line\nAuthorization: Bearer $API_KEY\n```\n\n----------------------------------------\n\nTITLE: Updating package.json for Ory Tunnel in JSON\nDESCRIPTION: Modifies the `scripts` section of the `package.json` file to add a new script named `tunnel`. This script runs the Ory Tunnel, forwarding traffic from a public endpoint provided by Ory to the local development server running on port 3000, using port 4000 for the tunnel interface. Requires the `ORY_PROJECT_ID` environment variable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"protect-page-login\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"nodemon index.js\",\n    \"tunnel\": \"ory tunnel --project $ORY_PROJECT_ID --port 4000 --dev http://localhost:3000\"\n  },\n  \"dependencies\": {\n```\n\n----------------------------------------\n\nTITLE: React Native session handling code\nDESCRIPTION: TypeScript code snippet for managing Ory sessions within a React Native application, facilitating native session checks and handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n{reactNative}\n```\n\n----------------------------------------\n\nTITLE: Adding Global Options for Parent Ory Kratos CLI Commands - shell\nDESCRIPTION: This snippet lists higher-level CLI options inherited from parent commands, allowing you to set the admin API endpoint, change output formatting (table, json, yaml, etc.), or enable quiet mode. These flags provide flexibility in connecting to different Kratos deployments and customizing outputs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-validate-identity.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n\n```\n\n----------------------------------------\n\nTITLE: Listing Active User Sessions in TypeScript (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK (native) to list the currently active sessions for the authenticated user via the self-service frontend API. Requires the Ory Session Cookie and proper CORS configuration for AJAX calls. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport getSessionsNative from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/get-active-sessions-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"get-active-sessions-native.ts\">{getSessionsNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Listing Active User Sessions in React (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK within a React component to list the currently active sessions for the authenticated user via the self-service frontend API. Requires the Ory Session Cookie and proper CORS configuration. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport react from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/get-active-sessions-react.tsx\"\n\n<CodeBlock language=\"ts\" title=\"get-active-sessions-react.tsx\">{react}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Customizing JWT Claims via JsonNet Claim Mapper Template\nDESCRIPTION: Shows a JsonNet template example for customizing JWT claims. The template receives variables 'claims' and 'session' and returns a JSON object with additional or modified claims, including default non-overridable 'sub', session schema ID, assurance level, and token expiry. This template allows fine-grained control over the JWT payload issued by Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_7\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\nlocal session = std.extVar('session');\n\n{\n  claims: {\n    foo: \"baz\",\n    sub: \"this can not be overwritten and will always be session.identity.id\",\n    schema_id: session.identity.schema_id,\n    aal: session.authenticator_assurance_level,\n    second_claim: claims.exp,\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Mapping Google Claims to Ory Traits using Jsonnet (CLI)\nDESCRIPTION: This Jsonnet snippet defines the mapping from Google user claims to Ory Identity traits for configurations made via the Ory CLI. It maps 'email' (conditionally on verification), 'given_name' to 'first_name', 'family_name' to 'last_name', and 'hd' (conditionally on verification). This script needs to be saved to a file (e.g., `your-data-mapping.jsonnet`) and then Base64 encoded or hosted at a URL for use in the YAML configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/10_google.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n      first_name: claims.given_name,\n      last_name: claims.family_name,\n      [if 'hd' in claims && claims.email_verified then 'hd' else null]: claims.hd,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring the React Native App with Your Project's API Endpoints\nDESCRIPTION: Instruction to modify the app configuration by replacing the default playground URL in 'app.config.js' with your project's SDK URL to connect the app to your Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n<CodeFromRemote lang=\"js\" src=\"https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/app.config.js\" />\n```\n\n----------------------------------------\n\nTITLE: Creating Identities with Ory Network API using Shell\nDESCRIPTION: This shell snippet uses curl to send a POST request to the Ory Network API to create a new user identity. The request includes an Authorization bearer token, content type header, and a JSON payload specifying the identity's schema (preset://email) and traits (email address). The primary parameter is the JSON data defining the schema_id and traits object with the user's email. The command expects a JSON response confirming identity details. No password or credential creation is performed by this command, and users must replace the schema_id and traits to fit their needs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/20_create-users-identities.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n  --header \"Authorization: Bearer ory_pat_xRKLsFEOUFQFVBjd6o3FQDifaLYhabGd\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs@example.org\"\n  }\n}' https://playground.projects.oryapis.com/admin/identities\n```\n\n----------------------------------------\n\nTITLE: Implementing Registration Page with Ory Elements in Preact (TypeScript)\nDESCRIPTION: This Preact example shows how to integrate Ory Elements for a registration flow, fetching or starting a registration process and managing user input for account creation. It depends on Preact, TypeScript, and Ory Elements, accepts user details as inputs, and handles responses from Ory's identity API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/register.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/register.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Password Input Node Structure Returned by Ory API (JSON)\nDESCRIPTION: This JSON snippet details the structure of an input node for password submission as returned by Ory's self-service settings flows API. Key fields include type, group, attributes (with a password input), error messages for validation (such as empty password constraint), and meta information for labeling. No external dependencies; this format is what a client or frontend would consume. Inputs: none; Outputs: JSON object describing a single password field's node.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.missing.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"password\",\n    \"type\": \"password\",\n    \"required\": true,\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000001,\n      \"text\": \"length must be >= 1, but got 0\",\n      \"type\": \"error\"\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070001,\n      \"text\": \"Password\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Username and Password Login in Ory Kratos Identity Schema (JSON)\nDESCRIPTION: This snippet shows a JSON Schema for Ory Kratos where 'username' is used as the primary identifier for login and authentication. It details credential strategies supporting password, webauthn, totp, and passkey mechanisms. The input JSON must have a 'username' property under 'traits'. Dependencies include Ory Kratos and JSON Schema draft-07.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_24\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/registration.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"username\": {\n          \"type\": \"string\",\n          \"ory.sh/kratos\": {\n             \"credentials\": {\n               \"password\": {\n                 \"identifier\": true\n               },\n               \"webauthn\": {\n                 \"identifier\": true\n               },\n               \"totp\": {\n                 \"account_name\": true\n               },\n                \"passkey\": {\n                  \"display_name\": true\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Ory Console - Step-by-step Salesforce OAuth Configuration\nDESCRIPTION: Step-by-step instructions for configuring Salesforce as a social sign-in provider via the Ory Console. Includes integration with the JSON data mapping snippet and details for copying client credentials and tenant URL, essential for OAuth flow setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/42_salesforce.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<JsonnetWarning format=\"Jsonnet code snippets\" use=\"data mapping\" />\n```\n\n----------------------------------------\n\nTITLE: Setting Redirect URI for GitLab OAuth2 Application - Shell\nDESCRIPTION: This shell code snippet provides a template for the redirect URI required when setting up a new GitLab OAuth2 Application for Ory CLI integration. The placeholder $PROJECT_SLUG should be replaced with the appropriate Ory project slug. Input: Environment variable PROJECT_SLUG. Output: Formatted redirect URI string. Dependency: The actual Ory project must exist.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/gitlab\n```\n\n----------------------------------------\n\nTITLE: Exchanging JWT for OAuth2 Access Token with cURL\nDESCRIPTION: This cURL request demonstrates how to exchange a JWT assertion for an OAuth2 access token. It sends a POST request to the OAuth2 token endpoint with the grant_type parameter set to the JWT bearer grant type and the JWT assertion included in the body.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_0\n\nLANGUAGE: curl\nCODE:\n```\nPOST /oauth2/token HTTP/1.1\nHost: $PROJECT_SLUG.projects.oryapis.com\nContent-Type: application/x-www-form-urlencoded\n\nscope=foo+bar\n&grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer\n&assertion=eyJhbGciOiJFUzI1NiIsImtpZCI6IjE2In0.\neyJpc3Mi[...].\nJ9l-ZhwP[...]\n```\n\n----------------------------------------\n\nTITLE: Setting up Ory Tunnel for Local Development with React\nDESCRIPTION: This snippet shows how to use Ory Tunnel to connect a local React application with Ory APIs on the same domain. It requires setting the ORY_SDK_URL environment variable and running the tunnel command with the local development server URL.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/react/README.md#_snippet_0\n\nLANGUAGE: shell-session\nCODE:\n```\nexport ORY_SDK_URL=https://{your-project-slug-here}.projects.oryapis.com\nnpx @ory/cli tunnel --dev http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Login Flow Hooks in YAML\nDESCRIPTION: This YAML configuration demonstrates how to define hooks within Ory's self-service login flow. It shows triggering 'hook_1' before the flow starts, 'hook_2' after submission for all methods except password, and 'hook_3' specifically after submission when using the password authentication method.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/hooks/01_configure-hooks.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login: # Defines for which flow triggers the action.\n      before: # When the user starts the flow\n        hooks:\n          - hook: hook_1 # Specifies which hook is triggered.\n      after: # When the user submits the flow\n        hooks:\n          - hook: hook_2 # is executed for all authentication methods except password\n        password:\n          hooks:\n            - hook: hook_3 # is executed only for password method\n```\n\n----------------------------------------\n\nTITLE: Checking Current Session with Ory SDK in Go (Token-based)\nDESCRIPTION: This Go SDK example shows how to check the current Ory session in a native (non-browser) environment using the /sessions/whoami endpoint. A valid session token must be included in the request's Authorization header. Requires the Ory Go SDK and Go runtime. The input includes the token and API URL; output is the session JSON structure or error. The code is intended for use cases outside of browsers, such as mobile or CLI apps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// Code example loaded from ../../../code-examples/sdk/go/frontend/whoami-native.go\n// Typically, the code would initialize the Ory Go SDK, set the token in the Authorization header, and call ToSession.\n\n```\n\n----------------------------------------\n\nTITLE: Configuring JWT Validation Parameters with Ory CLI\nDESCRIPTION: Shell command using the Ory CLI to configure JWT validation parameters. This example sets jti_optional and iat_optional flags to true and establishes a maximum TTL of one hour for JWTs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config \\\n  --replace \"/oauth2/grant/jwt/jti_optional=true\" \\\n  --replace \"/oauth2/grant/jwt/iat_optional=true\" \\\n  --replace \"/oauth2/grant/jwt/max_ttl=1h\"\n```\n\n----------------------------------------\n\nTITLE: Sample payload for importing credentials with hashed password in JSON\nDESCRIPTION: Payload example for importing an identity with a pre-hashed password value. Supports various hash algorithms, with the hash stored directly in the config. This method is efficient for bulk imports when passwords are pre-hashed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{6-12}\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-hash@example.org\"\n  },\n  \"credentials\": {\n    \"password\": {\n      \"config\": {\n        \"hashed_password\": \"$2a$10$ZsCsoVQ3xfBG/K2z2XpBf.tm90GZmtOqtqWcB5.pYd5Eq8y7RlDyq\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Cleaning up Docker Compose\nDESCRIPTION: This shell script cleans up the Docker Compose environment by bringing down the containers and removing associated volumes. It requires Docker Compose to be installed and configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ndocker-compose -f quickstart.yml down -v\ndocker-compose -f quickstart.yml rm -fsv\n```\n\n----------------------------------------\n\nTITLE: Using Phone Number and Password for Login in Ory Kratos Identity Schema (JSON)\nDESCRIPTION: This JSON Schema configures 'phone' as the primary identifier trait, allowing users to authenticate with a phone number and various credential strategies (password, webauthn, totp, SMS code, passkey). Recovery and verification are handled via SMS. Input must have a 'phone' field under 'traits', formatted as a telephone string per JSON Schema standards. Dependencies include Ory Kratos and draft-07 JSON Schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_26\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/registration.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"phone\": {\n          \"type\": \"string\",\n          \"format\": \"tel\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n               \"code\": {\n                 \"identifier\": true,\n                 \"via\": \"sms\"\n               },\n               \"passkey\": {\n                 \"display_name\": true\n               }\n             },\n             \"recovery\": {\n              \"via\": \"sms\"\n            },\n            \"verification\": {\n              \"via\": \"sms\"\n            }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding the Jsonnet Mapper Script\nDESCRIPTION: Demonstrates how to Base64 encode the Jsonnet claim mapping script (`your-data-mapping.jsonnet`). The encoded string is needed for the Ory identity configuration if not hosting the script at a URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Identity Schemas Using YAML\nDESCRIPTION: This YAML snippet provides an example configuration for specifying multiple JSON Schemas in Ory Identity. It sets a default schema used when none is specified and defines additional schemas with unique IDs and URLs. This setup allows Ory to validate different identity types against their respective JSON Schemas during operations such as creation or updates. Users must replace the URLs with actual schema locations and ensure the schemas are reachable and valid.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/10_managing-users-identities-metadata.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nidentity:\n  # This will be the default JSON Schema. If `schema_id` is empty when creating an identity using the\n  # Admin API or a user signs up using a selfservice flow, this schema will be used.\n  #\n  # This is a required configuration field!\n  default_schema_id: person\n\n  # Optionally define additional schemas here:\n  schemas:\n    # When creating an identity that uses this schema, `traits_schema_id: customer` are set for that identity.\n    - id: customer\n      url: http://foo.bar.com/customer.schema.json\n    - id: person\n      url: http://foo.bar.com/person.schema.json\n```\n\n----------------------------------------\n\nTITLE: Requesting OAuth2 Authorization with PKCE in SPA with Redirect in JavaScript\nDESCRIPTION: This snippet constructs an authorization URL for a Single Page Application (SPA) using PKCE, redirecting the user to start the OAuth2 authorization process with secure code challenge parameters. It ensures the client can securely authenticate without exposing secrets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Request consent\nconst { codeChallenge, codeVerifier } = await generatePKCES256()\nconst clientId = \"your_client_id\"\nconst authorizationUrl = `https://$PROJECT_SLUG.projects.oryapis.com/oauth2/auth?response_type=code&client_id=${clientId}&redirect_uri=https://myapp.com/callback&scope=openid&state=12345&code_challenge_method=S256&code_challenge=${codeChallenge}`\n\n// Redirect user\nwindow.location = authorizationUrl\n```\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Exchange code for token\nconst code = \"authorization_code_received_from_auth_server\"\nconst tokenUrl = \"https://$PROJECT_SLUG.projects.oryapis.com/oauth2/token\"\nconst requestBody = `grant_type=authorization_code&client_id=${clientId}&code_verifier=${codeVerifier}&code=${code}`\n\nfetch(tokenUrl, {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: requestBody,\n})\n  .then((data) => console.log(data))\n  .catch((error) => console.error(error))\n```\n\n----------------------------------------\n\nTITLE: Exporting Ory Identities with Credentials using Ory client-go in Go\nDESCRIPTION: This snippet shows how to initialize the Ory client-go SDK to connect to an Ory instance and retrieve an identity including specified hashed credentials. It requires the 'github.com/ory/client-go' package and uses the GetIdentity method with the IncludeCredential option to specify which credential types (e.g., password) to include in the response. The main inputs are the context 'ctx' and the identity ID 'created.Id'. The output is the identity object inclusive of credentials, the HTTP response, and any error encountered. This method is useful for exporting user identities with sensitive data securely and programmatically.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/26_export-user-accounts-identities.mdx#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\npackage pkg\n\nimport (\n\tory \"github.com/ory/client-go\"\n)\n\nfunc main() {\n  conf := ory.NewConfiguration()\n  conf.Servers = ory.ServerConfigurations{{URL: \"https://{your-slug}.projects.oryapis.com\"}}\n\n  identity, res, err := client.IdentityApi.GetIdentity(ctx, created.Id).IncludeCredential([]string{\"password\"}).Execute()\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Command usage syntax for 'kratos remote status' in CLI\nDESCRIPTION: Shows the basic CLI syntax to execute the 'status' command, indicating how to invoke it and display the current state of an Ory Kratos instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-status.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos remote status [flags]\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory TypeScript SDK Client (Administrative)\nDESCRIPTION: Initializes the Ory TypeScript SDK client for performing administrative session management tasks. Requires an Ory API Key for authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeInitClient from \"!!raw-loader!@site/code-examples/sdk/typescript/src/session/init-client-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"Initializing the Typescript SDK client\">{nativeInitClient}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Result of GitHub Data Mapper (JSON)\nDESCRIPTION: Shows the JSON output produced by the complete GitHub Jsonnet data mapper example when processing the sample GitHub claims data. It demonstrates the successful mapping of the verified email and the GitHub username.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"foo@ory.sh\"\n    },\n    \"metadata_public\": {\n      \"github_username\": \"foo-user\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session in Native App with Token (TypeScript)\nDESCRIPTION: This MDX code block imports and displays TypeScript code suitable for a native application. It demonstrates using the Ory SDK configured with `withCredentials: false` and sending the session token via the `Authorization: Bearer` header to the `/sessions/whoami` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_68\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport whoamiNative from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/session/whoami-native.ts'\n\n<CodeBlock language=\"ts\" title=\"session.ts\">{whoamiNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration with TypeScript\nDESCRIPTION: This TypeScript code demonstrates submitting a registration flow using the Ory SDK.  It is designed for a native application. It includes the necessary fields and data for a successful registration. Dependencies: TypeScript and Ory SDK. Prerequisites: configured SDK with the correct API endpoint and the traits in the right format. Expected input: user input data. Expected output: API response. Limitations: requires TypeScript and Ory SDK. \nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_25\n\nLANGUAGE: ts\nCODE:\n```\nimport submitTsRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/submit-registration-native.ts'\n```\n\n----------------------------------------\n\nTITLE: Defining Multiple Emails in JSON Schema\nDESCRIPTION: This JSON schema example defines a 'Person' type with a traits property containing an array of 'emails'.  It's intended to configure Ory Identities to allow multiple email addresses for the same user, used for login and recovery flows. The schema leverages the `ory.sh/kratos` extensions to specify credentials and flows using these emails.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.email.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"emails\": {\n          \"type\": \"array\",\n          \"items\": [\n            {\n              \"type\": \"string\",\n              \"format\": \"email\",\n              \"title\": \"E-Mail\",\n              \"ory.sh/kratos\": {\n                \"credentials\": {\n                  \"password\": {\n                    \"identifier\": true\n                  },\n                  \"webauthn\": {\n                    \"identifier\": true\n                  },\n                  \"totp\": {\n                    \"account_name\": true\n                  },\n                  \"passkey\": {\n                    \"display_name\": true\n                  },\n                  \"code\": {\n                    \"identifier\": true,\n                    \"via\": \"email\"\n                  }\n                },\n                \"recovery\": {\n                  \"via\": \"email\"\n                },\n                \"verification\": {\n                  \"via\": \"email\"\n                }\n              },\n              \"maxLength\": 320\n            }\n          ]\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Privileged Session Max Age - YAML\nDESCRIPTION: This YAML snippet configures the `privileged_session_max_age` setting within the Ory Identities configuration. This setting determines how long a user's session can last before requiring re-authentication when updating privileged fields. The example sets it to 1 minute.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      # Sessions older than a minute requires the user to sign in again before\n      # the password is changed.\n      privileged_session_max_age: 1m\n```\n\n----------------------------------------\n\nTITLE: Performing Logout in Single Page Applications (SPA) Using React and TypeScript\nDESCRIPTION: This example shows how to perform the logout flow in a SPA environment using React with TypeScript. The logout URL, generated similarly as in server-rendered apps, is requested via an AJAX call, requiring an active Ory Tunnel proxy setup for proper communication. The snippet depends on React and Ory Identity SDK for session management. Expected usage involves triggering the logout request programmatically, handling session invalidation and interface updates in the client application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-logout.mdx#_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport react from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/logout/react.tsx\"\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration with React (TypeScript)\nDESCRIPTION: This TypeScript (React) code shows how to submit a registration flow. It uses the Ory SDK and handles a POST request to the registration endpoint. Dependencies: React and Ory SDK. Prerequisites: React environment set up and SDK configured.  Expected input: registration form data. Expected output: API response. Limitations: requires React and Ory SDK.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_26\n\nLANGUAGE: tsx\nCODE:\n```\nimport submitReactRegistrationApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/registration/submit-registration-react.tsx'\n```\n\n----------------------------------------\n\nTITLE: Landing Page with Session Management\nDESCRIPTION: This snippet illustrates the implementation of the landing page component for React, Preact, and Next.js. It includes session checks to determine if a user is logged in, and provides logic for redirecting unauthenticated users to login pages. It also includes logout URL setup for signing out functionality.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n```mdx-code-block\n<Tabs groupId=\"react-or-preact\">\n  <TabItem value=\"react\" label=\"React\" default>\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/Dashboard.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Dashboard.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"preact\" label=\"Preact\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/app.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/app.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"nextjs\" label=\"Next.js\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pages/index.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/index.tsx\"\n/>\n  </TabItem>\n</Tabs>\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Advanced Conditional Validation - JSON\nDESCRIPTION: This JSON schema demonstrates conditional validation within a JSON schema, enforcing that if a user opts in to receive security updates (`optIn`), they must also provide a phone number (`phone`). It utilizes `$ref`, `definitions`, and `dependencies` for a structured approach. The `definitions` section defines reusable schema components, and `dependencies` sets up the conditional validation logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_21\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.email.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"definitions\": {\n    \"phone\": {\n      \"type\": \"string\",\n      \"format\": \"tel\",\n      \"title\": \"Phone Number\"\n    },\n    \"optIn\": {\n      \"type\": \"boolean\",\n      \"title\": \"Get security related notifications\"\n    }\n  },\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"username\": {\n          \"type\": \"string\",\n          \"title\": \"Username\",\n          \"minLength\": 6,\n          \"maxLength\": 32,\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            }\n          }\n        },\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"maxLength\": 320\n        },\n        \"phone\": {\n          \"$ref\": \"#/definitions/phone\"\n        },\n        \"optIn\": {\n          \"$ref\": \"#/definitions/optIn\"\n        }\n      },\n      \"required\": [\n        \"email\",\n        \"username\",\n      ],\n      \"additionalProperties\": false,\n      \"dependencies\": {\n        \"optIn\": {\n          \"properties\": {\n            \"phone\": {\n              \"$ref\": \"#/definitions/phone\"\n            }\n          },\n          \"required\": [\n            \"phone\"\n          ]\n        },\n        \"phone\": {\n          \"properties\": {\n            \"optIn\": {\n              \"$ref\": \"#/definitions/optIn\"\n            }\n          },\n          \"required\": [\n            \"optIn\"\n          ]\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Triggering Step-Up Multi-Factor Authentication via API (Shell/HTTP)\nDESCRIPTION: These shell snippets demonstrate how to trigger a new login flow with enforced second factor (AAL2) using Ory self-service login endpoints. The URLs include the 'aal=aal2' parameter to force users to authenticate with the configured second factor; appending 'refresh=true' allows refreshing an existing session if already authenticated at AAL2. Dependencies: Requires valid Ory project setup, the user must have a session with appropriate status for the endpoint. Inputs are query parameters (aal, refresh) and endpoints; outputs are login flows or errors if conditions are unmet. These calls are generally used from frontend applications or backend services to protect sensitive activities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/05_step-up-authentication.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n/self-service/login/browser?aal=aal2\n```\n\nLANGUAGE: shell\nCODE:\n```\n/self-service/login/api?aal=aal2\n```\n\nLANGUAGE: shell\nCODE:\n```\n/self-service/login/browser?refresh=true&aal=aal2\n```\n\nLANGUAGE: shell\nCODE:\n```\n/self-service/login/api?refresh=true&aal=aal2\n```\n\n----------------------------------------\n\nTITLE: Checking Access with CLI - Bash\nDESCRIPTION: This Bash snippet uses the Ory Keto CLI's `check` command to verify access permissions.  It checks if a user (alice, bob or john) is allowed to perform a specific action (read) on a resource (blog_posts:my-first-blog-post).  The output indicates whether access is allowed or denied.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/migrating-legacy-policies.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nketo check alice read blog_posts my-first-blog-post\n```\n\nLANGUAGE: bash\nCODE:\n```\nketo check bob read blog_posts my-first-blog-post\n```\n\nLANGUAGE: bash\nCODE:\n```\nketo check john read blog_posts my-first-blog-post\n```\n\n----------------------------------------\n\nTITLE: Defining Document Permissions using Ory Permission Language (OPL)\nDESCRIPTION: This snippet demonstrates how to define a basic permission model for 'Document' objects using the Ory Permission Language (OPL), a TypeScript subset. It defines namespaces, relationships (like 'editors' and 'viewers' of a document), and permissions ('write', 'read') derived from these relationships. The 'write' permission is granted to users in the 'editors' relationship, while the 'read' permission is granted to editors or viewers. It requires types from '@ory/keto-namespace-types'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/index.md#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\nclass User implements Namespace {}\n\nclass Document implements Namespace {\n  // All relationships for a single document.\n  related: {\n    editors: User[]\n    viewers: User[]\n  }\n\n  // The permissions derived from the relationships and context.\n  permits = {\n    // A permission is a function that takes the context and returns a boolean. It can reference `this.related` and `this.permits`.\n    write: (ctx: Context): boolean => this.related.editors.includes(ctx.subject),\n    read: (ctx: Context): boolean => this.permits.write(ctx) || this.related.viewers.includes(ctx.subject),\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Protected Access Rule in Ory Oathkeeper (YAML)\nDESCRIPTION: Defines an access rule (`ory:kratos-selfservice-ui-node:protected`) in `access-rules.yml` for Oathkeeper. It matches GET requests to protected UI paths like the dashboard and settings (`/debug`, `/dashboard`, `/settings`) at `http://127.0.0.1:4455/`. Requests require a valid session cookie (`cookie_session` authenticator), are authorized by `allow`, and the `id_token` mutator transforms the session into a JWT for the upstream service (`http://kratos-selfservice-ui-node:4435`). If authentication fails, the `redirect` error handler (configured separately) sends the user to the login page.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\n- id: \"ory:kratos-selfservice-ui-node:protected\"\n  upstream:\n    preserve_host: true\n    url: \"http://kratos-selfservice-ui-node:4435\"\n  match:\n    url: \"http://127.0.0.1:4455/<{debug,dashboard,settings}{/,}>\"\n    methods:\n      - GET\n  authenticators:\n    - handler: cookie_session\n  authorizer:\n    handler: allow\n  mutators:\n    - handler: id_token\n  errors:\n    - handler: redirect\n      config:\n        to: http://127.0.0.1:4455/login\n```\n\n----------------------------------------\n\nTITLE: Enabling Passkey Authentication - Ory Network\nDESCRIPTION: This YAML configuration enables the passkey strategy in Ory Network. It sets `enabled` to `true` and configures the `display_name` for the passkey.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    passkey:\n      enabled: true\n      config:\n        display_name: \"My Display Name\"\n```\n\n----------------------------------------\n\nTITLE: Listing hydra get Command Options (CLI)\nDESCRIPTION: This snippet provides a list of command-line options available for the `hydra get` command. It details each option's short and long form, expected argument type (e.g., `string`), and a brief explanation of its function. Key options include specifying the target API endpoint, output format, and adding custom HTTP headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get.md#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n-e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n    --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n-h, --help              help for get\n-H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n-q, --quiet             Be quiet with output printing.\n    --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Listing Workspaces, Projects, and Downloading Ory Identity Config (Shell)\nDESCRIPTION: This shell code sequence shows how to use Ory CLI to enumerate available workspaces, projects, and download the projects Identities configuration in YAML format. It depends on a local installation of the Ory CLI. Inputs include workspace and project IDs. Outputs include a downloaded `identity-config.yaml` file for further editing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory list workspaces\n\nory list projects --workspace <workspace-id>\n\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Forcing Step-Up Authentication During Session Refresh in Ory (Shell)\nDESCRIPTION: This shell snippet shows how to enforce multi-factor authentication when a user session is refreshed by passing both `refresh=true` and `aal=aal2` as URL parameters. The endpoint is `/self-service/login/browser`, requiring the user to complete a second authentication factor. Main parameters: `refresh=true` (re-authenticate) and `aal=aal2` (require AAL2). Input is an HTTP GET request; upon completion, the session is refreshed with step-up authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n${getSdkUrl().url}/self-service/login/browser?refresh=true&aal=aal2\n```\n\n----------------------------------------\n\nTITLE: Configuring Login UI URL in YAML\nDESCRIPTION: This snippet shows how to configure the login UI URL within the Ory Identities configuration file. It sets the `ui_url` parameter within the `selfservice.flows.login` section.  The value of `ui_url` should point to the URL of your custom login UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      # becomes http://127.0.0.1:4455/auth/login?flow=df607aa1-d555-4b2a-b3e4-0f5a1d2fe6f3\n      ui_url: http://127.0.0.1:4455/auth/login\n```\n\n----------------------------------------\n\nTITLE: Handler Configuration in YAML\nDESCRIPTION: This snippet presents an example of configuring handlers, such as authenticators, globally and also per access rule. It demonstrates how the configuration defined in the access rule overrides the global configuration.  The global config is located in `oathkeeper.yml` and the override is in `rule.json`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nauthenticators:\n  anonymous:\n    enabled: true\n    config:\n      subject: anon\n```\n\n----------------------------------------\n\nTITLE: Inherited Hydra CLI Options for get jwks\nDESCRIPTION: Lists command-line options inherited from parent Hydra commands that are applicable to `hydra get jwks`. These include setting the API endpoint, output format, custom HTTP headers, quiet mode, and skipping TLS verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwks.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, and json-pretty. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Modifying Ory Kratos Configuration to Use PostgreSQL Data Source Name (DSN) (Diff Format)\nDESCRIPTION: Updates the Kratos configuration to connect to PostgreSQL by replacing the temporary in-memory DSN with a connection string specifying the PostgreSQL user, password, host, port, and connection parameters. This ensures persistence of identity data in the PostgreSQL backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_8\n\nLANGUAGE: diff\nCODE:\n```\n- dsn: memory\n+ dsn: postgres://kratos:CHANGE-ME-INSECURE-PASSWORD@127.0.0.1:5432/kratos?sslmode=disable&max_conns=20&max_idle_conns=4\n```\n\n----------------------------------------\n\nTITLE: Create Login Flow (Browser) using cURL\nDESCRIPTION: This snippet demonstrates how to create a login flow for a browser application using cURL. It is crucial to store cookies using the `-c` flag and reuse them with the `-b` flag to maintain session integrity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nimport createExampleLoginCurlBrowser from '!!raw-loader!../../../code-examples/curl/login/create-login-browser.sh'\n\n<CodeBlock language=\"shell\" title=\"create-login-browser.sh\">{createExampleLoginCurlBrowser}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Sample payload for importing credentials with plaintext password in JSON\nDESCRIPTION: Payload demonstrating how to import an identity with a cleartext password. The password will be hashed according to system configuration during import, but no validation is applied. Suitable for batch imports with passwords already hashed for efficiency.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{6-12}\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-cleartext@example.org\"\n  },\n  \"credentials\": {\n    \"password\": {\n      \"config\": {\n        \"password\": \"the-password\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting OAuth2 client via Console, CLI, SDK, and REST API\nDESCRIPTION: This snippet provides methods to delete an OAuth2 client using the Ory Console, CLI command, SDK code, and linked REST API documentation. Deletion removes the client registration and associated configurations, enabling cleanup of obsolete or compromised clients. The SDK example loads specific code, and the REST endpoint is referenced for implementation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory delete oauth2-client {client.id}\n```\n\nLANGUAGE: Markdown\nCODE:\n```\n```mdx-code-block\nimport clientDeleteTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-delete.ts'\n\n<Codes language=\"tsx\">{clientDeleteTs}</Codes>\n```\n```\n\n----------------------------------------\n\nTITLE: Applying Hydra SQL Migrations\nDESCRIPTION: This command applies the SQL migrations to the PostgreSQL database. It is used to create the necessary tables and schema for Ory Hydra to function correctly. Requires: hydra binary in /opt/hydra/bin, hydra.yml config.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\n/opt/hydra/bin/hydra -c /opt/hydra/config/hydra.yml migrate sql -y postgres://hydra:b0qw68gr3Q@127.0.0.1:5432/hydra?sslmode=disable\n```\n\n----------------------------------------\n\nTITLE: Configure SMS Request - YAML\nDESCRIPTION: This snippet shows the configuration for the SMS request, including the URL, method, body (using a JsonNet template), headers, and authentication details for interacting with the SMS gateway.  It specifies how Ory Kratos sends SMS messages through an external service like Twilio.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/10_sending-sms.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  sms:\n    request_config:\n      url: https://api.twilio.com/2010-04-01/Accounts/YourAccountID/Messages.json\n      method: POST\n      body: file://./twilio.request.jsonnet\n      headers:\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      auth:\n        type: basic_auth\n        config:\n          user: YourUsername\n          password: YourPass\n```\n\n----------------------------------------\n\nTITLE: Revoking Other User Sessions in Go (Self-Service)\nDESCRIPTION: Uses the Go SDK to revoke all active sessions for the authenticated user except the current one via the self-service frontend API. Requires the Ory Session Cookie.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_6\n\nLANGUAGE: go\nCODE:\n```\nimport goRevokeOtherSessions from '!!raw-loader!../../../code-examples/sdk/go/frontend/revoke-other-sessions.go'\n\n<CodeBlock language=\"go\">{goRevokeOtherSessions}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Querying Login Flow with Social Sign-In (OIDC) via Ory API in Shell\nDESCRIPTION: This snippet illustrates how to query Ory Identities for a login flow using a social provider through OpenID Connect (OIDC) using curl and jq. It requires curl, jq, and a valid login flow ID where OIDC is enabled. The response details which social providers are available for sign-in, including form structure and provider-specific submit fields. Inputs required include a valid flow ID for an enabled OIDC method, and the output is a JSON payload specifying the action endpoints and UI nodes for OIDC authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/self-service/login/flows?id=d6340737-89f2-4b01-a848-79007de6f430' \\\n    | jq\n\n{\n  \"id\": \"d6340737-89f2-4b01-a848-79007de6f430\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T11:05:01.382156Z\",\n  \"issued_at\": \"2021-04-28T10:05:01.382156Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/login/browser\",\n  \"ui\": {\n    \"action\": \"http://127.0.0.1:4455/self-service/login?flow=d6340737-89f2-4b01-a848-79007de6f430\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"7Y2PgQlka1Zjn8wVRUnvCqeSs9hzsUECnk9YjULACyMIYXbCwAVcMDpeFf33tECgowwmA3ZNTozZMKxy2jUSSA==\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"oidc\",\n        \"attributes\": {\n          \"name\": \"provider\",\n          \"type\": \"submit\",\n          \"value\": \"github\",\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1010002,\n            \"text\": \"Sign in with github\",\n            \"type\": \"info\",\n            \"context\": {\n              \"provider\": \"github\"\n            }\n          }\n        }\n      }\n    ]\n  },\n  \"forced\": false\n}\n\n```\n\n----------------------------------------\n\nTITLE: Testing OAuth2 Introspection Authenticator with Curl\nDESCRIPTION: This shell script demonstrates how to test an ORY Oathkeeper access rule configured with the `oauth2_introspection` authenticator. It shows an example access rule configuration in JSON and `curl` commands to test access with no token, an invalid token, and a valid token, illustrating the expected HTTP responses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_24\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"oauth2_introspection\",\n    \"config\": {\n      \"required_scope\": [\"scope-a\", \"scope-b\"],\n      \"target_audience\": [\"example_audience\"]\n    }\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because no credentials have been provided.\n\ncurl -X GET -H 'Authorization: Bearer invalid-token' http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because the provided credentials are invalid.\n\ncurl -X GET -H 'Authorization: Bearer valid.access.token.from.peter' http://my-app/some-route\n\nHTTP/1.0 200 OK\nThe request has been allowed! The subject is: \"peter\"\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Data Mapping for Facebook Sign-In\nDESCRIPTION: This Jsonnet snippet maps the email claim from Facebook's OAuth response to the Ory identity schema traits. It ensures that the user's email is correctly associated, handling cases where permission might be denied.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/15_facebook.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // The email might be empty if the user hasn't granted permissions for the email scope.\n      [if 'email' in claims then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication Service in Dart\nDESCRIPTION: Dart implementation of an authentication service that queries Ory APIs for session information, handling user authentication status in a Flutter Web application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_3\n\nLANGUAGE: dart\nCODE:\n```\n# Content from lib/services/auth.dart referenced but not directly shown in the provided text\n```\n\n----------------------------------------\n\nTITLE: Setting Login UI URL in Kratos Config\nDESCRIPTION: This YAML snippet demonstrates how to set the Login UI URL in the Kratos configuration file. It is necessary for the self-service login flow to redirect users to the correct login page. The `ui_url` parameter specifies the URL of the login UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/login.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      ui_url: http://my-app.com/login\n```\n\n----------------------------------------\n\nTITLE: Importing Identities with Ory Kratos CLI - Bash\nDESCRIPTION: This snippet demonstrates how to use the \"kratos identities import\" command to import identity data into Ory Kratos. It supports accepting input from one or multiple JSON files, or from STD_IN using piping. Dependencies include a valid Ory Kratos CLI installation and properly formatted identity JSON files. The expected output is that identities defined in the JSON input will be loaded into the running Kratos instance. Parameters include file paths or STD_IN, and optional flags such as --endpoint, --format, and --quiet.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-import.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities import <file.json [file-2.json [file-3.json] ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Implementing Verification Page with Ory Elements in React (TypeScript)\nDESCRIPTION: This React implementation shows how to verify user accounts using the Ory Elements SDK, handling verification flows and updating UI accordingly. Requires React, TypeScript, and Ory Elements, taking verification tokens or user actions as input and updating verification status as output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/Verification.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Verification.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Initialize Browser Login Flow - Shell\nDESCRIPTION: Demonstrates initiating a browser-based self-service login flow by sending an HTTP GET request to the initialization endpoint using `curl`. The response shows an HTTP 303 redirect to the configured UI URL, appending the generated flow ID as a query parameter, and setting necessary cookies like the anti-CSRF token. This is the first step in a browser-based flow where the user's browser is redirected.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -i -X GET \\\n    -H \"Accept: text/html\" \\\n    https://playground.projects.oryapis.com/self-service/login/browser\n```\n\n----------------------------------------\n\nTITLE: Access Rules YAML\nDESCRIPTION: This configuration file provides access rules for Ory Oathkeeper. It configures the cookie authenticator to validate against Ory Kratos and proxies only authenticated requests to `http://ws:8080`. It uses the `cookie_session` authenticator and the `proxy` handler to enforce access control.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_6\n\nLANGUAGE: YAML\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow using Go SDK\nDESCRIPTION: Demonstrates how to use the Ory Kratos Go SDK to submit data (like email or verification code) to complete a verification flow. This is typically used in backend or native Go applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_60\n\nLANGUAGE: go\nCODE:\n```\n{submitVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTP Email Delivery Strategy in Ory Kratos (YAML)\nDESCRIPTION: Example YAML configuration snippet for setting the Ory Kratos courier `delivery_strategy` to `http`. It defines the target API endpoint (`url`), HTTP `method`, path to the Jsonnet body template (`body`), request headers, and specifies Basic Authentication (`auth`) with user credentials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/03_mail-courier-http.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  delivery_strategy: http\n  http:\n    request_config:\n      url: https://api.crm.com/email\n      method: POST\n      body: file://.mail.api.request.jsonnet\n      headers:\n        \"Content-Type\": \"application/json\"\n      auth:\n        type: basic_auth\n        config:\n          user: YourUsername\n          password: YourPass\n```\n\n----------------------------------------\n\nTITLE: Configuring Email as Password Identifier\nDESCRIPTION: This JSON schema example demonstrates how to set the email field as the identifier for the password flow. The example includes a basic customer schema with an email field. The key part is the `ory.sh/kratos` section within the email's definition, specifying that the email is an identifier for password credentials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"http://mydomain.com/schemas/v2/customer.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"A customer (v2)\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"title\": \"E-Mail\",\n          \"type\": \"string\",\n          \"format\": \"email\",\n\n          // This tells Ory Identities that the field should be used as the \"username\" for the username and password flow.\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"title\": \"First Name\",\n              \"type\": \"string\"\n            },\n            \"last\": {\n              \"title\": \"Last Name\",\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"favorite_animal\": {\n          \"title\": \"Favourite Animal\",\n          \"type\": \"string\"\n        },\n        \"accepted_tos\": {\n          \"title\": \"Terms of Service\",\n          \"type\": \"boolean\"\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Phone as Password Identifier\nDESCRIPTION: This JSON schema example demonstrates how to configure a phone number to be used as an identifier for the password flow. It extends the customer schema and includes a `phone` property formatted as 'tel'. This allows the user to log in with both email and phone number using the same password.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"http://mydomain.com/schemas/v2/customer.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"A customer (v2)\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"title\": \"E-Mail\",\n          \"type\": \"string\",\n          \"format\": \"email\",\n\n          // This tells Ory Identities that the field should be used as the \"username\" for the Username and Password Flow.\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"phone\": {\n          \"title\": \"Phone\",\n          \"type\": \"string\",\n          \"format\": \"tel\",\n\n          // The phone number is marked as an identifier. This allows the user to log in with both email and phone number.\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"title\": \"First Name\",\n              \"type\": \"string\"\n            },\n            \"last\": {\n              \"title\": \"Last Name\",\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"favorite_animal\": {\n          \"title\": \"Favourite Animal\",\n          \"type\": \"string\"\n        },\n        \"accepted_tos\": {\n          \"title\": \"Terms of Service\",\n          \"type\": \"boolean\"\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Access Rules Configuration Import\nDESCRIPTION: This snippet imports the `access-rules.yml` file for Ory Oathkeeper.  It utilizes raw-loader to include the content of this YAML file which defines the access rules for the protected resources, specifying which users or requests are allowed or denied access. These rules rely on the cookie authenticator and proxy authenticated requests to `http://ws:8080`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport rules from '!!raw-loader!../../../code-examples/oathkeeper/oathkeeper/access-rules.yml'\n```\n\n----------------------------------------\n\nTITLE: Starting the React Development Server\nDESCRIPTION: Executes the standard npm script `start` within the React project directory. This command typically launches the development web server, making the application accessible in a browser, usually at `http://localhost:3000`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Configuring SMS Recovery - JSON\nDESCRIPTION: This JSON snippet configures account recovery to use SMS. This is similar to the email configuration, using the `via` field set to \"sms\" within the Ory Kratos configuration. This indicates that an SMS message will be used for recovery.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"recovery\": {\n      \"via\": \"sms\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting login flow via cURL for browser and native applications\nDESCRIPTION: These shell scripts demonstrate how to submit the login flow to the `/self-service/login` endpoint using cURL. For browser flows, the request must include cookies and the CSRF token, which is provided as a hidden input field named `csrf_token`. Usage of the `-c` and `-b` flags in cURL to store and send cookies is recommended. Native flow examples omit cookies and CSRF tokens as they target API clients directly. Expected inputs are user credentials and CSRF token (browser), output is the server response indicating login success or failure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\nimport submitLoginCurlBrowser from '!!raw-loader!../../../code-examples/curl/login/submit-login-browser.sh'\n```\n\n----------------------------------------\n\nTITLE: Defining Message Object with Secrets Context\nDESCRIPTION: This JSON snippet represents a message object which uses a list of other messages as context. The `secrets` property is an array of messages with `id`, `text`, `type`, and `context`. This can be used to represent dynamic content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": 1050015,\n  \"text\": \"{secrets_list}\",\n  \"type\": \"info\",\n  \"context\": {\n    \"secrets\": [\n      {\n        \"id\": 1050009,\n        \"text\": \"{secret}\",\n        \"type\": \"info\",\n        \"context\": {\n          \"secret\": \"{secret}\"\n        }\n      },\n      {\n        \"id\": 1050014,\n        \"text\": \"Secret was used at 2020-01-01 00:59:59 +0000 UTC\",\n        \"type\": \"info\",\n        \"context\": {\n          \"used_at\": \"2020-01-01T00:59:59Z\",\n          \"used_at_unix\": 1577840399\n        }\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Projects and Getting Ory Identity Config (CLI)\nDESCRIPTION: This code snippet demonstrates how to list available workspaces and projects using the Ory CLI, and how to retrieve the Ory Identities configuration in YAML format. It requires the Ory CLI to be installed and configured. The output is the Ory Identities configuration file, which can be further edited.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n   ## List all available workspaces\n   ory list workspaces\n\n   ## List all available projects\n   ory list projects --workspace <workspace-id>\n\n   ## Get config\n   ory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Writing an access relationship to Ory Keto\nDESCRIPTION: This snippet adds an access relationship to a file.  It grants a user access to a specific file. The key is the file ID, and the subject is the username of the user. It assumes the namespace \"files\" and the relationship type \"access\" are defined in Ory Keto.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/examples/olymp-file-sharing.mdx#_snippet_1\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nec788a82-a12e-45a4-b906-3e69f78c94e4#access@athena\n```\n\n----------------------------------------\n\nTITLE: Universal Jsonnet Template for Ory Kratos Email Context (Jsonnet)\nDESCRIPTION: A Jsonnet function template demonstrating how to structure the request body payload for the HTTP email delivery. It accesses context variables (`ctx.recipient`, `ctx.template_type`, `ctx.template_data`) passed by the courier to dynamically include relevant data like recovery/verification URLs/codes and identity information based on the email type. This is the default template if no `body` is specified.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/03_mail-courier-http.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) {\n  recipient: ctx.recipient,\n  template_type: ctx.template_type,\n  name: if \"template_data\" in ctx && \"identity\" in ctx.template_data && \"name\" in ctx.template_data.identity then ctx.template_data.identity.name else null,\n  to: if \"template_data\" in ctx && \"to\" in ctx.template_data then ctx.template_data.to else null,\n  recovery_code: if \"template_data\" in ctx && \"recovery_code\" in ctx.template_data then ctx.template_data.recovery_code else null,\n  recovery_url: if \"template_data\" in ctx && \"recovery_url\" in ctx.template_data then ctx.template_data.recovery_url else null,\n  verification_url: if \"template_data\" in ctx && \"verification_url\" in ctx.template_data then ctx.template_data.verification_url else null,\n  verification_code: if \"template_data\" in ctx && \"verification_code\" in ctx.template_data then ctx.template_data.verification_code else null,\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with MySQL\nDESCRIPTION: Starts Ory Hydra with a MySQL database. Requires Docker and Docker Compose. It uses `quickstart.yml` and `quickstart-mysql.yml` files for configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n    -f quickstart-mysql.yml \\\n    up\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration via CLI (Shell)\nDESCRIPTION: Demonstrates the Ory CLI command to apply the updated identity configuration from a local YAML file (`identity-config.yaml`) to the specified Ory project and workspace. This pushes the changes, such as enabling TOTP, to the Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Passwordless Login Flow WebAuthn Button (JSON5)\nDESCRIPTION: This JSON5 snippet shows the response from the login flow after the user initiates passwordless authentication. It contains the `webauthn` group and a button with an `onclick` attribute.  This `onclick` attribute calls a JavaScript function provided by Ory to trigger the WebAuthn prompt for the security key. Important attribute here is the `onclick` which calls `window.__oryWebAuthnLogin`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_8\n\nLANGUAGE: json5\nCODE:\n```\n{\n  ui: {\n    nodes: [\n      {\n        type: \"input\",\n        group: \"webauthn\",\n        attributes: {\n          name: \"webauthn_login_trigger\",\n          type: \"button\",\n          value: \"\",\n          disabled: false,\n          onclick: 'window.__oryWebAuthnLogin({\"publicKey\":{\"challenge\":\"LLoTYU0Xv7QkmIFiwKDOpr1XeNU5c0TGnCgzj6kqSIQ=\",\"timeout\":60000,\"rpId\":\"auth.example.com\",\"allowCredentials\":[{\"type\":\"public-key\",\"id\":\"3DUZPEd3DwUCaRkyTy0L0MntQElA0AH4uAUydiVhBdGWTXHS1TDsY+lgHRhTj52cFUL/uua2Af+dgqD14a/rHA==\"}],\"userVerification\":\"discouraged\"}})',\n          node_type: \"input\",\n        },\n        messages: [],\n        meta: {\n          label: {\n            id: 1010013,\n            text: \"Continue\",\n            type: \"info\",\n          },\n        },\n      },\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Namespaces in Ory Permissions with TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to define namespaces by implementing the Namespace interface from the @ory/keto-namespace-types package. Each namespace is represented as a class (e.g., User, Document, Folder) that acts as a scope for permission checks and relationships within Ory Permissions. This snippet requires the '@ory/keto-namespace-types' dependency and establishes core namespaces used for permission modeling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/05_namespaces.mdx#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"  \n\nclass User implements Namespace {}  \nclass Document implements Namespace {}  \nclass Folder implements Namespace {}\n```\n\n----------------------------------------\n\nTITLE: Defining Data Mapping for Microsoft OIDC in Ory (Jsonnet)\nDESCRIPTION: This Jsonnet snippet is used to map claims received from Microsoft's OIDC provider to traits in the Ory identity schema. It is primarily required during the configuration of any Microsoft social login, both in the Console and CLI. The code checks for the existence of an 'email' claim and, if available, maps it; otherwise, it returns null. The mapping supports secure use of emails as identifiers, conditional on verification, and includes security notes regarding enumeration attacks. Input required is the claims object as an external variable; output is a mapping for Ory's identity traits. Limitations include proper verification of emails and potentially missing claims.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // If connecting only to your organization (one tenant), claims.email is safe to use\n      // if you haven't actively disabled e-mail verification during sign-up.\n      //\n      // The email might be empty if the account isn't linked to an email address.\n      // For a human readable identifier, consider using the \"preferred_username\" claim.\n      [if 'email' in claims then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: kratos identities put Command Options\nDESCRIPTION: This section lists the options available for the `kratos identities put` command. The `-h` or `--help` option provides help information.  These options are used for controlling the command's behavior such as specifying input file paths or displaying help information. No dependencies are explicitly called out here.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-put.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n  -h, --help   help for put\n```\n\n----------------------------------------\n\nTITLE: Listing User-Specific Sessions in TypeScript (Administrative)\nDESCRIPTION: Uses the initialized TypeScript SDK client to list all sessions for a specific user identity via the administrative API. Requires the user's Identity ID and an API Key. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_14\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeGetIdentitySessions from \"!!raw-loader!@site/code-examples/sdk/typescript/src/session/get-identity-sessions-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"get-identity-sessions-native.ts\">{nativeGetIdentitySessions}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Checking Current Session Using cURL with a Session Token (shell)\nDESCRIPTION: This cURL example demonstrates accessing the Ory /sessions/whoami endpoint using an Authorization: Bearer header with a session token. No dependencies except cURL. The session token must be obtained through a non-browser login flow, and the expected output is a session object in JSON format. Intended for native clients such as CLI or mobile applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ncurl '${getSdkUrl().url}/sessions/whoami' \\\n   -H 'Accept: application/json' \\\n   -H 'Authorization: Bearer BRFbGMzTnBiMjVmZEcEdjM1J5YVc1bkRDSUFvME5VNVlaVeWJrUnZhSEF4YmxSV2VVRlhNMWwxVlVGenxXpsk2cLXV41N6bFxvVJSt7CeICy'\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Kratos Revoke Sessions Hook in YAML\nDESCRIPTION: This snippet shows the configuration required in the Ory Kratos config file (config.yml) to enable the `revoke_active_sessions` hook. Adding this hook to the `selfservice.flows.settings.after.password.hooks` path ensures that upon a successful password change, all other active sessions for that user are terminated, increasing account security.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/25_revoke-sessions-hook.md#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      after:\n        password:\n          hooks:\n            - hook: revoke_active_sessions\n```\n\n----------------------------------------\n\nTITLE: Setting Default Browser Return URL in Ory Kratos Configuration YAML\nDESCRIPTION: This YAML snippet shows how to configure the 'default_browser_return_url' parameter within the 'selfservice' section of the Ory Kratos configuration file. This value determines the URL users are redirected to after completing a self-service flow in the browser. The snippet requires placing it in the main configuration file, often located at 'path/to/kratos/config.yml'. The parameter can alternatively be set via the environment variable 'SELFSERVICE_DEFAULT_BROWSER_RETURN_URL'. Input is expected as a valid URL string, and the output is effective redirection of users upon flow completion. Incorrect or missing configuration causes users to encounter the shown error UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/default_return_to.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  default_browser_return_url: http://my-app.com/dashboard\n```\n\n----------------------------------------\n\nTITLE: Updating Project Configuration via ory CLI - Bash\nDESCRIPTION: Demonstrates how to invoke the 'ory update project' command to update an Ory Network project's configuration using various input files and changing the project's name. Dependencies include the installed 'ory' CLI tool, access to the configuration files (locally or via URLs), and valid project credentials. Expected inputs are the project ID, the '--name' flag for renaming, and one or several configuration files via the '--file' flag. Output will be project details in a table or specified format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-project.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ ory update project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--name \\\"my updated name\\\" \\\n\t--file /path/to/config.json \\\n\t--file /path/to/config.yml \\\n\t--file https://example.org/config.yaml \\\n\t--file base64://<json>\n\nID\t\tecaaa3cb-0730-4ee8-a6df-9553cdfeef89\nSLUG\tgood-wright-t7kzy3vugf\nSTATE\trunning\nNAME\tExample Project\n```\n\n----------------------------------------\n\nTITLE: Enabling WebAuthn - Full Configuration\nDESCRIPTION: This configuration enables WebAuthn in Ory and sets up the display name, ID, and origins.  The `passwordless` setting determines whether WebAuthn will be used for passwordless or multi-factor authentication.  The `id` should be your root domain, and `origins` lists the exact URLs of the WebAuthn prompt.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    webauthn:\n      enabled: true\n      config:\n        # If set to true will use WebAuthn for passwordless flows intead of multi-factor authentication.\n        passwordless: ${props.passwordless || false}\n        rp:\n          # This MUST be your root domain (not a subdomain)\n          id: example.org\n          # This MUST be the exact URL of the page which will prompt for WebAuthn!\n          # Only the scheme (https / http), host (auth.example.org), and port (4455) are relevant. The\n          # path is irrelevant.\n          origins:\n            - http://auth.example.org:4455\n            - https://auth2.example.org\n          # A display name which will be shown to the user on her/his device.\n          display_name: Ory\n```\n\n----------------------------------------\n\nTITLE: Querying Identity with OAuth2 Tokens Using cURL in Shell\nDESCRIPTION: Shows how to query Ory's API directly via HTTP using cURL to obtain identity details and OIDC/OAuth2 provider tokens. Requires an ORY API key for authentication and correct project slug. The `include_credential=oidc` query parameter ensures the provider credentials are included in the response. Inputs are the ORY API key, project slug, and target identity ID; output is a JSON object containing the requested identity credentials and tokens.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/85_get-tokens.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request GET -sL \\\n  --header \"Content-Type: application/json\" \\\n  --header \"Authorization: Bearer {ORY_API_KEY}\" \\\n  'https://$PROJECT_SLUG.projects.oryapis.com/admin/identities/<identity_id>?include_credential=oidc'\n```\n\n----------------------------------------\n\nTITLE: Rendering Login Flow as HTML Form (HTML)\nDESCRIPTION: Shows how to render an HTML form for the login flow using details from the Ory Identities login flow JSON. Inputs include the CSRF token, identifier, and password fields, and a submit button. The form is configured to POST to the API's login endpoint and collects user credentials for server-side or API-based authentication. Properly handling placeholders and field names matches the required API payload for successful submission.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<form action=\"https://playground.projects.oryapis.com/self-service/login?flow=f6209031-38d5-48bc-b6a5-118e8a24d1fe\" method=\"POST\">\n  <input\n    name=\"csrf_token\"\n    type=\"hidden\"\n    value=\"XmG3qwTYSV0oWIyNGTugvtNOKMxWPYHd7dNX7BYK5lL79P0iUdq5jVmRUKwwm8RLcAGN7eF7iYraAiTSOdamuQ==\"\n  />\n  <fieldset>\n    <label>\n      <input name=\"identifier\" type=\"text\" value=\"\" placeholder=\"ID\" />\n      <span>ID</span>\n    </label>\n  </fieldset>\n  <fieldset>\n    <label>\n      <input name=\"password\" type=\"password\" value=\"\" placeholder=\"Password\" />\n      <span>Password</span>\n    </label>\n  </fieldset>\n  <button name=\"method\" type=\"submit\" value=\"password\">Sign in</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Recovery Page with Ory Elements in React (TypeScript)\nDESCRIPTION: This React component implements account recovery functionality using Ory Elements, handling user requests to recover lost credentials or authentication devices. Dependencies include React, TypeScript, and Ory Elements; expected input is the user's contact or identifier, with feedback provided via the UI for recovery outcome.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/Recovery.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/Recovery.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration Flow - Ory Go SDK\nDESCRIPTION: Shows how to submit user input to complete a registration flow using the Ory Go SDK's 'updateRegistrationFlow' endpoint. This sends the user's registration details to the backend for processing. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_10\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Creating Login Flow with React\nDESCRIPTION: Demonstrates how to create a login flow in a React application using the Ory client SDK and integration helpers to render the authentication form fields.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport createReactLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/create-login-react.tsx'\n\n<CodeBlock language=\"ts\" title=\"login.tsx\">{createReactLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Enabling Passkey Authentication - Ory CLI\nDESCRIPTION: This snippet demonstrates enabling the passkey strategy using the Ory CLI. It adds configuration options to the identity configuration.  It sets the `enabled` field to `true` and sets a display name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config <your-project-id> \\\n  --add '/selfservice/methods/passkey/enabled=true' \\\n  --add '/selfservice/methods/passkey/config/rp/display_name=\"My Display Name\"'\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session with cURL (Native Flow - Shell/JSON)\nDESCRIPTION: Provides MDX code blocks that import and display a cURL command (Shell) and its expected JSON response for checking an Ory session within a native (API) authentication flow. This typically involves sending an API key or session token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_70\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport whoamiCurlNative from '!!raw-loader!../../../code-examples/curl/session/check-session-api.sh'\nimport whoamiCurlNativeJson from '../../../code-examples/curl/session/check-session-api.json'\n\n<CodeBlock language=\"shell\" title=\"create-login-api.sh\">{whoamiCurlNative}</CodeBlock>\n<CodeBlock language=\"json5\" title=\"check-session-native.json\">{JSON.stringify(whoamiCurlNativeJson, null, 2)}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Displaying an Oathkeeper Access Rule File with id_token Mutator (Shell)\nDESCRIPTION: This shell snippet uses the cat command to display the contents of a JSON-formatted Oathkeeper access rule file. The rule specifies an id_token mutator, which adds an ID token to the request with certain custom claims. Required dependencies: a valid rules.json file containing the described structure. Inputs: the file path. Output: prints the rule configuration, which includes details on upstream URL, URL matching, authentication, authorization, and mutator settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/users/<[0-9]+>/<[a-zA-Z]+>\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"id_token\",\n      \"config\": {\n        \"aud\": [\n          \"audience-1\",\n          \"audience-2\"\n        ],\n        \"claims\": \"{\\\"abc\\\": \\\"{{ print .Subject }}\\\",\\\"def\\\": \\\"{{ print .Extra.some.arbitrary.data }}\\\"}\"\n      }\n    }\n  ]\n}\n\n```\n\n----------------------------------------\n\nTITLE: Disabling a Session using Ory SDK (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to disable a specific session using the Ory TypeScript SDK.  The `disableSession` functionality is used here, and the code is referenced externally.  This operation revokes a single session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_18\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeDisableSession from \\\"!!raw-loader!@site/code-examples/sdk/typescript/src/session/disable-session-native.ts\\\"\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS Settings in Ory Hydra YAML Configuration\nDESCRIPTION: This YAML snippet specifies the CORS configuration for both the Admin and Public endpoints of Ory Hydra. It enables CORS, sets allowed origins (including wildcard subdomains), allowed HTTP methods, allowed headers such as Authorization, and exposed headers like Content-Type. This file-level configuration influences which cross-origin HTTP requests are accepted by the server. Dependencies include ensuring the Ory Hydra server reads this configuration file during startup. Key parameters include 'enabled', 'allowed_origins', 'allowed_methods', 'allowed_headers', and 'exposed_headers'. This snippet helps prevent CORS errors while designing client-server interactions but excludes the OAuth 2.0 Authorization Endpoint as it does not support CORS by design.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cors.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nserve:\n  admin:\n    cors:\n      enabled: true\n      allowed_origins:\n        - https://example.com\n        - https://*.example.com\n      allowed_methods:\n        - POST\n        - GET\n        - PUT\n        - PATCH\n        - DELETE\n      allowed_headers:\n        - Authorization\n      exposed_headers:\n        - Content-Type\n  public:\n    cors:\n      enabled: true\n      allowed_origins:\n        - https://example.com\n        - https://*.example.com\n      allowed_methods:\n        - POST\n        - GET\n        - PUT\n        - PATCH\n        - DELETE\n      allowed_headers:\n        - Authorization\n      exposed_headers:\n        - Content-Type\n```\n\n----------------------------------------\n\nTITLE: Defining Username Identity in JSON5\nDESCRIPTION: This snippet demonstrates an identity definition using a username trait.  It is suitable for applications not requiring email verification and prioritize user anonymity. The `id` represents the unique identity identifier, and `traits` holds the username.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/05_identity-schema.mdx#_snippet_1\n\nLANGUAGE: JSON5\nCODE:\n```\n// Identity example\n{\n  id: \"6e9d3d30-f93e-4630-901f-c2096953723d\",\n  traits: {\n    username: \"some-username\",\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Creating JSON Web Key Set (JWKS) with Ory CLI using Shell\nDESCRIPTION: Uses the Ory CLI to create a JSON Web Key Set (JWKS) for signing JWTs. The command specifies the signing algorithm (ES256), project ID, and outputs the keyset in pretty-formatted JSON. This JWKS is required for JWT signature generation in Ory's session tokenizer templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create jwk some-example-set \\  --alg ES256 --project $PROJECT_ID --format json-pretty \\  > es256.jwks.json\n```\n\n----------------------------------------\n\nTITLE: Login and Registration Pages with Dynamic Ory API Interaction\nDESCRIPTION: This code snippet presents the login (`login.tsx`) and registration (`register.tsx`) pages that dynamically adapt based on your Ory Network project's identity schema. These pages include components that handle user registration, login flows, and are built to work seamlessly with your existing Ory API configuration, enhancing security and user management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n```mdx-code-block\n<Tabs groupId=\"react-or-preact\">\n  <TabItem value=\"react\" label=\"React\" default>\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/pages/_app.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/pages/_app.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"preact\" label=\"Preact\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/pages/_app.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/pages/_app.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"nextjs\" label=\"Next.js\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pages/login.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/login.tsx\"\n/>\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pages/register.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/register.tsx\"\n/>\n  </TabItem>\n</Tabs>\n```\n```\n\n----------------------------------------\n\nTITLE: Storing Ory Session Token Securely in React Native (TypeScript)\nDESCRIPTION: Handles the successful response from the `exchangeSessionToken` call. It securely stores the received Ory session token (e.g., using `expo-secure-store` or similar native secure storage) and likely updates application state or navigates the user.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/helpers/form.tsx\n// Fetched content starts at:   const setToken = (res: Awaited<ReturnType<typeof fetchToken>>) =>\n// Fetched content ends at:     })\nimport * as SecureStore from 'expo-secure-store'; // Example secure storage\n\n// Function to handle the successful token exchange response\nconst setToken = async (res: any) => { // Use actual type from SDK response\n  if (res.data?.session_token) {\n    try {\n      // Store the token securely\n      await SecureStore.setItemAsync('ory_session_token', res.data.session_token);\n      console.log('Session token stored successfully.');\n      // Update app state (e.g., set user as logged in)\n      // Navigate to authenticated part of the app\n    } catch (error) {\n      console.error('Error storing session token:', error);\n      // Handle storage error\n    }\n  } else {\n    console.error('Token exchange response did not contain session token');\n    // Handle error\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Keto Engine ACP Ory Config with Go Templates Expanded JSON\nDESCRIPTION: Shows the result of evaluating the Go templates used in the `keto_engine_acp_ory` authorizer config against a specific example request URL. This demonstrates how dynamic values extracted from the URL are substituted into the configuration strings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"handler\": \"keto_engine_acp_ory\",\n  \"config\": {\n    \"required_action\": \"my:action:1234\",\n    \"required_resource\": \"my:resource:foobar:foo:1234\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Sample payload for importing an identity with a verified address in JSON\nDESCRIPTION: This snippet illustrates the structure required to import a verified email address into an identity, including schema ID, traits, and verifiable addresses. It helps ensure the address is marked as verified during import.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{4,8-11}\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-verify@example.org\"\n  },\n  \"verifiable_addresses\": [\n    {\n      \"value\": \"docs-verify@example.org\",\n      \"verified\": true,\n      \"via\": \"email\",\n      \"status\": \"completed\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Registration Flow for SPA/AJAX Clients - Ory Identities - shell-session\nDESCRIPTION: This command demonstrates initializing the registration flow for client-side (SPA/AJAX) applications by requesting a JSON response. 'curl' sends a GET with 'Accept: application/json', and the server responds with flow metadata and a UI object containing the POST endpoint. Requires network access and necessary tooling (curl, jq). Input: none; Output: JSON including flow ID and form action URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_3\n\nLANGUAGE: shell-session\nCODE:\n```\ncurl -v -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/registration/browser | jq\n\n{\n  \"id\": \"4074acf9-5025-469b-be9c-9bc776b4a862\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-07-09T10:36:34.04310083Z\",\n  ...\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/registration?flow=4074acf9-5025-469b-be9c-9bc776b4a862\",\n    \"method\": \"POST\",\n    \"nodes\": [ /* ... */ ]\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Enabling Password Authentication with Ory CLI\nDESCRIPTION: This command uses the Ory CLI to patch the identity configuration and enable the password authentication method. It replaces the '/selfservice/methods/password/enabled' field with 'true' in the project's identity configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials/username-email-password.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config \"$PROJECT_ID\" \\\n  --replace '/selfservice/methods/password/enabled=true'\n```\n\n----------------------------------------\n\nTITLE: Retrieving existing registration flow using cURL for browser and native applications\nDESCRIPTION: These shell snippets show how to fetch an existing registration flow by sending a GET request to `/self-service/registration/flows` with the flow ID provided as a query parameter. For browser-based applications, cookies must be stored and sent via cURL's `-c` and `-b` flags to maintain session continuity. Input required is the registration flow identifier from the URL query string, and the output is the full flow data necessary to render or continue registration in the client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_18\n\nLANGUAGE: shell\nCODE:\n```\nimport getRegistrationCurlBrowser from '!!raw-loader!../../../code-examples/curl/registration/get-registration-browser.sh'\n```\n\nLANGUAGE: shell\nCODE:\n```\nimport getRegistrationCurlApi from '!!raw-loader!../../../code-examples/curl/registration/get-registration-api.sh'\n```\n\n----------------------------------------\n\nTITLE: Configuring Bearer Token Authenticator with Path Preservation (ORY Oathkeeper) - YAML\nDESCRIPTION: This YAML snippet provides an example of configuring the `bearer_token` authenticator in an Access Rule with advanced options. It shows how to set `preserve_path` and `preserve_query` to true when forwarding the request to the `check_session_url` and how to explicitly list which `forward_http_headers` should be included in that forwarded request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_16\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule Preserving Path: access-rule-2.yaml\nid: access-rule-2\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: bearer_token\n    config:\n      check_session_url: https://session-store-host/check-session\n      token_from:\n        query_parameter: auth-token\n        # or\n        # header: Custom-Authorization-Header\n        # or\n        # cookie: auth-token\n      preserve_path: true\n      preserve_query: true\n      forward_http_headers:\n        - Authorization\n        - Cookie\n        - X-Forwarded-For\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Page with Ory Elements in Next.js (TypeScript)\nDESCRIPTION: This Next.js code provides a login page that uses Ory Elements to manage authentication flow and handle user input for logging in. Required packages include Next.js, TypeScript, and Ory Elements; the handler deals with form field inputs and returns UI updates and authentication results.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"pages/login.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/login.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Linting Jsonnet Code Using the Kratos CLI - Shell\nDESCRIPTION: Uses the Kratos CLI to lint Jsonnet scripts, detecting errors and style violations. The command exits with code 1 if linting issues are found and outputs errors to stderr. This helps in catching common mistakes before deploying to Ory Kratos. Requires the Kratos CLI with the 'jsonnet lint' subcommand.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nkratos help jsonnet lint\n\n# For example:\nkratos jsonnet lint path/to/files/*.jsonnet\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Data Mapping for Apple Sign-In\nDESCRIPTION: This Jsonnet snippet maps claims received from Apple's OIDC provider to the Ory Identity schema. It conditionally includes the email address only if it's both present and verified by Apple, mitigating potential account enumeration attacks. The code merges claims from the `claims` external variable with a default `email_verified` value of `false`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by Apple.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling SameSite=None Legacy Workaround in Ory Hydra using YAML\nDESCRIPTION: This YAML configuration enables the legacy workaround for cookies using 'SameSite=None' to ensure compatibility with browsers that reject such cookies. It is activated by setting both 'serve.cookies.same_site_mode' to 'None' and 'serve.cookies.same_site_legacy_workaround' to 'true'. The configuration also disables development mode for required HTTPS enforcement. No additional packages are necessary; it only requires proper configuration of the Hydra YAML file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cookies.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\n# SameSite=none requires HTTPS, so we need to disable dev mode:\ndev: false\n\nserve:\n  cookies:\n    same_site_mode: None\n    same_site_legacy_workaround: true\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Kratos to Bind Public and Admin Services to Loopback Interface (Diff Format)\nDESCRIPTION: Modifies the Kratos config file to restrict public and admin HTTP services to listen only on the local interface (127.0.0.1) to prevent exposure of the admin API to the outside network. It also sets public base URL and enables CORS support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_19\n\nLANGUAGE: diff\nCODE:\n```\nserve:\n  public:\n    base_url: http://127.0.0.1:4433/\n+    host: 127.0.0.1\n    cors:\n      enabled: true\n  admin:\n    base_url: http://kratos:4434/\n+    host: 127.0.0.1\n```\n\n----------------------------------------\n\nTITLE: Setting Redirect URI for Spotify OIDC Integration - Shell\nDESCRIPTION: Defines the redirect URI for Spotify OAuth2 callback in the Ory CLI setup. This URI must be configured in the Spotify developer application settings to enable OAuth2 flows. The placeholder $PROJECT_SLUG should be replaced with the actual project slug for your Ory environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/spotify\n```\n\n----------------------------------------\n\nTITLE: Using hydra serve admin Command in Bash\nDESCRIPTION: The basic command to start the Hydra administrative API server. It starts a server that listens for HTTP/2 API requests for administrative functions. This command can be configured using the same options available to 'serve public' and 'serve all'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-admin.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra serve admin [flags]\n```\n\n----------------------------------------\n\nTITLE: Example Ory Consent Redirect URL (Text)\nDESCRIPTION: This text snippet shows an example URL illustrating how Ory redirects the user's browser to the configured consent endpoint. The URL includes the `consent_challenge` query parameter, which is a unique identifier that the custom consent application must extract and use with the Ory SDK to retrieve details about the specific consent request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_4\n\nLANGUAGE: Text\nCODE:\n```\nhttps://consent.example.org/oauth2-consent?consent_challenge=7bb518c4eec2454dbb289f5fdb4c0ee2\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Project Bash\nDESCRIPTION: Provides the command necessary to create a new Ory Network project via the CLI. This is a prerequisite step before you can use the `ory tunnel` command to connect to a project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_2\n\nLANGUAGE: Bash\nCODE:\n```\nory create project --name \"Command Line Project\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Email Recovery - JSON\nDESCRIPTION: This JSON snippet configures the account recovery method to use email. It's a configuration option likely within a larger Ory Kratos setup. The `via` field is set to \"email\" to specify the recovery channel.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_18\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"recovery\": {\n      \"via\": \"email\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating registration flow using cURL for browser and native clients\nDESCRIPTION: These shell code examples demonstrate how to start a new registration flow by sending requests to either `/self-service/registration/browser` (for browser clients) or `/self-service/registration/api` (for native apps). For browser flows, cookie management via cURL's `-c` and `-b` flags ensures proper session handling. The registration primarily targets the password method but the flow can be extended with other methods like OIDC or WebAuthn. Expected inputs include minimal request parameters, output is the registration flow data to render a UI or proceed with registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_16\n\nLANGUAGE: shell\nCODE:\n```\nimport createRegistrationCurlBrowser from '!!raw-loader!../../../code-examples/curl/registration/create-registration-browser.sh'\n```\n\nLANGUAGE: shell\nCODE:\n```\nimport createRegistrationCurlApi from '!!raw-loader!../../../code-examples/curl/registration/create-registration-api.sh'\n```\n\n----------------------------------------\n\nTITLE: Forcing PKCE Usage for OIDC Providers in YAML Configuration\nDESCRIPTION: This YAML snippet forces Ory Identities to always use PKCE with a given OIDC provider, even if the provider does not advertise support for it. The 'pkce' option is set to 'force', overriding automatic detection. This requires whitelist adjustment of redirect URLs at the OIDC provider side, as noted in the warnings. This snippet is part of the identity configuration before applying updates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/oidc-pkce.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nselfservice:\n  methods:\n    oidc:\n      enabled: true\n      config:\n        providers:\n          - id: generic\n            provider: generic # or another provider\n            pkce: force # forces PKCE support, skips automatic configuration\n            # ... other configuration options\n```\n\n----------------------------------------\n\nTITLE: Initializing Login Flow via AJAX for Single-Page Apps (Shell)\nDESCRIPTION: Illustrates how a client-side application (SPA) can initiate a login flow by making an AJAX request with curl to the login/browser endpoint. The request must set the Accept header to application/json to receive a flow object suitable for client rendering and further AJAX interactions. The response includes CSRF tokens and form node metadata necessary for SPA logins, and must properly handle cookies to maintain session and CSRF protection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ncurl -v -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/login/browser | jq\n```\n\n----------------------------------------\n\nTITLE: Defining an Email Input Node in Ory UI (JSON)\nDESCRIPTION: Provides an example JSON structure for a standard email input field (`type: \"email\"`) within a 'profile' group. Includes attributes like `name`, `value`, `disabled`, and metadata like `label`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.email\",\n    \"type\": \"email\",\n    \"value\": \"foo@ory.sh\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"E-Mail\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Global JWT Authenticator in YAML\nDESCRIPTION: Defines global configuration settings for the JWT authenticator in the main ORY Oathkeeper configuration file (`oathkeeper.yml`). These settings can be overridden by specific access rule configurations. It includes enabling the handler, specifying JWK Set URLs, defining scope strategy, required scopes, target audiences, trusted issuers, allowed algorithms, and the location to extract the token from (header, query parameter, or cookie).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_27\n\nLANGUAGE: yaml\nCODE:\n```\nauthenticators:\n  jwt:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      jwks_urls:\n        - https://my-website.com/.well-known/jwks.json\n        - https://my-other-website.com/.well-known/jwks.json\n        - file://path/to/local/jwks.json\n      scope_strategy: none\n      required_scope:\n        - scope-a\n        - scope-b\n      target_audience:\n        - https://my-service.com/api/users\n        - https://my-service.com/api/devices\n      trusted_issuers:\n        - https://my-issuer.com/\n      allowed_algorithms:\n        - RS256\n      token_from:\n        header: Custom-Authorization-Header\n        # or\n        # query_parameter: auth-token\n        # or\n        # cookie: auth-token\n```\n\n----------------------------------------\n\nTITLE: Fetching Verification Flow with cURL and jq\nDESCRIPTION: This command uses cURL to send a GET request to the Ory Kratos `/self-service/verification/flows` endpoint. It specifies the desired flow ID using the `id` query parameter and sets the `Accept` header to `application/json` to request a JSON response. The `-s` flag silences progress output, and the response is piped to `jq` for pretty-printing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.missing.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nrl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/verification/flows?id=11f6e7f4-99f9-4bcf-bcfc-208d8db942c5' | \\\n      jq\n```\n\n----------------------------------------\n\nTITLE: Visualize Ory Automatic Account Linking Flow (Mermaid)\nDESCRIPTION: This Mermaid diagram visualizes the flow for automatic account linking in Ory. It depicts the steps from a user signing in with a social provider, checking for an existing email, prompting for a password if found, and finally linking the accounts upon successful authentication or creating a new account otherwise.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/95_account-linking.mdx#_snippet_0\n\nLANGUAGE: Mermaid\nCODE:\n```\nflowchart LR\n    A[\"Create account with alice@example.com\"]\n    B[\"Sign in with social provider\"]\n    C[\"Retrieve alice@example.com from OIDC\"]\n    D{\"Does alice@example.com exist?\"}\n    E[\"Prompt for password\"]\n    F{\"Is password correct?\"}\n    G[\"Link social to account\"]\n    H[\"Sign-in successful. Use password or social\"]\n    I[\"Authentication failed\"]\n    J[\"Sign-in successful with social\"]\n\n    A --> B --> C --> D\n    D -->|Yes| E --> F\n    D -->|No| J\n    F -->|Yes| G --> H\n    F -->|No| I\n\n```\n\n----------------------------------------\n\nTITLE: Server-Side Application - Include Cookie Header (TypeScript)\nDESCRIPTION: This snippet demonstrates how to include the `Cookie` header in a server-side application when fetching self-service flows from Ory Identities. This is crucial for proper authentication and prevents security errors that can arise from missing cookie information. The code fetches the login flow and includes the cookie from the incoming request's header.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/10_crsf.mdx#_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nexport default (req: Request, res: Response) => {\n  // ...\n  .getLoginFlow({ id: flow, cookie: req.header(\"cookie\") })\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Role-Based Access Permissions Using Keto Relation Tuples\nDESCRIPTION: This keto-relation-tuples snippet declares permissions for different roles within the 'reports' namespace. It assigns 'view' access to 'finance', 'marketing', and 'community' groups on their respective reports, and grants the 'admin' group both 'view' and 'edit' permissions across all report groups. This defines the core RBAC roles and permission mappings, relying on group membership relations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_1\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\n// View only access for finance department\nreports:finance#view@(groups:finance#member)\n// View only access for community department\nreports:community#view@(groups:community#member)\n// View only access for marketing department\nreports:marketing#view@(groups:marketing#member)\n// Edit access for admin group\nreports:finance#edit@(groups:admin#member)\nreports:community#edit@(groups:admin#member)\nreports:marketing#edit@(groups:admin#member)\nreports:finance#view@(groups:admin#member)\nreports:community#view@(groups:admin#member)\nreports:marketing#view@(groups:admin#member)\n```\n\n----------------------------------------\n\nTITLE: Mixing Username and Email Identifiers in Ory Kratos Identity Schema (JSON)\nDESCRIPTION: This schema demonstrates using both 'email' and 'username' as alternative login identifiers in Ory Kratos. Each property supports password, webauthn, totp, code (for email), and passkey, along with email-based recovery and verification for the email field. Input must provide both 'email' (string, validated as email) and 'username' under 'traits'. Ory Kratos and JSON Schema draft-07 are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_25\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/registration.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          }\n        },\n        \"username\": {\n          \"type\": \"string\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Post-Settings Redirection Configuration in Ory Identities (YAML)\nDESCRIPTION: This example illustrates how to configure post-settings redirection in Ory Identities.  Unlike other flows, settings redirection does not use `urls.default_redirect_to`. Instead, it redirects back to the Settings UI.  It demonstrates overriding settings using flow and method-specific settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      after:\n        default_redirect_to: https://this-is-overridden-by-password/\n        password:\n          # overrides selfservice.settings.after.default_redirect_to\n          default_redirect_to: https://end-up-here-after-settings-with-password/\n```\n\n----------------------------------------\n\nTITLE: Defining permissions with relation tuples in Ory Permissions\nDESCRIPTION: Demonstrates how to define permissions using Keto relation tuples that reference the mapped UUIDs. The example shows permission assignments for different user groups to set values within specific ranges.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/10_objects.mdx#_snippet_1\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\n// Members of the \"admins\" group are allowed to set a value v > 5\nvalues:f832e1e7-3c97-4cb8-8582-979e63ae2f1d#set_value@(groups:admins#member)\n\n// Members of the \"devs\" group are allowed to set a value v: 2 < v <= 5\nvalues:c4540cf5-6ac4-4007-910b-c5a56aa3d4e6#set_value@(groups:devs#member)\n\n// Anyone who can set a value v > 5 can also set 2 < v <= 5\nvalues:c4540cf5-6ac4-4007-910b-c5a56aa3d4e6#set_value@(values:f832e1e7-3c97-4cb8-8582-979e63ae2f1d#set_value)\n```\n\n----------------------------------------\n\nTITLE: Submitting Ory Recovery Flow using Go SDK\nDESCRIPTION: Demonstrates submitting data (such as the user's email or a received recovery code) to continue an Ory recovery flow using the Ory Go SDK. Requires the flow ID and appropriate payload.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_44\n\nLANGUAGE: go\nCODE:\n```\n{submitRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Map NetID Claims to Ory Identity Schema (Jsonnet)\nDESCRIPTION: This Jsonnet code snippet defines how claims obtained from NetID's /userinfo endpoint are transformed and mapped to the traits of an Ory Identity. It prioritizes verified email addresses, only including the email if it is present and marked as verified by NetID to mitigate account enumeration risks. The code merges default claims with external claims provided by Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by NetID.\n      [if \"email\" in claims && claims.email_verified then \"email\" else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Complete GitHub Data Mapper Example (Jsonnet)\nDESCRIPTION: Provides a full Jsonnet data mapper example specifically for GitHub. It ensures the email is verified before mapping it to traits and maps the GitHub username to `metadata_public.github_username`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_9\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, especially if the value is used for\n      // e.g. verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by GitHub.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n    metadata_public: {\n      github_username: claims.username,\n    }\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration with cURL (Browser)\nDESCRIPTION: This shell script demonstrates how to submit a registration flow in a browser environment using cURL. It sends a POST request to the `/self-service/registration` endpoint, including the necessary form fields from the identity schema. The `-c` flag is used to store cookies, which are then used in subsequent requests with the `-b` flag. The script requires the `traits.email` and `traits.tos` fields from the identity schema. The script includes a sample `transient_payload` too. The output is the response of the registration. Prerequisites: cURL and access to the Ory API. Expected output: success/failure response from the API. Limitations: This example is specific to the browser flow and requires the CSRF token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_20\n\nLANGUAGE: shell\nCODE:\n```\nimport submitRegistrationCurlBrowser from '!!raw-loader!../../../code-examples/curl/registration/submit-registration-browser.sh'\n```\n\n----------------------------------------\n\nTITLE: Discord OAuth2 User API Supported Claim Fields - Text\nDESCRIPTION: This plain text excerpt enumerates the fields provided by the Discord OAuth2 User API for the 'identify' and 'email' scopes. Knowledge of these available claims informs the structure of the data mapping configuration in Ory. The fields listed cover user identity, display information, and email verification status.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_6\n\nLANGUAGE: text\nCODE:\n```\niss                 # always https://discord.com/api/v6/oauth2/\nsub                 # numeric discord user id\nname                # username + # + discriminator\nnickname            # username\npreferred_username  # username\npicture             # avatar url\nlocale              # user locale\n```\n\nLANGUAGE: text\nCODE:\n```\nemail               # user email\nemail_verified      # whether email is verified\n```\n\n----------------------------------------\n\nTITLE: Specifying Configuration Files for Oathkeeper CLI - Shell\nDESCRIPTION: This snippet documents the '--config' flag for the Oathkeeper CLI, outlining how to specify one or more configuration files using '-c' or '--config', supporting json, yaml, yml, or toml formats. Multiple config files are loaded in order, with later files overriding earlier settings. Requires paths to valid configuration files as input. No direct output, but influences command behavior based on loaded configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-version.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\noathkeeper version --config file1.yaml --config file2.toml\n```\n\n----------------------------------------\n\nTITLE: Defining Phone Number Trait in Identity Schema (JSON)\nDESCRIPTION: This JSON snippet demonstrates how to define a phone number trait within an identity schema for Ory Kratos.  The `phone` property is defined as a string with the `tel` format and is configured for SMS verification using the `ory.sh/kratos` extension. This configuration enables Ory Kratos to send SMS messages to verify the user's phone number.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/phone-password/identity.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"title\": \"E-Mail\",\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          }\n        },\n        \"phone\": {\n          \"type\": \"string\",\n          \"title\": \"Phone number\",\n          \"format\": \"tel\",\n          \"ory.sh/kratos\": {\n            // highlight-start\n            \"verification\": {\n              \"via\": \"sms\"\n            }\n            // highlight-end\n          }\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Relation Tuples Using Ory CLI in Shell\nDESCRIPTION: This snippet provides the command-line interface command 'ory delete relation-tuples' to delete all matching relation tuples based on provided flags for filtering. It requires Ory CLI installed and configured. Key parameters include '--namespace', '--object', '--relation', '--subject-id', and '--subject-set' to specify matching relation tuples. The '--force' flag allows proceeding with deletion without confirmation, and '--all' deletes all relation tuples without filtering. Expected input is the filtering flags provided by the user, and the command outputs removal confirmation or errors. It is recommended to run the command without '--force' first to ensure safety.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-relation-tuples.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory delete relation-tuples [flags]\n```\n\n----------------------------------------\n\nTITLE: Create Ory Network project\nDESCRIPTION: This shell snippet creates an Ory Network project and sets up the email identity schema. It utilizes the `ory` CLI to create a new project, patch the identity configuration to use the email preset, and then exports the project slug as an environment variable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/oauth2-openid/expressjs.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"Ory Docs OAuth2 Integration Example\"\nproject_id=\"{set to the project ID from output}\"\n\n# Use the email identity schema preset\nory patch identity-config \"$PROJECT_ID\" \\\n  --replace '/identity/default_schema_id=\"preset://email\"' \\\n  --replace '/identity/schemas=[{\"id\":\"preset://email\",\"url\":\"base64://ewogICIkaWQiOiAiaHR0cHM6Ly9zY2hlbWFzLm9yeS5zaC9wcmVzZXRzL2tyYXRvcy9pZGVudGl0eS5lbWFpbC5zY2hlbWEuanNvbiIsCiAgIiRzY2hlbWEiOiAiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjIiwKICAidGl0bGUiOiAiUGVyc29uIiwKICAidHlwZSI6ICJvYmplY3QiLAogICJwcm9wZXJ0aWVzIjogewogICAgInRyYWl0cyI6IHsKICAgICAgInR5cGUiOiAib2JqZWN0IiwKICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgImVtYWlsIjogewogICAgICAgICAgInR5cGUiOiAic3RyaW5nIiwKICAgICAgICAgICJmb3JtYXQiOiAiZW1haWwiLAogICAgICAgICAgInRpdGxlIjogIkUtTWFpbCIsCiAgICAgICAgICAib3J5LnNoL2tyYXRvcyI6IHsKICAgICAgICAgICAgImNyZWRlbnRpYWxzIjogewogICAgICAgICAgICAgICJwYXNzd29yZCI6IHsKICAgICAgICAgICAgICAgICJpZGVudGlmaWVyIjogdHJ1ZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIndlYmF1dGhuIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXIiOiB0cnVlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAidG90cCI6IHsKICAgICAgICAgICAgICAgICJhY2NvdW50X25hbWUiOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAicmVjb3ZlcnkiOiB7CiAgICAgICAgICAgICAgInZpYSI6ICJlbWFpbCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInZlcmlmaWNhdGlvbiI6IHsKICAgICAgICAgICAgICAidmlhIjogImVtYWlsIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIm1heExlbmd0aCI6IDMyMAogICAgICAgIH0KICAgICAgfSwKICAgICAgInJlcXVpcmVkIjogWwogICAgICAgICJlbWFpbCIKICAgICAgXSwKICAgICAgImFkZGl0aW9uYWxQcm9wZXJ0aWVzIjogZmFsc2UKICAgIH0KICB9Cn0K\"}]'\nexport ORY_PROJECT_SLUG=\"{set to the project slug from output}\"\n```\n\n----------------------------------------\n\nTITLE: Listing All Workspaces with Ory CLI\nDESCRIPTION: This command lists all available workspaces in the current Ory environment. It requires the Ory CLI to be authenticated and connected to the Ory Network. The output provides the workspace IDs needed for subsequent configuration commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory list workspaces\n```\n\n----------------------------------------\n\nTITLE: Create Login Flow (Native) using cURL\nDESCRIPTION: This snippet showcases how to create a login flow for a native application using cURL. It does not require cookie management, as native apps communicate through API endpoints without CSRF protection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nimport createExampleLoginCurlNative from '!!raw-loader!../../../code-examples/curl/login/create-login-api.sh'\n\n<CodeBlock language=\"shell\" title=\"create-login-api.sh\">{createExampleLoginCurlNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Exporting Client ID and Secret for Client Credentials Grant in Shell\nDESCRIPTION: Assigns shell variables for the OAuth2 client's ID and secret outputted in the creation step. These credentials are essential for authentication during the Client Credentials Grant flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nclient_id=\"{set to CLIENT ID from output}\"\nclient_secret=\"{set to CLIENT SECRET from output}\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Login Methods in YAML\nDESCRIPTION: This snippet demonstrates how to enable specific login methods (password and OIDC) in the Ory Identities configuration file (config.yml or ory/config.yml).  It shows the structure and required parameters for setting up the selfservice login methods.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      enabled: true\n    oidc:\n      enabled: true\n  # ...\n```\n\n----------------------------------------\n\nTITLE: Mapping Social Sign-In Claims Conditionally in Jsonnet\nDESCRIPTION: Illustrates how to access social sign-in provider data using `std.extVar('claims')`. It demonstrates conditionally mapping the `website` claim only if it exists in the provider's data, otherwise setting the key to null (effectively omitting it). The resulting JSON output based on sample claims is shown.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_3\n\nLANGUAGE: jsonnet\nCODE:\n```\n// claims contains all the data sent by the upstream.\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      [if \"website\" in claims then \"website\" else null]: claims.website,\n    },\n  },\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"foo@ory.sh\",\n      \"website\": \"https://www.ory.sh\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an OAuth 2.0 Client (Authorization Code Grant)\nDESCRIPTION: Creates an OAuth 2.0 client capable of performing the authorization code grant. The output is parsed using `jq` to extract the client ID and secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_12\n\nLANGUAGE: Shell\nCODE:\n```\ncode_client=$(docker compose -f quickstart.yml exec hydra \\\n    hydra create client \\\n    --endpoint http://127.0.0.1:4445 \\\n    --grant-type authorization_code,refresh_token \\\n    --response-type code,id_token \\\n    --format json \\\n    --scope openid --scope offline \\\n    --redirect-uri http://127.0.0.1:5555/callback)\n\ncode_client_id=$(echo $code_client | jq -r '.client_id')\ncode_client_secret=$(echo $code_client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: Post-Verification Redirection Configuration in Ory Identities (YAML)\nDESCRIPTION: This code shows how to configure post-verification redirection in Ory Identities. Similar to settings redirection, verification redirection does not use `urls.default_redirect_to`. Instead, the redirect ends at the same Verification UI. It demonstrates overriding settings using flow-specific settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    verification:\n      after:\n        default_redirect_to: https://this-is-overridden-by-password/\n```\n\n----------------------------------------\n\nTITLE: Setting Recovery UI URL in Ory Kratos Configuration YAML\nDESCRIPTION: This YAML snippet configures the recovery UI URL for the self-service recovery flow in Ory Kratos. It sets the path to the recovery user interface endpoint where users are redirected to recover their accounts. The ui_url property must be correctly set to enable the recovery flow, and alternatively can be set via the environment variable SELFSERVICE_FLOWS_RECOVERY_UI_URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/recovery.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    recovery:\n      ui_url: http://my-app.com/recovery\n```\n\n----------------------------------------\n\nTITLE: Adding Location Directives and Proxying (Nginx)\nDESCRIPTION: This Nginx configuration defines location blocks to proxy traffic to the admin and public APIs of Ory Hydra.  It includes access control using the remote address or a secret parameter.  The first location block restricts access to the admin API. The second location proxies the traffic to the public API. Requires the upstream blocks to be defined.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_28\n\nLANGUAGE: nginx\nCODE:\n```\nlocation ~ ^/(admin|clients|keys|health|metrics|version|oauth2/auth/requests|oauth2/introspect|oauth2/flush)/? {\n  set $allow 0;\n  if ($remote_addr ~* \"172.28.0.*\") {\n    set $allow 1;\n  }\n  if ($arg_secret = \"CHANGE-ME-INSECURE-PASSWORD\") {\n    set $allow 1;\n  }\n  if ($allow = 0) {\n    return 403;\n  }\n\n  proxy_pass http://admin_api;\n  proxy_redirect    off;\n  proxy_set_header  Host               $host;\n  proxy_set_header  X-Real-IP          $remote_addr;\n  proxy_set_header  X-Forwarded-For    $proxy_add_x_forwarded_for;\n  proxy_set_header  X-Forwarded-Proto  $http_x_forwarded_proto;\n}\n\nlocation ~ ^/(.well-known|oauth2/auth|oauth2/token|oauth2/sessions|oauth2/revoke|oauth2/fallbacks/consent|oauth2/fallbacks/error|userinfo)/? {\n  proxy_pass http://public_api;\n  proxy_redirect    off;\n  proxy_set_header  Host              $host;\n  proxy_set_header  X-Real-IP         $remote_addr;\n  proxy_set_header  X-Forwarded-For   $proxy_add_x_forwarded_for;\n  proxy_set_header  X-Forwarded-Proto $http_x_forwarded_proto;\n}\n```\n\n----------------------------------------\n\nTITLE: Extending a User Session with the Ory Go SDK (Go)\nDESCRIPTION: This Go code snippet leverages the Ory Go SDK to programmatically refresh or extend a user's session administratively. The function requires a valid Session ID (obtainable via the `/sessions/whoami` endpoint or the SDK method `toSession`). It depends on the Ory Go SDK and proper authentication setup. Inputs include the session identifier; output is an updated session object reflecting the new expiration or refresh time.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nimport goExtendSession from '!!raw-loader!../../../code-examples/sdk/go/session/refresh-session.go'\n\n<CodeBlock language=\"go\" title=\"extend-session.go\">{goExtendSession}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: UI Image Node JSON for Embedding QR Codes\nDESCRIPTION: This JSON snippet describes a UI node of type \"img\" used for showing QR codes, typically for TOTP (Time-Based One-Time Password) authentication. Attributes include base64 encoded PNG image data, unique node id, image dimensions, and the node type. Meta information includes a label explaining the image purpose. This enables rendering QR codes via self-service GUI flows without extra processing, essential for second-factor authentication setup. It requires frontend implementation to correctly decode and display the embedded image data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"img\",\n  \"group\": \"totp\",\n  \"attributes\": {\n    \"src\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAEAAAAAApiSv5AAAHP0lEQVR4nOyd0Y4kOwoFt1fz/7989+1mSWORUJzMXikinkbdZZuuOUIIDP7zzz//ETD//W0D5HdRAHAUABwFAOfP9c+fn8SG86DyOvdae/pZd5faqvlp8+9lvku94mTphs/T9ABwFAAcBQBHAcD5c/rhJpDr/vY6Y5OL7AaLm9CvG4LVFtS7ZALNmvMZegA4CgCOAoCjAOAcg8CLTdhTh36bzF3mc7XN9YrTb7t/0fxbq9n8H+kB8CgAOAoAjgKAcxMEPkc3k7Up0J5Cunlwt7G0tqpe+85tTT0AHAUARwHAUQBwXgkC56Xa7m8zNwY3Ocsu3V3ebtTRA8BRAHAUABwFAOcmCEyHJPMWjE0hd57XOxV3N+Xb7t87zzte7P6P9ABwFAAcBQBHAcA5BoGZ3NeczI3BTbPI5oxMk0rXvtT/kR4AjgKAowDgKAA4P8+VH7t337q7vNtFXPPczcKTLU+WiPUAcBQAHAUARwHA+elmt7psZuRtLEj33M7L1Zlz5xbMd/lEDwBHAcBRAHAUAJxjJnDTqjG/15dp7qhPm1uQDrcyBeT63G/O0APAUQBwFAAcBQBnlQl8LtxKj2/OjH7OFIu79p3ID8fWA8BRAHAUABwFAOejMeS5GXnz4u6mKaI7SmYTwqaDynQHcv8WoR4AjgKAowDgKAA4N+XgE8/lyDI7n9i9qjFlU0rOlNP7ZXc9ABwFAEcBwFEAcL4YFr3JkT3X8Zq5bZhua6nPSAfC3zTW6AHgKAA4CgCOAoDzRWPIcZtwvi4zDqZLpnGla8tzbTLflKb1AHAUABwFAEcBwLmZE7jJbmUeXnsuKMqMdO7ud9q5u0umH9tysBxQAHAUABwFAOfmxZA6mHhjxmDXvnmQ2n0xJEN6xmDqPRE9ABwFAEcBwFEAcD6CwOe6W7u71D/LjG+eMw9wNw/S1Z/rfuP9tXoAOAoAjgKAowDgHDOB8/HDm1l/tQVd+2oyc/g2Idhpl9qCeud6rSNipIkCgKMA4CgAODfl4C7pAS2bu4iZQG5OZrLgvNv4tLaPHgCOAoCjAOAoADjHF0MuMm0Z87U1mUzlab+TVfPTTrvMz+2ysV4PgEcBwFEAcBQAnJty8MV8Wt5pbbcFI93NO1+bKbxudskUve0OlhIFAEcBwFEAcG5GxHx8cDHm5WIToG12/q3ZgZt8Ytrm0+f0AHgUABwFAEcBwPmiO3gTvs07gTOvfpx2rndJ3/DrWnBi/j2bCZQmCgCOAoCjAOB8BIGbHNRm5l66ASLdMbzJ4XUD60yo+004qAeAowDgKAA4CgDOTSYw81pGN9fXHUhdk7E5c5uvXjsnM1jnEz0AHAUARwHAUQBwbt4OvsjcVZufMQ/pMvfrTjtfbM6Yj4jp8k0mVQ8ARwHAUQBwFACc44iYTGDzxhy+2oKa+ZiXzBCYOZvO53oXPQAeBQBHAcBRAHBWmcBNGLV5Y+S5oOi5qX+ZppKab3bRA8BRAHAUABwFAOcmE/jxwfCrH0djVn2uPQs2f2VNuo/5nZdP9ABwFAAcBQBHAcA5Dou+2OTr6v265dvN7cB5AJkpB/9+R3PfFj0AHAUARwHAUQBw2sOiP5aMA8P6c/WKE5ky9Kbl5PTbzbmb72+XWdQDwFEAcBQAHAUA5yYT2OW5YnG6l7Ye6TIf/ZIJQ08ruufu0APAUQBwFAAcBQDnGASmi6eb+2ubcmt3aHO9y/zc/DS/vy1I3RPUA8BRAHAUABwFAOcYBGYm43VXZF7BqJmXg9O39DZl6K4F89/qAfAoADgKAI4CgNN+MSRTHq3XdtmEkvNbepuwcf5Xzr/TTTldD4BHAcBRAHAUAJzjiJiLTHk03SixybmlS9jPjZy5eG6Mjx4AjwKAowDgKAA4H5nATXm0DlO6+bDNjcHuYJhNeXk+xzCTd+yeVn/ujB4AjgKAowDgKAA47e7geeNFOk9Yr+jud7Jl3lCRHj6dzif2C+Z6ADgKAI4CgKMA4LSfjbvYlIg3Jef/z1mE3Z3TkwA3VhkEyr8oADgKAI4CgHPTGHLxXO/rfG1NZr/fCj7nBeldj7EeAI4CgKMA4CgAOMc7gXPemP+Xvv9XW5UJ/bo8Z/MdegA4CgCOAoCjAOC0M4Fd5u0g9S6bECczn7AOOd8YTdO1+YTlYClRAHAUABwFAKc9LLpmHrA8V/qtrTpZ0D2jXpsenX0ik3f8RA8ARwHAUQBwFACcm+7gN0KSzMsYXea7zHNz9c82K7r0V+gB4CgAOAoAjgKA0x4Rk2F+u20TKGWKyrWlXeal5E22sY8eAI4CgKMA4CgAOK8EgZmhzZvZfJnpe+mw7I0XTe7QA8BRAHAUABwFAOcmCHyjY3j+Xkf6gbY3epu7n8vn+v5ea2OI/IsCgKMA4CgAOMcgMH37LvN42uaOXIb5gOZ5SDd/IaX+nM/GSYkCgKMA4CgAOMcXQ4SDHgCOAoCjAOAoADgKAM7/AgAA//9RrYZOnxsHAQAAAABJRU5ErkJggg==\",\n    \"id\": \"totp_qr\",\n    \"width\": 256,\n    \"height\": 256,\n    \"node_type\": \"img\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1050005,\n      \"text\": \"Authenticator app QR code\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking Specific Session - Ory Go SDK\nDESCRIPTION: Explains how to invalidate a single, specific session for the current user using the Ory Go SDK's 'disableSession' endpoint. This requires providing the session ID. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_18\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Bulk Import Identities via API\nDESCRIPTION: This `curl` command demonstrates how to use the Identity Import API to bulk import identities.  It shows how to patch (create) two new identities with specific email addresses and passwords. Each identity has a `patch_id` to correlate the request with the response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_21\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request PATCH 'https://${YOUR_PROJECT_SLUG}.projects.oryapis.com/admin/identities' \\\n--header 'Authorization: Bearer ${YOUR_ORY_ACCESS_TOKEN}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"identities\": [\n        {\n# highlight-next-line\n            \"patch_id\": \"6086b0a8-d851-5431-91b4-b6e5e39dc88b\",\n            \"create\": {\n                \"credentials\": {\n                    \"password\": {\n                        \"config\": {\n                            \"password\": \"foopassword\"\n                        }\n                    }\n                },\n                \"state\": \"active\",\n                \"traits\": {\n                    \"email\": \"foo@example.com\"\n                },\n                \"schema_id\": \"preset://email\"\n            }\n        },\n        {\n# highlight-next-line\n            \"patch_id\": \"d554dc00-49ce-5381-9bdc-79637dec85a2\",\n            \"create\": {\n                \"credentials\": {\n                    \"password\": {\n                        \"config\": {\n                            \"password\": \"barpassword\"\n                        }\n                    }\n                },\n                \"state\": \"active\",\n                \"traits\": {\n                    \"email\": \"bar@example.com\"\n                },\n                \"schema_id\": \"preset://email\"\n            }\n        }\n    ]\n}'\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with React (TypeScript)\nDESCRIPTION: This TypeScript (React) code shows how to create a recovery flow by calling the Ory API. It is part of the UI for the application. Dependencies: React and the Ory SDK. Prerequisites: A configured React environment and the Ory SDK setup. Expected input: user data. Expected Output: API response, as part of the UI. Limitations: Uses React for the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_36\n\nLANGUAGE: tsx\nCODE:\n```\nimport createReactRecoveryApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/recovery/create-recovery-react.tsx'\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Client JSON Format\nDESCRIPTION: The required JSON format for OAuth2 client import files. The format expects an array of objects containing client configurations, where each object can include client_secret and other OAuth 2.0 client model fields.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-oauth2-client.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"client_secret\": \"...\",\n    // ... all other fields of the OAuth 2.0 Client model are allowed here\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Enabling Passwordless Code Method using Ory CLI\nDESCRIPTION: This snippet shows how to use the Ory CLI to enable the passwordless one-time code authentication method for your project's identity configuration. It uses the `ory patch` command to add or update the `passwordless_enabled` flag for the `code` method.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/06_code.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config <your-project-id> \\\n  --add '/selfservice/methods/code/passwordless_enabled=true'\n```\n\n----------------------------------------\n\nTITLE: Fetch Existing Login Flow (Native) using cURL\nDESCRIPTION: This snippet demonstrates how to fetch an existing login flow for a native application using cURL and a flow ID. It does not require cookie management, focusing solely on the API request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nimport getExampleLoginCurlNative from '!!raw-loader!../../../code-examples/curl/login/get-login-api.sh'\n\n<CodeBlock language=\"shell\" title=\"get-login-api.sh\">{getExampleLoginCurlNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Client JSON Format\nDESCRIPTION: The expected JSON format for importing OAuth 2.0 clients. The JSON should contain an array of client objects, each with client properties including an optional client_secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-oauth2-client.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"client_secret\": \"...\",\n    // ... all other fields of the OAuth 2.0 Client model are allowed here\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Using transient payloads in email templates\nDESCRIPTION: This snippet demonstrates how to access transient payload data passed during flow execution using `index` function to fetch temporary data such as `example_key`. It enables dynamic content insertion without persistent storage, suitable for passing temporary context-specific information to email templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_9\n\nLANGUAGE: Go\nCODE:\n```\n<h1>Recovery Details</h1>\n<p>To: {{.To}}</p>\n<p>Recovery URL: {{.RecoveryURL}}</p>\n<p>Transient Payload: {{index .TransientPayload \"example_key\"}}</p>\n<p>\n  {{- if eq (index .TransientPayload \"lang\") \"foo\" -}}\n  FOO\n  {{- else -}}\n  BAR\n  {{- end -}}\n</p>\n```\n\n----------------------------------------\n\nTITLE: UI Action Format for Form Submission\nDESCRIPTION: Shows the JSON structure for a flow's UI action property that contains the URL and method for form submission. This information is used to properly configure HTML forms for authentication flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  ui: {\n    action: \"http://$PROJECT_SLUG.projects.oryapis.com/self-service/login?flow=<uuid>\",\n    method: \"POST\",\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Frontend SDK in JavaScript\nDESCRIPTION: Demonstrates importing the Ory Frontend SDK (`@ory/client-fetch`), configuring it with the Ory project URL (typically from an environment variable `ORY_URL`), and creating an SDK instance. It also shows a basic usage example for retrieving session information using `ory.toSession()`. This snippet assumes the necessary environment variables are set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// 1. Import SDK\nimport { FrontendApi, Configuration } from \"@ory/client-fetch\"\n\n// 2. Configure Ory\nconst basePath = process.env.ORY_URL\n\nconst ory = new FrontendApi(\n  new Configuration({\n    basePath,\n    credentials: \"include\", // Ensure cookies are sent\n  }),\n)\n\n// 3. Sign in or grab session.\nconst data = await ory.toSession()\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions with Ory Permissions Python SDK Using Bearer Authentication\nDESCRIPTION: A comprehensive example demonstrating how to check permissions for a specific subject using the Ory Permissions Python SDK. It involves setting up a configuration with Bearer token authentication, instantiating the PermissionApi client, and calling the check_permission method with parameters for namespace, object, relation, and subject identifiers. The snippet includes error handling via an exception and prints the permission check result. Dependencies include the ory_client package and Python standard modules like time and pprint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/10_python.mdx#_snippet_3\n\nLANGUAGE: python\nCODE:\n```\nimport time\nimport ory_client\nfrom ory_client.api import permission_api\nfrom ory_client.model.check_permission_result import CheckPermissionResult\nfrom ory_client.model.error_generic import ErrorGeneric\nfrom pprint import pprint\n# Defining the host is optional and defaults to https://playground.projects.oryapis.com\n# See configuration.py for a list of all supported configuration parameters.\n# The client must configure the authentication and authorization parameters\n# in accordance with the API server security policy.\n# Examples for each auth method are provided below, use the example that\n# satisfies your auth use case.\n# Configure Bearer authorization: oryAccessToken\nconfiguration = ory_client.Configuration(\n    host = \"https://playground.projects.oryapis.com\"\n    access_token = 'YOUR_BEARER_TOKEN'\n)\n\n# Enter a context with an instance of the API client\nwith ory_client.ApiClient(configuration) as api_client:\n    # Create an instance of the API class\n    api_instance = permission_api.PermissionApi(api_client)\n    namespace = \"namespace_example\" # str | Namespace of the Relationship (optional)\n    object = \"object_example\" # str | Object of the Relationship (optional)\n    relation = \"relation_example\" # str | Relation of the Relationship (optional)\n    subject_id = \"subject_id_example\" # str | SubjectID of the Relationship (optional)\n    subject_set_namespace = \"subject_set.namespace_example\" # str | Namespace of the Subject Set (optional)\n    subject_set_object = \"subject_set.object_example\" # str | Object of the Subject Set (optional)\n    subject_set_relation = \"subject_set.relation_example\" # str | Relation of the Subject Set (optional)\n    max_depth = 1 # int |  (optional)\n\n    # example passing only required values which don't have defaults set\n    # and optional values\n    try:\n        # Check a permission\n        api_response = api_instance.check_permission(namespace=namespace, object=object, relation=relation, subject_id=subject_id, subject_set_namespace=subject_set_namespace, subject_set_object=subject_set_object, subject_set_relation=subject_set_relation, max_depth=max_depth)\n        pprint(api_response)\n    except ory_client.ApiException as e:\n        print(\"Exception when calling PermissionApi->check_permission: %s\\n\" % e)\n```\n\n----------------------------------------\n\nTITLE: Checking Current Session Using cURL with a Session Cookie (shell)\nDESCRIPTION: This sample cURL request shows how to fetch the current session details from Ory's /sessions/whoami endpoint when authenticating using a session cookie. No additional dependencies except cURL. The cookie header must contain a valid ory_kratos_session value previously obtained from the login flow. Returns the current session object as JSON or an error if the session is invalid or expired.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncurl '${getSdkUrl().url}/sessions/whoami' \\\n  -H 'Accept: application/json' \\\n  -H 'Cookie: ory_kratos_session=MTYzNDIyNzEzN3xEdi1CQkFFQ180SUFBUkFCRUFBQVJfLUNBQUVHYzNSeWFXNW5EQThBRFhObGMzTnBiMjVmZEc5clpXNEdjM1J5YVc1bkRDSUFJRTFDYWtvME5VNVlaVWxvYVZWeWJrUnZhSEF4YmxSV2VVRlhNMWwxVlVGenxXpsk2cL21Dclk3nCoXV41N6bFxvVJSt7CeICy_815Aw=='\n```\n\n----------------------------------------\n\nTITLE: Migrating Identity Schema with Ory Go SDK\nDESCRIPTION: Go implementation for migrating an identity to a new schema, including validation, error handling, and verification of the update using the Ory client SDK.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_5\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\n\tclient \"github.com/ory/client-go\"\n)\n\nconst (\n\tYOUR_ORY_API_KEY        = \"$YOUR_ORY_API_KEY\"\n\tYOUR_ORY_PROJECT_SLUG   = \"$PROJECT_SLUG\"\n\tOLD_SCHEMA_ID           = \"$OLD_SCHEMA_ID\" // The schema ID of the identity to be updated, it is recommended to set this explicitly to avoid updating an identity with a different schema.\n\tUPDATE_TO_NEW_SCHEMA_ID = \"$NEW_SCHEMA_ID\"\n\tIDENTITY_ID_TO_UPDATE   = \"$IDENTITY_ID\"\n)\n\nfunc main() {\n\tif err := migrateSchema(UPDATE_TO_NEW_SCHEMA_ID, IDENTITY_ID_TO_UPDATE); err != nil {\n\t\tpanic(err)\n\t}\n}\n\nfunc migrateSchema(toSchema, identityID string) error {\n\t// Initialize the client configuration\n\tcfg := client.NewConfiguration()\n\tcfg.Servers = client.ServerConfigurations{\n\t\t{\n\t\t\tURL: fmt.Sprintf(\"https://%s.projects.oryapis.com\", YOUR_ORY_PROJECT_SLUG),\n\t\t},\n\t}\n\n\t// Create an instance of the API client\n\tory := client.NewAPIClient(cfg)\n\n\t// Set the access token\n\tctx := context.Background()\n\tctx = context.WithValue(ctx, client.ContextAccessToken, YOUR_ORY_API_KEY)\n\n\t// Check if the new schema exists\n\t_, _, err := ory.IdentityApi.GetIdentitySchema(ctx, toSchema).Execute()\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// Check if the identity exists\n\tidentity, _, err := ory.IdentityApi.GetIdentity(ctx, identityID).Execute()\n\tif err != nil {\n\t\treturn err\n\t}\n\tif identity.SchemaId == toSchema {\n\t\tfmt.Println(\"already migrated, no update required\")\n\t\treturn nil\n\t}\n\n\t// Check if the identity's schema ID matches the old schema ID\n\tif identity.SchemaId != OLD_SCHEMA_ID {\n\t\treturn fmt.Errorf(\"identity's schema ID does not match the old schema ID\")\n\t}\n\n\t// Prepare the JSON patch for the update\n\tjsonPatch := []client.JsonPatch{\n\t\t{Op: \"replace\", Path: \"/schema_id\", Value: toSchema},\n\t}\n\n\t// Apply the JSON patch to update the identity\n\t_, _, err = ory.IdentityApi.PatchIdentity(ctx, identityID).JsonPatch(jsonPatch).Execute()\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// Verify that the schema was updated\n\tupdatedIdentity, _, err := ory.IdentityApi.GetIdentity(ctx, identityID).Execute()\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tif updatedIdentity.SchemaId != toSchema {\n\t\treturn fmt.Errorf(\"schema wasn't updated\")\n\t}\n\n\tfmt.Println(\"Identity schema updated \")\n\n\treturn nil\n}\n```\n\n----------------------------------------\n\nTITLE: Patching Webauthn RP ID and Origins - Ory CLI\nDESCRIPTION: Provides the Ory CLI command to update the Relying Party (RP) ID and allowed origins specifically for the Webauthn configuration. This command helps resolve \"Relying party ID mismatch\" errors in non-production environments by setting the RP ID to \"localhost\" and origins to \"http://localhost:3000\". Requires the Ory CLI and your Ory project/workspace IDs. This command modifies the identity configuration and should not be used in production if existing users have signed up using a different RP ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/45_passkeys-webauthn-security-error.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/selfservice/methods/webauthn/config/rp/id=\\\"localhost\\\"\" \\\n  --replace \"/selfservice/methods/webauthn/config/rp/origins=[\\\"http://localhost:3000\\\"]\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Hydra Configuration (hydra.yml)\nDESCRIPTION: This YAML snippet configures Ory Hydra to use a PostgreSQL database and sets the issuer URL. The `dsn` specifies the connection string for the Postgres database, including the username, password, host, port, database name, and SSL mode. The `urls.self.issuer` setting defines the base URL that will be used in access and ID tokens issued by Hydra.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_13\n\nLANGUAGE: yaml\nCODE:\n```\ndsn: postgres://hydra:b0qw68gr3Q@127.0.0.1:5432/hydra?sslmode=disable&max_conns=20&max_idle_conns=4\nurls:\n  self:\n    issuer: https://oauth2.example.com\n```\n\n----------------------------------------\n\nTITLE: Securing Ory Kratos Secrets for Production Deployment\nDESCRIPTION: This snippet provides commands and configuration adjustments for generating secure secrets using `openssl`, replacing insecure placeholder values in `kratos.yml`, and disabling sensitive value leakage in logs. These steps improve the security posture of a Kratos deployment in production environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_40\n\nLANGUAGE: Bash\nCODE:\n```\nopenssl rand -base64 22\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Authenticators in Ory Oathkeeper Access Rule (Chaining)\nDESCRIPTION: This JSON snippet illustrates how to define multiple authenticators in an Ory Oathkeeper Access Rule. The authenticators are processed in the order they appear in the list. The first authenticator that successfully handles the request's credentials will be used, and subsequent authenticators will be ignored.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authenticators\": [\n    {\n      \"handler\": \"a\"\n    },\n    {\n      \"handler\": \"b\"\n    },\n    {\n      \"handler\": \"c\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a webhook action for Ory to send Identify data to Segment API\nDESCRIPTION: Creates a JSON configuration for an Ory Action webhook that posts identity data to Segment's Identify API, including authorization using a Write Key, request URL, method, and payload with the encoded Jsonnet transform.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/segment.mdx#_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"hook\": \"web_hook\",\n  \"config\": {\n    \"auth\": {\n      \"type\": \"basic_auth\",\n      \"config\": {\n        \"user\": \"$YOUR_SEGMENT_WRITE_KEY\",\n        \"password\": \"\"\n      }\n    },\n    \"url\": \"https://api.segment.io/v1/identify\",\n    \"method\": \"POST\",\n    \"body\": \"base64://{JSONNET_FROM_CLIPBOARD}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory SDK Client in Golang\nDESCRIPTION: This snippet shows how to set up a new Ory SDK client in Golang version 1.1.10. It imports the client package, configures the API server URL, and demonstrates adding an authorization context using an API key stored in environment variables. It also illustrates how to replace the default HTTP client if needed. Inputs include the project URL placeholder which must be replaced, and the authorization token to access protected endpoints. The output is a configured SDK client instance for making API calls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/client-go@1.1.10\n```\n\nLANGUAGE: go\nCODE:\n```\nimport ory \"github.com/ory/client-go\"\n\nvar client = NewSDK()\n\n// Use this context to access Ory APIs which require an Ory API Key.\nvar oryAuthedContext = context.WithValue(context.Background(), ory.ContextAccessToken, os.Getenv(\"ORY_API_KEY\"))\n\nfunc NewSDK() *ory.APIClient {\n  conf := ory.NewConfiguration()\n  conf.Servers = ory.ServerConfigurations{{\n    URL: \"https://{your-project}.projects.oryapis.com/\",\n  }}\n\n  // If you want the SDK to use a custom HTTP Client, set:\n  //  conf.HTTPClient = &http.Client{ /* ... */ }\n\n  return ory.NewAPIClient(conf)\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration with Go\nDESCRIPTION: This Go code snippet demonstrates how to submit a registration flow using the Ory SDK. It sends a POST request to the `/self-service/registration` endpoint, populating the necessary form fields and parameters. Dependencies: Ory Go SDK. Prerequisites: A running Ory instance and the correct API configuration. Expected input is user input, and the expected output is the API response. Limitations: requires Go SDK installation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_24\n\nLANGUAGE: go\nCODE:\n```\nimport submitRegistrationApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-registration.go'\n```\n\n----------------------------------------\n\nTITLE: Fetching Identities with Python SDK\nDESCRIPTION: This Python code snippet retrieves a single page of identities using the Ory Python SDK. It configures the API client with the API key and project slug and calls the `list_identities` method, passing `page_size` and `page_token`. The output is the API response, printed with pprint. Requires the `ory_client` package and valid Ory credentials.  The user must provide the API key and project slug.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/pagination.mdx#_snippet_1\n\nLANGUAGE: python\nCODE:\n```\nimport os\nfrom pprint import pprint\nfrom ory_client.api_client import ApiClient\nfrom ory_client.configuration import Configuration\nfrom ory_client.api.identity_api import IdentityApi\n\n# Configure your Ory credentials\nconfiguration = Configuration(\n    access_token=\"{API_KEY}\",\n    host=\"https://{PROJECT_SLUG}.projects.oryapis.com\",\n)\n\n# Enter a context with an instance of the API client\nwith ApiClient(configuration) as api_client:\n    # Create an instance of the API class\n    api_instance = IdentityApi(api_client)\n\n    try:\n        # List Identities\n        api_response = api_instance.list_identities(\n            page_size=1,\n            page_token=\"<token>\",\n        )\n        pprint(api_response)\n    except Exception as e:\n        print(\"Error fetching identities: %s\\n\" % e)\n```\n\n----------------------------------------\n\nTITLE: YAML Configuration Example\nDESCRIPTION: This snippet shows a simple YAML configuration example. It demonstrates the underscore naming convention for configuration keys and the use of nested keys.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nsome_config: value\n# Not:\n# someConfig: value\n```\n\n----------------------------------------\n\nTITLE: Listing SSO OIDC Connections for a Project - Bash (curl + jq)\nDESCRIPTION: Fetches the list of SSO OIDC connections configured for an Ory project by making an authenticated GET request. The JSON result is filtered with jq to display only the providers segment. Requires PROJECT_ID, authentication with WORKSPACE_API_KEY, and assumes jq is installed in the shell environment. Outputs a JSON array containing OIDC connection configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X GET --location \"https://api.console.ory.sh/projects/$PROJECT_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n   | jq \".services.identity.config.selfservice.methods.oidc.config.providers\"\n```\n\n----------------------------------------\n\nTITLE: Declaring Allowed CORS Origins in OAuth 2.0 Client JSON Configuration\nDESCRIPTION: This JSON snippet illustrates how an OAuth 2.0 client can specify allowed CORS origins via the 'allowed_cors_origins' field. These origins permit cross-origin requests to certain OAuth 2.0 endpoints like '/oauth2/token', '/userinfo', and '/oauth2/revoke' even if these origins are not included in the global public.cors.allowed_origins setting. This client-level configuration is essential for enabling CORS in OAuth 2.0 flows on a per-client basis. It requires the OAuth 2.0 client registration to include this field correctly, with expected input as an array of origin URLs. Output behavior includes accepting CORS requests from these client-defined origins at applicable endpoints. This mechanism does not apply to the Authorization Endpoint, which forbids CORS inherently.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cors.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"client_id\": \"foo\",\n  \"allowed_cors_origins\": [\"https://foo-bar.com/\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Lookup Secrets in Ory Configuration (YAML)\nDESCRIPTION: A snippet from the Ory Identities configuration YAML file showing how to enable the `lookup_secret` selfservice method. Setting `enabled` to `true` activates the Lookup Secrets feature for the project. This snippet is intended to be inserted into the configuration file obtained using the `ory get identity-config` command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/25_lookup-secrets.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nlookup_secret:\n  enabled: true\n```\n\n----------------------------------------\n\nTITLE: Example of request parameter struct with path parameter and body\nDESCRIPTION: Illustrates creating a request object for retrieving an identity, including query and path parameters, conforming to the specified annotation with 'swagger:parameters'. The struct models the request body and parameters logically for API documentation and code generation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_3\n\nLANGUAGE: Go\nCODE:\n```\n// Get Identity Request\n//\n// swagger:parameters getIdentity\n// type getIdentityRequest struct {\n// \t// Request Body\n// \t// in: body\n// \tBody getIdentityRequestBody // In GET requests we do not have a body but we keep this for the example's sake.\n//\n// Alternatively if a model already exists:\n//\n// \t in: body\n// \t Body identity\n//\n// \tFoo string `json:\"foo\"`\n// }\n//\n// Request Body for Getting an Identity\n//\n// swagger:model\n// type getIdentityRequestBody struct {\n// \tSearch string `json:\"search\"`\n// }\n```\n\n----------------------------------------\n\nTITLE: Importing and Using the Secure MDX Component\nDESCRIPTION: This snippet demonstrates how to import the 'Secure' component from a common directory and render it within an MDX document. It facilitates inclusion of security-related documentation or UI elements.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/install.mdx#_snippet_0\n\nLANGUAGE: MDX\nCODE:\n```\nimport Secure from '../_common/secure.mdx'\n\n<Secure />\n```\n\n----------------------------------------\n\nTITLE: Listing Available Flags for 'ory delete relation-tuples' Command in Shell\nDESCRIPTION: This snippet details the available command-line flags for the 'ory delete relation-tuples' command, describing their purposes for refining the deletion operation. Dependencies include having the Ory CLI installed and configured. Flags like '--namespace', '--object', '--relation', '--subject-id', and '--subject-set' filter the tuples to be deleted. The '--all' flag deletes all tuples unconditionally. Inherited global flags such as '--config', '--format', '--quiet', and '--yes' are also listed to customize command behavior. The input is user-supplied flags through the CLI, and the output behavior depends on flags used.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-relation-tuples.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n--all                  Delete all relation tuples\n--force                Force the deletion of relation tuples\n-h, --help             help for relation-tuples\n--namespace string     Set the requested namespace\n--object string        Set the requested object\n--project string       The project to use\n--relation string      Set the requested relation\n--subject-id string    Set the requested subject ID\n--subject-set string   Set the requested subject set; format: \"namespace:object#relation\"\n```\n\nLANGUAGE: shell\nCODE:\n```\n-c, --config string   Path to the Ory Network configuration file.\n--format string       Set the output format. One of default, json, yaml, and json-pretty. (default \"default\")\n-q, --quiet           Be quiet with output printing.\n-y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Parent Command Options Inherited by 'kratos identities patch' - bash\nDESCRIPTION: This snippet details the flags inherited from parent kratos CLI commands that modify the behavior of the 'kratos identities patch' command. These include: specifying the Admin API endpoint URL (-e, --endpoint string) or using the KRATOS_ADMIN_URL environment variable; setting the output format (-f, --format string) to table, json, or json-pretty with a default of 'default'; and a quiet mode flag (-q, --quiet) to reduce output verbosity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-patch.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n  -f, --format string     Set the output format. One of table, json, and json-pretty. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet Data Mapping File with Base64 - Shell\nDESCRIPTION: This shell command encodes a local Jsonnet mapping file into Base64 for use in the Ory CLI configuration process. Input: local Jsonnet file (your-data-mapping.jsonnet). Output: Base64-encoded string. Prerequisite: Base64 utility must be available in the shell environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Configuring ID Token Expiration via Ory CLI\nDESCRIPTION: This shell script configures the expiration time for ID tokens.  It utilizes the `ory patch oauth2-config` command to modify the ID token's Time To Live (TTL). The `--replace` flag sets the `id_token` value. The example demonstrates setting the ID token expiration to five minutes. The `--project` and `--workspace` flags are necessary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/id_token=\\\"5m\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Enabling Attempted Recovery Notifications via Ory CLI\nDESCRIPTION: This sequence enables notifications for attempted recovery on unregistered addresses using the Ory CLI. It retrieves the identity configuration, sets `notify_unknown_recipients` to `true` within the `flows.recovery` section of the YAML configuration, and then updates the project configuration. This helps mitigate account enumeration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\nLANGUAGE: yaml\nCODE:\n```\nflows:\n  recovery:\n    enabled: true\n    lifespan: 15m # Defines how much time the user has to complete the recovery flow in the UI. Default: 1h.\n    use: code # Defines which method is used, one of 'code' or 'link'.\n    notify_unknown_recipients: true # Defines if the system sends attempted recovery notifications to unregistered addresses.\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Using hydra revoke command options in Bash\nDESCRIPTION: This snippet shows the available options for the 'hydra revoke' command. Options include specifying the API endpoint, setting output format, adding HTTP headers, enabling quiet mode, and skipping TLS verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-revoke.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for revoke\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Identity Social Sign-In Provider for GitHub - YAML\nDESCRIPTION: This YAML snippet demonstrates how to add GitHub as an OIDC provider in the Ory Identities configuration. It specifies provider type, client credentials, the mapper_url (either Base64-encoded or as a hosted file), and required OAuth scopes. Dependencies: valid client_id/client_secret from GitHub, properly encoded or accessible mapper_url, existing Ory YAML config structure. Input: configuration values. Output: Updated Ory configuration. Limitation: The provider ID and type must match Ory's requirements and remain unchanged once set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/25_github.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: github # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: github # This defines the app type used for integration. Use 'github' for GitHub OAuth app. Use 'github-app' for GitHub App.\n            client_id: .... # Replace this with the OAuth2 Client ID provided by GitHub\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by GitHub\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - user:email\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Verification Flow via cURL (Native API)\nDESCRIPTION: Uses cURL to initiate a new email verification flow via the `/self-service/verification/api` endpoint for native applications or backend interactions. Includes the shell command and an example JSON response containing the flow details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_48\n\nLANGUAGE: shell\nCODE:\n```\n{createVerificationCurlApi}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(createVerificationCurlApiJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Synchronous authorization flow diagram using Mermaid\nDESCRIPTION: Illustrates the step-by-step process of synchronous permission checking in an application with Ory Identities and Ory Permissions using a Mermaid sequence diagram. It shows the interaction between Subject, App, Ory Identities (for authentication), and Ory Permissions (for authorization checks). The diagram clarifies that authentication is done before permission checks, and permissions are checked prior to returning resources. No specific dependencies besides Mermaid for rendering the diagram. Inputs include a resource request from a subject; outputs describe if the requested resource is returned based on permission evaluation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/simple-access-check-guide.mdx#_snippet_1\n\nLANGUAGE: Mermaid\nCODE:\n```\nsequenceDiagram\n    participant Subject\n    participant App\n    participant Ory Identities\n    participant Ory Permissions\n%\n    Subject->>+App: Request Resource\n    App->>+Ory Identities: Authenticate Subject\n    Ory Identities->>-App: Subject Authenticated\n    App->>+Ory Permissions: Check \"subject\" has \"read\" permission on \"resource x\"\n    Ory Permissions->>-App: Permissions Granted\n    App->>-Subject: Return Resource\n```\n\n----------------------------------------\n\nTITLE: Ory CLI - Get Identity Config\nDESCRIPTION: This shell script retrieves the Ory Identities configuration from a specified project and workspace. It uses the `ory get identity-config` command to fetch the configuration in YAML format and saves it to a file named `identity-config.yaml`.  Dependencies include the Ory CLI tool and valid project and workspace IDs. The output is a YAML configuration file containing the current identity settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/05_generic.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Original Secret Key YAML Configuration (YAML)\nDESCRIPTION: This YAML configuration snippet shows the default format for specifying cookie and system encryption secrets in Ory Hydra. The keys are listed as arrays under their respective categories. Both 'cookie' and 'system' keys must be defined as lists, where each entry is an encryption key, and at initial setup, typically only the current key is present.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/secrets-key-rotation.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nsecrets:\n  cookie:\n    - the-old-cookie-encryption-key\n  system:\n    - the-old-system-encryption-key\n```\n\n----------------------------------------\n\nTITLE: Patching the identity schema in Ory CLI Shell\nDESCRIPTION: This shell script uses the Ory CLI to patch the default identity schema, updating it to use the email schema. The script utilizes the project ID and workspace ID, obtained previously, and replaces the existing default schema with a new one configured for handling email credentials. This is essential for using email based sign-in.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n   --replace '/identity/default_schema_id=\"preset://email\"' \\\n   --replace '/identity/schemas=[{\"id\":\"preset://email\",\"url\":\"base64://ewogICIkaWQiOiAiaHR0cHM6Ly9zY2hlbWFzLm9yeS5zaC9wcmVzZXRzL2tyYXRvcy9pZGVudGl0eS5lbWFpbC5zY2hlbWEuanNvbiIsCiAgIiRzY2hlbWEiOiAiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjIiwKICAidGl0bGUiOiAiUGVyc29uIiwKICAidHlwZSI6ICJvYmplY3QiLAogICJwcm9wZXJ0aWVzIjogewogICAgInRyYWl0cyI6IHsKICAgICAgInR5cGUiOiAib2JqZWN0IiwKICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgImVtYWlsIjogewogICAgICAgICAgInR5cGUiOiAic3RyaW5nIiwKICAgICAgICAgICJmb3JtYXQiOiAiZW1haWwiLAogICAgICAgICAgInRpdGxlIjogIkUtTWFpbCIsCiAgICAgICAgICAib3J5LnNoL2tyYXRvcyI6IHsKICAgICAgICAgICAgImNyZWRlbnRpYWxzIjogewogICAgICAgICAgICAgICJwYXNzd29yZCI6IHsKICAgICAgICAgICAgICAgICJpZGVudGlmaWVyIjogdHJ1ZQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIndlYmF1dGhuIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXIiOiB0cnVlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAidG90cCI6IHsKICAgICAgICAgICAgICAgICJhY2NvdW50X25hbWUiOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAicmVjb3ZlcnkiOiB7CiAgICAgICAgICAgICAgInZpYSI6ICJlbWFpbCIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgInZlcmlmaWNhdGlvbiI6IHsKICAgICAgICAgICAgICAidmlhIjogImVtYWlsIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIm1heExlbmd0aCI6IDMyMAogICAgICAgIH0KICAgICAgfSwKICAgICAgInJlcXVpcmVkIjogWwogICAgICAgICJlbWFpbCIKICAgICAgXSwKICAgICAgImFkZGl0aW9uYWxQcm9wZXJ0aWVzIjogZmFsc2UKICAgIH0KICB9Cn0K\n```\n\n----------------------------------------\n\nTITLE: Installing Ory SDK and CLI - npm\nDESCRIPTION: Installs the `@ory/client-fetch` SDK for interacting with Ory APIs and the `@ory/cli` for local development tools like the tunnel, saving them as project dependencies. Requires npm and an existing Node.js project (`app-name`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nnpm i --save @ory/client-fetch @ory/cli\n```\n\n----------------------------------------\n\nTITLE: Deploying Login/Consent App (Bash)\nDESCRIPTION: Starts the reference Login & Consent application container in detached mode, naming it 'ory-hydra-example--consent'. It connects to the 'hydraguide' network, maps external port 9020 to internal port 3000, and is configured to communicate with the Hydra admin API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d \\\n  --name ory-hydra-example--consent \\\n  -p 9020:3000 \\\n  --network hydraguide \\\n  -e HYDRA_ADMIN_URL=https://ory-hydra-example--hydra:4445 \\\n  -e NODE_TLS_REJECT_UNAUTHORIZED=0 \\\n  oryd/hydra-login-consent-node:v1.10.6\n```\n\n----------------------------------------\n\nTITLE: Testing Access Rule with JWT Authentication using Curl\nDESCRIPTION: Demonstrates how to display an access rule definition in JSON format using `cat` and then test an endpoint protected by that rule using `curl`. It shows the expected HTTP responses for requests with no token, an invalid token, and a valid token, illustrating Oathkeeper's authorization flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_32\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{l\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"jwt\",\n    \"config\": {\n      \"required_scope\": [\"scope-a\", \"scope-b\"],\n      \"target_audience\": [\"aud-1\"],\n      \"trusted_issuers\": [\"iss-1\"]\n    }\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\nl}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because no credentials have been provided.\n\ncurl -X GET -H 'Authorization: Bearer invalid-token' http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because the provided credentials are invalid.\n\ncurl -X GET -H 'Authorization: Bearer valid.jwtfrom.peter' http://my-app/some-route\n\nHTTP/1.0 200 OK\nThe request has been allowed! The subject is: \"peter\"\n```\n\n----------------------------------------\n\nTITLE: Specifying OAuth2 Client Audiences in Client Metadata Using JSON5\nDESCRIPTION: This snippet illustrates how to specify the 'audience' parameter in the OAuth2 client metadata during client creation or updates. The 'audience' field is a list of case-sensitive URL strings, which represent the allowed resource servers that the OAuth2 access token can be used with. This configuration is essential for proactively defining token audiences and must exclude whitespace in URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/audiences.mdx#_snippet_0\n\nLANGUAGE: json5\nCODE:\n```\n{\n  client_id: \"...\",\n  // ..\n  audience: [\"https://api.my-cloud.com/user\", \"https://some-tenant.my-cloud.com/\"],\n  // ..\n}\n```\n\n----------------------------------------\n\nTITLE: Testing OAuth2 Client Credentials Authenticator with Curl (ORY Oathkeeper) - Shell\nDESCRIPTION: This snippet shows the content of a sample `rules.json` file configured with the `oauth2_client_credentials` authenticator and provides `curl` commands to test its functionality. It demonstrates sending requests with missing, invalid, and valid HTTP Basic Authentication credentials, illustrating the expected failed (401 Unauthorized) and successful (200 OK) responses based on the validation against the token endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_20\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"oauth2_client_credentials\",\n    \"config\": {\n      \"required_scope\": [\"scope-a\", \"scope-b\"]\n    }\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because no credentials have been provided.\n\ncurl -X GET --user idonotexist:whatever http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because the provided credentials are invalid.\n\ncurl -X GET --user peter:somesecret http://my-app/some-route\n\nHTTP/1.0 200 OK\nThe request has been allowed! The subject is: \"peter\"\n```\n\n----------------------------------------\n\nTITLE: Extracting Client ID and Secret (JSON)\nDESCRIPTION: This snippet shows how to extract the client ID and client secret from the JSON output of the `hydra create client` command. The command's output is formatted as JSON, making it easy to parse using tools like `jq`. This is essential for accessing the created client ID and secret for API interactions and other related OAuth operations.  Requires `jq` and the Hydra CLI. It uses a `...` (ellipsis) to represent other arguments that might be needed to configure the Hydra command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-client.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nclient=$(hydra create client \\\n    --endpoint ... \\\n    --format json \\\n    ...\necho $client\n```\n\n----------------------------------------\n\nTITLE: Deleting All User Sessions using Ory Identities Go SDK\nDESCRIPTION: Demonstrates how to use the Ory Identities Go SDK to terminate all active sessions associated with a particular user identity. This is useful for forcing a user to log out from all devices.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_24\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Configuring gRPC Matchers for Ory Oathkeeper Middleware in JSON\nDESCRIPTION: This JSON snippet illustrates how to configure Ory Oathkeeper policies to match gRPC requests using authority and full_method fields. It specifies a policy with ID and version, and matches gRPC calls directed to a particular authority and RPC method path. Authenticators, authorizers, mutators, and error handlers are declared to define the complete policy chain executed by the middleware. This configuration targets explicit gRPC routing without HTTP proxies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/grpc-middleware.md#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"version\": \"v0.36.0-beta.4\",\n  \"match\": {\n    \"authority\": \"example.com\",\n    \"full_method\": \"my.grpc.package/MyService/MyMethod\"\n  },\n  \"authenticators\": [{ \"handler\": \"noop\" }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }],\n  \"errors\": [{ \"handler\": \"json\" }]\n}\n```\n\n----------------------------------------\n\nTITLE: Ory CLI - Create Salesforce Connected App and Configure OAuth Callback\nDESCRIPTION: Procedures for setting up Salesforce OAuth via CLI, including creating a connected app, setting the callback URL, and integrating claim mappings. The snippet provides a Jsonnet code for claims transformation, which must be encoded and included in configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/42_salesforce.mdx#_snippet_2\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by Salesforce.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n      username: claims.nickname,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Data Mapper in Ory Console (Conceptual)\nDESCRIPTION: Provides instructions within an MDX Tabs component on how to apply the created Jsonnet data mapper snippet within the Ory Console UI for a specific social sign-in provider.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_8\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from '@theme/Tabs'\nimport TabItem from '@theme/TabItem'\n\n<Tabs>\n  <TabItem value=\"Ory Console\" default>\n\n\n1. Go to <ConsoleLink route=\"project.socialSignIn\" />.\n2. Pick a provider of your choice.\n3. Add your JsonNet code snippet to the **data mapper** input form.\n\n\n  </TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Create Namespace in Kubernetes for Ory Hydra\nDESCRIPTION: This command creates a dedicated namespace 'ory' for deploying Ory Hydra components in Kubernetes, isolating resources and configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nkubectl create namespace ory\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities Configuration - Shell\nDESCRIPTION: This compound shell snippet outlines commands for listing workspaces, listing projects within a workspace, and downloading the Ory identities configuration as a YAML file. Inputs: <workspace-id>, <project-id>. Outputs: identity-config.yaml and workspace/project listings. Prerequisite: Ory CLI must be installed and authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Configure OAuth2 Webhook with Header Authentication - Ory CLI\nDESCRIPTION: This snippet shows how to register a webhook endpoint in your OAuth2 configuration using the Ory CLI, including authentication in the header. It adds the URL and API key authentication details to the OAuth2 configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --add '/oauth2/token_hook/url=\"https://my-example.app/token-hook\"' \\\n  --add '/oauth2/token_hook/auth/type=\"api_key\"' \\\n  --add '/oauth2/token_hook/auth/config/in=\"header\"' \\\n  --add '/oauth2/token_hook/auth/config/name=\"X-API-Key\"' \\\n  --add '/oauth2/token_hook/auth/config/value=\"MY API KEY\"' \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Shell: Update Ory Identity Configuration\nDESCRIPTION: This shell command updates the Ory Identities configuration.  It uses the Ory CLI's `update identity-config` command, specifying the project, workspace ID, and the path to the configuration file as input parameters.  This command applies the new or modified configuration, enabling Twitch social sign-in.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/60_twitch.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Configuring Cookie Domain and Path in Ory Kratos YAML Configuration - YAML\nDESCRIPTION: This YAML snippet demonstrates how to set up cookie-related parameters such as domain, path, and same_site in Ory Kratos configuration files. It highlights both general cookie settings and specific overrides for session cookies in the session section. Required dependencies are an operational Ory Kratos deployment with configuration access. Key parameters include cookies.domain (sets the default domain for cookies), cookies.path (specifies the path), cookies.same_site (controls SameSite attribute), and the session.cookie section, which allows per-session overrides. All inputs are specified as YAML fields, and changes impact how browsers handle authentication and CSRF mitigation cookies; cross-domain support for multiple top-level domains is not available outside Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/multi-domain-cookies.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Settings for both anti-CSRF and session cookies\ncookies:\n  domain: www.cookies.com\n  path: /cookies\n  same_site: Lax\n\nsession:\n  cookie:\n    # Overrides cookies.domain for session cookies\n    domain: my-domain.com\n\n    # Overrides cookies.path for session cookies\n    path: /\n\n    # Overrides cookies.samesite for session cookies\n    same_site: Strict\n```\n\n----------------------------------------\n\nTITLE: Example of a fully-defined route using swagger:route annotation in Go\nDESCRIPTION: Defines a sample route for listing identities via a GET request, illustrating the annotation format, tags, responses, and security requirements as per Ory's API guidelines. Showcases how to document API endpoints with associated metadata.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\n// swagger:route GET /admin/identities identities listIdentities\n//\n// # List Identities\n//\n// Lists all identities. Does not support search at the moment.\n//\n// Learn how identities work in [Ory Kratos' User And Identity Model Documentation](https://www.ory.sh/docs/next/kratos/concepts/identity-user-model).\n//\n//\tProduces:\n//\t- application/json\n//\n//\tSchemes: http, https\n//\n//\tSecurity:\n//\t  oryAccessToken:\n//\n//\tResponses:\n//\t  200: identityList\n//\t  default: jsonError\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Access Token Expiration via Ory CLI\nDESCRIPTION: This shell script snippet demonstrates how to configure the expiration time of access tokens globally in Ory. It utilizes the `ory patch oauth2-config` command to modify the access token's Time To Live (TTL). The `--replace` flag is used to update the `access_token` value. The `--project` and `--workspace` flags are necessary.  The result of this operation is the ability for the user to set the expiration time of their access tokens.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/access_token=\\\"2h\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Basic Command Structure for Ory OAuth2 Client Creation (Shell)\nDESCRIPTION: Displays the fundamental command structure for creating an OAuth 2.0 client using the Ory CLI. This command serves as the base for specifying various client configuration options via flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-oauth2-client.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client [flags]\n```\n\n----------------------------------------\n\nTITLE: Converting Ory Session to JWT via REST API using curl\nDESCRIPTION: Example curl command to convert an active Ory session into a JWT using the configured tokenizer template. The request sends the Ory session cookie and specifies the tokenizer template key as a query parameter. The response includes a 'tokenized' field containing the JWT string representation of the session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_4\n\nLANGUAGE: curl\nCODE:\n```\ncurl -X GET \\  -H \"Cookie: ory_session...=...\" \\  \"https://$PROJECT_SLUG.projects.oryapis.com/sessions/whoami?tokenize_as=jwt_example_template1\"\n\n{\n  // ...\n  \"tokenized\": \"{the-jwt}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Example of updating user settings via API with JSON (shell script)\nDESCRIPTION: This script demonstrates how an API client initiates a settings update by first retrieving the form's action URL, then submitting the password and method data via POST. The server responds with the updated identity and confirmation messages in JSON format, across API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\npassword=ByS8NWuFSkDgMjbe\n\nactionUrl=$(curl -s -H \"Accept: application/json\" \\\n  -H \"Authorization: bearer $sessionToken\" \\\n  'https://playground.projects.oryapis.com/self-service/settings/api' | jq -r '.ui.action')\n\ncurl -s -X POST -H \"Accept: application/json\" -H \"Content-Type: application/json\" \\\n    -H \"Authorization: bearer $sessionToken\" \\\n    -d '{\"password\": \"$password\", \"method\": \"password\"}' \\\n    \"$actionUrl\" | jq\n```\n\n----------------------------------------\n\nTITLE: Password Submission Button Node Structure Returned by Ory API (JSON)\nDESCRIPTION: This JSON snippet represents the structure of a submit button node for password submission as provided by the Ory API. The node specifies its group as 'password', an attribute indicating the submit action, and related display metadata. No error messages are present. This serves as a template for constructing UI submission controls. Inputs: none; Outputs: JSON object describing a password submission button node.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.missing.txt#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"method\",\n    \"type\": \"submit\",\n    \"value\": \"password\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070003,\n      \"text\": \"Save\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Verification Flow via cURL (Browser)\nDESCRIPTION: Uses cURL to initiate a new email verification flow via the `/self-service/verification/browser` endpoint in a browser context. Requires managing cookies (`-c` flag recommended). Includes the shell command and an example JSON response containing the flow details and CSRF token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_47\n\nLANGUAGE: shell\nCODE:\n```\n{createVerificationCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(createVerificationCurlBrowserJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Last Page Indication in HTTP\nDESCRIPTION: This code block shows how the `next` link is omitted when the current page is the last page. It uses the `page_size` and `page_token` parameters. The example includes request and response headers, indicating that there are no further pages to retrieve.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/api-design.md#_snippet_3\n\nLANGUAGE: HTTP\nCODE:\n```\n> GET /admin/clients?page_size=5&page_token=QLux4Tu5gb8JfW70 HTTP/1.1\n> Host: $PROJECT_SLUG.projects.oryapis.com\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Link: </admin/clients?page_size=5&page_token=euKoY1BqY3J8GVax>; rel=\"first\"\n< Date: Mon, 22 Apr 2019 23:36:29 GMT\n< Transfer-Encoding: chunked\n<\n[...] \n```\n\n----------------------------------------\n\nTITLE: Install Ory Kratos UI\nDESCRIPTION: This shell script automates the installation of the Ory Kratos Node.js UI.  It creates a user, downloads the UI package from GitHub, extracts it, installs dependencies using `npm`, and sets the ownership of the UI directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_32\n\nLANGUAGE: shell\nCODE:\n```\nuseradd -s /bin/false -m -d /opt/uinode uinode\n   cd /opt/uinode\n   wget https://github.com/ory/kratos-selfservice-ui-node/archive/refs/tags/${useLatestRelease(\"kratos\")}.zip\n   unzip ${useLatestRelease(\"kratos\")}.zip\n   rm  ${useLatestRelease(\"kratos\")}.zip\n   mv kratos-selfservice-ui-node-${useLatestReleaseFilename(\"kratos\")}/ ui\n   cd ui\n   npm i\n   chown -R uinode /opt/uinode\n```\n\n----------------------------------------\n\nTITLE: Handling Ory Consent Request with Skip Logic (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates the core logic for handling a consent request at a custom consent endpoint. It fetches consent request details using the Ory SDK (`getOAuth2ConsentRequest`), checks the `skip` and `client.skip_consent` properties to determine if the consent screen UI should be bypassed. If skipping is applicable, it shows how to immediately accept the consent request using `acceptOAuth2ConsentRequest`, granting the necessary scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst { consent_challenge } = req.query // the HTTP request\n\nconst challenge = await oauth2\n  .getOAuth2ConsentRequest({ consentChallenge: String(consent_challenge) })\n  .then(({ data: body }) => body)\n\nconst skipConsent =\n  challenge.skip || // skip because the user accepted the consent previously\n  challenge.client.skip_consent // skip because the client is trusted\n\nif (skipConsent) {\n  // If the consent is skipped, we accept the consent request immediately.\n  await oauth2.acceptOAuth2ConsentRequest({\n    consentChallenge: String(consent_challenge),\n    acceptOAuth2ConsentRequest: {\n      grant_scope: challenge.requested_scope,\n      grant_access_token_audience: challenge.requested_access_token_audience,\n      session,\n    },\n  })\n}\n\n// Next, add code that shows the consent screen.\n// This is used when the client doesn't have consent skipping enabled.\n// Check out an example consent screen implementation in an app here:\n// https://github.com/ory/hydra-login-consent-node/blob/f6ab9d1156aeabbd941f9920ff85408ca0a1f2d4/src/routes/consent.ts#L41\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTP SMS Courier Channel in YAML\nDESCRIPTION: Add or modify the `courier` section in the Ory Identity configuration YAML file to define an SMS channel using the HTTP type. This involves specifying the endpoint URL, HTTP method, request body template (base64 encoded Jsonnet), headers, and authentication details for your SMS provider.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/10_sending-sms.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  channels:\n    - id: sms\n      type: http\n      request_config:\n        url: https://api.twilio.com/2010-04-01/Accounts/AXXXXXXXXXXXXXX/Messages.json # Adjust your account ID\n        method: POST\n        body: base64://ZnVuY3Rpb24oY3R4KSB7CiAgVG86IGN0eC5yZWNpcGllbnQsCiAgQm9keTogY3R4LmJvZHksCn0= # see below\n        headers:\n          Content-Type: application/x-www-form-urlencoded # defaults to application/json\n        auth:\n          type: basic_auth # or api_key\n          config:\n            user: AXXXXXXX # adjust your credentials\n            password: XXXX # adjust your credentials\n```\n\n----------------------------------------\n\nTITLE: Disabling Legacy One-Step Registration via Ory CLI (bash)\nDESCRIPTION: This snippet provides bash commands using the Ory CLI to disable the legacy one-step registration flow for a specific project. It includes commands to list workspaces and projects to find the necessary IDs, followed by a `patch project` command to modify the project's configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/two-step-registration.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory list workspaces # to get the workspace id\nory list projects --workspace <workspace-id> # to get the project id\n\nory patch project --project <project-id> --workspace <workspace-id> \\\n  --replace '/services/identity/config/selfservice/flows/registration/enable_legacy_one_step=false'\n```\n\n----------------------------------------\n\nTITLE: Integration for Sending MFA Codes via Webhook\nDESCRIPTION: Explains the necessity of a custom SMS sender webhook in Ory to deliver MFA codes to users via SMS or email, referencing external documentation for message sending setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_5\n\nLANGUAGE: MDX\nCODE:\n```\nTo configure SMS or email gateways, head over to [Sending emails](../emails-sms/01_sending-emails-smtp.mdx) &amp; [SMS](../emails-sms/10_sending-sms.mdx)\n```\n\n----------------------------------------\n\nTITLE: Defining Identity with Name and Newsletter in JSON5\nDESCRIPTION: This snippet shows a more complex identity definition that includes email, first name, last name, and a newsletter opt-in field.  The `id` attribute is the unique identity identifier.  The `traits` object contains different fields, including nested objects to define name and a boolean value for newsletter subscription.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/05_identity-schema.mdx#_snippet_2\n\nLANGUAGE: JSON5\nCODE:\n```\n// Identity example\n{\n  id: \"6e9d3d30-f93e-4630-901f-c2096953723d\",\n  traits: {\n    email: \"foo@bar.com\",\n    name: {\n      first: \"Foo\",\n      last: \"Bar\",\n    },\n    newsletter: true,\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Mapping Lark Claims to Ory Identity Schema (Jsonnet)\nDESCRIPTION: Defines how to transform claims received from the Lark OIDC provider into the Ory Identity schema traits. It uses the `std.extVar('claims')` to access the incoming claims and conditionally maps the `email` claim, emphasizing security considerations for unverified emails. This snippet is referenced by the `mapper_url` in the Ory configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/81_lark.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, especially if the value is used for\n      // e.g. verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists by lark.\n      [if \"email\" in claims then \"email\" else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Client ID and Secret for Authorization Code Grant in Shell\nDESCRIPTION: Assigns shell variables for the OAuth2 client ID and secret created for the Authorization Code Grant flow. These credentials authenticate the client during authorization requests and token exchanges.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ncode_client_id=\"{set to CLIENT ID from output}\"\ncode_client_secret=\"{set to CLIENT SECRET from output}\"\n```\n\n----------------------------------------\n\nTITLE: Importing React Components for MFA UI\nDESCRIPTION: Imports necessary components from Ory's theme and site libraries for creating or customizing the MFA login interface, including tabs and browser window embedding.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n```\n\n----------------------------------------\n\nTITLE: Web Server Application with Confidential Client Using OAuth2\nDESCRIPTION: This code snippet demonstrates initiating an OAuth2 authorization request for a confidential client web application with client secret via URL redirect. It constructs the authorization URL including `offline_access` scope to request refresh tokens, and performs the redirect to start the OAuth2 flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\nory create oauth2-client --token-endpoint-auth-method client_secret_post\n```\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Request Access\nconst clientId = \"your_client_id\"\nconst authorizationUrl = `https://$PROJECT_SLUG.projects.oryapis.com/oauth2/auth?response_type=code&client_id=${clientId}&redirect_uri=https://myapp.com/callback&scope=openid%20offline_access&state=12345`\n\n// Redirect for authorization\nwindow.location = authorizationUrl\n```\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Exchange code for token\nconst clientSecret = \"your_client_secret\"\nconst code = \"authorization_code_received_from_auth_server\"\nconst tokenUrl = \"https://$PROJECT_SLUG.projects.oryapis.com/oauth2/token\"\nconst requestBody = `grant_type=authorization_code&client_id=${clientId}&client_secret=${clientSecret}&code=${code}&redirect_uri=https://myapp.com/callback`\n\nfetch(tokenUrl, {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: requestBody,\n})\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n  .catch((error) => console.error(error))\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Cookie Session Authenticator (YAML)\nDESCRIPTION: Configures the `cookie_session` authenticator in Ory Oathkeeper (`oathkeeper.yml`). It enables the authenticator, specifies the Ory Kratos `/sessions/whoami` endpoint (`check_session_url`) for session validation, and defines which cookie (`ory_kratos_session`) contains the session token. This integrates Oathkeeper with Kratos for session checking.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nauthenticators:\n  cookie_session:\n    enabled: true\n    config:\n      check_session_url: http://kratos:4433/sessions/whoami\n      preserve_path: true\n      extra_from: \"@this\"\n      subject_from: \"identity.id\"\n      only:\n        - ory_kratos_session\n# ...\n```\n\n----------------------------------------\n\nTITLE: Getting Registration Flow Details - Ory Go SDK\nDESCRIPTION: Explains how to retrieve the details of an existing registration flow using the Ory Go SDK's 'getRegistrationFlow' endpoint. This is useful for displaying the flow's state and form elements. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_6\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Register New User with Password Using cURL\nDESCRIPTION: Performs a password-based registration by sending a POST request with user traits and password data to the registration action URL, resulting in a new user identity creation. Dependencies include curl and jq for processing, and the action URL must be obtained beforehand.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_10\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -s -X POST -H  \"Accept: application/json\" -H \"Content-Type: application/json\" \\n    -d '{\"traits.email\": \"registration-api@user.org\", \"password\": \"fhAzi860a\", \"method\": \"password\"}' \\n    \"$actionUrl\" | jq\n```\n\n----------------------------------------\n\nTITLE: Checking Browser Session Identity - Ory Go SDK\nDESCRIPTION: Explains how to check the identity of the current user based on a browser session cookie using the Ory Go SDK's 'toSession' endpoint. This example is specifically tailored for browser clients. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_14\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Defining OTP Identifiers in Custom Identity Schema\nDESCRIPTION: This JSON schema snippet shows how to mark specific identity traits, such as email or phone number, as valid identifiers for the 'code' passwordless credential method. The `ory.sh/kratos` annotation within the trait properties defines it as an identifier via the specified method ('email' or 'sms').\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/06_code.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  $schema: \"http://json-schema.org/draft-07/schema#\",\n  type: \"object\",\n  properties: {\n    traits: {\n      type: \"object\",\n      properties: {\n        email: {\n          type: \"string\",\n          format: \"email\",\n          title: \"Your email\",\n          minLength: 3,\n          // highlight-start\n          \"ory.sh/kratos\": {\n            credentials: {\n              code: {\n                identifier: true,\n                via: \"email\",\n              },\n              // ...\n            }\n          },\n          // highlight-end\n        },\n        // ...\n        phone_number: {\n          type: \"string\",\n          format: \"tel\",\n          title: \"Your phone number\",\n          minLength: 3,\n          // highlight-start\n          \"ory.sh/kratos\": {\n            credentials: {\n              code: {\n                identifier: true,\n                via: \"sms\",\n              },\n              // ...\n            }\n          },\n          // highlight-end\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: AJAX / SPA session check JavaScript example\nDESCRIPTION: Example code snippet illustrating AJAX-based session validation in a Single Page Application, emphasizing CORS configuration, same-origin requirements, and cookie accessibility.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n{ajax}\n```\n\n----------------------------------------\n\nTITLE: HTML email template using gotmpl for verification email\nDESCRIPTION: This snippet defines an HTML email template utilizing the gotmpl syntax to insert a dynamic verification URL into the email body, enabling clickable links. It is used to send verification emails with HTML formatting, ensuring visual and functional enhancements such as clickable buttons.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_4\n\nLANGUAGE: Go\nCODE:\n```\n<a href=\"{{ .VerificationURL }}\">{{ .VerificationURL }}</a>\n```\n\n----------------------------------------\n\nTITLE: Sharing Identifier Across Credential Types YAML\nDESCRIPTION: Presents a YAML example demonstrating that the same identifier (e.g., email address) can be associated with different credential types (like password and OIDC) within the *same* Ory identity. This is explicitly allowed and does not cause a conflict.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\n# This is ok:\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n  oidc:\n    id: oidc\n    identifiers:\n      - john.doe@acme.com\n```\n\n----------------------------------------\n\nTITLE: Using Frontend APIs for Registration and Login in Golang with Ory SDK\nDESCRIPTION: This snippet describes how frontend-related API endpoints for browser and native registration/login flows have been renamed and reorganized in the Golang Ory SDK. It shows moving from using prefixed V0alpha2Api methods with 'SelfService' in the names to more concise 'FrontendApi' calls without prefixes. It also covers updating flows by replacing 'Submit' methods with 'Update' methods, passing required request bodies for password authentication. Inputs include context, flow IDs, and user credentials; outputs are flow details and session info.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_5\n\nLANGUAGE: diff\nCODE:\n```\n  // Browser App\n  flow, res, err := c.\n-   V0alpha2Api.InitializeSelfServiceRegistrationFlowBrowser(ctx).\n+   FrontendApi.CreateNativeRegistrationFlow(ctx).\n    Execute()\n\n\n  // Native App\n  flow, res, err := c.\n-   V0alpha2Api.initializeSelfServiceLoginFlowForBrowsers(ctx).\n+   FrontendApi.CreateBrowserRegistrationFlow(ctx).\n    Execute()\n  // if err != ...\n\n  result, res, err := c.\n-   V0alpha2Api.SubmitSelfServiceRegistrationFlow(ctx).\n+   FrontendApi.UpdateRegistrationFlow(ctx).\n    Flow(flow.Id).\n-   SubmitSelfServiceRegistrationFlowBody(\n+    UpdateRegistrationFlowBody(\n-     ory.SubmitSelfServiceRegistrationFlowWithPasswordMethodBodyAsSubmitSelfServiceRegistrationFlowBody(\n+     ory.UpdateRegistrationFlowWithPasswordMethodAsUpdateRegistrationFlowBody\n-       &ory.SubmitSelfServiceRegistrationFlowWithPasswordMethodBody{\n+       &ory.UpdateRegistrationFlowWithPasswordMethod{\n          Method:   \"password\",\n          Password: password,\n          Traits:   map[string]interface{}{\"email\": email},\n\t\t  }),\n    ).Execute()\n\n  // if err != ...\n  if result.Session == nil // ...\n```\n\n----------------------------------------\n\nTITLE: Mapping Spotify Claims to Ory Identity Traits via Jsonnet in CLI Setup\nDESCRIPTION: The Jsonnet snippet used to map Spotify user information claims to Ory Identity traits during CLI-based social sign-in provider configuration. This snippet extracts the user's email from the claims provided by the Ory SDK after calling Spotify's /me API, circumventing Spotify's limited OIDC support. This snippet must be base64-encoded or hosted online to be referenced by Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_2\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      email: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Hydra Systemd Service\nDESCRIPTION: This command enables the `hydra.service` systemd service, which makes it start automatically at boot time. It creates a symbolic link in the `multi-user.target.wants` directory to the service file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_18\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl enable hydra.service\nCreated symlink /etc/systemd/system/multi-user.target.wants/hydra.service  /etc/systemd/system/hydra.service.\n```\n\n----------------------------------------\n\nTITLE: Creating and Checking Permissions with Ory Keto REST API\nDESCRIPTION: This Go code demonstrates how to create a relationship and then check if a permission is allowed using the Ory Keto REST API. It defines the `namespace`, `object`, `relation`, and `subjectId` variables to represent the permission. It initializes a client to interact with the REST API, then creates a relationship using `CreateRelationship`. After creating the relationship, it checks the permission using `CheckPermission`. Errors during API calls are handled, and the result of the permission check is printed to the console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/self-hosted/05_go.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"os\"\n\n\tory \"github.com/ory/keto-client-go\"\n)\n\n// Use this context to access Ory APIs which require an Ory API Key.\nvar namespace = \"Blog\"\nvar object = \"secret_post\"\nvar relation = \"view\"\nvar subjectId = \"Bob\"\n\nfunc main() {\n\tpayload := ory.CreateRelationshipBody{\n\t\tNamespace: &namespace,\n\t\tObject:    &object,\n\t\tRelation:  &relation,\n\t\tSubjectId: &subjectId,\n\t}\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4467\", // Write API\n\t\t},\n\t}\n\twriteClient := ory.NewAPIClient(configuration)\n\t_, r, err := writeClient.RelationshipApi.CreateRelationship(context.Background()).CreateRelationshipBody(payload).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t\tpanic(\"Encountered error: \" + err.Error())\n\t}\n\tfmt.Println(\"Successfully created tuple\")\n\tconfiguration.Servers = []client.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4466\", // Read API\n\t\t},\n\t}\n\treadClient := client.NewAPIClient(configuration)\n\n\tcheck, r, err := readClient.PermissionApi.CheckPermission(context.Background()).\n\t\tNamespace(*&namespace).\n\t\tObject(*&object).\n\t\tRelation(*&relation).\n\t\tSubjectId(*&subjectId).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t\tpanic(\"Encountered error: \" + err.Error())\n\t}\n\tif check.Allowed {\n\t\tfmt.Println(*&subjectId + \" can \" + *&relation + \" the \" + *&object)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Executing Ory Auth Logout Command\nDESCRIPTION: Basic command syntax to sign out of the current Ory Network account using the Ory CLI. Optional flags can be added to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-auth-logout.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory auth logout [flags]\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js 16 and dependencies\nDESCRIPTION: This script installs Node.js version 16 along with npm, jq, and unzip on an Ubuntu system. It retrieves the installation script using curl, executes it with bash, and then installs the packages using apt-get.  This provides the necessary runtime environment for Javascript-based applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl -sL https://deb.nodesource.com/setup_16.x -o /tmp/nodesource_setup.sh\nbash /tmp/nodesource_setup.sh\napt-get install nodejs npm jq unzip\n# Install Node.js 16.x and other dependencies\n```\n\n----------------------------------------\n\nTITLE: Example OAuth2 Token Webhook Request Payload - JSON\nDESCRIPTION: This snippet shows the structure of the JSON payload that Ory sends to the webhook endpoint. It includes session information (ID token claims, extra data, client ID, etc.) and request information (client ID, granted scopes, grant types, etc.).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"session\": {\n    \"id_token\": {\n      \"id_token_claims\": {\n        \"jti\": \"\",\n        \"iss\": \"http://your-slug-xyz.projects.oryapis.com\",\n        \"sub\": \"subject\",\n        \"aud\": [\"app-client\"],\n        \"nonce\": \"\",\n        \"at_hash\": \"\",\n        \"acr\": \"1\",\n        \"amr\": null,\n        \"c_hash\": \"\",\n        \"ext\": {}\n      },\n      \"headers\": {\n        \"extra\": {}\n      },\n      \"username\": \"\",\n      \"subject\": \"foo\"\n    },\n    \"extra\": {},\n    \"client_id\": \"app-client\",\n    \"consent_challenge\": \"\",\n    \"exclude_not_before_claim\": false,\n    \"allowed_top_level_claims\": []\n  },\n  \"request\": {\n    \"client_id\": \"app-client\",\n    \"granted_scopes\": [\"offline\", \"openid\", \"hydra.*\"],\n    \"granted_audience\": [],\n    \"grant_types\": [\"authorization_code\"],\n    \"payload\": {\n      \"assertion\": [\"eyJhbGciOiJIUzI...\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting an Organization via Ory API - Bash (curl)\nDESCRIPTION: Makes a DELETE HTTP request to the Ory API to remove an organization referenced by ORGANIZATION_ID. It is necessary to set PROJECT_ID and authenticate with WORKSPACE_API_KEY before using this command. Returns the operation result in JSON format or a success status.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X DELETE --location \"https://api.console.ory.sh/projects/$PROJECT_ID/organizations/$ORGANIZATION_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Extending a User Session Programmatically with the Ory TypeScript SDK (TypeScript)\nDESCRIPTION: This TypeScript snippet uses the Ory TypeScript SDK to refresh or extend a specific user's session by Session ID. It must be used in an environment where the Ory SDK is installed and properly configured. The function expects the session identifier as input and returns a refreshed session upon success. This is suitable for administrative tasks and automation workflows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport nativeExtendSession from \"!!raw-loader!@site/code-examples/sdk/typescript/src/session/refresh-session-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"extend-session-native.ts\">{nativeExtendSession}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Example /etc/hosts File Configuration\nDESCRIPTION: Example content of /etc/hosts file with mappings for Ory Hydra hostnames to Kubernetes Ingress IP.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_13\n\nLANGUAGE: sh\nCODE:\n```\ncat /etc/hosts\n127.0.0.1\t    localhost\n255.255.255.255\tbroadcasthost\n::1             localhost\n# ...\n192.168.64.3    example-idp.localhost\n192.168.64.3    admin.hydra.localhost\n192.168.64.3    public.hydra.localhost\n```\n\n----------------------------------------\n\nTITLE: Implementing Ory Identities Middleware with Gin Framework\nDESCRIPTION: Provides an example showing how to integrate the Ory Identities Go SDK's session management middleware with the Gin web framework. This middleware allows securing routes or accessing the authenticated identity within Gin handlers. Requires the Gin framework.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_29\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Project Configuration by Adding an Ory Action via API in Bash\nDESCRIPTION: Shows how to apply a PATCH request to modify an existing Ory project configuration. It examples adding a new hook under identity service login flow's after-hooks. The hook definition wraps a webhook that posts base64-encoded Jsonnet code transforming identity data for Segment integration. Jsonnet code must be base64 encoded externally. Requires setting ORY_PROJECT_ID and appropriate Workspace API Key. The response filters to show updated hooks using jq.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_6\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) {\n  userId: ctx.identity.id,\n  traits: {\n    email: ctx.identity.traits.email,\n    name: ctx.identity.traits.name,\n    newsletterConsent: ctx.identity.traits.consent.newsletter,\n  },\n}\n```\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_PROJECT_ID=\n\ncurl --location --request PATCH \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}\" \\\n-H \"Authorization: Bearer ${WORKSPACE_API_KEY}\" \\\n-H \"Content-Type: application/json\" \\\n-d '[\n  {\n    \"op\": \"add\",\n    \"path\": \"/services/identity/config/selfservice/flows/login/after/hooks/-\",\n    \"value\": {\n      \"hook\": \"web_hook\",\n      \"config\": {\n        \"url\": \"https://webhook.site/42a3f21-375b-4604-b4c7-15cc885ffa13\",\n        \"method\": \"POST\",\n        \"body\": \"base64://ZnVuY3Rpb24oY3R4KSB7CiAgdXNlcklkOiBjdHguaWRlbnRpdHkuaWQsCiAgdHJhaXRzOiB7CiAgICBlbWFpbDogY3R4LmlkZW50aXR5LnRyYWl0cy5lbWFpbCwKICAgIG5hbWU6IGN0eC5pZGVudGl0eS50cmFpdHMubmFtZSwKICAgIG5ld3NsZXR0ZXJDb25zZW50OiBjdHguaWRlbnRpdHkudHJhaXRzLmNvbnNlbnQubmV3c2xldHRlciwKICB9LAp9\"\n      }\n    }\n  }\n]' \\\n| jq \".project.services.identity.config.selfservice.flows.login.after.hooks\"\n```\n\n----------------------------------------\n\nTITLE: Configuring hydra perform CLI command options for OAuth 2.0 flows - bash\nDESCRIPTION: Provides the command-line options for the 'hydra perform' CLI tool which executes OAuth 2.0 flows using Ory Hydra. Includes parameters for setting the API endpoint URL, output format (table, json, yaml, etc.), additional HTTP headers, quiet output mode, and TLS certificate verification skipping. These options allow customization and control over the OAuth 2.0 flow execution environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for perform\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Implementing Ory Kratos Authentication Middleware for Echo in Go\nDESCRIPTION: Implements session validation middleware for the Echo web framework using the Ory Kratos Go SDK. The middleware verifies the ory_kratos_session cookie, redirecting users to the login page if the session is invalid or inactive. Dependencies are github.com/labstack/echo/v4 and github.com/ory/kratos-client-go; a running Kratos Public API is required. Main input is the request with session cookie; on success, the request proceeds; on failure, the user is redirected.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_6\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"errors\"\n\t\"net/http\"\n\n\t\"github.com/labstack/echo/v4\"\n\n\tory \"github.com/ory/kratos-client-go\"\n)\n\ntype kratosMiddleware struct {\n\tory *ory.APIClient\n}\n\nfunc NewMiddleware() *kratosMiddleware {\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4433\", // Kratos Public API\n\t\t},\n\t}\n\treturn &kratosMiddleware{\n\t\tory: ory.NewAPIClient(configuration),\n\t}\n}\nfunc (k *kratosMiddleware) Session(next echo.HandlerFunc) echo.HandlerFunc {\n\treturn func(c echo.Context) error {\n\t\tsession, err := k.validateSession(c.Request())\n\t\tif err != nil {\n\t\t\treturn c.Redirect(http.StatusMovedPermanently, \"http://127.0.0.1:4455/login\")\n\t\t}\n\t\tif !*session.Active {\n\t\t\treturn c.Redirect(http.StatusMovedPermanently, \"http://your_endpoint\")\n\t\t}\n\t\treturn next(c)\n\t}\n}\nfunc (k *kratosMiddleware) validateSession(r *http.Request) (*ory.Session, error) {\n\tcookie, err := r.Cookie(\"ory_kratos_session\")\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif cookie == nil {\n\t\treturn nil, errors.New(\"no session found in cookie\")\n\t}\n\tresp, _, err := k.ory.FrontendApi.ToSession(context.Background()).Cookie(cookie.String()).Execute()\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn resp, nil\n}\nfunc main() {\n\n\tk := NewMiddleware()\n\te := echo.New()\n\te.Use(k.Session)\n\te.GET(\"/hello\", func(c echo.Context) error {\n\t\treturn c.String(http.StatusOK, \"Hello, World!\")\n\t})\n\te.Logger.Fatal(e.Start(\":1323\"))\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Initial ASP.NET Core Host and Ory Client (C#)\nDESCRIPTION: Modifies the `Program.cs` file to include necessary Ory Client namespaces, explicitly configure the Kestrel web server to listen on a configurable port (`APP_PORT`), and initialize the `Ory.Client.Api.FrontendApi` client instance, setting its base URL from configuration (`ORY_BASEPATH`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_2\n\nLANGUAGE: csharp\nCODE:\n```\n// add-lines-start\nusing Ory.Client.Api;\nusing Ory.Client.Client;\n// add-lines-end\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// add-lines-start\n// configure http port explicitly to override generated settings from launchSettings.json\nbuilder.WebHost.ConfigureKestrel(opt => {\n\tvar port = builder.Configuration.GetValue<int>(\"APP_PORT\", 3000);\n\topt.ListenAnyIP(port);\n});\n// add-lines-end\n\nvar app = builder.Build();\n\n// add-lines-start\n// create a new Ory Client with the BasePath set to the Ory Tunnel enpoint\nvar oryBasePath = builder.Configuration.GetValue<string>(\"ORY_BASEPATH\") ?? \"http://localhost:4000\";\nvar ory = new FrontendApi(new Configuration\n{\n\tBasePath = oryBasePath\n});\n// add-lines-end\n\napp.MapGet(\"/\", () => \"Hello World!\");\n\napp.Run();\n```\n\n----------------------------------------\n\nTITLE: Versioning Identity Schemas in Ory Configuration (YAML)\nDESCRIPTION: This YAML configuration snippet shows how to add schema versioning within Ory by defining multiple schema versions and updating the `default_schema_id`. Existing identities continue to use their original schema, while new ones are created with the updated schema version. URLs point to base64-encoded JSON schema definitions for each version. Dependencies include schema files properly encoded in base64 and referenced in the URL. This approach enables non-disruptive migrations, with schema selection controlled per identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/35_best-practices.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nidentity:\n  default_schema_id: user_v1\n  schemas:\n    - id: user_v0\n      url: base64://{b46-encoded-user_v0}\n    - id: user_v1\n      url: base64://{b46-encoded-user_v1}\n```\n\n----------------------------------------\n\nTITLE: crypt(3) Password Hash Format - plaintext\nDESCRIPTION: Outlines the supported crypt(3) hash formats (md5, sha256, sha512), showing the arrangement of salt, rounds, and hash values for each. Inputs include algorithm identifier, salt, hash, and rounds for sha256/sha512 variants. The examples use radix-64 encoding and serve for import and migration scenarios.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_12\n\nLANGUAGE: plaintext\nCODE:\n```\n$md5-crypt$<salt>$<hash>\n$sha256-crypt$rounds=<rounds><salt>$<hash>\n$sha512-crypt$rounds=<rounds><salt>$<hash>\n$md5-crypt$b44ZDsnw$9D9z/TCVXPWsTkz9qnSBS/\n$sha256-crypt$rounds=535000$1AhJGf0tkCty1jNS$Pu6o3i5PsT6F4AG2F99AsK/rXyYymXII3OtO.paxQp9\n$sha512-crypt$rounds=656000$L6GsrFY85uzwktkh$gD2vwQpyaBn.FIBgjp2TCQHCQ3bMft49oIzr.nssNKo7ogR5zWnyVkTg4yv1gvzTNZ0oEISHEOOMxNIi3nS.h1\n```\n\n----------------------------------------\n\nTITLE: Docker Compose Configuration\nDESCRIPTION: This YAML configuration defines a multi-service Docker setup for Ory Kratos, Ory Oathkeeper, a database (PostgreSQL), and a self-service UI. It sets up the networking, image versions, environment variables, ports, and volumes for each service, enabling inter-service communication and data persistence. It includes configurations for Kratos migrations, the Kratos service, the UI, and a mail server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\nversion: \"3.7\"\nservices:\n  oathkeeper:\n    image: oryd/oathkeeper:${useLatestRelease(\"oathkeeper\")}\n    depends_on:\n      - kratos\n    ports:\n      - 8080:4455\n      - 4456:4456\n    command:\n      serve proxy -c \"/etc/config/oathkeeper/oathkeeper.yml\"\n    environment:\n      - LOG_LEVEL=debug\n    restart: on-failure\n    networks:\n      - intranet\n    volumes:\n      - ./oathkeeper:/etc/config/oathkeeper\n  postgres-kratos:\n    image: postgres:12\n    environment:\n      - POSTGRES_USER=kratos\n      - POSTGRES_PASSWORD=secret\n      - POSTGRES_DB=kratos\n    networks:\n      - intranet\n  kratos-migrate:\n    image: oryd/kratos:${useLatestRelease(\"kratos\")}\n    links:\n      - postgres-kratos:postgres-kratos\n    environment:\n      - DSN=postgres://kratos:secret@postgres-kratos:5432/kratos?sslmode=disable&max_conns=20&max_idle_conns=4\n    networks:\n      - intranet\n    volumes:\n      - type: bind\n        source: ./kratos\n        target: /etc/config/kratos\n    command: -c /etc/config/kratos/kratos.yml migrate sql -e --yes\n  kratos:\n    image: oryd/kratos:${useLatestRelease(\"kratos\")}\n    links:\n      - postgres-kratos:postgres-kratos\n    environment:\n      - DSN=postgres://kratos:secret@postgres-kratos:5432/kratos?sslmode=disable&max_conns=20&max_idle_conns=4\n    ports:\n      - '4433:4433'\n      - '4434:4434'\n    volumes:\n      - type: bind\n        source: ./kratos\n        target: /etc/config/kratos\n    networks:\n      - intranet\n    command: serve -c /etc/config/kratos/kratos.yml --dev --watch-courier\n  kratos-selfservice-ui-node:\n    image: oryd/kratos-selfservice-ui-node:latest\n    environment:\n      - KRATOS_PUBLIC_URL=http://kratos:4433/\n      - KRATOS_BROWSER_URL=http://127.0.0.1:4433/\n      - CSRF_COOKIE_NAME=ax-csrf-cookie\n      - COOKIE_SECRET=I_AM_VERY_SECRET\n      - CSRF_COOKIE_SECRET=I_AM_VERY_SECRET_TOO\n    networks:\n      - intranet\n    ports:\n      - \"4455:3000\"\n    restart: on-failure\n  mailslurper:\n    image: oryd/mailslurper:latest-smtps\n    ports:\n      - '4436:4436'\n      - '4437:4437'\n    networks:\n      - intranet\nnetworks:\n  intranet:\n```\n\n----------------------------------------\n\nTITLE: Performing Token Introspection for Authorization Code Grant Access Token in Shell\nDESCRIPTION: Exports the access token obtained from the Authorization Code Grant flow to a shell variable and performs token introspection with Ory CLI to retrieve token validity and metadata within the project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\n# Export 'access_token'\ncode_access_token=\"{set to ACCESS TOKEN from output}\"\n\n# Perform token introspection\nory introspect token $code_access_token --project \"$PROJECT_ID\"\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Theme Components in MDX\nDESCRIPTION: This code imports 'DocCardList' from the theme library and utilizes the 'useCurrentSidebarCategory' hook to dynamically display items from the current sidebar category within a MDX documentation page. It showcases how to embed React components in MDX for dynamic content rendering.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/email-sms.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport DocCardList from '@theme/DocCardList';\nimport {useCurrentSidebarCategory} from '@docusaurus/theme-common';\n\n<DocCardList items={useCurrentSidebarCategory().items}/>\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Login Flow Messages Using curl and jq in Shell\nDESCRIPTION: This shell snippet sends an HTTP GET request to the Ory API's self-service login flow endpoint with a specified flow ID, requesting JSON response format. It uses curl with an Accept header for 'application/json' and pipes the output to jq to parse and extract the '.ui.messages' field from the returned JSON. Dependencies include having curl and jq installed and network access to the API endpoint. The input parameter is the flow ID included in the URL query string. The output is an array of message objects detailing authentication errors or status, useful for debugging login attempts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/login/samples/oidc.missing.txt#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -s -H \"Accept: application/json\" \\\n    'https://playground.projects.oryapis.com/self-service/login/flows?id=76cec270-1719-4c9e-b09a-4af8281d511e' \\\n    | jq -r '.ui.messages'\n```\n\n----------------------------------------\n\nTITLE: Performing Logout via cURL (Native)\nDESCRIPTION: Uses cURL to send a DELETE request to the `/self-service/logout/api` endpoint for native applications. Requires sending the session token in the request body to invalidate the session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_64\n\nLANGUAGE: shell\nCODE:\n```\n{logoutCurlApi}\n```\n\n----------------------------------------\n\nTITLE: Example Login API Response for SPA/Native Clients Requiring Verification\nDESCRIPTION: Illustrates a sample JSON response from the Ory login endpoint for SPA/Native clients when the user needs to verify their address post-login. The `continue_with` array contains the `show_verification_ui` action and the associated `flow.id` and `verifiable_address`, allowing the client application to initiate the verification flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"continue_with\": [\n    {\n      \"action\": \"show_verification_ui\",\n      \"flow\": {\n        \"id\": \"d859f6af-1dfe-453e-9320-d572e10edeea\",\n        \"verifiable_address\": \"example@ory.sh\"\n      }\n    }\n    // Other items\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Mapping Raw Claims in Jsonnet\nDESCRIPTION: Demonstrates how to access and map non-standard claims provided by the social sign-in provider, which are nested under the `raw_claims` key within the `claims` object. This example conditionally maps a claim named 'groups'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_5\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      [if \"groups\" in claims.raw_claims then \"groups\" else null]: claims.raw_claims.groups,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Updated Login Flow with Validation via Ory Identities REST API (Shell)\nDESCRIPTION: Retrieves updated flow data (including validation errors) using a curl command after submitting the login form. The 'Accept: application/json' header ensures JSON is returned, allowing the UI to display field-level error messages. The environment variable theFlowID must be set to target the specific flow instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ntheFlowID=...\ncurl -s -i -X GET \\\n    -H \"Accept: application/json\"  \\\n    'https://playground.projects.oryapis.com/self-service/login/flows?id=$theFlowID' | jq\n```\n\n----------------------------------------\n\nTITLE: Defining Fallback Recovery Email in Ory Identity Schema (JSON)\nDESCRIPTION: This JSON snippet illustrates how to configure an Ory Identity schema to include a secondary email field (\"email_secondary\") in the \"traits\" section. Both the primary (\"email\") and secondary fields are marked for recovery and verification, allowing users to use either address for account recovery or verification processes. The schema defines the structure and attributes of user identities within the Ory system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/ory.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"additionalProperties\": false,\n  \"properties\": {\n    \"traits\": {\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"email\": {\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"passkey\": {\n                \"display_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"title\": \"Email address\",\n          \"type\": \"string\",\n          \"maxLength\": 320\n        },\n        \"email_secondary\": {\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"title\": \"Email address secondary\",\n          \"type\": \"string\",\n          \"maxLength\": 320\n        }\n      },\n      \"type\": \"object\"\n    }\n  },\n  \"title\": \"Person\",\n  \"type\": \"object\"\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Return URLs for Flows in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to persist the `return_to` URL across different Ory flows, specifically when transitioning from a login flow to a registration flow. It extracts the `return_to` URL from the login flow and adds it to the registration flow.  It depends on the Ory SDK and assumes a `flow` object containing the login flow's data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nsdk.getLoginFlow({ id: flow }).then(({ data: flow }) => {\n  const returnTo = flow.return_to\n  return sdk.createBrowserRegistrationFlow({\n    id: flow.id,\n    return_to: returnTo,\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Managing Identity Lifecycle with IdentityAPI in Go\nDESCRIPTION: Demonstrates creating, retrieving, and deleting an identity through the Ory Kratos Go SDK's IdentityAPI. It requires kratos-client-go and a running Kratos Admin API. The main parameters include identity traits such as email and name; outputs include the created identity's ID and associated traits. Requests must be authorized by the Admin API; failure will result in errors printed to stderr.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"os\"\n\n\tory \"github.com/ory/kratos-client-go\"\n)\n\nfunc main() {\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4434\", // Kratos Admin API\n\t\t},\n\t}\n\tapiClient := ory.NewAPIClient(configuration)\n\tCreateIdentityBody := *ory.NewCreateIdentityBody(\n\t\t\"default\",\n\t\tmap[string]interface{}{\n\t\t\t\"email\": \"foo@example.com\",\n\t\t\t\"name\": map[string]string{\n\t\t\t\t\"first\": \"foo\",\n\t\t\t\t\"last\":  \"bar\",\n\t\t\t},\n\t\t},\n\t) // CreateIdentityBody |  (optional)\n\n\tcreatedIdentity, r, err := apiClient.IdentityApi.CreateIdentity(context.Background()).CreateIdentityBody(CreateIdentityBody).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error when calling `FrontendApi.CreateIdentity``: %v\\n\", err)\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t}\n\t// response from `CreateIdentity`: Identity\n\tfmt.Fprintf(os.Stdout, \"Created identity with ID: %v\\n\", createdIdentity.Id)\n\tgetIdentity, r, err := apiClient.IdentityApi.GetIdentity(context.Background(), createdIdentity.Id).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error when calling `FrontendApi.GetIdentity``: %v\\n\", err)\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t}\n\tfmt.Fprintf(os.Stdout, \"Email for identity with id %v. Traits %v\\n\", createdIdentity.Id, getIdentity.Traits)\n\n\tr, err = apiClient.IdentityApi.DeleteIdentity(context.Background(), getIdentity.Id).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error when calling `FrontendApi.DeleteIdentity``: %v\\n\", err)\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t}\n\tfmt.Println(\"Successfully Removed identity\")\n\n}\n```\n\n----------------------------------------\n\nTITLE: Passing Parameters and Request Bodies in Ory JavaScript SDK\nDESCRIPTION: This snippet illustrates changes in how arguments are passed to Ory JavaScript/TypeScript SDK functions post version 1. Previously, parameters were positional arguments, but now they are passed as objects with named properties. It also demonstrates that request bodies must be passed using specifically named object properties suffixed with 'Body', a constraint caused by OpenAPI 3.x limitations. Inputs include session tokens, credentials, and flow identifiers, with outputs being the API responses for authentication or registration flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nawait ory.frontend.toSession(undefined, \"ory_session_...=...\")\n```\n\nLANGUAGE: typescript\nCODE:\n```\nory.frontend.toSession({\n  cookie: \"\",\n  // xSessionToken: result.session_token,\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nory.v0alpha2.submitSelfServiceRegistrationFlow(flow.id, {\n  method: \"password\",\n  password: \"some-password\",\n  traits: { email },\n  // csrf_token: ... - needed in browser apps\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nawait ory.frontend\n  .updateRegistrationFlow({\n    flow: flow.id,\n    updateRegistrationFlowBody: {\n      method: \"password\",\n      password: \"some-password\",\n      traits: { \"some@email.com\" },\n    },\n  })\n```\n\n----------------------------------------\n\nTITLE: Expand Subject Set with Keto CLI (Shell)\nDESCRIPTION: This shell command utilizes the Keto CLI to expand the subject set for a given object and relation. It uses the `keto expand` command to retrieve the hierarchy of subjects that have access. The output shows the expansion tree, indicating the relationships between subjects and objects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n# Who is allowed to \"view\" the object \"videos\":\"/cats/2.mp4\"?\nketo expand view videos /cats/1.mp4\n```\n\n----------------------------------------\n\nTITLE: Triggering Session Refresh in Ory via Browser API (Shell)\nDESCRIPTION: This shell snippet demonstrates how to trigger a session refresh for a user by initiating a login flow in the browser with the `refresh` parameter set to `true`. It requires users to interact with the `/self-service/login/browser` endpoint of the Ory API. The main parameter, `refresh=true`, ensures the session's expiry is reset upon successful re-authentication. The input is an HTTP GET request; the output is a refreshed session with a new expiration date.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n${getSdkUrl().url}/self-service/login/browser?refresh=true\n```\n\n----------------------------------------\n\nTITLE: Initializing Registration Flow with cURL for API clients\nDESCRIPTION: Shell script demonstrating how to initialize a registration flow for API clients using cURL. This creates a new registration flow and extracts the action URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\n# Inits a Registration Flow\nactionUrl=$(\\\n  curl -s -X GET -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/registration/api\" \\\n    | jq -r '.ui.action'\\\n)\n```\n\n----------------------------------------\n\nTITLE: Exchanging Session Token Code for Ory Session Token in TypeScript\nDESCRIPTION: Defines a function to call the Ory Network's `exchangeSessionToken` endpoint using the Ory SDK. It requires both parts of the session token exchange code (one from flow initialization, one from the callback URL) to obtain a valid Ory session token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/helpers/form.tsx\n// Fetched content starts at:   const fetchToken = (params: FrontendApiExchangeSessionTokenRequest) =>\n// Fetched content ends at:     newOrySdk(\"\").exchangeSessionToken(params)\nimport { FrontendApi, Configuration, FrontendApiExchangeSessionTokenRequest } from '@ory/client'; // Adjust import as per SDK version\n\n// Initialize Ory SDK (example)\nconst orySdk = new FrontendApi(new Configuration({ basePath: 'YOUR_ORY_PROJECT_URL' }));\n\n// Function to exchange the code for a session token\nconst fetchToken = (params: FrontendApiExchangeSessionTokenRequest): Promise<any> => {\n  // params should include: \n  // - init_code: The first part of the code from flow initialization\n  // - return_to_code: The second part of the code from the callback URL\n  return orySdk.exchangeSessionToken(params);\n};\n```\n\n----------------------------------------\n\nTITLE: Listing Active Sessions - Ory Go SDK\nDESCRIPTION: Shows how to retrieve a list of all currently active sessions for the authenticated user using the Ory Go SDK's 'listMySessions' endpoint. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_16\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Using curl to Retrieve a Stub Error from Ory Kratos API (Shell)\nDESCRIPTION: This shell snippet demonstrates how to fetch a stub 500 Internal Server Error from Ory Kratos' self-service errors API endpoint using curl. It includes a command to silently request the stub error by ID and pipe the JSON response through 'jq' for pretty-printing. The stub error contains a UUID, HTTP error code, status, reason, a user-facing message, and timestamps for creation and update. This example requires 'curl' and 'jq' installed on the client system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-facing-errors.md#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ncurl -s \\\n  'https://playground.projects.oryapis.com/self-service/errors?id=stub:500' | jq\n\n{\n  \"id\": \"9f900efa-a5ea-4dfd-8311-a8c7448ffeec\",\n  \"error\": {\n    \"code\": 500,\n    \"status\": \"Internal Server Error\",\n    \"reason\": \"This is a stub error.\",\n    \"message\": \"An internal server error occurred, please contact the system administrator\"\n  },\n  \"created_at\": \"0001-01-01T00:00:00Z\",\n  \"updated_at\": \"0001-01-01T00:00:00Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Verification Flow with cURL and jq\nDESCRIPTION: This shell script uses cURL to make a GET request to a verification flow endpoint and pipes the output to jq for JSON processing. The cURL command includes headers to specify the content type and suppresses progress meter. The jq command parses the returned JSON.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.invalid-challenge.txt#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nrl -H \"Accept: application/json\" -s \\\n    'http://127.0.0.1:4433/self-service/verification/flows?id=9040cdea-3674-4c3e-8b2d-b35b268c696e' | \\\n      jq\n```\n\n----------------------------------------\n\nTITLE: Setting Configuration via Environment Variables (Windows CMD)\nDESCRIPTION: This snippet demonstrates how to set configuration values using environment variables in Windows Command Prompt (CMD). Subkeys are separated with underscores `_`, and array indices are used to reference array items.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\n# Windows CMD\nset SOME_NESTED_KEY_WITH_A_VALUE=foo\nset SOME_NESTED_KEY_AND_ARRAY_0_ID=foo\nset SOME_NESTED_KEY_AND_ARRAY_1_ID=bar\n```\n\n----------------------------------------\n\nTITLE: Configuring API Key Authentication for HTTP Email (YAML)\nDESCRIPTION: YAML configuration example for securing the HTTP email delivery request using an API key. It sets the `auth` type to `api_key` and specifies the key's name (`name`), value (`value`), and location (`in`: header or cookie). All properties shown under `config` are mandatory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/03_mail-courier-http.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  delivery_strategy: http\n  http:\n    request_config:\n      # ... other config\n      auth:\n        type: api_key\n        config:\n          name: key-name\n          value: key-value\n          in: header # or cookie\n```\n\n----------------------------------------\n\nTITLE: Setting Default Values for Claims in Jsonnet - Jsonnet\nDESCRIPTION: Merges default property values into the external 'claims' variable using Jsonnet object addition. Ensures traits like 'website' have defaults if not present in the input. Input: external claims from std.extVar. Output: updated claims with fallbacks. Useful for providing robust fallback behavior in Jsonnet mappings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_5\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = {\n website: 'I am the default website value'\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      website: claims.website\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Go SDK Client (Administrative)\nDESCRIPTION: Initializes the Ory Go SDK client for performing administrative session management tasks. Requires an Ory API Key for authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_9\n\nLANGUAGE: go\nCODE:\n```\nimport goInitClient from '!!raw-loader!../../../code-examples/sdk/go/session/init.go'\n\n<CodeBlock language=\"go\" title=\"Initializing the Go SDK client\">{goInitClient}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Available Options for keto relation-tuple delete-all Command in Bash\nDESCRIPTION: List of all available command-line options that can be used with the 'keto relation-tuple delete-all' command including filtering, connection, and output format options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete-all.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --authority string                      Set the authority header for the remote gRPC server.\n      --block                                 Block until the connection is up.\n      --force                                 Force the deletion of relationships\n      --format string                         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                                  help for delete-all\n      --insecure-disable-transport-security   Disables transport security. Do not use this in production.\n      --insecure-skip-hostname-verification   Disables hostname verification. Do not use this in production.\n      --namespace string                      Set the requested namespace\n      --object string                         Set the requested object\n  -q, --quiet                                 Be quiet with output printing.\n      --read-remote string                    Remote address of the read API endpoint. (default \"127.0.0.1:4466\")\n      --relation string                       Set the requested relation\n      --subject-id string                     Set the requested subject ID\n      --subject-set string                    Set the requested subject set; format: \"namespace:object#relation\"\n      --write-remote string                   Remote address of the write API endpoint. (default \"127.0.0.1:4467\")\n```\n\n----------------------------------------\n\nTITLE: Running the `ory create relation-tuples` Command (Shell)\nDESCRIPTION: Basic syntax for executing the `ory create relation-tuples` command. This command creates Ory Keto relation tuples by processing JSON files found in a specified directory or read from standard input (`-`). Flags can be appended to modify behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-relation-tuples.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory create relation-tuples [flags]\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI import commands syntax - Shell\nDESCRIPTION: Import commands such as `ory import identities` or `jwk` now require specifying the project and workspace using flags (`--project`, `--workspace`) or environment variables (`ORY_PROJECT`, `ORY_WORKSPACE`) in v1, replacing the v0 positional argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\n- ory import identities|jwk|oauth2-client <project>\n+ ory import identities|jwk|oauth2-client --project <project>\n+ ory import identities|jwk|oauth2-client --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory import identities|jwk|oauth2-client\n```\n\n----------------------------------------\n\nTITLE: Configuring Required Authenticator Assurance Level (YAML)\nDESCRIPTION: This YAML snippet illustrates the structure and settings in the Ory identity configuration file used to control flows requiring multi-factor authentication. The main parameters are selfservice.flows.settings.required_aal and session.whoami.required_aal, which set the required Authenticator Assurance Level (AAL) for user settings and session information endpoints. Acceptable values are 'aal1' for Lax (single-factor) and 'highest_available' for Strict (enforcing strongest available MFA). Ensure correct YAML indentation and placement within the larger configuration file. Improper settings may impact authentication security.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/05_step-up-authentication.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nselfservice:\n  flows:\n    settings:\n      required_aal: highest_available\n# ...\nsession:\n  whoami:\n    required_aal: highest_available\n# ...\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration (Shell)\nDESCRIPTION: Provides the shell command using the `ory` CLI to upload a modified `identity-config.yaml` file back to the specified Ory project and workspace. This command applies the changes made to the configuration, including the newly added Lark social sign-in provider settings. Requires the `ory` CLI and the path to the updated configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/81_lark.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Retrieving Login Flow with React\nDESCRIPTION: Shows how to retrieve and render an existing login flow in a React application using the Ory client SDK and integration helpers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport getReactLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/get-login-react.tsx'\n\n<CodeBlock language=\"ts\" title=\"login.tsx\">{getReactLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Configuring Refresh Token Lifespan using Ory CLI\nDESCRIPTION: Provides a Bash command using the Ory CLI to update the OAuth2 client configuration for a specific project and workspace, specifically modifying the refresh token time-to-live (TTL). This example sets the TTL to 900 hours. Requires valid project and workspace IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/refresh-token-grant.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/refresh_token=\\\"900h\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Example OAuth 2.0 Client Import\nDESCRIPTION: Complete example showing how to create a JSON file with client configurations and import it using the hydra command. Also demonstrates piping JSON content directly to the command and using encryption flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-oauth2-client.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nImport an example OAuth2 Client:\n\tcat > ./file.json <<EOF\n\t[\n      {\n\t    \"grant_types\": [\"implicit\"],\n\t    \"scope\": \"openid\"\n\t  },\n      {\n\t    \"grant_types\": [\"authorize_code\"],\n\t    \"scope\": \"openid\"\n\t  }\n    ]\n\tEOF\n\n\thydra import oauth2-client file.json\n\nAlternatively:\n\n\tcat file.json | hydra import oauth2-client\n\nTo encrypt an auto-generated OAuth2 Client Secret, use flags `--pgp-key`, `--pgp-key-url` or `--keybase` flag, for example:\n\n  hydra import oauth2-client --name \"my app\" --grant-type client_credentials --response-type token --scope core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: Enabling Feature Flag for Native Recovery in Ory Config (YAML)\nDESCRIPTION: This YAML snippet shows the necessary configuration to enable the \"use_continue_with_transitions\" feature flag within the Ory Identity configuration file. This flag is required to modify the behavior of native recovery flows, specifically enabling support for the \"code\" method when interacting with the Ory API from client applications. This snippet should be added to the \"identity-config.yaml\" file obtained via the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nfeature_flags:\n  use_continue_with_transitions: true\n```\n\n----------------------------------------\n\nTITLE: Using kratos identities delete command\nDESCRIPTION: Basic usage of the kratos identities delete command to delete one or more identities by their IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-delete.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities delete <id-0 [id-1 ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth 2.0 Client in Hydra\nDESCRIPTION: This snippet demonstrates the basic command structure for creating an OAuth 2.0 client. It leverages the `hydra create client` command, which is designed to register a new client with the Hydra service. This command takes a variety of flags to configure the client's behavior, such as the client name (`-n`), redirect URI (`-c`), grant types (`-g`), and scopes (`-a`). The output of the command is often piped into other tools, like `jq`, for further processing.  Dependencies include the Hydra CLI and a configured Hydra instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-client.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nhydra create client [flags]\n```\n\n----------------------------------------\n\nTITLE: Handling Logout Flow via cURL (Browser)\nDESCRIPTION: Illustrates the two-step browser logout flow using cURL. First, a GET request to `/self-service/logout/browser` initializes the flow and returns a logout URL (and sets cookies). Second, a GET request to the `/self-service/logout` endpoint (using the obtained logout token and cookies) completes the logout. Includes managing cookies with -c/-b flags. Displays the initialization command, an example JSON response, and the submission command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_63\n\nLANGUAGE: shell\nCODE:\n```\n{createLogoutCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(createLogoutCurlBrowserJson, null, 2)}\n```\n\nLANGUAGE: shell\nCODE:\n```\n{submitLogoutCurlBrowser}\n```\n\n----------------------------------------\n\nTITLE: Importing Configuration to Ory Network with Ory CLI - Shell\nDESCRIPTION: This snippet demonstrates how to import a configuration file into an Ory Network project using the Ory CLI. The command references a configuration YAML file and updates the target project's identity configuration. Required arguments include <project-id>, <workspace-id>, and --file path to the config file. Prerequisite: Ensure the configuration file is valid and the user is authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/15_config-identity-service.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file config.yaml\n```\n\n----------------------------------------\n\nTITLE: Enabling the Post-Registration Session Hook via Ory CLI\nDESCRIPTION: Demonstrates the Ory CLI command (`ory patch identity-config`) to add the 'session' hook to the post-registration actions (`/selfservice/flows/registration/after/hooks`). This command modifies the Ory identity configuration for the specified project and workspace to enable automatic sign-in after registration. Requires valid `<project-id>` and `<workspace-id>`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/session.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add '/selfservice/flows/registration/after/hooks/0/hook=\"session\"'\n```\n\n----------------------------------------\n\nTITLE: Access Rule Example - Comprehensive JSON Format\nDESCRIPTION: This code defines a comprehensive JSON example of an access rule. It showcases how various components of an access rule are configured, including the `id`, `version`, `upstream`, `match`, `authenticators`, `authorizer`, `mutators`, and `errors` fields. This format provides a complete illustration of how to set up an access control rule using JSON format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"version\": \"v0.36.0-beta.4\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\",\n    \"preserve_host\": true,\n    \"strip_path\": \"/api/v1\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route/<.*>\",\n    \"methods\": [\"GET\", \"POST\"]\n  },\n  \"authenticators\": [{ \"handler\": \"noop\" }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }],\n  \"errors\": [{ \"handler\": \"json\" }]\n}\n```\n\n----------------------------------------\n\nTITLE: Login Flow JSON Response with Validation Errors (JSON5)\nDESCRIPTION: Demonstrates the JSON5 response after a login form submission with invalid data, containing field-level 'messages' arrays providing error feedback for each affected input. Fields like 'identifier' and 'password' show error messages if constraints (such as minimum length) are not met. This structure enables frontend applications to display validation errors to the user inline.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_6\n\nLANGUAGE: json5\nCODE:\n```\n{\n  id: \"36c3246f-8e40-4f45-8721-c246576a8bc3\",\n  type: \"browser\",\n  expires_at: \"2021-04-28T09:00:57.10254633Z\",\n  issued_at: \"2021-04-28T08:50:57.10254633Z\",\n  request_url: \"https://playground.projects.oryapis.com/self-service/login/browser\",\n  ui: {\n    action: \"https://playground.projects.oryapis.com/self-service/login?flow=36c3246f-8e40-4f45-8721-c246576a8bc3\",\n    method: \"POST\",\n    nodes: [\n      // ...\n      {\n        type: \"input\",\n        group: \"password\",\n        attributes: {\n          name: \"identifier\",\n          type: \"text\",\n          value: \"\",\n          required: true,\n          disabled: false,\n        },\n        messages: [\n          {\n            id: 4000001,\n            text: \"length must be >= 1, but got 0\",\n            type: \"error\",\n          },\n        ],\n        meta: {\n          label: {\n            id: 1070004,\n            text: \"ID\",\n            type: \"info\",\n          },\n        },\n      },\n      {\n        type: \"input\",\n        group: \"password\",\n        attributes: {\n          name: \"password\",\n          type: \"password\",\n          required: true,\n          disabled: false,\n        },\n        messages: [\n          {\n            id: 4000001,\n            text: \"length must be >= 1, but got 0\",\n            type: \"error\",\n          },\n        ],\n        meta: {\n          label: {\n            id: 1070001,\n            text: \"Password\",\n            type: \"info\",\n          },\n        },\n      },\n      // ...\n    ],\n  },\n  forced: false,\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Identities using Ory CLI - Shell\nDESCRIPTION: This snippet demonstrates how to use the Ory CLI to list identities with pagination and eventual consistency. The command requires the Ory CLI pre-installed and configured. Key parameters include '--page-size' to limit results per page and '--consistency' to specify read guarantees. The returned output is a list of identities formatted per the chosen output flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-identities.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory list identities --page-size 100 --consistency eventual\n```\n\n----------------------------------------\n\nTITLE: Configuring Yandex Provider in Ory Identity Config (YAML)\nDESCRIPTION: Provides a YAML snippet illustrating how to add the Yandex OIDC provider configuration within the `selfservice.methods.oidc.config.providers` section of the Ory identity configuration file (`identity-config.yaml`). Requires replacing placeholders for `client_id`, `client_secret`, and providing the `mapper_url` either as a Base64 encoded string or a URL pointing to the Jsonnet mapping script.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: yandex # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: yandex\n            client_id: .... # Replace this with the OAuth2 Client ID provided by Yandex app\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by Yandex app\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration - Shell\nDESCRIPTION: This shell command uploads the modified Ory identity configuration (in YAML format) to the Ory Network. It requires you to supply project and workspace IDs, as well as the YAML configuration file path. The Ory CLI tool must be used in an environment with sufficient privileges.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Access Token Audience Introspection Example in TypeScript React (TSX)\nDESCRIPTION: This snippet references code that demonstrates how to introspect an OAuth 2.0 access token to retrieve and inspect its audience claims. The example is implemented in TypeScript React (TSX) and is likely dependent on the Ory SDK for token introspection. It provides developers with a practical way to verify token audiences at runtime.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/audiences.mdx#_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport audExample from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/token-introspect-audience.ts'\n\n<CodeBlock language=\"tsx\">{audExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Defining Access Control Rules for Ory Oathkeeper Reverse Proxy Using JSON\nDESCRIPTION: This JSON snippet defines an access control rule for Ory Oathkeeper's reverse proxy functionality. It specifies the upstream backend URL, matching criteria including URL and HTTP methods, authenticators, authorizer, and mutators to control request processing. The rule uses an anonymous authenticator, allows the request unconditionally, and applies no mutation. Inputs include the matched request URL pattern and allowed methods, while outputs affect forwarding behavior and authorization decisions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/index.md#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://oathkeeper-proxy:4455/my-service/whatever\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Social Sign-In Form with Native POST in React/JSX\nDESCRIPTION: This JSX snippet shows how to handle social sign-in with a native form POST when using single-page applications with Ory.  It separates the flow data across two forms: one for social providers (Google, Facebook) and another for other methods like password. It depends on having `flow.action` and `flow.method` available from the login flow data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n{/*This form will do a native post request to Ory for the selected provider*/}\n<form action={flow.action} method={flow.method}>\n    <button type=\"submit\" value=\"google\">Sign in with Google</button>\n    <button type=\"submit\" value=\"facebook\">Sign in with Facebook</button>\n</form>\n\n<form action={flow.action} method={flow.method} onSubmit={submitHandler}>\n    {/*Map the other flow groups here such as `default` and `password`*/}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Example: Create OAuth2 Client for Auth Code Flow\nDESCRIPTION: This example demonstrates how to create an OAuth 2.0 client configured for the Authorization Code grant flow. It specifies the client name, allowed redirect URIs, grant and response types, and allowed scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-oauth2-client.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhydra create oauth2-client --name \"my app\" --redirect-uri http://localhost/cb --grant-type authorization_code --response-type code --scope core,foobar\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client Using Ory CLI with JWT Bearer Authentication (Bash)\nDESCRIPTION: This CLI command creates an OAuth2 client capable of authenticating at the token endpoint via the private_key_jwt method, using a JSON Web Token signed by the client's cryptographic key. It specifies the client_credentials grant type and includes a JWKS URI pointing to the client's public key set. The client can then authenticate by presenting a signed JWT rather than a client secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Client Credentials Demo\" \\\n  --grant-type client_credentials \\\n  --token-endpoint-auth-method private_key_jwt \\\n  --jwks-uri https://example.org/path/to/clients/public_key_set.jwks\n```\n\n----------------------------------------\n\nTITLE: Allowing Multiple Emails for Login in Ory Kratos Identity Schema (JSON)\nDESCRIPTION: This JSON Schema snippet enables user identities in Ory Kratos to possess an array of email addresses, allowing login using any listed email. Each entry is validated as an email string and supports distinct credential flows, verification, and recovery for each email. Requires Ory Kratos with draft-07 JSON Schema support. Input consists of an 'emails' array under 'traits', each string formatted as an email.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_23\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/registration.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"emails\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"string\",\n            \"format\": \"email\",\n            \"ory.sh/kratos\": {\n              \"credentials\": {\n                \"password\": {\n                  \"identifier\": true\n                },\n                \"webauthn\": {\n                  \"identifier\": true\n                },\n                \"totp\": {\n                  \"account_name\": true\n                },\n                \"code\": {\n                  \"identifier\": true,\n                  \"via\": \"email\"\n                },\n                \"passkey\": {\n                  \"display_name\": true\n                }\n              },\n              \"recovery\": {\n                \"via\": \"email\"\n              },\n              \"verification\": {\n                \"via\": \"email\"\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Session Extension Threshold in Ory Identities (YAML)\nDESCRIPTION: This YAML snippet provides an example configuration for session policies in Ory Identities. It highlights setting the `earliest_possible_extend` propertywhich controls how soon before expiry a session can be refreshedalong with standard session cookie and lifespan settings. Input is an application config file; output is new session management policy once applied. Constraints relate to chosen time notation (e.g., 1h1m10s) and must match Ory config syntax.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/20_refresh-extend-session.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  cookie:\n    domain: $PROJECT_SLUG.projects.oryapis.com\n    name: ory_session_{name}\n    path: /\n    persistent: false\n    same_site: Lax\n  lifespan: 720h0m0s\n  earliest_possible_extend: 24h0m0s\n```\n\n----------------------------------------\n\nTITLE: React Navigation with Authentication State\nDESCRIPTION: Component that manages app navigation based on user authentication state, showing either protected routes like Dashboard or login/signup screens depending on session validity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport default\n// Navigation component that switches based on user session status\n```\n\n----------------------------------------\n\nTITLE: Mapping SAML Claims to Ory Identity Schema Using Jsonnet\nDESCRIPTION: This Jsonnet snippet provides an example of how to map incoming SAML attributes to the Ory identity schema traits. It first imports the 'claims' variable as an external input, representing the claims extracted from a SAML assertion. The code maps the primary email attribute directly and conditionally includes the 'firstName' and 'lastName' attributes if they exist within the raw claims. This approach ensures dynamic handling of optional attributes and enforces correct trait assignment for downstream identity management. Prerequisites include defining the appropriate identity schema and receiving claims objects with nested raw_claims fields from the SAML Identity Provider.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_13\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      email: claims.email,\n      [if std.objectHas(claims, \"raw_claims\") && std.objectHas(claims.raw_claims, \"firstName\") then \"firstName\" else null]: claims.raw_claims.firstName,\n      [if std.objectHas(claims, \"raw_claims\") && std.objectHas(claims.raw_claims, \"lastName\") then \"lastName\" else null]: claims.raw_claims.lastName,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Applying OAuth2 Client Credentials Authenticator to Access Rule (ORY Oathkeeper) - YAML\nDESCRIPTION: This YAML snippet illustrates how to apply and configure the `oauth2_client_credentials` authenticator within a specific Oathkeeper Access Rule definition file. It specifies the `handler` as `oauth2_client_credentials` and provides the essential configuration, namely the `token_url` for the OAuth 2.0 Token Endpoint used for validation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_19\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: oauth2_client_credentials\n    config:\n      token_url: https://my-website.com/oauth2/token\n```\n\n----------------------------------------\n\nTITLE: Configuring Remote JSON Authorizer in YAML (Access Rule)\nDESCRIPTION: Example of configuring the remote_json authorizer within an access rule YAML file. Demonstrates setting remote URL, custom headers, and templated JSON payload.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthorizers:\n  - handler: remote_json\n    config:\n      remote: http://my-remote-authorizer/authorize\n      headers:\n        Y-Api-Key: '{{ .MatchContext.Header.Get \"X-Api-Key\" }}'\n      payload: |\n        {\n          \"subject\": \"{{ print .Subject }}\",\n          \"resource\": \"{{ printIndex .MatchContext.RegexpCaptureGroups 0 }}\"\n        }\n```\n\n----------------------------------------\n\nTITLE: Checking Current Session with Ory SDK in TypeScript (Token-based)\nDESCRIPTION: This TypeScript SDK snippet demonstrates retrieving the current Ory session in a native environment using a session token. The session token is sent as an Authorization: Bearer header to the /sessions/whoami endpoint. Depends on the Ory TypeScript SDK and assumes an environment where cookies are not available (e.g., mobile or desktop apps). Input is a session token; output is the session object or corresponding error.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// Code example loaded from @site/code-examples/sdk/typescript/src/selfservice/session/whoami-native.ts\n// This code would use Ory SDK's functions with a provided session token to fetch the session data.\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Session Invalidation Hook After Recovery via Ory CLI\nDESCRIPTION: This sequence configures an `after_recovery` hook to revoke all other active sessions for a user upon successful account recovery. It retrieves the identity configuration using the Ory CLI, adds the `revoke_active_sessions` hook under `selfservice.flows.recovery.after.hooks` in the YAML configuration, and updates the project's settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\nLANGUAGE: diff\nCODE:\n```\nselfservice:\n  flows:\n    recovery:\n      enabled: true\n      ui_url: http://your.ui/recovery\n+      after:\n+        hooks:\n+        - hook: revoke_active_sessions\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Configuring Authorization Code Expiration via Ory CLI\nDESCRIPTION: This shell script snippet shows how to configure the expiration time for authorization codes using the Ory CLI. The `ory patch oauth2-config` command updates the time to live for `authorization_code`. The provided example sets the expiration time to five minutes.  The `--project` and `--workspace` flags are necessary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/authorization_code=\\\"5m\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Error Matching in Global Configuration (YAML)\nDESCRIPTION: This YAML snippet shows an example of defining error matching conditions in the global Ory Oathkeeper configuration.  The `when` section specifies that the `redirect` handler should be applied when the error type is `unauthorized`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n# .oathkeeper.yaml\nerrors:\n  handlers:\n    redirect:\n      enabled: true\n      config:\n        when:\n          - error:\n              - unauthorized\n              - ...\n              - ...\n```\n\n----------------------------------------\n\nTITLE: Configuring ID Token Mutator in YAML\nDESCRIPTION: This YAML snippet configures the `id_token` mutator within the `oathkeeper.yml` file. It enables the mutator and specifies configuration parameters such as `issuer_url`, `jwks_url`, `ttl`, `claims`, and the cache settings. The `id_token` mutator is used to transform authentication information into a signed JSON Web Token (JWT), specifically an OpenID Connect ID Token. It requires a valid JWKS endpoint for key retrieval, and the claims can be customized using Go templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nmutators:\n  id_token:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n    config:\n      issuer_url: https://my-oathkeeper/\n      jwks_url: https://fetch-keys/from/this/location.json\n      # jwks_url: file:///from/this/absolute/location.json\n      # jwks_url: file://../from/this/relative/location.json\n      ttl: 60s\n      claims: '{\"aud\": [\"https://my-backend-service/some/endpoint\"],\"def\": \"{{ print .Extra.some.arbitrary.data }}\"}'\n      cache:\n        max_cost: 10000\n```\n\n----------------------------------------\n\nTITLE: Checking Health Endpoints\nDESCRIPTION: These commands use `curl` to check the health of the running Ory Oathkeeper instance. They make requests to the `/health/alive` and `/health/ready` endpoints to verify the service's status.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncurl http://127.0.0.1:4456/health/alive\n{\"status\":\"ok\"}\n\ncurl http://127.0.0.1:4456/health/ready\n{\"status\":\"ok\"}\n```\n\n----------------------------------------\n\nTITLE: Retrieving public keys of a JWK Set in Hydra CLI\nDESCRIPTION: This command retrieves the public keys of a specific JSON Web Key Set using the `--public` flag. Replace `<set-id>` with the actual ID of the JWK set. This command leverages the Hydra CLI to filter the JWK set and only return the public keys. Requires the Hydra CLI. Input is the JWK set ID, output is the public keys of the set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwk.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nhydra get jwk --public <set-id>'\n```\n\n----------------------------------------\n\nTITLE: Configuring GitLab OmniAuth for Ory Hydra (Ruby)\nDESCRIPTION: This Ruby configuration snippet for `gitlab.rb` enables and configures GitLab's OmniAuth feature to use Ory Hydra as a generic OAuth 2.0 provider. It sets essential parameters like enabling OmniAuth (`omniauth_enabled`), allowing automatic user creation (`omniauth_block_auto_created_users`), specifying Ory Hydra as the SSO provider (`omniauth_allow_single_sign_on`), and defining provider details within `omniauth_providers`. This includes the client ID/secret, Ory Hydra endpoint URLs (`site`, `authorize_url`, `token_url`, `user_info_url`), user attribute mapping (`user_response_structure` mapping 'sub' to 'email'), and requested OAuth scope (`authorize_params`). Correct endpoint resolution (browser vs. server) and `token_endpoint_auth_method` ('client_secret_post') are crucial.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_6\n\nLANGUAGE: ruby\nCODE:\n```\ngitlab_rails['omniauth_enabled'] = true\ngitlab_rails['omniauth_block_auto_created_users'] = false\ngitlab_rails['omniauth_allow_single_sign_on'] = ['Ory_Hydra']\ngitlab_rails['omniauth_providers'] = [\n  {\n    'name' => 'oauth2_generic',\n    'app_id' => '<THE-CLIENT-ID-GOES-HERE>',\n    'app_secret' => '<THE-CLIENT-SECRET-GOES-HERE>',\n    'args' => {\n      client_options: {\n        'site' => 'http://127.0.0.1:4444', # including port if necessary\n        'user_info_url' => 'http://hydra:4444/userinfo',\n        'authorize_url' => 'http://127.0.0.1:4444/oauth2/auth',\n        'token_url' => 'http://hydra:4444/oauth2/token'\n      },\n      user_response_structure: {\n        root_path: [],\n        id_path: 'sub',\n        attributes: {\n                email: 'sub'\n        }\n      },\n      authorize_params: {\n        scope: 'email'\n      },\n      # optionally, you can add the following two lines to \"white label\" the display name\n      # of this strategy (appears in urls and Gitlab login buttons)\n      # If you do this, you must also replace oauth2_generic, everywhere it appears above, with the new name.\n      name: 'Ory_Hydra', # display name for this strategy\n      #strategy_class: \"OmniAuth::Strategies::OAuth2Generic\" # Devise-specific config option Gitlab uses to find renamed strategy\n    }\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Configuring Sendgrid Email Delivery in Ory Courier (YAML)\nDESCRIPTION: This YAML snippet configures Ory's Courier service to send emails via the Sendgrid API over HTTP. The configuration specifies the endpoint URL, request method, path to a Jsonnet email template, necessary headers, and API key authentication information. The 'courier.delivery_strategy' is set to 'http', and the 'auth' field is populated with the Sendgrid Bearer API key, which should be replaced with a valid value. File dependencies include a Jsonnet template referenced by 'body', and the correct file path and permissions are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_11\n\nLANGUAGE: YAML\nCODE:\n```\ncourier:\n  delivery_strategy: http\n  http:\n    request_config:\n      url: https://api.sendgrid.com/v3/mail/send\n      method: POST\n      body: file:///etc/config/kratos/mail.template.jsonnet\n      headers:\n        \"Content-Type\": \"application/json\"\n      auth:\n        type: api_key\n        config:\n          name: Authorization\n          value: Bearer <API_KEY>\n          in: header\n```\n\n----------------------------------------\n\nTITLE: Synopsis of `kratos list identities` Command\nDESCRIPTION: Basic command structure for listing identities using the Kratos CLI. Optional flags can be appended to modify the command's behavior, such as pagination or consistency settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-list-identities.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos list identities [flags]\n```\n\n----------------------------------------\n\nTITLE: Help Command - Command Line Flag\nDESCRIPTION: This command line flag provides help for the specified command. The `-h, --help` flag displays the available options and usage instructions for the `hydra serve all` command, offering a means to understand the command's functionality and configuration options.  It takes no input and produces a text-based output in the terminal.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-all.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n  -h, --help   help for all\n```\n\n----------------------------------------\n\nTITLE: Retrieving Verification Flow using TypeScript SDK (Native)\nDESCRIPTION: Demonstrates how to use the Ory Kratos TypeScript SDK to retrieve an existing verification flow by its ID within a Node.js or native TypeScript application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_56\n\nLANGUAGE: ts\nCODE:\n```\n{getTsVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Submitting Ory Recovery Flow using React SDK (TypeScript)\nDESCRIPTION: Illustrates submitting data (like email or code) to an Ory recovery flow within a React frontend application using the Ory TypeScript SDK. Requires handling the flow state and form submission.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_46\n\nLANGUAGE: tsx\nCODE:\n```\n{submitReactRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Identity Schema Extensions Example\nDESCRIPTION: This code provides an example of identity schema extensions, particularly using `ory.sh/kratos` to configure various authentication and verification methods. It includes examples for email, password, WebAuthn, TOTP, and SMS code based authentication.  The `ory.sh/kratos` property is added to different traits of the schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_5\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.email.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"maxLength\": 320\n        },\n        \"phone\": {\n          \"type\": \"string\",\n          \"format\": \"tel\",\n          \"title\": \"Phone number\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"sms\"\n              }\n            },\n            \"recovery\": {\n              \"via\": \"sms\"\n            },\n            \"verification\": {\n              \"via\": \"sms\"\n            }\n          },\n          \"maxLength\": 320\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Certificate-Based Authentication for SMTP in Ory Kratos YAML\nDESCRIPTION: This YAML snippet configures the client TLS certificate and private key file paths for SMTP connections requiring certificate-based authentication. Both 'client_cert_path' and 'client_key_path' must point to PEM encoded files to enable secure authenticated connections between the mail courier and the SMTP server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/01_mail-courier-selfhosted.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# kratos -c path/to/my/kratos/config.yml serve\ncourier:\n  smtp:\n    client_cert_path: /somepath/client.cert\n    client_key_path: /somepath/client.key\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory API Login Flow with Token Exchange Code in TypeScript\nDESCRIPTION: This React Native snippet demonstrates initializing an Ory login/registration flow of type 'api' using the Ory SDK. It sets `return_to` to the app's deep link URL and `return_session_token_exchange_code` to `true` to receive the first part of the exchange code for session token retrieval after social sign-in. The resulting flow object is stored in the component's state.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/components/Routes/Login.tsx\n// Fetched content starts at:   const initializeFlow = () =>\n// Fetched content ends at:       .then(({ data: f }) => setFlow(f))\n\n// This function initializes the Ory Kratos login/registration flow\n// for API usage within a React Native application.\nconst initializeFlow = () => {\n  // Example implementation using Ory SDK\n  orySdk.createBrowserLoginFlow({\n    refresh: true, // Or based on requirements\n    aal: 'aal1', // Or based on requirements\n    returnSessionTokenExchangeCode: true,\n    returnTo: 'YOUR_APP_DEEP_LINK_URL' // Replace with actual deep link\n  })\n    .then(({ data: f }) => setFlow(f))\n    .catch((error) => {\n      // Handle error, e.g., redirect to error screen or show message\n      console.error('Error initializing flow:', error);\n    });\n};\n```\n\n----------------------------------------\n\nTITLE: Oathkeeper Access Rule Example Using Hydrator and Cookie Mutators (JSON)\nDESCRIPTION: A JSON-formatted Oathkeeper access rule combining hydrator and cookie mutators. The hydrator retrieves extra data from a remote API and injects it into the session, which is then used by the cookie mutator to inject a dynamic cookie. Requires a backend API returning proper authentication session structure compatible with Oathkeeper and Go templating to extract the result.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/<.*>\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"hydrator\",\n      \"config\": {\n        \"api\": {\n          \"url\": \"http://my-backend-api\"\n        }\n      }\n    },\n    {\n      \"handler\": \"cookie\",\n      \"config\": {\n        \"cookies\": {\n          \"some-arbitrary-data\": \"{{ print .Extra.cookie }}\"\n        }\n      }\n    }\n  ]\n}\n\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Oathkeeper gRPC Middleware in Go\nDESCRIPTION: This snippet demonstrates how to initialize Ory Oathkeeper middleware in a Go application and integrate it with a gRPC server using unary and stream interceptors. It requires the github.com/ory/oathkeeper/middleware package and google.golang.org/grpc. The context parameter 'ctx' and a config file path are provided during middleware creation. The unary and stream interceptors handle incoming gRPC calls according to Oathkeeper policies. Upon successful initialization, the middleware can be registered as interceptors when creating the gRPC server instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/grpc-middleware.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nimport (\n\t\"github.com/ory/oathkeeper/middleware\"\n\t\"google.golang.org/grpc\"\n)\n\nfunc setup() {\n\toathkeeperMW, err := middleware.New(ctx, middleware.WithConfigFile(\"path/to/config\"))\n\tif err != nil {\n\t\treturn nil, nil, fmt.Errorf(\"failed to create oathkeeper middleware: %w\", err)\n\t}\n\n \ts := grpc.NewServer(\n\t\tgrpc.UnaryInterceptor(mw.UnaryInterceptor()),\n\t\tgrpc.StreamInterceptor(mw.StreamInterceptor()),\n\t)\n\n  // register your service to s, start the server, ...\n}\n```\n\n----------------------------------------\n\nTITLE: Inspecting OAuth2 client redirect URIs with ORY CLI - shell\nDESCRIPTION: This snippet is a shell command to check the whitelisted redirect URIs for an OAuth2 client using the ORY CLI. The command outputs the client JSON configuration, allowing developers to verify if their intended redirect URI is properly whitelisted. Ensuring exact URI matches, including query parameters, is crucial to avoid authorization failures.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory get oauth2-client {client.id}\n\n{\n  // ...\n  \"redirect_uris\": [\n    \"http://127.0.0.1:5556/callback\"\n  ],\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Correct webhook response\nDESCRIPTION: This is an example of a correct webhook response, that retains the original `email` trait and adds a new `another_value` trait. In order to prevent data loss, any existing traits should be included in the response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"joe@example.org\",\n      \"another_value\": \"example\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Define edit, delete, share permissions in OPL TypeScript\nDESCRIPTION: Defines 'edit', 'delete', and 'share' permissions for a Document and 'delete', and 'share' for a Folder in OPL using TypeScript. It checks if the user is an editor or owner of the document, or if they have the respective access to a parent folder. Requires @ory/keto-namespace-types for type definitions. The input is a Context object containing the subject (user). The output is a boolean indicating whether the user has the specific access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\nclass User implements Namespace {}\n\nclass Document implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n\n  permits = {\n      view: (ctx: Context): boolean =>\n        this.related.viewers.includes(ctx.subject) ||\n        this.related.editors.includes(ctx.subject) ||\n        this.related.owners.includes(ctx.subject) ||\n        this.related.parents.traverse((parent) => parent.permits.view(ctx)),\n      edit: (ctx: Context): boolean =>\n        this.related.editors.includes(ctx.subject) ||\n        this.related.owners.includes(ctx.subject) ||\n        this.related.parents.traverse((parent) => parent.permits.edit(ctx)),\n      delete: (ctx: Context): boolean =>\n        this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.delete(ctx)),\n      share: (ctx: Context): boolean =>\n        this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.share(ctx)),\n  }\n}\n\nclass Folder implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n\n    permits = {\n      delete: (ctx: Context): boolean =>\n        this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.delete(ctx)),\n      share: (ctx: Context): boolean =>\n        this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.share(ctx)),\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Including Human Readable Messages Component - MDX\nDESCRIPTION: This snippet demonstrates how an MDX component named `HumanReadableMessages` is imported from `./ui-messages.md` and then rendered. This pattern is used to embed the actual human-readable message content within this documentation section.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_22\n\nLANGUAGE: MDX\nCODE:\n```\nimport HumanReadableMessages from './ui-messages.md';\n\n<HumanReadableMessages />\n```\n\n----------------------------------------\n\nTITLE: Formatting Go Code with gofmt -s\nDESCRIPTION: Formats Go source code files using the `gofmt` tool. The `-s` flag simplifies the code further. This command ensures the Go code adheres to standard formatting conventions and is a required step before submitting a Go code contribution, especially if a `Makefile` target isn't used.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\ngofmt -s\n```\n\n----------------------------------------\n\nTITLE: Fetching Identity Configuration\nDESCRIPTION: Fetches the Ory Identities configuration for a given project and workspace, and saves it to a YAML file. This file is then modified to include SMTP server details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Page with Ory Elements in Preact (TypeScript)\nDESCRIPTION: This Preact-based example demonstrates managing the Ory login flow, including flow initialization and form submission for user authentication. Dependencies are Preact, TypeScript, and Ory Elements. It expects user credentials and updates the page based on the login outcome from Ory's backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/login.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/login.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Example of Modifying Claims in Webhook Response - JSON\nDESCRIPTION: This snippet shows an example JSON response that modifies the claims of the issued tokens.  It defines custom claims for both the access token and the ID token within the session object.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"session\": {\n    \"access_token\": {\n      \"your:custom:access-token-claim\": \"any value you like\",\n      \"your:second:access-token-claim\": 124390123\n    },\n    \"id_token\": {\n      \"your:custom:id-token-claim\": \"another value\",\n      \"your:second:id-token-claim\": 2394123\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating PKCE Code Verifier and Challenge in JavaScript\nDESCRIPTION: This snippet defines an asynchronous function `generatePKCES256()` that generates a high-entropy code verifier and derives the corresponding base64url-encoded SHA-256 code challenge. It demonstrates how to prepare parameters for OAuth2 authorization and token exchange, ensuring secure binding between client and server during OAuth2 flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Generate PKCE code challenge and verifier\nasync function generatePKCES256() {\n  const array = new Uint8Array(64)\n  crypto.getRandomValues(array)\n  const codeVerifier = Buffer.from(array).toString(\"base64\").replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\/g, \"_\")\n\n  const codeChallenge = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(codeVerifier)).then((buffer) => {\n    return Buffer.from(buffer).toString(\"base64\").replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\/g, \"_\")\n  })\n\n  return { codeChallenge, codeVerifier }\n}\n\nconst { codeChallenge, codeVerifier } = await generatePKCES256()\nconst redirectUri = \"...\"\nconst clientId = \"...\"\n\n// Send the code challenge along with the authorization request\nconst authorizationUrl = `https://$PROJECT_SLUG.projects.oryapis.com/oauth2/auth?response_type=code&client_id=${clientId}&redirect_uri=${redirectUri}&code_challenge=${codeChallenge}&code_challenge_method=S256`\n\n// Exchange the authorization code for a token using the code verifier\nconst code = new URLSearchParams(window.location.search).get(\"code\")\nconst tokenUrl = \"https://$PROJECT_SLUG.projects.oryapis.com/oauth2/token\"\nconst tokenRequestBody = new URLSearchParams({\n  grant_type: \"authorization_code\",\n  client_id: clientId,\n  // client_secret: ...\n  redirect_uri: redirectUri,\n  code_verifier: codeVerifier,\n  code: code,\n})\nfetchtokenUrl, {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: tokenRequestBody.toString(),\n})\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n  .catch((error) => console.error(error))\n```\n\n----------------------------------------\n\nTITLE: Configuring Privileged Session Duration in Ory Identities (YAML)\nDESCRIPTION: Demonstrates setting the `selfservice.flows.settings.privileged_session_max_age` property in the Ory Identities configuration YAML. This value specifies the maximum time (e.g., `15m` for 15 minutes) after authentication during which a session is considered privileged for performing sensitive operations like password or email changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/10_session-lifespan.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\nflows:\n   settings:\n      after:\n      hooks: []\n      password:\n         hooks: []\n      profile:\n         hooks: []\n      ui_url: /ui/settings\n      # highlight-next-line\n      privileged_session_max_age: 15m\n      required_aal: highest_available\n```\n\n----------------------------------------\n\nTITLE: Creating Dockerfile\nDESCRIPTION: This snippet creates a `Dockerfile` that defines a custom Docker image based on `oryd/oathkeeper`. The Dockerfile adds the configuration files (`config.yaml`, `rules.json`, and `jwks.json`) to the image at the correct locations. This enables the container to run with the desired configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncat << EOF > Dockerfile\nFROM oryd/oathkeeper:${useLatestRelease('oathkeeper')}\nADD config.yaml /config.yaml\nADD rules.json /rules.json\nADD jwks.json /jwks.json\nEOF\n```\n\n----------------------------------------\n\nTITLE: Creating and Retrieving an Ory Hydra Client via CLI (Shell)\nDESCRIPTION: These shell commands utilize the `hydra` CLI to interact with the Ory Hydra Admin API. The first command creates a new OAuth 2.0 client specifically for GitLab, defining its ID, secret, allowed grant/response types, scopes, redirect URI, and the required `client_secret_post` authentication method. The second command fetches and displays the details of the newly created client for confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nhydra create client \\\n    --endpoint http://127.0.0.1:4445 \\\n    --id \"$client_id\" \\\n    --secret \"$client_secret\" \\\n    --grant-type authorization_code,refresh_token \\\n    --response-type code,id_token, email \\\n    --scope openid,offline_access,profile,email \\\n    --redirect-uri http://gitlab.example.com:8000/users/auth/Ory_Hydra/callback \\\n    --token-endpoint-auth-method client_secret_post\n\nhydra get clienthydra --endpoint http://127.0.0.1:4445\n```\n\n----------------------------------------\n\nTITLE: Rotating Secrets - Adding New Secrets to Ory Kratos YAML\nDESCRIPTION: Shows how to update the secrets configuration by adding new secrets at the top of each list while retaining old secrets. This strategy allows for seamless key rotation, enabling the system to verify data encrypted with old secrets while using new secrets for encrypting and signing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/secret-key-rotation.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\nsecrets:\n  default:\n    - new-default-secret\n    - old-default-secret\n  cookie:\n    - new-cookie-secret\n    - old-cookie-secret\n  cipher:\n    - new-secret-key\n    - old-secret-key\n```\n\n----------------------------------------\n\nTITLE: Creating Login Flow with Go SDK\nDESCRIPTION: Demonstrates how to create a login flow using the Ory Go SDK. The example handles both API and browser flows by configuring the proper frontend API client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_7\n\nLANGUAGE: go\nCODE:\n```\nimport createLoginApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-login.go'\n\n<CodeBlock language=\"go\" title=\"login.go\">{createLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Application Route After API Client Flow Completion in TypeScript\nDESCRIPTION: This TypeScript snippet illustrates handling a successful response from an API client (e.g., AJAX call), where instead of relying on browser redirects, the front-end router is programmatically directed to navigate to a specified route. This approach is necessary because Ory's browser redirect flows do not apply directly to API clients. Dependencies include a JavaScript framework router, such as Next.js or Vue Router, and the snippet expects a promise-based API response. The input is the response from the API call, and the output is the client-side navigation to the desired route.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/redirects.mdx#_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\n          .then((res) => {\n            router.push('/<your-route>')\n          })\n```\n\n----------------------------------------\n\nTITLE: Using hydra get oauth2-client command with client IDs\nDESCRIPTION: Basic usage syntax for the hydra get oauth2-client command to retrieve one or more OAuth 2.0 clients by their IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-oauth2-client.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra get oauth2-client <id-1> [<id-2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Access Rules Example - JSON Format\nDESCRIPTION: This code provides an example of a valid JSON array containing access rules. Each rule specifies the `id`, and uses other properties, to define the authorization, authentication, and transformation behaviors for a given request. The JSON format is used for configuring API access rules. This is one of the supported rule formats.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n[{\n    \"id\": \"my-first-rule\"\n},{\n    \"id\": \"my-second-rule\"\n}]\n```\n\n----------------------------------------\n\nTITLE: PBKDF2 Password Hash Format - plaintext\nDESCRIPTION: Defines the string structure for storing PBKDF2 password hashes, supporting various algorithms and parameters. The sample includes the format, a parameterized breakdown, and an example. Inputs include digest algorithm, iteration count, key length, base64-encoded salt, and base64 hash; the output is a single properly formatted password string.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_9\n\nLANGUAGE: plaintext\nCODE:\n```\n$pbkdf2-<algorithm>$i=<iteration>,l=<length>$<salt>$<hash>\n$pbkdf2-sha256$i=100000,l=32$1jP+5Zxpxgtee/iPxGgOz0RfE9/KJuDElP1ley4VxXc$QJxzfvdbHYBpydCbHoFg3GJEqMFULwskiuqiJctoYpI\n```\n\n----------------------------------------\n\nTITLE: cURL command to test identity import with verified address\nDESCRIPTION: A sample cURL POST request to create an identity with a verified email address via Ory's API, including authorization headers and the JSON payload. Useful for testing the import functionality.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n  --header \"Authorization: Bearer ory_pat_xRKLsFEOUFQFVBjd6o3FQDifaLYhabGd\" \\\n  --header \"Content-Type: application/json\" \\\n  --data '{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-verify@example.org\"\n  },\n  \"verifiable_addresses\": [\n    {\n      \"value\": \"docs-verify@example.org\",\n      \"verified\": true,\n      \"via\": \"email\",\n      \"status\": \"completed\"\n    }\n  ]\n}' https://$PROJECT_SLUG.projects.oryapis.com/admin/identities\n```\n\n----------------------------------------\n\nTITLE: Setting Up Ory API Route for Next.js 13\nDESCRIPTION: Creating a special route in Next.js 13 that connects with Ory's APIs and handles cookies and credentials. This route is required for local development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Code content referenced from external file\n// This would be the content of pages/api/.ory/[...paths].ts\n```\n\n----------------------------------------\n\nTITLE: Update OAuth2 Configuration\nDESCRIPTION: This shell command uses the Ory CLI to update the OAuth2 configuration of a project, using a provided YAML file. It uses the `--file` flag to specify the configuration file, allowing changes to be applied to the project settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory update oauth2-config --project <project-id> --workspace <workspace-id> --file config.yaml\n```\n\n----------------------------------------\n\nTITLE: Example AuthenticationSession Hydrator Request/Response Payload (JSON)\nDESCRIPTION: This JSON sample demonstrates the structure of a request or response used with the hydrator mutator. It contains subject, extra fields, headers (as arrays), and match context variables, exemplifying the shape of data exchanged between Oathkeeper and the external hydrator API. Ensures correct field usage for integrations or troubleshooting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"subject\": \"anonymous\",\n  \"extra\": {\n    \"foo\": \"bar\"\n  },\n  \"header\": {\n    \"foo\": [\"bar1\", \"bar2\"]\n  },\n  \"match_context\": {\n    \"regexp_capture_groups\": [\"http\", \"foo\"],\n    \"url\": \"http://domain.com/foo\"\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using YAML Configuration File with Helm\nDESCRIPTION: Shell command to install Ory Hydra with a configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nhelm install -f ./path/to/hydra-config.yaml ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Command Options for ory patch permission-config\nDESCRIPTION: Lists the available command-line options (flags) for the `ory patch permission-config` command. It explains the purpose of each flag, such as specifying the project or workspace, providing patch operations (`--add`, `--replace`, `--remove`), loading patches from files (`--file`), controlling output format (`--format`), suppressing output (`--quiet`), and confirming actions (`--yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-permission-config.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n      --add stringArray       Add a specific key to the configuration\n  -f, --file strings          Configuration file(s) (file://config.json, https://example.org/config.yaml, ...) to update the project\n      --format string         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                  help for permission-config\n      --project string        The project to use, either project ID or a (partial) slug.\n  -q, --quiet                 Be quiet with output printing.\n      --remove stringArray    Remove a specific key from the configuration\n      --replace stringArray   Replace a specific key in the configuration\n      --workspace string      The workspace to use, either workspace ID or a (partial) name.\n  -y, --yes                   Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Creating and Listing OAuth2 Clients with the Go SDK\nDESCRIPTION: Demonstrates interacting with the Ory Hydra OAuth2 API using the Go SDK. It shows how to create a new OAuth 2.0 client via `CreateOAuth2Client` and subsequently list existing clients using `ListOAuth2Clients`, including basic error handling for the creation request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n  \"fmt\"\n  \"net/http\"\n  \"os\"\n\n  client \"github.com/ory/hydra-client-go\"\n)\n\nfunc main() {\n  clientName := \"example_client\"\n  oAuth2Client := *client.NewOAuth2Client() // OAuth2Client |\n  oAuth2Client.SetClientId(\"example_client_id\")\n  oAuth2Client.SetClientName(clientName)\n\n  configuration := client.NewConfiguration()\n  configuration.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4445\", // Public API URL\n    },\n  }\n  apiClient := client.NewAPIClient(configuration)\n  resp, r, err := apiClient.OAuth2Api.CreateOAuth2Client(context.Background()).OAuth2Client(oAuth2Client).Execute()\n  if err != nil {\n    switch r.StatusCode {\n    case http.StatusConflict:\n      fmt.Fprintf(os.Stderr, \"Conflict when creating oAuth2Client: %v\\n\", err)\n    default:\n      fmt.Fprintf(os.Stderr, \"Error when calling `OAuth2Api.CreateOAuth2Client``: %v\\n\", err)\n      fmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n    }\n  }\n  // response from `CreateOAuth2Client`: OAuth2Client\n  fmt.Fprintf(os.Stdout, \"Created client with name %s\\n\", resp.GetClientName())\n\n  limit := int64(20)\n  offset := int64(0)\n  clients, r, err := apiClient.OAuth2Api.ListOAuth2Clients(context.Background()).Limit(limit).Offset(offset).ClientName(clientName).Execute()\n  if err != nil {\n    fmt.Fprintf(os.Stderr, \"Error when calling `OAuth2Api.ListOAuth2Clients``: %v\\n\", err)\n    fmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n  }\n  fmt.Fprintf(os.Stdout, \"We have %d clients\\n\", len(clients))\n  fmt.Fprintf(os.Stdout, \"First client name: %s\\n\", clients[0].GetClientName())\n\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Kratos Login Flow Data (Shell)\nDESCRIPTION: This snippet uses `curl` and `jq` to programmatically initiate a login API flow with Ory Kratos and then fetch the full details of the generated flow. It demonstrates how to get the flow ID from the initial API response and use it to retrieve the complete flow object, including UI nodes and state. This is useful for understanding the data structure returned by Kratos for login flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nflowId=$(curl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    http://127.0.0.1:4433/self-service/login/api | jq -r '.id')\ncurl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    \"http://127.0.0.1:4433/self-service/login/flows?id=$flowId\" | jq\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"f091ccf5-df85-493e-a9a3-de9b86925a45\",\n  \"type\": \"api\",\n  \"expires_at\": \"2021-12-13T18:31:57.1189985Z\",\n  \"issued_at\": \"2021-12-13T18:21:57.1189985Z\",\n  \"request_url\": \"http://127.0.0.1:4433/self-service/login/api\",\n  \"ui\": {\n    \"action\": \"http://127.0.0.1:4433/self-service/login?flow=f091ccf5-df85-493e-a9a3-de9b86925a45\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"identifier\",\n          \"type\": \"text\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070004,\n            \"text\": \"ID\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"password\",\n          \"disabled\": false,\n          \"node_type\": \"input\"\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1010001,\n            \"text\": \"Sign in\",\n            \"type\": \"info\",\n            \"context\": {}\n          }\n        }\n      }\n    ]\n  },\n  \"created_at\": \"2021-12-13T18:21:57.121894Z\",\n  \"updated_at\": \"2021-12-13T18:21:57.121894Z\",\n  \"refresh\": false,\n  \"requested_aal\": \"aal1\"\n}\n```\n\n----------------------------------------\n\nTITLE: YAML Configuration for Apple OIDC Provider\nDESCRIPTION: This YAML snippet shows how to configure the Apple OIDC provider within the Ory Identities configuration. It includes settings such as client ID, Apple Team ID, private key ID, private key, issuer URL, data mapping URL (using Base64 encoded Jsonnet), and required scopes.  Placeholders need to be replaced with actual values from the Apple Developer account.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_4\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: apple # this is `<provider-id>` in the Authorization callback URL. It should be \"apple\"\n            provider: apple\n            client_id: .... # Replace this with the Services ID provided by Apple\n            apple_team_id: .... # Replace this with the Team ID provided by Apple\n            apple_private_key_id: .... # Replace this with the private key identifier generated by Apple\n            apple_private_key: |\n              -----BEGIN PRIVATE KEY-----\n              .... # Replace this with the content of the private key downloaded from Apple\n              -----END PRIVATE KEY-----\n            issuer_url: https://appleid.apple.com\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - email\n        enabled: true\n```\n\n----------------------------------------\n\nTITLE: Example TOTP Credentials in Ory Identity (YAML)\nDESCRIPTION: Illustrates the structure of TOTP credentials as stored within an Ory Identity object (in YAML format) after a user has successfully set up TOTP. It shows the `id` ('totp'), `identifiers`, and the `config` block containing the `totp_url`, which includes the shared secret and issuer details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\ncredentials:\n  password:\n    id: totp\n    identifiers:\n      - 802471b9-06f5-49d4-a88d-5e7d6bcfed22\n    config:\n      # This is the TOTP URL which contains the pre-shared key and some additional meta-information.\n      totp_url: otpauth://totp/Example:alice@example.org?secret=JBSWY3DPEHPK3PXP&issuer=Example\n```\n\n----------------------------------------\n\nTITLE: Enabling Login Hints via Ory CLI in Bash\nDESCRIPTION: This Bash snippet demonstrates the CLI commands needed to enable login hints for an Ory Network Project. It requires retrieving the workspace ID and project ID before patching the project configuration to activate login hints in self-service registration flows. The input consists of workspace and project identifiers, and the output is the updated project configuration. This enables messages that inform users about existing authentication methods tied to their identifiers, improving login experience but potentially exposing account enumeration risks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/login-hint.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory list workspaces # to get the workspace id\nory list projects --workspace <workspace-id> # to get the project id\n\nory patch project --project <project-id> --workspace <workspace-id> \\  \n  --replace '/services/identity/config/selfservice/flows/registration/login_hints=true'\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with SQLite\nDESCRIPTION: Starts Ory Hydra with a SQLite database. Requires Docker and Docker Compose. It uses `quickstart.yml` file for configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml up\n```\n\n----------------------------------------\n\nTITLE: Related command for resource deletion in Hydra CLI\nDESCRIPTION: This snippet references a related command 'hydra delete' which is used to delete various resources within Hydra, providing a link for users to explore additional deletion operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwks.md#_snippet_3\n\nLANGUAGE: Markdown\nCODE:\n```\n* [hydra delete](hydra-delete) - Delete resources\n```\n\n----------------------------------------\n\nTITLE: Generating Recovery Link with Go SDK\nDESCRIPTION: This Go code utilizes the Ory Go SDK to create a recovery link.  It initiates a client with API key and calls the `AdminCreateSelfServiceRecoveryLink` method.  The user's identity ID is passed as a parameter. The generated recovery link is then printed to the console.  This requires the Ory Go SDK and a valid API key and project slug setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/30_account-recovery.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"io\"\n\n\tory \"github.com/ory/client-go\"\n)\n\nfunc main() {\n\tclient := ory.NewAPIClient(&ory.Configuration{\n\t\tServers: ory.ServerConfigurations{{\n\t\t\tURL: \"https://$PROJECT_SLUG.projects.oryapis.com\",\n\t\t}},\n\t\tDefaultHeader: map[string]string{\n\t\t\t\"Authorization\": \"Bearer ORY_API_KEY\", // API Key for your Ory Network project\n\t\t},\n\t})\n\n\tlink, res, err := client.FrontendApi.AdminCreateSelfServiceRecoveryLink(context.Background()).\n\t\tAdminCreateSelfServiceRecoveryLinkBody(*ory.NewAdminCreateSelfServiceRecoveryLinkBody(\"YOUR_INDENTITY_ID\")).\n\t\tExecute()\n\n\tif err != nil {\n\t\tbody, _ := io.ReadAll(res.Body)\n\t\tfmt.Printf(\"could not create recovery link %v: %v\", err.Error(), string(body))\n\t\tpanic(err)\n\t}\n\n\tfmt.Printf(\"Use link: %s\\n\", link.RecoveryLink)\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS in Ory Kratos with YAML\nDESCRIPTION: This YAML snippet demonstrates enabling CORS for the Ory Kratos Public API by setting 'enabled' to true and specifying allowed origins, HTTP methods, request headers, and exposed response headers. Dependencies include Ory Kratos and access to its service YAML configuration. Key parameters: 'allowed_origins' restricts which domains may make cross-origin requests, 'allowed_methods' and 'allowed_headers' specify what requests are supported and what custom headers are accepted, while 'exposed_headers' determines which response headers are accessible to the frontend. The values must be customized to match your deployment domains and security requirements.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/setting-up-cors.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nserve:\n  public:\n    cors:\n      enabled: true\n      allowed_origins:\n        - https://example.org\n        - https://*.example.org\n      allowed_methods:\n        - POST\n        - GET\n        - PUT\n        - PATCH\n        - DELETE\n      allowed_headers:\n        - Authorization\n        - Cookie\n        - Content-Type\n      exposed_headers:\n        - Content-Type\n        - Set-Cookie\n\n```\n\n----------------------------------------\n\nTITLE: Running the Import Script Shell\nDESCRIPTION: This shell command runs the script responsible for importing users into Ory. It uses curl to download the script from a specified URL and pipes the content to the bash interpreter for execution. The script leverages the environment variables to perform the import based on the previously exported Auth0 user data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nbash <(curl https://raw.githubusercontent.com/ory/docs/master/code-examples/migrate-to-ory/1-create-ory-identities.sh)\n```\n\n----------------------------------------\n\nTITLE: Configuring Error UI URL in YAML for Self-Service Flows\nDESCRIPTION: This snippet shows how to set up the error UI URL within the YAML configuration file for self-service flows. It defines the path to the custom error UI page, enabling the application to display a user-facing error interface in case of issues.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/error.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    error:\n      ui_url: \"http://my-app.com/error\"\n```\n\n----------------------------------------\n\nTITLE: Deleting OAuth 2.0 Clients - ory CLI\nDESCRIPTION: This command deletes one or more OAuth 2.0 Clients by their respective IDs. The command takes the client IDs as arguments. It requires the Ory Kratos Admin API URL, which can be set via the `-e` flag or the `KRATOS_ADMIN_URL` environment variable. The `--format` flag controls the output format.  The command also accepts flags for the project, quiet mode, and workspace.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-oauth2-client.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\nory delete oauth2-client <id-1> [<id-2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Fake TLS Termination for the Go SDK\nDESCRIPTION: Shows how to configure the SDK's HTTP client to simulate TLS termination by adding the `X-Forwarded-Proto: https` header to all requests. This is useful when Ory Hydra is deployed behind a reverse proxy that handles TLS termination. A custom `http.RoundTripper` (`withHeader`) is implemented and attached to the client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_6\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n  \"fmt\"\n  \"net/http\"\n\n  client \"github.com/ory/hydra-client-go\"\n)\n\nfunc main() {\n\n  tlsTermClient := new(http.Client)\n  rt := WithHeader(tlsTermClient.Transport)\n  rt.Set(\"X-Forwarded-Proto\", \"https\")\n  tlsTermClient.Transport = rt\n\n  config := client.NewConfiguration()\n  config.Servers = []client.ServerConfiguration{\n    {\n      URL: \"https://hydra.localhost:4444\", // Public API URL\n    },\n  }\n  config.HTTPClient = tlsTermClient\n  c := client.NewAPIClient(config)\n  fmt.Println(c.PublicApi.RevokeOAuth2Token(context.Background()).Token(\"some_token\").Execute())\n\n  // ...\n}\n\ntype withHeader struct {\n  http.Header\n  rt http.RoundTripper\n}\n\nfunc WithHeader(rt http.RoundTripper) withHeader {\n  if rt == nil {\n    rt = http.DefaultTransport\n  }\n\n  return withHeader{Header: make(http.Header), rt: rt}\n}\n\nfunc (h withHeader) RoundTrip(req *http.Request) (*http.Response, error) {\n  for k, v := range h.Header {\n    req.Header[k] = v\n  }\n\n  return h.rt.RoundTrip(req)\n}\n\n```\n\n----------------------------------------\n\nTITLE: Showing Verification UI After Registration via Specific Methods Using Ory CLI\nDESCRIPTION: Configures Ory using the CLI `patch identity-config` command to automatically show the verification UI after a user successfully registers via password, OIDC, or WebAuthn methods. This is achieved by adding the `show_verification_ui` hook to the respective `after` registration flow configurations. This behavior typically applies to server-rendered browser clients.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --add '/selfservice/flows/registration/after/password/hooks=[{\"hook\": \"show_verification_ui\"}]' \\\n  --add '/selfservice/flows/registration/after/oidc/hooks=[{\"hook\": \"show_verification_ui\"}]' \\\n  --add '/selfservice/flows/registration/after/webauthn/hooks=[{\"hook\": \"show_verification_ui\"}]'\n```\n\n----------------------------------------\n\nTITLE: Example User Consent HTML Form\nDESCRIPTION: This HTML snippet provides a basic structure for a user consent form intended for a custom consent endpoint integrated with Ory. It displays example scope permissions (\"email\", \"profile\") that the user can accept or reject. The form includes a hidden CSRF token field and submit buttons (`accept`, `reject`) to communicate the user's decision back to the custom consent application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_5\n\nLANGUAGE: HTML\nCODE:\n```\n<form action=\"/consent\" method=\"post\">\n  <input type=\"hidden\" name=\"csrf_token\" value=\"....\" />\n  <!-- Use CSRF tokens in your HTML forms! -->\n  <input type=\"checkbox\" name=\"scope\" value=\"email\" />\n  <input type=\"checkbox\" name=\"scope\" value=\"profile\" />\n  <input type=\"submit\" name=\"submit\" value=\"accept\" />\n  <input type=\"submit\" name=\"submit\" value=\"reject\" />\n</form>\n```\n\n----------------------------------------\n\nTITLE: Revoking Ory Session Tokens Directly for Native API Applications\nDESCRIPTION: For native API clients such as mobile applications, this snippet illustrates using the Ory logout API endpoint directly to revoke session tokens. It requires using valid Ory session tokens for authentication. The snippet likely involves HTTP requests to the Ory API and depends on prior authentication and token issuance by Ory Identities SDK or services. This method provides a server-side approach to terminate sessions without browser interactions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-logout.mdx#_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n<CodeTabs items={apiFlow} />\n```\n\n----------------------------------------\n\nTITLE: Configuring Flutter Project Dependencies in pubspec.yaml\nDESCRIPTION: YAML configuration for Flutter project dependencies, including dio for HTTP requests and flutter_dotenv for environment variable management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# Content from pubspec.yaml referenced but not directly shown in the provided text\n```\n\n----------------------------------------\n\nTITLE: Postmark SMTP Connection URI\nDESCRIPTION: Provides a connection URI example for sending emails through Postmark's SMTP service. The example shows the format and necessary components of the URI, including placeholders for the Postmark server API token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nsmtp://{YOUR_POSTMARK_SEVER_API_TOKEN}:{YOUR_POSTMARK_SEVER_API_TOKEN}@smtp.postmarkapp.com:587/\n\n# For example:\n# smtp://thetoken:thetoken@smtp.postmarkapp.com:587/\n```\n\n----------------------------------------\n\nTITLE: Creating and Listing Ory OAuth2 Clients in Go\nDESCRIPTION: This Go program demonstrates how to use the Ory client-go SDK to interact with the Ory OAuth2 Admin API. It shows how to create a new OAuth2 client and subsequently list existing clients, filtering by the client name. The program requires setting the `ORY_API_KEY` environment variable for authentication and configuring the client to connect to a specified Ory public API URL. It includes error handling for potential conflicts during client creation and general API call errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/sdk/05_go.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"net/http\"\n\t\"os\"\n\n\tory \"github.com/ory/client-go\"\n)\n\n// Use this context to access Ory APIs which require an Ory API Key.\nvar oryAuthedContext = context.WithValue(context.Background(), ory.ContextAccessToken, os.Getenv(\"ORY_API_KEY\"))\n\nfunc main() {\n\tclientName := \"example_client\"\n\toAuth2Client := *ory.NewOAuth2Client() // OAuth2Client |\n\toAuth2Client.SetClientName(clientName)\n\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"https://practical-swirles-whg26u2ofh.projects.oryapis.com\", // Public API URL\n\t\t},\n\t}\n\tory := ory.NewAPIClient(configuration)\n\tresp, r, err := ory.OAuth2Api.CreateOAuth2Client(oryAuthedContext).OAuth2Client(oAuth2Client).Execute()\n\tif err != nil {\n\t\tswitch r.StatusCode {\n\t\tcase http.StatusConflict:\n\t\t\tfmt.Fprintf(os.Stderr, \"Conflict when creating oAuth2Client: %v\\n\", err)\n\t\tdefault:\n\t\t\tfmt.Fprintf(os.Stderr, \"Error when calling `OAuth2Api.CreateOAuth2Client`: %v\\n\", err)\n\t\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t\t}\n\t}\n\t// response from `CreateOAuth2Client`: OAuth2Client\n\tfmt.Fprintf(os.Stdout, \"Created client with name %s\\n\", resp.GetClientName())\n\n\tclients, r, err := ory.OAuth2Api.ListOAuth2Clients(oryAuthedContext).ClientName(clientName).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error when calling `AdminApi.ListOAuth2Clients``: %v\\n\", err)\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t}\n\tfmt.Fprintf(os.Stdout, \"We have %d clients\\n\", len(clients))\n\tfor i, client := range clients {\n\t\tfmt.Fprintf(os.Stdout, \"Client %d name: %s\\n\", i+1, client.GetClientName())\n\t\t// Add any additional information you want to display about the client\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Jsonnet: Map Twitch Claims to Ory Identity Schema\nDESCRIPTION: This Jsonnet snippet maps claims from Twitch to the Ory Identity schema. It checks for the existence and verification status of the email claim, only including it in the traits if verified by Twitch. The `claims` variable, injected through `std.extVar('claims')`, holds the claims received from Twitch's /me API. The output is a JSON object structuring the identity traits.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/60_twitch.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by Twitch.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Session Details in Go (Administrative)\nDESCRIPTION: Uses the initialized Go SDK client to retrieve detailed information about a specific session using its ID via the administrative API. Requires the Session ID and an API Key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_15\n\nLANGUAGE: go\nCODE:\n```\nimport goGetSession from '!!raw-loader!../../../code-examples/sdk/go/session/get-session.go'\n\n<CodeBlock language=\"go\" title=\"Get a session\">{goGetSession}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Create client in Ory Hydra (using hydra-binary)\nDESCRIPTION: This command creates a client in Ory Hydra using the `hydra` command-line tool.  It specifies the endpoint, grant types, response types, scopes, redirect URI, and token endpoint authentication method.  It creates a client with `client_id` and `client_secret` that can be used by GitLab.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nclient=$(hydra create client \\\n    --endpoint http://127.0.0.1:4445 \\\n    --format json \\\n    --grant-type authorization_code,refresh_token \\\n    --response-type code,id_token, email \\\n    --scope openid,offline_access,profile,email \\\n    --redirect-uri http://gitlab.example.com:8000/users/auth/Ory_Hydra/callback \\\n    --token-endpoint-auth-method client_secret_post)\n\nclient_id=$(echo $client | jq -r '.client_id')\nclient_secret=$(echo $client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: JWT Assertion Example for OAuth2 Token Exchange\nDESCRIPTION: Sample JWT used in the authentication flow containing claims for issuer, subject, audience, not before time, and expiration time. This JWT would be passed in the assertion parameter when requesting an access token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL215LWlzc3Vlci5jb20iLCJzdWIiOiJhbGljZUBleGFtcGxlLm9yZyIsImF1ZCI6IjcxNDZkZDBiLWYyNDMtNDNiYS04MTVjLTdhMDAyMTZiNDgyMyIsIm5iZiI6MTMwMDgxNTc4MCwiZXhwIjoxMzAwODE5MzgwfQ.Dpn7zYEhaWxi7CLxr1c8Db2zxOJDzpu5QTZgeM6me68aGt7jgpKujunfx2FBhhuKY2oJmIAhXJWXplGH2NnbCGxNzx17Y4CPGJE9jLC2ZxprvV_5Cdmx5GkGcFjpOXsgBSonhmsyKkxYhS3C-mq4u2Tx9Zi494G2EbDH0L2BSuWYi411qm4LrIHQRdiFP9v34VH-5hU005bvrlGJBA9W-Eom4krFYtC4_Zgc7XY2mcChBw0AYz3A1B0_7ui95iDR-33D5tBAGRn6iGgnVBeR1GmZX5y4jz7Nht2lbPQkrCyLsoPxn2ZQPqvbOUKxdgsrhkcs0UGND8GsDwDzISuuAw\n```\n\n----------------------------------------\n\nTITLE: Fetching Identities with Ruby SDK\nDESCRIPTION: This Ruby code snippet fetches a page of identities using the Ory Ruby SDK. It configures the Ory client with the project slug and API key, then calls the `list_identities` method, passing an options hash with `page_size` and `page_token`.  It handles potential API errors. Requires the `ory-client` gem and valid Ory credentials. The project slug, API key, and token must be supplied.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/pagination.mdx#_snippet_2\n\nLANGUAGE: ruby\nCODE:\n```\nrequire 'ory-client'\n\n# Configure your Ory credentials\nOryClient.configure do |config|\n  config.host = 'https://{PROJECT_SLUG}.projects.oryapis.com'\n  config.access_token = '{API_KEY}'\nend\n\n# Create an OryClient instance\napi_instance = OryClient::IdentityApi.new\nopts = {\n  page_size: 1,\n  page_token: '<token>'\n}\n\nbegin\n  # List Identities based on pagination\n  result = api_instance.list_identities(opts)\n  p result\nrescue OryClient::ApiError => e\n  puts \"Error fetching identities: #{e}\"\nend\n```\n\n----------------------------------------\n\nTITLE: Example Verifiable Email Schema - Ory Identity Schema - JSON5\nDESCRIPTION: This example JSON5 object outlines how to define a verifiable email in the Ory identity schema. The 'traits.email' property is given an ory.sh/kratos.verification field specifying use via email. The schema uses JSON5 syntax for comments. Required fields include 'format', 'type', and the 'verification' extension. This schema should be used when you want to accept verified emails carried over from social providers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_7\n\nLANGUAGE: json5\nCODE:\n```\n{\n  $id: \"https://example.com/person.schema.json\",\n  $schema: \"http://json-schema.org/draft-07/schema#\",\n  title: \"Person\",\n  type: \"object\",\n  properties: {\n    traits: {\n      type: \"object\",\n      properties: {\n        email: {\n          format: \"email\",\n          type: \"string\",\n          \"ory.sh/kratos\": {\n            // highlight-start\n            verification: {\n              via: \"email\",\n            },\n            // highlight-end\n          },\n        },\n      },\n      required: [\"subject\"],\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Settings Page with Ory Elements in Next.js (TypeScript)\nDESCRIPTION: This Next.js settings page integrates Ory Elements to manage account settings, reflecting dynamic options like passwordless flows based on configuration. It uses Next.js, TypeScript, and Ory Elements. Inputs are user preferences, and the outcome is updated settings data and possibly visible or hidden features in the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"pages/settings.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/settings.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Create client in Ory Hydra (docker-compose)\nDESCRIPTION: This command creates a client in Ory Hydra using the `hydra` command-line tool running inside a docker container.  It specifies the endpoint, grant types, response types, scopes, redirect URI, and token endpoint authentication method using previously defined `client_id` and `client_secret`. It's an alternative to using the local binary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\ndocker-compose -f quickstart.yml exec hydra \\\n    hydra create client \\\n    --endpoint http://127.0.0.1:4445 \\\n    --id \\\"$client_id\\\" \\\n    --secret \\\"$client_secret\\\" \\\n    --grant-type authorization_code,refresh_token \\\n    --response-type code,id_token,email \\\n    --scope openid,offline_access,profile,email \\\n    --redirect-uri http://gitlab.example.com:8000/users/auth/Ory_Hydra/callback \\\n    --token-endpoint-auth-method client_secret_post\n```\n\n----------------------------------------\n\nTITLE: Configuring Login and Registration Flow Redirects in Ory with YAML\nDESCRIPTION: This YAML configuration snippet defines how the Ory self-service flows for login and registration redirect users after successful authentication or registration. It allows setting a default browser return URL as well as distinct URLs for post-password login and post-OIDC login methods. The default_browser_return_url is used as the fallback redirect target, and subfields allow fine-grained control per authentication method. Dependencies include Ory's selfservice flows configuration support. Inputs are URLs or paths to redirect users to, and the output affects UI redirect behavior after flows complete successfully. Limitations include that the URLs must be valid and conform to the allow list domain policies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/redirects.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      after:\n        default_browser_return_url: https://this-is-overridden-by-password/\n        password:\n          # redirect after successful login or registration with `password` method\n          default_browser_return_url: https://end-up-here-after-login-with-password/\n        oidc:\n          # redirect after successful login or registration with `OIDC` method\n          default_browser_return_url: https://end-up-here-after-login-with-oidc/\n    registration:\n      after:\n        default_browser_return_url: https://end-up-here-after-registration/\n```\n\n----------------------------------------\n\nTITLE: Example Ory Kratos Verification Flow JSON Response\nDESCRIPTION: This JSON object represents the state and UI configuration of an Ory Kratos verification flow retrieved from the API. It includes metadata like the flow ID, type, timestamps, the active verification method ('link'), and a detailed 'ui' object containing form action URL, method ('POST'), and input nodes (CSRF token, email input with error message, submit button) necessary for rendering the verification interface. The overall state is 'choose_method'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.missing.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"11f6e7f4-99f9-4bcf-bcfc-208d8db942c5\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T13:35:42.627410804Z\",\n  \"issued_at\": \"2021-04-28T12:35:42.627410804Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/verification/browser\",\n  \"active\": \"link\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/verification?flow=11f6e7f4-99f9-4bcf-bcfc-208d8db942c5\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"UEHaePrAA2H+nDW2BFI6OTQh4LM1sC7rbVPkT3Z0zE/vl/Hnfn0nS8ZOOzAHJtlfzdi/jyEQq2I+IX7nxTJkKA==\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"link\",\n        \"attributes\": {\n          \"name\": \"email\",\n          \"type\": \"email\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": [\n          {\n            \"id\": 4000002,\n            \"text\": \"Property email is missing.\",\n            \"type\": \"error\",\n            \"context\": {\n              \"property\": \"email\"\n            }\n          }\n        ],\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"link\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"link\",\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070005,\n            \"text\": \"Submit\",\n            \"type\": \"info\"\n          }\n        }\n      }\n    ]\n  },\n  \"state\": \"choose_method\"\n}\n```\n\n----------------------------------------\n\nTITLE: Mapping GitHub Claims to Ory Identity Traits Using Jsonnet - Jsonnet\nDESCRIPTION: This Jsonnet snippet demonstrates how to map data obtained from GitHub to identity traits in Ory. The 'claims' object is constructed by combining a default 'email_verified' value with data provided via std.extVar('claims'), verifying both the existence and verification of the email before mapping it. Use this as the mapper URL in your Ory configuration. Dependencies: Ory identity schema, valid claims payload as extVar input. Expects GitHub's user API data. Outputs an object structured for Ory Identities' needs. Limitation: Only verified emails are allowed to avoid enumeration attacks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/25_github.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, especially if the value is used for\n      // e.g. verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by GitHub.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Post-Login Redirection Configuration in Ory Identities (YAML)\nDESCRIPTION: This snippet showcases the configuration keys relevant for post-login redirection in Ory Identities. It highlights the hierarchy of configuration, starting with the default URL and how it can be overridden by flow-specific and method-specific settings. This configuration determines where the user is redirected after a successful login flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  default_browser_return_url: https://end-up-here-per-default/\n  flows:\n    login:\n      after:\n        # overrides url.default_browser_return_url\n        default_browser_return_url: https://this-is-overridden-by-password/\n        password:\n          # overrides selfservice.login.after.default_browser_return_url\n          default_browser_return_url: https://end-up-here-after-login-with-password/\n```\n\n----------------------------------------\n\nTITLE: Start OAuth2 Client with Authorization Code Grant\nDESCRIPTION: This bash command uses the Ory CLI to start a local web server acting as an OAuth2 client, initiating the Authorization Code Grant flow. It requires the client ID and secret, the project and workspace IDs, and the port and scope.  This command starts the authorization flow and opens a browser window.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nory perform authorization-code \\\n  --client-id ORY_CLIENT_ID \\\n  --client-secret ORY_CLIENT_SECRET \\\n  --project <project-id> \\\n  --workspace <workspace-id> \\\n  --port 5555 \\\n  --scope openid,offline\n```\n\n----------------------------------------\n\nTITLE: Hydra Client Creation Example\nDESCRIPTION: This example illustrates how to create an OAuth 2.0 client with specified configurations using the Hydra CLI. The example includes a client name, redirect URI, grant type, and scopes. It demonstrates the common use case for this command, defining the client's core attributes for handling authorization and token flows.  The example requires the Hydra CLI to be installed and configured to access a Hydra instance. The expected output is a JSON response containing the client ID and client secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-client.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nhydra create client -n \"my app\" -c http://localhost/cb -g authorization_code -r code -a core,foobar\n```\n\n----------------------------------------\n\nTITLE: Adding Spotify Social Sign-In Provider Configuration in Ory Identity YAML - YAML\nDESCRIPTION: An example YAML snippet illustrating how to configure Spotify as an OpenID Connect provider in the Ory Identities configuration file. It specifies provider details including client ID, secret, OAuth2 scopes, and the Jsonnet data mapper encoded as a base64 string or referenced by URL. The 'id' field is critical and must remain unchanged to maintain callback functionality.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_5\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: spotify # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: spotify\n            client_id: .... # Replace this with the OAuth2 Client ID provided by Spotify\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by Spotify\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - user-read-email\n              - user-read-private\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Making Authenticated Admin API Requests (Basic Auth) in Go\nDESCRIPTION: Illustrates performing authenticated requests to the Ory Hydra Admin API using HTTP Basic Authentication. It defines a custom `http.RoundTripper` implementation (`BasicAuthTransport`) that automatically adds the necessary `Authorization` header with base64 encoded credentials to each outgoing request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n  \"encoding/base64\"\n  \"fmt\"\n  \"net/http\"\n\n  client \"github.com/ory/hydra-client-go\"\n)\n\ntype BasicAuthTransport struct {\n  Username string\n  Password string\n}\n\nfunc (t BasicAuthTransport) RoundTrip(req *http.Request) (*http.Response, error) {\n  req.Header.Set(\"Authorization\", fmt.Sprintf(\"Basic %s\",\n    base64.StdEncoding.EncodeToString([]byte(fmt.Sprintf(\"%s:%s\",\n      t.Username, t.Password)))))\n  return http.DefaultTransport.RoundTrip(req)\n}\n\nfunc main() {\n  config := client.NewConfiguration()\n  config.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4445\", // Admin API\n    },\n  }\n\n  c := client.NewAPIClient(config)\n  config.HTTPClient.Transport = BasicAuthTransport{Username: \"foo\", Password: \"bar\"}\n\n  req := c.OAuth2Api.GetOAuth2ConsentRequest(context.Background()).ConsentChallenge(\"consentChallenge_example\")\n  fmt.Println(req.Execute())\n\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Minimal Identity Schema\nDESCRIPTION: This code defines a minimum viable identity schema. It sets the `$schema` property and defines the structure as an `object` with a `traits` property, also an `object`. This minimal schema establishes a foundation for adding custom fields.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_1\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Encrypting OAuth2 Client Secret During Hydra Update - Shell\nDESCRIPTION: Illustrates how to encrypt an auto-generated OAuth 2.0 client secret while updating the client using hydra update client with --keybase. This requires either a Keybase account or PGP key setup, and the Hydra CLI with encryption flags (--pgp-key, --pgp-key-url, or --keybase). Replace the client ID, grant and response type, application name, and username as appropriate. The resulting secret is encrypted using the specified user's PGP key in Keybase.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-update-client.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhydra update client e6e96aa5-9cd2-4a70-bf56-ad6434c8aaa2 -n \"my app\" -g client_credentials -r token -a core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: Get OAuth2/OpenID Connect client details via SDK or REST API\nDESCRIPTION: This section provides methods to retrieve client details using SDK code snippets or REST API documentation links. Authentication with the `registration_access_token` is required regardless of the `token_endpoint_auth_method`. The code placeholder indicates SDK integration, ensuring secure retrieval of client data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\n```mdx-code-block\nimport dynamicGetTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/dynamic-client-get.ts'\n\n<Codes language=\"tsx\">{dynamicGetTs}</Codes>\n```\n```\n\nLANGUAGE: Markdown\nCODE:\n```\nSee [API documentation](../../reference/api#tag/oAuth2/operation/getOidcDynamicClient).\n```\n\n----------------------------------------\n\nTITLE: Tunneling Ory APIs Standard Usage Bash\nDESCRIPTION: Demonstrates the standard way to use the `ory tunnel` command, specifying the target application URL and the Ory project using the `--project` flag. This sets up a local mirror of Ory APIs pointing to the specified application URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_0\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> https://www.example.org\n```\n\n----------------------------------------\n\nTITLE: Managing Identities Using Ory SDK in JavaScript\nDESCRIPTION: This snippet exemplifies how to create, get, update, and delete identities using the JavaScript Ory SDK version 1.x. It reflects changes from using the previous 'v0alpha2' namespace with 'admin' prefixes to a clearer 'identity' module without prefixes, and introduces the naming convention where request bodies are assigned to properties suffixed by 'Body'. Input parameters include identity IDs and identity body schema and traits. The operations return identity objects wrapped in promises.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_4\n\nLANGUAGE: diff\nCODE:\n```\n  // Create\n  const identity = await ory\n-   .v0alpha2.adminCreateIdentity({\n-     schema_id: \"preset://email\",\n-     traits: { email: generateEmail() },\n+   .identity.createIdentity({\n+     createIdentityBody: {\n+       schema_id: \"preset://email\",\n+       traits: { email: generateEmail() },\n+     }\n    })\n    .then(({ data }) => data)\n\n  // Get\n  const identity = await ory\n-   .v0alpha2.adminGetIdentity(identity.id)\n+   .identity.getIdentity({ id: identity.id })\n    .then(({ data }) => data)\n\n  // Update\n  const identity = await ory\n-   .v0alpha2.adminUpdateIdentity(identity.id, {\n-     schema_id: identity.schema_id,\n-     traits: { email: \"new@email.com\", ...identity.traits },\n-     state: identity.state,\n+   .identity.updateIdentity({\n+     id: identity.id,\n+     updateIdentityBody: {\n+       schema_id: identity.schema_id,\n+       traits: { email: \"new@email.com\", ...identity.traits },\n+       state: identity.state,\n+     }\n    })\n    .then(({ data }) => data)\n\n  // Delete\n- await ory.v0alpha2.adminDeleteIdentity(identity.id)\n+ await ory.identity.deleteIdentity({ id: identity.id })\n```\n\n----------------------------------------\n\nTITLE: Configuring auto-login after successful registration with YAML\nDESCRIPTION: YAML configuration to enable auto-login after successful registration. This setup adds the session hook to both password and OIDC flows, preventing users from having to log in again after registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    registration:\n      after:\n        password:\n          hooks:\n            - hook: session\n        oidc:\n          hooks:\n            - hook: session # Always enable this for oidc flows or the user experience suffers significantly!\n```\n\n----------------------------------------\n\nTITLE: hydra import oauth2-client Options\nDESCRIPTION: Command-specific options for the OAuth 2.0 client import functionality, including encryption options for client secrets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-oauth2-client.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help                 help for oauth2-client\n      --keybase string       Keybase username for encrypting client secret.\n      --pgp-key string       Base64 encoded PGP encryption key for encrypting client secret.\n      --pgp-key-url string   PGP encryption key URL for encrypting client secret.\n```\n\n----------------------------------------\n\nTITLE: Configuring Remote JSON Authorizer in JSON Access Rule\nDESCRIPTION: Complete JSON access rule example with remote_json authorizer configuration, including URL matching pattern, authenticators, authorizer with templated headers and payload, and header forwarding settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_16\n\nLANGUAGE: shell\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/<.*>\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"remote_json\",\n    \"config\": {\n      \"headers\": {\n         \"Y-Api-Key\": \"{{ .MatchContext.Header.Get \\\"X-Api-Key\\\" }}\"\n      },\n      \"remote\": \"http://my-remote-authorizer/authorize\",\n      \"payload\": \"{\\\"subject\\\": \\\"{{ print .Subject }}\\\", \\\"resource\\\": \\\"{{ printIndex .MatchContext.RegexpCaptureGroups 0 }}\\\"}\"\n    },\n    \"forward_response_headers_to_upstream\": [\n      \"X-Foo\"\n    ]\n  }\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling WebAuthn - Ory CLI\nDESCRIPTION: This snippet shows how to enable WebAuthn for passwordless authentication using Ory CLI. It adds the necessary configuration to the identity config including setting `enabled` to `true`, configuring `passwordless` and setting a display name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config <your-project-id> \\\n  --add '/selfservice/methods/webauthn/enabled=true' \\\n  --add '/selfservice/methods/webauthn/config/passwordless=${props.passwordless || false}' \\\n  --add '/selfservice/methods/webauthn/config/rp/display_name=\"My Display Name\"'\n```\n\n----------------------------------------\n\nTITLE: Create OAuth2 Client using cURL\nDESCRIPTION: This bash script uses cURL to create an OAuth2 client by sending a POST request to the `/admin/clients` API endpoint of the Ory Network.  It requires the SDK configuration URL (ending with `/admin/clients`) and the Ory API Key in the Authorization header.  The request body is a JSON object that configures the client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X POST 'SDK_CONFIGURATION_URL/admin/clients' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer ORY_API_KEY' \\\n  -d '{\n    \"client_name\": \"YOUR_CLIENT_NAME\",\n    \"grant_types\": [\n      \"authorization_code\"\n    ],\n    \"redirect_uris\": [\n      \"http://127.0.0.1:5555/callback\"\n    ],\n    \"response_types\": [\n      \"code\",\n      \"id_token\",\n      \"refresh_token\"\n    ],\n    \"scope\": \"openid offline\"\n  }'\n```\n\n----------------------------------------\n\nTITLE: Executing Ory List Relationships Command (Go)\nDESCRIPTION: This snippet demonstrates how to invoke the `ory list relationships` command using the Ory CLI.  It shows the basic structure of the command and outlines available flags for filtering results.  The user can specify options such as namespace, object, relation, subject-id/subject-set, and pagination parameters (page-size/page-token) to refine the query.  The format flag controls the output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-relationships.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\nory list relationships [flags]\n```\n\n----------------------------------------\n\nTITLE: Example of a Pagination Error Response\nDESCRIPTION: This code snippet showcases the structure of a typical error response received from the Ory API when a pagination issue occurs, such as an invalid token. It illustrates the fields that are included in the error response: code, status, request, reason, and message.  This is for informational purposes about how errors are formatted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/pagination.mdx#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": {\n    \"code\": 400,\n    \"status\": \"Bad Request\",\n    \"request\": \"38308051-dd5e-9f91-b053-5b32f751b281\",\n    \"reason\": \"The page token is invalid, do not craft your own page tokens\",\n    \"message\": \"The request was malformed or contained invalid parameters\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Delete OAuth2/OpenID Connect client dynamically via SDK or REST API\nDESCRIPTION: This code demonstrates deleting a dynamic OAuth2 or OpenID Connect client using SDK code or the REST API, authenticated via the `registration_access_token`. The SDK code snippet provides a placeholder for actual implementation, and the API reference points to the correct endpoint for client removal.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_8\n\nLANGUAGE: Shell\nCODE:\n```\n```mdx-code-block\nimport dynamicDeleteTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/dynamic-client-delete.ts'\n\n<Codes language=\"tsx\">{dynamicDeleteTs}</Codes>\n```\n```\n\nLANGUAGE: Markdown\nCODE:\n```\nSee [API documentation](../../reference/api#tag/oAuth2/operation/deleteOidcDynamicClient).\n```\n\n----------------------------------------\n\nTITLE: Adding Webhook Action to All Registration Hooks (Ory CLI)\nDESCRIPTION: Uses the Ory CLI command `ory patch identity-config` to add the defined webhook action (from `webhook-action.json`) to the configuration path `/selfservice/flows/registration/after/hooks/0`. This ensures the action is triggered after *any* successful registration flow completion in your Ory project. Requires specifying project and workspace IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/hubspot.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Checking Native Session Identity - Ory Go SDK\nDESCRIPTION: Illustrates how to check the identity of the current user based on an API client session (e.g., using an access token) using the Ory Go SDK's 'toSession' endpoint. This example is tailored for native applications or API clients. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_15\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Variable and Object Construction\nDESCRIPTION: Shows how to define a local variable (`email`) in Jsonnet and use it within an object structure to map it to `identity.traits.email`. The resulting JSON output is also provided.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal email = 'hello@example.org';\n\n{\n  identity: { traits: { email: email } }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"hello@example.org\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Organizations via Ory API - Bash (curl)\nDESCRIPTION: Performs an authenticated GET request to the Ory API to retrieve the list of organizations within a project. Requires valid PROJECT_ID and WORKSPACE_API_KEY environment variables to be set. The response is a JSON array of organizations, and curl is the only dependency; outputs organization data to standard output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X GET --location \"https://api.console.ory.sh/projects/$PROJECT_ID/organizations\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\"\n```\n\n----------------------------------------\n\nTITLE: Example OAuth2 Client Update with Callback URL and Grant Type\nDESCRIPTION: This example demonstrates updating an OAuth 2.0 client with a specific callback URL, grant type (authorization_code), response type (code), and scopes (core,foobar).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-oauth2-client.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory update oauth2-client <client-id-here> -c http://localhost/cb -g authorization_code -r code -a core,foobar\n\nTo encrypt an auto-generated OAuth2 Client Secret, use flags `--pgp-key`, `--pgp-key-url` or `--keybase` flag, for example:\n\n  ory update oauth2-client e6e96aa5-9cd2-4a70-bf56-ad6434c8aaa2 -n \"my app\" -g client_credentials -r token -a core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: YAML - Configuring Claims Source\nDESCRIPTION: This YAML snippet configures the `claims_source` for a generic social sign-in provider in Ory. It demonstrates how to specify whether claims should be read from the identity token (`id_token`, default) or the UserInfo endpoint (`userinfo`). Dependencies are a valid Ory project and the provider configuration. The output determines where the claims are sourced from and will affect data mapping.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/05_generic.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: generic # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: generic\n            claims_source: userinfo # default: \"id_token\"\n            # ...\n```\n\n----------------------------------------\n\nTITLE: Recovery Payload in JSON5 (Native)\nDESCRIPTION: This JSON5 code snippet provides a sample payload for a native application's recovery flow, intended to be used with the cURL native example. The contents of this JSON payload are tailored to meet the API requirements of the Ory instance. Dependencies: Requires the user's identity to create the recovery flow. Prerequisites: the Ory identity schema. Expected input: user identifiers (e.g. email). Output: JSON response of the API. Limitations: Depends on the user's identity schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_30\n\nLANGUAGE: json5\nCODE:\n```\nimport createRecoveryCurlApiJson from '../../../code-examples/curl/recovery/create-recovery-api.json'\n```\n\n----------------------------------------\n\nTITLE: Configuring Self-Service Methods (Password, OIDC, Profile) - YAML\nDESCRIPTION: This YAML snippet demonstrates how to enable different settings methods within the Ory Identities or Ory Kratos configuration. It specifies the methods (password, oidc, profile) and their enabled status.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      enabled: true\n    oidc:\n      enabled: true\n    profile:\n      enabled: true\n  # ...\n```\n\n----------------------------------------\n\nTITLE: Defining Namespaces for Permissions in TypeScript\nDESCRIPTION: This snippet defines the main namespaces representing subjects and objects in the permission model using TypeScript classes that implement the Namespace interface from Ory Keto types. It establishes 'User', 'Document', and 'Folder' as core entities to which permissions apply. Dependencies include '@ory/keto-namespace-types'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\n// highlight-start\nclass User implements Namespace {}\nclass Document implements Namespace {}\nclass Folder implements Namespace {}\n// highlight-end\n```\n\n----------------------------------------\n\nTITLE: Patching Ory Identity Configuration to Add JWT Tokenizer Template via Shell\nDESCRIPTION: Uses the Ory CLI to patch the identity configuration of a specified project and workspace. Adds a JWT tokenizer template named 'jwt_example_template1' with base64-encoded JWKS and claims mapper data, and sets a token time-to-live (TTL). This command enables Ory Network to convert sessions to JWTs using the configured template.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\  --add '/session/whoami/tokenizer/templates/jwt_example_template1={\"jwks_url\":\"base64://'$JWKS_B64_ENCODED'\",\"claims_mapper_url\":\"base64://'$JSONNET_B64_ENCODED'\",\"ttl\":\"10m\"}' \\  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with TypeScript\nDESCRIPTION: This TypeScript code snippet provides an example of creating a recovery flow for native applications, using the Ory SDK. It interacts with the Ory API for the recovery operation. Dependencies: TypeScript and the Ory SDK. Prerequisites: The Ory instance and correct SDK configuration. Expected input is the user input, with the output as the API response. Limitations: Specific to native applications, uses the Ory SDK.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_35\n\nLANGUAGE: ts\nCODE:\n```\nimport createTsRecoveryApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/recovery/create-recovery-native.ts'\n```\n\n----------------------------------------\n\nTITLE: Example Invalid JWT Header and Payload for Oathkeeper\nDESCRIPTION: Illustrates the structure of a JSON Web Token (JWT) that is considered invalid by the example access rule configuration. It shows various deviations from the required claims (`iss`, `aud`, `scp`) and algorithm (`alg`) that would cause validation to fail.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_31\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"alg\": \"HS256\"\n}\n{\n  \"iss\": \"https://not-my-issuer.com/\",\n  \"aud\": [\"https://my-service.com/api/users\"],\n  \"scp\": [\"not-scope-a\", \"scope-b\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Native Recovery Flow - Ory Go SDK\nDESCRIPTION: Illustrates how to initiate a native password recovery flow for API clients using the Ory Go SDK, calling the 'createNativeRecoveryFlow' API endpoint. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Legacy Refresh Token Hook Payload Example - JSON\nDESCRIPTION: This snippet illustrates the JSON payload format expected by the legacy refresh token hook endpoint.  It includes details about the subject, client, and session, including ID token claims.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"subject\": \"foo\",\n  \"client_id\": \"bar\",\n  \"session\": {\n    \"id_token\": {\n      \"id_token_claims\": {\n        \"jti\": \"jti\",\n        \"iss\": \"http://localhost:4444/\",\n        \"sub\": \"foo\",\n        \"aud\": [\"bar\"],\n        \"iat\": 1234567,\n        \"exp\": 1234567,\n        \"rat\": 1234567,\n        \"auth_time\": 1234567,\n        \"nonce\": \"\",\n        \"at_hash\": \"\",\n        \"acr\": \"1\",\n        \"amr\": [],\n        \"c_hash\": \"\",\n        \"ext\": {}\n      },\n      \"headers\": {\n        \"extra\": {\n          \"kid\": \"key-id\"\n        }\n      },\n      \"username\": \"username\",\n      \"subject\": \"foo\",\n      \"expires_at\": 1234567\n    },\n    \"extra\": {},\n    \"client_id\": \"bar\",\n    \"consent_challenge\": \"\",\n    \"exclude_not_before_claim\": false,\n    \"allowed_top_level_claims\": [],\n    \"kid\": \"key-id\"\n  },\n  \"requester\": {\n    \"client_id\": \"bar\",\n    \"granted_scopes\": [\"openid\", \"offline\"],\n    \"granted_audience\": [],\n    \"grant_types\": [\"refresh_token\"]\n  },\n  \"granted_scopes\": [\"openid\", \"offline\"],\n  \"granted_audience\": []\n}\n```\n\n----------------------------------------\n\nTITLE: Example Registration API Response for SPA/Native Clients\nDESCRIPTION: Shows a sample JSON response from the Ory registration endpoint, specifically relevant for Single Page Applications (SPAs) and native clients. The `continue_with` array indicates potential next steps; in this case, it includes the `show_verification_ui` action along with the `flow.id` needed to fetch the verification flow details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"continue_with\": [\n    {\n      \"action\": \"show_verification_ui\",\n      \"flow\": {\n        \"id\": \"d859f6af-1dfe-453e-9320-d572e10edeea\",\n        \"verifiable_address\": \"example@ory.sh\"\n      }\n    }\n    // Other items\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring MFA via Ory CLI Commands\nDESCRIPTION: Provides CLI commands to list workspaces and projects, retrieve identity configuration in YAML format, enable MFA in the config, and update the configuration back to Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory list workspaces\nory list projects --workspace <workspace-id>\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n\n# Enable MFA in configuration YAML\ncode:\n  mfa_enabled: true\n\n# Update configuration in Ory\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with cURL (Browser)\nDESCRIPTION: This shell script showcases how to initiate a recovery flow in a browser environment with cURL. It sends a request to the `/self-service/recovery/browser` endpoint. Dependencies: cURL and access to the Ory API. Prerequisites: cURL and a configured Ory instance.  Expected input is the user's email, and the output is the API response. Limitations: Specific to browser flow and requires managing cookies for browser flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_27\n\nLANGUAGE: shell\nCODE:\n```\nimport createRecoveryCurlBrowser from '!!raw-loader!../../../code-examples/curl/recovery/create-recovery-browser.sh'\n```\n\n----------------------------------------\n\nTITLE: Configuring Message Retry Count in Ory Kratos Mail Courier YAML\nDESCRIPTION: This YAML snippet defines the 'message_retries' parameter under the 'courier' configuration, which sets the number of attempts the mail courier makes to deliver each message. The default is 5 retries. This applies to both SMTP server and SMS gateway deliveries. If the message fails after the specified retries, its status is set to 'Abandoned' and no further attempts are made.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/01_mail-courier-selfhosted.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# kratos -c path/to/my/kratos/config.yml serve\ncourier:\n  message_retries: 5\n```\n\n----------------------------------------\n\nTITLE: ory create project Inherited Option Flags Reference - Markdown\nDESCRIPTION: Lists option flags inherited from parent commands in the Ory CLI. Flags shown here, such as configuration file path and automatic confirmation, globally affect the behavior of the CLI. Users must ensure the specified configuration file exists, and the 'yes' flag suppresses interactive prompts, which is useful for automation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-project.md#_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Example Settings Flow JSON Response - First Name\nDESCRIPTION: This JSON snippet presents a sample response from the Ory API showing a text input for 'First Name' within the profile group. The 'name' attribute indicates the data point being collected, and the meta includes labels. The value attribute is empty at this stage, suggesting an input field for user interaction.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/profile.invalid.txt#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.name.first\",\n    \"type\": \"text\",\n    \"value\": \"\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"First Name\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Configuration to a File with Ory CLI - Bash\nDESCRIPTION: This snippet illustrates how to save the Ory Identities configuration to a YAML file using the Ory CLI. The command fetches the configuration in YAML format and redirects the output to 'identity-config.yaml', making it directly usable for self-hosted Ory Kratos instances. Required parameters include <project-id> and <workspace-id>. Prerequisite: User must be signed into Ory Network and have access to the relevant project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/15_config-identity-service.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Applying SQL Migrations Using Docker for Ory Hydra OEL\nDESCRIPTION: This command runs a Docker container to apply SQL migrations to the database for Ory Hydra OEL. The environment variable `DSN` must be set to the database connection string. The command executes the migration command `migrate sql up` with verbosity and configuration file path specified. This step is mandatory before starting the new service version to ensure the database schema is up-to-date.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ndocker run \\\n  -e DSN=your_database_connection_string \\\n  europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel:<new-version-tag> \\\n  -- migrate sql up -e -f /path/to/config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating an SSO OIDC Connection for an Organization - Bash (curl + JSON)\nDESCRIPTION: Uses the PATCH method with a JSON PATCH payload to add a new SSO OIDC connection to an Ory project configuration. Requires PROJECT_ID, WORKSPACE_API_KEY, the JSON payload conforming to the Ory API structure, and the Content-Type header. The payload includes parameters like client_id, client_secret, organization_id, and provider, among others. The jq utility is used to filter the resulting JSON output to relevant data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X PATCH --location \"https://api.console.ory.sh/projects/$PROJECT_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '[\n           {\n             \"op\": \"add\",\n             \"path\": \"/services/identity/config/selfservice/methods/oidc/config/providers/-\",\n             \"value\": {\n               \"client_id\": \"...\",\n               \"client_secret\": \"...\",\n               \"id\": \"ory-GPx1yPH4\",\n               \"issuer_url\": \"https://example.org\",\n               \"label\": \"My OIDC provider\",\n               \"mapper_url\": \"base64://ZnVuY3Rpb24oY3R4KSBjdHg=\",\n               \"organization_id\": \"6bb1c7d1-3b3e-4995-9e09-35649dc45a2b\",\n               \"provider\": \"generic\",\n               \"pkce\": \"auto\", # or \"force\", \"never\", see note on redirect URL below\n               \"scope\": [\"openid\", \"offline_access\", \"email\"]\n             }\n           }\n         ]' \\\n   | jq \".project.services.identity.config.selfservice.methods.oidc.config.providers\"\n```\n\n----------------------------------------\n\nTITLE: Submitting Recovery Flow - Ory Go SDK\nDESCRIPTION: Presents how to submit user input to complete a password recovery flow using the Ory Go SDK's 'updateRecoveryFlow' endpoint. This typically involves submitting an email address or other recovery identifier. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_11\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Exporting Workspace ID Environment Variable in Shell\nDESCRIPTION: Illustrates exporting the workspace ID as an environment variable named ORY_WORKSPACE, which is necessary for subsequent CLI management commands to target the correct workspace context.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nexport ORY_WORKSPACE=885a2468-c23d-40df-a783-c941387a8701\n```\n\n----------------------------------------\n\nTITLE: Mapping GitLab Claims to Ory Identity Schema with Jsonnet - Jsonnet\nDESCRIPTION: This Jsonnet snippet assigns email traits to the Ory identity schema based on claims retrieved from GitLab. It prevents unverified emails from being mapped by checking both the existence of 'email' and its verification status. Dependencies: The context expects claims from std.extVar('claims'); used for identity data mapping in Ory social sign-in configuration. Input: claims object. Output: JSON object with validated traits. Limitation: Only verified emails are mapped to prevent account enumeration risks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by GitLab.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Changing Polymorphic Object Type from interface{} to json.RawMessage in Go\nDESCRIPTION: This code demonstrates a change from using `interface{}` to `json.RawMessage` for polymorphic fields in Go structs.  This improves flexibility and avoids issues with marshalling and unmarshalling arbitrary JSON structures. The patch notation indicates what changed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_10\n\nLANGUAGE: patch\nCODE:\n```\n// Some model\n//\n// swagger:model someModel\ntype someModel struct {\n-    Polymorph interface{} `json:\"polymorph\"`\n+    Polymorph json.RawMessage `json:\"polymorph\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Add Custom Claims to JWT Access Token via MDX\nDESCRIPTION: This documentation snippet utilizes MDX raw-loader to embed an external TypeScript code example showing how to add custom claims to an access token during the OAuth2 consent flow. The TypeScript code, using the Ory SDK, intercepts the consent process to inject specific data into the token payload. This allows for enriching the access token with application-specific information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_3\n\nLANGUAGE: MDX\nCODE:\n```\nimport customClaimTsExample from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/consent-custom-claim.ts'\n\n<CodeBlock language=\"tsx\">{customClaimTsExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Mapping Discord Claims to Ory Identity Traits using Jsonnet - Jsonnet\nDESCRIPTION: This Jsonnet snippet defines a mapping that securely populates the Ory Identity schema traits with Discord OAuth2 claim data. It ensures only verified emails are assigned, mitigating account enumeration risks. The mapping requires the external 'claims' object and supports conditional assignment based on verification, returning the email only if it exists and is marked as verified.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by Discord.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring ASP.NET Core for Razor Pages Routing (C#)\nDESCRIPTION: Updates `Program.cs` to register Razor Pages services using `builder.Services.AddRazorPages()`. It also configures the application's endpoint routing middleware using `app.MapRazorPages()`, replacing the default \"Hello World\" endpoint to enable routing requests to the created Razor Pages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_6\n\nLANGUAGE: csharp\nCODE:\n```\nusing Ory.Client.Api;\nusing Ory.Client.Client;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// configure http port explicitly to override generated settings from launchSettings.json\nbuilder.WebHost.ConfigureKestrel(opt => {\n\tvar port = builder.Configuration.GetValue<int>(\"APP_PORT\", 3000);\n});\n\n// add-lines-start\n// add support for RazorPages\nbuilder.Services.AddRazorPages();\n// add-lines-end\n\nvar app = builder.Build();\n\n// create a new Ory Client with the BasePath set to the Ory Tunnel enpoint\nvar oryBasePath = builder.Configuration.GetValue<string>(\"ORY_BASEPATH\") ?? \"http://localhost:4000\";\nvar ory = new FrontendApi(new Configuration\n{\n\tBasePath = oryBasePath\n});\n\n// add session middleware\napp.Use(async (ctx, next) =>\n{\n\tasync Task Login()\n\t{\n\t\t// this will redirect the user to the managed Ory Login UI\n\t\tvar flow = await ory.CreateBrowserLoginFlowAsync() ?? throw new InvalidOperationException(\"Could not create browser login flow\");\n\t\tctx.Response.Redirect(flow.RequestUrl);\n\t}\n\n\ttry\n\t{\n\t\t// check if we have a session\n\t\tvar session = await ory.ToSessionAsync(cookie: ctx.Request.Headers.Cookie, cancellationToken: ctx.RequestAborted);\n\t\tif (session?.Active is not true)\n\t\t{\n\t\t\tawait Login();\n\t\t\treturn;\n\t\t}\n\n\t\t// add session to HttpContext\n\t\tctx.Items[\"req.session\"] = session;\n\t}\n\tcatch (ApiException)\n\t{\n\t\tawait Login();\n\t\treturn;\n\t}\n\n\tawait next(ctx);\n});\n\n// add-lines-start\n// configure pipeline to use RazorPages\napp.MapRazorPages();\n// add-lines-end\n// delete-next-line\napp.MapGet(\"/\", () => \"Hello World!\");\n\napp.Run();\n```\n\n----------------------------------------\n\nTITLE: Refactor permissions in OPL TypeScript\nDESCRIPTION: Refactors the permission model in OPL using TypeScript to create a hierarchical structure. This allows simplifying the view, edit, delete permissions by chaining them. It depends on the existing permission definitions.  The input is a Context object containing the subject (user). The output is a boolean indicating whether the user has the specific access, now determined via chained permission checks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\nclass User implements Namespace {}\n\nclass Document implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n\n  permits = {\n    view: (ctx: Context): boolean =>\n      this.related.viewers.includes(ctx.subject) ||\n      //highlight-next-line\n      this.permits.edit(ctx),\n    edit: (ctx: Context): boolean =>\n      this.related.editors.includes(ctx.subject) ||\n      //highlight-next-line\n      this.permits.share(ctx),\n    delete: (ctx: Context): boolean =>\n      //highlight-next-line\n      this.permits.share(ctx),\n    share: (ctx: Context): boolean =>\n      this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.share(ctx)),\n  }\n}\n\nclass Folder implements Namespace {\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n\n  permits = {\n    delete: (ctx: Context): boolean =>\n      //highlight-next-line\n      this.permits.share(ctx),\n    share: (ctx: Context): boolean =>\n      this.related.owners.includes(ctx.subject) || this.related.parents.traverse((parent) => parent.permits.share(ctx)),\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Bearer Token Authenticator Globally (ORY Oathkeeper) - YAML\nDESCRIPTION: This YAML snippet shows how to configure the `bearer_token` authenticator in the global `oathkeeper.yml` file. It demonstrates enabling the authenticator, setting the required `check_session_url` for token validation, and configuring the `token_from` option to specify the HTTP header where the bearer token is expected.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  bearer_token:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      check_session_url: https://session-store-host\n      token_from:\n        header: Custom-Authorization-Header\n        # or\n        # query_parameter: auth-token\n        # or\n        # cookie: auth-token\n```\n\n----------------------------------------\n\nTITLE: Patching Identity Configuration for Custom Domain Redirect\nDESCRIPTION: CLI command to update the base_redirect_uri configuration in an Ory project to use a custom domain for social sign-in redirects. This is needed when a provider requires domain ownership verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/25_social-sign-in.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> --add '/selfservice/methods/oidc/config/base_redirect_uri=\"https://ory.your-custom-domain.com\"'\n```\n\n----------------------------------------\n\nTITLE: Usage: hydra migrate sql basic syntax (CLI)\nDESCRIPTION: Provides the basic command-line syntax for executing the `hydra migrate sql` command. It typically requires a database URL argument and accepts various optional flags to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-sql.md#_snippet_0\n\nLANGUAGE: cli\nCODE:\n```\nhydra migrate sql <database-url> [flags]\n```\n\n----------------------------------------\n\nTITLE: Querying Ory Hydra OpenID Configuration (Shell)\nDESCRIPTION: This shell command uses `curl` to retrieve the OpenID Connect discovery document from an Ory Hydra instance and formats the JSON output using `jq`. This is useful for verifying the correct endpoint URLs (`authorization_endpoint`, `token_endpoint`, `userinfo_endpoint`, etc.) required for the GitLab configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\ncurl http://127.0.0.1:4444/.well-known/openid-configuration | jq .\n```\n\n----------------------------------------\n\nTITLE: Retrieving and Saving Ory Identity Configuration (Shell)\nDESCRIPTION: Presents a sequence of shell commands using the `ory` CLI to first discover available workspaces and projects, then download the identity configuration for a specific project and workspace. The downloaded configuration is saved in YAML format to the file `identity-config.yaml`, serving as the basis for adding the Lark provider configuration. Requires the `ory` CLI and appropriate project/workspace IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/81_lark.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Updating Identity Configuration\nDESCRIPTION: Updates the Ory Identities configuration using the modified YAML file.  This command applies the changes made to the configuration file, enabling the custom SMTP server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file updated_config.yaml\n```\n\n----------------------------------------\n\nTITLE: Testing Ory Hydra Deployment with cURL\nDESCRIPTION: Shell commands to test if Ory Hydra deployment is working properly by making HTTP requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_14\n\nLANGUAGE: sh\nCODE:\n```\ncurl http://example-idp.localhost/\nhttp://public.hydra.localhost/.well-known/openid-configuration\n```\n\n----------------------------------------\n\nTITLE: Configuring BCrypt Cost in YAML\nDESCRIPTION: This YAML snippet configures the 'cost' option for the BCrypt hasher. The 'cost' parameter determines the computational cost for hashing, which impacts security (higher cost = more secure) but also performance. The example sets the cost to 12. This parameter is configured within the 'bcrypt' sub-section of the 'hashers' section. The default value is 12. The expected output is a specified cost value to be used when hashing passwords.  The maximum length for passwords is 72 bytes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/password.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\n```yaml title=\"config.yml\"\nhashers:\n  bcrypt:\n    cost: 12\n```\n```\n\n----------------------------------------\n\nTITLE: JSON Configuration Example for Email Sender\nDESCRIPTION: This JSON snippet demonstrates a configuration file for modifying the email sender name within an Ory project. It targets the `courier.smtp.from_name` setting under the `services.identity.config` key. This configuration can be used to change the email sender name for recovery and verification emails within the Ory ecosystem. This file is intended to be imported or used to overwrite existing configurations using the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/10_config-with-cli.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"My Project Name\",\n  \"services\": {\n    \"identity\": {\n      \"config\": {\n        \"courier\": {\n          \"smtp\": {\n            \"from_name\": \"My Custom E-Mail Name\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Running Token Introspection Hydra CLI Command - Bash\nDESCRIPTION: This snippet demonstrates the shell usage of the 'hydra introspect token' command to introspect an OAuth 2.0 access or refresh token. Requires 'hydra' CLI to be installed and accessible in the system PATH. The 'the-token' placeholder should be replaced with the actual token string to be introspected. Optional flags include '--scope' to check granted scopes and inherited options to specify endpoint, output format, HTTP headers, and TLS verification behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-introspect-token.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra introspect token the-token [flags]\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions Using Keto CLI Commands\nDESCRIPTION: These bash commands demonstrate how to check if the user 'Dilan' has certain permissions on reports of different groups using the Keto CLI. The output shows 'Allowed' or 'Denied' based on the defined permissions, illustrating effective access control enforcement for an RBAC model.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nketo check Dilan view reports finance\nDenied\nketo check Dilan view reports community\nAllowed\nketo check Dilan edit reports community\nDenied\n```\n\n----------------------------------------\n\nTITLE: Initializing Registration Flow for Browser Clients - Ory Identities - shell-session\nDESCRIPTION: This 'curl' command initializes the registration flow for browser-based clients. It sends a GET request to the Ory Identities endpoint with 'Accept: text/html', expecting an HTTP 303 redirect in response. The flow ID is attached as a query parameter to the redirect URL. Prerequisites: network access to the Ory deployment. The output includes HTTP headers and a link to the registration UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_2\n\nLANGUAGE: shell-session\nCODE:\n```\ncurl -s -i -X GET \\\n    -H \"Accept: text/html\" \\\n    https://playground.projects.oryapis.com/self-service/registration/browser\n\nHTTP/2 303\n...\nlocation: https://playground.projects.oryapis.com/hosted/registration?flow=6c2ae96c-8486-42f0-91f9-f654eccd09fb\n...\n<a href=\"https://playground.projects.oryapis.com/hosted/registration?flow=6c2ae96c-8486-42f0-91f9-f654eccd09fb\">See Other</a>.\n\n```\n\n----------------------------------------\n\nTITLE: Fetching Verification Flow State using cURL and jq in Shell\nDESCRIPTION: This shell script command sends an HTTP GET request to a local verification flow endpoint with the specified flow ID as a query parameter, requesting the response in JSON format. It uses jq to parse the JSON response and extract the value of the \\\"state\\\" field. The snippet requires cURL and jq tools installed, expects the flow ID as input, and outputs the verification flow state string such as \\\"passed_challenge\\\". It assumes the service runs locally on port 4433 and the flow ID is valid.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.passed.txt#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'http://127.0.0.1:4433/self-service/verification/flows?id=78815659-b7d5-4c28-8327-5c86a5589ed8' | \\\n      jq -r '.state'\n```\n\n----------------------------------------\n\nTITLE: Configuring Before/After Identity Creation Webhooks in Ory YAML\nDESCRIPTION: Shows how to define two separate webhooks in YAML with different `response.parse` settings (`true` and `false`) to execute logic both *before* and *after* the identity creation process when using an `after` registration hook.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_17\n\nLANGUAGE: yaml\nCODE:\n```\n- hook: web_hook\n  config:\n    response:\n      parse: true\n- hook: web_hook\n  config:\n    response:\n      parse: false\n```\n\n----------------------------------------\n\nTITLE: Configuring the Ory Hydra Go SDK Client\nDESCRIPTION: Initializes the Ory Hydra Go SDK client configuration. It demonstrates setting the `Servers` property with the appropriate URLs for the Admin and Public APIs (typically running on different ports or paths).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  client \"github.com/ory/hydra-client-go\"\n)\n\nfunc main() {\n  configuration := client.NewConfiguration()\n  configuration.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4445\", // Admin API URL\n    },\n  }\n  // admin := client.NewAPIClient(configuration)\n  // admin.OAuth2Api.CreateOAuth2Client(...\n\n  configuration.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4445\", // Public API URL\n    },\n  }\n\n  // hydraPublic := client.NewAPIClient(configuration)\n  // public.PublicApi.RevokeOAuth2Token(...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Token Lifespan for Specific Clients (SDK)\nDESCRIPTION: This code block demonstrates how to configure the lifespan of tokens for specific clients using the Ory SDK.  The provided example is expected to contain TypeScript code (TSX) and will utilize the `CodeBlock` component.  It is expected that this component is rendering a code example from a separate file.  The content of this file is not shown, but it would likely involve API calls to Ory to modify specific clients' configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport tsExample from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-lifespan.ts'\n\n<CodeBlock language=\"tsx\">{tsExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Identity Configuration via CLI (Shell)\nDESCRIPTION: Provides Ory CLI commands to list available workspaces and projects, then retrieves the identity configuration for a specified project and workspace, saving it in YAML format to a file named `identity-config.yaml`. Requires the Ory CLI to be installed and authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Deleting Relationships in Ory CLI\nDESCRIPTION: This command deletes relationships from the Ory platform. It takes various flags to specify which relationships to delete, including options for deleting all relationships, specifying the namespace, object, relation, subject ID, subject set, and using a project or workspace. The `--force` flag allows the deletion to proceed without confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-relationships.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nory delete relationships [flags]\n```\n\n----------------------------------------\n\nTITLE: Resolving Subject Mismatch Errors Using Login Hint in Ory OAuth2 - Text\nDESCRIPTION: This text snippet explains the issue encountered when a user attempts to log in as a different subject using the 'login_hint' parameter, which results in a subject mismatch error. It outlines the recommended steps to handle this: fetching the OAuth2 login request, checking the 'subject' and 'login_hint', and, if different, redirecting the user with '?prompt=login' appended. This forces Ory to restart the flow and allow authentication for a different subject. The instructions require familiarity with Ory's API and login request handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/openid.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\nSubject from payload doesn't match subject from previous authentication\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Header Mutator Globally (YAML)\nDESCRIPTION: This YAML snippet configures the Oathkeeper header mutator at the global configuration file (oathkeeper.yml) level. It sets the mutator as enabled, and specifies headers to be injected into requests using Go text template expressions accessing the authenticated subject and other session data. Requires Oathkeeper and Go template support. Keys and values can be dynamic, with input from the AuthenticationSession struct.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nmutators:\n  header:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n    config:\n      headers:\n        X-User: \"{{ print .Subject }}\"\n        X-Some-Arbitrary-Data: \"{{ print .Extra.some.arbitrary.data }}\"\n\n```\n\n----------------------------------------\n\nTITLE: Example: Creating a JWKS with RS256 Algorithm - Shell\nDESCRIPTION: This example illustrates how to invoke the Ory CLI to create a JWKS named '<my-jwk-set>' using the RS256 algorithm for signing ('sig' use case). The '--alg' flag specifies the signing algorithm, while '--use' sets the intended key purpose. Ory CLI must be installed and configured; valid project or workspace context is required. The command outputs the generated JWKS, which can be used within Ory-enabled authentication systems.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-jwk.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory create jwk <my-jwk-set> --alg RS256 --use sig\n```\n\n----------------------------------------\n\nTITLE: Creating Organizations and Managing SAML SSO via Ory API (shell)\nDESCRIPTION: These shell snippets demonstrate how to use curl commands to manage organizations and enable SAML authentication in Ory Network. The first snippet creates an organization with a descriptive label and domain list by sending an authenticated POST request to the organizations endpoint. The second snippet enables SAML authentication by patching the project configuration to set the SAML method to enabled. The third snippet adds a new SAML connection provider with metadata, a mapper URL, and an associated organization ID using a JSON Patch payload. Each command requires environment variables for authorization (API key) and project context (project ID). Response filtering with jq is used to extract updated SAML configuration information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X POST --location \"https://api.console.ory.sh/projects/$PROJECT_ID/organizations\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\n           \"label\":  \"SAML organzation\",\n           \"domains\": [\"example.com\"]\n         }'\n```\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X PATCH --location \"https://api.console.ory.sh/projects/$PROJECT_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '[\n           {\n             \"op\": \"replace\",\n             \"path\": \"/services/identity/config/selfservice/methods/saml/enabled\",\n             \"value\": true\n           }\n         ]' \\\n   | jq \".project.services.identity.config.selfservice.methods.saml\"\n```\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X PATCH --location \"https://api.console.ory.sh/projects/$PROJECT_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '[\n           {\n             \"op\": \"add\",\n             \"path\": \"/services/identity/config/selfservice/methods/saml/config/providers/-\",\n             \"value\": {\n               \"id\": \"some-provider-id\",\n               \"label\": \"My SAML provider\",\n               \"mapper_url\": \"base64://...\",\n               \"raw_idp_metadata_xml\": \"base64://...\",\n               \"organization_id\": \"$ORGANIZATION_ID\"\n             }\n           }\n         ]' \\\n   | jq \".project.services.identity.config.selfservice.methods.saml\"\n```\n\n----------------------------------------\n\nTITLE: Updating Identity Schema with cURL PATCH Method\nDESCRIPTION: Using cURL to patch an identity with a new schema ID, removing and adding traits via the Ory Admin API PATCH endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request PATCH \"https://$ORY_SLUG.projects.oryapis.com/admin/identities/$IDENTITY_ID\" \\\n--header \"Authorization: Bearer $ORY_API_KEY\" \\\n--header \"Content-Type: application/json\" \\\n--data-raw '[\n{\n    \"op\": \"replace\",\n    \"path\": \"/schema_id\",\n    \"value\": \"{new-schema-id}\"\n},\n{\n    \"op\": \"remove\",\n    \"path\": \"/traits/foo\"\n},\n{\n    \"op\": \"add\",\n    \"path\": \"/traits/bar\",\n    \"value\": \"barfoo\"\n}\n]'\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions with Ory CLI\nDESCRIPTION: Demonstrates permission checks using the Ory CLI, showing how transitive permissions work for objects in hierarchies and fine-grained permissions for specific objects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory is allowed User:Patrik view File keto/src/main.go\nAllowed\n```\n\nLANGUAGE: shell\nCODE:\n```\nory is allowed User:Patrik view File private\nDenied\n```\n\nLANGUAGE: shell\nCODE:\n```\nory is allowed User:Henning view File private\nAllowed\n\nory is allowed User:Henning edit File private\nAllowed\n```\n\n----------------------------------------\n\nTITLE: Update OAuth2/OpenID Connect client dynamically via SDK or REST API\nDESCRIPTION: This snippet outlines updating a dynamically registered OAuth2 or OpenID Connect client through SDK code or REST API calls, requiring the `registration_access_token` for authentication. It allows modification of client properties post-registration, supporting flexible client management with secure token usage.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_7\n\nLANGUAGE: Shell\nCODE:\n```\n```mdx-code-block\nimport dynamicUpdateTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/dynamic-client-update.ts'\n\n<Codes language=\"tsx\">{dynamicUpdateTs}</Codes>\n```\n```\n\nLANGUAGE: Markdown\nCODE:\n```\nSee [API documentation](../../reference/api#tag/oAuth2/operation/setOidcDynamicClient).\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTP Client Restrictions in Ory Hydra (YAML)\nDESCRIPTION: This YAML configuration snippet demonstrates how to prevent Ory Hydra from making outgoing HTTP calls to private IP ranges. Setting `disallow_private_ip_ranges` to `true` under the `clients.http` key enforces this restriction, causing requests to private IPs to fail.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/production.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nclients:\n  http:\n    disallow_private_ip_ranges: true\n```\n\n----------------------------------------\n\nTITLE: Listing User-Specific Sessions in Go (Administrative)\nDESCRIPTION: Uses the initialized Go SDK client to list all sessions for a specific user identity via the administrative API. Requires the user's Identity ID and an API Key. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_13\n\nLANGUAGE: go\nCODE:\n```\nimport goGetIdentitySessions from '!!raw-loader!../../../code-examples/sdk/go/session/get-identity-sessions.go'\n\n<CodeBlock language=\"go\">{goGetIdentitySessions}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Exporting Project Identities Configuration with Ory CLI - Bash\nDESCRIPTION: This snippet demonstrates how to use the Ory CLI to list workspaces, list projects within a workspace, and retrieve the identity configuration for a specific project and workspace in YAML format. Requires an active Ory Network account and a completed authentication step. The `--format` flag can be set to 'yaml', 'json', or 'json-pretty'. Outputs the fetched configuration to stdout. Limitations: The user must have appropriate permissions and a valid network connection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/15_config-identity-service.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml\n```\n\n----------------------------------------\n\nTITLE: Setting OIDC Providers via Environment Variable - Shell\nDESCRIPTION: This shell snippet demonstrates how to configure OIDC providers using an environment variable in Ory Kratos.  Due to the complexity of the OIDC configuration object, setting the full JSON array as an environment variable is recommended. The `SELFSERVICE_METHODS_OIDC_CONFIG_PROVIDERS` variable stores a JSON array containing the provider's configuration, including the ID, provider type, mapper URL, client ID, client secret, scopes, authentication URL, token URL, and issuer URL.  Correct JSON syntax is crucial.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/oidc.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nexport SELFSERVICE_METHODS_OIDC_CONFIG_PROVIDERS='[{\"id\":\"google\",\"provider\":\"google\",\"mapper_url\":\"<file_location>\",\"client_id\":\"<client_id>\",\"client_secret\":\"<client_secret>\",\"scope\":[\"openid\",\"email\",\"profile\"],\"auth_url\":\"https://accounts.google.com/o/oauth2/v2/auth\",\"token_url\":\"https://www.googleapis.com/oauth2/v4/token\",\"issuer_url\":\"https://accounts.google.com\"}]'\n```\n\n----------------------------------------\n\nTITLE: Revoking Other User Sessions in React (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK within a React component to revoke all active sessions for the authenticated user except the current one via the self-service frontend API. Requires the Ory Session Cookie and proper CORS configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport revokeOtherSessionsReact from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/revoke-other-sessions-react.tsx\"\n\n<CodeBlock language=\"ts\" title=\"revoke-other-sessions-react.tsx\">{revokeOtherSessionsReact}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Using 'ory tunnel' command in Shell for local development\nDESCRIPTION: This shell snippet demonstrates how to start Ory Tunnel by specifying project, workspace, and application URL, exposing Ory API endpoints for local application development without CORS issues.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/20_proxy-and-tunnel.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --project <project-id> --workspace <workspace-id> http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Describing Password Node Structure from Ory Registration Flow - JSON\nDESCRIPTION: This JSON object represents the structure and metadata of the password field node in the Ory self-service registration flow user interface. It includes node details such as input type, name, required status, and error messages tied to password reuse policies. It is expected as part of the registration API response, with key fields indicating constraints (e.g., passwords found in breaches are rejected) and UI labels for client presentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/password.policy.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"password\",\n    \"type\": \"password\",\n    \"required\": true,\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000005,\n      \"text\": \"The password can't be used because the password has been found in data breaches and must no longer be used.\",\n      \"type\": \"error\",\n      \"context\": {\n        \"reason\": \"the password has been found in data breaches and must no longer be used.\"\n      }\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070001,\n      \"text\": \"Password\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Error Handling in Ory Oathkeeper (YAML)\nDESCRIPTION: Configures error handling in Oathkeeper (`oathkeeper.yml`). It sets JSON as the default fallback error format. A `redirect` handler is enabled to redirect users to the login page (`http://127.0.0.1:4455/login`) when an `unauthorized` or `forbidden` error occurs, but only for requests accepting `text/html` (typically browsers). A `json` handler is also enabled with verbose output for other types of requests or errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nerrors:\n  fallback:\n    - json\n\n  handlers:\n    redirect:\n      enabled: true\n      config:\n        to: http://127.0.0.1:4455/login\n        when:\n          - error:\n              - unauthorized\n              - forbidden\n            request:\n              header:\n                accept:\n                  # We don't want this for application/json requests, only browser requests!\n                  - text/html\n    json:\n      enabled: true\n      config:\n        verbose: true\n```\n\n----------------------------------------\n\nTITLE: Performing Native Logout - Ory Go SDK\nDESCRIPTION: Demonstrates how to log out a user for API clients using the Ory Go SDK's 'performNativeLogout' endpoint. This invalidates the current session. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_17\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: SMTP Configuration Example\nDESCRIPTION: Provides a YAML configuration snippet for configuring the SMTP delivery strategy.  This involves specifying the connection URI, sender address, and sender name. The username and password within the URI must be URI encoded.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n```yaml title=\"config.yml\"\ncourier:\n  delivery_strategy: smtp\n  smtp:\n    connection_uri: smtp://username:password@server:port/\n    from_address: hello@example.org\n    from_name: My Company\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Ory OAuth2 Scope Claim Configuration via CLI (Shell)\nDESCRIPTION: This shell command uses the Ory CLI to change the JWT '/strategies/jwt/scope_claim' configuration for a given project. The '{project.id}' parameter must be replaced with the actual Ory project identifier. This requires the Ory CLI to be installed and the user to have proper permissions. Expected input is a valid project ID and the desired scope claim mode. The command updates the project configuration in-place.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/claims-scope.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config {project.id} \\\n  --replace '/strategies/jwt/scope_claim=\"string\"'\n```\n\n----------------------------------------\n\nTITLE: Synopsis of hydra perform client-credentials Command\nDESCRIPTION: Basic command structure for performing the OAuth 2.0 Client Credentials Flow using the Hydra CLI. It shows the command name and the placeholder for optional flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-client-credentials.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra perform client-credentials [flags]\n```\n\n----------------------------------------\n\nTITLE: Generating Self-Signed TLS Certificates for Ory Kratos - Shell Script\nDESCRIPTION: This snippet shows how to use OpenSSL to generate a 4096-bit RSA private key and a self-signed X.509 certificate, which are required for configuring HTTPS in Ory Kratos. It also demonstrates how to encode the certificate and key as base64 strings suitable for use as environment variables or how to specify their file paths for mounting in a container. Required dependencies: OpenSSL, base64, and access to a shell environment. Expected input is no arguments (the commands are run as-is); output includes key.pem and cert.crt files and corresponding base64-encoded environment variables.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/https-tls.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nopenssl genrsa -out key.pem 4096\nopenssl req -new -x509 -sha256 -key key.pem -out cert.crt -days 365\n\nSERVE_PUBLIC_TLS_CERT_BASE64=$(base64 -i cert.crt)\nSERVE_PUBLIC_TLS_KEY_BASE64=$(base64 -i key.pem)\nSERVE_ADMIN_TLS_CERT_BASE64=$(base64 -i cert.crt)\nSERVE_ADMIN_TLS_KEY_BASE64=$(base64 -i key.pem)\n\n# or\n\nSERVE_PUBLIC_TLS_KEY_PATH=/path/to/key.pem\nSERVE_PUBLIC_TLS_CERT_PATH=/path/to/cert.crt\nSERVE_ADMIN_TLS_KEY_PATH=/path/to/key.pem\nSERVE_ADMIN_TLS_CERT_PATH=/path/to/cert.crt\n```\n\n----------------------------------------\n\nTITLE: keto check Command Usage\nDESCRIPTION: Shows the command-line usage for the `keto check` command. This command checks if a subject has a specific relation to an object within a given namespace. It resolves subject sets and subject set rewrites.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-check.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo check <subject> <relation> <namespace> <object> [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Spotify Social Sign-In Using Ory Console - Jsonnet\nDESCRIPTION: Provides the Jsonnet snippet used in Ory Console data mapping to map Spotify user claims (specifically the email) to the Ory Identity schema. This snippet runs during social sign-in and transforms Spotify's user info into traits consumed by Ory. Requires the 'claims' external variable provided by Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      email: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Hydra Update OAuth2 Client Command\nDESCRIPTION: This command updates an existing OAuth 2.0 client by its ID. It replaces the entire client configuration, and if only the name flag is provided, all other fields are updated to their default values.  Requires the Hydra CLI to be installed and configured. The command takes the client ID as an argument, along with several flags for specifying client properties.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-update-oauth2-client.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nhydra update oauth2-client [id] [flags]\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Kratos System User and Directory Structure Using Bash Shell\nDESCRIPTION: Creates a dedicated system user 'kratos' with no login shell for security and sets up the directory structure needed to hold binaries and configuration files for Ory Kratos.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nuseradd -s /bin/false -m -d /opt/kratos kratos\n```\n\nLANGUAGE: bash\nCODE:\n```\nmkdir /opt/kratos/{bin,config}\n```\n\n----------------------------------------\n\nTITLE: Displaying Options for kratos lint CLI\nDESCRIPTION: Shows the command-line options available for the `kratos lint` command. The `-h` or `--help` flag is documented as the option to display help information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-lint.md#_snippet_0\n\nLANGUAGE: cli\nCODE:\n```\n-h, --help   help for lint\n```\n\n----------------------------------------\n\nTITLE: Running Ory Keto Database Migrations using CLI\nDESCRIPTION: Executes the necessary SQL database schema migrations required after upgrading Ory Keto to a newer version. This command ensures database compatibility with the new software version and must be run as part of the upgrade procedure. Refer to the `keto migrate` CLI documentation for more details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/upgrade.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo migrate\n```\n\n----------------------------------------\n\nTITLE: YAML Configuration with Sub-keys\nDESCRIPTION: This snippet demonstrates a YAML configuration with sub-keys. It shows how to define nested configuration options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\noauth2:\n  require_client_auth: true\n```\n\n----------------------------------------\n\nTITLE: Installing and Running Nancy for Go - Go and Shell\nDESCRIPTION: Shows how to install and run Nancy, a Go dependency vulnerability scanner. Includes shell command to install Nancy globally, and a pipeline command to list all modules and scan them. Intended for Go projects with or without module support. Outputs vulnerability reports for dependency chains.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_15\n\nLANGUAGE: shell\nCODE:\n```\n# Outside of a go module-enabled project:\n  go get -u github.com/sonatype-nexus-community/nancy\n\n# Inside your go module-enabled project:\n  go mod list -m all | nancy\n\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth2 Introspection Authenticator Globally in Oathkeeper\nDESCRIPTION: This YAML snippet demonstrates how to configure the `oauth2_introspection` authenticator at the global level in the Oathkeeper configuration file (`oathkeeper.yml`). It sets the introspection endpoint URL, scope strategy, required scopes, target audience, trusted issuers, pre-authorization settings, bearer token location, additional introspection request headers, retry policy, and caching options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_22\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  oauth2_introspection:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      introspection_url: https://my-website.com/oauth2/introspection\n      scope_strategy: exact\n      required_scope:\n        - photo\n        - profile\n      target_audience:\n        - example_audience\n      trusted_issuers:\n        - https://my-website.com/\n      pre_authorization:\n        enabled: true\n        client_id: some_id\n        client_secret: some_secret\n        scope:\n          - introspect\n        token_url: https://my-website.com/oauth2/token\n      token_from:\n        header: Custom-Authorization-Header\n        # or\n        # query_parameter: auth-token\n        # or\n        # cookie: auth-token\n      introspection_request_headers:\n        x-forwarded-proto: https\n      retry:\n        max_delay: 300ms\n        give_up_after: 2s\n      cache:\n        enabled: true\n        ttl: 60s\n```\n\n----------------------------------------\n\nTITLE: ID Token Claims Configuration with JSON\nDESCRIPTION: This JSON snippet defines a configuration for the `id_token` mutator, specifically setting custom claims within the `config` field. The `claims` field contains a JSON string that specifies the custom claims, the audience (`aud`) and a `def` claim that uses a Go template. It transforms request claims and includes them in the generated ID Token (JWT). The `claims` field accepts a JSON string that contains Go templates to retrieve data from the authentication session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"handler\": \"id_token\",\n  \"config\": {\n    \"claims\": \"{\\\"aud\\\": [\\\"https://my-backend-service/some/endpoint\\\"],\\\"def\\\": \\\"{{ print .Extra.some.arbitrary.data }}\\\"}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Require Verified Address for Login - Ory Login Flow Hook - Diff\nDESCRIPTION: This diff snippet adds a hook to the Ory selfservice login flow that requires users to have a verified address before authentication is permitted. The added configuration is a hook: require_verified_address under login:after:hooks. This should be merged into the selfservice section of the Ory Identities YAML configuration and requires appropriate hook support in your deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_5\n\nLANGUAGE: diff\nCODE:\n```\nselfservice:\n  flows:\n    login:\n+     after:\n+       hooks:\n+       - hook: require_verified_address\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration via CLI\nDESCRIPTION: Provides the shell command using the Ory CLI to update the identity configuration for a specific project using the modified YAML file. This command applies the changes made to the configuration file, including enabling Lookup Secrets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/25_lookup-secrets.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Visualizing OAuth2 Resource Owner Password Credentials Grant Flow using Mermaid (MDX)\nDESCRIPTION: This snippet uses Mermaid inside an MDX component to visualize the sequence of operations involved in the OAuth2 resource owner password credentials grant flow. It shows the interactions between the User, Client, and Authorization Server, detailing the exchange of username, password, and access token. The snippet depends on MDX environment and Mermaid integration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/resource-owner-password-grant.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\";\n\n<Mermaid\n  chart={`sequenceDiagram\n    participant User\n    participant Client\n    participant Authorization Server\n    User->>Client: Provide username and password\n    Client->>Authorization Server: POST /oauth2/token\n    Authorization Server->>Authorization Server: Validate credentials against Ory Identities\n    Authorization Server->>Client: Sends access token\n    Client->>User: Use access token\n`} />\n```\n\n----------------------------------------\n\nTITLE: Adjusting Specific Configuration Keys in Ory Permissions\nDESCRIPTION: Command to modify specific configuration keys using the patch operation. This example sets the maximum read depth limit to 3.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch permission-config --project <project-id> --workspace <workspace-id> \\\n  --replace '/limit/max_read_depth=3'\n```\n\n----------------------------------------\n\nTITLE: Using the ORY Keto Relation Tuple Parse Command (Shell)\nDESCRIPTION: Shows the basic syntax for the `keto relation-tuple parse` command. This command reads human-readable relation tuples (ignoring comments and blank lines) from standard input or files and parses them, typically for piping into other commands. It accepts various flags to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-parse.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo relation-tuple parse [flags]\n```\n\n----------------------------------------\n\nTITLE: Update Ory Identity Configuration (Shell)\nDESCRIPTION: This shell command updates the Ory Identity configuration for a specific project using the modified `identity-config.yaml` file. It uploads the local configuration file to the Ory network, applying the changes, including the newly added NetID OIDC provider configuration. Replace placeholders like <project-id> and <workspace-id> with actual values.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Specifying Working Context with Default Workspace and Project in Shell\nDESCRIPTION: Demonstrates how to set the default workspace and project for the current shell session using the 'ory use' commands to avoid repeatedly specifying '--workspace' and '--project' flags for CLI commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory use workspace $ORY_WORKSPACE\nory use project $ORY_PROJECT\n```\n\n----------------------------------------\n\nTITLE: Sendgrid SMTP Connection URI\nDESCRIPTION: Provides a connection URI example for sending emails through Sendgrid's SMTP service, along with recommended configuration settings. It shows the format of the URI and essential SMTP settings like username and API key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nsmtp://apikey:<YOUR_SENDGRID_API_KEY>@smtp.sendgrid.net:587/\n\n# For example:\nsmtp://apikey:somekey@smtp.sendgrid.net:587/\n\n```\n\n----------------------------------------\n\nTITLE: Configuring AWS IAM Role Trust Policy in JSON\nDESCRIPTION: This JSON trust policy document grants Ory Network the permission to assume an AWS IAM role using sts:AssumeRole. It restricts assume role access by requiring an ExternalId condition equal to the specific project UUID. The Principal AWS account ID is fixed (601538168777) to allow the Ory Network infrastructure to publish events securely.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/live-events.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"AWS\": \"601538168777\"\n      },\n      \"Action\": \"sts:AssumeRole\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"sts:ExternalId\": \"<YOUR PROJECT UUID>\"\n        }\n      }\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Session State via Frontend API in Go\nDESCRIPTION: Checks if a user session is active using the FrontendApi.ToSession method of the Ory Kratos Go SDK. Requires you to copy the ory_kratos_session cookie value from your browser. Dependencies include kratos-client-go and a running Kratos instance. The main expected input is the session cookie; output displays identity traits if the session is valid.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"os\"\n\n\tclient \"github.com/ory/kratos-client-go\"\n)\n\nfunc main() {\n\tconfiguration := client.NewConfiguration()\n\tconfiguration.Servers = []client.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4433\", // Kratos Public API\n\t\t},\n\t}\n\tapiClient := client.NewAPIClient(configuration)\n\tcookie := \"ory_kratos_session=MTY0ODgyMTExN3xEdi1CQkFFQ180SUFBUkFCRUFBQVJfLUNBQUVHYzNSeWFXNW5EQThBRFhObGMzTnBiMjVmZEc5clpXNEdjM1J5YVc1bkRDSUFJRkZDVFVKbFNIcEJOalZyY0Vad1JEZ3dNMng1V0RsWlpEQlFXa3RoUjNJenzKCLhzCkox1OmvNJlKcqtWuNkSnPLrUgM6Ew2EMYksfg==\"\n\tresp, r, err := apiClient.FrontendApi.ToSession(context.Background()).Cookie(cookie).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error when calling `FrontendApi.ToSession``: %v\\n\", err)\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t}\n\t// response from `ToSession`: Session\n\tfmt.Fprintf(os.Stdout, \"Traits  %v\\n\", resp.Identity.Traits)\n}\n```\n\n----------------------------------------\n\nTITLE: Update Ory Identities Config (Shell)\nDESCRIPTION: This shell command updates the Ory Identities configuration using a YAML file.  It requires the project and workspace IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/97_x-twitter.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Deleting Organization using Ory CLI - Go\nDESCRIPTION: This command, `ory delete organization <id>`, is used to delete an organization identified by its ID. The user must provide the organization's ID as a command-line argument. This command is part of the Ory CLI tool and is used for interacting with the Ory Network. It uses a dependency on the Ory Network configuration file to connect.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-organization.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\nory delete organization <id> [--project=PROJECT_ID] [flags]\n```\n\n----------------------------------------\n\nTITLE: Downloading Hydra Configuration\nDESCRIPTION: Downloads the hydra.yml configuration file from the Ory Hydra repository. It navigates to the /opt/hydra/config directory, and downloads the quickstart configuration file from Github. Requires: wget.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\ncd ../config\nwget https://raw.githubusercontent.com/ory/hydra/${useLatestRelease(\"hydra\")}/contrib/quickstart/5-min/hydra.yml\n```\n\n----------------------------------------\n\nTITLE: Applying Helm Upgrade for Ory Hydra OEL in Kubernetes\nDESCRIPTION: This bash command upgrades or installs the Ory Hydra OEL Helm chart in the Kubernetes namespace `ory` using the specified values.yaml configuration file. The command triggers the deployment of the updated image and configuration, performing the upgrade with migrations enabled.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nhelm upgrade ory-oel-hydra ory/hydra --namespace ory -f values.yaml\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Network Event Stream to AWS SNS via CLI in Shell\nDESCRIPTION: This shell command uses the Ory CLI to create a new event stream targeting AWS SNS. It requires the project ID, SNS topic ARN, and the IAM role ARN (with appropriate permissions and trust policy) to be provided as parameters. This command enables real-time event delivery from the Ory Network project to the specified AWS SNS topic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/live-events.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory create event-stream\n  --project \"$YOUR_PROJECT_ID\" \\\n  --type sns \\\n  --aws-sns-topic-arn \"$YOUR_TOPIC_ARN\" \\\n  --aws-iam-role-arn \"$YOUR_IAM_ROLE_ARN\"\n```\n\n----------------------------------------\n\nTITLE: Setting Default Browser Return URL in Ory Identities (YAML)\nDESCRIPTION: This snippet demonstrates how to set the default browser return URL for self-service flows in Ory Identities. This URL is used when no specific redirection URL is set for a flow, providing a fallback redirection destination for browser requests. It configures the `selfservice.default_browser_return_url` setting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  default_browser_return_url: https://always-end-up-here-per-default/\n```\n\n----------------------------------------\n\nTITLE: Configure OAuth2 Webhook with Cookie Authentication - Ory CLI\nDESCRIPTION: This snippet shows how to register a webhook endpoint in your OAuth2 configuration using the Ory CLI, including authentication in a cookie.  It adds the URL and cookie authentication details to the OAuth2 configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --add '/oauth2/token_hook/url=\"https://my-example.app/token-hook\"' \\\n  --add '/oauth2/token_hook/auth/type=\"api_key\"' \\\n  --add '/oauth2/token_hook/auth/config/in=\"cookie\"' \\\n  --add '/oauth2/token_hook/auth/config/name=\"X-Cookie-Name\"' \\\n  --add '/oauth2/token_hook/auth/config/value=\"MY SECRET COOKIE\"' \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Raising System Errors in Jsonnet Mapping Scripts - Jsonnet\nDESCRIPTION: Checks the mandatory presence of a claim field and raises a system error if it is missing or invalid. Uses Jsonnet's 'error' function to stop execution with a custom message. Input: claims provided via std.extVar. This halts processing and surfaces the error to the system, but the message appears as a generic system error to the end user. Suitable for required-field enforcement.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_6\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\nif std.length(claims.sub) == 0 then\n  error 'claim sub not set'\nelse\n  {\n    identity: {\n      traits: {\n        // ...\n      },\n    },\n  }\n```\n\n----------------------------------------\n\nTITLE: Initialize Login Flow (Browser - Server-Side)\nDESCRIPTION: This snippet demonstrates how to initialize a login flow for server-side rendered browser applications using an HTML form. The form redirects to Ory's login endpoint, which in turn redirects back to the configured application URL with a flow ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<form method=\"GET\" action=\"https://$PROJECT_SLUG.projects.oryapis.com/self-service/login/browser\">\n  <button type=\"submit\">Login</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Running Ory Kratos Docker Container with TLS Environment Variables - Shell Script\nDESCRIPTION: This snippet demonstrates how to run the Ory Kratos Docker container with TLS enabled using base64-encoded certificate and key environment variables. It uses the docker run command, setting the necessary variables for both public and admin endpoints. Required dependencies: Docker, base64-encoded TLS certificate and key values. Inputs are the environment variables containing TLS data; output is a running Ory Kratos container secured with HTTPS. Adjust other Docker parameters as needed for your setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/https-tls.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ndocker run ... \\\n    -e SERVE_PUBLIC_TLS_CERT_BASE64=\"$SERVE_PUBLIC_TLS_CERT_BASE64\" \\\n    -e SERVE_PUBLIC_TLS_KEY_BASE64=\"$SERVE_PUBLIC_TLS_KEY_BASE64\" \\\n    -e SERVE_ADMIN_TLS_CERT_BASE64=\"$SERVE_ADMIN_TLS_CERT_BASE64\" \\\n    -e SERVE_ADMIN_TLS_KEY_BASE64=\"$SERVE_ADMIN_TLS_KEY_BASE64\" \\\n    ...\n```\n\n----------------------------------------\n\nTITLE: Example Identity Configuration (JSON)\nDESCRIPTION: This is an example JSON configuration payload demonstrating how to define settings for the courier service, specifically the SMTP configuration. This JSON structure is expected by the `ory update identity-config` command when using the `--file` flag with a JSON file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-identity-config.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"courier\": {\n\t\"smtp\": {\n\t  \"from_name\": \"...\"\n\t}\n\t// ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Sample GitHub Claims Data (JSON)\nDESCRIPTION: Example JSON payload representing the data that might be received in the `claims` variable from GitHub during a social sign-in flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"sub\": \"some-identity-id-4hA8gk\",\n  \"email\": \"foo@ory.sh\",\n  \"email_verified\": true,\n  \"username\": \"foo-user\"\n}\n```\n\n----------------------------------------\n\nTITLE: Ory Identities config: VK Provider (YAML)\nDESCRIPTION: This YAML snippet shows how to configure the VKontakte social sign-in provider in the Ory Identities configuration. It includes the provider ID, client ID, client secret, mapper URL (either Base64 encoded or a direct URL), and scope.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: vk # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: vk\n            client_id: .... # Replace this with the OAuth2 Client ID provided by VK app\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by VK app\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - email # required for email and email_verified claims in the near future\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Retrieve Ory Identity Configuration (Shell)\nDESCRIPTION: These shell commands guide the user on how to find their Ory workspace and project IDs using `ory list` and then download the current Ory Identity configuration for a specific project using `ory get identity-config`, saving it to a YAML file. This file is then modified to add the NetID provider configuration. Replace placeholders like <workspace-id> and <project-id> with actual values.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Configuring Password Encryption in PostgreSQL\nDESCRIPTION: These commands change the default password encryption method to scram-sha-256, a stronger encryption method recommended by PostgreSQL. It alters the system settings, then reloads the configuration to apply the changes. Prerequisites: Access to PostgreSQL command line.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\npsql\n# Postgres command line\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\n# Change the default password encryption to stronger one\nSELECT pg_reload_conf();\n# Reload configuration\n```\n\n----------------------------------------\n\nTITLE: Transforming Ory Identity Data for Mailchimp - Jsonnet\nDESCRIPTION: This Jsonnet function constructs the payload required by the Mailchimp Transactional Email (Mandrill) API, converting Ory identity details (such as the recipient's email) into the format expected by Mailchimp. The JSON object includes the required API key, sender address, subject, message text, and recipient list with the main recipient's email extracted from the Ory context. Ensure you provide the correct Mailchimp API key, configure sender addresses appropriately, and extract the user's email using the provided context. The rendered result is intended to be passed as the body of a webhook triggered by Ory Actions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/mailchimp.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nfunction(ctx) {\nkey: \"{Your-Mailchimp-Api-Key}\",\nmessage: {\n   from_email: \"hello@example.com\",\n   subject: \"Hello from Ory\",\n   text: \"Welcome to Ory! Have fun and happy hacking!\",\n   to: [\n      {\n      email: ctx.identity.verifiable_addresses[0].value,\n      type: \"to\"\n      }\n   ]\n}\n}\n\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet Template to Base64 (Shell)\nDESCRIPTION: Provides a shell command to read the content of the `hubspot_identify.jsonnet` file, encode it into a Base64 string, and copy the result to the system's clipboard. This step is necessary because the webhook action configuration expects the Jsonnet template to be Base64 encoded.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/hubspot.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\ncat hubspot_identify.jsonnet | base64 | pbcopy\n```\n\n----------------------------------------\n\nTITLE: Adjusting Specific Keys in OAuth2 Configuration\nDESCRIPTION: This command modifies specific configuration keys, such as the refresh token TTL, using the 'ory patch' command. It employs a JSON pointer syntax to replace the value at the specified path, enabling precise configuration adjustments without re-importing full configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\ --replace '/ttl/refresh_token=\"999h0m0s\"'\n```\n\n----------------------------------------\n\nTITLE: Configuring Access Rule JWT Authenticator in YAML\nDESCRIPTION: Configures the JWT authenticator handler specifically for a single access rule defined in a YAML file. This configuration overrides global settings for this particular rule. It includes specifying the `jwt` handler, JWK Set URLs, scope strategy, required scopes, target audiences, trusted issuers, allowed algorithms, and the location to extract the token from.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_28\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: jwt\n    config:\n      jwks_urls:\n        - https://my-website.com/.well-known/jwks.json\n        - https://my-other-website.com/.well-known/jwks.json\n        - file://path/to/local/jwks.json\n      scope_strategy: none\n      required_scope:\n        - scope-a\n        - scope-b\n      target_audience:\n        - https://my-service.com/api/users\n        - https://my-service.com/api/devices\n      trusted_issuers:\n        - https://my-issuer.com/\n      allowed_algorithms:\n        - RS256\n      token_from:\n        query_parameter: auth-token\n        # or\n        # header: Custom-Authorization-Header\n        # or\n        # cookie: auth-token\n```\n\n----------------------------------------\n\nTITLE: Configure Global JWT Access Tokens with Ory CLI\nDESCRIPTION: Sets the default access token strategy for all clients in an Ory project to \"jwt\" using the command line interface. This command modifies the project's OAuth2 configuration, requiring the project and workspace IDs as parameters. The change ensures newly issued access tokens are JWTs unless overridden by per-client settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/strategies/access_token=\\\"jwt\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Enabling Graceful Refresh Token Rotation in Ory OAuth2 (CLI)\nDESCRIPTION: This shell command configures graceful refresh token rotation by setting the `rotation_grace_period`.  It uses the Ory CLI to patch the OAuth2 configuration.  It requires replacing placeholders for project and workspace identifiers.  Setting the grace period, such as \"60s\", allows refresh tokens to be used multiple times within the specified duration without immediate invalidation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/graceful-token-refresh.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace '/oauth2/grant/refresh_token/rotation_grace_period=\"60s\"'\n```\n\n----------------------------------------\n\nTITLE: Configuring Access Rules via YAML\nDESCRIPTION: This snippet configures access rules using YAML in the `oathkeeper` configuration file. It defines how the access rules should be fetched from different sources like local files, inline strings, and HTTP(s) endpoints.  It also configures matching strategies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Configures Access Rules\naccess_rules:\n  # Locations (list of URLs) where access rules should be fetched from on boot.\n  # It's expected that the documents at those locations return a JSON or YAML Array containing Ory Oathkeeper Access Rules.\n  repositories:\n    # If the URL Scheme is `file://`, the access rules (an array of access rules is expected) will be\n    # fetched from the local file system.\n    - file://path/to/rules.json\n    # If the URL Scheme is `inline://`, the access rules (an array of access rules is expected)\n    # are expected to be a base64 encoded (with padding!) JSON/YAML string (base64_encode(`[{\"id\":\"foo-rule\",\"authenticators\":[....]}]`)):\n    - inline://W3siaWQiOiJmb28tcnVsZSIsImF1dGhlbnRpY2F0b3JzIjpbXX1d\n    # If the URL Scheme is `http://` or `https://`, the access rules (an array of access rules is expected) will be\n    # fetched from the provided HTTP(s) location.\n    - https://path-to-my-rules/rules.json\n    # If the URL Scheme is `s3://`, `gs://` or `azblob://`, the access rules (an array of access rules is expected)\n    # will be fetched by an object storage (AWS S3, Google Cloud Storage, Azure Blob Storage).\n    #\n    # S3 storage also supports S3-compatible endpoints served by Minio or Ceph.\n    # See aws.ConfigFromURLParams (https://godoc.org/gocloud.dev/aws#ConfigFromURLParams) for more details on supported URL options for S3.\n    - s3://my-bucket-name/rules.json\n    - s3://my-bucket-name/rules.json?endpoint=minio.my-server.net\n    - gs://gcp-bucket-name/rules.json\n    - azblob://my-blob-container/rules.json\n  # Determines a matching strategy for the access rules . Supported values are `glob` and `regexp`. Empty string defaults to regexp.\n  matching_strategy: glob\n```\n\n----------------------------------------\n\nTITLE: Retrieving Permissions Assigned to a Group Using Keto CLI and jq\nDESCRIPTION: These bash commands query Keto to display all permissions granted to the 'marketing' and 'community' groups respectively. Output is returned in JSON format and filtered by jq, showing which actions the groups can perform on report objects. Useful for auditing RBAC role permissions and validating access policies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n# Get permissions to objects for marketing group\nketo relation-tuple get --subject-set=\"groups:marketing#member\" --format json --read-remote localhost:4466 | jq\n{\n  \"relation_tuples\": [\n    {\n      \"namespace\": \"reports\",\n      \"object\": \"marketing\",\n      \"relation\": \"view\",\n      \"subject_set\": {\n        \"namespace\": \"groups\",\n        \"object\": \"marketing\",\n        \"relation\": \"member\"\n      }\n    }\n  ],\n  \"next_page_token\": \"\"\n}\n# Get permissions to objects for community group\nketo relation-tuple get --subject-set=\"groups:community#member\" --format json --read-remote localhost:4466 | jq\n{\n  \"relation_tuples\": [\n    {\n      \"namespace\": \"reports\",\n      \"object\": \"community\",\n      \"relation\": \"view\",\n      \"subject_set\": {\n        \"namespace\": \"groups\",\n        \"object\": \"community\",\n        \"relation\": \"member\"\n      }\n    }\n  ],\n  \"next_page_token\": \"\"\n}\n```\n\n----------------------------------------\n\nTITLE: Assigning Users to Groups Using Keto Relation Tuples\nDESCRIPTION: This keto-relation-tuples snippet assigns four users (Lila, Dilan, Hadley, Neel) to their corresponding groups. Group membership is used as the subject in permission checks, linking identities to roles ('finance', 'community', 'marketing', 'admin'). The assignments enable the RBAC mechanism to evaluate each users permissions based on their group memberships.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_2\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\ngroups:finance#member@Lila\ngroups:community#member@Dilan\ngroups:marketing#member@Hadley\ngroups:admin#member@Neel\n```\n\n----------------------------------------\n\nTITLE: JSON Response Example for Login Failure\nDESCRIPTION: This JSON example shows the structure of the response received when a login attempt fails. It contains information about the form, including the action URL, form fields (`nodes`), and an error message. The `messages` array provides details about the error, such as invalid credentials. This is used to populate and update a UI when the user submits bad data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_15\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": \"6394ffa4-235f-4c1a-a200-e62f89862015\",\n  \"type\": \"api\",\n  \"expires_at\": \"2021-04-28T09:12:48.462374732Z\",\n  \"issued_at\": \"2021-04-28T09:02:48.462374732Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/login/api\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/login?flow=6394ffa4-235f-4c1a-a200-e62f89862015\",\n    \"method\": \"POST\",\n    \"messages\": [\n      {\n        \"id\": 4000006,\n        \"text\": \"The provided credentials are invalid, check for spelling mistakes in your password or username, email address, or phone number.\",\n        \"type\": \"error\",\n        \"context\": {}\n      }\n    ],\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"identifier\",\n          \"type\": \"text\",\n          \"value\": \"i-do-not-exist@user.org\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070004,\n            \"text\": \"ID\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"password\",\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1010001,\n            \"text\": \"Sign in\",\n            \"type\": \"info\",\n            \"context\": {}\n          }\n        }\n      }\n    ]\n  },\n  \"forced\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring WebAuthn login identifier\nDESCRIPTION: This JSON snippet configures a field as the identifier for WebAuthn login using the `ory.sh/kratos` extension, setting the `identifier` to true for the `webauthn` credential. This configures the user's identity to use WebAuthn for sign-in.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"webauthn\": {\n        \"identifier\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Authentication\nDESCRIPTION: This configuration snippet configures host-based authentication in PostgreSQL to use `scram-sha-256` encryption for connections from localhost. It must be added to the `pg_hba.conf` file.  Improves security by using modern password encryption.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nhost    all             all             127.0.0.1/32            scram-sha-256\n```\n\n----------------------------------------\n\nTITLE: Generating Ory Recovery Link via Admin API (Shell)\nDESCRIPTION: This shell command uses `curl` to call the Ory Admin API's `/admin/recovery/link` endpoint to generate a unique recovery link for a specific user identity. It requires an API key for authorization and the `identity_id` of the user created in the previous step. The `expires_in` property sets the link's validity period.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/40_invite-users.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n   --header \"Authorization: Bearer {ORY_API_KEY}\" \\\n   --header \"Content-Type: application/json\" \\\n   --data '{\n   \"expires_in\": \"12h\",\n   \"identity_id\": \"$ACCOUNT_ID\"\n   }' https://{project-slug}.projects.oryapis.com/admin/recovery/link\n```\n\n----------------------------------------\n\nTITLE: Adding GitLab Provider Configuration to Ory Identity Config - YAML\nDESCRIPTION: This YAML configuration enables GitLab as an OIDC provider in the Ory identity system. It specifies the provider ID, client credentials, base64-encoded or hosted Jsonnet data mapping under 'mapper_url', and necessary OAuth scopes. The section is placed under selfservice->methods->oidc->config->providers. Dependencies: Requires prior creation/configuration of OAuth client in GitLab, and base64-encoded Jsonnet. Key fields: id (set to 'gitlab'), client_id, client_secret, mapper_url, and scope. Once set, 'id' should not be changed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: gitlab # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: gitlab\n            client_id: .... # Replace this with the OAuth2 Client ID provided by GitLab\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by GitLab\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - read_user\n              - openid\n              - profile\n              - email\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Performing Client Credentials Grant\nDESCRIPTION: Performs a client credentials grant using the Hydra CLI. It retrieves an access token using the client ID and secret created previously. Requires Docker and Docker Compose.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_10\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml exec hydra \\\n  hydra perform client-credentials \\\n  --endpoint http://127.0.0.1:4444/ \\\n  --client-id \"$client_id\" \\\n  --client-secret \"$client_secret\"\n```\n\n----------------------------------------\n\nTITLE: Generating Cryptographic Keys\nDESCRIPTION: This command uses the Ory Oathkeeper CLI tool to generate a JSON Web Key Set (JWKS) file using the RS256 algorithm.  The output of the command is piped to a file named `jwks.json`. This file is necessary for the `id_token` mutator to function properly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ndocker run oryd/oathkeeper:${useLatestRelease('oathkeeper')} credentials generate --alg RS256 > jwks.json\n```\n\n----------------------------------------\n\nTITLE: Example JSON Response for Created Identity using Ory Network API\nDESCRIPTION: This JSON snippet illustrates the typical response returned by the Ory Network API upon successful creation of a new user identity. It includes the identity's unique ID, schema information, state details ('active'), timestamps, user traits (email), verifiable addresses with verification status, recovery addresses, and creation/update timestamps. This output helps confirm that the identity was successfully created and provides all relevant identity metadata.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/20_create-users-identities.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"e01b5f2f-6afc-4194-8578-4cebcf69a4d5\",\n  \"schema_id\": \"preset://email\",\n  \"schema_url\": \"https://playground.projects.oryapis.com/schemas/cHJlc2V0Oi8vZW1haWw\",\n  \"state\": \"active\",\n  \"state_changed_at\": \"2022-02-24T13:38:05.27510048Z\",\n  \"traits\": {\n    \"email\": \"docs@example.org\"\n  },\n  \"verifiable_addresses\": [\n    {\n      \"id\": \"c6cea2a7-f419-42fe-a610-456bea02aab5\",\n      \"value\": \"docs@example.org\",\n      \"verified\": false,\n      \"via\": \"email\",\n      \"status\": \"pending\",\n      \"created_at\": \"2022-02-24T13:38:05.28581Z\",\n      \"updated_at\": \"2022-02-24T13:38:05.28581Z\"\n    }\n  ],\n  \"recovery_addresses\": [\n    {\n      \"id\": \"21ff90e1-a9a9-491e-8194-774172420989\",\n      \"value\": \"docs@example.org\",\n      \"via\": \"email\",\n      \"created_at\": \"2022-02-24T13:38:05.29565Z\",\n      \"updated_at\": \"2022-02-24T13:38:05.29565Z\"\n    }\n  ],\n  \"created_at\": \"2022-02-24T13:38:05.27892Z\",\n  \"updated_at\": \"2022-02-24T13:38:05.27892Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities config (Shell)\nDESCRIPTION: These shell commands download the Ory Identities configuration from your project. They require the workspace and project IDs. The configuration is saved to a file named `identity-config.yaml`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Defining GitHub Action Workflow for Identity Config Update (GitHub Actions, YAML)\nDESCRIPTION: A GitHub Actions workflow definition that automatically updates the Ory Network identity configuration when changes are pushed to the master branch. It checks out the repository, uses the official Ory Docker container, and applies the configuration from the `identity-config.json` file. Requires the `ORY_WORKSPACE_API_KEY` secret to be configured in the repository.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: Update Ory Network Config\n\nenv:\n  ORY_PROJECT_ID: \"<project-id>\"\n  ORY_WORKSPACE_ID: \"<workspace-id>\"\n  ORY_WORKSPACE_API_KEY: ${{ secrets.ORY_WORKSPACE_API_KEY }}\n\non:\n  push:\n    branches:\n      - master\njobs:\n  run-ory-cli:\n    runs-on: ubuntu-latest\n    container: oryd/ory:v1\n    steps:\n      - name: checkout\n        uses: actions/checkout@v3\n      - name: Push changes to Ory Network\n        run: ory update identity-config --file identity-config.json\n```\n\n----------------------------------------\n\nTITLE: Creating Native Registration Flow - Ory Go SDK\nDESCRIPTION: Shows how to initiate a native registration flow for API clients using the Ory Go SDK. This typically involves calling an endpoint like 'createNativeRegistrationFlow'. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Greater Than Numeric Constraint in Ory (JSON)\nDESCRIPTION: Shows when a numeric value does not satisfy the 'greater than' constraint (must be > 5, but found 5). Context includes both actual and minimum values for reference. Used for strict inequality checks; id is 4000019.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_42\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000019,\n  \"text\": \"must be \\u003e 5 but found 5\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual\": 5,\n    \"minimum\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking Tokens Using Hydra CLI - Shell\nDESCRIPTION: This snippet demonstrates the basic usage of the Hydra CLI command to revoke an access or refresh token. It requires installing the Hydra CLI and configuring API access. The key parameter is the token string to revoke, and additional configuration can be set through flags (e.g., endpoint, client credentials). Inputs include the token and optional flags; it outputs command execution results to standard output. The command will only work if proper Hydra server access and permissions are configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-revoke-token.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra revoke token the-token [flags]\n```\n\n----------------------------------------\n\nTITLE: Opening Authentication Browser Session with Expo WebBrowser in TypeScript\nDESCRIPTION: Uses Expo's `WebBrowser.openAuthSessionAsync` to open the Identity Provider's authentication URL (from the Ory 422 response) in an in-app browser tab (ASWebAuthenticationSession/Custom Tabs). It awaits the completion of the authentication process and the redirect back to the app.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/helpers/form.tsx\n// Fetched content starts at:   const result = await WebBrowser.openAuthSessionAsync(\n// Fetched content ends at:   )\nimport * as WebBrowser from 'expo-web-browser';\n\n// Example function to open the browser for authentication\nconst openBrowserForAuthentication = async (authUrl: string, redirectUrl: string) => {\n  try {\n    const result = await WebBrowser.openAuthSessionAsync(\n      authUrl, // The IdP authentication URL from Ory\n      redirectUrl // The app's deep link URL registered for callback\n    );\n    // Handle the result (e.g., check type, extract code if returned directly)\n    // Often, the code is handled by a separate deep link handler (Callback component)\n    console.log('Browser session result:', result);\n  } catch (error) {\n    console.error('Error opening auth session:', error);\n    // Handle error (e.g., user cancelled)\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Creating and Populating Config File\nDESCRIPTION: This snippet creates a `config.yaml` file. The file defines configuration settings such as ports, access rules repositories, error handling behavior, mutators, authorizers, and authenticators. It configures the proxy and API ports, points to access rules, and configures various components like the `header` mutator to add the X-User header and the `id_token` mutator. Also, error handling with `json` and `redirect` handlers are enabled.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat << EOF > config.yaml\nserve:\n  proxy:\n    port: 4455 # run the proxy at port 4455\n  api:\n    port: 4456 # run the api at port 4456\n\naccess_rules:\n  repositories:\n    - file:///rules.json\n\nerrors:\n  fallback:\n    - json\n  handlers:\n    json:\n      enabled: true\n      config:\n        verbose: true\n    redirect:\n      enabled: true\n      config:\n        to: https://www.ory.sh/docs\n\nmutators:\n  header:\n    enabled: true\n    config:\n      headers:\n        X-User: \"{{ print .Subject }}\"\n        # You could add some other headers, for example with data from the\n        # session.\n        # X-Some-Arbitrary-Data: \"{{ print .Extra.some.arbitrary.data }}\"\n  noop:\n    enabled: true\n  id_token:\n    enabled: true\n    config:\n      issuer_url: http://localhost:4455/\n      jwks_url: file:///jwks.json\n\nauthorizers:\n  allow:\n    enabled: true\n  deny:\n    enabled: true\n\nauthenticators:\n  anonymous:\n    enabled: true\n    config:\n      subject: guest\nEOF\n```\n\n----------------------------------------\n\nTITLE: Enabling Lookup Secrets (Recovery Codes) in Ory Kratos (YAML)\nDESCRIPTION: Simple YAML configuration to enable the `lookup_secret` method (recovery codes) in Ory Kratos under `selfservice.methods`. Setting `enabled: true` activates this MFA option.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/15_mfa.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    lookup_secret:\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Kratos Go SDK Client in Go\nDESCRIPTION: Demonstrates how to configure the Ory Kratos SDK client for Go by specifying the Kratos Admin API endpoint and creating an API client. Requires the kratos-client-go package. No authentication or session handling is performed in this snippet; it prepares the API client for further requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\n\tclient \"github.com/ory/kratos-client-go\"\n)\n\nfunc main() {\n\tconfiguration := client.NewConfiguration()\n\tconfiguration.Servers = []client.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"http://127.0.0.1:4434\", // Kratos Admin API\n\t\t},\n\t}\n\tapiClient := client.NewAPIClient(configuration)\n\t// resp, r, err := apiClient.FrontendApi.ToSession(context.Background()).Cookie(\"ory_Kratos_session\").Execute()\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Services with Docker Compose (Shell Script)\nDESCRIPTION: Uses Docker Compose to build and run the required services (Ory Kratos, Ory Oathkeeper, SecureApp, MailSlurper) based on the `quickstart.yml` and `quickstart-oathkeeper.yml` configuration files. The `--build` flag ensures images are built, and `--force-recreate` ensures containers are recreated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_1\n\nLANGUAGE: shell script\nCODE:\n```\ndocker-compose \\\n  -f quickstart.yml \\\n  -f quickstart-oathkeeper.yml \\\n  up --build --force-recreate\n```\n\n----------------------------------------\n\nTITLE: Executing 'kratos identities patch' CLI Command for Ory Kratos Identities - bash\nDESCRIPTION: This snippet shows the command-line invocation syntax for patching identities by ID using the Ory Kratos CLI tool. The command expects one or more JSON files specifying patch operations as input via stdin redirection. It accepts flags to specify help, output formatting, API endpoint URL, and quiet mode for minimal output. The command interfaces with Ory Kratos' Admin API using the endpoint provided via flag or environment variable. The snippet serves as a usage example and does not include the actual implementation of the patch operation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-patch.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities patch <file.json [file-2.json [file-3.json] ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Running Next.js Development Server (npm)\nDESCRIPTION: This snippet demonstrates how to start the Next.js development server using the npm package manager.  It executes the `npm run dev` command, which starts the server and makes the application accessible locally. The output will be the running server.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs-12/README.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Adding Ory Session Validation Middleware (C#)\nDESCRIPTION: Implements custom ASP.NET Core middleware within `Program.cs`. This middleware checks incoming requests for a valid, active Ory session using the Ory Client. If no active session is found (or an API error occurs), it redirects the user to the Ory-managed login flow URL; otherwise, it attaches the session object to the `HttpContext`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_3\n\nLANGUAGE: csharp\nCODE:\n```\nusing Ory.Client.Api;\nusing Ory.Client.Client;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// configure http port explicitly to override generated settings from launchSettings.json\nbuilder.WebHost.ConfigureKestrel(opt => {\n\tvar port = builder.Configuration.GetValue<int>(\"APP_PORT\", 3000);\n\topt.ListenAnyIP(port);\n});\n\nvar app = builder.Build();\n\n// create a new Ory Client with the BasePath set to the Ory Tunnel enpoint\nvar oryBasePath = builder.Configuration.GetValue<string>(\"ORY_BASEPATH\") ?? \"http://localhost:4000\";\nvar ory = new FrontendApi(new Configuration\n{\n\tBasePath = oryBasePath\n});\n\n// add-lines-start\n// add session middleware\napp.Use(async (ctx, next) =>\n{\n\tasync Task Login()\n\t{\n\t\t// this will redirect the user to the managed Ory Login UI\n\t\tvar flow = await ory.CreateBrowserLoginFlowAsync() ?? throw new InvalidOperationException(\"Could not create browser login flow\");\n\t\tctx.Response.Redirect(flow.RequestUrl);\n\t}\n\n\ttry\n\t{\n\t\t// check if we have a session\n\t\tvar session = await ory.ToSessionAsync(cookie: ctx.Request.Headers.Cookie, cancellationToken: ctx.RequestAborted);\n\t\tif (session?.Active is not true)\n\t\t{\n\t\t\tawait Login();\n\t\t\treturn;\n\t\t}\n\n\t\t// add session to HttpContext\n\t\tctx.Items[\"req.session\"] = session;\n\t}\n\tcatch (ApiException)\n\t{\n\t\tawait Login();\n\t\treturn;\n\t}\n\n\tawait next(ctx);\n});\n// add-lines-end\n\napp.MapGet(\"/\", () => \"Hello World!\");\n\napp.Run();\n```\n\n----------------------------------------\n\nTITLE: Generating Self-Signed TLS Certificates with OpenSSL - Shell\nDESCRIPTION: This snippet demonstrates how to generate a 4096-bit RSA private key and a self-signed X.509 certificate valid for 365 days using OpenSSL. It encodes the certificate and key files as base64 environment variables (for use in Docker or other orchestrators) and provides alternative file path-based configuration methods. Dependencies include OpenSSL and optionally the base64 utility. Inputs: none; Outputs: key.pem and cert.crt files, as well as SERVE_TLS_CERT_BASE64 and SERVE_TLS_KEY_BASE64 environment variables. Limitations: does not provide certificate signing requests for CA-signed certificates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/ssl-https-tls.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nopenssl genrsa -out key.pem 4096\nopenssl req -new -x509 -sha256 -key key.pem -out cert.crt -days 365\n\nSERVE_TLS_CERT_BASE64=$(base64 -i cert.crt)\nSERVE_TLS_KEY_BASE64=$(base64 -i key.pem)\n\n# or\n\nSERVE_TLS_KEY_PATH=/path/to/key.pem\nSERVE_TLS_CERT_PATH=/path/to/cert.crt\n```\n\n----------------------------------------\n\nTITLE: Example Usage of ory patch permission-config with JSON Patch\nDESCRIPTION: Demonstrates patching an Ory Permissions configuration using JSON Patch operations (`--add`, `--replace`, `--remove`) targeting specific fields like namespaces and limits for a given project ID. It also shows how to format the output as pretty JSON and includes sample output reflecting the changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-permission-config.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n$ ory patch permission-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--add '/namespaces=[{\"name\":\"files\", \"id\": 2}]' \\\n\t--replace '/namespaces/2/name=\"directories\"' \\\n\t--remove '/limit/max_read_depth' \\\n\t--format json-pretty\n\n{\n  \"namespaces\": [\n    {\n      \"name\": \"files\",\n      \"id\": 2\n    },\n    {\n      \"name\": \"directories\",\n      \"id\": 3\n    },\n    // ...\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet Mapping and Managing Ory Config via CLI (Shell)\nDESCRIPTION: Provides shell commands for preparing the Jsonnet mapping file and managing Ory identity configurations using the Ory CLI. The first command Base64 encodes the Jsonnet mapping file. Subsequent commands demonstrate how to list Ory workspaces and projects, download the current identity configuration to a YAML file (`identity-config.yaml`), and finally update the project's identity configuration using the modified file. Requires the Ory CLI to be installed and authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/10_google.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --file iden--project <project-id> --workspace <workspace-id>tity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Create Kubernetes Secret for Docker Registry Authentication\nDESCRIPTION: This snippet creates a Docker secret in Kubernetes containing credentials for private Docker registry access, using a JSON key file for authentication, required for pulling images during deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nkubectl create secret docker-registry ory-oel-gcr-secret \\\n  --docker-server=europe-docker.pkg.dev \\\n  --docker-username=_json_key \\\n  --docker-password=\"$(cat keyfile.json)\" \\\n  --namespace ory\n```\n\n----------------------------------------\n\nTITLE: Deleting User Sessions using Ory SDK (Go)\nDESCRIPTION: This code snippet demonstrates how to revoke and delete all sessions of a specific user using the Ory Go SDK. It leverages the `deleteIdentitySessions` API.  This operation forcibly logs the user out of all their sessions and deletes all session data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_19\n\nLANGUAGE: go\nCODE:\n```\nimport goDisableAndDeleteSessions from '!!raw-loader!../../../code-examples/sdk/go/session/delete-sessions.go'\n```\n\n----------------------------------------\n\nTITLE: Configuring BCrypt Hasher for OAuth2 Client Secrets in YAML\nDESCRIPTION: This YAML configuration snippet demonstrates how to switch the OAuth2 client secret hashing algorithm from PBKDF2 to BCrypt in Ory OAuth2's configuration. BCrypt offers stronger hashing based on Blowfish, although it imposes higher CPU loads. Applying this requires modifying the Hasher's algorithm under the OAuth2 hashers section to 'bcrypt'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/security-architecture.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\noauth2:\n  hashers:\n    algorithm: bcrypt\n```\n\n----------------------------------------\n\nTITLE: Setting Configuration via Environment Variables (Linux/macOS)\nDESCRIPTION: This snippet demonstrates how to set configuration values using environment variables on Linux/macOS. Subkeys are separated with underscores `_`, and array indices are used to reference array items.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\n# Linux / macOS\nexport SOME_NESTED_KEY_WITH_A_VALUE=foo\nexport SOME_NESTED_KEY_AND_ARRAY_0_ID=foo\nexport SOME_NESTED_KEY_AND_ARRAY_1_ID=bar\n```\n\n----------------------------------------\n\nTITLE: Sample Error Message When pg_cron is Not Installed (Shell Output)\nDESCRIPTION: This output illustrates the error thrown if the cron schema (pg_cron extension) is missing in the PostgreSQL database. If seen, install and activate the pg_cron extension in the intended database before deploying the migration job.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/postgresql-ttl-migrations.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nERROR: schema \"cron\" does not exist (SQLSTATE 3F000)\n\n```\n\n----------------------------------------\n\nTITLE: Listing API Tokens of an Ory Project via API in Bash\nDESCRIPTION: Retrieves all API tokens associated with a specific Ory project using a GET request. Results include metadata like token creation dates, names, and IDs. Authorization is handled with a Workspace API Key in headers. The actual token values are not retrievable through this endpoint once created.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request GET  \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}/tokens\" \\\n-H \"Accept: application/json\" \\\n-H \"Authorization: Bearer ${WORKSPACE_API_KEY}\" | jq\n```\n\n----------------------------------------\n\nTITLE: Creating a New Next.js 12 Project with TypeScript\nDESCRIPTION: Commands to create a new Next.js 12 project with TypeScript support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpx create-next-app@12.1 --typescript\ncd <your-project-directory>\n```\n\n----------------------------------------\n\nTITLE: Update Identity Config with YAML and Format\nDESCRIPTION: Updates the Ory Identities configuration for a specified project using a YAML configuration file. The format flag is used to specify the output format (yaml in this example).  The project flag is required to specify the target project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-identity-config.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory update identity-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/kratos-config.yaml \\\n    --format yaml\n```\n\n----------------------------------------\n\nTITLE: Example Keto Engine ACP Ory Access Rule Shell\nDESCRIPTION: Presents a JSON access rule file content demonstrating the use of the `keto_engine_acp_ory` authorizer. It shows how to configure dynamic values for action, resource, and subject using Go templates based on URL regex captures and authentication session data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\n$ cat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/users/<[0-9]+>/<[a-zA-Z]+>\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"keto_engine_acp_ory\",\n    \"config\": {\n      \"required_action\": \"my:action:$1\",\n      \"required_resource\": \"my:resource:$2:foo:$1\"\n      \"subject\": \"{{ .Extra.email }}\",\n      \"flavor\": \"exact\"\n    }\n  }\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}]\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Kratos Go SDK in Go Project\nDESCRIPTION: Initializes a new Go project and downloads the Ory Kratos Go SDK dependency using Go modules. This setup is required before using the SDK in your application. Run these commands in your terminal; no code file is generated, but a go.mod file will be created.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir myproject\ncd myproject\ngo mod init myproject\n```\n\nLANGUAGE: bash\nCODE:\n```\ngo get github.com/ory/kratos-client-go@${useLatestRelease('kratos')}\n```\n\n----------------------------------------\n\nTITLE: Creating a New React TypeScript Project\nDESCRIPTION: Uses npx to execute create-react-app, scaffolding a new React project named 'my_project' with the TypeScript template. It then changes the current directory into the newly created project folder.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpx create-react-app my_project --template typescript\ncd my_project\n```\n\n----------------------------------------\n\nTITLE: Configuring Remote JSON Authorizer in YAML (Global Configuration)\nDESCRIPTION: Example of enabling and configuring the remote_json authorizer in the global Oathkeeper configuration file. Shows how to set up remote URL, headers, and JSON payload templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthorizers:\n  remote_json:\n    # Set enabled to \"true\" to enable the authenticator, and \"false\" to disable the authenticator. Defaults to \"false\".\n    enabled: true\n\n    config:\n      remote: http://my-remote-authorizer/authorize\n      headers:\n        Y-Api-Key: '{{ .MatchContext.Header.Get \"X-Api-Key\" }}'\n      payload: |\n        {\n          \"subject\": \"{{ print .Subject }}\",\n          \"resource\": \"{{ printIndex .MatchContext.RegexpCaptureGroups 0 }}\"\n        }\n```\n\n----------------------------------------\n\nTITLE: Configure Per-Client JWT Access Token Strategy via MDX\nDESCRIPTION: This documentation snippet demonstrates how to include an external TypeScript code example that shows setting the access token strategy to \"jwt\" for a specific Ory OAuth2 client. The MDX syntax uses raw-loader to embed the content of the referenced TypeScript file within the documentation page. The actual TypeScript code interacts with the Ory SDK to update the client configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_1\n\nLANGUAGE: MDX\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport setAccessTokenStrategyExample from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/client-set-access-token-strategy.ts'\n\n<CodeBlock language=\"tsx\">{setAccessTokenStrategyExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Inspecting OAuth2 client configuration using ORY CLI - shell\nDESCRIPTION: This snippet demonstrates how to retrieve and inspect an OAuth2 client's configuration using the ORY command-line interface. It requires the ORY CLI to be installed and access to the ORY project environment. The command `ory get oauth2-client {client.id}` outputs the client details excluding sensitive data such as secrets, allowing verification of grant types, scopes, redirect URIs, and other client settings. This helps identify misconfigurations that may cause authorization failures.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory get oauth2-client {client.id}\n```\n\n----------------------------------------\n\nTITLE: Install Ory SDK in Go\nDESCRIPTION: This command installs the Ory SDK for Go, allowing interaction with Ory APIs. It's a prerequisite for authenticating users and accessing Ory services.  The command uses `go get` with a version tag from the master branch of the client-go repository.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/01_go.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/client-go@${useLatestTag('client-go', 'master')}\n```\n\n----------------------------------------\n\nTITLE: SPA Login Flow Initialization JSON Response Example (JSON)\nDESCRIPTION: Presents the JSON response to a flow initialization AJAX request for client-side apps. Includes core metadata (ID, issue/expiry timestamps, request URL) and a 'ui' object providing the POST action endpoint and array of form nodes. Required for SPA frontends to build login UIs dynamically, send authentication data to the API, and process success/failure flows. The 'nodes' array is typically populated with input descriptors for CSRF, credentials, and any third-party login methods.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"ff0c97c4-a7bb-49a5-a8a6-ebf174877fa5\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-07-09T11:25:12.136099226Z\",\n  \"issued_at\": \"2021-07-09T10:25:12.136099226Z\",\n  \"request_url\": \"http://playground.projects.oryapis.com/self-service/login/browser\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/login?flow=ff0c97c4-a7bb-49a5-a8a6-ebf174877fa5\",\n    \"method\": \"POST\",\n    \"nodes\": [ /* ... */ ]\n  },\n  \"created_at\": \"2021-07-09T10:25:12.137554Z\",\n  \"updated_at\": \"2021-07-09T10:25:12.137554Z\",\n  \"forced\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Cookie Mutator to a Per-Rule Access Rule (YAML)\nDESCRIPTION: This YAML access-rule example includes a per-rule cookie mutator definition, showing how to add dynamically-populated cookies to requests for specific access rules by using Go template expressions. Dependencies: Oathkeeper, session-based templating. Inputs: session; outputs: transformed requests with cookies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nmutators:\n  - handler: cookie\n    config:\n      cookies:\n        user: \"{{ print .Subject }}\",\n        some-arbitrary-data: \"{{ print .Extra.some.arbitrary.data }}\"\n\n```\n\n----------------------------------------\n\nTITLE: Handling 'continue_with' field in JSON\nDESCRIPTION: This JSON snippet demonstrates the structure of the response from the registration endpoint for SPA and native clients. It includes the 'continue_with' field which lists actions the user needs to take next, such as verification. The 'action' field indicates the type of action, in this case \"verification_ui\". The \"flow\" object contains an ID and the 'verifiable_address'. This data can be used to fetch the verification flow information using the getVerificationFlow API method.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"continue_with\": [\n    {\n      \"action\": \"verification_ui\",\n      \"flow\": {\n        \"id\": \"d859f6af-1dfe-453e-9320-d572e10edeea\",\n        \"verifiable_address\": \"example@ory.sh\"\n      }\n    }\n    // Other items\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Loading SDK Instance for React\nDESCRIPTION: This snippet shows how the React-specific 'sdk.ts' module is imported via remote URL. It contains the code to create and configure an Ory SDK instance, which facilitates interactions with Ory APIs from the React application. The code leverages remote sourcing for demonstration purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```mdx-code-block\n<Tabs groupId=\"react-or-preact\">\n  <TabItem value=\"react\" label=\"React\" default>\n\n<CodeFromRemote\n  lang=\"ts\"\n  title=\"src/sdk.ts\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/sdk.ts\"\n/>\n\n  </TabItem>\n  <TabItem value=\"preact\" label=\"Preact\">\n\n<CodeFromRemote\n  lang=\"ts\"\n  title=\"src/sdk.ts\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/sdk.ts\"\n/>\n  </TabItem>\n  <TabItem value=\"nextjs\" label=\"Next.js\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pkg/sdk.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pkg/sdk.tsx\"\n/>\n  </TabItem>\n</Tabs>\n```\n```\n\n----------------------------------------\n\nTITLE: Example CLI Usage with YAML Format for OAuth2 Configuration\nDESCRIPTION: This code snippet illustrates updating OAuth2 configuration using YAML format, specifying a single configuration file in YAML and setting the output format to YAML for readability.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-oauth2-config.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory update oauth2-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/keto-config.yaml \\\n\t--format yaml\n\noauth2:\n  pkce:\n    enabled: true\n# ...\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration File via CLI - Shell\nDESCRIPTION: Command to update the Ory Identities configuration file after adding or modifying the social sign-in provider entries. Requires specifying the project ID, workspace ID, and the path to the updated YAML configuration file with the new Spotify provider settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Available options for ory import jwk command\nDESCRIPTION: Lists all available command-line flags for the 'ory import jwk' command. These options allow for customizing the import process, including setting algorithm type, endpoint URL, output format, and more.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-jwk.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n      --alg string         Sets the \"alg\" value of the JSON Web Key if not \"alg\" value was defined by the key itself. Required when importing PEM/DER encoded data.\n  -e, --endpoint string    The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string      Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for jwk\n      --project string     The project to use, either project ID or a (partial) slug.\n  -q, --quiet              Be quiet with output printing.\n      --use string         Sets the \"use\" value of the JSON Web Key if no \"use\" value was defined by the key itself. Required when importing PEM/DER encoded data. (default \"sig\")\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Visualizing the OIDC Logout Flow with Mermaid Diagram\nDESCRIPTION: This Mermaid sequence diagram visualizes the interaction flow for an OIDC logout process. It highlights the sequence from the user's logout request through the Ory OAuth2 server and custom logout UI, showing validations, consent steps, and final redirections. This diagram depends on Mermaid support for rendering and helps developers understand the key components and transitions in the OIDC logout sequence. Inputs are symbolic actors and operations, with the output being a rendered flowchart outlining the logout journey.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/logout.mdx#_snippet_1\n\nLANGUAGE: Mermaid\nCODE:\n```\nsequenceDiagram\nUser Agent->>Ory Oauth2: Calls logout endpoint\nOry Oauth2-->>Ory Oauth2: Validates logout endpoint\nOry Oauth2->>Custom logout UI: Redirects end user with logout challenge\nCustom logout UI-->Ory Oauth2: Fetches logout request info\nCustom logout UI-->>Custom logout UI: Acquires user consent for logout (optional)\nCustom logout UI-->Ory Oauth2: Informs that logout request is granted\nCustom logout UI->>Ory Oauth2: Redirects end user to redirect url with logout challenge\nOry Oauth2-->>Ory Oauth2: Performs logout routines\nOry Oauth2-->User Agent: Redirects to specified redirect url\n\n```\n\n----------------------------------------\n\nTITLE: Localized email templates for different languages using nested define blocks\nDESCRIPTION: This snippet illustrates how to support multiple languages in email templates by defining different sections (`en`, `fr`, `de`) and selecting the appropriate one based on the `lang` trait in `Identity`. It enhances internationalization by rendering language-specific content dynamically.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_7\n\nLANGUAGE: Go\nCODE:\n```\n{{define \"en\"}}\nHi,\n\nPlease enter the following code to recover your account:\n\n{{ .RecoveryCode }}\n{{end}}\n\n{{define \"fr\"}}\nBonjour,\n\nVeuillez entrer le code suivant pour rcuprer votre compte:\n\n{{ .RecoveryCode }}\n{{end}}\n\n{{define \"de\"}}\nHallo,\n\nBitte geben Sie den folgenden Code ein, um Ihr Konto wiederherzustellen:\n\n{{ .RecoveryURL }}\n{{end}}\n\n{{- else if eq .Identity.traits.lang \"fr\" -}}\n{{ template \"fr\" . }}\n{{- else if eq .Identity.traits.lang \"de\" -}}\n{{ template \"de\" . }}\n{{- else -}}\n{{ template \"en\" . }}\n{{- end -}}\n```\n\n----------------------------------------\n\nTITLE: Defining BatchCheckRequest in Protocol Buffers\nDESCRIPTION: Defines the request structure for a batch check operation. It includes an array of RelationTuples to be checked, flags related to up-to-date authorization (latest, snaptoken), and a maximum depth for relation searches. The request includes the tuples to be checked and parameters that influence the consistency and depth of the checks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_0\n\nLANGUAGE: proto\nCODE:\n```\n### BatchCheckRequest\n\nThe request for a CheckService.BatchCheck RPC. Checks a batch of relations.\n\n| Field     | Type                                                              | Label    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |\n| --------- | ----------------------------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| tuples    | [RelationTuple](#ory-keto-relation_tuples-v1alpha2-RelationTuple) | repeated |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| latest    | [bool](#bool)                                                     |          | This field is not implemented yet and has no effect.<br/><!--<br/>Set this field to `true` in case your application<br/>needs to authorize depending on up to date ACLs,<br/>also called a \"content-change check\".<br/><br/>If set to `true` the `snaptoken` field is ignored,<br/>the check is evaluated at the latest snapshot<br/>(globally consistent) and the response includes a<br/>snaptoken for clients to store along with object<br/>contents that can be used for subsequent checks<br/>of the same content version.<br/><br/>Example use case:<br/> - You need to authorize a user to modify/delete some resource<br/> and it is unacceptable that if the permission to do that had<br/> just been revoked some seconds ago so that the change had not<br/> yet been fully replicated to all availability zones.<br/>--> |\n| snaptoken | [string](#string)                                                 |          | This field is not implemented yet and has no effect.<br/><!--<br/>Optional. Like reads, a check is always evaluated at a<br/>consistent snapshot no earlier than the given snaptoken.<br/><br/>Leave this field blank if you want to evaluate the check<br/>based on eventually consistent ACLs, benefiting from very<br/>low latency, but possibly slightly stale results.<br/><br/>If the specified token is too old and no longer known,<br/>the server falls back as if no snaptoken had been specified.<br/><br/>If not specified the server tries to evaluate the check<br/>on the best snapshot version where it is very likely that<br/>ACLs had already been replicated to all availability zones.<br/>-->                                                                                                                   |\n| max_depth | [int32](#int32)                                                   |          | The maximum depth to search for a relation.<br/><br/>If the value is less than 1 or greater than the global<br/>max-depth then the global max-depth will be used instead.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n```\n\n----------------------------------------\n\nTITLE: Generating Recovery Code with Go SDK\nDESCRIPTION: This Go code snippet uses the Ory Go SDK to generate a recovery code.  It initializes a client with API key for authorization and then calls the `AdminCreateSelfServiceRecoveryCode` function to create the code.  It takes the identity ID as a parameter. The code outputs the generated recovery link and code to the console.  It requires the Ory Go SDK and a valid API key. Also, the Ory project slug should be set up.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/30_account-recovery.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"io\"\n\n\tory \"github.com/ory/client-go\"\n)\n\nfunc main() {\n\tclient := ory.NewAPIClient(&ory.Configuration{\n\t\tServers: ory.ServerConfigurations{{\n\t\t\tURL: \"https://$PROJECT_SLUG.projects.oryapis.com\",\n\t\t}},\n\t\tDefaultHeader: map[string]string{\n\t\t\t\"Authorization\": \"Bearer ORY_API_KEY\", // API Key for your Ory Network project\n\t\t},\n\t})\n\n\tcode, res, err := client.FrontendApi.AdminCreateSelfServiceRecoveryCode(context.Background()).\n\t\tAdminCreateSelfServiceRecoveryCodeBody(*ory.NewAdminCreateSelfServiceRecoveryCodeBody(\"YOUR_IDENTITY_ID\")).\n\t\tExecute()\n\n\tif err != nil {\n\t\tbody, _ := io.ReadAll(res.Body)\n\t\tfmt.Printf(\"could not create recovery code %v: %v\", err.Error(), string(body))\n\t\tpanic(err)\n\t}\n\n\tfmt.Printf(\"Use link: %s\\n\", code.RecoveryLink)\n\tfmt.Printf(\"  With code: %s\\n\", code.RecoveryCode)\n}\n```\n\n----------------------------------------\n\nTITLE: Structuring Directories for JSONNet Snippets (Bash)\nDESCRIPTION: Bash commands to create directories for organizing JSONNet files used for OIDC provider claim mappings and Ory Actions webhook payloads. This suggests a local file structure for keeping track of these configuration components within your Git repository.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nmkdir oidc-mapping\ntouch oidc-mapping/google.jsonnet\n# add the mappings for OIDC providers you use\nmkdir actions-payload\ntouch actions-payload/registration.jsonnet\n# add the JSONNet payloads for Ory Actions you use\n```\n\n----------------------------------------\n\nTITLE: Running Database Migrations for Ory Kratos Using Bash Shell\nDESCRIPTION: Executes SQL migrations using the Ory Kratos CLI against the PostgreSQL database to prepare the database schema for use. The database URL requires updating with the actual password before execution.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\n/opt/kratos/bin/kratos -c /opt/kratos/config/kratos.yml migrate sql -y postgres://kratos:CHANGE-ME-INSECURE-PASSWORD@127.0.0.1:5432/kratos?sslmode=disable\n```\n\n----------------------------------------\n\nTITLE: Testing Gin Middleware with curl\nDESCRIPTION: A command-line example using curl to test an endpoint protected or enhanced by the Ory Identities Gin middleware. It shows how to pass the session cookie obtained from the Ory Playground to authenticate the request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_28\n\nLANGUAGE: curl\nCODE:\n```\ncurl 'http://localhost:8080/ping' -b 'ory_session_playground=<your-session-cookie-here>'\npong\n```\n\n----------------------------------------\n\nTITLE: Creating Native Verification Flow - Ory Go SDK\nDESCRIPTION: Presents how to initiate a native email verification flow for API clients using the Ory Go SDK, utilizing the 'createNativeVerificationFlow' API endpoint. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_5\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Testing Bearer Token Authenticator with Curl (ORY Oathkeeper) - Shell\nDESCRIPTION: This snippet shows the content of a sample `rules.json` file configured with the `bearer_token` authenticator and provides `curl` commands to test its functionality. It demonstrates sending requests with both a valid and an invalid bearer token in the 'Authorization' header, illustrating the expected successful (200 OK) and failed (401 Unauthorized) responses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_17\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"bearer_token\"\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\ncurl -X GET -H 'Authorization: Bearer valid-token' http://my-app/some-route\n\nHTTP/1.0 200 OK\nThe request has been allowed! The subject is: \"peter\"\n\ncurl -X GET -H 'Authorization: Bearer invalid-token' http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because the provided credentials are invalid.\n```\n\n----------------------------------------\n\nTITLE: Setting Self-Service Settings UI URL in ORY Kratos Configuration YAML\nDESCRIPTION: This YAML snippet configures the `ui_url` parameter for the self-service settings flow in the ORY Kratos configuration under `selfservice.flows.settings`. The `ui_url` points to the frontend application handling the user settings interface. Users can alternatively set this value via the environment variable `SELFSERVICE_FLOWS_SETTINGS_UI_URL`. This configuration is essential to enable the settings flow to function correctly by specifying where the settings UI is hosted. No additional dependencies are required beyond ORY Kratos itself. The `ui_url` should be an accessible URL to the settings frontend. Omitting this value results in the flow being disabled or malfunctioning.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/settings.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      ui_url: http://my-app.com/settings\n```\n\n----------------------------------------\n\nTITLE: Get OAuth2 Configuration\nDESCRIPTION: These shell commands use the Ory CLI to get the OAuth2 configuration for a specific project. They list available workspaces and projects, and then fetch the configuration in YAML format.  The output is saved to a file named `config.yaml`, which is then used to update the login and consent URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get oauth2-config --project <project-id> --workspace <workspace-id> --format yaml > config.yaml\n```\n\n----------------------------------------\n\nTITLE: Defining an Ory Session Object in JSON\nDESCRIPTION: This snippet represents a sample payload for an Ory Session object as returned by the system. It includes detailed fields pertaining to authentication status, expiration, associated devices, and identity profiles. No dependencies are required as it is a data structure example, with fields such as 'active', 'expires_at', 'identity', and their nested properties. Input and output are expected to be standard JSON; real session objects may differ in populated fields or structure depending on actual user data and system version.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"active\": true,\n  \"authenticated_at\": \"2019-08-24T14:15:22Z\",\n  \"authentication_methods\": [\n    {\n      \"aal\": \"aal1\",\n      \"completed_at\": \"2019-08-24T14:15:22Z\",\n      \"method\": \"password\"\n    }\n  ],\n  \"authenticator_assurance_level\": \"aal1\",\n  \"devices\": [\n    {\n      \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n      \"ip_address\": \"string\",\n      \"location\": \"string\",\n      \"user_agent\": \"string\"\n    }\n  ],\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"identity\": {\n    \"created_at\": \"2019-08-24T14:15:22Z\",\n    \"credentials\": {\n      \"property1\": {\n        \"config\": {},\n        \"created_at\": \"2019-08-24T14:15:22Z\",\n        \"identifiers\": [\"string\"],\n        \"type\": \"password\",\n        \"updated_at\": \"2019-08-24T14:15:22Z\",\n        \"version\": 0\n      },\n      \"property2\": {\n        \"config\": {},\n        \"created_at\": \"2019-08-24T14:15:22Z\",\n        \"identifiers\": [\"string\"],\n        \"type\": \"password\",\n        \"updated_at\": \"2019-08-24T14:15:22Z\",\n        \"version\": 0\n      }\n    },\n    \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n    \"metadata_admin\": {},\n    \"metadata_public\": {},\n    \"recovery_addresses\": [\n      {\n        \"created_at\": \"2019-08-24T14:15:22Z\",\n        \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n        \"updated_at\": \"2019-08-24T14:15:22Z\",\n        \"value\": \"string\",\n        \"via\": \"string\"\n      }\n    ],\n    \"schema_id\": \"string\",\n    \"schema_url\": \"string\",\n    \"state\": \"active\",\n    \"state_changed_at\": \"2019-08-24T14:15:22Z\",\n    \"traits\": null,\n    \"updated_at\": \"2019-08-24T14:15:22Z\",\n    \"verifiable_addresses\": [\n      {\n        \"created_at\": \"2014-01-01T23:28:56.782Z\",\n        \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n        \"status\": \"string\",\n        \"updated_at\": \"2014-01-01T23:28:56.782Z\",\n        \"value\": \"string\",\n        \"verified\": true,\n        \"verified_at\": \"2019-08-24T14:15:22Z\",\n        \"via\": \"string\"\n      }\n    ]\n  },\n  \"issued_at\": \"2019-08-24T14:15:22Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Example: Creating JWKS with specified algorithm and use\nDESCRIPTION: This example demonstrates how to create a JWKS with a specific algorithm (RS256) and intended use (sig). The `--alg` flag is used to specify the algorithm, and the `--use` flag is used to specify the intended use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-jwks.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra createjwks my-jwk-set --alg RS256 --use sig\n```\n\n----------------------------------------\n\nTITLE: Creating Vue.js Application - Shell\nDESCRIPTION: Sets up a new Vue.js project using the latest Vue CLI default template (`--default`), navigates into the project directory (`cd`), and installs necessary node modules (`npm install`). Requires Node.js and npm installed globally.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nnpm create vue@latest -- --default\n```\n\nLANGUAGE: Shell\nCODE:\n```\ncd app-name\n```\n\nLANGUAGE: Shell\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Using the ory use project Command\nDESCRIPTION: Shows the basic syntax for the `ory use project` command. Providing an `id` sets that project as the default. Omitting the `id` prints the currently set default project ID. Flags can modify the command's behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-use-project.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory use project [id] [flags]\n```\n\n----------------------------------------\n\nTITLE: Custom OAuth2 Token Prefix Configuration in YAML\nDESCRIPTION: This YAML code snippet demonstrates how to customize the OAuth2 token prefix by setting the `oauth2.token_prefix` key in the Ory configuration file. It shows an example where the prefix template is set to 'acme_token_%s_', ensuring tokens generated will follow this format with the token type replacing `%s`. This configuration is applicable for enterprise customers only, affecting refresh tokens, access tokens, and authorization codes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/token-prefix.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\noauth2:\n  token_prefix: \"acme_token_%s_\"\n```\n\n----------------------------------------\n\nTITLE: Returning Signed JWT from Userinfo Endpoint\nDESCRIPTION: This snippet demonstrates returning a signed JWT from the userinfo endpoint when the `userinfo_signed_response_alg` field is set. It requires an algorithm such as `RS256`.  The endpoint then returns a JWT with the content type `application/jwt`.  The example shows the expected format of the JWT. It depends on the configuration of the userinfo endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/userinfo-oidc.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport userinfoAlgTs from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/client-userinfo-alg.ts'\n\n<CodeBlock language=\"tsx\">{userinfoAlgTs}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Installing Ory .NET Client SDK (Shell)\nDESCRIPTION: Demonstrates the shell command to add the official Ory .NET Client library to the ASP.NET Core project using the `dotnet add package` command. This dependency is required to interact with Ory APIs from the application code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ndotnet add package Ory.Client\n```\n\n----------------------------------------\n\nTITLE: Overriding Redirect URLs Per Method in Ory Identities (YAML)\nDESCRIPTION: This snippet illustrates how to override the redirect URL for a specific method within a self-service flow, such as using password-based login. The configuration `selfservice.flows.<flow_name>.after.<method>.default_browser_return_url` allows you to define a specific redirection destination for that particular method. This overrides both the default browser return URL and any flow-specific redirect URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      after:\n        default_browser_return_url: https://this-is-overridden-by-password/\n        password:\n          default_browser_return_url: https://end-up-here-after-login-with-password/\n      # ...\n```\n\n----------------------------------------\n\nTITLE: Advanced Fallback Configuration with Matching (YAML)\nDESCRIPTION: This YAML snippet shows an advanced configuration with multiple fallback handlers and specific matching conditions.  It configures the `redirect` handler to be used if the `Accept` header contains `text/*`, otherwise the `json` handler is used as the default fallback. This allows for different error responses based on the client's request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# .oathkeeper.yaml\nerrors:\n  fallback:\n    - redirect\n    - json\n\n  handlers:\n    json:\n      enabled: true\n    redirect:\n      enabled: true\n      config:\n        when:\n          - request:\n              header:\n                accept:\n                  - text/*\n```\n\n----------------------------------------\n\nTITLE: Get Alive Status ORY Oathkeeper CLI\nDESCRIPTION: Displays the basic command structure for checking if an ORY Oathkeeper deployment is alive using the command line interface. The command accepts various flags to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-health-alive.md#_snippet_0\n\nLANGUAGE: cli\nCODE:\n```\noathkeeper health alive [flags]\n\n```\n\n----------------------------------------\n\nTITLE: Creating IAM Role Policy for AWS SNS Event Stream in JSON\nDESCRIPTION: Defines an AWS IAM policy in JSON format granting the permission to publish to a specified AWS SNS topic. The placeholder <YOUR TOPIC ARN> must be replaced with the actual SNS topic ARN created by the user. This policy is required to allow Ory Network to publish events to the configured SNS topic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/live-events.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"OryNetworkEventStreamPublish\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\"sns:Publish\"],\n      \"Resource\": [\"<YOUR TOPIC ARN>\"]\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Refreshing User Session via Login Flow in TypeScript\nDESCRIPTION: This TypeScript code snippet demonstrates how to initiate a login flow with the `refresh=true` parameter using the Ory SDK.  This forces the user to re-authenticate even if they have a valid session, ensuring they are still the same user. It requires the Ory SDK and an existing user session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nsdk.createBrowserLoginFlow({ refresh: true })\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Client Authentication Method (pg_hba.conf)\nDESCRIPTION: Adds a configuration line in the PostgreSQL host-based authentication (pg_hba.conf) file, enforcing SCRAM-SHA-256 password encryption for local connections. This enhances security by requiring clients to authenticate with a stronger encrypted password method.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\nhost    all             all             127.0.0.1/32            scram-sha-256\n```\n\n----------------------------------------\n\nTITLE: Requiring Multi-Factor Authentication for Settings via Ory CLI\nDESCRIPTION: This sequence configures Ory Kratos to require the highest available Authentication Assurance Level (AAL) for accessing the settings flow, effectively mandating MFA if configured. It retrieves the identity config, sets `required_aal` to `highest_available` under `selfservice.flows.settings`, and updates the configuration using the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      required_aal: highest_available\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Updating Identity Traits with Ory Webhooks JSON\nDESCRIPTION: Demonstrates the JSON payload structure expected by Ory when a webhook returns a 200 OK response to update an identity's traits. This payload replaces the entire existing `identity.traits` object with the provided values.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"0.g5vv0qpoxl@ory.sh\",\n      \"the_webhook\": \"updated this value\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Allowed Type Mismatch in Ory (JSON)\nDESCRIPTION: This parameterized error message indicates the type of value does not match the allowed set, supporting multiple allowed types. Substitution occurs for both 'allowed_types_list' and 'actual_type' using the context object. Useful for validating property types in user input; id is 4000026.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_49\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000026,\n  \"text\": \"expected {allowed_types_list}, but got {actual_type}\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual_type\": \"{actual_type}\",\n    \"allowed_types\": [\"{allowed_types_list}\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Patching Identity Configuration to Update Magic Link Base URL in Ory Network\nDESCRIPTION: This command uses the Ory CLI to patch the identity configuration by removing the old base URL setting, which forces Ory Network to update to your current custom domain automatically. It requires your project ID as a parameter.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/15_magic-link-verification-url.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {your-project-id} \\\n  --remove '/selfservice/methods/link/config/base_url'\n```\n\n----------------------------------------\n\nTITLE: Adjusting Ory Tunnel entry point URL via command line\nDESCRIPTION: This shell snippet shows how to override the default entry point URL of Ory Tunnel by providing a second URL parameter, allowing flexible access configurations during local development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/20_proxy-and-tunnel.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --project <project-id> --workspace <workspace-id> http://localhost:3000 http://localhost:3001\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow - Ory Go SDK\nDESCRIPTION: Demonstrates how to submit user input to complete an email verification flow using the Ory Go SDK's 'updateVerificationFlow' endpoint. This is typically used to verify an email address after a link is clicked. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_12\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Adding Header Mutator to a Per-Rule Access Rule (YAML)\nDESCRIPTION: This YAML file defines a per-rule access rule (access-rule-1.yaml) including a header mutator. It demonstrates how to inject custom headers populated by template expressions into specified requests for this rule. Requires Oathkeeper and a correct pipeline configuration. Inputs: subject and session data; outputs: outgoing requests with extra headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nmutators:\n  - handler: header\n    config:\n      headers:\n        X-User: \"{{ print .Subject }}\"\n        X-Some-Arbitrary-Data: \"{{ print .Extra.some.arbitrary.data }}\"\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Lark OIDC Provider in Ory Identity (YAML)\nDESCRIPTION: Illustrates the YAML structure required to add Lark as an OIDC social sign-in provider within the Ory Identity configuration. It specifies the provider `id`, `client_id`, `client_secret` obtained from the Lark developer console, and crucially, sets the `mapper_url` to point to the Jsonnet claims mapping (either Base64 encoded or via URL). It notes that Lark uses fixed scopes, allowing the `scope` list to be empty.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/81_lark.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      enabled: true\n      config:\n        providers:\n          - id: lark # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: lark\n            client_id: .... # Replace this with the OAuth2 Client ID provided by lark\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by lark\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n\n            # Lark uses a fixed scope for applications that should be configured on its admin page. therefore you can use an empty scope list here.\n            scope: []\n```\n\n----------------------------------------\n\nTITLE: Available Options for ory use project\nDESCRIPTION: Lists the specific command-line options available for the `ory use project` command. These include controlling the output format (`--format`), displaying help information (`-h`, `--help`), and suppressing output (`-q`, `--quiet`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-use-project.md#_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for project\n  -q, --quiet           Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Authentication for Webhooks (YAML)\nDESCRIPTION: This YAML snippet shows how to configure Basic Authentication for a webhook. The `type` is set to `basic_auth`, and the `config` includes the `user` and `password` fields. These credentials will be used for authenticating the webhook request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook\n# other configuration keys\nconfig:\n  auth:\n    type: basic_auth\n    config:\n      user: { USERNAME }\n      password: { YOUR-PASSWORD }\n```\n\n----------------------------------------\n\nTITLE: Configuring Registration Methods with YAML - Ory Identities - yaml\nDESCRIPTION: This snippet enables password and OIDC-based registration methods in the Ory Identities configuration. Dependencies include a running Ory Identities (Kratos or Ory Network) instance and write access to its config file. Set 'enabled: true' for the desired methods ('password', 'oidc') under 'selfservice.methods'. The config file should be reloaded by the Ory service for changes to take effect. Intended for administrators configuring how users can register.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      enabled: true\n    oidc:\n      enabled: true\n  # ...\n\n```\n\n----------------------------------------\n\nTITLE: Creating an Organization via Ory API - Bash (curl)\nDESCRIPTION: Sends a POST request to the Ory API endpoint to create a new organization with specified label and list of domains. Requires a valid PROJECT_ID, WORKSPACE_API_KEY, and Content-Type header. The payload is a JSON object specifying organization details. Outputs the created organization in JSON format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X POST --location \"https://api.console.ory.sh/projects/$PROJECT_ID/organizations\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\n           \"label\":  \"Hello demo\",\n           \"domains\": [\"test.example.com\"]\n         }'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Verification Flow using Go SDK\nDESCRIPTION: Demonstrates how to use the Ory Kratos Go SDK to retrieve an existing verification flow by its ID. This is typically used in backend or native Go applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_55\n\nLANGUAGE: go\nCODE:\n```\n{getVerificaitonApi}\n```\n\n----------------------------------------\n\nTITLE: Showing Verification UI After Specific Login Methods Using Ory CLI (Server-Rendered)\nDESCRIPTION: Configures Ory using the CLI `patch identity-config` command to automatically redirect users to the verification UI after login via password, OIDC, or WebAuthn, specifically for server-rendered browser flows, if verification is needed (requires the `verification` hook to also be present). This adds the `show_verification_ui` hook to the respective `after` login configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --add '/selfservice/flows/login/after/password/hooks=[{\"hook\": \"show_verification_ui\"}]' \\\n  --add '/selfservice/flows/login/after/oidc/hooks=[{\"hook\": \"show_verification_ui\"}]' \\\n  --add '/selfservice/flows/login/after/webauthn/hooks=[{\"hook\": \"show_verification_ui\"}]'\n```\n\n----------------------------------------\n\nTITLE: Configuring Per-Flow Redirect URLs in Ory Identities (YAML)\nDESCRIPTION: This example shows how to specify a redirect URL for specific self-service flows like login and registration in Ory Identities. By configuring the `selfservice.flows.<flow_name>.after.default_browser_return_url` setting, you can customize the redirection destination after each flow completes. This configuration overrides the default browser return URL for the defined flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      after:\n        default_browser_return_url: https://end-up-here-after-login/\n    registration:\n      after:\n        default_browser_return_url: https://end-up-here-after-registration/\n    # verification\n    # ...\n```\n\n----------------------------------------\n\nTITLE: Shell Script to Get Action URL\nDESCRIPTION: This shell script retrieves the action URL from a previous login flow response.  It uses `curl` to get the initial flow and `jq` to extract the `ui.action` field. The extracted URL is stored in the `actionUrl` variable. This URL is used for submitting the form data in the next step.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_13\n\nLANGUAGE: Shell\nCODE:\n```\nflow=$(curl -s -X GET -H \"Accept: application/json\" \"https://playground.projects.oryapis.com/self-service/login/api\")\nactionUrl=$(echo $flow | jq -r '.ui.action')\n```\n\n----------------------------------------\n\nTITLE: Setting Up Node.js/Express API Project - Shell\nDESCRIPTION: Creates a new directory (`mkdir api`), changes into it (`cd api`), initializes a new Node.js project (`npm init`), and installs required dependencies: `@ory/client-fetch` (Ory SDK), `express` (web framework), and `cors` (middleware for handling Cross-Origin Resource Sharing). Requires Node.js and npm installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_5\n\nLANGUAGE: Shell-script\nCODE:\n```\nmkdir api\n```\n\nLANGUAGE: Shell-script\nCODE:\n```\ncd api\n```\n\nLANGUAGE: Shell-script\nCODE:\n```\nnpm init\n```\n\nLANGUAGE: Shell-script\nCODE:\n```\nnpm i --save @ory/client-fetch express cors\n```\n\n----------------------------------------\n\nTITLE: Create Nginx Virtual Host Config\nDESCRIPTION: This snippet creates a basic configuration file for a virtual host in Nginx. The file is named `accounts.example.com` and is created in the `/etc/nginx/sites-available/` directory. It sets up the server to listen on port 80 and defines the server name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_22\n\nLANGUAGE: bash\nCODE:\n```\ncd /etc/nginx/sites-available/\nnano accounts.example.com\n```\n\n----------------------------------------\n\nTITLE: Defining Submit Input Nodes in Ory UI (JSON5)\nDESCRIPTION: Illustrates the JSON5 structure for defining multiple submit input nodes within an Ory Identities UI flow. Explains the importance of distinguishing between submit buttons with the same `name` attribute ('method') but different `value` attributes ('profile', 'password') to ensure the correct form action is triggered, especially in SPAs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_13\n\nLANGUAGE: json5\nCODE:\n```\n[\n  {\n    type: \"input\",\n    group: \"profile\",\n    attributes: {\n      name: \"method\",\n      type: \"submit\",\n      value: \"profile\",\n      disabled: false,\n      node_type: \"input\",\n    },\n    messages: [],\n    meta: {\n      label: {\n        id: 1070003,\n        text: \"Save\",\n        type: \"info\",\n      },\n    },\n  },\n  // ...\n  {\n    type: \"input\",\n    group: \"password\",\n    attributes: {\n      name: \"method\",\n      type: \"submit\",\n      value: \"password\",\n      disabled: false,\n      node_type: \"input\",\n    },\n    messages: [],\n    meta: {\n      label: {\n        id: 1070003,\n        text: \"Save\",\n        type: \"info\",\n      },\n    },\n  },\n]\n```\n\n----------------------------------------\n\nTITLE: Examples for retrieving OAuth2 configuration in different formats\nDESCRIPTION: Examples showing how to get OAuth2 configuration in YAML format for a specific project and in JSON format for the currently selected project. The output can be redirected to a file or displayed in the terminal.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-oauth2-config.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory get oauth2-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 --format yaml > oauth2-config.yaml\n\n$ ory get oauth2-config --format json   # uses currently selected project\n\n{\n  \"oauth2\": {\n    \"client_credentials\": {\n      \"default_grant_allowed_scope\": false\n    },\n    \"expose_internal_errors\": true,\n    \"grant\": {\n      \"jwt\": {\n        \"iat_optional\": false,\n        \"jti_optional\": false,\n        \"max_ttl\": \"720h0m0s\"\n      }\n    }\n  },\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Verification Flow UI URL in Ory Kratos Config - YAML\nDESCRIPTION: This YAML snippet demonstrates how to set the `ui_url` for the verification flow under the `selfservice` configuration in Ory Kratos. Setting this URL is required for the system to know where to serve the verification user interface. Alternatively, this value can be set through the environment variable `SELFSERVICE_FLOWS_VERIFICATION_UI_URL`. The snippet must be incorporated within the Kratos configuration file, typically named `kratos.yml` or similar. The key parameters are `selfservice.flows.verification.ui_url` which expects a string representing the HTTP URL to the verification UI endpoint. Without this configuration, the verification flow cannot display its user interface correctly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/verification.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    verification:\n      ui_url: http://my-app.com/verify\n```\n\n----------------------------------------\n\nTITLE: Exporting JSON Web Key Set Public Key using Ory CLI in Shell\nDESCRIPTION: Retrieves the public keys from a previously created JWKS using the Ory CLI. The command outputs the public JSON Web Key Set to a file. This public key can be used to verify JWTs issued with the corresponding private keys.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory get jwk some-example-set \\  --public \\  --project $PROJECT_ID --format json-pretty \\  > es256-public.jwks.json\n```\n\n----------------------------------------\n\nTITLE: Closing MDX Tabs Component\nDESCRIPTION: Closes the 'Ory CLI' `TabItem` and the parent `Tabs` component, concluding the tabbed section that provided separate instructions for Ory Console and Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_9\n\nLANGUAGE: jsx\nCODE:\n```\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: hydra serve Options\nDESCRIPTION: Defines the command-line options for the `hydra serve` command. These options include specifying configuration files, enabling development mode, displaying help, and opting out of telemetry reports. These options affect how the Hydra service is initialized and operates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n      --dev              Disables critical security checks to improve local development experience. Do not use in production.\n  -h, --help             help for serve\n      --sqa-opt-out      Disable anonymized telemetry reports - for more information please visit https://www.ory.sh/docs/ecosystem/sqa\n```\n\n----------------------------------------\n\nTITLE: Advanced Ory Kratos Identity Schema with Multiple Traits (JSON)\nDESCRIPTION: This extended JSON Schema defines an advanced Ory Kratos identity with various traits including email (with multifactor support), nested name structure (first, last, nickname), age, newsletter subscription, and enterprise customer flags. It demonstrates comprehensive credential strategies and enforces 'email' as a required field while disallowing additional arbitrary properties under 'traits'. Requires Ory Kratos and JSON Schema with support for property nesting, booleans, and integers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_27\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.basic.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"Email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          }\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"type\": \"string\",\n              \"title\": \"Your first name\"\n            },\n            \"last\": {\n              \"type\": \"string\",\n              \"title\": \"Your last name\"\n            },\n            \"nickname\": {\n              \"type\": \"string\",\n              \"title\": \"Your nickname\"\n            }\n          }\n        },\n        \"age\": {\n          \"type\": \"integer\",\n          \"title\": \"How old are you?\"\n        },\n        \"newsletter\": {\n          \"type\": \"boolean\",\n          \"title\": \"Newsletter subscription\"\n        },\n        \"enterprise\": {\n          \"type\": \"boolean\",\n          \"title\": \"Are you an Enterprise customer?\"\n        }\n      },\n      \"required\": [\n        \"email\"\n      ],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Hydra import jwk Usage Syntax (Go CLI Command)\nDESCRIPTION: Details the syntax of the 'hydra import jwk' command, including positional arguments such as set ID and file paths, and optional flags for format and key usage customization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\nhydra import jwk set-id file-1 [file-2] [file-n] [flags]\n```\n\n----------------------------------------\n\nTITLE: Basic Authentication Configuration - YAML\nDESCRIPTION: This snippet shows the configuration for basic authentication, including the username and password required to authenticate with the SMS gateway.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/10_sending-sms.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nuser: My-User\npassword: My-Pass-Value\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Oathkeeper Prometheus Metrics Endpoint (Shell)\nDESCRIPTION: This snippet creates a config.yaml file to set Ory Oathkeeper's Prometheus endpoint to listen on localhost:9000 with the metrics path at /metrics. This configuration enables Prometheus-compatible metric exposure and should be placed in Ory Oathkeeper's configuration folder. Dependencies: Ory Oathkeeper, a writable filesystem location. Inputs: standard YAML; Outputs: config.yaml. Limitations: Port and host must match those configured in Prometheus scrape configs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\ncat << EOF > config.yaml\nserve:\n  prometheus:\n    port: 9000\n    host: localhost\n    metrics_path: /metrics\nEOF\n\n```\n\n----------------------------------------\n\nTITLE: Importing Mermaid Component in MDX\nDESCRIPTION: Imports the Mermaid component to render diagrams inside MDX documents for visualizing relationships and permission flows. This snippet is a prerequisite for embedding Mermaid charts representing permission and relationship graphs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_0\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\"\n```\n\n----------------------------------------\n\nTITLE: Importing Identity with Password Migration Hook - JSON\nDESCRIPTION: Defines a JSON payload for bulk importing a user with an empty password hash while enabling the password migration hook in Ory Identities. Requires 'schema_id', traits (with email), and credentials specifying 'hashed_password' as empty and 'use_password_migration_hook' as true. The expected input is a user profile for import, while the output is consumed by the Ory import system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"pw-migration@example.org\"\n  },\n  \"credentials\": {\n    \"password\": {\n      \"config\": {\n        \"hashed_password\": \"\",\n        \"use_password_migration_hook\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Kratos Public API Access Rule in Ory Oathkeeper (YAML)\nDESCRIPTION: Defines an access rule (`ory:kratos:public`) in `access-rules.yml` for Oathkeeper. It matches requests to `http://127.0.0.1:4455/.ory/kratos/public/**` using various HTTP methods. Matched requests are forwarded to the Ory Kratos public API (`http://kratos:4433`), preserving the host header and stripping the `/.ory/kratos/public` prefix. It uses the `noop` authenticator, `allow` authorizer, and `noop` mutator, effectively acting as a simple proxy for these public endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\n- id: \"ory:kratos:public\"\n  upstream:\n    preserve_host: true\n    url: \"http://kratos:4433\"\n    strip_path: /.ory/kratos/public\n  match:\n    url: \"http://127.0.0.1:4455/.ory/kratos/public/<**>\"\n    methods:\n      - GET\n      - POST\n      - PUT\n      - DELETE\n      - PATCH\n  authenticators:\n    - handler: noop\n  authorizer:\n    handler: allow\n  mutators:\n    - handler: noop\n```\n\n----------------------------------------\n\nTITLE: Defining JWT Claims Mapper using JsonNet\nDESCRIPTION: Defines a JsonNet template that customizes the JWT claims by merging Ory session data with default claims. The template receives 'claims' and 'session' as external variables and returns a JSON object specifying additional claims, such as modifying the issuer and including session schema IDs. This template is used in the claims_mapper_url to transform JWT payloads.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\nlocal session = std.extVar('session');\n\n{\n  claims: {\n    iss: claims.iss + \"/additional-component\",\n    schema_id: session.identity.schema_id,\n    session: session,\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Templating User ID in Request Body using Jsonnet\nDESCRIPTION: This Jsonnet template demonstrates how to send a request body containing the user ID. It defines a function that takes a context object `ctx` and returns a JSON object with the `user_id` field set to the identity's ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) { user_id: ctx.identity.id }\n```\n\n----------------------------------------\n\nTITLE: Command Usage and Description for 'ory open account-experience login'\nDESCRIPTION: Provides an overview of the command's purpose: to open a login page, along with usage syntax, available options, inherited flags, and related references. It explains the command's role within the Ory platform and how to invoke it.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-login.md#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n## ory open account-experience login\n\nOpen login page\n\n```\nory open account-experience login [flags]\n```\n\n### Options\n\n```\n  -h, --help   help for login\n```\n\n### Options inherited from parent commands\n\n```\n  -c, --config string    Path to the Ory Network configuration file.\n      --project string   The project to use, either project ID or a (partial) slug.\n  -q, --quiet            Be quiet with output printing.\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n### SEE ALSO\n\n* [ory open account-experience](ory-open-account-experience) - Open Ory Account Experience Pages\n```\n\n----------------------------------------\n\nTITLE: Install PHP dependencies\nDESCRIPTION: Installs the Ory SDK client and the bramus/router library using Composer, a PHP dependency manager. The Ory SDK is used to interact with Ory's APIs, and bramus/router is used for simplified URL handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/05_php.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require ory/client\n```\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require bramus/router\n```\n\n----------------------------------------\n\nTITLE: Example Access Token Claims\nDESCRIPTION: Sample JSON structure showing the claims in the resulting access token after a successful JWT exchange. It includes issuer, subject, and scope claims that define the token's permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  iss: \"https://$PROJECT_SLUG.projects.oryapis.com/\",\n  sub: \"7146dd0b-f243-43ba-815c-7a00216b4823\",\n  scp: [\"read\"],\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Single Password Credential YAML\nDESCRIPTION: Illustrates the YAML structure for an Ory identity having a single password credential with one identifier. This basic structure is used to explain how attempting to add this identifier to *another* identity's password credential would result in a conflict.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n```\n\n----------------------------------------\n\nTITLE: Example Bash Command for Deleting Identities by Recovery Email\nDESCRIPTION: This snippet shows a practical example of deleting an identity with a specific recovery email address by piping the output of 'ory list identities' into jq for filtering, then passing the resulting ID(s) to the delete command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-identity.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory delete identity $(ory list identities --format json | jq -r 'map(select(.recovery_addresses[].value == \"foo@bar.com\")) | .[].id')\n```\n\n----------------------------------------\n\nTITLE: Mapping Claims with Jsonnet - Jsonnet\nDESCRIPTION: This Jsonnet snippet defines how to map claims received from DingTalk to the Ory Identity schema. It extracts the email claim, if it exists and maps it to the `identity.traits.email` field. The conditional logic mitigates potential account enumeration attacks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks, especially if the value is used for\n      // e.g. verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists by DingTalk.\n      [if \"email\" in claims then \"email\" else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Clone Keto Repository (Shell)\nDESCRIPTION: This shell command clones the Ory Keto repository from GitHub.  This is a prerequisite to running the example.  The user must have Git installed. It navigates to the keto directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n# clone the repository if you don't have it yet\ngit clone git@github.com:ory/keto.git && cd keto\n\n# Alternatively, you can use 'https' to clone if ssh cloning gives permission denied error. (Configure ssh keys in github to resolve the issue.)\ngit clone https://github.com/ory/keto.git && cd keto\n```\n\n----------------------------------------\n\nTITLE: Application data mapping to UUIDs example in YAML\nDESCRIPTION: Shows how to map application-specific condition data to UUIDs for use with Ory Permissions. This example demonstrates mapping value range conditions to specific UUIDs for later reference in permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/10_objects.mdx#_snippet_0\n\nLANGUAGE: yml\nCODE:\n```\nf832e1e7-3c97-4cb8-8582-979e63ae2f1d:\n  greater_than: 5\n\nc4540cf5-6ac4-4007-910b-c5a56aa3d4e6:\n  greater_than: 2\n  smaller_equal: 5\n```\n\n----------------------------------------\n\nTITLE: Getting Verification Flow Details - Ory Go SDK\nDESCRIPTION: Demonstrates how to retrieve the details of an existing email verification flow using the Ory Go SDK's 'getVerificationFlow' endpoint. This provides information about the verification process and status. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Returning User-facing Errors as JSON Response in Ory Kratos\nDESCRIPTION: This JSON snippet illustrates the structure of user-facing errors returned by Ory Kratos' API, containing error codes and messages. The JSON array holds one or more error objects describing the failure encountered. This snippet demonstrates the expected format that client applications or error UIs can consume to display error details to users. It requires no additional dependencies aside from a JSON parser.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-facing-errors.md#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"code\": 500,\n    \"message\": \"no such file or directory\"\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with Go\nDESCRIPTION: This Go code demonstrates the process of creating a recovery flow by interacting with the Ory API. Dependencies: Go, Ory SDK. Prerequisites: Ory instance and SDK configuration. The code makes use of the Go SDK to create the recovery flow for a user.  Expected input is the user's identity information.  Output: API response.  Limitations: Requires the Ory Go SDK.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_31\n\nLANGUAGE: go\nCODE:\n```\nimport createRecoveryApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/create-recovery.go'\n```\n\n----------------------------------------\n\nTITLE: Inherited Options from Parent Commands\nDESCRIPTION: Lists options inherited from parent Ory CLI commands that can be used with `ory use project`. These include specifying a custom configuration file path (`-c`, `--config`) and automatically confirming prompts (`-y`, `--yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-use-project.md#_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Options inherited from parent commands\nDESCRIPTION: Options available for all identities subcommands that are inherited from parent commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-delete.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n-e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n-f, --format string     Set the output format. One of table, json, and json-pretty. (default \"default\")\n-q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Defining a URL Input Node in Ory UI (JSON)\nDESCRIPTION: Shows an example JSON structure for a URL input field (`type: \"url\"`) within a 'profile' group. Includes attributes like `name`, `value`, `required`, `disabled`, `node_type`, and metadata.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.website\",\n    \"type\": \"url\",\n    \"value\": \"https://www.ory.sh/\",\n    \"required\": true,\n    \"disabled\": false,\n    \"node_type\": \"input\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Your website\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting Ory Recovery Flow via cURL (Native API)\nDESCRIPTION: Uses cURL to submit user data (like email or recovery code) to the `/self-service/recovery` endpoint for native applications or backend interactions. Includes the shell command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_43\n\nLANGUAGE: shell\nCODE:\n```\n{submitRecoveryCurlApi}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(submitRecoveryCurlApiJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Fetching Registration Flow Data Using Bash and cURL\nDESCRIPTION: This script sends a GET request to the Ory playground API to retrieve a specific registration flow's UI data, filtering for the email trait node using jq. It depends on curl and jq being installed and configured properly, and it displays the email input node's JSON data for further processing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/password.missing.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/registration/flows?id=ba7b883b-80e5-457b-9ef1-c17e6743edd0' \\\n    | jq -r '.ui.nodes[] | select(.attributes.name==\"traits.email\")'\n```\n\n----------------------------------------\n\nTITLE: Passing Upstream Provider Parameters in HTML Form\nDESCRIPTION: This HTML snippet demonstrates how to pass upstream provider parameters (e.g., `login_hint`, `hd`, `prompt`) to social sign-in providers like Google during the login flow. It uses hidden input fields within the form to include these parameters. It depends on having a valid `flow-id` and the correct project slug.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<form action=\"https://$PROJECT_SLUG.projects.oryapis.com/self-service/login?flow=<flow-id>\" method=\"POST\">\n  <input type=\"submit\" name=\"provider\" value=\"google\" />\n  <input type=\"hidden\" name=\"upstream_parameters.login_hint\" value=\"foo@bar.com\" />\n  <input type=\"hidden\" name=\"upstream_parameters.hd\" value=\"bar.com\" />\n  <input type=\"hidden\" name=\"upstream_parameters.prompt\" value=\"select_account\" />\n  <input type=\"hidden\" name=\"upstream_parameters.auth_type\" value=\"reauthenticate\" />\n</form>\n```\n\n----------------------------------------\n\nTITLE: Importing React Components for Documentation in MDX\nDESCRIPTION: Imports custom React components used for rendering documentation elements like code examples from remote sources and browser window simulations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport CodeFromRemote from \"@theme/CodeFromRemote\"\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n```\n\n----------------------------------------\n\nTITLE: Get Version Response Definition (Proto)\nDESCRIPTION: Defines the response of the VersionService.GetVersion RPC. This response contains the version string of the Ory Keto instance.  There are no dependencies for this type. The inputs are the VersionService.GetVersion RPC call. The output is a version string. There are no known limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_7\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### GetVersionResponse\n\nResponse of the VersionService.GetVersion RPC.\n\n| Field   | Type              | Label | Description                                  |\n| ------- | ----------------- | ----- | -------------------------------------------- |\n| version | [string](#string) |       | The version string of the Ory Keto instance. |\n```\n\n----------------------------------------\n\nTITLE: Defining UI Script Nodes to Load WebAuthn Scripts (JSON)\nDESCRIPTION: This JSON snippet defines a UI node of type \"script\", used for loading external JavaScript files essential for WebAuthn functionality within Ory Identities flows. The node's attributes specify script source URL, asynchronous loading, security attributes like referrer policy, crossorigin, and integrity hash. The group key indicates it belongs to the \"webauthn\" feature set. This node enables automatic injection and management of WebAuthn-related scripts on the client side, ensuring integration with security-critical components. It requires client-side handling to interpret and load the script dynamically.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"script\",\n  \"group\": \"webauthn\",\n  \"attributes\": {\n    \"src\": \"http://localhost:4455/.well-known/ory/webauthn.js\",\n    \"async\": true,\n    \"referrerpolicy\": \"no-referrer\",\n    \"crossorigin\": \"anonymous\",\n    \"integrity\": \"sha512-E3ctShTQEYTkfWrjztRCbP77lN7L0jJC2IOd6j8vqUKslvqhX/Ho3QxlQJIeTI78krzAWUQlDXd9JQ0PZlKhzQ==\",\n    \"type\": \"text/javascript\",\n    \"id\": \"webauthn_script\",\n    \"node_type\": \"script\"\n  },\n  \"messages\": [],\n  \"meta\": {}\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Single Namespace Data: Keto CLI, Shell\nDESCRIPTION: Migrates data for only a specified namespace from the legacy schema to the new v0.7 schema using `keto namespace migrate legacy <namespace_name>`. Replace `<namespace_name>` with the target namespace's identifier. This allows for granular control over the migration process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/v0.7-migration.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nketo namespace migrate legacy <namespace_name>\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Length Maximum Constraint in Ory (JSON)\nDESCRIPTION: Triggered when an input exceeds the maximum allowed length. The context provides both the actual and maximum lengths for display. Used for input validation; id is 4000017.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_40\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000017,\n  \"text\": \"length must be \\u003c= 5, but got 6\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual_length\": 6,\n    \"max_length\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using `kratos lint lint` to Lint JSONNet Files (Shell)\nDESCRIPTION: Example command demonstrating how to invoke `kratos lint lint` to lint one or more JSONNet files. It utilizes glob patterns (explained in the synopsis) for flexible file selection and allows for additional flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-lint-lint.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nkratos lint lint path/to/files/*.jsonnet [more/files.jsonnet] [supports/**/{foo,bar}.jsonnet] [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Password Identifier\nDESCRIPTION: This JSON snippet configures Ory Identities to use a specific field as the identifier for the password authentication flow.  It utilizes the `ory.sh/kratos` extension within a JSON schema to define a field's role. When a user signs in with a password, the system will use the marked field as the identifier.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"password\": {\n        \"identifier\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying Ory Session after Login via API in Shell\nDESCRIPTION: This snippet shows how to verify an active user session with Ory Identities by making an authenticated GET request to the /sessions/whoami endpoint using a session cookie. It requires curl and a valid ory_kratos_session cookie. The API responds with the session information, including the user's identity details and session metadata. The input is a browser cookie (ory_kratos_session), and the output is a JSON object describing the session and authenticated user's identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\ncurl -s -H \"Cookie: ory_kratos_session=MTU5OTE2ODc2N3xEdi1CQkFFQ180SUFBUkFCRUFBQVJfLUNBQUVHYzNSeWFXNW5EQThBRFhObGMzTnBiMjVmZEc5clpXNEdjM1J5YVc1bkRDSUFJR055VlROMGRteHhSakJrUzBkbmRUUjBlVFY1V0RCRWFVTnJXVmR6V25oaHx2DICsB6IMbaHSQwnYITUZqr7Qx7CxUlnaneJWH495wQ==\" \\\n  https://playground.projects.oryapis.com/sessions/whoami | jq\n\n{\n  \"id\": \"ede90ce6-2420-435a-a745-3d8ab1a9636c\",\n  \"active\": true,\n  \"expires_at\": \"2020-09-04T21:32:47.5642404Z\",\n  \"authenticated_at\": \"2020-09-03T21:32:47.5881038Z\",\n  \"issued_at\": \"2020-09-03T21:32:47.5642688Z\",\n  \"identity\": {\n    \"id\": \"d96e86d9-bc33-4aa5-b865-4ade8a3974b3\",\n    \"schema_id\": \"default\",\n    \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\",\n    \"traits\": {\n      \"email\": \"foouser@ory.sh\",\n      \"name\": {\n        \"first\": \"foo\",\n        \"last\": \"user\"\n      }\n    },\n    \"verifiable_addresses\": [\n      {\n        \"id\": \"81bbdeae-6333-42f2-877e-26c78acb6ea5\",\n        \"value\": \"foouser@ory.sh\",\n        \"verified\": false,\n        \"via\": \"email\",\n        \"status\": \"pending\",\n        \"verified_at\": null\n      }\n    ],\n    \"recovery_addresses\": [\n      {\n        \"id\": \"596c1db4-ccaa-4f4e-9623-cb7e768026ad\",\n        \"value\": \"foouser@ory.sh\",\n        \"via\": \"email\"\n      }\n    ]\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Synopsis of the ory list relation-tuples Command\nDESCRIPTION: Provides the basic usage syntax for the `ory list relation-tuples` command in the Ory CLI. This command is used to retrieve a paginated list of relation tuples, optionally filtered by flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-relation-tuples.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory list relation-tuples [flags]\n```\n\n----------------------------------------\n\nTITLE: Submitting Ory Recovery Flow using TypeScript SDK (Native)\nDESCRIPTION: Shows how to submit data to an Ory recovery flow using the Ory TypeScript SDK, suitable for Node.js backends or native applications. Requires the flow ID and relevant data like email or code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_45\n\nLANGUAGE: ts\nCODE:\n```\n{submitTsRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Embedding FedCM Using BrowserWindow Component in MDX\nDESCRIPTION: Renders a BrowserWindow component displaying a FedCM demo page, illustrating how FedCM UI appears within a dedicated window. This snippet is used for documentation, not production implementation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/fedcm.mdx#_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\n<BrowserWindow url=\"https://cname.ory\">\n\n![FedCM in action](./_static/fedcm.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Kratos Public API Accessibility Using curl and jq\nDESCRIPTION: Sends an HTTP request to the Kratos public endpoint to verify the server is responding. It shows the expected 401 Unauthorized response due to lack of a valid session cookie, confirming the server is operational and enforcing authentication rules.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_18\n\nLANGUAGE: bash\nCODE:\n```\ncurl -s  http://accounts.example.com:4433/sessions/whoami | jq\n{\n  \"error\": {\n    \"code\": 401,\n    \"status\": \"Unauthorized\",\n    \"reason\": \"No valid session cookie found.\",\n    \"message\": \"The request could not be authorized\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example Settings Flow JSON Response - Last Name\nDESCRIPTION: This JSON snippet is another sample response from the Ory API, displaying a text input for 'Last Name' within the profile group. This aligns with the overall structure of the earlier JSON examples, demonstrating input fields for user profile information. The 'value' attribute is an empty string, indicating the field awaits user input.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/profile.invalid.txt#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.name.last\",\n    \"type\": \"text\",\n    \"value\": \"\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Last Name\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying OAuth2 Client Authentication Method with Ory CLI (shell)\nDESCRIPTION: This snippet demonstrates how to retrieve an OAuth 2.0 client's configuration using the Ory CLI to determine the current value of token_endpoint_auth_method. It requires a properly installed Ory CLI, network access to your Ory instance, and the replacement of {client.id} with the actual client identifier. The command outputs the client configuration details in JSON format, including the authentication method allowed at the token endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug/token-endpoint-auth-method.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory get oauth2-client {client.id}\n\n```\n\n----------------------------------------\n\nTITLE: Keto Database Migration Status Command\nDESCRIPTION: This command retrieves the current status of database migrations for Keto. It checks which migrations have been applied. It provides options to block until all migrations are applied and to format the output in various formats. This command does not affect namespaces; use `keto namespace migrate status` for that.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-migrate-status.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nketo migrate status [flags]\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Client Credentials Flow Example\nDESCRIPTION: This command performs the OAuth 2.0 Client Credentials Flow using the provided client ID and client secret. It exchanges these credentials for an access token. The client ID and client secret can be passed via command-line arguments, or they default to environment variables OAUTH2_CLIENT_ID and OAUTH2_CLIENT_SECRET if not provided.  It requires Ory CLI to be installed and configured to point to a valid Ory Kratos instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform-client-credentials.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory perform client-credentials --client-id ... --client-secret\n```\n\n----------------------------------------\n\nTITLE: JsonNet SMS Template\nDESCRIPTION: This JsonNet template defines the structure of the SMS message payload. It utilizes context variables such as `from`, `to`, and `body` to dynamically generate the message content. It takes the `ctx` object and uses its properties to format the outgoing SMS request to the configured SMS provider.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/10_sending-sms.mdx#_snippet_2\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) {\n  from: ctx.from,\n  to: ctx.to,\n  body: ctx.body\n  request_url: ctx.request_url\n}\n```\n\n----------------------------------------\n\nTITLE: Available Options for ory update opl Command\nDESCRIPTION: Lists all available options/flags for the ory update opl command, including file path specification, output format control, project selection, and confirmation options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-opl.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -f, --file string        Configuration file (file://namespace_config.ts, https://example.org/namespace_config.ts, ...) to update the Ory Permission Language config\n      --format string      Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for opl\n      --project string     The project to use, either project ID or a (partial) slug.\n  -q, --quiet              Be quiet with output printing.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n  -y, --yes                Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Displaying Dynamic Error Reason Message in Ory (JSON)\nDESCRIPTION: A parameterized error message that displays the specific {reason} for a validation or flow failure. Requires 'reason' to be supplied via the context object at runtime. Used across multiple error scenarios; message id is 4000001.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_24\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000001,\n  \"text\": \"{reason}\",\n  \"type\": \"error\",\n  \"context\": {\n    \"reason\": \"{reason}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoke Consent for Specific OAuth2 Client with Ory SDK\nDESCRIPTION: This snippet demonstrates how to revoke user consent for a specific OAuth2 client using the Ory SDK.  It imports the `revokeClient` function from a TypeScript file and renders it as a JavaScript code block.  This revokes all consent granted to a single application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/revoke-consent.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport revokeClient from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/consent-revoke-client.ts'\nimport CodeBlock from '@theme/CodeBlock'\n\n<CodeBlock language=\"js\">{revokeClient}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory OAuth2 Consent Endpoint (Shell)\nDESCRIPTION: This shell command uses the Ory CLI to configure the consent endpoint URL for the OAuth2/OpenID Connect flow. It sets the \"urls/consent\" property in the Ory project's OAuth2 configuration, directing Ory to redirect users to this specified URL (`https://consent.example.org/oauth2-consent`) when user consent is required. Your custom application at this URL must display the consent UI and communicate back to Ory using the provided `consent_challenge`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config\n  --replace \"/urls/consent=\\\"https://consent.example.org/oauth2-consent\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Registration Payload in JSON5 (Native)\nDESCRIPTION: This JSON5 code provides a sample payload for submitting a registration request with cURL in a native application. This payload provides the fields required by the Ory API for the user's registration.  Prerequisites: the identity schema as configured for the Ory instance. Expected Input: The traits required by the API. Output: A JSON string with the payload.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_23\n\nLANGUAGE: json5\nCODE:\n```\nimport submitRegistrationCurlApiJson from '../../../code-examples/curl/registration/submit-registration-api.json'\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with PostgreSQL (prod)\nDESCRIPTION: Starts Ory Hydra with a PostgreSQL database using the production build. Requires Docker and Docker Compose. It uses `quickstart.yml` and `quickstart-postgres.yml` files for configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n    -f quickstart-postgres.yml \\\n    up\n```\n\n----------------------------------------\n\nTITLE: Configuring Social Sign-In Connections\nDESCRIPTION: This JSON configuration demonstrates how to configure social sign-in connections using the `provider` and `subject` fields, which are essential for linking user identities from social platforms like GitHub and Google.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_18\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-oidc@example.org\"\n  },\n  \"credentials\": {\n    \"oidc\": {\n      \"config\": {\n        \"providers\": [\n          {\n            \"provider\": \"github\",\n            \"subject\": \"12345\"\n          },\n          {\n            \"provider\": \"google\",\n            \"subject\": \"12345\"\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example using hydra ls identities with pagination (Shell)\nDESCRIPTION: Demonstrates how to list identities using the `hydra ls identities` command, specifically showing the use of `--page-token` for pagination and `--page-size` to limit the number of results per page. Although presented in the context of `hydra list clients` documentation, the example command shown is `hydra ls identities`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-list-clients.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nhydra ls identities --page-token eyJwYWdlIjoxfQ --page-size 10\n```\n\n----------------------------------------\n\nTITLE: Querying Self-Service Login Flow Identifiers Using cURL and jq - Bash\nDESCRIPTION: This Bash snippet uses cURL to send an HTTP GET request to the Ory playground API for a specific self-service login flow, specifying that the response should be in JSON format. The output is then piped to jq to filter and extract the 'identifier' input node from the '.ui.nodes' array, allowing developers to easily inspect or automate workflows involving login field presence. Dependencies include cURL and jq, and the snippet requires the Ory playground API endpoint and a valid flow ID as parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/login/samples/password.missing.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/login/flows?id=a2d6e166-5153-42a6-8943-ef99eba8ab2e' \\\n    | jq -r '.ui.nodes[] | select(.attributes.name==\"identifier\")'\n```\n\n----------------------------------------\n\nTITLE: Requesting Next Page in HTTP\nDESCRIPTION: This code block demonstrates how to get the next page of results using the `next` link from the `Link` header in a previous response. It uses the `page_size` and `page_token` parameters to specify the current page. The example includes request and response headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/api-design.md#_snippet_2\n\nLANGUAGE: HTTP\nCODE:\n```\n> GET /admin/clients?page_size=5&page_token=h9LfEKUiFoLH2R0A HTTP/1.1\n> Host: $PROJECT_SLUG.projects.oryapis.com\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Link: </admin/clients?page_size=5&page_token=euKoY1BqY3J8GVax>; rel=\"first\",</admin/clients?page_size=5&page_token=QLux4Tu5gb8JfW70>; rel=\"next\"\n< Date: Mon, 22 Apr 2019 23:35:29 GMT\n< Transfer-Encoding: chunked\n<\n[...] \n```\n\n----------------------------------------\n\nTITLE: Installing Ory Hydra with SQL Database Connection\nDESCRIPTION: Shell command for installing Ory Hydra Helm chart with a SQL database connection string.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nhelm install \\\n    ...\n    --set 'dsn=postgres://foo:bar@baz:1234/db' \\\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Running SQL Migrations with Docker\nDESCRIPTION: This command demonstrates how to run SQL migrations using the Ory Kratos Docker image. The `DSN` environment variable specifies the database URL, and the `migrate sql -e` command executes the migrations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ndocker -e DSN=\"{your database URL}\" run oryd/kratos:<version> migrate sql -e\n```\n\n----------------------------------------\n\nTITLE: Handling Native App Callback with Expo WebBrowser in TypeScript (TSX)\nDESCRIPTION: This React Native component (TSX) handles the deep link (`return_to` URL) received after successful social authentication. It uses Expo's `WebBrowser.maybeCompleteAuthSession` to potentially close the browser tab and signal completion of the flow initiated by `openAuthSessionAsync`. It's responsible for extracting the second part of the exchange code from the URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/components/Routes/Callback.tsx\n// Fetched content starts at: const Callback = (props: Props) => {\n// Fetched content ends at:   )\nimport React, { useEffect } from 'react';\nimport * as WebBrowser from 'expo-web-browser';\nimport { useLinking } from '@react-navigation/native'; // Or similar routing/linking library\n\n// Dismisses the Expo WebBrowser window upon callback\nWebBrowser.maybeCompleteAuthSession();\n\ninterface Props {\n  // Props likely include navigation, route params containing the code\n}\n\nconst Callback = (props: Props) => {\n  // Example using React Navigation linking\n  const { getInitialURL, subscribe } = useLinking(props.navigation.getRootNavigator(), {\n    prefixes: ['YOUR_APP_SCHEME://'], // Replace with your app scheme\n    config: {\n      screens: {\n        Callback: 'callback' // Route name and path segment\n      }\n    }\n  });\n\n  useEffect(() => {\n    // Process initial URL if app was opened via deep link\n    getInitialURL().then(url => {\n      if (url) {\n        handleDeepLink(url);\n      }\n    });\n\n    // Listen for subsequent deep links while app is open\n    const unsubscribe = subscribe(url => {\n      handleDeepLink(url);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const handleDeepLink = (url: string) => {\n    console.log('Received deep link:', url);\n    // Extract the 'code' query parameter from the URL\n    const urlObject = new URL(url);\n    const code = urlObject.searchParams.get('code');\n    const flowId = urlObject.searchParams.get('flow'); // Or state parameter\n\n    if (code) {\n      // Proceed to exchange the code for a session token\n      // exchangeCodeForToken(code, flowId, initialExchangeCode); // Needs flowId and initial code\n    } else {\n      console.error('Callback URL did not contain code parameter');\n      // Handle error\n    }\n  };\n\n  return (\n    // Render loading indicator or similar\n    <></>\n  );\n};\n```\n\n----------------------------------------\n\nTITLE: Submitting login flow with Ory SDK in Go, TypeScript, and React\nDESCRIPTION: These code examples illustrate how to use Ory's SDKs to submit login credentials programmatically in Go, TypeScript, and React environments. They handle the interaction with the `/self-service/login` endpoint abstracting away raw HTTP details, including cookie and CSRF management where necessary. The Go snippet is designed for backend applications, while TypeScript and React examples fit frontend or hybrid apps. Inputs are user login credentials and optional flow identifiers, outputs are API responses to indicate login flow progression or success.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_15\n\nLANGUAGE: go\nCODE:\n```\nimport submitLoginApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/submit-login.go'\n```\n\nLANGUAGE: typescript\nCODE:\n```\nimport submitTsLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/submit-login-native.ts'\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport submitReactLoginApi from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/login/submit-login-react.tsx'\n```\n\n----------------------------------------\n\nTITLE: Example of successful settings update response for client-side browser clients (JSON)\nDESCRIPTION: This JSON response showcases how the client-side browser flow responds with the updated identity details after a successful settings update. It is used in client scripts to handle session updates and inform the user of success.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"f71743cd-700d-4a30-9275-8edc90de07cc\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T12:39:36.804397011Z\",\n  \"issued_at\": \"2021-04-28T11:39:36.804397011Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/settings/flows?id=f71743cd-700d-4a30-9275-8edc90de07cc\",\n  \"ui\": {\"action\": \"https://playground.projects.oryapis.com/self-service/settings?flow=f71743cd-700d-4a30-9275-8edc90de07cc\", \"method\": \"POST\", \"nodes\": [...], \"messages\": [{\"id\": 1050001, \"text\": \"Your changes have been saved!\", \"type\": \"info\"}]}},\n  \"identity\": {\"id\": \"5b23b651-c186-4398-8717-f15ac72cbc7e\", \"schema_id\": \"default\", \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\", \"traits\": {\"email\": \"example.user@ory.sh\"}, \"verifiable_addresses\": [...], \"recovery_addresses\": [...]}, \"state\": \"success\"}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redirect Error Handler in JSON5\nDESCRIPTION: Sets up a redirect response with HTTP status 301/302, redirecting clients to a specified URL and optionally appending the original request URL as a query parameter. Match conditions are defined under 'when'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_12\n\nLANGUAGE: json5\nCODE:\n```\n// access-rule.json\n{\n  handler: \"redirect\",\n  config: {\n    to: \"http://my-website/login\", // required!!\n    return_to_query_param: \"return_to\",\n    code: 301, // defaults to 302 - only 301 and 302 are supported.\n    when: [\n      // ...\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Inherited Configuration Option for Keto Commands\nDESCRIPTION: Details the inherited `--config` (or `-c`) option, allowing users to specify configuration files to load. Multiple files can be provided, with later files overwriting earlier ones. The default path is `/home/runner/keto.yml`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-validate.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Configuring self-hosted HiBP API endpoint in Ory Kratos configuration YAML\nDESCRIPTION: This YAML snippet shows how to configure Ory Kratos to use a custom Have I Been Pwned (HiBP) API host by setting the 'haveibeenpwned_host' parameter under the password method config in the selfservice section. It enables Kratos to query a privately hosted HiBP API instance, useful in environments with restricted external network access. The snippet assumes a valid TLS connection and trusted CA certificate on the system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/hosting-own-have-i-been-pwned-api.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      config:\n        haveibeenpwned_host: api.private.host\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Pattern Constraint Violation in Ory (JSON)\nDESCRIPTION: This message is displayed when an input value does not match the required regex pattern. The pattern string is dynamically injected from the context object. Used for input format validation in Ory flows; message id is 4000004.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_27\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000004,\n  \"text\": \"does not match pattern \\\"{pattern}\\\"\",\n  \"type\": \"error\",\n  \"context\": {\n    \"pattern\": \"{pattern}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Refresh Token Expiration via Ory CLI\nDESCRIPTION: This shell script snippet demonstrates how to configure the expiration time of refresh tokens globally in Ory. It uses the `ory patch oauth2-config` command. The `--replace` flag modifies the `refresh_token` value. This configuration influences how often new access tokens need to be requested. The `--project` and `--workspace` flags are necessary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/refresh_token=\\\"24h\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Docker Network (Bash)\nDESCRIPTION: Creates a dedicated Docker network named 'hydraguide'. This network facilitates communication between the containers that will host Ory Hydra, the database, and the login/consent application, allowing them to refer to each other by their container names.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker network create hydraguide\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for `ory create relation-tuples` (Shell)\nDESCRIPTION: Details command-line options inherited from parent Ory CLI commands. These include `-c` or `--config` for specifying a configuration file, `--format` for setting the output format (e.g., json, yaml), `-q` or `--quiet` to suppress output, and `-y` or `--yes` to automatically confirm any prompts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-relation-tuples.md#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, and json-pretty. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Installing Ory SDK and CLI using Shell\nDESCRIPTION: Installs the Ory Client SDK for Fetch API (`@ory/client-fetch`) and the Ory Command Line Interface (`@ory/cli`) as project dependencies using npm.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm i --save @ory/client-fetch @ory/cli\n```\n\n----------------------------------------\n\nTITLE: YAML - Configure Social Sign-In with OIDC\nDESCRIPTION: This YAML configuration snippet demonstrates how to configure a generic social sign-in provider using the OpenID Connect (OIDC) method within an Ory project. It sets up the `oidc` method, specifying the provider's ID, type, client ID, client secret, issuer URL, and data mapper.  The `mapper_url` can use a base64 encoded Jsonnet file or an URL. Dependencies include a valid project and workspace ID and the Ory Identity config. The output enables social sign-in via the specified provider.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/05_generic.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: generic # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: generic\n            client_id: .... # Replace this with the Client ID\n            client_secret: .... # Replace this with the Client secret\n            issuer_url: https://accounts.google.com # Replace this with the providers issuer URL\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - email\n            # supported scopes can be found in your providers dev docs\n            claims_source: id_token  # set to \"userinfo\" to read the claims from the UserInfo endpoint\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for `keto relation-tuple create`\nDESCRIPTION: Lists command-line options inherited from parent commands that are applicable to `keto relation-tuple create`. This includes the `--config` or `-c` flag, which allows specifying configuration files to load.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-create.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Verifying CNAME Configuration with dig Shell\nDESCRIPTION: This command demonstrates how to use the `dig` command-line tool to perform a DNS lookup for a specific hostname. It's used to verify that a CNAME record is correctly configured and points to the expected Ory Network target URL (<your-project-slug>.projects.oryapis.com), rather than resolving directly to an IP address (which might indicate unwanted proxying).\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/custom-domains.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n dig auth.foobar.com\n\n; <<>> DiG 9.10.6 <<>> auth.foobar.com\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 7283\n;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 512\n;; QUESTION SECTION:\n;auth.foobar.com.             IN      A\n\n;; ANSWER SECTION:\nauth.foobar.com.      300     IN      CNAME   <your-project-slug>.projects.oryapis.com.\n<your-project-slug>.projects.oryapis.com. 300 IN A 104.18.12.126\n<your-project-slug>.projects.oryapis.com. 300 IN A 104.18.13.126\n\n;; Query time: 28 msec\n;; SERVER: 8.8.8.8#53(8.8.8.8)\n;; WHEN: Tue Oct 31 11:47:22 CET 2023\n;; MSG SIZE  rcvd: 135\n```\n\n----------------------------------------\n\nTITLE: Keto Migrate Up Command Options\nDESCRIPTION: Available command-line options specific to the 'keto migrate up' command, including format selection, help display, quiet mode, and automatic confirmation to prompts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-migrate-up.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for up\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             yes to all questions, no user input required\n```\n\n----------------------------------------\n\nTITLE: Setting Complex Configuration via JSON string Environment Variables (Windows Powershell)\nDESCRIPTION: This snippet demonstrates how to define complex configuration keys using JSON strings passed in via environment variables in Windows PowerShell.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_13\n\nLANGUAGE: powershell\nCODE:\n```\n# Windows Powershell\n$env:SOME_NESTED_KEY_AND_ARRAY = '[{\"id\":\"foo\"},{\"id\":\"bar\"}]'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Verification Flow using TypeScript SDK (React)\nDESCRIPTION: Demonstrates how to use the Ory Kratos TypeScript SDK within a React application to retrieve an existing verification flow by its ID, likely involving state management and asynchronous calls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_57\n\nLANGUAGE: tsx\nCODE:\n```\n{getReactVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Running Ory with Distributed Tracing Using Docker Compose\nDESCRIPTION: Command to start Ory services with tracing enabled using Docker Compose. This example combines the standard quickstart.yml with the tracing configuration from quickstart-tracing.yml.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/operations/01_tracing.md#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ndocker-compose -f quickstart.yml \\\n    -f quickstart-tracing.yml \\\n    up --build\n```\n\n----------------------------------------\n\nTITLE: Canceling Webhooks based on Email Prefix using Jsonnet\nDESCRIPTION: This Jsonnet template cancels a webhook by raising an error if the user's email starts with \"test-\". Otherwise, it returns a standard user ID object. This technique is useful for preventing test data from triggering unintended webhook actions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_6\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx)\nif std.startsWith(ctx.identity.traits.email, \"test-\") then\n  error \"cancel\"\nelse\n  {\n    user_id: ctx.identity.id\n  }\n```\n\n----------------------------------------\n\nTITLE: Example CLI Command for Updating Permission Config with YAML Format\nDESCRIPTION: This snippet illustrates how to run the 'ory update permission-config' command specifying YAML files and setting the output format to YAML. It shows how namespaces are represented when using YAML input and the command's flexibility in accepting different configuration formats.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-permission-config.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory update permission-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/keto-config.yaml \\\n    --format yaml\n\nnamespaces:\n  - name: files\n    # ...\n```\n\n----------------------------------------\n\nTITLE: Testing PostgreSQL Credentials\nDESCRIPTION: This command attempts to connect to the PostgreSQL database using the specified user, password, and host.  It is used to verify that the user has been created and that authentication is working correctly.  Requires: psql client installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\npsql -U hydra -W -h 127.0.0.1\n```\n\n----------------------------------------\n\nTITLE: Validation Error: No Backup Recovery Codes in Ory (JSON)\nDESCRIPTION: This static message informs users that no backup recovery codes have been configured. Typically shown during account recovery setup or attempts; id is 4000014.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_37\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000014,\n  \"text\": \"You have no backup recovery codes set up.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Parsing Ory OAuth2 Client Creation JSON Output with jq (Shell)\nDESCRIPTION: Demonstrates how to capture the JSON output from the `ory create oauth2-client` command into a shell variable. It then shows how to use the `jq` command-line tool to extract specific fields, such as the client ID (`.client_id`) and client secret (`.client_secret`), from the JSON response. This requires the `jq` tool to be installed and the `--format json` flag to be used during client creation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-oauth2-client.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nclient=$(ory create oauth2-client \\\n    --format json \\\n    ...)\necho $client\n\n# Parse the JSON response using jq to get the client ID and client secret:\nclient_id=$(echo $client | jq -r '.client_id')\nclient_secret=$(echo $client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: Example JWT Tokenizer Template Configuration in YAML\nDESCRIPTION: Demonstrates how to configure JWT tokenizer templates in Ory Network identity configuration using YAML syntax. Each template has a unique key, a JWKS URL for signing keys, an optional claims mapper URL for customizing claims, and TTL that defines the token expiry. This structure enables conversion of sessions into JWTs with specific signing and claims behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  whoami:\n    tokenizer:\n      templates:\n      jwt_template_1:\n        jwks_url: base64://... # A JSON Web Key Set (required)\n        claims_mapper_url: base64://... # A JsonNet template for modifying the claims\n        ttl: 1m # 1 minute (defaults to 10 minutes)\n      another_jwt_template:\n        jwks_url: base64://... # A JSON Web Key Set\n```\n\n----------------------------------------\n\nTITLE: Creating Razor Page for Protected Content (Shell)\nDESCRIPTION: Utilizes the .NET CLI `dotnet new page` command to generate a new Razor Page file (`Index.cshtml`) specifically for displaying protected content. The `--no-pagemodel` flag prevents the creation of a separate code-behind file, and `--output Pages` places it in the standard Razor Pages directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ndotnet new page --name Index --no-pagemodel --output Pages\n```\n\n----------------------------------------\n\nTITLE: Purpose of Cipher Secrets for OIDC Authentication Tokens\nDESCRIPTION: Highlights that cipher secrets are used specifically for encrypting and decrypting tokens obtained via the OpenID Connect (OIDC) authentication method. Proper management of these secrets is crucial for secure token handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/secret-key-rotation.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\n  cipher:\n    - new-secret-key\n    - old-secret-key\n```\n\n----------------------------------------\n\nTITLE: Setting Cookie Secrets in Ory Hydra Helm Installation\nDESCRIPTION: Shell command showing how to set cookie secrets when installing Ory Hydra with Helm.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nhelm install \\\n    ...\n    --set 'hydra.config.secrets.cookie=$(LC_ALL=C tr -dc 'A-Za-z0-9' < /dev/urandom | base64 | head -c 32)' \\\n    ...\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Enable CAPTCHA Protection using Ory CLI (Shell)\nDESCRIPTION: This snippet demonstrates how to enable CAPTCHA protection for Ory Identities using the Ory Command Line Interface (CLI). It modifies the identity configuration for a specific project and workspace by setting the `selfservice.methods.captcha.enabled` flag to `true`. This requires the Ory CLI to be installed and configured with access to the target project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/security.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --replace '/selfservice/mehods/captcha/enabled=true'\n```\n\n----------------------------------------\n\nTITLE: Config file loading options\nDESCRIPTION: This snippet describes the options inherited from parent commands, specifically related to loading configuration files. The `-c` or `--config` option allows users to specify configuration files to load, overwriting settings in the order they are specified. The default configuration file path is `/home/runner/keto.yml`. It inherits from parent command and requires proper configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-migrate.md#_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Ory Error Message Structure (JSON5)\nDESCRIPTION: Defines the standard JSON structure for error messages returned by Ory flows. Includes an immutable `id` for identification/translation, a default English `text` message, and an optional `context` object containing additional details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_71\n\nLANGUAGE: json5\nCODE:\n```\n{\n  id: 1234,\n  // This ID will not change and can be used to translate the message or use your own message content.\n  text: \"Some default text\",\n  // A default text in english that you can display if you do not want to customize the message.\n  context: {},\n  // A JSON object which may contain additional fields such as `expires_at`. This is helpful if you want to craft your own messages.\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling or Disabling Identity Identifier Similarity Check via Ory CLI\nDESCRIPTION: This snippet showcases how to toggle the feature that prevents passwords from being similar to user identifiers, such as email addresses. It modifies the configuration setting for identifier similarity check using the Ory CLI, allowing administrators to enhance password strength enforcement.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/password-policy.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config \"$PROJECT_ID\" \\\n  --replace '/selfservice/methods/password/config/identifier_similarity_check_enabled=false'\n```\n\n----------------------------------------\n\nTITLE: Executing oathkeeper rules get command\nDESCRIPTION: This snippet shows how to use the `oathkeeper rules get` command with an example ID. It requires the endpoint flag to point to the management API and the ID of the rule to be retrieved.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-get.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\noathkeeper rules --endpoint=http://localhost:4456/ get rule-1\n```\n\n----------------------------------------\n\nTITLE: Using 'unauthorized' Authenticator in Ory Oathkeeper Access Rule Example\nDESCRIPTION: This example provides an Ory Oathkeeper Access Rule definition that uses the 'unauthorized' authenticator to reject all incoming requests for the specified path and method. A shell command and expected output show how to test this rule with `curl`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"unauthorized\"\n  }]\n}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 401 Unauthorized\n```\n\n----------------------------------------\n\nTITLE: Read Service Definition (Proto)\nDESCRIPTION: Defines the ReadService, which is responsible for querying relationships.  It is part of the read-APIs.  The service provides a method named ListRelationTuples which accepts a ListRelationTuplesRequest and returns a ListRelationTuplesResponse. There are no known external dependencies. The primary input is the request to query relation tuples. The output is a list of relation tuples. There are no known limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_5\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### ReadService\n\nThe service to query relationships.\n\nThis service is part of the\n[read-APIs](../concepts/25_api-overview.mdx#read-apis).\n\n| Method Name        | Request Type                                                                              | Response Type                                                                               | Description              |\n| ------------------ | ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | ------------------------ |\n| ListRelationTuples | [ListRelationTuplesRequest](#ory-keto-relation_tuples-v1alpha2-ListRelationTuplesRequest) | [ListRelationTuplesResponse](#ory-keto-relation_tuples-v1alpha2-ListRelationTuplesResponse) | Lists ACL relationships. |\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Backup Recovery Code Used in Ory (JSON)\nDESCRIPTION: Error indicating that a supplied backup recovery code has already been used and is thus invalid. Statically defined; message id is 4000012.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_35\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000012,\n  \"text\": \"This backup recovery code has already been used.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Ory List Identities Command Syntax - Shell\nDESCRIPTION: This snippet shows the fundamental syntax for invoking the identities listing operation with the Ory CLI. It accepts standard flags for customizing consistency, page size, page tokens, project, and workspace context. Required dependencies are a configured Ory CLI and, as needed, valid project or workspace identifiers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-identities.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory list identities [flags]\n```\n\n----------------------------------------\n\nTITLE: Applying Bearer Token Authenticator to Access Rule (ORY Oathkeeper) - YAML\nDESCRIPTION: This YAML snippet illustrates how to apply and configure the `bearer_token` authenticator within a specific Oathkeeper Access Rule definition file. It specifies the `handler` as `bearer_token` and provides the essential configuration, including the `check_session_url` and demonstrating how to set `token_from` to extract the token from a `query_parameter`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: bearer_token\n    config:\n      check_session_url: https://session-store-host\n      token_from:\n        query_parameter: auth-token\n        # or\n        # header: Custom-Authorization-Header\n        # or\n        # cookie: auth-token\n```\n\n----------------------------------------\n\nTITLE: Initializing Settings Flow with HTTP GET - Shell\nDESCRIPTION: This shell script snippet initializes the settings flow for a browser client by sending a GET request to the settings endpoint.  It uses a cookie jar to manage the session, retrieves the flow ID from the Location header in the redirect, which is then used to access the settings UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -i -X GET \\\n    --cookie $cookieJar --cookie-jar $cookieJar \\\n    -H \"Accept: text/html\" \\\n    https://playground.projects.oryapis.com/self-service/settings/browser\n```\n\n----------------------------------------\n\nTITLE: Basic Command Syntax for Ory Patch Project\nDESCRIPTION: The basic syntax for the ory patch project command, used to patch the Ory Network project configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-project.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch project [flags]\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Project Using Authorization Header in Bash\nDESCRIPTION: Shows how to use a GET request with curl to retrieve details of a specific Ory Network project by project ID. Requires setting the 'Authorization' header with a Workspace API Key to authenticate access. The response is expected in JSON format and can be formatted with jq. This snippet assumes the environment variables WORKSPACE_API_KEY and PROJECT_ID are set beforehand.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nGET /projects/$PROJECT_ID HTTP/1.1\nHost: api.console.ory.sh\nAccept: application/json\nAuthorization: Bearer ${WORKSPACE_API_KEY}\n```\n\n----------------------------------------\n\nTITLE: Making Decision API Requests to Ory Oathkeeper Using Bash\nDESCRIPTION: This snippet demonstrates making a GET request to Ory Oathkeeper's Access Control Decision API endpoint. The request includes an authorization bearer token and targets a path matching an access control rule. The decision API validates the request against defined rules and directly responds with an HTTP status indicating allowance or denial. This approach supports various HTTP methods and subpaths by prefixing them with '/decisions'. The example highlights inputs such as the HTTP method, authorization token, and target path, with expected outputs including HTTP 200 for allowed requests or error codes otherwise.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/index.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nGET /decisions/my-service/whatever HTTP/1.1\nHost: oathkeeper-api:4456\nAuthorization: bearer some-token\n```\n\nLANGUAGE: bash\nCODE:\n```\nHTTP/1.1 200 OK\nAuthorization: bearer some-token\n```\n\nLANGUAGE: bash\nCODE:\n```\nHTTP/1.1 401 OK\nContent-Length: 0\nConnection: Closed\n```\n\nLANGUAGE: bash\nCODE:\n```\nHTTP/1.1 200 OK\nX-User-ID: john.doe\n```\n\n----------------------------------------\n\nTITLE: Mapping CSRF Token in UI Nodes (TSX)\nDESCRIPTION: This MDX code block imports and displays a React component example (TSX) demonstrating how to map Ory UI nodes to render form elements, specifically including the hidden input field for the CSRF token (`csrf_token`), which is essential for submitting Ory flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_73\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport csrfMapping from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/csrf-mapping.tsx'\n\n<CodeBlock language=\"tsx\">{csrfMapping}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Reload Nginx Service\nDESCRIPTION: This command reloads the Nginx service after making changes to the configuration files. This ensures that the new configurations are applied without interrupting the service.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_30\n\nLANGUAGE: bash\nCODE:\n```\nservice nginx reload\n```\n\n----------------------------------------\n\nTITLE: Mapping Ory Hydra User Info in GitLab OmniAuth (Ruby)\nDESCRIPTION: This Ruby snippet, part of the `gitlab_rails['omniauth_providers']` configuration in `gitlab.rb`, defines the `user_response_structure`. It instructs GitLab's OmniAuth generic OAuth2 strategy on how to extract user information from the response of the `userinfo_endpoint`. Specifically, it maps the `sub` field from the Hydra user info response to both the user's unique ID (`id_path`) and their email address (`attributes: { email: 'sub' }`) within GitLab.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_10\n\nLANGUAGE: ruby\nCODE:\n```\n      user_response_structure: {\n        root_path: [],\n        id_path: 'sub',\n        attributes: {\n                email: 'sub'\n        }\n      },\n```\n\n----------------------------------------\n\nTITLE: Configuring Organization-Specific SAML/OIDC\nDESCRIPTION: This JSON configuration demonstrates how to specify organization-specific SAML and OIDC connections using the `organization` field. It applies to both the top-level identity object and individual provider configurations, enabling connections specific to an organization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-oidc@example.org\"\n  },\n  // highlight-start\n  \"organization\": \"9ed50339-d6b9-47ef-9610-194773f3bfbf\",\n  // highlight-end\n  \"credentials\": {\n    \"saml\": {\n      \"config\": {\n        \"providers\": [\n          {\n            \"provider\": \"okta\",\n            \"subject\": \"12345\",\n            // highlight-start\n            \"organization\": \"9ed50339-d6b9-47ef-9610-194773f3bfbf\"\n            // highlight-end\n          }\n        ]\n      }\n    },\n    \"oidc\": {\n      \"config\": {\n        \"providers\": [\n          {\n            \"provider\": \"github\",\n            \"subject\": \"12345\",\n            // highlight-start\n            \"organization\": \"9ed50339-d6b9-47ef-9610-194773f3bfbf\"\n            // highlight-end\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Recovery Flow using TypeScript SDK (Native)\nDESCRIPTION: Shows how to get an existing Ory recovery flow using its ID with the Ory TypeScript SDK, suitable for Node.js backends or native applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_40\n\nLANGUAGE: ts\nCODE:\n```\n{getTsRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Pulling Ory Hydra Docker Image (Bash)\nDESCRIPTION: Downloads the specified version (v1.10.6) of the Ory Hydra Docker image from Docker Hub. This command ensures that the correct and most recent required version of the Hydra image is available locally before attempting to run containers based on it.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ndocker pull oryd/hydra:v1.10.6\n```\n\n----------------------------------------\n\nTITLE: Configuring Webhook Response Ignoring (YAML)\nDESCRIPTION: This YAML configuration snippet demonstrates setting the `response.ignore` property to `true` for a webhook. When set, the webhook execution becomes non-blocking, meaning that the system will ignore the response from the webhook target.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook\nconfig:\n  # highlight-start\n  response:\n    ignore: true\n  # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Exporting Ory Permissions Configuration from Ory Network\nDESCRIPTION: Commands to list workspaces and projects, and export the Permissions configuration from Ory Network. The configuration can be exported in YAML, JSON, or pretty-printed JSON format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get permission-config --project <project-id> --workspace <workspace-id> --format yaml\n```\n\n----------------------------------------\n\nTITLE: Connecting to FedCM API and Submitting Identity Assertion in JavaScript\nDESCRIPTION: Provides JavaScript code to fetch FedCM parameters from the Ory network, request an identity assertion from the user's browser via the FedCM API, and submit this assertion to Ory to log in or register the user. It depends on the Fetch API and the browser support for the Credentials API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/fedcm.mdx#_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nif (\"IdentityCredential\" in window) {\n  // Fetch the OIDC provider configuration from the Ory Network.\n  // This will only include providers for which the FedCM config URL is set.\n  const parameters = await (\n    await fetch(\"https://<YOUR CUSTOM ORY DOMAIN>.projects.oryapis.com/self-service/fed-cm/parameters\", {\n      credentials: \"include\",\n    })\n  ).json()\n\n  // Request an identity assertion from the user's browser.\n  // Prior to the call, you can sort or filter this list if needed.\n  const { token } = await navigator.credentials.get({\n    identity: {\n      providers: parameters.providers.map((p) => ({\n        configURL: p.config_url,\n        clientId: p.client_id,\n        nonce: p.nonce,\n      })),\n    },\n  })\n\n  // Submit the identity assertion to the Ory Network.\n  // This will log in or register the user and issue a session.\n  await fetch(\"https://<YOUR CUSTOM ORY DOMAIN>/self-service/fed-cm/token\", {\n    credentials: \"include\", // necessary to send the CSRF cookie\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      token,\n      csrf_token: parameters.csrf_token, // necessary to prevent CSRF attacks\n    }),\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Creating systemd Service Unit File for Ory Kratos\nDESCRIPTION: Creates a systemd service file to manage the Ory Kratos server as a background service that restarts automatically upon failure. It specifies execution under the 'kratos' user and the command to start the service with the appropriate config.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\n[Unit]\nDescription=Kratos Service\nAfter=network.target\nStartLimitIntervalSec=0\n\n[Service]\nType=simple\nRestart=always\nRestartSec=1\nUser=kratos\nExecStart=/opt/kratos/bin/kratos -c /opt/kratos/config/kratos.yml serve\n\n[Install]\nWantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Disabling a Session using Ory SDK (Go)\nDESCRIPTION: This code snippet demonstrates how to disable a specific session using the Ory Go SDK. It utilizes the `disableSession` API call. The exact implementation and dependencies are referenced from an external code file. This operation revokes a single session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_17\n\nLANGUAGE: go\nCODE:\n```\nimport goDisableSession from '!!raw-loader!../../../code-examples/sdk/go/session/disable-session.go'\n```\n\n----------------------------------------\n\nTITLE: Logout Token Example Claims in JSON\nDESCRIPTION: Example JSON structure showing the claims in an OpenID Connect logout token. The token contains issuer information, audience, timestamp, and session details required for back-channel logout implementation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/logout.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"iss\": \"https://server.example.com\",\n  \"aud\": \"s6BhdRkqt3\",\n  \"iat\": 1471566154,\n  \"jti\": \"bWJq\",\n  \"sid\": \"08a5019c-17e1-4977-8f42-65a12843ea02\",\n  \"events\": {\n    \"http://schemas.openid.net/event/backchannel-logout\": {}\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example JWT Claims Structure\nDESCRIPTION: JSON structure showing the standard claims that should be included in a JWT for OAuth2 token exchange. This includes issuer, subject, audience, not before time, and expiration time claims.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  iss: \"https://my-issuer.com\",\n  sub: \"7146dd0b-f243-43ba-815c-7a00216b4823\",\n  aud: \"https://$PROJECT_SLUG.projects.oryapis.com/oauth2/token\",\n  nbf: 1300815780,\n  exp: 1300819380,\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with PostgreSQL (dev)\nDESCRIPTION: Starts Ory Hydra with a PostgreSQL database using the current commit. Requires Docker and Docker Compose. It uses `quickstart.yml` and `quickstart-postgres.yml` files for configuration and builds the image.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n    -f quickstart-postgres.yml \\\n    up \\\n    --build\n```\n\n----------------------------------------\n\nTITLE: Example: Capture Hydra CLI Output in Shell Variable\nDESCRIPTION: This snippet shows how to execute the `hydra create oauth2-client` command, format the output as JSON, and capture the entire response into a shell variable named `client`. The placeholder `...` indicates where client configuration flags would go.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-oauth2-client.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nclient=$(hydra create oauth2-client \\\n    --format json \\\n    ...)\necho $client\n```\n\n----------------------------------------\n\nTITLE: Including WebAuthn JavaScript in HTML\nDESCRIPTION: This HTML snippet shows how to include the Ory WebAuthn JavaScript file in the `<head>` section of an HTML page. This script is required for passwordless authentication using WebAuthn. It assumes that the script is served from the `/.well-known/ory/webauthn.js` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<head>\n  <script src=\"/.well-known/ory/webauthn.js\"></script>\n</head>\n```\n\n----------------------------------------\n\nTITLE: Setting Custom SMTP Headers in Ory Kratos Mail Courier YAML\nDESCRIPTION: This YAML snippet shows how to configure custom SMTP headers within the 'smtp' subsection of the 'courier' configuration. It demonstrates integration with AWS SES SMTP interface by specifying cross-account sending headers such as 'X-SES-SOURCE-ARN', 'X-SES-FROM-ARN', and 'X-SES-RETURN-PATH-ARN'. These headers enable authentication and authorization for sending emails on behalf of another AWS identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/01_mail-courier-selfhosted.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# kratos -c path/to/my/kratos/config.yml serve\ncourier:\n  smtp:\n    headers:\n      X-SES-SOURCE-ARN: arn:aws:ses:us-west-2:123456789012:identity/example.com\n      X-SES-FROM-ARN: arn:aws:ses:us-west-2:123456789012:identity/example.com\n      X-SES-RETURN-PATH-ARN: arn:aws:ses:us-west-2:123456789012:identity/example.com\n```\n\n----------------------------------------\n\nTITLE: Setting Session Cookie SameSite Attribute in Ory Kratos (YAML)\nDESCRIPTION: This YAML configuration snippet modifies the 'same_site' attribute for Ory Kratos session cookies under the 'session.cookie' key. It allows setting the SameSite policy (e.g., 'Lax', 'Strict', 'None') to control cookie behavior with cross-site requests, enhancing security against CSRF attacks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/configuring-cookies.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  cookie:\n    same_site: Lax\n```\n\n----------------------------------------\n\nTITLE: Example Context Object for Registration Flow\nDESCRIPTION: This JSON object represents an example of the `ctx` object available within a registration flow. It includes details about the flow, user identity, request headers, request cookies, and other relevant information. The example data showcases the kind of information accessible for customizing requests using Jsonnet templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ctx\": {\n    \"flow\": {\n      \"expires_at\": \"2023-01-31T12:19:35.782238Z\",\n      \"id\": \"cec1c06e-48eb-4f9d-abf1-2e287371f4eb\",\n      \"issued_at\": \"2023-01-31T11:19:35.782238Z\",\n      \"oauth2_login_challenge\": null,\n      \"request_url\": \"https://playground.projects.oryapis.com/self-service/registration/browser?return_to=\",\n      \"transient_payload\": {\n        \"custom_data\": \"test\"\n      },\n      \"type\": \"browser\",\n      \"ui\": {\n        \"action\": \"http://localhost:4455/self-service/registration?flow=cec1c06e-48eb-4f9d-abf1-2e287371f4eb\",\n        \"method\": \"POST\",\n        \"nodes\": [\n          {\n            \"attributes\": {\n              \"disabled\": false,\n              \"name\": \"csrf_token\",\n              \"node_type\": \"input\",\n              \"required\": true,\n              \"type\": \"hidden\",\n              \"value\": \"P91A1RzvL4xHAls2Gl76cbaXVMhBdpAj3c4vaRMckYY7JmGswmBHuul/+mZguOsQUOBmeJMOJWoa5xY2bd81CQ==\"\n            },\n            \"group\": \"default\",\n            \"messages\": [],\n            \"meta\": {},\n            \"type\": \"input\"\n          },\n          {\n            \"attributes\": {\n              \"autocomplete\": \"email\",\n              \"disabled\": false,\n              \"name\": \"traits.email\",\n              \"node_type\": \"input\",\n              \"required\": true,\n              \"type\": \"email\"\n            },\n            \"group\": \"password\",\n            \"messages\": [],\n            \"meta\": {\n              \"label\": {\n                \"id\": 1070002,\n                \"text\": \"Your E-Mail\",\n                \"type\": \"info\"\n              }\n            },\n            \"type\": \"input\"\n          },\n          {\n            \"attributes\": {\n              \"autocomplete\": \"new-password\",\n              \"disabled\": false,\n              \"name\": \"password\",\n              \"node_type\": \"input\",\n              \"required\": true,\n              \"type\": \"password\"\n            },\n            \"group\": \"password\",\n            \"messages\": [],\n            \"meta\": {\n              \"label\": {\n                \"id\": 1070001,\n                \"text\": \"Password\",\n                \"type\": \"info\"\n              }\n            },\n            \"type\": \"input\"\n          },\n          {\n            \"attributes\": {\n              \"disabled\": false,\n              \"name\": \"method\",\n              \"node_type\": \"input\",\n              \"type\": \"submit\",\n              \"value\": \"password\"\n            },\n            \"group\": \"password\",\n            \"messages\": [],\n            \"meta\": {\n              \"label\": {\n                \"context\": {},\n                \"id\": 1040001,\n                \"text\": \"Sign up\",\n                \"type\": \"info\"\n              }\n            },\n            \"type\": \"input\"\n          }\n        ]\n      }\n    },\n    \"identity\": {\n      \"created_at\": \"0001-01-01T00:00:00Z\",\n      \"id\": \"3a5293f1-f4d6-49f4-b34f-6da62c360604\",\n      \"metadata_public\": null,\n      \"recovery_addresses\": [\n        {\n          \"created_at\": \"0001-01-01T00:00:00Z\",\n          \"id\": \"00000000-0000-0000-0000-000000000000\",\n          \"updated_at\": \"0001-01-01T00:00:00Z\",\n          \"value\": \"0.g5vv0qpoxl@ory.sh\",\n          \"via\": \"email\"\n        }\n      ],\n      \"schema_id\": \"default\",\n      \"schema_url\": \"\",\n      \"state\": \"active\",\n      \"state_changed_at\": \"2023-01-31T11:19:37.096674Z\",\n      \"traits\": {\n        \"email\": \"0.g5vv0qpoxl@ory.sh\"\n      },\n      \"updated_at\": \"0001-01-01T00:00:00Z\",\n      \"verifiable_addresses\": [\n        {\n          \"created_at\": \"0001-01-01T00:00:00Z\",\n          \"id\": \"00000000-0000-0000-0000-000000000000\",\n          \"status\": \"pending\",\n          \"updated_at\": \"0001-01-01T00:00:00Z\",\n          \"value\": \"0.g5vv0qpoxl@ory.sh\",\n          \"verified\": false,\n          \"via\": \"email\"\n        }\n      ]\n    },\n    \"request_cookies\": {\n      \"__cypress.initial\": \"true\",\n      \"csrf_token_9eaa18484d26154fc69bb6b144100bec9a99a10709387620e8e4f0b7395e97ec\": \"BPshed6PaDaufaFQeuYRYeZ3MrDSeLVJxyk5X37DpI8=\"\n    },\n    \"request_headers\": {\n      \"Accept\": [\n        \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\"\n      ],\n      \"Accept-Encoding\": [\"gzip\"],\n      \"Accept-Language\": [\"en-GB,en-US;q=0.9,en;q=0.8\"],\n      \"Cache-Control\": [\"max-age=0\"],\n      \"Connection\": [\"keep-alive\"],\n      \"Content-Length\": [\"180\"],\n      \"Content-Type\": [\"application/x-www-form-urlencoded\"],\n      \"Cookie\": [\n        \"csrf_token_9eaa18484d26154fc69bb6b144100bec9a99a10709387620e8e4f0b7395e97ec=BPshed6PaDaufaFQeuYRYeZ3MrDSeLVJxyk5X37DpI8=; __cypress.initial=true\"\n      ],\n      \"Origin\": [\"http://localhost:4455\"],\n      \"Proxy-Connection\": [\"keep-alive\"],\n      \"Referer\": [\"http://localhost:4455/registration?flow=cec1c06e-48eb-4f9d-abf1-2e287371f4eb\"],\n      \"Sec-Ch-Ua\": [\"\\\"Not_A Brand\\\";v=\\\"99\\\", \\\"Google Chrome\\\";v=\\\"109\\\", \\\"Chromium\\\";v=\\\"109\\\"\"],\n      \"Sec-Ch-Ua-Mobile\": [\"?0\"],\n      \"Sec-Ch-Ua-Platform\": [\"\\\"macOS\\\"\"],\n      \"Sec-Fetch-Dest\": [\"iframe\"],\n      \"Sec-Fetch-Mode\": [\"navigate\"],\n      \"Sec-Fetch-Site\": [\"same-origin\"],\n      \"Upgrade-Insecure-Requests\": [\"1\"],\n      \"User-Agent\": [\n        \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36\"\n      ]\n    },\n    \"request_method\": \"POST\",\n    \"request_url\": \"https://playground.projects.oryapis.com/self-service/registration?flow=cec1c06e-48eb-4f9d-abf1-2e287371f4eb\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Complex Matching with Error and Remote IP (YAML)\nDESCRIPTION: This YAML snippet illustrates a complex matching configuration that combines error types and remote IP address matching. It uses `OR` to combine error types and IP addresses within each `when` clause and `AND` to combine `error` and `request` conditions. Specifically, it checks if the error is either `unauthorized` or `internal_server_error` AND the request comes from a specific IP range OR if the error is `forbidden` or `not_found` AND the request has `text/html` or `text/xhtml` in the `Accept` header and `application/x-www-form-urlencoded` or `multipart/form-data` in the `Content-Type` header.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\n# .oathkeeper.yaml\nerrors:\n  handlers:\n    redirect:\n      enabled: true\n      config:\n        when:\n          - error:\n              - unauthorized\n              # OR\n              - internal_server_error\n\n            # AND\n            request:\n              remote_ip:\n                match:\n                  - 192.168.1.0/24\n                  # OR\n                  - 192.178.1.0/24\n\n          # OR\n          - error:\n              - forbidden\n              # OR\n              - not_found\n\n            # AND\n            request:\n              header:\n                accept:\n                  - text/html\n                  # OR\n                  - text/xhtml\n\n                # AND\n                content_type:\n                  - application/x-www-form-urlencoded\n                  # OR\n                  - multipart/form-data\n```\n\n----------------------------------------\n\nTITLE: Starting the Ory Tunnel using Shell\nDESCRIPTION: Executes the `tunnel` script defined in `package.json`. This command starts the Ory Tunnel, requiring the user's Ory Project ID to be provided via the `ORY_PROJECT_ID` environment variable. It connects the local development server (expected at http://localhost:3000) to Ory's services via a tunnel accessible locally at http://localhost:4000.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nORY_PROJECT_ID=<YOUR_PROJECT_ID> npm run tunnel\n```\n\n----------------------------------------\n\nTITLE: Setting Minimum Password Length Using Ory CLI\nDESCRIPTION: This snippet demonstrates how to configure the minimum password length in Ory Identities by patching the identity configuration to enforce a minimum of 12 characters, replacing the default setting. Requires access to Ory CLI and appropriate project permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/password-policy.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config \"$PROJECT_ID\" \\\n  --replace '/selfservice/methods/password/config/min_password_length=12'\n```\n\n----------------------------------------\n\nTITLE: Create Kubernetes Secret for DSN and Hydra Secrets\nDESCRIPTION: This YAML snippet defines a Kubernetes secret holding DSN connection string and secret values for Hydra, enabling secure injection of configuration parameters into the deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: ory-oel-hydra-secret\n  namespace: ory\ndata:\n  dsn: cockroach://\n  # https://www.ory.sh/docs/hydra/reference/configuration\n  secretsCookie:\n  secretsSystem:\n```\n\n----------------------------------------\n\nTITLE: Fetching Registration Flow Payload by ID - Ory Identities - shell-session\nDESCRIPTION: This example illustrates obtaining detailed information about a specific registration flow via its flow ID. The first 'curl' command initializes an API flow and extracts the ID using 'jq'. The second 'curl' fetches the full flow data using that ID. Required dependencies include 'curl', 'jq', and network access to the Ory instance. Output is a JSON object describing the current registration flow for further use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_5\n\nLANGUAGE: shell-session\nCODE:\n```\nflowId=$(curl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    https://playground.projects.oryapis.com/self-service/registration/api | jq -r '.id')\n\ncurl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/registration/flows?id=$flowId\" | jq\n\n{\n  \"id\": \"260196cc-cd99-40b8-a9b1-8afc06c08afc\",\n  \"type\": \"api\",\n  \"expires_at\": \"2021-07-09T11:05:43.388907Z\",\n  ...\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/registration?flow=260196cc-cd99-40b8-a9b1-8afc06c08afc\",\n    \"method\": \"POST\",\n    \"nodes\": [ /* ... */ ]\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Boolean Type Conversion Example\nDESCRIPTION: This snippet demonstrates that the configuration system can convert string values from environment variables to boolean types based on the JSON Schema definition. \"true\" and \"false\" are converted to their respective boolean values.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\nexport SOME_VAR=true\nexport SOME_OTHER_VAR=false\n```\n\n----------------------------------------\n\nTITLE: Configuring DingTalk as OIDC Provider - YAML\nDESCRIPTION: This YAML snippet shows how to configure DingTalk as an OIDC provider in the Ory Identities configuration. It includes settings for the client ID, client secret, mapper URL (either Base64 encoded or a direct URL), and scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      enabled: true\n      config:\n        providers:\n          - id: dingtalk # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: dingtalk\n            client_id: .... # Replace this with the OAuth2 Client ID provided by DingTalk\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by DingTalk\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              # DingTalk supports only the `openid` or `openid corpid` scopes. For a basic setup, use the `openid` scope.\n              - openid\n```\n\n----------------------------------------\n\nTITLE: Docker-compose configuration for GitLab\nDESCRIPTION: This is the docker-compose configuration for the GitLab service. It specifies the image to use, restart policy, hostname, environment variables, ports mapping and volume mappings for the configuration, logs, and data. The `GITLAB_OMNIBUS_CONFIG` variable is used to configure GitLab, particularly setting the external URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nversion: \\\"3\\\"\n\nservices:\n  gitlab:\n    image: gitlab/gitlab-ce:13.0.6-ce.0\n    restart: always\n    hostname: gitlab.example.com\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\\\n        external_url 'http://gitlab.example.com:8000/'\n    ports:\n      - \\\"8000:8000\\\" # http\n    volumes:\n      - \\\"./contrib/quickstart/gitlab/config:/etc/gitlab\\\"\n      - \\\"./contrib/quickstart/gitlab/logs:/var/log/gitlab\\\"\n      - \\\"./contrib/quickstart/gitlab/data:/var/opt/gitlab\\\"\n```\n\n----------------------------------------\n\nTITLE: Installing and Configuring PostgreSQL on Ubuntu Using Bash Shell\nDESCRIPTION: Installs PostgreSQL and related contrib packages, then configures the database server with a secure password encryption method (SCRAM-SHA-256). It includes steps to create the 'kratos' database and user, set stronger password encryption, grant necessary permissions, and verify connectivity as the new user.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nsudo apt install postgresql postgresql-contrib -y\nsudo -i -u postgres\n```\n\nLANGUAGE: bash\nCODE:\n```\ncreatedb kratos\n```\n\nLANGUAGE: bash\nCODE:\n```\npsql\n# Postgres command line\nALTER SYSTEM SET password_encryption = 'scram-sha-256';\n# Change the default password encryption to stronger one\nSELECT pg_reload_conf();\n# Reload configuration\n```\n\nLANGUAGE: bash\nCODE:\n```\nCREATE USER kratos PASSWORD '<YOUR_PASSWORD_HERE>';\n```\n\nLANGUAGE: bash\nCODE:\n```\nGRANT CONNECT ON DATABASE kratos to kratos;\n```\n\nLANGUAGE: bash\nCODE:\n```\npsql -U kratos -W -h 127.0.0.1\n```\n\nLANGUAGE: bash\nCODE:\n```\nPassword:\npsql (12.9 (Ubuntu 12.9-0ubuntu0.20.04.1))\nSSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: 256, compression: off)\nType \"help\" for help.\n\nkratos=>\n```\n\n----------------------------------------\n\nTITLE: Pulling Latest Oathkeeper Image\nDESCRIPTION: This command pulls the latest version of the Ory Oathkeeper Docker image from Docker Hub. It ensures that the local image is up-to-date before building the custom image.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\ndocker pull oryd/oathkeeper:${useLatestRelease('oathkeeper')}\n```\n\n----------------------------------------\n\nTITLE: Displaying SDK Environment Variable Setup Component\nDESCRIPTION: Imports and renders a custom React component (`SdkEnvVar`) designed to assist the user in setting up the necessary environment variables for the Ory SDK within the documentation page.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_7\n\nLANGUAGE: mdx\nCODE:\n```\nimport SdkEnvVar from '@site/src/components/SdkEnvVar'\n\n<SdkEnvVar />\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Maximum Numeric Constraint in Ory (JSON)\nDESCRIPTION: Errors when a numeric value is greater than permitted maximum (must be <= 5, but found 6). Uses context for actual and maximum fields. Used in numeric input validation; id is 4000020.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_43\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000020,\n  \"text\": \"must be \\u003c= 5 but found 6\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual\": 6,\n    \"maximum\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Create OAuth2 client\nDESCRIPTION: This shell snippet creates an OAuth2 client using the `ory` CLI. It defines the client name, grant types, response types, scopes, and redirect URI.  The `OAUTH_CLIENT_ID` and `OAUTH_CLIENT_SECRET` environment variables are then set based on the output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/oauth2-openid/expressjs.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Ory Docs OAuth2 Integration Example Client\" \\\n  --grant-type authorization_code,refresh_token,client_credentials \\\n  --response-type code \\\n  --scope openid --scope offline_access --scope email \\\n  --redirect-uri http://localhost:3000/callback\nexport OAUTH_CLIENT_ID=\"{set to the client ID from output}\"\nexport OAUTH_CLIENT_SECRET=\"{set to the client secret from output}\"\n```\n\n----------------------------------------\n\nTITLE: Setting Cookie Domain Bash\nDESCRIPTION: Demonstrates how to specify the `--cookie-domain` flag to ensure proper cookie support when using the tunnel. The domain should typically be the top-level domain shared by your application and the tunnel.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_11\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> \\\n\t--cookie-domain example.org \\\n\thttps://www.example.org \\\n\thttps://auth.example.org\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra Server (Bash)\nDESCRIPTION: Starts the main Ory Hydra server container in detached mode, connecting it to the 'hydraguide' network. It maps external ports 5444 (public API) and 5445 (admin API) to the container's internal ports 4444 and 4445, and passes critical configuration via environment variables.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d \\\n  --name ory-hydra-example--hydra \\\n  --network hydraguide \\\n  -p 5444:4444 \\\n  -p 5445:4445 \\\n  -e SECRETS_SYSTEM=$SECRETS_SYSTEM \\\n  -e DSN=$DSN \\\n  -e URLS_SELF_ISSUER=https://localhost:5444/ \\\n  -e URLS_CONSENT=http://localhost:9020/consent \\\n  -e URLS_LOGIN=http://localhost:9020/login \\\n  oryd/hydra:v1.10.6 serve all\n```\n\n----------------------------------------\n\nTITLE: Configure SSL with Certbot\nDESCRIPTION: This command uses Certbot to obtain and install an SSL certificate for `accounts.example.com`. It handles the process of verifying the domain and configuring Nginx to use the certificate, including redirecting HTTP traffic to HTTPS.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_25\n\nLANGUAGE: bash\nCODE:\n```\ncertbot --nginx -d accounts.example.com\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Recovery Flow using React SDK (TypeScript)\nDESCRIPTION: Illustrates fetching an Ory recovery flow by its ID within a React frontend application using the Ory TypeScript SDK. This typically involves making an API call from a React component.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_41\n\nLANGUAGE: tsx\nCODE:\n```\n{getReactRecoveryApi}\n```\n\n----------------------------------------\n\nTITLE: Managing Identities Using Ory SDK in Golang\nDESCRIPTION: This snippet presents how to perform create, get, update, and delete operations on identity resources using the Golang Ory SDK. It demonstrates migrating from the deprecated 'V0alpha2Api' with 'Admin' prefixes to the new 'IdentityApi' without admin prefixes. Operations require an authenticated context passed with an API key. Each method uses a builder pattern to set request bodies or IDs and ends with an Execute call to send the request. Inputs revolve around identity schemas, traits, and identity IDs; outputs include the resulting identity data and API responses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\n// Create\n \tidentity, res, err := client.\n-   V0alpha2Api.AdminCreateIdentity(oryAuthedContext).AdminCreateIdentityBody(ory.AdminCreateIdentityBody{\n+   IdentityApi.CreateIdentity(oryAuthedContext).CreateIdentityBody(ory.CreateIdentityBody{\n      SchemaId: \"default\",\n      Traits: map[string]interface{}{\n        \"email\": \"hello@example.org\",\n      },\n    }).Execute()\n\n// Get\n- \tidentity, res, err := client.V0alpha2Api.AdminGetIdentity(oryAuthedContext, created.Id).Execute()\n+ \tidentity, res, err := client.IdentityApi.GetIdentity(oryAuthedContext, created.Id).Execute()\n\n// Update\n  identity, res, err := client.\n-   V0alpha2Api.AdminUpdateIdentity(oryAuthedContext, toUpdate.Id).AdminUpdateIdentityBody(ory.AdminUpdateIdentityBody{\n+   IdentityApi.UpdateIdentity(oryAuthedContext, toUpdate.Id).UpdateIdentityBody(ory.UpdateIdentityBody{\n      Traits: map[string]interface{}{\n        \"email\": \"dev+not-\" + x.NewUUID().String() + \"@ory.sh\",\n      },\n    }).Execute()\n\n// Delete\n- \tres, err := client.V0alpha2Api.AdminDeleteIdentity(oryAuthedContext, identity.Id).Execute()\n+ \tres, err := client.IdentityApi.DeleteIdentity(oryAuthedContext, identity.Id).Execute()\n```\n\n----------------------------------------\n\nTITLE: Example Usage of `oathkeeper rules list`\nDESCRIPTION: Demonstrates how to list access rules using the `oathkeeper rules list` command, specifying the Oathkeeper management API endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-list.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\noathkeeper rules --endpoint=http://localhost:4456/ list\n```\n\n----------------------------------------\n\nTITLE: Writing an owner relationship to Ory Keto\nDESCRIPTION: This snippet demonstrates writing a relationship to Ory Keto to establish ownership of a file. The key represents the file ID, and the owner represents the user who uploaded the file.  The purpose is to grant the owner the access to the file.  The input is a file ID and a username. The output is a new relation tuple that defines the owner of the file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/examples/olymp-file-sharing.mdx#_snippet_0\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nec788a82-a12e-45a4-b906-3e69f78c94e4#owner@demeter\n```\n\n----------------------------------------\n\nTITLE: Import Tabs Components from Theme for MDX Documentation\nDESCRIPTION: Import statements for the Tabs and TabItem components from the theme package, used to structure tabbed content in MDX documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/social-sign-in/redirect-url.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from \"@theme/Tabs\"\\nimport TabItem from \"@theme/TabItem\"\n```\n\n----------------------------------------\n\nTITLE: Mapping GitLab to localhost in /etc/hosts\nDESCRIPTION: This command adds a line to the /etc/hosts file, mapping the URL `gitlab.example.com` to the local IP address 127.0.0.1. This allows you to access GitLab locally via the specified URL.  It needs to be executed on a Unixoid system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\n127.0.0.1 gitlab.example.com\n```\n\n----------------------------------------\n\nTITLE: WebSocket Service - Go Code\nDESCRIPTION: This Go code defines a WebSocket service using the Gin web framework.  It handles WebSocket connections and echoes accepted messages back to the client. It likely includes dependencies on Gin and potentially other WebSocket-related Go packages. The server is designed to run within a Docker environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_8\n\nLANGUAGE: Go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Example ARN Formats for AWS SNS Topic and IAM Role\nDESCRIPTION: These are plain text examples of Amazon Resource Names (ARNs) for an AWS SNS topic and an IAM role. They are used as placeholders in the configuration process to represent the resources that Ory Network will interact with, and should be replaced by the actual ARNs during setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/live-events.mdx#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\narn:aws:sns:us-east-1:123456789012:my-topic\n```\n\nLANGUAGE: text\nCODE:\n```\narn:aws:iam::123456789012:role/ory-network-event-streamer\n```\n\n----------------------------------------\n\nTITLE: Example Allow Authorizer Access Rule and Test Shell\nDESCRIPTION: Demonstrates an Ory Oathkeeper access rule defined in JSON that utilizes the `allow` authorizer. The shell script shows how to view the rule file content and execute a `curl` command against the protected endpoint, illustrating that the `allow` authorizer permits the request (HTTP 200 OK).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\n$ cat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{ \"handler\": \"anonymous\" }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\n$ curl -X GET http://my-app/some-route\n\nHTTP/1.0 200 Status OK\nThe request has been allowed!\n```\n\n----------------------------------------\n\nTITLE: Basic usage of ory import jwk command\nDESCRIPTION: Basic syntax for importing JSON Web Keys using the Ory CLI. This command requires a set-id and at least one file path containing the JSON Web Key data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-jwk.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory import jwk set-id file-1 [file-2] [file-n] [flags]\n```\n\n----------------------------------------\n\nTITLE: Representing Login Identifier UI Node - JSON\nDESCRIPTION: This JSON snippet models the structure of an Ory UI node for a user identifier input in a self-service login flow. The object details input attributes (such as name, type, required status), attached validation error messages, and UX-relevant metadata like labels. It is typically returned by the Ory API as part of the login flow response, allowing frontend clients to render dynamic authentication forms and handle validation feedback effectively.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/login/samples/password.missing.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"identifier\",\n    \"type\": \"text\",\n    \"value\": \"\",\n    \"required\": true,\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000001,\n      \"text\": \"length must be >= 1, but got 0\",\n      \"type\": \"error\"\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070004,\n      \"text\": \"ID\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying 2FA Prompt Screenshot using MDX\nDESCRIPTION: Employs the `BrowserWindow` MDX component to show a screenshot (`../_static/mfa/2.png`) depicting the UI where a user is prompted to enter their TOTP code as a second factor during authentication. This is displayed within a simulated browser frame.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<BrowserWindow url=\"https://playground.projects.oryapis.com/ui\">\n\n![2FA with Google Authenticator](../_static/mfa/2.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Restarting Kratos Service After Configuration Changes\nDESCRIPTION: This snippet contains the command to restart the Kratos service after updating configuration files and secrets, ensuring the new security settings and configurations are applied properly in a production environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_42\n\nLANGUAGE: Bash\nCODE:\n```\nsystemctl restart kratos\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Invalid Authentication Code in Ory (JSON)\nDESCRIPTION: Displays when an authentication code entered by the user is invalid. Used in TOTP, email, or SMS code verification; static content, id is 4000008.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_31\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000008,\n  \"text\": \"The provided authentication code is invalid, please try again.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: AuthenticationSession Struct Format for Hydrator Mutator (JSON)\nDESCRIPTION: This JSON fragment defines the structure expected for the AuthenticationSession object used by the hydrator mutator. It includes subject, extra attributes, headers, and match context. The request and response for hydrator POSTs must follow this schema. Useful for debugging or custom development of hydrator-compatible backend APIs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"subject\": String,\n  \"extra\": Object,\n  \"header\": Object,\n  \"match_context\": {\n    \"regexp_capture_groups\": Object,\n    \"url\": Object\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Inherited Command Options\nDESCRIPTION: Lists options inherited from parent commands that apply to `kratos list identities`. These include `-e` or `--endpoint` (string, Kratos Admin API URL, env: KRATOS_ADMIN_URL), `--format` (string: 'table', 'json', 'yaml', etc., default 'default'), and `-q` or `--quiet` (boolean).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-list-identities.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI open ui command syntax - Shell\nDESCRIPTION: The syntax for the `ory open ui` command has changed. In v1, the project and workspace identifiers are passed via explicit flags (`--project`, `--workspace`) or environment variables (`ORY_PROJECT`, `ORY_WORKSPACE`) instead of a positional argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n- ory open ui <project>\n+ ory open ui --project <project>\n+ ory open ui --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workpsace> ORY_PROJECT=<project> ory open ui\n```\n\n----------------------------------------\n\nTITLE: Displaying Save Button Label in Ory Interface (JSON)\nDESCRIPTION: Provides a static 'Save' label for submit buttons within Ory registration or settings forms. No dynamic content or dependencies; message id is 1070003.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070003,\n  \"text\": \"Save\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: React JSX for WebAuthn Prompt Display\nDESCRIPTION: Embeds a `BrowserWindow` component to display a web resource, illustrating the appearance of the WebAuthn prompt in Chrome during MFA enrollment or authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/20_webauthn-fido-yubikey.mdx#_snippet_1\n\nLANGUAGE: JSX\nCODE:\n```\n<BrowserWindow url=\"https://console.ory.sh/\">\n\n![WebAuthn prompt in Google Chrome](../_static/mfa/4.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Configure Upstream APIs in Nginx\nDESCRIPTION: This snippet configures upstream APIs within the Nginx configuration file. It defines two upstream blocks: `public_api` and `admin_api`. The `public_api` and `admin_api` blocks specify the addresses and ports that Nginx will proxy traffic to, which are assumed to be running on the local machine.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_27\n\nLANGUAGE: nginx\nCODE:\n```\nupstream public_api {\n        server 127.0.0.1:4433;\n        server 127.0.0.1:4433; # We can load balance the traffic to support scaling\n}\nupstream admin_api {\n        server 127.0.0.1:4434;\n        server 127.0.0.1:4434;\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Response Example for Validation Error\nDESCRIPTION: This JSON example shows the structure of a response when a form validation error occurs. It includes information about the error (e.g., missing length), request URL, UI nodes (including input fields), and associated messages. This structure helps clients to understand the validation failures and update UI accordingly. The key is the `messages` array which contains details about the errors that occurred during validation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_9\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": \"f6209031-38d5-48bc-b6a5-118e8a24d1fe\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T09:00:57.10254633Z\",\n  \"issued_at\": \"2021-04-28T08:50:57.10254633Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/login/browser\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/login?flow=f6209031-38d5-48bc-b6a5-118e8a24d1fe\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      // ...\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"identifier\",\n          \"type\": \"text\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false,\n        },\n        \"messages\": [\n          {\n            \"id\": 4000001,\n            \"text\": \"length must be >= 1, but got 0\",\n            \"type\": \"error\",\n          },\n        ],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070004,\n            \"text\": \"ID\",\n            \"type\": \"info\",\n          },\n        },\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false,\n        },\n        \"messages\": [\n          {\n            \"id\": 4000001,\n            \"text\": \"length must be >= 1, but got 0\",\n            \"type\": \"error\",\n          },\n        ],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\",\n          },\n        },\n      },\n      // ...\n    ],\n  },\n  \"forced\": false,\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Identity Schema (JSON) with Username and Email\nDESCRIPTION: This JSON snippet shows a complete custom identity schema example where both `username` and `email` fields are marked as password identifiers. This allows users to log in using either their username or email address along with their password. Includes constraints such as requiring email format and disabling additional properties.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials/username-email-password.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://example.com/example.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"first_name\": {\n          \"type\": \"string\"\n        },\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"username\": {\n          \"type\": \"string\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example Session Traits Output - Go\nDESCRIPTION: Displays an example of the 'Traits' field from a user's session object returned by the Ory Go SDK, showing typical key-value pairs like email. This illustrates the structure of user attributes stored in the session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_13\n\nLANGUAGE: go\nCODE:\n```\nTraits\tmap[email:youremail@example.com]\n```\n\n----------------------------------------\n\nTITLE: Setting UI Labels in Schema\nDESCRIPTION: This code shows how to define user interface labels using the `title` property within a schema.  It defines the `email` field and sets its `title` to `Email`. Also, a GitHub handle property with a different `title` is provided.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_4\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.basic.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"Email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          }\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"title\": \"What's your GitHub handle?\"\n        }\n      }\n    }\n  },\n  \"required\": [\n    \"email\"\n  ],\n  \"additionalProperties\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Action Webhook\nDESCRIPTION: This YAML snippet demonstrates the configuration options for an Ory Action webhook.  It specifies the hook type, webhook URL, HTTP method, and the encoded Jsonnet template for the payload. It also includes optional settings to ignore or parse the webhook response, and authentication configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook # To use webhooks, you must set 'hook' to 'web_hook'\nconfig:\n  url: https://test.hook.site.sh/before_login_hook # Webhook URL.\n  method: POST # HTTP method used to send request to the webhook URL.\n  body: base64://ENCODED_JSONNET # Encoded Jsonnet template used to render payload.\n  response:\n    ignore: false # Defines if the webhook response should be ignored and run async. Boolean. OPTIONAL\n    parse: false # Defines if the webhook response should be parsed and interpreted. Boolean. OPTIONAL\n  auth:\n    type: # Can be one of 'basic_auth' or 'api_key'\n    config: # Additional auth config for the hook. Read next section for details.\n```\n\n----------------------------------------\n\nTITLE: Using keto version command in bash\nDESCRIPTION: Displays the build version, build time, and git hash of Keto. This command is used to identify the specific version of Keto that is installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-version.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo version [flags]\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities Config (Shell)\nDESCRIPTION: These shell commands retrieve the current Ory Identities configuration from the project and save it to a YAML file. It uses the Ory CLI to list workspaces, projects, and finally download the configuration.  The `<workspace-id>` and `<project-id>` placeholders must be replaced with the actual IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Command-Specific Options for ory get project in Bash\nDESCRIPTION: Available command-specific options for the 'ory get project' command, including format selection, help display, quiet mode, and workspace selection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-project.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n      --format string      Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for project\n  -q, --quiet              Be quiet with output printing.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth2 Client Credentials Authenticator Globally (ORY Oathkeeper) - YAML\nDESCRIPTION: This YAML snippet shows how to configure the `oauth2_client_credentials` authenticator in the global `oathkeeper.yml` file. It demonstrates enabling the authenticator and setting the required `token_url`, which is the OAuth 2.0 Token Endpoint used to validate the provided client credentials via the client credentials grant.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_18\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  oauth2_client_credentials:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      token_url: https://my-website.com/oauth2/token\n```\n\n----------------------------------------\n\nTITLE: Listing OAuth 2.0 Clients - hydra CLI\nDESCRIPTION: This snippet shows the basic command structure for listing OAuth 2.0 clients using the hydra CLI.  It lists OAuth 2.0 Clients and uses various flags to control the output. There are no dependencies listed for this snippet. The output depends on the configured Hydra instance and the number of clients registered.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-list-oauth2-clients.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\nhydra list oauth2-clients [flags]\n```\n\n----------------------------------------\n\nTITLE: Using Existing Kubernetes Secrets with Ory Hydra\nDESCRIPTION: Shell commands to create a Kubernetes Secret for Ory Hydra credentials and reference it during Helm installation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nkubectl create secret generic my-secure-secret --from-literal=dsn=postgres://foo:bar@baz:1234/db \\\n    --from-literal=secretsCookie=$(LC_ALL=C tr -dc 'A-Za-z0-9' < /dev/urandom | base64 | head -c 32) \\\n    --from-literal=secretsSystem=$(LC_ALL=C tr -dc 'A-Za-z0-9' < /dev/urandom | base64 | head -c 32)\n\nhelm install \\\n    ...\n    --set 'hydra.existingSecret=my-secure-secret' \\\n    ...\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet snippet to Base64 (Shell)\nDESCRIPTION: This shell command encodes the Jsonnet data mapping snippet to Base64 format. The output can then be used in the Ory Identities configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Quiet Mode Option for Ory CLI Command\nDESCRIPTION: Utilizes the '-q' or '--quiet' flag to suppress output messages, making the command operate silently unless an error occurs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n-q, --quiet            Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Defining Prometheus Scrape Configuration for Ory Oathkeeper (Shell)\nDESCRIPTION: This snippet writes a prometheus.yml configuration for Prometheus, defining scrape jobs for both Prometheus itself and the Ory Oathkeeper metrics endpoint. It specifies a 15-second scrape interval and the target endpoints, including the metrics_path needed for Oathkeeper. Dependencies: Prometheus, proper network access to specified targets. Inputs: YAML configuration; Outputs: prometheus.yml. Note that 'localhost:9000' must match Oathkeeper's metrics endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\ncat << EOF > prometheus.yml\nglobal:\n  scrape_interval: 15s # By default, scrape targets every 15 seconds.\n\nscrape_configs:\n  - job_name: 'prometheus'\n    scrape_interval: 15s\n    static_configs:\n      - targets: ['localhost:9090']\n  - job_name: 'oathkeeper'\n    scrape_interval: 15s\n    metrics_path: /metrics\n    static_configs:\n      # The target needs to match what you've configured above\n      - targets: ['localhost:9000']\nEOF\n\n```\n\n----------------------------------------\n\nTITLE: Kubernetes Helm Repository Initialization\nDESCRIPTION: This snippet provides commands to add the Ory Helm chart repository and update local Helm cache, essential steps before installing Ory Hydra with Helm in a Kubernetes environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nhelm repo add ory https://k8s.ory.sh/helm/charts\nhelm repo update\n```\n\n----------------------------------------\n\nTITLE: Removing Session Revocation Hook Using Ory CLI\nDESCRIPTION: Uses the Ory CLI `patch identity-config` command with the `--remove` flag to delete a specific hook from the `/selfservice/flows/login/after/hooks` array. The hook to be removed is identified by its zero-based index within the array (e.g., `1` in the command). Requires knowing the correct index from the current configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --remove '/selfservice/flows/login/after/hooks/1'\n```\n\n----------------------------------------\n\nTITLE: Calling Userinfo Endpoint with Ory SDK\nDESCRIPTION: This code snippet demonstrates how to call the userinfo endpoint using the Ory SDK in TypeScript. It requires the Ory SDK installed and configured with the project's `basePath`.  It uses the `accessToken` as a parameter and processes the data received from the endpoint. The output contains user attributes returned from the userinfo endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/userinfo-oidc.mdx#_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport tsExample from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/userinfo.ts'\n\n<CodeBlock language=\"tsx\">{tsExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Defining WebAuthn Identifier in Identity Schema (JSON)\nDESCRIPTION: This snippet defines a custom identity schema configuration for WebAuthn, specifically highlighting how to designate a field (e.g., email) as the primary identifier for WebAuthn within the Ory framework. The `\"ory.sh/kratos\": { credentials: { webauthn: { identifier: true, }, }, }` section within the schema is the key configuration.  It enables using this field for WebAuthn authentication in passwordless and multi-factor authentication scenarios.  The schema follows JSON Schema draft-07, and relies on Ory-specific extensions for defining the credentials.  The format is of type \"object\", and contains properties nested inside of \"traits\".\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_6\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  $schema: \"http://json-schema.org/draft-07/schema#\",\n  type: \"object\",\n  properties: {\n    traits: {\n      type: \"object\",\n      properties: {\n        email: {\n          type: \"string\",\n          format: \"email\",\n          title: \"Your E-Mail\",\n          minLength: 3,\n          \"ory.sh/kratos\": {\n            credentials: {\n              // ...\n              webauthn: {\n                identifier: true,\n              },\n            },\n            // ...\n          },\n        },\n        // ...\n      },\n      // ...\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Documentation Cards with DocCardList\nDESCRIPTION: This code snippet imports the DocCardList component and the useCurrentSidebarCategory hook from the docusaurus libraries. The DocCardList component is then rendered, passing the items from the current sidebar category. This is used for dynamically displaying documentation cards based on the current navigation context within the documentation site. It depends on the docusaurus theme and assumes a specific directory structure for documentation content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/oauth2-openid-connect.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n```javascript\nimport DocCardList from '@theme/DocCardList';\nimport {useCurrentSidebarCategory} from '@docusaurus/theme-common';\n\n<DocCardList items={useCurrentSidebarCategory().items}/>\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Hardware Security Module Environment Variables for Ory Hydra in Shell\nDESCRIPTION: This shell snippet provides environment variable configuration to enable HSM support in Ory Hydra. It sets the HSM enablement flag, specifies the vendor PKCS#11 library path, token label or slot number, user PIN, and key set label prefix for multi-instance environments. These variables direct Ory Hydra to connect and operate with a specific HSM token for cryptographic key storage and operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nHSM_ENABLED=true\nHSM_LIBRARY=/path/to/hsm-vendor/library.so\nHSM_TOKEN_LABEL=hydra\nHSM_SLOT=0\nHSM_PIN=1234\nHSM_KEY_SET_PREFIX=app1.\n```\n\n----------------------------------------\n\nTITLE: Creating Relation Tuples in Ory Permissions\nDESCRIPTION: Command to create relation tuples in Ory Permissions by parsing a relation tuple string and sending it to the create command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\necho \"groups:devs#member@tom\" \\\n  | ory parse relation-tuples --project <project-id> --workspace <workspace-id> --format=json \\\n  | ory create relation-tuples --project <project-id> --workspace <workspace-id>\n# NAMESPACE\tOBJECT\tRELATION NAME\tSUBJECT\n# groups\t\tdevs\tmember\t\ttom\n```\n\n----------------------------------------\n\nTITLE: Adding revoke_active_sessions hook\nDESCRIPTION: This command patches the identity configuration to add the `revoke_active_sessions` hook to the login flow. This ensures that when a user logs in, their other active sessions are revoked, enforcing only one active session per user. Replace `<project-id>` and `<workspace-id>` with your actual project and workspace identifiers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/revoke-active-sessions.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add '/selfservice/flows/login/after/hooks/0/hook=\"revoke_active_sessions\"'\n```\n\n----------------------------------------\n\nTITLE: Namespace Declaration Example in Ory Permission Language\nDESCRIPTION: Demonstrates how to declare a simple User namespace that implements the Namespace interface.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/ory-permission-language.mdx#_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nclass User implements Namespace {}\n```\n\n----------------------------------------\n\nTITLE: JSON for Button Input Node with WebAuthn Trigger\nDESCRIPTION: Defines a button node intended to trigger WebAuthn registration using an `onclick` handler with embedded JavaScript. Also includes an associated script node to load the WebAuthn library asynchronously. Used for adding security keys via UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"type\": \"input\",\n    \"group\": \"webauthn\",\n    \"attributes\": {\n      \"name\": \"webauthn_register_trigger\",\n      \"type\": \"button\",\n      \"value\": \"\",\n      \"disabled\": false,\n      \"onclick\": \"window.__oryWebAuthnRegistration({\\\"publicKey\\\":{\\\"challenge\\\":\\\"SOaWrZE4unW3cC57ED52HRnHwd22Fcg8DNf0zf9Jgr0=\\\",\\\"rp\\\":{\\\"name\\\":\\\"Ory\\\",\\\"id\\\":\\\"localhost\\\"},\\\"user\\\":{\\\"name\\\":\\\"placeholder\\\",\\\"icon\\\":\\\"https://via.placeholder.com/128\\\",\\\"displayName\\\":\\\"placeholder\\\",\\\"id\\\":\\\"q7MFvGN9TzqDTIgEIvkjZw==\\\"},\\\"pubKeyCredParams\\\":[{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-7},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-35},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-36},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-257},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-258},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-259},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-37},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-38},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-39},{\\\"type\\\":\\\"public-key\\\",\\\"alg\\\":-8}]},\\\"authenticatorSelection\\\":{\\\"requireResidentKey\\\":false,\\\"userVerification\\\":\\\"preferred\\\"},\\\"timeout\\\":60000}})\",\n      \"node_type\": \"input\"\n    },\n    \"messages\": [],\n    \"meta\": {\n      \"label\": {\n        \"id\": 1050012,\n        \"text\": \"Add security key\",\n        \"type\": \"info\"\n      }\n    }\n  },\n  {\n    \"type\": \"script\",\n    \"group\": \"webauthn\",\n    \"attributes\": {\n      \"src\": \"http://localhost:4455/.well-known/ory/webauthn.js\",\n      \"async\": true,\n      \"referrerpolicy\": \"no-referrer\",\n      \"crossorigin\": \"anonymous\",\n      \"integrity\": \"sha512-E3ctShTQEYTkfWrjztRCbP77lN7L0jJC2IOd6j8vqUKslvqhX/Ho3QxlQJIeTI78krzAWUQlDXd9JQ0PZlKhzQ==\",\n      \"type\": \"text/javascript\",\n      \"id\": \"webauthn_script\",\n      \"node_type\": \"script\"\n    },\n    \"messages\": [],\n    \"meta\": {}\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Ory Identities OIDC Provider Config (YAML)\nDESCRIPTION: This YAML snippet configures Twitter as an OIDC provider for Ory Identities.  It includes the necessary client ID, client secret, mapper URL (either Base64 encoded or a direct URL), and scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/97_x-twitter.mdx#_snippet_3\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n         - id: twitter\n           label: Twitter\n           provider: twitter\n           client_id: .... # Replace this with the API Key\n           client_secret: .... # Replace this with the API Key Secret\n           mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n           # Alternatively, use an URL:\n           # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n           scope:\n             - email\n        enabled: true\n```\n\n----------------------------------------\n\nTITLE: Update Identity Config with File\nDESCRIPTION: Updates the Ory Identities configuration for a specified project using configuration files. The configuration can be provided as a local file path, a URL, or a base64 encoded string. The output format can be specified. The project flag is required to specify the target project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-identity-config.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory update identity-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/config.json \\\n\t--file /path/to/config.yml \\\n\t--file https://example.org/config.yaml \\\n\t--file base64://<json> \\\n\t--format json\n```\n\n----------------------------------------\n\nTITLE: Testing Protected Endpoints with Session Cookie via curl\nDESCRIPTION: Shows how to access a protected endpoint in local development by passing the ory_kratos_session cookie to the backend using curl. Requires a running Gin or Echo example application and a valid session cookie. Outputs the result of the endpoint (\"pong\" on Gin, for example).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_4\n\nLANGUAGE: curl\nCODE:\n```\ncurl 'http://localhost:8080/ping' -b 'ory_kratos_session=<your-session-cookie-here>'\npong\n```\n\n----------------------------------------\n\nTITLE: Creating a New Next.js 13 Project with TypeScript\nDESCRIPTION: Commands to create a new Next.js 13 project with TypeScript support and the recommended configuration settings for this tutorial.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpx create-next-app@latest --typescript\ncd <your-project-directory>\n```\n\n----------------------------------------\n\nTITLE: Example JSON Response for Verification Flow\nDESCRIPTION: This JSON object represents the typical response from the API endpoint when querying for a verification flow. It provides details about the flow, including its ID, type, expiration time, request URL, active state, UI elements (e.g., input fields, submit buttons), and current state. The response shows a \"browser\" based flow that involves sending an email verification link.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.success.txt#_snippet_1\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": \"11f6e7f4-99f9-4bcf-bcfc-208d8db942c5\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T13:35:42.627410804Z\",\n  \"issued_at\": \"2021-04-28T12:35:42.627410804Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/verification/browser\",\n  \"active\": \"link\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/verification?flow=11f6e7f4-99f9-4bcf-bcfc-208d8db942c5\",\n    \"method\": \"POST\",\n    \"messages\": [\n      {\n        \"id\": 1070001,\n        \"text\": \"An email containing a verification link has been sent to the email address you provided.\",\n        \"type\": \"info\",\n        \"context\": {}\n      }\n    ],\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"HiG0b2WUZpeyATykHlEGKbr/PrkfSIm5tysdMHrZGISh95/w4SlCvYrTMiIdJeVPQwZhhQvoDDDkWYeYyZ+w4w==\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"link\",\n        \"attributes\": {\n          \"name\": \"email\",\n          \"type\": \"email\",\n          \"value\": \"foo@ory.sh\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"link\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"link\",\n          \"disabled\": false\n        },\n        \"messages\": null,\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070005,\n            \"text\": \"Submit\",\n            \"type\": \"info\"\n          }\n        }\n      }\n    ]\n  },\n  \"state\": \"sent_email\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining an Admin OpenAPI Route Annotation (Go)\nDESCRIPTION: Demonstrates the `swagger:route` annotation format for defining an API endpoint using `go-swagger`. It specifies the HTTP method (POST), path (`/identities`), API version tag (`v0alpha1`), and operation ID (`adminCreateIdentity`). The `admin` prefix in the tag indicates a privileged endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_28\n\nLANGUAGE: go\nCODE:\n```\n// swagger:route POST /identities v0alpha1 adminCreateIdentity\n```\n\n----------------------------------------\n\nTITLE: Configuring MFA via Ory Console Web Interface\nDESCRIPTION: Guides users through enabling MFA by navigating to the project MFA settings in the Ory Console, toggling the MFA option, and saving configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_2\n\nLANGUAGE: MDX\nCODE:\n```\n<Tabs groupId=\"console-or-cli\">\n<TabItem value=\"console\" label=\"Ory Console\" default>\n1. Go to <ConsoleLink route=\"project.mfa\" />.\n2. Toggle **Enable one-time code multi factor authentication**.\n3. Click **Save**.\n</TabItem>\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Session Cookie Domain in Ory Kratos (YAML)\nDESCRIPTION: This YAML configuration snippet sets the 'domain' for Ory Kratos session cookies under the 'session.cookie' key. This allows the session cookie to be shared across subdomains of the specified domain (e.g., 'myproduct.com'), useful for architectures where services are hosted on different subdomains.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/configuring-cookies.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  cookie:\n    domain: myproduct.com\n```\n\n----------------------------------------\n\nTITLE: Command options for 'ory get oauth2-config'\nDESCRIPTION: Available options specific to the 'ory get oauth2-config' command, including format selection, project specification, and workspace selection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-oauth2-config.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n      --format string      Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for oauth2-config\n      --project string     The project to use, either project ID or a (partial) slug.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Configuring 'cookie_session' Authenticator with 'only' in Access Rule\nDESCRIPTION: This YAML snippet demonstrates configuring the 'cookie_session' authenticator within an Access Rule. It uses the `only` parameter to specify that this authenticator should only attempt validation if the request includes at least one of the listed cookies ('sessionid' in this case).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: cookie_session\n    config:\n      check_session_url: https://session-store-host\n      only:\n        - sessionid\n```\n\n----------------------------------------\n\nTITLE: Keto Serve Command Options\nDESCRIPTION: Documents the available options for the `keto serve` command. These options allow users to configure the behavior of the server, such as disabling telemetry reports (`--sqa-opt-out`). Understanding these options is essential for customizing the server's operation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-serve.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help          help for serve\n      --sqa-opt-out   Disable anonymized telemetry reports - for more information please visit https://www.ory.sh/docs/ecosystem/sqa\n```\n\n----------------------------------------\n\nTITLE: Performing OAuth 2.0 Auth Code Flow with Ory Hydra CLI via Docker\nDESCRIPTION: This command uses the Ory Hydra CLI's `token user` helper (run inside a Docker container) to simulate an OAuth 2.0 Authorization Code flow. It starts a local web server listening on port 9010 (exposed via `-p 9010:9010`) to handle the OAuth 2.0 callback. The command specifies the authorization URL (`--auth-url`), token URL (`--token-url`), client credentials (`--client-id`, `--client-secret`), and requested scopes. It requires the `hydraguide` Docker network and uses `--skip-tls-verify` for self-signed certificates. The user interacts with this flow via their browser, navigating to `http://127.0.0.1:9010/`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_15\n\nLANGUAGE: shell\nCODE:\n```\ndocker run --rm -it \\\n  --network hydraguide \\\n  -p 9010:9010 \\\n  oryd/hydra:v1.10.6 \\\n  token user --skip-tls-verify \\\n    --port 9010 \\\n    --auth-url https://localhost:5444/oauth2/auth \\\n    --token-url https://ory-hydra-example--hydra:4444/oauth2/token \\\n    --client-id facebook-photo-backup \\\n    --client-secret some-secret \\\n    --scope openid,offline,photos.read\n```\n\n----------------------------------------\n\nTITLE: Creating a User for Ory Hydra\nDESCRIPTION: This command creates a new system user named 'hydra' with a disabled login shell and a home directory at `/opt/hydra`. It is used to isolate the Ory Hydra process and its files from other users on the system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nuseradd -s /bin/false -m -d /opt/hydra hydra\n```\n\n----------------------------------------\n\nTITLE: OIDC Provider Configuration for LinkedIn Social Sign-In - YAML\nDESCRIPTION: This YAML snippet demonstrates configuration of LinkedIn ('linkedin_v2') as an OIDC provider in Ory's identity config. It requires correct client_id, client_secret, and either a base64-encoded Jsonnet mapper_url or a URL to the Jsonnet mapping file. The provider is assigned specific OAuth scopes ('openid', 'profile', 'email'). Assumes base config structure for selfservice and OIDC method; any invalid or missing keys result in configuration errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: linkedin # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: linkedin_v2\n            client_id: .... # Replace this with the Client ID provided by LinkedIn\n            client_secret: .... # Replace this with the Client Secret provided by LinkedIn\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - openid\n              - profile\n              - email\n      enabled: true\n\n```\n\n----------------------------------------\n\nTITLE: Rendering Browser Window Component with Usage Billing Screenshot in MDX\nDESCRIPTION: MDX code block that imports a BrowserWindow component and renders a screenshot of the usage-based invoices interface from the Ory Console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/console/usage-billing.mdx#_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```mdx-code-block\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n\n<BrowserWindow url=\"https://console.ory.sh/workspaces/<id>/settings/billing\">\n\n![Usage-based Invoices](./_static/usage-billing-screenshot.png)\n\n</BrowserWindow>\n```\n```\n\n----------------------------------------\n\nTITLE: Installing Ory SDK and CLI via npm\nDESCRIPTION: Installs the Ory Client SDK (`@ory/client`) for interacting with Ory APIs and the Ory Command Line Interface (`@ory/cli`) for auxiliary tasks like Ory Tunnel. Both packages are saved as project dependencies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nnpm i --save @ory/client @ory/cli\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Shows the options that are inherited from parent commands when using 'ory delete jwk', including configuration file path and automatic confirmation of dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-jwk.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Visualizing Relationships Between Namespaces with Mermaid in MDX\nDESCRIPTION: Multiple Mermaid diagrams illustrating relationships between the 'User', 'Document', and 'Folder' namespaces. The graphs show directional relations like owner, editor, viewer, and hierarchical parent links. These visual aids help to understand how access checks propagate through entities. Usage requires Mermaid integration and MDX rendering support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_2\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Mermaid\n  chart={`graph LR\n    Document -->|owner| User\n    Document -->|editor| User\n    Document -->|viewer| User\n`}\n/>\n```\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Mermaid\n  chart={`graph LR\n    Document -->|parent| Folder\n    Folder -->|parent| Folder\n    Folder -->|owner| User\n    Folder -->|editor| User\n    Folder -->|viewer| User\n`}\n/>\n```\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Mermaid\n  chart={`graph LR\n    Document -->|owner| User\n    Document -->|editor| User\n    Document -->|viewer| User\n    Document -->|parent| Folder\n    Folder -->|parent| Folder\n    Folder -->|owner| User\n    Folder -->|editor| User\n    Folder -->|viewer| User\n`}\n/>\n```\n\n----------------------------------------\n\nTITLE: JSON Example of Auth0 Exported Password Hashes\nDESCRIPTION: This JSON snippet provides an example of the format in which Auth0 exports password hashes. It contains user-related data, including the user ID, email verification status, email address, password hash, the date the password was set, the tenant, and connection information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"_ID\": {\"$oid\":\"60425dc43519d90068f82973\"},\"email_verified\":false,\"email\":\"test2@example.com\",\"passwordHash\":\"$2b$10$Z6hUTEEeoJXN5/AmSm/4.eZ75RYgFVriQM9LPhNEC7kbAbS/VAaJ2\",\"password_set_date\":{\"$date\":\"2021-03-05T16:35:16.775Z\"},\"tenant\":\"dev-rwsbs6ym\",\"connection\":\"Username-Password-Authentication\",\"_tmp_is_unique\":true}\n{\"_ID\":{\"$oid\":\"60425da93519d90068f82966\"},\"email_verified\":false,\"email\":\"test@example.com\",\"passwordHash\":\"$2b$10$CSZ2JarG4XYbGa.JkfpqnO2wrlbfp5eb5LScHSGo9XGeZ.a.Ic54S\",\"password_set_date\":{\"$date\":\"2021-03-05T16:34:49.502Z\"},\"tenant\":\"dev-rwsbs6ym\",\"connection\":\"Username-Password-Authentication\",\"_tmp_is_unique\":true}\n\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Array Duplicate Items at Indices in Ory (JSON)\nDESCRIPTION: Indicates duplicate items in an array at the specified indices. Indices are provided in context. Useful for enforcing unique item constraints; message id is 4000025.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_48\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000025,\n  \"text\": \"items at index 0 and 2 are equal\",\n  \"type\": \"error\",\n  \"context\": {\n    \"index_a\": 0,\n    \"index_b\": 2\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Specify Ory NetID OIDC Callback URI (Shell)\nDESCRIPTION: This shell snippet shows the required format for the redirect URI (Callback URL) that needs to be configured in the NetID Client settings on the NetID developer portal. This URI is where NetID will redirect the user's browser after authentication, allowing Ory to complete the login process. The $PROJECT_SLUG placeholder should be replaced with the actual slug of the Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/netid\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Relationships in Keto Syntax\nDESCRIPTION: Demonstrates the syntax for defining relationships between users, groups, and files in Ory Permissions (Keto). Shows how membership and access permissions are structured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_1\n\nLANGUAGE: keto-relationships\nCODE:\n```\nusers:user1 is in members of groups:group1\nmembers of groups:group1 are readers of files:file1\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Config (CLI)\nDESCRIPTION: This code snippet demonstrates how to update the Ory Identities configuration using the Ory CLI. It requires the Ory CLI to be installed and configured, and the updated configuration file to be available.  The updated configuration is applied to the specified project and workspace.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n   ory update identity-config --project <project-id> --workspace <workspace-id> --file updated_config.yaml\n```\n\n----------------------------------------\n\nTITLE: Initializing HSM Token Using pkcs11-tool in Shell\nDESCRIPTION: This shell command initializes a token on a PKCS#11-compatible device or SoftHSM instance. It configures the token with a Security Officer (SO) PIN, sets the user PIN, and assigns a label to the token. This step is a prerequisite for generating and managing cryptographic keys within the token for Ory Hydra HSM operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\npkcs11-tool --module /usr/lib/softhsm/libsofthsm2.so --slot 0 --init-token --so-pin 0000 --pin 1234 --init-pin --label hydra\n\nUsing slot 0 with a present token (0x2763db07)\nToken successfully initialized\nUser PIN successfully initialized\n```\n\n----------------------------------------\n\nTITLE: Deleting an API Token from an Ory Project via API in Bash\nDESCRIPTION: Deletes an existing API token identified by ORY_PROJECT_API_KEY_ID from a specific Ory project. The DELETE request requires a valid Workspace API Key for authorization. Use with care as this operation revokes API token access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_PROJECT_API_KEY_ID=\n\ncurl --location --request DELETE \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}/tokens/${ORY_PROJECT_API_KEY_ID}\" \\\n-H \"Accept: application/json\" \\\n-H \"Authorization: Bearer ${WORKSPACE_API_KEY}\"\n```\n\n----------------------------------------\n\nTITLE: Dockerfile for running migrations in Ory Hydra\nDESCRIPTION: This Dockerfile extends the Ory Hydra image and runs the SQL migrations using the DATABASE_URL environment variable. The `--yes` flag automatically confirms the migration process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/faq.md#_snippet_0\n\nLANGUAGE: dockerfile\nCODE:\n```\nFROM oryd/hydra:<tag>\n\nENTRYPOINT hydra migrate sql --yes $DATABASE_URL\n```\n\n----------------------------------------\n\nTITLE: Complex Namespace Declaration with Relations\nDESCRIPTION: Shows how to declare namespaces with relations between them, defining Document class with relations to User and other Document objects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/ory-permission-language.mdx#_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nclass User {}\n\nclass Document {\n  related = {\n    parents: Document[]\n    owners: User[]\n    viewers: User[]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Illustrating Session-to-JWT Flow with Mermaid\nDESCRIPTION: This sequence diagram illustrates the session-to-JWT conversion flow using Ory Oathkeeper. It shows a client sending a session cookie to the Gateway, which then validates the session with Ory APIs, converts the session data into a JWT, and forwards the request with the JWT in the Authorization header to the upstream API services.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_6\n\nLANGUAGE: Mermaid\nCODE:\n```\nsequenceDiagram\n\tactor C as HTTP Client\n    participant G as API Gateway\n    participant O as Ory APIs\n    participant S1 as API Server\n    participant S2 as Other Service\n    C->>+G:ory_session=...\n    G->>+O:|GET /sessions/whoami\n    O->>-G:id=... identity.id=...\n    G->>G:Convert Session to JSON Web Token\n    G->>+S1:Authorization: Bearer jwt...\n    S1->>+S2:Authorization: Bearer jwt...\n```\n\n----------------------------------------\n\nTITLE: Embedding Authorization Code Grant Flow Demo Video in MDX\nDESCRIPTION: Imports MP4 and WebM video sources and a VideoEmbed React component in an MDX block to embed a video demonstration of the Authorization Code Grant flow within the documentation. This provides a visual overview of the OAuth2 process implemented with Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_9\n\nLANGUAGE: mdx\nCODE:\n```\nimport mp4 from './_static/ory-network-oauth2/oauth2-ory.mp4'\nimport webm from './_static/ory-network-oauth2/oauth2-ory.webm'\nimport VideoEmbed from '@site/src/components/VideoEmbed'\n\n<VideoEmbed mp4={mp4} webm={webm} />\n```\n\n----------------------------------------\n\nTITLE: Accessing the Next.js Application and API Routes\nDESCRIPTION: Explains how to access the local development site at http://localhost:3000 and details how API routes are mapped under the /api/* path, with example endpoints such as /api/hello. Highlights modification points for page content and API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs/README.md#_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Credential Data Structure for WebAuthn in Ory\nDESCRIPTION: Shows the structure of stored WebAuthn credentials within an identity, including `id`, `public_key`, `attestation_type`, and `authenticator` info such as `sign_count` and `aaguid`. These details are used during authentication exchanges and credential management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/20_webauthn-fido-yubikey.mdx#_snippet_4\n\nLANGUAGE: YAML\nCODE:\n```\ncredentials:\n  password:\n    id: webauthn\n    identifiers:\n      - alice@example.org\n    config:\n      credentials:\n        - display_name: my-key\n          added_at: \"2022-03-06T09:45:18Z\"\n          is_passwordless: false\n          id: P/psShpG+SOCxBqslynuxMors6oexs7RS09bSA/F9EI=\n          public_key: pQECAyYgASFYIJ0RRsaHJ2IQ6Eh11BPpHkdOl2DkICXg3rJVxSHQAsklIlgga0Tt2PqLlg/baAl20Y64JCllE71jDG+XzHfN6FT/S9I=\n          attestation_type: none\n          authenticator:\n            aaguid: AAAAAAAAAAAAAAAAAAAAAA==\n            sign_count: 1\n            clone_warning: false\n      user_handle: NDVP4/1nTj2CTFaItp/zXg==\n```\n\n----------------------------------------\n\nTITLE: Fetching Login Flow Payload using cURL and jq\nDESCRIPTION: This shell script fetches the login flow payload using the flow ID.  It first retrieves the flow ID by calling the `/self-service/login/api` and then uses the flow ID to retrieve the login flow information from  `/self-service/login/flows`.  The `jq` command is used to parse the JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nflowId=$(curl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    https://playground.projects.oryapis.com/self-service/login/api | jq -r '.id')\n\ncurl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/login/flows?id=$flowId\" | jq\n```\n\n----------------------------------------\n\nTITLE: Example: Getting ORY Identities by Recovery Email - CLI/jq\nDESCRIPTION: This example demonstrates how to use the `ory get identity` command in conjunction with `ory ls identities` and the `jq` command-line JSON processor. It first lists all identities, filters them using `jq` to find those with a recovery email ending in \"@ory.sh\", extracts their IDs, and then passes those IDs to `ory get identity` to fetch the full details. This requires `jq` to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-identity.md#_snippet_1\n\nLANGUAGE: Shell/jq\nCODE:\n```\nory get identity $(ory ls identities --format json | jq -r 'map(select(.recovery_addresses[].value | endswith(\"@ory.sh\"))) | .[].id')\n```\n\n----------------------------------------\n\nTITLE: Updating Project Configuration and Outputting as JSON - Bash\nDESCRIPTION: Shows use of the 'ory update project' CLI command with the '--format json-pretty' flag to update a project and display the resulting configuration in human-readable JSON format. Requires the 'ory' CLI and a valid configuration file. Input parameters are the project ID, new name, configuration file, and format specifier. Output is JSON containing the updated project configuration structure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-project.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory update project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--name \\\"my updated name\\\" \\\n\t--file /path/to/config.json \\\n\t--format json-pretty\n```\n\n----------------------------------------\n\nTITLE: Example of Updated ID Token with Custom Claims - JSON\nDESCRIPTION: This snippet shows an example ID token containing custom claims added via the webhook. The token includes standard claims like aud, auth_time, iss, and sub, along with the custom claims defined in the webhook response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"aud\": [\n    \"my_client\"\n  ],\n  \"auth_time\": 1647427485,\n  \"your:custom:id-token-claim\": \"another value\",\n  \"your:second:id-token-claim\": 2394123,\n  \"iss\": \"http://ory.hydra.example/\",\n  \"sub\": \"foo@bar.com\"\n}\n```\n\n----------------------------------------\n\nTITLE: Example Deny Authorizer Access Rule and Test Shell\nDESCRIPTION: Demonstrates an Ory Oathkeeper access rule defined in JSON that utilizes the `deny` authorizer. The shell script shows how to view the rule file content and execute a `curl` command against the protected endpoint, illustrating that the `deny` authorizer forbids the request (HTTP 403 Forbidden).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\n$ cat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{ \"handler\": \"anonymous\" }],\n  \"authorizer\": { \"handler\": \"deny\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\n$ curl -X GET http://my-app/some-route\n\nHTTP/1.0 403 Forbidden\nThe request is forbidden!\n```\n\n----------------------------------------\n\nTITLE: Importing and Embedding ConfigEditor in React (JavaScript)\nDESCRIPTION: This snippet imports the ConfigEditor component from the specified source path and embeds it within a React component tree. It passes a URL parameter pointing to a remote JSON schema, which defines the configuration structure for ORY Kratos. Requires React and the @site/src/components/ConfigEditor dependency; the url prop must be a publicly accessible path to a valid JSON schema. Inputs: schema URL as a string. Output: rendered configuration editor UI. Intended for use in React-based documentation sites or admin dashboards.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/configuration-editor.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport ConfigEditor from '@site/src/components/ConfigEditor';\n\n<ConfigEditor url=\"https://raw.githubusercontent.com/ory/kratos/master/.schemastore/config.schema.json\" />\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Kratos HTTP Client Security (YAML)\nDESCRIPTION: This YAML configuration snippet sets the `disallow_private_ip_ranges` flag to `true` under the `clients.http` section. When enabled, Ory Kratos will validate all outgoing HTTP requests and block those targeting private IP address ranges, enhancing security by preventing potential Server-Side Request Forgery (SSRF) attacks or unauthorized internal access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/production.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nclients:\n  http:\n    disallow_private_ip_ranges: true\n```\n\n----------------------------------------\n\nTITLE: Shell Script to Re-request Flow\nDESCRIPTION: This shell script re-requests an existing flow using the flow ID. It uses `curl` to make a GET request to the `/self-service/login/flows` endpoint, which is used to retrieve the current state of an existing login flow. The flow id is provided as part of the URL.  The output is a JSON object representing the flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_12\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/login/flows?id=<the-flow-id>\" | jq\n```\n\n----------------------------------------\n\nTITLE: Shell command for migrating the database down in Keto\nDESCRIPTION: This snippet outlines the syntax and available options for executing the 'keto migrate down' command. It explains how to specify the number of migration steps, output formats, and other flags like help, quiet mode, and automatic confirmation. It also details configuration file inheritance and references related migration commands. The snippet serves as a reference for users to correctly invoke the migration rollback process from the CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-migrate-down.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nketo migrate down <steps> [flags]\n\nOptions:\n  --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for down\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             yes to all questions, no user input required\n\nOptions inherited from parent commands:\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n\nSEE ALSO:\n* [keto migrate](keto-migrate) - Commands to migrate the database\n```\n\n----------------------------------------\n\nTITLE: Displaying Recovery Code Label in Ory Interface (JSON)\nDESCRIPTION: Provides a static label for 'Recovery code', used in forms that require entry of codes for account recovery. No dependencies; id is 1070010.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070010,\n  \"text\": \"Recovery code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Test Reverse Proxy with curl\nDESCRIPTION: This command uses curl to test the reverse proxy setup by sending a request to a protected resource via the domain `accounts.example.com`.  The output should show an 'Unauthorized' error, which means the reverse proxy is functioning correctly and protecting the backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_31\n\nLANGUAGE: bash\nCODE:\n```\ncurl -s  http://accounts.example.com/sessions/whoami|jq\n```\n\n----------------------------------------\n\nTITLE: Base64 Encode Jsonnet Snippet (Shell)\nDESCRIPTION: This shell command encodes a Jsonnet file using Base64. The encoded string can then be used directly in the Ory configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/97_x-twitter.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Permissions Python SDK Using pip\nDESCRIPTION: Demonstrates how to install the Ory Python SDK directly from the GitHub repository using pip. Assumes the user has Python's pip package manager installed and possibly root permissions for installation. This snippet ensures the SDK is ready for import and use in Python projects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/10_python.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npip install git+https://github.com/ory/sdk.git\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Permissions Python SDK Using Setuptools\nDESCRIPTION: Shows how to install the Ory Python SDK package via setuptools by running the setup.py script. It supports both user-specific and system-wide installations, requiring appropriate permissions. Once installed, the package can be imported in Python code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/10_python.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npython setup.py install --user\n```\n\n----------------------------------------\n\nTITLE: React WebAuthn Mapping Component (Example from Code Examples)\nDESCRIPTION: This placeholder represents a React component that handles WebAuthn-related logic. The actual code is fetched from an external file (`../../../code-examples/sdk/typescript/src/ui/webauthn-mapping.tsx`) using `raw-loader`.  This highlights how a UI component might integrate with WebAuthn for passwordless authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport webAuthnMapping from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/webauthn-mapping.tsx'\n\n<CodeBlock language=\"tsx\">{webAuthnMapping}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Configuring Identifier First Login Flow in Ory Kratos YAML\nDESCRIPTION: This YAML snippet configures the Ory Kratos selfservice login flow to use the identifier_first style, which requests the user's identifier (such as email or username) first before prompting for the password or other authentication methods. This snippet should be added to the kratos.yaml configuration file under the selfservice.flows.login section. To disable identifier first authentication and revert to the default unified login flow, change the style value to 'unified'. The snippet assumes use of Ory Enterprise License or Ory Apache 2.0 License and requires a properly formatted kratos.yaml file for deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/identifier-first-authentication.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    login:\n      style: identifier_first\n```\n\n----------------------------------------\n\nTITLE: Installing SoftHSM and OpenSC on macOS Using Shell Commands\nDESCRIPTION: These shell commands show how to install SoftHSM and OpenSC libraries on macOS using Homebrew. SoftHSM is a software implementation of a PKCS#11 cryptographic store used for testing HSM integration without hardware. OpenSC provides smart card utilities and libraries needed for interacting with PKCS#11 devices.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" 2> /dev/null\nbrew install softhsm\nruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" 2> /dev/null\nbrew install opensc\n```\n\n----------------------------------------\n\nTITLE: Enabling OpenID Dynamic Client Registration\nDESCRIPTION: This code demonstrates enabling dynamic registration for OpenID clients via the Ory CLI, allowing automatic creation, retrieval, update, patching, and deletion of clients without manual configuration. It involves patching the OAuth2 configuration to set the `dynamic_client_registration` enabled flag to true, facilitating scalable client management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/oidc/dynamic_client_registration/enabled=true\"\n```\n\n----------------------------------------\n\nTITLE: Defining a Number Input Node in Ory UI (JSON)\nDESCRIPTION: Presents an example JSON structure for a number input field (`type: \"number\"`) within a 'profile' group. Includes attributes like `name`, `disabled`, `node_type`, and metadata.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.age\",\n    \"type\": \"number\",\n    \"disabled\": false,\n    \"node_type\": \"input\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Age\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Representation of Lookup Secret with Recovery Codes\nDESCRIPTION: Contains a JSON structure listing multiple backup recovery codes with descriptive metadata. It also includes context for each secret, intended for display in the UI to inform users to store these codes securely.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"text\",\n  \"group\": \"lookup_secret\",\n  \"attributes\": {\n    \"text\": {\n      \"id\": 1050015,\n      \"text\": \"8qhkibka, 4m4m0l81, xh7ji7xk, cgi8xfwa, uim1dztu, 1jsjkk2i, 3nw4o5fr, lg77u7rr, hhwmz3rx, kx1cx840, thc7xl8t, osgqai15\",\n      \"type\": \"info\",\n      \"context\": {\n        \"secrets\": [\n          {\"id\": 1050009, \"text\": \"8qhkibka\", \"type\": \"info\", \"context\": {\"secret\": \"8qhkibka\"}},\n          {\"id\": 1050009, \"text\": \"4m4m0l81\", \"type\": \"info\", \"context\": {\"secret\": \"4m4m0l81\"}},\n          {\"id\": 1050009, \"text\": \"xh7ji7xk\", \"type\": \"info\", \"context\": {\"secret\": \"xh7ji7xk\"}},\n          {\"id\": 1050009, \"text\": \"cgi8xfwa\", \"type\": \"info\", \"context\": {\"secret\": \"cgi8xfwa\"}},\n          {\"id\": 1050009, \"text\": \"uim1dztu\", \"type\": \"info\", \"context\": {\"secret\": \"uim1dztu\"}},\n          {\"id\": 1050009, \"text\": \"1jsjkk2i\", \"type\": \"info\", \"context\": {\"secret\": \"1jsjkk2i\"}},\n          {\"id\": 1050009, \"text\": \"3nw4o5fr\", \"type\": \"info\", \"context\": {\"secret\": \"3nw4o5fr\"}},\n          {\"id\": 1050009, \"text\": \"lg77u7rr\", \"type\": \"info\", \"context\": {\"secret\": \"lg77u7rr\"}},\n          {\"id\": 1050009, \"text\": \"hhwmz3rx\", \"type\": \"info\", \"context\": {\"secret\": \"hhwmz3rx\"}},\n          {\"id\": 1050009, \"text\": \"kx1cx840\", \"type\": \"info\", \"context\": {\"secret\": \"kx1cx840\"}},\n          {\"id\": 1050009, \"text\": \"thc7xl8t\", \"type\": \"info\", \"context\": {\"secret\": \"thc7xl8t\"}},\n          {\"id\": 1050009, \"text\": \"osgqai15\", \"type\": \"info\", \"context\": {\"secret\": \"osgqai15\"}}\n        ]\n      }\n    },\n    \"id\": \"lookup_secret_codes\",\n    \"node_type\": \"text\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1050010,\n      \"text\": \"These are your back up recovery codes. Please keep them in a safe place!\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example of successful settings update response for server-side browser clients (JSON)\nDESCRIPTION: This JSON response demonstrates the server-side redirect flow after successfully updating user settings in a browser context. It includes details about session, identity, form actions, and user interface elements, illustrating the data structure returned by Ory Identities for such operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"f71743cd-700d-4a30-9275-8edc90de07cc\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-04-28T12:39:36.804397011Z\",\n  \"issued_at\": \"2021-04-28T11:39:36.804397011Z\",\n  \"request_url\": \"https://playground.projects.oryapis.com/self-service/settings/flows?id=f71743cd-700d-4a30-9275-8edc90de07cc\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/settings?flow=f71743cd-700d-4a30-9275-8edc90de07cc\",\n    \"method\": \"POST\",\n    \"nodes\": [...],\n    \"messages\": [\n      {\n        \"id\": 1050001,\n        \"text\": \"Your changes have been saved!\",\n        \"type\": \"info\"\n      }\n    ]\n  },\n  \"identity\": {\n    \"id\": \"5b23b651-c186-4398-8717-f15ac72cbc7e\",\n    \"schema_id\": \"default\",\n    \"schema_url\": \"https://playground.projects.oryapis.com/schemas/default\",\n    \"traits\": {\"email\": \"example.user@ory.sh\"},\n    \"verifiable_addresses\": [...],\n    \"recovery_addresses\": [...]\n  },\n  \"state\": \"success\"\n}\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Token Introspection with Project Flag - Bash\nDESCRIPTION: This snippet provides an example of using the 'hydra introspect token' command with an explicit token value and the '--project' flag to specify a project context. Requires the 'hydra' CLI and valid token ('AYjcyMzY3ZDhiNmJkNTY') and project ID ('32197be3-8e57-4009-becd-9d38dbde129c'). The command will introspect the provided token within the given project, returning information about its validity and scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-introspect-token.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra introspect token AYjcyMzY3ZDhiNmJkNTY --project 32197be3-8e57-4009-becd-9d38dbde129c\n```\n\n----------------------------------------\n\nTITLE: Example: Listing Identities with Pagination and Consistency\nDESCRIPTION: Example usage of the `kratos list identities` command specifying a page size of 100 identities and requesting eventual consistency. Eventual consistency may return results faster but might not include the most recent changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-list-identities.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nkratos list identities --page-size 100 --consistency eventual\n```\n\n----------------------------------------\n\nTITLE: Obtaining Access Token Using JWT Bearer Profile with JavaScript\nDESCRIPTION: This JavaScript code demonstrates obtaining an OAuth2 access token using the JWT Bearer authentication method in the Client Credentials flow. It creates and signs a JWT containing claims: iss, sub, aud, jti, exp, and optionally iat. The token is then sent as a client_assertion parameter along with client_assertion_type and other required form fields in a POST request to the token endpoint. The fetch API with Content-Type application/x-www-form-urlencoded is used, with the response parsed as JSON. The privateKey for signing and a createSignedJWT function are prerequisites.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst clientID = \"the-client-id\"\n\nconst qs = new URLSearchParams()\nqs.set(\"grant_type\", \"client_credentials\")\nqs.set(\"client_id\", clientID)\nqs.set(\"client_assertion_type\", \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\")\nqs.set(\n  \"client_assertion\",\n  createSignedJWT(\n    {\n      iss: \"https://example.org\",\n      sub: clientID,\n      aud: \"https://your-project.projects.oryapis.com\",\n      jti: randomUUID(),\n      exp: Math.floor((Date.now() + 1000 * 60 * 60) / 1000),\n      iat: Date.now(),\n    },\n    privateKey,\n  ),\n)\n\nconst requestOptions = {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n  body: qs.toString(),\n}\n\nfetch(\"https://your-project.projects.oryapis.com/oauth2/token\", requestOptions)\n  .then((response) => response.json())\n  .then((data) => console.log(data))\n```\n\n----------------------------------------\n\nTITLE: Serving Production Flutter Web App with dhttpd\nDESCRIPTION: Command to serve the built Flutter web application using dhttpd HTTP server, specifying host, port, and path parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\ndhttpd --host localhost --port 4005 --path build/web\n```\n\n----------------------------------------\n\nTITLE: Configuring API Key Authentication for Webhooks (YAML)\nDESCRIPTION: This YAML configuration snippet demonstrates how to set up API Key authentication for a webhook. The `type` is set to `api_key`, and the configuration specifies the `name` (header or cookie name), the `value` (API Key itself), and the `in` property, which determines whether the API key is sent in the header or as a cookie.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook\n# other configuration keys\nconfig:\n  auth:\n    type: api_key\n    config:\n      name: Authorization\n      value: { API Key value }\n      in: header # alternatively \"cookie\"\n```\n\n----------------------------------------\n\nTITLE: Examples of Correct Relationship Naming in Ory Permissions Keto-Relationships\nDESCRIPTION: This keto-relationships snippet illustrates preferred plural naming conventions for relationships between subjects and objects within namespaces. Examples show many-to-many relationships like \"writers of\", \"members of\", \"children of\", and \"parents of\" which translate to clear English sentences and reflect proper graph edges. These conventions ensure consistent and understandable authorization relationships models.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/05_namespaces.mdx#_snippet_2\n\nLANGUAGE: keto-relationships\nCODE:\n```\nUser:02a3c847-c903-446a-a34f-dae74b4fab86 is in writers of File:8f427c01-c295-44f3-b43d-49c3a1042f35  \nUser:b8d00059-b803-4123-9d3d-b3613bfe7c1b is in members of Group:43784684-103e-44c0-9d6c-db9fb265f617  \nFile:11488ab9-4ede-479f-add4-f1379da4ae43 is in children of Directory:803a87e9-0da0-486e-bc08-ef559dd8e034  \nDirectory:803a87e9-0da0-486e-bc08-ef559dd8e034 is in parents of File:11488ab9-4ede-479f-add4-f1379da4ae43\n```\n\n----------------------------------------\n\nTITLE: Ory Identity Creation API Response (JSON)\nDESCRIPTION: This JSON snippet shows a partial example of the response received from the Ory Admin API after successfully creating a user identity. The critical part of this response is the `id` field, which represents the unique identifier for the newly created user account and is required for subsequent API calls, such as generating a recovery link.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/40_invite-users.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n// highlight-next-line\n   \"id\":\"$ACCOUNT_ID\",\n   \"credentials\":{\n      \"password\":{\n         \"type\":\"password\",\n         \"identifiers\":[\n            \"$USER_EMAIL_ADDRESS\"\n         ],\n         \"version\":0,\n         \"created_at\":\"2023-02-17T14:16:06.8591Z\",\n         \"updated_at\":\"2023-02-17T14:16:06.8591Z\"\n      },\n      // ...\n\n```\n\n----------------------------------------\n\nTITLE: Revoking a Specific User Session in Go (Self-Service)\nDESCRIPTION: Uses the Go SDK to revoke a specific session (identified by its ID) belonging to the authenticated user via the self-service frontend API. Cannot revoke the current session. Requires the Ory Session Cookie.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\nimport goRevokeSession from '!!raw-loader!../../../code-examples/sdk/go/frontend/revoke-session.go'\n\n<CodeBlock language=\"go\">{goRevokeSession}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Successful Bulk Import Response\nDESCRIPTION: This JSON response demonstrates a successful bulk import. It contains the `patch_id` sent in the request and the assigned `identity` ID for each successfully created identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_22\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identities\": [\n    {\n      \"action\": \"create\",\n      // highlight-next-line\n      \"patch_id\": \"6086b0a8-d851-5431-91b4-b6e5e39dc88b\",\n      \"identity\": \"55f93ea4-09ff-4273-8b88-082cc70d6d44\"\n    },\n    {\n      \"action\": \"create\",\n      // highlight-next-line\n      \"patch_id\": \"d554dc00-49ce-5381-9bdc-79637dec85a2\",\n      \"identity\": \"f70c9b29-4790-4330-90dc-920db16a4b85\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Rule Import\nDESCRIPTION: This command uses `curl` to retrieve and display the imported rules from the running Ory Oathkeeper instance. This verifies that the rules defined in `rules.json` have been correctly loaded.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\ncurl http://127.0.0.1:4456/rules\n[{\"id\":\"allow-anonymous-with-header-mutator\",\"description\":\"\",\"match\":{\"methods\":[\"GET\"],...\n```\n\n----------------------------------------\n\nTITLE: Displaying Registration Code Label in Ory Interface (JSON)\nDESCRIPTION: Static label for 'Registration code', used in new account creation flows. No logic or dependencies; id is 1070012.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070012,\n  \"text\": \"Registration code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding Mermaid Diagrams in MDX - JavaScript (MDX)\nDESCRIPTION: Imports the Mermaid component to enable in-line rendering of graph diagrams in MDX content. This allows architectural diagrams and relationships between organizations, users, and connections to be visually specified in documentation pages. The only dependency is the local Mermaid component; no user input is expected, and the output is a rendered graph.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\"\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for `oathkeeper rules` Commands\nDESCRIPTION: Details the command-line options inherited from parent commands that apply to `oathkeeper rules list`. Includes flags for specifying configuration files (`-c`, `--config`) and the ORY Oathkeeper management API endpoint (`-e`, `--endpoint`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-list.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n-c, --config strings    Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n-e, --endpoint string   The endpoint URL of ORY Oathkeeper's management API\n```\n\n----------------------------------------\n\nTITLE: Docker Command to Migrate SQL for Ory Hydra Enterprise\nDESCRIPTION: This snippet demonstrates how to perform database migrations for Ory Hydra Enterprise using Docker, setting the DSN environment variable and executing SQL migration commands. It ensures that database schema is up-to-date before starting the service.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -e DSN=cockroach://... europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel -- migrate sql -e  -f /path/to/config.yaml\n```\n\n----------------------------------------\n\nTITLE: Introspect JWT Access Token via MDX\nDESCRIPTION: This documentation snippet includes an external TypeScript code example (referenced via MDX raw-loader) demonstrating the use of the Ory SDK to perform OAuth 2.0 token introspection on a JWT. The introspection process checks the validity and retrieves metadata for the token, providing a way to verify its status even though JWTs are self-contained.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_2\n\nLANGUAGE: MDX\nCODE:\n```\nimport tsExample from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/token-introspect.ts'\n\n<CodeBlock language=\"tsx\">{tsExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Creating JWT Access Token JWKS with Ory Hydra CLI (Bash)\nDESCRIPTION: This Bash snippet uses Ory Hydra CLI to create a new JWKS for OAuth 2.0 Access Token signing, applicable only when using the JWT strategy. The command requires access to the Hydra admin API, with 'hydra.jwt.access-token' as the key set name and RS256 as the algorithm. Users must ensure that the JWT access token strategy is enabled or this operation has no effect.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/secrets-key-rotation.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra create jwks --endpoint=http://ory-hydra-admin-api/ hydra.jwt.access-token --alg RS256\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Global options that apply to all commands in the Ory CLI, including configuration path, output format control, quiet mode, and automatic confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-workspace.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Ory Recovery Link Generation API Response (JSON)\nDESCRIPTION: This JSON snippet shows the response structure from the Ory Admin API after successfully generating a recovery link. It contains the `recovery_link` URL that needs to be sent to the user and the `expires_at` timestamp indicating when the link becomes invalid. The application must extract the `recovery_link` and deliver it to the user (e.g., via email).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/40_invite-users.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"recovery_link\": \"https://{project-slug}.projects.oryapis.com/self-service/recovery?flow=b6c81504-dc8e-4786-b849-ac292bc9f317&token=VjKUKGU7J4YAonC5b5q1hDySJjWGh3qf\",\n  \"expires_at\": \"2023-02-18T02:16:47.286385565Z\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using Frontend APIs for Registration and Login in JavaScript with Ory SDK\nDESCRIPTION: This snippet describes the change to frontend registration and login methods in JavaScript after Ory SDK v1 upgrade. It replaces older v0alpha2 methods with clearer frontend module calls such as createBrowserRegistrationFlow and createNativeRegistrationFlow. The example also demonstrates fetching a registration flow by ID and updating it using an object that separates the flow ID and the update body. Inputs include flow IDs and form data, outputs are promises resolving with flow or session data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/upgrade/01_sdk-v1.mdx#_snippet_6\n\nLANGUAGE: diff\nCODE:\n```\nasync function example() {\n  // Browser App\n  const browerFlow = await ory\n-   .v0alpha2.initializeSelfServiceRegistrationFlowForBrowsers()\n+   .frontend.createBrowserRegistrationFlow()\n    .then(({ data: flow }) => flow)\n\n  // Native App\n  const browerFlow = await ory\n-   .v0alpha2.initializeSelfServiceRegistrationFlowWithoutBrowser()\n+   .frontend.createNativeRegistrationFlow()\n    .then(({ data: flow }) => flow)\n\n  // Get\n  const getFlow = await ory\n-   .v0alpha2.getSelfServiceRegistrationFlow(flow.id)\n+   .frontend.getRegistrationFlow({ id: flow.id })\n\n  // Update / Submit\n  const result = await ory\n-   .v0alpha2.submitSelfServiceRegistrationFlow(flow.id, {\n-     method: \"password\",\n-     password: \"some-password\",\n-     traits: { email },\n+   .frontend.updateRegistrationFlow({\n+     flow: flow.id,\n+     updateRegistrationFlowBody: {\n+       method: \"password\",\n+       password: generatePassword(),\n+       traits: { email },\n+       // csrf_token: ... - needed in browser apps\n+     }\n    })\n    .then(({ data }) => data)\n}\n```\n\n----------------------------------------\n\nTITLE: Illustrate ACME Company Workspace with Mermaid\nDESCRIPTION: This code snippet defines a Mermaid diagram that illustrates a concrete example of a Workspace for ACME Company with a Production subscription. The diagram visualizes multiple projects within the Workspace and their assignment to Production, Staging, and Development Environments, along with specific rate limits and feature sets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/workspaces.mdx#_snippet_1\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Mermaid\n  chart={`\ngraph TD\n    subgraph \\\"ACME Company Workspace\\\"\n        Plan[\\\"Production Subscription<br/><br/>Determines:<br/>  Production Plan Feature Set <br/>  1 Production, 3 Staging, 5 Development Env Projects\\\"]\n\n        subgraph \\\"Projects\\\"\n            Project1[\\\"ACME SaaS Production\\\"]\n            Project2[\\\"ACME SaaS Staging\\\"]\n            Project3[\\\"ACME SaaS UTA\\\"]\n            Project4[\\\"ACME PoC Passkey\\\"]\n            Project5[\\\"ACME PoC SSO Google\\\"]\n        end\n\n        subgraph \\\"Environments\\\"\n            Prod[\\\"Production Environment<br/> Production Rate Limits<br/>(80 rps /sessions/whoami)<br/> Full Feature Set\\\"]\n            Stage[\\\"Staging Environment<br/> Developer Rate Limits<br/>(10 rps /sessions/whoami)<br/> Full Feature Set\\\"]\n            Dev[\\\"Development Environment<br/> Developer Rate Limits<br/>(10 rps /sessions/whoami)<br/> Testing Features\\\"]\n        end\n\n        Project1 --> Prod\n        Project2 --> Stage\n        Project3 --> Stage\n        Project4 --> Dev\n        Project5 --> Dev\n\n        Plan --> Project1\n        Plan --> Project2\n        Plan --> Project3\n        Plan --> Project4\n        Plan --> Project5\n\n        style Plan fill:#e6e6e6,stroke:#333,stroke-width:2px,color:#000\n        style Prod fill:#d4edda,stroke:#333,stroke-width:2px,color:#000\n        style Stage fill:#cce5ff,stroke:#333,stroke-width:2px,color:#000\n        style Dev fill:#fff3cd,stroke:#333,stroke-width:2px,color:#000\n\n        style Project1 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project2 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project3 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project4 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project5 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n    end\n`}\n/>\n```\n\n----------------------------------------\n\nTITLE: Illustrating Ory Identity Structure (YAML)\nDESCRIPTION: This snippet provides a sample structure of an Ory Identity object represented in YAML format. It demonstrates key fields such as the unique `id`, `state`, `credentials`, linked `schema_id`, customizable `traits`, and administrative/public `metadata` fields. While the Ory Admin API primarily uses JSON, this example serves to illustrate the data model's organization for an identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/01_overview.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# This is a UUID generated when the identity is created. Can't be changed or updated.\nid: \"9f425a8d-7efc-4768-8f23-7647a74fdf13\"\n\n# Every identity has a state. Inactive identities can't log into the system.\nstate: active\n\n# This section represents all credentials associated with the identity.\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n      - johnd@ory.sh\n    config:\n      hashed_password: ...\n  oidc:\n    id: oidc\n    identifiers:\n      - google:j8kf7a3...\n      - facebook:83475891...\n    config:\n      - provider: google\n        identifier: j8kf7a3\n      - provider: facebook\n        identifier: 83475891\n\n# This is the JSON Schema ID used for validating the traits of this identity.\nschema_id: default\n\n# Traits represent information about the identity, such as the first or last name. The traits content is\n# up to you and will be validated using the JSON Schema at `traits_schema_url`.\ntraits:\n  # These are just examples\n  email: office@ory.sh\n  name:\n    first: Aeneas\n    last: Rekkas\n  favorite_animal: Dog\n  accepted_tos: true\n\n# Public metadata is visible at the `/session/whoami` endpoint but cannot be modified by the users themselves.\nmetadata_public:\n  any:\n    valid: [\"json\"]\n    example: 1\n\n# Admin metadata only visible at administrative endpoints and cannot be modified by the users themselves.\nmetadata_admin:\n  another:\n    valid: [\"yaml\"]\n    example: 2\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Length Minimum Constraint in Ory (JSON)\nDESCRIPTION: This error message triggers when an input length violates the minimum required value (e.g., too short). Both the actual and minimum lengths are provided in the context object for display. Use in form input length validation; message id is 4000003.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_26\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000003,\n  \"text\": \"length must be \\u003e= 5, but got 3\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual_length\": 3,\n    \"min_length\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing MDX Components\nDESCRIPTION: Imports necessary React components for rendering Mermaid diagrams and code fetched from remote sources within an MDX document.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport Mermaid from '@theme/Mermaid';\nimport CodeFromRemote from \"@theme/CodeFromRemote\"\n```\n\n----------------------------------------\n\nTITLE: Recovery Payload in JSON5 (Browser)\nDESCRIPTION: This JSON5 code provides a sample recovery payload for the browser flow, used with the cURL example. The JSON payload is constructed to meet the requirements of the Ory API, which depends on the user's identity. Dependencies: the identity schema of Ory.  Prerequisites: the user identity information. Expected input: the user's email (usually).  Expected output: the form to create the recovery. Limitations: payload will be used for the user's identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_28\n\nLANGUAGE: json5\nCODE:\n```\nimport createRecoveryCurlBrowserJson from '../../../code-examples/curl/recovery/create-recovery-browser.json'\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Ory Identity Updates\nDESCRIPTION: Setting necessary environment variables for using the Admin API to update identities, including API key, project slug, and identity ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_API_KEY=$ORY_API_KEY\nexport ORY_SLUG=$ORY_SLUG\nexport IDENTITY_ID=$IDENTITY_ID\n```\n\n----------------------------------------\n\nTITLE: Importing OAuth 2.0 Clients Using Hydra CLI - Shell/Shell Script\nDESCRIPTION: This snippet shows how to use the 'hydra import client' command to import OAuth 2.0 clients defined in JSON format into Hydra. It demonstrates reading the JSON data from a file or from standard input and includes examples of encrypting the client secret using flags such as --pgp-key, --pgp-key-url, or --keybase. Dependencies include having the Hydra CLI installed and configured to communicate with the appropriate Hydra API endpoint. The input is a JSON array of client objects, and the output is the import operation's success or failure, with the constraint that existing client entries will cause the import to fail.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-client.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra import client [file-1.json] [file-2.json] [file-3.json] [file-n.json] [flags]\n```\n\nLANGUAGE: shell\nCODE:\n```\ncat > ./file.json <<EOF\n[\n  {\n    \"grant_types\": [\"implicit\"],\n    \"scope\": \"openid\"\n  },\n  {\n    \"grant_types\": [\"authorize_code\"],\n    \"scope\": \"openid\"\n  }\n]\nEOF\n\nhydra import client file.json\n```\n\nLANGUAGE: shell\nCODE:\n```\ncat file.json | hydra import client\n```\n\nLANGUAGE: shell\nCODE:\n```\nhydra create client -n \"my app\" -g client_credentials -r token -a core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet Payload for Mailchimp Webhook - Shell\nDESCRIPTION: This shell command encodes the previously created Jsonnet file (mailchimp_identify.jsonnet) into Base64 format and copies it to your clipboard. This Base64-encoded string is required for use as the body of the webhook payload in the Ory Action JSON definition. Prerequisites are a Unix shell with cat, base64, and pbcopy utilities available. Replace 'mailchimp_identify.jsonnet' with your file if needed. Outputs a Base64 string to be pasted where the webhook body references 'base64://{ENCODED_JSONNET}'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/mailchimp.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat mailchimp_identify.jsonnet | base64 | pbcopy\n\n```\n\n----------------------------------------\n\nTITLE: Defining Initial Identity Schema Configuration with Ory (YAML)\nDESCRIPTION: This YAML snippet sets up an initial identity schema configuration for Ory. It defines a default schema with `default_schema_id` and lists available schemas using the `schemas` array. Each schema entry specifies a unique `id` and a URL, which points to the schema definition as a JSON file. Prerequisites include having the schema file available and referenced by the correct file URL path. Inputs are the schema IDs and file URL, and this establishes the foundational structure for managing identity traits.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/35_best-practices.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nidentity:\n  default_schema_id: user_v0\n  schemas:\n    - id: user_v0\n      url: file://path/to/user_v0.json\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Kratos with In-Memory Database for Testing - Shell\nDESCRIPTION: This shell command starts Ory Kratos with a configuration file using an in-memory data source name (DSN) for test isolation. The '--dev' flag enables development mode which is suitable for integration and end-to-end testing. Logs are redirected to 'kratos.e2e.log' for debugging. This setup runs Ory Kratos in the background, allowing test runners like Cypress to execute API tests against it.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/e2e-integration-tests.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nDSN=memory hydra serve -c ./path/to/config/kratos.yml --dev > \"kratos.e2e.log\" 2>&1 &\n```\n\n----------------------------------------\n\nTITLE: Configuring Authenticators in Ory Oathkeeper Access Rule (Basic)\nDESCRIPTION: This JSON snippet shows the basic structure for defining authenticators within an Ory Oathkeeper Access Rule. It demonstrates how to specify a single authenticator handler, in this case, the 'noop' handler, which bypasses authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authenticators\": [\n    {\n      \"handler\": \"noop\",\n      \"config\": {}\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring JSON Error Handler\nDESCRIPTION: This code snippet demonstrates a basic configuration for a JSON error handler in Ory Oathkeeper. The handler is specified as \"json\" without any specific configuration, meaning it will apply to all errors.  It is part of an access rule's error handling configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"errors\": [\n    {\n      \"handler\": \"json\",\n      \"config\": {}\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Adding CAA Record for Root Domain\nDESCRIPTION: This snippet demonstrates how to add a CAA record to a root domain (example.com) to authorize the pki.goog certificate authority. This configuration is necessary when you're using a custom hostname that requires a certificate from Google and have a CAA record defined on the root domain.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/custom-domains.mdx#_snippet_2\n\nLANGUAGE: DNS\nCODE:\n```\nexample.com. IN CAA 0 issue \"pki.goog\"\n```\n\n----------------------------------------\n\nTITLE: Launching Debug Container for Kratos with Delve via Docker Compose - Bash\nDESCRIPTION: This snippet shows shell commands for creating an override Docker Compose file using environment variable substitution and starting a debug-enabled Kratos container with Delve. It requires defining SERVICE_NAME, SERVICE_ROOT, and REMOTE_DEBUGGING_PORT to customize the debug container setup. This command installs Delve, mounts source code, builds Kratos within the container, runs it under Delve watching for source changes, and exposes the debugging port for remote connections.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/debug/debug-docker-delve-ory-kratos.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nSERVICE_NAME=kratos SERVICE_ROOT=../kratos REMOTE_DEBUGGING_PORT=9999 envsubst < ../kratos/.docker/docker-compose.template.dbg \\\n  > docker-compose.kratos.tmp\ndocker-compose -f docker-compose.yaml -f docker-compose.kratos.tmp up --build -d kratos\n```\n\n----------------------------------------\n\nTITLE: Configuring UNIX Socket Permissions for Ory Hydra Admin API (YAML)\nDESCRIPTION: This YAML configuration snippet shows how to set the owner, group, and file mode for the UNIX socket used by the Ory Hydra administrative API. This is applicable when binding the admin API to a UNIX socket using `host: unix:/path/to/socket` under `serve.admin`. It allows fine-grained control over socket file permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/production.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nserve:\n  admin:\n    host: unix:/var/run/hydra/admin_socket\n    socket:\n      owner: hydra\n      group: hydra-admin-api\n      mode: 770\n```\n\n----------------------------------------\n\nTITLE: Available Options for Ory Patch Project Command\nDESCRIPTION: List of available flags and options for the ory patch project command, including options to add, remove, replace configuration values, specify files, and set output format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-project.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n      --add stringArray       Add a specific key to the configuration\n  -f, --file strings          Configuration file(s) (file://config.json, https://example.org/config.yaml, ...) to update the project\n      --format string         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                  help for project\n      --project string        The project to use, either project ID or a (partial) slug.\n  -q, --quiet                 Be quiet with output printing.\n      --remove stringArray    Remove a specific key from the configuration\n      --replace stringArray   Replace a specific key in the configuration\n      --workspace string      The workspace to use, either workspace ID or a (partial) name.\n  -y, --yes                   Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Starting Node.js/Express API Server - node\nDESCRIPTION: Executes the main script (`index.js`) of the Node.js/Express API project using the `node` runtime, starting the web server. Requires Node.js installed and the `index.js` file to be configured as the main script in `package.json` or be present in the current directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\nnode index.js\n```\n\n----------------------------------------\n\nTITLE: Define Relation Tuples (Keto)\nDESCRIPTION: These relation tuples define the relationships between objects, subjects, and relations in Ory Keto. They specify ownership and view access for videos and directories, establishing the access control model.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_6\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nvideos:/cats/1.mp4#view\n```\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nvideos:/cats/1.mp4#owner\n```\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nvideos:/cats#owner\n```\n\n----------------------------------------\n\nTITLE: Available Options for hydra delete access-tokens\nDESCRIPTION: The specific options available for the access-tokens delete command. Currently, it only includes the help flag to display command usage information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-access-tokens.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for access-tokens\n```\n\n----------------------------------------\n\nTITLE: Adding CAA Record for Subdomain\nDESCRIPTION: This snippet demonstrates how to add a CAA record to a subdomain (brand1.example.com) to authorize the pki.goog certificate authority. This configuration is necessary when you're using a custom hostname on the subdomain and want to specify the certificate authority allowed on that subdomain specifically.  It overrides any CAA records that may exist on the parent domains.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/custom-domains.mdx#_snippet_3\n\nLANGUAGE: DNS\nCODE:\n```\nbrand1.example.com. IN CAA 0 issue \"pki.goog\"\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration via CLI (Shell)\nDESCRIPTION: This shell snippet provides the command to update the identity configuration for a specified Ory project and workspace using a local configuration file (\"identity-config.yaml\"). This command is used to apply changes, such as enabling feature flags for native recovery flows, that were made to the downloaded configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Upstream API Configuration (Nginx)\nDESCRIPTION: This Nginx configuration snippet sets up upstream blocks for the public and admin APIs of Ory Hydra. It defines the servers to which traffic will be proxied. Each upstream block defines the internal addresses and ports of Ory Hydra instances.  These are the foundational building blocks for proxying traffic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_27\n\nLANGUAGE: nginx\nCODE:\n```\nupstream public_api {\n        server 127.0.0.1:4444;\n# We can load balance the traffic to support scaling\n        server 127.0.0.1:4444;\n}\nupstream admin_api {\n        server 127.0.0.1:4445;\n        server 127.0.0.1:4445;\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Chrome Web Security in Cypress Configuration - JSON\nDESCRIPTION: This JSON snippet disables Chrome's web security in Cypress by setting 'chromeWebSecurity' to false. This is necessary when testing scenarios where Ory Kratos and the application run on separate domains or ports, which would otherwise cause cross-origin restrictions preventing tests from executing properly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/e2e-integration-tests.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"chromeWebSecurity\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Remote Authorizer Config in Access Rule YAML\nDESCRIPTION: Demonstrates how to configure the `remote` authorizer directly within a specific Ory Oathkeeper access rule definition in YAML format. This allows specifying a remote authorization endpoint and headers specific to this rule.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthorizers:\n  - handler: remote\n    config:\n      remote: http://my-remote-authorizer/authorize\n      headers:\n        X-Subject: \"{{ print .Subject }}\"\n```\n\n----------------------------------------\n\nTITLE: Generating Recovery Link with cURL\nDESCRIPTION: This snippet demonstrates generating a recovery link using cURL.  It sends a POST request to `/admin/recovery/link` endpoint. This also requires an API key and the identity ID for authorization.  The `expires_in` parameter specifies the validity period. The output is a recovery link.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/30_account-recovery.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n   --header \"Authorization: Bearer {ORY_API_KEY}\" \\\n   --header \"Content-Type: application/json\" \\\n   --data '{ \\\n   \"expires_in\": \"12h\", \\\n   \"identity_id\": \"$ACCOUNT_ID\" \\\n   }' https://$PROJECT_SLUG.projects.oryapis.com/admin/recovery/link\n```\n\n----------------------------------------\n\nTITLE: Running Kratos with Mount and Config\nDESCRIPTION: This command shows how to run the Kratos Docker container with SQLite support and the email-password example configuration files by bind mounting the local directory. It assumes the command is executed from the Kratos Git repository directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ndocker run -it -e DSN=\"memory\" \\\n  --mount type=bind,source=\"$(pwd)\"/contrib/quickstart/kratos/email-password,target=/home/ory \\\n  oryd/kratos:{version} serve --config /home/ory/kratos.yml\n```\n\n----------------------------------------\n\nTITLE: Ory Get Workspace Inherited Options\nDESCRIPTION: Lists the options inherited from parent commands. Includes the ability to specify a configuration file path and automatically confirm dialogs. These options apply to various Ory CLI commands, including `ory get workspace`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-workspace.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Displaying Kratos Version with Optional Flags - CLI Shell\nDESCRIPTION: Shows how to use the \"kratos version\" command to retrieve the current build's version, build time, and git hash. The command optionally accepts flags, such as --help for usage information. Intended for users of the Kratos CLI; outputs version details to standard output, with no input beyond optional flags. No code dependencies beyond Kratos CLI installation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-version.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos version [flags]\n```\n\n----------------------------------------\n\nTITLE: Resources for Next.js Documentation and Deployment\nDESCRIPTION: Lists links to official Next.js documentation, tutorials, GitHub repository, and deployment guides for Vercel platform. Useful for further learning, customization, and deploying the application.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs/README.md#_snippet_3\n\n\n\n----------------------------------------\n\nTITLE: Application Main Entry Point with ThemeProvider\nDESCRIPTION: This code snippet shows the main application entry file for React, Previl, and Next.js frameworks, demonstrating how to wrap the app with `<ThemeProvider />` from Ory Elements. The themeOverrides property allows customization of theme colors, ensuring consistent styling across the application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n```mdx-code-block\n<Tabs groupId=\"react-or-preact\">\n  <TabItem value=\"react\" label=\"React\" default>\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/main.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/main.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"preact\" label=\"Preact\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"src/main.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/main.tsx\"\n/>\n\n  </TabItem>\n  <TabItem value=\"nextjs\" label=\"Next.js\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pages/_app.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/_app.tsx\"\n/>\n  </TabItem>\n</Tabs>\n```\n```\n\n----------------------------------------\n\nTITLE: One-Time Code Login Identifier via Email\nDESCRIPTION: This JSON snippet configures Ory Identities to use an email-based one-time code for login, defining the `code` credential, with `identifier` set to true, and `via` set to 'email'. This allows users to login using a one-time code sent to their email address.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"code\": {\n        \"identifier\": true,\n        \"via\": \"email\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Visualizing Ory Self-Service Flow Trigger Precedence using Mermaid\nDESCRIPTION: This Mermaid graph visualizes the execution order of 'before' and 'after' triggers for various Ory self-service flows (Login, Registration, Settings, Recovery, Verification) and differentiates triggers based on specific authentication methods like password, OIDC/social sign-in, and WebAuthn.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/hooks/01_configure-hooks.mdx#_snippet_0\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\"\n\n<Mermaid\n  chart={`\ngraph LR\n    BL(Before login) --> L{Login}\n    L -->|on submit| AL(After login)\n    BR(Before registration) --> R{Registration}\n    R -->|on submit| AR(After registration)\n    S -->|on submit| AS(After settings)\n    BS(Before settings) --> S{Settings}\n    RC -->|on submit| ARC(After recovery)\n    BRC(Before recovery) --> RC{Recovery}\n    V -->|on submit| AV(After verification)\n    BV(Before verification) --> V{Verification}\n    AL --> LPW(On password login)\n    AL --> LOIDC(On social/OIDC login)\n    AL --> LWA(On WebAuthn login)\n    AR --> RPW(On password registration)\n    AR --> ROIDC(On social/oidc registration)\n    AR --> RWA(On WebAuthn passwordless registration)\n    AS --> SPW(On password change)\n    AS --> SPD(On profile data change)\n`}/>\n```\n\nLANGUAGE: mermaid\nCODE:\n```\ngraph LR\n    BL(Before login) --> L{Login}\n    L -->|on submit| AL(After login)\n    BR(Before registration) --> R{Registration}\n    R -->|on submit| AR(After registration)\n    S -->|on submit| AS(After settings)\n    BS(Before settings) --> S{Settings}\n    RC -->|on submit| ARC(After recovery)\n    BRC(Before recovery) --> RC{Recovery}\n    V -->|on submit| AV(After verification)\n    BV(Before verification) --> V{Verification}\n    AL --> LPW(On password login)\n    AL --> LOIDC(On social/OIDC login)\n    AL --> LWA(On WebAuthn login)\n    AR --> RPW(On password registration)\n    AR --> ROIDC(On social/oidc registration)\n    AR --> RWA(On WebAuthn passwordless registration)\n    AS --> SPW(On password change)\n    AS --> SPD(On profile data change)\n```\n\n----------------------------------------\n\nTITLE: Fetch Existing Login Flow (Browser) using cURL\nDESCRIPTION: This snippet demonstrates how to fetch an existing login flow for a browser application using cURL and a flow ID.  Cookies should be stored with `-c` and reused with `-b` to ensure proper session handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nimport getExampleLoginCurlBrowser from '!!raw-loader!../../../code-examples/curl/login/get-login-browser.sh'\n\n<CodeBlock language=\"shell\" title=\"get-login-browser.sh\">{getExampleLoginCurlBrowser}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Using ory open account-experience Command in Bash\nDESCRIPTION: The command syntax for opening Ory Account Experience Pages. It requires specifying which type of page to open: login, registration, recovery, verification, or settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory open account-experience <login|registration|recovery|verification|settings> [flags]\n```\n\n----------------------------------------\n\nTITLE: Exporting Ory Identity Configuration via CLI - Shell\nDESCRIPTION: This sequence of shell commands lists available workspaces and projects, then exports an Ory project's identity configuration in YAML format. Prerequisites: Ory CLI installed, authentication configured, and valid workspace/project IDs. Input: workspace and project IDs. Output: YAML configuration file (identity-config.yaml). Limitation: Requires correct IDs and appropriate permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/25_github.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Example: OIDC Authorization Request with Mandatory `redirect_uri`\nDESCRIPTION: Illustrates the required format for initiating an OpenID Connect flow via Ory Network's `/oauth2/auth` endpoint, including the mandatory `redirect_uri` parameter. This format will be enforced starting no sooner than August 1st, 2024, aligning with OIDC specifications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/40_mandatory-redirect-uri.mdx#_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n/oauth2/auth?scope=openid&client=1234&redirect_uri=https://...\n```\n\n----------------------------------------\n\nTITLE: Relationship Queries for Permission Checks in Ory Permissions\nDESCRIPTION: This snippet shows example keto-relationships queries that check whether a user (e.g., User:bob) holds certain relationships such as \"viewers\", \"editors\", or \"owners\" for a specific object (Document:readme.txt). The queries illustrate how permissions like \"view\" are evaluated by verifying membership in these relationships. Inputs are namespaces and subjects, and outputs are boolean checks of membership. This syntax is specific to Ory's permission modeling language and used for defining authorization logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/05_namespaces.mdx#_snippet_1\n\nLANGUAGE: keto-relationships\nCODE:\n```\nis User:bob in viewers of Document:readme.txt // all viewers can view the document  \nis User:bob in editors of Document:readme.txt // all editors can view the document  \nis User:bob in owners of Document:readme.txt // all owners can view the document\n```\n\n----------------------------------------\n\nTITLE: Route naming conventions for REST operations in Go\nDESCRIPTION: Provides naming patterns for API route handler functions corresponding to CRUD operations, ensuring consistency across the codebase. Names are derived from resource actions like 'get', 'set', 'patch', 'delete', and 'list'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Using Hydra Migrate Status Command\nDESCRIPTION: Basic command syntax for checking the current migration status in Hydra.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-status.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra migrate status [flags]\n```\n\n----------------------------------------\n\nTITLE: Example: Parse Client ID and Secret using jq\nDESCRIPTION: Building on the previous example, these snippets demonstrate how to use the `jq` command-line JSON processor to extract specific fields, `client_id` and `client_secret`, from the JSON output stored in the `client` shell variable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-oauth2-client.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nclient_id=$(echo $client | jq -r '.client_id')\nclient_secret=$(echo $client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: Output Format Option for Ory CLI Command\nDESCRIPTION: Specifies the '--format' option for the CLI command to set the output format, allowing choices such as table, json, yaml, json-pretty, jsonpath, or jsonpointer, with 'default' as the default setting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n--format string    Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n```\n\n----------------------------------------\n\nTITLE: Creating a Symlink for Virtual Host (Bash)\nDESCRIPTION: This command creates a symbolic link from the sites-available directory to the sites-enabled directory.  This activates the virtual host configuration.  The first argument is the source (the config file), and the second argument is the target (the enabled directory).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_24\n\nLANGUAGE: bash\nCODE:\n```\nln -s /etc/nginx/sites-available/oauth2.example.com /etc/nginx/sites-enabled/oauth2.example.com\n```\n\n----------------------------------------\n\nTITLE: Start Example with Docker Compose (Shell)\nDESCRIPTION: This shell command starts the cat videos example using Docker Compose. It requires Docker Compose to be installed and configured.  It will start the necessary containers defined in the docker-compose.yml file, and then execute `up.sh`\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ndocker-compose -f contrib/cat-videos-example/docker-compose.yml up\n# or\n./contrib/cat-videos-example/up.sh\n```\n\n----------------------------------------\n\nTITLE: Configuring WWW-Authenticate Error Handler in JSON5\nDESCRIPTION: Provides a 401 Unauthorized response with a 'WWW-Authenticate' header, prompting browser-based authentication dialogs. The 'realm' message can be customized for user guidance. Error matching conditions are specified under 'when'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_13\n\nLANGUAGE: json5\nCODE:\n```\n// access-rule.json\n{\n  handler: \"www_authenticate\",\n  config: {\n    realm: \"Please enter your username and password\", // Defaults to `Please authenticate.`\n    when: [\n      // ...\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Code Blocks\nDESCRIPTION: This snippet imports modules for displaying code blocks and utilizing the latest release versions. It imports necessary components from the @site and @theme directories to enable rendering of code examples within the documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { useLatestRelease } from \"@site/src/hooks\"\nimport CodeBlock from \"@theme/CodeBlock\"\n```\n\n----------------------------------------\n\nTITLE: Example Flow Interruption Payload for Ory Webhooks JSON\nDESCRIPTION: Presents the JSON structure expected by Ory when a flow-interrupting webhook (configured with `response.parse: true`) returns a 4xx or 5xx status code. This payload provides messages and context to inform the user why the flow was interrupted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"messages\": [\n    {\n      \"instance_ptr\": \"#/traits/foo/bar\", // Points to the field that failed validation.\n      \"messages\": [\n        {\n          \"id\": 123, // Unique numeric ID of the error that helps the frontend to interpret this message, doesn't have to be unique.\n          \"text\": \"field must be longer than 12 characters\",\n          \"type\": \"error\", // One of \"error\", \"info\", \"success\".\n          \"context\": {\n            // Contextual information about the error. Is schemaless, and can be used to provide additional information to the frontend.\n            // Typically used to provide fields that are used in internationalization messages.\n            \"value\": \"short value\",\n            \"any\": \"additional information\"\n          }\n        }\n      ]\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Docker Installation Component in MDX\nDESCRIPTION: Imports the Docker installation React component and renders it with repo and name props. This allows embedding Docker-specific installation information or UI inside the documentation. Relies on React, MDX support, and availability of repo and name props.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_4\n\nLANGUAGE: mdx\nCODE:\n```\nimport Docker from '@site/src/components/Install/Docker'\n\n<Docker repo={props.repo} name={props.name} />\n```\n\n----------------------------------------\n\nTITLE: Inherited Configuration Options\nDESCRIPTION: This section reveals options inherited from the parent commands. It highlights the `-c` or `--config` flag, which allows the user to specify paths to configuration files. These configuration files can be in JSON, YAML, YML, or TOML formats. Values are loaded in the order they are provided, with later files overwriting earlier ones. This provides a flexible way to customize the behavior of the `hydra migrate gen` and other related commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-gen.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n```\n\n----------------------------------------\n\nTITLE: Configuring SMS Message Templates in YAML\nDESCRIPTION: Add or modify the `courier.templates` section in the Ory Identity configuration YAML file to define specific SMS message templates, such as `verification_code` and `login_code`. The plaintext body of the SMS is defined using a base64 encoded string, which can contain Liquid templating syntax (e.g., `{{ .VerificationCode }}`) to insert dynamic data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/10_sending-sms.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  templates:\n    verification_code:\n      valid:\n        sms:\n          body:\n            plaintext: \"base64://WW91ciB2ZXJpZmljYXRpb24gY29kZSBpczoge3sgLlZlcmlmaWNhdGlvbkNvZGUgfX0=\"\n    login_code:\n      valid:\n        sms:\n          body:\n            plaintext: \"base64://WW91ciBsb2dpbiBjb2RlIGlzOiB7eyAuTG9naW5Db2RlIH19\"\n```\n\n----------------------------------------\n\nTITLE: Adding Hydrator Mutator to a Per-Rule Access Rule (YAML)\nDESCRIPTION: This YAML access-rule example demonstrates how to configure the hydrator mutator for a specific rule. The hydrator fetches additional attributes from an external API, supports retrial and caching, and augments the authentication session. Configuration requires valid API url and optionally credentials and retry logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nmutators:\n  - handler: hydrator\n    config:\n      api:\n        url: http://my-backend-api\n        auth:\n          basic:\n            username: someUserName\n            password: somePassword\n        retry:\n          give_up_after: 2s\n          max_delay: 100ms\n      cache:\n        ttl: 60s\n\n```\n\n----------------------------------------\n\nTITLE: JWKS URL for ID Token Validation\nDESCRIPTION: This URL provides the JSON Web Key Set (JWKS) which contains the public keys of the Authorization Server. These keys are used to verify the signature of the ID token to ensure that it has not been tampered with.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_1\n\nLANGUAGE: Text\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/.well-known/jwks.json\n```\n\n----------------------------------------\n\nTITLE: Passwordless Login Flow UI Example (JSON5)\nDESCRIPTION: This JSON5 snippet demonstrates the structure of a response from the login flow when passwordless authentication is enabled. It showcases the `webauthn` group within the `ui.nodes` array, representing the 'Sign in with security key' button. The key attributes are `type`, `group`, `name`, `value`, `disabled` and `node_type`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_7\n\nLANGUAGE: json5\nCODE:\n```\n{\n  ui: {\n    nodes: [\n      {\n        type: \"input\",\n        group: \"webauthn\",\n        attributes: {\n          name: \"method\",\n          type: \"submit\",\n          value: \"webauthn\",\n          disabled: false,\n          node_type: \"input\",\n        },\n        messages: [],\n        meta: {\n          label: {\n            id: 1010001,\n            text: \"Sign in with security key\",\n            type: \"info\",\n            context: {},\n          },\n        },\n      },\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: kratos remote version - Command Invocation\nDESCRIPTION: This snippet demonstrates how to invoke the `kratos remote version` command. It displays the basic command structure along with possible flags. It requires a working installation of the Ory Kratos CLI. It's intended to show the user how to use the command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-version.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nkratos remote version [flags]\n```\n\n----------------------------------------\n\nTITLE: hydra perform authorization-code Synopsis\nDESCRIPTION: This command starts a web server that acts as an OAuth 2.0 Client performing the Authorize Code Flow. It's designed for testing Ory Hydra configurations and should not be used in production environments. The server terminates on error or success, unless the --no-shutdown flag is provided.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-authorization-code.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra perform authorization-code [flags]\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Identity Schema for Embedding (Bash)\nDESCRIPTION: Bash command to read an Identity Schema JSON file, encode its content using base64, and copy the result to the system clipboard (`pbcopy` is macOS specific). This encoded string is then manually pasted into the main Ory configuration JSON file for embedding as an inline schema definition.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\nbase64 < identity-schema.json | pbcopy\n```\n\n----------------------------------------\n\nTITLE: Listing Workspaces and Projects\nDESCRIPTION: Lists available workspaces and projects within a specific workspace using the Ory CLI.  These commands are prerequisites for fetching the identity config.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n```\n\n----------------------------------------\n\nTITLE: Cloning the Ory Hydra Repository\nDESCRIPTION: Clones the Ory Hydra repository from GitHub and checks out the latest release. Requires Git to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ngit clone https://github.com/ory/hydra.git\ncd hydra\ngit checkout ${useLatestRelease('hydra')}\n```\n\n----------------------------------------\n\nTITLE: Loading SDK Instance for Preact\nDESCRIPTION: Similar to the React SDK import, this snippet demonstrates how to load the Preact SDK configuration from an external URL via CodeFromRemote, enabling the Preact app to interact with Ory APIs. It ensures framework-specific SDK instances are properly loaded and utilized.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n```mdx-code-block\n<Tabs groupId=\"react-or-preact\">\n  <TabItem value=\"react\" label=\"React\" default>\n\n<CodeFromRemote\n  lang=\"ts\"\n  title=\"src/sdk.ts\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/react-spa/src/sdk.ts\"\n/>\n\n  </TabItem>\n  <TabItem value=\"preact\" label=\"Preact\">\n\n<CodeFromRemote\n  lang=\"ts\"\n  title=\"src/sdk.ts\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/sdk.ts\"\n/>\n  </TabItem>\n  <TabItem value=\"nextjs\" label=\"Next.js\">\n\n<CodeFromRemote\n  lang=\"tsx\"\n  title=\"pkg/sdk.tsx\"\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pkg/sdk.tsx\"\n/>\n  </TabItem>\n</Tabs>\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Auth Logout (Specific Options)\nDESCRIPTION: Displays the command-line options specifically available for the `ory auth logout` command. The `--config` or `-c` flag allows specifying a custom configuration file path, and `--help` or `-h` shows usage information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-auth-logout.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -h, --help            help for logout\n```\n\n----------------------------------------\n\nTITLE: Configuring Flow Interrupting Webhooks in Ory YAML\nDESCRIPTION: Configures an Ory webhook using YAML to enable response parsing (`response.parse: true`), which allows the external service to interrupt the flow based on the HTTP response status code (4xx/5xx).\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook\nconfig:\n  # highlight-start\n  response:\n    parse: true\n  # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Listing Projects within a Specified Workspace\nDESCRIPTION: This command retrieves all projects within a specified workspace, identified by its workspace ID. Used to locate the relevant project ID for configuration management tasks, it requires prior knowledge of the workspace ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory list projects --workspace <workspace-id>\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for ory patch permission-config\nDESCRIPTION: Shows options inherited from parent commands applicable to `ory patch permission-config`. Specifically, it lists the `--config` or `-c` flag used to specify the path to the Ory Network configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-permission-config.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n```\n\n----------------------------------------\n\nTITLE: Querying Verification Flow with cURL and jq\nDESCRIPTION: This snippet uses cURL to send a GET request to an Ory API endpoint for a self-service verification flow, specifying the 'Accept' header for JSON responses. The output from cURL is then piped to jq for pretty-printing of the JSON response. The `id` parameter in the URL specifies the particular flow to retrieve.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/verification/samples/link.success.txt#_snippet_0\n\nLANGUAGE: Bash\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/verification/flows?id=11f6e7f4-99f9-4bcf-bcfc-208d8db942c5' | \\\n      jq\n```\n\n----------------------------------------\n\nTITLE: Keto Engine ACP Ory Config with Go Templates JSON\nDESCRIPTION: Illustrates how to use Go text/template within the `keto_engine_acp_ory` authorizer config fields (`required_action`, `required_resource`) to dynamically generate values based on input like regular expression capture groups from the incoming request URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"handler\": \"keto_engine_acp_ory\",\n  \"config\": {\n    \"required_action\": \"my:action:{{ printIndex .MatchContext.RegexpCaptureGroups 0 }}\",\n    \"required_resource\": \"my:resource:{{ printIndex .MatchContext.RegexpCaptureGroups 1 }}:foo:{{ printIndex .MatchContext.RegexpCaptureGroups 0 }}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Command syntax for deleting JSON Web Key Sets using Hydra CLI\nDESCRIPTION: This snippet presents the command format to delete one or multiple JSON Web Key Sets by specifying their IDs. It illustrates how to invoke the command with set IDs and optional flags, providing a clear template for usage.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwks.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nhydra delete jwks id-1 [id-2] [id-n] [flags]\n```\n\n----------------------------------------\n\nTITLE: Shell Script to Submit Login Form via API\nDESCRIPTION: This shell script submits a login form using the previously obtained action URL. It constructs a JSON payload with login credentials and sends a POST request using `curl`.  The `jq` tool is used to parse the JSON responses. The script uses the extracted action URL and sends the POST request with the correct content type. The script expects the action URL to be available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_14\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -s -X POST -H  \"Accept: application/json\" -H \"Content-Type: application/json\" \\\n    -d '{\"identifier\": \"i-do-not-exist@user.org\", \"password\": \"the-wrong-password\", \"method\": \"password\"}' \\\n    \"$actionUrl\" | jq\n```\n\n----------------------------------------\n\nTITLE: Create Ory Network resources CLI command options\nDESCRIPTION: Defines the command-line options available for the 'ory create' command, including configuration file paths, output formats, help, quiet mode, and confirmation prompts. These options enable flexible and automated resource creation workflows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for create\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Shell Command: Update Project Configuration\nDESCRIPTION: This shell command uses the `ory update` command to apply a configuration file to an Ory project. The `--project` and `--workspace` flags specify the project and workspace identifiers, respectively, and the `--file` flag indicates the path to the configuration file (`config.json`). This overwrites the entire project configuration with the provided data. Prerequisites include the Ory CLI installed and a valid Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/10_config-with-cli.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory update project --project <project-id> --workspace <workspace-id> --file config.json\n```\n\n----------------------------------------\n\nTITLE: Defining Nested Identity Schema Using JSON Schema\nDESCRIPTION: This JSON snippet defines a nested object structure for an Identity Schema following the JSON Schema draft-07 specification. It describes the expected shape of the traits object, including a nested name object with first and last string properties. This schema helps Ory Kratos correctly interpret and validate form fields with nested names.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/html-forms.md#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"type\": \"string\"\n            },\n            \"last\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Representing Identity Schemas by URL in Config (JSON)\nDESCRIPTION: JSON snippet showing how Identity Schemas are referenced in the Ory Network configuration when they are hosted externally via a URL. This is typically the format when pulling existing configuration and illustrates what you might store locally before embedding.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n//...\n    // This is the default schema that's used for new identities\n    \"default_schema_id\": \"preset://email\",\n    // These are custom schemas that are available on your Ory Network project\n    \"schemas\": [\n      {\n        \"id\": \"7d1cf71e-57ae-40be-bddf-1f4c323e2349\",\n        \"url\": \"https://storage.googleapis.com/bac-gcs-production/something.schema.json\"\n      },\n    ],\n//...\n```\n\n----------------------------------------\n\nTITLE: Defining a Text Input Node in Ory UI (JSON)\nDESCRIPTION: Illustrates an example JSON structure for a standard text input field (`type: \"text\"`) within a 'profile' group. Includes attributes like `name`, `disabled`, `node_type`, and metadata.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_18\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.name\",\n    \"type\": \"text\",\n    \"disabled\": false,\n    \"node_type\": \"input\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Name\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Automatic Confirmation Option for Ory CLI Commands\nDESCRIPTION: Includes the '-y' or '--yes' flag to automatically confirm all prompts and dialogs, facilitating non-interactive usage of the CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n-y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Command Options for hydra perform client-credentials\nDESCRIPTION: Lists the specific command-line options available for the `hydra perform client-credentials` command. These flags allow specifying audience, client credentials (ID and secret, defaulting to environment variables OAUTH2_CLIENT_ID and OAUTH2_CLIENT_SECRET respectively), requested scopes, and accessing help information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-client-credentials.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n      --audience strings       Request a specific OAuth 2.0 Access Token Audience.\n      --client-id string       Use the provided OAuth 2.0 Client ID, defaults to environment variable OAUTH2_CLIENT_ID.\n      --client-secret string   Use the provided OAuth 2.0 Client Secret, defaults to environment variable OAUTH2_CLIENT_SECRET.\n  -h, --help                   help for client-credentials\n      --scope strings          OAuth2 scope to request.\n```\n\n----------------------------------------\n\nTITLE: Defining the Ory UI Message Structure (JSON5)\nDESCRIPTION: Explains the standard JSON5 structure for messages (errors, info) used in Ory Identities UI flows. Details the key fields: `id` (unique, fixed identifier), `text` (default English message), `type` (e.g., \"error\", \"info\"), and `context` (additional data). Also explains the ID format (`xyyzzzz`) for categorization based on type and module.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_21\n\nLANGUAGE: json5\nCODE:\n```\n{\n  id: 1234,\n  // This ID will not change and can be used to translate the message or use your own message content.\n  text: \"Some default text\",\n  // A default text in english that you can display if you do not want to customize the message.\n  context: {},\n  // A JSON object which may contain additional fields such as `expires_at`. This is helpful if you want to craft your own messages.\n}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{\n  id: 1234, // A unique, fixed number\n  text: \"...\",\n  type: \"...\", // Usually \"error\" or \"info\"\n  context: {\n    // Additional, contextual information\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying the Identity Configuration YAML to Include Subject Source Field\nDESCRIPTION: This YAML snippet shows how to add the `subject_source` field to a social provider configuration, specifying the source of the subject identifier in a social sign-in provider setup. It is used to customize identity binding behavior, with options such as 'me', 'oid', or 'userinfo'. Dependencies include the existing identity configuration YAML file and familiarity with YAML syntax.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\ntitle=\"identity-config.yaml\"\nproviders:\n- id: microsoft\n  (...)  \n  // highlight-start\n  subject_source: me  # or oid\n  # or\n  # subject_source: userinfo\n  scope:\n    - https://graph.microsoft.com/User.Read  # Required when 'subject_source: me'.\n  // highlight-end\n  (...)\n```\n\n----------------------------------------\n\nTITLE: File Paths for Email Templates in Self-Hosting Kratos\nDESCRIPTION: This snippet lists the expected directory paths where self-hosted Kratos expects email templates for recovery and verification emails, differentiating between valid and invalid states. It guides administrators on the directory structure to store custom templates for correct recognition. No code dependencies; path structure is crucial for proper template loading.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/02_mail-courier-templates.mdx#_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n<kratos-root>/<template-root>/recovery/valid\n<kratos-root>/<template-root>/recovery/invalid\n<kratos-root>/<template-root>/verification/valid\n<kratos-root>/<template-root>/verification/invalid\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands in Ory CLI\nDESCRIPTION: Options inherited from parent commands that can be used with the 'ory get project' command, including configuration file path and confirmation settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-project.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: oathkeeper rules get command syntax\nDESCRIPTION: This snippet shows the basic syntax for the `oathkeeper rules get` command. The `<id>` placeholder represents the unique identifier of the access rule to be retrieved.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-get.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\noathkeeper rules get &lt;id&gt; [flags]\n```\n\n----------------------------------------\n\nTITLE: Create Systemd Service File\nDESCRIPTION: This code provides the content of a `uinode.service` file, which configures the Ory Kratos UI as a systemd service. It defines the service's description, dependencies, execution details (like working directory and environment variables), and restart policy.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_33\n\nLANGUAGE: shell\nCODE:\n```\n[Unit]\n   Description=Kratos Service\n   After=network.target\n   StartLimitIntervalSec=0\n\n   [Service]\n   Type=simple\n   Restart=always\n   RestartSec=1\n   User=uinode\n   ExecStart=/usr/bin/npm start\n   Environment=KRATOS_PUBLIC_URL=http://127.0.0.1:4433\n   Environment=KRATOS_BROWSER_URL=https://accounts.example.com\n   WorkingDirectory=/opt/uinode/ui\n\n   [Install]\n   WantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Importing Theme Components from @theme\nDESCRIPTION: This code snippet demonstrates how to import core theme components (Tabs, TabItem, CodeFromRemote) from the '@theme' package in MDX format. These components facilitate tabbed content organization and code embedding in documentation pages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from \"@theme/Tabs\"\nimport TabItem from \"@theme/TabItem\"\nimport CodeFromRemote from \"@theme/CodeFromRemote\"\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with cURL (Native)\nDESCRIPTION: This shell script illustrates how to create a recovery flow in a native application using cURL.  It sends a request to the `/self-service/recovery/api` endpoint. Dependencies: cURL and access to the Ory API. Prerequisites: cURL installed and Ory instance access. Expected input: user data.  Expected output: API response.  Limitations: Specific to native applications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_29\n\nLANGUAGE: shell\nCODE:\n```\nimport createRecoveryCurlApi from '!!raw-loader!../../../code-examples/curl/recovery/create-recovery-api.sh'\n```\n\n----------------------------------------\n\nTITLE: Deleting an Event Stream with Ory CLI - bash\nDESCRIPTION: This snippet demonstrates the syntax to delete an event stream by its unique ID using the Ory CLI. It supports optional flags to specify the project and workspace context. The command requires the Ory CLI to be installed and authenticated. Primary parameter `<id>` is the identifier for the event stream to delete, and optional flags like `--project` and `--workspace` allow targeting specific project or workspace scopes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-event-stream.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory delete event-stream <id> [--project=PROJECT_ID] [flags]\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Login Flow Messages Using curl and jq in Shell\nDESCRIPTION: This shell snippet fetches the login flow messages from the Ory Playground self-service login API by issuing a GET request with curl and parsing the resulting JSON output with jq. It requires curl and jq installed in the environment to work properly. The snippet targets the login flow identified by a UUID passed as a query parameter and extracts the '.ui.messages' array from the JSON response. The output is a structured list of UI message objects detailing errors or feedback relevant to the login process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/login/samples/password.wrong.txt#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/login/flows?id=a2d6e166-5153-42a6-8943-ef99eba8ab2e' \\\n    | jq -r '.ui.messages'\n```\n\n----------------------------------------\n\nTITLE: Updating Base Redirect URI via Ory CLI\nDESCRIPTION: CLI commands to list workspaces and projects, then patch the identity configuration to set a new base redirect URI for OIDC providers. This setup directs social sign-in flows to a specified custom domain.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/social-sign-in/redirect-url.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n# List all available workspaces\\nory list workspaces\\n\\n# List all available projects\\nory list projects --workspace <workspace-id>\\n\\n# Add OIDC base redirect URI\\nory patch identity-config <project-id> \\\n  --add '/selfservice/methods/oidc/config/base_redirect_uri=\"https://ory.example.org\"'\n```\n\n----------------------------------------\n\nTITLE: Rendering Configuration Editor Component with Schema URL in MDX\nDESCRIPTION: This snippet imports the ConfigEditor React component and renders it within an MDX environment, providing a URL that points to an external JSON schema. The component uses this URL to fetch and display a dynamic configuration editor based on the schema. It requires the '@site/src/components/ConfigEditor' component to be available and expects the URL prop as the schema source. The input is the URL string; the output is the rendered configuration editor UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/configuration-editor.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport ConfigEditor from '@site/src/components/ConfigEditor';\n\n<ConfigEditor url=\"https://raw.githubusercontent.com/ory/keto/master/.schema/config.schema.json\" />\n```\n\n----------------------------------------\n\nTITLE: Making Jsonnet Trait Fields Optional Based on Input - Jsonnet\nDESCRIPTION: Implements conditional field mapping in Jsonnet so that an identity trait (e.g., 'website') is only included if it exists in the input. Uses an 'if' expression and the 'in' operator to determine key presence. Dependencies: input claims provided via std.extVar. Results in a dynamic output structure with optional properties. Useful for flexible schemas where fields may be missing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_4\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      email: claims.sub,\n      [if \"website\" in claims then \"website\" else null]: claims.website,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with HSM\nDESCRIPTION: Starts Ory Hydra with Hardware Security Module (HSM) support. Requires Docker and Docker Compose. It uses `quickstart.yml` and `quickstart-hsm.yml` files for configuration and builds the images.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_8\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n    -f quickstart-hsm.yml \\\n    up --build\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Kratos UI URLs in `kratos.yml` Configuration\nDESCRIPTION: This snippet shows YAML configuration modifications to set the user interface URLs within `kratos.yml`, replacing localhost URLs with the deployed domain `accounts.example.com`. It includes changes for various flows like error handling, settings, recovery, verification, logout, login, and registration to ensure all UI endpoints point to the correct domain.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_36\n\nLANGUAGE: YAML\nCODE:\n```\nserve:\n  public:\n    base_url: https://accounts.example.com/\n    host: 127.0.0.1\n    cors:\n      enabled: true\n  admin:\n    host: 127.0.0.1\n    base_url: http://127.0.0.1:4434/\n\nselfservice:\n  default_browser_return_url: https://accounts.example.com/auth/\n  allowed_return_urls:\n    - https://accounts.example.com\n  methods:\n    password:\n      enabled: true\n  flows:\n    error:\n      ui_url: https://accounts.example.com/auth/errors\n    settings:\n      ui_url: https://accounts.example.com/auth/settings\n      privileged_session_max_age: 15m\n    recovery:\n      enabled: true\n      ui_url: https://accounts.example.com/auth/recovery\n    verification:\n      enabled: true\n      ui_url: https://accounts.example.com/auth/verification\n      after:\n        default_browser_return_url: https://accounts.example.com/auth/\n    logout:\n      after:\n        default_browser_return_url: https://accounts.example.com/auth/login\n    login:\n      ui_url: https://accounts.example.com/auth/login\n      lifespan: 10m\n    registration:\n      lifespan: 10m\n      ui_url: https://accounts.example.com/auth/registration\n      after:\n        password:\n          hooks:\n            - hook: session\n```\n\n----------------------------------------\n\nTITLE: Generating RSA Key Pair AWS CloudHSM Bash\nDESCRIPTION: Command using the `pkcs11-tool` to generate a new RSA key pair (4096 bits) directly inside the AWS CloudHSM via its PKCS#11 interface. The key is assigned a label and ID, and is marked as private and sensitive.\n\nDependencies: `pkcs11-tool`, AWS CloudHSM client with PKCS#11 library, valid PIN and token label.\n\nParameters: `--module` (library path), `--pin`, `--token-label`, `--keypairgen` (action), `--key-type` (algorithm and size), `--label`, `--id`, `--usage-sign`, `--private`, `--sensitive` (flags to prevent export/visibility).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\npkcs11-tool \\\n   --module /opt/cloudhsm/lib/libcloudhsm_pkcs11.so \\\n   --pin <PIN> \\\n   --token-label <LABEL> \\\n   --keypairgen \\\n   --key-type rsa:4096 \\\n   --label hydra.openid.id-token \\\n   --id <ID> \\\n   --login \\\n   --usage-sign \\\n   --private \\\n   --sensitive\n```\n\n----------------------------------------\n\nTITLE: Displaying GDPR Compliance Tabs - Legal Grounds for Processing Data\nDESCRIPTION: MDX code block creating a tabbed interface showing GDPR regulations related to legal grounds for processing data, including Ory's supporting role and customer responsibilities in areas like children's data and consent management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-compliance/gdpr.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<Tabs groupId=\"gdpr-regs\">\n<TabItem value=\"regulation\" label=\"GDPR regulation\">\n\n| Legal grounds for processing data | Support level |\n|-----------------------------------|---------------|\n| [Specific safeguards for data about children](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data/are-there-any-specific-safeguards-data-about-children_en \"Your company/organisation can only process a child's personal data on grounds of consent with the explicit consent of their parent or guardian up to a certain age\") | ![Single check mark](./_common/check-mark-single.svg) |\n| [Consent required for third-party marketing](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data/can-data-received-third-party-be-used-marketing_en \"Before acquiring a contact list or a database with contact details of individuals from another organisation, that organisation must be able to demonstrate that the data was obtained in compliance with the General Data Protection Regulation and that it may use it for advertising purposes\") | ![Single check mark](./_common/check-mark-single.svg) |\n| [Validity of consent](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data/grounds-processing/when-consent-valid_en \"When consent is required to process personal data, for that consent to be valid multiple conditions must be met\") | ![Single check mark](./_common/check-mark-single.svg) |\n| [Sensitive data](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/legal-grounds-processing-data/sensitive-data_en \"Sensitive personal data is protected under EU law and can only be processed by organisations if specific safeguards are in place\") | ![Single check mark](./_common/check-mark-single.svg) |\n\n</TabItem>\n<TabItem value=\"ory\" label=\"Ory's role\">\n\n| Legal grounds for processing data | Ory's role |\n|-----------------------------------|------------------|\n| Specific safeguards for data about children | Ory provides all of the APIs that would be needed for implementing safeguards around parental consent for processing children's personal data, but Ory cannot offer any support beyond that. |\n| Consent required for third-party marketing | You can optionally customize the Ory identity schema to store consent flags and then use these flags to decide whether the personal data is processed or not. |\n| Validity of consent | By default, Ory does not process personal data in a way that requires additional consent. |\n| Sensitive data | By default, Ory does not store or process sensitive data. |\n\n</TabItem>\n<TabItem value=\"customersupports\" label=\"Customer's role\">\n\n| Legal grounds for processing data | Customer's role |\n|-----------------------------------|-----------------------|\n| Specific safeguards for data about children | If your application is targeted at children, you must implement additional safeguards and ensure that personal data is stored only with explicit consent of a parent or guardian. |\n| Consent required for third-party marketing | Your application must respect a user's consent flag settings, and provide a mechanism for the user to give or revoke consent. |\n| Validity of consent | There are multiple conditions that must be complied with in order for consent to be valid and, in particular, you must always provide a mechanism for the user to revoke consent. |\n| Sensitive data | Processing of sensitive data is allowed only in special cases.  |\n\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Displaying GDPR Compliance Tabs - Dealing with Citizens\nDESCRIPTION: MDX code block that creates a tabbed interface showing GDPR regulations related to dealing with citizens, Ory's supporting role, and customer responsibilities. The tabs display tables with compliance requirements and support levels.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-compliance/gdpr.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs groupId=\"gdpr-regs\">\n<TabItem value=\"regulation\" label=\"GDPR regulation\">\n\n| Dealing with citizens| Support level |\n|----------------------|---------------|\n| [Limitations on automated decision making](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/are-there-restrictions-use-automated-decision-making_en \"Individuals should not be subject to a decision that is based solely on automated processing (such as algorithms) and that is legally binding or which significantly affects them\") | ![Single check mark](./_common/check-mark-single.svg) |\n| [Right to data portability](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/can-individuals-ask-have-their-data-transferred-another-organisation_en \"Individuals have the right to data portability, that is to receive from your company/organisation the personal data they provided in a structured machine-readable format, and have it transmitted to another company/organisation\") | ![Single check mark green](./_common/check-mark-single-green.svg) |\n| [Right to ask for personal data to be deleted](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/do-we-always-have-delete-personal-data-if-person-asks_en \"Individuals have the right to ask for their data to be deleted and organisations do have an obligation to do so, except in the some specific cases\") | ![Single check mark green](./_common/check-mark-single-green.svg) |\n| [Right to object to the processing of personal data](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/what-happens-if-someone-objects-my-company-processing-their-personal-data_en \"Individuals have the right to object to the processing of personal data for specific reasons\") | ![Single check mark green](./_common/check-mark-single-green.svg) |\n| [Right to request access to personal data](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/what-personal-data-and-information-can-individual-access-request_en \"When someone requests access to their personal data, your company/organisation must confirm whether or not it is processing personal data concerning them, provide a copy of the personal data it holds about them, and provide information about the processing (such as purposes, categories of personal data, recipients, etc.)\") | ![Single check mark green](./_common/check-mark-single-green.svg) |\n| [Dealing with requests](https://commission.europa.eu/law/law-topic/data-protection/reform/rules-business-and-organisations/dealing-citizens/how-should-requests-individuals-exercising-their-data-protection-rights-be-dealt_en \"Your company must reply to requests without undue delay, and in principle within 1 month of the receipt of the request; requests from individuals should be carried out free of charge\") | ![Single check mark green](./_common/check-mark-single-green.svg) |\n\n</TabItem>\n<TabItem value=\"ory\" label=\"Ory's role\">\n\n| Dealing with citizens| Ory's role |\n|----------------------|------------------|\n| Limitations on automated decision making | Ory does not make algorithmic decisions that significantly affect end users. |\n| Right to data portability | Ory provides an API that enables you to retrieve all of the personal data for a specific user. |\n| Right to ask for personal data to be deleted | Ory provides an API that enables you to delete personal data for a specific user. |\n| Right to object to the processing of personal data | You can optionally customize the Ory identity schema to store consent flags. |\n| Right to request access to personal data | Ory provides an API that enables you to retrieve all of the personal data for a specific user. |\n| Dealing with requests | Requests relating to personal data can be automated using Ory's API, facilitating a rapid response to the user.  |\n\n</TabItem>\n<TabItem value=\"customersupports\" label=\"Customer's role\">\n\n| Dealing with citizens| Customer's role |\n|----------------------|-----------------------|\n| Limitations on automated decision making | Your applications must avoid making purely algorithmic decisions (without human review) that significantly affect end users. |\n| Right to data portability | Any additional data you store in your own database must be retrievable by end users.  |\n| Right to ask for personal data to be deleted | Any user data you store in your own database must be deleted on request, followed by deletion of the related Ory user account. |\n| Right to object to the processing of personal data | Your application must respect a user's consent flag settings, and provide a mechanism for the user to give or revoke consent.  |\n| Right to request access to personal data | If you store any personal data in your own database, it must be retrievable by end users. |\n| Dealing with requests | Implement automated mechanisms that enable users to manage their personal data, in accordance with GDPR regulations. In particular, enabling Ory's self-service account settings flow enables users to manage most aspects of their personal data. |\n\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Hydra Systemd Service Configuration\nDESCRIPTION: This configuration file defines a systemd service for running Ory Hydra. It specifies the service description, dependencies, restart policy, user, environment variables, and the command to execute.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_17\n\nLANGUAGE: bash\nCODE:\n```\n[Unit]\nDescription=Hydra Service\nAfter=network.target\nStartLimitIntervalSec=0\n\n[Service]\nType=simple\nRestart=always\nRestartSec=1\nUser=hydra\nEnvironment=SERVE_ADMIN_HOST=127.0.0.1\nEnvironment=SERVE_PUBLIC_HOST=127.0.0.1\nExecStart=/opt/hydra/bin/hydra -c /opt/hydra/config/hydra.yml serve all\n\n[Install]\nWantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Example Project Update Configuration Payload - JSON\nDESCRIPTION: Provides a sample JSON structure representing a payload for updating an Ory Network project's configuration. This payload can be used as the body for API calls or as the content of configuration files referenced by the CLI command. The example includes a project 'name' and nested 'identity' service courier SMTP settings. The JSON must conform to the API schema at https://www.ory.sh/docs/reference/api#operation/updateProject, and real SMTP and service details must be provided.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-project.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"my updated name\",\n  \"identity\": {\n\t\"services\": {\n\t  \"config\": {\n\t\t\"courier\": {\n\t\t  \"smtp\": {\n\t\t\t\"from_name\": \"...\"\n\t\t  }\n\t\t  // ...\n\t\t}\n\t  }\n\t}\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Redirect URL Bash\nDESCRIPTION: Shows how to use the `--default-redirect-url` flag to set a specific URL path where users should be redirected after successful operations like login or account creation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_12\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> \\\n\t--default-redirect-url /welcome \\\n\thttps://www.example.org\n```\n\n----------------------------------------\n\nTITLE: Defining ID Token Mutator in an Access Rule YAML\nDESCRIPTION: This YAML snippet shows an example of using the `id_token` mutator within an access rule. It configures the `id_token` mutator within the `access-rule-1.yaml` file. It overrides the global configuration for the specific access rule using the `issuer_url`, `jwks_url`, `ttl`, and `claims` parameters. This configuration will generate a JWT based on the authentication information. The signed JWT will be included in the `Authorization: Bearer <jwt>` header.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nmutators:\n  - handler: id_token\n    config:\n      issuer_url: https://my-oathkeeper/\n      jwks_url: https://fetch-keys/from/this/location.json\n      # jwks_url: file:///from/this/absolute/location.json\n      # jwks_url: file://../from/this/relative/location.json\n      ttl: 60s\n      claims: '{\"aud\": [\"https://my-backend-service/some/endpoint\"],\"def\": \"{{ print .Extra.some.arbitrary.data }}\"}'\n```\n\n----------------------------------------\n\nTITLE: Parameter documentation using snake_case in Go\nDESCRIPTION: Demonstrates how request and response parameters, including query, body, and header fields, should be named in snake_case within struct definitions and annotations for clarity and consistency, following the API design standards.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_2\n\nLANGUAGE: Go\nCODE:\n```\n// Update Registration Flow with Password Method\n//\n// swagger:model updateRegistrationFlowWithPasswordMethod\n// type UpdateRegistrationFlowWithPasswordMethod struct {\n// \t// The CSRF Token\n// \tCSRFToken string `json:\"csrf_token\"`\n// ... other fields\n// }\n```\n\n----------------------------------------\n\nTITLE: Configure Consent and Login URLs\nDESCRIPTION: This YAML snippet shows an example of how to modify the `config.yaml` file. It configures the URLs for consent and login. The example configures the login and consent URLs to point to the sample application running at `http://localhost:3000`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\noauth2:\n  # ...\n  urls:\n    # highlight-next-line\n    consent: http://localhost:3000/consent\n    error: /oauth2/fallbacks/error\n    # highlight-next-line\n    login: http://localhost:3000/login\n    post_logout_redirect: /oauth2/fallbacks/logout\n```\n\n----------------------------------------\n\nTITLE: Configure SMS Sender Phone Number - YAML\nDESCRIPTION: This snippet demonstrates how to configure the sender phone number for SMS messages in the `config.yml` file. The `from` field specifies the phone number that will be displayed to the recipient.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/10_sending-sms.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  sms:\n    from: \"+12065550110\"\n```\n\n----------------------------------------\n\nTITLE: Defining Docker Compose Services for Ory Kratos and Dependencies - YAML\nDESCRIPTION: This snippet contains a Docker Compose YAML configuration that defines services required for running Ory Kratos with dependencies such as Postgres. It includes service definitions for the database, migration, Kratos server, and the Kratos frontend. Configuration details include image builds, volumes, environment variables, ports, and command overrides. This setup forms the base environment on top of which debugging can be enabled.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/debug/debug-docker-delve-ory-kratos.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nversion: \"3.7\"\n\nvolumes:\n  postgres-db:\n\nservices:\n  postgresd:\n    image: postgres:9.6\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - type: volume\n        source: postgres-db\n        target: /var/lib/postgresql/data\n        read_only: false\n    environment:\n      - PGDATA=/var/lib/postgresql/data/pgdata\n      - POSTGRES_PASSWORD=secret\n      - POSTGRES_USER=kratos\n\n  kratos-migrate:\n    image: kratos\n    build:\n      context: ../kratos\n      dockerfile: ./.docker/Dockerfile-build\n    environment:\n      - DSN=postgres://kratos:secret@postgresd:5432/kratos?sslmode=disable&max_conns=20&max_idle_conns=4\n    volumes:\n      - type: bind\n        source: path-to-kratos-config\n        target: /etc/config/kratos\n    command: migrate sql -e --yes\n    depends_on:\n      - postgresd\n\n  kratos:\n    image: kratos\n    build:\n      context: ../kratos\n      dockerfile: ./.docker/Dockerfile-build\n    depends_on:\n      - kratos-migrate\n    ports:\n      - \"4433:4433\" # public\n      - \"4434:4434\" # admin\n    command: serve -c /etc/config/kratos/kratos.yml --watch-courier --dev\n    volumes:\n      - type: bind\n        source: path-to-kratos-config\n        target: /etc/config/kratos\n\n  kratos-frontend:\n    image: kratos-frontend\n    build:\n      context: ../kratos-kratos-frontend\n      dockerfile: ./Dockerfile\n    env_file:\n      - file-containing-all-required-configuration.env\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding and updating identity config via CLI\nDESCRIPTION: Commands to encode the Jsonnet snippet in Base64, retrieve the existing identity configuration, and update the project configuration with the OAuth provider and claim mapper details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/42_salesforce.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n\n## List workspaces and projects\nory list workspaces\nory list projects --workspace <workspace-id>\n\n## Get identity config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n\n## Update configuration with provider details and mapper URL\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Example CLI Command for Updating Permission Config with JSON Format\nDESCRIPTION: This code snippet demonstrates how to execute the 'ory update permission-config' command for a specific project using JSON files, specifying output format as JSON. It shows how to pass multiple configuration files and highlights the expected output structure with namespaces details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-permission-config.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory update permission-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/config.json \\\n\t--file /path/to/config.yml \\\n\t--file https://example.org/config.yaml \\\n\t--file base64://<json> \\\n\t--format json\n\n{\n  \"namespaces\": [\n    {\n      \"name\": \"files\",\n      \"id\": 2\n    }\n    // ...\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Linting JSONNet Files using kratos jsonnet lint - Bash\nDESCRIPTION: This snippet demonstrates the basic command-line usage of `kratos jsonnet lint`. It shows how to provide specific file paths or glob patterns as arguments to the command. The command lints the specified JSONNet files and reports any syntax or style issues, exiting with a non-zero status code if problems are found.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-jsonnet-lint.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos jsonnet lint path/to/files/*.jsonnet [more/files.jsonnet, [supports/**/{foo,bar}.jsonnet]] [flags]\n```\n\n----------------------------------------\n\nTITLE: Parsing JSON for Client ID and Secret\nDESCRIPTION: This snippet shows the use of `jq` to parse the JSON output of the `hydra create client` command, extracting the client ID and secret.  This is a common pattern for scripting and automation where the generated client information must be retrieved programmatically. Requires `jq` installed and accessible in the execution environment, and it uses the `hydra create client` command's JSON output as input. The output are two shell variables with the client's ID and Secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-client.md#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n# Parse the JSON response using jq to get the client ID and client secret:\nclient_id=$(echo $client | jq -r '.client_id')\nclient_secret=$(echo $client | jq -r '.client_secret')\n```\n\n----------------------------------------\n\nTITLE: Enabling and Configuring 'cookie_session' Authenticator Globally\nDESCRIPTION: This YAML snippet shows how to enable the 'cookie_session' authenticator in the global Oathkeeper configuration (`oathkeeper.yml`). It includes the required `check_session_url` parameter, which specifies the endpoint used to validate session cookies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  cookie_session:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      check_session_url: https://session-store-host\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Kratos systemd Service Using Bash Shell\nDESCRIPTION: Starts the Ory Kratos service immediately using systemd, launching the background process to serve identity services.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_16\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl start kratos.service\n```\n\n----------------------------------------\n\nTITLE: Defining Ory Oathkeeper Authorizer Structure JSON\nDESCRIPTION: Shows the basic JSON structure required for defining an authorizer within an Ory Oathkeeper access rule. It includes the mandatory `handler` field to specify the authorizer type and an optional `config` object for handler-specific settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authorizer\": {\n    \"handler\": \"noop\",\n    \"config\": {}\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Including offline_access Scope in Custom Consent UI (TypeScript/MDX)\nDESCRIPTION: Shows an MDX code block that imports and renders a TypeScript code example (`consent-accept-offline.ts`). The referenced TypeScript code demonstrates how to correctly include the `offline_access` scope in the `grant_scope` parameter when programmatically accepting a consent request using the Ory SDK, which is necessary for obtaining a refresh token when implementing a custom consent UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/refresh-token-grant.mdx#_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n```mdx-code-block\nimport CodeBlock from '@theme/CodeBlock'\nimport tsExample from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/consent-accept-offline.ts'\n\n<CodeBlock language=\"tsx\">{tsExample}</CodeBlock>\n```\n```\n\n----------------------------------------\n\nTITLE: kratos hashers argon2 load-test Synopsis\nDESCRIPTION: This command simulates concurrent authentication requests per minute and provides statistical data about performance and resource consumption for tuning hashing parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-hashers-argon2-load-test.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nkratos hashers argon2 load-test <authentication-requests-per-minute> [flags]\n```\n\n----------------------------------------\n\nTITLE: Expanding access using Ory Keto\nDESCRIPTION: This snippet uses Ory Keto's expand-API to determine who has access to a file. The request specifies the file and the access relationship to be expanded. The output is an expansion tree listing all subjects with access, including direct members and members of related roles.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/examples/olymp-file-sharing.mdx#_snippet_2\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\n// The following subject set is expanded by Keto\nec788a82-a12e-45a4-b906-3e69f78c94e4#access\n```\n\n----------------------------------------\n\nTITLE: Configuring Login and Consent Flow Expiration via Ory CLI\nDESCRIPTION: This shell script demonstrates configuring the expiration time of the login and consent flow using the Ory CLI.  It uses the `ory patch oauth2-config` command and the `--replace` flag to set the expiration time for the `login_consent_request`. The example sets the duration to two hours. The `--project` and `--workspace` flags are necessary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/client-token-expiration.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/ttl/login_consent_request=\\\"2h\\\"\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Example User Login HTML Form\nDESCRIPTION: This HTML snippet provides a basic structure for a user login form intended for a custom login endpoint integrated with Ory. It includes standard input fields for user credentials (email, password) and a \"remember me\" option. The form demonstrates the inclusion of a hidden CSRF token field for security and submits data via POST to a hypothetical `/login` endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<form action=\"/login\" method=\"post\">\n  <input type=\"hidden\" name=\"csrf_token\" value=\"....\" />\n  <!-- Use CSRF tokens in your HTML forms! -->\n  <input type=\"email\" name=\"login_email\" placeholder=\"Please enter your email address to log in\" />\n  <input type=\"password\" name=\"login_password\" />\n  <input type=\"checkbox\" name=\"remember\" value=\"Remember me on this device\" />\n  <input type=\"submit\" value=\"Log in\" />\n</form>\n```\n\n----------------------------------------\n\nTITLE: Logout Logic Flow Diagram in Mermaid\nDESCRIPTION: A Mermaid flowchart diagram illustrating the logic flow of the OpenID Connect logout process, including decision paths based on token hints, session cookies, and redirect URIs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/logout.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\";\n\n<Mermaid\n  chart={`flowchart TD\nI[GET /oauth2/sessions/logout]-->| |RPI[Has id_token_hint]\nI[GET /oauth2/sessions/logout]-->| |OPI[Does not have id_token_hint]\nOPI-->|has state|E[Error]\nOPI-->|has post_logout_uri|E[Error]\nOPI-->|has session cookie|LUI[Logout UI with ?logout_challenge=...]\nOPI-->|no session cookie|End[Return to post_logout_url]\nRPI-->|has session cookie|LUI\nRPI-->|no session cookie|RPI2\nLUI-->|ask for user consent|LUI\nLUI-->|redirect with logout_verifier|RPI2[Process logout request]\nRPI2-->|execute front/backchannel logout, delete session cookie|RPI2\nRPI2-->|No post_logout_redirect_uri|End\nRPI2-->|Has post_logout_redirect_uri|End2[Redirect to post_logout_redirect_uri]\n`} />\n```\n\n----------------------------------------\n\nTITLE: Configuring Fallback Handlers (YAML)\nDESCRIPTION: This YAML snippet demonstrates how to configure fallback error handlers in the global Ory Oathkeeper configuration. The `errors.fallback` array defines the order in which handlers should be tried if no specific conditions match. The `config.to` under `redirect` specifies the redirect URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# .oathkeeper.yaml\nerrors:\n  # `[\"json\"]` is the default!\n  fallback:\n    - json\n\n  handlers:\n    json:\n      enabled: true # this is true by default\n      # config:\n      #   when: ...\n    redirect:\n      enabled: true # this is false by default\n      config:\n        to: http://mywebsite/login\n      # when: ...\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of `keto relation-tuple create`\nDESCRIPTION: Demonstrates the basic syntax for invoking the `keto relation-tuple create` command. It requires specifying a source for relationship data, which can be a path to a JSON file (`<relationships.json>`) or the special filename `-` to read from standard input. An optional directory path (`[<relationships-dir>]`) can be provided to process all JSON files within it. Additional behavior can be controlled using various flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-create.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple create <relationships.json> [<relationships-dir>] [flags]\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with Observability (Prometheus)\nDESCRIPTION: Starts Ory Hydra with Prometheus integration. Requires Docker and Docker Compose. It uses `quickstart.yml` and `quickstart-prometheus.yml` files for configuration and builds the images.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_7\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n  -f quickstart-prometheus.yml \\\n  up --build\n```\n\n----------------------------------------\n\nTITLE: Executing Hydra CLI get client Command in Shell\nDESCRIPTION: This shell snippet shows the basic usage pattern of the 'hydra get client' CLI command used to retrieve OAuth 2.0 client information by specifying one or more client IDs. It demonstrates how to combine the command with 'jq' to extract the client secret from the returned JSON data. No additional dependencies beyond the Hydra CLI and optional jq tool are required. Inputs are client IDs supplied as command-line arguments. The output is client details in JSON or configured formats.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-client.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nhydra get client id-1 [id-2] [id-n] [flags]\n```\n\nLANGUAGE: Shell\nCODE:\n```\nhydra get client <your-client-id> | jq -r '.client_secret'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identities Identity Configuration via Shell\nDESCRIPTION: This shell command retrieves the current identity configuration of an Ory project in YAML format and saves it locally. It uses the Ory CLI 'get identity-config' command specifying the project ID and output format. This is a prerequisite step before modifying PKCE settings within the configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/oidc-pkce.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory get identity-config --project $PROJECT_ID --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Relationships in Ory Permissions\nDESCRIPTION: Shows the command to create relationships from a JSON file using the Ory CLI. Displays the output showing the created relationships between users, groups, folders, and files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory create relationships relationships.json\n\n# Output:\n#   NAMESPACE       OBJECT                  RELATION NAME   SUBJECT\n#   Group           developer               members         patrik\n#   Group           developer               members         User:Patrik\n#   Group           developer               members         User:Henning\n#   Folder          keto/                   viewers         Group:developer#members\n#   File            keto/README.md          parents         Folder:keto/\n#   Folder          keto/src/               parents         Folder:keto/\n#   File            keto/src/main.go        parents         Folder:keto/src/\n#   File            private                 owners          User:Henning\n```\n\n----------------------------------------\n\nTITLE: Example CLI Usage Updating OAuth2 Configuration with JSON Format\nDESCRIPTION: This code snippet demonstrates how to invoke the 'ory update oauth2-config' command using multiple files and specifying the output format as JSON. It updates the OAuth2 configuration for a specific project by loading a configuration JSON file and outputs the result in JSON format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-oauth2-config.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory update oauth2-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--file /path/to/config.json \\\n\t--file /path/to/config.yml \\\n\t--file https://example.org/config.yaml \\\n\t--file base64://<json> \\\n\t--format json\n\n{\n  \"oauth2\": {\n    \"pkce\": {\n      \"enabled\": true\n    }\n  }\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Representation of TOTP Secret\nDESCRIPTION: Defines a JSON object representing a TOTP secret, including metadata and contextual information. This structure contains the secret string and an associated label explaining its purpose, used for displaying in the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"text\",\n  \"group\": \"totp\",\n  \"attributes\": {\n    \"text\": {\n      \"id\": 1050006,\n      \"text\": \"GLAS5YHAJ6V5LT3N7AU2R4AWU6SYOCHS\",\n      \"type\": \"info\",\n      \"context\": {\n        \"secret\": \"GLAS5YHAJ6V5LT3N7AU2R4AWU6SYOCHS\"\n      }\n    },\n    \"id\": \"totp_secret_key\",\n    \"node_type\": \"text\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1050006,\n      \"text\": \"This is your authenticator app secret. Use it if you can not scan the QR code.\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Docker Container\nDESCRIPTION: This command runs the custom Docker image. It maps ports 4455 and 4456 to the host, names the container `ory-oathkeeper-demo`, and passes the path to the configuration file as an argument. The container then starts and runs the Ory Oathkeeper serve process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ndocker run --rm \\\n  --name ory-oathkeeper-demo \\\n  -p 4455:4455 \\\n  -p 4456:4456 \\\n  ory-oathkeeper-demo \\\n  --config /config.yaml \\\n  serve\n```\n\n----------------------------------------\n\nTITLE: Configuring Accept Header Matching in YAML\nDESCRIPTION: Defines conditions to match specific 'Accept' header values in HTTP requests to control request handling based on content types. It supports explicit MIME types and wildcards, with literal interpretation to prevent pattern matching ambiguities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\nconfig:\n  when:\n    - request:\n        header:\n          accept:\n            - text/html\n            - text/*\n```\n\n----------------------------------------\n\nTITLE: Delete Access Tokens Command Usage - Ory CLI\nDESCRIPTION: This snippet shows the basic usage of the `ory delete access-tokens` command. It's designed to remove all OAuth2 access tokens belonging to a particular client specified by its client ID. The command requires the client ID as a positional argument.  The output format can be customized using the `--format` flag, with options like table, json, yaml, json-pretty, jsonpath, and jsonpointer. It interacts with the Ory Kratos Admin API, the endpoint of which can be set using the `--endpoint` flag or `KRATOS_ADMIN_URL` environmental variable.  \nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-access-tokens.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\nory delete access-tokens <client-id> [flags]\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Recovery Flow via cURL (Browser)\nDESCRIPTION: Uses cURL to fetch an existing recovery flow using its ID from the `/self-service/recovery/flows` endpoint in a browser context. Requires managing cookies (`-c` to store, `-b` to read) for subsequent requests. Includes the shell command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_37\n\nLANGUAGE: shell\nCODE:\n```\n{getRecoveryCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(getRecoveryCurlBrowserJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Simple Local Tunnel Bash\nDESCRIPTION: Provides a basic example of using the `ory tunnel` command to connect to an application running locally on `http://localhost:3000`. This minimal form relies on the project being configured via environment variables or a configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_13\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Extracting JWK 'use' Field with jq\nDESCRIPTION: Provides an example of how to pipe the JSON output of `hydra get jwks` to the `jq` utility to extract the 'use' field from each key within the retrieved JSON Web Key Set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwks.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra get jwks <set-id> | jq -r '.[].use'\n```\n\n----------------------------------------\n\nTITLE: Patching Identity Provider Return Override Using Ory CLI - Shell\nDESCRIPTION: This shell snippet demonstrates how to manually enable the 'Override Return To' option in an Ory project using the Ory CLI. The command requires the project ID and sets '/services/identity/oauth2_provider/override_return_to=true' through the 'ory patch' operation. The main dependency is the Ory CLI, and you need permissions to patch project configuration; substitute <your-project-id> with your actual project identifier. Input is the project ID, output is an updated project config. Possible limitations include the need for proper CLI installation and access rights.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/identity-provider-integration-settings.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch ory patch project <your-project-id> \\\n  --replace '/services/identity/oauth2_provider/override_return_to=true'\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Ory SDK\nDESCRIPTION: Command to set up the environment variable needed to connect with Ory's APIs, specifying the project URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nexport NEXT_PUBLIC_ORY_SDK_URL=https://$PROJECT_SLUG.projects.oryapis.com\n```\n\n----------------------------------------\n\nTITLE: Referencing Ory Login Endpoint Logic (MDX)\nDESCRIPTION: This MDX snippet references external TypeScript code that demonstrates how to handle the login challenge at a custom login endpoint using the Ory SDK. The referenced code is expected to use the `login_challenge` query parameter to fetch details about the login request via the SDK (`getOAuth2LoginRequest`) and then either accept or reject the flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_2\n\nLANGUAGE: mdx\nCODE:\n```\nimport loginVerbose from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/login-verbose.ts'\nimport CodeBlock from '@theme/CodeBlock'\n\n<CodeBlock language=\"js\">{loginVerbose}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Nginx Configuration - Certbot Managed\nDESCRIPTION: This is an example of an Nginx configuration file, which is managed by Certbot after successful SSL configuration. It includes server blocks to listen on ports 80 and 443, with automatic redirects, SSL certificate paths, and other configurations managed by Certbot. The configuration automatically redirects all HTTP traffic to HTTPS.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_26\n\nLANGUAGE: nginx\nCODE:\n```\nserver {\n      listen 80;\n      server_name accounts.example.com;\n      if ($host = accounts.example.com) {\n               return 301 https://$host$request_uri;\n      } # managed by Certbot\n}\nserver {\n   listen [::]:443 ssl ipv6only=on; # managed by Certbot\n   listen 443 ssl; # managed by Certbot\n   ssl_certificate /etc/letsencrypt/live/accounts.example.com/fullchain.pem; # managed by Certbot\n   ssl_certificate_key /etc/letsencrypt/live/accounts.example.com/privkey.pem; # managed by Certbot\n   include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n   ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra Docker Container with TLS Environment Variables - Shell\nDESCRIPTION: This snippet runs the Ory Hydra service in a Docker container, passing the base64-encoded TLS certificate and key as environment variables. It demonstrates the use of the Docker CLI with environment variable injection for secure TLS configuration. Dependencies: Docker must be installed and environment variables with base64-encoded certificate/key set. Inputs: SERVE_TLS_CERT_BASE64 and SERVE_TLS_KEY_BASE64; Outputs: a running Ory Hydra container with enabled TLS. Limitation: relies on pre-generated environment variables and Docker configuration using shell interpolation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/ssl-https-tls.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\ndocker run ... \\\n    -e SERVE_TLS_CERT_BASE64=\"$SERVE_TLS_CERT_BASE64\" \\\n    -e SERVE_TLS_KEY_BASE64=\"$SERVE_TLS_KEY_BASE64\" \\\n    ...\n```\n\n----------------------------------------\n\nTITLE: Fetching ORY Registration Flow using curl and extracting 'traits.website' field with jq\nDESCRIPTION: This Bash snippet sends a GET request to the ORY registration flow API endpoint and pipes the response through jq to select the UI node associated with the 'traits.website' input. It demonstrates how to programmatically retrieve and parse registration form data for further processing or validation. Dependencies include curl and jq. The code inputs an API URL and outputs the JSON element corresponding to the website field input.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/oidc.invalid.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/registration/flows?id=76cec270-1719-4c9e-b09a-4af8281d511e' \\\n    | jq -r '.ui.nodes[] | select(.attributes.name==\"traits.website\")'\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI create commands syntax - Shell\nDESCRIPTION: Various `ory create` commands now require specifying the target project/workspace using `--project`, `--workspace` flags or `ORY_PROJECT`, `ORY_WORKSPACE` environment variables, moving away from the positional project argument used in v0.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n- ory create event-stream|jwk|oauth2-client|organization|project|relationships|workspace <project>\n+ ory create event-stream|jwk|oauth2-client|organization|project|relationships|workspace --project <project>\n+ ory create event-stream|jwk|oauth2-client|organization|project|relationships|workspace --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory create event-stream|jwk|oauth2-client|organization|project|relationships|workspace\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Hydrator Mutator Globally (YAML)\nDESCRIPTION: This global configuration in oathkeeper.yml sets up the hydrator mutator to fetch and merge authentication session data from a backend API. It includes basic authentication and retry/caching strategies for the hydrator's outbound POST requests. Dependencies: accessible backend API endpoint, optional credentials, Oathkeeper, and correct API response structure. Outputs: extended session/context for downstream processing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_13\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nmutators:\n  hydrator:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n    config:\n      api:\n        url: http://my-backend-api\n        auth:\n          basic:\n            username: someUserName\n            password: somePassword\n        retry:\n          give_up_after: 2s\n          max_delay: 100ms\n      cache:\n        ttl: 60s\n\n```\n\n----------------------------------------\n\nTITLE: Configuring BCrypt Hashing in YAML\nDESCRIPTION: This YAML snippet configures the BCrypt hashing algorithm within the 'hashers' section of the configuration file. The 'algorithm' option is set to 'bcrypt'. This configures all password hashing to utilize the BCrypt hashing algorithm, as the default.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/password.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\n```yaml title=\"config.yml\"\nhashers:\n  algorithm: bcrypt\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Account Recovery Flow via Ory CLI\nDESCRIPTION: This sequence configures the account recovery flow using the Ory CLI. It first retrieves the current identity configuration, then modifies it to enable the recovery flow, specifying the method ('code' or 'link'), lifespan for the flow and the recovery artifact, and whether to notify unknown recipients. Finally, it updates the project's configuration with the changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    code: # Enables the \"one-time code\" method. Use 'link' to enable \"magic link\" method.\n      enabled: true\n      config:\n        lifespan: 15m # Defines how long the code or link are valid for. Default: 1h.\n\n  flows:\n    recovery:\n      enabled: true\n      lifespan: 15m # Defines how much time the user has to complete the recovery flow in the UI. Default: 1h.\n      use: code # Defines which method is used, one of 'code' or 'link'.\n      notify_unknown_recipients: false # Defines if the system sends attempted recovery notifications to unregistered addresses.\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Adding Ory Redirect URI for LinkedIn OAuth - Shell\nDESCRIPTION: This shell snippet provides the format of the required redirect URI to register in LinkedIn's OAuth app configuration for Ory integration. Substitute $PROJECT_SLUG with your project's slug. Ensure accurate URI placement to prevent authentication failures. No dependencies or active execution (shown for copy-paste usage).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/linkedin\n\n```\n\n----------------------------------------\n\nTITLE: Ory OAuth2 Config Patching CLI Command Options - Bash\nDESCRIPTION: This snippet outlines the CLI flags and options available for the 'ory patch oauth2-config' command. It details flags such as --add, --remove, and --replace to apply JSON-Patch operations on the configuration. Also included are parameters for selecting the project (--project), controlling output format (--format), working in quiet mode (--quiet), and specifying configuration files or workspaces. These options enable flexible and precise configuration patching tailored to user needs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-oauth2-config.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n      --add stringArray       Add a specific key to the configuration\n  -f, --file strings          Configuration file(s) (file://config.json, https://example.org/config.yaml, ...) to update the project\n      --format string         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                  help for oauth2-config\n      --project string        The project to use, either project ID or a (partial) slug.\n  -q, --quiet                 Be quiet with output printing.\n      --remove stringArray    Remove a specific key from the configuration\n      --replace stringArray   Replace a specific key in the configuration\n      --workspace string      The workspace to use, either workspace ID or a (partial) name.\n  -y, --yes                   Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Performing Authorization Code Grant Flow Using Ory CLI in Shell\nDESCRIPTION: Starts the Authorization Code Grant flow using the Ory CLI by specifying project ID, client ID, and client secret. This command opens a browser UI for user login and consent, leading to issuance of id_token, access_token, and refresh_token once authorization is granted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory perform authorization-code \\\n  --project \"$PROJECT_ID\" \\\n  --client-id \"$code_client_id\" \\\n  --client-secret \"$code_client_secret\"\n```\n\n----------------------------------------\n\nTITLE: Listing All Sessions in Go (Administrative)\nDESCRIPTION: Uses the initialized Go SDK client to list all sessions across the system via the administrative API. Requires an API Key. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_11\n\nLANGUAGE: go\nCODE:\n```\nimport goGetSessions from '!!raw-loader!../../../code-examples/sdk/go/session/get-sessions.go'\n\n<CodeBlock language=\"go\" title=\"Listing all sessions\">{goGetSessions}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Ory Identity Storage Format (YAML)\nDESCRIPTION: Illustrates how the mapped data (traits and metadata) and the social sign-in provider linkage (`credentials.oidc`) are stored within an Ory Identity object, represented here in YAML format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\n# This is the YAML representation of an identity\nid: \"9f425a8d-7efc-4768-8f23-7647a74fdf13\"\n\ncredentials:\n  oidc:\n    id: oidc\n    identifiers:\n      - example:some-identity-id-4hA8gk\n    config:\n      - provider: example\n        identifier: some-identity-id-4hA8gk\n\nschema_id: some-example\n\ntraits:\n  email: foo@ory.sh\n\nmetadata_public:\n  github_username: foo-user\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow via cURL (Browser)\nDESCRIPTION: Uses cURL to send a POST request to the `/self-service/verification` endpoint to submit verification data (e.g., email) for a browser-based application. Requires sending cookies (managed with -c/-b flags) and the CSRF token (`csrf_token`) in the request body. Displays the cURL command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_58\n\nLANGUAGE: shell\nCODE:\n```\n{submitVerificationCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(submitVerificationCurlBrowserJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Help option for migrate command\nDESCRIPTION: This snippet defines the help option for the `migrate` command.  The `-h` or `--help` flag is used to display help information. This flag has no specific dependencies beyond the standard command-line interface provided by the application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-migrate.md#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help   help for migrate\n```\n\n----------------------------------------\n\nTITLE: Syntax for `oathkeeper rules list`\nDESCRIPTION: Shows the basic command structure for listing Oathkeeper access rules, indicating that flags can be appended.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-list.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\noathkeeper rules list [flags]\n```\n\n----------------------------------------\n\nTITLE: Examples of importing JSON Web Keys\nDESCRIPTION: Examples showing how to import JSON Web Keys in different formats. The first example imports JSON formatted keys, while the second imports RSA key pairs with 'enc' usage specified.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-jwk.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory import jwk my-set ./path/to/jwk.json ./path/to/jwk-2.json --format json\nory import jwk my-set ./path/to/rsa.key ./path/to/rsa.pub --use enc\n```\n\n----------------------------------------\n\nTITLE: Example Usage of hydra delete access-tokens\nDESCRIPTION: Example showing how to use the command to delete all access tokens for a client. Simply provide the client ID as the parameter after the command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-access-tokens.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra delete access-tokens <client-id>\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Hydra JavaScript SDK\nDESCRIPTION: Basic configuration for initializing both the Public API and Admin API clients for Ory Hydra. This sets up the base paths for the API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/10_js.mdx#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Configuration, PublicApi, AdminApi } from \"@ory/hydra-client\"\n\nconst hydraPublic = new PublicApi(\n  new Configuration({\n    basePath: \"https://public.hydra:4444/\",\n  }),\n)\n\nconst hydraAdmin = new AdminApi(\n  new Configuration({\n    basePath: \"https://public.hydra:4445/\",\n  }),\n)\n```\n\n----------------------------------------\n\nTITLE: Running Go Tests with SQLite Tag\nDESCRIPTION: Executes the Go test suite for the current project and its subpackages. The `-tags sqlite` flag includes tests specifically tagged for the SQLite database, while `./...` specifies all packages within the current directory and its children. This command is required to ensure all tests pass before submitting a Go code contribution.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ngo test -tags sqlite ./...\n```\n\n----------------------------------------\n\nTITLE: Defining Multiple Identifiers in JSON Schema\nDESCRIPTION: This JSON schema defines a person's traits, including a username and an email address, which can be used as identifiers for signing in. It uses the `ory.sh/kratos` extension to mark the `username` field for password-based credentials and the `email` fields with various options (password, webauthn, totp, code, passkey) as possible identifiers for login.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.email.schema.json\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"username\": {\n          \"type\": \"string\",\n          \"minLength\": 6,\n          \"title\": \"Username\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              },\n              \"webauthn\": {\n                \"identifier\": true\n              },\n              \"totp\": {\n                \"account_name\": true\n              },\n              \"code\": {\n                \"identifier\": true,\n                \"via\": \"email\"\n              },\n              \"passkey\": {\n                \"display_name\": true\n              }\n            },\n            \"recovery\": {\n              \"via\": \"email\"\n            },\n            \"verification\": {\n              \"via\": \"email\"\n            }\n          },\n          \"maxLength\": 320\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet with Base64 - Shell\nDESCRIPTION: This command shows how to encode the Jsonnet snippet using Base64. The Base64 encoded string can then be used directly in the Ory Identities configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Querying Registration Password Node via Ory API - Shell\nDESCRIPTION: This shell snippet utilizes curl to request a registration flow from the Ory public API and pipes the resulting JSON output to jq for extracting details about the node whose attribute name is \"password\". The command requires jq (a command-line JSON processor) and access to the specified API endpoint. The API call expects a valid registration flow ID as a parameter, returning selected password field-related nodes as output. Input: None (apart from command-line invocation and available registration flow ID); Output: filtered JSON with password node details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/password.policy.txt#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl -H \"Accept: application/json\" -s \\\n    'https://playground.projects.oryapis.com/self-service/registration/flows?id=ba7b883b-80e5-457b-9ef1-c17e6743edd0' \\\n    | jq -r '.ui.nodes[] | select(.attributes.name==\"password\")'\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Kratos with API Flow Enforcement Disabled for React Native Testing - Shell\nDESCRIPTION: This shell command starts Ory Kratos with an in-memory DSN and disables API flow enforcement by setting the environment variable 'DEV_DISABLE_API_FLOW_ENFORCEMENT' to true. This is required to test React Native applications rendered in web browsers via Cypress, as it bypasses browser security features that would normally block self-service API flows during end-to-end tests. The server runs in development mode with logging directed to 'kratos.e2e.log'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/e2e-integration-tests.mdx#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nDSN=memory \\\n    DEV_DISABLE_API_FLOW_ENFORCEMENT=true\n    hydra serve -c ./path/to/config/kratos.yml --dev  > \"kratos.e2e.log\" 2>&1 &)\n```\n\n----------------------------------------\n\nTITLE: Structure of API Response for Identity Tokens in JSON\nDESCRIPTION: Provides an example of the JSON response returned when querying an identity's details from Ory, including OIDC/OAuth2 credential information and associated tokens for each provider. The response includes identity metadata, credential types, provider identifiers, token fields (`initial_access_token`, `initial_refresh_token`, `initial_id_token`), trait information, and address records. This schema illustrates the structure and data types developers can expect when integrating with Ory identity APIs. Actual tokens are obfuscated for security; in real scenarios, full tokens are returned for valid, newly created or linked identities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/85_get-tokens.mdx#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"IDENTITY_ID\",\n  \"credentials\": {\n    \"oidc\": {\n      \"type\": \"oidc\",\n      \"identifiers\": [\n        \"google:some-user\"\n        \"github:another-user\"\n      ],\n      \"config\": {\n        \"providers\": [\n          {\n            \"subject\": \"some-user\",\n            \"provider\": \"google\",\n            \"initial_access_token\": \"********************\",\n            \"initial_refresh_token\": \"********************\",\n            \"initial_id_token\": \"********************\"\n          },\n          {\n            \"subject\": \"another-user\",\n            \"provider\": \"github\",\n            \"initial_access_token\": \"********************\",\n            \"initial_refresh_token\": \"********************\",\n            \"initial_id_token\": \"********************\"\n          }\n        ]\n      },\n      \"created_at\": \"2022-10-08T12:17:18.834351+02:00\",\n      \"updated_at\": \"2022-10-08T12:17:18.834351+02:00\"\n    }\n  },\n  \"schema_id\": \"default\",\n  \"schema_url\": \"SCHEMA_URL\",\n  \"state\": \"active\",\n  \"state_changed_at\": \"2022-10-08T12:17:18.83324+02:00\",\n  \"traits\": {\n    \"subject\": \"foo.oidc@bar.com\"\n  },\n  \"verifiable_addresses\": [\n    {\n      \"id\": \"88da96df-0457-4d69-832d-5e70ef25055c\",\n      \"value\": \"foo.oidc@bar.com\",\n      \"verified\": false,\n      \"via\": \"\",\n      \"status\": \"\",\n      \"verified_at\": null,\n      \"created_at\": \"2022-10-08T12:17:18.83324+02:00\",\n      \"updated_at\": \"2022-10-08T12:17:18.834202+02:00\"\n    }\n  ],\n  \"created_at\": \"2022-10-08T12:17:18.834043+02:00\",\n  \"updated_at\": \"2022-10-08T12:17:18.834043+02:00\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Permission Language (OPL) Configuration (Ory CLI, Bash)\nDESCRIPTION: Command to apply a local file (e.g., `permissions.ts`) containing Ory Permission Language (OPL) definitions to update the configuration. This command is used in a CI/CD pipeline step for syncing OPL definitions managed in Git.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nory update opl --file permissions.ts\n```\n\n----------------------------------------\n\nTITLE: Example usage of ory introspect token CLI command (CLI)\nDESCRIPTION: Illustrates how to use the `ory introspect token` command with a sample token value and the `--project` flag to specify the Ory Network project. This shows a typical invocation pattern.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-introspect-token.md#_snippet_1\n\nLANGUAGE: cli\nCODE:\n```\nory introspect token AYjcyMzY3ZDhiNmJkNTY --project 32197be3-8e57-4009-becd-9d38dbde129c\n```\n\n----------------------------------------\n\nTITLE: Configuring JSON Error Handler in JSON5\nDESCRIPTION: Defines an error handler of type 'json' that returns JSON responses for error conditions, with an option to enable verbose error messages for debugging. Match conditions are specified under 'when'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_11\n\nLANGUAGE: json5\nCODE:\n```\n// access-rule.json\n{\n  handler: \"json\",\n  config: {\n    verbose: true, // defaults to false\n    when: [\n      // ...\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Informing User on Recovery Email Sent Status in Ory (JSON)\nDESCRIPTION: This JSON object signals that a recovery link has been sent to the user's email address. Intended for use in the recovery UI, it relies on the correct email being provided in the user flow. Dependencies include an email delivery service properly configured in Ory; inputs are the message id (1060002) and static informational text.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1060002,\n  \"text\": \"An email containing a recovery link has been sent to the email address you provided. If you have not received an email, check the spelling of the address and make sure to use the address you registered with.\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Identity Configuration (Ory CLI, Bash)\nDESCRIPTION: Command to fetch the current identity configuration from a specified Ory Network project and workspace, saving it as a pretty-printed JSON file. This is typically the first step to get the existing configuration into your Git repository. It requires the Ory CLI to be installed and authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory get identity-config --workspace \"<workspace-id>\" --project \"<project-id>\" --format json-pretty > identity-config.json\n```\n\n----------------------------------------\n\nTITLE: Binding Configuration Directory in Docker\nDESCRIPTION: This command demonstrates how to bind a configuration directory when running the Ory Kratos Docker image.  The `--config` flag specifies the location of the configuration file within the container.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ndocker run {image-name} serve --config /home/ory/kratos.yml\n```\n\n----------------------------------------\n\nTITLE: Rendering UI in BrowserWindow for Secrets\nDESCRIPTION: HTML code snippets rendering secrets and TOTP secrets within a browser window using custom components. These snippets display images and embed JSON containing secret-related metadata. They serve as examples of how secrets are visually presented in the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_4\n\nLANGUAGE: mdx\nCODE:\n```\n<BrowserWindow url=\"https://playground.projects.oryapis.com/ui\">\n\n![Lookup Secret](../_static/ui-user-interface/2.png)\n\n</BrowserWindow>\n```\n\nLANGUAGE: mdx\nCODE:\n```\n<BrowserWindow url=\"https://playground.projects.oryapis.com/ui\">\n\n![TOTP Secret](../_static/ui-user-interface/3.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Executing ORY Oathkeeper Health Ready Command\nDESCRIPTION: This snippet demonstrates the command-line usage of `oathkeeper health ready`. It checks the readiness of an ORY Oathkeeper deployment by sending a request to the specified endpoint.  The endpoint URL is crucial, and should target a single Oathkeeper instance.  The command can take flags such as `--help`, and also inherits flags from parent commands such as `--config` and `--endpoint`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-health-ready.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\noathkeeper health ready [flags]\n```\n\n----------------------------------------\n\nTITLE: Command Options for `ory list workspaces` (Shell)\nDESCRIPTION: Lists the specific options available for the `ory list workspaces` command. The `-h` or `--help` flag displays help information for this specific subcommand.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-workspaces.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for workspaces\n```\n\n----------------------------------------\n\nTITLE: Working with Git Forks in Ory Projects - Shell\nDESCRIPTION: This snippet demonstrates the workflow for cloning the main repository, adding a fork as a remote, synchronizing with upstream changes, creating a feature branch, and pushing updates to the fork. Prerequisites include git CLI tools and appropriate access rights on GitHub. Input substitutions must be made for your GitHub username. The commands produce a synchronized fork ready for new feature branches and pull requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n# First you clone the original repository\ngit clone git@github.com:ory/ory/kratos.git\n\n# Next you add a git remote that is your fork:\ngit remote add fork git@github.com:<YOUR-GITHUB-USERNAME-HERE>/ory/kratos.git\n\n# Next you fetch the latest changes from origin for master:\ngit fetch origin\ngit checkout master\ngit pull --rebase\n\n# Next you create a new feature branch off of master:\ngit checkout my-feature-branch\n\n# Now you do your work and commit your changes:\ngit add -A\ngit commit -a -m \"fix: this is the subject line\" -m \"This is the body line. Closes #123\"\n\n# And the last step is pushing this to your fork\ngit push -u fork my-feature-branch\n\n```\n\n----------------------------------------\n\nTITLE: Example: Retrieving OAuth 2.0 Client Name Using jq\nDESCRIPTION: Example showing how to retrieve an OAuth 2.0 client's name by combining the command with jq to process the JSON output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-oauth2-client.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra get oauth2-client <your-client-id> --format json | jq -r '.client_name'\n```\n\n----------------------------------------\n\nTITLE: Adding a User to an Additional Group Using Keto Relation Tuple\nDESCRIPTION: This snippet adds the user 'Dilan' to the 'marketing' group by defining a new group membership relation tuple, granting him additional access to marketing reports. It demonstrates dynamic updates to user group assignments for the RBAC system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_5\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\ngroups:marketing#member@Dilan\n```\n\n----------------------------------------\n\nTITLE: Start Systemd Service\nDESCRIPTION: This command starts the `uinode.service` immediately.  This will launch the Ory Kratos UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_35\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl start uinode\n```\n\n----------------------------------------\n\nTITLE: Patching OAuth2 client partially via SDK and REST API\nDESCRIPTION: This section shows how to perform partial updates on an OAuth2 client through SDK code snippets and REST API documentation links. Patching allows changing specific properties without affecting the entire client configuration, enabling precise control over client settings. Usage involves SDK code or referring to API endpoints for partial modifications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-client {client.id}\n```\n\nLANGUAGE: Markdown\nCODE:\n```\n```mdx-code-block\nimport patchTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-patch.ts'\n\n<Codes language=\"tsx\">{patchTs}</Codes>\n```\n```\n\n----------------------------------------\n\nTITLE: Parent CLI Options for Ory Verification Command - Shell\nDESCRIPTION: Lists inherited options from parent Ory CLI commands. These flags let users specify a config file, select a project, enable quiet mode, or auto-confirm dialogs. Each option has a default value and can be customized at runtime, requiring no external dependencies beyond the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-verification.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string    Path to the Ory Network configuration file.\n      --project string   The project to use, either project ID or a (partial) slug.\n  -q, --quiet            Be quiet with output printing.\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering Install Component with Props in MDX\nDESCRIPTION: This snippet imports an 'Install' component from a common MDX file and renders it with props specifying the repository and name for Ory Hydra. It aids in displaying installation instructions for Hydra with customized parameters. Dependencies include the '../../_common/install.mdx' file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/install.mdx#_snippet_1\n\nLANGUAGE: MDX\nCODE:\n```\nimport Install from '../../_common/install.mdx'\n\n<Install repo=\"hydra\" name=\"Ory Hydra\" />\n```\n\n----------------------------------------\n\nTITLE: No Code Snippets Available\nDESCRIPTION: The provided content contains descriptive documentation but no executable or code snippets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-identity-config.md#_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: Listing and Exporting Ory Project Configuration - Ory CLI - Shell\nDESCRIPTION: This shell script sequence demonstrates how to enumerate available workspaces and projects using the Ory CLI, then export the corresponding identity configuration to a YAML file. Prerequisites include the Ory CLI installed and authenticated against your Ory account. Key parameters are <workspace-id> and <project-id> (replace with actual IDs). Expected outputs are the workspace/project listings and an identity-config.yaml file for further editing. Requires network access and correct permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Setting Up Ory API Route for Next.js 12\nDESCRIPTION: Creating a special route in Next.js 12 that connects with Ory's APIs and handles cookies and credentials. This route is required for local development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// Code content referenced from external file\n// This would be the content of pages/api/.ory/[...paths].ts\n```\n\n----------------------------------------\n\nTITLE: Constructing Redirect URI for Apple OIDC\nDESCRIPTION: This shell command shows the expected redirect URI to configure in the Apple Developer Console. The `$PROJECT_SLUG` placeholder should be replaced with the actual project slug.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/apple\n```\n\n----------------------------------------\n\nTITLE: Defining a Sendgrid Email Template Body (Jsonnet)\nDESCRIPTION: This Jsonnet snippet defines an email body format compatible with the Sendgrid Mail Send API, to be used as the HTTP request body in Ory's Courier configuration. It includes dynamic personalization fields that extract recipient email and verification code from the 'ctx.TemplateData' context object if present. The function expects a context parameter (ctx) which should contain template data; missing keys result in assignment of null values. Ensure all required personalization fields conform to Sendgrid's API specification for successful requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_12\n\nLANGUAGE: Jsonnet\nCODE:\n```\nfunction(ctx) {\n\"personalizations\": [\n    {\n      \"to\": [\n        {\n          \"email\": if \"TemplateData\" in ctx && \"To\" in ctx.TemplateData then ctx.TemplateData.To else null)\n        }\n      ],\n     \"verificationCode\": if \"TemplateData\" in ctx && \"VerificationCode\" in ctx.TemplateData then ctx.TemplateData.VerificationCode else null\n    }\n  ],\n  // Other values and personalizations .......\n}\n```\n\n----------------------------------------\n\nTITLE: Contributing - Git Fork Workflow - Bash\nDESCRIPTION: This bash script provides the steps to contribute code changes to the Ory documentation repository using a Git fork. It covers cloning the original repository, adding your fork as a remote, synchronizing with the main branch, creating a feature branch, committing changes with a conventional commit message, and pushing the changes to your fork to prepare for a pull request.\nSOURCE: https://github.com/ory/docs/blob/master/CONTRIBUTING.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# First you clone the original repository\ngit clone git@github.com:ory/ory/docs.git\n\n# Next you add a git remote that is your fork:\ngit remote add fork git@github.com:<YOUR-GITHUB-USERNAME-HERE>/ory/docs.git\n\n# Next you fetch the latest changes from origin for master:\ngit fetch origin\ngit checkout master\ngit pull --rebase\n\n# Next you create a new feature branch off of master:\ngit checkout my-feature-branch\n\n# Now you do your work and commit your changes:\ngit add -A\ngit commit -a -m \"fix: this is the subject line\" -m \"This is the body line. Closes #123\"\n\n# And the last step is pushing this to your fork\ngit push -u fork my-feature-branch\n```\n\n----------------------------------------\n\nTITLE: Defining Ory Action Webhook for Mailchimp - JSON\nDESCRIPTION: This JSON object defines an Ory Action webhook that makes an HTTP POST request to the Mandrill API endpoint. The config specifies the webhook URL, HTTP method, and sets the request body as a Base64-encoded Jsonnet payload (which must be replaced by your actual encoded content). The hook is indicated as 'web_hook'. Required fields include a valid Mandrill API key, properly formatted JSON body, and correct endpoint URL. Ensure you paste the Base64 payload where '{ENCODED_JSONNET}' appears. Used when adding ory Actions to a project's configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/mailchimp.mdx#_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"hook\": \"web_hook\",\n  \"config\": {\n    \"url\": \"https://mandrillapp.com/api/1.0/messages/send\",\n    \"method\": \"POST\",\n    \"body\": \"base64://{ENCODED_JSONNET}\"\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Displaying Submit Button Label in Ory Interface (JSON)\nDESCRIPTION: Static message for the 'Submit' button used in various Ory forms. It does not require any input or configuration; message id is 1070005.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070005,\n  \"text\": \"Submit\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Hydra TTL Migration Job in Helm Chart (YAML)\nDESCRIPTION: This YAML snippet demonstrates how to enable the OEL PostgreSQL TTL migration job in the Hydra Helm chart by setting 'enabled: true' in the oel-postgresql-ttl custom migration job configuration. No external dependencies beyond a functional Kubernetes cluster, Ory Hydra Helm chart, and a properly set up PostgreSQL with pg_cron are required. The key parameter is 'enabled', which activates automated TTL jobs for expired data cleanup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/postgresql-ttl-migrations.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nhydra:\n  customMigrations:\n    jobs:\n      oel-postgresql-ttl:\n        enabled: true\n\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Client Go SDK\nDESCRIPTION: Provides the shell command to install the Ory client-go SDK using `go get`. It specifies retrieving the dependency at the version corresponding to the latest tag of the 'master' branch. This command requires a Go programming environment to be set up.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/sdk/05_go.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/client-go@${useLatestTag('client-go', 'master')}\n```\n\n----------------------------------------\n\nTITLE: Display Hydra CLI Help - Go\nDESCRIPTION: This snippet defines the help flag for the `hydra` command-line tool. When invoked with the `-h` or `--help` flag, it provides usage information about the CLI, including available subcommands and options. This flag is a standard practice for command-line applications to aid users in understanding how to use the tool. No dependencies are specified in this snippet.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\n  -h, --help   help for hydra\n```\n\n----------------------------------------\n\nTITLE: Generating Migration Files Command Usage\nDESCRIPTION: This snippet demonstrates the basic command structure for generating migration files using the `hydra migrate gen` command. It takes source and target paths as arguments, along with optional flags. The command utilizes migration templates to create the necessary files, likely for database schema updates or related tasks. No specific programming language is explicitly mentioned, but the command-line syntax is shown, suggesting the use of a CLI tool written in a language like Go (based on the project).\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-gen.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra migrate gen </source/path> </target/path> [flags]\n```\n\n----------------------------------------\n\nTITLE: Encoding Data Mapping for Ory as Base64 - Shell\nDESCRIPTION: This shell command encodes the Jsonnet data mapping snippet file using base64 encoding, for safe embedding into the Ory configuration as a data URI. Requires the 'base64' utility available in Unix-like systems. The input is a Jsonnet file, and the output is a base64-encoded string on stdout, ready for use in Ory's CLI configuration. No validation is performed on content; ensure Jsonnet syntax correctness before encoding.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n\n```\n\n----------------------------------------\n\nTITLE: Deploying PostgreSQL with Docker (Bash)\nDESCRIPTION: Runs a PostgreSQL database container in detached mode, naming it 'ory-hydra-example--postgres'. It attaches to the 'hydraguide' network and configures the database name, user, and password using environment variables, providing a persistent data store for Ory Hydra within the tutorial environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker run \\\n  --network hydraguide \\\n  --name ory-hydra-example--postgres \\\n  -e POSTGRES_USER=hydra \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_DB=hydra \\\n  -d postgres:9.6\n```\n\n----------------------------------------\n\nTITLE: Defining a Go Model for OpenAPI Generation (Go)\nDESCRIPTION: Shows the standard structure for defining a Go struct intended to be an OpenAPI model using `go-swagger`. Includes package declaration, comments for title and description, and the `swagger:model` annotation followed by the struct definition. Model names should be camelCase.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_27\n\nLANGUAGE: go\nCODE:\n```\npackage some\n\n// Title\n//\n// A description with a trailing dot.\n//\n// swagger:model someSpecificModel\ntype SpecificModel struct {}\n```\n\n----------------------------------------\n\nTITLE: Basic command syntax for retrieving OAuth2 configuration\nDESCRIPTION: The basic syntax for the command to retrieve OAuth2 and OpenID Connect configuration. This command requires appropriate flags to specify project details and output format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-oauth2-config.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory get oauth2-config [flags]\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of ory create workspace Command\nDESCRIPTION: The basic syntax for creating a new Ory Network workspace using the CLI command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-workspace.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory create workspace [flags]\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Duplicate Account Identifier in Ory (JSON)\nDESCRIPTION: Shows when a signup or registration attempt is made with an identifier (email, phone, or username) that already exists. Static text; id is 4000007.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_30\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000007,\n  \"text\": \"An account with the same identifier (email, phone, username, ...) exists already.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Importing DocCardList Component in JavaScript\nDESCRIPTION: This snippet imports the DocCardList React component from the @theme package, enabling dynamic rendering of a list of documentation cards on the troubleshooting index page. It requires the React environment and appropriate build tooling for component imports.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/index.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport DocCardList from \"@theme/DocCardList\"\n```\n\n----------------------------------------\n\nTITLE: Listing Relation Tuples in Ory Permissions\nDESCRIPTION: Command to list all relation tuples in an Ory Permissions project, displaying the namespace, object, relation name, and subject for each tuple.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nory list relation-tuples --project <project-id> --workspace <workspace-id>\n# NAMESPACE\tOBJECT\tRELATION NAME\tSUBJECT\n# groups\t\tdevs\tmember\t\ttom\n#\n# NEXT PAGE TOKEN\n# IS LAST PAGE\ttrue\n```\n\n----------------------------------------\n\nTITLE: Extending Arrays via Environment Variables\nDESCRIPTION: This snippet demonstrates how to extend an array by setting a new array index via environment variables.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\nexport SOME_NESTED_KEY_AND_ARRAY_2_ID=baz\n```\n\n----------------------------------------\n\nTITLE: JSON structure for password form submission button\nDESCRIPTION: This JSON object represents a submit button element within a user settings form, used to trigger the save action for password updates. It includes attributes such as button name, type, value, and whether it is enabled. Metadata provides label information for UI rendering.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.policy.txt#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"method\",\n    \"type\": \"submit\",\n    \"value\": \"password\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070003,\n      \"text\": \"Save\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: One-Time Code Login Identifier via SMS\nDESCRIPTION: This JSON snippet configures Ory Identities to use an SMS-based one-time code for login, defining the `code` credential, with `identifier` set to true, and `via` set to 'sms'. This allows users to login using a one-time code sent via SMS.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"code\": {\n        \"identifier\": true,\n        \"via\": \"sms\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting an SSO Connection via Ory API - Bash (curl + JSON)\nDESCRIPTION: Removes an SSO OIDC connection from an Ory project's configuration using PATCH with a JSON PATCH 'remove' operation. The connection is referenced by its zero-based index in the providers list. Requires prior listing of SSO connections to determine the correct index, PROJECT_ID, WORKSPACE_API_KEY, and Content-Type header. The command pipes the result to jq to filter the relevant output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X PATCH --location \"https://api.console.ory.sh/projects/$PROJECT_ID\" \\\n     -H \"Authorization: Bearer $WORKSPACE_API_KEY\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '[\n           {\n             \"op\": \"remove\",\n             \"path\": \"/services/identity/config/selfservice/methods/oidc/config/providers/0\"\n           }\n         ]' \\\n   | jq \".project.services.identity.config.selfservice.methods.oidc.config.providers\"\n```\n\n----------------------------------------\n\nTITLE: Pagination handling with token-based mechanism in Go\nDESCRIPTION: Shows how to implement token pagination for listing resources, including parsing tokens from requests, generating pagination headers, and handling responses. Utilizes a 'TokenPaginator' for efficiency and HTTP header management, adhering to best practices in paginated API design.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_4\n\nLANGUAGE: Go\nCODE:\n```\n// Identity List Request\n//\n// swagger:parameters listIdentities\n// type listIdentitiesRequest struct {\n// \ttokenpagination.RequestParameters\n// \n// ...\n// }\n//\n// Identity List Response\n//\n// swagger:response listIdentitiesResponse\n// type listIdentitiesResponse struct {\n// \tTokenpagination.ResponseHeaderAnnotation\n// \n// ...\n// }\n//\n// swagger:route GET /admin/identities identities listIdentities\n//\n// ...\n//\n//\tResponses:\n//\t  200: listIdentitiesResponse\n//\n// func listIdentities(w http.ResponseWriter, r *http.Request) {\n// \t// Parse\n// \ttoken, itemsPerPage := paginator.ParsePagination(r)\n// \n// \t// List identities here ...\n// \n// \t// Write HTTP header\n// \tvar nextToken, approximateTotalCount int\n// \t tokenpagination.PaginationHeader(w, r.URL, approximateTotalCount, nextToken, itemsPerPage)\n// }\n```\n\n----------------------------------------\n\nTITLE: Enabling Handlers in Global Configuration (YAML)\nDESCRIPTION: This YAML snippet illustrates how to enable error handlers in the global Ory Oathkeeper configuration. The `errors.handlers` section lists available handlers (json, redirect) and their `enabled` status.  It also demonstrates how to configure specific settings like `when` conditions for each handler.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# .oathkeeper.yaml\nerrors:\n  handlers:\n    json:\n      enabled: true # this is true by default\n      # config:\n      #   when: ...\n    redirect:\n      enabled: true # this is false by default\n      # config:\n      #   when: ...\n```\n\n----------------------------------------\n\nTITLE: Social Sign-In Provider Configuration for Discord - YAML\nDESCRIPTION: This YAML snippet illustrates how to define Discord as an OIDC provider within the Ory identity service configuration. It references secrets for client ID and client secret, specifies the location of the data mapping (either as a Base64-encoded string or URL), and declares required OIDC scopes. This configuration must be merged into the broader Ory selfservice identity YAML before deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: discord # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: discord\n            client_id: .... # Replace this with the OAuth2 Client ID provided by Discord\n            client_secret: .... # Replace this with the OAuth2 Client Secret provided by Discord\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17f22ce7f4295c739604b183f05ac4afb4\n            scope:\n              - identify\n              - email\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: JWT Signing Key Selection in JSON Web Key Set\nDESCRIPTION: Explains that when multiple keys exist in a JWKS, the first listed key is selected for signing JWTs by Ory Network. This JSON5 example highlights the signing key among multiple keys in the set. Users should arrange their JWKS accordingly for key priority.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_9\n\nLANGUAGE: json5\nCODE:\n```\n{\n  set: \"example-key-set\",\n  keys: [\n    // highlight-start\n    // This key will be used for signing:\n    {\n      alg: \"ES256\",\n      // ...\n    },\n    // highlight-end\n    {\n      alg: \"ES256\",\n      // ...\n    },\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Updating GitHub Action Step for OAuth2/OIDC Config (GitHub Actions, Diff)\nDESCRIPTION: This diff shows the necessary modification to the GitHub Actions workflow `run` step to update the OAuth2/OpenID Connect configuration instead of the Identity configuration. It changes the command and the target configuration file to `oauth2-config.json`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\n-  ory update identity-config --file identity-config.json\n+  ory update oauth2-config --file oauth2-config.json\n```\n\n----------------------------------------\n\nTITLE: Extracting JWK Use Property with jq (Ory CLI)\nDESCRIPTION: This snippet demonstrates how to retrieve a JSON Web Key Set using `ory get jwk` and pipe the output to `jq` to filter and extract the 'use' property of each key within the set identified by `<set-id>`. This requires `jq` to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-jwk.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nory get jwk <set-id> | jq -r '.[].use'\n```\n\n----------------------------------------\n\nTITLE: Getting Kubernetes Ingress IP Addresses\nDESCRIPTION: Shell command to retrieve IP addresses for Ingress controllers in Kubernetes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nkubectl get ing\nNAME                   HOSTS                    ADDRESS        PORTS   AGE\nhydra-example-idp      example-idp.localhost    192.168.64.3   80      3m47s\nhydra-example-public   public.hydra.localhost   192.168.64.3   80      35s\nhydra-example-admin    admin.hydra.localhost    192.168.64.3   80      35s\n```\n\n----------------------------------------\n\nTITLE: Using 'anonymous' Authenticator in Ory Oathkeeper Access Rule Example\nDESCRIPTION: This example provides an Ory Oathkeeper Access Rule definition using the 'anonymous' authenticator. It includes shell commands demonstrating how this rule behaves with and without an `Authorization` header, showing that it allows requests without credentials but rejects those with them.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"anonymous\"\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 200 Status OK\nThe request has been allowed! The subject is: \"anonymous\"\n\ncurl -X GET -H \"Authorization: Bearer foobar\" http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because credentials have been provided but only the anonymous\nauthenticator is enabled for this URL.\n```\n\n----------------------------------------\n\nTITLE: Noop Mutator Example: Access Rule with JSON and Shell\nDESCRIPTION: This example shows how to apply the `noop` mutator. First, it provides a sample JSON file (`rules.json`) that defines an access rule utilizing the `noop` mutator to protect a certain API endpoint. Second, it provides a `curl` command that sends a `GET` request to trigger the rule. The output shows the request is allowed, without any modification to the headers. The `noop` mutator doesn't alter the request before it gets to the backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/users/<[0-9]+>/<[a-zA-Z]+>\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 200 Status OK\nThe request has been allowed! The original HTTP Request hasn't been modified.\n```\n\n----------------------------------------\n\nTITLE: Generating RSA Key Pair for JSON Web Key in HSM Using pkcs11-tool in Shell\nDESCRIPTION: This shell command generates a 4096-bit RSA key pair inside the HSM token using pkcs11-tool. It specifies the module path, user PIN, token label, key usage (signing), key label, and ID attributes. These parameters map to key metadata used by Ory Hydra for JWT signing. The generated key is used for signing ID tokens in JSON Web Key Sets, and its CKA_LABEL and CKA_ID attributes correspond to key identification and usage.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\npkcs11-tool --module /usr/lib/softhsm/libsofthsm2.so \\\n--pin 1234 --token-label hydra \\\n--keypairgen --key-type rsa:4096 --usage-sign \\\n--label hydra.openid.id-token --id 746573742d6b65792d6964\n\nKey pair generated:\nPrivate Key Object; RSA\n  label:      hydra.openid.id-token\n  ID:         746573742d6b65792d6964\n  Usage:      sign\nPublic Key Object; RSA 4096 bits\n  label:      hydra.openid.id-token\n  ID:         746573742d6b65792d6964\n  Usage:      verify\n```\n\n----------------------------------------\n\nTITLE: Ory Patch Command Options\nDESCRIPTION: This snippet defines the options available for the `ory patch` command in the Ory CLI.  It includes options for specifying the configuration file path and displaying help information. The `-c` or `--config` flag specifies the path to the Ory Network configuration file, while `-h` or `--help` displays the help text.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch.md#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -h, --help            help for patch\n```\n\n----------------------------------------\n\nTITLE: Defining BatchCheckResponse in Protocol Buffers\nDESCRIPTION: Specifies the response structure for the batch check operation. It comprises an array of `CheckResponseWithError` objects. The ordering of results in the response matches that of the input in the request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_1\n\nLANGUAGE: proto\nCODE:\n```\n### BatchCheckResponse\n\nThe response for a CheckService.BatchCheck rpc.\n\n| Field   | Type                                                                                | Label    | Description                                                                                       |\n| ------- | ----------------------------------------------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------- |\n| results | [CheckResponseWithError](#ory-keto-relation_tuples-v1alpha2-CheckResponseWithError) | repeated | The results of the batch check. The order of these<br/>results will match the order of the input. |\n```\n\n----------------------------------------\n\nTITLE: Deleting a Kratos Identity by Recovery Email (Example)\nDESCRIPTION: Example demonstrating how to delete a Kratos identity by filtering based on a recovery email address. It uses `kratos list identities` with JSON output, pipes it to `jq` to extract the ID based on the email, and then passes the ID to `kratos delete identity`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-delete-identity.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nkratos delete identity $(kratos list identities --format json | jq -r 'map(select(.recovery_addresses[].value == \"foo@bar.com\")) | .[].id')\n```\n\n----------------------------------------\n\nTITLE: Importing and Using DocCardList and useCurrentSidebarCategory in MDX\nDESCRIPTION: This code snippet demonstrates importing the 'DocCardList' React component and 'useCurrentSidebarCategory' hook from Docusaurus theme packages, then rendering a list of documentation items based on the current sidebar category. It relies on React and Docusaurus hooks for dynamic content display.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/operations.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport DocCardList from '@theme/DocCardList';\nimport {useCurrentSidebarCategory} from '@docusaurus/theme-common';\n\n<DocCardList items={useCurrentSidebarCategory().items}/>\n```\n\n----------------------------------------\n\nTITLE: Ory Create Organization Command Usage\nDESCRIPTION: This snippet shows the basic usage of the `ory create organization` command.  It requires a label for the organization and optionally allows specifying a project ID and domains.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-organization.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\nory create organization <label> [--project=PROJECT_ID] [--domains=a.example.com,b.example.com] [flags]\n```\n\n----------------------------------------\n\nTITLE: Nginx Configuration for Proxying and Error Handling for Kratos UI\nDESCRIPTION: This snippet provides Nginx configuration directives to set up reverse proxy for the Kratos UI at `/auth`, including URL rewriting, proxy headers, and handling 401 Unauthorized errors by redirecting to the login page. It ensures Nginx forwards requests correctly to the backend server and redirects unauthorized access attempts properly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_37\n\nLANGUAGE: Nginx\nCODE:\n```\nupstream ui_node {\n  server 127.0.0.1:3000;\n}\n...\nlocation /auth {\n  rewrite /auth/(.*) /$1 break;\n  proxy_pass http://ui_node;\n  proxy_redirect off;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n}\n...\nerror_page 401 = @error401;\n\n# Catch if 401/unauthorized and redirect for login\nlocation @error401 {\n  return 302 https://accounts.example.com/auth/login;\n}\n```\n\n----------------------------------------\n\nTITLE: JWT Authenticator Configuration Example in JSON\nDESCRIPTION: Provides a JSON structure snippet showing how the configuration for the `jwt` authenticator handler appears within an access rule defined in JSON format. It includes required scopes, target audiences, trusted issuers, and allowed algorithms.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_29\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"handler\": \"jwt\",\n  \"config\": {\n    \"required_scope\": [\"scope-a\", \"scope-b\"],\n    \"target_audience\": [\"https://my-service.com/api/users\", \"https://my-service.com/api/devices\"],\n    \"trusted_issuers\": [\"https://my-issuer.com/\"],\n    \"allowed_algorithms\": [\"RS256\", \"RS256\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Syntax for ory delete jwk Command\nDESCRIPTION: The basic syntax for using the ory delete jwk command. This command requires at least one set ID and can accept multiple set IDs as parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-jwk.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory delete jwk <id-1> [<id-2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Options for ORY Oathkeeper rules CLI\nDESCRIPTION: This section lists the command-specific options for `oathkeeper rules`. It includes flags like `--endpoint` to specify the Oathkeeper management API URL and `--help` for command usage information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules.md#_snippet_1\n\nLANGUAGE: CLI\nCODE:\n```\n-e, --endpoint string   The endpoint URL of ORY Oathkeeper's management API\n  -h, --help              help for rules\n```\n\n----------------------------------------\n\nTITLE: React.js Code for Rendering Text Nodes\nDESCRIPTION: Reference to a React.js component implementation for rendering complex text nodes with conditional message ID handling. It demonstrates how to incorporate dynamic message display logic within React applications, sourced from an external GitHub link.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nhttps://github.com/ory/kratos-react-nextjs-ui/blob/master/pkg/ui/NodeText.tsx\n```\n\n----------------------------------------\n\nTITLE: Displaying Login and Link Credential Option in Ory (JSON)\nDESCRIPTION: Represents a label for 'Login and link credential', used in flows where a user can connect credentials after authenticating. No dynamic content; message id is 1070014.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070014,\n  \"text\": \"Login and link credential\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Providing Identity Data Inline Using Here-Doc - Bash\nDESCRIPTION: This snippet shows how to use a shell here-document to create a JSON file describing an identity and then import it to Ory Kratos. The file includes schema_id and traits with an example email address. It demonstrates creating a file with cat and then passing it to the Kratos CLI import command. The process requires access to both cat and the Kratos CLI, as well as a valid JSON schema as expected by Kratos.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-import.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncat > ./file.json <<EOF\n{\n    \"schema_id\": \"default\",\n    \"traits\": {\n        \"email\": \"foo@example.com\"\n    }\n}\nEOF\n```\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities import file.json\n```\n\nLANGUAGE: bash\nCODE:\n```\ncat file.json | kratos identities import\n```\n\n----------------------------------------\n\nTITLE: Browser Login Flow Initialization - Shell\nDESCRIPTION: This shell script initializes the login flow for a browser-based client. It uses `curl` to fetch the login flow from the API endpoint, retrieves the action URL and CSRF token, and then performs the login using the provided credentials.  It uses a cookie jar to simulate a browser's session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n# We use this cookie jar to initiate the settings flow in the next step!\ncookieJar=$(mktemp)\n\n# Initialize the flow\nflow=$( \\\n    curl -s -H \"Accept: application/json\"  --cookie $cookieJar --cookie-jar $cookieJar \\\n      'https://playground.projects.oryapis.com/self-service/login/browser' \\\n  )\n\n# Get the action URL\nactionUrl=$(echo $flow | jq -r '.ui.action')\n\n# Get the CSRF Token\ncsrfToken=$(echo $flow | jq -r '.ui.nodes[] | select(.attributes.name==\"csrf_token\") | .attributes.value')\n\n# Complete the login (with the user we created before)\nsession=$( \\\n  curl -s --cookie $cookieJar --cookie-jar $cookieJar -X POST \\\n    -H \"Accept: application/json\" -H \"Content-Type: application/json\" \\\n    --data '{ \"identifier\": \"'$username'\", \"password\": \"'$password'\", \"method\": \"password\", \"csrf_token\": \"'$csrfToken'\" }' \\\n    \"$actionUrl\" \\\n)\n\necho $session | jq\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Access Token Payload Structure (JSON)\nDESCRIPTION: This JSON snippet shows the typical payload structure for an OAuth2 access token, often encoded as a JSON Web Token (JWT). Unlike the ID token, it does not contain extensive user identification details. Instead, it focuses on claims like issuer (`iss`), subject (`sub`), audience (`aud`), expiration time (`exp`), issued at time (`iat`), and crucially, the `scope` which defines the permissions granted to the client for accessing protected resources on behalf of the user. This token is intended for use by resource servers (APIs) to authorize access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/overview/oidc-concepts.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"iss\": \"https://my-domain.projects.oryapis.com\",\n  \"sub\": \"some-identity-id\",\n  \"aud\": \"some-client-id\",\n  \"exp\": 1311281970,\n  \"iat\": 1311280970,\n  \"scope\": \"blog_posts photos\"\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Ory Settings Flows API and Filtering Password Fields (Bash)\nDESCRIPTION: This Bash snippet sends a GET request to the Ory Self-Service Settings API endpoint using curl, authenticating with a Bearer token, and specifying a JSON response. The output is piped through jq to filter and display only `.ui.nodes` from the response where the node group is 'password'. Dependencies: curl and jq must be installed, and a valid sessionToken environment variable must be set. Input: sessionToken for API authentication; Output: filtered JSON objects for password field nodes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.missing.txt#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Authorization: Bearer $sessionToken\"  \\\n    -H \"Accept: application/json\"  \\\n    'https://playground.projects.oryapis.com/self-service/settings/flows?id=f71743cd-700d-4a30-9275-8edc90de07cc' | \\\n      jq -r '.ui.nodes[] | select(.group==\"password\")'\n```\n\n----------------------------------------\n\nTITLE: Defining Message Object with Context\nDESCRIPTION: This JSON snippet represents a message object with an ID, text, type, and context. The `id` is a unique identifier, `text` is the message content, and `type` indicates the message category (e.g., info, success). The object may contain a `context` object, which holds variables to be inserted into the message text during runtime.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_1\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": 1010002,\n  \"text\": \"Sign in with {provider}\",\n  \"type\": \"info\",\n  \"context\": {\n    \"provider\": \"{provider}\",\n    \"provider_id\": \"{providerID}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Browser Login Flow using cURL\nDESCRIPTION: This cURL command initializes the login flow for server-side browser clients.  It sends an HTTP GET request to the `/self-service/login/browser` endpoint and expects a 303 redirect to the login UI. The response includes a `location` header with the flow ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncurl -s -i -X GET \\\n    -H \"Accept: text/html\" \\\n    https://playground.projects.oryapis.com/self-service/login/browser\n```\n\n----------------------------------------\n\nTITLE: Revoking a Specific User Session in React (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK within a React component to revoke a specific session (identified by its ID) belonging to the authenticated user via the self-service frontend API. Cannot revoke the current session. Requires the Ory Session Cookie and proper CORS configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport revokeSessionReact from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/revoke-session-react.tsx\"\n\n<CodeBlock language=\"ts\" title=\"revoke-session-react.tsx\">{revokeSessionReact}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Conditional Internationalized Email Body Template in Go Templates\nDESCRIPTION: This Go template dynamically selects the email body based on the user's language preference, stored in `Identity.traits.language`. It checks if the language is German ('de') and includes the corresponding sub-template; otherwise, it defaults to English. It also embeds the recovery code. Dependencies include the user identity data with traits and sub-templates for each language. The template enables multi-language email support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/02_mail-courier-templates.mdx#_snippet_2\n\nLANGUAGE: TXT\nCODE:\n```\n{{- if eq .Identity.traits.language \"de\" -}}\n{{ template \"email.body.de.gotmpl\" . }}\n{{- else -}}\n{{ template \"email.body.en.gotmpl\" . }}\n{{- end -}}\n\n{{ .RecoveryCode }}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of `keto namespace validate`\nDESCRIPTION: Demonstrates the basic syntax for validating Keto namespace definitions. Users can provide one or more namespace YAML files directly or specify a configuration file using the `-c` flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-validate.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo namespace validate <namespace.yml> [<namespace2.yml> ...] | validate -c <config.yaml> [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Mock SMS Courier Channel using Ory CLI\nDESCRIPTION: This shell command configures a mock SMS courier channel in Ory using the CLI. It patches the identity configuration to add an SMS channel pointing to a webhook URL, useful for testing SMS delivery without a live provider. The body is base64 encoded.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/06_code.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project ${project_id} \\\n  --add '/courier/channels=[{\"id\":\"sms\",\"request_config\":{\"method\":\"PUT\",\"body\":\"base64://ZnVuY3Rpb24oY3R4KSB7DQpjdHg6IGN0eCwNCn0=\",\"url\":\"https://webhook.site/#!/view/859c1c2c-c4d5-4058-aec4-53f37929c5c1\"}}]'\n```\n\n----------------------------------------\n\nTITLE: Defining Authentication Session and Match Context Structs - Go\nDESCRIPTION: Defines the `AuthenticationSession` and `MatchContext` Go structs used by ORY Oathkeeper. These structs represent the data available within templates (often used with `text/template`), providing information such as the subject, extra data, headers, and crucial match context details like regular expression capture groups and the matched URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_8\n\nLANGUAGE: Go\nCODE:\n```\ntype AuthenticationSession struct {\n  Subject      string\n  Extra        map[string]interface{}\n  Header       http.Header\n  MatchContext MatchContext\n}\n\ntype MatchContext struct {\n  RegexpCaptureGroups []string\n  URL                 *url.URL\n}\n```\n\n----------------------------------------\n\nTITLE: Setting VKontakte redirect URI\nDESCRIPTION: This shell command shows the redirect URI that needs to be set in the VK OAuth2 Application settings. The `$PROJECT_SLUG` variable needs to be replaced with the actual project slug.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/vk\n```\n\n----------------------------------------\n\nTITLE: HMAC Password Hash Format - plaintext\nDESCRIPTION: Displays the format for HMAC password hashes, showing hash_function, base64-encoded hash, and the key for use in Ory Identities. The code exhibits variations for md5, sha256, and sha512 hash functions. Inputs consist of the hash, key, and hash function name, output as a formatted string.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_13\n\nLANGUAGE: plaintext\nCODE:\n```\n$hmac-<hash_function>$<hash>$<key>\n$hmac-md5$ZmU4Njk3Zjc0MmQwODA0MDVkMTI3MGU2MTYzMzE2Zjk=$MTIzNDU=\n$hmac-sha256$ZTAzMWJhMWMyOTM4YjFkMjgzZjkxOWExZGY5YWM2NmMxOTJhN2RkNzQ0MzJkNWZkNGFkYTI5OTk0MWJhMTA5Zg==$MTIzNDU=\n$hmac-sha512$OTFmODY0ZTI1NmU0ZjVhYjhiMDViZGFmNGVmNGZmMGVlNTY4ODYwNWJhYTk4MTk2OTgyMzc3NzI1YTc4MzcxMTMzNzZmY2YxYTk5MGMxM2RiZDk2MGFmMmQ1YzRmODdlMGMwYTNkYjcyNjY0NjM4NGE4YzQ2MjNhZDZkN2UxZTE=$MTIzNDU=\n```\n\n----------------------------------------\n\nTITLE: Ory Patch OPL Synopsis\nDESCRIPTION: Shows the basic usage syntax for the `ory patch opl` command. This command is used to update the Ory Permission Language file in Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-opl.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory patch opl [flags]\n```\n\n----------------------------------------\n\nTITLE: Importing UI Components for Tab Navigation\nDESCRIPTION: Imports `Tabs` and `TabItem` components from the theme package to create tabbed sections in documentation for different setup methods (Console and CLI).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/20_webauthn-fido-yubikey.mdx#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n```\n\n----------------------------------------\n\nTITLE: Dynamic Title Message for Ory Forms (JSON)\nDESCRIPTION: Defines a reusable, parameterized info message for displaying dynamic titles in the Ory UI. Uses {title} as a placeholder to be replaced at runtime and expects a title value via the context object. Required for custom or localizable form titles; message id is 1070002.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070002,\n  \"text\": \"{title}\",\n  \"type\": \"info\",\n  \"context\": {\n    \"title\": \"{title}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Performing Token Introspection for Client Credentials Grant in Shell\nDESCRIPTION: Exports the access token obtained from the Client Credentials Grant flow into a shell variable, then performs token introspection using the Ory CLI to retrieve detailed information about the token's validity and claims within the specified project context.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n# Export 'access_token'\naccess_token=\"{set to ACCESS TOKEN from output}\"\n\n# Perform token introspection\nory introspect token $access_token --project \"$PROJECT_ID\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Recovery Page with Ory Elements in Next.js (TypeScript)\nDESCRIPTION: This Next.js page sets up account recovery using Ory Elements, facilitating recovery flows for users who have lost password or access to second factors. It uses Next.js, TypeScript, and Ory Elements, and requires contact information or user identifiers, updating the UI with status or next steps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"pages/recovery.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/nextjs-spa/src/pages/recovery.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring email for verification\nDESCRIPTION: This JSON snippet configures the `email` field for verification using the `ory.sh/kratos` extension.  The `via` parameter is set to 'email' under `recovery`, signifying that users should be able to verify their email address via a verification link or code sent to the provided email address.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"recovery\": {\n      \"via\": \"email\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identity Configuration - Shell\nDESCRIPTION: These shell commands interact with the Ory CLI to list available workspaces and projects, and download an identity configuration file in YAML format. This configuration serves as the basis for further manual editing to add Discord as a social identity provider. The Ory CLI must be installed and authenticated for these commands to work.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Updating Permissions Configuration (Ory CLI, Bash)\nDESCRIPTION: Command to apply a local `permission-config.json` file to update the Permissions configuration for the currently configured Ory Network project/workspace. This command would replace the identity or oauth2 update command in the GitHub Actions workflow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nory update permission-config --file permission-config.json\n```\n\n----------------------------------------\n\nTITLE: Displaying Login Code Label in Ory Interface (JSON)\nDESCRIPTION: This snippet is a static label for 'Login code', used during code-based authentication. Requires no additional logic; message id is 1070013.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_18\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070013,\n  \"text\": \"Login code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Identity from a File (Shell)\nDESCRIPTION: This command demonstrates how to import identity data from a specific JSON file named `file.json` using the `kratos import identities` command. The command reads the content of the specified file, which should contain one or an array of identity objects, and imports them into Kratos.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import-identities.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nkratos import identities file.json\n```\n\n----------------------------------------\n\nTITLE: Dockerfile import\nDESCRIPTION: This code snippet imports the Dockerfile content.  It utilizes a raw-loader to include the content, which details the steps for building the Docker image for the WebSocket service, including base image, dependencies, and entry point.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_12\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport dockerfile from '!!raw-loader!../../../code-examples/oathkeeper/ws/Dockerfile'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identities Configuration Using the Ory CLI (Shell)\nDESCRIPTION: This shell sequence fetches workspace/project details and downloads the current identity config from Ory into a YAML file, prerequisites for manual editing and provider insertion. It uses multiple CLI commands: `ory list workspaces`, `ory list projects --workspace`, and `ory get identity-config` with respective project and workspace IDs. Required inputs are valid workspace/project identifiers and CLI authentication. Outputs the YAML config to a local file. Ensure the environment is authenticated to Ory and have valid access rights.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Options for Hydra delete jwks command\nDESCRIPTION: This snippet lists the optional parameters that modify the command's behavior, including help, API endpoint URL, output format, additional HTTP headers, quiet mode, and TLS verification. These options enable customization and control over the command execution.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwks.md#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\n  -h, --help   help for jwks\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, and json-pretty. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Courier Configuration Options\nDESCRIPTION: Defines the global flags available for the `kratos courier` command. Specifically, it shows how to specify configuration files using the `-c` or `--config` flag, which accepts multiple file paths. Later files overwrite values from earlier ones. It also includes the standard help flag `-h` or `--help`. There are no dependencies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-courier.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n  -h, --help             help for courier\n```\n\n----------------------------------------\n\nTITLE: Creating a New Project within a Workspace Using Ory CLI in Shell\nDESCRIPTION: Demonstrates the command to create a new project inside an existing workspace by specifying the workspace ID. An example response is included showing the project ID, name, environment, workspace relation, slug, and running state.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"My New Project\" --workspace $ORY_WORKSPACE\n```\n\nLANGUAGE: bash\nCODE:\n```\n# Example response\n\nProject created successfully!\nID\t\tb7d8a15d-a783-40e6-40df-7acd60cb2b64\nNAME\t\tMy New Project\nENVIRONMENT\tdev\nWORKSPACE\t885a2468-c23d-40df-a783-c941387a8701\nSLUG\t\tpeaceful-something-4iuafwx2vk\nSTATE\t\trunning\n```\n\n----------------------------------------\n\nTITLE: Importing OAuth2 and OpenID Configuration into Ory Network\nDESCRIPTION: This command updates the OAuth2 configuration in the Ory Network by importing details from a local 'config.yaml' file. It requires specifying the project and workspace IDs to correctly associate the configuration changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nory update oauth2-config --project <project-id> --workspace <workspace-id> --file config.yaml\n```\n\n----------------------------------------\n\nTITLE: Using the 'ory use' Command Options in Bash\nDESCRIPTION: This snippet shows the available options for the 'ory use' command in the Ory CLI. Options include specifying a configuration file, output format, help, quiet mode, and automatic confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-use.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for use\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Internal OAuth2 Client Credentials Request Example (ORY Oathkeeper) - Bash\nDESCRIPTION: This bash snippet illustrates the typical HTTP POST request that Oathkeeper internally sends to the configured OAuth 2.0 Token Endpoint when using the `oauth2_client_credentials` authenticator. It shows the request method, host, and the standard form parameters (`grant_type`, `client_id`, `client_secret`, `scope`) used in the client credentials grant flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_21\n\nLANGUAGE: bash\nCODE:\n```\nPOST /oauth2/token HTTP/1.1\nHost: authorization-server.com\n\ngrant_type=client_credentials\n&client_id=peter\n&client_secret=somesecret\n&scope=scope-a+scope-b\n```\n\n----------------------------------------\n\nTITLE: Creating JWKS: hydra create jwks command\nDESCRIPTION: The `hydra create jwks` command is used to create a JSON Web Key Set (JWKS) with a JSON Web Key. This command takes the set-id and optionally a key-id as arguments. It also supports flags for specifying the algorithm and intended use of the key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-jwks.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra create jwks set-id [key-id] [flags]\n```\n\n----------------------------------------\n\nTITLE: Available Command-specific Options\nDESCRIPTION: Options specific to the oauth2-client command, showing only the help flag in this case.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-oauth2-client.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for oauth2-client\n```\n\n----------------------------------------\n\nTITLE: Examples of 'hydra import jwk' Usage in GO Command Line\nDESCRIPTION: Provides practical examples demonstrating how to import keys into a specific set, specifying files and optional flags such as format and usage.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_2\n\nLANGUAGE: Markdown\nCODE:\n```\nhydra import jwk my-set ./path/to/jwk.json ./path/to/jwk-2.json --format json\nhydra import jwk my-set ./path/to/rsa.key ./path/to/rsa.pub --use enc\n```\n\n----------------------------------------\n\nTITLE: Version Service Definition (Proto)\nDESCRIPTION: Describes the VersionService, which provides a method to retrieve the version of the Ory Keto instance.  This service retrieves version information, it is designed for getting the version of the service. It does not have external dependencies. The primary input is a call to the GetVersion method and no arguments. The output is a string representing the version. There are no known limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_8\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### VersionService\n\nThe service to get the version of the running instance.\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session in Express.js Middleware (TypeScript)\nDESCRIPTION: This snippet shows an MDX code block that imports and displays an Express.js middleware written in TypeScript. The middleware uses the Ory SDK to call the `/sessions/whoami` endpoint to check the current session status server-side.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_65\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport whoamiExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/selfservice/session/whoami-express.ts'\n\n<CodeBlock language=\"ts\" title=\"middleware.ts\">{whoamiExpress}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Viewing Help for `kratos lint lint` (Shell)\nDESCRIPTION: Displays the available command-line options (`-h` or `--help`) to get help information and usage details for the `kratos lint lint` command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-lint-lint.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n-h, --help   help for lint\n```\n\n----------------------------------------\n\nTITLE: Using curl to Initialize Self-Service Login Flow with Return-To URL Query Parameter in JavaScript\nDESCRIPTION: This snippet demonstrates how to start a browser-based self-service login flow by issuing a GET request using curl with the return_to query parameter set. The return_to parameter specifies a URL the user should be redirected back to after login. This example shows the query parameter usage for dynamic redirect setting in Node.js or other server side environments compatible with JavaScript. No additional dependencies beyond curl are required. The input is the target URL with the return_to parameter, and the expected output is a login flow initiation and eventual redirect to the return_to URL upon successful authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/redirects.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\ncurl -X GET 'http://<your-project>.projects.oryapis.com/self-service/login/browser?return_to=...'\n```\n\n----------------------------------------\n\nTITLE: Mapping UI Payload Nodes to HTML Form Elements\nDESCRIPTION: This HTML snippet demonstrates how the JSON UI payload is rendered directly as form elements in an HTML form. It contains form attributes method and action derived from the JSON data. Each UI node is represented by a corresponding HTML input element, such as hidden inputs for CSRF tokens and email input fields. Labels correspond to metadata from nodes. This example emphasizes the straightforward transformation between JSON UI nodes and HTML form markup for user interactions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<form\n  method=\"POST\"\n  action=\"https://playground.projects.oryapis.com/self-service/settings?flow=9b527900-2199-4221-9252-7971b3362282\"\n>\n  <!-- this is the first node -->\n  <input\n    type=\"hidden\"\n    name=\"csrf_token\"\n    value=\"U3r/lgEfT8rA1Lg0Eeo06oGO8mX6T4TKoe/z7rbInhvYeacbRg0IW9zrqnpU1wmQJXKiekNzdLnypx5naHXoPg==\"\n    required\n  />\n\n  <!-- this is the second node -->\n  <input type=\"email\" name=\"traits.email\" value=\"foo@ory.sh\" />\n  <label for=\"traits.email\">E-Mail</label>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating a JSON Web Key Set with Ory CLI - Shell\nDESCRIPTION: This shell command snippet demonstrates how to use the Ory CLI to create a JSON Web Key Set (JWKS) with a JSON Web Key. The command accepts a set ID and optional key ID, with additional flags to specify algorithm (e.g., RS256), usage (e.g., sig), output format, and other parameters. Required dependencies include the Ory CLI installed and access to an Ory project or workspace. Inputs include the set identifier and optional flags; outputs are the generated JWKS in the chosen format. Command supports various output and configuration options but requires correct permissions and a reachable Ory Kratos Admin API endpoint.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-jwk.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create jwk <set-id> [<key-id>] [flags]\n```\n\n----------------------------------------\n\nTITLE: Creating and Checking Permissions with Ory Permissions Go SDK\nDESCRIPTION: Complete example demonstrating how to create a relationship and check permissions using the Ory Permissions Go SDK. The example creates a 'view' permission for user 'Bob' on a 'secret_post' object in the 'Blog' namespace.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/05_go.mdx#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"os\"\n\n\tory \"github.com/ory/client-go\"\n)\n\n// Use this context to access Ory APIs which require an Ory API Key.\nvar oryAuthedContext = context.WithValue(context.Background(), ory.ContextAccessToken, os.Getenv(\"ORY_API_KEY\"))\nvar namespace = \"Blog\"\nvar object = \"secret_post\"\nvar relation = \"view\"\nvar subjectId = \"Bob\"\n\nfunc main() {\n\tpayload := ory.CreateRelationshipBody{\n\t\tNamespace: &namespace,\n\t\tObject:    &object,\n\t\tRelation:  &relation,\n\t\tSubjectId: &subjectId,\n\t}\n\tconfiguration := ory.NewConfiguration()\n\tconfiguration.Servers = []ory.ServerConfiguration{\n\t\t{\n\t\t\tURL: \"https://practical-swirles-whg26u2ofh.projects.oryapis.com\", // Write API\n\t\t},\n\t}\n\tory := ory.NewAPIClient(configuration)\n\t_, r, err := ory.RelationshipApi.CreateRelationship(oryAuthedContext).CreateRelationshipBody(payload).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t\tpanic(\"Encountered error: \" + err.Error())\n\t}\n\tfmt.Println(\"Successfully created tuple\")\n\tcheck, r, err := ory.PermissionApi.CheckPermission(oryAuthedContext).\n\t\tNamespace(*&namespace).\n\t\tObject(*&object).\n\t\tRelation(*&relation).\n\t\tSubjectId(*&subjectId).Execute()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Full HTTP response: %v\\n\", r)\n\t\tpanic(\"Encountered error: \" + err.Error())\n\t}\n\tif check.Allowed {\n\t\tfmt.Println(*&subjectId + \" can \" + *&relation + \" the \" + *&object)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Getting and Updating Identity Configuration via Ory CLI (Shell)\nDESCRIPTION: These shell command snippets show how to use the Ory CLI to list workspaces and projects, obtain the current identity configuration in YAML format for a specific project/workspace, and update the configuration after editing. Dependencies: Requires Ory CLI installed and authenticated with sufficient permissions. Parameters include <workspace-id>, <project-id>, and local file paths. The expected input is a valid workspace and project ID, with output being the configuration YAML written to and read from disk. Ensure the YAML file is correctly formatted before applying updates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/05_step-up-authentication.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory list workspaces\n\n```\n\nLANGUAGE: shell\nCODE:\n```\nory list projects --workspace <workspace-id>\n\n```\n\nLANGUAGE: shell\nCODE:\n```\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n\n```\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n\n```\n\n----------------------------------------\n\nTITLE: OIDC Provider Configuration - YAML\nDESCRIPTION: This YAML snippet shows an example configuration for an OIDC (OpenID Connect) provider in Ory Kratos. It includes settings for the provider ID, client ID, client secret, issuer URL, and mapper URL (which points to a Jsonnet snippet for claim mapping, either as a Base64 encoded string or a URL).  The snippet also configures the scopes requested from the OIDC provider.  The provider `id` should not be changed after its initial configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/oidc.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    oidc:\n      config:\n        providers:\n          - id: generic # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!\n            provider: generic\n            client_id: ....\n            client_secret: ....\n            issuer_url: https://accounts.google.com # Replace this with the providers issuer URL\n            mapper_url: \"base64://{YOUR_BASE64_ENCODED_JSONNET_HERE}\"\n            # Alternatively, use an URL:\n            # mapper_url: https://storage.googleapis.com/abc-cde-prd/9cac9717f007808bf17\n            scope:\n              - email\n            # supported scopes can be found in your providers dev docs\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Defining Access Control Rules for Ory Oathkeeper Decision API Using JSON\nDESCRIPTION: This JSON snippet defines an access control rule tailored for Ory Oathkeeper's Access Control Decision API. It includes matching parameters such as URL and allowed HTTP methods, along with authenticators, authorizer, and mutators. The configuration uses a 'noop' authenticator and mutator with an 'allow' authorizer to permit requests without modification. This rule influences the decision API response, directly indicating whether to authorize or deny incoming requests based on defined conditions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/index.md#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"match\": {\n    \"url\": \"http://oathkeeper-api:4456/my-service/whatever\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Session with cURL (Browser Flow - Shell/JSON)\nDESCRIPTION: Provides MDX code blocks that import and display a cURL command (Shell) and its expected JSON response for checking an Ory session within a browser-based authentication flow. This typically relies on cookies managed by the browser.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_69\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport whoamiCurlBrowser from '!!raw-loader!../../../code-examples/curl/session/check-session-browser.sh'\nimport whoamiCurlBrowserJson from '../../../code-examples/curl/session/check-session-browser.json'\n\n<CodeBlock language=\"shell\" title=\"check-session-browser.sh\">{whoamiCurlBrowser}</CodeBlock>\n<CodeBlock language=\"json5\" title=\"check-session-browser.json\">{JSON.stringify(whoamiCurlBrowserJson, null, 2)}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Bulk Import Error Response\nDESCRIPTION: This JSON response demonstrates how errors are handled during bulk imports. Each entry in the response array indicates whether the corresponding identity was created or resulted in an error. It includes the `patch_id` and details about the error.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_23\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identities\": [\n    {\n      \"action\": \"create\",\n      \"identity\": \"0d0ed560-43ce-42a9-bd40-aafe921c3af1\",\n      \"patch_id\": \"6086b0a8-d851-5431-91b4-b6e5e39dc88b\"\n    },\n    {\n      // highlight-start\n      \"action\": \"error\",\n      \"patch_id\": \"d554dc00-49ce-5381-9bdc-79637dec85a2\",\n      \"error\": {\n        \"code\": 400,\n        \"status\": \"Bad Request\",\n        \"reason\": \"The request was malformed or contained invalid parameters\",\n        \"message\": \"The request was malformed or contained invalid parameters\"\n      }\n      // highlight-end\n    },\n    {\n      // highlight-start\n      \"action\": \"error\",\n      \"patch_id\": \"1634f1e9-8419-5a54-8191-2260c8aaea31\",\n      \"error\": {\n        \"code\": 409,\n        \"status\": \"Conflict\",\n        \"reason\": \"This identity conflicts with another identity that already exists.\",\n        \"message\": \"The resource could not be created due to a conflict\"\n      }\n      // highlight-end\n    },\n    {\n      \"action\": \"create\",\n      \"identity\": \"b8651770-be8d-460b-b86f-679c4ba50264\",\n      \"patch_id\": \"eade6651-9311-5624-8afd-e4a3e05e0c4a\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of `ory revoke token` Command (Shell)\nDESCRIPTION: Demonstrates the fundamental syntax for the `ory revoke token` command. It requires the specific token string to be revoked as the primary argument, followed by any necessary flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-revoke-token.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory revoke token the-token [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Argon2id Hashing in YAML\nDESCRIPTION: This YAML snippet configures the Argon2id hashing algorithm, which can be an alternative to BCrypt. Several parameters control the Argon2id hash function, including 'parallelism', 'memory', 'iterations', 'salt_length', and 'key_length'. This configuration is within the 'argon2' sub-section of the 'hashers' section. It is important to determine the correct values for these parameters based on security and performance considerations. The example configures all parameters for Argon2id hashing algorithm.  The output will be that Argon2id is used for hashing passwords.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/password.mdx#_snippet_3\n\nLANGUAGE: YAML\nCODE:\n```\n```yaml title=\"config.yml\"\nhashers:\n  argon2:\n    parallelism: 1\n    memory: 128MB\n    iterations: 3\n    salt_length: 16\n    key_length: 32\n```\n```\n\n----------------------------------------\n\nTITLE: Checking Running Hydra Processes\nDESCRIPTION: This command uses `ps` and `grep` to list all running processes and filter for those containing \"hydra\". It is used to verify that the Ory Hydra process is running and to identify its process ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_20\n\nLANGUAGE: bash\nCODE:\n```\nps ax | grep hydra\n19191 ?        Ssl    0:00 /opt/hydra/bin/hydra -c /opt/hydra/config/hydra.yml serve\n19206 ?        Ss     0:00 postgres: 12/main: hydra hydra 127.0.0.1(36094) idle\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Missing Property Message in Ory (JSON)\nDESCRIPTION: Displays an error when a required property is missing in user input or object definition. Expects 'property' to be passed in the context for runtime substitution. Used for input validation across Ory flows; id is 4000002.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_25\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000002,\n  \"text\": \"Property {property} is missing.\",\n  \"type\": \"error\",\n  \"context\": {\n    \"property\": \"{property}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing OAuth 2.0 Clients with Pagination - hydra CLI\nDESCRIPTION: This command lists OAuth 2.0 clients with pagination. It demonstrates the use of page tokens and page sizes for retrieving a specific set of clients. The input consists of page token and page size parameters. The output is a list of OAuth 2.0 clients.  Requires an existing Hydra instance and valid OAuth 2.0 clients.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-list-oauth2-clients.md#_snippet_1\n\nLANGUAGE: CLI\nCODE:\n```\nhydra list oauth2-clients --page-token eyJwYWdlIjoxfQ --page-size 10\n```\n\n----------------------------------------\n\nTITLE: Running Ory Help Command Using Shell in MDX CodeBlock\nDESCRIPTION: Displays a shell command to run the Ory repository's help command using a CodeBlock React component that highlights shell syntax. This snippet demonstrates how to execute the binary with the 'help' argument after installation. It requires the CodeBlock component from the theme and assumes the binary executable name is in props.repo.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n<CodeBlock language='shell'>{`${props.repo} help`}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: ory create project Option Flags Reference - Markdown\nDESCRIPTION: Provides a reference list of all available flags for the 'ory create project' CLI command. Each flag controls a specific aspect of project creation, such as workspace selection, environment, output format, project name, and workspace linkage. The documentation highlights required parameters and valid values for environment selection. This section helps users configure the command to their needs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-project.md#_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n      --create-workspace string   Create a new workspace with the given name and use it for the project\n  -e, --environment environment   The environment of the project. Valid values are: prod, stage, dev (default dev)\n      --format string             Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                      help for project\n  -n, --name string               The name of the project, required when quiet mode is used\n  -q, --quiet                     Be quiet with output printing.\n      --use-project               Set the created project as the default\n      --workspace string          The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Basic Syntax for ory patch permission-config\nDESCRIPTION: Shows the basic command structure for `ory patch permission-config`, indicating that it accepts various flags to modify the operation and specify the target project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-permission-config.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch permission-config [flags]\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration\nDESCRIPTION: Apply the modified identity configuration file (containing the updated courier or template settings) back to your Ory project using the Ory CLI. This command uploads the new configuration and applies the changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/10_sending-sms.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file updated_config.yaml\n```\n\n----------------------------------------\n\nTITLE: Executing ORY Account-Experience Recovery CLI Command in Shell\nDESCRIPTION: This snippet demonstrates how to invoke the ORY CLI command to open the account-experience recovery page. It includes the base command with available flags for help, configuration, project selection, quiet mode, and confirmation prompts. Usage of these flags enables customization of the command's behaviour within the ORY Network environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-recovery.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory open account-experience recovery [flags]\n```\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for recovery\n```\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string    Path to the Ory Network configuration file.\n```\n\nLANGUAGE: shell\nCODE:\n```\n      --project string   The project to use, either project ID or a (partial) slug.\n```\n\nLANGUAGE: shell\nCODE:\n```\n  -q, --quiet            Be quiet with output printing.\n```\n\nLANGUAGE: shell\nCODE:\n```\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Configure OAuth2 Webhook without Authentication - Ory CLI\nDESCRIPTION: This snippet shows how to register a webhook endpoint in your OAuth2 configuration using the Ory CLI, without authentication. It adds the URL to the OAuth2 configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n--add '/oauth2/token_hook=\"https://my-example.app/token-hook\"' \\\n--format yaml\n```\n\n----------------------------------------\n\nTITLE: Login Flow JSON Response Example (JSON)\nDESCRIPTION: Represents the structure returned by the Ory Identities login flow fetch endpoint. Contains flow metadata (ID, timestamps, type), the request URL, and a 'ui' object describing form structure, actions, nodes for CSRF and credential input, and potential UI messages. Input parameters include CSRF token, identifier, and password inputs, each with metadata. Outputs can also contain UI messages, such as errors on login. This schema drives the frontend UI render logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"33f6079a-ef14-4084-af13-34a91e53cd6c\",\n  \"type\": \"browser\",\n  \"expires_at\": \"2021-07-09T10:08:08.856735Z\",\n  \"issued_at\": \"2021-07-09T09:08:08.856735Z\",\n  \"request_url\": \"http://playground.projects.oryapis.com/self-service/login/browser\",\n  \"ui\": {\n    \"action\": \"https://playground.projects.oryapis.com/self-service/login?flow=33f6079a-ef14-4084-af13-34a91e53cd6c\",\n    \"method\": \"POST\",\n    \"nodes\": [\n      {\n        \"type\": \"input\",\n        \"group\": \"default\",\n        \"attributes\": {\n          \"name\": \"csrf_token\",\n          \"type\": \"hidden\",\n          \"value\": \"XmG3qwTYSV0oWIyNGTugvtNOKMxWPYHd7dNX7BYK5lL79P0iUdq5jVmRUKwwm8RLcAGN7eF7iYraAiTSOdamuQ==\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": [],\n        \"meta\": {}\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"identifier\",\n          \"type\": \"text\",\n          \"value\": \"\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070004,\n            \"text\": \"ID\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"password\",\n          \"type\": \"password\",\n          \"required\": true,\n          \"disabled\": false\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1070001,\n            \"text\": \"Password\",\n            \"type\": \"info\"\n          }\n        }\n      },\n      {\n        \"type\": \"input\",\n        \"group\": \"password\",\n        \"attributes\": {\n          \"name\": \"method\",\n          \"type\": \"submit\",\n          \"value\": \"password\",\n          \"disabled\": false\n        },\n        \"messages\": [],\n        \"meta\": {\n          \"label\": {\n            \"id\": 1010001,\n            \"text\": \"Sign in\",\n            \"type\": \"info\",\n            \"context\": {}\n          }\n        }\n      }\n    ],\n    \"messages\": [\n      {\n        \"id\": 4010002,\n        \"text\": \"Couldn't find a strategy to log you in with. Did you fill out the form?\",\n        \"type\": \"error\"\n      }\n    ]\n  },\n  \"created_at\": \"2021-07-09T09:08:08.857959Z\",\n  \"updated_at\": \"2021-07-09T09:08:08.857959Z\",\n  \"forced\": false\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Linux Installation Component in MDX\nDESCRIPTION: Imports the Linux installation React component from a local site directory and renders it with repository and name properties passed as props. This component facilitates rendering Linux-specific installation instructions or UI parts. It requires MDX support in a React environment with props named repo and name available in the parent scope.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\nimport Linux from '@site/src/components/Install/Linux'\n\n<Linux repo={props.repo} name={props.name} />\n```\n\n----------------------------------------\n\nTITLE: Starting MFA Flow with `aal=aal2` Parameter\nDESCRIPTION: Shows URL pattern to initiate MFA session for existing users by creating a new login flow with 'aal=aal2', ensuring secondary MFA prompt is presented.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_6\n\nLANGUAGE: MDX\nCODE:\n```\nhttps://&lt;your-custom-domain-or-project-slug&gt;/self-service/login/browser?aal=aal2\n```\n\n----------------------------------------\n\nTITLE: Exporting Environment Variables for Ory Workspace API Key and Workspace ID in Bash\nDESCRIPTION: Demonstrates setting up necessary environment variables for the workspace API key and workspace ID in a shell session. These variables are used throughout subsequent API calls to authenticate requests and identify the workspace scope. It is a prerequisite step to avoid hardcoding sensitive keys or IDs in each command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nexport WORKSPACE_API_KEY=\nexport WORKSPACE_ID=\n```\n\n----------------------------------------\n\nTITLE: Retrieving JSON Web Key Sets in Hydra CLI\nDESCRIPTION: This snippet demonstrates the basic command to retrieve one or more JSON Web Key Sets by their IDs using the Hydra CLI.  It takes set IDs as arguments and retrieves all details about the specified JWKS.  It leverages the `hydra get jwk` command and potentially utilizes `jq` for further processing of the retrieved JSON data. Requires the Hydra CLI installed and configured. The output is a JSON Web Key Set.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwk.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nhydra get jwk set-1 [set-2] ... [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring SMS for verification\nDESCRIPTION: This JSON snippet configures the SMS field for verification using the `ory.sh/kratos` extension.  The `via` parameter is set to 'sms' under `recovery`, signifying that users should be able to verify their phone number via a verification code sent via SMS.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"recovery\": {\n      \"via\": \"sms\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Persistent Session Cookie in Ory Identities (YAML)\nDESCRIPTION: Shows how to configure the `session.cookie.persistent` property to `false` in the Ory Identities YAML configuration. This prevents the session cookie's `max-age` from automatically matching the `session.lifespan`, making it a session cookie (deleted on browser close) unless `max-age` is explicitly set elsewhere.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/10_session-lifespan.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\ncookie:\n   domain: $PROJECT_SLUG.projects.oryapis.com\n   name: ory_session_{name}\n   path: /\n   # highlight-start\n   persistent: false\n   # highlight-end\n   same_site: Lax\nlifespan: 720h0m0s\n```\n\n----------------------------------------\n\nTITLE: Defining Anonymous Access Rule in Ory Oathkeeper (YAML)\nDESCRIPTION: Defines an access rule (`ory:kratos-selfservice-ui-node:anonymous`) in `access-rules.yml` for Oathkeeper. It matches GET requests to specific public UI paths like registration, login, and static assets (`**.css`, `**.js`, etc.) at `http://127.0.0.1:4455/`. These requests are forwarded to the Kratos self-service UI node (`http://kratos-selfservice-ui-node:4435`). Authentication uses the `anonymous` handler, authorization is handled by `allow`, and the `noop` mutator is applied.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\n- id: \"ory:kratos-selfservice-ui-node:anonymous\"\n  upstream:\n    preserve_host: true\n    url: \"http://kratos-selfservice-ui-node:4435\"\n  match:\n    url: \"http://127.0.0.1:4455/<{registration,welcome,recovery,verification,login,**.css,**.js,**.png}>\"\n    methods:\n      - GET\n  authenticators:\n    - handler: anonymous\n  authorizer:\n    handler: allow\n  mutators:\n    - handler: noop\n```\n\n----------------------------------------\n\nTITLE: Defining OpenAPI Request Body Parameters (Go)\nDESCRIPTION: Illustrates how to define request parameters, particularly a request body, for an OpenAPI route using `go-swagger` annotations. It uses `swagger:parameters` linked to the operation ID, defines a struct for the parameters (`adminCreateIdentity`), and specifies the body using `in: body` pointing to a separate model (`adminCreateIdentityBody`). The body model itself is defined with `swagger:model` and includes field descriptions, `required` annotations, and JSON tags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_30\n\nLANGUAGE: go\nCODE:\n```\n// swagger:parameters adminCreateIdentity\n// nolint:deadcode,unused\ntype adminCreateIdentity struct {\n  // in: body\n  Body adminCreateIdentityBody\n}\n\n// swagger:model adminCreateIdentityBody\ntype adminCreateIdentityBody struct {\n  // SchemaID is the ID of the JSON Schema to be used for validating the identity's traits.\n  //\n  // required: true\n  SchemaID string `json:\"schema_id\"`\n\n  // Traits represent an identity's traits. The identity is able to create, modify, and delete traits\n  // in a self-service manner. The input will always be validated against the JSON Schema defined\n  // in `schema_url`.\n  //\n  // required: true\n  Traits json.RawMessage `json:\"traits\"`\n}\n\n// swagger:route POST /identities v0alpha1 adminCreateIdentity\n```\n\n----------------------------------------\n\nTITLE: Passwordless Login Flow with On-Device Authenticators (Markdown)\nDESCRIPTION: Describes the step-by-step user experience and flow for on-device authenticators during passwordless login, including user actions and system responses, presented in a tabbed format with visual diagrams.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/00_overview.mdx#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\n\n<Tabs>\n<TabItem value=\"on-device\" label=\"On-device authenticator\" default>\n\n1. Ory's self-service login flow presents an option to log in using passwordless (below the option for signing in with a password).\n   ![Ory Account Experience login](./_static/ax-login-options.png)\n2. To sign in with passwordless, the user enters their ID and clicks the **Sign in with security key** button.\n3. The Ory Account Experience displays the sign-in preparation dialog, which gives the user time to prepare the physical device for passwordless login. The user clicks **Continue** to proceed to the next step.\n4. The platform verifies the user's identity using the chosen method.\n5. Login completes automatically.\n\n</TabItem>\n<TabItem value=\"external\" label=\"External authenticator\">\n\n1. Ory's self-service login flow presents an option to log in using passwordless.\n2. To sign in with passwordless, the user enters their ID and clicks the **Sign in with security key** button.\n3. The Ory Account Experience displays the sign-in preparation dialog, which gives the user time to prepare the physical device for passwordless login. The user clicks **Continue** to proceed to the next step.\n4. The user chooses the external authenticator to use for sign-in (for example, a USB security key).\n   ![Choose external authenticator device](./_static/external-device-choose.png)\n4. The platform verifies the user's identity using the chosen method.\n   ![Verify identity with USB security key](./_static/external-device-verify-identity.png)\n5. Login completes automatically.\n\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Displaying JSON Response\nDESCRIPTION: This JSON snippet represents the response from an email verification, showcasing the user's identity and verification status.  It includes fields like `id`, `verified`, `verified_at` and other identity traits.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"5fe6b562-c5a6-4adf-a3a7-a1e588c11c66\",\n  \"active\": true,\n  \"expires_at\": \"2021-12-14T19:35:21.7271879Z\",\n  \"authenticated_at\": \"2021-12-13T19:35:21.7271879Z\",\n  \"authenticator_assurance_level\": \"aal1\",\n  \"authentication_methods\": [\n    {\n      \"method\": \"password\",\n      \"completed_at\": \"2021-12-13T19:35:21.7271762Z\"\n    }\n  ],\n  \"issued_at\": \"2021-12-13T19:35:21.7271879Z\",\n  \"identity\": {\n    \"id\": \"0435468f-5b39-4f06-8257-af418412891d\",\n    \"schema_id\": \"default\",\n    \"schema_url\": \"http://127.0.0.1:4433/schemas/default\",\n    \"state\": \"active\",\n    \"state_changed_at\": \"2021-12-13T19:32:48.7715418Z\",\n    \"traits\": {\n      \"name\": {\n        \"first\": \"Foo\",\n        \"last\": \"Bar\"\n      },\n      \"email\": \"foo@ory.sh\"\n    },\n    \"verifiable_addresses\": [\n      {\n        \"id\": \"9fccf5c1-c374-4a15-8f01-1fd5cb3bea55\",\n        \"value\": \"foo@ory.sh\",\n        \"verified\": true,\n        \"via\": \"email\",\n        \"status\": \"completed\",\n        \"verified_at\": \"2021-12-13T19:34:45.4343846Z\",\n        \"created_at\": \"2021-12-13T19:32:48.775138Z\",\n        \"updated_at\": \"2021-12-13T19:34:53.449022Z\"\n      }\n    ],\n    \"recovery_addresses\": [\n      {\n        \"id\": \"0df6ddf6-780b-4c3c-ba31-4a349a2a1bc5\",\n        \"value\": \"foo@ory.sh\",\n        \"via\": \"email\",\n        \"created_at\": \"2021-12-13T19:32:48.775823Z\",\n        \"updated_at\": \"2021-12-13T19:34:53.449207Z\"\n      }\n    ],\n    \"created_at\": \"2021-12-13T19:32:48.773627Z\",\n    \"updated_at\": \"2021-12-13T19:32:48.773627Z\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Migration Generation Options\nDESCRIPTION: This snippet outlines the command-line options available for the `hydra migrate gen` command. The `--dialects` flag specifies the database dialects for which migrations are expected, with a default list provided. The `-h` or `--help` flag provides assistance. The command utilizes flags to control the migration file generation process, likely allowing for customization and dialect-specific configurations. These options provide controls over validation and potentially generation of the migration files. The command is part of a CLI tool which allows for several migration controls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-gen.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --dialects strings   Expect migrations for these dialects and no others to be either explicitly defined, or to have a generic fallback. \"\" disables dialect validation. (default [sqlite,cockroach,mysql,postgres])\n  -h, --help               help for gen\n```\n\n----------------------------------------\n\nTITLE: Ory Hydra YAML Configuration File Example\nDESCRIPTION: Example YAML configuration file for Ory Hydra that can be passed to the Helm chart.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n# hydra-config.yaml\n\nhydra:\n  config:\n    # example:\n    ttl:\n      access_token: 1h\n    # ...\n```\n\n----------------------------------------\n\nTITLE: Authentication with Ory CLI\nDESCRIPTION: Shows how to authenticate with the Ory Network using the Ory CLI to manage permissions. Includes commands for sign-in and listing workspaces and projects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory auth\n```\n\nLANGUAGE: shell\nCODE:\n```\nory list workspaces\nory list projects --workspace <workspace-id>\n```\n\nLANGUAGE: shell\nCODE:\n```\nory use project <project-id>\n```\n\n----------------------------------------\n\nTITLE: kratos identities put Command Synopsis\nDESCRIPTION: The command synopsis displays the expected usage of the `kratos identities put` command.  It shows how to specify input files or use standard input to provide identity data for a PUT request. It also illustrates the use of flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-put.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nkratos identities put <file.json [file-2.json [file-3.json] ...]> [flags]\n```\n\n----------------------------------------\n\nTITLE: Getting All Sessions using Ory Identities Go SDK\nDESCRIPTION: Provides an example using the Ory Identities Go SDK to list all active sessions across all users managed by the Ory instance. Requires appropriate permissions to list sessions globally.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_26\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Displaying Password Label in Ory Interface (JSON)\nDESCRIPTION: Represents a static label for 'Password' inputs in Ory UI forms. Utilized as part of form definitions where password entry is required. No dependencies or parameters; message id is 1070001.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070001,\n  \"text\": \"Password\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Viewing Options for `ory open` Command (Shell)\nDESCRIPTION: Displays the available command-line options for the `ory open` command. These options allow users to specify a configuration file (`--config`), display help information (`--help`), target a specific project (`--project`), suppress output (`--quiet`), or automatically confirm prompts (`--yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string    Path to the Ory Network configuration file.\n  -h, --help             help for open\n      --project string   The project to use, either project ID or a (partial) slug.\n  -q, --quiet            Be quiet with output printing.\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Visualize Workspace Structure with Mermaid\nDESCRIPTION: This code snippet defines a Mermaid diagram that visualizes the relationship between Workspaces, Projects, Environments, and Subscription Plans within the Ory Network. The diagram illustrates how a subscription plan determines the features and the number of projects allowed in each environment (Production, Staging, and Development).\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/workspaces.mdx#_snippet_0\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<Mermaid\n  chart={`\ngraph TD\n    subgraph \\\"Workspace\\\"\n        Plan[\\\"Subscription Plan<br/>(Developer/Production/Growth/Enterprise)<br/><br/>Determines:<br/> Feature Set<br/> Number of Production/Staging/Dev Env Projects\\\"]\n\n        subgraph \\\"Projects\\\"\n            Project1[\\\"Project A\\\"]\n            Project2[\\\"Project B\\\"]\n            Project3[\\\"Project C\\\"]\n        end\n\n        subgraph \\\"Environments\\\"\n            Prod[\\\"Production Environment<br/> Workspace Subscription Rate Limits<br/> Full Feature Set\\\"]\n            Stage[\\\"Staging Environment<br/> Development Subscription Rate Limits<br/> Full Feature Set\\\"]\n            Dev[\\\"Development Environment<br/> Development Subscription Rate Limits<br/> Testing Features\\\"]\n        end\n\n        Plan --> Project1\n        Plan --> Project2\n        Plan --> Project3\n\n        Project1 --> Prod\n        Project2 --> Stage\n        Project3 --> Dev\n\n        style Plan fill:#e6e6e6,stroke:#333,stroke-width:2px,color:#000\n        style Prod fill:#d4edda,stroke:#333,stroke-width:2px,color:#000\n        style Stage fill:#cce5ff,stroke:#333,stroke-width:2px,color:#000\n        style Dev fill:#fff3cd,stroke:#333,stroke-width:2px,color:#000\n\n        style Project1 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project2 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n        style Project3 fill:#ffffff,stroke:#333,stroke-width:2px,color:#000\n    end\n`}\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Hydra - Configuration Options\nDESCRIPTION: This snippet shows the command line flags which can be inherited from parent commands.  The `-c, --config` flag allows you to specify the path to configuration files in JSON, YAML, or TOML formats, where values are loaded in the order provided. It also shows flags to disable security checks for local development using `--dev` and disables telemetry with `--sqa-opt-out`. These flags are crucial for setting up and tuning the server's behavior to suit varied operational needs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-all.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n      --dev              Disables critical security checks to improve local development experience. Do not use in production.\n      --sqa-opt-out      Disable anonymized telemetry reports - for more information please visit https://www.ory.sh/docs/ecosystem/sqa\n```\n\n----------------------------------------\n\nTITLE: Changing Tunnel Port Bash\nDESCRIPTION: Shows how to change the local port on which the Ory Tunnel listens from its default of 4000. The `--port` flag is used to specify the desired port.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_9\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --port 8080 --project <project-id-or-slug> https://www.example.org\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identity Configuration via CLI (Shell)\nDESCRIPTION: This shell snippet provides commands for interacting with the Ory CLI. It shows how to list available workspaces and projects, and then how to download the identity configuration for a specific project and workspace, saving it as a YAML file (\"identity-config.yaml\"). This is the first step in modifying the configuration via CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Importing Table of Contents Inline Component in MDX\nDESCRIPTION: Imports a React component named TOCInline from a theme directory to render an inline Table of Contents within the document. This snippet is used to provide navigation via a toc prop, which is expected to contain the structure of the table of contents. It requires the MDX environment and React component support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport TOCInline from '@theme/TOCInline'\n\n<TOCInline toc={toc} />\n```\n\n----------------------------------------\n\nTITLE: Using keto relation-tuple delete Command in Shell\nDESCRIPTION: Command syntax for deleting relationships defined in JSON files. It accepts file paths, directory paths, or stdin input (using '-') for deletion operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple delete <relation-tuple.json> [<relation-tuple-dir>] [flags]\n```\n\n----------------------------------------\n\nTITLE: Listing Workspaces and Projects, Patching Identity Config - Ory CLI - Shell\nDESCRIPTION: This shell snippet provides a sequence of Ory CLI commands to first list available workspaces and projects and then remove the '/selfservice/methods/oidc/config/base_redirect_uri' entry from a project's identity configuration. The Ory CLI must be installed and authenticated with access to the relevant workspace and project. Parameters include <workspace-id> and <project-id>, which must be replaced with valid identifiers. The removal of this configuration key is necessary to resolve the redirect_uri_mismatch issue for social sign-in providers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/01_oidc-redirect-url-cname.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Remove the configuration entry\nory patch identity-config <project-id> \\\n  --remove '/selfservice/methods/oidc/config/base_redirect_uri'\n```\n\n----------------------------------------\n\nTITLE: JSON Schema for Identity Traits with MFA Identifier Traits\nDESCRIPTION: Defines the identity schema with email and phone traits, marking the email as the primary identifier for email MFA via 'code' method and phone via 'sms'. These properties are validated with formats and constraints, ensuring correct identification traits for MFA workflows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_4\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/identity.email.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"E-Mail\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": { \"identifier\": true },\n              \"webauthn\": { \"identifier\": true },\n              \"totp\": { \"account_name\": true },\n              \"code\": { \"identifier\": true, \"via\": \"email\" }\n            },\n            \"recovery\": { \"via\": \"email\" },\n            \"verification\": { \"via\": \"email\" }\n          },\n          \"maxLength\": 320\n        },\n        \"phone\": {\n          \"type\": \"string\",\n          \"format\": \"tel\",\n          \"title\": \"Phone Number\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"code\": { \"identifier\": true, \"via\": \"sms\" }\n            }\n          },\n          \"maxLength\": 320\n        }\n      },\n      \"required\": [\"email\"],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example ES256 JSON Web Key Set (JWKS) Format\nDESCRIPTION: Presents an example JSON Web Key Set output from the Ory CLI, showing the structure of an ES256 cryptographic key for signing JWTs. The key includes algorithm, curve, private and public parameters, key ID, type, and usage fields. This keyset can be used to sign JWTs and distribute public keys for verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"set\": \"example-key-set\",\n  \"keys\": [\n    {\n      \"alg\": \"ES256\",\n      \"crv\": \"P-256\",\n      \"d\": \"XdO-4OkdDxsOhU_XwYFAzEg1Z3DfQ8LhwivJeFq-ppo\",\n      \"kid\": \"3045631b-95a8-433c-ab54-93fa52a55ea8\",\n      \"kty\": \"EC\",\n      \"use\": \"sig\",\n      \"x\": \"AAYxrjPNt6M-XBY1H57Mc_6moiETkg_Cf2egHXPOEGo\",\n      \"y\": \"mNX9UCBa82GNrvIIHFFNxsw-LPKksbwCMoaIybyWMEY\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring 'cookie_session' Authenticator with Path/Query Preservation\nDESCRIPTION: This YAML snippet demonstrates configuring the 'cookie_session' authenticator with `preserve_path` and `preserve_query` set to `true`. This ensures that the path and query from the configured `check_session_url` are used when forwarding the request to the session store, instead of being replaced by the incoming request's path and query.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule Preserving Path: access-rule-2.yaml\nid: access-rule-2\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: cookie_session\n    config:\n      check_session_url: https://session-store-host/check-session\n      only:\n        - sessionid\n      preserve_path: true\n      preserve_query: true\n```\n\n----------------------------------------\n\nTITLE: Setting Ory CLI API Keys in Shell\nDESCRIPTION: Shows how to set environment variables to authenticate the Ory CLI using workspace and project API keys. These keys enable access to manage projects and configurations in automated or CI/CD environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nexport ORY_WORKSPACE_API_KEY=ory_wak_8dwW9s....\nexport ORY_PROJECT_API_KEY=ory_pt_Wse93s....\n```\n\n----------------------------------------\n\nTITLE: Using ory get project Command Syntax in Bash\nDESCRIPTION: The basic syntax for the 'ory get project' command, which requires a project ID parameter and accepts various flags for customization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-project.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory get project [id] [flags]\n```\n\n----------------------------------------\n\nTITLE: Setting SameSite Mode for Cookies in Ory Hydra using YAML\nDESCRIPTION: This YAML snippet sets the SameSite attribute for cookies managed by Ory Hydra using the 'serve.cookies.same_site_mode' configuration. Supported values are 'Strict', 'Lax', or 'None', enabling developers to adjust cookie isolation levels for security or cross-site requirements. No external dependencies are needed; this is native to Hydra's configuration file. The expected input is a valid YAML configuration with a string value assigned to 'same_site_mode'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cookies.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nserve:\n  cookies:\n    same_site_mode: Strict\n\n```\n\n----------------------------------------\n\nTITLE: Listing Identities in Ory Shell\nDESCRIPTION: This shell command is used to list the identities that are available within an Ory project. It calls the `ory list identities` command with the project ID and workspace ID as parameters. It validates that the user import was successful by checking that the identities are now available in the Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory list identities --project <project-id> --workspace <workspace-id>\n```\n\n----------------------------------------\n\nTITLE: Saving OAuth2 and OpenID Configuration to a YAML File\nDESCRIPTION: This command redirects the YAML-formatted OAuth2 configuration directly into a file named 'oauth2-config.yaml'. It streamlines the process of saving and versioning configuration files for deployment or testing purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/16_configure-oauth2-service.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nory get oauth2-config --project <project-id> --workspace <workspace-id> --format yaml > oauth2-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Verifying Creation of Fizz Migration Files (Shell)\nDESCRIPTION: Demonstrates the expected output after running the migration creation command, showing the newly generated `.up.fizz` and `.down.fizz` files with timestamps in the specified directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_19\n\nLANGUAGE: shell\nCODE:\n```\nls -la persistence/sql/migrations/templates | tail -n 2\n-rw-r--r--   1 foobar  staff      0 Apr 28 17:25 20210428172500_descriptive_change.down.fizz\n-rw-r--r--   1 foobar  staff      0 Apr 28 17:25 20210428172500_descriptive_change.up.fizz\n```\n\n----------------------------------------\n\nTITLE: Usage Syntax for ORY Oathkeeper rules CLI\nDESCRIPTION: This snippet shows the basic command syntax for the `oathkeeper rules` command. It indicates that the command can be followed by various flags to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\noathkeeper rules [flags]\n```\n\n----------------------------------------\n\nTITLE: Defining Access Relations with keto-relation-tuples in Ory Permissions - keto-relation-tuples\nDESCRIPTION: This keto-relation-tuples snippet demonstrates how to define an access permission based on a subject identified by a UUID in Ory Keto. The relationship specifies that access to TCP port 22 is allowed when the subject (e.g., c5b6454f-f79c-4a6d-9e1b-b44e04b56009) matches the incoming request's mapped attributes. The tuple syntax references the object, relation, and subject. Constraints: the system relies on exact string matches; application logic must ensure correct mapping and processing of the subject's identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/15_subjects.mdx#_snippet_1\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\n// Allow access to TCP port 22 when the request originates from a specific subnet during office hours\ntcp/22#access@c5b6454f-f79c-4a6d-9e1b-b44e04b56009\n```\n\n----------------------------------------\n\nTITLE: Command-Specific Options for 'ory list projects'\nDESCRIPTION: Options specific to the 'ory list projects' command, including help flag and workspace selection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-projects.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help               help for projects\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Importing and Using ConfigMarkdown Component in Ory Hydra Documentation (MDX/JavaScript)\nDESCRIPTION: This snippet imports the ConfigMarkdown React component and uses it to dynamically render the Ory Hydra configuration schema from an external raw JSON URL. Dependencies include the @site/src/components/ConfigMarkdown module and a React-based MDX environment. Parameters include 'src' for the schema URL and 'binary' for indicating the configuration context ('hydra'). Input is the MDX markup and URL, and the output renders the configuration documentation. This approach requires compatibility with React components in the documentation build pipeline.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/reference/configuration.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport ConfigMarkdown from '@site/src/components/ConfigMarkdown';\n```\n\nLANGUAGE: MDX\nCODE:\n```\n<ConfigMarkdown src=\"https://raw.githubusercontent.com/ory/hydra/master/.schema/config.schema.json\" binary=\"hydra\" />\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Client Credentials Grant Benchmark in Ory Hydra\nDESCRIPTION: Performance benchmark for the OAuth 2.0 Client Credentials Grant endpoint which uses BCrypt with cost=8 for authentication. The benchmark shows that BCrypt creates CPU load by design, affecting performance metrics for 10,000 requests with 100 concurrent connections.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/benchmark.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nSummary:\n  Total:\t19.4831 secs\n  Slowest:\t0.9063 secs\n  Fastest:\t0.0171 secs\n  Average:\t0.1861 secs\n  Requests/sec:\t513.2648\n\n  Total data:\t1570000 bytes\n  Size/request:\t157 bytes\n\nResponse time histogram:\n  0.017 [1]\t|\n  0.106 [3566]\t|\n  0.195 [2358]\t|\n  0.284 [1850]\t|\n  0.373 [1146]\t|\n  0.462 [650]\t|\n  0.551 [288]\t|\n  0.640 [101]\t|\n  0.728 [27]\t|\n  0.817 [11]\t|\n  0.906 [2]\t|\n\n\nLatency distribution:\n  10% in 0.0318 secs\n  25% in 0.0922 secs\n  50% in 0.1736 secs\n  75% in 0.2728 secs\n  90% in 0.3815 secs\n  95% in 0.4191 secs\n  99% in 0.5863 secs\n\nDetails (average, fastest, slowest):\n  DNS+dialup:\t0.0001 secs, 0.0171 secs, 0.9063 secs\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0432 secs\n  req write:\t0.0001 secs, 0.0000 secs, 0.0615 secs\n  resp wait:\t0.1857 secs, 0.0171 secs, 0.9062 secs\n  resp read:\t0.0001 secs, 0.0000 secs, 0.0302 secs\n\nStatus code distribution:\n  [200]\t10000 responses\n```\n\n----------------------------------------\n\nTITLE: Kratos Identity Example JSON - JSON\nDESCRIPTION: This JSON snippet defines the structure of an identity suitable for import into Ory Kratos. It includes a required schema_id parameter and a traits object with user attributes, here specifying an email address. The structure must conform to the identity schema configured in the Kratos instance. Valid JSON format is mandatory for successful import.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-import.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"schema_id\": \"default\",\n    \"traits\": {\n        \"email\": \"foo@example.com\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoke Consent for All OAuth2 Clients with Ory SDK\nDESCRIPTION: This snippet shows how to revoke user consent for all OAuth2 clients using the Ory SDK.  It imports the `revokeAll` function from a TypeScript file and displays it as a JavaScript code block. All consent given to any application will be revoked.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/revoke-consent.mdx#_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport revokeAll from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/consent-revoke-all.ts'\n\n<CodeBlock language=\"js\">{revokeAll}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Example OAuth2 Client Creation in Kubernetes\nDESCRIPTION: Shell command to create an OAuth2 client with Ory Hydra running in Kubernetes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_15\n\nLANGUAGE: sh\nCODE:\n```\nclient=$(docker-compose -f quickstart.yml exec hydra \\\n  hydra create client \\\n    --endpoint http://admin.hydra.localhost/ \\\n  --format json \\\n  -g client_credentials)\n\nhydra perform client-credentials \\\n    --endpoint http://public.hydra.localhost/ \\\n  --client-id \"$client_id\" \\\n  --client-secret \"$client_secret\"\n```\n\n----------------------------------------\n\nTITLE: Enabling Pairwise Subject Identifier Algorithm with Salt in Ory OAuth2 - Shell\nDESCRIPTION: This shell snippet demonstrates enabling the 'pairwise' subject identifier algorithm to provide unique 'sub' values per client in Ory OAuth2/OpenID Connect. It requires replacing the 'supported_types' to include 'pairwise' and setting a 16-character salt value at the 'pairwise/salt' path. The salt obfuscates the subject identifiers to prevent correlation across clients. Key dependencies include the Ory CLI, valid project and workspace IDs, and a secure, unchanging salt value. It's critical not to modify the salt once set to avoid authentication disruptions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/openid.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/oidc/subject_identifiers/supported_types=[\\\"pairwise\\\"]\" \\\n  --replace \"/oidc/subject_identifiers/pairwise/salt=\\\"{16-character-long-salt}\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Listing Ory Workspaces Using Ory CLI in Shell\nDESCRIPTION: This shell script demonstrates how to list available workspaces, projects, and retrieve the identity configuration for a specific project and workspace. It relies on the Ory CLI commands to manage and access project configurations. The commands output configuration data in YAML format suitable for editing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory list workspaces\nory list projects --workspace <workspace-id>\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Embedding Base64 Identity Schema in Config (JSON)\nDESCRIPTION: JSON snippet illustrating how a base64-encoded Identity Schema string is embedded within the `schemas` array in the Ory Network configuration. The `url` property of an existing schema object is replaced with the `base64://` prefix followed by the encoded string to reference the inline schema definition.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n//...\n    \"schemas\": [\n      {\n        \"id\": \"7d1cf71e-57ae-40be-bddf-1f4c323e2349\",\n        \"url\": \"base64://PASTE_BASE64_STRING_HERE\"\n      },\n    ],\n//...\n```\n\n----------------------------------------\n\nTITLE: Counting Potentially Deleted Consents for Hydra v1 to v2 Migration (PostgreSQL)\nDESCRIPTION: SQL query for PostgreSQL to count consent requests in the `hydra_oauth2_consent_request` table where `login_challenge` is NULL, grouped by the month they were requested. This query helps users estimate the number of consents that might be deleted during the migration from Ory Hydra v1 to v2, allowing them to assess the impact before proceeding.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/upgrade.mdx#_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n-- postgresql\nSELECT\n  COUNT(*) AS count,\n  DATE_TRUNC('month', requested_at) AS month\nFROM hydra_oauth2_consent_request\nWHERE login_challenge IS NULL\nGROUP BY month;\n```\n\n----------------------------------------\n\nTITLE: Setting Up Google Cloud SQL Proxy for Ory Hydra\nDESCRIPTION: Shell commands to deploy the gcloud-sqlproxy chart for connecting Ory Hydra to Google Cloud SQL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nhelm upgrade pg-sqlproxy rimusz/gcloud-sqlproxy --namespace sqlproxy \\\n    --set 'serviceAccountKey=\"$(cat service-account.json | base64 | tr -d '\\n')\"' \\\n    ...\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth 2.0 Client with BCrypt Secret in Go\nDESCRIPTION: This shell script demonstrates how to create an OAuth 2.0 client using the Ory CLI with a BCrypt-hashed secret. It highlights the secret length limitation of 72 characters, which may lead to truncation if exceeded, affecting authentication security. Dependencies include the Ory CLI and a running Ory server at specified endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/20_bcrypt-secret-length.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nory create oauth2-client \\\n  --secret 525348e77144a9cee9a7471a8b67c50ea85b9e3eb377a3c1a3a23db88f9150eefe76e6a339fdbc62b817595f53d72549d9ebe36438f8c2619846b963e9f43a94 \\\n  --endpoint http://localhost:4445 \\\n  --token-endpoint-auth-method client_secret_post \\\n  --grant-type client_credentials\n```\n\n----------------------------------------\n\nTITLE: Creating a New Ory Network Project with CLI - Bash\nDESCRIPTION: Shows the basic syntax for using the 'ory create project' command in a shell environment. This example demonstrates how to invoke the command with optional flags for project creation. No external dependencies are required except the Ory CLI tool. Inputs include command-line options, and the output is dependent on the specified format flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-project.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory create project [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Allow Authorizer Globally YAML\nDESCRIPTION: YAML configuration snippet demonstrating how to enable the built-in `allow` authorizer handler globally in the Ory Oathkeeper configuration file (`oathkeeper.yml`). Setting `enabled` to `true` activates this authorizer for use in access rules.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthorizers:\n  allow:\n    # Set enabled to \"true\" to enable the authenticator, and \"false\" to disable the authenticator. Defaults to \"false\".\n    enabled: true\n```\n\n----------------------------------------\n\nTITLE: Changing Hydra directory ownership\nDESCRIPTION: This command recursively changes the ownership of the `/opt/hydra` directory and all its contents to the `hydra` user. This is important for ensuring that the Hydra process has the necessary permissions to read and write files in its installation directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_16\n\nLANGUAGE: bash\nCODE:\n```\nchown -R hydra /opt/hydra/\n```\n\n----------------------------------------\n\nTITLE: Running Next.js Development Server (yarn)\nDESCRIPTION: This snippet demonstrates how to start the Next.js development server using the yarn package manager. It executes the `yarn dev` command, which starts the server and makes the application accessible locally.  The output will be the running server.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs-12/README.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\n----------------------------------------\n\nTITLE: Starting the Next.js Development Server\nDESCRIPTION: Command to start the Next.js development server after setting up Ory integration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Mapping LinkedIn Claims to Ory Identity Schema with Jsonnet - Jsonnet\nDESCRIPTION: This Jsonnet snippet securely maps LinkedIn claims to the Ory Identity schema, assigning email only if it exists and is marked as verified by LinkedIn. It prevents enumeration risks by restricting the exposure of unverified emails. Dependencies include a provided claims object (via std.extVar), and it should be embedded in the Ory Console or CLI forms for data mapping. Input is the LinkedIn claims object, and the output is an object matching Ory's identity traits schema. Does not verify email verification status itself; assumes accurate upstream data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by LinkedIn.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n    },\n  },\n}\n\n```\n\n----------------------------------------\n\nTITLE: Setting Default Consistency Level Using Ory CLI\nDESCRIPTION: Command to change the default consistency guarantee for Ory Network from 'strong' to 'eventual' using the Ory CLI patch command. This affects how quickly data is retrieved versus how fresh the data is across the globally distributed system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/api/eventual-consistency.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch project --replace '/previews/default_read_consistency_level=\"eventual\"'\n```\n\n----------------------------------------\n\nTITLE: Firebase SCrypt Hash Format - plaintext\nDESCRIPTION: Demonstrates the Firebase SCrypt (firescrypt) format for password hashes, including memory cost, rounds, parallelization degree, salt, hash, salt separator, and signer key, all base64-encoded where appropriate. This format is used for importing hashes from Firebase export into Ory Identities, with inputs and outputs as specified string segments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_11\n\nLANGUAGE: plaintext\nCODE:\n```\n$firescrypt$ln=<mem_cost>,r=<rounds>,p=<parallelization>$<salt>$<hash>$<salt_separator>$<signer_key>\n$firescrypt$ln=14,r=8,p=1$sPtDhWcd1MfdAw==$xbSou7FOl6mChCyzpCPIQ7tku7nsQMTFtyOZSXXd7tjBa4NtimOx7v42Gv2SfzPQu1oxM2/k4SsbOu73wlKe1A==$Bw==$YE0dO4bwD4JnJafh6lZZfkp1MtKzuKAXQcDCJNJNyeCHairWHKENOkbh3dzwaCdizzOspwr/FITUVlnOAwPKyw==\n```\n\n----------------------------------------\n\nTITLE: Configuring Post-Logout Redirect URL via Ory Console and CLI using Shell\nDESCRIPTION: This snippet provides instructions and commands for setting the default post-logout redirect URL in Ory Identity configuration. Users can set the URL directly in the Ory Console via the 'Post-Logout Redirect' field or programmatically using the Ory CLI. The CLI command modifies the identity configuration to replace the default browser return URL after logout. This modification requires prior installation and setup of the Ory CLI and access to project and workspace identifiers. It influences where the user is redirected after completing the logout flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-logout.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\   --replace '/selfservice/flows/logout/after/default_browser_return_url=\"{return-url}\"'\n```\n\n----------------------------------------\n\nTITLE: Example JSON Response from OAuth2 Token Introspection Endpoint\nDESCRIPTION: This JSON snippet provides an example response returned by the OAuth2 token introspection endpoint. It includes the active status, scope, client and user identifiers, expiration and issued-at timestamps, the username, audience, issuer, and additional extended claims. This helps clients verify the validity and claims of the access token. No dependencies required aside from standard JSON parsing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/resource-owner-password-grant.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"active\": true,\n  \"scope\": \"offline\",\n  \"client_id\": \"70d417fc-2aea-4830-b247-f140a9c4bae1\",\n  \"sub\": \"70d417fc-2aea-4901-4830-f140a9c412f7\",\n  \"exp\": 1730210703,\n  \"iat\": 1730207103,\n  \"nbf\": 1730207103,\n  \"username\": \"ory-username\",\n  \"aud\": [\"https://aud.example.com\"],\n  \"iss\": \"https://issuer.example.com\",\n  \"token_type\": \"Bearer\",\n  \"token_use\": \"access_token\",\n  \"ext\": {\n    \"username\": \"ory-username\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking Other User Sessions in TypeScript (Self-Service)\nDESCRIPTION: Uses the TypeScript SDK (native) to revoke all active sessions for the authenticated user except the current one via the self-service frontend API. Requires the Ory Session Cookie and proper CORS configuration for AJAX calls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport revokeOtherSessionsNative from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/session/revoke-other-sessions-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"revoke-other-sessions-native.ts\">{revokeOtherSessionsNative}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: English Language Email Body Template in Go Templates\nDESCRIPTION: This template provides the English email content for account recovery, greeting the user with their first name in uppercase, and instructing them to enter the recovery code. Used as a sub-template within the internationalized email setup, depending on the user's language preference. It requires the user's `firstName` trait.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/02_mail-courier-templates.mdx#_snippet_4\n\nLANGUAGE: TXT\nCODE:\n```\nHello {{ upper .Identity.traits.firstName }},\n\nto recover your account, please enter the following code:\n\n```\n\n----------------------------------------\n\nTITLE: Mapping VK claims to Ory Identity Schema (Jsonnet)\nDESCRIPTION: This Jsonnet snippet maps the VKontakte claims to the Ory Identity schema. It checks if the 'email' claim exists and then assigns it to the 'email' trait. VK doesn't provide 'email_verified' so this is not included.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_1\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n{\n  identity: {\n    traits: {\n      // VK doesn't provide an 'email_verified field'.\n      //\n      // Email might be empty if the user isn't allowed the 'email' scope.\n      [if 'email' in claims then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: kratos remote version - Inherited Options\nDESCRIPTION: This snippet outlines options inherited from the parent commands. These options are available in addition to the specific options of the `kratos remote version` command. It provides information about endpoint configurations, output formats and quiet output modes. Setting these parameters allows you to configure how the command interacts with the Kratos Admin API and what output it produces.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-version.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Ory CLI Help Option\nDESCRIPTION: This option provides help information for the Ory CLI. It displays available commands and options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for ory\n```\n\n----------------------------------------\n\nTITLE: Shell: Encode Jsonnet Snippet with Base64\nDESCRIPTION: This shell command encodes a Jsonnet snippet using Base64.  The snippet to be encoded is piped to the `base64` command. This encoded string is then used in the `mapper_url` field within the Ory identity configuration file. This step is required when using the Base64 method.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/60_twitch.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Available Options for hydra import CLI\nDESCRIPTION: This snippet lists the common command-line options available for the `hydra import` command. These options control aspects like the target API endpoint, output format, additional HTTP headers, verbosity, and TLS certificate verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for import\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: React Native App Entry Point and Navigation Structure\nDESCRIPTION: Overview of 'App.tsx', the main component that initializes font loading, sets up navigation, and integrates the authentication context via 'AuthProvider' to manage user sessions and route access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport default\n// App.tsx code that sets up font loading, navigation, and context\n```\n\n----------------------------------------\n\nTITLE: Using keto relation-tuple delete-all Command in Bash\nDESCRIPTION: Command for deleting all relationships matching a relation query in Ory Keto. It's recommended to first run without the --force flag to verify the operation is safe before actual deletion.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete-all.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple delete-all [flags]\n```\n\n----------------------------------------\n\nTITLE: Error response structure using Herodot error format in Go\nDESCRIPTION: Defines a standard error response structure with a JSON object containing an error message, following Ory's Herodot formatting for API error reporting. Used as default error responses for routes to ensure consistent error handling across APIs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_5\n\nLANGUAGE: Go\nCODE:\n```\n// Some Error\n//\n// Describe the error.\n//\n// swagger:model someError\n// type someError struct {\n// \tErrorExample string `json:\"error\"`\n// }\n//\n// swagger:route GET /admin/identities identities listIdentities\n//\n// ...\n//\n//\tResponses:\n//\t  default: someError\n//\n```\n\n----------------------------------------\n\nTITLE: Using the ory open account-experience registration command\nDESCRIPTION: Shows the basic syntax for executing the `ory open account-experience registration` command. This command is used to directly open the registration page associated with the Ory Account Experience. Optional flags can be appended.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-registration.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory open account-experience registration [flags]\n```\n\n----------------------------------------\n\nTITLE: Inherited options from parent commands\nDESCRIPTION: Options inherited from parent commands that can be used with the 'ory get oauth2-config' command, including configuration file path, quiet mode, and automatic confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-oauth2-config.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Invoking Ory Identities Configuration Retrieval - Ory CLI - Bash\nDESCRIPTION: This snippet demonstrates how to execute the 'ory get identity-config' CLI command with project and format options to export the identity configuration in YAML format. Requirements include the Ory CLI installed and appropriate permissions configured. The '--project' flag specifies the project identifier while '--format' determines the output serialization. The snippet redirects output to a YAML file. Inputs: Ory CLI setup, target project ID. Output: identity configuration file in YAML. Limitations: Access is restricted to projects the user can query.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-identity-config.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ ory get identity-config --project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Revoking Token with Client Credentials Using Hydra CLI - Shell\nDESCRIPTION: This advanced example revokes a token using explicit OAuth 2.0 client ID and secret flags. Dependencies include the Hydra CLI and valid client credentials. The primary parameters are --client-id, --client-secret, and the token string. This format is useful for scripts or automation where credentials must be specified directly. It outputs status or error messages to the console, and sensitive keys should be handled securely.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-revoke-token.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhydra revoke token --client-id a0184d6c-b313-4e70-a0b9-905b581e9218 --client-secret Hh1BjioNNm ciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNT\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Jsonnet Data Mapping for Ory CLI (Shell)\nDESCRIPTION: This shell command demonstrates encoding a Jsonnet file with claim mappings into Base64, which is required by Ory when uploading identity mapping configurations via CLI. The encoded output can be inserted directly as a configuration string in Ory Network or referenced by URL. It assumes `base64` utility is available. Input is the path to the Jsonnet file; output is the base64-encoded string. Ensure the resulting string is securely handled and full contents are correctly inserted in Ory configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Handling Multiple Identity Schemas with Ory in Go\nDESCRIPTION: This Go code example shows how to extract the identity schema ID from a user session and perform conditional logic based on the identity type. Using the Ory SDK, it acquires the session from an HTTP request, then uses a switch statement on the identity's `SchemaID` to distinguish between different identity schemas such as \"customer\", \"employee\", and a default fallback. Proper error handling after retrieving the session is implied but not fully shown here.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/10_managing-users-identities-metadata.mdx#_snippet_1\n\nLANGUAGE: Go\nCODE:\n```\n// This is an example program that can deal with all three types of identities\nsession, err := ory.SessionFromRequest(r)\n// some error handling\nswitch (session.Identity.SchemaID) {\n    case \"customer\":\n        // ...\n    case \"employee\":\n        // ...\n    case \"default\":\n        fallthrough\n    default:\n        // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Example JSON Structure for Login After Hooks\nDESCRIPTION: Illustrates the JSON5 structure of the `selfservice.flows.login.after` configuration object. It shows an array named `hooks` containing hook objects, with comments indicating the zero-based index of each hook. This structure is relevant when needing to identify the index for removing a specific hook.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_3\n\nLANGUAGE: json5\nCODE:\n```\n{\n  hooks: [\n    {\n      hook: \"some_other_hook\", // The index of this hook is '0'.\n    },\n    {\n      hook: \"revoke_active_sessions\", // The index of this hook is '1'.\n    },\n  ],\n  oidc: {\n    hooks: [],\n  },\n  password: {\n    hooks: [],\n  },\n  webauthn: {\n    hooks: [],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Protected Endpoints with Session Cookie via curl (Echo example)\nDESCRIPTION: Shows how to use curl to access a protected endpoint on an Echo-based application by providing the ory_kratos_session cookie. Requires a running Echo application and a valid session cookie. On success, the protected endpoint returns a response (such as \"pong\").\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_go.mdx#_snippet_7\n\nLANGUAGE: curl\nCODE:\n```\ncurl 'http://localhost:8080/ping' -b 'ory_kratos_session=<your-session-cookie-here>'\npong\n```\n\n----------------------------------------\n\nTITLE: Options for `kratos identities validate` (Shell)\nDESCRIPTION: Lists the command-line options specific to the `kratos identities validate` subcommand. The primary option is `-h` or `--help` which displays help information for this specific command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-validate.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for validate\n```\n\n----------------------------------------\n\nTITLE: Command-specific options for hydra delete oauth2-client\nDESCRIPTION: Options specific to the 'hydra delete oauth2-client' command. Currently, it only includes the help flag which displays usage information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-oauth2-client.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for oauth2-client\n```\n\n----------------------------------------\n\nTITLE: Assigning OIDC or SCIM External Data in Jsonnet - Jsonnet\nDESCRIPTION: Assigns input data from external sources (OpenID Connect claims or SCIM payload) to a local Jsonnet variable using std.extVar. This pattern is required as a first step for data mapping in custom Jsonnet scripts in Ory Kratos. Choose the appropriate extVar key according to the identity provider (\"claims\" for OIDC, \"scim\" for SCIM). The script does not produce output by itself but prepares the data for downstream use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims'); // For OIDC\n// or\nlocal scim = std.extVar('scim'); // For SCIM\n```\n\n----------------------------------------\n\nTITLE: Keto Configuration - YAML\nDESCRIPTION: This YAML configuration snippet defines a `blog_posts` namespace within the Ory Keto configuration file (keto.yml). It configures the read and write API endpoints for the Keto service.  This configuration is required to use relation tuples.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/migrating-legacy-policies.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nnamespaces:\n  - id: 0\n    name: blog_posts\n\nserve:\n  read:\n    host: 0.0.0.0\n    port: 4466\n  write:\n    host: 0.0.0.0\n    port: 4467\n```\n\n----------------------------------------\n\nTITLE: Available Options for ory delete jwk Command\nDESCRIPTION: Lists all available command flags and options that can be used with the 'ory delete jwk' command, including endpoint specification, output formatting, and project selection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-jwk.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string    The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string      Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for jwk\n      --project string     The project to use, either project ID or a (partial) slug.\n  -q, --quiet              Be quiet with output printing.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Installing Ory CLI with Scoop (Shell)\nDESCRIPTION: These commands install the Ory CLI on Windows using the Scoop package manager. The first command adds the official Ory scoop bucket, and the second command installs the `ory` package from the added bucket. Requires Scoop to be installed and configured on Windows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n> scoop bucket add ory https://github.com/ory/scoop.git\n> scoop install ory\n```\n\n----------------------------------------\n\nTITLE: Command Syntax for Updating Event Stream Using Ory CLI\nDESCRIPTION: Defines the command syntax for updating an event stream with the specified ID, including optional flags for project, format, AWS IAM role, and SNS topic. It also details help, quiet, and configuration options inherited from parent commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory update event-stream id [--project=PROJECT_ID] [--type=sns] [--aws-iam-role-arn=arn:aws:iam::123456789012:role/MyRole] [--aws-sns-topic-arn=arn:aws:sns:us-east-1:123456789012:MyTopic] [flags]\n```\n\n----------------------------------------\n\nTITLE: Attaching Mailchimp Webhook Action to Ory Registration Flow - Shell\nDESCRIPTION: These shell commands use the Ory CLI to patch the identity configuration of a project, inserting the webhook action after registration. The first command triggers the webhook after all successful registrations, while the second restricts it to cases where users sign up via password or social sign-in. Required arguments include your project and workspace IDs. The '--add' flag sets the registration hook with the contents of webhook-action.json. The expected output is a YAML-formatted diff showing the configuration change. Prerequisites: Ory CLI installed and sufficient permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/mailchimp.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n\n```\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/password/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n\n```\n\n----------------------------------------\n\nTITLE: Shell: List and Get Ory Identity Configuration\nDESCRIPTION: This shell commands are used to interact with the Ory CLI to get configuration information.  The first command, `ory list workspaces` lists available workspaces. The second command `ory list projects --workspace <workspace-id>` lists all available projects, requiring the workspace-id as input. The third command, `ory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml` retrieves the identity configuration of a specified project, in YAML format, and saves it to the 'identity-config.yaml' file, using the project and workspace ids as input parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/60_twitch.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Formatting Salted Passwords in Ory Identities - plaintext\nDESCRIPTION: Demonstrates the usage of a simple salting format by concatenating the salt and the user's password using the structure '{SALT}--{PASSWORD}'. No external dependencies are required. The inputs are a clear-text salt and password, producing a clear-text concatenated result used for further hashing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_7\n\nLANGUAGE: plaintext\nCODE:\n```\n{SALT}--{PASSWORD}\nsalt123--ory123\n```\n\n----------------------------------------\n\nTITLE: Checking Hydra Host Configuration for MySQL Storage - Shell\nDESCRIPTION: This snippet illustrates how to display host configuration options for Ory Hydra, emphasizing the correct usage of a MySQL DSN in the DATABASE_URL environment variable. It demonstrates that the 'parseTime=true' query parameter must be added to ensure proper handling of timestamp columns during database operations. Prerequisites include having Ory Hydra installed and available on the system PATH. The key parameter is the DATABASE_URL, which must use the required DSN format for MySQL. If 'parseTime=true' is omitted, timestamp fields will not operate correctly, leading to migration or runtime errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/faq.md#_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nhydra help host\n...\n   - MySQL: If DATABASE_URL is a DSN starting with mysql:// MySQL will be used as storage backend.\n        Example: DATABASE_URL=mysql://user:password@tcp(host:123)/database?parseTime=true\n\n        Be aware that the ?parseTime=true parameter is mandatory, or timestamps won't work.\n...\n```\n\n----------------------------------------\n\nTITLE: Connecting Ory Proxy with project slug and environment variables\nDESCRIPTION: Depicts usage of environment variables and CLI flags to connect the proxy to a specific project, particularly in automated environments, enhancing security with API keys and suppressing UI disruptions with quiet mode.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\n$ PROJECT_API_KEY=<project-api-key> ory proxy -q ...\n```\n\n----------------------------------------\n\nTITLE: Running the Express.js Development Server using Shell\nDESCRIPTION: Executes the `dev` script defined in `package.json`, typically starting the Express.js application using `nodemon` for automatic restarts on file changes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth2 Introspection Authenticator in an Access Rule\nDESCRIPTION: This YAML snippet shows how to configure the `oauth2_introspection` authenticator specifically within an Oathkeeper Access Rule (`access-rule-1.yaml`). It includes rule-specific settings like required scope, target audience, trusted issuers, pre-authorization, and how to extract the token, potentially overriding global configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_23\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: oauth2_introspection\n    config:\n      introspection_url: https://my-website.com/oauth2/introspection\n      scope_strategy: exact\n      required_scope:\n        - photo\n        - profile\n      target_audience:\n        - example_audience\n      trusted_issuers:\n        - https://my-website.com/\n      pre_authorization:\n        enabled: true\n        client_id: some_id\n        client_secret: some_secret\n        scope:\n          - introspect\n        token_url: https://my-website.com/oauth2/token\n      token_from:\n        query_parameter: auth-token\n        # or\n        # header: Custom-Authorization-Header\n        # or\n        # cookie: auth-token\n      introspection_request_headers:\n        x-forwarded-proto: https\n        x-foo: bar\n      retry:\n        max_delay: 300ms\n        give_up_after: 2s\n```\n\n----------------------------------------\n\nTITLE: Enabling and Customizing Verification Flow - Ory Configuration - YAML\nDESCRIPTION: This YAML snippet configures the Ory Identities self-service flow for address verification, enabling the use of code (or link) for verification. Important configuration options include method type (code/link), lifespan for code and flow validity, and whether to notify unknown recipients. Placeholders such as <project-id> and <workspace-id> must be replaced with real values when updating project settings. Proper indentation according to YAML standards is necessary for correct parsing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    code: # or link\n      enabled: true\n      config:\n        # Defines how long the verification or the recovery code is valid for (default 1h)\n        lifespan: 15m\n\n  flows:\n    verification:\n      use: code # Defines which method is used, one of 'code' or 'link'.\n      enabled: true\n\n      # Defines how long the verification flow (the UI interaction, not the link!)\n      # is valid for (default 1h)\n      lifespan: 15m\n\n      # Whether to notify unknown addresses, if verification is requested for them\n      notify_unknown_recipients: false\n```\n\n----------------------------------------\n\nTITLE: Handling Ory 422 Redirect Response for Social Sign-in in TypeScript\nDESCRIPTION: Handles a 422 HTTP status code from the Ory API when submitting a social sign-in choice. It extracts the `redirect_browser_to` URL from the error response, which points to the Identity Provider's authentication page, preparing for browser-based authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Code snippet fetched from: https://github.com/ory/kratos-selfservice-ui-react-native/blob/master/src/helpers/form.tsx\n// Fetched content starts at:         case 422:\n// Fetched content ends at:           )\n\n// Example error handling within a form submission function\nconst handleSubmit = (formData) => {\n  orySdk.updateLoginFlow({ flow: flow.id, updateLoginFlowBody: formData })\n    .catch((err) => {\n      switch (err.response?.status) {\n        case 422:\n          // This indicates a browser redirect is needed for social sign-in\n          const redirectUrl = err.response.data?.redirect_browser_to;\n          if (redirectUrl) {\n            // Call function to open the browser\n            openBrowserForAuthentication(redirectUrl);\n          } else {\n            console.error('422 response without redirect_browser_to URL');\n            // Handle error appropriately\n          }\n          return; // Stop further processing\n        // Other error cases...\n      }\n      // Handle other non-422 errors\n      console.error('Form submission error:', err);\n    });\n};\n```\n\n----------------------------------------\n\nTITLE: Mapping Subject Attributes with YAML in Ory Permissions - YAML\nDESCRIPTION: This YAML snippet shows how to associate a unique subject UUID with attributes such as subnet and office hours for use in Ory Keto Permissions. The UUID (e.g., c5b6454f-f79c-4a6d-9e1b-b44e04b56009) serves as a stable, high-entropy identifier for a subject, while the mapped attributes provide application-specific context. Dependencies include a UUID generation process and application logic to maintain this mapping; the application must ensure each request is mapped to the correct subject ID based on its attributes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/15_subjects.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nc5b6454f-f79c-4a6d-9e1b-b44e04b56009:\n  subnet: 192.168.0.0/24\n  office_hours: true\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Client for Production Domain (C#)\nDESCRIPTION: Provides the C# code snippet showing how to configure the `Ory.Client.Api.FrontendApi` client for a production environment. The `BasePath` is set to the production domain of the Ory Network or self-hosted Ory instance (e.g., `https://ory.example.org`), replacing the development tunnel URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_9\n\nLANGUAGE: csharp\nCODE:\n```\n// register a new Ory client with the URL set to the custom domain\nvar ory = new FrontendApi(new Configuration\n{\n\tBasePath = \"https://ory.example.org\"\n});\n```\n\n----------------------------------------\n\nTITLE: TypeScript Type Definitions for Ory Permission Language\nDESCRIPTION: Defines the core types used in the Ory Permission Language including Context, Namespace, and SubjectSet interfaces, providing the foundation for the permission model.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/ory-permission-language.mdx#_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype Context = { subject: never }\n\ninterface Namespace {\n  related?: { [relation: string]: Namespace[] }\n  permits?: { [method: string]: (ctx: Context) => boolean }\n}\n\ninterface Array<Namespace> {\n  includes(element: Namespace): boolean\n  traverse(iteratorfn: (element: Namespace) => boolean): boolean\n}\n\ntype SubjectSet<A extends Namespace, R extends keyof A[\"related\"]> = A[\"related\"][R] extends Array<infer T> ? T : never\n```\n\n----------------------------------------\n\nTITLE: Example of ory update opl Command Usage\nDESCRIPTION: Example of using the ory update opl command to update an OPL configuration from a file. Demonstrates how to specify the file path.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-opl.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory update opl --file /path/to/namespace_config.ts\n\nclass Example implements Namespace {}\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Token Request with Client Secret Post Authentication\nDESCRIPTION: This shell snippet illustrates how to make a POST request to the OAuth2 token endpoint using client_secret_post authentication. The client ID and secret are included in the request body as form parameters. This method is an alternative to basic authentication, especially when the client environment has limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/overview/oauth2-concepts.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nPOST /oauth2/token\nContent-Type: application/x-www-form-urlencoded\n\nclient_id=id&client_secret=secret\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands in Ory CLI\nDESCRIPTION: Lists the options inherited from parent commands including configuration path, output format settings, quiet mode, and automatic confirmation of dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-validate-identity.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Enabling Ory Kratos systemd Service on Startup Using Bash Shell\nDESCRIPTION: Enables the Kratos systemd service to start automatically at boot time by creating appropriate symbolic links within systemd startup targets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_15\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl enable kratos.service\nCreated symlink /etc/systemd/system/multi-user.target.wants/kratos.service  /etc/systemd/system/kratos.service.\n```\n\n----------------------------------------\n\nTITLE: Example Settings Flow JSON Response\nDESCRIPTION: This JSON snippet represents a sample response from the Ory API for settings flows. It demonstrates the structure of input elements, specifically related to the profile group. It includes attributes like 'name', 'type', and 'value'. It also includes validation errors within the messages array and metadata such as labels.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/profile.invalid.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.email\",\n    \"type\": \"email\",\n    \"value\": \"notanemail\",\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000001,\n      \"text\": \\\"\\\"notanemail\\\" isn't valid \\\"email\\\"\",\n      \"type\": \"error\"\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"E-Mail\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuration File Option for Ory CLI Commands\nDESCRIPTION: The '-c' or '--config' flag specifies the path to the Ory Network configuration file, allowing customization of network settings for the CLI operation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n-c, --config string   Path to the Ory Network configuration file.\n```\n\n----------------------------------------\n\nTITLE: Patching Passkey RP ID and Origins - Ory CLI\nDESCRIPTION: Provides the Ory CLI command to update the Relying Party (RP) ID and allowed origins for the Passkey configuration. This is used to resolve \"Relying party ID mismatch\" errors in local development or proxied environments by setting the RP ID to \"localhost\" and origins to \"http://localhost:3000\". Requires the Ory CLI and your Ory project/workspace IDs. Modifies the identity configuration and should be used cautiously as it can break Passkeys for users who signed up with a different RP ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/45_passkeys-webauthn-security-error.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/selfservice/methods/passkey/config/rp/id=\\\"localhost\\\"\" \\\n  --replace \"/selfservice/methods/passkey/config/rp/origins=[\\\"http://localhost:3000\\\"]\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Updating OAuth2 client using Console, CLI, SDK, and REST API\nDESCRIPTION: This snippet details how to update an existing OAuth2 client via the Ory Console interface, CLI command with project and workspace IDs, SDK code placeholder, and REST API link. The update involves modifying grant types, response types, scopes, redirect URIs, and other properties to adapt clients to changes or new requirements, ensuring secure and controlled modifications.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nory update oauth2-client --project <project-id> --workspace <workspace-id> {client.id} \\\n  --grant-type authorization_code --grant-type refresh_token  --grant-type client_credentials \\\n  --response-type code \\\n  --scope openid --scope offline_access \\\n  --token-endpoint-auth-method client_secret_post \\\n  --redirect-uri https://a-new-callback\n```\n\nLANGUAGE: Markdown\nCODE:\n```\n```mdx-code-block\nimport updateTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-update.ts'\n\n<Codes language=\"tsx\">{updateTs}</Codes>\n```\n```\n\n----------------------------------------\n\nTITLE: Starting Prometheus Server in Docker with Custom Configuration (Shell)\nDESCRIPTION: This snippet starts a Prometheus server as a Docker container, mounting the local prometheus.yml to the expected container path and configuring Prometheus to use it. The container is given the name 'prometheus' and is run detached, with host network and port 9090 published. Dependencies: Docker, prometheus.yml in the current directory. Inputs: Docker command arguments; Outputs: a running Prometheus container. Limitation: Proper file paths and Docker permissions are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\ndocker run \\\n  --config.file=/etc/prometheus/prometheus.yml \\\n  -v ./prometheus.yml:/etc/prometheus/prometheus.yml \\\n  --name prometheus \\\n  -d \\\n  --net=host\n  -p 9090:9090 \\\n  prom/prometheus\n\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Group Memberships Using Keto CLI and jq Filtering\nDESCRIPTION: The bash commands query Keto via its CLI to list all groups for which 'Dilan' is a member, outputting the result in JSON formatted and filtered by jq. This allows inspection of all roles assigned to a user in the RBAC system and aids in permission audits and debugging.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n# Get all groups for Dilan\nketo relation-tuple get --subject-id=Dilan --relation=member --format json --read-remote localhost:4466 | jq\n{\n  \"relation_tuples\": [\n    {\n      \"namespace\": \"groups\",\n      \"object\": \"community\",\n      \"relation\": \"member\",\n      \"subject_id\": \"Dilan\"\n    },\n    {\n      \"namespace\": \"groups\",\n      \"object\": \"marketing\",\n      \"relation\": \"member\",\n      \"subject_id\": \"Dilan\"\n    }\n  ],\n  \"next_page_token\": \"\"\n}\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Account Not Active in Ory (JSON)\nDESCRIPTION: Displayed when a user tries to log in to an account that has not yet been activated/verified. Statically defined; message id is 4000010.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_33\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000010,\n  \"text\": \"Account not active yet. Did you forget to verify your email address?\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving OAuth2/OIDC Configuration (Ory CLI, Bash)\nDESCRIPTION: Command to fetch the current OAuth2/OpenID Connect configuration from a specified Ory Network project and workspace, saving it as a pretty-printed JSON file. This command follows the same pattern as retrieving the identity configuration and is used to manage the OAuth2/OIDC settings via Git.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nory get oauth2-config --workspace \"<workspace-id>\" --project \"<project-id>\" --format json-pretty > oauth2-config.json\n```\n\n----------------------------------------\n\nTITLE: Configuring MFA UI URL - YAML\nDESCRIPTION: This YAML snippet configures the `ui_url` for the MFA flow within the Kratos configuration. The `selfservice.flows.mfa.ui_url` specifies the URL where the MFA user interface is hosted.  It is crucial to set this value to the correct URL of your application's MFA UI. Dependencies include the Kratos framework and a properly configured YAML file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/mfa.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    mfa:\n      ui_url: http://my-app.com/mfa\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Hydra Default Scope Behavior with Ory CLI\nDESCRIPTION: Shows how to use the Ory CLI to modify the OAuth2 configuration for a specific Ory project. This command sets the `client_credentials/default_grant_allowed_scope` setting to `true`, making Ory Hydra grant the OAuth2 Client's configured scopes by default when no scope is explicitly requested during a `client_credentials` grant, mirroring MITREid's behavior. Replace `{your-project-id}` with the actual Ory project ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/migrating-from-mitreid.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config \"{your-project-id}\" \\\n  --replace '/oauth2/client_credentials/default_grant_allowed_scope=true'\n```\n\n----------------------------------------\n\nTITLE: Defining Relationships in Ory Permission Language Using TypeScript\nDESCRIPTION: This snippet enhances the namespaces by adding 'related' properties representing many-to-many relationships between users and documents or folders. Each relationship is pluralized (e.g., 'owners', 'editors') to reflect collections of associated users or folders. The classes implement Namespace interface and use TypeScript syntax. This establishes the structure to support permission checks based on these relations. Dependency: '@ory/keto-namespace-types'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/modeling/create-permission-model.mdx#_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { Namespace, Context } from \"@ory/keto-namespace-types\"\n\nclass User implements Namespace {}\n\nclass Document implements Namespace {\n  // highlight-start\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n  // highlight-end\n}\n\nclass Folder implements Namespace {\n  // highlight-start\n  related: {\n    owners: User[]\n    editors: User[]\n    viewers: User[]\n    parents: Folder[]\n  }\n  // highlight-end\n}\n```\n\n----------------------------------------\n\nTITLE: Command Syntax for hydra delete jwk in CLI\nDESCRIPTION: Shows the command syntax for deleting one or multiple JSON Web Key Sets by specifying their IDs, with optional flags. It provides the basic structure necessary to execute deletion operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwk.md#_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhydra delete jwk <id-1> [<id-2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Starting Hydra Systemd Service\nDESCRIPTION: This command starts the `hydra.service` systemd service, which runs Ory Hydra in the background. It initiates the execution of the service according to its configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_19\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl start hydra.service\n```\n\n----------------------------------------\n\nTITLE: Initializing JSON Schema\nDESCRIPTION: This snippet initializes a basic JSON schema using the `draft-07` standard. It specifies the schema URL and declares the root type as an object. This is the base for any custom identity schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_0\n\nLANGUAGE: JSON5\nCODE:\n```\n{\n  $schema: \"http://json-schema.org/draft-07/schema#\",\n}\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Token Request with Client Secret Basic Authentication\nDESCRIPTION: This shell snippet shows how to make a POST request to the OAuth2 token endpoint using client_secret_basic authentication. The client ID and secret are base64 encoded and included in the Authorization header. This method is typically used when the client can securely store the secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/overview/oauth2-concepts.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nPOST /oauth2/token\nHost: server.example.com\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic base64(urlencoded(id):urlencoded(secret))\n```\n\n----------------------------------------\n\nTITLE: HTTP Server Configuration Example\nDESCRIPTION: Provides a YAML configuration snippet demonstrating the HTTP delivery strategy.  This configures the `courier` service to send emails through an HTTP server. It includes the URL, method, headers, and authentication details (optional).  A base64 encoded body is also part of the configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n```yaml title=\"config.yml\"\ncourier:\n  delivery_strategy: http\n  http:\n    request_config:\n      url: https://mail-sender.example.com\n      method: POST\n      body: base64://... # See below for the default payload and available variables\n      headers:\n        Content-Type: application/json\n      auth: # leave out, if your server doesn't require authentication, but note that we don't recommend that\n        type: basic_auth # or api_key\n        config:\n          user: my-username\n          password: my-password\n          # if you want to use an API key (type: api_key), use the following config instead:\n          # name: my-api-name\n          # value: my-api-key-value\n          # in: header # or cookie\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Docker Image Tag in Helm Chart YAML\nDESCRIPTION: This YAML snippet specifies how to set the Docker image repository and tag in the Helm chart values.yaml file to upgrade Ory Hydra OEL. The `image.repository` points to the Ory Enterprise Docker registry, and `image.tag` should be replaced with the desired Ory Hydra OEL image tag version. This update instructs Helm to deploy the new image during upgrade.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\nimage:\n  repository: europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel\n  tag: <replace-with-current-image-tag>\n# ...\n```\n\n----------------------------------------\n\nTITLE: Clone and Install Sample Application\nDESCRIPTION: These bash commands clone a sample Node.js application from GitHub, navigate into the project directory, and install the necessary dependencies using `npm i`.  The application is designed to provide custom login and consent pages for the OAuth2 flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ngit clone git@github.com:ory/hydra-login-consent-node.git\ncd hydra-login-consent-node/\nnpm i\n```\n\n----------------------------------------\n\nTITLE: Configuring TOTP Account Name in Custom Identity Schema (JSON)\nDESCRIPTION: Provides a JSON snippet demonstrating how to customize an Ory Kratos identity schema to specify which trait (e.g., email) should be used as the account name displayed in the user's TOTP authenticator app. This is done by adding `\"totp\": { \"account_name\": true }` within the `ory.sh/kratos.credentials` object for the desired trait.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        // highlight-start\n        \"email\": {\n          // highlight-end\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"Your E-Mail\",\n          \"minLength\": 3,\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              // ...\n              // highlight-start\n              \"totp\": {\n                \"account_name\": true\n              }\n              // highlight-end\n            }\n            // ...\n          }\n        }\n        // ...\n      }\n      // ...\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Allow Custom Claims at Top Level in JWT Access Token with Ory CLI\nDESCRIPTION: Modifies the Ory OAuth2 configuration to explicitly allow a list of claims (e.g., `some_custom_claim`) to appear directly at the top level of a JWT access token payload. This configuration update is applied using the Ory CLI patch command, targeting a specific project and workspace. It overrides the default behavior where custom claims are typically nested within the `ext` claim.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/oauth2/allowed_top_level_claims=\\[\\\"some_custom_claim\\\"\\]\"\n```\n\n----------------------------------------\n\nTITLE: Setting Public Subject Identifier Algorithm in Ory OAuth2 - Shell\nDESCRIPTION: This shell snippet shows how to configure the Ory OAuth2/OpenID Connect server to use the 'public' subject identifier algorithm, which provides the same 'sub' value across all clients. It uses the Ory CLI's patch command with parameters for project and workspace IDs. The command replaces the 'supported_types' array to only include 'public'. Dependencies include having the Ory CLI installed and valid project and workspace identifiers passed as parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/openid.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/oidc/subject_identifiers/supported_types=[\\\"public\\\"]\"\n```\n\n----------------------------------------\n\nTITLE: Importing Ory Permissions Configuration to Ory Network\nDESCRIPTION: Command to import a configuration file from a self-hosted Ory Keto instance to Ory Permissions in the Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update permission-config --project <project-id> --workspace <workspace-id> --file permission-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Importing React Components\nDESCRIPTION: Imports necessary React components for rendering tabs and code blocks in the documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n```mdx-code-block\nimport Tabs from \\\"@theme/Tabs\\\"\nimport TabItem from \\\"@theme/TabItem\\\"\nimport CodeBlock from \\\"@theme/CodeBlock\\\"\n```\n```\n\n----------------------------------------\n\nTITLE: Ory Patch OPL Example - TypeScript Namespace\nDESCRIPTION: Demonstrates an example of using the `ory patch opl` command to update the Ory Permission Language configuration using a TypeScript file. It shows a basic TypeScript class implementing a Namespace interface, which can then be used to update the OPL configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-opl.md#_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nclass Example implements Namespace {}\n```\n\n----------------------------------------\n\nTITLE: React.js Code for Checkbox Input Node\nDESCRIPTION: Reference to a React.js component implementation for checkbox inputs, enabling full control of form state without relying on HTML tricks like hidden fields. Demonstrates how to programmatically handle checkbox controls in React.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nhttps://github.com/ory/kratos-react-nextjs-ui/blob/master/pkg/ui/NodeInputCheckbox.tsx\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering API Documentation Component in MDX\nDESCRIPTION: This code snippet imports a theme API component and an API specification JSON file, then renders the API component with the specified overrides. It enables embedding interactive API documentation within the site, relying on the theme's API component for display logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/reference/api.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport API from '@theme/API'\nimport spec from './api.json'\n\n<API override={spec} />\n```\n\n----------------------------------------\n\nTITLE: Adding a required website field to Identity Schema JSON\nDESCRIPTION: A diff showing how to modify the Identity Schema JSON to require a 'website' trait field. This demonstrates how to add fields that might not be provided by upstream identity providers during OAuth/OIDC registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_6\n\nLANGUAGE: diff\nCODE:\n```\n{\n  \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json\",\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Person\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n+        \"website\": {\n+          \"type\": \"string\"\n+        }\n      },\n      \"required\": [\n        \"email\",\n+        \"website\"\n      ],\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Hydra Migrate Status Command Options\nDESCRIPTION: Available flags for customizing the behavior of the migrate status command, including blocking until migrations complete, formatting output, and connection options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-status.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --block           Block until all migrations have been applied\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for status\n  -q, --quiet           Be quiet with output printing.\n  -e, --read-from-env   If set, reads the database connection string from the environment variable DSN or config file key dsn.\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration File (Shell)\nDESCRIPTION: This shell command uses the Ory CLI to apply an updated identity configuration file, finalizing the provider integration. Required flags include project and workspace IDs and the path to the YAML file modified earlier. Inputs: the updated config file path and correct project/workspace identifiers. The output is a CLI process to update the remote Ory configuration. Authentication permissions and correct YAML structure are prerequisites; improper IDs or corrupted YAML will cause operation failure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Enabling Passwords in YAML\nDESCRIPTION: This YAML snippet enables or disables password authentication methods within the Ory self-service configuration. It sets the 'enabled' flag to true, allowing users to authenticate with passwords. This configuration is done within the 'selfservice' and 'methods' sections of the 'config.yml' file.  The 'password' method is configured here. There are no parameters here, this snippet just toggles functionality.  The expected output is password authentication being either enabled or disabled. This snippet needs to be located inside the 'selfservice' block.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/password.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\n```yaml title=\"config.yml\"\nselfservice:\n  methods:\n    password:\n      enabled: true\n```\n```\n\n----------------------------------------\n\nTITLE: Requesting Multiple Audiences via OAuth2 Authorization Endpoint Using URL Query Parameters\nDESCRIPTION: This snippet demonstrates how developers can request multiple audiences during OAuth 2.0 Authorization Code, Implicit, or hybrid flows by passing the 'audience' query parameter to the `/oauth2/auth` endpoint. The 'audience' value contains multiple URL-encoded audience strings separated by URL-encoded spaces (`+` or `%20`). The audiences requested must be validated against those allowed in the OAuth2 client configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/audiences.mdx#_snippet_1\n\nLANGUAGE: text\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/oauth2/auth\n  ?client_id=...\n  &scope=...\n  &audience=https://api.my-cloud.com/user+https://some-tenant.my-cloud.com/\n```\n\n----------------------------------------\n\nTITLE: Defining OpenAPI Response Model and Linking to Route (Go)\nDESCRIPTION: Shows how to define a response model (`identityList` as a slice of `Identity`) using `swagger:model` and then link it within the `swagger:route` definition's `Responses` section. This example associates the `identityList` model with the 200 OK response for the `adminListIdentities` operation. It also shows how to specify other responses like `500: jsonError`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_31\n\nLANGUAGE: go\nCODE:\n```\n// A list of identities.\n// swagger:model identityList\n// nolint:deadcode,unused\ntype identityList []Identity\n\n// swagger:route GET /identities v0alpha0 adminListIdentities\n//\n// List Identities\n//\n// Lists all identities. Doesn't support search at the moment.\n//\n// Learn how identities work in [Ory Kratos' User And Identity Schema Documentation](https://www.ory.sh/docs/next/kratos/concepts/identity-user-model).\n//\n//     Produces:\n//     - application/json\n//\n//     Schemes: http, https\n//\n//     Responses:\n//       200: identityList\n//       500: jsonError\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Node.js SDK for Local Tunnel Development using TypeScript\nDESCRIPTION: Demonstrates initializing the Ory Frontend API client (`FrontendApi`) in TypeScript (Node.js) using the `@ory/client` package. It configures the `basePath` to `http://localhost:4000` to route API calls through the local Ory Tunnel, essential for handling session cookies correctly during local development. The `withCredentials: true` option ensures cookies are sent with requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/local-development.mdx#_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Configuration, FrontendApi } from \"@ory/client\"\n\nconst frontend = new FrontendApi(\n  new Configuration({\n    // Replace\n    //  basePath: \"https://$PROJECT_SLUG.projects.oryapis.com\",\n    // with\n    basePath: \"http://localhost:4000\",\n    baseOptions: {\n      withCredentials: true,\n    },\n  }),\n)\n\nconst { data: login } = await frontend.createBrowserLoginFlow()\nconst { data: session } = await frontend.toSession()\n// ...\n```\n\n----------------------------------------\n\nTITLE: Forwarding HTTP Requests via Ory Oathkeeper Reverse Proxy Using Bash\nDESCRIPTION: This snippet shows an example HTTP GET request sent to the Ory Oathkeeper reverse proxy. The request contains an authorization token and targets a specific service path. It demonstrates how Oathkeeper acts as a reverse proxy, forwarding authorized requests to the upstream backend service. Key inputs include the HTTP method, URL path, host, and authorization header. The example illustrates interaction with defined access control rules, enabling or denying forwarding of requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/index.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nGET /my-service/whatever HTTP/1.1\nHost: oathkeeper-proxy:4455\nAuthorization: bearer some-token\n```\n\nLANGUAGE: bash\nCODE:\n```\nGET /my-service/whatever HTTP/1.1\nHost: my-backend-service:4455\nAuthorization: bearer some-token\n```\n\n----------------------------------------\n\nTITLE: Batch Creating Permission Tuples via Keto CLI Using a Relation Tuple File\nDESCRIPTION: This bash command pipeline parses a file named 'policies.rts' containing relation tuples in Keto syntax, converts it to JSON, and creates these tuples in Ory Keto via the CLI. It returns success or error messages based on the result. This is used to bulk import RBAC definitions to the Keto server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/rbac.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple parse policies.rts --format json | \\\n  keto relation-tuple create - >/dev/null \\\n  && echo \"Successfully created tuple\" \\\n  || echo \"Encountered error\"\n```\n\n----------------------------------------\n\nTITLE: Specifying Account Recovery Address in Identity Schema (JSON Diff)\nDESCRIPTION: This JSON diff shows how to modify an Ory Kratos identity schema to designate an email trait as the recovery address. It adds the `ory.sh/kratos.recovery.via` property set to `email` within the `email` trait's properties, enabling Ory Kratos to use this field for sending recovery messages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/account-recovery-password-reset.mdx#_snippet_2\n\nLANGUAGE: diff\nCODE:\n```\n {\n   \"$id\": \"https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json\",\n   \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n   \"title\": \"Person\",\n   \"type\": \"object\",\n   \"properties\": {\n     \"traits\": {\n       \"type\": \"object\",\n       \"properties\": {\n         \"email\": {\n           \"type\": \"string\",\n           \"format\": \"email\",\n           \"ory.sh/kratos\": {\n             \"credentials\": {\n               \"password\": {\n                 \"identifier\": true\n               }\n             },\n+            \"recovery\": {\n+              \"via\": \"email\"\n+            }\n           }\n         }\n       }\n       \"additionalProperties\": false\n     }\n   }\n }\n```\n\n----------------------------------------\n\nTITLE: Authentication Context Provider in React Native\nDESCRIPTION: The '<AuthProvider>' component wraps the React component tree, providing authentication state, session management, and methods across the app for login, logout, and session refresh functionalities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nexport default\n// AuthProvider component setup that supplies authentication context to app\n```\n\n----------------------------------------\n\nTITLE: Enabling and Configuring 'anonymous' Authenticator Globally\nDESCRIPTION: This YAML snippet shows how to enable the 'anonymous' authenticator in the global Oathkeeper configuration (`oathkeeper.yml`) and configure the default `subject` name. This makes the authenticator available and sets the default anonymous subject for all rules that use it without overriding the config.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  anonymous:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n\n    config:\n      subject: guest\n```\n\n----------------------------------------\n\nTITLE: Displaying Help for Oathkeeper Version Command - Shell\nDESCRIPTION: This snippet illustrates how to display help information for the 'oathkeeper version' command using the '-h' or '--help' flag. It requires the Oathkeeper CLI to be installed and provides a concise description of command usage. No additional input is required, and output is a help message describing options for the version command, making it useful for first-time or reference usage.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-version.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\noathkeeper version --help\n```\n\n----------------------------------------\n\nTITLE: Basic Usage for Getting ORY Identities by ID - CLI\nDESCRIPTION: This is the fundamental command structure for retrieving one or more ORY identities. You provide the IDs of the identities you want to fetch as arguments, followed by optional flags to control output format or other options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-identity.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory get identity [id-1] [id-2] [id-n] [flags]\n```\n\n----------------------------------------\n\nTITLE: Examples of Using ory get project Command in Bash\nDESCRIPTION: Example usage of the 'ory get project' command showing both default tabular output and JSON format output. The command retrieves project details including ID, slug, state, and name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-project.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory get project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89\n\nID\t\tecaaa3cb-0730-4ee8-a6df-9553cdfeef89\nSLUG\tgood-wright-t7kzy3vugf\nSTATE\trunning\nNAME\tExample Project\n\n$ ory get project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 --format json\n\n{\n  \"name\": \"Example Project\",\n  \"identity\": {\n\t\"services\": {\n\t  \"config\": {\n\t\t\"courier\": {\n\t\t  \"smtp\": {\n\t\t\t\"from_name\": \"...\"\n\t\t  }\n\t\t  // ...\n\t\t}\n\t  }\n\t}\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching the JSON Web Key Set (JWKS) for JWT verification\nDESCRIPTION: Provides the endpoint URL for retrieving the public keys used to verify JWTs issued by the proxy, enabling validation of session tokens and understanding JWT structure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_7\n\nLANGUAGE: Shell\nCODE:\n```\nhttp://127.0.0.1:4000/.ory/jwks.json\n```\n\n----------------------------------------\n\nTITLE: Executing Makefile Format Target\nDESCRIPTION: Runs the `format` target defined in the project's `Makefile`. This command is used to automatically format the code according to project conventions, typically involving tools like `gofmt`, `prettier`, or similar depending on the project's language. It should be executed before submitting a pull request if a `Makefile` is present.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nmake format\n```\n\n----------------------------------------\n\nTITLE: Setting Redirect URI for DingTalk OAuth App - Shell\nDESCRIPTION: This snippet shows the redirect URI that needs to be set in the DingTalk OAuth application configuration. This URI is crucial for handling the authentication response from DingTalk.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/dingtalk\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for hydra perform client-credentials\nDESCRIPTION: Lists the command-line options inherited from parent commands that apply to `hydra perform client-credentials`. These include setting the target API endpoint (via `-e` or `ORY_SDK_URL`), specifying output format, adding custom HTTP headers, enabling quiet mode, and skipping TLS certificate verification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-client-credentials.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Mapping Google Claims to Ory Traits using Jsonnet (Console)\nDESCRIPTION: This Jsonnet snippet demonstrates how to map user data (claims) received from Google to Ory Identity traits when configuring via the Ory Console. It maps the 'email' claim conditionally based on 'email_verified' status and includes commented-out examples for mapping 'given_name', 'family_name', and the Google Workspace hosted domain ('hd'). This mapping is applied within the 'Data mapping' section of the Google provider configuration in the Ory Console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/10_google.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n      // Google can return the user's full name as a single string.\n      // Make sure to adjust your identity schema to store the first and last name as separate traits.\n      // first_name: claims.given_name,\n      // last_name: claims.family_name,\n      //\n      // hd is the hosted domain of the user's email address.\n      // [if 'hd' in claims && claims.email_verified then 'hd' else null]: claims.hd,    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Identity Metadata in Jsonnet\nDESCRIPTION: Shows how to map claims not only to identity traits but also to `metadata_public` and `metadata_admin` fields within the identity. This is useful for storing provider-specific information that shouldn't be user-editable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_6\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      email: claims.email\n    },\n    metadata_public: {\n      discord_username: claims.discord_username,\n    },\n    metadata_admin: {\n      // ...\n    },\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Plaintext fallback email template using gotmpl for verification email\nDESCRIPTION: This snippet provides a plaintext version of the verification email template, using gotmpl syntax to include the verification URL within plain text. It serves as a fallback when HTML emails cannot be delivered and relies solely on text with embedded template logic.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_5\n\nLANGUAGE: Go\nCODE:\n```\nHi, please verify your account by clicking the following link: {{ .VerificationURL }}\n```\n\n----------------------------------------\n\nTITLE: Querying Ory Identities Configuration with Default Project - Ory CLI - Bash\nDESCRIPTION: This example shows how to invoke 'ory get identity-config' using the '--format json' flag, resulting in JSON output of the identity configuration for the currently-selected project. It assumes that the default Ory project is already configured or selected through prior CLI operations. Input: Pre-selected Ory project. Output: configuration in JSON format printed to stdout. Dependencies include Ory CLI and an active session.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-identity-config.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory get identity-config --format json   # uses currently selected project\n```\n\n----------------------------------------\n\nTITLE: WebSocket Index HTML\nDESCRIPTION: This is the HTML file for the WebSocket service.  It contains the structure, styling, and potentially client-side JavaScript code to connect to the WebSocket server.  The frontend interacts with the WebSocket endpoint to send and receive messages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_11\n\nLANGUAGE: HTML\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Enabling 'unauthorized' Authenticator Globally in Ory Oathkeeper\nDESCRIPTION: This YAML snippet shows how to enable the 'unauthorized' authenticator in the global Oathkeeper configuration (`oathkeeper.yml`). When enabled globally or used in a rule, this authenticator rejects all requests as unauthorized.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nunauthorized:\n  # Set 'enabled' to 'true' if the authenticator should be enabled and 'false' to disable the authenticator. Defaults to 'false'.\n  enabled: true\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI delete commands syntax - Shell\nDESCRIPTION: The syntax for `ory delete` commands has been updated in v1. Project and workspace are now identified using explicit flags (`--project`, `--workspace`) or environment variables (`ORY_PROJECT`, `ORY_WORKSPACE`) instead of the v0 positional argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n- ory delete access-tokens|event-stream|identity|jwk|oauth2-client|organization|relationships <project>\n+ ory delete access-tokens|event-stream|identity|jwk|oauth2-client|organization|relationships --project <project>\n+ ory delete access-tokens|event-stream|identity|jwk|oauth2-client|organization|relationships --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory delete access-tokens|event-stream|identity|jwk|oauth2-client|organization|relationships\n```\n\n----------------------------------------\n\nTITLE: Layout Template with Handlebars\nDESCRIPTION: This code snippet shows a main layout template for the user interface to manage the recovery flow using Handlebars. This template provides the base structure and common elements for all pages related to recovery within the application. Dependencies: Handlebars. Prerequisites: Handlebars engine set up correctly. Expected Input: UI data for the recovery flow. Output: HTML for the recovery flow. Limitations: Dependent on the structure of the application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_33\n\nLANGUAGE: handlebars\nCODE:\n```\nimport recoveryExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/recovery-express.ts'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identity Configuration using Ory CLI\nDESCRIPTION: Shows Ory CLI commands to list workspaces and projects, and then retrieve the current identity configuration for a specific project, saving it to `identity-config.yaml`. Requires the Ory CLI to be installed and configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration with CLI - Shell\nDESCRIPTION: This shell command uses the 'ory' CLI to update the identity configuration using a locally modified YAML file. Requires 'ory' CLI installed and authenticated, along with correct project and workspace IDs. The configuration file input must be a valid Ory YAML config including changes for LinkedIn provider. Does not validate the config before upload; syntax or structure errors may cause the update to fail.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n\n```\n\n----------------------------------------\n\nTITLE: Creating the Required Output Structure for Ory Kratos - Jsonnet\nDESCRIPTION: Defines the required output JSON structure for Ory Kratos identity objects in Jsonnet. This snippet returns an object containing identity traits, public/admin metadata, and an array for storing verified addresses, each with its verification method. Used as the root object returned from custom mapping scripts. Output must adhere to this schema for correct integration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/jsonnet.mdx#_snippet_1\n\nLANGUAGE: Jsonnet\nCODE:\n```\n{\n  identity: {\n    traits: {},             // Custom traits for the identity\n    metadata_public: {},    // Public metadata visible to the user\n    metadata_admin: {},     // Admin metadata visible only to administrators\n    verified_addresses: [{  // Addresses listed here will be marked as verified\n      value: string,        // Verified address value (e.g., the email address)\n      via: \"email\"          // Verification method (e.g., \"email\")\n    }]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking Active Sessions for Specific Login Methods Using Ory CLI\nDESCRIPTION: Uses the Ory CLI `patch identity-config` command to add the `revoke_active_sessions` hook specifically to the `after` hooks for `password`, `oidc`, and `webauthn` login methods within the specified Ory project configuration. This allows fine-grained control, revoking sessions only when users log in via these particular methods.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --add '/selfservice/flows/login/after/password/hooks=[{\"hook\": \"revoke_active_sessions\"}]' \\\n  --add '/selfservice/flows/login/after/oidc/hooks=[{\"hook\": \"revoke_active_sessions\"}]' \\\n  --add '/selfservice/flows/login/after/webauthn/hooks=[{\"hook\": \"revoke_active_sessions\"}]'\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Hydra OEL Service Using Docker\nDESCRIPTION: This Docker command starts the Ory Hydra OEL service by running the container with specified ports exposed (4444 and 4445) and database connection string set via the `DSN` environment variable. The service runs in 'serve all' mode using the provided configuration file. This command is used post-migration to serve all Hydra components and complete the upgrade process in non-Helm environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ndocker run \\\n  -p 4444:4444 -p 4445:4445 \\\n  -e DSN=your_database_connection_string \\\n  europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel:<new-version-tag> \\\n  -- serve all -f /path/to/config.yaml\n```\n\n----------------------------------------\n\nTITLE: Submitting Registration with cURL (Native)\nDESCRIPTION: This shell script demonstrates how to submit a registration flow in a native environment using cURL. It sends a POST request to the `/self-service/registration` endpoint, including the necessary form fields from the identity schema. No need to handle cookies since it's a native flow. Prerequisites: cURL and access to the Ory API. Expected output: success/failure response from the API. Limitations: This example is specific to the native flow and does not require a CSRF token.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_22\n\nLANGUAGE: shell\nCODE:\n```\nimport submitRegistrationCurlApi from '!!raw-loader!../../../code-examples/curl/registration/submit-registration-api.sh'\n```\n\n----------------------------------------\n\nTITLE: YAML Configuration for Custom Email Templates in Ory Kratos\nDESCRIPTION: This snippet defines custom email templates in YAML format for the Ory Kratos configuration file. It specifies template override paths and details verification email templates with HTML and plaintext bodies, and optional subjects, supporting resource URIs. Dependencies include the correct path setup and template files (HTML, base64, or file-based). It manages fallback to default templates if custom ones are unavailable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/02_mail-courier-templates.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\ncourier:\n  template_override_path: /conf/courier-template\n  # ...\n  templates:\n    verification:\n      valid:\n        email:\n          body:\n            html: https://some-remote-resource/gotmpl\n            plaintext: base64://SGV5IHlvdSBkZWNvZGVkIG1lIDop\n          # optionally, define the subject\n          subject: file://some-file/subject.gotmpl\n```\n\n----------------------------------------\n\nTITLE: Validating Identity Files using Ory Kratos CLI - shell\nDESCRIPTION: This shell snippet demonstrates how to invoke the \"kratos validate identity\" command, providing one or more local JSON files containing identities for validation. The command checks the supplied data against the Ory Kratos identity schema and API expectations. Input files should be valid JSON (either single identity objects or arrays), and the tool accepts additional flags to control output format, API endpoint, and verbosity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-validate-identity.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos validate identity file.json [file-2.json] [file-3.json] [file-n.json] [flags]\n\n```\n\n----------------------------------------\n\nTITLE: Options for the ory list relation-tuples Command\nDESCRIPTION: Lists the specific command-line flags available for the `ory list relation-tuples` command. These options allow filtering by namespace, object, relation, subject ID, or subject set (using the format 'namespace:object#relation'). Pagination is controlled using `page-size` (default 100) and `page-token`. The `--project` flag specifies the target Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-relation-tuples.md#_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help                 help for relation-tuples\n      --namespace string     Set the requested namespace\n      --object string        Set the requested object\n      --page-size int32      maximum number of items to return (default 100)\n      --page-token string    page token acquired from a previous response\n      --project string       The project to use\n      --relation string      Set the requested relation\n      --subject-id string    Set the requested subject ID\n      --subject-set string   Set the requested subject set; format: \"namespace:object#relation\"\n```\n\n----------------------------------------\n\nTITLE: Loading Configuration from YAML Files\nDESCRIPTION: This snippet shows a basic YAML configuration. The configuration system supports loading from YAML files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nsome_config: value\n```\n\n----------------------------------------\n\nTITLE: Creating a PostgreSQL database\nDESCRIPTION: This command creates a new PostgreSQL database named 'hydra'. It must be executed under the 'postgres' user or a user with appropriate privileges.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncreatedb hydra\n```\n\n----------------------------------------\n\nTITLE: Using hydra import oauth2-client Command\nDESCRIPTION: Basic command syntax for importing OAuth 2.0 clients from JSON files. The command accepts one or more JSON files as arguments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-oauth2-client.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra import oauth2-client <file-1.json> [<file-2.json> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Adding Scoop Bucket Configuration for Ory Projects - YAML\nDESCRIPTION: Outlines the setup for publishing to a Scoop bucket (Homebrew alternative for Windows) in goreleaser. Requires creating a Scoop-specific repository under the 'ory' organization and setting project-specific metadata. Place into '.goreleaser.yml'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\nscoop:\n  bucket:\n    owner: ory\n    name: scoop-$PROJECT_NAME\n  homepage: https://www.ory.sh\n  commit_author:\n    name: aeneasr\n    email: aeneas@ory.sh\n\n```\n\n----------------------------------------\n\nTITLE: Creating a New Ory Project via API in Bash\nDESCRIPTION: Illustrates how to create a new Ory Network project by sending a POST request with the project configuration JSON payload. Required headers specify content type and authorization. The payload includes project name, environment (dev, prod, or stage), home region, and the workspace ID. The API response returns the full project configuration. Requires WORKSPACE_API_KEY and WORKSPACE_ID environment variables.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request POST 'https://api.console.ory.sh/projects' \\\n  --header \"Content-Type: application/json\" \\\n  --header \"Authorization: Bearer ${WORKSPACE_API_KEY}\" \\\n  --data '{\n    \"name\": \"example\",\n    \"environment\": \"dev\",\n    \"home_region\": \"us-west\",\n    \"workspace_id\": \"'\"${WORKSPACE_ID}\"'\"\n  }' | jq\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Array Minimum Items Constraint in Ory (JSON)\nDESCRIPTION: Signals too few items in an array (minimum 3 required, 2 found). The context provides actual and required counts. Used in array input validations; id is 4000024.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_47\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000024,\n  \"text\": \"minimum 3 items allowed, but found 2 items\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual_items\": 2,\n    \"min_items\": 3\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Building and Publishing Docker Images with Goreleaser - YAML\nDESCRIPTION: Specifies docker build and publish options within a goreleaser config. Lists Dockerfile, executable binaries to include, and image naming templates for versioning. Requires Docker and a Docker Hub repository. Ensures multi-version image tags for application distribution.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# Build dockerfiles\ndockers:\n  - dockerfile: Dockerfile\n    binaries:\n      - $PROJECT_NAME\n    image_templates:\n      - \"oryd/$PROJECT_NAME:v{{ .Major }}\"\n      - \"oryd/$PROJECT_NAME:v{{ .Major }}.{{ .Minor }}\"\n      - \"oryd/$PROJECT_NAME:v{{ .Major }}.{{ .Minor }}.{{ .Patch }}\"\n      - \"oryd/$PROJECT_NAME:latest\"\n\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Kratos Docker Image\nDESCRIPTION: This Dockerfile shows how to create a custom Kratos Docker image by using the official Kratos Docker image as the base and adding custom configuration files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_5\n\nLANGUAGE: dockerfile\nCODE:\n```\nFROM oryd/kratos:{version}\nCOPY contrib/quickstart/kratos/email-password/kratos.yml /home/ory\n```\n\n----------------------------------------\n\nTITLE: Creating Native Login Flow - Ory Go SDK\nDESCRIPTION: Demonstrates how to initiate a native login flow for API clients (mobile/native apps) using the Ory Go SDK. This involves calling the 'createNativeLoginFlow' API endpoint. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Server Block (Nginx)\nDESCRIPTION: This Nginx configuration snippet defines a basic server block to listen on port 80 and serve traffic for the domain oauth2.example.com. It's a minimal configuration, serving as a starting point for more complex setups, such as reverse proxying.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_23\n\nLANGUAGE: nginx\nCODE:\n```\nserver {\n        listen 80;\n        server_name oauth2.example.com;\n}\n```\n\n----------------------------------------\n\nTITLE: Oathkeeper Access Rule Example with Cookie Mutator (JSON)\nDESCRIPTION: This JSON snippet represents an Oathkeeper access rule with the cookie mutator, which dynamically populates the user and some-arbitrary-data cookies using values taken from the authentication session. Requires Oathkeeper and correct mutator configuration. Effects: outgoing requests are modified to include extra cookies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/<.*>\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"allow\"\n  },\n  \"mutators\": [\n    {\n      \"handler\": \"cookie\",\n      \"config\": {\n        \"cookies\": {\n          \"user\": \"{{ print .Subject }}\",\n          \"some-arbitrary-data\": \"{{ print .Extra.some.arbitrary.data }}\"\n        }\n      }\n    }\n  ]\n}\n\n```\n\n----------------------------------------\n\nTITLE: Generating Recovery Code with cURL\nDESCRIPTION: This snippet demonstrates how to generate a recovery code using the cURL command-line tool. It sends a POST request to the `/admin/recovery/code` endpoint of the Ory Admin API.  It requires an API key for authorization and specifies the identity ID for which the recovery code is generated. The `expires_in` parameter determines how long the code will be valid. The output is a recovery link and recovery code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/30_account-recovery.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncurl --request POST -sL \\\n  --header \"Authorization: Bearer ORY_API_KEY\" \\\n  --header \"Content-Type: application/json\" \\\n  --request POST \\\n  --data '{ \\\n  \"expires_in\": \"12h\", \\\n  \"identity_id\": \"e01b5f2f-6afc-4194-8578-4cebcf69a4d5\" \\\n}' https://$PROJECT_SLUG.projects.oryapis.com/admin/recovery/code\n```\n\n----------------------------------------\n\nTITLE: Template localization using public metadata in Identity\nDESCRIPTION: This code snippet shows how to utilize public metadata (`metadata_public`) within an identity to conditionally render localized content based on the `lang` attribute. It provides a fallback approach if traits are not utilized, with the caveat that metadata is not validated, which can lead to errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_8\n\nLANGUAGE: Go\nCODE:\n```\n{{define \"en\"}}\nHi,\n\nPlease enter the following code to recover your account:\n\n{{ .RecoveryCode }}\n{{end}}\n\n{{define \"fr\"}}\nBonjour,\n\nVeuillez entrer le code suivant pour rcuprer votre compte:\n\n{{ .RecoveryCode }}\n{{end}}\n\n{{define \"de\"}}\nHallo,\n\nBitte geben Sie den folgenden Code ein, um Ihr Konto wiederherzustellen:\n\n{{ .RecoveryURL }}\n{{end}}\n\n{{- if eq .Identity.metadata_public.lang \"fr\" -}}\n{{ template \"fr\" . }}\n{{- else if eq .Identity.metadata_public.lang \"de\" -}}\n{{ template \"de\" . }}\n{{- else -}}\n{{ template \"en\" . }}\n{{- end -}}\n```\n\n----------------------------------------\n\nTITLE: List Relation Tuples Response Definition (Proto)\nDESCRIPTION: Defines the structure of a response that provides a list of relation tuples that match a query. The response includes the matching relation tuples and a token used for pagination.  Dependencies include the RelationTuple type.  The inputs are a request to list relation tuples.  The outputs are relation tuples and the next page token. There are no other known limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_4\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### ListRelationTuplesResponse\n\nThe response of a ReadService.ListRelationTuples RPC.\n\n| Field           | Type                                                              | Label    | Description                                                                                                |\n| --------------- | ----------------------------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------- |\n| relation_tuples | [RelationTuple](#ory-keto-relation_tuples-v1alpha2-RelationTuple) | repeated | The relationships matching the list request.                                                               |\n| next_page_token | [string](#string)                                                 |          | The token required to get the next page.<br/>If this is the last page, the token will be the empty string. |\n```\n\n----------------------------------------\n\nTITLE: Configuring Graceful Refresh Token Rotation (YAML)\nDESCRIPTION: This YAML configuration snippet shows how to enable graceful refresh token rotation within a self-hosted deployment.  The `rotation_grace_period` setting is used to define the grace period duration. Omitting the line disables the feature.  This is applicable for Ory Enterprise License and Ory OSS deployments. The grace period determines how long a refresh token remains valid after being used, enabling multiple usages within the grace period without causing immediate invalidation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/graceful-token-refresh.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\noauth2:\n  grant:\n    refresh_token:\n      rotation_grace_period: 60s # Set grace period. Omit this line to disable.\n```\n\n----------------------------------------\n\nTITLE: Installing the Ory Hydra JavaScript SDK\nDESCRIPTION: Command to install the Ory Hydra JavaScript SDK via npm package manager.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/10_js.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install --save @ory/hydra-client\n```\n\n----------------------------------------\n\nTITLE: Defining Ory Webhook Action for HubSpot API Call (JSON)\nDESCRIPTION: Configures an Ory webhook action of type `web_hook`. This action is set up to send a POST request to the HubSpot Contacts API (`https://api.hubapi.com/crm/v3/objects/contacts`). It uses API key authentication with a Bearer token from a HubSpot private app and specifies that the request body is generated from the Base64-encoded Jsonnet template.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/hubspot.mdx#_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"hook\": \"web_hook\",\n  \"config\": {\n    \"response\": {\n      \"ignore\": true\n    },\n    \"auth\": {\n      \"type\": \"api_key\",\n      \"config\": {\n        \"name\": \"Authorization\",\n        \"value\": \"Bearer {PRIVATE_APP_ACCESS_TOKEN}\",\n        \"in\": \"header\"\n      }\n    },\n    \"url\": \"https://api.hubapi.com/crm/v3/objects/contacts\",\n    \"method\": \"POST\",\n    \"body\": \"base64://{BASE64_ENCODED_JSONNET}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Attempted Verification Notifications - Ory Verification Flow - YAML\nDESCRIPTION: This YAML configuration enables the system to send notifications when verification is attempted for unregistered addresses by setting `notify_unknown_recipients` to true. This feature helps prevent account enumeration attacks. The values within the flow (e.g., enabled, lifespan, use) are also configurable. Place in the corresponding verification flow section of Ory's identity config file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nflows:\n  verification:\n    enabled: true\n    lifespan: 15m # Defines how much time the user has to complete the verification flow in the UI. Default: 1h.\n    use: code # Defines which method is used, one of 'code' or 'link'.\n    notify_unknown_recipients: true # Defines if the system sends attempted verification notifications to unregistered addresses.\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI update commands syntax - Shell\nDESCRIPTION: Commands like `ory update event-stream`, `identity-config`, etc., now require specifying the target project/workspace using `--project`, `--workspace` flags or `ORY_PROJECT`, `ORY_WORKSPACE` environment variables in v1, changing from the v0 positional argument syntax.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\n- ory update event-stream|identity-config|oauth2-client|oauth2-config|opl|organization|permission-config|project <project>\n+ ory update event-stream|identity-config|oauth2-client|oauth2-config|opl|organization|permission-config|project --project <project>\n+ ory update event-stream|identity-config|oauth2-client|oauth2-config|opl|organization|permission-config|project --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory update event-stream|identity-config|oauth2-client|oauth2-config|opl|organization|permission-config|project\n```\n\n----------------------------------------\n\nTITLE: Enabling Passwordless Code Method in YAML Configuration\nDESCRIPTION: This YAML snippet illustrates how to enable the passwordless one-time code authentication method by setting the `passwordless_enabled` flag to `true` under the `selfservice.methods.code` section in your Ory configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/06_code.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    code:\n      passwordless_enabled: true\n```\n\n----------------------------------------\n\nTITLE: Graph of Relations Explanation and Diagram Visualization\nDESCRIPTION: This section describes the conceptual model of access control relationships as a directed graph with object, subject set, and subject ID nodes, illustrating relations via example tuples and a Mermaid diagram. It emphasizes how edges represent relations and how relation inheritance is visualized with dotted edges, to aid understanding of permission structures.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/20_graph-of-relations.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<Mermaid\n  chart={`\ngraph TD\n    subgraph obj [Object region]\n    E[dir1]\n    A[file1] -->|child| E\n    G[file2]\n    end\n    subgraph subjID [Subject ID region]\n    F([user1])\n    C([user2])\n    end\n    A -->|access| B{{dir1#access}}\n    B -. file1#access .-> F\n    E -->|access| F\n    G -->|access| F\n    G -->|owner| C\n    G -->|access| H{{file2#owner}}\n    H -. file2#access .-> C\n  `}\n/>\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for the React Native App\nDESCRIPTION: Shell commands to navigate into the project directory and install all necessary Node dependencies with npm, a prerequisite for running the app.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n# Change directory\ncd kratos-selfservice-ui-react-native\n\n# Install dependencies\nnpm i\n```\n\n----------------------------------------\n\nTITLE: Configuring Settings Flow Redirects in Ory with YAML\nDESCRIPTION: This YAML snippet configures the redirect URLs for the Ory self-service settings flow, specifying where users are redirected after updating settings such as password or profile information. It defines a default_browser_return_url as the fallback URL and sub-conditions for password and profile updates to override it with specific URLs. The settings redirects support both full domain URLs and relative paths. Dependencies include Ory selfservice configuration and adherence to later redirect policy rules. Inputs are redirect URLs provided as strings, which control the behavior of the settings self-service UI flow post-submission.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/redirects.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\nselfservice:\n  flows:\n    settings:\n      after:\n        default_browser_return_url: https://this-is-overridden-by-password/\n        password:\n          # redirect after successfully updating the password in settings\n          default_browser_return_url: https://end-up-here-after-login-with-password/\n        profile:\n          # redirect after successfully updating the username or email in settings\n          default_browser_return_url: https://end-up-here-after-login-with-password/\n```\n\n----------------------------------------\n\nTITLE: Validation Error: MultipleOf Constraint in Ory (JSON)\nDESCRIPTION: Indicates a failure of the multipleOf constraint (e.g., 3 not a multiple of 7). The actual value and base are both presented in the context object. Used for modulus validation; id is 4000022.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_45\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000022,\n  \"text\": \"3 not multipleOf 7\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual\": 3,\n    \"base\": 7\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Kratos Service from Command Line Using Bash Shell\nDESCRIPTION: Runs the Ory Kratos server using the previously configured YAML file, launching both the public and admin services. The logs confirm the server startup and that TLS is not configured (default behavior).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\n/opt/kratos/bin/kratos -c /opt/kratos/config/kratos.yml serve\n```\n\n----------------------------------------\n\nTITLE: Getting Identity by ID using Ory Identities Go SDK\nDESCRIPTION: Shows how to retrieve a specific identity using its unique identifier via the Ory Identities Go SDK. The example highlights the option to include additional data like social sign-in credentials as part of the identity retrieval.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_21\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Propagating Verified Email Status from Social Sign-In - Jsonnet Claims Mapping\nDESCRIPTION: This Jsonnet snippet demonstrates how to map social sign-in provider claims (such as email_verified) into the Ory identity schema, allowing the verified status to be carried over from providers like Google. The code uses std.extVar to get provider claims, dynamically sets the traits.email value if verified, and populates the verified_addresses array accordingly. Place in the Social Sign-In identity mapping logic, ensuring your schema supports these fields.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_6\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n      given_name: claims.given_name,\n      family_name: claims.family_name,\n    },\n    verified_addresses: std.prune([\n      // Carry over verified status from Social Sign-In provider.\n      if 'email' in claims && claims.email_verified then { via: 'email', value: claims.email },\n    ]),\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Automatic SQL Migrations in Helm Chart YAML\nDESCRIPTION: This YAML snippet demonstrates configuring the Helm chart's values.yaml file to enable automatic SQL migrations for Ory Hydra OEL. The `hydra.automigration.enabled` flag set to true instructs the Helm chart to run database migrations during upgrade, ensuring schema updates are applied seamlessly. This setting is critical for zero-downtime upgrades and requires the Kubernetes environment with Helm installed and the Ory Helm repo configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\nimage:\n  # ....\n# ...\nhydra:\n  automigration:\n    enabled: true\n# ...\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Cookie Mutator Globally (YAML)\nDESCRIPTION: This YAML snippet shows global configuration for the cookie mutator in oathkeeper.yml. It enables the mutator and defines dynamic cookies to set using template expressions, allowing injection of authentication data into outgoing HTTP cookies. Dependencies include Oathkeeper and Go text/template. Inputs: authentication session; outputs: outgoing requests with additional cookies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nmutators:\n  cookie:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n    config:\n      cookies:\n        user: \"{{ print .Subject }}\",\n        some-arbitrary-data: \"{{ print .Extra.some.arbitrary.data }}\"\n\n```\n\n----------------------------------------\n\nTITLE: Usage: hydra migrate sql with DSN env var (Bash)\nDESCRIPTION: Illustrates how to supply the database connection string using the `DSN` environment variable in a bash-like shell. The `-e` flag instructs the `hydra migrate sql` command to read the DSN from the environment variable instead of a direct command-line argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-sql.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nexport DSN=...\nhydra migrate sql -e\n```\n\n----------------------------------------\n\nTITLE: Running Hydra in Serve All Mode\nDESCRIPTION: This command starts Ory Hydra in \"serve all\" mode, which runs all Hydra services (admin, public, etc.) in a single process. It uses the configuration file specified by the `-c` flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_15\n\nLANGUAGE: bash\nCODE:\n```\n/opt/hydra/bin/hydra -c /opt/hydra/config/hydra.yml serve all\n```\n\n----------------------------------------\n\nTITLE: Specifying Login Identifier\nDESCRIPTION: This snippet shows how to extend the identity schema to define the login identifier.  The `ory.sh/kratos` extension is used within the `username` property to specify the `credentials` and that the `password` uses this identifier.  This configures the schema to use the username for password-based login.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_3\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"username\": {\n          \"title\": \"Username\",\n          \"type\": \"string\",\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"password\": {\n                \"identifier\": true\n              }\n            }\n          }\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"title\": \"First name\",\n              \"type\": \"string\"\n            },\n            \"last\": {\n              \"title\": \"Last name\",\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding User Traits to Schema\nDESCRIPTION: This code snippet extends the base identity schema by adding user traits like username, first name, and last name. The `traits` object includes a nested `properties` object to define these fields.  Each field has a `title` for UI display and a `type` indicating data type.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"username\": {\n          \"title\": \"Username\",\n          \"type\": \"string\"\n        },\n        \"name\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"first\": {\n              \"title\": \"First name\",\n              \"type\": \"string\"\n            },\n            \"last\": {\n              \"title\": \"Last name\",\n              \"type\": \"string\"\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Example Remote Authorizer Access Rule Shell\nDESCRIPTION: Presents a JSON access rule file content demonstrating the configuration of the `remote` authorizer. It shows how to define the remote authorization URL, dynamically set headers using Go templates based on the subject, and specify response headers from the remote service to forward upstream.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\n{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/api/<.*>\",\n    \"methods\": [\"GET\"]\n  },\n  \"authenticators\": [\n    {\n      \"handler\": \"anonymous\"\n    }\n  ],\n  \"authorizer\": {\n    \"handler\": \"remote\",\n    \"config\": {\n      \"remote\": \"http://my-remote-authorizer/authorize\",\n      \"headers\": {\n        \"X-Subject\": \"{{ print .Subject }}\"\n      },\n      \"forward_response_headers_to_upstream\": [\n        \"X-Foo\"\n      ]\n    }\n  }\n  \"mutators\": [\n    {\n      \"handler\": \"noop\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Recovery Flow with Express.js (TypeScript)\nDESCRIPTION: This TypeScript code demonstrates creating a recovery flow using Express.js for browser applications. It is comprised of UI components such as the index.ts, main.hbs, and auth.hbs components. The UI displays the necessary fields for user interactions.  Dependencies: Express.js and a Handlebars engine. Prerequisites: configure the correct API endpoints and configure the necessary SDK for the correct API. Expected input is user inputs.  Expected output is the UI components and the API response. Limitations: Requires an Express.js setup and a Handlebars engine.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_32\n\nLANGUAGE: ts\nCODE:\n```\nimport recoveryExpress from '!!raw-loader!../../../code-examples/sdk/typescript/src/ui/recovery-express.ts'\n```\n\n----------------------------------------\n\nTITLE: Defining permissions using Ory Permission Language in TypeScript\nDESCRIPTION: Demonstrates how permissions in Ory Permissions are defined as TypeScript functions that return boolean values based on the relationships present in Ory Permissions. These functions enable fine-grained, customizable access control policies tailored to the applications needs. This snippet underpins the creation and evaluation of permission logic in a TypeScript environment. Prerequisites include familiarity with TypeScript and Ory Permissions relationships model. Inputs are the relationships configured in Ory Permissions, and output is a boolean indicating permission grant.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/simple-access-check-guide.mdx#_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: Example OAuth2 token endpoint error response for expired JWT - json\nDESCRIPTION: This JSON snippet shows an example error response from the OAuth2 token endpoint when a JWT used for client authentication has expired. It includes error and error_description fields without debug details to avoid leaking sensitive information. The snippet highlights the importance of JWT validity when using private_key_jwt authentication and explains how to enable development mode for detailed debugging output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug.mdx#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"error\",\n  \"error_description\": \"The error is unrecognizable: Token is expired\"\n}\n```\n\n----------------------------------------\n\nTITLE: Import of recovery addresses and considerations\nDESCRIPTION: Explanation about importing recovery addresses similar to verifiable addresses, with advice to let schema manage setting these fields. It references account recovery documentation and potential overwriting of self-service flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_3\n\n\n\n----------------------------------------\n\nTITLE: YAML Definition of Enums in OpenAPI\nDESCRIPTION: This YAML code represents the OpenAPI definition generated from the Go enum example. It shows how `go-swagger` translates the Go enum definitions into OpenAPI schema definitions for the `Level` (string enum) and `LevelInt` (integer enum) types.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\ndefinitions:\n  Model:\n    type: \"object\"\n    properties:\n      level:\n        type: \"string\"\n        enum:\n          - \"ONE\"\n          - \"TWO\"\n          - \"THREE\"\n      levelInt:\n        type: \"integer\"\n        enum:\n          - 1\n          - 2\n          - 3\n```\n\n----------------------------------------\n\nTITLE: Global Options Inherited from Parent Commands\nDESCRIPTION: Options inherited from parent commands that can be used with the oauth2-client command, including endpoint configuration, output formatting, and HTTP headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-oauth2-client.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Claims to Userinfo Response\nDESCRIPTION: This snippet illustrates how custom claims can be added to the userinfo response.  Any information included in `session.id_token` when accepting the consent request will also be included in the response. It depends on the consent request process. The resulting response will include the `ext` section and any custom claims as described.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/userinfo-oidc.mdx#_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport customClaimsTs from '!!raw-loader!../../code-examples/sdk/typescript/src/oauth2/consent-custom-claim.ts'\n\n<CodeBlock language=\"tsx\">{customClaimsTs}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Rendering DocCardList Component in JSX (JavaScript)\nDESCRIPTION: This snippet demonstrates the usage of the imported DocCardList React component in JSX syntax. It renders the component on the troubleshooting index page, which automatically lists available documentation cards related to troubleshooting topics without additional parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/index.mdx#_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\n<DocCardList />\n```\n\n----------------------------------------\n\nTITLE: OIDC Provider Configuration using Environment Variable (Shell)\nDESCRIPTION: This snippet demonstrates how to configure an OIDC provider, in this case Google, using the SELFSERVICE_METHODS_OIDC_CONFIG_PROVIDERS environment variable. It sets the necessary parameters like client ID, client secret, scopes, and URLs for authentication and token retrieval. The mapper_url specifies the location of a file used for mapping user data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/_common/config_as_env.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nSELFSERVICE_METHODS_OIDC_CONFIG_PROVIDERS='[{\\\"id\\\":\\\"google\\\",\\\"provider\\\":\\\"google\\\",\\\"mapper_url\\\":\\\"<file_location>\\\",\\\"client_id\\\":\\\"<client_id>\\\",\\\"client_secret\\\":\\\"<client_secret>\\\",\\\"scope\\\":[\\\"openid\\\",\\\"email\\\",\\\"profile\\\"],\\\"auth_url\\\":\\\"https://accounts.google.com/o/oauth2/v2/auth\\\",\\\"token_url\\\":\\\"https://www.googleapis.com/oauth2/v4/token\\\",\\\"issuer_url\\\":\\\"https://accounts.google.com\\\"}]'\n```\n\n----------------------------------------\n\nTITLE: SSHA Hash Format Example - plaintext\nDESCRIPTION: Provides examples of SSHA, SSHA256, and SSHA512 password hash encodings as used by Ory Identities for migration/verification. No dependencies or parameters are needed for verification. Each example displays the format using a prefixed identifier and a base64-encoded hash with salt, which should be used for comparison/migration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\n{SSHA}JFZFs0oHzxbMwkSJmYVeI8MnTDy/276a\n{SSHA256}czO44OTV17PcF1cRxWrLZLy9xHd7CWyVYplr1rOhuMlx/7IK\n{SSHA512}xPUl/px+1cG55rUH4rzcwxdOIPSB2TingLpiJJumN2xyDWN4Ix1WQG3ihnvHaWUE8MYNkvMi5rf0C9NYixHsE6Yh59M=\n```\n\n----------------------------------------\n\nTITLE: Configuring Access Rules via Environment Variable\nDESCRIPTION: This snippet demonstrates setting the access rule repositories using the `ACCESS_RULES_REPOSITORIES` environment variable. The value is a comma-separated list of URLs pointing to the access rule definitions. The URLs can use different schemes like `file://`, `https://`, and `inline://` as described in the YAML example.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nexport ACCESS_RULES_REPOSITORIES='file://path/to/rules.json,https://path-to-my-rules/rules.json,inline://W3siaWQiOiJmb28tcnVsZSIsImF1dGhlbnRpY2F0b3JzIjpbXX1d'\n```\n\n----------------------------------------\n\nTITLE: Configuring Scope Claim as Space-Delimited String in Ory (JSON5)\nDESCRIPTION: This snippet shows the JWT payload format when '/strategies/jwt/scope_claim' is set to 'string' in Ory. The 'scp' claim appears as a single space-delimited string containing all scopes. Input should be a JSON5 object representing a JWT payload. Output JWTs use 'scp' as a string. Limitation: This is only effective if the system configures this specific setting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/claims-scope.mdx#_snippet_1\n\nLANGUAGE: json5\nCODE:\n```\n{\n  // \"sub\": \"...\",\n  // ...\n  scp: \"read write\",\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Cloning, Building, and Running Ory from Source Using Shell\nDESCRIPTION: Gives shell commands to clone the Ory repository, change directory, download Go module dependencies, install the Ory binary with specific build tags (sqlite, json1, hsm), and run the help command from the installed binary. Requires Go 1.17+ installed and GOPATH/bin added to the user's PATH environment variable. This is an example for manual build and setup from source.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ngit clone https://github.com/ory/${props.repo}.git\ncd ${props.repo}\ngo mod download\ngo install -tags sqlite,json1,hsm .\n$(go env GOPATH)/bin/${props.repo} help\n```\n\n----------------------------------------\n\nTITLE: Install Kratos Config Files\nDESCRIPTION: This shell script downloads the necessary configuration files (identity schema and Kratos configuration) for Ory Kratos from the Ory GitHub repository. It uses `wget` to fetch the files and saves them to the `kratos` directory. The configuration files are essential for the operation of Kratos, handling user identities, authentication, and other related functionalities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nmkdir kratos\nwget https://raw.githubusercontent.com/ory/kratos/${useLatestRelease(\n  \"kratos\",\n)}/contrib/quickstart/kratos/email-password/identity.schema.json -O kratos/identity.schema.json\nwget https://raw.githubusercontent.com/ory/kratos/${useLatestRelease(\n  \"kratos\",\n)}/contrib/quickstart/kratos/email-password/kratos.yml -O kratos/kratos.yml\n```\n\n----------------------------------------\n\nTITLE: OAuth2 Consent Audience Handling Example in TypeScript React (TSX)\nDESCRIPTION: This snippet references an example of how to handle and alter the requested audiences in the login and consent flow using a TypeScript React (TSX) implementation. The code shows how developers can manipulate the 'requested_access_token_audience' field by adjusting the 'grant_audience.access_token' when accepting the consent request. It requires a React environment and Ory SDK for OAuth2 consent handling.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/audiences.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport tsExample from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/consent-audience.ts'\n\n<CodeBlock language=\"tsx\">{tsExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: https://github.com/ory/kratos-selfservice-ui-node/blob/master/src/pkg/middleware.ts\nDESCRIPTION: This code snippet points to the middleware.ts file in the Node.js selfservice UI project. It contains middleware functions that protect routes by ensuring users are authenticated, utilizing cookies, HTTP redirects, and CSRF tokens to secure sessions and access.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/quickstart.mdx#_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nimport { ... } from \"@site/src/theme/...\" // Imports relevant middleware modules\n// Middleware logic for access control and session management\n```\n\n----------------------------------------\n\nTITLE: Setting System Secret Manually (Bash)\nDESCRIPTION: Sets a predefined string as the SECRETS_SYSTEM environment variable. This secret is used by Ory Hydra for encrypting sensitive data in the database and needs to be consistent across restarts. A strong, unique secret should be used for production environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nexport SECRETS_SYSTEM=this_needs_to_be_the_same_always_and_also_very_$3cuR3-._\n```\n\n----------------------------------------\n\nTITLE: Simulating OAuth2 Introspection Request with Pre-Authorization\nDESCRIPTION: This bash snippet shows the HTTP request made by ORY Oathkeeper to the introspection endpoint when pre-authorization is enabled. It includes the `Authorization: Bearer` header obtained from the pre-authorization flow, in addition to the token being introspected in the request body.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_26\n\nLANGUAGE: bash\nCODE:\n```\nPOST /oauth2/introspect HTTP/1.1\nAuthorization: Bearer token-received-by-performing-pre-authorization\n\ntoken=valid.access.token.from.peter\n```\n\n----------------------------------------\n\nTITLE: Embedding Ory Keto HTTP API Documentation using JSX\nDESCRIPTION: This snippet imports an API documentation component and instantiates it with specific properties to load the Ory Keto OpenAPI specification from a remote JSON file. It depends on the '@theme/API' module and requires a valid remote URL to fetch the API spec. The 'repo' property specifies the project context, while 'url' points to the spec location. The snippet outputs an interactive or static representation of the Ory Keto HTTP API documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/rest-api.mdx#_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport API from '@theme/API'\n\n<API repo=\"keto\" url=\"https://raw.githubusercontent.com/ory/keto/master/spec/api.json\" />\n```\n\n----------------------------------------\n\nTITLE: oathkeeper serve command usage\nDESCRIPTION: Shows the basic command-line usage for starting the ORY Oathkeeper server. This command starts both the HTTP/2 REST API and the HTTP/2 Reverse Proxy.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-serve.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\noathkeeper serve [flags]\n```\n\n----------------------------------------\n\nTITLE: Configuring Both Scope Claims in Ory JWTs (JSON5)\nDESCRIPTION: This snippet depicts the JWT structure when '/strategies/jwt/scope_claim' is set to 'both'. Here, both the array ('scope') and space-delimited string ('scp') claims appear in the JWT. Inputs and outputs follow the JSON5 JWT encoding standard. No additional dependencies are required. Limitation: Increases JWT claim size by duplicating scope information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/claims-scope.mdx#_snippet_2\n\nLANGUAGE: json5\nCODE:\n```\n{\n  // \"sub\": \"...\",\n  // ...\n  scope: [\"read\", \"write\"],\n  scp: \"read write\",\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Example Settings Flow JSON Response - Submit Button\nDESCRIPTION: This JSON snippet represents a submit button within the profile group in the Ory API response. The 'type' attribute signifies an input of type 'submit', and the 'value' represents the submission label. This is crucial for triggering profile update processes. The 'disabled' attribute indicates whether this action is currently permitted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/profile.invalid.txt#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"method\",\n    \"type\": \"submit\",\n    \"value\": \"profile\",\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070003,\n      \"text\": \"Save\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering API Documentation with MDX\nDESCRIPTION: This code snippet utilizes an MDX code block to import and render an API component.  It imports a React component named `API` and specifies the repository and URL from which to fetch the API documentation data. The `repo` parameter specifies the repository name, and the `url` parameter contains the location of the API specification in JSON format. The component then renders the documentation based on the fetched data, providing an interactive API reference.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/reference/api.mdx#_snippet_0\n\nLANGUAGE: MDX\nCODE:\n```\n```mdx-code-block\nimport API from '@theme/API'\n\n<API repo=\"hydra\" url=\"https://raw.githubusercontent.com/ory/oathkeeper/master/spec/api.json\" />\n```\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Jsonnet Mapping File (Shell)\nDESCRIPTION: Provides a shell command to encode a local Jsonnet mapping file (`your-data-mapping.jsonnet`) into a Base64 string. This encoded string can then be directly embedded into the Ory Identity configuration's `mapper_url` field using the `base64://` prefix, allowing the mapping to be provided without hosting the file externally. Requires standard shell utilities like `cat` and `base64`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/81_lark.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: German Language Email Body Template in Go Templates\nDESCRIPTION: This template provides the German email content for account recovery, greeting the user with their first name in uppercase and instructing them to enter the recovery code. It is intended as a sub-template included when the language trait is 'de'. Dependencies include the user traits with `firstName`. It supports localized email messaging.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/02_mail-courier-templates.mdx#_snippet_3\n\nLANGUAGE: TXT\nCODE:\n```\nHallo {{ upper .Identity.traits.firstName }},\n\nUm Ihr Konto wiederherzustellen, geben Sie bitte den folgenden Code ein:\n\n```\n\n----------------------------------------\n\nTITLE: Listing Active User Sessions in Go (Self-Service)\nDESCRIPTION: Uses the Go SDK to list the currently active sessions for the authenticated user via the self-service frontend API. Requires the Ory Session Cookie to be included in the request. Supports pagination.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nimport goApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-active-sessions.go'\n\n<CodeBlock language=\"go\">{goApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Testing Access Rules\nDESCRIPTION: These `curl` commands are used to test the access rules. The first one tests the `header` mutator by making a GET request.  The second tests the denial rule with the `application/json` and `text/html` headers, demonstrating redirect and JSON responses respectively.  The last one checks the id token mutator.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\ncurl -X GET http://127.0.0.1:4455/anything/header\n{\n  \"args\": {},\n  \"data\": \"\",\n  \"files\": {},\n  \"form\": {},\n  \"headers\": {\n    \"Accept\": \"*/*\",\n    \"Accept-Encoding\": \"gzip\",\n    \"Host\": \"httpbin.org\",\n    \"User-Agent\": \"curl/7.54.0\",\n    \"X-User\": \"guest\"\n  },\n  \"json\": null,\n  \"method\": \"GET\",\n  \"origin\": \"172.17.0.1, 82.135.11.242, 172.17.0.1\",\n  \"url\": \"https://httpbin.org/anything/header/anything/header\"\n}\n\n# Make request and accept JSON (we get an error response)\ncurl -H \"Accept: application/json\" -X GET http://127.0.0.1:4455/anything/deny\n{\n  \"error\":{\n    \"code\":403,\n    \"status\":\"Forbidden\",\n    \"message\":\"Access credentials aren't sufficient to access this resource\"\n  }\n}\n\n# Make request and accept text/* (we get a redirect response).\ncurl -H \"Accept: text/html\" -X GET http://127.0.0.1:4455/anything/deny\n<a href=\"https://www.ory.sh/docs\">Found</a>.\n\ncurl -X GET http://127.0.0.1:4455/anything/id_token\n{\n  \"args\": {},\n  \"data\": \"\",\n  \"files\": {},\n  \"form\": {},\n  \"headers\": {\n    \"Accept\": \"*/*\",\n    \"Accept-Encoding\": \"gzip\",\n    \"Authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6IjU3N2E2NWE0LTUzM2YtNDFhYi1hODI2LTgxNDliMDM2NDQ0MyIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NTgwMTg1MTcsImlhdCI6MTU1ODAxODQ1NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0NDU1LyIsImp0aSI6IjExNmRiNzhmLTQyMjEtNDU2ZC05OWIzLTY4NGJkMWVjYThjZSIsIm5iZiI6MTU1ODAxODQ1Nywic3ViIjoiZ3Vlc3QifQ.2VKW-oYtzkFGRPgK3sb4iRlObDSzW8PyHzgNiQubppFSlp0bzJLl4Rnt56orJndPqIa7hwsm8YIskf-Wp-FA1piv-aG_XljkUjgilKr3cncMXDP15yDRwZj8g0iVKEhnugQsw_zWf5gMU2YBev2Eyv4xciJxbhrKCat-X8xNT9SvAbwpY-VxQdu_rnpu1GKCA54DyIX6r-Qh5bQPrrT7NvIupA7jJQ23qq83m4C1cQfBgzlhm7dcCuPqKunYKRsc7NZuER3lT6TjkhsF1qhf7o7BZmCnhz6VuH8L8TwMZS8IJWKSjJd8dEKKwxwPkNXOcZO8A3hIO8SZx4Yd7jrONA\",\n    \"Host\": \"httpbin.org\",\n    \"User-Agent\": \"curl/7.54.0\"\n  },\n  \"json\": null,\n  \"method\": \"GET\",\n  \"origin\": \"172.17.0.1, 82.135.11.242, 172.17.0.1\",\n  \"url\": \"https://httpbin.org/anything/id_token/anything/id_token\"\n}\n\n```\n\n----------------------------------------\n\nTITLE: Embedding Base64 JSONNet in Actions Webhook Config (JSON)\nDESCRIPTION: JSON snippet illustrating how a base64-encoded JSONNet string is embedded within the configuration for an Ory Actions webhook. The `body` property uses the `base64://` prefix followed by the encoded string to reference the inline JSONNet payload definition.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n//...\n      \"hooks\": [\n                {\n                  \"config\": {\n                    \"body\": \"base64://PASTE_BASE64_STRING_HERE\",\n                    //...\n                  }\n                }\n      ]\n//...\n```\n\n----------------------------------------\n\nTITLE: Authenticating Go SDK Requests using OAuth2 Client Credentials\nDESCRIPTION: Demonstrates configuring the Go SDK client to authenticate requests using the OAuth2 Client Credentials grant type. It utilizes the `golang.org/x/oauth2/clientcredentials` package to create an authenticated HTTP client which automatically handles token fetching and refreshing, and then assigns this client to the SDK's configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_5\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"context\"\n\n  client \"github.com/ory/hydra-client-go\"\n  \"golang.org/x/oauth2/clientcredentials\"\n)\n\nfunc main() {\n  config := client.NewConfiguration()\n  config.Servers = []client.ServerConfiguration{\n    {\n      URL: \"http://localhost:4444\", // Public API URL\n    },\n  }\n\n  creds := clientcredentials.Config{\n    TokenURL:     \"http://hydra.localhost:4444/oauth2/token\",\n    ClientID:     \"my-client\",\n    ClientSecret: \"my-secret\",\n    Scopes:       []string{\"scope-a\", \"scope-b\"},\n  }\n  config.HTTPClient = creds.Client(context.TODO())\n  c := client.NewAPIClient(config)\n  req := c.PublicApi.RevokeOAuth2Token(context.TODO())\n  req.Execute()\n\n}\n```\n\n----------------------------------------\n\nTITLE: Informing User on Verification Code Email Sent Status in Ory (JSON)\nDESCRIPTION: Informs the user that a verification code email has been sent after initiation of an email-based verification flow. Relies on Ory's mailing system and requires an existing email; message id is 1080003.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_23\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1080003,\n  \"text\": \"An email containing a verification code has been sent to the email address you provided. If you have not received an email, check the spelling of the address and make sure to use the address you registered with.\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Windows Installation Component in MDX\nDESCRIPTION: Load the Windows installation React component from the components directory and render it with repository and name props. Used to display Windows-specific Ory installation instructions in a documentation site powered by MDX and React.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_3\n\nLANGUAGE: mdx\nCODE:\n```\nimport Windows from '@site/src/components/Install/Windows'\n\n<Windows repo={props.repo} name={props.name} />\n```\n\n----------------------------------------\n\nTITLE: Customizing Cookie Names in Ory Hydra using YAML\nDESCRIPTION: This YAML snippet customizes the names of cookies used by Ory Hydra, mapping internal identifiers to user-defined names under 'serve.cookies.names'. Developers can specify unique names for 'login_csrf', 'consent_csrf', and 'session' cookies to meet application requirements or avoid naming conflicts. The snippet should be placed in Ory Hydra's configuration file, and all values must be valid cookie name strings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/cookies.mdx#_snippet_3\n\nLANGUAGE: YAML\nCODE:\n```\nserve:\n  cookies:\n    names:\n      login_csrf: login_name\n      consent_csrf: consent_name\n      session: session_name\n\n```\n\n----------------------------------------\n\nTITLE: Examples of Incorrect Relationship Naming in Ory Permissions Keto-Relationships\nDESCRIPTION: This snippet presents examples of relationship names that violate Ory Permissions naming conventions. It illustrates mistakes such as mixing heterogeneous object types in a namespace and incorrect pluralization or casing of namespaces and relationships. These examples serve to guide developers on what to avoid for modeling clear and consistent permission relationships.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/05_namespaces.mdx#_snippet_3\n\nLANGUAGE: keto-relationships\nCODE:\n```\n// namespace isn't describing homogenous type of objects  \nUser:7a012165-7b21-495b-b84b-cf4e1a21b484 is in members of Tenant1Objects:62237c27-19c3-4bb1-9cbc-a5a67372569b  \n\n// Does not adhere to the naming conventions  \nusers:02a3c847-c903-446a-a34f-dae74b4fab86 is in view of files:8f427c01-c295-44f3-b43d-49c3a1042f35\n```\n\n----------------------------------------\n\nTITLE: JSON structure for password input field in user settings form\nDESCRIPTION: This JSON object defines a password input field for a user settings form, including attributes such as field name, input type, required status, and data validation messages. It also includes metadata for UI labeling. This schema is used for rendering form fields and handling validation errors related to password policies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/settings/samples/password.policy.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"password\",\n  \"attributes\": {\n    \"name\": \"password\",\n    \"type\": \"password\",\n    \"required\": true,\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000005,\n      \"text\": \"The password can't be used because the password has been found in data breaches and must no longer be used.\",\n      \"type\": \"error\",\n      \"context\": {\n        \"reason\": \"the password has been found in data breaches and must no longer be used.\"\n      }\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070001,\n      \"text\": \"Password\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Downloading and Extracting Ory Kratos Binaries Using Bash Shell\nDESCRIPTION: Fetches the latest Ory Kratos release tarball from GitHub using dynamically resolved release variables and extracts it into the binary directory. It removes unnecessary markdown and license files to keep the installation clean.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\ncd /opt/kratos/bin\n# Download a new version of Ory Kratos\nwget https://github.com/ory/kratos/releases/download/${useLatestRelease(\"kratos\")}/kratos_${useLatestReleaseFilename(\n\"kratos\",\n)}-linux_64bit.tar.gz\n# Extract contents\ntar xfvz kratos_${useLatestReleaseFilename(\"kratos\")}-linux_64bit.tar.gz\n# Remove redundant files\nrm *md\nrm LICENSE\n```\n\n----------------------------------------\n\nTITLE: Connecting Ory Hydra to Google Cloud SQL Proxy\nDESCRIPTION: Shell command to install Ory Hydra with connection to a Google Cloud SQL instance through the SQL proxy.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\nhelm install \\\n    ...\n    --set 'dsn=postgres://foo:bar@pg-sqlproxy-gcloud-sqlproxy:5432/db' \\\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Example Usage of hydra delete jwk Command\nDESCRIPTION: Provides a practical example of deleting multiple JSON Web Key Sets simultaneously by listing their IDs, demonstrating typical usage of the command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwk.md#_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nhydra delete jwk <set-1> <set-2> <set-3>\n```\n\n----------------------------------------\n\nTITLE: Error Matching in Access Rule (JSON5)\nDESCRIPTION: This JSON5 snippet demonstrates how to define error matching conditions within an access rule's configuration. It uses the `when` key to specify that the handler should only be applied when the error type is \"unauthorized\" (or other listed error types).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_5\n\nLANGUAGE: json5\nCODE:\n```\n// access-rule.json\n{\n  handler: \"json\",\n  config: {\n    when: [\n      {\n        error: [\"unauthorized\", \"...\", \"...\"],\n      },\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities config (Shell)\nDESCRIPTION: This shell command updates the Ory Identities configuration using the modified configuration file. It requires the workspace and project IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/75_vk.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Default HTTP Request Payload\nDESCRIPTION: Provides the default JSON payload that is sent to the HTTP server. This object contains various data related to the email, such as the recipient, template type, and template-specific data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n```jsonnet\nfunction(ctx) {\n  recipient: ctx.recipient,\n  template_type: ctx.template_type,\n  to: if \\\"template_data\\\" in ctx && \\\"to\\\" in ctx.template_data then ctx.template_data.to else null,\n  recovery_code: if \\\"template_data\\\" in ctx && \\\"recovery_code\\\" in ctx.template_data then ctx.template_data.recovery_code else null,\n  recovery_url: if \\\"template_data\\\" in ctx && \\\"recovery_url\\\" in ctx.template_data then ctx.template_data.recovery_url else null,\n  verification_url: if \\\"template_data\\\" in ctx && \\\"verification_url\\\" in ctx.template_data then ctx.template_data.verification_url else null,\n  verification_code: if \\\"template_data\\\" in ctx && \\\"verification_code\\\" in ctx.template_data then ctx.template_data.verification_code else null,\n  login_code: if \\\"template_data\\\" in ctx && \\\"login_code\\\" in ctx.template_data then ctx.template_data.login_code else null,\n  registration_code: if \\\"template_data\\\" in ctx && \\\"registration_code\\\" in ctx.template_data then ctx.template_data.registration_code else null,\n  subject: if \\\"template_data\\\" in ctx && \\\"subject\\\" in ctx.template_data then ctx.template_data.subject else null,\n  body: if \\\"template_data\\\" in ctx && \\\"body\\\" in ctx.template_data then ctx.template_data.body else null\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Create Go Project Structure\nDESCRIPTION: These shell commands create a basic Go project structure. It creates a directory, navigates into it, and then creates several core files, including a main file, handler and middleware files and an index.html file. It also initializes a Go module for the project using `go mod init` command. This initialization is required for managing dependencies.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/01_go.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nmkdir your-project\ncd your-project\n\ntouch main.go handler.go middleware.go index.html\ngo mod init github.com/<your-name>/your-project\n```\n\n----------------------------------------\n\nTITLE: Defining a Paginated List Response Model in Go with Swagger\nDESCRIPTION: This code defines a response struct `listIdentitiesResponse` for listing identities, incorporating token pagination using `tokenpagination.ResponseHeaderAnnotation` from `github.com/ory/x/pagination/tokenpagination`.  It also defines the `identity` struct. Swagger annotations are used to define the response model, which includes the list of identities in the body, and associates it with a 200 OK response for the `listIdentities` API route. This example assumes the existence of the `github.com/ory/x/pagination/tokenpagination` package.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_9\n\nLANGUAGE: go\nCODE:\n```\npackage example\n\nimport \"github.com/ory/x/pagination/tokenpagination\"\n\n// An Identity\n//\n// Represents an identity (e.g. user).\n//\n// swagger:model identity\ntype identity struct {\n    ID uuid.UUID `json:\"id\"`\n    // ...\n}\n\n// Identity List Response\n//\n// The response given when listing identities.\n//\n// swagger:response listIdentities\ntype listIdentitiesResponse struct {\n    tokenpagination.ResponseHeaderAnnotation\n\n    // The list\n    //\n    // in: body\n    Body []identity\n}\n\n// swagger:route GET /admin/identities identities listIdentities\n//\n// ...\n//\n//\tResponses:\n//\t  200: listIdentities\n// ...\nfunc listIdentities(w http.ResponseWriter, r *http.Request) {}\n```\n\n----------------------------------------\n\nTITLE: Structure of the `claims` External Variable (JSON5)\nDESCRIPTION: Provides an example structure of the `claims` object available within the Jsonnet data mapper via `std.extVar('claims')`. It lists standard OpenID Connect userinfo claims and includes a `raw_claims` field for non-standard data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_4\n\nLANGUAGE: json5\nCODE:\n```\n{\n  iss: \"https://accounts.google.com\",\n  sub: \"1234\",\n  name: \"John Doe\",\n  given_name: \"John\",\n  family_name: \"Doe\",\n  last_name: \"Doe\",\n  middle_name: \"Peter\",\n  nickname: \"john_doe\",\n  preferred_username: \"johnny\",\n  profile: \"https://plus.google.com/1234\",\n  picture: \"https://plus.google.com/1234/profile.png\",\n  website: \"https://example.org\",\n  email: \"john@doe.com\",\n  email_verified: true,\n  gender: \"m\",\n  birthdate: \"1980/11/12\",\n  zoneinfo: \"de\",\n  locale: \"de\",\n  phone_number: \"+1123123123\",\n  phone_number_verified: true,\n  updated_at: \"2022-11-30T11:07:24.405345Z\",\n  hd: \"4321\",\n  team: \"some-microsoft-team\",\n  raw_claims: {\n    /* ... */\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Identities Using Ory CLI in Bash\nDESCRIPTION: This snippet demonstrates how to use the 'ory import identities' CLI command to import identities from one or more JSON files or from standard input. Dependencies include having the Ory CLI installed and configured properly, along with valid JSON identity files. The input JSON files must contain either a single identity or an array of identities compliant with Ory's schema. The command can accept multiple files or data piped from STD_IN and outputs the import result. Flags allow configuring project, workspace, output format, and confirmation behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-identities.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory import identities file-1.json [file-2.json] [file-3.json] [file-n.json] [flags]\n```\n\nLANGUAGE: bash\nCODE:\n```\ncat > ./file.json <<EOF\n{\n    \"schema_id\": \"default\",\n    \"traits\": {\n        \"email\": \"foo@example.com\"\n    }\n}\nEOF\n\nory import identities file.json\n```\n\nLANGUAGE: bash\nCODE:\n```\ncat file.json | ory import identities\n```\n\n----------------------------------------\n\nTITLE: Sample Ory Identities Configuration Output - JSON\nDESCRIPTION: This output snippet shows an example of the Ory Identities configuration returned in JSON format by the CLI command. The object includes configuration keys such as 'selfservice' and nested 'methods' (e.g., password method enabled/disabled). Dependencies: prior execution of the retrieval command. Inputs: none (output only). Output: JSON configuration object. Actual output may include additional properties beyond the shown excerpt.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-identity-config.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"selfservice\": {\n\t\"methods\": {\n\t  \"password\": { \"enabled\": false }\n\t}\n\t// ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using 'cookie_session' Authenticator in Ory Oathkeeper Access Rule Example\nDESCRIPTION: This example shows an Ory Oathkeeper Access Rule using the 'cookie_session' authenticator. It includes shell commands demonstrating how the rule handles requests with valid and invalid cookies, showing successful authentication with a valid session ID and rejection with an invalid one.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"cookie_session\"\n  }],\n  \"authorizer\": { \"handler\": \"allow\" },\n  \"mutators\": [{ \"handler\": \"noop\" }]\n}]\n\ncurl -X GET -b sessionid=abc http://my-app/some-route\n\nHTTP/1.0 200 OK\nThe request has been allowed! The subject is: \"peter\"\n\ncurl -X GET -b sessionid=def http://my-app/some-route\n\nHTTP/1.0 401 Status Unauthorized\nThe request isn't authorized because the provided credentials are invalid.\n```\n\n----------------------------------------\n\nTITLE: Post-Registration Redirection Configuration in Ory Identities (YAML)\nDESCRIPTION: This snippet details the configuration keys that control post-registration redirection in Ory Identities. Similar to post-login redirection, it demonstrates the precedence of different settings, including the default URL, flow-specific URLs, and method-specific URLs. This configuration determines where the user is redirected after successfully completing the registration flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  default_browser_return_url: https://end-up-here-per-default/\n  flows:\n    registration:\n      after:\n        # overrides url.default_browser_return_url\n        default_browser_return_url: https://this-is-overridden-by-password/\n        password:\n          # overrides selfservice.registration.after.default_browser_return_url\n          default_browser_return_url: https://end-up-here-after-registration-with-password/\n```\n\n----------------------------------------\n\nTITLE: Inspecting token_endpoint_auth_method in OAuth2 Client Configuration (json)\nDESCRIPTION: This snippet provides a partial JSON representation of an OAuth 2.0 client object that highlights the token_endpoint_auth_method property. The method value, such as client_secret_basic or client_secret_post, determines which authentication scheme the client is allowed to use. Adjust this property via the Ory CLI or API depending on your authentication requirements. Note that other client properties would also appear in the full output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug/token-endpoint-auth-method.mdx#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  // ...\n  \"token_endpoint_auth_method\": \"client_secret_basic\",\n  // ...\n}\n\n```\n\n----------------------------------------\n\nTITLE: Patching Specific Identity Config Keys with Ory CLI - Shell\nDESCRIPTION: This snippet shows how to update a specific key in the Ory Identities configuration using the Ory CLI's patch command. It replaces the '/selfservice/methods/totp/enabled' key with the value 'false' in the designated project and workspace. Required parameters: <project-id>, <workspace-id>. Limitations: Uses the '--replace' flag for key-value replacement; user must have edit permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/15_config-identity-service.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --replace '/selfservice/methods/totp/enabled=false'\n```\n\n----------------------------------------\n\nTITLE: Applying Schema Changes: Keto CLI, Shell\nDESCRIPTION: Executes the necessary SQL schema updates for Ory Keto v0.7 using the `keto migrate up` command. The `--yes` flag bypasses interactive confirmation. This step prepares the database structure before migrating the data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/v0.7-migration.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nketo migrate up --yes\n```\n\n----------------------------------------\n\nTITLE: Displaying Storage Location Selection in Ory Console with MDX\nDESCRIPTION: MDX code block that displays a browser window showing how to select a storage location when creating a new Ory Network project. The image shows the UI for choosing where personal data will be stored.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-compliance/personal-data-location.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n\n<BrowserWindow url=\"https://console.ory.sh/projects/create\">\n\n![Passkey in Console](_static/storage-location.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Importing data into target Hydra instance (PostgreSQL)\nDESCRIPTION: This command imports data from the hydra-dump.sql file into the target PostgreSQL database using psql. It also logs the import process to hydra_import_log. The DSN specifies the database connection string for the target database.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/merge-multiple-db-secrets.mdx#_snippet_1\n\nLANGUAGE: SQL\nCODE:\n```\npsql -o hydra_import_log \\\n -f hydra-dump.sql \\\n <DSN>\n```\n\n----------------------------------------\n\nTITLE: Options for `oathkeeper rules list`\nDESCRIPTION: Lists the command-line options specific to the `oathkeeper rules list` subcommand. Includes flags for help (`-h`, `--help`), limiting the number of results (`--limit`), and specifying the page number for pagination (`--page`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules-list.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n-h, --help        help for list\n    --limit int   The maximum amount of policies returned. (default 20)\n    --page int    The number of page. (default 1)\n```\n\n----------------------------------------\n\nTITLE: Creating a Virtual Host Configuration (Bash)\nDESCRIPTION: These commands guide the creation of an Nginx virtual host configuration file. It starts by changing the directory to the sites-available directory, creating a file with the specified content. The `nano` command opens a text editor. The server block will define the domain and listen port.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_22\n\nLANGUAGE: bash\nCODE:\n```\ncd /etc/nginx/sites-available/\nnano oauth2.example.com\n```\n\n----------------------------------------\n\nTITLE: Importing Mermaid for Graphical Visualizations\nDESCRIPTION: This snippet shows the import statement for the Mermaid component used for rendering relationship graphs within the documentation. It establishes the dependency necessary for visual representation of relationships using Mermaid diagrams.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/01_relation-tuples.mdx#_snippet_0\n\nLANGUAGE: MDX\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\"\n```\n\n----------------------------------------\n\nTITLE: Example of Updated Access Token with Custom Claims - JSON\nDESCRIPTION: This snippet shows an example access token containing custom claims added via the webhook. The token includes standard claims like active, scope, client_id, sub, iss, token_type, and token_use, along with the custom claims nested within the ext field.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"active\": true,\n  \"scope\": \"openid offline\",\n  \"client_id\": \"my_client\",\n  \"sub\": \"foo@bar.com\",\n  \"aud\": [],\n  \"iss\": \"http://ory.hydra.example/\",\n  \"token_type\": \"Bearer\",\n  \"token_use\": \"access_token\",\n  \"ext\": {\n      \"your:custom:access-token-claim\": \"any value you like\",\n      \"your:second:access-token-claim\": 124390123,\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Access Rule Example - Comprehensive YAML Format\nDESCRIPTION: This code defines a comprehensive YAML example of an access rule. It demonstrates how to specify the same components as the JSON example (`id`, `version`, `upstream`, `match`, `authenticators`, `authorizer`, `mutators`, and `errors`) using the YAML syntax. This highlights how to structure the access control rules in a human-readable YAML format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nid: some-id\nversion: v0.36.0-beta.4\nupstream:\n  url: http://my-backend-service\n  preserve_host: true\n  strip_path: /api/v1\nmatch:\n  url: http://my-app/some-route/<.*>\n  methods:\n    - GET\n    - POST\nauthenticators:\n  - handler: noop\nauthorizer:\n  handler: allow\nmutators:\n  - handler: noop\nerrors:\n  - handler: json\n```\n\n----------------------------------------\n\nTITLE: Adding Webhook Action to OIDC Registration Hooks (Ory CLI)\nDESCRIPTION: Uses the Ory CLI command `ory patch identity-config` to add the defined webhook action (from `webhook-action.json`) specifically to the configuration path `/selfservice/flows/registration/after/oidc/hooks/0`. This ensures the action is triggered only after successful registrations using OIDC or social sign-in methods. Requires specifying project and workspace IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/hubspot.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/oidc/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Exporting Environment Variables for Import Shell\nDESCRIPTION: This shell snippet exports environment variables needed by the import script. It sets the `RESERVE_ONLY` flag, which determines whether to import the hashes. It also specifies the paths to JSON files which contain the Auth0 user data and the password hashes (if available). These variables are essential for providing the script with the necessary information for user migration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nexport RESERVE_ONLY=\"false\" # Set to \"true\" if you DON'T HAVE Auth0 password hashes.\nexport AUTH0_USERDATA=\"{path-to-the-json-file-with-bulk-user-export-data}\"\nexport AUTH0_PWEXPORT=\"{path-to-the-json-file-with-password-hashes}\"\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for `kratos delete identity`\nDESCRIPTION: Lists the command-line options inherited from parent commands that can be used with `kratos delete identity`. These include setting the Kratos Admin API endpoint (`-e`, `--endpoint` or `KRATOS_ADMIN_URL` environment variable), specifying the output format (`--format`), and suppressing output (`-q`, `--quiet`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-delete-identity.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n-e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n    --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n-q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Rendering Configuration Editor Component in MDX\nDESCRIPTION: This snippet demonstrates the use of an imported `ConfigEditor` React component. The component is rendered within an MDX (Markdown Extension) environment.  The `url` prop is passed to the `ConfigEditor` component, pointing it to the configuration schema JSON file.  This allows the editor to fetch and render the configuration form based on the schema.  There are no explicit dependencies, but it assumes the presence and correct setup of the `ConfigEditor` component.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/reference/configuration-editor.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport ConfigEditor from '@site/src/components/ConfigEditor';\n\n<ConfigEditor url=\"https://raw.githubusercontent.com/ory/oathkeeper/master/.schema/config.schema.json\" />\n```\n\n----------------------------------------\n\nTITLE: Shell Command: Patch Project Configuration\nDESCRIPTION: This shell command uses the `ory patch` command to modify a specific configuration setting within an Ory project using JSON Patch syntax. The `--replace` flag specifies the path to the key to be changed and the new value.  The command targets the `courier/smtp/from_name` key.  This allows for targeted updates to settings. Prerequisites include the Ory CLI installed and a valid Ory project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/10_config-with-cli.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch project --project <project-id> --workspace <workspace-id> \\\n  --replace '/services/identity/config/courier/smtp/from_name=\"My Custom E-Mail Name\"'\n```\n\n----------------------------------------\n\nTITLE: Displaying Lookup Secrets Credentials in Ory Identity (YAML)\nDESCRIPTION: Illustrates the structure of the `credentials` object within an Ory identity, specifically showing how `lookup_secret` credentials are stored. It includes the associated identity ID, the `recovery_codes` array containing individual codes, and shows an example of a code marked with a `used_at` timestamp.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/25_lookup-secrets.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ncredentials:\n  password:\n    id: lookup_secret\n    identifiers:\n      # This is the identity's ID\n      - 802471b9-06f5-49d4-a88d-5e7d6bcfed22\n    config:\n      # highlight-start\n      recovery_codes:\n        - code: 3zg9abc\n        - code: 1bc6bea\n          used_at: 2021-10-14T07:38:51Z\n      # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Rendering Organization Relationship Diagram - Mermaid\nDESCRIPTION: Uses the Mermaid component within MDX to embed a relationship graph between Projects, Organizations, Users, Domains, and SSO Connections. The snippet utilizes Mermaid syntax within the React/MDX ecosystem. No external input is required; the expected output is a generated UML-style relationship diagram within the documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_2\n\nLANGUAGE: mdx\nCODE:\n```\n<Mermaid\n  chart={`\ngraph LR\n    Project -->|has many| Organization\n    Organization -->|has many| Users\n    Organization -->|has many| Domain\n    Organization -->|has many| Connection\n    Users -.->|authenticate| Connection\n    Project -.->|Identity pool| Users\n    Connection -.- Google\n    Connection -.- Okta\n    Connection -.- Keycloak\n`}\n/>\n```\n\n----------------------------------------\n\nTITLE: Creating JWK Set Example - Hydra CLI\nDESCRIPTION: This example demonstrates how to create a JSON Web Key Set using the `hydra create jwk` command. It specifies the set ID, algorithm, and intended use of the key. The algorithm RS256 and the use sig are commonly used for signing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-jwk.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra create jwk <my-jwk-set> --alg RS256 --use sig\n```\n\n----------------------------------------\n\nTITLE: Formatting Keto Relation Tuples in Markdown\nDESCRIPTION: Provides an example of how to format Ory Keto relation tuples within Markdown code blocks. It specifies using the `keto-relation-tuples` language identifier for syntax highlighting and includes the standard tuple structure and a comment line.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n```keto-relation-tuples\nnamespace:object#relation:subject\n// comment\n```\n```\n\n----------------------------------------\n\nTITLE: Creating/Rendering Ory Verification Flow using Express.js (Browser)\nDESCRIPTION: Shows how to initiate an Ory verification flow and render the corresponding UI using Express.js and Handlebars templates in a browser-based application. Includes server-side TypeScript logic for handling the `/verification` route and example Handlebars templates (`.hbs`) for rendering the form.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_50\n\nLANGUAGE: ts\nCODE:\n```\n{verificationExpress}\n```\n\nLANGUAGE: handlebars\nCODE:\n```\n{mainLayoutExpress}\n```\n\nLANGUAGE: handlebars\nCODE:\n```\n{authLayoutExpress}\n```\n\n----------------------------------------\n\nTITLE: Importing Consent Verbose TypeScript Code Snippet\nDESCRIPTION: This code snippet demonstrates how to import a verbose TypeScript implementation of the consent handler from a local file using raw-loader. It integrates the consent verbose code into a React or MDX environment for display or further use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/custom-login-consent/flow.mdx#_snippet_7\n\nLANGUAGE: mdx\nCODE:\n```\nimport consentVerbose from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/consent-verbose.ts'\n\n<CodeBlock language=\"js\">{consentVerbose}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client with Skip Consent using Ory CLI\nDESCRIPTION: This command creates an OAuth2 client using the Ory CLI and skips the consent screen by setting the `require_consent` property to `false`. The `--skip-consent` flag handles this configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/skip-consent.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory create oauth2-client \\\n  --skip-consent \\\n  # ...\n```\n\n----------------------------------------\n\nTITLE: Transforming Ory Identity Data for HubSpot (Jsonnet)\nDESCRIPTION: Defines a Jsonnet function that takes the Ory identity context (`ctx`) as input. It extracts user traits like email and name from the identity object and formats them into a `properties` object suitable for creating a contact via the HubSpot Contacts API. Additional traits can be mapped based on the identity schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/hubspot.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nfunction(ctx) {\n  properties: {\n    email: ctx.identity.traits.email,\n    firstname: ctx.identity.traits.name, # User's first name taken from the \"name\" identity trait.\n    # ... # You can get more user data depending on the identity schema you're using.\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Keto Go SDK via Go Modules\nDESCRIPTION: This snippet demonstrates the installation of the Ory Keto Go SDK via the `go get` command. It specifies the packages for both the gRPC and REST APIs. The gRPC package is `github.com/ory/keto/proto`, while the REST API package is `github.com/ory/keto-client-go`. These commands are used to download and install the necessary dependencies for interacting with the Ory Keto API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/self-hosted/05_go.mdx#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\ngo get github.com/ory/keto/proto\n```\n\nLANGUAGE: go\nCODE:\n```\ngo get github.com/ory/keto-client-go\n```\n\n----------------------------------------\n\nTITLE: Map Claims to Ory Identity Schema (Jsonnet)\nDESCRIPTION: This Jsonnet code snippet maps Twitter claims to the Ory Identity schema, specifically handling the email claim.  It checks if the 'email' claim exists in the provided claims and, if so, maps it to the 'email' trait within the identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/97_x-twitter.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nlocal claims = std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Twitter does not send the email when it is not verified:\n      //\n      //   When set to true email will be returned in the user objects as a string. If the user does not have an email address on their account, or if the email address is not verified, null will be returned.\n      //\n      // There we can use the value provided by twitter without problem:\n      [if 'email' in claims then 'email' else null]: claims.email,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Add WS Service to Compose\nDESCRIPTION: This YAML snippet adds the WebSocket service (ws) to the `docker-compose.yml` file. It defines the build context for the service using the 'ws' directory and configures its network to connect within the internal intranet. This enables the WebSocket service to be built and deployed as part of the overall Docker Compose setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_14\n\nLANGUAGE: YAML\nCODE:\n```\nservices:\n---\nws:\n  build:\n    context: \"ws\"\n  networks:\n    - intranet\n```\n\n----------------------------------------\n\nTITLE: Serving Built Flutter Web App with dhttpd (Shell)\nDESCRIPTION: Serves the release build of the Flutter web application from the 'build/web' directory using the 'dhttpd' package on 'localhost:4005'. This command is useful for locally testing the production-ready static files. Requires the 'dhttpd' package.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/flutter_web_redirect/README.mdx#_snippet_4\n\nLANGUAGE: shell-session\nCODE:\n```\ndhttpd --host localhost --port 4005 --path build/web\n```\n\n----------------------------------------\n\nTITLE: Checking CAA Records with dig Shell\nDESCRIPTION: This `dig` command is used to query the Certification Authority Authorization (CAA) records for a domain. It helps determine if a domain has restrictions on which certificate authorities are allowed to issue certificates. If a CAA record exists, it's important to ensure 'pki.goog' (used by Ory Network for SSL certificates) is listed as an allowed issuer.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/custom-domains.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n$ dig +noall +answer example.com caa\nexample.com.        1800    IN  CAA 0 issue \"digicert.com\"\n```\n\n----------------------------------------\n\nTITLE: Listing Identity Command Options in Ory Kratos CLI - shell\nDESCRIPTION: This snippet enumerates the available command-line options for \"kratos validate identity\". Flags such as --help provide command usage info. Inherited options include specifying the Kratos Admin API endpoint, selecting the output format (e.g., table, json, yaml, json-pretty), and toggling quiet mode to suppress output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-validate-identity.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for identity\n\n```\n\n----------------------------------------\n\nTITLE: Example of registering RSA public key with OAuth2 client (TypeScript example)\nDESCRIPTION: This code demonstrates how to register an RSA public key using a TypeScript raw loader via a CodeBlock component. The `jwkExample` contains the JSON Web Key Set (JWKS) for the public key, which is used for signature verification at the OAuth server. The snippet emphasizes assigning a unique `kid` for key identification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/jwt.mdx#_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport jwkExample from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/client-create-jwk.ts'\n\n<CodeBlock language=\"tsx\">{jwkExample}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Revoking All Active Sessions After Login Using Ory CLI\nDESCRIPTION: Uses the Ory CLI `patch identity-config` command to add the `revoke_active_sessions` hook to the general login `after` hook array for the specified Ory project. This configuration revokes all of the user's previously active sessions upon a successful login, ensuring only one active session exists across all login methods.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config {project_id} \\\n  --add '/selfservice/flows/login/after/hooks=[{\"hook\": \"revoke_active_sessions\"}]'\n```\n\n----------------------------------------\n\nTITLE: Creating Hydra OAuth2 Client for Authorization Code Flow (Shell)\nDESCRIPTION: Uses the Hydra CLI to create an OAuth 2.0 client configured for the Authorization Code Flow (`authorization_code`) and Refresh Token (`refresh_token`) grant types. It specifies allowed redirect URIs and the `offline_access` scope. An alternative token endpoint authentication method (`client_secret_post`) is mentioned.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/common-oauth2-openid-connect-flows.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nhydra create client \\\n    --endpoint http://ory-hydra:4445 \\\n    --grant-type authorization_code,refresh_token \\\n    --response-type code \\\n    --scope offline_access \\\n    --redirect-uri http://my-app.com/callback,http://my-other-app.com/callback\n```\n\nLANGUAGE: text\nCODE:\n```\n    --token-endpoint-auth-method client_secret_post \\\n```\n\n----------------------------------------\n\nTITLE: Defining a Hidden Input Node in Ory UI (JSON5)\nDESCRIPTION: Shows the JSON5 structure for a hidden input field, commonly used for CSRF tokens (`csrf_token`). Includes attributes like `name`, `type`, `value`, `required`, `disabled`, and `node_type`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_14\n\nLANGUAGE: json5\nCODE:\n```\n{\n  type: \"input\",\n  group: \"default\",\n  attributes: {\n    name: \"csrf_token\",\n    type: \"hidden\",\n    value: \"By8X7TPnn/NMtXeDpK6sbshISK3t1WnezAtlMnFA6ZPsxxNmRsG8ks7WpsHMQtTLbxtqKJOiu4aArJok6/GOSw==\",\n    required: true,\n    disabled: false,\n    node_type: \"input\",\n  },\n  messages: [],\n  meta: {},\n}\n```\n\n----------------------------------------\n\nTITLE: Whitelisting Allowed Return URLs in Ory Identities (YAML)\nDESCRIPTION: This example demonstrates how to whitelist allowed return URLs in your Ory Identities configuration to prevent open redirect attacks when using the `?return_to=` query parameter. You must add the domain to the `selfservice.allowed_return_urls` list to enable dynamic redirects to that domain. This is required for security when redirecting to user-specified URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  allowed_return_urls:\n    - https://www.myapp.com/\n```\n\n----------------------------------------\n\nTITLE: Running the Ory Hydra PostgreSQL Addons Migration (Shell Command)\nDESCRIPTION: This bash command invokes the hydra binary to run the postgresql-addons migration, targeting specific Hydra and pg_cron-enabled databases. It is typically executed automatically by the migration job but can also be run manually for debugging or custom automation workflows. Users may override database names using '--hydra-db-name' and '--pgcron-db-name' flags to point to specific PostgreSQL instances.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/postgresql-ttl-migrations.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nmigrate postgresql-addons up --hydra-db-name ory_hydra --pgcron-db-name postgres\n\n```\n\n----------------------------------------\n\nTITLE: Test Nginx Configuration\nDESCRIPTION: This command tests the Nginx configuration file for syntax errors and structural issues. It's a crucial step to validate the configuration before reloading the service.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_29\n\nLANGUAGE: bash\nCODE:\n```\nnginx -t\n```\n\n----------------------------------------\n\nTITLE: Displaying Verification Code Label in Ory Interface (JSON)\nDESCRIPTION: Represents the 'Verification code' label for authentication or verification steps in Ory. Id is 1070011, without dynamic content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070011,\n  \"text\": \"Verification code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Options inherited from parent commands\nDESCRIPTION: Options that are inherited from parent commands and can be used with the 'keto version' command. Includes config file specification with a default location.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-version.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Querying session information with cURL after registration\nDESCRIPTION: Shell script showing how to query the /sessions/whoami endpoint with a session cookie to retrieve information about the authenticated user after successful registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -H \"Cookie: ory_kratos_session=MTU5OTE2ODc2N3xEdi1CQkFFQ180SUFBUkFCRUFBQVJfLUNBQUVHYzNSeWFXNW5EQThBRFhObGMzTnBiMjVmZEc5clpXNEdjM1J5YVc1bkRDSUFJR055VlROMGRteHhSakJrUzBkbmRUUjBlVFY1V0RCRWFVTnJXVmR6V25oaHx2DICsB6IMbaHSQwnYITUZqr7Qx7CxUlnaneJWH495wQ==\" \\\n  https://playground.projects.oryapis.com/sessions/whoami | jq\n```\n\n----------------------------------------\n\nTITLE: Defining a Success Response Model in Go with Swagger\nDESCRIPTION: This code defines a `identity` struct to represent a user identity and associates it with a 200 OK success response for the `getIdentity` API route. Swagger annotations are used to define the model and link it to the successful response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n// An Identity\n//\n// Represents an identity (e.g. user).\n//\n// swagger:model identity\ntype identity struct {\n    ID uuid.UUID `json:\"id\"`\n    // ...\n}\n\n// swagger:route GET /admin/identities/{id} identities getIdentity\n//\n// ...\n//\n//\tResponses:\n//\t  200: identity\n// ...\nfunc getIdentity(w http.ResponseWriter, r *http.Request) {}\n```\n\n----------------------------------------\n\nTITLE: Defining a Specific Error Response Model in Go with Swagger\nDESCRIPTION: This code defines a Go struct representing a specific error response, specifically an \"identity not found\" error.  It uses swagger annotations to define the model and associates it with a 404 response for the `getIdentity` API route. The `ErrorExample` field is annotated to be included in the JSON output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_6\n\nLANGUAGE: go\nCODE:\n```\n// swagger:model errorIdentityNotFound\ntype errorIdentityNotFound struct {\n    ErrorExample string `json:\"error\"`\n}\n\n// swagger:route GET /admin/identities/{id} identities getIdentity\n//\n// ...\n//\n//\tResponses:\n//\t  404: errorIdentityNotFound\n// ...\nfunc getIdentity(w http.ResponseWriter, r *http.Request) {}\n```\n\n----------------------------------------\n\nTITLE: Disable Mirroring Custom Claims to 'ext' with Ory CLI\nDESCRIPTION: Updates the Ory OAuth2 configuration via the CLI to disable the automatic mirroring of top-level custom claims into the nested `ext` claim. This command requires the project and workspace IDs. Setting `oauth2.mirror_top_level_claims` to `false` results in a cleaner JWT payload structure where custom claims only appear once at their configured location.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/jwt-access-token.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --replace \"/oauth2/mirror_top_level_claims=false\"\n```\n\n----------------------------------------\n\nTITLE: Running Ory Kratos Courier Watch Command - Shell\nDESCRIPTION: Executes the 'kratos courier watch' CLI command to launch the Ory Kratos message courier process. No external dependencies beyond a functional Ory Kratos installation are required. Accepts optional flags: '--expose-metrics-port' to set the port for the metrics endpoint and '--help' for flag descriptions. Outputs process logs or help information; improper flags may result in errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-courier-watch.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos courier watch [flags]\n```\n\n----------------------------------------\n\nTITLE: Related Identity Management Commands for Ory Kratos\nDESCRIPTION: This section provides references to related CLI commands for comprehensive identity management operations, including delete, get, import, list, patch, and validate. Each command targets specific CRUD or validation functions for identities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities.md#_snippet_1\n\nLANGUAGE: none\nCODE:\n```\n- [kratos](kratos) -\n- [kratos identities delete](kratos-identities-delete) - Delete identities by ID\n- [kratos identities get](kratos-identities-get) - Get one or more identities by ID\n- [kratos identities import](kratos-identities-import) - Import identities from files or STD_IN\n- [kratos identities list](kratos-identities-list) - List identities\n- [kratos identities patch](kratos-identities-patch) - Patch identities by ID (not yet implemented)\n- [kratos identities validate](kratos-identities-validate) - Validate local identity files\n```\n\n----------------------------------------\n\nTITLE: Authenticating using BCrypt-hashed Client Secret via CLI\nDESCRIPTION: This shell command illustrates how to perform OAuth 2.0 client credentials grant using a BCrypt-hashed client secret. Note that the secret provided is truncated to 72 characters, which is significant for security and correctness. It requires the Ory CLI and appropriate client configuration on the server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/20_bcrypt-secret-length.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nory perform client-credentials --client-id <the-client-id> \\\n  --client-secret 525348e77144a9cee9a7471a8b67c50ea85b9e3eb377a3c1a3a23db88f9150eefe76e6a3 \\\n  --endpoint http://localhost:4444\n```\n\n----------------------------------------\n\nTITLE: Implementing Main Application File in Dart\nDESCRIPTION: Dart implementation of the main application file that checks for a session cookie on initial load and redirects to login if not authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_6\n\nLANGUAGE: dart\nCODE:\n```\n# Content from lib/main.dart referenced but not directly shown in the provided text\n```\n\n----------------------------------------\n\nTITLE: Formatting JSONNet Files via Ory CLI Bash Command\nDESCRIPTION: This shell command demonstrates how to use the Ory CLI to format one or more JSONNet files. The command accepts glob patterns for flexible file selection and includes flags such as -w/--write to overwrite the original files or let the formatted output print to stdout. Dependencies include the Ory CLI installed and accessible in your PATH. The command expects JSONNet file paths as input and outputs either to stdout or writes changes to the files in place depending on the provided flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-format-jsonnet.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory format jsonnet path/to/files/*.jsonnet [more/files.jsonnet] [supports/**/{foo,bar}.jsonnet] [flags]\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands in Bash\nDESCRIPTION: Command-line options that are inherited from parent commands which can also be used with the 'keto relation-tuple delete-all' command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete-all.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: WebSocket Dockerfile\nDESCRIPTION: This Dockerfile is for building the Docker image for the WebSocket service. It likely specifies the base image (e.g., Go), copies the Go source code, installs dependencies, and sets the entry point to run the Go application. This allows the service to be deployed and run within a containerized environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_13\n\nLANGUAGE: HTML\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Global options inherited from parent commands that can be used with the delete access-tokens command. These include endpoint configuration, output format options, HTTP headers, and TLS verification settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-access-tokens.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Setting Database DSN (Bash)\nDESCRIPTION: Sets the DSN environment variable to the database connection string for the PostgreSQL instance running in Docker. This variable tells the Ory Hydra container how to find and connect to its database backend.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nexport DSN=postgres://hydra:secret@ory-hydra-example--postgres:5432/hydra?sslmode=disable\n```\n\n----------------------------------------\n\nTITLE: Example Ory Kratos Identity Structure (JSON)\nDESCRIPTION: This JSON snippet represents the basic structure of a single identity object that can be imported into Ory Kratos. It requires a `schema_id` to define the identity schema being used and a `traits` object containing the identity's data according to that schema. This example shows a simple identity with just an email trait.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import-identities.md#_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"schema_id\": \"default\",\n    \"traits\": {\n        \"email\": \"foo@example.com\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting OAuth 2.0 Clients by Owner - ory CLI\nDESCRIPTION: This example deletes OAuth 2.0 Clients associated with a specific owner (e.g., \"foo@bar.com\"). It first uses `ory list oauth2-clients` with a JSON output and `jq` to filter and extract the client IDs based on the contact email. It then pipes the filtered client IDs to the `ory delete oauth2-client` command.  This example relies on `jq` for JSON processing and the output of `ory list oauth2-clients`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-oauth2-client.md#_snippet_2\n\nLANGUAGE: Go\nCODE:\n```\nory delete oauth2-client $(ory list oauth2-clients --format json | jq -r 'map(select(.contacts[] == \"foo@bar.com\")) | .[].client_id')\n```\n\n----------------------------------------\n\nTITLE: Configuring Error Matching with JSON Handler\nDESCRIPTION: This snippet shows how to configure error matching for a JSON error handler using the `when` key.  It uses JSON5 syntax. The `when` array can contain multiple objects, each defining conditions under which the handler should be executed. Here, the handler applies when the error type is \"unauthorized\".\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_1\n\nLANGUAGE: json5\nCODE:\n```\n{\n  handler: \"json\", // or redirect, www_authenticate, ...\n  config: {\n    when: [\n      {\n        error: [\"unauthorized\", \"...\", \"...\"],\n      },\n    ],\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Performing Token Introspection\nDESCRIPTION: Performs token introspection on an access token using the Hydra CLI. It checks the validity and properties of the token. Requires Docker and Docker Compose.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_11\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml exec hydra \\\n  hydra introspect token \\\n  --format json-pretty \\\n  --endpoint http://127.0.0.1:4445/ \\\n  UDYMha9TwsMBejEvKfnDOXkhgkLsnmUNYVQDklT5bD8.ZNpuNRC85erbIYDjPqhMwTinlvQmNTk_UvttcLQxFJY\n```\n\n----------------------------------------\n\nTITLE: Example: Setting and Viewing the Default Ory Project\nDESCRIPTION: Demonstrates setting a specific Ory project (identified by its ID) as the default and then viewing the current default project configuration in JSON format using the `--format` flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-use-project.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ ory use project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89\n\nID\t\tecaaa3cb-0730-4ee8-a6df-9553cdfeef89\n\n$ ory use project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 --format json\n\n{\n  \"id\": \"ecaaa3cb-0730-4ee8-a6df-9553cdfeef89\"\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Have I Been Pwned Password Check in Ory Identities\nDESCRIPTION: This code disables the check against the HIBP breach database, allowing passwords to bypass this security measure. Useful for customization or testing purposes, but generally not recommended for production security.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/password-policy.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config \"$PROJECT_ID\" \\\n  --replace '/selfservice/methods/password/config/haveibeenpwned_enabled=false'\n```\n\n----------------------------------------\n\nTITLE: Running the ASP.NET Core Application (Shell)\nDESCRIPTION: Executes the `dotnet run` command from the shell within the project directory. This command builds and launches the ASP.NET Core web application, making it accessible locally, typically via a configured port like 3000.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ndotnet run\n```\n\n----------------------------------------\n\nTITLE: Getting the use of a JWK Set using Hydra and jq\nDESCRIPTION: This example shows how to retrieve the 'use' property of a JSON Web Key Set using the `hydra get jwk` command piped to `jq`. The `<set-id>` placeholder should be replaced with the actual ID of the JWK set to fetch. `jq` then filters the output, extracting the 'use' field for each key within the set.  Requires the Hydra CLI and `jq` command-line tool. The input is a JWK Set ID, and the output is the 'use' values of the keys.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwk.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nhydra get jwk <set-id> | jq -r '.[].use'\n```\n\n----------------------------------------\n\nTITLE: Displaying User Session Data (CSHTML)\nDESCRIPTION: Shows the Razor syntax within `Pages/Index.cshtml` to retrieve the Ory session object previously stored in `HttpContext.Items` by the middleware. It then serializes the session object to JSON and displays it on the page, confirming successful authentication and session retrieval.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_5\n\nLANGUAGE: cshtml\nCODE:\n```\n@page\n@{\n// add-lines-start\n// try to retrieve session from HttpContext\nvar session = HttpContext.Items.TryGetValue(\"req.session\", out var item) && item is Ory.Client.Model.ClientSession s ? s.ToJson() : \"<NO SESSION>\";\n// add-lines-end\n}\n\n// add-lines-start\n<html lang=\"en\">\n<head>\n   <title>Ory Network secured ASP.NET Core web app</title>\n</head>\n<body>\n   <h1>Dashboard</h1>\n   <hr />\n   <h2>Your Session Data:</h2>\n   <pre><code>@session</code></pre>\n</body>\n</html>\n// add-lines-end\n```\n\n----------------------------------------\n\nTITLE: Example of Patching Ory Network Project Configuration\nDESCRIPTION: Examples showing how to use the ory patch project command to make various configuration changes like replacing project name, adding SMTP configuration, disabling password authentication, and deleting TOTP settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-project.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--replace '/name=\"My new project name\"' \\\n\t--add '/services/identity/config/courier/smtp={\"from_name\":\"My new email name\"}' \\\n\t--replace '/services/identity/config/selfservice/methods/password/enabled=false' \\\n\t--delete '/services/identity/config/selfservice/methods/totp/enabled'\n\nory patch project ecaaa3cb-0730-4ee8-a6df-9553cdfeef89 \\\n\t--replace '/name=\"My new project name\"' \\\n\t--delete '/services/identity/config/selfservice/methods/totp/enabled'\n\t--format kratos-config > my-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Listing All Ory Projects in a Workspace via API in Bash\nDESCRIPTION: Uses a curl GET request to retrieve all projects associated with a specified workspace ID. The Authorization header carries the Workspace API Key to authenticate and authorize the request. The response includes metadata such as creation and update timestamps. Output is piped to jq to format the JSON response for easier reading.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request GET \"https://api.console.ory.sh/workspaces/${WORKSPACE_ID}/projects\" \\\n  --header \"Accept: application/json\" \\\n  --header \"Authorization: Bearer ${WORKSPACE_API_KEY}\" | jq\n```\n\n----------------------------------------\n\nTITLE: Configuring the Session Action via Ory Console and CLI (MDX)\nDESCRIPTION: Provides instructions within an MDX Tabs component for enabling the post-registration 'session' hook. One tab outlines the steps using the graphical Ory Console interface, while the other tab presents the equivalent Ory CLI command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/session.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<Tabs>\n<TabItem value=\"console\" label=\"Ory Console\" default>\n\n1. Go to <ConsoleLink route=\"project.authentication\" />.\n2. Toggle **Enable sign in after registration**.\n3. Click **Save**.\n\n</TabItem>\n<TabItem value=\"cli\" label=\"Ory CLI\">\n\nRun this command:\n\n```shell\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add '/selfservice/flows/registration/after/hooks/0/hook=\"session\"'\n```\n\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Specifying OAuth Scopes in GitLab OmniAuth Config (Ruby)\nDESCRIPTION: This Ruby snippet, nested within the `gitlab_rails['omniauth_providers']` configuration in `gitlab.rb`, sets the `authorize_params` for the OAuth 2.0 flow. It specifies that GitLab should request the 'email' scope when redirecting the user to Ory Hydra's authorization endpoint, ensuring GitLab is permitted to access the user's email address after consent.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_11\n\nLANGUAGE: ruby\nCODE:\n```\n     authorize_params: {\n           scope: 'email'\n      },\n```\n\n----------------------------------------\n\nTITLE: JSON Schema for User Identity with WebAuthn Trait\nDESCRIPTION: Provides a JSON schema example for user identity traits, including an optional `webauthn` credential object linked to an email trait. This schema helps integrate WebAuthn account identifiers into user profiles for clear identification in prompts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/20_webauthn-fido-yubikey.mdx#_snippet_3\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"traits\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"email\": {\n          \"type\": \"string\",\n          \"format\": \"email\",\n          \"title\": \"Your E-Mail\",\n          \"minLength\": 3,\n          \"ory.sh/kratos\": {\n            \"credentials\": {\n              \"webauthn\": {\n                \"identifier\": true\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: SCrypt Password Hash Format - plaintext\nDESCRIPTION: Specifies the format for SCrypt password hashes for import/migration into Ory Identities. The format includes cost, block, and parallelization parameters, as well as base64-encoded salt and hash. The code presents a format template and a complete example for reference.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_10\n\nLANGUAGE: plaintext\nCODE:\n```\n$scrypt$ln=<cost>,r=<block>,p=<parrelization>$<salt>$<hash>\n$scrypt$ln=16384,r=8,p=1$ZtQva9xCHzlSELH/mA7Kj5KjH2tCrkbwYzdxknkL0QQ=$pnTcXKaWVT+FwFDdk3vO1K0J7ZgOxdSU1tCJNYmn8zI=\n```\n\n----------------------------------------\n\nTITLE: Docker Command to Serve Ory Hydra Enterprise\nDESCRIPTION: This snippet shows how to start the Ory Hydra Enterprise service with Docker, specifying the DSN environment variable and configuration file. It launches the service after successful migration, making Ory Hydra available for use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -e DSN=cockroach://... europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel -- serve all -f /path/to/config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating an API Token for an Ory Project via API in Bash\nDESCRIPTION: Creates a new API token for a specific Ory project by sending a POST request with a JSON body specifying the token's name. The response includes the token value but it is only shown once at creation time. This requires the Workspace API Key for authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\ncurl --location --request POST \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}/tokens\" \\\n-d '{\"name\":\"example\"}' \\\n-H \"Content-Type: application/json\" \\\n-H \"Authorization: Bearer ${WORKSPACE_API_KEY}\" | jq\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Jsonnet Data Mapping for Ory CLI Integration - Shell\nDESCRIPTION: Shows how to base64-encode the Jsonnet data mapping snippet to embed it into the Ory CLI configuration. Encoding is required because Ory expects the mapper_url to be either a base64 string or an URL. This command takes a Jsonnet file and outputs base64-encoded content suitable for inclusion in the config.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Data Mapping for Salesforce Claims\nDESCRIPTION: Defines a Jsonnet snippet that maps Salesforce claims to the Ory Identity schema, including handling email verification logic to prevent enumeration attacks. Used in both console and CLI configurations for claims transformation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/42_salesforce.mdx#_snippet_0\n\nLANGUAGE: jsonnet\nCODE:\n```\nlocal claims = {\n  email_verified: false,\n} + std.extVar('claims');\n\n{\n  identity: {\n    traits: {\n      // Allowing unverified email addresses enables account\n      // enumeration attacks,  if the value is used for\n      // verification or as a password login identifier.\n      //\n      // Therefore we only return the email if it (a) exists and (b) is marked verified\n      // by Salesforce.\n      [if 'email' in claims && claims.email_verified then 'email' else null]: claims.email,\n      username: claims.nickname,\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client Using Ory CLI with Body Authentication (Bash)\nDESCRIPTION: This CLI command creates an OAuth2 client configured to authenticate using the client_secret_post method, where client credentials are sent in the HTTP request body. It specifies client credentials grant type and associates the client with a project. This prepares the client to use the Body Authentication method shown in the subsequent JavaScript example.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nory create oauth2-client --project \"$PROJECT_ID\" \\\n  --name \"Client Credentials Demo\" \\\n  --grant-type client_credentials \\\n  --token-endpoint-auth-method client_secret_post\n```\n\n----------------------------------------\n\nTITLE: Matching Remote IP with Forwarded Header (YAML)\nDESCRIPTION: This YAML snippet shows how to configure Ory Oathkeeper to respect the `X-Forwarded-For` header when matching remote IP addresses. By setting `respect_forwarded_for_header` to `true`, the system will consider IP addresses listed in the header in addition to the direct connection IP. This is important when Ory Oathkeeper sits behind a load balancer or proxy.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nconfig:\n  when:\n    - request:\n        remote_ip:\n          respect_forwarded_for_header: true # defaults to false\n          match:\n            - 192.168.1.0/24\n```\n\n----------------------------------------\n\nTITLE: Defining an Empty Response Model in Go with Swagger\nDESCRIPTION: This code defines an empty response struct for scenarios such as successful DELETE operations that return a 204 No Content status. It utilizes swagger annotations to declare the `emptyResponse` model and associates it with the 204 response for the `deleteIdentity` API route.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_7\n\nLANGUAGE: go\nCODE:\n```\n// Empty responses are sent when, for example, resources are deleted. The HTTP status code for empty responses is typically 204.\n//\n// swagger:response empty\ntype emptyResponse struct{}\n\n// swagger:route DELETE /admin/identities/{id} identities deleteIdentity\n//\n// ...\n//\n//\tResponses:\n//\t  204: empty\n// ...\nfunc deleteIdentity(w http.ResponseWriter, r *http.Request) {}\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Secure Component with MDX\nDESCRIPTION: This snippet imports the 'Secure' component from a shared MDX file and renders it within the MDX context. It is used to display security-related content or guidelines as part of the installation documentation. The snippet depends on the '../_common/secure.mdx' path being available and expects no inputs or outputs other than rendering the component's content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/install.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Secure from '../_common/secure.mdx'\n\n<Secure />\n```\n\n----------------------------------------\n\nTITLE: Configure Session Hook after OIDC Registration - YAML\nDESCRIPTION: This YAML snippet configures the `session` hook to be executed after OIDC (OpenID Connect) registration in Ory Kratos. This ensures that users are automatically logged in after successfully signing up with a social sign-in provider, avoiding the need to log in again to establish a session. The hook is added to the `after/oidc/hooks` section of the registration flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/kratos/configuration/oidc.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    registration:\n      after:\n        oidc:\n          hooks:\n            - hook: session\n```\n\n----------------------------------------\n\nTITLE: Visualizing Ory Tunnel Flow with Browser and App (Mermaid)\nDESCRIPTION: This Mermaid graph illustrates the interaction flow when using Ory Tunnel for local development. It shows the browser accessing the local application (port 3000) and the Ory Tunnel (port 4000), how the Tunnel mirrors Ory's APIs, and the data flow between these components.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/_common/ory-cli.mdx#_snippet_0\n\nLANGUAGE: Mermaid\nCODE:\n```\ngraph LR\n    B(Browser) -->|GET localhost:4000| T(Ory Tunnel)\n    T -->|Response| B\n    T <-->|mirrors| API(\"Ory's APIs\")\n    B -->|GET localhost:3000| A(Your App)\n    A -->|Response| B\n```\n\n----------------------------------------\n\nTITLE: Example: Revoking a Token with Client Credentials (Shell)\nDESCRIPTION: Provides a concrete example of using `ory revoke token`. This command revokes the specified token (`ciOiJIUz...`) using the provided OAuth 2.0 client ID and secret for authentication. Note that the example token is truncated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-revoke-token.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory revoke token --client-id a0184d6c-b313-4e70-a0b9-905b581e9218 --client-secret Hh1BjioNNm ciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNT\n```\n\n----------------------------------------\n\nTITLE: Defining Noop Mutator in an Access Rule YAML\nDESCRIPTION: This YAML snippet demonstrates how to use the `noop` mutator within an access rule definition. The access rule (`access-rule-1.yaml`) specifies which requests should be processed by the `noop` mutator. When a request matches the criteria defined in `match`, the `noop` handler will be invoked to process the request, without changing the headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nmutators:\n  - handler: noop\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering ConfigMarkdown React Component in MDX\nDESCRIPTION: This snippet imports the ConfigMarkdown React component from a local path and renders it within an MDX document. It passes a remote URL pointing to a JSON schema file as the \"src\" prop and specifies the \"binary\" prop to \"keto\". This setup enables automatic rendering of the configuration schema in the documentation. Requires MDX environment with React and component support.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/configuration.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport ConfigMarkdown from '@site/src/components/ConfigMarkdown';\n\n<ConfigMarkdown src=\"https://raw.githubusercontent.com/ory/keto/master/.schema/config.schema.json\" binary=\"keto\" />\n```\n\n----------------------------------------\n\nTITLE: Retrieving Login After Hooks Configuration Using Ory CLI\nDESCRIPTION: Uses the Ory CLI `get identity-config` command with a JSONPath format specifier (`--format=jsonpath`) to fetch and display the current configuration under `selfservice.flows.login.after` for the specified Ory project ID. This command is useful for inspecting existing hooks before adding or removing them.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/actions.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory get identity-config {project_id} \\\n  --format=jsonpath='selfservice.flows.login.after'\n```\n\n----------------------------------------\n\nTITLE: Sample values.yaml Configuration for Helm Deployment of Ory Hydra\nDESCRIPTION: This YAML configuration file customizes the Helm deployment of Ory Hydra, specifying image repository, tags, secrets, and enabling migration and monitoring features for production readiness.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nimage:\n  repository: europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel\n  tag: <replace-with-current-image-tag>\nimagePullSecrets:\n  - name: ory-oel-gcr-secret\nmaester:\n  enabled: false\nhydra:\n  automigration:\n    enabled: true\nserviceMonitor:\n  enabled: true\nsecret:\n  enabled: false\n  nameOverride: \"ory-oel-hydra-secret\"\nconfig:\n  # --hydra config--\n  # https://www.ory.sh/docs/hydra/reference/configuration\n```\n\n----------------------------------------\n\nTITLE: URL encoding of special characters in SMTP URLs\nDESCRIPTION: Demonstrates how to properly encode special characters in SMTP URLs to prevent configuration issues. Includes examples of incorrect URLs and their correctly encoded counterparts, emphasizing the importance of URL encoding for characters like '/', '%', and '$'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/05_smtp-courier.mdx#_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\n-smtp://username:pass/word@email-smtp.eu-west-3.amazonaws.com:587\n+smtp://username:pass%2Fword@email-smtp.eu-west-3.amazonaws.com:587\n\n- smtp://user%name:pass$word@some-email-service.com:587\n+smtp://user%25name:pass%24word@some-email-service.com:587\n```\n\n----------------------------------------\n\nTITLE: Displaying ID Label in Ory Interface (JSON)\nDESCRIPTION: Defines a static 'ID' label, typically used to present user or resource identifiers in forms or status messages. Requires no parameters; message id is 1070004.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070004,\n  \"text\": \"ID\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Tunnel for Local Development - npx\nDESCRIPTION: Starts the Ory tunnel using `npx`, mirroring Ory APIs (like authentication flows) to `http://localhost:4000` and proxying frontend requests to the specified target `http://localhost:5173`. The `--dev` flag simplifies local setup by disabling certain security checks. Requires `@ory/cli` installed in the project or globally.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nnpx @ory/cli tunnel --dev http://localhost:5173\n```\n\n----------------------------------------\n\nTITLE: Example Identity Configuration (YAML)\nDESCRIPTION: This is an example YAML configuration payload demonstrating how to define settings for the courier service. This YAML structure is expected by the `ory update identity-config` command when using the `--file` flag with a YAML file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-identity-config.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  smtp:\n    # ...\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Ory Project's Full Configuration Using API in Bash\nDESCRIPTION: Fetches the complete configuration of a specific Ory Network project identified by ORY_PROJECT_ID using a GET request. Requires Authorization header with Workspace API Key and environment variable setup. The JSON output is piped to jq for readable formatting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_PROJECT_ID=\n\ncurl --location --request GET \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}\" \\\n  --header \"Accept: application/json\" \\\n  --header \"Authorization: Bearer ${WORKSPACE_API_KEY}\" | jq\n```\n\n----------------------------------------\n\nTITLE: Sample JSON Response for SSO OIDC Providers - JSON\nDESCRIPTION: A sample JSON structure showing an array of configured SSO OIDC providers as returned by the Ory API. Each object contains credentials, issuer details, mapping information, and organization membership metadata. This serves as reference output for list SSO connections requests and helps users understand the expected response shape.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"client_id\": \"...\",\n    \"client_secret\": \"...\",\n    \"id\": \"ory-GPx1yPH4\",\n    \"issuer_url\": \"https://example.org\",\n    \"label\": \"My OIDC provider\",\n    \"mapper_url\": \"https://storage.googleapis.com/bac-gcs-production/94292215dbabe405bebff988b5356663fcf5cba35b10fc6ca2cfea7bc7049e906e01d271a3daeb844203efdfbf2cff356274daa63d5afc2a379bbe93b8b40e63.jsonnet\",\n    \"organization_id\": \"6bb1c7d1-3b3e-4995-9e09-35649dc45a2b\",\n    \"provider\": \"generic\",\n    \"scope\": [\"openid\", \"offline_access\", \"email\"]\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Production Build with npm run build\nDESCRIPTION: Executes 'npm run build' to compile and minify the project for production deployment. It generates optimized static files for serving in a production environment, relying on Vite's build process.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/vue/README.md#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnpm run build\n```\n\n----------------------------------------\n\nTITLE: Creating and Importing OAuth2 Clients Example\nDESCRIPTION: This example demonstrates how to create a JSON file with multiple OAuth2 client configurations and import it. It also shows an alternative method using pipe and demonstrates how to encrypt an auto-generated client secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-oauth2-client.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nImport an example OAuth2 Client:\n\tcat > ./file.json <<EOF\n\t[\n      {\n\t    \"grant_types\": [\"implicit\"],\n\t    \"scope\": \"openid\"\n\t  },\n      {\n\t    \"grant_types\": [\"authorize_code\"],\n\t    \"scope\": \"openid\"\n\t  }\n    ]\n\tEOF\n\n\tory import oauth2-client file.json\n\nAlternatively:\n\n\tcat file.json | ory import oauth2-client\n\nTo encrypt an auto-generated OAuth2 Client Secret, use flags `--pgp-key`, `--pgp-key-url` or `--keybase` flag, for example:\n\n  ory import oauth2-client -n \"my app\" -g client_credentials -r token -a core,foobar --keybase keybase_username\n```\n\n----------------------------------------\n\nTITLE: Using Nested Names in HTML Form Inputs for Ory Kratos Identity Traits - JavaScript/HTML\nDESCRIPTION: This snippet shows an example of an HTML input element with a nested name attribute value to target nested fields in the Identity Schema. Specifically, it demonstrates how to format the name property (e.g., \"traits.name.last\") so Ory Kratos can parse this as a nested string field in the traits object.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/html-forms.md#_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n<input type=\"text\" name=\"traits.name.last\">\n```\n\n----------------------------------------\n\nTITLE: Formatting Multi-line Shell Commands in Markdown\nDESCRIPTION: Demonstrates formatting multi-line shell commands, specifically a `curl` request, in Markdown. It uses the `shell` identifier, employs backslashes (`\\`) for line continuation, and requires two-space indentation for subsequent lines. The example includes placeholders like `{ORY_API_KEY}` and `{project-slug}`.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n```shell\ncurl --request GET -sL \\\n  --header \"Content-Type: application/json\" \\\n  --header \"Authorization: Bearer {ORY_API_KEY}\" \\\n  'https://{project-slug}.projects.oryapis.com/admin/identities/{identity_id}?include_credential=oidc'\n```\n```\n\n----------------------------------------\n\nTITLE: Mermaid Diagram of SCIM in Ory Network\nDESCRIPTION: This Mermaid diagram illustrates the relationship between a Project, Organizations, SCIM Client, and Identities in Ory Network. It visualizes how a Project can have multiple Organizations, an Organization can have a SCIM Client and also owns Identities, and how a SCIM Client provisions Identities into an Organization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/50_scim.mdx#_snippet_0\n\nLANGUAGE: Mermaid\nCODE:\n```\nflowchart TD\n    P(Project) --> O1(Organization 1)\n    P(Project) --> O(Organization 2)\n    P(Project) --> O3(Organization 3)\n\n    O --> S(SCIM Client)\n    O <-->|belongs to| I(Identity)\n    S -->|provisions| I\n\n```\n\n----------------------------------------\n\nTITLE: Starting the Ory Tunnel for Local Development using Shell\nDESCRIPTION: Starts the Ory Tunnel using the `ory tunnel` command in the shell, proxying Ory APIs to `localhost:4000`. It requires the project slug (as the environment variable `$PROJECT_SLUG`) and the URL of the local application (`http://localhost:3000`). The `--dev` flag disables certain security checks for easier local development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/local-development.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --dev --project $PROJECT_SLUG \\\n  http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Embedding Dart Code Example (MDX)\nDESCRIPTION: This MDX code block is used within documentation to embed and display an external Dart source code file. It utilizes `raw-loader` to import the file content and the Docusaurus `CodeBlock` component to render the code with specified language highlighting and a title.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/10_google.mdx#_snippet_4\n\nLANGUAGE: mdx\nCODE:\n```\n```mdx-code-block\nimport CodeBlock from '@theme/CodeBlock'\nimport signInWithGoogleSnippet from \"!!raw-loader!@site/code-examples/sdk/dart/social-sign-in/sign-in-with-google.dart\"\n\n<CodeBlock language=\"dart\" title=\"sign-in-with-google.dart\">{signInWithGoogleSnippet}</CodeBlock>\n```\n```\n\n----------------------------------------\n\nTITLE: Generating System Secret via urandom (Bash)\nDESCRIPTION: Generates a random 32-character alphanumeric string using /dev/urandom and exports it as the SECRETS_SYSTEM environment variable. This variable is essential for Ory Hydra to encrypt data stored in the database and must be set to the same value every time the Hydra server restarts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nexport SECRETS_SYSTEM=$(export LC_CTYPE=C; cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1)\n```\n\n----------------------------------------\n\nTITLE: Configuration of WebAuthn in YAML for CLI\nDESCRIPTION: Defines WebAuthn settings in the Ory identity configuration YAML, setting `enabled` to true and specifying the `id` and `origin` of the login page, which are critical for WebAuthn operation. This configuration is applied via CLI commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/20_webauthn-fido-yubikey.mdx#_snippet_2\n\nLANGUAGE: YAML\nCODE:\n```\nwebauthn:\n  config:\n    passwordless: false\n    rp:\n      display_name: MY_PROJECT_NAME\n      # highlight-start\n      id: loginpage.com\n      # Set 'id' to the top-level domain.\n      origin: https://loginpage.auth.com:4455\n      # Set 'origin' to to the exact URL of the page that prompts user to use WebAuthn. You must include the scheme, host, and port.\n  enabled: true\n  # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Initiating OAuth2 Authorization Code Flow (HTML)\nDESCRIPTION: Provides an HTML anchor tag (`<a>`) example that redirects the user's browser to the Ory Hydra authorization endpoint (`/oauth2/auth/`). This link includes the necessary query parameters (`client_id`, `scope`, `redirect_uri`) to start the Authorization Code Flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/common-oauth2-openid-connect-flows.mdx#_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<a href=\"https://ory-hydra:4444/oauth2/auth/?client_id=client-id&scope=offline_access&redirect_uri=http://my-app.com/callback\">\n  Connect with ...\n</a>\n```\n\n----------------------------------------\n\nTITLE: Implementing Settings Page with Ory Elements in Preact (TypeScript)\nDESCRIPTION: This Preact component demonstrates an account settings page with Ory Elements, updating form contents based on the Ory project's configuration. Required dependencies are Preact, TypeScript, and Ory Elements. Inputs include user settings changes, and outputs are updates to the user's profile and settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/settings.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/settings.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Dependencies for Next.js\nDESCRIPTION: Command to install Ory SDK and integration tools for JavaScript frameworks, enabling API calls to Ory services.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nnpm i --save @ory/integrations @ory/client\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding Files in Shell for Ory JWT Configuration\nDESCRIPTION: Base64 encodes the JWKS file and the JsonNet claims mapper template to supply them as URLs in Ory tokenizer template configuration. The base64-encoded strings are stored in shell variables for use in patching project configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/session-to-jwt-cors.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nJWKS_B64_ENCODED=$(cat es256.jwks.json | base64 -w 0)\nJSONNET_B64_ENCODED=$(cat claims.jsonnet | base64 -w 0)\n```\n\n----------------------------------------\n\nTITLE: Implementing Recovery Page with Ory Elements in Preact (TypeScript)\nDESCRIPTION: This Preact example provides account recovery via the Ory Elements SDK, allowing users to recover access by submitting identifiers or triggers for credential recovery. It depends on Preact, TypeScript, and Ory Elements, receiving user input and responding with recovery status or instructions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/recovery.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/recovery.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Sample JSON response for ORY registration form input node\nDESCRIPTION: This JSON snippet illustrates the structure of a form input node within the registration flow, specifying an input element for 'traits.website' of type URL. It includes attributes such as 'name', 'type', and 'disabled', along with possible messages like validation errors. It represents the server's response data that can be parsed to understand form structure and errors before presenting or processing form inputs. No dependencies are required as it is static JSON data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/code/registration/samples/oidc.invalid.txt#_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"oidc\",\n  \"attributes\": {\n    \"name\": \"traits.website\",\n    \"type\": \"url\",\n    \"disabled\": false\n  },\n  \"messages\": [\n    {\n      \"id\": 4000002,\n      \"text\": \"Property website is missing.\",\n      \"type\": \"error\",\n      \"context\": {\n        \"property\": \"website\"\n      }\n    }\n  ],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Website\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Allowed Authorizer (YAML)\nDESCRIPTION: Configures the `allowed` authorizer in Ory Oathkeeper (`oathkeeper.yml`). This simple authorizer permits any authenticated request (identified by an authenticator like `cookie_session` or `anonymous`) to proceed. It's used in this example as a basic authorization mechanism, allowing access without complex RBAC or ACL checks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nauthorizers:\n  allowed:\n    enabled: true\n# ...\n```\n\n----------------------------------------\n\nTITLE: Command Options for `kratos list identities`\nDESCRIPTION: Lists the available command-line options for the `kratos list identities` command. Flags include `--consistency` (string: 'strong' or 'eventual', default 'eventual'), `--help` (-h), `--page-size` (int, default 100), and `--page-token` (string).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-list-identities.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n      --consistency string   The read consistency to use. Can be either \"strong\" or \"eventual\". Defaults to \"eventual\". (default \"eventual\")\n  -h, --help                 help for identities\n      --page-size int        maximum number of items to return (default 100)\n      --page-token string    page token acquired from a previous response\n```\n\n----------------------------------------\n\nTITLE: Options for kratos identities CLI tool\nDESCRIPTION: This code snippet lists the command-line options available for the kratos identities tool, including endpoint URL, output format, help, and quiet mode. It specifies default values and the functionality of each option to configure the CLI behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos&#39; Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n  -f, --format string     Set the output format. One of table, json, and json-pretty. (default: \"default\")\n  -h, --help              help for identities\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Configuring ORY Kratos Jaeger Tracing via Environment Variables (sh)\nDESCRIPTION: These environment variables are used to explicitly configure ORY Kratos to enable Jaeger tracing. They specify \"jaeger\" as the tracing provider and provide the network addresses for the Jaeger sampling server and the local agent, directing Kratos where to send its trace data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/tracing.mdx#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nTRACING_PROVIDER=jaeger    # only \"jaeger\" is supported for now\nTRACING_PROVIDERS_JAEGER_SAMPLING_SERVER_URL=http://jaeger:5778/sampling\nTRACING_PROVIDERS_JAEGER_LOCAL_AGENT_ADDRESS=jaeger:6831\n```\n\n----------------------------------------\n\nTITLE: Listing ORY Keto Parent Command Inherited Options (Shell)\nDESCRIPTION: Lists options that are inherited from the parent `keto` commands and are available for `keto relation-tuple parse`. The primary inherited option shown is `-c` or `--config`, used to specify configuration files for ORY Keto. These settings apply globally to the keto CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-parse.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Updating Install Script with godownloader - Shell\nDESCRIPTION: Demonstrates updating an installation script by regenerating it using 'godownloader' with the current goreleaser config. Input is the '.goreleaser.yml' file; output is a new 'install.sh' script. Requires 'godownloader' and go CLI tools; set the GO111MODULES variable and ensure repository paths are correct.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\nGO111MODULES=off go get -u github.com/goreleaser/godownloader\ngodownloader .goreleaser.yml --repo=$(basename $(dirname $(pwd)))/$(basename $(pwd)) > ./install.sh\n\n```\n\n----------------------------------------\n\nTITLE: Description of 'hydra import jwk' Command Functionality\nDESCRIPTION: Provides an overview of the command's purpose, supported input formats, and behavior when importing keys into the JSON Web Key Store. It also explains the automatic creation or updating of key sets based on provided identifiers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\nThis command allows you to import JSON Web Keys from one or more JSON files or STDIN to the JSON Web Key Store.\nCurrently supported formats are raw JSON Web Keys or PEM/DER encoded data. If the JSON Web Key Set exists already,\nthe imported keys will be added to that set. Otherwise, a new set will be created.\n```\n\n----------------------------------------\n\nTITLE: Listing PKCS#11 Slots AWS CloudHSM Bash\nDESCRIPTION: Command utilizing the `pkcs11-tool` to list the available slots or tokens exposed by the AWS CloudHSM PKCS#11 library. This helps in identifying the correct `token_label` for configuration.\n\nDependencies: `pkcs11-tool`, AWS CloudHSM client with PKCS#11 library.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\npkcs11-tool --module /opt/cloudhsm/lib/libcloudhsm_pkcs11.so --list-slots\n```\n\n----------------------------------------\n\nTITLE: Starting Ory Tunnel for Local Development\nDESCRIPTION: Starts the Ory Tunnel using the Ory CLI via npx. It configures the tunnel to forward requests to the local React development server running at `http://localhost:3000` and exposes Ory APIs locally at `http://localhost:4000`. The `--dev` flag disables certain security checks, making it suitable only for local development environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nnpx @ory/cli tunnel --dev http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Verification Flow using React SDK (TypeScript)\nDESCRIPTION: Illustrates initiating an Ory email verification flow within a React frontend application using the Ory TypeScript SDK. This involves calling the SDK to create the flow and then rendering the appropriate UI components based on the flow response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_52\n\nLANGUAGE: tsx\nCODE:\n```\n{createReactVerificationApi}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Login Flow with Go SDK\nDESCRIPTION: Shows how to retrieve an existing login flow using the Ory Go SDK by providing the flow ID from the URL query parameter.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_11\n\nLANGUAGE: go\nCODE:\n```\nimport getLoginApi from '!!raw-loader!../../../code-examples/sdk/go/frontend/get-login.go'\n\n<CodeBlock language=\"go\" title=\"login.go\">{getLoginApi}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Installing Ory CLI via Script (Shell)\nDESCRIPTION: This command downloads and executes an installation script directly from the Ory GitHub repository using `curl` and `bash`. The `-b .` flag specifies that the binary should be installed in the current directory, and `ory` is the desired binary name. Requires `curl` and `bash`.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nbash <(curl https://raw.githubusercontent.com/ory/meta/master/install.sh) -b . ory\n```\n\n----------------------------------------\n\nTITLE: Defining Chat Application Structure in YAML\nDESCRIPTION: YAML representation of a chat application's structure, showing three chats ('memes', 'cars', and 'coffee-break') and their respective member lists. This structure demonstrates the relationship model that will be implemented in Ory Keto.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/list-api-display-objects.mdx#_snippet_0\n\nLANGUAGE: yml\nCODE:\n```\nmemes:\n  members:\n    - PM\n    - Vincent\n    - Julia\ncars:\n  members:\n    - PM\n    - Julia\ncoffee-break:\n  members:\n    - PM\n    - Vincent\n    - Julia\n    - Patrik\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI tunnel command syntax - Shell\nDESCRIPTION: The `ory tunnel` command no longer uses `ORY_SDK_URL` or `ORY_KRATOS_URL` environment variables to specify the project URL. Instead, the project/workspace is specified using `--project`, `--workspace` flags or `ORY_PROJECT`, `ORY_WORKSPACE` environment variables.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n- ORY_SDK_URL=https://<project-slug>.projects.oryapis.com ory tunnel\n- ORY_KRATOS_URL=https://<project-slug>.projects.oryapis.com ory tunnel\n+ ory tunnel --project <project>\n+ ory tunnel --workspace <workspace_id> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project-id> ory tunnel\n```\n\n----------------------------------------\n\nTITLE: Deleting Kratos Identities by ID (Syntax)\nDESCRIPTION: Basic syntax for the `kratos delete identity` command. It accepts one or more identity IDs as arguments to specify which identities to delete. Optional flags can be appended.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-delete-identity.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos delete identity id-0 [id-1] [id-2] [id-n] [flags]\n```\n\n----------------------------------------\n\nTITLE: Installing SoftHSM and OpenSC on Ubuntu Using Shell Commands\nDESCRIPTION: These shell commands update the package index and install SoftHSM and OpenSC packages on Ubuntu Linux. This setup is used for testing and development of PKCS#11-based HSM functionality in Ory Hydra without requiring physical hardware.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nsudo apt update\nsudo apt install softhsm opensc\n```\n\n----------------------------------------\n\nTITLE: Representing Multiple Identity Credentials YAML\nDESCRIPTION: Demonstrates the YAML structure for defining multiple credential types (password and oidc) for a single Ory identity. It shows how each credential type includes its own `id`, a list of `identifiers`, and specific `config` details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials.mdx#_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n      - johnd@ory.sh\n    config:\n      hashed_password: ...\n  oidc:\n    id: oidc\n    identifiers:\n      - google:j8kf7a3...\n      - facebook:83475891...\n    config:\n      - provider: google\n        identifier: j8kf7a3\n      - provider: facebook\n        identifier: 83475891\n```\n\n----------------------------------------\n\nTITLE: Deleting an Ory Project via API in Bash\nDESCRIPTION: Provides a dangerous operation example for deleting a project identified by an environment variable ORY_PROJECT_ID. Requires authorization via Workspace API Key in the headers. The DELETE request permanently removes the project and all of its data with no undo possibility. Use caution.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/manage-project-via-api.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_PROJECT_ID=\n\ncurl --location --request DELETE \"https://api.console.ory.sh/projects/${ORY_PROJECT_ID}\" \\\n  --header \"Accept: application/json\" \\\n  --header \"Authorization: Bearer ${WORKSPACE_API_KEY}\"\n```\n\n----------------------------------------\n\nTITLE: Representing Chat Relationships with Keto Relation Tuples\nDESCRIPTION: Keto relation tuples that represent the membership relationships in the chat application. Each tuple follows the format 'namespace:object#relation@subject', defining which users are members of which chats.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/list-api-display-objects.mdx#_snippet_1\n\nLANGUAGE: keto-relation-tuples\nCODE:\n```\nchats:memes#member@PM\nchats:memes#member@Vincent\nchats:memes#member@Julia\n\nchats:cars#member@PM\nchats:cars#member@Julia\n\nchats:coffee-break#member@PM\nchats:coffee-break#member@Vincent\nchats:coffee-break#member@Julia\nchats:coffee-break#member@Patrik\n```\n\n----------------------------------------\n\nTITLE: Applying Ory Identities Configuration Changes using Ory CLI (Shell)\nDESCRIPTION: Explains how to use the Ory CLI command `ory update identity-config` to upload and apply changes made to a local identity configuration file (e.g., 'identity-config.yaml') to the specified Ory project. Requires the project ID, workspace ID, and the path to the modified configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/10_session-lifespan.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Using kratos import identities with Files (Shell)\nDESCRIPTION: This snippet illustrates the basic syntax for using the `kratos import identities` command to import identity data from one or more JSON files. You can list multiple file paths as arguments to perform a batch import. Flags can be added at the end to modify command behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import-identities.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos import identities file-1.json [file-2.json] [file-3.json] [file-n.json] [flags]\n```\n\n----------------------------------------\n\nTITLE: Example: OIDC Authorization Request without `redirect_uri` (Deprecated)\nDESCRIPTION: Demonstrates the previous method for initiating an OpenID Connect flow via Ory Network's `/oauth2/auth` endpoint, omitting the `redirect_uri` parameter. This method will no longer be supported after the enforcement date (no sooner than August 1st, 2024).\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/40_mandatory-redirect-uri.mdx#_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n/oauth2/auth?scope=openid&client=1234\n```\n\n----------------------------------------\n\nTITLE: Sequence Diagram of OAuth2 Authorization Code Flow\nDESCRIPTION: This Mermaid diagram illustrates the sequence of events in the OAuth2 Authorization Code flow, involving the User, Client, and Authorization Server (AS). It shows interactions for login, redirection, authentication, consent, code exchange, and token retrieval.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/authorization-code-flow.mdx#_snippet_0\n\nLANGUAGE: Mermaid\nCODE:\n```\nsequenceDiagram\n    participant User\n    participant Client\n    participant AS as OAuth2 Server\n    User->>+Client: Click \"Login with OAuth2\"\n    Client->>+AS: Redirect to /authorize\n    AS->>+User: Prompt for login and consent\n    User->>+AS: Enter credentials and consent\n    AS->>+Client: Redirect to client callback URL with code\n    Client->>+AS: Exchange code for token\n    AS->>+Client: Return token\n    Client-->>Client: Process and store token\n\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding JSONNet for Embedding (Bash)\nDESCRIPTION: Bash command to read a JSONNet file, encode its content using base64, and copy the result to the system clipboard (`pbcopy` is macOS specific). This encoded string is then manually pasted into the main Ory configuration JSON file for embedding inline.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nbase64 < oidc-mapping/google.jsonnet | pbcopy\n```\n\n----------------------------------------\n\nTITLE: Configure Ory Client URL\nDESCRIPTION: This Go code snippet shows how to configure an Ory client, setting the URL to a custom domain. It initializes a new configuration using `ory.NewConfiguration()` and sets the server URL. This is crucial for the client to interact with the correct Ory instance, especially in a production environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/01_go.mdx#_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// register a new Ory client with the URL set to the custom domain\n// we can also read the URL from the env or a config file\nc := ory.NewConfiguration()\nc.Servers = ory.ServerConfigurations{{URL: \"https://ory.example.org\"}}\n```\n\n----------------------------------------\n\nTITLE: Inherited options for configuring the 'kratos remote status' command\nDESCRIPTION: Details additional flags inherited from parent commands, such as setting the API endpoint URL and output format, as well as a quiet mode to suppress output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-status.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Getting Ory Identities Configuration via CLI\nDESCRIPTION: Provides shell commands using the Ory CLI to list available workspaces and projects, then fetch the identity configuration for a specified project and save it to a YAML file for editing. This is a prerequisite step before modifying the configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/25_lookup-secrets.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Display Configuration Schema using ConfigMarkdown\nDESCRIPTION: This snippet uses the ConfigMarkdown component to display a configuration schema. It imports the component from its source directory and then uses it to render the schema from a specified JSON file hosted online. The `src` parameter points to the schema URL and the `binary` parameter represents the name of the binary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/reference/configuration.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\n```mdx-code-block\nimport ConfigMarkdown from '@site/src/components/ConfigMarkdown';\n\n<ConfigMarkdown src=\"https://raw.githubusercontent.com/ory/oathkeeper/master/.schema/config.schema.json\" binary=\"oathkeeper\" />\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration Using CLI\nDESCRIPTION: This shell command updates the Ory identity configuration with the modified YAML file. It uploads the new configuration to the specified project and workspace, enabling changes such as the added subject source. Dependencies include the YAML configuration file and valid CLI credentials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Hydra OAuth2 Client for Client Credentials Flow (Shell)\nDESCRIPTION: Uses the Hydra CLI to create an OAuth 2.0 client specifically configured for the Client Credentials grant type (`-g client_credentials`). This flow is typically used for machine-to-machine communication where a user is not directly involved.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/common-oauth2-openid-connect-flows.mdx#_snippet_2\n\nLANGUAGE: shell script\nCODE:\n```\nhydra create client \\\n    --endpoint http://ory-hydra:4445 \\\n    -g client_credentials\n```\n\n----------------------------------------\n\nTITLE: Using the `ory list workspaces` Command (Shell)\nDESCRIPTION: Shows the basic syntax for executing the `ory list workspaces` command. Optional flags can be appended to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-workspaces.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory list workspaces [flags]\n```\n\n----------------------------------------\n\nTITLE: Creating an Ory Network project using Ory CLI Shell\nDESCRIPTION: This shell script uses the Ory CLI to create a new Ory Network project.  It then exports the project ID obtained from the creation output as an environment variable. This project ID is later used when configuring and running the migration script. The name of the project is also set in the CLI command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"Ory Docs Auth0 Migration Example\"\nexport ORY_PROJECT_ID='{set to the project ID from output}'\n```\n\n----------------------------------------\n\nTITLE: Create Symlink for Site\nDESCRIPTION: This command creates a symbolic link from the virtual host configuration file in `/etc/nginx/sites-available/` to the `/etc/nginx/sites-enabled/` directory. This enables the virtual host so it can be used by Nginx.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_24\n\nLANGUAGE: bash\nCODE:\n```\nln -s /etc/nginx/sites-available/accounts.example.com /etc/nginx/sites-enabled/accounts.example.com\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for keto status\nDESCRIPTION: Displays options inherited from parent commands, specifically the ability to specify configuration files using the `-c` or `--config` flag. Multiple config files can be loaded, with later files overwriting settings from earlier ones. The default configuration file path is also shown.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-status.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Embedding BrowserWindow component to display project credentials URL\nDESCRIPTION: This snippet imports the same custom BrowserWindow component and embeds it with a URL pointing to the project's credentials page, allowing users to view credentials within the documentation. An accompanying image labeled 'Project credentials' provides visual help.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/_common/create-project.mdx#_snippet_1\n\nLANGUAGE: MDX\nCODE:\n```\n<BrowserWindow url=\"https://console.ory.sh/projects/<id>/settings\">\n\n![Project credentials](../_static/shared/project-credentials.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Importing Identity from Standard Input (Shell)\nDESCRIPTION: This command shows an alternative method for importing identities by reading data from standard input instead of a file. The `cat file.json` command outputs the content of the JSON file, and the pipe (`|`) redirects this output as standard input to the `kratos import identities` command. This is useful for scripting or dynamic data generation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import-identities.md#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncat file.json | kratos import identities\n```\n\n----------------------------------------\n\nTITLE: Configuring Webhook Response Parsing (YAML)\nDESCRIPTION: This YAML snippet illustrates enabling response parsing for a webhook by setting `response.parse` to `true`.  With this setting, Ory will attempt to parse the JSON response from the webhook target, and, if successful, use the `identity` field in the response to update the user identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nhook: web_hook\nconfig:\n  # highlight-start\n  response:\n    parse: true\n  # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Authorizing Ory Workspace Admin API Calls (shell)\nDESCRIPTION: This shell snippet demonstrates how to authorize a request to an Ory Network Workspace Admin API endpoint. The Workspace API Key is included in the `Authorization` header using the `Bearer` scheme. This example shows a GET request to retrieve details for a specific project using the workspace API host.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/personal-access-token.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nGET /projects/$PROJECT_ID HTTP/1.1\nHost: api.console.ory.sh\nAccept: application/json\n# highlight-next-line\nAuthorization: Bearer $API_KEY\n```\n\n----------------------------------------\n\nTITLE: Enabling TOTP in Ory Identity Configuration (YAML)\nDESCRIPTION: Shows the necessary YAML configuration within the `identity-config.yaml` file to enable TOTP authentication. It involves setting `selfservice.methods.totp.enabled` to `true` and defining the `selfservice.methods.totp.config.issuer` name, which appears in the user's authenticator app.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    totp:\n      # highlight-start\n      config:\n        # The \"issuer\" is the name in the TOTP application users see when getting a one-time password.\n        issuer: ExampleIssuer.com\n      enabled: true\n      # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Deleting Relation Tuples in Ory Permissions\nDESCRIPTION: Commands to delete relation tuples from an Ory Permissions project. The first command shows what would be deleted, and the second command with the --force flag performs the actual deletion.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nory delete relation-tuples --project <project-id> --workspace <workspace-id> --all\n# WARNING: This operation is not reversible. Please use the `--force` flag to proceed.\n# These tuples would be deleted:\n#\n# NAMESPACE\tOBJECT\tRELATION NAME\tSUBJECT\n# groups\t\tdevs\tmember\t\ttom\n#\n# NEXT PAGE TOKEN\n# IS LAST PAGE\ttrue\n\n## Delete the tuple(s) after making sure this is what you want to do.\nory delete relation-tuples --project <project-id> --workspace <workspace-id> --all --force\n```\n\n----------------------------------------\n\nTITLE: Creating a New Workspace with Ory CLI in Shell\nDESCRIPTION: Shows the command to create a new workspace along with an example response illustrating the workspace ID, name, and subscription plan fields output by the CLI. This is the first step in setting up a managed environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory create workspace --name \"My New Workspace\"\n```\n\nLANGUAGE: bash\nCODE:\n```\n# Example response\n\nWorkspace created successfully!\nID                 885a2468-c23d-40df-a783-c941387a8701\nNAME               My New Workspace\nSUBSCRIPTION PLAN  <none>\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration Using Shell\nDESCRIPTION: This shell command updates the identity configuration of an Ory project using a modified YAML configuration file. After setting the PKCE option in the YAML, this command applies the changes to the project. It must be run after modifying identity-config.yaml to enforce new PKCE settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/oidc-pkce.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project $PROJECT_ID --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: UI Embedding of MFA Login Example in a Browser Window\nDESCRIPTION: Embeds an external MFA login UI within a custom BrowserWindow component pointing to a specific login URL with AAL2 and MFA via phone. Also displays an illustrative image for recovery code generation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/30_sms.mdx#_snippet_1\n\nLANGUAGE: MDX\nCODE:\n```\n<BrowserWindow url=\"https://playground.projects.oryapis.com/ui/login?aal=aal2&via=phone\">\n\n![Recovery Codes generation in Ory Account Experience](../_static/mfa/11.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Running Keto Database Migration Command\nDESCRIPTION: Command to migrate the Ory Keto database to a newer version. Should be run on fresh SQL installations or when upgrading from v0.7.x or later. Creating a backup before execution is strongly recommended.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-migrate-up.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo migrate up [flags]\n```\n\n----------------------------------------\n\nTITLE: Starting ORY Kratos with Tracing using Docker Compose (sh)\nDESCRIPTION: This snippet shows how to start an ORY Kratos instance with distributed tracing enabled by combining the standard `quickstart.yml` with the `quickstart-tracing.yml` configuration using Docker Compose. It builds the necessary images and brings up the services, making Kratos and Jaeger available for interaction.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/tracing.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ndocker-compose -f quickstart.yml \\\n    -f quickstart-tracing.yml \\\n    up --build\n```\n\n----------------------------------------\n\nTITLE: Go server-side session validation snippet\nDESCRIPTION: Go code example demonstrating server-side session validation with support for cookies and tokens, suitable for backend API security implementations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/check-session.mdx#_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n{goExample}\n```\n\n----------------------------------------\n\nTITLE: Submitting Ory Recovery Flow via cURL (Browser)\nDESCRIPTION: Uses cURL to submit user data (like email) to the `/self-service/recovery` endpoint to proceed with the recovery flow in a browser context. Requires sending cookies (using `-b`) and the CSRF token obtained from the flow. Includes the shell command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_42\n\nLANGUAGE: shell\nCODE:\n```\n{submitRecoveryCurlBrowser}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(submitRecoveryCurlBrowserJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Using 'noop' Authenticator in Ory Oathkeeper Access Rule Example\nDESCRIPTION: This example shows a complete Ory Oathkeeper Access Rule definition using the 'noop' authenticator, which allows all requests without authentication. It also includes a shell command demonstrating how to test this rule with `curl` and the expected HTTP response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ncat ./rules.json\n\n[{\n  \"id\": \"some-id\",\n  \"upstream\": {\n    \"url\": \"http://my-backend-service\"\n  },\n  \"match\": {\n    \"url\": \"http://my-app/some-route\",\n    \"methods\": [\n      \"GET\"\n    ]\n  },\n  \"authenticators\": [{\n    \"handler\": \"noop\"\n  }]\n}]\n\ncurl -X GET http://my-app/some-route\n\nHTTP/1.0 200 Status OK\nThe request has been allowed!\n```\n\n----------------------------------------\n\nTITLE: Example GET Request for Pagination in HTTP\nDESCRIPTION: This code block demonstrates a sample GET request to an API endpoint that supports pagination. The `page_size` parameter is used to control the number of results per page. The HTTP response includes a `Link` header containing links to navigate between pages.  The example includes request and response headers showing pagination in action.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/api-design.md#_snippet_1\n\nLANGUAGE: HTTP\nCODE:\n```\n> GET /admin/clients?page_size=5 HTTP/1.1\n> Host: $PROJECT_SLUG.projects.oryapis.com\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Content-Type: application/json\n< Link: </admin/clients?page_size=5&page_token=euKoY1BqY3J8GVax>; rel=\"first\",</admin/clients?page_size=5&page_token=h9LfEKUiFoLH2R0A>; rel=\"next\"\n< Date: Mon, 22 Apr 2019 23:34:29 GMT\n< Transfer-Encoding: chunked\n<\n[...] \n```\n\n----------------------------------------\n\nTITLE: Listing Relation Tuples Request Definition (Proto)\nDESCRIPTION: Defines the structure of a request to list relation tuples. It includes filters for querying specific relationships, such as by namespace, object, relation, and subject. It also includes pagination parameters and the ability to expand fields.  Dependencies include the RelationQuery and google.protobuf.FieldMask types.  The primary input is the query and related parameters. Output is a list of relation tuples and a token for next page. Constraints include page size limitation and snaptoken.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_2\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### ListRelationTuplesRequest\n\nRequest for ReadService.ListRelationTuples RPC. See\n`ListRelationTuplesRequest_Query` for how to filter the query.\n\n| Field          | Type                                                                                                  | Label | Description                                                                                                                                                                                                                                                                                                                                                                                                                  |\n| -------------- | ----------------------------------------------------------------------------------------------------- | ----- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| query          | [ListRelationTuplesRequest.Query](#ory-keto-relation_tuples-v1alpha2-ListRelationTuplesRequest-Query) |       | **Deprecated.** All query constraints are concatenated<br/>with a logical AND operator.<br/><br/>The RelationTuple list from ListRelationTuplesResponse<br/>is ordered from the newest RelationTuple to the oldest.                                                                                                                                                                                                          |\n| relation_query | [RelationQuery](#ory-keto-relation_tuples-v1alpha2-RelationQuery)                                     |       |                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| expand_mask    | [google.protobuf.FieldMask](#google-protobuf-FieldMask)                                               |       | This field is not implemented yet and has no effect.<br/><!--<br/>Optional. The list of fields to be expanded<br/>in the RelationTuple list returned in `ListRelationTuplesResponse`.<br/>Leaving this field unspecified means all fields are expanded.<br/><br/>Available fields:<br/>\"object\", \"relation\", \"subject\",<br/>\"namespace\", \"subject.id\", \"subject.namespace\",<br/>\"subject.object\", \"subject.relation\"<br/>--> |\n| snaptoken      | [string](#string)                                                                                     |       | This field is not implemented yet and has no effect.<br/><!--<br/>Optional. The snapshot token for this read.<br/>-->                                                                                                                                                                                                                                                                                                        |\n| page_size      | [int32](#int32)                                                                                       |       | Optional. The maximum number of<br/>RelationTuples to return in the response.<br/><br/>Default: 100                                                                                                                                                                                                                                                                                                                          |\n| page_token     | [string](#string)                                                                                     |       | Optional. An opaque pagination token returned from<br/>a previous call to `ListRelationTuples` that<br/>indicates where the page should start at.<br/><br/>An empty token denotes the first page. All successive<br/>pages require the token from the previous page.                                                                                                                                                         |\n```\n\n----------------------------------------\n\nTITLE: Generating Kubernetes Migration Job Definition with Helm\nDESCRIPTION: This Bash command invokes Helm to generate a Kubernetes Job manifest for reverting database migrations, customizing job arguments by specifying both the production values file and migrate-down-values.yaml. It outputs the configuration to migrate-down-job.yaml, which should be inspected before being applied. This requires existing Helm values from production and the customized migration arguments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/revert-database-migrations.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nhelm template hydra ory/hydra --namespace oasis --show-only templates/job-migrations-custom.yaml \\\n -f hydra-values-used-by-your-production-env.yaml \\\n -f hydra/oel/migrate-down-values.yaml > migrate-down-job.yaml\n\n```\n\n----------------------------------------\n\nTITLE: Basic OAuth2 Client Update Command in Ory CLI\nDESCRIPTION: The basic command syntax for updating an OAuth 2.0 client with Ory CLI. This requires the client ID as a parameter followed by any configuration flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-oauth2-client.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory update oauth2-client [id] [flags]\n```\n\n----------------------------------------\n\nTITLE: Keto Serve Inherited Options\nDESCRIPTION: Describes options inherited from parent commands for the `keto serve` command. These options, like `-c, --config strings`, allow you to specify configuration files for the server. Configuration files are crucial for setting up Keto with the desired parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-serve.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Disabling Graceful Refresh Token Rotation (CLI)\nDESCRIPTION: This shell command removes the `rotation_grace_period` parameter using the Ory CLI to disable graceful refresh token rotation. This command uses the `--remove` flag to remove a specific configuration parameter. It requires replacing the placeholders for project and workspace identifiers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/graceful-token-refresh.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config --project <project-id> --workspace <workspace-id> \\\n  --remove \"/oauth2/grant/refresh_token/rotation_grace_period\"\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Organization - CLI\nDESCRIPTION: This snippet demonstrates the command-line usage for updating an Ory organization. The command requires the organization ID as an argument, along with optional flags such as `--project`, `--domains`, and `--label` to specify the project, domains, and label respectively.  The output format can be specified using the `--format` flag. The command updates the organization with the provided ID based on the given parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-organization.md#_snippet_0\n\nLANGUAGE: CLI\nCODE:\n```\nory update organization <id> [--project=PROJECT_ID] [--domains=a.example.com,b.example.com] [--label=LABEL] [flags]\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI list commands syntax - Shell\nDESCRIPTION: To list resources in v1 using commands like `ory list event-streams`, `identities`, etc., the target project/workspace must be specified with `--project`, `--workspace` flags or `ORY_PROJECT`, `ORY_WORKSPACE` environment variables, unlike the v0 positional argument approach.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n- ory list event-streams|identities|oauth2-clients|organizations|projects|relationships|workspaces <project>\n+ ory list event-streams|identities|oauth2-clients|organizations|projects|relationships|workspaces --project <project>\n+ ory list event-streams|identities|oauth2-clients|organizations|projects|relationships|workspaces --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory list event-streams|identities|oauth2-clients|organizations|projects|relationships|workspaces\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI patch commands syntax - Shell\nDESCRIPTION: The syntax for `ory patch` commands has been updated for v1. Project and workspace identification now uses explicit flags (`--project`, `--workspace`) or environment variables (`ORY_PROJECT`, `ORY_WORKSPACE`) instead of a positional argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\n- ory patch identity-config|oauth2-config|opl|permission-config|project <project>\n+ ory patch identity-config|oauth2-config|opl|permission-config|project --project <project>\n+ ory patch identity-config|oauth2-config|opl|permission-config|project --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workspace> ORY_PROJECT=<project> ory patch identity-config|oauth2-config|opl|permission-config|project\n```\n\n----------------------------------------\n\nTITLE: Specifying Custom SMTP HELO/EHLO Identifier in Ory Kratos Mail Courier YAML\nDESCRIPTION: This YAML snippet configures the 'local_name' parameter within the 'smtp' configuration to specify a custom identifier sent in the SMTP HELO/EHLO command. This is used to prevent SMTP servers or relays from rejecting connections with generic identifiers like 'localhost'. Normally, this should be set to the sending host's domain name. If not set, 'localhost' is used by default.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/01_mail-courier-selfhosted.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  smtp:\n    local_name: exmaple.org\n```\n\n----------------------------------------\n\nTITLE: Inherited Global Options for Ory CLI Commands (Text)\nDESCRIPTION: Details global options inherited from parent Ory CLI commands applicable to `ory revoke token`. These include adding custom HTTP headers (`-H`, `--http-header`) and disabling TLS certificate verification (`--skip-tls-verify`) for environments like development with self-signed certificates (not recommended for production).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-revoke-token.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Base64-encoding a Jsonnet Data Mapping File - Shell\nDESCRIPTION: This command encodes a Jsonnet file containing the data mapping configuration for Discord claims into a Base64 string. The resulting string can then be embedded in the Ory identity configuration. Replace 'your-data-mapping.jsonnet' with your Jsonnet filename. 'base64' utility must be available in your shell environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Saving and Updating Identity with cURL PUT Method\nDESCRIPTION: Commands to save an existing identity, update it in a local file, and send the updated identity back using the PUT method to completely replace the identity.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nexport IDENTITY_ID=$IDENTITY_ID\nory get identity \"$IDENTITY_ID\" --project \"$PROJECT_ID\" --format json-pretty > identity-\"$IDENTITY_ID\".json\n```\n\nLANGUAGE: bash\nCODE:\n```\ncurl -d \"@identity-$IDENTITY_ID.json\" -X PUT https://$ORY_SLUG.projects.oryapis.com/admin/identities/$IDENTITY_ID \\\n-H \"Authorization: Bearer $ORY_API_KEY\" \\\n-H'Content-Type: application/json'\n```\n\n----------------------------------------\n\nTITLE: Updating System Packages Using Bash Shell\nDESCRIPTION: Upgrades and updates all installed packages on the Ubuntu system to ensure the latest security patches and software versions are applied. This snippet uses standard package management commands to prepare the environment for subsequent installation steps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\napt-get update && apt-get upgrade -y\n```\n\n----------------------------------------\n\nTITLE: Configuring Session Lifespan in Ory Identities (YAML)\nDESCRIPTION: Demonstrates how to set the `session.lifespan` property within the Ory Identities configuration YAML file. This value defines the maximum duration a user session remains valid before requiring re-authentication (e.g., `720h` for 30 days).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/10_session-lifespan.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n   cookie:\n      domain: $PROJECT_SLUG.projects.oryapis.com\n      name: ory_session_{name}\n      path: /\n      persistent: false\n      same_site: Lax\n   # highlight-start\n   lifespan: 720h\n   # highlight-end\n```\n\n----------------------------------------\n\nTITLE: Using Ory CLI via Docker (Shell)\nDESCRIPTION: These commands demonstrate how to use the Ory CLI within a Docker container without installing it natively. The first command pulls the official `oryd/ory` image, and the second command runs a temporary, interactive container to execute a command (`ory help`) inside it.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n### Pull Ory CLI image\ndocker pull oryd/ory\n\n### Run image, enter container, and run a CLI command\ndocker run --rm -it oryd/ory help\n```\n\n----------------------------------------\n\nTITLE: Configuring SAML Connections\nDESCRIPTION: This JSON configuration illustrates how to set up SAML connections, using the `provider` and `subject` fields.  The subject should be a fixed user ID for reliable identification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"schema_id\": \"preset://email\",\n  \"traits\": {\n    \"email\": \"docs-oidc@example.org\"\n  },\n  \"credentials\": {\n    \"saml\": {\n      \"config\": {\n        \"providers\": [\n          {\n            \"provider\": \"okta\",\n            \"subject\": \"12345\"\n          },\n          {\n            \"provider\": \"one-login\",\n            \"subject\": \"12345\"\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding the webhook action to Ory project after user registration\nDESCRIPTION: Uses Ory CLI to patch the identity configuration, attaching the previously defined webhook action to execute after registration flows or upon specific sign-in methods, enabling automated data routing to Segment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/segment.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Defining Email Identity in JSON5\nDESCRIPTION: This snippet shows an example of an identity defined with an email trait. This preset is designed for email-based login and recovery. The `id` represents a unique identifier for the identity and `traits` contains the user data, in this case, only the email address.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/05_identity-schema.mdx#_snippet_0\n\nLANGUAGE: JSON5\nCODE:\n```\n// Identity example\n{\n  id: \"6e9d3d30-f93e-4630-901f-c2096953723d\",\n  traits: {\n    email: \"foo@bar.com\",\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Calibrating Argon2 Hashing Parameters Using Ory Kratos CLI\nDESCRIPTION: This code snippet shows how to use the Ory Kratos command-line tool to calibrate Argon2id hashing parameters, specifically running the calibration for a 1-second execution time to determine optimal memory, time, and space settings for password hashing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/setting-up-password-hashing-parameters.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos hashers argon2 calibrate 1s\n```\n\n----------------------------------------\n\nTITLE: Running the Bulk User Export Script Shell\nDESCRIPTION: This shell command executes a script to create a bulk user export from Auth0.  It uses `curl` to download the script from a specified URL and pipes it to `bash` for execution.  The script utilizes the previously exported environment variables to authenticate and perform the export.\nSOURCE: https://github.com/ory/docs/blob/master/docs/migrate-to-ory/auth0.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nbash <(curl https://raw.githubusercontent.com/ory/docs/master/code-examples/migrate-to-ory/0-get-auth0-user-data.sh)\n```\n\n----------------------------------------\n\nTITLE: Generating and Handling Logout in Server-Rendered Browser Applications Using Express in TypeScript\nDESCRIPTION: This snippet demonstrates how to implement a logout flow in server-rendered browser applications using Express with TypeScript. It focuses on generating a logout URL based on the user's session cookie, which is valid during the user's session lifespan, and using this URL to perform logout upon user action. The code relies on the Express framework and Ory Identity's SDK or API for session handling. The main expected input is the user session cookie, and the output is a logout redirect handled by the browser. This approach ensures intentional logout by the user and allows caching of the logout URL prior to the logout event.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-logout.mdx#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport express from \"!!raw-loader!@site/code-examples/sdk/typescript/src/selfservice/logout/express.ts\"\n```\n\n----------------------------------------\n\nTITLE: Configuring XChaCha20 Poly1305 Cipher in Ory Kratos\nDESCRIPTION: This snippet configures the XChaCha20 Poly1305 cipher algorithm in the Ory Kratos configuration file. It requires a 32-character-long secret string. The 'secrets.cipher' parameter stores the secret. You must set up secrets key rotation. The `ciphers.algorithm` parameter is set to 'xchacha20-poly1305'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/select-cipher-algorithm.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nsecrets:\n  cipher:\n    - 32-CHARACTER-LONG-STRING-SECRET\nciphers:\n  algorithm: xchacha20-poly1305\n```\n\n----------------------------------------\n\nTITLE: Start OEL Hydra (Ory Hydra)\nDESCRIPTION: This command launches the Ory Hydra OEL using the same database connection string and configuration as the open-source version, but with the OEL Docker image. It exposes ports 4444 and 4445.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/migrate.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -d \\\n  --name=hydra-oel \\\n  -e DSN=your_database_connection_string \\\n  -p 4444:4444 -p 4445:4445 \\\n  europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel:<version> \\\n  serve all -c config.yml\n```\n\n----------------------------------------\n\nTITLE: Global Command Options\nDESCRIPTION: Options inherited from parent commands that can be used with the import oauth2-client command, including endpoint configuration and output formatting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-oauth2-client.md#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Ory Import Options\nDESCRIPTION: This code snippet represents the options available for the `ory import` command. It allows users to specify a configuration file, output format, enable quiet mode, and automatically confirm dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for import\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Goreleaser Archive Platform Replacements - YAML\nDESCRIPTION: Configures goreleaser archive output to map common OS and architecture names to user-friendly values (e.g., darwin to macOS). Contains overrides so Windows artifacts use zip format. Requires only goreleaser as dependency. Input is a block within '.goreleaser.yml'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\narchives:\n  - replacements:\n      darwin: macOS\n      386: 32-bit\n      amd64: 64-bit\n    format_overrides:\n      - goos: windows\n        format: zip\n\n```\n\n----------------------------------------\n\nTITLE: Configuring TOTP MFA in Ory Kratos (YAML)\nDESCRIPTION: YAML configuration snippet to enable the Time-based One-Time Password (TOTP) MFA method in Ory Kratos under `selfservice.methods.totp`. The `issuer` field within the `config` block defines the name displayed in the user's TOTP application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/15_mfa.mdx#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    totp:\n      config:\n        # The \"issuer\" is the name in the TOTP application users see when getting a one-time password.\n        issuer: ExampleIssuerForSelfHosted.com\n      enabled: true\n```\n\n----------------------------------------\n\nTITLE: Showing Synopsis for Listing Kratos Identities - Shell\nDESCRIPTION: Displays the command-line synopsis for listing Ory Kratos identities. It shows the base command, optional positional arguments for pagination (`<page>` and `<per-page>`), and general command `[flags]`. This syntax guide is essential for understanding how to invoke the command with different parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-list.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos identities list [&lt;page&gt; &lt;per-page&gt;] [flags]\n```\n\n----------------------------------------\n\nTITLE: Creating a Jsonnet file for Segment identity data transformation\nDESCRIPTION: Defines a Jsonnet function that transforms Ory identity data into the format expected by Segment's Identify API, including user ID and traits such as email, name, and newsletter consent.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/segment.mdx#_snippet_0\n\nLANGUAGE: Jsonnet\nCODE:\n```\nfunction(ctx) {\n  userId: ctx.identity.id,\n  traits: {\n    email: ctx.identity.traits.email,\n    name: ctx.identity.traits.name,\n    newsletterConsent: ctx.identity.traits.consent.newsletter\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing MDX Components for UI Tabs\nDESCRIPTION: Imports the `Tabs` and `TabItem` components from the `@theme` package. These are used within MDX files, likely in a Docusaurus environment, to create interactive tabbed content for displaying configuration options or code examples.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/session.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from '@theme/Tabs'\nimport TabItem from '@theme/TabItem'\n```\n\n----------------------------------------\n\nTITLE: Implementing Verification Page with Ory Elements in Preact (TypeScript)\nDESCRIPTION: This snippet uses Preact to present an account verification page managed by the Ory Elements SDK. Dependencies are Preact, TypeScript, and Ory Elements. The snippet handles user verification actions and displays status or error messages accordingly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/15_custom-ui-ory-elements.mdx#_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\n<CodeFromRemote\\n  lang=\"tsx\"\\n  title=\"src/verification.tsx\"\\n  src=\"https://raw.githubusercontent.com/ory/elements/main/examples/preact-spa/src/verification.tsx\"\\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Noop Cipher in Ory Kratos\nDESCRIPTION: This snippet configures the 'noop' cipher algorithm within the Ory Kratos configuration file. The 'noop' cipher is the default and does not require any secret keys to be set. It is used for situations where encryption is not needed or desired. The `ciphers.algorithm` parameter is set to 'noop'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/select-cipher-algorithm.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nciphers:\n  algorithm: noop\n```\n\n----------------------------------------\n\nTITLE: Custom Identity Schema Configuration (JSON5)\nDESCRIPTION: This JSON5 snippet demonstrates how to configure a custom identity schema to designate a field (e.g., username, email) as a password identifier.  The `ory.sh/kratos` annotation within the field's properties indicates that the field can be used for password-based authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials/username-email-password.mdx#_snippet_1\n\nLANGUAGE: json5\nCODE:\n```\n{\n  // ...\n  \"ory.sh/kratos\": {\n    credentials: {\n      password: {\n        identifier: true,\n      },\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying GDPR Compliance Tabs - Data Protection Section\nDESCRIPTION: MDX code block for a tabbed interface showing GDPR regulations related to data protection. This section appears to be incomplete with only the table header for the regulation tab and no content for Ory's or customer's roles.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-compliance/gdpr.mdx#_snippet_2\n\nLANGUAGE: mdx\nCODE:\n```\n<Tabs groupId=\"gdpr-regs\">\n<TabItem value=\"regulation\" label=\"GDPR regulation\">\n\n| Data protection | Support level |\n|-----------------|---------------|\n\n\n```\n\n----------------------------------------\n\nTITLE: Restricting Session Cookie Path in Ory Kratos (YAML)\nDESCRIPTION: This YAML configuration snippet sets the 'path' attribute for Ory Kratos session cookies under the 'session.cookie' key. It restricts the cookie's scope to a specific directory path (e.g., '/some/sub-directory') within the domain. The documentation notes that changing this is rarely necessary.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/configuring-cookies.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  cookie:\n    path: /some/sub-directory\n```\n\n----------------------------------------\n\nTITLE: Moving Ory CLI to PATH (Shell)\nDESCRIPTION: After installing the binary in the current directory using the script, this command moves the `ory` executable to a standard directory included in the system's PATH, such as `/usr/local/bin/`. This allows you to run the `ory` command from any terminal location. Requires root privileges (`sudo`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nsudo mv ./ory /usr/local/bin/\n```\n\n----------------------------------------\n\nTITLE: Access Rules Example - YAML Format\nDESCRIPTION: This code shows an example of a YAML array containing access rules.  It defines a set of access rules that can be used to determine API access based on authentication and authorization criteria. The YAML format allows for structured representation of access rules.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/api-access-rules.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n- id: my-first-rule\n  version: v0.36.0-beta.4\n  authenticators:\n    - handler: noop\n- id: my-second-rule\n  version: v0.36.0-beta.4\n  authorizer:\n    handler: allow\n```\n\n----------------------------------------\n\nTITLE: Merging Configuration Files via CLI\nDESCRIPTION: This snippet demonstrates how to merge configuration files using the command-line interface.  The `-c` or `--config` flag is used multiple times to specify the files, and they are merged in the order they appear. Later files overwrite values from earlier files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nsomeCommand --config file/a.yml --config file/b.yml\n```\n\n----------------------------------------\n\nTITLE: Deleting Old Schema Tables: Keto CLI, Shell\nDESCRIPTION: Deletes only the old v0.6 schema tables using `keto namespace migrate legacy --down-only` without performing any data migration. This is useful for cleanup after a migration where the deletion step was previously skipped or failed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/v0.7-migration.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nketo namespace migrate legacy --down-only\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities Config - Shell\nDESCRIPTION: These commands demonstrate how to download the Ory Identities configuration for a specific project and workspace. It shows how to list available workspaces and projects before retrieving the configuration and saving it to a YAML file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Spin up instances using docker-compose\nDESCRIPTION: This command uses `docker-compose` to start the services defined in the `quickstart.yml`, `quickstart-postgres.yml`, and `quickstart-gitlab.yml` files. It builds the images if needed and runs the containers in the foreground, showing the logs in the terminal. The command takes time to finish.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ndocker-compose -f quickstart.yml \\\n    -f quickstart-postgres.yml -f ./contrib/quickstart/quickstart-gitlab.yml \\\n    up --build\n```\n\n----------------------------------------\n\nTITLE: Defining Keto Engine ACP Ory Authorizer Config JSON\nDESCRIPTION: Shows the JSON structure for configuring the `keto_engine_acp_ory` authorizer. It includes required fields like `required_action`, `required_resource`, and optional fields like `subject` and `flavor`, which are passed to the Ory Keto API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"handler\": \"keto_engine_acp_ory\",\n  \"config\": {\n    \"required_action\": \"...\",\n    \"required_resource\": \"...\",\n    \"subject\": \"...\",\n    \"flavor\": \"...\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Get Version Request Definition (Proto)\nDESCRIPTION: Defines a request for the VersionService.GetVersion RPC. It is a simple request type that does not contain any fields. It is a dependency-free definition. The request itself. The output is the version information, as defined by the GetVersionResponse. There are no known limitations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/proto-api.mdx#_snippet_6\n\nLANGUAGE: Protocol Buffers\nCODE:\n```\n### GetVersionRequest\n\nRequest for the VersionService.GetVersion RPC.\n```\n\n----------------------------------------\n\nTITLE: Importing Social Sign-In Troubleshooting Component in MDX\nDESCRIPTION: This MDX code imports a troubleshooting component for social sign-in issues, allowing integration of diagnostic UI or instructions within documentation. It assumes the presence of a React component at a specified relative path and enhances user support for sign-in problems.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/20_microsoft.mdx#_snippet_8\n\nLANGUAGE: mdx\nCODE:\n```\nimport SocialSigninTroubleshooting from '../_common/social-sign-in-troubleshooting.mdx'\n\n<SocialSigninTroubleshooting />\n```\n\n----------------------------------------\n\nTITLE: Defining Document Front Matter in Markdown\nDESCRIPTION: Demonstrates the required YAML front matter structure for Ory documentation files within a Markdown document. It includes essential fields like `id`, `title`, `sidebar_label`, and the optional `slug` for URL customization, along with example values.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\nid: excellent_feature\ntitle: Learn how to use the excellent feature in your implementation\nsidebar_label: Excellent feature\nslug: excellent-feature-for-some-reason\n---\n```\n\n----------------------------------------\n\nTITLE: Visualizing Refresh Token Flow with Mermaid\nDESCRIPTION: Uses Mermaid syntax embedded in an MDX code block to generate a sequence diagram illustrating the basic interaction between a client and an authorization server during the OAuth2 refresh token grant process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/refresh-token-grant.mdx#_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```mdx-code-block\nimport Mermaid from \"@site/src/theme/Mermaid\";\n\n<Mermaid\n  chart={`sequenceDiagram\n    participant Client\n    participant Authorization Server\n    Client->>Authorization Server: Refresh token request\n    Authorization Server->>Client: New access token or ID token\n`}\n/>\n```\n```\n\n----------------------------------------\n\nTITLE: Changing Identity Schema Location in Ory Kratos Config (Diff Format)\nDESCRIPTION: Adjusts the path to the identity schema file in the Kratos YAML configuration from a default location to the custom '/opt/kratos/config' directory, matching where the downloaded schema file is stored.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_9\n\nLANGUAGE: diff\nCODE:\n```\nidentity:\n  default_schema_id: default\n  schemas:\n     - id: default\n-    url: file:///etc/kratos/config/identity.schema.json\n+    url: file:///opt/kratos/config/identity.schema.json\n```\n\n----------------------------------------\n\nTITLE: Cloning Ory Kratos Repository (Shell Script)\nDESCRIPTION: Clones the Ory Kratos GitHub repository and checks out a specific tagged version (v0.8.0-alpha.3) to ensure compatibility with the guide's instructions. This is the first step in setting up the local development environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_0\n\nLANGUAGE: shell script\nCODE:\n```\ngit clone https://github.com/ory/kratos.git\ncd kratos\ngit checkout v0.8.0-alpha.3\n\n```\n\n----------------------------------------\n\nTITLE: Defining Message Object\nDESCRIPTION: This JSON snippet represents a message object with an ID, text, and type. The `id` is a unique identifier, `text` is the message content, and `type` indicates the message category (e.g., info, success). The object may contain a `context` for dynamic message generation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_0\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"id\": 1010001,\n  \"text\": \"Sign in\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Options for 'hydra import jwk' Command\nDESCRIPTION: Lists available flags to customize the key import process, such as setting the 'alg' and 'use' properties, and explains when these options are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_3\n\nLANGUAGE: Markdown\nCODE:\n```\n      --alg string   Sets the \"alg\" value of the JSON Web Key if not \"alg\" value was defined by the key itself. Required when importing PEM/DER encoded data.\n  -h, --help         help for jwk\n      --use string   Sets the \"use\" value of the JSON Web Key if no \"use\" value was defined by the key itself. Required when importing PEM/DER encoded data. (default \"sig\")\n```\n\n----------------------------------------\n\nTITLE: Displaying TOTP Linking Screenshot using MDX\nDESCRIPTION: Utilizes the custom `BrowserWindow` MDX component to display a screenshot (`../_static/mfa/1.png`) illustrating the user interface for linking a TOTP application within the Ory Account Experience. The screenshot is presented within a simulated browser frame.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<BrowserWindow url=\"https://playground.projects.oryapis.com/ui\">\n\n  ![TOTP linking in Ory Account Experience](../_static/mfa/1.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Creating a User with API-based Registration - Shell\nDESCRIPTION: This shell script snippet creates a new user using the Ory Identities API-based registration flow. It generates a unique username and password, calls the registration endpoint, and retrieves the session token for subsequent operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-settings.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nusername=dev+docs.$(date +%s)@ory.sh\npassword=$(openssl rand -base64 12)\n\nactionUrl=$(curl -s -H \"Accept: application/json\" \\\n  'https://playground.projects.oryapis.com/self-service/registration/api' | jq -r '.ui.action')\n\nsession=$(curl -s  -X POST -H \"Accept: application/json\" -H \"Content-Type: application/json\" \\\n  --data '{ \"traits.email\": \"'$username'\", \"password\": \"'$password'\", \"method\": \"password\" }' \\\n  \"$actionUrl\")\n\nsessionToken=$(echo $session | jq -r '.session_token')\necho $sessionToken\n```\n\n----------------------------------------\n\nTITLE: Fetching Login Flow Information via Ory Identities REST API (Shell)\nDESCRIPTION: Uses a curl command to retrieve information about a specific login flow from the Ory Identities REST API. Requires a valid cookie jar (authentication state) and the flow ID as environment variables. The Accept: application/json header ensures a JSON response, which is piped to jq for formatting. The output contains details necessary for rendering the login UI and progressing the flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncurl -s -X GET \\\n    --cookie-jar $cookieJar --cookie $cookieJar \\\n    -H \"Accept: application/json\" \\\n    \"https://playground.projects.oryapis.com/self-service/login/flows?id=$flowId\" | jq\n```\n\n----------------------------------------\n\nTITLE: Configuring 'anonymous' Authenticator in an Ory Oathkeeper Access Rule\nDESCRIPTION: This YAML snippet demonstrates how to configure the 'anonymous' authenticator directly within a specific Access Rule. This allows overriding the global configuration, such as setting a custom `subject` name ('guest' in this example) specifically for this rule.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthenticators:\n  - handler: anonymous\n    config:\n      subject: guest\n```\n\n----------------------------------------\n\nTITLE: Specify Redirection URL During Registration (URL)\nDESCRIPTION: This snippet demonstrates how to specify the redirection URL for the verification flow after registration by appending `after_verification_return_to` to the Browser Registration Init endpoint. This allows you to dynamically set the redirect URL for the verification process based on the context of the registration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/browser-redirect-flow-completion.mdx#_snippet_8\n\nLANGUAGE: url\nCODE:\n```\nhttps://public.url/self-service/registration/browser?after_verification_return_to=https://my-redirect/foo\n```\n\n----------------------------------------\n\nTITLE: Get Ory Identities Config (Shell)\nDESCRIPTION: These shell commands retrieves the Ory Identities configuration for a specified project and workspace, and saves it to a YAML file.  It first lists available workspaces and projects, then retrieves the identity configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/97_x-twitter.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config-$project-id.yaml\n```\n\n----------------------------------------\n\nTITLE: Importing and Using macOS Installation Component in MDX\nDESCRIPTION: Imports the macOS-specific installation React component from the components directory and uses it with repository and name properties. This snippet is intended for rendering macOS installation instructions or UI elements. Requires React with MDX processing and expects repo and name properties in props.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install.mdx#_snippet_2\n\nLANGUAGE: mdx\nCODE:\n```\nimport MacOS from '@site/src/components/Install/MacOS'\n\n<MacOS repo={props.repo} name={props.name} />\n```\n\n----------------------------------------\n\nTITLE: Pulling Login/Consent App Image (Bash)\nDESCRIPTION: Downloads the specified version (v1.10.6) of the reference Ory Hydra Login & Consent Node.js application Docker image. This prepares for deploying the necessary user interface components that interact with Hydra for authentication and authorization flows.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\ndocker pull oryd/hydra-login-consent-node:v1.10.6\n```\n\n----------------------------------------\n\nTITLE: Setting Redirect URI for Discord OAuth2 Application - Shell\nDESCRIPTION: This shell code specifies the Ory-provided redirect URI to configure in the Discord OAuth2 application. Replace $PROJECT_SLUG with your Ory project slug. This URI allows Discord to redirect users back after authentication and is essential for correct OAuth2 integration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/55_discord.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/discord\n```\n\n----------------------------------------\n\nTITLE: Configuring Oathkeeper Anonymous Authenticator (YAML)\nDESCRIPTION: Configures the `anonymous` authenticator in Ory Oathkeeper (`oathkeeper.yml`). It enables the authenticator and sets a default subject ('guest') for requests that don't require authentication, such as accessing public login or registration pages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nauthenticators:\n  anonymous:\n    enabled: true\n    config:\n      subject: guest\n# ...\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands in Ory CLI\nDESCRIPTION: Global options that are inherited from parent commands and can be used with 'ory list projects', including configuration file path, output formatting, and dialog confirmation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-projects.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Viewing Hydra CLI Help (Bash)\nDESCRIPTION: Runs the general `hydra help` command inside a temporary Ory Hydra container. This provides an overview of the available command-line interface commands for managing Hydra, such as creating OAuth2 clients or managing JSON Web Keys.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --rm -it --entrypoint hydra oryd/hydra:v1.10.6 help\n```\n\n----------------------------------------\n\nTITLE: Configuring Remote Authorizer Globally YAML\nDESCRIPTION: YAML configuration snippet for enabling and setting up the `remote` authorizer globally in `oathkeeper.yml`. It specifies the URL of the external authorization service and includes example headers to forward using Go templates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthorizers:\n  remote:\n    # Set enabled to \"true\" to enable the authenticator, and \"false\" to disable the authenticator. Defaults to \"false\".\n    enabled: true\n\n    config:\n      remote: http://my-remote-authorizer/authorize\n      headers:\n        X-Subject: \"{{ print .Subject }}\"\n```\n\n----------------------------------------\n\nTITLE: Pulling the Latest Ory Hydra OEL Docker Image\nDESCRIPTION: This bash command pulls the latest Ory Hydra OEL Docker image from the Ory Enterprise Docker Registry. The `<new-version-tag>` placeholder should be replaced with the desired version tag. Pulling the latest image prepares the environment for manual upgrade without Helm.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/upgrade.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndocker pull europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel:<new-version-tag>\n```\n\n----------------------------------------\n\nTITLE: Rendering Browser Window Component with Usage Breakdown in MDX\nDESCRIPTION: MDX code block that displays a BrowserWindow component containing a breakdown visualization of billed costs per project component in the Ory Console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/console/usage-billing.mdx#_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n```mdx-code-block\n\n<BrowserWindow url=\"https://console.ory.sh/workspaces/<id>/settings/billing\">\n\n![Usage-based Invoices](./_static/usage-billing-breakdown.png)\n\n</BrowserWindow>\n```\n```\n\n----------------------------------------\n\nTITLE: Run ExpressJS server\nDESCRIPTION: This shell snippet sets the environment variables and starts the ExpressJS server. It exports the `ORY_PROJECT_SLUG`, `OAUTH_CLIENT_ID`, and `OAUTH_CLIENT_SECRET` environment variables, then executes the `server.js` file using Node.js.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/oauth2-openid/expressjs.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nexport ORY_PROJECT_SLUG=\"{set to the project slug from output}\"\nexport OAUTH_CLIENT_ID=\"{set to the client ID from output}\"\nexport OAUTH_CLIENT_SECRET=\"{set to the client secret from output}\"\n\nnode server.js\n```\n\n----------------------------------------\n\nTITLE: Performing Client Credentials Grant Flow Using Ory CLI in Shell\nDESCRIPTION: Initiates the Client Credentials Grant flow via the Ory CLI by providing the client ID, client secret, and project ID. This command retrieves an access token representing the client for machine-to-machine authentication purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory perform client-credentials \\\n  --client-id=\"$client_id\" \\\n  --client-secret=\"$client_secret\" \\\n  --project \"$PROJECT_ID\"\n```\n\n----------------------------------------\n\nTITLE: Initiating MDX Tabs for Console/CLI Instructions\nDESCRIPTION: Starts an MDX `Tabs` component structure to organize instructions for enabling TOTP via the Ory Console and Ory CLI. It defines the first tab labeled 'Ory Console' and sets it as the default view.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Tabs groupId=\"console-or-cli\">\n<TabItem value=\"oc\" label=\"Ory Console\" default>\n```\n\n----------------------------------------\n\nTITLE: Getting JWK Sets using Ory CLI\nDESCRIPTION: This snippet shows the basic command-line syntax for retrieving one or more JSON Web Key Sets (JWKS) using the `ory get jwk` command. It takes one or more set IDs as arguments and can accept various flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-jwk.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory get jwk set-1 [set-2] ... [flags]\n```\n\n----------------------------------------\n\nTITLE: React.js Code for WebAuthn Button\nDESCRIPTION: Reference to a React.js component implementation for a WebAuthn registration button, handling the display and activation of security key registration via custom logic embedded in onClick handlers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\nhttps://github.com/ory/kratos-react-nextjs-ui/blob/master/pkg/ui/NodeInputButton.tsx\n```\n\n----------------------------------------\n\nTITLE: Applying Generated Kubernetes Job with kubectl\nDESCRIPTION: This Bash snippet applies the generated Kubernetes job YAML (migrate-down-job.yaml) to the cluster using kubectl. It requires kubectl to be installed, authenticated to the appropriate cluster, and migrate-down-job.yaml to be already generated with the correct job definitions for migration reversal.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/revert-database-migrations.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nkubectl apply -f migrate-down-job.yaml\n\n```\n\n----------------------------------------\n\nTITLE: Ory Get Workspace Options\nDESCRIPTION: Lists the available options for the `ory get workspace` command.  Includes options for setting the output format (table, json, yaml, json-pretty, jsonpath, jsonpointer), displaying help, and suppressing output. The default output format is 'default'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-workspace.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for workspace\n  -q, --quiet           Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Executing Kratos SQL Migration (Shell)\nDESCRIPTION: Provides the basic syntax for executing the `kratos migrate sql` command. It requires a database URL as a mandatory argument and accepts optional flags for configuration. This command applies necessary SQL schema migrations for Ory Kratos.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-migrate-sql.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nkratos migrate sql <database-url> [flags]\n```\n\n----------------------------------------\n\nTITLE: Force Refreshing Session Data Using JavaScript\nDESCRIPTION: This snippet demonstrates how to bypass the cache and force a fresh response from the toSession API by setting the Cache-Control header to max-age=0 using the Ory JavaScript client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/cache.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Configuration, FrontendApi } from \"@ory/client\"\n\nconst ory = new FrontendApi(new Configuration())\n\nory.toSession(undefined, undefined, {\n  headers: {\n    \"Cache-Control\": \"max-age=0\",\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Install ExpressJS dependencies\nDESCRIPTION: This shell snippet initializes a new npm project, installs the necessary dependencies for an ExpressJS application with OpenID Connect support. Specifically, it installs `express-openid-connect` for handling the OAuth2/OIDC flow and `express` for creating the web server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/oauth2-openid/expressjs.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nmkdir example\ncd example\nnpm init -y\nnpm install express-openid-connect express\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions with Keto Relationships\nDESCRIPTION: Demonstrates how to check if a user has a specific permission based on defined relationships and indirections in Ory Permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/permissions/overview.mdx#_snippet_2\n\nLANGUAGE: keto-relationships\nCODE:\n```\nis users:user1 in readers of files:file1?  // Yes\n```\n\nLANGUAGE: keto-relationships\nCODE:\n```\nis users:user2 in members of groups:group1?  // No\n```\n\n----------------------------------------\n\nTITLE: Switching to CLI Tab in MDX\nDESCRIPTION: Closes the 'Ory Console' `TabItem` and opens the 'Ory CLI' `TabItem` within the same MDX `Tabs` group. This transitions the view to show instructions relevant to the Ory Command Line Interface.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n</TabItem>\n<TabItem value=\"cli\" label=\"Ory CLI\" default>\n```\n\n----------------------------------------\n\nTITLE: Keto Engine ACP Ory Config in Access Rule YAML\nDESCRIPTION: Demonstrates how to configure the `keto_engine_acp_ory` authorizer directly within a specific Ory Oathkeeper access rule definition in YAML format. This allows rule-specific configuration for the Keto authorizer.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authz.md#_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# Some Access Rule: access-rule-1.yaml\nid: access-rule-1\n# match: ...\n# upstream: ...\nauthorizers:\n  - handler: keto_engine_acp_ory\n    config:\n      base_url: http://my-keto/\n      required_action: ...\n      required_resource: ...\n      subject: ...\n      flavor: ...\n```\n\n----------------------------------------\n\nTITLE: Configure Ory client\nDESCRIPTION: Configures the Ory client to point to a specific Ory instance. It sets the host of the Ory API and creates a new instance of the FrontendApi, which can be used to interact with the Ory APIs. Requires Guzzle HTTP client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/05_php.mdx#_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$config = Ory\\Client\\Configuration::getDefaultConfiguration()->setHost(\"https://ory.example.org\"));\n$ory = new Ory\\Client\\Api\\FrontendApi(new GuzzleHttp\\Client(), $config);\n```\n\n----------------------------------------\n\nTITLE: Configuring Registration UI URL with YAML - Ory Identities - yaml\nDESCRIPTION: This snippet sets the UI endpoint to which users are redirected for completing registration. It should be placed in the Ory Identities configuration under 'selfservice.flows.registration.ui_url'. The value must be a valid URL that handles registration with the appended '?flow=<flow-id>' parameter. No external dependencies beyond Ory Identities server restart are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-registration.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  flows:\n    registration:\n      # becomes http://127.0.0.1:4455/auth/registration?flow=df607aa1-d555-4b2a-b3e4-0f5a1d2fe6f3\n      ui_url: http://127.0.0.1:4455/auth/registration\n\n```\n\n----------------------------------------\n\nTITLE: Examples of Incorrect SMTP URLs\nDESCRIPTION: Provides sample SMTP URLs with unencoded special characters in username or password that lead to configuration errors. Highlights common mistakes that users should avoid when setting up SMTP URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/05_smtp-courier.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nsmtp://username:pass/word@email-smtp.eu-west-3.amazonaws.com:587\nsmtp://user%name:pass$word@some-email-service.com:587\n```\n\n----------------------------------------\n\nTITLE: Requesting Identities via Offset Pagination\nDESCRIPTION: This shell snippet shows how to use offset pagination by including per_page and page parameters in a GET request to the Ory API.  It is shown for demonstration only, because offset pagination is deprecated. Requires a valid API key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/pagination.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nGET https://{PROJECT_SLUG}.projects.oryapis.com/admin/identities?per_page=100&page=2\nAuthorization: Bearer {YOUR_API_KEY}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Permissions Configuration (Ory CLI, Bash)\nDESCRIPTION: Command to fetch the current Permissions configuration from a specified Ory Network project and workspace, saving it as a pretty-printed JSON file. This extends the GitOps pattern to managing access control policies and relationships.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nory get permission-config --workspace \"<workspace-id>\" --project \"<project-id>\" --format json-pretty > permission-config.json\n```\n\n----------------------------------------\n\nTITLE: Setting Credentials for Authenticated Fetch API Calls - JavaScript\nDESCRIPTION: Specifies the configuration object for the JavaScript `fetch` API to include credentials (like cookies or authorization headers) in the request. This is crucial for making authenticated calls to a backend API from a frontend application. Requires the `fetch` API in the execution environment (browser).\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\n{\"credentials\": \"include\"}\n```\n\n----------------------------------------\n\nTITLE: Triggering webhook only for password or social sign-in\nDESCRIPTION: Configures Ory to trigger the Segment data collection webhook during specific sign-in flows (e.g., password or social authentication), using CLI commands to modify the identity configuration accordingly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/segment.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add \"/selfservice/flows/registration/after/password/hooks/0=$(cat webhook-action.json)\" \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Updating Identity Metadata with Ory Webhooks JSON\nDESCRIPTION: Shows the JSON payload structure for updating public (`metadata_public`) or admin (`metadata_admin`) identity metadata via a webhook response. Returning this payload replaces the entire respective metadata object(s).\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"metadata_public\": {\n      \"the_webhook\": \"changed this value\",\n      \"and_added_this_one\": \"too\"\n    },\n    \"metadata_admin\": {\n      \"the_webhook\": \"updated this value\",\n      \"and_this_one\": \"too\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for ORY Oathkeeper CLI\nDESCRIPTION: This section details options that are inherited by the `oathkeeper rules` command from its parent commands. The primary inherited option is `--config`, used to specify paths to configuration files, allowing configuration overrides.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-rules.md#_snippet_2\n\nLANGUAGE: CLI\nCODE:\n```\n-c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n```\n\n----------------------------------------\n\nTITLE: Setting Configuration via Environment Variables (Windows Powershell)\nDESCRIPTION: This snippet demonstrates how to set configuration values using environment variables in Windows PowerShell. Subkeys are separated with underscores `_`, and array indices are used to reference array items.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_9\n\nLANGUAGE: powershell\nCODE:\n```\n# Windows Powershell\n$env:SOME_NESTED_KEY_WITH_A_VALUE = foo\n$env:SOME_NESTED_KEY_AND_ARRAY_0_ID = foo\n$env:SOME_NESTED_KEY_AND_ARRAY_1_ID = bar\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Hydra with In-Memory Database in Kubernetes\nDESCRIPTION: Shell commands to install Ory Hydra Helm chart with an in-memory database, generated secrets, and configured login and consent provider URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nhelm install \\\n    --set 'hydra.config.secrets.system={'$(LC_ALL=C tr -dc 'A-Za-z0-9' < /dev/urandom | base64 | head -c 32)'}' \\\n    --set 'hydra.config.dsn=memory' \\\n    --set 'hydra.config.urls.self.issuer=https://my-hydra/' \\\n    --set 'hydra.config.urls.login=https://my-idp/login' \\\n    --set 'hydra.config.urls.consent=https://my-idp/consent' \\\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Example OAuth 2.0 Authorization URL Structure\nDESCRIPTION: Shows the format of an OAuth 2.0 authorization URL with the redirect_uri parameter that must match the URI registered with the provider. This illustrates where potential mismatches might occur.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/25_social-sign-in.mdx#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nhttps://{provider}/o/oauth2/v2/auth?client_id=(...)&redirect_uri=https://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/{provider}&response_type=code&scope=email+profile+openid\n```\n\n----------------------------------------\n\nTITLE: Helm Command to Install Ory Hydra in Kubernetes Cluster\nDESCRIPTION: This command deploys Ory Hydra via Helm chart into the 'ory' namespace, creating resources as per the specified values.yaml configuration, integrating secrets, image repositories, and migration settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/quickstart.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nhelm install ory-oel-hydra ory/hydra --namespace ory --create-namespace -f values.yaml\n```\n\n----------------------------------------\n\nTITLE: Enabling 'noop' Authenticator Globally in Ory Oathkeeper\nDESCRIPTION: This YAML snippet demonstrates how to enable the 'noop' authenticator in the global Oathkeeper configuration file (`oathkeeper.yml`). Setting `enabled: true` activates this authenticator globally, making it available for use in access rules.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nauthenticators:\n  noop:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n```\n\n----------------------------------------\n\nTITLE: Displaying Ory Console TOTP Setup Screenshot using MDX\nDESCRIPTION: Uses the `BrowserWindow` MDX component inside the 'Ory Console' tab to display a screenshot (`../_static/mfa/3.png`) showing the TOTP configuration settings within the Ory Console user interface.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n   <BrowserWindow url=\"https://console.ory.sh/\">\n\n   ![TOTP setup in Ory Console](../_static/mfa/3.png)\n\n   </BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Creating ASP.NET Core Project (Shell)\nDESCRIPTION: Provides shell commands to initialize a directory for the project, navigate into it, and create a new empty ASP.NET Core web application template using the .NET CLI. This sets up the basic file structure for the application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nmkdir your-project\ncd your-project\n\ndotnet new web\n```\n\n----------------------------------------\n\nTITLE: Running Vue.js Development Server - npm\nDESCRIPTION: Starts the local development server for the Vue.js application, typically configured via the project's `package.json` scripts. This command compiles the application and serves it locally, often with hot-reloading. Requires npm and the project's dependencies installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/30_vue.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: HTML Import\nDESCRIPTION: This snippet imports the `index.html` file.  It uses a raw-loader to embed the content, which constitutes the HTML structure of the user interface for interacting with the WebSocket service, including the necessary client-side JavaScript code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_10\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport index from '!!raw-loader!../../../code-examples/oathkeeper/ws/index.html'\n```\n\n----------------------------------------\n\nTITLE: Getting Session Details in TypeScript (Administrative)\nDESCRIPTION: Uses the initialized TypeScript SDK client to retrieve detailed information about a specific session using its ID via the administrative API. Requires the Session ID and an API Key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/05_session-management.mdx#_snippet_16\n\nLANGUAGE: ts\nCODE:\n```\nimport nativeGetSession from \"!!raw-loader!@site/code-examples/sdk/typescript/src/session/get-session-native.ts\"\n\n<CodeBlock language=\"ts\" title=\"Get a session (Typescript SDK)\">{nativeGetSession}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Viewing Verification Command Help Option - Shell\nDESCRIPTION: Displays the available help flag for the verification command. Use '-h' or '--help' to show help information related to the verification subcommand. This helps users understand available command-specific options. No additional dependencies besides Ory CLI are required.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-verification.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for verification\n```\n\n----------------------------------------\n\nTITLE: Running Hydra Database Migrations (Bash)\nDESCRIPTION: Executes necessary database schema migrations for Ory Hydra against the configured database specified by the $DSN variable. This command runs inside a temporary container and prepares or updates the database structure required by Hydra.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -it --rm \\\n  --network hydraguide \\\n  oryd/hydra:v1.10.6 \\\n  migrate sql --yes $DSN\n```\n\n----------------------------------------\n\nTITLE: Get relationships using keto relation-tuple\nDESCRIPTION: This command retrieves relationships matching the given partial tuple from a Keto instance. It supports options for specifying the namespace, object, relation, subject ID, and subject set. The results are paginated and can be formatted in various ways.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-get.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple get [flags]\n```\n\n----------------------------------------\n\nTITLE: Force Rendering Fizz Migrations to SQL using Ory CLI (Shell)\nDESCRIPTION: Executes the migration rendering command with the `--replace` flag. This option forces the overwriting of existing SQL migration files and should be used cautiously, informing maintainers when used in a pull request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_21\n\nLANGUAGE: shell\nCODE:\n```\n.bin/ory dev pop migration render --replace persistence/sql/migrations/templates persistence/sql/migrations/sql\n```\n\n----------------------------------------\n\nTITLE: Importing the Ory Client in Python\nDESCRIPTION: Basic Python import statement to include the Ory client SDK in a Python script after installation. Sets up the environment to use SDK functionalities such as API interactions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/10_python.mdx#_snippet_2\n\nLANGUAGE: python\nCODE:\n```\nimport ory_client\n```\n\n----------------------------------------\n\nTITLE: Example usage of deleting multiple JWKS with Hydra CLI\nDESCRIPTION: This snippet demonstrates the practical command to delete three JWKS sets named 'set-1', 'set-2', and 'set-3', showing how users can specify multiple IDs in one command for batch deletion.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwks.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nhydra delete jwks set-1 set-2 set-3\n```\n\n----------------------------------------\n\nTITLE: Tunneling in Automated Environments Bash\nDESCRIPTION: Shows how to use the `ory tunnel` command in automated environments. It involves setting the `ORY_PROJECT_API_KEY` environment variable for authentication and using the `--quiet` flag (`-q`) to prevent the command from attempting to open a browser window.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_5\n\nLANGUAGE: Bash\nCODE:\n```\nORY_PROJECT_API_KEY=<project-api-key> ory tunnel -q ...\n```\n\n----------------------------------------\n\nTITLE: Install Nginx and Certbot\nDESCRIPTION: This command installs Nginx, Certbot, and the Certbot Nginx plugin on a Debian-based system. These tools are essential for setting up a reverse proxy and obtaining SSL certificates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_21\n\nLANGUAGE: bash\nCODE:\n```\napt-get install nginx certbot python3-certbot-nginx\n```\n\n----------------------------------------\n\nTITLE: Starting Hydra APIs - Command Usage\nDESCRIPTION: This snippet demonstrates the basic command to start all Hydra APIs, specifying the command `hydra serve all`. This command initiates both public and administrative HTTP/2 APIs. The command can be customized further with flags and environment variables for configurations, such as different TLS settings. Consult the help documentation for more specific parameters for configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-all.md#_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nhydra serve all [flags]\n```\n\n----------------------------------------\n\nTITLE: Using `kratos format jsonnet` Command\nDESCRIPTION: Example command demonstrating how to use `kratos format jsonnet` to format one or more JSONNet files. It shows file path patterns using glob syntax and indicates the possibility of adding optional flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-format-jsonnet.md#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nkratos format jsonnet path/to/files/*.jsonnet [more/files.jsonnet] [supports/**/{foo,bar}.jsonnet] [flags]\n```\n\n----------------------------------------\n\nTITLE: Using JavaScript for URL encoding\nDESCRIPTION: Shows how to encode special characters in username or password using JavaScript's encodeURIComponent function, which helps generate correctly encoded SMTP URLs. This method ensures special characters are properly encoded for safe use in URLs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/05_smtp-courier.mdx#_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(encodeURIComponent(\"pass/word\"))\n```\n\n----------------------------------------\n\nTITLE: Goreleaser Snapshot Naming Scheme - YAML\nDESCRIPTION: Defines the naming convention for snapshot releases in goreleaser, formatting them with '-_next' after the tag. Requires only goreleaser as a dependency, and ensures snapshot builds are easily identifiable. Place within the '.goreleaser.yml' for effect.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nsnapshot:\n  name_template: \"{{ .Tag }}-_next\"\n\n```\n\n----------------------------------------\n\nTITLE: Goreleaser Pre-Release Configuration - YAML\nDESCRIPTION: Configures the goreleaser tool to automatically detect and mark pre-release tags. No external dependencies aside from goreleaser required. The 'prerelease' field automates GitHub release status based on semantic versioning. Should be merged into '.goreleaser.yml'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nrelease:\n  prerelease: auto\n\n```\n\n----------------------------------------\n\nTITLE: Getting Recovery Flow Details - Ory Go SDK\nDESCRIPTION: Shows how to retrieve the details of an existing password recovery flow using the Ory Go SDK's 'getRecoveryFlow' endpoint. This allows displaying the recovery form and status to the user. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_7\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Viewing Hydra Serve Options (Bash)\nDESCRIPTION: Runs the `hydra help serve` command inside a temporary Ory Hydra container. This command displays detailed information about the environment variables and command-line options available for configuring and running the Hydra server.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ndocker run -it --rm --entrypoint hydra oryd/hydra:v1.10.6 help serve\n```\n\n----------------------------------------\n\nTITLE: Configuring cookie domain and CORS for multiple domains\nDESCRIPTION: Shows how to set the cookie domain for cross-domain cookie accessibility and allow CORS for multiple subdomains, enabling session sharing and cross-origin requests during development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory proxy --project <project-id-or-slug> \\\n  --cookie-domain gateway.local \\\n  http://127.0.0.1:3000 \\\n  https://ory.gateway.local\n```\n\n----------------------------------------\n\nTITLE: Initializing API Login Flow with cURL\nDESCRIPTION: This cURL command initializes the Login Flow for API clients. It sends an HTTP GET request to the `/self-service/login/api` endpoint with `Accept: application/json` and expects a JSON response.  The JSON response contains the flow ID and other details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/user-login.mdx#_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\ncurl -s -X GET \\\n    -H \"Accept: application/json\"  \\\n    https://playground.projects.oryapis.com/self-service/login/api | jq\n```\n\n----------------------------------------\n\nTITLE: Basic Server Block Config\nDESCRIPTION: This Nginx configuration snippet creates a basic server block to listen on port 80 and includes the server name `accounts.example.com`.  It's the starting point for configuring a virtual host.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_23\n\nLANGUAGE: nginx\nCODE:\n```\nserver {\n        listen 80;\n        server_name accounts.example.com;\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Self-Service Verification Flow (Diff)\nDESCRIPTION: Demonstrates how to enable the email verification flow and specify the corresponding UI URL within the `selfservice.flows` section of the Ory Kratos configuration file using a diff.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_account-activation-email-verification.mdx#_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\n selfservice:\n   flows:\n     # login ...\n     # registration...\n\n+    verification:\n+      enabled: true\n+      ui_url: http://127.0.0.1:4455/verification\n\n # ...\n```\n\n----------------------------------------\n\nTITLE: Expected Data Mapper Output Structure (JSON5)\nDESCRIPTION: Defines the required top-level structure for the JSON object that a Jsonnet data mapper must return. It must contain an `identity` object with a `traits` sub-object.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/90_data-mapping.mdx#_snippet_2\n\nLANGUAGE: json5\nCODE:\n```\n{\n  identity: {\n    traits: {\n      /* ... depends on your identity schema ... */\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Setting the ORY_SDK_URL Environment Variable\nDESCRIPTION: Exports the `ORY_SDK_URL` environment variable required by the Ory SDK. The value should be set to the specific Ory Project's API Endpoint URL, replacing `$PROJECT_SLUG` with the actual slug found in the Ory Console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nexport ORY_SDK_URL=https://$PROJECT_SLUG.projects.oryapis.com\n```\n\n----------------------------------------\n\nTITLE: Displaying Ory CLI Information Component in MDX\nDESCRIPTION: Imports and renders a reusable MDX component (`OryCLI`) designed to provide information about the Ory CLI. The `isTunnel={true}` prop suggests it might specifically detail the CLI's tunneling capabilities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_3\n\nLANGUAGE: mdx\nCODE:\n```\nimport OryCLI from '../_common/ory-cli.mdx'\n\n<OryCLI isTunnel={true} />\n```\n\n----------------------------------------\n\nTITLE: Checking Ory Hydra Consent App Logs via Docker\nDESCRIPTION: This command retrieves the logs for the `ory-hydra-example--consent` Docker container to verify its status and ensure it's listening on the expected port (3000). It's used after starting the consent application service.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\ndocker logs ory-hydra-example--consent\n```\n\n----------------------------------------\n\nTITLE: Password Migration Web Hook Successful Response - JSON\nDESCRIPTION: Demonstrates the JSON response payload the migration web hook should return if the user credentials are correct. The payload contains a 'status' field set to 'password_match'. This triggers Ory Identities to store the password and log the user in.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"status\": \"password_match\"\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Nginx Configuration Validity\nDESCRIPTION: This snippet demonstrates running the command `nginx -t` to test the syntax and validity of the current Nginx configuration file. If successful, it confirms the configuration file is correctly formatted without errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_38\n\nLANGUAGE: Bash\nCODE:\n```\nnginx -t\n```\n\n----------------------------------------\n\nTITLE: Configuring SMTP Courier Settings for Email Verification (Diff)\nDESCRIPTION: Shows a diff example for adding SMTP connection details under the `courier` section in the Ory Kratos configuration file. This is required for Ory Kratos to send verification emails.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/05_account-activation-email-verification.mdx#_snippet_2\n\nLANGUAGE: diff\nCODE:\n```\n # Ory Identities\n+courier:\n+  smtp:\n+    connection_uri: smtps://username:password@smtp-server:1234/\n # ...\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities Configuration Using CLI\nDESCRIPTION: This shell command sequence demonstrates how to list workspaces, projects, and download the Ory Identities configuration using the Ory CLI and save it to a YAML file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/cache.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Testing Echo Middleware with curl\nDESCRIPTION: A command-line example using curl to test an endpoint protected or enhanced by the Ory Identities Echo middleware. It shows how to pass the session cookie obtained from the Ory Playground to authenticate the request.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_30\n\nLANGUAGE: curl\nCODE:\n```\ncurl 'http://localhost:3000/hello' -b 'ory_session_playground=<your-session-cookie-here>'\nHello World\n```\n\n----------------------------------------\n\nTITLE: Revoking All Other Sessions - Ory Go SDK\nDESCRIPTION: Shows how to terminate all active sessions for the current user except the one making the request, using the Ory Go SDK's 'disableMyOtherSessions' endpoint. The actual implementation details are provided in the linked external Go file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_19\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Tracing in Ory Services with YAML\nDESCRIPTION: Example YAML configuration for enabling distributed tracing in Ory services. This example shows how to configure Jaeger as the tracing provider with sampling settings and agent address.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/operations/01_tracing.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\ntracing:\n  provider: jaeger # use any of the supported tracing providers\n  service_name: ory:kratos # if not set, the service name will be the service's name\n  providers:\n    jaeger: # per provider configuration\n      local_agent_address: jaeger:6831\n      sampling:\n        server_url: http://jaeger:5778/sampling\n```\n\n----------------------------------------\n\nTITLE: Setting Access Rule Matching Strategy in Ory Oathkeeper (YAML)\nDESCRIPTION: Configures the access rule matching strategy in Oathkeeper (`oathkeeper.yml`). It sets the `matching_strategy` to `glob` and specifies the location of the access rules definition file (`access-rules.yml`) using a file URI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/zero-trust-iap-proxy-identity-access-proxy.mdx#_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\naccess_rules:\n  matching_strategy: glob\n  repositories:\n    - file:///etc/config/oathkeeper/access-rules.yml\n```\n\n----------------------------------------\n\nTITLE: Using Argon2 hash command in Kratos\nDESCRIPTION: Example of how to use the Kratos Argon2 hash command to hash one or more passwords for benchmarking purposes. This command allows for tuning parameters like memory usage, iterations, key length, and parallelism.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-hashers-argon2-hash.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos hashers argon2 hash <password1> [<password2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Updating Identity Schema Configuration with Ory CLI\nDESCRIPTION: Shell command to update a project's identity schema configuration by encoding a custom schema into Base64 and patching the project configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n# Encode your schema to Base64 and export it to a variable.\nschema=$(cat {path-to-json-with-identity-schema} | base64)\n\n# Update your project's configuration.\nory patch identity-config {your-project-id} \\\n  --replace '/identity/default_schema_id=\"{unique-schema-id}\"' \\\n  --replace '/identity/schemas=[{\"id\":\"{unique-schema-id}\",\"url\":\"base64://'$schema'\"}]'\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Go SDK (Shell)\nDESCRIPTION: Installs the Ory Go SDK using the 'go get' command, fetching the latest tag from the 'master' branch of the 'ory/client-go' repository. This command adds the SDK as a dependency to the project's go.mod file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/client-go@${useLatestTag('client-go', 'master')}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Hydra with Observability (Tracing)\nDESCRIPTION: Starts Ory Hydra with distributed tracing enabled. Requires Docker and Docker Compose. It uses `quickstart.yml`, `quickstart-postgres.yml`, and `quickstart-tracing.yml` files for configuration and builds the images.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml \\\n    -f quickstart-postgres.yml \\\n    -f quickstart-tracing.yml \\\n    up --build\n```\n\n----------------------------------------\n\nTITLE: Home Component Displaying User Session Information\nDESCRIPTION: React component that renders user-specific data retrieved from the session, such as identity information, providing personalized content once logged in.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst Home = () => {\n  // Component code displaying user session data\n}\n```\n\n----------------------------------------\n\nTITLE: Development Server Start with npm run dev\nDESCRIPTION: Runs 'npm run dev' to compile the Vue 3 project and start a hot-reload development server. This command requires Vite and Vue 3 project dependencies. It provides a local environment for testing and development with live updates.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/vue/README.md#_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Formatting Keto Relationships in Markdown\nDESCRIPTION: Shows the recommended formatting for Ory Keto relationship checks (permissions) within Markdown documentation. It utilizes the `keto-relationships` language identifier and provides examples of relationship syntax and permission queries, including comments.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n```keto-relationships\nnamespace:subject is relation of object\nis namespace:subject allowed to permission on object?\n// comment\n```\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Missing Login Identifiers in Ory (JSON)\nDESCRIPTION: Indicates that login identifiers (username, email, etc.) are missing, possibly due to misconfiguration. Used during login attempts; static content, id is 4000009.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_32\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000009,\n  \"text\": \"Could not find any login identifiers. Did you forget to set them? This could also be caused by a server misconfiguration.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Current Session with Ory SDK in React (TypeScript)\nDESCRIPTION: This snippet demonstrates how to retrieve the current session in a React application using the Ory TypeScript SDK. It depends on the Ory SDK and assumes the existence of an authenticated session in the browser (cookie-based). The main action involves calling the /sessions/whoami endpoint and processing the response to reflect session state. Expected input is simply an authenticated browser environment; output is the current session object or error as returned from the API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/01_overview.mdx#_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Code example loaded from @site/code-examples/sdk/typescript/src/selfservice/session/whoami-react.tsx\n// This would typically include an API call using the Ory SDK to retrieve the current user session\n// e.g., oryClient.toSession().then(session => setSession(session))\n\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js 16 on Ubuntu Using Bash Shell\nDESCRIPTION: Installs Node.js version 16 on an Ubuntu system since the default repository version is outdated. It downloads the NodeSource setup script, executes it, then installs Node.js along with additional tools like jq and unzip, which may be required for further operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl -sL https://deb.nodesource.com/setup_16.x -o /tmp/nodesource_setup.sh\nbash /tmp/nodesource_setup.sh\napt-get install nodejs jq unzip -y\n# Install Node.js 16.x and other dependencies\n```\n\n----------------------------------------\n\nTITLE: Running Flutter Web App Locally (Shell)\nDESCRIPTION: Starts the Flutter web development server on a specified port (4005) for local debugging. This command targets the 'web-server' device and enables hot reload. Requires the Flutter SDK.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/flutter_web_redirect/README.mdx#_snippet_0\n\nLANGUAGE: shell-session\nCODE:\n```\nflutter run -d web-server --web-port 4005\n```\n\n----------------------------------------\n\nTITLE: Viewing Help for ory version (Shell)\nDESCRIPTION: This snippet illustrates the command-line syntax for the standard `--help` (`-h`) flag, which provides detailed usage information, a list of available options, and potentially examples for the `ory version` command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-version.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n-h, --help   help for version\n```\n\n----------------------------------------\n\nTITLE: Retrieving Only Public JWK Keys (Ory CLI)\nDESCRIPTION: This snippet shows how to use the `--public` flag with the `ory get jwk` command to retrieve only the public keys from the specified JSON Web Key Set `<set-id>`. This filters out private key components from the output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-jwk.md#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\nory get jwk --public <set-id>'\n```\n\n----------------------------------------\n\nTITLE: Export Keto Read Remote (Shell)\nDESCRIPTION: This shell command sets the KETO_READ_REMOTE environment variable, which specifies the address of the Keto read API. This is needed when the Keto CLI is running outside of Docker and needs to connect to a remote Keto instance.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/quickstart.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nexport KETO_READ_REMOTE=\"127.0.0.1:4466\"\n```\n\n----------------------------------------\n\nTITLE: Exporting Ory Permissions Configuration to File\nDESCRIPTION: Command to export the Ory Permissions configuration from Ory Network to a YAML file for use with self-hosted Ory Keto.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/17_configure-permission-service.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory get permission-config --project <project-id> --workspace <workspace-id> --format yaml > permission-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Running Ory Account Experience Verification Command - Bash\nDESCRIPTION: This snippet shows the usage syntax for the 'ory open account-experience verification' command. It can be invoked from a terminal to launch the verification page for account experiences in Ory. No arguments are required, but various flags can modify its behavior. The command requires the Ory CLI to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-verification.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory open account-experience verification [flags]\n```\n\n----------------------------------------\n\nTITLE: Defining Account Recovery Success Message in Ory (JSON)\nDESCRIPTION: This JSON snippet defines a success message for account recovery completion in Ory, including contextual timing information for a privileged session expiration. Requires integration with Ory's recovery flow and must provide privilegedSessionExpiresAt values in both ISO8601 and UNIX formats for accurate feedback display. Inputs include the message id (1060001), localized text, and a context object specifying session expiry timestamps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1060001,\n  \"text\": \"You successfully recovered your account. Please change your password or set up an alternative login method (e.g. social sign in) within the next 1.00 minutes.\",\n  \"type\": \"success\",\n  \"context\": {\n    \"privilegedSessionExpiresAt\": \"2020-01-01T01:01:00Z\",\n    \"privileged_session_expires_at\": \"2020-01-01T01:01:00Z\",\n    \"privileged_session_expires_at_unix\": 1577840460\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: AWS SES SMTP Connection URI\nDESCRIPTION: Provides a connection URI example for sending emails through AWS SES SMTP service. The example shows the format and necessary components of the URI, including placeholders for credentials and the region.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nsmtp://{smtp-user}:{smtp-password}@email-smtp.{region}.amazonaws.com:587/\n\n# For example:\n# smtp://theuser:the-password@email-smtp.eu-central-1.amazonaws.com:587/\n```\n\n----------------------------------------\n\nTITLE: Embedding Base64 JSONNet in OIDC Mapper Config (JSON)\nDESCRIPTION: JSON snippet illustrating how a base64-encoded JSONNet string is embedded within the configuration for an Ory OIDC identity provider mapper. The `mapper_url` property uses the `base64://` prefix followed by the encoded string to reference the inline JSONNet mapping definition.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/gitops.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n//...\n      \"oidc\": {\n        //...\n            {\n            //...\n              \"mapper_url\": \"base64://PASTE_BASE64_STRING_HERE\",\n            //...\n            }\n      },\n//...\n```\n\n----------------------------------------\n\nTITLE: Deleting Multiple OAuth 2.0 Clients - ory CLI\nDESCRIPTION: This example demonstrates deleting multiple OAuth 2.0 Clients by specifying their IDs.  It directly calls the `ory delete oauth2-client` command with the client IDs to be deleted. It is a straightforward use case of the primary command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-oauth2-client.md#_snippet_1\n\nLANGUAGE: Go\nCODE:\n```\nory delete oauth2-client <client-1> <client-2> <client-3>\n```\n\n----------------------------------------\n\nTITLE: User Settings Component for Managing User Data\nDESCRIPTION: Component implementing User Settings API flow to allow users to update their personal information, leveraging Ory's self-service flows and styled form components.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nconst Settings = () => {\n  // Component code for user settings management\n}\n```\n\n----------------------------------------\n\nTITLE: Building Flutter Web App for Release (Shell)\nDESCRIPTION: Compiles the Flutter web application into optimized static files suitable for production deployment. The output is placed in the 'build/web' directory, ready to be served by any static file server. Requires the Flutter SDK.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/flutter_web_redirect/README.mdx#_snippet_3\n\nLANGUAGE: shell-session\nCODE:\n```\nflutter build web\n```\n\n----------------------------------------\n\nTITLE: Enabling Require Verified Address via Ory CLI\nDESCRIPTION: A shell command that patches the identity configuration to require verified email addresses for login. The command adds the require_verified_address hook to the login flow's password authentication process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/require-verified-address.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory patch identity-config --project <project-id> --workspace <workspace-id> \\\n  --add '/selfservice/flows/login/after/password/hooks/0/hook=\"require_verified_address\"'\n```\n\n----------------------------------------\n\nTITLE: Installing Ory CLI with Homebrew (Shell)\nDESCRIPTION: This command installs the Ory Command Line Interface (CLI) tool on macOS using the Homebrew package manager. It first taps the official Ory repository and then installs the `cli` package. Requires Homebrew to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nbrew install ory/tap/cli\n```\n\n----------------------------------------\n\nTITLE: Displaying Verify Code Button in Ory Interface (JSON)\nDESCRIPTION: This object defines the 'Verify code' button label, used during code verification flows such as email or phone confirmation. No additional dependencies; id is 1070006.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070006,\n  \"text\": \"Verify code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Start Ory tunnel\nDESCRIPTION: Starts the Ory Tunnel, which creates a secure tunnel to the Ory Network. The `<PROJECT_ID>` placeholder must be replaced with your actual Ory project ID.  This command requires the Ory CLI to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/05_php.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --project <PROJECT_ID> http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Validation Error: No WebAuthn Device Setup in Ory (JSON)\nDESCRIPTION: Error message indicating the absence of a WebAuthn device (typically a hardware or biometric security key) for the user. Used in phishing-resistant authentication flows; id is 4000013.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_36\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000013,\n  \"text\": \"You have no WebAuthn device set up.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Start Go Application\nDESCRIPTION: This command runs the Go application using the `go run` command and the current directory. This step executes the main.go file, starting the HTTP server and allowing the application to be accessed through the configured routes and middleware.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/01_go.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ngo run .\n```\n\n----------------------------------------\n\nTITLE: Shell Usage Syntax for kratos cleanup sql\nDESCRIPTION: Defines the command syntax for executing the 'kratos cleanup sql' operation, including required parameters and optional flags. The snippet highlights the general structure and how to specify the database URL and configurations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-cleanup-sql.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nkratos cleanup sql <database-url> [flags]\n```\n\n----------------------------------------\n\nTITLE: Encoding Jsonnet transform to Base64 for webhook configuration\nDESCRIPTION: Converts the Jsonnet file into a Base64 string to embed in webhook payloads, ensuring correct transmission of the transformation logic during API calls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/actions/integrations/segment.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\ncat segment_identify.jsonnet | base64 | pbcopy\n```\n\n----------------------------------------\n\nTITLE: Project Initialization with npm install\nDESCRIPTION: Executes 'npm install' to install project dependencies as specified in package.json, preparing the project for development or build. No specific dependencies are required beyond standard npm packages. Used at the start of the project setup process.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/vue/README.md#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth2 Client with Skip Logout Consent using Ory CLI\nDESCRIPTION: This command creates an OAuth2 client using the Ory CLI and skips the logout consent screen by setting the `require_logout_consent` property to `false`. The `--skip-logout-consent` flag handles this configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/skip-consent.mdx#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nory create oauth2-client \\\n  --skip-logout-consent \\\n  # ...\n```\n\n----------------------------------------\n\nTITLE: Implementing Ory Identities Middleware with Echo Framework\nDESCRIPTION: Provides an example showing how to integrate the Ory Identities Go SDK's session management middleware with the Echo web framework. This middleware allows securing routes or accessing the authenticated identity within Echo handlers. Requires the Echo framework.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_31\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Initializing Go Project\nDESCRIPTION: Sets up a new Go project directory named 'myproject', navigates into it, and initializes Go modules using 'go mod init'. This is a standard prerequisite for installing and using Go packages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nmkdir myproject\ncd myproject\ngo mod init myproject\n```\n\n----------------------------------------\n\nTITLE: Validation Error: No TOTP Device Setup in Ory (JSON)\nDESCRIPTION: Indicates that no Time-Based One-Time Password (TOTP) device is configured for the account, required for two-factor authentication. Static message, id is 4000011.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_34\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000011,\n  \"text\": \"You have no TOTP device set up.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration from File - Shell\nDESCRIPTION: This shell command updates the Ory identity config on a project and workspace with the local YAML configuration file. Inputs: <project-id>, <workspace-id>, identity-config.yaml. Output: Updates configuration in Ory Cloud. Prerequisite: Ory CLI installed and authenticated. The specified config file must have valid structure and content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/35_gitlab.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Confirming Email Verification Success in Ory (JSON)\nDESCRIPTION: This message confirms that a user's email address has been successfully verified. Used in the verification completion step; no additional input required. Message id is 1080002.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_22\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1080002,\n  \"text\": \"You successfully verified your email address.\",\n  \"type\": \"success\"\n}\n```\n\n----------------------------------------\n\nTITLE: Synchronizing Migration Test Data using Ory CLI (Shell)\nDESCRIPTION: Runs the Ory development CLI command (`ory dev pop migration sync`) to update the test data schema based on the Fizz migrations, creating a new SQL file in the test data directory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_22\n\nLANGUAGE: shell\nCODE:\n```\n.bin/ory dev pop migration sync persistence/sql/migrations/templates persistence/sql/migratest/testdata\n```\n\n----------------------------------------\n\nTITLE: Displaying Project's Current Storage Location in Ory Console with MDX\nDESCRIPTION: MDX code block that renders a browser window showing how the project's chosen personal data storage location appears in the Ory Console settings page.\nSOURCE: https://github.com/ory/docs/blob/master/docs/security-compliance/personal-data-location.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\n<BrowserWindow url=\"https://console.ory.sh/projects/current/settings\">\n\n![Passkey in Console](_static/storage-location-settings.png )\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Example command to run Ory Proxy with application URL\nDESCRIPTION: Illustrates basic usage of the Ory Proxy CLI, specifying the application URL and optional publish URL for local development, demonstrating how to start the proxy with necessary parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nory proxy http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Submitting Verification Flow via cURL (Native)\nDESCRIPTION: Uses cURL to send a POST request to the `/self-service/verification` endpoint to submit verification data for a native (API-based) application. Displays the cURL command and an example JSON response.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/05_custom-ui-basic-integration.mdx#_snippet_59\n\nLANGUAGE: shell\nCODE:\n```\n{submitVerificationCurlApi}\n```\n\nLANGUAGE: json5\nCODE:\n```\n{JSON.stringify(submitVerificationCurlApiJson, null, 2)}\n```\n\n----------------------------------------\n\nTITLE: Verifying Ory CLI Installation (Shell)\nDESCRIPTION: This command verifies that the Ory CLI has been successfully installed and is accessible in the system's PATH. Running `ory help` should display the available commands and options, confirming a correct installation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/01_installation.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory help\n```\n\n----------------------------------------\n\nTITLE: Getting Specific Session using Ory Identities Go SDK\nDESCRIPTION: Shows how to retrieve detailed information about a single user session using its session ID via the Ory Identities Go SDK. This can be used to check session validity and retrieve associated identity information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_25\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Using the Ory Validate Identity Command in Bash\nDESCRIPTION: Command syntax for the 'ory validate identity' command that validates JSON files containing identity data against Ory Kratos standards. The command accepts multiple JSON files as arguments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-validate-identity.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory validate identity file.json [file-2.json] [file-3.json] [file-n.json] [flags]\n```\n\n----------------------------------------\n\nTITLE: Synopsis for ory create relationships command (Shell)\nDESCRIPTION: This snippet shows the basic command-line synopsis for the `ory create relationships` command. It indicates the command name followed by a placeholder for various flags that can be used to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-relationships.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create relationships [flags]\n```\n\n----------------------------------------\n\nTITLE: Setting Allowed CORS Origins Bash\nDESCRIPTION: Illustrates how to restrict allowed CORS origins for the tunnel using the `--allowed-cors-origins` flag. Multiple origins can be specified by repeating the flag. Wildcards are permitted.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_7\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel http://localhost:3000 https://app.example.com \\\n\t--allowed-cors-origins https://www.example.org \\\n\t--allowed-cors-origins https://api.example.org \\\n\t--allowed-cors-origins https://www.another-app.com\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration using Ory CLI\nDESCRIPTION: Shows the Ory CLI command to apply the updated identity configuration from the `identity-config.yaml` file to the specified Ory project. Requires the Ory CLI to be installed and configured.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Creating Ory Project Using Ory CLI in Shell\nDESCRIPTION: Creates a new Ory Network project named \"Ory OAuth2 Example\" using the Ory CLI. The project ID outputted from this command is stored in a shell variable for subsequent CLI operations. This step initializes the environment for OAuth2 client and token operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/ory-network-oauth2.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"Ory OAuth2 Example\"\nproject_id=\"{set to the project ID from output}\"\n```\n\n----------------------------------------\n\nTITLE: API Key Authentication Configuration - YAML\nDESCRIPTION: This snippet shows the configuration for API Key authentication, which requires specifying the name, value, and location (header or cookie) of the API key.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-hosted/10_sending-sms.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nname: Some-Name\nvalue: The-Value-of-My-Key\nin: header # alternatively cookie\n```\n\n----------------------------------------\n\nTITLE: Creating a Segment Identify Jsonnet Template\nDESCRIPTION: This Jsonnet template creates a structure suitable for segment identify calls. It accesses nested properties from the `ctx` object, including identity traits (email, name, newsletter consent) and transient payload data. The function returns a JSON-like object containing the extracted data.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_3\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) {\n  userId: ctx.identity.id,\n  customData: ctx.flow.transient_payload.custom_data\n  traits: {\n    email: ctx.identity.traits.email,\n    name: ctx.identity.traits.name,\n    newsletterConsent: ctx.identity.traits.consent.newsletter,\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Backup Recovery Code Not Valid in Ory (JSON)\nDESCRIPTION: Indicates that the backup recovery code supplied is not valid for the user. Static definition used during account recovery; message id is 4000016.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_39\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000016,\n  \"text\": \"The backup recovery code is not valid.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Config (Shell)\nDESCRIPTION: This shell command updates the Ory Identities configuration using the modified YAML file. It uses the Ory CLI to apply the changes. The `<project-id>` and `<workspace-id>` placeholders must be replaced with the actual IDs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/30_apple.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Inherited Command Options\nDESCRIPTION: Options inherited from parent commands that can be used with the 'ory import oauth2-client' command, including configuration file specification and automatic confirmation of dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-oauth2-client.md#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Config - Shell\nDESCRIPTION: This command shows how to update the Ory Identities configuration using the modified YAML file. This command applies the changes to the Ory project and workspace.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/80_dingtalk.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Command options for ory open account-experience registration\nDESCRIPTION: Lists the specific options available for the `ory open account-experience registration` subcommand. The `-h` or `--help` flag displays help information for this specific command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-registration.md#_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help   help for registration\n```\n\n----------------------------------------\n\nTITLE: Refreshing Session using Ory Identities Go SDK\nDESCRIPTION: Demonstrates how to extend the expiration time of an existing user session using the Ory Identities Go SDK. This operation is typically performed to keep a user logged in without requiring re-authentication immediately.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_27\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Calibrating Argon2 Hashing Using Ory Kratos CLI - Shell\nDESCRIPTION: This shell snippet demonstrates the usage of the 'kratos hashers argon2 calibrate' CLI command to determine optimal Argon2 password hashing parameters. Prerequisites include an installed Ory Kratos CLI and, optionally, access to relevant configuration files. The command takes a required requests-per-minute argument and optional flags to control memory usage, output format, salt length, and more. Input is provided via command-line arguments; output is displayed in various formats as specified by the 'format' flag. Proper resource constraints must be considered to avoid out-of-memory errors.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-hashers-argon2-calibrate.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos hashers argon2 calibrate <requests-per-minute> [flags]\n```\n\n----------------------------------------\n\nTITLE: Patching Identity State using Ory Identities Go SDK\nDESCRIPTION: Illustrates how to modify an existing identity's attributes using the patch operation in the Ory Identities Go SDK. This specific example focuses on updating the identity's state field. Requires an existing identity ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/sdk/05_go.mdx#_snippet_22\n\nLANGUAGE: go\nCODE:\n```\n\n```\n\n----------------------------------------\n\nTITLE: Installing Example Identity Provider for Ory Hydra\nDESCRIPTION: Shell command to install the example login and consent app that works with Ory Hydra.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nhelm install hydra-example-idp ory/example-idp \\\n    --set 'hydraAdminUrl=http://hydra-example-admin/' \\\n    --set 'hydraPublicUrl=http://public.hydra.localhost/' \\\n    --set 'ingress.enabled=true'\n```\n\n----------------------------------------\n\nTITLE: Register OAuth2/OpenID Connect clients dynamically with SDK or REST API\nDESCRIPTION: These snippets show how to register OAuth2 and OpenID Connect clients dynamically using SDK or REST API, capturing the `registration_access_token` needed for subsequent management actions. The SDK code provides a placeholder for import and usage, while the REST API link points to detailed API documentation. The token is issued once and must be kept secure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-clients.mdx#_snippet_5\n\nLANGUAGE: Shell\nCODE:\n```\n```mdx-code-block\nimport dynamicCreateTs from '!!raw-loader!../../../code-examples/sdk/typescript/src/oauth2/dynamic-client-create.ts'\n\n<Codes language=\"tsx\">{dynamicCreateTs}</Codes>\n```\n```\n\nLANGUAGE: Markdown\nCODE:\n```\nSee [API documentation](../../reference/api#tag/oAuth2/operation/createOidcDynamicClient).\n```\n\n----------------------------------------\n\nTITLE: Starting the iOS Simulator for React Native App\nDESCRIPTION: Command to launch the app in iOS emulated environment using npm script, facilitating local testing on iOS devices via the Expo framework.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nnpm run ios\n```\n\n----------------------------------------\n\nTITLE: Options for `kratos delete identity`\nDESCRIPTION: Lists the specific command-line options available for the `kratos delete identity` subcommand. The `-h` or `--help` flag displays help information for this specific command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-delete-identity.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n-h, --help   help for identity\n```\n\n----------------------------------------\n\nTITLE: Updating Packages on Ubuntu\nDESCRIPTION: This command updates the package lists and upgrades the existing packages on an Ubuntu system.  It ensures the system has the latest available versions of all installed software.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\napt-get update && apt-get upgrade\n```\n\n----------------------------------------\n\nTITLE: Command-Line Options for `keto relation-tuple create`\nDESCRIPTION: Lists the specific command-line options available for the `keto relation-tuple create` command. These flags allow configuring aspects like the gRPC authority header, blocking behavior, output format, transport security settings, and the addresses for the read and write API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-create.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --authority string                      Set the authority header for the remote gRPC server.\n      --block                                 Block until the connection is up.\n      --format string                         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                                  help for create\n      --insecure-disable-transport-security   Disables transport security. Do not use this in production.\n      --insecure-skip-hostname-verification   Disables hostname verification. Do not use this in production.\n  -q, --quiet                                 Be quiet with output printing.\n      --read-remote string                    Remote address of the read API endpoint. (default \"127.0.0.1:4466\")\n      --write-remote string                   Remote address of the write API endpoint. (default \"127.0.0.1:4467\")\n```\n\n----------------------------------------\n\nTITLE: Example Usage of hydra perform client-credentials\nDESCRIPTION: Demonstrates how to use the `hydra perform client-credentials` command with specific client ID and client secret flags to execute the flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-client-credentials.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhydra perform client-credentials --client-id ... --client-secret\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Project Information with CLI\nDESCRIPTION: Bash commands to list workspaces and projects in Ory, and export the selected project ID as an environment variable for further operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory list workspaces\nory list projects --workspace <workspace-id>\n\nexport ORY_PROJECT_ID=$PROJECT_ID\n```\n\n----------------------------------------\n\nTITLE: Options: Customizing Ory List Organizations Output (Bash)\nDESCRIPTION: Presents the command-specific options for the `ory list organizations` command. These flags allow users to control the output format, specify the target project or workspace, request help, or suppress detailed output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-organizations.md#_snippet_1\n\nLANGUAGE: Bash\nCODE:\n```\n--format string      Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help               help for organizations\n      --project string     The project to use, either project ID or a (partial) slug.\n  -q, --quiet              Be quiet with output printing.\n      --workspace string   The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Tunneling with Project Flag Bash\nDESCRIPTION: Illustrates how to specify the target Ory project using the `--project` flag when invoking the `ory tunnel` command. This is an alternative to setting the `ORY_PROJECT` environment variable.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_3\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> ...\n```\n\n----------------------------------------\n\nTITLE: Displaying Continue Button in Ory Interface (JSON)\nDESCRIPTION: Defines a 'Continue' button label for progressing through multi-step flows in Ory forms. Message id is 1070009 and requires no dynamic input.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070009,\n  \"text\": \"Continue\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running Ory Tunnel for Local Development\nDESCRIPTION: Command to run the Ory tunnel that exposes the Ory API under the same top-level domain as the application for testing authentication flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --port 4000 http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Configuring Scope Claim as Array in Ory (JSON5)\nDESCRIPTION: This snippet demonstrates the JWT payload format when the '/strategies/jwt/scope_claim' is set to its default 'list' mode in Ory. In this configuration, the 'scope' claim within the access token is an array of strings, each representing an OAuth scope granted to the user. No special dependencies are required; this is the system default. Expected input is a valid JSON5 structure for the JWT payload. Output will be JWTs where 'scope' is an array. Limitation: This is only one of several claim modes available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/claims-scope.mdx#_snippet_0\n\nLANGUAGE: json5\nCODE:\n```\n{\n  // \"sub\": \"...\",\n  // ...\n  scope: [\"read\", \"write\"],\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Specific Options for `ory create relation-tuples` (Shell)\nDESCRIPTION: Lists command-line options specifically available for the `ory create relation-tuples` subcommand. The `-h` or `--help` flag displays help information, and the `--project` flag allows specifying the target Ory Network project ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create-relation-tuples.md#_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\n  -h, --help             help for relation-tuples\n      --project string   The project to use\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering API Documentation with MDX Component\nDESCRIPTION: Imports the `API` component from `@theme/API` and invokes it to render Ory Hydra's API documentation. The component fetches the API specification from the provided GitHub URL (`https://raw.githubusercontent.com/ory/hydra/master/spec/api.json`). This requires the `@theme/API` component to be defined and available within the project's theme.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/reference/api.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport API from '@theme/API'\n\n<API repo=\"hydra\" url=\"https://raw.githubusercontent.com/ory/hydra/master/spec/api.json\" />\n```\n\n----------------------------------------\n\nTITLE: Parsing Relationships with Ory CLI\nDESCRIPTION: This code shows the synopsis for using the `ory parse relationships` command. It shows the basic structure of the command and indicates that it takes flags as arguments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-parse-relationships.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory parse relationships [flags]\n```\n\n----------------------------------------\n\nTITLE: Initializing Ory Public and Admin APIs in JavaScript\nDESCRIPTION: This JavaScript snippet shows how to import the necessary classes from the '@ory/client' package and configure the PublicApi and AdminApi clients. Users must instantiate Configuration objects with the correct basePath URL for their Ory project, which is used to create the respective API clients, enabling interaction with Ory's OAuth2 and OpenID Connect endpoints. It assumes that the environment variable or placeholder '$PROJECT_SLUG' is replaced with an appropriate project identifier.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/sdk/10_js.mdx#_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { Configuration, PublicApi, AdminApi } from \"@ory/client\"\n\nconst oryPublic = new PublicApi(\n  new Configuration({\n    basePath: \"https://$PROJECT_SLUG.projects.oryapis.com/\",\n  }),\n)\n\nconst oryAdmin = new AdminApi(\n  new Configuration({\n    basePath: \"https://$PROJECT_SLUG.projects.oryapis.com/\",\n  }),\n)\n```\n\n----------------------------------------\n\nTITLE: Jsonnet Template for SMS Request Body\nDESCRIPTION: Define the structure of the HTTP request body using a Jsonnet template. This example shows how to extract recipient and body content from the provided context (`ctx`) object, which includes data like recipient phone number, message body, and template details.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/10_sending-sms.mdx#_snippet_3\n\nLANGUAGE: jsonnet\nCODE:\n```\nfunction(ctx) {\n  To: ctx.recipient,\n  Body: ctx.body,\n}\n```\n\n----------------------------------------\n\nTITLE: Sharing Identifier Across Separate Identities YAML\nDESCRIPTION: Shows how the same identifier can be associated with different credential types belonging to *separate* Ory identities. Identity 1 uses the identifier with a password credential, while Identity 2 uses it with an OIDC credential, illustrating that this scenario is valid.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/credentials.mdx#_snippet_3\n\nLANGUAGE: YAML\nCODE:\n```\n# Identity 1\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n---\n# Identity 2\ncredentials:\n  oidc:\n    id: oidc\n    identifiers:\n      - john.doe@acme.com\n```\n\n----------------------------------------\n\nTITLE: Ory Get Workspace Command Usage\nDESCRIPTION: Shows the usage of the `ory get workspace` command to retrieve an Ory Network workspace by its ID.  The command requires the workspace ID as an argument and supports flags for output formatting and quiet mode.  It also inherits configuration and confirmation flags from parent commands.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-get-workspace.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory get workspace <id> [flags]\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for Input Nodes\nDESCRIPTION: Defines a JSON schema for a generic input node, representing an HTML `<input>` element with attributes such as name, type, value, and state flags. Used to generate form fields dynamically in the UI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"default\",\n  \"attributes\": {\n    \"name\": \"csrf_token\",\n    \"type\": \"hidden\",\n    \"node_type\": \"input\",\n    \"value\": \"U3r/lgEfT8rA1Lg0Eeo06oGO8mX6T4TKoe/z7rbInhvYeacbRg0IW9zrqnpU1wmQJXKiekNzdLnypx5naHXoPg==\",\n    \"required\": true,\n    \"disabled\": false\n  },\n  \"messages\": null,\n  \"meta\": {}\n}\n```\n\n----------------------------------------\n\nTITLE: Export Environment Variables\nDESCRIPTION: These bash commands export the Ory API Key and the SDK URL as environment variables. The `ORY_PAT` variable stores the API Key, and `HYDRA_ADMIN_URL` stores the SDK URL. This configuration is essential for the sample application to interact with the Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nexport ORY_PAT=ORY_API_KEY # API Key copied from the Ory Console, 'ory_pat' prefix included.\nexport HYDRA_ADMIN_URL=SDK_CONFIGURATION_URL  # Found in the 'Connect' section of the Ory Console.\n```\n\n----------------------------------------\n\nTITLE: Example Valid JWT Header and Payload for Oathkeeper\nDESCRIPTION: Illustrates the structure of a JSON Web Token (JWT) that is considered valid by the example access rule configuration. It shows the expected `alg` in the header and the necessary `iss`, `aud`, and `scp` claims in the payload to pass validation checks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/authn.md#_snippet_30\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"alg\": \"RS256\"\n}\n{\n  \"iss\": \"https://my-issuer.com/\",\n  \"aud\": [\"https://my-service.com/api/users\", \"https://my-service.com/api/devices\"],\n  \"scp\": [\"scope-a\", \"scope-b\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Tunneling with Project Env Var Bash\nDESCRIPTION: Demonstrates specifying the target Ory project by setting the `ORY_PROJECT` environment variable before executing the `ory tunnel` command. This is an alternative to using the `--project` flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_4\n\nLANGUAGE: Bash\nCODE:\n```\nORY_PROJECT=<project-id-or-slug> ory tunnel ...\n```\n\n----------------------------------------\n\nTITLE: Enabling Ory/Nancy Vulnerability Scanning in CI - YAML\nDESCRIPTION: Provides a CircleCI workflow example for integrating Ory Nancy vulnerability scanning using the 'ory/nancy' orb. Requires CircleCI configuration with orbs and a compatible repository. The workflow ensures that vulnerability checks are part of the test pipeline and are run for all tags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\norbs:\n  nancy: ory/nancy@0.0.9\n\nworkflows:\n  test:\n    jobs:\n      - nancy/test:\n        filters:\n          tags:\n            only: /.*/\n\n```\n\n----------------------------------------\n\nTITLE: Database Migration with OEL Image (Ory Hydra)\nDESCRIPTION: This command uses the Ory Hydra Enterprise License Docker image to run the `hydra migrate sql up` command against the database of the open source service. This step applies the necessary database migrations for OEL, ensuring compatibility.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/migrate.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --rm \\\n  -e DSN=your_database_connection_string \\\n  europe-docker.pkg.dev/ory-artifacts/ory-enterprise/hydra-oel:<version> \\\n  migrate sql up -e -f config.yml\n```\n\n----------------------------------------\n\nTITLE: Listing Inherited Flags for Hydra Revoke Token - Shell\nDESCRIPTION: This snippet lists flags inherited from parent Hydra CLI commands, documenting broader configuration options like endpoint selection, output formatting, HTTP headers, and TLS security. Inputs are provided via the listed flags, which affect the behavior of all child commands, including hydra revoke token. This serves as a reference for pipe-lining, scripting, and environment configuration needs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-revoke-token.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Encoding Template to Base64 (CLI)\nDESCRIPTION: This code snippet shows how to encode a custom template to Base64 using the `base64` command-line tool. The encoded template can then be used in the Ory Identities configuration. It requires a Unix-like environment with the `base64` utility available.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/05_custom-email-templates.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n   echo \"Your custom template\" | base64\n```\n\n----------------------------------------\n\nTITLE: Testing Nginx Configuration (Bash)\nDESCRIPTION: This command tests the Nginx configuration file for syntax errors. The `-t` flag performs the test. The expected output confirms that the configuration file syntax is okay and the test is successful. Requires Nginx to be installed.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_29\n\nLANGUAGE: bash\nCODE:\n```\nnginx -t\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identities Configuration Using CLI\nDESCRIPTION: This shell command demonstrates how to update the Ory Identities configuration for a specific project and workspace using a modified configuration file with the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/cache.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Setting DSN Environment Variable\nDESCRIPTION: This command shows how to set the `DSN` environment variable when running the Ory Kratos Docker image. The `DSN` specifies the database source name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/docker.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n## Example\n\ndocker run -e DSN=\"memory\" oryd/kratos:{version}\n```\n\n----------------------------------------\n\nTITLE: Deleting an identity by email address using jq and kratos identities list\nDESCRIPTION: Example of deleting an identity with a specific recovery email address by combining the list command with jq filtering to find the appropriate ID.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-delete.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nkratos identities delete $(kratos identities list --format json | jq -r 'map(select(.recovery_addresses[].value == \"foo@bar.com\")) | .[].id')\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Kratos to Use Mailslurper SMTP Server\nDESCRIPTION: YAML configuration snippet for setting up Ory Kratos to use Mailslurper as a development SMTP server. This configuration directs Kratos to send emails to Mailslurper at localhost:1025.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/sign-in/saml.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\ncourier:\n  smtp:\n    connection_uri: smtps://test:test@localhost:1025/?skip_ssl_verify=true\n```\n\n----------------------------------------\n\nTITLE: Displaying Help for Kratos Hashers Command\nDESCRIPTION: Shows the available options for the 'kratos hashers' command. The '-h' or '--help' flag displays usage information and available flags for this command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-hashers.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\n  -h, --help   help for hashers\n```\n\n----------------------------------------\n\nTITLE: Cloning Ory Hydra Repository\nDESCRIPTION: This command clones the Ory Hydra repository from GitHub.  It's a prerequisite to obtain the necessary files for setting up the docker-compose environment and configuring GitLab.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ngit clone https://github.com/ory/hydra.git\n```\n\n----------------------------------------\n\nTITLE: Getting Tracing Configuration Help with Hydra CLI\nDESCRIPTION: Command to view available tracing configuration options in Ory Hydra using the CLI help function. This displays the DEBUG CONTROLS section with tracing options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/operations/01_tracing.md#_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ndocker exec -it hydra_hydra_1 hydra serve --help\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Command-line options that are inherited from parent commands in the Keto CLI hierarchy, primarily configuration file loading options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Setting Complex Configuration via JSON string Environment Variables (Linux/macOS)\nDESCRIPTION: This snippet demonstrates how to define complex configuration keys using JSON strings passed in via environment variables on Linux/macOS.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\n# Linux / macOS\nexport SOME_NESTED_KEY_AND_ARRAY='[{\"id\":\"foo\"},{\"id\":\"bar\"}]'\n```\n\n----------------------------------------\n\nTITLE: Cleaning Up Docker Containers\nDESCRIPTION: Kills and removes the Docker containers created during the quickstart. This prevents conflicts with other tutorials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_14\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml kill\ndocker compose -f quickstart.yml rm -f -v\n```\n\n----------------------------------------\n\nTITLE: Example of Deleting Multiple JSON Web Key Sets\nDESCRIPTION: An example showing how to delete three JSON Web Key Sets by their set IDs in a single command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-jwk.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory delete jwk <set-1> <set-2> <set-3>\n```\n\n----------------------------------------\n\nTITLE: Disabling the Have I Been Pwned (HiBP) password breach check in Ory Kratos YAML config\nDESCRIPTION: This YAML snippet illustrates how to disable the HiBP password breach check feature in Ory Kratos by setting 'haveibeenpwned_enabled' to false under the password method config. Disabling this feature reduces password security by skipping checks against compromised or commonly used passwords, and may conflict with NIST guidelines requiring such validations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/hosting-own-have-i-been-pwned-api.mdx#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nselfservice:\n  methods:\n    password:\n      config:\n        haveibeenpwned_enabled: false\n```\n\n----------------------------------------\n\nTITLE: Adding Authentication Check to Home Page in Next.js 12\nDESCRIPTION: Implementation of session verification on the Next.js 12 home page that checks if a user is signed in and redirects to the login page if not.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n// Code content referenced from external file\n// This would be the content of pages/index.tsx\n```\n\n----------------------------------------\n\nTITLE: Setting Yandex Redirect URI in Ory\nDESCRIPTION: Specifies the required redirect URI format for a Yandex OAuth2 application when integrating with Ory. Replace `$PROJECT_SLUG` with your actual Ory project slug. This URI is where Yandex redirects the user after successful authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/70_yandex.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhttps://$PROJECT_SLUG.projects.oryapis.com/self-service/methods/oidc/callback/yandex\n```\n\n----------------------------------------\n\nTITLE: Incorrect webhook response\nDESCRIPTION: This is an example of an incorrect webhook response, as it's missing the original identity's traits. Instead, this response only contains the `another_value` trait. This would overwrite the existing identity traits.  \nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"another_value\": \"example\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Environment Variables File\nDESCRIPTION: Shell command to create a .env file for storing environment variables needed by the application, such as the Ory Tunnel URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ntouch .env\n```\n\n----------------------------------------\n\nTITLE: Creating a PostgreSQL User\nDESCRIPTION: This command creates a new PostgreSQL user named 'hydra' with a specified password. Replace `<YOUR_PASSWORD_HERE>` with a strong, secure password.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nCREATE USER hydra PASSWORD '<YOUR_PASSWORD_HERE>';\n```\n\n----------------------------------------\n\nTITLE: Listing Identities in an Ory Project\nDESCRIPTION: Command to list all identities in a project with formatted JSON output for easier analysis before updating identity schemas.\nSOURCE: https://github.com/ory/docs/blob/master/docs/identities/model/manage-identity-schema.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nory list identities --format json-pretty\n```\n\n----------------------------------------\n\nTITLE: DSN parameters for configuring SQL connection limits\nDESCRIPTION: This example shows how to configure SQL connection limits by appending parameters like `max_conns` to the DSN.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/faq.md#_snippet_2\n\nLANGUAGE: Text\nCODE:\n```\npostgres://foo:bar@host:port/database?max_conns=12\n```\n\n----------------------------------------\n\nTITLE: Identity before hook\nDESCRIPTION: This is an example of the identity before the hook is run. It contains only the email trait.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/integrate-with-ory-cloud-through-webhooks.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"identity\": {\n    \"traits\": {\n      \"email\": \"joe@example.org\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Express.js Project using Shell\nDESCRIPTION: Initializes a new Node.js project directory, navigates into it, creates a default `package.json` file, and installs the Express.js framework along with `nodemon` for development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/10_expressjs.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nmkdir your-project\ncd your-project\n\nnpm init -y\n\nnpm install express\nnpm install -D nodemon\n```\n\n----------------------------------------\n\nTITLE: Migrating Ory CLI get commands syntax - Shell\nDESCRIPTION: Commands like `ory get identity-config`, `oauth2-config`, and `permissions-config` now require project and workspace identifiers via flags (`--project`, `--workspace`) or environment variables (`ORY_PROJECT`, `ORY_WORKSPACE`) instead of a positional argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/03_cli-migration-v1.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n- ory get identity-config|oauth2-config|permissions-config <project>\n+ ory get identity-config|oauth2-config|permissions-config --project <project>\n+ ory get identity-config|oauth2-config|permissions-config --workspace <workspace> --project <project>\n+ ORY_WORKSPACE=<workpsace> ORY_PROJECT=<project> ory get identity-config|oauth2-config|permissions-config\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Identities Configuration Using Ory CLI - Shell\nDESCRIPTION: Contains a set of CLI commands to list workspaces and projects, then download the current Ory Identities configuration in YAML format. This downloaded config file can be modified to include the Spotify social sign-in provider configuration before uploading it back to Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/50_spotify.mdx#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Example OAuth2 token endpoint error response with debug info - json\nDESCRIPTION: This JSON snippet demonstrates an OAuth2 token endpoint error response with added debug information, available when the project is set to development mode. It includes an error_debug field detailing the underlying cause, such as an expired token. This facilitates troubleshooting client authentication failures using JWKS or private_key_jwt methods.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/debug.mdx#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"error\",\n  \"error_description\": \"The error is unrecognizable\",\n  \"status_code\": 500,\n  \"error_debug\": \"Token is expired\"\n}\n```\n\n----------------------------------------\n\nTITLE: Command Options for Hydra Import Client - Shell\nDESCRIPTION: This snippet lists the command-line flags available for the 'hydra import client' command, including help options and encryption-related flags such as --keybase, --pgp-key, and --pgp-key-url for encrypting client secrets. It also shows inherited flags from parent commands, like API endpoint configuration, output formatting, HTTP header customization, quiet mode, and TLS verification controls. These options enable flexible command behavior and integration with different deployment environments.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-client.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help                 help for client\n      --keybase string       Keybase username for encrypting client secret.\n      --pgp-key string       Base64 encoded PGP encryption key for encrypting client secret.\n      --pgp-key-url string   PGP encryption key URL for encrypting client secret.\n```\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, and json-pretty. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Downloading Ory Kratos Quickstart Configuration Files Using Bash Shell\nDESCRIPTION: Downloads example identity schema JSON and YAML configuration files from the Ory Kratos GitHub repository for a quickstart setup using the email-password flow. These files are stored in the config directory for customization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\ncd ../config\nwget https://raw.githubusercontent.com/ory/kratos/${useLatestRelease(\n\"kratos\",\n)}/contrib/quickstart/kratos/email-password/identity.schema.json\nwget https://raw.githubusercontent.com/ory/kratos/${useLatestRelease(\n\"kratos\",\n)}/contrib/quickstart/kratos/email-password/kratos.yml\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Migration Job in Ory Hydra YAML\nDESCRIPTION: This YAML snippet demonstrates how to enable and customize a migration job for reverting database changes in Ory Hydra. It should be saved as migrate-down-values.yaml and modifies the customMigrations.jobs section to enable the job with arguments that revert the last applied migration step. This approach requires that the Ory Hydra Helm chart and production environment are already configured, and the database is backed up.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/revert-database-migrations.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nhydra:\n  customMigrations:\n    jobs:\n      sql-migration-down:\n        enabled: true\n        customArgs: [\"migrate\", \"sql\", \"down\", \"-e\", \"-y\", \"--steps\", \"1\"]\n\n```\n\n----------------------------------------\n\nTITLE: Getting Detailed Help for Ory Auth Command in Shell\nDESCRIPTION: Demonstrates usage of the '--help' flag on the 'ory auth' command showing authentication-related subcommands, flags, and usage patterns. Used to assist users in learning how to authenticate via the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/guides/cli/05_cli-basics.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nory auth --help\nCreate a new Ory Network account or sign in to an existing account.\n\nUsage:\n  ory auth [flags]\n  ory auth [command]\n\nAvailable Commands:\n  logout      Signs you out of your account on this computer.\n\nFlags:\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for auth\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n\nUse \"ory auth [command] --help\" for more information about a command.\n```\n\n----------------------------------------\n\nTITLE: Create PHP project\nDESCRIPTION: Creates a new directory for the PHP project, navigates into it, and creates an empty `index.php` file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/05_php.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nmkdir your-project\ncd your-project\ntouch index.php\n```\n\n----------------------------------------\n\nTITLE: Command options and flags for kratos identities delete\nDESCRIPTION: Available options specific to the delete command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-delete.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n-h, --help   help for delete\n```\n\n----------------------------------------\n\nTITLE: Specifying Passkey display name\nDESCRIPTION: This JSON snippet configures the `display_name` property of the `passkey` credentials using the `ory.sh/kratos` extension. The `display_name` is set to true, which indicates that the field's value should be used as the display name when users interact with PassKeys.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"passkey\": {\n        \"display_name\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Command Options for OAuth2 Client Import\nDESCRIPTION: The available options for the 'ory import oauth2-client' command, including endpoint configuration, output format options, and encryption-related flags for securing client secrets.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-oauth2-client.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string      The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string        Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                 help for oauth2-client\n      --keybase string       Keybase username for encrypting client secret.\n      --pgp-key string       Base64 encoded PGP encryption key for encrypting client secret.\n      --pgp-key-url string   PGP encryption key URL for encrypting client secret.\n      --project string       The project to use, either project ID or a (partial) slug.\n  -q, --quiet                Be quiet with output printing.\n      --workspace string     The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Running Flutter Web Server for Testing\nDESCRIPTION: Command to start a Flutter web server for testing the application, specifying the web port as 3000.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nflutter run -d web-server --web-port 3000\n```\n\n----------------------------------------\n\nTITLE: Available Options for `ory perform authorization-code`\nDESCRIPTION: Lists the various command-line flags available to customize the behavior of the `ory perform authorization-code` command, including setting client credentials, endpoints, scopes, ports, and other OAuth 2.0/OpenID Connect parameters.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform-authorization-code.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n      --audience strings       Request a specific OAuth 2.0 Access Token Audience\n      --auth-url endpoint      Usually it is enough to specify the endpoint flag, but if you want to force the authorization url, use this flag\n      --client-id string       Use the provided OAuth 2.0 Client ID, defaults to environment variable OAUTH2_CLIENT_ID\n      --client-secret string   Use the provided OAuth 2.0 Client Secret, defaults to environment variable OAUTH2_CLIENT_SECRET\n  -e, --endpoint string        The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string          Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                   help for authorization-code\n      --https                  Sets up HTTPS for the endpoint using a self-signed certificate which is re-generated every time you start this command\n      --max-age int            Set the OpenID Connect max_age parameter. -1 means no max_age parameter will be used. (default -1)\n      --no-open                Do not open the browser window automatically\n      --no-shutdown            Do not terminate on success/error. State and nonce will be regenerated when auth flow has completed (either due to an error or success).\n  -p, --port int               The port on which the server should run (default 4446)\n      --project string         The project to use, either project ID or a (partial) slug.\n      --prompt strings         Set the OpenID Connect prompt parameter\n  -q, --quiet                  Be quiet with output printing.\n      --redirect string        Force a redirect url\n      --response-mode string   Set the response mode. Can be query (default) or form_post.\n      --scope strings          Request OAuth2 scope (default [offline,openid])\n      --skip                   Skip login and/or consent steps if possible. Only effective if you have configured the Login and Consent UI URLs to point to this server.\n      --state string           Force a state value (insecure)\n      --token-url endpoint     Usually it is enough to specify the endpoint flag, but if you want to force the token url, use this flag\n      --workspace string       The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Ory Auth Command Usage\nDESCRIPTION: Shows the basic usage of the `ory auth` command, which is used for authenticating with the Ory Network.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-auth.md#_snippet_0\n\nLANGUAGE: Text\nCODE:\n```\nory auth [flags]\n```\n\n----------------------------------------\n\nTITLE: Examples of deleting OAuth 2.0 clients\nDESCRIPTION: Examples showing how to delete multiple OAuth 2.0 clients directly by ID, and an advanced example that combines the list command with jq to filter clients by owner email before deletion.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-oauth2-client.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhydra delete oauth2-client <client-1> <client-2> <client-3>\n\nTo delete OAuth 2.0 Clients with the owner of \"foo@bar.com\", run:\n\n\thydra delete oauth2-client $(hydra list oauth2-clients --format json | jq -r 'map(select(.contacts[] == \"foo@bar.com\")) | .[].client_id')\n```\n\n----------------------------------------\n\nTITLE: Example 422 Error Response\nDESCRIPTION: This JSON5 snippet illustrates a typical 422 error response returned by an Ory service when a browser location change is required.  The `redirect_browser_to` field contains the URL to which the browser should be redirected, including the new flow ID which needs to be extracted. This allows SPAs to fetch the response in the background.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/bring-your-own-ui/10_custom-ui-advanced-integration.mdx#_snippet_9\n\nLANGUAGE: json5\nCODE:\n```\n{\n  error: {\n    id: \"browser_location_change_required\",\n    code: 422,\n    status: \"Unprocessable Entity\",\n    reason: \"In order to complete this flow please redirect the browser to: /ui/login?flow=ad574ad7-1a3c-4b52-9f54-ef9e866f3cec\",\n    message: \"browser location change required\",\n  },\n  redirect_browser_to: \"/ui/login?flow=ad574ad7-1a3c-4b52-9f54-ef9e866f3cec\",\n}\n```\n\n----------------------------------------\n\nTITLE: Options for hydra delete jwk Command\nDESCRIPTION: Lists command-line options including help, endpoint URL, output format, custom HTTP headers, quiet mode, and TLS verification toggle. These options customize the commands behavior and output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-jwk.md#_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n  -h, --help   help for jwk\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: YAML Configuration with Arrays\nDESCRIPTION: This snippet demonstrates a YAML configuration with an array of providers. It shows how to define lists of configuration objects.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nsocial_sign_in:\n  providers:\n    - provider: google\n```\n\n----------------------------------------\n\nTITLE: Related Commands\nDESCRIPTION: References the 'hydra import' command for additional resource import functionalities.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_5\n\nLANGUAGE: Markdown\nCODE:\n```\n* [hydra import](hydra-import) - Import resources\n```\n\n----------------------------------------\n\nTITLE: Enabling Minikube Ingress Addon\nDESCRIPTION: Shell command to enable the Ingress addon in Minikube for Ory Hydra deployment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\nminikube addons enable ingress\n```\n\n----------------------------------------\n\nTITLE: Loading Configuration from JSON Files\nDESCRIPTION: This snippet shows a basic JSON configuration. The configuration system supports loading from JSON files.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/configuring.md#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"some_config\": \"value\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Keto for gRPC API\nDESCRIPTION: Command to install the Ory Keto protobuf definitions for gRPC API integration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/05_go.mdx#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\ngo get github.com/ory/keto/proto\n```\n\n----------------------------------------\n\nTITLE: Dynamically Listing Ory Examples using MDX Components\nDESCRIPTION: This MDX code snippet imports the `ExampleList` React component and structured example content data (`basic`, `customui`, `community`) from separate files. It then uses these imports to render categorized lists of Ory project examples by passing the content data as props to the `ExampleList` component within the MDX page.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/overview.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport ExampleList from \"@site/src/components/Examples/example-list\"\nimport * as content from \"@site/src/pages/_assets/examples-content\"\n\n<ExampleList {...content.basic} />\n<ExampleList {...content.customui} />\n<ExampleList {...content.community} />\n```\n\n----------------------------------------\n\nTITLE: Retrieving OAuth2 Issuer URL with Ory CLI (shell)\nDESCRIPTION: This shell command uses the Ory CLI to fetch the OAuth2 configuration for a specific project and workspace, then pipes the JSON output to `jq` to extract and display the current issuer URL. This helps verify the configured server URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/issuer-url.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory get oauth2-config --project <project-id> --workspace <workspace-id> --format json | jq '.urls.self.issuer'\n```\n\n----------------------------------------\n\nTITLE: hydra get jwks Specific Options\nDESCRIPTION: Lists the command-line option specifically available for the `hydra get jwks` subcommand.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwks.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help   help for jwks\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Client Fetching Benchmark in Ory Hydra\nDESCRIPTION: Performance benchmark for fetching a specific OAuth 2.0 client in Ory Hydra. This endpoint demonstrates high performance with over 17,000 requests per second and very low average latency (5.5ms), making it the most efficient operation among the tested endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/benchmark.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nSummary:\n  Total:\t0.5859 secs\n  Slowest:\t0.0398 secs\n  Fastest:\t0.0001 secs\n  Average:\t0.0055 secs\n  Requests/sec:\t17067.5827\n\n  Total data:\t4860000 bytes\n  Size/request:\t486 bytes\n\nResponse time histogram:\n  0.000 [1]\t|\n  0.004 [5492]\t|\n  0.008 [1579]\t|\n  0.012 [1105]\t|\n  0.016 [923]\t|\n  0.020 [595]\t|\n  0.024 [178]\t|\n  0.028 [87]\t|\n  0.032 [29]\t|\n  0.036 [7]\t|\n  0.040 [4]\t|\n\n\nLatency distribution:\n  10% in 0.0002 secs\n  25% in 0.0002 secs\n  50% in 0.0018 secs\n  75% in 0.0093 secs\n  90% in 0.0155 secs\n  95% in 0.0184 secs\n  99% in 0.0250 secs\n\nDetails (average, fastest, slowest):\n  DNS+dialup:\t0.0000 secs, 0.0001 secs, 0.0398 secs\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0063 secs\n  req write:\t0.0000 secs, 0.0000 secs, 0.0066 secs\n  resp wait:\t0.0053 secs, 0.0001 secs, 0.0398 secs\n  resp read:\t0.0001 secs, 0.0000 secs, 0.0101 secs\n\nStatus code distribution:\n  [200]\t10000 responses\n```\n\n----------------------------------------\n\nTITLE: Informing User on Verification Email Sent Status in Ory (JSON)\nDESCRIPTION: Notifies the user that a verification link has been emailed, applicable when email address verification is required. Depends on Ory's email configuration, message id is 1080001.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_21\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1080001,\n  \"text\": \"An email containing a verification link has been sent to the email address you provided. If you have not received an email, check the spelling of the address and make sure to use the address you registered with.\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Argon2 hash command options in Kratos\nDESCRIPTION: Available configuration options for the Kratos Argon2 hash command. These options allow you to customize the hashing parameters including memory usage, iterations, parallelism, and expected operation duration for benchmarking purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-hashers-argon2-hash.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings                Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n      --dedicated-memory byte_size    Amount of memory dedicated for password hashing. Kratos will try to not consume more memory. (default 1.00GB)\n      --expected-deviation duration   Expected deviation of the time a hashing operation (~login request) takes. (default 500ms)\n  -h, --help                          help for hash\n      --iterations uint32             Number of iterations to start probing at. (default 1)\n      --key-length uint32             Length of the key in bytes. (default 32)\n      --memory byte_size              Memory to use. (default 128.00MB)\n      --min-duration duration         Minimal duration a hashing operation (~login request) takes. (default 500ms)\n      --parallel                      Run all hashing operations in parallel.\n      --parallelism uint8             Number of threads to use. (default 8)\n      --salt-length uint32            Length of the salt in bytes. (default 16)\n```\n\n----------------------------------------\n\nTITLE: JSON Representation of Checkbox Input Node\nDESCRIPTION: Describes a checkbox input node tied to a boolean schema property. The node's label is 'Accept Terms of Service', and attributes specify name and type, reflecting a checkbox form element used in user profiles.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-user-interface.mdx#_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"type\": \"input\",\n  \"group\": \"profile\",\n  \"attributes\": {\n    \"name\": \"traits.tos\",\n    \"type\": \"checkbox\",\n    \"disabled\": false,\n    \"node_type\": \"input\"\n  },\n  \"messages\": [],\n  \"meta\": {\n    \"label\": {\n      \"id\": 1070002,\n      \"text\": \"Accept Terms of Service\",\n      \"type\": \"info\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: kratos identities put Inherited Options\nDESCRIPTION: This section describes options inherited from parent commands. These options configure the admin endpoint URL (`-e` or `--endpoint`), output format (`-f` or `--format`), and quiet mode (`-q` or `--quiet`).  The endpoint can also be set using the `KRATOS_ADMIN_ENDPOINT` environmental variable.  The quiet mode takes precedence over the format selection.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-put.md#_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n  -e, --endpoint string   The upstream admin endpoint URL. Alternatively set using the KRATOS_ADMIN_ENDPOINT environmental variable.\n```\n\nLANGUAGE: go\nCODE:\n```\n  -f, --format string     Set the output format. One of table, json, and json-pretty.\n```\n\nLANGUAGE: go\nCODE:\n```\n  -q, --quiet             Prints only IDs, one per line. Takes precedence over --format.\n```\n\n----------------------------------------\n\nTITLE: Viewing Help for hydra serve admin in Bash\nDESCRIPTION: Shows the available help options for the 'hydra serve admin' command. The -h or --help flag displays detailed information about the command usage and options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-admin.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for admin\n```\n\n----------------------------------------\n\nTITLE: Installing Ory OAuth2 JavaScript SDK via npm\nDESCRIPTION: This snippet demonstrates the command to install the Ory JavaScript SDK package using npm. It shows how to add the '@ory/client' package as a dependency to your project to enable usage of the SDK.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/sdk/10_js.mdx#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install --save @ory/client\n```\n\n----------------------------------------\n\nTITLE: Base64 encoding of Jsonnet data mapping for CLI configuration\nDESCRIPTION: This shell command encodes the Jsonnet data mapping snippet into Base64 format for inclusion in the Ory CLI configuration file, enabling secure transfer and storage of claim mappings during Slack OAuth setup.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/45_slack.mdx#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Parsing command-line options for Hydra migration in Go\nDESCRIPTION: Defines command-line flags for the Hydra migration utility, including configuration file paths and help command. Specifies how configuration values are loaded and overridden, facilitating flexible deployment and configuration management.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n  -h, --help             help for migrate\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of hydra get jwks\nDESCRIPTION: Demonstrates the basic syntax for executing the `hydra get jwks` command, specifying the ID of the JSON Web Key Set to retrieve. Optional flags can be appended.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-get-jwks.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra get jwks set-1 [flags]\n```\n\n----------------------------------------\n\nTITLE: Visualizing OAuth2 Client Credentials Token Request Sequence with Mermaid\nDESCRIPTION: This snippet uses a Mermaid sequence diagram to visually represent the OAuth2 client credentials token request flow between the OAuth2 client and authorization server. It shows a POST request from the client to the server's /oauth2/token endpoint with the client_credentials grant type, and the server's response with an access token. This snippet requires Mermaid syntax support and is used for documentation or visualization purposes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oauth2-oidc/client-credentials.mdx#_snippet_0\n\nLANGUAGE: mermaid\nCODE:\n```\nsequenceDiagram\nparticipant OAuth2 Client\nparticipant OAuth2 Server\n    OAuth2 Client->>OAuth2 Server: POST /oauth2/token?grant=client_credentials&...\n    OAuth2 Server->>OAuth2 Client: Respond with token\n```\n\n----------------------------------------\n\nTITLE: Adding and Updating Ory Helm Chart Repository with Bash\nDESCRIPTION: This Bash snippet provides the shell commands to add the Ory Helm chart repository and update it to fetch the latest chart version. It requires Helm to be installed and network access to the chart repository. These commands must be run before generating Kubernetes job manifests for database migration operations.\nSOURCE: https://github.com/ory/docs/blob/master/docs/self-hosted/oel/oauth2/revert-database-migrations.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nhelm repo add ory https://k8s.ory.sh/helm/charts\nhelm repo update\n\n```\n\n----------------------------------------\n\nTITLE: Tunneling to App on Custom Port Bash\nDESCRIPTION: Explains how to configure the `ory tunnel` when your application is running on a non-standard HTTP or HTTPS port. The port number must be included as part of the `application-url` argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_10\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> https://example.org:1234\n```\n\n----------------------------------------\n\nTITLE: Configuring TOTP Account Name\nDESCRIPTION: This JSON snippet configures the TOTP (Google Authenticator) account name for the identity schema. The `account_name` property is set to `true` within the `totp` credentials in `ory.sh/kratos`.  This instructs the system to display this field's value as the account name within the authenticator app.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/15_customize-identity-schema.mdx#_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"ory.sh/kratos\": {\n    \"credentials\": {\n      \"totp\": {\n        \"account_name\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Inherited Options: Global Ory CLI Configuration (Bash)\nDESCRIPTION: Details options inherited from parent commands in the Ory CLI, applicable to `ory list organizations`. These are generally used for global settings like specifying the configuration file path or automatically confirming prompts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-organizations.md#_snippet_2\n\nLANGUAGE: Bash\nCODE:\n```\n-c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Base64 Encode Jsonnet Data Mapping (Shell)\nDESCRIPTION: This shell command pipes the content of a Jsonnet file (`your-data-mapping.jsonnet`) to the `base64` utility, producing a Base64 encoded string. This encoding is required if the Jsonnet mapping is to be embedded directly within the Ory Identity configuration file when using the CLI.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/65_netid.mdx#_snippet_2\n\nLANGUAGE: Shell\nCODE:\n```\ncat your-data-mapping.jsonnet | base64\n```\n\n----------------------------------------\n\nTITLE: Password hashing algorithms supported for credential import\nDESCRIPTION: Overview of the hashing methods supported for importing passwords, including BCrypt, Argon2, MD5, and SHA variants, with links to their formats and parameters. Explains how hashes are compared and migrated within Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/manage-identities/25_import-user-accounts-identities.mdx#_snippet_6\n\nLANGUAGE: tabs\nCODE:\n```\n<Tabs>\n<TabItem value=\"bcrypt\" label=\"BCrypt\">\n\nOry Identities can hash passwords by BCrypt and can compare stored BCrypt hash and migrate if configured hasher\n(`hashers.algorithm`) isn't BCrypt.\n\nBCrypt format is described [here](https://en.wikipedia.org/wiki/Bcrypt#Description).\n\n</TabItem>\n<TabItem value=\"argon2\" label=\"Argon2\">\n\nOry Identities can hash passwords by Argon2 and can compare stored Argon2 hash and migrate if configured hasher\n(`hashers.algorithm`) isn't Argon2.\n\n#### Format\n\n`$argon2id$v=<version>$m=<memory>,t=<iterations>,p=<parallelism>$<hash>`\n\n#### Parameters\n\n- `version`(`number`): The current version.\n- `memory`(`number`): Amount of memory to use.\n- `iterations`(`number`): Number of iterations to perform.\n- `parallelism`(`number`): Degree of parallelism.\n- `hash`(`string`): The computed derived key by the Argon2 algorithm encoded to Base64.\n\n#### Example\n\n```\n$argon2id$v=19$m=32,t=2,p=4$cm94YnRVOW5jZzFzcVE4bQ$MNzk5BtR2vUhrp6qQEjRNw\n```\n\n</TabItem>\n<TabItem value=\"md5\" label=\"MD5\">\n\nOry Identities doesn't hash passwords by MD5 but can compare stored MD5 hashes and migrate to configured hasher\n(`hashers.algorithm`). You can configure MD5 hashes to use a plain format (for hashes without salt) or a salted format (for hashes\nwith salt).\n\n#### Plain format (hashes without salt)\n\n```\n$md5$<hash>\n```\n\n#### Parameters\n\n- `hash`(`string`): The computed hash by the MD5 algorithm encoded to Base64.\n\n#### Example\n\n```\n$md5$CY9rzUYh03PK3k6DJie09g==\n```\n\n#### Salted format (hashes with salt)\n\nThis format allows administrators to import passwords that use salting to calculate the MD5 hash. Ory doesn't prepend or append\nthe salt to the user's password. To determine the way the system performs salting, use the `salting-format` parameter.\n\n```\n$md5$pf=<salting-format>$<salt>$<hash>\n```\n\n#### Parameters\n\n- `salting-format`(`string`): Format string specifies how salting should be done. Must be encoded to Base64.\n- `salt`(`string`): A sequence of bits, known as a cryptographic salt encoded to Base64.\n- `hash`(`string`): The computed hash by the MD5 algorithm encoded to Base64.\n\n#### Example\n\n```\n$md5$pf=e1NBTFR9e1BBU1NXT1JEfQ==$MTIz$q+RdKCgc+ipCAcm5ChQwlQ==\n```\n\n##### Salting format parameter\n\nBelow are formatting specifiers that can be used in the `salting-format`.\n\n- `{SALT}`: Salt value from the previous section.\n- `{PASSWORD}`: User's password in clear text.\n\n##### Example\n\nAssuming that User's password is `ory123` and salt is `c2FsdDEyMw==`(_in clear text: salt123_) and the clear text form of\n`salting-format` parameter as follows:\n\n```\n{SALT}--{PASSWORD}\n```\n\nIn that case result of the `salting` process would be:\n\n```\nsalt123--ory123\n```\n\n</TabItem>\n<TabItem value=\"sha\" label=\"SHA\">\n\nOry Identities doesn't hash passwords by SHA but can compare stored SHA hashes and migrate to configured hasher\n(`hashers.algorithm`). You can configure SHA hashes to use a plain format (for hashes without salt) or a salted format (for hashes\nwith salt).\n\n#### Salted format (hashes with salt)\n\nThis format allows administrators to import passwords that use salting to calculate the SHA hash. Ory doesn't prepend or append\nthe salt to the user's password. To determine the way the system performs salting, use the `salting-format` parameter.\n\n```\n$sha1$pf=<salting-format>$<salt>$<hash>\n$sha256$pf=<salting-format>$<salt>$<hash>\n$sha512$pf=<salting-format>$<salt>$<hash>\n```\n\n#### Parameters\n\n- `salting-format`(`string`): Format string specifies how salting should be done. Must be encoded to Base64.\n- `salt`(`string`): A sequence of bits, known as a cryptographic salt encoded to Base64.\n- `hash`(`string`): The computed hash by the SHA algorithm encoded to Base64.\n\n#### Example\n\n```\n$sha1$pf=e1NBTFR9e1BBU1NXT1JEfQ==$MTIz$q+RdKCgc+ipCAcm5ChQwlQ==\n```\n\n##### Salting format parameter\n\nBelow are formatting specifiers that can be used in the `salting-format`.\n\n- `{SALT}`: Salt value from the previous section.\n- `{PASSWORD}`: User's password in clear text.\n\n</TabItem>\n</Tabs>\n```\n\n----------------------------------------\n\nTITLE: Configuring Edge Sessions in YAML Configuration\nDESCRIPTION: This YAML snippet shows how to enable Edge Sessions and set a custom cache expiration time in the Ory Identities configuration file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/cache.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nfeature_flags:\n  cacheable_sessions: true\n  cacheable_sessions_max_age: \"1m\"\n```\n\n----------------------------------------\n\nTITLE: Customizing Session Cookie Name in Ory Kratos (YAML)\nDESCRIPTION: This YAML configuration snippet changes the default name of the Ory Kratos session cookie using the 'name' key under 'session.cookie'. This allows specifying a custom name (e.g., 'your_cookie_name') for the session cookie.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/configuring-cookies.mdx#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nsession:\n  cookie:\n    name: your_cookie_name\n```\n\n----------------------------------------\n\nTITLE: Tunneling with Tunnel URL and Cookie Domain Bash\nDESCRIPTION: Demonstrates setting a custom `tunnel-url` (the domain where the tunnel itself will run) and specifying the `--cookie-domain` when running the tunnel behind a gateway during development. The tunnel URL is provided as the optional second argument.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-tunnel.md#_snippet_8\n\nLANGUAGE: Bash\nCODE:\n```\nory tunnel --project <project-id-or-slug> \\\n\thttps://www.example.org \\\n\thttps://auth.example.org \\\n\t--cookie-domain example.org\n```\n\n----------------------------------------\n\nTITLE: kratos remote version - Help Option\nDESCRIPTION: This snippet details the help option (`-h` or `--help`) available for the `kratos remote version` command. When used, it provides information about the command. It is used for displaying help for the 'version' sub-command of the 'kratos remote' command. The output is usually presented in a console-friendly format.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-version.md#_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n  -h, --help   help for version\n```\n\n----------------------------------------\n\nTITLE: Cloning the Sample React Native Application Repository\nDESCRIPTION: Commands for cloning the Ory sample app repository using SSH and HTTPS protocols, essential for obtaining the codebase to run and customize the app locally.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/35_react-native.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n# Clone using SSH\ngit clone git@github.com:ory/kratos-selfservice-ui-react-native.git\n\n# Clone using HTTPS\ngit clone https://github.com/ory/kratos-selfservice-ui-react-native.git\n```\n\n----------------------------------------\n\nTITLE: Configuring Registration UI URL in YAML\nDESCRIPTION: This YAML snippet defines the `ui_url` setting for the registration flow within the `kratos/config.yml` file. The `ui_url` specifies the endpoint where the registration UI is hosted.  It's a crucial part of setting up self-service user registration. The example sets the URL to `http://my-app.com/registration`.  Ensure that the specified URL is reachable and properly configured to handle registration requests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/registration.mdx#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n```yaml title=\"path/to/kratos/config.yml\"\nselfservice:\n  flows:\n    registration:\n      ui_url: http://my-app.com/registration\n```\n```\n\n----------------------------------------\n\nTITLE: Modifying Code for Production with Custom Domain\nDESCRIPTION: Code diff showing how to update your Next.js application to use a custom domain in production, removing the integrations package dependency.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/15_nextjs.mdx#_snippet_9\n\nLANGUAGE: diff\nCODE:\n```\n- import { edgeConfig } from \"@ory/integrations/next\"\n- const ory = new FrontendApi(new Configuration(edgeConfig))\n+ const basePath = process.env.NEXT_PUBLIC_ORY_SDK_URL;\n\n+ const ory = new FrontendApi(\n+   new Configuration({\n+     basePath: basePath,\n+     baseOptions: {\n+       withCredentials: true,\n+     },\n+   })\n+ );\n\n...\n\n- return router.push(edgeConfig.basePath + \"/ui/login\")\n+ return router.push(basePath + \"/ui/login\");\n\n...\n```\n\n----------------------------------------\n\nTITLE: Rendering Welcome Sections with React Components in MDX (JavaScript)\nDESCRIPTION: This MDX code snippet imports a React component and several content modules representing various welcome page sections for the Ory documentation site. It then renders multiple <WelcomePageSection> components by spreading the imported content props, thus dynamically generating the welcome content for different topics like identity management and backend frameworks. The snippet requires an MDX environment with React support and assumes these components and content are correctly exported from specified paths.\nSOURCE: https://github.com/ory/docs/blob/master/docs/welcome.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport WelcomePageSection from \"@site/src/components/Welcome/welcome\";\nimport * as welcomeContent from \"@site/src/pages/_assets/welcome-content\";\n\n<WelcomePageSection {...welcomeContent.identityManagement} />\n<WelcomePageSection {...welcomeContent.authorizationSecurity} />\n<WelcomePageSection {...welcomeContent.permissionManagement} />\n<WelcomePageSection {...welcomeContent.deploymentOptions} />\n<WelcomePageSection {...welcomeContent.frontendFrameworks} />\n<WelcomePageSection {...welcomeContent.backendFrameworks} />\n```\n\n----------------------------------------\n\nTITLE: Executing Ory Open Account-Experience Settings\nDESCRIPTION: This command opens the settings page for the Ory Account Experience. It supports various flags for configuration, project selection, and output control.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-settings.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory open account-experience settings [flags]\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variable for Error UI URL\nDESCRIPTION: This snippet explains how to configure the error UI URL via an environment variable, providing an alternative to YAML configuration. The environment variable `SELFSERVICE_FLOWS_ERROR_UI_URL` should be set to specify the custom error page URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/fallback/error.mdx#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nexport SELFSERVICE_FLOWS_ERROR_UI_URL=\"http://my-app.com/error\"\n```\n\n----------------------------------------\n\nTITLE: Creating a Sample Identity JSON File (Shell)\nDESCRIPTION: This shell command uses the `cat` utility and a heredoc structure (`<<EOF...EOF`) to create a sample JSON file named `file.json`. The file contains the minimum required structure for a single Ory Kratos identity, including a `schema_id` and the user's `traits` (e.g., email). This file can then be used as input for the import command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import-identities.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncat > ./file.json <<EOF\n{\n    \"schema_id\": \"default\",\n    \"traits\": {\n        \"email\": \"foo@example.com\"\n    }\n}\nEOF\n```\n\n----------------------------------------\n\nTITLE: CLI Command Options for Ory Kratos Import Resources\nDESCRIPTION: Defines command-line options for the 'kratos import' command, including endpoint URL, output format, help, and quiet mode. These options allow users to customize the import operation's behavior and output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import.md#_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for import\n  -q, --quiet             Be quiet with output printing.\n```\n```\n\n----------------------------------------\n\nTITLE: Creating an Ory Project using Shell\nDESCRIPTION: Creates a new Ory Network project named \"Documentation example\" using the `ory create project` command in the shell. This command requires the Ory CLI to be installed and is often the first step in setting up Ory.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/local-development.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory create project --name \"Documentation example\"\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Synopsis for Ory OAuth2 Config Patching CLI - Bash\nDESCRIPTION: This snippet provides the basic command structure for executing the 'ory patch oauth2-config' operation. The command allows patching only specified values in an OAuth2 & OpenID Connect configuration by applying JSON-Patch documents. It highlights that to replace the entire config, a different 'update' command should be used. This minimal usage pattern serves as a reference placeholder within CLI help documentation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-oauth2-config.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nory patch oauth2-config [flags]\n```\n\n----------------------------------------\n\nTITLE: Updating Migration Test Data Example (SQL)\nDESCRIPTION: Provides an example SQL `INSERT` statement demonstrating how to update the test data file (`_testdata.sql`) to reflect schema changes introduced in a migration, such as adding a new column.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_24\n\nLANGUAGE: sql\nCODE:\n```\nINSERT INTO bar (old_column, new_column) VALUES ('foo', 'bar');\n```\n\n----------------------------------------\n\nTITLE: Enabling GitLab User Auto-Creation with OmniAuth (Ruby)\nDESCRIPTION: This Ruby snippet within `gitlab.rb` configures GitLab's OmniAuth settings to allow automatic user creation upon successful first login via the specified single sign-on provider ('Ory_Hydra'). Setting `omniauth_block_auto_created_users` to `false` enables this feature.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/gitlab.mdx#_snippet_9\n\nLANGUAGE: ruby\nCODE:\n```\ngitlab_rails['omniauth_block_auto_created_users'] = false\ngitlab_rails['omniauth_allow_single_sign_on'] = ['Ory_Hydra']\n```\n\n----------------------------------------\n\nTITLE: Fetching Ory Workspace and Project Configurations - Shell\nDESCRIPTION: This sequence of shell commands uses the 'ory' CLI to list workspaces and projects, fetch the current identity configuration, and output it as a YAML file. Assumes 'ory' CLI is installed and authenticated, and requires valid workspace and project IDs as parameters. Outputs the identity configuration in YAML format to a specified file. Does not handle error cases (e.g., invalid IDs or authentication).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/83_linkedin.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config-$project-id.yaml\n\n```\n\n----------------------------------------\n\nTITLE: hydra perform authorization-code Example\nDESCRIPTION: This command shows a basic usage example of the `hydra perform authorization-code` command, demonstrating how to specify the client ID and client secret.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-perform-authorization-code.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nhydra perform authorization-code --client-id ... --client-secret ...\n```\n\n----------------------------------------\n\nTITLE: Displaying Version Information with Oathkeeper CLI - Shell\nDESCRIPTION: This snippet demonstrates how to invoke the 'oathkeeper version' command to display the binary's version, build timestamp, and git hash. It requires the Oathkeeper CLI tool installed and optionally accepts flags for help and configuration files. The command outputs version details and accepts parameters such as '--help' for usage information and '--config' to load configuration from specified files. No input is needed except the flags, and output is printed to stdout; this is best suited for manual version checks or script automation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/cli/oathkeeper-version.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\noathkeeper version [flags]\n```\n\n----------------------------------------\n\nTITLE: Disabling Hydra Maester Controller\nDESCRIPTION: Shell command to install Ory Hydra without the Hydra Maester controller.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\nhelm install \\\n    --set 'maester.enabled=false' \\\n    ory/hydra\n```\n\n----------------------------------------\n\nTITLE: Formatting JSONNet Files Using Kratos Formatter CLI (bash)\nDESCRIPTION: This snippet demonstrates how to invoke the Kratos JSONNet formatter from the command line to format one or more JSONNet files. It supports specifying file paths with glob patterns for flexible file selection. The -w or --write flag instructs the tool to overwrite files with formatted output instead of printing to stdout. The snippet requires a properly installed Kratos CLI tool and assumes familiarity with shell globbing syntax. Input is JSONNet source files, output is either formatted source written back to files or printed output. No complex parameters are involved beyond specifying files and optional write flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-jsonnet-format.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkratos jsonnet format path/to/files/*.jsonnet [more/files.jsonnet, [supports/**/{foo,bar}.jsonnet]] [flags]\n```\n\n----------------------------------------\n\nTITLE: Defining Passkey Display Name in Identity Schema\nDESCRIPTION: This JSON schema snippet defines the display name for the passkey within the identity schema.  It uses the `ory.sh/kratos` extension to configure the `passkey.display_name` property. This allows you to specify which field in your schema will be used as the passkey's display name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/passwordless/05_passkeys.mdx#_snippet_3\n\nLANGUAGE: json5\nCODE:\n```\n{\n  $schema: \"http://json-schema.org/draft-07/schema#\",\n  type: \"object\",\n  properties: {\n    traits: {\n      type: \"object\",\n      properties: {\n        email: {\n          type: \"string\",\n          format: \"email\",\n          title: \"Your E-Mail\",\n          minLength: 3,\n          \"ory.sh/kratos\": {\n            credentials: {\n              // ...\n              passkey: {\n                display_name: true,\n              },\n            },\n            // ...\n          },\n        },\n        // ...\n      },\n      // ...\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Minikube IP Address\nDESCRIPTION: Alternative shell command to get the Minikube IP address.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/kubernetes-helm-chart.mdx#_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nminikube ip192.168.64.3\n\n```\n\n----------------------------------------\n\nTITLE: Updating Ory Identity Configuration - Ory CLI - Shell\nDESCRIPTION: This command updates the Ory Identities project's configuration using the CLI and a prepared YAML file. It requires valid project and workspace IDs (<project-id>, <workspace-id>) and a configuration file path (e.g., updated_config.yaml). This step applies local configuration changes to the remote Ory project. The user must have sufficient permissions to perform configuration updates.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/self-service/flows/verify-email-account-activation.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nory update identity-config --project <project-id> --workspace <workspace-id> --file updated_config.yaml\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Date Format in JSON\nDESCRIPTION: This snippet shows an example of the date format used by Ory APIs. It uses the rfc3339 standard. The example shows a JSON object with a `created_at` field holding a date and time value.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/api-design.md#_snippet_0\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"created_at\": \"2006-01-02T15:04:05+07:00\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Content-Type Header Matching in YAML\nDESCRIPTION: Sets conditions to match specific 'Content-Type' headers in HTTP requests, typically used in POST, PUT, PATCH requests with deterministic MIME types like 'application/json' or 'multipart/form-data'. Leaving the list empty matches all Content-Type headers.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/error.md#_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\nconfig:\n  when:\n    - request:\n        header:\n          content_type:\n            - multipart/form-data\n            - application/x-www-form-urlencoded\n            - application/json\n```\n\n----------------------------------------\n\nTITLE: Updating Test Fixtures using Go Test (Shell)\nDESCRIPTION: Changes the directory to `persistence/sql/migratest` and executes `go test` with `sqlite` and `refresh` build tags and the `-short` flag. This specific command is used to update the test fixtures, which might be necessary after schema or test data changes. May need to be run multiple times.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_26\n\nLANGUAGE: shell\nCODE:\n```\ncd persistence/sql/migratest\ngo test -tags sqlite,refresh -short .\n```\n\n----------------------------------------\n\nTITLE: Retrieving Ory Identities Configuration using Ory CLI (Shell)\nDESCRIPTION: Shows how to use the Ory CLI to list available workspaces and projects to find necessary IDs, and then download the identity configuration for a specific project into a local YAML file named 'identity-config.yaml'. Requires the Ory CLI to be installed and authenticated.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/session-management/10_session-lifespan.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n## List all available workspaces\nory list workspaces\n\n## List all available projects\nory list projects --workspace <workspace-id>\n\n## Get config\nory get identity-config --project <project-id> --workspace <workspace-id> --format yaml > identity-config.yaml\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Cache Age Using JavaScript\nDESCRIPTION: This snippet shows how to set a custom maximum age for cached responses by specifying a Cache-Control header with a specific max-age value using the Ory JavaScript client.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/cache.mdx#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nory.toSession(undefined, undefined, {\n  headers: {\n    \"Cache-Control\": \"max-age=10\",\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables\nDESCRIPTION: Configuration for the .env file containing the Ory base URL, which is typically the Ory Tunnel URL (e.g., http://localhost:3005).\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_5\n\nLANGUAGE: text\nCODE:\n```\n# Content from .env referenced but not directly shown in the provided text\n```\n\n----------------------------------------\n\nTITLE: Basic OAuth2 Client Import Command\nDESCRIPTION: The basic syntax for the OAuth2 client import command. This command reads one or more JSON files containing OAuth 2.0 client configurations and imports them.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-oauth2-client.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory import oauth2-client <file-1.json> [<file-2.json> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Usage: Create OAuth2 Client with Hydra CLI\nDESCRIPTION: This snippet shows the basic command syntax for creating an OAuth 2.0 client using the ORY Hydra command-line interface. It indicates that the command takes optional flags to configure client properties.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-create-oauth2-client.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra create oauth2-client [flags]\n```\n\n----------------------------------------\n\nTITLE: Running Ory Tunnel for Development (Shell)\nDESCRIPTION: Demonstrates starting the Ory Tunnel CLI tool. This command creates a secure tunnel from the Ory Network to the local application (`http://localhost:3000`), linking it to a specific Ory project (`--project playground`) for development testing, enabling Ory's redirects to function correctly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/40_dotnet.mdx#_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nory tunnel --project playground --dev http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Building Flutter Web App for Production\nDESCRIPTION: Command to build a production-ready version of the Flutter web application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\nflutter build web\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for ORY CLI Commands (Shell)\nDESCRIPTION: Details the options inherited from parent ORY CLI commands applicable to `ory list workspaces`. These include specifying a configuration file (`-c`, `--config`), setting the output format (`--format`), suppressing output (`-q`, `--quiet`), and automatically confirming prompts (`-y`, `--yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-workspaces.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Using hydra delete access-tokens Command\nDESCRIPTION: Command syntax for deleting all OAuth2 access tokens for a specific client. This command requires the client ID as a parameter and will remove all associated access tokens from the system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-access-tokens.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra delete access-tokens <client-id> [flags]\n```\n\n----------------------------------------\n\nTITLE: Available Options for keto status\nDESCRIPTION: Lists the specific command-line options available for the `keto status` command. These options allow customization of the target endpoint (read/write), blocking behavior, gRPC authority header, security settings (disabling transport security or hostname verification), output verbosity, and endpoint remote addresses.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-status.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --authority string                      Set the authority header for the remote gRPC server.\n      --block                                 Block until the connection is up.\n      --endpoint string                       which endpoint to use; one of {read, write} (default \"read\")\n  -h, --help                                  help for status\n      --insecure-disable-transport-security   Disables transport security. Do not use this in production.\n      --insecure-skip-hostname-verification   Disables hostname verification. Do not use this in production.\n  -q, --quiet                                 Be quiet with output printing.\n      --read-remote string                    Remote address of the read API endpoint. (default \"127.0.0.1:4466\")\n      --write-remote string                   Remote address of the write API endpoint. (default \"127.0.0.1:4467\")\n```\n\n----------------------------------------\n\nTITLE: Mailgun SMTP Connection URI\nDESCRIPTION: Provides a connection URI example for sending emails through Mailgun's SMTP service. It shows the format and necessary components of the URI, including placeholders for user credentials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/emails-sms/01_sending-emails-smtp.mdx#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nsmtp://{smtp-user}:{smtp-password}@smtp.mailgun.org:587\n\n# For example:\n# smtp://some-user%40mailgun.example.org:df2a2c4e-5caa-4f04-85b9-72d54a2468ad@smtp.eu.mailgun.org:587\n```\n\n----------------------------------------\n\nTITLE: Cleaning Up Demo\nDESCRIPTION: These commands are to remove the running container and the custom Docker image, for cleanup after the demonstration. It removes the container using its name and then removes the image by name.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\ndocker rm -f ory-oathkeeper-demo\ndocker rmi -f ory-oathkeeper-demo\nrm -rf oathkeeper-demo\n```\n\n----------------------------------------\n\nTITLE: Kratos Cleanup Command Options\nDESCRIPTION: Displays the available command-line options for the `kratos cleanup` command. The `-c` or `--config` flag allows specifying configuration files, while `-h` or `--help` displays help information for the command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-cleanup.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n  -h, --help             help for cleanup\n```\n\n----------------------------------------\n\nTITLE: Installing the Ory Hydra Go SDK\nDESCRIPTION: Installs the Ory Hydra Go SDK package using the `go get` command. The example dynamically fetches the latest release tag for Ory Hydra.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/05_go.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/hydra-client-go@${useLatestRelease('hydra')}\n```\n\n----------------------------------------\n\nTITLE: Using hydra delete oauth2-client command with client IDs\nDESCRIPTION: Basic syntax for the 'hydra delete oauth2-client' command that accepts one or more client IDs as arguments. This command will delete the specified OAuth 2.0 clients from the system.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-oauth2-client.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nhydra delete oauth2-client <id-1> [<id-2> ...] [flags]\n```\n\n----------------------------------------\n\nTITLE: Enable Systemd Service\nDESCRIPTION: This command enables the `uinode.service` to start automatically during system boot. This ensures that the Kratos UI is always running.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_34\n\nLANGUAGE: bash\nCODE:\n```\nsystemctl enable uinode\n```\n\n----------------------------------------\n\nTITLE: Validation Error: No Security Key or Account not Found in Ory (JSON)\nDESCRIPTION: Displayed when an account does not exist or lacks any registered security keys, blocking WebAuthn operations. Static content, id is 4000015.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_38\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000015,\n  \"text\": \"This account does not exist or has no security key set up.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Ory CLI Tunnel (Shell)\nDESCRIPTION: Sets up an Ory tunnel from 'localhost:3005' to the local Flutter web application running on 'localhost:4005'. This is essential for redirecting authentication flows through Ory's services to your local application. Requires the Ory CLI.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/flutter_web_redirect/README.mdx#_snippet_2\n\nLANGUAGE: shell-session\nCODE:\n```\nory tunnel --port 3005 http://localhost:4005\n```\n\n----------------------------------------\n\nTITLE: Available Options for `ory revoke token` Command (Text)\nDESCRIPTION: Lists the command-specific options for `ory revoke token`. Options allow specifying OAuth 2.0 client credentials (`--client-id`, `--client-secret`), setting the target API endpoint (`-e`, `--endpoint`), controlling output format (`--format`), selecting the Ory project/workspace (`--project`, `--workspace`), enabling quiet mode (`-q`), and displaying help (`-h`). Environment variables can often be used as alternatives.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-revoke-token.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n      --client-id string       Use the provided OAuth 2.0 Client ID, defaults to environment variable OAUTH2_CLIENT_ID\n      --client-secret string   Use the provided OAuth 2.0 Client Secret, defaults to environment variable OAUTH2_CLIENT_SECRET\n  -e, --endpoint string        The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string          Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                   help for token\n      --project string         The project to use, either project ID or a (partial) slug.\n  -q, --quiet                  Be quiet with output printing.\n      --workspace string       The workspace to use, either workspace ID or a (partial) name.\n```\n\n----------------------------------------\n\nTITLE: Defining Enums in Go with Swagger\nDESCRIPTION: This example shows how to define enums in Go using `go-swagger`.  The enum type must have the same name as the swagger enum annotation.  The enum values have to be defined in one `const` block following the type definition. Integer enums are explicitly shown, but are noted to not be supported generally when using a custom `MarshalJSON` implementation.  String enums are supported.  The example demonstrates how to define both string and integer enums.\nSOURCE: https://github.com/ory/docs/blob/master/docs/open-source/guidelines/rest-api-guidelines.md#_snippet_11\n\nLANGUAGE: go\nCODE:\n```\n// swagger:enum Level\ntype Level string\n\nconst (\n\tLEVEL_1 Level = \"ONE\"\n\tLEVEL_2 Level = \"TWO\"\n\tLEVEL_3 Level = \"THREE\"\n)\n\n// swagger:enum LevelInt\ntype LevelInt int\n\nconst (\n\tLEVEL_INT_1 LevelInt = 1\n\tLEVEL_INT_2 LevelInt = 2\n\tLEVEL_INT_3 LevelInt = 3\n)\n\n// swagger:model\ntype Model struct {\n\tlevel    Level\n\tlevelInt LevelInt\n}\n```\n\n----------------------------------------\n\nTITLE: Pulling the Ory Hydra Production Image\nDESCRIPTION: Downloads the latest production image of Ory Hydra. Requires Docker and Docker Compose. Useful after building the image locally to revert to the production version.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/quickstart.mdx#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\ndocker compose -f quickstart.yml pull hydra --policy always\n```\n\n----------------------------------------\n\nTITLE: Ory CLI - Perform Command Options\nDESCRIPTION: This snippet lists the available options for the `ory perform` command in the Ory CLI. It includes options for specifying the configuration file path, displaying help information, suppressing output, and automatically confirming dialogs.  These options control the behavior and configuration of the `ory perform` command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -h, --help            help for perform\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Installing PostgreSQL\nDESCRIPTION: This set of commands installs PostgreSQL and its contrib packages on an Ubuntu system. It then switches to the 'postgres' user, which is necessary for creating databases and managing the PostgreSQL server. Dependencies: Ubuntu, apt package manager.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nsudo apt install postgresql postgresql-contrib\nsudo -i -u postgres\n```\n\n----------------------------------------\n\nTITLE: Rendering Fizz Migrations to SQL using Ory CLI (Shell)\nDESCRIPTION: Uses the Ory development CLI (`ory dev pop migration render`) to convert the Fizz migration files located in the source directory into standard SQL files in the target directory. Requires Docker to be running.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_20\n\nLANGUAGE: shell\nCODE:\n```\n.bin/ory dev pop migration render persistence/sql/migrations/templates persistence/sql/migrations/sql\n```\n\n----------------------------------------\n\nTITLE: Legacy Policy Example - JSON\nDESCRIPTION: This JSON snippet represents a legacy Ory Keto policy in the 0.5 format.  It defines permissions for subjects (users) on specific resources and actions, indicating the effect (allow in this case). It is used to illustrate how to rewrite from legacy to new policy.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/migrating-legacy-policies.mdx#_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"subjects\": [\"alice\", \"bob\"],\n  \"resources\": [\"blog_posts:my-first-blog-post\", \"blog_posts:2\", \"blog_posts:3\"],\n  \"actions\": [\"delete\", \"create\", \"read\", \"modify\"],\n  \"effect\": \"allow\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Table Name Methods in gobuffalo/pop - Go\nDESCRIPTION: This example highlights the correct way to define a TableName method for gobuffalo/pop models to ensure correct table mapping, particularly for slices. The method uses a value receiver rather than a pointer and returns the explicit table name. Place this method in model structs requiring custom SQL table names. Proper receiver signature is crucial for ORM behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_17\n\nLANGUAGE: go\nCODE:\n```\nfunc (m Model) TableName(ctx context.Context) string {\n   return \"foo\"\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using the ory update opl Command\nDESCRIPTION: The basic syntax for the Ory update opl command which allows updating the Ory Permission Language file in Ory Network. Legacy namespace definitions will be overwritten.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-opl.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory update opl [flags]\n```\n\n----------------------------------------\n\nTITLE: Start Sample Application on Port 3000\nDESCRIPTION: This bash command starts the sample application using `npm start`. The application listens on port 3000, providing the custom login and consent screens.  It is essential to keep the application running during the OAuth2 flow.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/custom-ui-oauth2.mdx#_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Reloading Nginx and Ory Kratos Services\nDESCRIPTION: This snippet shows commands to reload Nginx configuration and restart Ory Kratos after making configuration changes. This ensures the updates take effect immediately without requiring full system reboots.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_39\n\nLANGUAGE: Bash\nCODE:\n```\nservice nginx reload\nservice kratos restart\n```\n\n----------------------------------------\n\nTITLE: Related Ory CLI commands for resource management\nDESCRIPTION: Lists commands related to creating specific Ory Network resources such as event streams, JSON Web Keys, OAuth clients, organizations, projects, relationships, and workspaces. These links aid users in managing various resource types efficiently.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-create.md#_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n* [ory](ory) - The Ory CLI\n* [ory create event-stream](ory-create-event-stream) - Create a new event stream\n* [ory create jwk](ory-create-jwk) - Create a JSON Web Key Set with a JSON Web Key\n* [ory create oauth2-client](ory-create-oauth2-client) - Create an OAuth 2.0 Client\n* [ory create organization](ory-create-organization) - Create a new Ory Network organization\n* [ory create project](ory-create-project) - Create a new Ory Network project\n* [ory create relationships](ory-create-relationships) - Create relationships from JSON files\n* [ory create workspace](ory-create-workspace) - Create a new Ory Network workspace\n```\n\n----------------------------------------\n\nTITLE: Help Option for Ory CLI Command\nDESCRIPTION: Includes the '-h' or '--help' flag to display help information for the 'event-stream' command, assisting users in understanding command usage and available options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n-h, --help             help for event-stream\n```\n\n----------------------------------------\n\nTITLE: Confirming Installed Node.js Version Using Bash Shell\nDESCRIPTION: Verifies the successful installation of Node.js by printing its version. Expected output confirms the Node.js 16.x series is installed, ensuring compatibility for later tasks.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnode -v\nv16.14.2\n```\n\n----------------------------------------\n\nTITLE: Initiating ORY Keto Legacy Namespace Migration (shell)\nDESCRIPTION: This snippet shows the basic command syntax for initiating the migration of legacy ORY Keto namespaces from v0.6.x to v0.7.x+. You can specify an optional namespace name to migrate only that namespace, or omit it to migrate all legacy namespaces. Various flags can be appended to control the migration process and specify remote API endpoints.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-migrate-legacy.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nketo namespace migrate legacy [<namespace-name>] [flags]\n```\n\n----------------------------------------\n\nTITLE: Defining a Public OpenAPI Route Annotation (Go)\nDESCRIPTION: Shows the `swagger:route` annotation for a public API endpoint. Similar to the admin route, it defines the method (POST), path (`/something-public`), version tag (`v0alpha1`), and operation ID (`somethingPublic`). Public endpoints do not require a specific prefix in the tag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_29\n\nLANGUAGE: go\nCODE:\n```\n// swagger:route POST /something-public v0alpha1 somethingPublic\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of keto status Command\nDESCRIPTION: Shows the basic syntax for executing the `keto status` command. This command retrieves a status report about the upstream Keto instance specified by the configuration or default settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-status.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nketo status [flags]\n```\n\n----------------------------------------\n\nTITLE: Syntax for ory introspect token CLI command (CLI)\nDESCRIPTION: Displays the standard command-line syntax for introspecting an Ory OAuth2 token. It requires the token value as the first argument and accepts various flags for customization.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-introspect-token.md#_snippet_0\n\nLANGUAGE: cli\nCODE:\n```\nory introspect token the-token [flags]\n```\n\n----------------------------------------\n\nTITLE: Run PHP server\nDESCRIPTION: Starts a PHP development server on localhost port 3000.  This command is used for local development and testing.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/05_php.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nphp -S 127.0.0.1:3000\n```\n\n----------------------------------------\n\nTITLE: Configuring Noop Mutator with YAML\nDESCRIPTION: This YAML snippet configures the `noop` mutator globally within the `oathkeeper.yml` file. It enables or disables the mutator, and by default, it's disabled unless set to `true`. The `noop` mutator simply passes the incoming request headers without any modification. This is useful when the backend service does not need transformed credentials.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/pipeline/mutator.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Global configuration file oathkeeper.yml\nmutators:\n  noop:\n    # Set enabled to true if the authenticator should be enabled and false to disable the authenticator. Defaults to false.\n    enabled: true\n```\n\n----------------------------------------\n\nTITLE: Listing ORY Hydra Version Options CLI\nDESCRIPTION: This snippet describes the command-line options available for the `hydra version` command. It details the `-h` or `--help` flag, which displays help information specific to the version command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-version.md#_snippet_1\n\nLANGUAGE: cli\nCODE:\n```\n  -h, --help   help for version\n```\n\n----------------------------------------\n\nTITLE: Delete Access Tokens Example - Ory CLI\nDESCRIPTION: This snippet demonstrates a simple example of how to use the `ory delete access-tokens` command. It shows the basic syntax for deleting access tokens using the client ID as input. No additional flags are included, assuming the default settings are used for output format and endpoint.  This command must be run with proper authorization to interact with Ory Kratos. \nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-delete-access-tokens.md#_snippet_1\n\nLANGUAGE: CLI\nCODE:\n```\nory delete access-tokens <client-id>\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Password Not Allowed Reason in Ory (JSON)\nDESCRIPTION: Displays an error when a password cannot be used due to a specific reason, provided by the context object. Dynamic substitution of {reason} supports detailed feedback; message id is 4000005.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_28\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000005,\n  \"text\": \"The password can not be used because {reason}.\",\n  \"type\": \"error\",\n  \"context\": {\n    \"reason\": \"{reason}\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Command Usage for Listing Ory Network Projects\nDESCRIPTION: The basic syntax for using the 'ory list projects' command to list all projects in your Ory Network account.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-projects.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nory list projects [flags]\n```\n\n----------------------------------------\n\nTITLE: Invoking the ory version Command (Shell)\nDESCRIPTION: This snippet shows the basic command-line syntax for executing the `ory version` command within the Ory CLI. It indicates that the command can optionally accept flags.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-version.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory version [flags]\n```\n\n----------------------------------------\n\nTITLE: Viewing Hydra Container Logs (Bash)\nDESCRIPTION: Displays the logs output by the running Ory Hydra container named 'ory-hydra-example--hydra'. This is useful for checking the container's status, identifying potential issues, and observing startup messages like key generation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/configure-deploy.mdx#_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\ndocker logs ory-hydra-example--hydra\n```\n\n----------------------------------------\n\nTITLE: Installing Ory Client Go SDK for REST API\nDESCRIPTION: Command to install the Ory client Go SDK for REST API integration with Ory Permissions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/sdk/05_go.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngo get github.com/ory/client-go@${useLatestTag('client-go', 'master')}\n```\n\n----------------------------------------\n\nTITLE: List Ory Kratos Serve Options Shell\nDESCRIPTION: Provides a detailed list of command-line options supported by the `kratos serve` command. It covers options for specifying configuration files, enabling development mode, accessing help, opting out of telemetry, and running the courier service in the background.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-serve.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n-c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n      --dev              Disables critical security features to make development easier\n  -h, --help             help for serve\n      --sqa-opt-out      Disable anonymized telemetry reports - for more information please visit https://www.ory.sh/docs/ecosystem/sqa\n      --watch-courier    Run the message courier as a background task, to simplify single-instance setup\n```\n\n----------------------------------------\n\nTITLE: Options for 'kratos identities patch' Command - bash\nDESCRIPTION: This snippet lists the command-specific options available for the 'kratos identities patch' command. It currently supports a help flag (-h, --help) to display usage information. These options are minimal since the patch functionality is not yet implemented.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-patch.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for patch\n```\n\n----------------------------------------\n\nTITLE: kratos delete Command Options\nDESCRIPTION: Lists the command-line options available for the `kratos delete` command. These options allow specifying the Kratos Admin API endpoint, setting the output format, displaying help information, and suppressing output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-delete.md#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help              help for delete\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Listing Hydra Revoke Token Command Flags - Shell\nDESCRIPTION: This snippet documents the available command-line flags for the hydra revoke token command. It details parameters such as --client-id, --client-secret, and -h/--help, which control command configuration and access credentials. Inputs are specified as flags; there is no direct output other than help or error messages. It is useful as reference for command invocation and automation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-revoke-token.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n      --client-id string       Use the provided OAuth 2.0 Client ID, defaults to environment variable OAUTH2_CLIENT_ID\n      --client-secret string   Use the provided OAuth 2.0 Client Secret, defaults to environment variable OAUTH2_CLIENT_SECRET\n  -h, --help                   help for token\n```\n\n----------------------------------------\n\nTITLE: Inherited options for ory open account-experience registration\nDESCRIPTION: Details the options that the `ory open account-experience registration` command inherits from its parent commands. These include specifying a configuration file (`-c, --config`), selecting a project (`--project`), suppressing output (`-q, --quiet`), and automatically confirming prompts (`-y, --yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-open-account-experience-registration.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config string    Path to the Ory Network configuration file.\n      --project string   The project to use, either project ID or a (partial) slug.\n  -q, --quiet            Be quiet with output printing.\n  -y, --yes              Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Invalid Credentials Message in Ory (JSON)\nDESCRIPTION: Static error message shown when authentication fails due to incorrect credentials. Used generically for password, username, email, or phone input; id is 4000006.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_29\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000006,\n  \"text\": \"The provided credentials are invalid, check for spelling mistakes in your password or username, email address, or phone number.\",\n  \"type\": \"error\"\n}\n```\n\n----------------------------------------\n\nTITLE: Ory CLI Update Command Options\nDESCRIPTION: This snippet lists the available options for the `ory update` command. These options allow users to configure the update process, such as specifying the configuration file path, enabling quiet output, and confirming dialogs automatically. The `-c, --config` option specifies the path to the Ory Network configuration file. The `-h, --help` option displays help information. The `-q, --quiet` option suppresses output printing, and the `-y, --yes` option confirms all dialogs with yes.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update.md#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -h, --help            help for update\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Creating Relationships via CLI - Bash\nDESCRIPTION: This Bash snippet demonstrates the usage of the Ory Keto CLI to create relationship tuples.  It parses policies files (alice_policies or bob_policies) from JSON format to create relation tuples using the `keto relation-tuple create` command.  Error handling is included using `>/dev/null` to suppress output and `&&` and `||` to display a success or failure message.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/guides/migrating-legacy-policies.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nketo relation-tuple parse alice_policies --format json | \\\n  keto relation-tuple create - >/dev/null \\\n  && echo \"Successfully created tuple\" \\\n  || echo \"Encountered error\"\n```\n\n----------------------------------------\n\nTITLE: Synopsis of hydra list clients command (Shell)\nDESCRIPTION: Provides the fundamental structure for executing the `hydra list clients` command in the shell. It indicates that the command itself is followed by optional flags to modify its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-list-clients.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nhydra list clients [flags]\n```\n\n----------------------------------------\n\nTITLE: Options inherited from parent commands\nDESCRIPTION: Global options that apply to all hydra commands, including endpoint configuration, output formatting, HTTP headers, verbosity control, and TLS verification settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-delete-oauth2-client.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Importing Mermaid Component in MDX\nDESCRIPTION: This MDX code snippet imports the Mermaid component from a local theme directory, enabling rendering of diagrams within MDX documentation pages. It requires React and MDX setup to function properly.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/concepts/20_graph-of-relations.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Mermaid from \"@site/src/theme/Mermaid\"\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for `kratos identities validate` (Shell)\nDESCRIPTION: Lists command-line options inherited from parent commands that are applicable to `kratos identities validate`. These include setting the Kratos Admin API endpoint (`-e`, `--endpoint`, or KRATOS_ADMIN_URL env var), specifying the output format (`-f`, `--format`), and suppressing output messages (`-q`, `--quiet`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-identities-validate.md#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n  -e, --endpoint string   The URL of Ory Kratos' Admin API. Alternatively set using the KRATOS_ADMIN_URL environmental variable.\n  -f, --format string     Set the output format. One of table, json, and json-pretty. (default \"default\")\n  -q, --quiet             Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Ory Auth Command Options\nDESCRIPTION: Describes the available options for the `ory auth` command. These options control various aspects of the authentication process, such as configuration file path, output format, and confirmation behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-auth.md#_snippet_1\n\nLANGUAGE: Text\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for auth\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Inherited Command Options for hydra serve in Bash\nDESCRIPTION: Options inherited from parent commands that can be used with 'hydra serve admin'. Includes configuration path options, development mode, and telemetry opt-out options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-serve-admin.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n      --dev              Disables critical security checks to improve local development experience. Do not use in production.\n      --sqa-opt-out      Disable anonymized telemetry reports - for more information please visit https://www.ory.sh/docs/ecosystem/sqa\n```\n\n----------------------------------------\n\nTITLE: Inherited Options for Ory CLI Commands\nDESCRIPTION: Details the command-line flags inherited from parent Ory CLI commands, applicable to `ory list relation-tuples`. These include specifying a configuration file path (`--config`), setting the output format (`--format` supporting default, json, yaml, json-pretty), suppressing output (`--quiet`), and automatically confirming prompts (`--yes`).\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-list-relation-tuples.md#_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, and json-pretty. (default \"default\")\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Creating Directory and Navigation\nDESCRIPTION: This command creates a directory named `oathkeeper-demo` and then navigates into it using the `cd` command. This sets up the environment for the subsequent configuration steps.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/configure-deploy.mdx#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nmkdir oathkeeper-demo\ncd oathkeeper-demo\n```\n\n----------------------------------------\n\nTITLE: Displaying OIDC redirect_uri_mismatch Error Message - Text\nDESCRIPTION: This snippet demonstrates the exact error message returned by the OpenID Provider when a redirect_uri mismatch occurs during social sign-in. No dependencies are required; this is an illustrative example of potential runtime output when misconfiguration is present. The error highlights that the provided redirect_uri does not match the one registered with the application.\nSOURCE: https://github.com/ory/docs/blob/master/docs/troubleshooting/01_oidc-redirect-url-cname.mdx#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nUnable to complete OpenID Connect flow because the OpenID Provider returned error \"redirect_uri_mismatch\": The redirect_uri MUST match the registered callback URL for this application.\n```\n\n----------------------------------------\n\nTITLE: Inherited Options from Parent Commands\nDESCRIPTION: Options inherited from parent commands that can be used with 'keto migrate up', specifically for loading configuration files with custom paths.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-migrate-up.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Config files to load, overwriting in the order specified. (default [/home/runner/keto.yml])\n```\n\n----------------------------------------\n\nTITLE: Installing Nginx and Certbot (Bash)\nDESCRIPTION: This command installs Nginx web server, Certbot for SSL certificate management, and the Certbot Nginx plugin.  Dependencies include apt package manager.  The output confirms the successful installation of these components. There are no parameters to directly configure.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_21\n\nLANGUAGE: bash\nCODE:\n```\napt install nginx certbot python3-certbot-nginx\n```\n\n----------------------------------------\n\nTITLE: Oathkeeper Configuration File Import\nDESCRIPTION: This code snippet imports the `oathkeeper.yml` configuration file.  It uses a raw-loader to fetch the content of this file which is essential for configuring Oathkeeper and defining proxy rules, authenticators, and other settings to manage access to resources.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport oathkeeper from '!!raw-loader!../../../code-examples/oathkeeper/oathkeeper/oathkeeper.yml'\n```\n\n----------------------------------------\n\nTITLE: Help flag options for 'kratos remote status'\nDESCRIPTION: Provides information about the available command-line flags to display help information for the 'status' command, including help for individual options.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-remote-status.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for status\n```\n\n----------------------------------------\n\nTITLE: `kratos format jsonnet` Command Options\nDESCRIPTION: Lists the available command-line options for the `kratos format jsonnet` command. The `-h` or `--help` flag displays help information, and the `-w` or `--write` flag modifies the command's behavior to write the formatted output directly back to the source files instead of printing to standard output.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-format-jsonnet.md#_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help    help for jsonnet\n  -w, --write   Write formatted output back to file.\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Lists options that are inherited from parent commands, specifically the configuration file path option.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-opl.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n```\n\n----------------------------------------\n\nTITLE: Available Options for the Ory Validate Identity Command\nDESCRIPTION: Lists the specific options available for the 'ory validate identity' command, which currently only includes the help flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-validate-identity.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n  -h, --help   help for identity\n```\n\n----------------------------------------\n\nTITLE: Migrating Token Requests from Query to Body Parameters in Shell\nDESCRIPTION: Demonstrates the change required for token requests when migrating from MITREid to Ory Hydra. MITREid accepts parameters in the query string, while Ory requires them in the request body. The example shows moving the `grant_type` parameter from the URL query string to the request body using `curl` with the `--data-urlencode` flag.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/migrating-from-mitreid.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -X POST  http://127.0.0.1/mitreid-server/token?grant_type=client_credentials \\\n  -H \"Authorization: $AUTH\"\n  # ...\n```\n\nLANGUAGE: Shell\nCODE:\n```\ncurl -X POST  https://<project>.projects.oryapis.com/mitreid-server/token \\\n  -H \"Authorization: $AUTH\" \\\n  --data-urlencode 'grant_type=client_credentials'\n  # ...\n```\n\n----------------------------------------\n\nTITLE: Exporting Environment Variables for Ory API - Bash\nDESCRIPTION: Sets up shell environment variables for PROJECT_ID and WORKSPACE_API_KEY, which are used in Ory API requests for authentication and scoping resource access. This is a prerequisite step for running subsequent curl commands. The values must be replaced with valid project and workspace credentials before scripting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nexport PROJECT_ID=\"...\"\nexport WORKSPACE_API_KEY=\"ory_wak_...\"\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Options that are inherited from parent commands when using the ory patch project command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-patch-project.md#_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n```\n\n----------------------------------------\n\nTITLE: Importing MDX Component (MDX)\nDESCRIPTION: Imports and renders an MDX component named 'SdkEnvVar'. This is used within the documentation source itself, likely to display dynamic content related to SDK environment variables or configuration details.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/flutter_web_redirect/README.mdx#_snippet_1\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport SdkEnvVar from '@site/src/components/SdkEnvVar'\n\n<SdkEnvVar />\n```\n\n----------------------------------------\n\nTITLE: Enable Refresh Token Hook (Legacy) - Ory CLI\nDESCRIPTION: This snippet demonstrates how to enable the deprecated refresh token hook using the Ory CLI. It configures the URL for the refresh token hook.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/guides/oauth2-webhooks.mdx#_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nory patch oauth2-config {project.id} \\\n  --add '/oauth2/refresh_token_hook/url=\"https://my-example.app/token-refresh-hook\"' \\\n  --format yaml\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering ConfigEditor Component in MDX\nDESCRIPTION: This snippet demonstrates how to import the ConfigEditor React component and render it in an MDX file. The component is configured to load the Hydra configuration schema from a GitHub raw URL.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/reference/configuration-editor.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport ConfigEditor from '@site/src/components/ConfigEditor';\n\n<ConfigEditor url=\"https://raw.githubusercontent.com/ory/hydra/master/.schema/config.schema.json\" />\n```\n\n----------------------------------------\n\nTITLE: WebSocket Service - Go Code Import\nDESCRIPTION: This code snippet imports the Go code for the WebSocket service from `main.go`.  It uses a raw-loader to fetch the content, which establishes the WebSocket server logic, likely employing the Gin web framework for routing and handling WebSocket connections. The service probably echos back accepted messages.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport app from '!!raw-loader!../../../code-examples/oathkeeper/ws/main.go'\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Client Listing Benchmark in Ory Hydra\nDESCRIPTION: Performance benchmark for the listing OAuth 2.0 clients endpoint. This operation shows high throughput with over 15,000 requests per second and low latency averages, making it one of the most performant operations in the Ory Hydra API.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/benchmark.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nSummary:\n  Total:\t0.6655 secs\n  Slowest:\t0.0337 secs\n  Fastest:\t0.0001 secs\n  Average:\t0.0062 secs\n  Requests/sec:\t15025.1907\n\n  Total data:\t4880000 bytes\n  Size/request:\t488 bytes\n\nResponse time histogram:\n  0.000 [1]\t|\n  0.003 [4995]\t|\n  0.007 [960]\t|\n  0.010 [1250]\t|\n  0.014 [843]\t|\n  0.017 [988]\t|\n  0.020 [619]\t|\n  0.024 [243]\t|\n  0.027 [80]\t|\n  0.030 [18]\t|\n  0.034 [3]\t|\n\n\nLatency distribution:\n  10% in 0.0002 secs\n  25% in 0.0002 secs\n  50% in 0.0035 secs\n  75% in 0.0115 secs\n  90% in 0.0167 secs\n  95% in 0.0190 secs\n  99% in 0.0236 secs\n\nDetails (average, fastest, slowest):\n  DNS+dialup:\t0.0000 secs, 0.0001 secs, 0.0337 secs\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0064 secs\n  req write:\t0.0000 secs, 0.0000 secs, 0.0057 secs\n  resp wait:\t0.0061 secs, 0.0001 secs, 0.0306 secs\n  resp read:\t0.0001 secs, 0.0000 secs, 0.0038 secs\n\nStatus code distribution:\n  [200]\t10000 responses\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering Secure Component in MDX\nDESCRIPTION: This snippet imports a 'Secure' component from a common MDX file and renders it within the current document. It facilitates including security-related content or features into the documentation. Dependencies include the '../../_common/secure.mdx' file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/install.mdx#_snippet_0\n\nLANGUAGE: MDX\nCODE:\n```\nimport Secure from '../../_common/secure.mdx'\n\n<Secure />\n```\n\n----------------------------------------\n\nTITLE: Configuring Ory Auth Logout (Inherited Options)\nDESCRIPTION: Lists command-line options inherited from parent Ory CLI commands that apply to `ory auth logout`. Use `--quiet` or `-q` to suppress output, or `--yes` or `-y` to automatically confirm prompts.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-auth-logout.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -q, --quiet   Be quiet with output printing.\n  -y, --yes     Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Running HSM-Enabled Tests for Ory Hydra Using Makefile Target\nDESCRIPTION: This shell command invokes a Makefile target named 'quicktest-hsm' to execute automated tests with HSM functionality enabled in Ory Hydra. It ensures that HSM-dependent features and integrations are validated in a controlled environment.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/hsm-support.md#_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nmake quicktest-hsm\n```\n\n----------------------------------------\n\nTITLE: Displaying ORY Hydra Version CLI\nDESCRIPTION: This snippet shows the basic command-line syntax to display the version, build time, and git hash of the ORY Hydra binary. It includes an optional `[flags]` argument for specifying options like help.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-version.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nhydra version [flags]\n```\n\n----------------------------------------\n\nTITLE: Options Inherited from Parent Commands\nDESCRIPTION: Additional options inherited from parent commands that can be used with the migrate status command, specifically for configuration file specification.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-migrate-status.md#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config strings   Path to one or more .json, .yaml, .yml, .toml config files. Values are loaded in the order provided, meaning that the last config file overwrites values from the previous config file.\n```\n\n----------------------------------------\n\nTITLE: Changing Ownership of Ory Kratos Directory Using Bash Shell\nDESCRIPTION: Assigns ownership of the installation folder '/opt/kratos' recursively to the 'kratos' system user, allowing it to manage files and run as that user securely.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/guides/deploy-kratos-example.mdx#_snippet_13\n\nLANGUAGE: bash\nCODE:\n```\nchown -R kratos /opt/kratos/\n```\n\n----------------------------------------\n\nTITLE: Running Migration Tests with SQLite Tag (Shell)\nDESCRIPTION: Changes the current directory to `persistence/sql/migratest` and runs the Go tests within that package using the `sqlite` build tag to specifically target SQLite tests.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_25\n\nLANGUAGE: shell\nCODE:\n```\ncd persistence/sql/migratest\ngo test -tags sqlite ./...\n```\n\n----------------------------------------\n\nTITLE: Displaying Resend Code Button in Ory Interface (JSON)\nDESCRIPTION: Label for a 'Resend code' action, displayed on verification or recovery forms when the user can request a new code. No parameters needed; id is 1070008.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070008,\n  \"text\": \"Resend code\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Initialize Go Modules\nDESCRIPTION: This shell command initializes a Go module.  The `go mod init ws` command creates a `go.mod` file, initializing the project as a Go module named 'ws'. The `go mod tidy` command then updates `go.mod` and `go.sum` to include all necessary dependencies for the project.\nSOURCE: https://github.com/ory/docs/blob/master/docs/oathkeeper/guides/websockets.mdx#_snippet_9\n\nLANGUAGE: Shell\nCODE:\n```\ncd ws\ngo mod init ws\ngo mod tidy\n```\n\n----------------------------------------\n\nTITLE: Verifying Node.js Version\nDESCRIPTION: This command checks the installed version of Node.js. It prints the version number to the console, allowing verification of a successful installation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnode -v\nv16.14.2\n```\n\n----------------------------------------\n\nTITLE: Formatting Shell Command Examples in Markdown\nDESCRIPTION: Illustrates formatting single-line shell commands in Markdown. It mandates using the `shell` language identifier and explicitly forbids prefixing commands with `$`, showing an example `ory` CLI command.\nSOURCE: https://github.com/ory/docs/blob/master/README.md#_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n```shell\nory get identities\n```\n```\n\n----------------------------------------\n\nTITLE: Native App Authentication Flow Diagram\nDESCRIPTION: A Mermaid sequence diagram illustrating the step-by-step interaction between the user, native app, browser, Ory Network, and the Identity Provider during the native app social sign-in process.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/social-signin/96_native-apps.mdx#_snippet_1\n\nLANGUAGE: mermaid\nCODE:\n```\nsequenceDiagram\n  actor U as user\n  participant A as Native App\n  participant B as Browser\n  participant O as Ory Network\n  participant I as Identity Provider\n  autonumber\n  U->>+A: Open login screen\n  A->>+O: create API flow with return_session_token_exchange_code=true\n  O->>A: flow.session_token_exchange_code: ...\n  U->>A: choose SSO provider\n  A->>O: submit form with provider=...\n  O->>A: Status 422 with err.response.data.redirect_browser_to=[IdP auth URL]\n  A->>+B: go to [IdP auth URL]\n  B->>+I: open [IdP auth URL]\n  U->>I: login, consent\n  I->>-B: redirect to [IdP callback URL]\n  B->>O: open [IdP callback URL]\n  O->>B: 302 Found\n  B->>A: redirect with App link to [return to]/?code=...\n  deactivate B\n  A->>O: exchange code for session token\n  O->>-A: session token\n```\n\n----------------------------------------\n\nTITLE: Importing and Using the Install MDX Component with Props\nDESCRIPTION: This snippet illustrates importing the 'Install' component and rendering it with specific properties such as 'repo' and 'name'. It enables users to include installation instructions or prompts for the 'keto' repository and 'Ory Keto' product.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/install.mdx#_snippet_1\n\nLANGUAGE: MDX\nCODE:\n```\nimport Install from '../_common/install.mdx'\n\n<Install repo=\"keto\" name=\"Ory Keto\" />\n```\n\n----------------------------------------\n\nTITLE: OAuth 2.0 Token Introspection Benchmark in Ory Hydra\nDESCRIPTION: Performance benchmark results for the OAuth 2.0 token introspection endpoint in Ory Hydra. The benchmark shows metrics including total execution time, request speed, latency distribution, and status code distribution for 10,000 requests with 100 concurrent connections.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/benchmark.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nSummary:\n  Total:\t1.9573 secs\n  Slowest:\t0.1461 secs\n  Fastest:\t0.0002 secs\n  Average:\t0.0186 secs\n  Requests/sec:\t5108.9654\n\n  Total data:\t1550000 bytes\n  Size/request:\t155 bytes\n\nResponse time histogram:\n  0.000 [1]\t|\n  0.015 [5258]\t|\n  0.029 [2339]\t|\n  0.044 [1325]\t|\n  0.059 [651]\t|\n  0.073 [261]\t|\n  0.088 [117]\t|\n  0.102 [33]\t|\n  0.117 [11]\t|\n  0.131 [2]\t|\n  0.146 [2]\t|\n\n\nLatency distribution:\n  10% in 0.0006 secs\n  25% in 0.0015 secs\n  50% in 0.0133 secs\n  75% in 0.0284 secs\n  90% in 0.0454 secs\n  95% in 0.0563 secs\n  99% in 0.0799 secs\n\nDetails (average, fastest, slowest):\n  DNS+dialup:\t0.0000 secs, 0.0002 secs, 0.1461 secs\n  DNS-lookup:\t0.0000 secs, 0.0000 secs, 0.0049 secs\n  req write:\t0.0000 secs, 0.0000 secs, 0.0052 secs\n  resp wait:\t0.0185 secs, 0.0002 secs, 0.1460 secs\n  resp read:\t0.0000 secs, 0.0000 secs, 0.0048 secs\n\nStatus code distribution:\n  [200]\t10000 responses\n```\n\n----------------------------------------\n\nTITLE: Project Specification Option for Ory CLI Command\nDESCRIPTION: Provides the '--project' flag to specify the project by ID or slug within which the event stream will be updated, enabling proper scoping of the operation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-update-event-stream.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n--project string   The project to use, either project ID or a (partial) slug.\n```\n\n----------------------------------------\n\nTITLE: Using the ory parse command with options in Bash\nDESCRIPTION: This snippet shows the available command-line options for the 'ory parse' command. Options include specifying a configuration file path, setting output format, displaying help, suppressing output, and automatically confirming dialogs.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-parse.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n      --format string   Set the output format. One of default, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for parse\n  -q, --quiet           Be quiet with output printing.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Prompting User to Complete CAPTCHA Challenge in Ory (JSON)\nDESCRIPTION: Informs the user to complete a CAPTCHA challenge, shown as part of anti-abuse or anti-bot flows. No parameters or requirements; message id is 1070015.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 1070015,\n  \"text\": \"Please complete the captcha challenge to continue.\",\n  \"type\": \"info\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Directories for Hydra Installation\nDESCRIPTION: This command creates two directories under `/opt/hydra`: `bin` to store the executable files and `config` to store the configuration files for Ory Hydra. This provides a structured location for installation and configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nmkdir /opt/hydra/{bin,config}\n```\n\n----------------------------------------\n\nTITLE: Next.js Font Optimization with next/font\nDESCRIPTION: Mentions the use of next/font for automatic optimization and loading of the Inter Google Font. Key to enhancing performance by minimizing font loading times and streamlining font usage within the project.\nSOURCE: https://github.com/ory/docs/blob/master/code-examples/protect-page-login/nextjs/README.md#_snippet_2\n\n\n\n----------------------------------------\n\nTITLE: Creating Directory Structure for Authentication Service\nDESCRIPTION: Shell commands to create the necessary directory structure and file for the authentication service implementation.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/20_flutter-web-redirect.mdx#_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\nmkdir lib/services && touch lib/services/auth.dart\n```\n\n----------------------------------------\n\nTITLE: Available Options for keto relation-tuple delete Command\nDESCRIPTION: List of command-line flags and options available for the 'keto relation-tuple delete' command, including remote connection settings, transport security options, and output formatting controls.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-delete.md#_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n      --authority string                      Set the authority header for the remote gRPC server.\n      --block                                 Block until the connection is up.\n      --format string                         Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help                                  help for delete\n      --insecure-disable-transport-security   Disables transport security. Do not use this in production.\n      --insecure-skip-hostname-verification   Disables hostname verification. Do not use this in production.\n  -q, --quiet                                 Be quiet with output printing.\n      --read-remote string                    Remote address of the read API endpoint. (default \"127.0.0.1:4466\")\n      --write-remote string                   Remote address of the write API endpoint. (default \"127.0.0.1:4467\")\n```\n\n----------------------------------------\n\nTITLE: Validation Error: Less Than Numeric Constraint in Ory (JSON)\nDESCRIPTION: Signals that a value should be less than the specified maximum but matches it exactly (must be < 5 but found 5). Parameters provided in context; message id is 4000021.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/concepts/ui-messages.md#_snippet_44\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"id\": 4000021,\n  \"text\": \"must be \\u003c 5 but found 5\",\n  \"type\": \"error\",\n  \"context\": {\n    \"actual\": 5,\n    \"maximum\": 5\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Viewing the Final Nginx Configuration (Bash)\nDESCRIPTION: This command displays the contents of the Nginx configuration file. It shows the fully configured virtual host after Certbot has run, including SSL settings. The output provides the location of the certificate. The `cat` command simply outputs the content of the specified file.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/self-hosted/deploy-hydra-example.mdx#_snippet_26\n\nLANGUAGE: bash\nCODE:\n```\ncat /etc/nginx/sites-enabled/oauth2.example.com\n```\n\n----------------------------------------\n\nTITLE: Listing ORY Keto Relation Tuple Parse Specific Options (Shell)\nDESCRIPTION: Details the options specific to the `keto relation-tuple parse` command. These include flags to specify the output format (--format), display help (-h), and suppress non-essential output (-q). These options allow customization of the command's output and interaction.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-relation-tuple-parse.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  --format string   Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -h, --help            help for parse\n  -q, --quiet           Be quiet with output printing.\n```\n\n----------------------------------------\n\nTITLE: Displaying Help for kratos jsonnet\nDESCRIPTION: This snippet shows the command-line option to display help information for the kratos jsonnet command. It provides a way to understand the available options and usage of the tool.  It does not take any parameters or input; it simply displays help text when invoked.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-jsonnet.md#_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n  -h, --help   help for jsonnet\n```\n\n----------------------------------------\n\nTITLE: Running Node.js Format Script\nDESCRIPTION: Executes the script named `format` defined in the project's `package.json` file using `npm run`. This is the standard way to trigger project-specific formatting tasks in Node.js projects, which might use tools like Prettier or ESLint. It's a required step before submitting a pull request for Node.js code.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\nnpm run format\n```\n\n----------------------------------------\n\nTITLE: Run Ory Kratos Server Shell\nDESCRIPTION: Shows the basic command structure for running the Ory Kratos server executable from the command line, indicating that various flags can be provided to configure its behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-serve.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nkratos serve [flags]\n```\n\n----------------------------------------\n\nTITLE: Pinning Indirect Go Module Dependencies - Go\nDESCRIPTION: Provides a Go source file template for forcing the inclusion of indirect dependencies (e.g., for security scanning or tooling). Uses build tags to isolate the file. Imports the targeted package as a blank identifier to prevent pruning by 'go mod tidy.' The 'go_mod_indirect_pins.go' file should not be used in production code. Replace 'github.com/my/dependency' with your desired package.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_16\n\nLANGUAGE: go\nCODE:\n```\n// +build go_mod_indirect_pins\n\npackage main\n\nimport _ \"github.com/my/dependency\"\n\n```\n\n----------------------------------------\n\nTITLE: Displaying React App Component with Login Logic (TSX)\nDESCRIPTION: Imports React's CodeBlock component and uses `raw-loader` to import the content of the main application file (`App.tsx`). It then renders this content within a CodeBlock, indicating that the displayed code (represented by the `{App}` variable) is TSX and contains the application's core logic, including session checking and user authentication.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport CodeBlock from '@theme/CodeBlock'\nimport App from '!!raw-loader!../../../code-examples/protect-page-login/react/src/App.tsx'\n\n<CodeBlock language=\"tsx\">{App}</CodeBlock>\n```\n\n----------------------------------------\n\nTITLE: Getting Help for `keto namespace validate`\nDESCRIPTION: Shows the option to display help information for the `keto namespace validate` command.\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/cli/keto-namespace-validate.md#_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n  -h, --help   help for validate\n```\n\n----------------------------------------\n\nTITLE: Running Tests and Formatting for Ory Documentation (Shell)\nDESCRIPTION: These commands are part of the code contribution checklist. Running `go test` ensures that all project tests pass, indicating the changes haven't introduced regressions. The `-tags sqlite ./...` part specifies testing with the sqlite tag across all packages. `make format` ensures code adheres to the project's formatting conventions before submission.\nSOURCE: https://github.com/ory/docs/blob/master/CONTRIBUTING.md#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ngo test -tags sqlite ./...\nmake format\n```\n\n----------------------------------------\n\nTITLE: Basic Syntax for `ory perform authorization-code`\nDESCRIPTION: Shows the basic command structure for initiating the OAuth 2.0 Authorization Code Flow test server using the Ory CLI. Flags need to be appended to configure the client and flow behavior.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform-authorization-code.md#_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nory perform authorization-code [flags]\n```\n\n----------------------------------------\n\nTITLE: Inherited Command Options for 'hydra import jwk'\nDESCRIPTION: Describes common CLI options inherited from parent commands, such as API endpoint, output format, HTTP headers, verbosity, and TLS verification settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/hydra/cli/hydra-import-jwk.md#_snippet_4\n\nLANGUAGE: Markdown\nCODE:\n```\n  -e, --endpoint string   The API URL this command should target. Alternatively set using the ORY_SDK_URL environmental variable.\n      --format string     Set the output format. One of table, json, yaml, json-pretty, jsonpath and jsonpointer. (default \"default\")\n  -H, --http-header :     A list of additional HTTP headers to set. HTTP headers is separated by a : , for example: `-H 'Authorization: bearer some-token'`.\n  -q, --quiet             Be quiet with output printing.\n      --skip-tls-verify   Do not verify TLS certificates. Useful when dealing with self-signed certificates. Do not use in production!\n```\n\n----------------------------------------\n\nTITLE: Changing the default listening port of Ory Proxy\nDESCRIPTION: Demonstrates how to specify a custom port for the proxy to listen on, overriding the default port 4000 using the '--port' flag for flexibility in network configuration.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_4\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory proxy --port 8080 --project <project-id-or-slug> http://localhost:3000\n```\n\n----------------------------------------\n\nTITLE: Inherited Options from Parent Commands\nDESCRIPTION: Lists options inherited from parent Ory CLI commands that can also be used with `ory perform authorization-code`, such as specifying a configuration file path or confirming prompts automatically.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-perform-authorization-code.md#_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Importing and Using Install Component with Props in MDX\nDESCRIPTION: This snippet imports the 'Install' component from a shared MDX file and renders it with specific properties to customize the installation instructions for the Ory Kratos repository. The 'repo' prop specifies the repository name ('kratos'), and the 'name' prop provides a display name ('Ory Kratos'). This snippet depends on the '../_common/install.mdx' file and is used for dynamically configuring the installation content.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/install.mdx#_snippet_1\n\nLANGUAGE: mdx\nCODE:\n```\nimport Install from '../_common/install.mdx'\n\n<Install repo=\"kratos\" name=\"Ory Kratos\" />\n```\n\n----------------------------------------\n\nTITLE: Extended Backus-Naur Form (EBNF) Notation\nDESCRIPTION: Defines the notation used throughout the specification to describe the language syntax using Extended Backus-Naur Form (EBNF).\nSOURCE: https://github.com/ory/docs/blob/master/docs/keto/reference/ory-permission-language.mdx#_snippet_0\n\nLANGUAGE: ebnf\nCODE:\n```\nProduction  = production_name \"=\" [ Expression ] \".\" .\nExpression  = Alternative { \"|\" Alternative } .\nAlternative = Term { Term } .\nTerm        = production_name | token [ \"\" token ] | Group | Option | Repetition .\nGroup       = \"(\" Expression \")\" .\nOption      = \"[\" Expression \"]\" .\nRepetition  = \"{\" Expression \"}\" .\n```\n\nLANGUAGE: ebnf\nCODE:\n```\n|   alternation\n()  grouping\n[]  option (0 or 1 times)\n{}  repetition (0 to n times)\n```\n\n----------------------------------------\n\nTITLE: Options inherited from parent commands\nDESCRIPTION: Additional options that are inherited from parent commands in the Ory CLI hierarchy. These apply to all subcommands including 'ory import jwk'.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-import-jwk.md#_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n  -c, --config string   Path to the Ory Network configuration file.\n  -y, --yes             Confirm all dialogs with yes.\n```\n\n----------------------------------------\n\nTITLE: Verifying Creation of Migration Test Data File (Shell)\nDESCRIPTION: Shows the expected output after running the migration sync command, listing the newly created SQL file containing test data schema changes, named with a timestamp.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_23\n\nLANGUAGE: shell\nCODE:\n```\nls -la  persistence/sql/migratest/testdata | tail -n 1\n-rw-r--r--   1 foobar  staff      0 Apr 28 17:28 20210428172500_testdata.sql\n```\n\n----------------------------------------\n\nTITLE: File Header and Auto-Generation Notice\nDESCRIPTION: Provides metadata about the file being auto-generated and advises on making changes in source commands. The header indicates that direct modifications should be avoided to prevent overwriting.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/cli/kratos-import.md#_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\n<!--\nThis file is auto-generated.\n\nTo improve this file please make your change against the appropriate \"./cmd/*.go\" file.\n-->\n```\n\n----------------------------------------\n\nTITLE: Embedding Organization Demonstration Video in MDX - JavaScript (MDX)\nDESCRIPTION: Imports a .webm video file as a module and embeds it into the MDX page using a custom VideoEmbed React component. This snippet is used to display visual demonstrations related to organizations in Ory Network documentation. No external dependencies are required beyond the mentioned local assets and the VideoEmbed component; the input is the path to the video file, and the output is a rendered video player.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/organizations/organizations.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport webm from './_static/organizations-ory-network.webm'\nimport VideoEmbed from '@site/src/components/VideoEmbed'\n\n<VideoEmbed webm={webm} />\n```\n\n----------------------------------------\n\nTITLE: Adding Homebrew Tap Configuration for Ory Projects - YAML\nDESCRIPTION: Sets up Homebrew publishing metadata for goreleaser to distribute via a Homebrew tap. Requires a dedicated Homebrew repository under the 'ory' org. Includes project homepage and author details. The placeholder '<<REPLACE-WITH-ARCHIVE-ID>>' must be replaced with actual archive IDs before use.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\nbrews:\n  - github:\n      owner: ory\n      name: homebrew-$PROJECT_NAME\n    ids:\n      - <<REPLACE-WITH-ARCHIVE-ID>>\n    homepage: https://www.ory.sh\n    commit_author:\n      name: aeneasr\n      email: aeneas@ory.sh\n\n```\n\n----------------------------------------\n\nTITLE: Importing MDX Components for UI Elements\nDESCRIPTION: Imports necessary React components (`Tabs`, `TabItem`, `BrowserWindow`) from the documentation theme and site source directories. These components are used to render interactive UI elements like tabs and simulated browser windows within the MDX document.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/mfa/15_totp.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport Tabs from '@theme/Tabs';\nimport TabItem from '@theme/TabItem';\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n```\n\n----------------------------------------\n\nTITLE: Rendering Kratos Configuration using ConfigMarkdown\nDESCRIPTION: This snippet renders the Kratos configuration documentation using the ConfigMarkdown component. It passes the URL of the JSON schema and the Kratos binary name as props. The ConfigMarkdown component fetches and renders the configuration schema.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/configuration.mdx#_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\n<ConfigMarkdown src=\"https://raw.githubusercontent.com/ory/kratos/master/.schemastore/config.schema.json\" binary=\"kratos\" />\n```\n\n----------------------------------------\n\nTITLE: Custom redirect URL after login or account creation\nDESCRIPTION: Sets a specific URL to which users are redirected after login or account creation, overriding default redirects for better navigation flow during development.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory proxy --project <project-id-or-slug> \\\n  --default-redirect-url /welcome \\\n  http://127.0.0.1:3000 \\\n  https://ory.example.org\n```\n\n----------------------------------------\n\nTITLE: Running Ory Proxy behind a gateway with publish URL\nDESCRIPTION: Configurations for running the proxy behind a gateway, requiring the 'publish-url' parameter to specify public access URL, suitable for development but with limitations on URL paths.\nSOURCE: https://github.com/ory/docs/blob/master/docs/cli/ory-proxy.md#_snippet_3\n\nLANGUAGE: Shell\nCODE:\n```\n$ ory proxy --project <project-id-or-slug> \\\n  http://localhost:3000 \\\n  https://gateway.local:5000\n```\n\n----------------------------------------\n\nTITLE: Embedding Workspace Settings Screenshot (MDX)\nDESCRIPTION: This MDX snippet uses the `BrowserWindow` component to display a screenshot of the Ory Console page for configuring workspace API keys. It includes a URL attribute and an image element showing the API Keys section within workspace settings.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/personal-access-token.mdx#_snippet_3\n\nLANGUAGE: mdx-code-block\nCODE:\n```\n<BrowserWindow url=\"https://console.ory.sh/workspaces/current/settings/api-keys\">\n\n![Configure workspace API keys in the Ory Console](./_static/api_keys/wak.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Importing ConfigMarkdown Component\nDESCRIPTION: This snippet imports the ConfigMarkdown component, which is used to render the configuration documentation. The component is expected to be defined in the '@site/src/components/ConfigMarkdown' module.\nSOURCE: https://github.com/ory/docs/blob/master/docs/kratos/reference/configuration.mdx#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport ConfigMarkdown from '@site/src/components/ConfigMarkdown';\n```\n\n----------------------------------------\n\nTITLE: Rendering Browser Window Component with Usage Billing Charts in MDX\nDESCRIPTION: MDX code block that displays a BrowserWindow component containing a chart visualization of usage costs over time from the Ory Console.\nSOURCE: https://github.com/ory/docs/blob/master/docs/console/usage-billing.mdx#_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n```mdx-code-block\n\n<BrowserWindow url=\"https://console.ory.sh/workspaces/<id>/settings/billing\">\n\n![Usage-based Invoices](./_static/usage-billing-chart.png)\n\n</BrowserWindow>\n```\n```\n\n----------------------------------------\n\nTITLE: Releasing Ory Software via Bash Script - Shell\nDESCRIPTION: This shell snippet provides a standardized approach for triggering a release in Ory projects using a remote release script. It requires setting the 'release_as' variable to an appropriate semver version, then executes the release via bash and a remotely-fetched script. Prerequisites are an internet connection and 'curl' installed. Input parameter defines version bumping (patch, minor, major, or explicit semver string). Output is an automated release process as per project conventions.\nSOURCE: https://github.com/ory/docs/blob/master/docs/ecosystem/contributing.md#_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nrelease_as=v1.2.3\nbash <(curl -s https://raw.githubusercontent.com/ory/meta/master/scripts/release.sh) $release_as\n\n```\n\n----------------------------------------\n\nTITLE: Importing React Components (MDX)\nDESCRIPTION: This snippet imports a React component named `BrowserWindow` from the site's theme directory. This component is used within the MDX content to wrap elements and render them as if they are displayed in a browser window, often used for embedding screenshots or external links.\nSOURCE: https://github.com/ory/docs/blob/master/docs/concepts/personal-access-token.mdx#_snippet_0\n\nLANGUAGE: mdx-code-block\nCODE:\n```\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n```\n\n----------------------------------------\n\nTITLE: Importing Teaser Components and Assets in MDX\nDESCRIPTION: Imports the Teaser component from a common directory and specifies MP4 and WebM video files as props for display within the MDX documentation page.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/integrate-auth/25_react.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Teaser from '../_common/teaser.mdx'\nimport mp4 from '../_static/react/screencast.mp4'\nimport webm from '../_static/react/screencast.webm'\n\n<Teaser\n  framework={<a href=\"https://reactjs.org/\">React</a>}\n  mp4={mp4}\n  webm={webm}\n/>\n```\n\n----------------------------------------\n\nTITLE: Embedding BrowserWindow component to display project settings URL\nDESCRIPTION: This snippet imports a custom BrowserWindow component and embeds it with a URL pointing to the project's settings page, enabling an inline display of the web page within the documentation. It also includes an image captioned 'Project settings tab' for visual reference.\nSOURCE: https://github.com/ory/docs/blob/master/docs/getting-started/_common/create-project.mdx#_snippet_0\n\nLANGUAGE: MDX\nCODE:\n```\nimport BrowserWindow from \"@site/src/theme/BrowserWindow\"\n\n<BrowserWindow url=\"https://console.ory.sh/projects/<id>/settings\">\n\n![Project settings tab](../_static/shared/project-settings-tab.png)\n\n</BrowserWindow>\n```\n\n----------------------------------------\n\nTITLE: Rendering Ory CLI Installation Tabs using MDX Components\nDESCRIPTION: This MDX snippet renders a tabbed interface for displaying Ory CLI installation instructions. It imports Docusaurus theme components (`Tabs`, `TabItem`) and custom components (`MacOS`, `Linux`, `Windows`) from the project structure. Each tab corresponds to an operating system and renders the respective component, passing 'repo' and 'name' props to potentially customize the displayed installation commands or information.\nSOURCE: https://github.com/ory/docs/blob/master/docs/_common/install-cli.mdx#_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\nimport Tabs from '@theme/Tabs'\nimport TabItem from '@theme/TabItem'\nimport MacOS from '@site/src/components/Install/MacOS'\nimport Linux from '@site/src/components/Install/Linux'\nimport Windows from '@site/src/components/Install/Windows'\n\n<Tabs\n  defaultValue=\"macos\"\n  values={[\n    { label: 'macOS', value: 'macos' },\n    { label: 'Linux', value: 'linux' },\n    { label: 'Windows', value: 'windows' },\n  ]}>\n  <TabItem value=\"linux\">\n    <Linux repo=\"ory\" name=\"the Ory CLI\" />\n  </TabItem>\n  <TabItem value=\"macos\">\n    <MacOS repo=\"cli\" name=\"the Ory CLI\" />\n  </TabItem>\n  <TabItem value=\"windows\">\n    <Windows repo=\"ory\" name=\"the Ory CLI\"  />\n  </TabItem>\n</Tabs>\n```"
  }
]
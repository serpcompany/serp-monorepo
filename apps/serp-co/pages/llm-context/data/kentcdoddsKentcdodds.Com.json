[
  {
    "owner": "kentcdodds",
    "repo": "kentcdodds.com",
    "content": "TITLE: Implementing Promise Patterns and Async/Await Functions in JavaScript with React Example\nDESCRIPTION: This code demonstrates various promise patterns including successful promises, failing promises, and recovered promises using both traditional .then() syntax and modern async/await syntax. It includes a helper function for creating configurable promises, utility functions for logging, and a React component example that uses async/await for data fetching with proper loading/error state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nfunction promises() {\n\tconst successfulPromise = timeout(100).then((result) => `success: ${result}`)\n\n\tconst failingPromise = timeout(200, true).then(null, (error) =>\n\t\tPromise.reject(`failure: ${error}`),\n\t)\n\n\tconst recoveredPromise = timeout(300, true).then(null, (error) =>\n\t\tPromise.resolve(`failed and recovered: ${error}`),\n\t)\n\n\tsuccessfulPromise.then(log, logError)\n\tfailingPromise.then(log, logError)\n\trecoveredPromise.then(log, logError)\n}\n\nfunction asyncAwaits() {\n\tasync function successfulAsyncAwait() {\n\t\tconst result = await timeout(100)\n\t\treturn `success: ${result}`\n\t}\n\n\tasync function failedAsyncAwait() {\n\t\tconst result = await timeout(200, true)\n\t\treturn `failed: ${result}` // this would not be executed\n\t}\n\n\tasync function recoveredAsyncAwait() {\n\t\ttry {\n\t\t\tconst result = await timeout(300, true)\n\t\t\treturn `failed: ${result}` // this would not be executed\n\t\t} catch (error) {\n\t\t\treturn `failed and recovered: ${error}`\n\t\t}\n\t}\n\n\tsuccessfulAsyncAwait().then(log, logError)\n\tfailedAsyncAwait().then(log, logError)\n\trecoveredAsyncAwait().then(log, logError)\n}\n\nfunction log(...args) {\n\tconsole.log(...args)\n}\n\nfunction logError(...args) {\n\tconsole.error(...args)\n}\n\n// This is the mothership of all things asynchronous\nfunction timeout(duration = 0, shouldReject = false) {\n\treturn new Promise((resolve, reject) => {\n\t\tsetTimeout(() => {\n\t\t\tif (shouldReject) {\n\t\t\t\treject(`rejected after ${duration}ms`)\n\t\t\t} else {\n\t\t\t\tresolve(`resolved after ${duration}ms`)\n\t\t\t}\n\t\t}, duration)\n\t})\n}\n\n// in React:\nfunction GetGreetingForSubject({ subject }) {\n\tconst [isLoading, setIsLoading] = React.useState(false)\n\tconst [error, setError] = React.useState(null)\n\tconst [greeting, setGreeting] = React.useState(null)\n\n\tReact.useEffect(() => {\n\t\tasync function fetchGreeting() {\n\t\t\ttry {\n\t\t\t\tconst response = await window.fetch('https://example.com/api/greeting')\n\t\t\t\tconst data = await response.json()\n\t\t\t\tsetGreeting(data.greeting)\n\t\t\t} catch (error) {\n\t\t\t\tsetError(error)\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false)\n\t\t\t}\n\t\t}\n\t\tsetIsLoading(true)\n\t\tfetchGreeting()\n\t}, [])\n\n\treturn isLoading ? (\n\t\t'loading...'\n\t) : error ? (\n\t\t'ERROR!'\n\t) : greeting ? (\n\t\t<div>\n\t\t\t{greeting} {subject}\n\t\t</div>\n\t) : null\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Context with TypeScript\nDESCRIPTION: This snippet demonstrates how to create a React Context with TypeScript, including a reducer, provider, and custom hook. It shows proper typing for the context, actions, and state, ensuring type safety throughout the implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\ntype Action = { type: 'increment' } | { type: 'decrement' }\ntype Dispatch = (action: Action) => void\ntype State = { count: number }\ntype CountProviderProps = { children: React.ReactNode }\n\nconst CountStateContext = React.createContext<\n\t{ state: State; dispatch: Dispatch } | undefined\n>(undefined)\n\nfunction countReducer(state: State, action: Action) {\n\tswitch (action.type) {\n\t\tcase 'increment': {\n\t\t\treturn { count: state.count + 1 }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction CountProvider({ children }: CountProviderProps) {\n\tconst [state, dispatch] = React.useReducer(countReducer, { count: 0 })\n\t// NOTE: you *might* need to memoize this value\n\t// Learn more in http://kcd.im/optimize-context\n\tconst value = { state, dispatch }\n\treturn (\n\t\t<CountStateContext.Provider value={value}>\n\t\t\t{children}\n\t\t</CountStateContext.Provider>\n\t)\n}\n\nfunction useCount() {\n\tconst context = React.useContext(CountStateContext)\n\tif (context === undefined) {\n\t\tthrow new Error('useCount must be used within a CountProvider')\n\t}\n\treturn context\n}\n\nexport { CountProvider, useCount }\n```\n\n----------------------------------------\n\nTITLE: Implementing Error Boundary Component Integration\nDESCRIPTION: This snippet demonstrates how to wrap components with the ErrorBoundary component from react-error-boundary. It provides a FallbackComponent prop that renders when an error is caught, creating a unified error handling approach for both runtime and async errors.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst ui = (\n\t<ErrorBoundary FallbackComponent={ErrorFallback}>\n\t\t<Greeting />\n\t</ErrorBoundary>\n)\n```\n\n----------------------------------------\n\nTITLE: Final Implementation of React Context\nDESCRIPTION: This snippet presents the final version of the React Context implementation. It includes the context creation, reducer, provider, and custom hook, demonstrating the complete pattern for effective context usage in React applications.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_12\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\n\nconst CountContext = React.createContext()\n\nfunction countReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'increment': {\n\t\t\treturn { count: state.count + 1 }\n\t\t}\n\t\tcase 'decrement': {\n\t\t\treturn { count: state.count - 1 }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction CountProvider({ children }) {\n\tconst [state, dispatch] = React.useReducer(countReducer, { count: 0 })\n\t// NOTE: you *might* need to memoize this value\n\t// Learn more in http://kcd.im/optimize-context\n\tconst value = { state, dispatch }\n\treturn <CountContext.Provider value={value}>{children}</CountContext.Provider>\n}\n\nfunction useCount() {\n\tconst context = React.useContext(CountContext)\n\tif (context === undefined) {\n\t\tthrow new Error('useCount must be used within a CountProvider')\n\t}\n\treturn context\n}\n\nexport { CountProvider, useCount }\n```\n\n----------------------------------------\n\nTITLE: Refactoring React Component to Use Hooks with Local Storage\nDESCRIPTION: Refactoring the Counter component to use React Hooks (useState and useEffect) while maintaining localStorage integration.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useState, useEffect } from 'react'\n\nfunction Counter() {\n\tconst [count, setCount] = useState(() =>\n\t\tNumber(window.localStorage.getItem('count') || 0),\n\t)\n\tconst incrementCount = () => setCount((c) => c + 1)\n\tuseEffect(() => {\n\t\twindow.localStorage.setItem('count', count)\n\t}, [count])\n\treturn <button onClick={incrementCount}>{count}</button>\n}\n\nexport default Counter\n```\n\n----------------------------------------\n\nTITLE: Implementing useUndo Custom Hook in React\nDESCRIPTION: Complete implementation of a useUndo custom hook that tracks state history with undo and redo functionality. The hook uses useReducer to manage past, present, and future states along with helper functions for state manipulation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-test-custom-react-hooks/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as React from 'react'\n\nconst UNDO = 'UNDO'\nconst REDO = 'REDO'\nconst SET = 'SET'\nconst RESET = 'RESET'\n\nfunction undoReducer(state, action) {\n\tconst { past, present, future } = state\n\tconst { type, newPresent } = action\n\n\tswitch (action.type) {\n\t\tcase UNDO: {\n\t\t\tif (past.length === 0) return state\n\n\t\t\tconst previous = past[past.length - 1]\n\t\t\tconst newPast = past.slice(0, past.length - 1)\n\n\t\t\treturn {\n\t\t\t\tpast: newPast,\n\t\t\t\tpresent: previous,\n\t\t\t\tfuture: [present, ...future],\n\t\t\t}\n\t\t}\n\n\t\tcase REDO: {\n\t\t\tif (future.length === 0) return state\n\n\t\t\tconst next = future[0]\n\t\t\tconst newFuture = future.slice(1)\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: next,\n\t\t\t\tfuture: newFuture,\n\t\t\t}\n\t\t}\n\n\t\tcase SET: {\n\t\t\tif (newPresent === present) return state\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: newPresent,\n\t\t\t\tfuture: [],\n\t\t\t}\n\t\t}\n\n\t\tcase RESET: {\n\t\t\treturn {\n\t\t\t\tpast: [],\n\t\t\t\tpresent: newPresent,\n\t\t\t\tfuture: [],\n\t\t\t}\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${type}`)\n\t\t}\n\t}\n}\n\nfunction useUndo(initialPresent) {\n\tconst [state, dispatch] = React.useReducer(undoReducer, {\n\t\tpast: [],\n\t\tpresent: initialPresent,\n\t\tfuture: [],\n\t})\n\n\tconst canUndo = state.past.length !== 0\n\tconst canRedo = state.future.length !== 0\n\tconst undo = React.useCallback(() => dispatch({ type: UNDO }), [])\n\tconst redo = React.useCallback(() => dispatch({ type: REDO }), [])\n\tconst set = React.useCallback(\n\t\t(newPresent) => dispatch({ type: SET, newPresent }),\n\t\t[],\n\t)\n\tconst reset = React.useCallback(\n\t\t(newPresent) => dispatch({ type: RESET, newPresent }),\n\t\t[],\n\t)\n\n\treturn { ...state, set, reset, undo, redo, canUndo, canRedo }\n}\n\nexport default useUndo\n```\n\n----------------------------------------\n\nTITLE: Implementing Counter with useReducer in React\nDESCRIPTION: Refactors the counter example to use useReducer instead of useState. Shows how to create a reducer, provider, and custom hook for more complex state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nfunction countReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'INCREMENT': {\n\t\t\treturn { count: state.count + 1 }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unsupported action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction CountProvider(props) {\n\tconst [state, dispatch] = React.useReducer(countReducer, { count: 0 })\n\tconst value = React.useMemo(() => [state, dispatch], [state])\n\treturn <CountContext.Provider value={value} {...props} />\n}\n\nfunction useCount() {\n\tconst context = React.useContext(CountContext)\n\tif (!context) {\n\t\tthrow new Error(`useCount must be used within a CountProvider`)\n\t}\n\tconst [state, dispatch] = context\n\n\tconst increment = () => dispatch({ type: 'INCREMENT' })\n\treturn {\n\t\tstate,\n\t\tdispatch,\n\t\tincrement,\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Tic-Tac-Toe with Derived State\nDESCRIPTION: This implementation uses the recommended approach: managing only the primary state (squares) with useState while calculating derived values (nextValue, winner, status) on each render, eliminating synchronization issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst nextValue = calculateNextValue(squares)\n\tconst winner = calculateWinner(squares)\n\tconst status = calculateStatus(winner, squares, nextValue)\n\n\tfunction selectSquare(square) {\n\t\tif (winner || squares[square]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square] = nextValue\n\t\tsetSquares(squaresCopy)\n\t}\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating React Hook Error When Calling Function Component Directly\nDESCRIPTION: This example shows how passing a function component directly to Array.map() causes the 'Rendered fewer hooks than expected' error because hooks in Counter are associated with the App component instead of individual Counter instances.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction App() {\n\tconst [items, setItems] = React.useState([])\n\tconst addItem = () => setItems((i) => [...i, { id: i.length }])\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={addItem}>Add Item</button>\n\t\t\t<div>{items.map(Counter)}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Tic-Tac-Toe with Multiple useState Variables\nDESCRIPTION: This implementation uses multiple useState hooks to track both the primary state (squares) and derived state (nextValue, winner, status). Each state update requires updating all four state variables to keep them in sync.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst [nextValue, setNextValue] = React.useState(calculateNextValue(squares))\n\tconst [winner, setWinner] = React.useState(calculateWinner(squares))\n\tconst [status, setStatus] = React.useState(calculateStatus(squares))\n\n\tfunction selectSquare(square) {\n\t\tif (winner || squares[square]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square] = nextValue\n\t\tconst newNextValue = calculateNextValue(squaresCopy)\n\t\tconst newWinner = calculateWinner(squaresCopy)\n\t\tconst newStatus = calculateStatus(newWinner, squaresCopy, newNextValue)\n\t\tsetSquares(squaresCopy)\n\t\tsetNextValue(newNextValue)\n\t\tsetWinner(newWinner)\n\t\tsetStatus(newStatus)\n\t}\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with React Testing Library\nDESCRIPTION: An example of testing a React component using React Testing Library, which focuses on user interactions and avoids implementation details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\ntest('counter increments the count', () => {\n\trender(<Counter />)\n\tconst button = screen.getByRole('button')\n\texpect(button).toHaveTextContent('0')\n\tuserEvent.click(button)\n\texpect(button).toHaveTextContent('1')\n})\n```\n\n----------------------------------------\n\nTITLE: Demonstrating useEffect and useLayoutEffect Timing in React\nDESCRIPTION: Shows how useLayoutEffect runs before useEffect, which can impact ref value accessibility. This example illustrates a case where useLayoutEffect should be preferred over useEffect to ensure proper timing of ref updates.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/useeffect-vs-uselayouteffect.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst ref = React.useRef()\nReact.useEffect(() => {\n\tref.current = 'some value'\n})\n\n// then, later in another hook or something\nReact.useLayoutEffect(() => {\n\tconsole.log(ref.current) // <-- this logs an old value because this runs first!\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Asynchronous Actions in React Context\nDESCRIPTION: This snippet shows how to implement asynchronous actions within a React Context. It demonstrates a helper function that handles the async flow, including dispatching multiple actions for different stages of the async operation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_10\n\nLANGUAGE: jsx\nCODE:\n```\nasync function updateUser(dispatch, user, updates) {\n\tdispatch({ type: 'start update', updates })\n\ttry {\n\t\tconst updatedUser = await userClient.updateUser(user, updates)\n\t\tdispatch({ type: 'finish update', updatedUser })\n\t} catch (error) {\n\t\tdispatch({ type: 'fail update', error })\n\t}\n}\n\nexport { UserProvider, useUser, updateUser }\n```\n\n----------------------------------------\n\nTITLE: Testing React Counter Component with Testing Library\nDESCRIPTION: A comprehensive test that verifies the complete usage flow of a Counter component. The test checks initialization, click increments, max clicks limitation, reset functionality, and post-reset behavior. It uses Testing Library and Jest for assertions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport '@testing-library/jest-dom/extend-expect'\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport { Counter } from '../counter'\n\ntest('allows clicks until the maxClicks is reached, then requires a reset', () => {\n\tconst { getByText } = render(<Counter maxClicks={4} initialCount={3} />)\n\tconst counterButton = getByText(/^count/i)\n\n\t// the counter is initialized to the initialCount\n\texpect(counterButton).toHaveTextContent('3')\n\n\t// when clicked, the counter increments the click\n\tuserEvent.click(counterButton)\n\texpect(counterButton).toHaveTextContent('4')\n\n\t// the counter button is disabled when it's hit the maxClicks\n\texpect(counterButton).toHaveAttribute('disabled')\n\t// the counter button no longer increments the count when clicked.\n\tuserEvent.click(counterButton)\n\texpect(counterButton).toHaveTextContent('4')\n\n\t// the reset button has been rendered and is clickable\n\tuserEvent.click(getByText(/reset/i))\n\n\t// the counter is reset to the initialCount\n\texpect(counterButton).toHaveTextContent('3')\n\n\t// the counter can be clicked and increment the count again\n\tuserEvent.click(counterButton)\n\texpect(counterButton).toHaveTextContent('4')\n})\n```\n\n----------------------------------------\n\nTITLE: Final Simplified React JSX Setup\nDESCRIPTION: The complete, simplified version of the React setup with JSX support, showing the minimal code needed to get React running with JSX in a browser.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script src=\"https://unpkg.com/react@16.13.1/umd/react.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/react-dom@16.13.1/umd/react-dom.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/@babel/standalone@7.8.3/babel.js\"></script>\n\t\t<script type=\"text/babel\">\n\t\t\tReactDOM.render(\n\t\t\t\t<div className=\"container\">Hello World</div>,\n\t\t\t\tdocument.getElementById('root'),\n\t\t\t)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Using Separate Contexts for State and Dispatch in React\nDESCRIPTION: This code snippet demonstrates how to optimize context by separating state and dispatch into different context providers. The approach prevents unnecessary re-renders of components that only need the dispatch function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-optimize-your-context-value.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst state = useCountState()\nconst dispatch = useCountDispatch()\n```\n\n----------------------------------------\n\nTITLE: Lifting State Up in React Components\nDESCRIPTION: This snippet demonstrates the concept of lifting state up in React. It shows how to move the state management to a parent component and pass it down to child components as props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter({ count, onIncrementClick }) {\n\treturn <button onClick={onIncrementClick}>{count}</button>\n}\n\nfunction CountDisplay({ count }) {\n\treturn <div>The current counter count is {count}</div>\n}\n\nfunction App() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn (\n\t\t<div>\n\t\t\t<CountDisplay count={count} />\n\t\t\t<Counter count={count} onIncrementClick={increment} />\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Source Entry Point for Express Application\nDESCRIPTION: The main source entry point that configures logging and starts the server. It separates server startup logic into a function for better testability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport logger from 'loglevel'\nimport { startServer } from './start'\n\nlogger.setLevel('info')\n\nstartServer()\n```\n\n----------------------------------------\n\nTITLE: Conditionally Rendering Based on Authentication State in React\nDESCRIPTION: This code shows how to conditionally render different application components based on whether a user is authenticated or not. It uses a custom hook to retrieve the user's authentication state from context.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/authentication-in-react-applications.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport {useUser} from './context/auth'\nimport AuthenticatedApp from './authenticated-app'\nimport UnauthenticatedApp from './unauthenticated-app'\n\nfunction App() {\n  const user = useUser()\n  return user ? <AuthenticatedApp /> : <UnauthenticatedApp />\n}\n\nexport App\n```\n\n----------------------------------------\n\nTITLE: Complete State Machine Definition\nDESCRIPTION: Comprehensive state machine definition including initial state, state actions (enter/exit), and transition definitions with associated actions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst machine = createMachine({\n\tinitialState: 'off',\n\toff: {\n\t\tactions: {\n\t\t\tonEnter() {\n\t\t\t\tconsole.log('off: onEnter')\n\t\t\t},\n\t\t\tonExit() {\n\t\t\t\tconsole.log('off: onExit')\n\t\t\t},\n\t\t},\n\t\ttransitions: {\n\t\t\tswitch: {\n\t\t\t\ttarget: 'on',\n\t\t\t\taction() {\n\t\t\t\t\tconsole.log('transition action for \"switch\" in \"off\" state')\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\ton: {\n\t\tactions: {\n\t\t\tonEnter() {\n\t\t\t\tconsole.log('on: onEnter')\n\t\t\t},\n\t\t\tonExit() {\n\t\t\t\tconsole.log('on: onExit')\n\t\t\t},\n\t\t},\n\t\ttransitions: {\n\t\t\tswitch: {\n\t\t\t\ttarget: 'off',\n\t\t\t\taction() {\n\t\t\t\t\tconsole.log('transition action for \"switch\" in \"on\" state')\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n})\n```\n\n----------------------------------------\n\nTITLE: Workerize Implementation Example\nDESCRIPTION: Example of using the workerize-loader webpack plugin to easily convert a module into a Web Worker, demonstrating practical usage in a React application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/speed-up-your-app-with-web-workers.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport makeFilterCitiesWorker from 'workerize!./filter-cities'\n\nconst { getItems } = makeFilterCitiesWorker()\n\nexport { getItems }\n```\n\n----------------------------------------\n\nTITLE: Implementing Toggle Component with New Context API\nDESCRIPTION: Modern implementation of the Toggle component using React's new context API with Provider and Consumer components, showing a cleaner and more maintainable approach.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/migrating-to-reacts-new-context-api.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst ToggleContext = React.createContext({\n\ton: false,\n\ttoggle: () => {},\n})\n\nclass Toggle extends React.Component {\n\tstatic On = ({ children }) => (\n\t\t<ToggleContext.Consumer>\n\t\t\t{({ on }) => (on ? children : null)}\n\t\t</ToggleContext.Consumer>\n\t)\n\tstatic Off = ({ children }) => (\n\t\t<ToggleContext.Consumer>\n\t\t\t{({ on }) => (on ? null : children)}\n\t\t</ToggleContext.Consumer>\n\t)\n\tstatic Button = (props) => (\n\t\t<ToggleContext.Consumer>\n\t\t\t{({ on, toggle }) => <Switch on={on} onClick={toggle} {...props} />}\n\t\t</ToggleContext.Consumer>\n\t)\n\ttoggle = () =>\n\t\tthis.setState(\n\t\t\t({ on }) => ({ on: !on }),\n\t\t\t() => this.props.onToggle(this.state.on),\n\t\t)\n\tstate = { on: false, toggle: this.toggle }\n\trender() {\n\t\treturn (\n\t\t\t<ToggleContext.Provider value={this.state}>\n\t\t\t\t{this.props.children}\n\t\t\t</ToggleContext.Provider>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom React Context Hook for State Management\nDESCRIPTION: This snippet shows how to create a custom React Context and hook for managing count state. It includes error handling for when the hook is used outside of the provider.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\nconst CountContext = React.createContext()\n\nfunction useCount() {\n\tconst context = React.useContext(CountContext)\n\tif (!context) {\n\t\tthrow new Error(`useCount must be used within a CountProvider`)\n\t}\n\treturn context\n}\n\nfunction CountProvider(props) {\n\n\n```\n\n----------------------------------------\n\nTITLE: Integration Testing React App with Testing Library and MSW\nDESCRIPTION: An integration test example using React Testing Library and Mock Service Worker (MSW) to test a login flow. It demonstrates mocking network requests and rendering the full app with providers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/static-vs-unit-vs-integration-vs-e2e-tests.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as React from 'react'\nimport { render, screen, waitForElementToBeRemoved } from 'test/app-test-utils'\nimport userEvent from '@testing-library/user-event'\nimport { build, fake } from '@jackfranklin/test-data-bot'\nimport { rest } from 'msw'\nimport { setupServer } from 'msw/node'\nimport { handlers } from 'test/server-handlers'\nimport App from '../app'\n\nconst buildLoginForm = build({\n\tfields: {\n\t\tusername: fake((f) => f.internet.userName()),\n\t\tpassword: fake((f) => f.internet.password()),\n\t},\n})\n\n// integration tests typically only mock HTTP requests via MSW\nconst server = setupServer(...handlers)\n\nbeforeAll(() => server.listen())\nafterAll(() => server.close())\nafterEach(() => server.resetHandlers())\n\ntest(`logging in displays the user's username`, async () => {\n\t// The custom render returns a promise that resolves when the app has\n\t//   finished loading (if you're server rendering, you may not need this).\n\t// The custom render also allows you to specify your initial route\n\tawait render(<App />, { route: '/login' })\n\tconst { username, password } = buildLoginForm()\n\n\tuserEvent.type(screen.getByLabelText(/username/i), username)\n\tuserEvent.type(screen.getByLabelText(/password/i), password)\n\tuserEvent.click(screen.getByRole('button', { name: /submit/i }))\n\n\tawait waitForElementToBeRemoved(() => screen.getByLabelText(/loading/i))\n\n\t// assert whatever you need to verify the user is logged in\n\texpect(screen.getByText(username)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Using useCallback and useMemo for Optimization\nDESCRIPTION: Demonstrates proper usage of useCallback and useMemo hooks to maintain referential equality for functions and arrays.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Foo({ bar, baz }) {\n\tReact.useEffect(() => {\n\t\tconst options = { bar, baz }\n\t\tbuzz(options)\n\t}, [bar, baz])\n\treturn <div>foobar</div>\n}\n\nfunction Blub() {\n\tconst bar = React.useCallback(() => {}, [])\n\tconst baz = React.useMemo(() => [1, 2, 3], [])\n\treturn <Foo bar={bar} baz={baz} />\n}\n```\n\n----------------------------------------\n\nTITLE: End-to-End Testing with Cypress in JavaScript\nDESCRIPTION: An example of an end-to-end test using Cypress to simulate user interactions with a todo application. It covers user registration, login, and todo item management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/static-vs-unit-vs-integration-vs-e2e-tests.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { generate } from 'todo-test-utils'\n\ndescribe('todo app', () => {\n\tit('should work for a typical user', () => {\n\t\tconst user = generate.user()\n\t\tconst todo = generate.todo()\n\t\t// here we're going through the registration process.\n\t\t// I'll typically only have one e2e test that does this.\n\t\t// the rest of the tests will hit the same endpoint\n\t\t// that the app does so we can skip navigating through that experience.\n\t\tcy.visitApp()\n\n\t\tcy.findByText(/register/i).click()\n\n\t\tcy.findByLabelText(/username/i).type(user.username)\n\n\t\tcy.findByLabelText(/password/i).type(user.password)\n\n\t\tcy.findByText(/login/i).click()\n\n\t\tcy.findByLabelText(/add todo/i)\n\t\t\t.type(todo.description)\n\t\t\t.type('{enter}')\n\n\t\tcy.findByTestId('todo-0').should('have.value', todo.description)\n\n\t\tcy.findByLabelText('complete').click()\n\n\t\tcy.findByTestId('todo-0').should('have.class', 'complete')\n\t\t// etc...\n\t\t// My E2E tests typically behave similar to how a user would.\n\t\t// They can sometimes be quite long.\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Web Worker Implementation\nDESCRIPTION: A complete example showing how to set up basic communication between the main thread and a Web Worker, including HTML setup and message passing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/speed-up-your-app-with-web-workers.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"main.js\"></script>\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// main.js\nconst worker = new Worker('worker.js')\nworker.postMessage('Hello Worker')\nworker.onmessage = (e) => {\n\tconsole.log('main.js: Message received from worker:', e.data)\n}\n// if you want to \"uninstall\" the web worker then use:\n// worker.terminate()\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// worker.js\nthis.onmessage = (e) => {\n\tconsole.log('worker.js: Message received from main script', e.data)\n\tthis.postMessage('Hello main')\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pokemon GraphQL Data Fetcher in TypeScript\nDESCRIPTION: A TypeScript implementation for fetching Pokemon data from a GraphQL API endpoint. Includes type definitions for Pokemon data structure, date formatting utility, and robust error handling for both network and GraphQL-specific errors. The function supports querying Pokemon by name and returns formatted data with a timestamp.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst formatDate = (date: Date) =>\n\t`${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')} ${String(\n\t\tdate.getSeconds(),\n\t).padStart(2, '0')}.${String(date.getMilliseconds()).padStart(3, '0')}`\n\ntype PokemonData = {\n\tid: string\n\tnumber: string\n\tname: string\n\timage: string\n\tfetchedAt: string\n\tattacks: {\n\t\tspecial: Array<{\n\t\t\tname: string\n\t\t\ttype: string\n\t\t\tdamage: number\n\t\t}>\n\t}\n}\n\nasync function fetchPokemon(name: string): Promise<PokemonData> {\n\tconst pokemonQuery = `\n    query PokemonInfo($name: String) {\n      pokemon(name: $name) {\n        id\n        number\n        name\n        image\n        attacks {\n          special {\n            name\n            type\n            damage\n          }\n        }\n      }\n    }\n  `\n\n\tconst response = await window.fetch('https://graphql-pokemon2.vercel.app/', {\n\t\t// learn more about this API here: https://graphql-pokemon2.vercel.app/\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json;charset=UTF-8',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquery: pokemonQuery,\n\t\t\tvariables: { name: name.toLowerCase() },\n\t\t}),\n\t})\n\n\ttype JSONResponse = {\n\t\tdata?: {\n\t\t\tpokemon: Omit<PokemonData, 'fetchedAt'>\n\t\t}\n\t\terrors?: Array<{ message: string }>\n\t}\n\tconst { data, errors }: JSONResponse = await response.json()\n\tif (response.ok) {\n\t\tconst pokemon = data?.pokemon\n\t\tif (pokemon) {\n\t\t\t// add fetchedAt helper (used in the UI to help differentiate requests)\n\t\t\treturn Object.assign(pokemon, { fetchedAt: formatDate(new Date()) })\n\t\t} else {\n\t\t\treturn Promise.reject(new Error(`No pokemon with the name \"${name}\"`)))\n\t\t}\n\t} else {\n\t\t// handle the graphql errors\n\t\tconst error = new Error(\n\t\t\terrors?.map((e) => e.message).join('\\n') ?? 'unknown',\n\t\t)\n\t\treturn Promise.reject(error)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: BlurrableImage Component Implementation\nDESCRIPTION: Core implementation of the BlurrableImage component that handles progressive image loading with blur effects, fade transitions, and no-JavaScript fallbacks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { clsx } from 'clsx'\nimport { useSSRLayoutEffect } from '#app/utils/misc'\n\nexport function BlurrableImage({\n\timg,\n\tblurDataUrl,\n\t...rest\n}: {\n\timg: React.ReactElement<React.ImgHTMLAttributes<HTMLImageElement>>\n\tblurDataUrl?: string\n} & React.HTMLAttributes<HTMLDivElement>) {\n\tconst [visible, setVisible] = React.useState(false)\n\tconst jsImgElRef = React.useRef<HTMLImageElement>(null)\n\n\tReact.useEffect(() => {\n\t\tif (!jsImgElRef.current) return\n\t\tif (jsImgElRef.current.complete) return\n\n\t\tlet current = true\n\t\tjsImgElRef.current.addEventListener('load', () => {\n\t\t\tif (!jsImgElRef.current || !current) return\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetVisible(true)\n\t\t\t}, 0)\n\t\t})\n\n\t\treturn () => {\n\t\t\tcurrent = false\n\t\t}\n\t}, [])\n\n\tconst jsImgEl = React.cloneElement(img, {\n\t\tref: jsImgElRef,\n\t\tclassName: clsx(img.props.className, 'transition-opacity', {\n\t\t\t'opacity-0': !visible,\n\t\t}),\n\t})\n\n\treturn (\n\t\t<div {...rest}>\n\t\t\t{blurDataUrl ? (\n\t\t\t\t<>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={blurDataUrl}\n\t\t\t\t\t\tclassName={img.props.className}\n\t\t\t\t\t\talt={img.props.alt}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={clsx(img.props.className, 'backdrop-blur-xl')} />\n\t\t\t\t</>\n\t\t\t) : null}\n\t\t\t{jsImgEl}\n\t\t\t<noscript>{img}</noscript>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: React.memo Implementation Example\nDESCRIPTION: Shows implementation of React.memo for component optimization along with useCallback for handler functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst CountButton = React.memo(function CountButton({ onClick, count }) {\n\treturn <button onClick={onClick}>{count}</button>\n})\n\nfunction DualCounter() {\n\tconst [count1, setCount1] = React.useState(0)\n\tconst increment1 = React.useCallback(() => setCount1((c) => c + 1), [])\n\n\tconst [count2, setCount2] = React.useState(0)\n\tconst increment2 = React.useCallback(() => setCount2((c) => c + 1), [])\n\n\treturn (\n\t\t<>\n\t\t\t<CountButton count={count1} onClick={increment1} />\n\t\t\t<CountButton count={count2} onClick={increment2} />\n\t\t</>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Nested Context Providers for Authentication in React\nDESCRIPTION: This code defines an AppProviders component that combines multiple context providers. It composes AuthProvider and UserProvider to provide authentication and user data to the entire application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/authentication-in-react-applications.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { AuthProvider } from './auth-context'\nimport { UserProvider } from './user-context'\n\nfunction AppProviders({ children }) {\n\treturn (\n\t\t<AuthProvider>\n\t\t\t<UserProvider>{children}</UserProvider>\n\t\t</AuthProvider>\n\t)\n}\n\nexport default AppProviders\n```\n\n----------------------------------------\n\nTITLE: Structuring React App with Multiple Providers\nDESCRIPTION: Illustrates how to structure a React application using multiple context providers for different parts of the app. Demonstrates the concept of keeping state close to where it's needed.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<ThemeProvider>\n\t\t\t<AuthenticationProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Home path=\"/\" />\n\t\t\t\t\t<About path=\"/about\" />\n\t\t\t\t\t<UserPage path=\"/:userId\" />\n\t\t\t\t\t<UserSettings path=\"/settings\" />\n\t\t\t\t\t<Notifications path=\"/notifications\" />\n\t\t\t\t</Router>\n\t\t\t</AuthenticationProvider>\n\t\t</ThemeProvider>\n\t)\n}\n\nfunction Notifications() {\n\treturn (\n\t\t<NotificationsProvider>\n\t\t\t<NotificationsTab />\n\t\t\t<NotificationsTypeList />\n\t\t\t<NotificationsList />\n\t\t</NotificationsProvider>\n\t)\n}\n\nfunction UserPage({ username }) {\n\treturn (\n\t\t<UserProvider username={username}>\n\t\t\t<UserInfo />\n\t\t\t<UserNav />\n\t\t\t<UserActivity />\n\t\t</UserProvider>\n\t)\n}\n\nfunction UserSettings() {\n\t// this would be the associated hook for the AuthenticationProvider\n\tconst { user } = useAuthenticatedUser()\n}\n```\n\n----------------------------------------\n\nTITLE: Creating API-Specific Wrappers in JavaScript\nDESCRIPTION: This snippet demonstrates how to create API-specific wrappers using the custom fetch client. It includes functions for CRUD operations on list items.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { client } from './api-client'\n\nfunction create(listItemData) {\n\treturn client('list-items', { body: listItemData })\n}\n\nfunction read() {\n\treturn client('list-items')\n}\n\nfunction update(listItemId, updates) {\n\treturn client(`list-items/${listItemId}`, {\n\t\tmethod: 'PUT',\n\t\tbody: updates,\n\t})\n}\n\nfunction remove(listItemId) {\n\treturn client(`list-items/${listItemId}`, { method: 'DELETE' })\n}\n\nexport { create, read, remove, update }\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with *ByRole in React Testing Library\nDESCRIPTION: Demonstrates the use of *ByRole queries to find elements by their accessible name, which is more robust than using getByText for elements with split text content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n// assuming we've got this DOM structure to work with\n// <button><span>Hello</span> <span>World</span></button>\n\nscreen.getByText(/hello world/i)\n// ❌ fails with the following error:\n// Unable to find an element with the text: /hello world/i. This could be\n// because the text is broken up by multiple elements. In this case, you can\n// provide a function for your text matcher to make your matcher more flexible.\n\nscreen.getByRole('button', { name: /hello world/i })\n// ✅ works!\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Fetch Wrapper in JavaScript\nDESCRIPTION: This snippet shows the initial implementation of a custom fetch wrapper function. It sets up a basic GET request with customizable configurations and handles the JSON response.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction client(endpoint, customConfig) {\n\tconst config = {\n\t\tmethod: 'GET',\n\t\t...customConfig,\n\t}\n\n\treturn window\n\t\t.fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n\t\t.then((response) => response.json())\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Authentication Context and Provider in React\nDESCRIPTION: This code implements an authentication context and provider in React. It handles user authentication state, prevents rendering the app until authentication status is determined, and provides login/logout functionality through context.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/authentication-in-react-applications.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { FullPageSpinner } from '#app/components/lib'\n\nconst AuthContext = React.createContext()\n\nfunction AuthProvider(props) {\n\t// code for pre-loading the user's information if we have their token in\n\t// localStorage goes here\n\n\t// 🚨 this is the important bit.\n\t// Normally your provider components render the context provider with a value.\n\t// But we post-pone rendering any of the children until after we've determined\n\t// whether or not we have a user token and if we do, then we render a spinner\n\t// while we go retrieve that user's information.\n\tif (weAreStillWaitingToGetTheUserData) {\n\t\treturn <FullPageSpinner />\n\t}\n\n\tconst login = () => {} // make a login request\n\tconst register = () => {} // register the user\n\tconst logout = () => {} // clear the token in localStorage and the user data\n\n\t// note, I'm not bothering to optimize this `value` with React.useMemo here\n\t// because this is the top-most component rendered in our app and it will very\n\t// rarely re-render/cause a performance problem.\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{ data, login, logout, register }}\n\t\t\t{...props}\n\t\t/>\n\t)\n}\n\nconst useAuth = () => React.useContext(AuthContext)\n\nexport { AuthProvider, useAuth }\n\n// the UserProvider in user-context.js is basically:\n// const UserProvider = props => (\n//   <UserContext.Provider value={useAuth().data.user} {...props} />\n// )\n// and the useUser hook is basically this:\n// const useUser = () => React.useContext(UserContext)\n```\n\n----------------------------------------\n\nTITLE: Traditional Context Consumer Approach vs. Custom Hook Approach\nDESCRIPTION: Contrasts the common approach of directly using useContext with a better pattern using a custom hook for improved developer experience.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { SomethingContext } from 'some-context-package'\n\nfunction YourComponent() {\n\tconst something = React.useContext(SomethingContext)\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring useToggle Hook to use useReducer in React\nDESCRIPTION: Converted implementation of useToggle hook using React's useReducer hook instead of useState, which simplifies the implementation of complex state logic with actions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction toggleReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'TOGGLE': {\n\t\t\treturn { on: !state.on }\n\t\t}\n\t\tcase 'ON': {\n\t\t\treturn { on: true }\n\t\t}\n\t\tcase 'OFF': {\n\t\t\treturn { on: false }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction useToggle() {\n\tconst [{ on }, dispatch] = React.useReducer(toggleReducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: 'TOGGLE' })\n\tconst setOn = () => dispatch({ type: 'ON' })\n\tconst setOff = () => dispatch({ type: 'OFF' })\n\n\treturn { on, toggle, setOn, setOff }\n}\n```\n\n----------------------------------------\n\nTITLE: Type Guarding with Conditional Statements in TypeScript\nDESCRIPTION: Shows a function that uses a conditional check to ensure a property exists before using it. TypeScript recognizes this pattern and narrows the type appropriately.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\ntype User = {\n\tname: string\n\tdisplayName: string | null\n}\n\nfunction logUserDisplayNameUpper(user: User) {\n\tif (!user.displayName) throw new Error('Oh no, user has no displayName')\n\tconsole.log(user.displayName.toUpperCase())\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Context Provider with useReducer\nDESCRIPTION: Creates a CountProvider component that uses useReducer for state management and passes the state and dispatch functions through context.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\n\nconst CountContext = React.createContext()\n\nfunction countReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'increment': {\n\t\t\treturn { count: state.count + 1 }\n\t\t}\n\t\tcase 'decrement': {\n\t\t\treturn { count: state.count - 1 }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction CountProvider({ children }) {\n\tconst [state, dispatch] = React.useReducer(countReducer, { count: 0 })\n\t// NOTE: you *might* need to memoize this value\n\t// Learn more in http://kcd.im/optimize-context\n\tconst value = { state, dispatch }\n\treturn <CountContext.Provider value={value}>{children}</CountContext.Provider>\n}\n\nexport { CountProvider }\n```\n\n----------------------------------------\n\nTITLE: Using @testing-library/user-event for More Realistic User Interactions\nDESCRIPTION: Demonstrates the advantage of using user-event's type method over fireEvent.change for simulating user input, as it triggers more realistic event sequences.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nfireEvent.change(input, { target: { value: 'hello world' } })\n\n// ✅\nuserEvent.type(input, 'hello world')\n```\n\n----------------------------------------\n\nTITLE: Querying Users with Prisma in TypeScript\nDESCRIPTION: This snippet demonstrates how to query user data from a database using Prisma in TypeScript. It shows how to select specific fields and related data, with automatic type inference.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await prisma.user.findMany({\n\tselect: {\n\t\tid: true,\n\t\temail: true,\n\t\tfirstName: true,\n\t},\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await prisma.user.findMany({\n\tselect: {\n\t\tid: true,\n\t\temail: true,\n\t\tfirstName: true,\n\t\tteam: true, // <-- just add the field I want\n\t},\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await prisma.user.findMany({\n\tselect: {\n\t\tid: true,\n\t\temail: true,\n\t\tfirstName: true,\n\t\tteam: true,\n\t\tpostReads: {\n\t\t\tselect: {\n\t\t\t\tpostSlug: true,\n\t\t\t},\n\t\t},\n\t},\n})\n```\n\n----------------------------------------\n\nTITLE: Basic React Counter with Logger Component\nDESCRIPTION: Demonstrates a basic counter implementation with a Logger component that shows the default React re-rendering behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/optimize-react-re-renders.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nfunction Logger(props) {\n\tconsole.log(`${props.label} rendered`)\n\treturn null // what is returned here is irrelevant...\n}\n\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={increment}>The count is {count}</button>\n\t\t\t<Logger label=\"counter\" />\n\t\t</div>\n\t)\n}\n\nReactDOM.render(<Counter />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Implementing Prop Getters in React Toggle Component\nDESCRIPTION: This code snippet shows the implementation of a Toggle component using React, including the prop getter pattern with getTogglerProps function. It demonstrates how to handle controlled and uncontrolled component states, and how to merge user-provided props with component-specific props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-give-rendering-control-to-users-with-prop-getters.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nconst callAll =\n\t(...fns) =>\n\t(...args) =>\n\t\tfns.forEach((fn) => fn && fn(...args))\n\nclass Toggle extends Component {\n\tstatic propTypes = {\n\t\tdefaultOn: PropTypes.bool,\n\t\ton: PropTypes.bool,\n\t\tonToggle: PropTypes.func,\n\t\tchildren: PropTypes.oneOfType([PropTypes.func, PropTypes.array]).isRequired,\n\t}\n\tstatic defaultProps = {\n\t\tdefaultOn: false,\n\t\tonToggle: () => {},\n\t}\n\tstate = {\n\t\ton: this.getOn({ on: this.props.defaultOn }),\n\t}\n\n\tgetOn(state = this.state) {\n\t\treturn this.isOnControlled() ? this.props.on : state.on\n\t}\n\n\tisOnControlled() {\n\t\treturn this.props.on !== undefined\n\t}\n\n\tgetTogglerProps = (props = {}) => ({\n\t\t'aria-controls': 'target',\n\t\t'aria-expanded': Boolean(this.getOn()),\n\t\t...props,\n\t\tonClick: callAll(props.onClick, this.toggle),\n\t})\n\n\tgetTogglerStateAndHelpers() {\n\t\treturn {\n\t\t\ton: this.getOn(),\n\t\t\tgetTogglerProps: this.getTogglerProps,\n\t\t\tsetOn: this.setOn,\n\t\t\tsetOff: this.setOff,\n\t\t\ttoggle: this.toggle,\n\t\t}\n\t}\n\n\tsetOnState = (state = !this.getOn()) => {\n\t\tif (this.isOnControlled()) {\n\t\t\tthis.props.onToggle(state, this.getTogglerStateAndHelpers())\n\t\t} else {\n\t\t\tthis.setState({ on: state }, () => {\n\t\t\t\tthis.props.onToggle(this.getOn(), this.getTogglerStateAndHelpers())\n\t\t\t})\n\t\t}\n\t}\n\n\tsetOn = this.setOnState.bind(this, true)\n\tsetOff = this.setOnState.bind(this, false)\n\ttoggle = this.setOnState.bind(this, undefined)\n\n\trender() {\n\t\tconst renderProp = unwrapArray(this.props.children)\n\t\treturn renderProp(this.getTogglerStateAndHelpers())\n\t}\n}\n\nfunction unwrapArray(arg) {\n\treturn Array.isArray(arg) ? arg[0] : arg\n}\n\nexport default Toggle\n```\n\n----------------------------------------\n\nTITLE: Implementing ES Modules in JavaScript\nDESCRIPTION: Demonstrates various ways to export and import modules, including default exports, named exports, and dynamic imports. Also shows React-specific module importing with lazy loading.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport default function add(a, b) {\n\treturn a + b\n}\n\n/*\n * import add from './add'\n * console.assert(add(3, 2) === 5)\n */\n\nexport const foo = 'bar'\n\n/*\n * import {foo} from './foo'\n * console.assert(foo === 'bar')\n */\n\nexport function subtract(a, b) {\n\treturn a - b\n}\n\nexport const now = new Date()\n\n/*\n * import {subtract, now} from './stuff'\n * console.assert(subtract(4, 2) === 2)\n * console.assert(now instanceof Date)\n */\n\n// dynamic imports\nimport('./some-module').then(\n\t(allModuleExports) => {\n\t\t// the allModuleExports object will be the same object you get if you had\n\t\t// used: import * as allModuleExports from './some-module'\n\t\t// the only difference is this will be loaded asynchronously which can\n\t\t// have performance benefits in some cases\n\t},\n\t(error) => {\n\t\t// handle the error\n\t\t// this will happen if there's an error loading or running the module\n\t},\n)\n\n// in React:\nimport React, { Suspense, Fragment } from 'react'\n\n// dynamic import of a React component\nconst BigComponent = React.lazy(() => import('./big-component'))\n// big-component.js would need to \"export default BigComponent\" for this to work\n```\n\n----------------------------------------\n\nTITLE: Generics with Arrow Functions in TypeScript\nDESCRIPTION: Shows how to use generics with arrow functions, extending unknown to help the compiler disambiguate between JSX and generics. This pattern works well in React TypeScript projects.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nconst arrayify = <Type extends unknown>(a: Type): Array<Type> => [a]\n```\n\n----------------------------------------\n\nTITLE: Advanced TypeScript Props with Derived Operator Type\nDESCRIPTION: The final version of the Calculator component with advanced TypeScript features, including derived types for the operator prop.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst operations = {\n\t'+': (left: number, right: number): number => left + right,\n\t'-': (left: number, right: number): number => left - right,\n\t'*': (left: number, right: number): number => left * right,\n\t'/': (left: number, right: number): number => left / right,\n}\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\n\nfunction Calculator({ left, operator, right }: CalculatorProps) {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n\nconst examples = (\n\t<>\n\t\t<Calculator left={1} operator=\"+\" right={2} />\n\t\t<Calculator left={1} operator=\"-\" right={2} />\n\t\t<Calculator left={1} operator=\"*\" right={2} />\n\t\t<Calculator left={1} operator=\"/\" right={2} />\n\t</>\n)\n```\n\n----------------------------------------\n\nTITLE: Complete Test Framework Implementation\nDESCRIPTION: Builds a simple but complete testing framework with test isolation and better error reporting.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst { sum, subtract } = require('./math')\n\ntest('sum adds numbers', () => {\n\tconst result = sum(3, 7)\n\tconst expected = 10\n\texpect(result).toBe(expected)\n})\n\ntest('subtract subtracts numbers', () => {\n\tconst result = subtract(7, 3)\n\tconst expected = 4\n\texpect(result).toBe(expected)\n})\n\nfunction test(title, callback) {\n\ttry {\n\t\tcallback()\n\t\tconsole.log(`✓ ${title}`)\n\t} catch (error) {\n\t\tconsole.error(`✕ ${title}`)\n\t\tconsole.error(error)\n\t}\n}\n\nfunction expect(actual) {\n\treturn {\n\t\ttoBe(expected) {\n\t\t\tif (actual !== expected) {\n\t\t\t\tthrow new Error(`${actual} is not equal to ${expected}`)\n\t\t\t}\n\t\t},\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: GreetingFetcher Component Example\nDESCRIPTION: A simple React component example showing form input with label and button for loading greetings. Used to demonstrate testing best practices focusing on user interaction patterns.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-react-testing-library.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<div>\n\t<label for=\"name-input\">Name</label>\n\t<input id=\"name-input\" />\n\t<button>Load Greeting</button>\n\t<div data-testid=\"greeting-text\" />\n</div>\n```\n\n----------------------------------------\n\nTITLE: Implementing useState with useReducer in React\nDESCRIPTION: A complete implementation of React's useState hook using useReducer. This implementation handles both direct state updates and function-based updates, as well as lazy initialization of state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) =>\n\ttypeof newState === 'function' ? newState(prevState) : newState\n\nconst useStateInitializer = (initialValue) =>\n\ttypeof initialValue === 'function' ? initialValue() : initialValue\n\nfunction useState(initialValue) {\n\treturn React.useReducer(useStateReducer, initialValue, useStateInitializer)\n}\n```\n\n----------------------------------------\n\nTITLE: Using React Hooks for Effect Management in Functional Components\nDESCRIPTION: This snippet showcases the use of React's useEffect hook in a functional component, demonstrating different dependency configurations for managing side effects and synchronizing with state changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction HookComponent() {\n\tReact.useEffect(() => {\n\t\t// This side effect code is here to synchronize the state of the world\n\t\t// with the state of this component.\n\t\treturn function cleanup() {\n\t\t\t// And I need to cleanup the previous side-effect before running a new one\n\t\t}\n\t\t// So I need this side-effect and it's cleanup to be re-run...\n\t}, [when, any, ofThese, change])\n\n\tReact.useEffect(() => {\n\t\t// this side effect will re-run on every single time this component is\n\t\t// re-rendered to make sure that what it does is never stale.\n\t})\n\n\tReact.useEffect(() => {\n\t\t// this side effect can never get stale because\n\t\t// it legitimately has no dependencies\n\t}, [])\n\n\treturn /* some beautiful react elements */\n}\n```\n\n----------------------------------------\n\nTITLE: React Menu Compound Component Usage\nDESCRIPTION: Example of using a compound component pattern with React Menu component from Reach UI, showing the relationship between parent and child components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compound-components-with-react-hooks.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<Menu>\n\t\t\t<MenuButton>\n\t\t\t\tActions <span aria-hidden>▾</span>\n\t\t\t</MenuButton>\n\t\t\t<MenuList>\n\t\t\t\t<MenuItem onSelect={() => alert('Download')}>Download</MenuItem>\n\t\t\t\t<MenuItem onSelect={() => alert('Copy')}>Create a Copy</MenuItem>\n\t\t\t\t<MenuItem onSelect={() => alert('Delete')}>Delete</MenuItem>\n\t\t\t</MenuList>\n\t\t</Menu>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Toggle Compound Component Usage Example\nDESCRIPTION: Shows how to use the Toggle compound component with its child components ToggleOn, ToggleOff, and ToggleButton.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compound-components-with-react-hooks.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<Toggle onToggle={(on) => console.log(on)}>\n\t\t\t<ToggleOn>The button is on</ToggleOn>\n\t\t\t<ToggleOff>The button is off</ToggleOff>\n\t\t\t<ToggleButton />\n\t\t</Toggle>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: React Testing Library Cleanup Example\nDESCRIPTION: This snippet illustrates the importance of cleanup in React Testing Library tests. It shows how failing to clean up after each test can lead to errors in subsequent tests due to leftover DOM elements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\ntest('example 1', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText } = render(<Login onSubmit={handleSubmit} />)\n\tuserEvent.type(getByLabelText(/username/i), 'kentcdodds')\n\tuserEvent.type(getByLabelText(/password/i), 'ilovetwix')\n\t// more test here\n})\n\ntest('example 2', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText } = render(<Login onSubmit={handleSubmit} />)\n\t// 💣 this will blow up because the `getByLabelText` is actually querying the\n\t// entire document, and because we didn't cleanup after the previous test\n\t// we'll get an error indicating that RTL found more than one field with the\n\t// label \"username\"\n\tuserEvent.type(getByLabelText(/username/i), 'kentcdodds')\n\t// more test here\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Errors in Fetch Wrapper\nDESCRIPTION: This snippet enhances the fetch wrapper to handle errors by checking the 'ok' property of the response. It rejects the promise with an error message for non-ok responses.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction client(endpoint, customConfig = {}) {\n\tconst config = {\n\t\tmethod: 'GET',\n\t\t...customConfig,\n\t}\n\n\treturn window\n\t\t.fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n\t\t.then(async (response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn await response.json()\n\t\t\t} else {\n\t\t\t\tconst errorMessage = await response.text()\n\t\t\t\treturn Promise.reject(new Error(errorMessage))\n\t\t\t}\n\t\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Implementation of State Reducer Pattern with React Hooks\nDESCRIPTION: Final comprehensive example showing the complete implementation of the state reducer pattern including a Toggle component that demonstrates limiting the number of clicks using a custom reducer.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport Switch from './switch'\n\nconst actionTypes = {\n\ttoggle: 'TOGGLE',\n\ton: 'ON',\n\toff: 'OFF',\n}\n\nfunction toggleReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase actionTypes.toggle: {\n\t\t\treturn { on: !state.on }\n\t\t}\n\t\tcase actionTypes.on: {\n\t\t\treturn { on: true }\n\t\t}\n\t\tcase actionTypes.off: {\n\t\t\treturn { on: false }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction useToggle({ reducer = toggleReducer } = {}) {\n\tconst [{ on }, dispatch] = React.useReducer(reducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: actionTypes.toggle })\n\tconst setOn = () => dispatch({ type: actionTypes.on })\n\tconst setOff = () => dispatch({ type: actionTypes.off })\n\n\treturn { on, toggle, setOn, setOff }\n}\n\n// export {useToggle, actionTypes, toggleReducer}\n\nfunction Toggle() {\n\tconst [clicksSinceReset, setClicksSinceReset] = React.useState(0)\n\tconst tooManyClicks = clicksSinceReset >= 4\n\n\tconst { on, toggle, setOn, setOff } = useToggle({\n\t\treducer(currentState, action) {\n\t\t\tconst changes = toggleReducer(currentState, action)\n\t\t\tif (tooManyClicks && action.type === actionTypes.toggle) {\n\t\t\t\t// other changes are fine, but on needs to be unchanged\n\t\t\t\treturn { ...changes, on: currentState.on }\n\t\t\t} else {\n\t\t\t\t// the changes are fine\n\t\t\t\treturn changes\n\t\t\t}\n\t\t},\n\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setOff}>Switch Off</button>\n\t\t\t<button onClick={setOn}>Switch On</button>\n\t\t\t<Switch\n\t\t\t\tonClick={() => {\n\t\t\t\t\ttoggle()\n\t\t\t\t\tsetClicksSinceReset((count) => count + 1)\n\t\t\t\t}}\n\t\t\t\ton={on}\n\t\t\t/>\n\t\t\t{tooManyClicks ? (\n\t\t\t\t<button onClick={() => setClicksSinceReset(0)}>Reset</button>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\nfunction App() {\n\treturn <Toggle />\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Implementing a Hidden Message Component in React\nDESCRIPTION: This code snippet demonstrates the implementation of a HiddenMessage component using React hooks. The component renders a checkbox that toggles the visibility of a message.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-react-testing-library.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// hidden-message.js\nimport * as React from 'react'\n\n// NOTE: React Testing Library works with React Hooks _and_ classes just as well\n// and your tests will be the same however you write your components.\nfunction HiddenMessage({ children }) {\n\tconst [showMessage, setShowMessage] = React.useState(false)\n\treturn (\n\t\t<div>\n\t\t\t<label htmlFor=\"toggle\">Show Message</label>\n\t\t\t<input\n\t\t\t\tid=\"toggle\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tonChange={(e) => setShowMessage(e.target.checked)}\n\t\t\t\tchecked={showMessage}\n\t\t\t/>\n\t\t\t{showMessage ? children : null}\n\t\t</div>\n\t)\n}\n\nexport default HiddenMessage\n```\n\n----------------------------------------\n\nTITLE: React Element Object Structure\nDESCRIPTION: Demonstrates the structure of the object returned by React.createElement, showing its properties including type, key, ref, and props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n// <div id=\"root\">Hello world</div>\n{\n  type: \"div\",\n  key: null,\n  ref: null,\n  props: { id: \"root\", children: \"Hello world\" },\n  _owner: null,\n  _store: {}\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing SQLite Cache Adapter in TypeScript\nDESCRIPTION: This TypeScript code creates a SQLite-based cache adapter for the 'cachified' library. It defines methods for getting, setting, and deleting cache entries using prepared SQL statements with better-sqlite3.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst preparedGet = cacheDb.prepare(\n\t'SELECT value, metadata FROM cache WHERE key = ?',\n)\nconst preparedSet = cacheDb.prepare(\n\t'INSERT OR REPLACE INTO cache (key, value, metadata) VALUES (@key, @value, @metadata)',\n)\nconst preparedDelete = cacheDb.prepare('DELETE FROM cache WHERE key = ?')\n\nexport const cache: CachifiedCache = {\n\tname: 'SQLite cache',\n\tget(key) {\n\t\tconst result = preparedGet.get(key)\n\t\tif (!result) return null\n\t\treturn {\n\t\t\tmetadata: JSON.parse(result.metadata),\n\t\t\tvalue: JSON.parse(result.value),\n\t\t}\n\t},\n\tset(key, { value, metadata }) {\n\t\tpreparedSet.run({\n\t\t\tkey,\n\t\t\tvalue: JSON.stringify(value),\n\t\t\tmetadata: JSON.stringify(metadata),\n\t\t})\n\t},\n\tdelete(key) {\n\t\tpreparedDelete.run(key)\n\t},\n}\n```\n\n----------------------------------------\n\nTITLE: Using semantic queries instead of test IDs in React Testing Library\nDESCRIPTION: Shows how to query elements using accessible roles and names rather than data-testid attributes, making tests more resilient and aligned with how users actually interact with the application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\n// assuming you've got this DOM to work with:\n// <label>Username</label><input data-testid=\"username\" />\nscreen.getByTestId('username')\n\n// ✅\n// change the DOM to be accessible by associating the label and setting the type\n// <label for=\"username\">Username</label><input id=\"username\" type=\"text\" />\nscreen.getByRole('textbox', { name: /username/i })\n```\n\n----------------------------------------\n\nTITLE: Memoizing Initial Values with useMemo\nDESCRIPTION: Example showing how to memoize initial values using React.useMemo compared to direct value assignment.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst initialCandies = React.useMemo(\n\t() => ['snickers', 'skittles', 'twix', 'milky way'],\n\t[],\n)\n```\n\n----------------------------------------\n\nTITLE: Using Ternary Operators in React Components\nDESCRIPTION: Shows how to use ternary operators for conditional rendering in React, with comparison to traditional if-else statements. Includes a practical example with a list rendering component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst message = bottle.fullOfSoda\n\t? 'The bottle has soda!'\n\t: 'The bottle may not have soda :-('\n\n// is the same as\nlet message\nif (bottle.fullOfSoda) {\n\tmessage = 'The bottle has soda!'\n} else {\n\tmessage = 'The bottle may not have soda :-('\n}\n\n// in React:\nfunction TeddyBearList({ teddyBears }) {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{teddyBears.length ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{teddyBears.map((teddyBear) => (\n\t\t\t\t\t\t<li key={teddyBear.id}>\n\t\t\t\t\t\t\t<span>{teddyBear.name}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>There are no teddy bears. The sadness.</div>\n\t\t\t)}\n\t\t</React.Fragment>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Express Route Handler Testing with No Abstraction (ANA)\nDESCRIPTION: Example of testing Express.js route handlers with no abstraction, showing two similar tests for blog post loading functionality. This demonstrates how lack of abstraction can make tests harder to understand and maintain.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/aha-testing/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as blogPostController from '../blog-post'\n\njest.mock('../../lib/db')\n\ntest('lists blog posts for the logged in user', async () => {\n\tconst req = {\n\t\tlocale: {\n\t\t\tsource: 'default',\n\t\t\tlanguage: 'en',\n\t\t\tregion: 'GB',\n\t\t},\n\t\tuser: {\n\t\t\tguid: '0336397b-e29d-4b63-b94d-7e68a6fa3747',\n\t\t\tisActive: false,\n\t\t\tpicture: 'http://placehold.it/32x32',\n\t\t\tage: 30,\n\t\t\tname: {\n\t\t\t\tfirst: 'Francine',\n\t\t\t\tlast: 'Oconnor',\n\t\t\t},\n\t\t\tcompany: 'ACME',\n\t\t\temail: 'francine.oconnor@ac.me',\n\t\t\tlatitude: 51.507351,\n\t\t\tlongitude: -0.127758,\n\t\t\tfavoriteFruit: 'banana',\n\t\t},\n\t\tbody: {},\n\t\tcookies: {},\n\t\tquery: {},\n\t\tparams: {\n\t\t\tbucket: 'photography',\n\t\t},\n\t\theader(name) {\n\t\t\treturn {\n\t\t\t\tAuthorization: 'Bearer TEST_TOKEN',\n\t\t\t}[name]\n\t\t},\n\t}\n\tconst res = {\n\t\tclearCookie: jest.fn(),\n\t\tcookie: jest.fn(),\n\t\tend: jest.fn(),\n\t\tlocals: {\n\t\t\tcontent: {},\n\t\t},\n\t\tjson: jest.fn(),\n\t\tsend: jest.fn(),\n\t\tsendStatus: jest.fn(),\n\t\tset: jest.fn(),\n\t}\n\tconst next = jest.fn()\n\n\tawait blogPostController.loadBlogPosts(req, res, next)\n\n\texpect(res.json).toHaveBeenCalledTimes(1)\n\texpect(res.json).toHaveBeenCalledWith({\n\t\tposts: expect.arrayContaining([\n\t\t\texpect.objectContaining({\n\t\t\t\ttitle: 'Test Post 1',\n\t\t\t\tsubtitle: 'This is the subtitle of Test Post 1',\n\t\t\t\tbody: 'The is the body of Test Post 1',\n\t\t\t}),\n\t\t]),\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Lazy Loading Authentication-Dependent Components in React\nDESCRIPTION: This code demonstrates how to lazy load authenticated and unauthenticated application components to optimize performance. Components are only loaded when needed based on the user's authentication state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/authentication-in-react-applications.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport {useUser} from './context/auth'\n\nconst AuthenticatedApp = React.lazy(() => import('./authenticated-app'))\nconst UnauthenticatedApp = React.lazy(() => import('./unauthenticated-app'))\n\nfunction App() {\n  const user = useUser()\n  return user ? <AuthenticatedApp /> : <UnauthenticatedApp />\n}\n\nexport App\n```\n\n----------------------------------------\n\nTITLE: Testing useUndo hook with @testing-library/react in JavaScript\nDESCRIPTION: This snippet shows how to test the useUndo hook using the renderHook function from @testing-library/react. It demonstrates the same test cases as the custom setup function but with a more standardized approach.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-test-custom-react-hooks/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { renderHook, act } from '@testing-library/react'\nimport useUndo from '../use-undo'\n\ntest('allows you to undo and redo', () => {\n\tconst { result } = renderHook(() => useUndo('one'))\n\n\t// assert initial state\n\texpect(result.current.canUndo).toBe(false)\n\texpect(result.current.canRedo).toBe(false)\n\texpect(result.current.past).toEqual([])\n\texpect(result.current.present).toEqual('one')\n\texpect(result.current.future).toEqual([])\n\n\t// add second value\n\tact(() => {\n\t\tresult.current.set('two')\n\t})\n\n\t// assert new state\n\texpect(result.current.canUndo).toBe(true)\n\texpect(result.current.canRedo).toBe(false)\n\texpect(result.current.past).toEqual(['one'])\n\texpect(result.current.present).toEqual('two')\n\texpect(result.current.future).toEqual([])\n\n\t// add third value\n\tact(() => {\n\t\tresult.current.set('three')\n\t})\n\n\t// assert new state\n\texpect(result.current.canUndo).toBe(true)\n\texpect(result.current.canRedo).toBe(false)\n\texpect(result.current.past).toEqual(['one', 'two'])\n\texpect(result.current.present).toEqual('three')\n\texpect(result.current.future).toEqual([])\n\n\t// undo\n\tact(() => {\n\t\tresult.current.undo()\n\t})\n\n\t// assert \"undone\" state\n\texpect(result.current.canUndo).toBe(true)\n\texpect(result.current.canRedo).toBe(true)\n\texpect(result.current.past).toEqual(['one'])\n\texpect(result.current.present).toEqual('two')\n\texpect(result.current.future).toEqual(['three'])\n\n\t// undo again\n\tact(() => {\n\t\tresult.current.undo()\n\t})\n\n\t// assert \"double-undone\" state\n\texpect(result.current.canUndo).toBe(false)\n\texpect(result.current.canRedo).toBe(true)\n\texpect(result.current.past).toEqual([])\n\texpect(result.current.present).toEqual('one')\n\texpect(result.current.future).toEqual(['two', 'three'])\n\n\t// redo\n\tact(() => {\n\t\tresult.current.redo()\n\t})\n\n\t// assert undo + undo + redo state\n\texpect(result.current.canUndo).toBe(true)\n\texpect(result.current.canRedo).toBe(true)\n\texpect(result.current.past).toEqual(['one'])\n\texpect(result.current.present).toEqual('two')\n\texpect(result.current.future).toEqual(['three'])\n\n\t// add fourth value\n\tact(() => {\n\t\tresult.current.set('four')\n\t})\n\n\t// assert final state (note the lack of \"third\")\n\texpect(result.current.canUndo).toBe(true)\n\texpect(result.current.canRedo).toBe(false)\n\texpect(result.current.past).toEqual(['one', 'two'])\n\texpect(result.current.present).toEqual('four')\n\texpect(result.current.future).toEqual([])\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Destructuring in React Components\nDESCRIPTION: Illustrates how destructuring can be used to extract values from objects and arrays, which is particularly useful in React for handling props and useState hook returns.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// const obj = {x: 3.6, y: 7.8}\n// makeCalculation(obj)\n\nfunction makeCalculation({ x, y: d, z = 4 }) {\n\treturn Math.floor((x + d + z) / 3)\n}\n\n// this is the same as\nfunction makeCalculation(obj) {\n\tconst { x, y: d, z = 4 } = obj\n\treturn Math.floor((x + d + z) / 3)\n}\n\n// which is the same as\nfunction makeCalculation(obj) {\n\tconst x = obj.x\n\tconst d = obj.y\n\tconst z = obj.z === undefined ? 4 : obj.z\n\treturn Math.floor((x + d + z) / 3)\n}\n\n// in React:\nfunction UserGitHubImg({ username = 'ghost', ...props }) {\n\treturn <img src={`https://github.com/${username}.png`} {...props} />\n}\n```\n\n----------------------------------------\n\nTITLE: Final Optimized Test Suite with Helper Function\nDESCRIPTION: Final implementation using a render helper function, providing complete test isolation and improved readability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction renderCounter(props) {\n\tconst utils = render(<Counter maxClicks={4} initialCount={3} {...props} />)\n\tconst counterButton = utils.getByText(/^count/i)\n\treturn { ...utils, counterButton }\n}\n\ntest('the counter is initialized to the initialCount', () => {\n\tconst { counterButton } = renderCounter()\n\texpect(counterButton).toHaveTextContent('3')\n})\n```\n\n----------------------------------------\n\nTITLE: Writing Basic React Component Test with MSW\nDESCRIPTION: Demonstrates a basic test case for a checkout component using React Testing Library with MSW handling the API mock.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/checkout.js\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\ntest('clicking \"confirm\" submits payment', async () => {\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(await screen.findByText(/success/i)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Basic State Machine API Structure\nDESCRIPTION: Initial API structure showing the basic state machine creation and transition methods.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst machine = createMachine({\n\t// state machine definition object\n})\n\nmachine.value // current state\nmachine.transition(currentState, eventName)\n```\n\n----------------------------------------\n\nTITLE: Basic useToggle Hook Implementation in React\nDESCRIPTION: Demonstrates a simple useToggle hook and its usage in a Toggle component. The hook manages a boolean state and provides functions to toggle, turn on, and turn off the state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useToggle() {\n\tconst [on, setOnState] = React.useState(false)\n\n\tconst toggle = () => setOnState((o) => !o)\n\tconst setOn = () => setOnState(true)\n\tconst setOff = () => setOnState(false)\n\n\treturn { on, toggle, setOn, setOff }\n}\n\nfunction Toggle() {\n\tconst { on, toggle, setOn, setOff } = useToggle()\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setOff}>Switch Off</button>\n\t\t\t<button onClick={setOn}>Switch On</button>\n\t\t\t<Switch on={on} onClick={toggle} />\n\t\t</div>\n\t)\n}\n\nfunction App() {\n\treturn <Toggle />\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Creating a Example Component to Test useUndo Hook\nDESCRIPTION: Implementation of a component that uses the useUndo hook for testing purposes. The component provides UI controls to interact with the hook's functionality including form input for new values and buttons for undo/redo actions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-test-custom-react-hooks/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\nimport useUndo from '../use-undo'\n\nfunction UseUndoExample() {\n\tconst { present, past, future, set, undo, redo, canUndo, canRedo } =\n\t\tuseUndo('one')\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst input = event.target.elements.newValue\n\t\tset(input.value)\n\t\tinput.value = ''\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t<button onClick={undo} disabled={!canUndo}>\n\t\t\t\t\tundo\n\t\t\t\t</button>\n\t\t\t\t<button onClick={redo} disabled={!canRedo}>\n\t\t\t\t\tredo\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"newValue\">New value</label>\n\t\t\t\t<input type=\"text\" id=\"newValue\" />\n\t\t\t\t<div>\n\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<div>Present: {present}</div>\n\t\t\t<div>Past: {past.join(', ')}</div>\n\t\t\t<div>Future: {future.join(', ')}</div>\n\t\t</div>\n\t)\n}\n\nexport { UseUndoExample }\n```\n\n----------------------------------------\n\nTITLE: Implementing Shorthand Property Names in React Components\nDESCRIPTION: Shows how shorthand property names can be used to create more concise object literals, which is particularly useful when passing props in React components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst a = 'hello'\nconst b = 42\nconst c = { d: [true, false] }\nconsole.log({ a, b, c })\n\n// this is the same as:\nconsole.log({ a: a, b: b, c: c })\n\n// in React:\nfunction Counter({ initialCount, step }) {\n\tconst [count, setCount] = useCounter({ initialCount, step })\n\treturn <button onClick={setCount}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Using Data Test IDs for Element Selection\nDESCRIPTION: Example of using data-testid attributes for selecting elements when other methods aren't suitable.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction UsernameDisplay({ user }) {\n\treturn <strong data-testid=\"username\">{user.username}</strong>\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Data Sending Capability to Fetch Wrapper\nDESCRIPTION: This snippet expands the fetch wrapper to handle POST requests with a request body. It sets appropriate headers and stringifies the body data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction client(endpoint, { body, ...customConfig } = {}) {\n\tconst headers = { 'Content-Type': 'application/json' }\n\tconst config = {\n\t\tmethod: body ? 'POST' : 'GET',\n\t\t...customConfig,\n\t\theaders: {\n\t\t\t...headers,\n\t\t\t...customConfig.headers,\n\t\t},\n\t}\n\tif (body) {\n\t\tconfig.body = JSON.stringify(body)\n\t}\n\n\treturn window\n\t\t.fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n\t\t.then(async (response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn await response.json()\n\t\t\t} else {\n\t\t\t\tconst errorMessage = await response.text()\n\t\t\t\treturn Promise.reject(new Error(errorMessage))\n\t\t\t}\n\t\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Error Recovery with react-error-boundary in React\nDESCRIPTION: This code snippet demonstrates how to implement error recovery using react-error-boundary. It shows a more complex example with state management and error reset functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ErrorFallback({ error, resetErrorBoundary }) {\n\treturn (\n\t\t<div role=\"alert\">\n\t\t\t<p>Something went wrong:</p>\n\t\t\t<pre style={{ color: 'red' }}>{error.message}</pre>\n\t\t\t<button onClick={resetErrorBoundary}>Try again</button>\n\t\t</div>\n\t)\n}\n\nfunction Bomb({ username }) {\n\tif (username === 'bomb') {\n\t\tthrow new Error('💥 CABOOM 💥')\n\t}\n\treturn `Hi ${username}`\n}\n\nfunction App() {\n\tconst [username, setUsername] = React.useState('')\n\tconst usernameRef = React.useRef(null)\n\n\treturn (\n\t\t<div>\n\t\t\t<label>\n\t\t\t\t{`Username (don't type \"bomb\"): `}\n\t\t\t\t<input\n\t\t\t\t\tplaceholder={`type \"bomb\"`}\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t\tref={usernameRef}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div>\n\t\t\t\t<ErrorBoundary\n\t\t\t\t\tFallbackComponent={ErrorFallback}\n\t\t\t\t\tonReset={() => {\n\t\t\t\t\t\tsetUsername('')\n\t\t\t\t\t\tusernameRef.current.focus()\n\t\t\t\t\t}}\n\t\t\t\t\tresetKeys={[username]}\n\t\t\t\t>\n\t\t\t\t\t<Bomb username={username} />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using react-error-boundary for Error Handling in React\nDESCRIPTION: This snippet shows how to use the react-error-boundary library to handle runtime errors in React components. It demonstrates a more declarative and efficient approach to error handling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ErrorBoundary } from 'react-error-boundary'\n\nfunction ErrorFallback({ error }) {\n\treturn (\n\t\t<div role=\"alert\">\n\t\t\t<p>Something went wrong:</p>\n\t\t\t<pre style={{ color: 'red' }}>{error.message}</pre>\n\t\t</div>\n\t)\n}\n\nfunction Greeting({ subject }) {\n\treturn <div>Hello {subject.toUpperCase()}</div>\n}\n\nfunction Farewell({ subject }) {\n\treturn <div>Goodbye {subject.toUpperCase()}</div>\n}\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<ErrorBoundary FallbackComponent={ErrorFallback}>\n\t\t\t\t<Greeting />\n\t\t\t\t<Farewell />\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t)\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Migrating Data from PostgreSQL to SQLite using Prisma\nDESCRIPTION: A TypeScript script that uses Prisma clients to migrate data from a PostgreSQL database to a SQLite database. It includes functions to upsert users, sessions, post reads, and calls.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { PrismaClient as SqliteClient } from '@prisma/client'\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { PrismaClient as PostgresClient } from '@prisma/client-postgres'\n\n// TIP: do not do this if you have lots of data...\nasync function main() {\n\tconst pg = new PostgresClient({\n\t\tdatasources: { db: { url: process.env.POSTGRES_DATABASE_URL } },\n\t})\n\tconst sq = new SqliteClient({\n\t\tdatasources: { db: { url: process.env.DATABASE_URL } },\n\t})\n\tawait pg.$connect()\n\tawait sq.$connect()\n\n\tconsole.log('connected 🔌')\n\n\tawait upsertUsers()\n\tawait upsertSessions()\n\tawait upsertPostReads()\n\tawait upsertCalls()\n\n\tconsole.log('✅  all finished')\n\n\tawait pg.$disconnect()\n\tawait sq.$disconnect()\n\n\tasync function upsertUsers() {\n\t\tconsole.time('users 👥')\n\t\tconst users = await pg.user.findMany()\n\t\tconsole.log(`Found ${users.length} users. Upserting them into SQLite ⤴️`)\n\t\tfor (const user of users) {\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait sq.user.upsert({\n\t\t\t\twhere: { id: user.id },\n\t\t\t\tupdate: user,\n\t\t\t\tcreate: user,\n\t\t\t})\n\t\t}\n\t\tconsole.timeEnd('users 👥')\n\t}\n\n\tasync function upsertSessions() {\n\t\tconsole.time('sessions 📊')\n\t\tconst sessions = await pg.session.findMany()\n\t\tconsole.log(\n\t\t\t`Found ${sessions.length} sessions. Upserting them into SQLite ⤴️`,\n\t\t)\n\t\tfor (const session of sessions) {\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait sq.session.upsert({\n\t\t\t\twhere: { id: session.id },\n\t\t\t\tupdate: session,\n\t\t\t\tcreate: session,\n\t\t\t})\n\t\t}\n\t\tconsole.timeEnd('sessions 📊')\n\t}\n\n\tasync function upsertPostReads() {\n\t\tconsole.time('postReads 📖')\n\t\tconst postReads = await pg.postRead.findMany()\n\t\tconsole.log(\n\t\t\t`Found ${postReads.length} post reads. Upserting them into SQLite ⤴️`,\n\t\t)\n\t\tfor (let index = 0; index < postReads.length; index++) {\n\t\t\tif (index % 100 === 0) {\n\t\t\t\tconsole.log(`Upserting ${index}`)\n\t\t\t}\n\t\t\tconst postRead = postReads[index]\n\t\t\tif (!postRead) {\n\t\t\t\tconsole.log('HUH??? No post read??', index)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait sq.postRead\n\t\t\t\t.upsert({\n\t\t\t\t\twhere: { id: postRead.id },\n\t\t\t\t\tupdate: postRead,\n\t\t\t\t\tcreate: postRead,\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error('error', err, postRead)\n\t\t\t\t})\n\t\t}\n\t\tconsole.timeEnd('postReads 📖')\n\t}\n\n\tasync function upsertCalls() {\n\t\tconsole.time('calls 📞')\n\t\tconst calls = await pg.call.findMany()\n\t\tconsole.log(`Found ${calls.length} calls. Upserting them into SQLite ⤴️`)\n\t\tfor (const call of calls) {\n\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\tawait sq.call.upsert({\n\t\t\t\twhere: { id: call.id },\n\t\t\t\tupdate: call,\n\t\t\t\tcreate: call,\n\t\t\t})\n\t\t}\n\t\tconsole.timeEnd('calls 📞')\n\t}\n}\n\nmain().catch((e) => {\n\tconsole.error(e)\n\tprocess.exit(1)\n})\n```\n\n----------------------------------------\n\nTITLE: Working with Array Methods in TypeScript\nDESCRIPTION: Demonstrates common array methods like find, some, every, includes, map, filter, and reduce with a practical example using dog data. Includes a React component example showing array method chaining.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst dogs = [\n\t{\n\t\tid: 'dog-1',\n\t\tname: 'Poodle',\n\t\ttemperament: [\n\t\t\t'Intelligent',\n\t\t\t'Active',\n\t\t\t'Alert',\n\t\t\t'Faithful',\n\t\t\t'Trainable',\n\t\t\t'Instinctual',\n\t\t],\n\t},\n\t{\n\t\tid: 'dog-2',\n\t\tname: 'Bernese Mountain Dog',\n\t\ttemperament: ['Affectionate', 'Intelligent', 'Loyal', 'Faithful'],\n\t},\n\t{\n\t\tid: 'dog-3',\n\t\tname: 'Labrador Retriever',\n\t\ttemperament: [\n\t\t\t'Intelligent',\n\t\t\t'Even Tempered',\n\t\t\t'Kind',\n\t\t\t'Agile',\n\t\t\t'Outgoing',\n\t\t\t'Trusting',\n\t\t\t'Gentle',\n\t\t],\n\t},\n]\n\ndogs.find((dog) => dog.name === 'Bernese Mountain Dog')\n// {id: 'dog-2', name: 'Bernese Mountain Dog', ...etc}\n\ndogs.some((dog) => dog.temperament.includes('Aggressive'))\n// false\n\ndogs.some((dog) => dog.temperament.includes('Trusting'))\n// true\n\ndogs.every((dog) => dog.temperament.includes('Trusting'))\n// false\n\ndogs.every((dog) => dog.temperament.includes('Intelligent'))\n// true\n\ndogs.map((dog) => dog.name)\n// ['Poodle', 'Bernese Mountain Dog', 'Labrador Retriever']\n\ndogs.filter((dog) => dog.temperament.includes('Faithful'))\n// [{id: 'dog-1', ..etc}, {id: 'dog-2', ...etc}]\n\ndogs.reduce((allTemperaments, dog) => {\n\treturn [...allTemperaments, ...dog.temperament]\n}, [])\n// [ 'Intelligent', 'Active', 'Alert', ...etc ]\n\n// in React:\nfunction RepositoryList({ repositories, owner }) {\n\treturn (\n\t\t<ul>\n\t\t\t{repositories\n\t\t\t\t.filter((repo) => repo.owner === owner)\n\t\t\t\t.map((repo) => (\n\t\t\t\t\t<li key={repo.id}>{repo.name}</li>\n\t\t\t\t))}\n\t\t</ul>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Tinypool for Worker Thread Management (TypeScript)\nDESCRIPTION: This snippet demonstrates how to use Tinypool to manage worker threads for Shiki syntax highlighting. It sets up the worker pool and runs the highlighting function in a separate thread.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fixing-a-memory-leak-in-a-production-node-js-app.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst tinypool = new Tinypool({\n\tfilename: require.resolve('./worker.js'),\n\tminThreads: 0,\n\tidleTimeout: 60,\n})\n\n// ...\n\nconst { tokens, fgColor, bgColor } = (await tinypool.run({\n\tcode: codeString,\n\tlanguage,\n})) as {\n\ttokens: Array<Array<{ content: string; color: string }>>\n\tfgColor: string\n\tbgColor: string\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PokemonData type in TypeScript\nDESCRIPTION: This snippet defines the PokemonData type, which represents the structure of the data returned by the fetchPokemon function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype PokemonData = {\n\tid: string\n\tnumber: string\n\tname: string\n\timage: string\n\tfetchedAt: string\n\tattacks: {\n\t\tspecial: Array<{\n\t\t\tname: string\n\t\t\ttype: string\n\t\t\tdamage: number\n\t\t}>\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Using Asynchronous Actions in React Components\nDESCRIPTION: This snippet demonstrates how to use the asynchronous action helper function within a React component. It shows the pattern for dispatching complex actions from a component using the context's dispatch function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_11\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useUser, updateUser } from './user-context'\n\nfunction UserSettings() {\n\tconst [{ user, status, error }, userDispatch] = useUser()\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tupdateUser(userDispatch, user, formState)\n\t}\n\n\t// more code...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing useDarkMode with useState in React\nDESCRIPTION: This snippet shows how to implement a custom useDarkMode hook using the useState hook in React. It manages the dark/light mode preference, syncs with system preferences, and persists the setting in localStorage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useDarkMode() {\n\tconst preferDarkQuery = '(prefers-color-scheme: dark)'\n\tconst [mode, setMode] = React.useState(\n\t\t() =>\n\t\t\twindow.localStorage.getItem('colorMode') ||\n\t\t\t(window.matchMedia(preferDarkQuery).matches ? 'dark' : 'light'),\n\t)\n\n\tReact.useEffect(() => {\n\t\tconst mediaQuery = window.matchMedia(preferDarkQuery)\n\t\tconst handleChange = () => setMode(mediaQuery.matches ? 'dark' : 'light')\n\t\tmediaQuery.addListener(handleChange)\n\t\treturn () => mediaQuery.removeListener(handleChange)\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\twindow.localStorage.setItem('colorMode', mode)\n\t}, [mode])\n\n\treturn [mode, setMode]\n}\n```\n\n----------------------------------------\n\nTITLE: Managing State for Error Handling in React Components\nDESCRIPTION: This example shows a React component that manages error state directly in the component state. It demonstrates handling asynchronous errors from a fetchGreeting function by updating component state and rendering a different UI based on the error status.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Greeting() {\n\tconst [{ status, greeting, error }, setState] = React.useState({\n\t\tstatus: 'idle',\n\t\tgreeting: null,\n\t\terror: null,\n\t})\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.name.value\n\t\tsetState({ status: 'pending' })\n\t\tfetchGreeting(name).then(\n\t\t\t(newGreeting) => setState({ greeting: newGreeting, status: 'resolved' }),\n\t\t\t(newError) => setState({ error: newError, status: 'rejected' }),\n\t\t)\n\t}\n\n\treturn status === 'rejected' ? (\n\t\t<ErrorFallback error={error} />\n\t) : status === 'resolved' ? (\n\t\t<div>{greeting}</div>\n\t) : (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<label>Name</label>\n\t\t\t<input id=\"name\" />\n\t\t\t<button type=\"submit\" onClick={handleClick}>\n\t\t\t\tget a greeting\n\t\t\t</button>\n\t\t</form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced React Counter with Lifecycle Logging\nDESCRIPTION: An extended counter implementation that demonstrates component lifecycle and effect handling with detailed console logging.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/understanding-reacts-key-prop/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconsole.log('Counter called')\n\n\tconst [count, setCount] = React.useState(() => {\n\t\tconsole.log('Counter useState initializer')\n\t\treturn 0\n\t})\n\tconst increment = () => setCount((c) => c + 1)\n\n\tReact.useEffect(() => {\n\t\tconsole.log('Counter useEffect callback')\n\t\treturn () => {\n\t\t\tconsole.log('Counter useEffect cleanup')\n\t\t}\n\t}, [])\n\n\tconsole.log('Counter returning react elements')\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction CounterParent() {\n\tconst [counterKey, setCounterKey] = React.useReducer((c) => c + 1, 0)\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setCounterKey}>reset</button>\n\t\t\t<Counter key={counterKey} />\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Undo/Redo with useReducer in React\nDESCRIPTION: This snippet demonstrates an implementation of the undo/redo feature using React's useReducer hook. It defines action types and a reducer function to handle state updates, providing a more robust solution to state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst UNDO = 'UNDO'\nconst REDO = 'REDO'\nconst SET = 'SET'\nconst RESET = 'RESET'\n\nfunction undoReducer(state, action) {\n\tconst { past, present, future } = state\n\tconst { type, newPresent } = action\n\n\tswitch (type) {\n\t\tcase UNDO: {\n\t\t\tif (past.length === 0) return state\n\n\t\t\tconst previous = past[past.length - 1]\n\t\t\tconst newPast = past.slice(0, past.length - 1)\n\n\t\t\treturn {\n\t\t\t\tpast: newPast,\n\t\t\t\tpresent: previous,\n\t\t\t\tfuture: [present, ...future],\n\t\t\t}\n\t\t}\n\n\t\tcase REDO: {\n\t\t\tif (future.length === 0) return state\n\n\t\t\tconst next = future[0]\n\t\t\tconst newFuture = future.slice(1)\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: next,\n\t\t\t\tfuture: newFuture,\n\t\t\t}\n\t\t}\n\n\t\tcase SET: {\n\t\t\tif (newPresent === present) return state\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: newPresent,\n\t\t\t\tfuture: [],\n\t\t\t}\n\t\t}\n\n\t\tcase RESET: {\n\t\t\treturn {\n\t\t\t\tpast: [],\n\t\t\t\tpresent: newPresent,\n\t\t\t\tfuture: [],\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction useUndo(initialPresent) {\n\tconst [state, dispatch] = React.useReducer(undoReducer, {\n\t\tpast: [],\n\t\tpresent: initialPresent,\n\t\tfuture: [],\n\t})\n\n\tconst canUndo = state.past.length !== 0\n\tconst canRedo = state.future.length !== 0\n\tconst undo = React.useCallback(() => dispatch({ type: UNDO }), [])\n\tconst redo = React.useCallback(() => dispatch({ type: REDO }), [])\n\tconst set = React.useCallback(\n\t\t(newPresent) => dispatch({ type: SET, newPresent }),\n\t\t[],\n\t)\n\tconst reset = React.useCallback(\n\t\t(newPresent) => dispatch({ type: RESET, newPresent }),\n\t\t[],\n\t)\n\n\treturn [state, { set, reset, undo, redo, canUndo, canRedo }]\n}\n```\n\n----------------------------------------\n\nTITLE: Using Nullish Coalescing Operator\nDESCRIPTION: Shows how to use the nullish coalescing operator (??) for providing default values when dealing with null or undefined. Includes examples with function parameters and React components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// here's what we often did for this:\nx = x || 'some default'\n\n// but this was problematic for numbers or booleans where \"0\" or \"false\" are valid values\n\n// So, if we wanted to support this:\nadd(null, 3)\n\n// here's what we had to do before:\nfunction add(a, b) {\n\ta = a == null ? 0 : a\n\tb = b == null ? 0 : b\n\treturn a + b\n}\n\n// here's what we can do now\nfunction add(a, b) {\n\ta = a ?? 0\n\tb = b ?? 0\n\treturn a + b\n}\n\n// in React:\nfunction DisplayContactName({ contact }) {\n\treturn <div>{contact.name ?? 'Unknown'}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Working Generic Constraint Implementation\nDESCRIPTION: Shows a working but verbose solution using curried functions to achieve generic type constraints.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst constrain =\n\t<Given extends unknown>() =>\n\t<Inferred extends Given>(item: Inferred) =>\n\t\titem\n\nconst numbers = constrain<Record<string, number>>()({ one: 1 /* etc. */ })\n```\n\n----------------------------------------\n\nTITLE: Demonstrating useState Return Values and Usage\nDESCRIPTION: Shows how useState returns state and a setState function, and the two ways the setState function can be called: with a new state value or with a function that computes the new state from previous state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst [state, setState] = useState()\nsetState(newState)\nsetState((previousState) => newState)\n```\n\n----------------------------------------\n\nTITLE: Fixing useEffect Dependencies\nDESCRIPTION: Demonstrates the correct way to handle object dependencies in useEffect by moving object creation inside the effect.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Foo({ bar, baz }) {\n\tReact.useEffect(() => {\n\t\tconst options = { bar, baz }\n\t\tbuzz(options)\n\t}, [bar, baz]) // we want this to re-run if bar or baz change\n\treturn <div>foobar</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Async Function Declaration in TypeScript\nDESCRIPTION: Shows how to define an async function using the function declaration syntax with a Promise return type. This example demonstrates the consistent typing pattern for async functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nasync function sum(a: number, b: number): Promise<number> {\n\treturn a + b\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Type Guard Function for Filtering Falsy Values in TypeScript\nDESCRIPTION: Implements a custom type guard function that helps TypeScript narrow types when filtering out falsy values from arrays. Uses the 'value is Type' pattern to inform the compiler about type narrowing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\ntype FalsyType = false | null | undefined | '' | 0\nfunction typedBoolean<ValueType>(\n\tvalue: ValueType,\n): value is Exclude<ValueType, FalsyType> {\n\treturn Boolean(value)\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing Stale Closure Bug with useState in React\nDESCRIPTION: This snippet shows an attempt to fix the stale closure bug by adding dependencies to the useEffect hooks. However, this leads to an infinite loop due to the nature of the useState implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Example() {\n\tconst [state, { set }] = useUndo('first')\n\n\tReact.useEffect(() => {\n\t\tset('second')\n\t}, [set])\n\n\tReact.useEffect(() => {\n\t\tset('third')\n\t}, [set])\n\n\treturn <pre>{JSON.stringify(state, null, 2)}</pre>\n}\n```\n\n----------------------------------------\n\nTITLE: useMemo for Expensive Calculations\nDESCRIPTION: Demonstrates using useMemo to optimize computationally expensive calculations and prevent unnecessary recalculations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nfunction RenderPrimes({ iterations, multiplier }) {\n\tconst primes = React.useMemo(\n\t\t() => calculatePrimes(iterations, multiplier),\n\t\t[iterations, multiplier],\n\t)\n\treturn <div>Primes! {primes}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Hook Implementation for Computed Values\nDESCRIPTION: Example using a custom useComputedValue hook to optimize derived state calculations by only computing when the result is actually used.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nfunction FavoriteNumber() {\n\tconst [name, setName] = React.useState('')\n\tconst [number, setNumber] = React.useState(0)\n\tconst numberWarning = useComputedValue(\n\t\t() => getNumberWarning(number),\n\t\t[number],\n\t)\n\treturn (\n\t\t<div>\n\t\t\t<label>\n\t\t\t\tYour name: <input onChange={(e) => setName(e.target.value)} />\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\tYour favorite number:{' '}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tonChange={(e) => setNumber(Number(e.target.value))}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div>\n\t\t\t\t{name\n\t\t\t\t\t? `${name}'s favorite number is ${number}`\n\t\t\t\t\t: 'Please type your name'}\n\t\t\t</div>\n\t\t\t<div>{number > 10 ? numberWarning.result : null}</div>\n\t\t\t<div>{number < 0 ? numberWarning.result : null}</div>\n\t\t</div>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Test Function in JavaScript\nDESCRIPTION: A simple example showing how to create a basic test without any testing framework. The code demonstrates testing a sum function by comparing expected and actual results, throwing an error if they don't match.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/demystifying-testing.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst { sum } = require('../math')\n\nconst result = sum(3, 7)\nconst expected = 10\nif (result !== expected) {\n\tthrow new Error(`${result} is not equal to ${expected}`)\n}\n```\n\n----------------------------------------\n\nTITLE: Improved Password Validation Tests\nDESCRIPTION: Corrected test suite that properly validates each password requirement independently with appropriate test cases that will fail if specific validation rules are removed.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-test-fail.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// __tests__/utils.js\nimport { isPasswordAllowed } from '#app/utils'\n\ntest('allows passwords that are good', () => {\n\texpect(isPasswordAllowed('Ab3.efgh')).toBe(true)\n})\n\ntest('disallows passwords less than 7 characters', () => {\n\texpect(isPasswordAllowed('Ab3.ef')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a non-alphanumeric character', () => {\n\texpect(isPasswordAllowed('Ab3efgh')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a digit', () => {\n\texpect(isPasswordAllowed('Ab.efgh')).toBe(false)\n})\n\ntest('disallows passwords that do not contain an uppercase letter', () => {\n\texpect(isPasswordAllowed('b3.efgh')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a lowercase letter', () => {\n\texpect(isPasswordAllowed('A3.EFGH')).toBe(false)\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing React Profiler Component\nDESCRIPTION: Demonstrates how to use React's Profiler component to wrap parts of the application for performance monitoring. The Profiler is set up with an id and an onRender callback function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-production-performance-monitoring.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<App>\n\t<Profiler id=\"Navigation\" onRender={onRenderCallback}>\n\t\t<Navigation />\n\t</Profiler>\n\t<Main />\n</App>\n```\n\n----------------------------------------\n\nTITLE: Implementing Loaders and Error Boundaries in Remix with TypeScript\nDESCRIPTION: This snippet demonstrates how to create a loader function that runs on the server, handle different types of errors using ErrorBoundary, and render data in a React component. It showcases Remix's approach to data fetching and error handling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function loader({ request, params }: LoaderFunctionArgs) {\n\t// this runs on the server\n\t// unexpected runtime errors will trigger the ErrorBoundary to be rendered\n\t// expected errors (like 401s, 404s, etc) will render the CatchBoundary\n\t// otherwise I can return a response and that'll render the default component\n\treturn json(data)\n}\n\nexport default function AttendeesRoute() {\n\tconst data = useLoaderData()\n\treturn <div>{/* render the data */}</div>\n}\n\nexport function ErrorBoundary() {\n\tconst error = useRouteError()\n\t// when true, this is what used to go to `CatchBoundary` in Remix v1\n\tif (isRouteErrorResponse(error)) {\n\t\treturn <div>{/* render the error for 400-status level responses */}</div>\n\t}\n\treturn <div>{/* render an \"unexpected error\" message */}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ImperativeCounter Component with useImperativeHandle in React\nDESCRIPTION: This snippet demonstrates the creation of an ImperativeCounter component using React's useImperativeHandle hook. It exposes increment and decrement methods that modify the internal state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ImperativeCounter(props, ref) {\n\tconst [count, setCount] = React.useState(0)\n\tReact.useImperativeHandle(ref, () => ({\n\t\tincrement: () => setCount((c) => c + 1),\n\t\tdecrement: () => setCount((c) => c - 1),\n\t}))\n\treturn <div>The count is: {count}</div>\n}\nImperativeCounter = React.forwardRef(ImperativeCounter)\n```\n\n----------------------------------------\n\nTITLE: Generics with Function Declaration in TypeScript\nDESCRIPTION: Demonstrates using generics with a function declaration to create a type-safe function that works with any type. The generic type parameter preserves the input type in the return value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction arrayify2<Type>(a: Type): Array<Type> {\n\treturn [a]\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Function Overloads in TypeScript\nDESCRIPTION: Demonstrates how to define function overloads to support multiple calling patterns with different parameter combinations and return types. The implementation must accommodate all defined signatures.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ntype asyncSumCb = (result: number) => void\n// define all valid function signatures\nfunction asyncSum(a: number, b: number): Promise<number>\nfunction asyncSum(a: number, b: number, cb: asyncSumCb): void\n// define the actual implementation\n// notice cb is optional\n// also notice that the return type is inferred, but it could be specified\n// as `void | Promise<number>`\nfunction asyncSum(a: number, b: number, cb?: asyncSumCb) {\n\tconst result = a + b\n\tif (cb) return cb(result)\n\telse return Promise.resolve(result)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Shiki Syntax Highlighting in a Worker Thread (JavaScript)\nDESCRIPTION: This code snippet shows how to set up Shiki syntax highlighting in a worker thread using tinypool. It loads themes, initializes the highlighter, and processes code for syntax highlighting.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fixing-a-memory-leak-in-a-production-node-js-app.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst path = require('path')\nconst { getHighlighter, loadTheme } = require('shiki')\n\nconst themeName = 'base16'\nlet theme, highlighter\n\nmodule.exports = async function highlight({ code, language }) {\n\ttheme = theme || (await loadTheme(path.resolve(__dirname, 'base16.json')))\n\thighlighter = highlighter || (await getHighlighter({ themes: [theme] }))\n\tconst fgColor = convertFakeHexToCustomProp(\n\t\thighlighter.getForegroundColor(themeName) || '',\n\t)\n\tconst bgColor = convertFakeHexToCustomProp(\n\t\thighlighter.getBackgroundColor(themeName) || '',\n\t)\n\n\tconst tokens = highlighter.codeToThemedTokens(code, language, themeName)\n\treturn {\n\t\tfgColor,\n\t\tbgColor,\n\t\ttokens: tokens.map((lineTokens) =>\n\t\t\tlineTokens.map((t) => ({ content: t.content, color: t.color })),\n\t\t),\n\t}\n}\n\n// The theme actually stores #FFFF${base-16-color-id} because vscode-textmate\n// requires colors to be valid hex codes, if they aren't, it changes them to a\n// default, so this is a mega hack to trick it.\nfunction convertFakeHexToCustomProp(color) {\n\treturn color.replace(/^#FFFF(.+)/, 'var(--base$1)')\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Jest-like Mocking Functionality in Pure Node.js\nDESCRIPTION: This code snippet demonstrates how to create a simple mock function and override a module's exports to simulate Jest's inline mocking capabilities using pure Node.js. It includes a custom 'fn' function to create mock functions and manipulates the require.cache to replace a module's exports.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-merits-of-mocking.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction fn(impl = () => {}) {\n\tconst mockFn = (...args) => {\n\t\tmockFn.mock.calls.push(args)\n\t\treturn impl(...args)\n\t}\n\tmockFn.mock = { calls: [] }\n\treturn mockFn\n}\n\nconst utilsPath = require.resolve('#app/utils')\nrequire.cache[utilsPath] = {\n\tid: utilsPath,\n\tfilename: utilsPath,\n\tloaded: true,\n\texports: {\n\t\tgetWinner: fn((p1, p2) => p1),\n\t},\n}\n```\n\n----------------------------------------\n\nTITLE: Utilizing Arrow Functions in React Components\nDESCRIPTION: Demonstrates the use of arrow functions for creating concise function expressions, particularly useful in React for callback functions and implicit returns in JSX.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst getFive = () => 5\nconst addFive = (a) => a + 5\nconst divide = (a, b) => a / b\n\n// this is the same as:\nfunction getFive() {\n\treturn 5\n}\nfunction addFive(a) {\n\treturn a + 5\n}\nfunction divide(a, b) {\n\treturn a / b\n}\n\n// in React:\nfunction TeddyBearList({ teddyBears }) {\n\treturn (\n\t\t<ul>\n\t\t\t{teddyBears.map((teddyBear) => (\n\t\t\t\t<li key={teddyBear.id}>\n\t\t\t\t\t<span>{teddyBear.name}</span>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Async Counter with Function Updates (Fixed)\nDESCRIPTION: Correct implementation of an async counter using function updates to handle state updates properly.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DelayedCounter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = async () => {\n\t\tawait doSomethingAsync()\n\t\tsetCount((previousCount) => previousCount + 1)\n\t}\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Form Submissions with Remix Action Functions\nDESCRIPTION: This snippet demonstrates how to handle form submissions in Remix using the action function and Form component. It shows server-side form processing without needing client-side event handlers or fetch calls.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function action({ request }: ActionFunctionArgs) {\n\t// this runs on the server and I can handle the request form data here\n\t// whether that be a direct database interaction or calling a downstream\n\t// service to perform the actual mutation. It's just brilliant.\n\treturn redirect(/* send the user wherever you like after this */)\n}\n\nexport default function AttendeesRoute() {\n\t// look mah! No event handler or useEffect necessary!\n\t// race conditions handled.\n\treturn (\n\t\t<Form method=\"POST\">\n\t\t\t<div>\n\t\t\t\t<label htmlFor=\"name-input\">Name: </label>\n\t\t\t\t<input id=\"name-input\" name=\"name\" />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label htmlFor=\"email-input\">Email: </label>\n\t\t\t\t<input id=\"email-input\" name=\"email\" type=\"email\" />\n\t\t\t</div>\n\t\t\t<button type=\"submit\">Add Attendee</button>\n\t\t</Form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing route-specific CSS in Remix\nDESCRIPTION: A Remix code example showing how to define route-specific CSS files using the links export function. This implementation ensures CSS is only loaded when the route is active and removed when navigating away.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-remix-makes-css-clashes-predictable.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { LinksFunction } from 'remix'\nimport aboutStyles from '#app/styles/routes/about.css'\n\nexport const links: LinksFunction = () => {\n\treturn [{ rel: 'stylesheet', href: aboutStyles }]\n}\n\nexport default function AboutScreen() {\n\treturn <stuff />\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring Candy Function with ES6 Default Parameters in JavaScript\nDESCRIPTION: This snippet refactors the getCandy function using ES6 default parameters. It demonstrates how to handle required parameters, provide default values, and use parameter references in default expressions, resulting in more concise and expressive code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-default-parameters.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getCandy(\n\tkind = requiredParam('kind'),\n\tsize = requiredParam('size'),\n\tupperKind = kind.toUpperCase(),\n\tcallback = function noop() {},\n) {\n\tconst result = { kind, size, upperKind }\n\tcallback(result)\n\treturn result\n}\n\nfunction requiredParam(argName) {\n\tthrow new Error(`${argName} is required`)\n}\n```\n\n----------------------------------------\n\nTITLE: useState Implementation in React\nDESCRIPTION: Shows the actual implementation of useState hook in React, revealing that it's built on top of useReducer.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-array-destructuring-fundamentals.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useState(initialState) {\n\treturn useReducer(\n\t\tbasicStateReducer,\n\t\t// useReducer has a special case to support lazy useState initializers\n\t\tinitialState,\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Jest Snapshot Serializer\nDESCRIPTION: Creates a custom snapshot serializer that normalizes file paths across different operating systems by replacing the project root path with a placeholder and standardizing path separators.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/effective-snapshot-testing.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst projectRoot = path.join(__dirname, '../../')\nexpect.addSnapshotSerializer({\n  test: val => typeof val === 'string',\n  print: val =>\n    val\n      .split(projectRoot)\n      .join('<PROJECT_ROOT>/')\n      .replace(/\\/g, '/'),\n})\n```\n\n----------------------------------------\n\nTITLE: Optional and Default Parameters\nDESCRIPTION: Implementation of optional and default parameters in TypeScript functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = (a: number, b?: number): number => a + (b ?? 0)\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = (a: number | undefined, b: number): number => (a ?? 0) + b\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = (a: number, b: number = 0): number => a + b\n```\n\n----------------------------------------\n\nTITLE: Proper Usage of waitFor in React Testing Library\nDESCRIPTION: Demonstrates the correct way to use waitFor by including specific assertions in the callback, rather than using an empty callback.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nawait waitFor(() => {})\nexpect(window.fetch).toHaveBeenCalledWith('foo')\nexpect(window.fetch).toHaveBeenCalledTimes(1)\n\n// ✅\nawait waitFor(() => expect(window.fetch).toHaveBeenCalledWith('foo'))\nexpect(window.fetch).toHaveBeenCalledTimes(1)\n```\n\n----------------------------------------\n\nTITLE: Implementing try/catch Error Handling in React Components\nDESCRIPTION: This snippet demonstrates a naive approach to error handling in React components using try/catch blocks. While functional, it requires wrapping every component individually, which is not ideal.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nfunction ErrorFallback({ error }) {\n\treturn (\n\t\t<div role=\"alert\">\n\t\t\t<p>Something went wrong:</p>\n\t\t\t<pre style={{ color: 'red' }}>{error.message}</pre>\n\t\t</div>\n\t)\n}\n\nfunction Greeting({ subject }) {\n\ttry {\n\t\treturn <div>Hello {subject.toUpperCase()}</div>\n\t} catch (error) {\n\t\treturn <ErrorFallback error={error} />\n\t}\n}\n\nfunction Farewell({ subject }) {\n\ttry {\n\t\treturn <div>Goodbye {subject.toUpperCase()}</div>\n\t} catch (error) {\n\t\treturn <ErrorFallback error={error} />\n\t}\n}\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<Greeting />\n\t\t\t<Farewell />\n\t\t</div>\n\t)\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Using React Toggle Component with Prop Getters\nDESCRIPTION: This code snippet demonstrates how to use the Toggle component with prop getters. It shows how to apply the getTogglerProps function to a button element, allowing for custom onClick behavior while maintaining the toggle functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-give-rendering-control-to-users-with-prop-getters.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<Toggle>\n\t{({ on, getTogglerProps }) => (\n\t\t<div>\n\t\t\t<button\n\t\t\t\t{...getTogglerProps({\n\t\t\t\t\tonClick() {\n\t\t\t\t\t\talert('you clicked!')\n\t\t\t\t\t},\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\tToggle me\n\t\t\t</button>\n\t\t\t<div>{on ? 'Toggled On' : 'Toggled Off'}</div>\n\t\t</div>\n\t)}\n</Toggle>\n```\n\n----------------------------------------\n\nTITLE: Testing useUndo hook with custom setup function in JavaScript\nDESCRIPTION: This snippet demonstrates a custom setup function for testing the useUndo hook. It creates a test component that uses the hook and returns its values for assertion in the test.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-test-custom-react-hooks/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as React from 'react'\nimport { render, act } from '@testing-library/react'\nimport useUndo from '../use-undo'\n\nfunction setup(...args) {\n\tconst returnVal = {}\n\tfunction TestComponent() {\n\t\tObject.assign(returnVal, useUndo(...args))\n\t\treturn null\n\t}\n\trender(<TestComponent />)\n\treturn returnVal\n}\n\ntest('allows you to undo and redo', () => {\n\tconst undoData = setup('one')\n\n\t// assert initial state\n\texpect(undoData.canUndo).toBe(false)\n\texpect(undoData.canRedo).toBe(false)\n\texpect(undoData.past).toEqual([])\n\texpect(undoData.present).toEqual('one')\n\texpect(undoData.future).toEqual([])\n\n\t// add second value\n\tact(() => {\n\t\tundoData.set('two')\n\t})\n\n\t// assert new state\n\texpect(undoData.canUndo).toBe(true)\n\texpect(undoData.canRedo).toBe(false)\n\texpect(undoData.past).toEqual(['one'])\n\texpect(undoData.present).toEqual('two')\n\texpect(undoData.future).toEqual([])\n\n\t// add third value\n\tact(() => {\n\t\tundoData.set('three')\n\t})\n\n\t// assert new state\n\texpect(undoData.canUndo).toBe(true)\n\texpect(undoData.canRedo).toBe(false)\n\texpect(undoData.past).toEqual(['one', 'two'])\n\texpect(undoData.present).toEqual('three')\n\texpect(undoData.future).toEqual([])\n\n\t// undo\n\tact(() => {\n\t\tundoData.undo()\n\t})\n\n\t// assert \"undone\" state\n\texpect(undoData.canUndo).toBe(true)\n\texpect(undoData.canRedo).toBe(true)\n\texpect(undoData.past).toEqual(['one'])\n\texpect(undoData.present).toEqual('two')\n\texpect(undoData.future).toEqual(['three'])\n\n\t// undo again\n\tact(() => {\n\t\tundoData.undo()\n\t})\n\n\t// assert \"double-undone\" state\n\texpect(undoData.canUndo).toBe(false)\n\texpect(undoData.canRedo).toBe(true)\n\texpect(undoData.past).toEqual([])\n\texpect(undoData.present).toEqual('one')\n\texpect(undoData.future).toEqual(['two', 'three'])\n\n\t// redo\n\tact(() => {\n\t\tundoData.redo()\n\t})\n\n\t// assert undo + undo + redo state\n\texpect(undoData.canUndo).toBe(true)\n\texpect(undoData.canRedo).toBe(true)\n\texpect(undoData.past).toEqual(['one'])\n\texpect(undoData.present).toEqual('two')\n\texpect(undoData.future).toEqual(['three'])\n\n\t// add fourth value\n\tact(() => {\n\t\tundoData.set('four')\n\t})\n\n\t// assert final state (note the lack of \"third\")\n\texpect(undoData.canUndo).toBe(true)\n\texpect(undoData.canRedo).toBe(false)\n\texpect(undoData.past).toEqual(['one', 'two'])\n\texpect(undoData.present).toEqual('four')\n\texpect(undoData.future).toEqual([])\n})\n```\n\n----------------------------------------\n\nTITLE: Testing React Components with Explicit Mocking in TypeScript\nDESCRIPTION: This code demonstrates how to properly test a React component by mocking dependencies using Jest's mocking capabilities rather than shallow rendering. It tests the HiddenMessage component by mocking the CSSTransition component from react-transition-group and verifies both the component's behavior and its proper usage of dependencies.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\nimport { CSSTransition } from 'react-transition-group'\n\nimport { HiddenMessage } from '../hidden-message'\n\n// NOTE: you do NOT have to do this in every test.\n// Learn more about Jest's __mocks__ directory:\n// https://jestjs.io/docs/en/manual-mocks\njest.mock('react-transition-group', () => {\n\treturn {\n\t\tCSSTransition: jest.fn(({ children, in: show }) =>\n\t\t\tshow ? children : null,\n\t\t),\n\t}\n})\n\ntest('you can mock things with jest.mock', () => {\n\trender(<HiddenMessage initialShow={true} />)\n\tconst toggleButton = screen.getByText(/toggle/i)\n\n\tconst context = expect.any(Object)\n\tconst children = expect.any(Object)\n\tconst defaultProps = { children, timeout: 1000, className: 'fade' }\n\n\texpect(CSSTransition).toHaveBeenCalledWith(\n\t\t{ in: true, ...defaultProps },\n\t\tcontext,\n\t)\n\texpect(screen.getByText(/hello world/i)).not.toBeNull()\n\n\tCSSTransition.mockClear()\n\n\tuserEvent.click(toggleButton)\n\n\texpect(screen.queryByText(/hello world/i)).toBeNull()\n\texpect(CSSTransition).toHaveBeenCalledWith(\n\t\t{ in: false, ...defaultProps },\n\t\tcontext,\n\t)\n})\n```\n\n----------------------------------------\n\nTITLE: Enhancing useCount Hook with Common Logic in React\nDESCRIPTION: Extends the useCount hook to include common state update logic like increment. Demonstrates how to centralize state management logic.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useCount() {\n\tconst context = React.useContext(CountContext)\n\tif (!context) {\n\t\tthrow new Error(`useCount must be used within a CountProvider`)\n\t}\n\tconst [count, setCount] = context\n\n\tconst increment = () => setCount((c) => c + 1)\n\treturn {\n\t\tcount,\n\t\tsetCount,\n\t\tincrement,\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Initial State Machine Structure\nDESCRIPTION: Basic setup for a state machine creator function and usage example showing transition between on/off states.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction createMachine(stateMachineDefinition) {\n\tconst machine = {\n\t\t// machine object\n\t}\n\treturn machine\n}\n\n// here's how we'll create the state machine\nconst machine = createMachine({\n\t// state machine definition object here...\n})\n\n// here's how we use the state machine\n// comments are what we _want_ to have logged\nlet state = machine.value\nconsole.log(`current state: ${state}`) // current state: off\n\nstate = machine.transition(state, 'switch')\nconsole.log(`current state: ${state}`) // current state: on\n\nstate = machine.transition(state, 'switch')\nconsole.log(`current state: ${state}`) // current state: off\n```\n\n----------------------------------------\n\nTITLE: Centralized Fetch Mock Implementation\nDESCRIPTION: Shows how to implement a centralized fetch mock that handles multiple endpoints and authentication scenarios.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nasync function mockFetch(url, config) {\n\tswitch (url) {\n\t\tcase '/login': {\n\t\t\tconst user = await users.login(JSON.parse(config.body))\n\t\t\treturn {\n\t\t\t\tok: true,\n\t\t\t\tstatus: 200,\n\t\t\t\tjson: async () => ({ user }),\n\t\t\t}\n\t\t}\n\t\tcase '/checkout': {\n\t\t\tconst isAuthorized = user.authorize(config.headers.Authorization)\n\t\t\tif (!isAuthorized) {\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\tok: false,\n\t\t\t\t\tstatus: 401,\n\t\t\t\t\tjson: async () => ({ message: 'Not authorized' }),\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst shoppingCart = JSON.parse(config.body)\n\t\t\treturn {\n\t\t\t\tok: true,\n\t\t\t\tstatus: 200,\n\t\t\t\tjson: async () => ({ success: true }),\n\t\t\t}\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled request: ${url}`)\n\t\t}\n\t}\n}\n\nbeforeAll(() => jest.spyOn(window, 'fetch'))\nbeforeEach(() => window.fetch.mockImplementation(mockFetch))\n```\n\n----------------------------------------\n\nTITLE: Implementing Geolocation State Machine with XState in React\nDESCRIPTION: This snippet creates a complete state machine for handling geolocation using XState. It defines states (idle, pending, resolved, rejected), transitions between states, and implements the useGeoPosition hook that manages the geolocation API.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createMachine, assign } from 'xstate'\nimport { useMachine } from '@xstate/react'\n\nconst context = { position: null, error: null }\nconst RESOLVE = {\n\ttarget: 'resolved',\n\tactions: 'setPosition',\n}\nconst REJECT = {\n\ttarget: 'rejected',\n\tactions: 'setError',\n}\nconst geoPositionMachine = createMachine(\n\t{\n\t\tid: 'geoposition',\n\t\tinitial: 'idle',\n\t\tcontext,\n\t\tstates: {\n\t\t\tidle: {\n\t\t\t\ton: {\n\t\t\t\t\tSTART: 'pending',\n\t\t\t\t\tREJECT_NOT_SUPPORTED: 'rejectedNotSupported',\n\t\t\t\t},\n\t\t\t},\n\t\t\tpending: {\n\t\t\t\ton: { RESOLVE, REJECT },\n\t\t\t},\n\t\t\tresolved: {\n\t\t\t\ton: { RESOLVE, REJECT },\n\t\t\t},\n\t\t\trejected: {\n\t\t\t\ton: { RESOLVE, REJECT },\n\t\t\t},\n\t\t\trejectedNotSupported: {},\n\t\t},\n\t},\n\t{\n\t\tactions: {\n\t\t\tsetPosition: assign({\n\t\t\t\tposition: (context, event) => event.position,\n\t\t\t}),\n\t\t\tsetError: assign({\n\t\t\t\terror: (context, event) => event.error,\n\t\t\t}),\n\t\t},\n\t},\n)\n\nfunction useGeoPosition() {\n\tconst [state, send] = useMachine(geoPositionMachine)\n\n\tReact.useEffect(() => {\n\t\tif (!navigator.geolocation) {\n\t\t\tsend('REJECT_NOT_SUPPORTED')\n\t\t\treturn\n\t\t}\n\t\tsend('START')\n\t\tconst geoWatch = navigator.geolocation.watchPosition(\n\t\t\t(position) => send({ type: 'RESOLVE', position }),\n\t\t\t(error) => send({ type: 'REJECT', error }),\n\t\t)\n\t\treturn () => navigator.geolocation.clearWatch(geoWatch)\n\t}, [send])\n\n\treturn state\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple React Element with JSX and JavaScript\nDESCRIPTION: Demonstrates the simplest example of JSX and its equivalent React.createElement call for creating a div element with text content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nui = <div id=\"root\">Hello world</div>\n```\n\nLANGUAGE: js\nCODE:\n```\nui = React.createElement('div', { id: 'root' }, 'Hello world')\n```\n\n----------------------------------------\n\nTITLE: Incorrect Conditional Rendering with && in React JSX\nDESCRIPTION: This code snippet demonstrates an incorrect way of conditionally rendering a list of contacts using &&, which can lead to rendering 0 when the contacts array is empty.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ContactList({ contacts }) {\n\treturn (\n\t\t<div>\n\t\t\t<ul>\n\t\t\t\t{contacts.length &&\n\t\t\t\t\tcontacts.map((contact) => (\n\t\t\t\t\t\t<li key={contact.id}>\n\t\t\t\t\t\t\t{contact.firstName} {contact.lastName}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Querying by text content instead of test IDs in React Testing Library\nDESCRIPTION: Shows how to query elements by their actual text content rather than using test IDs, which provides better confidence in translations and improves test readability and maintainability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nscreen.getByTestId('submit-button')\n\n// ✅\nscreen.getByRole('button', { name: /submit/i })\n```\n\n----------------------------------------\n\nTITLE: Implementing callAll Function for Prop Getters\nDESCRIPTION: This code snippet shows the implementation of the callAll function, which is used in prop getters to combine multiple event handlers. It allows both the component's internal handlers and user-provided handlers to be called for the same event.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-give-rendering-control-to-users-with-prop-getters.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst callAll =\n\t(...fns) =>\n\t(...args) =>\n\t\tfns.forEach((fn) => fn && fn(...args))\n```\n\n----------------------------------------\n\nTITLE: Unit Testing FruitAutocomplete Render Function\nDESCRIPTION: This code snippet demonstrates unit testing the render function of FruitAutocomplete component by extracting and exporting it separately. It tests menu visibility and item rendering based on input value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-components-using-render-props.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport * as React from 'react'\nimport { render } from 'enzyme'\n\nconst downshiftStub = {\n\tisOpen: false,\n\tgetLabelProps: (p) => p,\n\tgetInputProps: (p) => p,\n\tgetItemProps: (p) => p,\n}\n\nconst sel = (id) => `[data-test=\"${id}\"]`\nconst hasMenu = (wrapper) => wrapper.find(sel('menu')).length === 1\nconst hasItem = (wrapper, item) =>\n\twrapper.find(sel(`item-${item}`)).length === 1\nconst renderFruitAutocompleteRenderer = (props) =>\n\trender(fruitAutocompleteRender({ ...downshiftStub, ...props }))\n\ntest('shows no menu when isOpen is false', () => {\n\tconst wrapper = renderFruitAutocompleteRenderer({ isOpen: false })\n\texpect(hasMenu(wrapper)).toBe(false)\n})\n\ntest('shows the menu when isOpen is true', () => {\n\tconst wrapper = renderFruitAutocompleteRenderer({ isOpen: true })\n\texpect(hasMenu(wrapper)).toBe(true)\n})\n\ntest('when the inputValue is banana, it shows banana', () => {\n\tconst wrapper = renderFruitAutocompleteRenderer({\n\t\tisOpen: true,\n\t\tinputValue: 'banana',\n\t})\n\texpect(hasItem(wrapper, 'banana')).toBe(true)\n})\n```\n\n----------------------------------------\n\nTITLE: Async React Component with Interaction Tracing\nDESCRIPTION: Final implementation showing how to use both unstable_trace and unstable_wrap for tracking asynchronous interactions in React.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tracing-user-interactions-with-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// your other imports\nimport {\n\tunstable_trace as trace,\n\tunstable_wrap as wrap,\n} from 'scheduler/tracing'\n\nfunction Greeting() {\n\tconst [greeting, setGreeting] = React.useState('')\n\n\t// please don't judge me, I'm leaving out loading and error states and cancelation\n\t// to simplify this example!\n\tconst [name, setName] = React.useState('')\n\n\tReact.useEffect(() => {\n\t\tif (!name) {\n\t\t\treturn\n\t\t}\n\t\ttrace('name updated', performance.now(), () => {\n\t\t\tconst onSuccess = wrap((newGreeting) => setGreeting(newGreeting))\n\t\t\tfetchGreeting(name).then(onSuccess)\n\t\t})\n\t}, [name])\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tsetName(event.target.elements.name.value)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"name\">Name:</label>\n\t\t\t\t<input id=\"name\" />\n\t\t\t</form>\n\t\t\t<div>{greeting}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Testing React Accordion Component with React Testing Library\nDESCRIPTION: A comprehensive test implementation using React Testing Library that verifies accordion functionality through user interactions rather than implementation details. Tests opening/closing behavior and content visibility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-implementation-details.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/accordion.rtl.js\nimport '@testing-library/jest-dom/extend-expect'\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport Accordion from '../accordion'\n\ntest('can open accordion items to see the contents', () => {\n\tconst hats = { title: 'Favorite Hats', contents: 'Fedoras are classy' }\n\tconst footware = {\n\t\ttitle: 'Favorite Footware',\n\t\tcontents: 'Flipflops are the best',\n\t}\n\trender(<Accordion items={[hats, footware]} />)\n\n\texpect(screen.getByText(hats.contents)).toBeInTheDocument()\n\texpect(screen.queryByText(footware.contents)).not.toBeInTheDocument()\n\n\tuserEvent.click(screen.getByText(footware.title))\n\n\texpect(screen.getByText(footware.contents)).toBeInTheDocument()\n\texpect(screen.queryByText(hats.contents)).not.toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with Mocked Promise in TypeScript\nDESCRIPTION: This example shows an alternative approach to testing a React component by mocking the updateUsername promise and using act to wait for its resolution.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\ntest('calls updateUsername with the new username', async () => {\n\tconst promise = Promise.resolve() // You can also resolve with a mocked return value if necessary\n\tconst handleUpdateUsername = jest.fn(() => promise)\n\tconst fakeUsername = 'sonicthehedgehog'\n\n\trender(<UsernameForm updateUsername={handleUpdateUsername} />)\n\n\tconst usernameInput = screen.getByLabelText(/username/i)\n\tuser.type(usernameInput, fakeUsername)\n\tuser.click(screen.getByText(/submit/i))\n\n\texpect(handleUpdateUsername).toHaveBeenCalledWith(fakeUsername)\n\t// we await the promise instead of returning directly, because act expects a \"void\" result\n\tawait act(async () => {\n\t\tawait promise\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Basic State Reducer Implementation\nDESCRIPTION: Shows the implementation of the basic state reducer used by useState internally.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-array-destructuring-fundamentals.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction basicStateReducer(state, action) {\n\treturn typeof action === 'function' ? action(state) : action\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Toggle Compound Component Implementation\nDESCRIPTION: Full implementation of Toggle compound components using React Context and Hooks, including context creation, provider setup, and child components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compound-components-with-react-hooks.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n// this switch implements a checkbox input and is not relevant for this example\nimport { Switch } from '../switch'\n\nconst ToggleContext = React.createContext()\n\nfunction useEffectAfterMount(cb, dependencies) {\n\tconst justMounted = React.useRef(true)\n\tReact.useEffect(() => {\n\t\tif (!justMounted.current) {\n\t\t\treturn cb()\n\t\t}\n\t\tjustMounted.current = false\n\t}, dependencies)\n}\n\nfunction Toggle(props) {\n\tconst [on, setOn] = React.useState(false)\n\tconst toggle = React.useCallback(() => setOn((oldOn) => !oldOn), [])\n\tuseEffectAfterMount(() => {\n\t\tprops.onToggle(on)\n\t}, [on])\n\tconst value = React.useMemo(() => ({ on, toggle }), [on])\n\treturn (\n\t\t<ToggleContext.Provider value={value}>\n\t\t\t{props.children}\n\t\t</ToggleContext.Provider>\n\t)\n}\n\nfunction useToggleContext() {\n\tconst context = React.useContext(ToggleContext)\n\tif (!context) {\n\t\tthrow new Error(\n\t\t\t`Toggle compound components cannot be rendered outside the Toggle component`,\n\t\t)\n\t}\n\treturn context\n}\n\nfunction ToggleOn({ children }) {\n\tconst { on } = useToggleContext()\n\treturn on ? children : null\n}\n\nfunction ToggleOff({ children }) {\n\tconst { on } = useToggleContext()\n\treturn on ? null : children\n}\n\nfunction ToggleButton(props) {\n\tconst { on, toggle } = useToggleContext()\n\treturn <Switch on={on} onClick={toggle} {...props} />\n}\n```\n\n----------------------------------------\n\nTITLE: Avoiding 'wrapper' variable names in React Testing Library\nDESCRIPTION: Demonstrates how to properly destructure the result from render() rather than using the legacy 'wrapper' variable name from enzyme. This approach is more aligned with Testing Library's design principles.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nconst wrapper = render(<Example prop=\"1\" />)\nwrapper.rerender(<Example prop=\"2\" />)\n\n// ✅\nconst { rerender } = render(<Example prop=\"1\" />)\nrerender(<Example prop=\"2\" />)\n```\n\n----------------------------------------\n\nTITLE: Updating Prisma Schema for SQLite Migration\nDESCRIPTION: This diff shows the changes made to the Prisma schema file to migrate from PostgreSQL to SQLite. It includes changing the provider and adapting enum types to strings due to SQLite's lack of enum support.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\ndatasource db {\n  provider = \"postgresql\"\n  provider = \"sqlite\"\n  url      = env(\"DATABASE_URL\")\n}\n\n...\n\nenum Role {\n  ADMIN\n  MEMBER\n}\n\nenum Team {\n  BLUE\n  RED\n  YELLOW\n}\n\nmodel User {\n  id           String     @id @default(uuid())\n  createdAt    DateTime   @default(now())\n  updatedAt    DateTime   @updatedAt\n  email        String     @unique(map: \"User.email_unique\")\n  firstName    String\n  discordId    String?\n  kitId        String?\n  role         Role       @default(MEMBER)\n  team         Team\n  role         String     @default(\"MEMBER\")\n  team         String\n  calls        Call[]\n  sessions     Session[]\n  postReads    PostRead[]\n}\n\n...\n```\n\n----------------------------------------\n\nTITLE: Creating Basic React Context\nDESCRIPTION: Initializes a React Context without a default value. The author intentionally omits the default value since most contexts should be used with a provider.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\n\nconst CountContext = React.createContext()\n```\n\n----------------------------------------\n\nTITLE: Implementing Control Props with Input and Toggle Components in React\nDESCRIPTION: Demonstrates how to use control props to manage state between an input field and a toggle component. The example shows bidirectional state control.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/control-props-vs-state-reducers.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nclass Example extends React.Component {\n\tstate = { on: false, inputValue: 'off' }\n\thandleToggle = (on) => {\n\t\tthis.setState({ on, inputValue: on ? 'on' : 'off' })\n\t}\n\thandleChange = ({ target: { value } }) => {\n\t\tif (value === 'on') {\n\t\t\tthis.setState({ on: true })\n\t\t} else if (value === 'off') {\n\t\t\tthis.setState({ on: false })\n\t\t}\n\t\tthis.setState({ inputValue: value })\n\t}\n\trender() {\n\t\tconst { on } = this.state\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input value={this.state.inputValue} onChange={this.handleChange} />\n\t\t\t\t<Toggle on={on} onToggle={this.handleToggle} />\n\t\t\t</div>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: JSX with Dynamic Content and Event Handlers\nDESCRIPTION: Provides examples of JSX with interpolated variables, conditional rendering, and event handlers, along with their JavaScript equivalents.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nui = <div>Hello {subject}</div>\nui = React.createElement('div', null, 'Hello ', subject)\n\nui = (\n\t<div>\n\t\t{greeting} {subject}\n\t</div>\n)\nui = React.createElement('div', null, greeting, ' ', subject)\n\nui = <button onClick={() => {}}>click me</button>\nui = React.createElement('button', { onClick: () => {} }, 'click me')\n\nui = <div>{error ? <span>{error}</span> : <span>good to go</span>}</div>\nui = React.createElement(\n\t'div',\n\tnull,\n\terror\n\t\t? React.createElement('span', null, error)\n\t\t: React.createElement('span', null, 'good to go'),\n)\n\nui = (\n\t<div>\n\t\t{items.map((i) => (\n\t\t\t<span key={i.id}>{i.content}</span>\n\t\t))}\n\t</div>\n)\nui = React.createElement(\n\t'div',\n\tnull,\n\titems.map((i) => React.createElement('span', { key: i.id }, i.content)),\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic React Counter Component in TSX\nDESCRIPTION: A simple React counter component that uses useState hook to manage count state and increments it when the button is clicked. This demonstrates a basic component that triggers re-renders on state changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-slow-render-before-you-fix-the-re-render/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Recommended Error Component Implementation with Ternary in React JSX\nDESCRIPTION: This code snippet shows the recommended way to implement the Error component using a ternary operator for conditional rendering.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Error({ error }) {\n\treturn error ? <div className=\"fancy-error\">{error.message}</div> : null\n}\n```\n\n----------------------------------------\n\nTITLE: Using the screen object for querying in React Testing Library\nDESCRIPTION: Demonstrates how to use the recommended 'screen' object for DOM queries instead of destructuring the render result, which provides better autocomplete support and reduces maintenance.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nconst { getByRole } = render(<Example />)\nconst errorMessageNode = getByRole('alert')\n\n// ✅\nrender(<Example />)\nconst errorMessageNode = screen.getByRole('alert')\n```\n\n----------------------------------------\n\nTITLE: Using find* Queries Instead of waitFor for Asynchronous Elements\nDESCRIPTION: Shows the preferred method of using find* queries for elements that may not be immediately available, instead of combining waitFor with get* queries.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nconst submitButton = await waitFor(() =>\n\tscreen.getByRole('button', { name: /submit/i }),\n)\n\n// ✅\nconst submitButton = await screen.findByRole('button', { name: /submit/i })\n```\n\n----------------------------------------\n\nTITLE: Alert Component Usage with Boolean Props - TypeScript\nDESCRIPTION: Example showing potentially problematic boolean prop usage for an Alert component where multiple states could be activated simultaneously.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-impossible-states-impossible.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<Alert>Just FYI</Alert>\n<Alert success>It worked!</Alert>\n<Alert warning>Head's up</Alert>\n<Alert danger>Watch out!</Alert>\n```\n\n----------------------------------------\n\nTITLE: Final Component with Props and State\nDESCRIPTION: Shows the final refined version of the component using both props and state properly, with destructuring and clear naming conventions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction AddWithInput({ n1, initialN2 = 0 }) {\n\tconst [n2, setN2] = React.useState(initialN2)\n\n\tfunction handleInputChange(event) {\n\t\tconst input = event.target\n\t\tconst newN2 = Number(input.value)\n\t\tsetN2(newN2)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{n1} + <input type=\"number\" value={n2} onChange={handleInputChange} /> ={' '}\n\t\t\t{n1 + n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Simplified Test with Centralized Mock\nDESCRIPTION: Shows how tests become simpler when using a centralized mock implementation, focusing on behavior rather than implementation details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/checkout.js\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\ntest('clicking \"confirm\" submits payment', async () => {\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(await screen.findByText(/success/i)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of React's New Context API\nDESCRIPTION: Demonstrates the simplest useful example of the new Context API, including creating a context, a provider component, and consuming the context value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/reacts-new-context-api.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nconst ThemeContext = React.createContext('light')\nclass ThemeProvider extends React.Component {\n\tstate = { theme: 'light' }\n\trender() {\n\t\treturn (\n\t\t\t<ThemeContext.Provider value={this.state.theme}>\n\t\t\t\t{this.props.children}\n\t\t\t</ThemeContext.Provider>\n\t\t)\n\t}\n}\n\nclass App extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<ThemeProvider>\n\t\t\t\t<ThemeContext.Consumer>\n\t\t\t\t\t{(val) => <div>{val}</div>}\n\t\t\t\t</ThemeContext.Consumer>\n\t\t\t</ThemeProvider>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Type Guard for Filtering in TypeScript\nDESCRIPTION: Demonstrates using the custom typedBoolean type guard to filter an array while preserving type narrowing. The resulting array type no longer includes falsy values like undefined.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\n// Array<number>\nconst arrayWithoutFalsyValues = arrayWithFalsyValues.filter(typedBoolean)\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Cache Interface with Redis/LRU in TypeScript\nDESCRIPTION: Defines a custom caching abstraction that works with both Redis and LRU cache. Includes type definitions for cache metadata, value handling, and a comprehensive cachified function that manages cache operations with various configuration options.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ntype CacheMetadata = {\n\tcreatedTime: number\n\tmaxAge: number | null\n}\n// it's the value/null/undefined or a promise that resolves to that\ntype VNUP<Value> = Value | null | undefined | Promise<Value | null | undefined>\n\nasync function cachified<\n\tValue,\n\tCache extends {\n\t\tname: string\n\t\tget: (key: string) => VNUP<{\n\t\t\tmetadata: CacheMetadata\n\t\t\tvalue: Value\n\t\t}>\n\t\tset: (\n\t\t\tkey: string,\n\t\t\tvalue: {\n\t\t\t\tmetadata: CacheMetadata\n\t\t\t\tvalue: Value\n\t\t\t},\n\t\t) => unknown | Promise<unknown>\n\t\tdel: (key: string) => unknown | Promise<unknown>\n\t},\n>(options: {\n\tkey: string\n\tcache: Cache\n\tgetFreshValue: () => Promise<Value>\n\tcheckValue?: (value: Value) => boolean\n\tforceFresh?: boolean | string\n\trequest?: Request\n\tfallbackToCache?: boolean\n\ttimings?: Timings\n\ttimingType?: string\n\tmaxAge?: number\n}): Promise<Value> {\n\t// do the stuff...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing State Reducer in React Downshift\nDESCRIPTION: Example implementation of a state reducer pattern in a Downshift component that prevents the menu from closing after item selection. The reducer receives current state and changes, then returns modified changes based on specific state change types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport Downshift from 'downshift'\n\nfunction stateReducer(state, changes) {\n\tswitch (changes.type) {\n\t\tcase Downshift.stateChangeTypes.keyDownEnter:\n\t\tcase Downshift.stateChangeTypes.clickItem:\n\t\t\treturn {\n\t\t\t\t...changes,\n\t\t\t\tisOpen: state.isOpen,\n\t\t\t\thighlightedIndex: state.highlightedIndex,\n\t\t\t}\n\t\tdefault:\n\t\t\treturn changes\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Glamorous Theming Example\nDESCRIPTION: Shows how to implement and use themes with glamorous ThemeProvider component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nconst Title = glamorous.h1(\n\t{\n\t\tfontSize: '10px',\n\t},\n\t(props, theme) => ({\n\t\tcolor: theme.main.color,\n\t}),\n)\n\nconst ui1 = (\n\t<ThemeProvider theme={theme}>\n\t\t<Title>Hello!</Title>\n\t</ThemeProvider>\n)\n\nconst ui2 = (\n\t<ThemeProvider theme={theme}>\n\t\t<div>\n\t\t\t<Title>Hello!</Title>\n\t\t\t<ThemeProvider theme={secondaryTheme}>\n\t\t\t\t<Title>Hello from here!</Title>\n\t\t\t</ThemeProvider>\n\t\t</div>\n\t</ThemeProvider>\n)\n```\n\n----------------------------------------\n\nTITLE: Simplified Constraint Usage\nDESCRIPTION: A slightly more readable version of the generic constraint implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst createNumbers = constrain<Record<string, number>>()\nconst numbers = createNumbers({ one: 1 /* etc. */ })\n```\n\n----------------------------------------\n\nTITLE: Testing a Pure Function with Multiple Cases\nDESCRIPTION: Shows how to test a pure addition function using traditional Jest tests and then refactors it to use jest-in-case for more concise and maintainable test cases.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/aha-testing/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport add from '../add'\n\ntest('adds one and two to equal three', () => {\n\texpect(add(1, 2)).toBe(3)\n})\n\ntest('adds three and four to equal seven', () => {\n\texpect(add(3, 4)).toBe(7)\n})\n\ntest('adds one hundred and two to equal one hundred two', () => {\n\texpect(add(100, 2)).toBe(102)\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-Pattern Toggle Component in React/TypeScript\nDESCRIPTION: A comprehensive Toggle component implementation that combines five major React patterns: Compound Components, Render Props, Component Injection, Provider Pattern, and Higher Order Components. The component provides flexible API options for state management and UI rendering with proper TypeScript typing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/mixing-component-patterns.mdx#2025-04-12_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as React from 'react'\nimport { render } from 'react-dom'\nimport hoistNonReactStatics from 'hoist-non-react-statics'\nimport { Switch } from './switch'\n\nconst callAll =\n\t(...fns) =>\n\t(...args) =>\n\t\tfns.forEach((fn) => fn && fn(...args))\nconst ToggleContext = React.createContext({\n\ton: false,\n\ttoggle: () => {},\n\tgetTogglerProps: (props) => props,\n})\n\nclass Toggle extends React.Component {\n\tstatic Consumer = (props) => (\n\t\t<ToggleContext.Consumer {...props}>\n\t\t\t{(state) => Toggle.getUI(props.children, state)}\n\t\t</ToggleContext.Consumer>\n\t)\n\tstatic On = ({ children }) => (\n\t\t<Toggle.Consumer>{({ on }) => (on ? children : null)}</Toggle.Consumer>\n\t)\n\tstatic Off = ({ children }) => (\n\t\t<Toggle.Consumer>{({ on }) => (on ? null : children)}</Toggle.Consumer>\n\t)\n\tstatic Button = (props) => (\n\t\t<Toggle.Consumer>\n\t\t\t{({ getTogglerProps }) => <Switch {...getTogglerProps(props)} />}\n\t\t</Toggle.Consumer>\n\t)\n\tstatic getUI(children, state) {\n\t\tlet ui\n\t\tif (Array.isArray(children) || React.isValidElement(children)) {\n\t\t\tui = children\n\t\t} else if (children.prototype && children.prototype.isReactComponent) {\n\t\t\tui = React.createElement(children, state)\n\t\t} else if (typeof children === 'function') {\n\t\t\tui = children(state)\n\t\t} else {\n\t\t\tthrow new Error('Please use one of the supported APIs for children')\n\t\t}\n\t\treturn ui\n\t}\n\ttoggle = () =>\n\t\tthis.setState(\n\t\t\t({ on }) => ({ on: !on }),\n\t\t\t() => this.props.onToggle(this.state.on),\n\t\t)\n\tgetTogglerProps = ({ onClick, ...props } = {}) => ({\n\t\tonClick: callAll(onClick, this.toggle),\n\t\t'aria-pressed': this.state.on,\n\t\t...props,\n\t})\n\tstate = {\n\t\ton: false,\n\t\ttoggle: this.toggle,\n\t\tgetTogglerProps: this.getTogglerProps,\n\t}\n\trender() {\n\t\tconst { children, ...rest } = this.props\n\t\treturn (\n\t\t\t<ToggleContext.Provider value={this.state} {...rest}>\n\t\t\t\t{Toggle.getUI(children, this.state)}\n\t\t\t</ToggleContext.Provider>\n\t\t)\n\t}\n}\nToggle.Consumer.displayName = 'Toggle.Consumer'\nToggle.On.displayName = 'Toggle.On'\nToggle.Off.displayName = 'Toggle.Off'\nToggle.Button.displayName = 'Toggle.Button'\n\nfunction withToggle(Component) {\n\tfunction Wrapper(props, ref) {\n\t\treturn (\n\t\t\t<Toggle.Consumer>\n\t\t\t\t{(toggleState) => (\n\t\t\t\t\t<Component {...props} toggle={toggleState} ref={ref} />\n\t\t\t\t)}\n\t\t\t</Toggle.Consumer>\n\t\t)\n\t}\n\tWrapper.displayName = `withToggle(${Component.displayName || Component.name})`\n\tconst WrapperWithRef = React.forwardRef(Wrapper)\n\thoistNonReactStatics(WrapperWithRef, Component)\n\treturn WrapperWithRef\n}\n\nexport { Toggle, withToggle }\n```\n\n----------------------------------------\n\nTITLE: Implementing Jest's spyOn for Mocking in JavaScript Test\nDESCRIPTION: This test demonstrates the use of Jest's spyOn utility to create a mock, simplifying the process of mocking and restoring the original function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utils from '#app/utils'\n\ntest('returns winner', () => {\n\tjest.spyOn(utils, 'getWinner')\n\tutils.getWinner.mockImplementation((p1, p2) => p2)\n\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\n\tutils.getWinner.mockRestore()\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing React Contact Form with Key Prop\nDESCRIPTION: A React component demonstrating form implementation with topic selection and subject field controlled by key prop. Shows how the key prop helps reset the subject input when topic changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/understanding-reacts-key-prop/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst defaultValuesByTopic = {\n\ttraining: 'I would like some training',\n\tconsulting: 'I have consulting needs',\n\tquestion: 'I have some questions',\n}\n\nfunction Contact() {\n\tconst [topic, setTopic] = React.useState('training')\n\n\treturn (\n\t\t<form>\n\t\t\t<label htmlFor=\"topic\">Topic</label>\n\t\t\t<select\n\t\t\t\tid=\"topic\"\n\t\t\t\tvalue={topic}\n\t\t\t\tonChange={(e) => setTopic(e.target.value)}\n\t\t\t>\n\t\t\t\t<option value=\"training\">Training</option>\n\t\t\t\t<option value=\"consulting\">Consulting</option>\n\t\t\t\t<option value=\"question\">Question</option>\n\t\t\t</select>\n\t\t\t<label htmlFor=\"subject\">Email Subject</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tkey={topic}\n\t\t\t\tdefaultValue={defaultValuesByTopic[topic]}\n\t\t\t/>\n\t\t\t<label htmlFor=\"body\">Email body</label>\n\t\t\t<textarea id=\"body\" />\n\t\t</form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Counter Context Provider in React\nDESCRIPTION: Creates a CountProvider component using React.useState and React.useMemo to manage and provide count state. Also exports a useCount hook for consuming components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nconst [count, setCount] = React.useState(0)\nconst value = React.useMemo(() => [count, setCount], [count])\nreturn <CountContext.Provider value={value} {...props} />\n}\n\nexport { CountProvider, useCount }\n```\n\n----------------------------------------\n\nTITLE: Resilient Element Selection with Testing Library\nDESCRIPTION: Example of using Testing Library's recommended queries to select elements based on accessibility roles and labels.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nconst usernameField = rootNode.getByRole('textbox', { name: /username/i })\nconst passwordField = rootNode.getByLabelText('password')\nconst submitButton = rootNode.getByRole('button', { name: /sign in/i })\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Unnecessary Re-renders in React Components\nDESCRIPTION: An example showing how child components (Foo) get re-rendered when parent state changes, even though the child component's output remains the same. This illustrates the concept of unnecessary re-renders.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-slow-render-before-you-fix-the-re-render/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nfunction Foo() {\n\treturn <div>FOO!</div>\n}\n\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn (\n\t\t<>\n\t\t\t<Foo />\n\t\t\t<button onClick={increment}>{count}</button>\n\t\t</>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Class Component with Asynchronous State Updates in React\nDESCRIPTION: A React class component that handles form submission, updates a username asynchronously, and manages loading states. It shows the basic pattern of updating state before and after an async operation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nclass UsernameFormClass extends React.Component {\n\tstate = { status: 'idle', error: null }\n\thandleSubmit = async (event) => {\n\t\tevent.preventDefault()\n\t\tconst newUsername = event.target.elements.username.value\n\t\tthis.setState({ status: 'pending' })\n\t\ttry {\n\t\t\tawait this.props.updateUsername(newUsername)\n\t\t\tthis.setState({ status: 'fulfilled' })\n\t\t} catch (e) {\n\t\t\tthis.setState({ status: 'rejected', error: e })\n\t\t}\n\t}\n\trender() {\n\t\tconst { error, status } = this.state\n\n\t\treturn (\n\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input id=\"username\" />\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t<span>{status === 'pending' ? 'Saving...' : null}</span>\n\t\t\t\t<span>{status === 'rejected' ? error.message : null}</span>\n\t\t\t</form>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Calculator Implementation\nDESCRIPTION: Final implementation of a calculator component using CIF for operations with full TypeScript type safety.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\ntype OperationFn = (left: number, right: number) => number\nconst createOperations = <OperationsType extends Record<string, OperationFn>>(\n\topts: OperationsType,\n) => opts\n\nconst operations = createOperations({\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n})\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\nfunction Calculator({ left, operator, right }: CalculatorProps) {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n\nconst examples = (\n\t<>\n\t\t<Calculator left={1} operator=\"+\" right={2} />\n\t\t<Calculator left={1} operator=\"-\" right={2} />\n\t\t<Calculator left={1} operator=\"*\" right={2} />\n\t\t<Calculator left={1} operator=\"/\" right={2} />\n\t</>\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing State Reducer with Toggle Component in React\nDESCRIPTION: Shows how to use a state reducer to limit the number of times a toggle can be clicked. The state reducer prevents the toggle from turning on after 4 clicks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/control-props-vs-state-reducers.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nclass Example extends React.Component {\n\tinitialState = { timesClicked: 0 }\n\tstate = this.initialState\n\thandleToggle = (...args) => {\n\t\tthis.setState(({ timesClicked }) => ({\n\t\t\ttimesClicked: timesClicked + 1,\n\t\t}))\n\t}\n\thandleReset = (...args) => {\n\t\tthis.setState(this.initialState)\n\t}\n\ttoggleStateReducer = (state, changes) => {\n\t\tif (this.state.timesClicked >= 4) {\n\t\t\treturn { ...changes, on: false }\n\t\t}\n\t\treturn changes\n\t}\n\trender() {\n\t\tconst { timesClicked } = this.state\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Toggle\n\t\t\t\t\tstateReducer={this.toggleStateReducer}\n\t\t\t\t\tonToggle={this.handleToggle}\n\t\t\t\t\tonReset={this.handleReset}\n\t\t\t\t/>\n\t\t\t\t{timesClicked > 4 ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\tWhoa, you clicked too much!\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>Click count: {timesClicked}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Initial Shared State Testing Example\nDESCRIPTION: Shows an anti-pattern where multiple tests share the same component instance, leading to test interdependence.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst utils = render(<Foo />)\n\ntest('test 1', () => {\n\t// use utils here\n})\n\ntest('test 2', () => {\n\t// use utils here too\n})\n```\n\n----------------------------------------\n\nTITLE: Snapshot Example for CSS-in-JS Testing\nDESCRIPTION: An example of using snapshots to test CSS-in-JS styling with jest-glamor-react. The snapshot includes the rendered HTML along with the associated CSS styles.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/effective-snapshot-testing.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nexports[`enzyme.render 1`] = `  \n.glamor-1,  \n[data-glamor-1] {  \n  padding: 4em;  \n  background: papayawhip;  \n}  \n  \n.glamor-0,  \n[data-glamor-0] {  \n  font-size: 1.5em;  \n  text-align: center;  \n  color: palevioletred;  \n}  \n  \n<section  \n  class=\"glamor-1\"  \n>  \n  <h1  \n    class=\"glamor-0\"  \n  >  \n    Hello World, this is my first glamor styled component!  \n  </h1>  \n</section>  \n`\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with Interval using Jest Fake Timers in TypeScript\nDESCRIPTION: This snippet demonstrates how to test a React component that uses setInterval for polling, utilizing Jest fake timers and manually wrapping timer advancement in act.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { render, screen, act } from '@testing-library/react'\nimport { checkStatus } from '../api'\n\njest.mock('../api')\n\ntest('polling backend on an interval', async () => {\n\tconst orderId = 'abc123'\n\tconst orderStatus = 'Order Received'\n\tcheckStatus.mockResolvedValue({ orderStatus })\n\n\trender(<OrderStatus orderId={orderId} />)\n\n\texpect(screen.getByText(/\\.\\.\\.\\./i)).toBeInTheDocument()\n\texpect(checkStatus).toHaveBeenCalledTimes(0)\n\n\t// advance the timers by a second to kick off the first request\n\tact(() => jest.advanceTimersByTime(1000))\n\n\texpect(await screen.findByText(orderStatus)).toBeInTheDocument()\n\n\texpect(checkStatus).toHaveBeenCalledWith(orderId)\n\texpect(checkStatus).toHaveBeenCalledTimes(1)\n})\n```\n\n----------------------------------------\n\nTITLE: State Reducer Pattern Implementation in JavaScript\nDESCRIPTION: Shows how to implement the state reducer pattern for customizing component behavior, specifically for a Downshift component to prevent menu closing after selection.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nfunction stateReducer(state, changes) {\n\tswitch (changes.type) {\n\t\tcase Downshift.stateChangeTypes.keyDownEnter:\n\t\tcase Downshift.stateChangeTypes.clickItem:\n\t\t\treturn {\n\t\t\t\t...changes,\n\t\t\t\t// we're fine with any changes Downshift wants to make\n\t\t\t\t// except we're going to leave isOpen and highlightedIndex as-is.\n\t\t\t\tisOpen: state.isOpen,\n\t\t\t\thighlightedIndex: state.highlightedIndex,\n\t\t\t}\n\t\tdefault:\n\t\t\treturn changes\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: useReducer with Lazy Initialization\nDESCRIPTION: Demonstrates how to use useReducer with a third argument for lazy initialization, where the second argument serves as input to the initialization function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst initializationFn = (initialArg) => initialArg\n\nconst [state, dispatch] = useReducer(reducerFn, initialArg, initializationFn)\n```\n\n----------------------------------------\n\nTITLE: Refactoring React Class Component to Function Component with Hooks\nDESCRIPTION: Refactoring the Counter component from a class component to a function component using React Hooks (useState).\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\nfunction Counter() {\n\tconst [count, setCount] = useState(0)\n\tconst incrementCount = () => setCount((c) => c + 1)\n\treturn <button onClick={incrementCount}>{count}</button>\n}\n\nexport default Counter\n```\n\n----------------------------------------\n\nTITLE: Implementing MSW Server Handlers for API Mocking\nDESCRIPTION: Defines REST API handlers for login and checkout endpoints using MSW. The handlers mock server responses and can be shared between tests and development environment.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// server-handlers.js\n// this is put into here so I can share these same handlers between my tests\n// as well as my development in the browser. Pretty sweet!\nimport { rest } from 'msw' // msw supports graphql too!\nimport * as users from './users'\n\nconst handlers = [\n\trest.get('/login', async (req, res, ctx) => {\n\t\tconst user = await users.login(JSON.parse(req.body))\n\t\treturn res(ctx.json({ user }))\n\t}),\n\trest.post('/checkout', async (req, res, ctx) => {\n\t\tconst user = await users.login(JSON.parse(req.body))\n\t\tconst isAuthorized = user.authorize(req.headers.Authorization)\n\t\tif (!isAuthorized) {\n\t\t\treturn res(ctx.status(401), ctx.json({ message: 'Not authorized' }))\n\t\t}\n\t\tconst shoppingCart = JSON.parse(req.body)\n\t\t// do whatever other things you need to do with this shopping cart\n\t\treturn res(ctx.json({ success: true }))\n\t}),\n]\n\nexport { handlers }\n```\n\n----------------------------------------\n\nTITLE: Identifying Logical Errors with ESLint in JavaScript\nDESCRIPTION: This snippet demonstrates a common logical error that ESLint can help identify. The condition in the if statement is incorrectly wrapped in parentheses, which changes its meaning.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/eliminate-an-entire-category-of-bugs-with-a-few-simple-tools.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nif ((!'serviceWorker') in navigator) {\n\t// the user's using an old browser :-(\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Autocomplete with downshift in React\nDESCRIPTION: Demonstrates a minimal implementation of an autocomplete component using downshift. The example shows how to use render props pattern and prop getters to create a filterable list of fruits with keyboard navigation and accessibility support.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-downshift-for-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as React from 'react'\nimport { render } from 'react-dom'\nimport Downshift from 'downshift'\n\nconst items = [\n\t{ value: 'apple' },\n\t{ value: 'pear' },\n\t{ value: 'orange' },\n\t{ value: 'grape' },\n\t{ value: 'banana' },\n]\n\nrender(\n\t<Downshift\n\t\tonChange={(selection) => alert(`You selected ${selection.value}`)}\n\t\titemToString={(item) => (item ? item.value : '')}\n\t>\n\t\t{({\n\t\t\tgetInputProps,\n\t\t\tgetItemProps,\n\t\t\tgetLabelProps,\n\t\t\tgetMenuProps,\n\t\t\tisOpen,\n\t\t\tinputValue,\n\t\t\thighlightedIndex,\n\t\t\tselectedItem,\n\t\t}) => (\n\t\t\t<div>\n\t\t\t\t<label {...getLabelProps()}>Enter a fruit</label>\n\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t<ul {...getMenuProps()}>\n\t\t\t\t\t{isOpen\n\t\t\t\t\t\t? items\n\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t(item) => !inputValue || item.value.includes(inputValue),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.map((item, index) => (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t{...getItemProps({\n\t\t\t\t\t\t\t\t\t\t\tkey: item.value,\n\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex === index ? 'lightgray' : 'white',\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: selectedItem === item ? 'bold' : 'normal',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.value}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t: null}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t)}\n\t</Downshift>,\n\tdocument.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: React Counter with Function Updates\nDESCRIPTION: Implementation of a counter using useState with function-based initialization and updates, demonstrating the function update pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(() => 0)\n\tconst increment = () => setCount((previousCount) => previousCount + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Using srcset and sizes Attributes for Responsive Images\nDESCRIPTION: Example from MDN demonstrating how to use the srcset and sizes attributes to serve different image sizes based on screen width. This allows browsers to load the most appropriate image size for the user's device.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<img\n\tsrc=\"/files/16870/new-york-skyline-wide.jpg\"\n\tsrcset=\"\n\t\t/files/16870/new-york-skyline-wide.jpg 3724w,\n\t\t/files/16869/new-york-skyline-4by3.jpg 1961w,\n\t\t/files/16871/new-york-skyline-tall.jpg 1060w\n\t\"\n\tsizes=\"((min-width: 50em) and (max-width: 60em)) 50em,\n              ((min-width: 30em) and (max-width: 50em)) 30em,\n              (max-width: 30em) 20em\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Basic React Counter Component\nDESCRIPTION: A simple counter component implementation showing state management with useState hook.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/understanding-reacts-key-prop/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Counter Component as a Class in React\nDESCRIPTION: This snippet shows how to implement the same counter functionality using a class component instead of hooks. It uses the class state and setState method to manage the count.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nclass Counter extends React.Component {\n\tstate = { count: 0 }\n\tincrement = () => this.setState(({ count }) => ({ count: count + 1 }))\n\trender() {\n\t\treturn <button onClick={this.increment}>{this.state.count}</button>\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Solution 1: Waiting for Promise Resolution with Act\nDESCRIPTION: This approach solves the 'act' warning by explicitly waiting for the mocked promise to resolve within an act wrapper. It's suitable when there are no observable DOM changes to assert on.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// 1. Wait for the promise to resolve\n// ⚠️ this is an ok way to solve this problem, but there's a better way, read on\ntest('course shows loading screen', async () => {\n\tconst promise = Promise.resolve(buildCourse())\n\tgetCourseInfo.mockImplementationOnce(() => promise)\n\trender(<Course courseId=\"123\" />)\n\tconst alert = screen.getByRole('alert')\n\texpect(alert).toHaveTextContent(/loading/i)\n\tawait act(() => promise)\n})\n```\n\n----------------------------------------\n\nTITLE: TypeScript Error Handling Utility Function\nDESCRIPTION: Reusable utility function for extracting error messages with proper type safety.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/get-a-catch-block-error-message-with-typescript.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype ErrorWithMessage = {\n\tmessage: string\n}\n\nfunction isErrorWithMessage(error: unknown): error is ErrorWithMessage {\n\treturn (\n\t\ttypeof error === 'object' &&\n\t\terror !== null &&\n\t\t'message' in error &&\n\t\ttypeof (error as Record<string, unknown>).message === 'string'\n\t)\n}\n\nfunction toErrorWithMessage(maybeError: unknown): ErrorWithMessage {\n\tif (isErrorWithMessage(maybeError)) return maybeError\n\n\ttry {\n\t\treturn new Error(JSON.stringify(maybeError))\n\t} catch {\n\t\t// fallback in case there's an error stringifying the maybeError\n\t\t// like with circular references for example.\n\t\treturn new Error(String(maybeError))\n\t}\n}\n\nfunction getErrorMessage(error: unknown) {\n\treturn toErrorWithMessage(error).message\n}\n```\n\n----------------------------------------\n\nTITLE: Tic-Tac-Toe with Derived State and Additional Feature\nDESCRIPTION: This implementation adds the two-square selection feature to the derived state approach. It demonstrates how much simpler feature additions are when using derived state, as it only requires managing the primary state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst nextValue = calculateNextValue(squares)\n\tconst winner = calculateWinner(squares)\n\tconst status = calculateStatus(winner, squares, nextValue)\n\n\tfunction selectSquare(square) {\n\t\tif (winner || squares[square]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square] = nextValue\n\t\tsetSquares(squaresCopy)\n\t}\n\n\tfunction selectTwoSquares(square1, square2) {\n\t\tif (winner || squares[square1] || squares[square2]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square1] = nextValue\n\t\tsquaresCopy[square2] = nextValue\n\t\tsetSquares(squaresCopy)\n\t}\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication in Fetch Wrapper\nDESCRIPTION: This snippet adds authentication capabilities to the fetch wrapper. It retrieves a token from localStorage and includes it in the Authorization header for authenticated requests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst localStorageKey = '__bookshelf_token__'\n\nfunction client(endpoint, { body, ...customConfig } = {}) {\n\tconst token = window.localStorage.getItem(localStorageKey)\n\tconst headers = { 'Content-Type': 'application/json' }\n\tif (token) {\n\t\theaders.Authorization = `Bearer ${token}`\n\t}\n\tconst config = {\n\t\tmethod: body ? 'POST' : 'GET',\n\t\t...customConfig,\n\t\theaders: {\n\t\t\t...headers,\n\t\t\t...customConfig.headers,\n\t\t},\n\t}\n\tif (body) {\n\t\tconfig.body = JSON.stringify(body)\n\t}\n\n\treturn window\n\t\t.fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n\t\t.then(async (response) => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn await response.json()\n\t\t\t} else {\n\t\t\t\tconst errorMessage = await response.text()\n\t\t\t\treturn Promise.reject(new Error(errorMessage))\n\t\t\t}\n\t\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Geolocation with Status Enum\nDESCRIPTION: Improved implementation using a status enum instead of boolean flags, properly handling all possible states including idle, pending, resolved, and rejected.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction geoPositionReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'error': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstatus: 'rejected',\n\t\t\t\terror: action.error,\n\t\t\t}\n\t\t}\n\t\tcase 'success': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstatus: 'resolved',\n\t\t\t\tposition: action.position,\n\t\t\t}\n\t\t}\n\t\tcase 'started': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstatus: 'pending',\n\t\t\t}\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction useGeoPosition() {\n\tconst [state, dispatch] = React.useReducer(geoPositionReducer, {\n\t\tstatus: 'idle',\n\t\tposition: null,\n\t\terror: null,\n\t})\n\n\tReact.useEffect(() => {\n\t\tif (!navigator.geolocation) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'error',\n\t\t\t\terror: new Error('Geolocation is not supported'),\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tdispatch({ type: 'started' })\n\t\tconst geoWatch = navigator.geolocation.watchPosition(\n\t\t\t(position) => dispatch({ type: 'success', position }),\n\t\t\t(error) => dispatch({ type: 'error', error }),\n\t\t)\n\t\treturn () => navigator.geolocation.clearWatch(geoWatch)\n\t}, [])\n\n\treturn state\n}\n```\n\n----------------------------------------\n\nTITLE: Array with Falsy Values Example in TypeScript\nDESCRIPTION: Defines an array that contains both number values and undefined, demonstrating a common pattern where filtering is needed but type narrowing must be preserved.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\n// Array<number | undefined>\nconst arrayWithFalsyValues = [1, undefined, 0, 2]\n```\n\n----------------------------------------\n\nTITLE: HTML Module Import Implementation\nDESCRIPTION: HTML file showing how to import and use ES modules through inline script with type=\"module\" attribute.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script type=\"module\">\n\timport { appendDiv } from './append-div.js'\n\tappendDiv('Hello from inline script')\n</script>\n```\n\n----------------------------------------\n\nTITLE: Using the getImgProps Utility in a React Component\nDESCRIPTION: Example of how to use the getImgProps utility function in a React component to generate responsive image props with Cloudinary. This implementation sets image widths, sizes, and transformations for optimal loading.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<img\n\tkey={frontmatter.bannerCloudinaryId}\n\ttitle={frontmatter.bannerCredit}\n\t{...getImgProps(\n\t\tgetImageBuilder(\n\t\t\tfrontmatter.bannerCloudinaryId,\n\t\t\tgetBannerAltProp(frontmatter),\n\t\t),\n\t\t{\n\t\t\tclassName: 'rounded-lg object-cover object-center',\n\t\t\twidths: [280, 560, 840, 1100, 1650, 2500, 2100, 3100],\n\t\t\tsizes: [\n\t\t\t\t'(max-width:1023px) 80vw',\n\t\t\t\t'(min-width:1024px) and (max-width:1620px) 67vw',\n\t\t\t\t'1100px',\n\t\t\t],\n\t\t\ttransformations: {\n\t\t\t\tbackground: 'rgb:e6e9ee',\n\t\t\t},\n\t\t},\n\t)}\n/>\n```\n\n----------------------------------------\n\nTITLE: Implementing React Accordion Component in TypeScript\nDESCRIPTION: A class-based React Accordion component that manages state to show/hide content panels. Uses a single openIndex state to track which accordion item is currently expanded.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-implementation-details.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport AccordionContents from './accordion-contents'\n\nclass Accordion extends React.Component {\n\tstate = { openIndex: 0 }\n\tsetOpenIndex = (openIndex) => this.setState({ openIndex })\n\trender() {\n\t\tconst { openIndex } = this.state\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.props.items.map((item, index) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button onClick={() => this.setOpenIndex(index)}>\n\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{index === openIndex ? (\n\t\t\t\t\t\t\t<AccordionContents>{item.contents}</AccordionContents>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Accordion\n```\n\n----------------------------------------\n\nTITLE: Implementing FruitAutocomplete Component with Downshift in React\nDESCRIPTION: This code snippet demonstrates the implementation of a FruitAutocomplete component using the Downshift library for autocomplete functionality. It renders an input field with a dropdown menu of fruit options.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-components-using-render-props.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { render } from 'react-dom'\nimport Downshift from 'downshift'\n\nconst items = ['apple', 'pear', 'orange', 'grape', 'banana']\n\nfunction FruitAutocomplete({ onChange }) {\n\treturn (\n\t\t<Downshift\n\t\t\tonChange={onChange}\n\t\t\trender={({\n\t\t\t\tgetInputProps,\n\t\t\t\tgetItemProps,\n\t\t\t\tgetLabelProps,\n\t\t\t\tisOpen,\n\t\t\t\tinputValue,\n\t\t\t\thighlightedIndex,\n\t\t\t\tselectedItem,\n\t\t\t}) => (\n\t\t\t\t<div>\n\t\t\t\t\t<label {...getLabelProps()}>Enter a fruit</label>\n\t\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t\t{isOpen ? (\n\t\t\t\t\t\t<div data-test=\"menu\">\n\t\t\t\t\t\t\t{items\n\t\t\t\t\t\t\t\t.filter((i) => !inputValue || i.includes(inputValue))\n\t\t\t\t\t\t\t\t.map((item, index) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t{...getItemProps({\n\t\t\t\t\t\t\t\t\t\t\tkey: item,\n\t\t\t\t\t\t\t\t\t\t\t'data-test': `item-${item}`,\n\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\t\t\thighlightedIndex === index ? 'lightgray' : 'white',\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: selectedItem === item ? 'bold' : 'normal',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t/>\n\t)\n}\n\nexport default FruitAutocomplete\n```\n\n----------------------------------------\n\nTITLE: React Testing Library Implementation\nDESCRIPTION: Demonstrates the recommended way to test React components using React Testing Library, focusing on user behavior and rendered output rather than implementation details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\ntest('can open accordion items to see the contents', () => {\n\tconst hats = { title: 'Favorite Hats', contents: 'Fedoras are classy' }\n\tconst footware = {\n\t\ttitle: 'Favorite Footware',\n\t\tcontents: 'Flipflops are the best',\n\t}\n\tconst items = [hats, footware]\n\t// using React Testing Library\n\trender(<Accordion items={items} />)\n\n\texpect(screen.getByText(hats.contents)).toBeInTheDocument()\n\texpect(screen.queryByText(footware.contents)).toBeNull()\n\n\tuserEvent.click(screen.getByText(footware.title))\n\n\texpect(screen.getByText(footware.contents)).toBeInTheDocument()\n\texpect(screen.queryByText(hats.contents)).toBeNull()\n})\n```\n\n----------------------------------------\n\nTITLE: Testing Custom React Hook with act in JavaScript\nDESCRIPTION: This example shows how to test a custom React hook that manages count state, using renderHook and act to handle state updates triggered by the hook's functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport * as React from 'react'\nimport { renderHook, act } from '@testing-library/react'\nimport useCount from '../use-count'\n\ntest('increment and decrement updates the count', () => {\n\tconst { result } = renderHook(() => useCount())\n\texpect(result.current.count).toBe(0)\n\n\tact(() => result.current.increment())\n\texpect(result.current.count).toBe(1)\n\n\tact(() => result.current.decrement())\n\texpect(result.current.count).toBe(0)\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Tic-Tac-Toe with useReducer\nDESCRIPTION: This alternative implementation uses useReducer to manage both primary and derived state. While it still calculates derived values, it encapsulates all state updates within the reducer function to prevent synchronization issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction calculateDerivedState(squares) {\n\tconst winner = calculateWinner(squares)\n\tconst nextValue = calculateNextValue(squares)\n\tconst status = calculateStatus(winner, squares, nextValue)\n\treturn { squares, nextValue, winner, status }\n}\n\nfunction ticTacToeReducer(state, square) {\n\tif (state.winner || state.squares[square]) {\n\t\t// no state change needed.\n\t\t// (returning the same object allows React to bail out of a re-render)\n\t\treturn state\n\t}\n\n\tconst squaresCopy = [...state.squares]\n\tsquaresCopy[square] = state.nextValue\n\n\treturn { ...calculateDerivedState(squaresCopy), squares: squaresCopy }\n}\n\nfunction Board() {\n\tconst [{ squares, status }, selectSquare] = React.useReducer(\n\t\tticTacToeReducer,\n\t\tArray(9).fill(null),\n\t\tcalculateDerivedState,\n\t)\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Using proper assertions with jest-dom in React Testing Library\nDESCRIPTION: Shows how to use the custom jest-dom assertions that provide more semantic testing and better error messages than standard Jest assertions when testing DOM elements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst button = screen.getByRole('button', { name: /disabled button/i })\n\n// ❌\nexpect(button.disabled).toBe(true)\n// error message:\n//  expect(received).toBe(expected) // Object.is equality\n//\n//  Expected: true\n//  Received: false\n\n// ✅\nexpect(button).toBeDisabled()\n// error message:\n//   Received element is not disabled:\n//     <button />\n```\n\n----------------------------------------\n\nTITLE: Jest Test Output Example\nDESCRIPTION: Sample console output from running Jest tests, showing test results including a failed test with detailed error message and execution statistics.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n$ jest\n FAIL  ./5.js\n  ✕ sum adds numbers (5ms)\n  ✓ subtract subtracts numbers (1ms)\n\n● sum adds numbers\n\nexpect(received).toBe(expected)\n\n    Expected value to be (using Object.is):\n      10\n    Received:\n      -4\n\n      4 |   const result = sum(3, 7)\n      5 |   const expected = 10\n    > 6 |   expect(result).toBe(expected)\n      7 | })\n      8 |\n      9 | test('subtract subtracts numbers', () => {\n\n      at Object.<anonymous>.test (5.js:6:18)\n\nTest Suites: 1 failed, 1 total\nTests:       1 failed, 1 passed, 2 total\nSnapshots:   0 total\nTime:        0.6s, estimated 1s\nRan all test suites.\n```\n\n----------------------------------------\n\nTITLE: Pure Module Implementation Example\nDESCRIPTION: Refactored implementation using pure modules with explicit initialization functions, avoiding side effects during import.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/pure-modules.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// a.js\nimport { init } from './b'\ninit()\nconsole.log('ready')\n\n// b.js\nimport { serverData, init as initC } from './c'\n\nexport function init() {\n\tinitC()\n\tif (!serverData.user) {\n\t\t// redirect to login\n\t\tlocation.assign('/login')\n\t}\n}\n\n// c.js\nexport const serverData = {}\nexport function init() {\n\tconst el = document.getElementById('server-data')\n\tconst json = el.textContent\n\tObject.assign(serverData, JSON.parse(json))\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Candy Function with Object Destructuring in JavaScript\nDESCRIPTION: This snippet demonstrates how to use object destructuring with default parameters in JavaScript. It shows two variations: destructuring within the function body and directly in the parameter list, providing flexibility in handling function arguments.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-default-parameters.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getCandy(options = {}) {\n\tconst {\n\t\tkind = requiredParam('kind'),\n\t\tsize = requiredParam('size'),\n\t\tupperKind = kind.toUpperCase(),\n\t\tcallback = function noop() {},\n\t} = options\n\t// etc...\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getCandy({\n\tkind = requiredParam('kind'),\n\tsize = requiredParam('size'),\n\tupperKind = kind.toUpperCase(),\n\tcallback = function noop() {},\n} = {}) {\n\t// etc...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining React Components: HiddenMessage and Fade\nDESCRIPTION: This snippet defines two React components: Fade (using CSSTransition) and HiddenMessage (a class component with toggle functionality). It demonstrates component composition and state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { CSSTransition } from 'react-transition-group'\n\nfunction Fade({ children, ...props }) {\n\treturn (\n\t\t<CSSTransition {...props} timeout={1000} className=\"fade\">\n\t\t\t{children}\n\t\t</CSSTransition>\n\t)\n}\n\nclass HiddenMessage extends React.Component {\n\tstatic defaultProps = { initialShow: false }\n\tstate = { show: this.props.initialShow }\n\ttoggle = () => {\n\t\tthis.setState(({ show }) => ({ show: !show }))\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<button onClick={this.toggle}>Toggle</button>\n\t\t\t\t<Fade in={this.state.show}>\n\t\t\t\t\t<div>Hello world</div>\n\t\t\t\t</Fade>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport { HiddenMessage }\n```\n\n----------------------------------------\n\nTITLE: Handling Unauthorized Responses in Fetch Wrapper\nDESCRIPTION: This snippet adds logic to handle 401 (Unauthorized) responses. It logs out the user and refreshes the page when an unauthorized response is received.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/replace-axios-with-a-simple-custom-fetch-wrapper.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst localStorageKey = '__bookshelf_token__'\n\nfunction client(endpoint, { body, ...customConfig } = {}) {\n\tconst token = window.localStorage.getItem(localStorageKey)\n\tconst headers = { 'content-type': 'application/json' }\n\tif (token) {\n\t\theaders.Authorization = `Bearer ${token}`\n\t}\n\tconst config = {\n\t\tmethod: body ? 'POST' : 'GET',\n\t\t...customConfig,\n\t\theaders: {\n\t\t\t...headers,\n\t\t\t...customConfig.headers,\n\t\t},\n\t}\n\tif (body) {\n\t\tconfig.body = JSON.stringify(body)\n\t}\n\n\treturn window\n\t\t.fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n\t\t.then(async (response) => {\n\t\t\tif (response.status === 401) {\n\t\t\t\tlogout()\n\t\t\t\twindow.location.assign(window.location)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (response.ok) {\n\t\t\t\treturn await response.json()\n\t\t\t} else {\n\t\t\t\tconst errorMessage = await response.text()\n\t\t\t\treturn Promise.reject(new Error(errorMessage))\n\t\t\t}\n\t\t})\n}\n\nfunction logout() {\n\twindow.localStorage.removeItem(localStorageKey)\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling React Concurrent Mode with createRoot API\nDESCRIPTION: This code demonstrates how to enable Concurrent Mode by replacing the standard ReactDOM.render method with the new unstable_createRoot API. It creates a root and renders the App component within it.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-enable-react-concurrent-mode.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\n\nconst rootEl = document.getElementById('root')\n// ReactDOM.render(<App />, rootEl)\nconst root = ReactDOM.unstable_createRoot(rootEl)\nroot.render(<App />)\n```\n\n----------------------------------------\n\nTITLE: Defining a Thumb War Game Function in JavaScript\nDESCRIPTION: This code snippet defines a 'thumbWar' function that simulates a thumb war game between two players, using a 'getWinner' function from a utility module to determine the winner of each round.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// thumb-war.js\nimport { getWinner } from './utils'\n\nfunction thumbWar(player1, player2) {\n\tconst numberToWin = 2\n\tlet player1Wins = 0\n\tlet player2Wins = 0\n\twhile (player1Wins < numberToWin && player2Wins < numberToWin) {\n\t\tconst winner = getWinner(player1, player2)\n\t\tif (winner === player1) {\n\t\t\tplayer1Wins++\n\t\t} else if (winner === player2) {\n\t\t\tplayer2Wins++\n\t\t}\n\t}\n\treturn player1Wins > player2Wins ? player1 : player2\n}\n\nexport default thumbWar\n```\n\n----------------------------------------\n\nTITLE: Organizing Render Props with Function Components\nDESCRIPTION: Shows different approaches to organizing render props implementation, including separate components and inline functions with explicit returns. Demonstrates React's composability with render props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/answers-to-common-questions-about-render-props.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction JustARegularFunctionComponent(props) {\n\t// do whatever you want in here\n\treturn <div>{/* your stuff */}</div>\n}\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<div>With a totally different component. Thanks React composibility!</div>\n\t\t\t<RenderPropComp\n\t\t\t\trender={(arg) => <JustARegularFunctionComponent {...arg} />}\n\t\t\t/>\n\t\t\t<hr />\n\t\t\t<div>\n\t\t\t\tInline! You don't have to make it an implicit return arrow function 😉\n\t\t\t</div>\n\t\t\t<RenderPropComp\n\t\t\t\trender={(arg) => {\n\t\t\t\t\t// <-- notice the curly brace!\n\t\t\t\t\t// do whatever you want in here\n\t\t\t\t\treturn <div>{/* your stuff */}</div>\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Addition Test with Stack Trace Manipulation\nDESCRIPTION: A complete example showing how to implement a custom assertion function with improved error messages using Error.captureStackTrace. The code includes a simple add function, an assertion wrapper, and a test case.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst add = (a, b) => a + b\n\nfunction assertAdd(inputs, output) {\n\ttry {\n\t\texpect(add(...inputs)).toBe(output)\n\t} catch (error) {\n\t\tError.captureStackTrace(error, assertAdd)\n\t\tthrow error\n\t}\n}\n\ntest('sums numbers', () => {\n\tassertAdd([1, 2], 4)\n})\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 1: Basic State Updates\nDESCRIPTION: First iteration of useState implementation that handles basic state updates by returning whatever is passed to the dispatch function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, dispatchArg) => dispatchArg\n\nfunction useState() {\n\treturn React.useReducer(useStateReducer)\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Function Overload Types for Async Function in TypeScript\nDESCRIPTION: This snippet demonstrates how to define function overload types for an async function that accepts a callback or returns a promise in TypeScript.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/define-function-overload-types-with-type-script.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype asyncAddCb = (result: number) => void\n// define all valid function signatures\nfunction asyncAdd(a: number, b: number): Promise<number>\nfunction asyncAdd(a: number, b: number, cb: asyncAddCb): void\n\n// define the actual implementation\n// notice cb is optional\n// also notice that the return type is inferred, but it could be specified as `void | Promise<number>`\nfunction asyncAdd(a: number, b: number, cb?: asyncAddCb) {\n\tconst result = a + b\n\tif (cb) return cb(result)\n\telse return Promise.resolve(result)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Context Consumers with Render Props in React\nDESCRIPTION: This snippet demonstrates how to create and use multiple context providers and consumers using the render prop pattern. It shows the creation of ThemeContext and LanguageContext, along with their respective providers and a combined consumer component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-react-context.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst ThemeContext = React.createContext('light')\nclass ThemeProvider extends React.Component {\n\t/* code */\n}\nconst ThemeConsumer = ThemeContext.Consumer\nconst LanguageContext = React.createContext('en')\nclass LanguageProvider extends React.Component {\n\t/* code */\n}\nconst LanguageConsumer = LanguageContext.Consumer\n\nfunction AppProviders({ children }) {\n\treturn (\n\t\t<LanguageProvider>\n\t\t\t<ThemeProvider>{children}</ThemeProvider>\n\t\t</LanguageProvider>\n\t)\n}\n\nfunction ThemeAndLanguageConsumer({ children }) {\n\treturn (\n\t\t<LanguageConsumer>\n\t\t\t{(language) => (\n\t\t\t\t<ThemeConsumer>\n\t\t\t\t\t{(theme) => children({ language, theme })}\n\t\t\t\t</ThemeConsumer>\n\t\t\t)}\n\t\t</LanguageConsumer>\n\t)\n}\n\nfunction App() {\n\treturn (\n\t\t<AppProviders>\n\t\t\t<ThemeAndLanguageConsumer>\n\t\t\t\t{({ theme, language }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{theme} and {language}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</ThemeAndLanguageConsumer>\n\t\t</AppProviders>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Writing Basic Jest Tests in JavaScript\nDESCRIPTION: Example of writing unit tests using Jest's testing framework, demonstrating sum and subtract function testing with Jest's global test and expect functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// 5.js\nconst { sum, subtract } = require('./math')\n\ntest('sum adds numbers', () => {\n\tconst result = sum(3, 7)\n\tconst expected = 10\n\texpect(result).toBe(expected)\n})\n\ntest('subtract subtracts numbers', () => {\n\tconst result = subtract(7, 3)\n\tconst expected = 4\n\texpect(result).toBe(expected)\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Constrained Identity Function to Calculator Operations in TypeScript\nDESCRIPTION: This snippet applies the Constrained Identity Function concept to the calculator operations, achieving both type safety and flexibility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\ntype OperationFn = (left: number, right: number) => number\nconst createOperations = <OperationsType extends Record<string, OperationFn>>(\n\toperations: OperationsType,\n) => operations\n\nconst operations = createOperations({\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n})\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\n\n// @ts-expect-error we haven't added support\n// for the exponentiation operator yet\noperations['**'](1, 2)\n```\n\n----------------------------------------\n\nTITLE: Problematic State Synchronization in React Board Component\nDESCRIPTION: Example showing problematic approach to managing derived state using useState and potential issues with state synchronization when squares are passed as props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board({ squares, onSelectSquare }) {\n\tconst [nextValue, setNextValue] = React.useState(calculateNextValue(squares))\n\tconst [winner, setWinner] = React.useState(calculateWinner(squares))\n\tconst [status, setStatus] = React.useState(calculateStatus(squares))\n\n\t// ... hmmm... we're no longer managing updating the squares state, so how\n\t// do we keep these variables up to date? useEffect? useLayoutEffect?\n\t// React.useEffect(() => {\n\t//   setNextValue... etc... eh...\n\t// }, [squares])\n\t//\n\t// Just call the state updaters when squares change\n\t// right in the render method?\n\t// if (prevSquares !== squares) {\n\t//   setNextValue... etc... ugh...\n\t// }\n\t//\n\t// I've seen people do all of these things... And none of them are great.\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Error Cases with MSW Runtime Handlers\nDESCRIPTION: Shows how to test error scenarios by adding runtime handlers to MSW server for specific test cases while maintaining test isolation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/checkout.js\nimport * as React from 'react'\nimport { server, rest } from 'test/server'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\n// happy path test, no special server stuff\ntest('clicking \"confirm\" submits payment', async () => {\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(await screen.findByText(/success/i)).toBeInTheDocument()\n})\n\n// edge/error case, special server stuff\n// note that the afterEach(() => server.resetHandlers()) we have in our\n// setup file will ensure that the special handler is removed for other tests\ntest('shows server error if the request fails', async () => {\n\tconst testErrorMessage = 'THIS IS A TEST FAILURE'\n\tserver.use(\n\t\trest.post('/checkout', async (req, res, ctx) => {\n\t\t\treturn res(ctx.status(500), ctx.json({ message: testErrorMessage }))\n\t\t}),\n\t)\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(await screen.findByRole('alert')).toHaveTextContent(testErrorMessage)\n})\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 3: Function-Based Updates\nDESCRIPTION: Adds support for function-based state updates by checking if the new state is a function and calling it with previous state if it is.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) =>\n\ttypeof newState === 'function' ? newState(prevState) : newState\n\nfunction useState() {\n\treturn React.useReducer(useStateReducer)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Modular Toggle Hooks in React\nDESCRIPTION: Splits the toggle functionality into two separate hooks: a basic useToggle and an advanced useToggleWithPropGetter, allowing for better tree-shaking and modularity.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nconst callAll = (...fns) => (...args) => fns.forEach((fn) => fn && fn(...args))\n\nfunction useToggle(initialOn = false) {\n\tconst [on, setOn] = useState(initialOn)\n\tconst toggle = () => setOn(!on)\n\treturn { on, toggle }\n}\n\nfunction useToggleWithPropGetter(initialOn) {\n\tconst { on, toggle } = useToggle(initialOn)\n\tconst getTogglerProps = (props = {}) => ({\n\t\t'aria-expanded': on,\n\t\ttabIndex: 0,\n\t\t...props,\n\t\tonClick: callAll(props.onClick, toggle),\n\t})\n\treturn { on, toggle, getTogglerProps }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Math Function Testing\nDESCRIPTION: Shows basic testing of math functions using direct comparisons and error throwing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst { sum, subtract } = require('./math')\n\nlet result, expected\n\nresult = sum(3, 7)\nexpected = 10\nif (result !== expected) {\n\tthrow new Error(`${result} is not equal to ${expected}`)\n}\n\nresult = subtract(7, 3)\nexpected = 4\nif (result !== expected) {\n\tthrow new Error(`${result} is not equal to ${expected}`)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Colocated State in Nested React Components\nDESCRIPTION: This example demonstrates how to manage colocated state when breaking a component into smaller nested components. The state is placed in the closest common parent of the components that need access to it.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/state-colocation-will-make-your-react-app-faster/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DogName({ time }) {\n\tconst [dog, setDog] = React.useState('')\n\treturn (\n\t\t<div>\n\t\t\t<DogInput dog={dog} onChange={setDog} />\n\t\t\t<DogFavoriteNumberDisplay time={time} dog={dog} />\n\t\t</div>\n\t)\n}\n\nfunction DogInput({ dog, onChange }) {\n\treturn (\n\t\t<>\n\t\t\t<label htmlFor=\"dog\">Dog Name</label>\n\t\t\t<br />\n\t\t\t<input id=\"dog\" value={dog} onChange={(e) => onChange(e.target.value)} />\n\t\t</>\n\t)\n}\n\nfunction DogFavoriteNumberDisplay({ time, dog }) {\n\treturn (\n\t\t<p>{dog ? `${dog}'s favorite number is ${time}.` : 'enter a dog name'}</p>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Optimizing Dispense Function with useCallback\nDESCRIPTION: Example showing the dispense function wrapped in React.useCallback for comparison with the non-memoized version.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst dispense = React.useCallback((candy) => {\n\tsetCandies((allCandies) => allCandies.filter((c) => c !== candy))\n}, [])\n```\n\n----------------------------------------\n\nTITLE: Improved Alert Component with Type Prop - TypeScript\nDESCRIPTION: Improved version of the Alert component using a type prop instead of boolean flags to ensure only one state is possible at a time.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-impossible-states-impossible.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<AlertBetter>Just FYI</AlertBetter>\n<AlertBetter type=\"success\">It worked!</AlertBetter>\n<AlertBetter type=\"warning\">Head's up</AlertBetter>\n<AlertBetter type=\"danger\">Watch out!</AlertBetter>\n```\n\n----------------------------------------\n\nTITLE: Password Validation Implementation\nDESCRIPTION: Implementation of the password validation function that checks for length, non-alphanumeric characters, digits, and letter case requirements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-test-fail.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// utils.js\nfunction isPasswordAllowed(password) {\n\treturn (\n\t\tpassword.length > 6 &&\n\t\t// non-alphanumeric\n\t\t/\\W/.test(password) &&\n\t\t// digit\n\t\t/\\d/.test(password) &&\n\t\t// uppercase letter\n\t\t/[A-Z]/.test(password) &&\n\t\t// lowercase letter\n\t\t/[a-z]/.test(password)\n\t)\n}\n\nexport { isPasswordAllowed }\n```\n\n----------------------------------------\n\nTITLE: Basic Login Form Implementation in React TSX\nDESCRIPTION: Example of a simple login form implementation with username and password fields using React and TypeScript.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst form = (\n\t<form onSubmit={handleSubmit}>\n\t\t<div>\n\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t<input id=\"username\" className=\"username-field\" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t<input id=\"password\" type=\"password\" className=\"password-field\" />\n\t\t</div>\n\t\t<div>\n\t\t\t<button type=\"submit\" className=\"btn\">\n\t\t\t\tLogin\n\t\t\t</button>\n\t\t</div>\n\t</form>\n)\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple HTML File with Embedded JavaScript\nDESCRIPTION: This snippet demonstrates how to create an HTML file with embedded JavaScript that defines a function, calls it, and logs the result to the console. It serves as a basic template for beginners to start writing and running JavaScript code in a web browser.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-get-started-with-programming.mdx#2025-04-12_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<html>\n\t<head>\n\t\t<title>My first program</title>\n\t</head>\n\t<body>\n\t\t<script>\n\t\t\tfunction add(a, b) {\n\t\t\t\treturn a + b\n\t\t\t}\n\t\t\tconst result = add(1, 2)\n\t\t\tconst message = 'The answer to 1 + 2 is'\n\t\t\tconsole.log(message, result)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Simplifying Context Consumption with React Hooks\nDESCRIPTION: This snippet showcases how to use the useContext hook to consume multiple contexts in a more straightforward manner. It demonstrates the creation of ThemeContext and LanguageContext, their providers, and how to use useContext in a functional component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-react-context.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst ThemeContext = React.createContext('light')\nclass ThemeProvider extends React.Component {\n\t/* code */\n}\nconst LanguageContext = React.createContext('en')\nclass LanguageProvider extends React.Component {\n\t/* code */\n}\n\nfunction AppProviders({ children }) {\n\treturn (\n\t\t<LanguageProvider>\n\t\t\t<ThemeProvider>{children}</ThemeProvider>\n\t\t</LanguageProvider>\n\t)\n}\n\nfunction App() {\n\tconst theme = useContext(ThemeContext)\n\tconst language = useContext(LanguageContext)\n\treturn (\n\t\t<div>\n\t\t\t{theme} and {language}\n\t\t</div>\n\t)\n}\n\nReactDOM.render(\n\t<AppProviders>\n\t\t<App />\n\t</AppProviders>,\n\tdocument.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing a Simple Constrained Identity Function in TypeScript\nDESCRIPTION: This snippet demonstrates a basic Constrained Identity Function (CIF) using a simple number object example to explain the concept.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\ntype Value = number\nconst createNumbers = <ObjectType extends Record<string, Value>>(\n\tobj: ObjectType,\n) => obj\n\nconst numbers = createNumbers({ one: 1, two: 2, three: 3, four: 4 })\n\n// @ts-expect-error we don't have 'five' yet\nnumbers['five']\n```\n\n----------------------------------------\n\nTITLE: Function Expressions in TypeScript\nDESCRIPTION: Various ways to express functions including named expressions, anonymous functions, and arrow functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// named function expression\nconst sum = function sum(a: number, b: number): number {\n\treturn a + b\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// annonymous function expression\nconst sum = function (a: number, b: number): number {\n\treturn a + b\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// arrow function\nconst sum = (a: number, b: number): number => {\n\treturn a + b\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// implicit return\nconst sum = (a: number, b: number): number => a + b\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// implicit return of an object requires parentheses to disambiguate the curly braces\nconst sum = (a: number, b: number): { result: number } => ({ result: a + b })\n```\n\n----------------------------------------\n\nTITLE: Composing Multiple Contexts with Utility Components\nDESCRIPTION: Shows how to compose multiple context providers and consumers using utility components to avoid excessive nesting and improve readability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/reacts-new-context-api.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nconst ThemeContext = React.createContext('light')\nclass ThemeProvider extends React.Component {\n\t/* code */\n}\nconst ThemeConsumer = ThemeContext.Consumer\nconst LanguageContext = React.createContext('en')\nclass LanguageProvider extends React.Component {\n\t/* code */\n}\nconst LanguageConsumer = LanguageContext.Consumer\n\nfunction AppProviders({ children }) {\n\treturn (\n\t\t<LanguageProvider>\n\t\t\t<ThemeProvider>{children}</ThemeProvider>\n\t\t</LanguageProvider>\n\t)\n}\n\nfunction ThemeAndLanguageConsumer({ children }) {\n\treturn (\n\t\t<LanguageConsumer>\n\t\t\t{(language) => (\n\t\t\t\t<ThemeConsumer>\n\t\t\t\t\t{(theme) => children({ language, theme })}\n\t\t\t\t</ThemeConsumer>\n\t\t\t)}\n\t\t</LanguageConsumer>\n\t)\n}\n\nclass App extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<AppProviders>\n\t\t\t\t<ThemeAndLanguageConsumer>\n\t\t\t\t\t{({ theme, language }) => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{theme} and {language}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</ThemeAndLanguageConsumer>\n\t\t\t</AppProviders>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Unit Testing Pure Function with Jest-in-Case\nDESCRIPTION: A unit test for a pure function (fizzbuzz) using jest-in-case to test multiple input-output scenarios.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/static-vs-unit-vs-integration-vs-e2e-tests.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// pure functions are the BEST for unit testing and I LOVE using jest-in-case for them!\nimport cases from 'jest-in-case'\nimport fizzbuzz from '../fizzbuzz'\n\ncases(\n\t'fizzbuzz',\n\t({ input, output }) => expect(fizzbuzz(input)).toBe(output),\n\t[\n\t\t[1, '1'],\n\t\t[2, '2'],\n\t\t[3, 'Fizz'],\n\t\t[5, 'Buzz'],\n\t\t[9, 'Fizz'],\n\t\t[15, 'FizzBuzz'],\n\t\t[16, '16'],\n\t].map(([input, output]) => ({\n\t\ttitle: `${input} => ${output}`,\n\t\tinput,\n\t\toutput,\n\t})),\n)\n```\n\n----------------------------------------\n\nTITLE: Improved Test Suite with beforeEach\nDESCRIPTION: Second iteration using beforeEach to reset component state between tests, improving isolation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nlet getByText, counterButton\n\nbeforeEach(() => {\n\tconst utils = render(<Counter maxClicks={4} initialCount={3} />)\n\tgetByText = utils.getByText\n\tcounterButton = utils.getByText(/^count/i)\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel for JSX Compilation\nDESCRIPTION: Modified HTML setup that changes the script type to 'text/babel' to enable Babel compilation of JSX code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script src=\"https://unpkg.com/react@16.13.1/umd/react.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/react-dom@16.13.1/umd/react-dom.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/@babel/standalone@7.8.3/babel.js\"></script>\n\t\t<script type=\"text/babel\">\n\t\t\tconst rootElement = document.getElementById('root')\n\t\t\tconst element = React.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'container' },\n\t\t\t\t'Hello World',\n\t\t\t)\n\t\t\tReactDOM.render(element, rootElement)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Non-Primitive Props Example\nDESCRIPTION: Shows how non-primitive props like functions and arrays create referential equality issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Blub() {\n\tconst bar = () => {}\n\tconst baz = [1, 2, 3]\n\treturn <Foo bar={bar} baz={baz} />\n}\n```\n\n----------------------------------------\n\nTITLE: Single Assertion in waitFor Callback for React Testing\nDESCRIPTION: Illustrates the best practice of including only one assertion in a waitFor callback to allow for faster failure detection and clearer error messages.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nawait waitFor(() => {\n\texpect(window.fetch).toHaveBeenCalledWith('foo')\n\texpect(window.fetch).toHaveBeenCalledTimes(1)\n})\n\n// ✅\nawait waitFor(() => expect(window.fetch).toHaveBeenCalledWith('foo'))\nexpect(window.fetch).toHaveBeenCalledTimes(1)\n```\n\n----------------------------------------\n\nTITLE: Traditional Menu Component Implementation in React TSX\nDESCRIPTION: Shows a conventional approach to implementing a menu component with props for button contents and menu items. This example demonstrates a less flexible implementation before applying compound components pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<Menu\n\t\t\tbuttonContents={\n\t\t\t\t<>\n\t\t\t\t\tActions <span aria-hidden>▾</span>\n\t\t\t\t</>\n\t\t\t}\n\t\t\titems={[\n\t\t\t\t{ contents: 'Download', onSelect: () => alert('Download') },\n\t\t\t\t{ contents: 'Create a Copy', onSelect: () => alert('Create a Copy') },\n\t\t\t\t{ contents: 'Delete', onSelect: () => alert('Delete') },\n\t\t\t]}\n\t\t/>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Implementing Optional Chaining\nDESCRIPTION: Demonstrates the use of optional chaining operator (?.) for safely accessing nested object properties and calling functions that may not exist. Includes React component examples.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// what we did before optional chaining:\nconst streetName = user && user.address && user.address.street.name\n\n// what we can do now:\nconst streetName = user?.address?.street?.name\n\n// this will run even if options is undefined (in which case, onSuccess would be undefined as well)\n// however, it will still fail if options was never declared,\n// since optional chaining cannot be used on a non-existent root object.\n// optional chaining does not replace checks like if (typeof options == \"undefined\")\nconst onSuccess = options?.onSuccess\n\n// this will run without error even if onSuccess is undefined (in which case, no function will be called)\nonSuccess?.({ data: 'yay' })\n\n// and we can combine those things into a single line:\noptions?.onSuccess?.({ data: 'yay' })\n\n// and if you are 100% certain that onSuccess is a function if options exists\n// then you don't need the extra ?. before calling it. Only use ?. in situations\n// where the thing on the left might not exist.\noptions?.onSuccess({ data: 'yay' })\n\n// in React:\nfunction UserProfile({ user }) {\n\treturn (\n\t\t<div>\n\t\t\t<h1>{user.name}</h1>\n\t\t\t<strong>{user.bio?.short ?? 'No bio provided'}</strong>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Different useState Call Patterns\nDESCRIPTION: Shows the three different ways useState can be called: with no initial value, with a literal initial value, or with a function for lazy initialization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nuseState() // no initial value\nuseState(initialValue) // a literal initial value\nuseState(() => initialValue) // a lazy initial value\n```\n\n----------------------------------------\n\nTITLE: Basic Boolean Test Implementation\nDESCRIPTION: Demonstrates the most basic form of testing using a simple boolean comparison and error throwing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst actual = true\nconst expected = false\nif (actual !== expected) {\n\tthrow new Error(`${actual} is not ${expected}`)\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring Counter to Use React Hooks\nDESCRIPTION: A functional component version of the Counter using React's useState hook while maintaining the same render props pattern interface.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nfunction Counter(props) {\n\tconst [count, setCount] = useState(0)\n\tconst increment = () => setCount((currentCount) => currentCount + 1)\n\treturn props.children({\n\t\tcount: count,\n\t\tincrement,\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Functional Programming Alternative in JavaScript\nDESCRIPTION: Demonstrates a functional programming approach using pure functions instead of classes, eliminating the need for 'this' keyword and reducing complexity.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction setName(person, strName) {\n\treturn Object.assign({}, person, { name: strName })\n}\n\nfunction setGreeting(person, newGreeting) {\n\treturn Object.assign({}, person, { greeting: newGreeting })\n}\n\nfunction getName(person) {\n\treturn getPrefixedName('Name', person.name)\n}\n\nfunction getPrefixedName(prefix, name) {\n\treturn `${prefix}: ${name}`\n}\n\nfunction getGreetingCallback(person) {\n\tconst { greeting, name } = person\n\treturn (subject) => `${greeting} ${subject}, I'm ${name}`\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing DevTools Loader\nDESCRIPTION: Conditional loading logic for DevTools that handles different environments and explicit enable/disable flags. Supports both development and production usage through localStorage and URL parameters.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-own-dev-tools.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction loadDevTools(callback) {\n\tconst explicitlyDisabled =\n\t\twindow.location.search.includes('dev-tools=false') ||\n\t\twindow.localStorage.getItem('dev-tools') === 'false'\n\n\tconst explicitlyEnabled =\n\t\twindow.location.search.includes('dev-tools=true') ||\n\t\twindow.localStorage.getItem('dev-tools') === 'true'\n\n\tif (\n\t\t!explicitlyDisabled &&\n\t\t(process.env.NODE_ENV === 'development' || explicitlyEnabled)\n\t) {\n\t\timport('./dev-tools')\n\t\t\t.then((devTools) => devTools.install())\n\t\t\t.finally(callback)\n\t} else {\n\t\tcallback()\n\t}\n}\n\nexport default loadDevTools\n```\n\n----------------------------------------\n\nTITLE: Using Context Provider in React Component\nDESCRIPTION: Example of wrapping components with the CountProvider to provide context values to child components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<CountProvider>\n\t\t\t<CountDisplay />\n\t\t\t<Counter />\n\t\t</CountProvider>\n\t)\n}\n\nReactDOM.render(<App />, document.getElementById('⚛️'))\n```\n\n----------------------------------------\n\nTITLE: HTML Blur Effect Element\nDESCRIPTION: HTML element that applies a blur effect to improve the appearance of the placeholder image\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"backdrop-blur-xl\"></div>\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Remix Configuration\nDESCRIPTION: Minimal required configuration file for Remix to build successfully.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = {}\n```\n\n----------------------------------------\n\nTITLE: Implementing useToggle Hook with useState in React\nDESCRIPTION: Initial implementation of a useToggle hook using React's useState hook to manage a boolean state with toggle, setOn, and setOff functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useToggle() {\n\tconst [on, setOnState] = React.useState(false)\n\n\tconst toggle = () => setOnState((o) => !o)\n\tconst setOn = () => setOnState(true)\n\tconst setOff = () => setOnState(false)\n\n\treturn { on, toggle, setOn, setOff }\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring Tests with jest-in-case\nDESCRIPTION: Demonstrates how to use jest-in-case to simplify and improve the readability of multiple test cases for a pure function, making it easier to add new test cases.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/aha-testing/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nimport cases from 'jest-in-case'\nimport add from '../add'\n\ncases(\n\t'add',\n\t({ first, second, result }) => {\n\t\texpect(add(first, second)).toBe(result)\n\t},\n\t[\n\t\t{ first: 1, second: 2, result: 3 },\n\t\t{ first: 3, second: 4, result: 7 },\n\t\t{ first: 100, second: 2, result: 102 },\n\t],\n)\n```\n\n----------------------------------------\n\nTITLE: Recommended ContactList Implementation with Ternary in React JSX\nDESCRIPTION: This code snippet shows the recommended way to implement the ContactList component using a ternary operator for conditional rendering.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ContactList({ contacts }) {\n\treturn (\n\t\t<div>\n\t\t\t<ul>\n\t\t\t\t{contacts.length\n\t\t\t\t\t? contacts.map((contact) => (\n\t\t\t\t\t\t\t<li key={contact.id}>\n\t\t\t\t\t\t\t\t{contact.firstName} {contact.lastName}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t  ))\n\t\t\t\t\t: null}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Simple Counter Component in React\nDESCRIPTION: This snippet demonstrates a basic counter component using React hooks. It uses useState to manage the count state and renders a button that increments the count when clicked.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction App() {\n\treturn <Counter />\n}\n```\n\n----------------------------------------\n\nTITLE: Avoiding Unnecessary Accessibility Attributes in React Components\nDESCRIPTION: Illustrates the correct approach of using native HTML elements without adding redundant accessibility attributes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nrender(<button role=\"button\">Click me</button>)\n\n// ✅\nrender(<button>Click me</button>)\n```\n\n----------------------------------------\n\nTITLE: Implementing Key Prop Reset Pattern in React\nDESCRIPTION: Demonstration of using React's key prop to reset component state by forcing remount, showing both parent and child component implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-initializer-pattern/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction KeyPropReset() {\n\tconst [key, setKey] = React.useState(0)\n\tconst resetCounter = () => setKey((k) => k + 1)\n\treturn <KeyPropResetCounter key={key} reset={resetCounter} />\n}\n\nfunction KeyPropResetCounter({ reset }) {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <CountUI count={count} increment={increment} reset={reset} />\n}\n```\n\n----------------------------------------\n\nTITLE: Basic React Greeting Component Implementation\nDESCRIPTION: A simple React component that manages a greeting state and handles form submission to update the greeting.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tracing-user-interactions-with-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Greeting() {\n\tconst [greeting, setGreeting] = React.useState('')\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.name.value\n\t\tsetGreeting(`Hello ${name}`)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"name\">Name:</label>\n\t\t\t\t<input id=\"name\" />\n\t\t\t</form>\n\t\t\t<div>{greeting}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Conditional Hook Call Error\nDESCRIPTION: This example shows another way to trigger the hook error by conditionally calling a hook, which violates React's rules of hooks as hooks must be called the same number of times on every render.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Example() {\n\tconst [count, setCount] = React.useState(0)\n\tlet otherState\n\tif (count > 0) {\n\t\tReact.useEffect(() => {\n\t\t\tconsole.log('count', count)\n\t\t})\n\t}\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with Fetch Mock\nDESCRIPTION: Demonstrates mocking window.fetch directly for testing the checkout component, providing more confidence in actual HTTP request formatting.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/checkout.js\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\nbeforeAll(() => jest.spyOn(window, 'fetch'))\n\ntest('clicking \"confirm\" submits payment', async () => {\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\twindow.fetch.mockResolvedValueOnce({\n\t\tok: true,\n\t\tjson: async () => ({ success: true }),\n\t})\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(window.fetch).toHaveBeenCalledWith(\n\t\t'/checkout',\n\t\texpect.objectContaining({\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(shoppingCart),\n\t\t}),\n\t)\n\texpect(window.fetch).toHaveBeenCalledTimes(1)\n\texpect(await screen.findByText(/success/i)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Lodash Import Optimization\nDESCRIPTION: Demonstrates how babel-plugin-lodash automatically optimizes Lodash imports by converting full library imports into cherry-picked method imports for better performance.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-writing-custom-babel-and-eslint-plugins-can-increase-productivity-and-improve-user-experience.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport _ from 'lodash'\n// transforms to\nimport get from 'lodash/get'\n```\n\n----------------------------------------\n\nTITLE: Demonstrating React Strict Mode Warnings in TSX\nDESCRIPTION: This extensive code snippet demonstrates various components and patterns that trigger React Strict Mode warnings, including deprecated lifecycle methods, string refs, and legacy context API usage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-strict-mode.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\n\nclass WillMount extends React.Component {\n  componentWillMount() {\n    // Use componentDidMount instead\n  }\n  render() {\n    return null\n  }\n}\n\nclass WillReceiveProps extends React.Component {\n  componentWillReceiveProps() {\n    // Use static getDerivedStateFromProps\n  }\n  render() {\n    return null\n  }\n}\n\nclass WillUpdate extends React.Component {\n  componentWillUpdate() {\n    // Use componentDidUpdate instead\n  }\n  render() {\n    return null\n  }\n}\n\nclass StringRef extends React.Component {\n  render() {\n    // Use React.createRef instead\n    return <div ref=\"myDiv\" />\n  }\n}\n\nclass FindDOMNode extends React.Component {\n  componentDidMount() {\n    // Use React.createRef instead\n    ReactDOM.findDOMNode(this)\n  }\n  render() {\n    return <div />\n  }\n}\n\nclass MyColorDiv extends React.Component {\n  // Use React.createContext().Consumer instead (or even better useContext)\n  static contextTypes = {color: PropTypes.string}\n  render() {\n    return <div style={{color: this.context.color}} />\n  }\n}\n\nclass MyColorProvider extends React.Component {\n  // Use React.createContext().Provider instead\n  static childContextTypes = {color: PropTypes.string}\n  getChildContext() {\n    return {color: 'purple'}\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\nfunction App() {\n  return (\n    <callout-info>\n      <WillMount />\n      <WillReceiveProps />\n      <WillUpdate />\n      <StringRef />\n      <FindDOMNode />\n      <MyColorProvider>\n        <MyColorDiv />\n      </MyColorProvider>\n    </>\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Toggle Component with Old Context API\nDESCRIPTION: Implementation of the Toggle component using React's old context API, showing the verbose contextTypes and childContextTypes pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/migrating-to-reacts-new-context-api.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst TOGGLE_CONTEXT = '__toggle__'\nfunction ToggleOn({ children }, context) {\n\tconst { on } = context[TOGGLE_CONTEXT]\n\treturn on ? children : null\n}\nToggleOn.contextTypes = {\n\t[TOGGLE_CONTEXT]: PropTypes.object.isRequired,\n}\nfunction ToggleOff({ children }, context) {\n\tconst { on } = context[TOGGLE_CONTEXT]\n\treturn on ? null : children\n}\nToggleOff.contextTypes = {\n\t[TOGGLE_CONTEXT]: PropTypes.object.isRequired,\n}\nfunction ToggleButton(props, context) {\n\tconst { on, toggle } = context[TOGGLE_CONTEXT]\n\treturn <Switch on={on} onClick={toggle} {...props} />\n}\nToggleButton.contextTypes = {\n\t[TOGGLE_CONTEXT]: PropTypes.object.isRequired,\n}\nclass Toggle extends React.Component {\n\tstatic On = ToggleOn\n\tstatic Off = ToggleOff\n\tstatic Button = ToggleButton\n\tstatic defaultProps = { onToggle: () => {} }\n\tstatic childContextTypes = {\n\t\t[TOGGLE_CONTEXT]: PropTypes.object.isRequired,\n\t}\n\tstate = { on: false }\n\ttoggle = () =>\n\t\tthis.setState(\n\t\t\t({ on }) => ({ on: !on }),\n\t\t\t() => this.props.onToggle(this.state.on),\n\t\t)\n\tgetChildContext() {\n\t\treturn {\n\t\t\t[TOGGLE_CONTEXT]: {\n\t\t\t\ton: this.state.on,\n\t\t\t\ttoggle: this.toggle,\n\t\t\t},\n\t\t}\n\t}\n\trender() {\n\t\treturn <div>{this.props.children}</div>\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Basic React useState Hook Example\nDESCRIPTION: Shows a basic implementation of the useState hook in a React component for managing click count state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-array-destructuring-fundamentals.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useState } from 'react'\n\nfunction Example() {\n\t// Declare a new state variable, which we'll call \"count\"\n\tconst [count, setCount] = useState(0)\n\n\treturn (\n\t\t<div>\n\t\t\t<p>You clicked {count} times</p>\n\t\t\t<button onClick={() => setCount(count + 1)}>Click me</button>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Class Component Counter\nDESCRIPTION: A simple Counter component implemented as a React class component with state and an increment method.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\nclass Counter extends React.Component {\n\tstate = { count: 0 }\n\tincrement = () => this.setState(({ count }) => ({ count: count + 1 }))\n\trender() {\n\t\treturn <button onClick={this.increment}>{this.state.count}</button>\n\t}\n}\n\nexport default Counter\n```\n\n----------------------------------------\n\nTITLE: Unit Testing React Component with Testing Library\nDESCRIPTION: A unit test example for a React component using React Testing Library. It tests the rendering of an ItemList component with different props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/static-vs-unit-vs-integration-vs-e2e-tests.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport '@testing-library/jest-dom/extend-expect'\nimport * as React from 'react'\n// if you have a test utils module like in the integration test example above\n// then use that instead of @testing-library/react\nimport { render, screen } from '@testing-library/react'\nimport ItemList from '../item-list'\n\n// Some people don't call these a unit test because we're rendering to the DOM with React.\n// They'd tell you to use shallow rendering instead.\n// When they tell you this, send them to https://kcd.im/shallow\ntest('renders \"no items\" when the item list is empty', () => {\n\trender(<ItemList items={[]} />)\n\texpect(screen.getByText(/no items/i)).toBeInTheDocument()\n})\n\ntest('renders the items in a list', () => {\n\trender(<ItemList items={['apple', 'orange', 'pear']} />)\n\t// note: with something so simple I might consider using a snapshot instead, but only if:\n\t// 1. the snapshot is small\n\t// 2. we use toMatchInlineSnapshot()\n\t// Read more: https://kcd.im/snapshots\n\texpect(screen.getByText(/apple/i)).toBeInTheDocument()\n\texpect(screen.getByText(/orange/i)).toBeInTheDocument()\n\texpect(screen.getByText(/pear/i)).toBeInTheDocument()\n\texpect(screen.queryByText(/no items/i)).not.toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Converting a Class Component to a Function Component with React Hooks\nDESCRIPTION: A refactored version of the UsernameForm component using React hooks and functional component pattern. It maintains the same behavior as the class component version with useState for state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction UsernameForm({ updateUsername }) {\n\tconst [{ status, error }, setState] = React.useState({\n\t\tstatus: 'idle',\n\t\terror: null,\n\t})\n\n\tasync function handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst newUsername = event.target.elements.username.value\n\t\tsetState({ status: 'pending' })\n\t\ttry {\n\t\t\tawait updateUsername(newUsername)\n\t\t\tsetState({ status: 'fulfilled' })\n\t\t} catch (e) {\n\t\t\tsetState({ status: 'rejected', error: e })\n\t\t}\n\t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t<input id=\"username\" />\n\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t<span>{status === 'pending' ? 'Saving...' : null}</span>\n\t\t\t<span>{status === 'rejected' ? error.message : null}</span>\n\t\t</form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Reducer in useToggle Hook with React\nDESCRIPTION: Updated useToggle to use the custom reducer provided by the user instead of the default toggleReducer, and exporting the default reducer for users to reference.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useToggle({ reducer }) {\n\tconst [{ on }, dispatch] = React.useReducer(reducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: actionTypes.toggle })\n\tconst setOn = () => dispatch({ type: actionTypes.on })\n\tconst setOff = () => dispatch({ type: actionTypes.off })\n\n\treturn { on, toggle, setOn, setOff }\n}\n\nexport { useToggle, actionTypes, toggleReducer }\n```\n\n----------------------------------------\n\nTITLE: Ensuring Primary Region for Write Operations in TypeScript\nDESCRIPTION: This TypeScript code snippet demonstrates how to ensure write operations are performed in the primary region using the ensurePrimary() function. It's used in scenarios where writes are needed on GET requests in a multi-region setup.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// if there's less than ~six months left, extend the session\nconst twoWeeks = 1000 * 60 * 60 * 24 * 30 * 6\nif (Date.now() + twoWeeks > session.expirationDate.getTime()) {\n\tawait ensurePrimary()\n\tconst newExpirationDate = new Date(Date.now() + sessionExpirationTime)\n\tawait prisma.session.update({\n\t\tdata: { expirationDate: newExpirationDate },\n\t\twhere: { id: sessionId },\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Security Redirects Using YouTube Rick Roll\nDESCRIPTION: Security configuration that redirects potentially malicious or scanning requests to a Rick Roll YouTube video. Targets common attack vectors like PHP, database, Git, and console access attempts.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/server/_redirects.txt#2025-04-12_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n# this is for phpmyadmin and php-my-admin stuff:\n/php(.*)                                                                https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/db(.*)                                                                 https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/sql(.*)                                                                https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/.git(.*)                                                               https://www.youtube.com/watch?v=dQw4w9WgXcQ\n(.*)/wp-includes/(.*)                                                   https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/api(.*)                                                                https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/Autodiscover(.*)                                                       https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/_ignition(.*)                                                          https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/solr(.*)                                                               https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/wp-content(.*)                                                         https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/ReportServer(.*)                                                       https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/currentsetting(.*)                                                     https://www.youtube.com/watch?v=dQw4w9WgXcQ\nPOST,DELETE,PATCH,PUT  /                                                https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/webfig(.*)                                                             https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/config(.*)                                                             https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/console(.*)                                                            https://www.youtube.com/watch?v=dQw4w9WgXcQ\n```\n\n----------------------------------------\n\nTITLE: Debugging MCP Server Connection\nDESCRIPTION: Commands for debugging MCP server connections, including directly connecting to the MCP server from the command line and clearing authentication cache files if needed.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/static/README.md#2025-04-12_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx mcp-remote http://localhost:8787/sse\n```\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf ~/.mcp-auth\n```\n\n----------------------------------------\n\nTITLE: Expensive Initial State Calculation\nDESCRIPTION: Example showing potentially expensive initial state calculation that could benefit from lazy initialization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nconst initialState = calculateSomethingExpensive(props)\nconst [count, setCount] = React.useState(initialState)\n```\n\n----------------------------------------\n\nTITLE: Using a Custom Context Hook for Better DX\nDESCRIPTION: Shows the improved approach using a custom hook that encapsulates the context usage for better developer experience.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { useSomething } from 'some-context-package'\n\nfunction YourComponent() {\n\tconst something = useSomething()\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing the arrayify utility function in JavaScript\nDESCRIPTION: A utility function that ensures the return value is an array. It handles three cases: returning the input if it's already an array, returning an empty array for falsy values, and wrapping non-array values in an array.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-know-what-to-test.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction arrayify(maybeArray) {\n\tif (Array.isArray(maybeArray)) {\n\t\treturn maybeArray\n\t} else if (!maybeArray) {\n\t\treturn []\n\t} else {\n\t\treturn [maybeArray]\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Closure Behavior with JavaScript Function Parameters\nDESCRIPTION: This snippet shows how a closure captures the value of a variable at the time of its creation, and why changing the original variable doesn't affect the closure's output.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-pass-by-value-function-parameters.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getLogger(arg) {\n\tfunction logger() {\n\t\tconsole.log(arg)\n\t}\n\treturn logger\n}\n\nlet fruit = 'raspberry'\nconst logFruit = getLogger(fruit)\n\nlogFruit() // \"raspberry\"\nfruit = 'peach'\nlogFruit() // \"raspberry\" Wait what!? Why is this not \"peach\"?\n```\n\n----------------------------------------\n\nTITLE: Implementing a Candy Function with Traditional Parameter Handling in JavaScript\nDESCRIPTION: This snippet shows a JavaScript function that handles candy selection with manual parameter checking and default value assignment. It demonstrates traditional error handling for required parameters and default value assignment for optional parameters.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-default-parameters.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getCandy(kind, size, upperKind, callback) {\n\tif (!kind) {\n\t\trequiredParam('kind')\n\t}\n\tif (!size) {\n\t\trequiredParam('size')\n\t}\n\tupperKind = upperKind || kind.toUpperCase()\n\tcallback = callback || function noop() {}\n\n\tconst result = { kind, size, upperKind }\n\tcallback(result)\n\treturn result\n}\n\nfunction requiredParam(argName) {\n\tthrow new Error(`${argName} is required`)\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Counter Component with React Testing Library\nDESCRIPTION: Test implementation for the Counter component using React Testing Library. Creates a test utility function to render the counter and access its props and state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as React from 'react'\nimport { render } from '@testing-library/react'\n\nimport Counter from '../counter'\n\nfunction renderCounter(props) {\n\tlet utils\n\tconst children = jest.fn((stateAndHelpers) => {\n\t\tutils = stateAndHelpers\n\t\treturn null\n\t})\n\treturn {\n\t\t...render(<Counter {...props}>{children}</Counter>),\n\t\tchildren,\n\t\t...utils,\n\t}\n}\n\ntest('counter increments the count', () => {\n\tconst { children, increment } = renderCounter()\n\texpect(children).toHaveBeenCalledWith(expect.objectContaining({ count: 0 }))\n\tincrement()\n\texpect(children).toHaveBeenCalledWith(expect.objectContaining({ count: 1 }))\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing Lifecycle Hooks with Render Props\nDESCRIPTION: Demonstrates how to access render prop arguments within lifecycle hooks by creating a separate class component and forwarding the arguments as props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/answers-to-common-questions-about-render-props.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nclass RegularClassComponent extends React.Component {\n\tcomponentDidUpdate() {\n\t\t// here you are :)\n\t\tconsole.log(this.props.whatever)\n\t}\n\trender() {\n\t\treturn <div>{/* your ui */}</div>\n\t}\n}\n\nfunction App() {\n\treturn <RenderPropComp render={(arg) => <RegularClassComponent {...arg} />} />\n}\n```\n\n----------------------------------------\n\nTITLE: Basic React Counter Implementation with useState\nDESCRIPTION: Simple implementation of a counter component using React's useState hook with direct state updates.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount(count + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Enhancing Mock with Call Tracking in JavaScript Test\nDESCRIPTION: This test extends the mock implementation to track function calls, allowing assertions on the number of calls and arguments passed to the mocked function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utils from '#app/utils'\n\ntest('returns winner', () => {\n\tconst originalGetWinner = utils.getWinner\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = (...args) => {\n\t\tutils.getWinner.mock.calls.push(args)\n\t\treturn args[1]\n\t}\n\tutils.getWinner.mock = { calls: [] }\n\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\texpect(utils.getWinner.mock.calls).toHaveLength(2)\n\tutils.getWinner.mock.calls.forEach((args) => {\n\t\texpect(args).toEqual(['Ken Wheeler', 'Kent C. Dodds'])\n\t})\n\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = originalGetWinner\n})\n```\n\n----------------------------------------\n\nTITLE: Solution 2: Using React Testing Library's Wait Utility\nDESCRIPTION: This solution uses the wait utility from React Testing Library to allow any pending state updates to complete. It works best when mocks resolve immediately but ignores test behavior during wait time.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n// 2. Use React Testing Library's `wait` utility\ntest('course shows loading screen', async () => {\n\tgetCourseInfo.mockResolvedValueOnce(buildCourse())\n\trender(<Course courseId=\"123\" />)\n\tconst alert = screen.getByRole('alert')\n\texpect(alert).toHaveTextContent(/loading/i)\n\tawait wait()\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Interaction Tracing to React Component\nDESCRIPTION: Enhanced version of the Greeting component that implements basic interaction tracing using the unstable_trace API from scheduler/tracing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tracing-user-interactions-with-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n// your other imports\nimport { unstable_trace as trace } from 'scheduler/tracing'\n\nfunction Greeting() {\n\tconst [greeting, setGreeting] = React.useState('')\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.name.value\n\t\ttrace('form submitted', performance.now(), () => {\n\t\t\tsetGreeting(`Hello ${name}`)\n\t\t})\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"name\">Name:</label>\n\t\t\t\t<input id=\"name\" />\n\t\t\t</form>\n\t\t\t<div>{greeting}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Enhanced Filter with Options\nDESCRIPTION: Extended version of filter function that supports multiple filtering options through configuration object.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction filter(array, {\n\tfilterNull = true,\n\tfilterUndefined = true,\n\tfilterZero = false,\n\tfilterEmptyString = false,\n} = {}) {\n\tlet newArray = []\n\tfor (let index = 0; index < array.length; index++) {\n\t\tconst element = array[index]\n\t\tif (\n\t\t\t(filterNull && element === null) ||\n\t\t\t(filterUndefined && element === undefined) ||\n\t\t\t(filterZero && element === 0) ||\n\t\t\t(filterEmptyString && element === '')\n\t\t) {\n\t\t\tcontinue\n\t\t}\n\t\tnewArray[newArray.length] = element\n\t}\n\treturn newArray\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Context Implementation with Custom Hook\nDESCRIPTION: A full implementation of the context provider with a custom hook that includes helpful error handling when the hook is used outside of a provider.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\n\nconst CountContext = React.createContext()\n\nfunction countReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'increment': {\n\t\t\treturn { count: state.count + 1 }\n\t\t}\n\t\tcase 'decrement': {\n\t\t\treturn { count: state.count - 1 }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction CountProvider({ children }) {\n\tconst [state, dispatch] = React.useReducer(countReducer, { count: 0 })\n\t// NOTE: you *might* need to memoize this value\n\t// Learn more in http://kcd.im/optimize-context\n\tconst value = { state, dispatch }\n\treturn <CountContext.Provider value={value}>{children}</CountContext.Provider>\n}\n\nfunction useCount() {\n\tconst context = React.useContext(CountContext)\n\tif (context === undefined) {\n\t\tthrow new Error('useCount must be used within a CountProvider')\n\t}\n\treturn context\n}\n\nexport { CountProvider, useCount }\n```\n\n----------------------------------------\n\nTITLE: React Component Using Status Enum\nDESCRIPTION: Updated React component implementation using status enum for more precise state handling and better user experience.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction YourPosition() {\n\tconst { status, position, error } = useGeoPosition()\n\n\tif (status === 'idle' || status === 'pending') {\n\t\treturn <div>Loading your position...</div>\n\t}\n\n\tif (status === 'resolved') {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\tLat: {position.coords.latitude}, Long: {position.coords.longitude}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tif (status === 'rejected') {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Oh no, there was a problem getting your position:</div>\n\t\t\t\t<pre>{error.message}</pre>\n\t\t\t</div>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Refined State Reducer Pattern with Action Types\nDESCRIPTION: Further refines the state reducer pattern by introducing action types. This allows for more specific control over different types of state changes and improves the API's flexibility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [clicksSinceReset, setClicksSinceReset] = React.useState(0)\n\tconst tooManyClicks = clicksSinceReset >= 4\n\n\tconst { on, toggle, setOn, setOff } = useToggle({\n\t\treducer(currentState, action) {\n\t\t\tconst changes = toggleReducer(currenState, action)\n\t\t\tif (tooManyClicks && action.type === actionTypes.toggle) {\n\t\t\t\t// other changes are fine, but on needs to be unchanged\n\t\t\t\treturn { ...changes, on: currentState.on }\n\t\t\t} else {\n\t\t\t\t// the changes are fine\n\t\t\t\treturn changes\n\t\t\t}\n\t\t},\n\t})\n\n\tfunction handleClick() {\n\t\ttoggle()\n\t\tsetClicksSinceReset((count) => count + 1)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setOff}>Switch Off</button>\n\t\t\t<button onClick={setOn}>Switch On</button>\n\t\t\t<Switch on={on} onClick={handleClick} />\n\t\t\t{tooManyClicks ? (\n\t\t\t\t<button onClick={() => setClicksSinceReset(0)}>Reset</button>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Best Practice: Combined Tests for React Component\nDESCRIPTION: This snippet demonstrates the recommended approach of writing fewer, longer tests for a React component. It combines related assertions into single test cases, improving test isolation and avoiding issues with shared state and React act() warnings.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// ✅ This is an example of what to do\nimport { render, screen, wait } from '@testing-library/react'\nimport * as React from 'react'\n\nimport { getCourseInfo } from '../api'\nimport Course from '../course'\n\njest.mock('../api')\n\nafterEach(() => {\n\tjest.resetAllMocks()\n})\n\nfunction buildCourse(overrides) {\n\treturn {\n\t\ttitle: 'TEST_COURSE_TITLE',\n\t\tsubtitle: 'TEST_COURSE_SUBTITLE',\n\t\ttopics: ['TEST_COURSE_TOPIC'],\n\t\t...overrides,\n\t}\n}\n\ntest('course loads and renders the course information', async () => {\n\tconst courseId = '123'\n\tconst title = 'My Awesome Course'\n\tconst subtitle = 'Learn super cool things'\n\tconst topics = ['topic 1', 'topic 2']\n\n\tgetCourseInfo.mockResolvedValueOnce(buildCourse({ title, subtitle, topics }))\n\n\trender(<Course courseId={courseId} />)\n\n\texpect(getCourseInfo).toHaveBeenCalledWith(courseId)\n\texpect(getCourseInfo).toHaveBeenCalledTimes(1)\n\n\tconst alert = screen.getByRole('alert')\n\texpect(alert).toHaveTextContent(/loading/i)\n\n\tconst titleEl = await screen.findByRole('heading')\n\texpect(titleEl).toHaveTextContent(title)\n\n\texpect(screen.getByText(subtitle)).toBeInTheDocument()\n\n\tconst topicElsText = screen\n\t\t.getAllByRole('listitem')\n\t\t.map((el) => el.textContent)\n\texpect(topicElsText).toEqual(topics)\n})\n\ntest('an error is rendered if there is a problem getting course info', async () => {\n\tconst message = 'TEST_ERROR_MESSAGE'\n\tconst courseId = '321'\n\n\tgetCourseInfo.mockRejectedValueOnce({ message })\n\n\trender(<Course courseId={courseId} />)\n\n\texpect(getCourseInfo).toHaveBeenCalledWith(courseId)\n\texpect(getCourseInfo).toHaveBeenCalledTimes(1)\n\n\tconst alert = screen.getByRole('alert')\n\texpect(alert).toHaveTextContent(/loading/i)\n\n\tawait wait(() => expect(alert).toHaveTextContent(message))\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel with PayPal Scripts\nDESCRIPTION: Example showing how to extend the default PayPal Scripts babel configuration with a custom plugin while maintaining the built-in presets. This demonstrates the composability of the tool's configuration system.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tools-without-config.mdx#2025-04-12_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"babel\": {\n\t\t\"presets\": [\"paypal-scripts/babel\"],\n\t\t\"plugins\": [\"glamorous-displayname\"]\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Test Output Example\nDESCRIPTION: Example of the test output showing how the error message appears with the improved stack trace, demonstrating clearer error reporting for failed assertions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n FAIL  ./add.test.js\n  ✕ sums numbers (3 ms)\n\n  ● sums numbers\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 3\n\n      11 |\n      12 | test('sums numbers', () => {\n    > 13 |   assertAdd([1, 2], 4)\n         |   ^\n      14 | })\n      15 |\n\n      at Object.<anonymous> (add.test.js:13:3)\n```\n\n----------------------------------------\n\nTITLE: Defining onRenderCallback Function for React Profiler\nDESCRIPTION: Shows the structure of the onRenderCallback function used by the React Profiler. This function receives various timing and interaction data for the profiled component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-production-performance-monitoring.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nfunction onRenderCallback(\n\tid, // the \"id\" prop of the Profiler tree that has just committed\n\tphase, // either \"mount\" (if the tree just mounted) or \"update\" (if it re-rendered)\n\tactualDuration, // time spent rendering the committed update\n\tbaseDuration, // estimated time to render the entire subtree without memoization\n\tstartTime, // when React began rendering this update\n\tcommitTime, // when React committed this update\n\tinteractions, // the Set of interactions belonging to this update\n) {\n\t// Aggregate or log render timings...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing State Transitions\nDESCRIPTION: Adding logic to handle state transitions based on current state and events.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nfunction createMachine(stateMachineDefinition) {\n\tconst machine = {\n\t\tvalue: stateMachineDefinition.initialState,\n\t\ttransition(currentState, event) {\n\t\t\tconst currentStateDefinition = stateMachineDefinition[currentState]\n\t\t\tconst destinationTransition = currentStateDefinition.transitions[event]\n\n\t\t\treturn machine.value\n\t\t},\n\t}\n\treturn machine\n}\n```\n\n----------------------------------------\n\nTITLE: Utility Function for Generating Cloudinary Image Props in React\nDESCRIPTION: A TypeScript function that generates the necessary props for an img element using Cloudinary. It takes image builder functions, desired widths, sizes, and transformations to create optimized srcset and sizes attributes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction getImgProps(\n\timageBuilder: ImageBuilder,\n\t{\n\t\twidths,\n\t\tsizes,\n\t\ttransformations,\n\t}: {\n\t\twidths: Array<number>\n\t\tsizes: Array<string>\n\t\ttransformations?: TransformerOption\n\t},\n) {\n\tconst averageSize = Math.ceil(widths.reduce((a, s) => a + s) / widths.length)\n\n\treturn {\n\t\talt: imageBuilder.alt,\n\t\tsrc: imageBuilder({\n\t\t\tquality: 'auto',\n\t\t\tformat: 'auto',\n\t\t\t...transformations,\n\t\t\tresize: { width: averageSize, ...transformations?.resize },\n\t\t}),\n\t\tsrcSet: widths\n\t\t\t.map((width) =>\n\t\t\t\t[\n\t\t\t\t\timageBuilder({\n\t\t\t\t\t\tquality: 'auto',\n\t\t\t\t\t\tformat: 'auto',\n\t\t\t\t\t\t...transformations,\n\t\t\t\t\t\tresize: { width, ...transformations?.resize },\n\t\t\t\t\t}),\n\t\t\t\t\t`${width}w`,\n\t\t\t\t].join(' '),\n\t\t\t)\n\t\t\t.join(', '),\n\t\tsizes: sizes.join(', '),\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering and Testing a React Login Form\nDESCRIPTION: Demonstrates how to create a renderLoginForm function for setting up and testing a React login form component using @testing-library/react and @testing-library/user-event.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/aha-testing/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport LoginForm from '../login-form'\n\nfunction renderLoginForm(props) {\n\trender(<LoginForm {...props} />)\n\tconst usernameInput = screen.getByLabelText(/username/i)\n\tconst passwordInput = screen.getByLabelText(/password/i)\n\tconst submitButton = screen.getByText(/submit/i)\n\treturn {\n\t\tusernameInput,\n\t\tpasswordInput,\n\t\tsubmitButton,\n\t\tchangeUsername: (value) => userEvent.type(usernameInput, value),\n\t\tchangePassword: (value) => userEvent.type(passwordInput, value),\n\t\tsubmitForm: () => userEvent.click(submitButton),\n\t}\n}\n\ntest('submit calls the submit handler', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { changeUsername, changePassword, submitForm } = renderLoginForm({\n\t\tonSubmit: handleSubmit,\n\t})\n\tconst username = 'chucknorris'\n\tconst password = 'ineednopassword'\n\tchangeUsername(username)\n\tchangePassword(password)\n\tsubmitForm()\n\texpect(handleSubmit).toHaveBeenCalledTimes(1)\n\texpect(handleSubmit).toHaveBeenCalledWith({ username, password })\n})\n```\n\n----------------------------------------\n\nTITLE: Nesting React Profiler Components\nDESCRIPTION: Illustrates how to nest Profiler components within a React application structure. This allows for more granular performance monitoring of different parts of the application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-production-performance-monitoring.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n<App>\n\t<Profiler id=\"Navigation\" onRender={onRenderCallback}>\n\t\t<Navigation />\n\t</Profiler>\n\t<Profiler id=\"Main\" onRender={onRenderCallback}>\n\t\t<Main>\n\t\t\t<LeftNav />\n\t\t\t<Profiler id=\"Content\" onRender={onRenderCallback}>\n\t\t\t\t<Content />\n\t\t\t</Profiler>\n\t\t\t<RightNav />\n\t\t</Main>\n\t</Profiler>\n</App>\n```\n\n----------------------------------------\n\nTITLE: Implementing State Reducer Pattern in useToggle Hook\nDESCRIPTION: Demonstrates how to implement the state reducer pattern in the useToggle hook. It allows users to modify state changes before they occur, providing greater control over the hook's behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [clicksSinceReset, setClicksSinceReset] = React.useState(0)\n\tconst tooManyClicks = clicksSinceReset >= 4\n\n\tconst { on, toggle, setOn, setOff } = useToggle({\n\t\tmodifyStateChange(currentState, changes) {\n\t\t\tif (tooManyClicks) {\n\t\t\t\t// other changes are fine, but on needs to be unchanged\n\t\t\t\treturn { ...changes, on: currentState.on }\n\t\t\t} else {\n\t\t\t\t// the changes are fine\n\t\t\t\treturn changes\n\t\t\t}\n\t\t},\n\t})\n\n\tfunction handleClick() {\n\t\ttoggle()\n\t\tsetClicksSinceReset((count) => count + 1)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setOff}>Switch Off</button>\n\t\t\t<button onClick={setOn}>Switch On</button>\n\t\t\t<Switch on={on} onClick={handleClick} />\n\t\t\t{tooManyClicks ? (\n\t\t\t\t<button onClick={() => setClicksSinceReset(0)}>Reset</button>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Babel 6 Migration Solutions\nDESCRIPTION: Three different approaches to fix module interoperability issues in Babel 6.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// Option 1: require with default\n// add.js\nexport default (x, y) => x + y\n\n// bar.js\nconst three = require('./add').default(1, 2)\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// Option 2: ES6 modules 100%\n// add.js\nexport default (x, y) => x + y\n\n// bar.js\nimport add from './add'\nconst three = add(1, 2)\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// Option 3: CommonJS 100%\n// add.js\nmodule.exports = (x, y) => x + y\n\n// bar.js\nconst three = require('./add')(1, 2)\n```\n\n----------------------------------------\n\nTITLE: Mocking Console Error in Tests\nDESCRIPTION: This snippet demonstrates how to use beforeAll, afterEach, and afterAll hooks to mock console.error calls in tests. It shows a valid use case for these hooks when consistent setup and teardown are needed across multiple tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nbeforeAll(() => {\n\tjest.spyOn(console, 'error').mockImplementation(() => {})\n})\n\nafterEach(() => {\n\tconsole.error.mockClear()\n})\n\nafterAll(() => {\n\tconsole.error.mockRestore()\n})\n```\n\n----------------------------------------\n\nTITLE: Testing the arrayify function for array inputs\nDESCRIPTION: Unit test that verifies the arrayify function correctly returns the original array when provided with an array input.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-know-what-to-test.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ntest('returns an array if given an array', () => {\n\texpect(arrayify(['Elephant', 'Giraffe'])).toEqual(['Elephant', 'Giraffe'])\n})\n```\n\n----------------------------------------\n\nTITLE: Untyped React Component in TypeScript\nDESCRIPTION: An example of a Calculator component without TypeScript types, demonstrating the basic structure and functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst operations = {\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n}\n\nfunction Calculator({ left, operator, right }) {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n\nconst examples = (\n\t<>\n\t\t<Calculator left={1} operator=\"+\" right={2} />\n\t\t<Calculator left={1} operator=\"-\" right={2} />\n\t\t<Calculator left={1} operator=\"*\" right={2} />\n\t\t<Calculator left={1} operator=\"/\" right={2} />\n\t</>\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Counter Components with React Context\nDESCRIPTION: Demonstrates usage of CountProvider and useCount hook to create a counter component and display component. Shows how to structure a page using context.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { CountProvider, useCount } from './count-context'\n\nfunction Counter() {\n\tconst [count, setCount] = useCount()\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction CountDisplay() {\n\tconst [count] = useCount()\n\treturn <div>The current counter count is {count}</div>\n}\n\nfunction CountPage() {\n\treturn (\n\t\t<div>\n\t\t\t<CountProvider>\n\t\t\t\t<CountDisplay />\n\t\t\t\t<Counter />\n\t\t\t</CountProvider>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Basic DevTools Component\nDESCRIPTION: Minimal implementation of a DevTools React component that gets rendered into a separate DOM node. Shows the basic structure for adding custom DevTools UI to an application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-own-dev-tools.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as React from 'react'\n\nfunction install() {\n\tfunction DevTools() {\n\t\treturn <div>Hi from the DevTools</div>\n\t}\n\tconst devToolsRoot = document.createElement('div')\n\tdocument.body.appendChild(devToolsRoot)\n\tReactDOM.render(<DevTools />, devToolsRoot)\n}\n\nexport { install }\n```\n\n----------------------------------------\n\nTITLE: Implementing Suspense Demo in React Concurrent Mode\nDESCRIPTION: This code snippet demonstrates a Suspense demo using React Concurrent Mode. It includes a form for submitting a name, a Suspense component for handling asynchronous rendering, and a custom resource creation function for simulating API calls.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-enable-react-concurrent-mode.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction SuspenseDemo() {\n\tconst [greetingResource, setGreetingResource] = React.useState(null)\n\tconst [startTransition, isPending] = React.unstable_useTransition()\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.nameInput.value\n\t\tstartTransition(() => {\n\t\t\tsetGreetingResource(createGreetingResource(name))\n\t\t})\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<strong>Suspense Demo</strong>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"nameInput\">Name</label>\n\t\t\t\t<input id=\"nameInput\" />\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</form>\n\t\t\t<ErrorBoundary>\n\t\t\t\t<React.Suspense fallback={<p>loading greeting</p>}>\n\t\t\t\t\t<Greeting greetingResource={greetingResource} isPending={isPending} />\n\t\t\t\t</React.Suspense>\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t)\n}\n\nfunction Greeting({ greetingResource, isPending }) {\n\treturn (\n\t\t<p style={{ opacity: isPending ? 0.4 : 1 }}>\n\t\t\t{greetingResource ? greetingResource.read() : 'Please submit a name'}\n\t\t</p>\n\t)\n}\n\nfunction getGreeting(name) {\n\treturn new Promise((resolve, reject) => {\n\t\tsetTimeout(() => {\n\t\t\tresolve(`Hello ${name}!`)\n\t\t\t// 🐨 try rejecting instead... (make sure to comment out the resolve call)\n\t\t\t// reject(new Error(`Oh no. Could not load greeting for ${name}`))\n\t\t}, 1500) // 🐨 play with this number a bit\n\t})\n}\n\nfunction createGreetingResource(name) {\n\tlet status = 'pending'\n\tlet result\n\tlet suspender = getGreeting(name).then(\n\t\t(greeting) => {\n\t\t\tstatus = 'success'\n\t\t\tresult = greeting\n\t\t},\n\t\t(error) => {\n\t\t\tstatus = 'error'\n\t\t\tresult = error\n\t\t},\n\t)\n\treturn {\n\t\tread() {\n\t\t\tif (status === 'pending') throw suspender\n\t\t\tif (status === 'error') throw result\n\t\t\tif (status === 'success') return result\n\t\t},\n\t}\n}\n\nclass ErrorBoundary extends React.Component {\n\tstate = { error: null }\n\tstatic getDerivedStateFromError(error) {\n\t\treturn { error }\n\t}\n\tcomponentDidCatch() {\n\t\t// log the error to the server\n\t}\n\ttryAgain = () => this.setState({ error: null })\n\trender() {\n\t\treturn this.state.error ? (\n\t\t\t<div>\n\t\t\t\tThere was an error. <button onClick={this.tryAgain}>try again</button>\n\t\t\t\t<pre style={{ whiteSpace: 'normal' }}>{this.state.error.message}</pre>\n\t\t\t</div>\n\t\t) : (\n\t\t\tthis.props.children\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Improved Undo/Redo Implementation with useState in React\nDESCRIPTION: This snippet presents an improved implementation of the undo/redo feature using useState. It combines all state into a single object and uses state updater callbacks to avoid stale closure issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useUndo(initialPresent) {\n\tconst [state, setState] = React.useState({\n\t\tpast: [],\n\t\tpresent: initialPresent,\n\t\tfuture: [],\n\t})\n\n\tconst canUndo = state.past.length !== 0\n\tconst canRedo = state.future.length !== 0\n\n\tconst undo = React.useCallback(() => {\n\t\tsetState((currentState) => {\n\t\t\tconst { past, present, future } = currentState\n\n\t\t\tif (past.length === 0) return currentState\n\n\t\t\tconst previous = past[past.length - 1]\n\t\t\tconst newPast = past.slice(0, past.length - 1)\n\n\t\t\treturn {\n\t\t\t\tpast: newPast,\n\t\t\t\tpresent: previous,\n\t\t\t\tfuture: [present, ...future],\n\t\t\t}\n\t\t})\n\t}, [])\n\n\tconst redo = React.useCallback(() => {\n\t\tsetState((currentState) => {\n\t\t\tconst { past, present, future } = currentState\n\n\t\t\tif (future.length === 0) return currentState\n\n\t\t\tconst next = future[0]\n\t\t\tconst newFuture = future.slice(1)\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: next,\n\t\t\t\tfuture: newFuture,\n\t\t\t}\n\t\t})\n\t}, [])\n\n\tconst set = React.useCallback((newPresent) => {\n\t\tsetState((currentState) => {\n\t\t\tconst { present, past } = currentState\n\t\t\tif (newPresent === present) return currentState\n\n\t\t\treturn {\n\t\t\t\tpast: [...past, present],\n\t\t\t\tpresent: newPresent,\n\t\t\t\tfuture: [],\n\t\t\t}\n\t\t})\n\t}, [])\n\n\tconst reset = React.useCallback((newPresent) => {\n\t\tsetState(() => ({\n\t\t\tpast: [],\n\t\t\tpresent: newPresent,\n\t\t\tfuture: [],\n\t\t}))\n\t}, [])\n\n\treturn [state, { set, reset, undo, redo, canUndo, canRedo }]\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering a React Component with Loading State and API Call\nDESCRIPTION: This snippet shows a React component that renders a loading spinner while fetching course information from an API. It demonstrates the use of useState and useEffect hooks for state management and side effects.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport * as api from './api'\n\nfunction Course({ courseId }) {\n\tconst [state, setState] = React.useState({\n\t\tloading: false,\n\t\tcourse: null,\n\t\terror: null,\n\t})\n\n\tconst { loading, course, error } = state\n\n\tReact.useEffect(() => {\n\t\tsetState({ loading: true, course: null, error: null })\n\t\tapi.getCourseInfo(courseId).then(\n\t\t\t(data) => setState({ loading: false, course: data, error: null }),\n\t\t\t(e) => setState({ loading: false, course: null, error: e }),\n\t\t)\n\t}, [courseId])\n\n\treturn (\n\t\t<>\n\t\t\t<div role=\"alert\" aria-live=\"polite\">\n\t\t\t\t{loading ? 'Loading...' : error ? error.message : null}\n\t\t\t</div>\n\t\t\t{course ? <CourseInfo course={course} /> : null}\n\t\t</>\n\t)\n}\n\nfunction CourseInfo({ course }) {\n\tconst { title, subtitle, topics } = course\n\treturn (\n\t\t<div>\n\t\t\t<h1>{title}</h1>\n\t\t\t<strong>{subtitle}</strong>\n\t\t\t<ul>\n\t\t\t\t{topics.map((t) => (\n\t\t\t\t\t<li key={t}>{t}</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n\nexport default Course\n```\n\n----------------------------------------\n\nTITLE: Using Assertion Functions for Type Narrowing in TypeScript\nDESCRIPTION: Shows how to create an assertion function that properly narrows types using the 'asserts parameter is Type' syntax. This tells TypeScript that the function guarantees a specific type condition after it executes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\ntype User = {\n\tname: string\n\tdisplayName: string | null\n}\n\nfunction assertDisplayName(\n\tuser: User,\n): asserts user is User & { displayName: string } {\n\tif (!user.displayName) throw new Error('Oh no, user has no displayName')\n}\n\nfunction logUserDisplayName(user: User) {\n\tassertDisplayName(user)\n\tconsole.log(user.displayName.toUpperCase())\n}\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 4: Initial Values\nDESCRIPTION: Adds support for initial values by passing the initialValue to useReducer as its second argument.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) =>\n\ttypeof newState === 'function' ? newState(prevState) : newState\n\nfunction useState(initialValue) {\n\treturn React.useReducer(useStateReducer, initialValue)\n}\n```\n\n----------------------------------------\n\nTITLE: Using BlurrableImage Component in Blog Post Route\nDESCRIPTION: Example usage of BlurrableImage component in a blog post page, showing how to handle banner images with Cloudinary integration and responsive image sizing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nfunction BlogScreen() {\n\t// ...\n\treturn (\n\t\t// ...\n\t\t<div className=\"col-span-full mt-10 lg:col-span-10 lg:col-start-2 lg:mt-16\">\n\t\t\t{frontmatter.bannerCloudinaryId ? (\n\t\t\t\t<BlurrableImage\n\t\t\t\t\tkey={frontmatter.bannerCloudinaryId}\n\t\t\t\t\tblurDataUrl={frontmatter.bannerBlurDataUrl}\n\t\t\t\t\tclassName=\"aspect-[3/4] md:aspect-[3/2]\"\n\t\t\t\t\timg={\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tkey={frontmatter.bannerCloudinaryId}\n\t\t\t\t\t\t\ttitle={frontmatter.bannerCredit}\n\t\t\t\t\t\t\t{...getImgProps(\n\t\t\t\t\t\t\t\tgetImageBuilder(\n\t\t\t\t\t\t\t\t\tfrontmatter.bannerCloudinaryId,\n\t\t\t\t\t\t\t\t\tfrontmatter.bannerAlt ??\n\t\t\t\t\t\t\t\t\t\tfrontmatter.bannerCredit ??\n\t\t\t\t\t\t\t\t\t\tfrontmatter.title ??\n\t\t\t\t\t\t\t\t\t\t'Post banner',\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclassName: 'rounded-lg object-cover object-center',\n\t\t\t\t\t\t\t\t\twidths: [280, 560, 840, 1100, 1650, 2500, 2100, 3100],\n\t\t\t\t\t\t\t\t\tsizes: [\n\t\t\t\t\t\t\t\t\t\t'(max-width:1023px) 80vw',\n\t\t\t\t\t\t\t\t\t\t'(min-width:1024px) and (max-width:1620px) 67vw',\n\t\t\t\t\t\t\t\t\t\t'1100px',\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\ttransformations: {\n\t\t\t\t\t\t\t\t\t\tbackground: 'rgb:e6e9ee',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t\t// ...\n\t)\n\t// ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Claude Desktop for Remote MCP Server\nDESCRIPTION: JSON configuration for connecting Claude Desktop to a remote MCP server deployed on Cloudflare Workers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/README.md#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"mcpServers\": {\n    \"math\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"mcp-remote\",\n        \"https://worker-name.account-name.workers.dev/sse\"\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Jest's Mock Function in JavaScript Test\nDESCRIPTION: This test utilizes Jest's built-in mock function (jest.fn()) to simplify the mocking process and leverage Jest-specific assertions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utils from '#app/utils'\n\ntest('returns winner', () => {\n\tconst originalGetWinner = utils.getWinner\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = jest.fn((p1, p2) => p2)\n\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\texpect(utils.getWinner).toHaveBeenCalledTimes(2)\n\tutils.getWinner.mock.calls.forEach((args) => {\n\t\texpect(args).toEqual(['Ken Wheeler', 'Kent C. Dodds'])\n\t})\n\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = originalGetWinner\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing React Candy Dispenser Component\nDESCRIPTION: Basic implementation of a candy dispenser component using React useState hook to manage candy state and handle dispensing logic.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CandyDispenser() {\n\tconst initialCandies = ['snickers', 'skittles', 'twix', 'milky way']\n\tconst [candies, setCandies] = React.useState(initialCandies)\n\tconst dispense = (candy) => {\n\t\tsetCandies((allCandies) => allCandies.filter((c) => c !== candy))\n\t}\n\treturn (\n\t\t<div>\n\t\t\t<h1>Candy Dispenser</h1>\n\t\t\t<div>\n\t\t\t\t<div>Available Candy</div>\n\t\t\t\t{candies.length === 0 ? (\n\t\t\t\t\t<button onClick={() => setCandies(initialCandies)}>refill</button>\n\t\t\t\t) : (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{candies.map((candy) => (\n\t\t\t\t\t\t\t<li key={candy}>\n\t\t\t\t\t\t\t\t<button onClick={() => dispense(candy)}>grab</button> {candy}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Compound Components with React Toggle Example\nDESCRIPTION: Example usage of the Toggle component that demonstrates the compound components pattern, showing how child components can be composed together with shared state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/migrating-to-reacts-new-context-api.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Usage(props) {\n\treturn (\n\t\t<Toggle onToggle={props.onToggle}>\n\t\t\t<Toggle.On>The button is on</Toggle.On>\n\t\t\t<Toggle.Off>The button is off</Toggle.Off>\n\t\t\t<div>\n\t\t\t\t<Toggle.Button />\n\t\t\t</div>\n\t\t</Toggle>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing useDarkMode with useReducer in React (Simplified Version)\nDESCRIPTION: This snippet shows a simplified implementation of the useDarkMode hook using useReducer. It mimics the behavior of useState, resulting in cleaner code compared to the complex useReducer version, but still more verbose than the useState implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useDarkMode() {\n\tconst preferDarkQuery = '(prefers-color-scheme: dark)'\n\tconst [mode, setMode] = React.useReducer(\n\t\t(prevMode, nextMode) =>\n\t\t\ttypeof nextMode === 'function' ? nextMode(prevMode) : nextMode,\n\t\t'light',\n\t\t() =>\n\t\t\twindow.localStorage.getItem('colorMode') ||\n\t\t\t(window.matchMedia(preferDarkQuery).matches ? 'dark' : 'light'),\n\t)\n\n\tReact.useEffect(() => {\n\t\tconst mediaQuery = window.matchMedia(preferDarkQuery)\n\t\tconst handleChange = () => setMode(mediaQuery.matches ? 'dark' : 'light')\n\t\tmediaQuery.addListener(handleChange)\n\t\treturn () => mediaQuery.removeListener(handleChange)\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\twindow.localStorage.setItem('colorMode', mode)\n\t}, [mode])\n\n\treturn [mode, setMode]\n}\n```\n\n----------------------------------------\n\nTITLE: Avoiding direct container queries in React Testing Library\nDESCRIPTION: Demonstrates how to query elements using Testing Library's query methods instead of directly accessing the container with querySelector, which improves test accessibility and reliability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nconst { container } = render(<Example />)\nconst button = container.querySelector('.btn-primary')\nexpect(button).toHaveTextContent(/click me/i)\n\n// ✅\nrender(<Example />)\nscreen.getByRole('button', { name: /click me/i })\n```\n\n----------------------------------------\n\nTITLE: Testing the arrayify function with non-array values\nDESCRIPTION: Unit test that verifies the arrayify function wraps non-array, non-falsy values in an array when called.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-know-what-to-test.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\ntest(`returns an array with the given argument if it's not an array and not falsy`, () => {\n\texpect(arrayify('Leopard')).toEqual(['Leopard'])\n})\n```\n\n----------------------------------------\n\nTITLE: Basic JavaScript Error Handling\nDESCRIPTION: Simple JavaScript implementation of error catching and reporting without type safety.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/get-a-catch-block-error-message-with-typescript.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst reportError = ({ message }) => {\n\t// send the error to our logging service...\n}\n\ntry {\n\tthrow new Error('Oh no!')\n} catch (error) {\n\t// we'll proceed, but let's report it\n\treportError({ message: error.message })\n}\n```\n\n----------------------------------------\n\nTITLE: Using Advanced Toggle Hook with Prop Getter in React\nDESCRIPTION: Demonstrates the usage of the advanced useToggle hook with getTogglerProps function, providing accessibility features and proper prop spreading.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\tconst { on, getTogglerProps } = useToggle()\n\treturn <button {...getTogglerProps()}>{on ? 'on' : 'off'}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Nested React Elements with JSX and JavaScript\nDESCRIPTION: Shows how to create nested elements using JSX and the equivalent React.createElement calls, demonstrating the use of arrays for multiple children.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nui = (\n\t<div>\n\t\t<span>Hello</span> <span>World</span>\n\t</div>\n)\n```\n\nLANGUAGE: js\nCODE:\n```\nui = React.createElement('div', {\n\tchildren: [\n\t\tReact.createElement('span', null, 'Hello'),\n\t\t' ',\n\t\tReact.createElement('span', null, 'World'),\n\t],\n})\n```\n\n----------------------------------------\n\nTITLE: Using useDarkMode Hook in React Components\nDESCRIPTION: Example implementation showing how to use the useDarkMode hook across multiple React components with proper TypeScript prop types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/wrapping-react-use-state-with-type-script.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction App() {\n  const [mode, setMode] = useDarkMode()\n  return (\n    <>\n      {/* ... */}\n      <Home mode={mode} setMode={setMode} />\n      {/* ... */}\n      <Page mode={mode} setMode={setMode} />\n      {/* ... */}\n    </>\n  )\n}\n\nfunction Home({\n  mode,\n  setMode,\n}: {\n  mode: DarkModeState\n  setMode: SetDarkModeState\n}) {\n  return (\n    <>\n      {/* ... */}\n      <Navigation mode={mode} setMode={setMode} />\n      {/* ... */}\n    </>\n  )\n}\n\nfunction Page({\n  mode,\n  setMode,\n}: {\n  mode: DarkModeState\n  setMode: SetDarkModeState\n}) {\n  return (\n    <>\n      {/* ... */}\n      <Navigation mode={mode} setMode={setMode} />\n      {/* ... */}\n    </>\n  )\n}\n\nfunction Navigation({\n  mode,\n  setMode,\n}: {\n  mode: DarkModeState\n  setMode: SetDarkModeState\n}) {\n  return (\n    <>\n      {/* ... */}\n      <button onClick={() => setMode(mode === 'light' ? 'dark' : 'light')}>\n        {mode === 'light' ? <RiMoonClearLine /> : <RiSunLine />}\n      </button>\n      {/* ... */}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Manipulation of CSS Variables\nDESCRIPTION: Shows how to modify CSS variables dynamically using JavaScript's setProperty method.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-css-variables.mdx#2025-04-12_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<style>\n\t\t.blue-text {\n\t\t\t--color: blue;\n\t\t}\n\t\t.red-text {\n\t\t\t--color: red;\n\t\t}\n\t\t.my-text {\n\t\t\tcolor: var(--color);\n\t\t}\n\t</style>\n\t<body>\n\t\t<div class=\"blue-text\">\n\t\t\t<div class=\"my-text\">\n\t\t\t\tThis will be green (because the JS will change the color property)\n\t\t\t</div>\n\t\t\t<div class=\"red-text\">\n\t\t\t\t<div class=\"my-text\">\n\t\t\t\t\tThis will be red (even though it's within the blue-text div, the\n\t\t\t\t\tred-text is more specific).\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<script>\n\t\t\tconst blueTextDiv = document.querySelector('.blue-text')\n\t\t\tblueTextDiv.style.setProperty('--color', 'green')\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Undo/Redo with useState in React\nDESCRIPTION: This snippet implements an undo/redo feature using React's useState hook. It manages past, present, and future states, along with undo, redo, set, and reset functions. However, it contains potential stale closure bugs.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useUndo(initialPresent) {\n\tconst [past, setPast] = React.useState([])\n\tconst [present, setPresent] = React.useState(initialPresent)\n\tconst [future, setFuture] = React.useState([])\n\n\tconst canUndo = past.length !== 0\n\tconst canRedo = future.length !== 0\n\n\tconst undo = React.useCallback(() => {\n\t\tif (!canUndo) return\n\n\t\tconst previous = past[past.length - 1]\n\t\tconst newPast = past.slice(0, past.length - 1)\n\n\t\tsetPast(newPast)\n\t\tsetPresent(previous)\n\t\tsetFuture([present, ...future])\n\t}, [canUndo, future, past, present])\n\n\tconst redo = React.useCallback(() => {\n\t\tif (!canRedo) return\n\n\t\tconst next = future[0]\n\t\tconst newFuture = future.slice(1)\n\n\t\tsetPast([...past, present])\n\t\tsetPresent(next)\n\t\tsetFuture(newFuture)\n\t}, [canRedo, future, past, present])\n\n\tconst set = React.useCallback(\n\t\t(newPresent) => {\n\t\t\tif (newPresent === present) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tsetPast([...past, present])\n\t\t\tsetPresent(newPresent)\n\t\t\tsetFuture([])\n\t\t},\n\t\t[past, present],\n\t)\n\n\tconst reset = React.useCallback((newPresent) => {\n\t\tsetPast([])\n\t\tsetPresent(newPresent)\n\t\tsetFuture([])\n\t}, [])\n\n\treturn [\n\t\t{ past, present, future },\n\t\t{ set, reset, undo, redo, canUndo, canRedo },\n\t]\n}\n```\n\n----------------------------------------\n\nTITLE: React Counter Component Implementation\nDESCRIPTION: Implementation of a Counter component with initial count, max clicks limit, and reset functionality using React hooks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useRef } from 'react'\n\nfunction Counter(props) {\n\tconst initialProps = useRef(props).current\n\tconst { initialCount = 0, maxClicks = 3 } = props\n\n\tconst [count, setCount] = React.useState(initialCount)\n\tconst tooMany = count >= maxClicks\n\n\tconst handleReset = () => setCount(initialProps.initialCount)\n\tconst handleClick = () => setCount((currentCount) => currentCount + 1)\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={handleClick} disabled={tooMany}>\n\t\t\t\tCount: {count}\n\t\t\t</button>\n\t\t\t{tooMany ? <button onClick={handleReset}>reset</button> : null}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Correct Conditional Rendering with Ternary in React JSX\nDESCRIPTION: This code snippet shows the correct way to conditionally render a list of contacts using a ternary operator, which explicitly handles the case when the contacts array is empty.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ContactList({ contacts }) {\n\treturn (\n\t\t<div>\n\t\t\t<ul>\n\t\t\t\t{contacts.length\n\t\t\t\t\t? contacts.map((contact) => (\n\t\t\t\t\t\t\t<li key={contact.id}>\n\t\t\t\t\t\t\t\t{contact.firstName} {contact.lastName}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t  ))\n\t\t\t\t\t: null}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Writing Inline Tests for React Login Component\nDESCRIPTION: This code snippet shows a refactored version of the Login component tests, using inline tests without nesting. It demonstrates a more maintainable approach to testing React components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/login.js\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\ntest('calls onSubmit with the username and password when submit is clicked', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText, getByText } = render(\n\t\t<Login onSubmit={handleSubmit} />,\n\t)\n\tconst user = { username: 'michelle', password: 'smith' }\n\n\tuserEvent.type(getByLabelText(/username/i), user.username)\n\tuserEvent.type(getByLabelText(/password/i), user.password)\n\tuserEvent.click(getByText(/submit/i))\n\n\texpect(handleSubmit).toHaveBeenCalledTimes(1)\n\texpect(handleSubmit).toHaveBeenCalledWith(user)\n})\n\ntest('shows an error message when submit is clicked and no username is provided', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText, getByText, getByRole } = render(\n\t\t<Login onSubmit={handleSubmit} />,\n\t)\n\n\tuserEvent.type(getByLabelText(/password/i), 'anything')\n\tuserEvent.click(getByText(/submit/i))\n\n\tconst errorMessage = getByRole('alert')\n\texpect(errorMessage).toHaveTextContent(/username is required/i)\n\texpect(handleSubmit).not.toHaveBeenCalled()\n})\n\ntest('shows an error message when submit is clicked and no password is provided', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText, getByText, getByRole } = render(\n\t\t<Login onSubmit={handleSubmit} />,\n\t)\n\n\tuserEvent.type(getByLabelText(/username/i), 'anything')\n\tuserEvent.click(getByText(/submit/i))\n\n\tconst errorMessage = getByRole('alert')\n\texpect(errorMessage).toHaveTextContent(/password is required/i)\n\texpect(handleSubmit).not.toHaveBeenCalled()\n})\n```\n\n----------------------------------------\n\nTITLE: Handling monkey-patching in TypeScript\nDESCRIPTION: This snippet shows how to handle adding a new property to an object (monkey-patching) in a type-safe way using Object.assign.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// add fetchedAt helper (used in the UI to help differentiate requests)\nreturn Object.assign(pokemon, { fetchedAt: formatDate(new Date()) })\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Counter with Reset in React\nDESCRIPTION: A simple counter component implementation with increment and reset functionality using React useState hook.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-initializer-pattern/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\tconst reset = () => setCount(0)\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={increment}>{count}</button>\n\t\t\t<button onClick={reset}>Reset</button>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Claude Desktop for Local MCP Server\nDESCRIPTION: JSON configuration for connecting Claude Desktop to a local MCP server using a proxy.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/README.md#2025-04-12_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"mcpServers\": {\n    \"math\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"mcp-remote\",\n        \"http://localhost:8787/sse\"\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: React Component with Arrow Function and Explicit Return\nDESCRIPTION: A version of the Calculator component using an arrow function with an explicit return, allowing for variable declarations and hooks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst Calculator = ({ left, operator, right }) => {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Async Counter with Direct Updates (Bug)\nDESCRIPTION: Problematic implementation of an async counter that demonstrates closure issues with useState.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DelayedCounter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = async () => {\n\t\tawait doSomethingAsync()\n\t\tsetCount(count + 1)\n\t}\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Avoiding unnecessary act() wrapping in React Testing Library\nDESCRIPTION: Demonstrates how to avoid unnecessarily wrapping render and fireEvent calls in act(), since these methods already include act() internally. This reduces code complexity and improves test readability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nact(() => {\n\trender(<Example />)\n})\n\nconst input = screen.getByRole('textbox', { name: /choose a fruit/i })\nact(() => {\n\tfireEvent.keyDown(input, { key: 'ArrowDown' })\n})\n\n// ✅\nrender(<Example />)\nconst input = screen.getByRole('textbox', { name: /choose a fruit/i })\nfireEvent.keyDown(input, { key: 'ArrowDown' })\n```\n\n----------------------------------------\n\nTITLE: Testing Hidden Message Component with React Testing Library\nDESCRIPTION: This code snippet shows how to test the HiddenMessage component using React Testing Library. It demonstrates querying for elements, simulating user events, and making assertions about the component's behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-react-testing-library.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/hidden-message.js\n// These imports are something you'd normally configure Jest to import for you automatically.\n// Learn more in the setup docs: https://testing-library.com/docs/react-testing-library/setup#skipping-auto-cleanup\nimport '@testing-library/jest-dom/extend-expect'\n// NOTE: jest-dom adds handy assertions to Jest and is recommended, but not required\n\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport HiddenMessage from '../hidden-message'\n\ntest('shows the children when the checkbox is checked', () => {\n\tconst testMessage = 'Test Message'\n\trender(<HiddenMessage>{testMessage}</HiddenMessage>)\n\n\t// query* functions will return the element or null if it cannot be found\n\t// get* functions will return the element or throw an error if it cannot be found\n\texpect(screen.queryByText(testMessage)).toBeNull()\n\n\t// the queries can accept a regex to make your selectors more resilient to content tweaks and changes.\n\tuserEvent.click(screen.getByLabelText(/show/i))\n\n\t// .toBeInTheDocument() is an assertion that comes from jest-dom\n\t// otherwise you could use .toBeDefined()\n\texpect(screen.getByText(testMessage)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Lifecycle Methods in React Class Components\nDESCRIPTION: This snippet demonstrates the traditional lifecycle methods in a React class component, including constructor, componentDidMount, componentDidUpdate, componentWillUnmount, and render.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nclass LifecycleComponent extends React.Component {\n\tconstructor() {\n\t\t// initialize component instance\n\t}\n\tcomponentDidMount() {\n\t\t// run this code when the component is first added to the page\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\t// run this code when the component is updated on the page\n\t}\n\tcomponentWillUnmount() {\n\t\t// run this code when the component is removed from the page\n\t}\n\trender() {\n\t\t// call me anytime you need some react elements...\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Basic String Transformation Macro Usage\nDESCRIPTION: Example showing how to use a custom 'gemmafy' macro that transforms spaces in strings with dog emojis\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-your-own-code-transform.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport gemmafy from 'gemmafy.macro'\n\nconsole.log(gemmafy('hello world'))\n```\n\n----------------------------------------\n\nTITLE: React Element Structure Example\nDESCRIPTION: Illustrates the structure of React elements and how props are handled during re-renders.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/optimize-react-re-renders.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nconst counterElement = {\n\ttype: 'div',\n\tprops: {\n\t\tchildren: [\n\t\t\t{\n\t\t\t\ttype: 'button',\n\t\t\t\tprops: {\n\t\t\t\t\tonClick: increment,\n\t\t\t\t\tchildren: 'The count is 0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: Logger,\n\t\t\t\tprops: {\n\t\t\t\t\tlabel: 'counter',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Test for Thumb War Function Without Mocking\nDESCRIPTION: This test demonstrates a basic approach to testing the thumbWar function without mocking, asserting that the returned winner is one of the two players.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// thumb-war.0.js\nimport thumbWar from '../thumb-war'\n\ntest('returns winner', () => {\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(['Ken Wheeler', 'Kent C. Dodds'].includes(winner)).toBe(true)\n})\n```\n\n----------------------------------------\n\nTITLE: Basic TypeScript Props Interface for React Component\nDESCRIPTION: A simple TypeScript interface definition for the Calculator component's props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype CalculatorProps = {\n\tleft: number\n\toperator: string\n\tright: number\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Advanced Toggle Hook with Prop Getter in React\nDESCRIPTION: Extends the useToggle hook to include a getTogglerProps function for accessibility and additional functionality, similar to the original react-toggled component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nconst callAll = (...fns) => (...args) => fns.forEach((fn) => fn && fn(...args))\n\nfunction useToggle(initialOn = false) {\n\tconst [on, setOn] = useState(initialOn)\n\tconst toggle = () => setOn(!on)\n\tconst getTogglerProps = (props = {}) => ({\n\t\t'aria-expanded': on,\n\t\ttabIndex: 0,\n\t\t...props,\n\t\tonClick: callAll(props.onClick, toggle),\n\t})\n\treturn {\n\t\ton,\n\t\ttoggle,\n\t\tgetTogglerProps,\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Backward-Compatible API for the Geolocation Hook\nDESCRIPTION: This snippet shows how to maintain backward compatibility with previous API designs by transforming the state machine output to match the previous status-based API pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useGeoPosition() {\n\tconst [state, send] = useMachine(geoPositionMachine)\n\t// ... clipped out for brevity ...\n\treturn { status: state.value, ...state.context }\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Stale Closure Bug in React useState Implementation\nDESCRIPTION: This snippet demonstrates a potential stale closure bug in the useState implementation of the undo/redo feature. It shows how multiple state updates in different useEffect hooks can lead to unexpected behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Example() {\n\tconst [state, { set }] = useUndo('first')\n\n\tReact.useEffect(() => {\n\t\tset('second')\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\tset('third')\n\t}, [])\n\n\treturn <pre>{JSON.stringify(state, null, 2)}</pre>\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript implementation of listify function with Intl.ListFormat\nDESCRIPTION: This snippet provides a TypeScript version of the listify function, including type definitions for Intl.ListFormat which is not yet included in TypeScript.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n// unfortunately TypeScript doesn't have Intl.ListFormat yet 😢\n// so we'll just add it ourselves:\ntype ListFormatOptions = {\n\ttype?: 'conjunction' | 'disjunction' | 'unit'\n\tstyle?: 'long' | 'short' | 'narrow'\n\tlocaleMatcher?: 'lookup' | 'best fit'\n}\ndeclare namespace Intl {\n\tclass ListFormat {\n\t\tconstructor(locale: string, options: ListFormatOptions)\n\t\tpublic format: (items: Array<string>) => string\n\t}\n}\n\ntype ListifyOptions<ItemType> = {\n\ttype?: ListFormatOptions['type']\n\tstyle?: ListFormatOptions['style']\n\tstringify?: (item: ItemType) => string\n}\nfunction listify<ItemType>(\n\tarray: Array<ItemType>,\n\t{\n\t\ttype = 'conjunction',\n\t\tstyle = 'long',\n\t\tstringify = (thing: { toString(): string }) => thing.toString(),\n\t}: ListifyOptions<ItemType> = {},\n) {\n\tconst stringified = array.map((item) => stringify(item))\n\tconst formatter = new Intl.ListFormat('en', { style, type })\n\treturn formatter.format(stringified)\n}\n```\n\n----------------------------------------\n\nTITLE: Testing a React Form Component with React Testing Library\nDESCRIPTION: A test for the UsernameForm component that verifies the updateUsername function is called with the correct username. This test is incomplete as it doesn't verify state updates after the async operation completes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport user from '@testing-library/user-event'\nimport { render, screen } from '@testing-library/react'\n\ntest('calls updateUsername with the new username', async () => {\n\tconst handleUpdateUsername = jest.fn()\n\tconst fakeUsername = 'sonicthehedgehog'\n\n\trender(<UsernameForm updateUsername={handleUpdateUsername} />)\n\n\tconst usernameInput = screen.getByLabelText(/username/i)\n\tuser.type(usernameInput, fakeUsername)\n\tuser.click(screen.getByText(/submit/i))\n\n\texpect(handleUpdateUsername).toHaveBeenCalledWith(fakeUsername)\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Mock Implementation File\nDESCRIPTION: Demonstrates how to create a dedicated mock file in the __mocks__ directory to provide a reusable mock implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport const getWinner = jest.fn((p1, p2) => p2)\n```\n\n----------------------------------------\n\nTITLE: Stack Trace Debugging Implementation\nDESCRIPTION: Helper function with try/catch to log stack trace information\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction assertAdd(inputs, output) {\n\ttry {\n\t\texpect(add(...inputs)).toBe(output)\n\t} catch (error) {\n\t\tconsole.log(error.stack)\n\t\tthrow error\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Netlify Functions Directory in TOML\nDESCRIPTION: This TOML configuration specifies the directory where Netlify should look for serverless functions. It sets the 'functions' directory as the location for Lambda functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-netlify-functions.mdx#2025-04-12_snippet_0\n\nLANGUAGE: toml\nCODE:\n```\n[build]\n  functions = \"./functions\"\n```\n\n----------------------------------------\n\nTITLE: Creating a New Logger to Capture Updated Variable Value\nDESCRIPTION: This snippet demonstrates how to get the updated value by creating a new logger function after the variable has been reassigned.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-pass-by-value-function-parameters.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst logFruit2 = getLogger(fruit)\nlogFruit2() // \"peach\" what a relief...\n```\n\n----------------------------------------\n\nTITLE: Using react-i18n in a React Component\nDESCRIPTION: Shows how to use the react-i18n module within a React component to render internationalized content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rendering-a-function-with-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nconst getHomeContent = getContent('pages.home')\nconst ui = (\n  <a href=\"/about\">\n    {getHomeContent('nav.about')}\n  </a>\n)\n// that'll get you:\n<a href=\"/about\">About</a>\n```\n\n----------------------------------------\n\nTITLE: Improved listify function using Intl.ListFormat in JavaScript\nDESCRIPTION: This snippet shows an improved version of the listify function that utilizes the Intl.ListFormat API for better internationalization support.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nfunction listify(\n\tarray,\n\t{\n\t\ttype = 'conjunction',\n\t\tstyle = 'long',\n\t\tstringify = (item) => item.toString(),\n\t} = {},\n) {\n\tconst stringified = array.map((item) => stringify(item))\n\tconst formatter = new Intl.ListFormat('en', { style, type })\n\treturn formatter.format(stringified)\n}\n```\n\n----------------------------------------\n\nTITLE: localStorage Initial State\nDESCRIPTION: Example of reading initial state from localStorage, which involves IO operations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nconst initialState = Number(window.localStorage.getItem('count'))\nconst [count, setCount] = React.useState(initialState)\n```\n\n----------------------------------------\n\nTITLE: Implementing useDarkMode with useReducer in React (Complex Version)\nDESCRIPTION: This snippet demonstrates a more complex implementation of the useDarkMode hook using useReducer. It includes a full reducer function with action types, but results in more verbose code compared to the useState version.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/should-i-usestate-or-usereducer.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst preferDarkQuery = '(prefers-color-scheme: dark)'\n\nfunction darkModeReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'MEDIA_CHANGE': {\n\t\t\treturn { ...state, mode: action.mode }\n\t\t}\n\t\tcase 'SET_MODE': {\n\t\t\t// make sure to spread that state just in case!\n\t\t\treturn { ...state, mode: action.mode }\n\t\t}\n\t\tdefault: {\n\t\t\t// helps us avoid typos!\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\n// use the init function to lazily initialize state so we don't read into\n// localstorage or call matchMedia every render\nfunction init() {\n\treturn {\n\t\tmode:\n\t\t\twindow.localStorage.getItem('colorMode') ||\n\t\t\t(window.matchMedia(preferDarkQuery).matches ? 'dark' : 'light'),\n\t}\n}\n\nfunction useDarkMode() {\n\tconst [state, dispatch] = React.useReducer(\n\t\tdarkModeReducer,\n\t\t{ mode: 'light' },\n\t\tinit,\n\t)\n\tconst { mode } = state\n\n\tReact.useEffect(() => {\n\t\tconst mediaQuery = window.matchMedia(preferDarkQuery)\n\t\tconst handleChange = () =>\n\t\t\tdispatch({\n\t\t\t\ttype: 'MEDIA_CHANGE',\n\t\t\t\tmode: mediaQuery.matches ? 'dark' : 'light',\n\t\t\t})\n\t\tmediaQuery.addListener(handleChange)\n\t\treturn () => mediaQuery.removeListener(handleChange)\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\twindow.localStorage.setItem('colorMode', mode)\n\t}, [mode])\n\n\t// We like the API the way it is, so instead of returning the state object\n\t// and the dispatch function, we'll return the `mode` property and we'll\n\t// create a setMode helper (which we have to memoize in case someone wants\n\t// to use it in a dependency list):\n\tconst setMode = React.useCallback(\n\t\t(newMode) => dispatch({ type: 'SET_MODE', mode: newMode }),\n\t\t[],\n\t)\n\n\treturn [mode, setMode]\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Counter Component with Render Props Pattern in React\nDESCRIPTION: A class-based React component implementation of a counter using the render props pattern. The component maintains count state and provides an increment function to child components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nclass Counter extends React.Component {\n\tstate = { count: 0 }\n\tincrement = () => this.setState(({ count }) => ({ count: count + 1 }))\n\trender() {\n\t\treturn this.props.children({\n\t\t\tcount: this.state.count,\n\t\t\tincrement: this.increment,\n\t\t})\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: React Toggle Component with Deep Prop Drilling\nDESCRIPTION: Further refactored toggle component split into four components showing deeper prop drilling through multiple component layers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/prop-drilling.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [on, setOn] = React.useState(false)\n\tconst toggle = () => setOn((o) => !o)\n\treturn <Switch on={on} onToggle={toggle} />\n}\n\nfunction Switch({ on, onToggle }) {\n\treturn (\n\t\t<div>\n\t\t\t<SwitchMessage on={on} />\n\t\t\t<SwitchButton onToggle={onToggle} />\n\t\t</div>\n\t)\n}\n\nfunction SwitchMessage({ on }) {\n\treturn <div>The button is {on ? 'on' : 'off'}</div>\n}\n\nfunction SwitchButton({ onToggle }) {\n\treturn <button onClick={onToggle}>Toggle</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Jest Test Environment with MSW\nDESCRIPTION: Sets up the test environment with MSW server lifecycle hooks for Jest testing framework.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// test/setup-env.js\n// add this to your setupFilesAfterEnv config in jest so it's imported for every test file\nimport { server } from './server.js'\n\nbeforeAll(() => server.listen())\n// if you need to add a handler after calling setupServer for some specific test\n// this will remove that handler for the rest of them\n// (which is important for test isolation):\nafterEach(() => server.resetHandlers())\nafterAll(() => server.close())\n```\n\n----------------------------------------\n\nTITLE: Rendering React Element with CDN-hosted React and ReactDOM\nDESCRIPTION: This HTML file sets up a basic React application using CDN-hosted React and ReactDOM libraries. It creates a React element and renders it to the DOM using ReactDOM.render().\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script src=\"https://unpkg.com/react@16.13.1/umd/react.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/react-dom@16.13.1/umd/react-dom.development.js\"></script>\n\t\t<script type=\"module\">\n\t\t\tconst rootElement = document.getElementById('root')\n\t\t\tconst element = React.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'container' },\n\t\t\t\t'Hello World',\n\t\t\t)\n\t\t\tReactDOM.render(element, rootElement)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Toggle Component with Render Props in React\nDESCRIPTION: Demonstrates a typical usage of the react-toggled component using render props pattern. The Toggle component provides on and toggle props to its children function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<Toggle>\n\t\t\t{({ on, toggle }) => (\n\t\t\t\t<button onClick={toggle}>{on ? 'on' : 'off'}</button>\n\t\t\t)}\n\t\t</Toggle>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Basic React Component with Props\nDESCRIPTION: Demonstrates a simple React component that accepts props for addition calculation. Shows the basic props usage pattern and how props are passed as arguments.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Add(props) {\n\treturn (\n\t\t<div>\n\t\t\t{props.n1} + {props.n2} = {props.n1 + props.n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Optimized React Counter with Lifted Logger\nDESCRIPTION: Shows how to optimize re-renders by lifting the Logger component and passing it as a prop to the Counter component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/optimize-react-re-renders.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nfunction Logger(props) {\n\tconsole.log(`${props.label} rendered`)\n\treturn null // what is returned here is irrelevant...\n}\n\nfunction Counter(props) {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={increment}>The count is {count}</button>\n\t\t\t{props.logger}\n\t\t</div>\n\t)\n}\n\nReactDOM.render(\n\t<Counter logger={<Logger label=\"counter\" />} />,\n\tdocument.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: Incorrect ES6 Module Usage Example\nDESCRIPTION: Demonstrates a common misunderstanding of how default exports work with destructuring imports in ES6.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// foo.js\nconst foo = { baz: 42, bar: false }\nexport default foo\n\n// bar.js\nimport { baz } from './foo'\n```\n\n----------------------------------------\n\nTITLE: Initializing React App with DevTools Loading\nDESCRIPTION: Entry point setup that conditionally loads DevTools before rendering the main React application. Uses dynamic imports to ensure DevTools don't impact production bundle size.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-own-dev-tools.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport loadDevTools from './dev-tools/load'\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nloadDevTools(() => {\n\tReactDOM.render(<App />, document.getElementById('root'))\n})\n```\n\n----------------------------------------\n\nTITLE: Avoiding Side Effects in waitFor Callbacks for React Testing\nDESCRIPTION: Demonstrates the correct approach of performing side effects outside of waitFor callbacks to prevent multiple executions of the side effect.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nawait waitFor(() => {\n\tfireEvent.keyDown(input, { key: 'ArrowDown' })\n\texpect(screen.getAllByRole('listitem')).toHaveLength(3)\n})\n\n// ✅\nfireEvent.keyDown(input, { key: 'ArrowDown' })\nawait waitFor(() => {\n\texpect(screen.getAllByRole('listitem')).toHaveLength(3)\n})\n```\n\n----------------------------------------\n\nTITLE: Unit Testing FruitAutocomplete Without Extracting Render Function\nDESCRIPTION: This code snippet shows an alternative approach to unit testing the FruitAutocomplete component without extracting the render function. It accesses the render prop directly from the mounted component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-components-using-render-props.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { mount, render } from 'enzyme'\nimport Downshift from 'downshift'\nimport FruitAutocomplete from '../fruit-autocomplete'\n\nconst downshiftStub = {\n\tisOpen: false,\n\tgetLabelProps: (p) => p,\n\tgetInputProps: (p) => p,\n\tgetItemProps: (p) => p,\n}\n\ntest('when the inputValue is banana, it shows banana', () => {\n\tconst fruitAutocompleteRender = mount(<FruitAutocomplete />)\n\t\t.find(Downshift)\n\t\t.prop('render')\n\tconst wrapper = render(\n\t\tfruitAutocompleteRender({\n\t\t\t...downshiftStub,\n\t\t\tisOpen: true,\n\t\t\tinputValue: 'banana',\n\t\t}),\n\t)\n\texpect(hasItem(wrapper, 'banana')).toBe(true)\n})\n```\n\n----------------------------------------\n\nTITLE: Improved 'Newspaper' JavaScript Module Structure\nDESCRIPTION: Presents an improved way of structuring JavaScript modules, following a 'newspaper' approach. This method places exports and important information at the top, making the module's API immediately visible. Function implementations are moved to the bottom for better readability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/newspaper-code-structure.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst bar = getBar()\nconst thereIsABetterWay = true\n\nexport { bar, longFunction, meToo, thereIsABetterWay }\n\n// function declarations\nfunction getBar() {\n\t// main \"export\" for the function\n\treturn {\n\t\tsome: 'property',\n\t\tsomeFunction,\n\t\tsomeOtherFunction,\n\t\tsomeOtherProperty: true,\n\t\tanotherFunction,\n\t\tdontForgetMe: '!!!!',\n\t\tohWaitNeedThisToo,\n\t}\n\n\t// function declarations\n\tfunction someFunction() {\n\t\t// with plenty of lines\n\t\t// and more stuff\n\t\t// but I don't mind anymore, because I only read this if I'm interested in it\n\t}\n\n\tfunction someOtherFunction() {\n\t\t// because we need it\n\t\t// it's really important...\n\t}\n\n\tfunction anotherFunction() {\n\t\t// forgot about this one...\n\t\t// why is it here, instead of at top?\n\t\t// who knows... Doesn't affect functionality right?\n\t\t// it doesn't actually make a difference\n\t\t// even if it gets long and stuff\n\t}\n\n\tfunction ohWaitNeedThisToo() {\n\t\t// yet another function\n\t\t// man, I need a few of these don't I?\n\t\t// what other functions does this \"bar\" thing have?\n\t\t// I know just by looking at the top of the enclosing function... It's obvious... Important stuff at top, details at bottom\n\t}\n}\n\nfunction longFunction() {\n\t// I could really use a doughnut right now...\n\t// Sometimes functions need to do a lot of things\n\t// You should keep these functions short\n\t// Otherwise your code is hard for a reader to consume...\n\t// and that makes me sad :-(\n\t// and confused... But at least I know what the API is and it'll make consuming and maintaining this file much easier\n}\n\nfunction meToo() {\n\t// Don't need to make sure you scroll around the file\n\t// so you know EVERYTHING that this module exports\n\t// Because with this method, discovering the exports is obvious\n\t// It's just at the top of the file. What I see when I first open it up\n}\n```\n\n----------------------------------------\n\nTITLE: Compound Components Pattern Implementation in React TSX\nDESCRIPTION: Demonstrates the compound components pattern for a menu component, showing how to break down a complex component into smaller, composable pieces while sharing implicit state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<Menu>\n\t\t\t<MenuButton>\n\t\t\t\tActions <span aria-hidden>▾</span>\n\t\t\t</MenuButton>\n\t\t\t<MenuList>\n\t\t\t\t<MenuItem onSelect={() => alert('Download')}>Download</MenuItem>\n\t\t\t\t<MenuItem onSelect={() => alert('Copy')}>Create a Copy</MenuItem>\n\t\t\t\t<MenuItem onSelect={() => alert('Delete')}>Delete</MenuItem>\n\t\t\t</MenuList>\n\t\t</Menu>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Throwing Custom Hook Errors to Error Boundaries\nDESCRIPTION: This example shows an alternative approach for error handling with custom hooks. The component checks for errors returned by the useGreeting hook and throws them explicitly, allowing Error Boundaries to catch them without additional handling logic.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Greeting() {\n\tconst [name, setName] = React.useState('')\n\tconst { status, greeting, error } = useGreeting(name)\n\tif (error) throw error\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.name.value\n\t\tsetName(name)\n\t}\n\n\treturn status === 'resolved' ? (\n\t\t<div>{greeting}</div>\n\t) : (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<label>Name</label>\n\t\t\t<input id=\"name\" />\n\t\t\t<button type=\"submit\" onClick={handleClick}>\n\t\t\t\tget a greeting\n\t\t\t</button>\n\t\t</form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Further Inlining to Illustrate Hook Registration Issues\nDESCRIPTION: This example completely inlines the Counter function to clearly demonstrate how all useState calls belong to the App component when a function component is called directly instead of being rendered.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\tconst [items, setItems] = React.useState([])\n\tconst addItem = () => setItems((i) => [...i, { id: i.length }])\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={addItem}>Add Item</button>\n\t\t\t<div>\n\t\t\t\t{items.map(() => {\n\t\t\t\t\tconst [count, setCount] = React.useState(0)\n\t\t\t\t\tconst increment = () => setCount((c) => c + 1)\n\t\t\t\t\treturn <button onClick={increment}>{count}</button>\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Geolocation Reducer with Boolean States\nDESCRIPTION: Initial implementation of a geolocation reducer and hook using boolean loading states. Shows basic error and success handling with isLoading flag.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction geoPositionReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'error': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: false,\n\t\t\t\terror: action.error,\n\t\t\t}\n\t\t}\n\t\tcase 'success': {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLoading: false,\n\t\t\t\tposition: action.position,\n\t\t\t}\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction useGeoPosition() {\n\tconst [state, dispatch] = React.useReducer(geoPositionReducer, {\n\t\tisLoading: true,\n\t\tposition: null,\n\t\terror: null,\n\t})\n\n\tReact.useEffect(() => {\n\t\tif (!navigator.geolocation) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'error',\n\t\t\t\terror: new Error('Geolocation is not supported'),\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tconst geoWatch = navigator.geolocation.watchPosition(\n\t\t\t(position) => dispatch({ type: 'success', position }),\n\t\t\t(error) => dispatch({ type: 'error', error }),\n\t\t)\n\t\treturn () => navigator.geolocation.clearWatch(geoWatch)\n\t}, [])\n\n\treturn state\n}\n```\n\n----------------------------------------\n\nTITLE: Converting to JSX Syntax\nDESCRIPTION: Updated version showing the transition from React.createElement to JSX syntax, with the previous createElement code commented out.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script src=\"https://unpkg.com/react@16.13.1/umd/react.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/react-dom@16.13.1/umd/react-dom.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/@babel/standalone@7.8.3/babel.js\"></script>\n\t\t<script type=\"text/babel\">\n\t\t\tconst rootElement = document.getElementById('root')\n\t\t\t// const element = React.createElement(\n\t\t\t//   'div',\n\t\t\t//   {className: 'container'},\n\t\t\t//   'Hello World',\n\t\t\t// )\n\t\t\tconst element = <div className=\"container\">Hello World</div>\n\t\t\tReactDOM.render(element, rootElement)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Custom Line-Column Babel Macro - JavaScript\nDESCRIPTION: A Babel macro that replaces line and column imports with their actual positions in the source code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-impossible-states-impossible.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// line-column.macro\nmodule.exports = createMacro(lineColumnMacro)\nfunction lineColumnMacro({ references, babel }) {\n\treferences.line.forEach((referencePath) => {\n\t\tconst num = referencePath.node.loc.start.line\n\t\treferencePath.replaceWith(babel.types.numberLiteral(num))\n\t})\n\treferences.column.forEach((referencePath) => {\n\t\tconst num = referencePath.node.loc.start.column\n\t\treferencePath.replaceWith(babel.types.numberLiteral(num))\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Class Component with Render Props\nDESCRIPTION: Demonstrates how to implement render props using a class component to avoid performance concerns with inline functions. The render prop function is defined as a class method instead of being inlined.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/answers-to-common-questions-about-render-props.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nclass MyComp extends React.Component {\n\trenderDownshift = (downshift) => <div>{/* Your UI stuff here */}</div>\n\trender() {\n\t\treturn <Downshift>{this.renderDownshift}</Downshift>\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Constrained Identity Functions Implementation\nDESCRIPTION: Shows two separate CIF implementations for handling numbers and operations with their respective type constraints.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\ntype Value = number\nconst createNumbers = <ObjectType extends Record<string, Value>>(\n\tobj: ObjectType,\n) => obj\n\ntype OperationFn = (left: number, right: number) => number\nconst createOperations = <OperationsType extends Record<string, OperationFn>>(\n\toperations: OperationsType,\n) => operations\n```\n\n----------------------------------------\n\nTITLE: Simple useState Initialization\nDESCRIPTION: Basic example of useState initialization with a constant value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nconst initialState = 0\nconst [count, setCount] = React.useState(initialState)\n```\n\n----------------------------------------\n\nTITLE: Using Jest Automatic Mock Resolution\nDESCRIPTION: Shows how to use jest.mock() with automatic mock resolution from the __mocks__ directory, simplifying the test implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utilsMock from '#app/utils'\n\njest.mock('#app/utils')\n\ntest('returns winner', () => {\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\texpect(utilsMock.getWinner).toHaveBeenCalledTimes(2)\n\tutilsMock.getWinner.mock.calls.forEach((args) => {\n\t\texpect(args).toEqual(['Ken Wheeler', 'Kent C. Dodds'])\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Using Template Literals in React Components\nDESCRIPTION: Demonstrates the use of template literals for string interpolation in JavaScript and how they can be applied in React components for dynamic class names.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst greeting = 'Hello'\nconst subject = 'World'\nconsole.log(`${greeting} ${subject}!`) // Hello World!\n\n// this is the same as:\nconsole.log(greeting + ' ' + subject + '!')\n\n// in React:\nfunction Box({ className, ...props }) {\n\treturn <div className={`box ${className}`} {...props} />\n}\n```\n\n----------------------------------------\n\nTITLE: Using React Context for Localization\nDESCRIPTION: Shows how to use a React Context consumer for localization in server-side rendering, avoiding singleton issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-jsx-as-a-server-side-templating-language.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Message msgKey=\"marketing_pages/new_landing.title\" />\n```\n\n----------------------------------------\n\nTITLE: Testing ImperativeCounter Component with act()\nDESCRIPTION: This snippet demonstrates the correct way to test the ImperativeCounter component by wrapping the imperative method calls in act(). This approach resolves the act() warnings.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { render, screen, act } from '@testing-library/react'\nimport ImperativeCounter from '../imperative-counter'\n\ntest('can call imperative methods on counter component', () => {\n\tconst counterRef = React.createRef()\n\trender(<ImperativeCounter ref={counterRef} />)\n\texpect(screen.getByText('The count is: 0')).toBeInTheDocument()\n\n\tact(() => counterRef.current.increment())\n\texpect(screen.getByText('The count is: 1')).toBeInTheDocument()\n\n\tact(() => counterRef.current.decrement())\n\texpect(screen.getByText('The count is: 0')).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Demonstrating this Keyword Issues in React\nDESCRIPTION: Shows a common pitfall with the 'this' keyword in React components when handling click events, leading to runtime errors due to incorrect binding.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nclass Counter extends React.Component {\n\tstate = { clicks: 0 }\n\tincrement() {\n\t\tthis.setState({ clicks: this.state.clicks + 1 })\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<button onClick={this.increment}>\n\t\t\t\tYou have clicked me {this.state.clicks} times\n\t\t\t</button>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating useEffect Dependencies Issue\nDESCRIPTION: Shows problematic implementation of useEffect with object dependencies that causes unnecessary re-renders due to referential equality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Foo({ bar, baz }) {\n\tconst options = { bar, baz }\n\tReact.useEffect(() => {\n\t\tbuzz(options)\n\t}, [options]) // we want this to re-run if bar or baz change\n\treturn <div>foobar</div>\n}\n\nfunction Blub() {\n\treturn <Foo bar=\"bar value\" baz={3} />\n}\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 6: Lazy Initialization\nDESCRIPTION: Completes the implementation by adding support for lazy initialization, checking if initialValue is a function and calling it if so.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) =>\n\ttypeof newState === 'function' ? newState(prevState) : newState\n\nconst useStateInitializer = (initialValue) =>\n\ttypeof initialValue === 'function' ? initialValue() : initialValue\n\nfunction useState(initialValue) {\n\treturn React.useReducer(useStateReducer, initialValue, useStateInitializer)\n}\n```\n\n----------------------------------------\n\nTITLE: Refactoring getDisplayName Function to Avoid Nested Closure in JavaScript\nDESCRIPTION: This snippet shows the refactored version of getDisplayName where the upperFirstCharacter function is moved outside to reduce nesting and cognitive load.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-avoid-nesting-closures.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst upperFirstCharacter = (string) =>\n\tstring.slice(0, 1).toUpperCase() + string.slice(1)\n\nfunction getDisplayName({ firstName, lastName }) {\n\treturn `${upperFirstCharacter(firstName)} ${upperFirstCharacter(lastName)}`\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Elements with React.createElement in JavaScript\nDESCRIPTION: The course begins by demonstrating how to create elements using JavaScript's document.createElement before introducing React.createElement. This approach helps learners understand that React elements are simple JavaScript objects.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-beginners-guide-to-reactjs.mdx#2025-04-12_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nReact.createElement()\n```\n\n----------------------------------------\n\nTITLE: Integrating Prisma with Remix Loader and Component in TypeScript\nDESCRIPTION: This snippet shows how to use Prisma in a Remix loader function to fetch user data, and then use that data in a React component with full TypeScript support.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function loader({ request }: LoaderFunctionArgs) {\n\tconst users = await prisma.user.findMany({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\temail: true,\n\t\t\tfirstName: true,\n\t\t\tteam: true,\n\t\t\tpostReads: {\n\t\t\t\tselect: {\n\t\t\t\t\tpostSlug: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\treturn json({ users })\n}\n\nexport default function UsersPage() {\n\tconst data = useLoaderData<typeof loader>()\n\treturn (\n\t\t<div>\n\t\t\t<h1>Users</h1>\n\t\t\t<ul>\n\t\t\t\t{/* all this auto-completes and type checks!! */}\n\t\t\t\t{data.users.map((user) => (\n\t\t\t\t\t<li key={user.id}>\n\t\t\t\t\t\t<div>{user.firstName}</div>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Test Helper Function Implementation\nDESCRIPTION: Example of abstracting the test logic into a helper function\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst add = (a, b) => a + b\n\nfunction assertAdd(inputs, output) {\n\texpect(add(...inputs)).toBe(output)\n}\n\ntest('sums numbers', () => {\n\tassertAdd([1, 2], 4)\n})\n```\n\n----------------------------------------\n\nTITLE: Using Rest/Spread Syntax in React Components\nDESCRIPTION: Demonstrates the use of rest and spread syntax for working with arrays and objects, which is particularly useful in React for handling props and creating flexible component APIs.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nconst arr = [5, 6, 8, 4, 9]\nMath.max(...arr)\n// is the same as\nMath.max.apply(null, arr)\n\nconst obj1 = {\n\ta: 'a from obj1',\n\tb: 'b from obj1',\n\tc: 'c from obj1',\n\td: {\n\t\te: 'e from obj1',\n\t\tf: 'f from obj1',\n\t},\n}\nconst obj2 = {\n\tb: 'b from obj2',\n\tc: 'c from obj2',\n\td: {\n\t\tg: 'g from obj2',\n\t\th: 'h from obj2',\n\t},\n}\nconsole.log({ ...obj1, ...obj2 })\n// is the same as\nconsole.log(Object.assign({}, obj1, obj2))\n\nfunction add(first, ...rest) {\n\treturn rest.reduce((sum, next) => sum + next, first)\n}\n// is the same as\nfunction add() {\n\tconst first = arguments[0]\n\tconst rest = Array.from(arguments).slice(1)\n\treturn rest.reduce((sum, next) => sum + next, first)\n}\n\n// in React:\nfunction Box({ className, ...restOfTheProps }) {\n\tconst defaultProps = {\n\t\tclassName: `box ${className}`,\n\t\tchildren: 'Empty box',\n\t}\n\treturn <div {...defaultProps} {...restOfTheProps} />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing an Iterable Function for React Rendering\nDESCRIPTION: Shows the implementation of an iterable function to allow React to render a function that represents missing content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rendering-a-function-with-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst ITERATOR_SYMBOL =\n\t(typeof Symbol === 'function' && Symbol.iterator) || '@@iterator'\n\n// ...\n\nfunction iterator() {\n\tlet timesCalled = 0\n\t// useful logging happens here...\n\treturn {\n\t\tnext() {\n\t\t\t// this is called twice. Once to get the value, and the second time\n\t\t\t// will report that it's done.\n\t\t\treturn { done: timesCalled++ > 0, value: pathAsString }\n\t\t},\n\t}\n}\n\n// ...\n\ncontentGetterFn[ITERATOR_SYMBOL] = iterator\n\n// ...\n```\n\n----------------------------------------\n\nTITLE: CommonJS Dynamic Module Example\nDESCRIPTION: Demonstrates how dynamic property assignment works in CommonJS modules at runtime.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// foo.js\nconst foo = {}\nmodule.exports = foo\nsomethingAsync().then((result) => (result) => (foo[result.key] = result.value))\n\n// bar.js\nconst { foobar } = require('./foo')\n```\n\n----------------------------------------\n\nTITLE: Example of Direct Function Call That Works But Is Problematic\nDESCRIPTION: This example shows a case where directly calling a function component appears to work but is still incorrect because the hooks inside Counter are associated with the App component instance, which can lead to unexpected behaviors.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<div>Here is a counter:</div>\n\t\t\t{Counter()}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Combining Hook and Render Props Pattern\nDESCRIPTION: Final implementation that combines the custom hook with a render props component, allowing gradual migration while maintaining backward compatibility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useCounter() {\n\tconst [count, setCount] = useState(0)\n\tconst increment = () => setCount((currentCount) => currentCount + 1)\n\treturn { count, increment }\n}\n\nconst Counter = ({ children, ...props }) => children(useCounter(props))\n\nexport default Counter\nexport { useCounter }\n```\n\n----------------------------------------\n\nTITLE: Updating Root Component for Remix Hydration\nDESCRIPTION: Modifying the root component to include the Scripts component from @remix-run/react, enabling JavaScript hydration.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { Scripts } from '@remix-run/react'\n\nexport default function App() {\n\tconst [count, setCount] = React.useState(0)\n\treturn (\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<title>My First Remix App</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<p>This is a remix app. Hooray!</p>\n\t\t\t\t<button onClick={() => setCount((c) => c + 1)}>{count}</button>\n\t\t\t\t<Scripts />\n\t\t\t</body>\n\t\t</html>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a React Login Component in TypeScript\nDESCRIPTION: This code snippet defines a React Login component that handles form submission and displays error messages for missing username or password.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// login.js\nimport * as React from 'react'\n\nfunction Login({ onSubmit }) {\n\tconst [error, setError] = React.useState('')\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst {\n\t\t\tusernameInput: { value: username },\n\t\t\tpasswordInput: { value: password },\n\t\t} = event.target.elements\n\n\t\tif (!username) {\n\t\t\tsetError('username is required')\n\t\t} else if (!password) {\n\t\t\tsetError('password is required')\n\t\t} else {\n\t\t\tsetError('')\n\t\t\tonSubmit({ username, password })\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"usernameInput\">Username</label>\n\t\t\t\t\t<input id=\"usernameInput\" />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"passwordInput\">Password</label>\n\t\t\t\t\t<input id=\"passwordInput\" type=\"password\" />\n\t\t\t\t</div>\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t</form>\n\t\t\t{error ? <div role=\"alert\">{error}</div> : null}\n\t\t</div>\n\t)\n}\n\nexport default Login\n```\n\n----------------------------------------\n\nTITLE: Creating a Class Component-Compatible Context Consumer\nDESCRIPTION: Implements a CountConsumer component for class components that provides the same error checking as the hook-based approach.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CountConsumer({ children }) {\n\treturn (\n\t\t<CountContext.Consumer>\n\t\t\t{(context) => {\n\t\t\t\tif (context === undefined) {\n\t\t\t\t\tthrow new Error('CountConsumer must be used within a CountProvider')\n\t\t\t\t}\n\t\t\t\treturn children(context)\n\t\t\t}}\n\t\t</CountContext.Consumer>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Basic CSS Variable Implementation\nDESCRIPTION: Demonstrates the basic usage of CSS variables by defining a color variable in the root scope and applying it to text.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-css-variables.mdx#2025-04-12_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<style>\n\t\t:root {\n\t\t\t--color: blue;\n\t\t}\n\t\t.my-text {\n\t\t\tcolor: var(--color);\n\t\t}\n\t</style>\n\t<body>\n\t\t<div class=\"my-text\">This will be blue</div>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing useDarkMode Hook with TypeScript\nDESCRIPTION: A custom React hook that manages dark mode state with proper TypeScript types. Handles system preferences and localStorage persistence.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/wrapping-react-use-state-with-type-script.mdx#2025-04-12_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype DarkModeState = 'dark' | 'light'\ntype SetDarkModeState = React.Dispatch<React.SetStateAction<DarkModeState>>\n\nfunction useDarkMode() {\n\tconst preferDarkQuery = '(prefers-color-scheme: dark)'\n\tconst [mode, setMode] = React.useState<DarkModeState>(() => {\n\t\tconst lsVal = window.localStorage.getItem('colorMode')\n\t\tif (lsVal) {\n\t\t\treturn lsVal === 'dark' ? 'dark' : 'light'\n\t\t} else {\n\t\t\treturn window.matchMedia(preferDarkQuery).matches ? 'dark' : 'light'\n\t\t}\n\t})\n\n\tReact.useEffect(() => {\n\t\tconst mediaQuery = window.matchMedia(preferDarkQuery)\n\t\tconst handleChange = () => {\n\t\t\tsetMode(mediaQuery.matches ? 'dark' : 'light')\n\t\t}\n\t\tmediaQuery.addEventListener('change', handleChange)\n\t\treturn () => mediaQuery.removeEventListener('change', handleChange)\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\twindow.localStorage.setItem('colorMode', mode)\n\t}, [mode])\n\n\treturn [mode, setMode] as const\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Counter Component with Mixed Function Forms\nDESCRIPTION: Example React component showing the use of both arrow functions and function declarations to create a simple counter with state management.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/function-forms.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Action Type Constants to useToggle Hook in React\nDESCRIPTION: Enhanced implementation with action type constants to avoid string literals, improving maintainability and providing a better API for hook users.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nconst actionTypes = {\n\ttoggle: 'TOGGLE',\n\ton: 'ON',\n\toff: 'OFF',\n}\nfunction toggleReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase actionTypes.toggle: {\n\t\t\treturn { on: !state.on }\n\t\t}\n\t\tcase actionTypes.on: {\n\t\t\treturn { on: true }\n\t\t}\n\t\tcase actionTypes.off: {\n\t\t\treturn { on: false }\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unhandled type: ${action.type}`)\n\t\t}\n\t}\n}\n\nfunction useToggle() {\n\tconst [{ on }, dispatch] = React.useReducer(toggleReducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: actionTypes.toggle })\n\tconst setOn = () => dispatch({ type: actionTypes.on })\n\tconst setOff = () => dispatch({ type: actionTypes.off })\n\n\treturn { on, toggle, setOn, setOff }\n}\n\nexport { useToggle, actionTypes }\n```\n\n----------------------------------------\n\nTITLE: Using Context in a Class Component with Consumer\nDESCRIPTION: Shows how a class component would use the CountConsumer with render props to access the context values.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nclass CounterThing extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<CountConsumer>\n\t\t\t\t{({ state, dispatch }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{state.count}</div>\n\t\t\t\t\t\t<button onClick={() => dispatch({ type: 'decrement' })}>\n\t\t\t\t\t\t\tDecrement\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button onClick={() => dispatch({ type: 'increment' })}>\n\t\t\t\t\t\t\tIncrement\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</CountConsumer>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Impure Module Implementation Example\nDESCRIPTION: Example of problematic impure module implementation showing cascading imports with side effects across multiple files.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/pure-modules.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// a.js\nimport './b'\nconsole.log('ready')\n\n// b.js\nimport { serverData } from './c'\n\nif (!serverData.user) {\n\t// redirect to login\n\tlocation.assign('/login')\n}\n\n// c.js\nconst el = document.getElementById('server-data')\nconst json = el.textContent\nexport const serverData = JSON.parse(json)\n```\n\n----------------------------------------\n\nTITLE: Using the XState Geolocation Hook in a React Component\nDESCRIPTION: This snippet demonstrates how to use the useGeoPosition hook in a React component, showing how to check different machine states and render appropriate UI based on the current state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction YourPosition() {\n\tconst state = useGeoPosition()\n\tconst { position, error } = state.context\n\n\tif (state.matches('rejectedNotSupported')) {\n\t\treturn <div>This browser does not support Geolocation</div>\n\t}\n\n\tif (state.matches('idle') || state.matches('pending')) {\n\t\treturn <div>Loading your position...</div>\n\t}\n\n\tif (state.matches('resolved')) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\tLat: {position.coords.latitude}, Long: {position.coords.longitude}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tif (state.matches('rejected')) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Oh no, there was a problem getting your position:</div>\n\t\t\t\t<pre>{error.message}</pre>\n\t\t\t</div>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Inverted Control Filter\nDESCRIPTION: Refactored filter implementation using Inversion of Control pattern, accepting a filter function as parameter.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction filter(array, filterFn) {\n\tlet newArray = []\n\tfor (let index = 0; index < array.length; index++) {\n\t\tconst element = array[index]\n\t\tif (filterFn(element)) {\n\t\t\tnewArray[newArray.length] = element\n\t\t}\n\t}\n\treturn newArray\n}\n```\n\n----------------------------------------\n\nTITLE: Rest Parameters in TypeScript\nDESCRIPTION: Examples of using rest parameters to collect multiple arguments into an array.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = (a: number = 0, ...rest: Array<number>): number => {\n\treturn rest.reduce((acc, n) => acc + n, a)\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype MathFn = (a?: number, ...rest: Array<number>) => number\nconst sum: MathFn = (a = 0, ...rest) => rest.reduce((acc, n) => acc + n, a)\n```\n\n----------------------------------------\n\nTITLE: Setting Up MSW Test Server Configuration\nDESCRIPTION: Creates and exports an MSW server instance for testing, utilizing the previously defined handlers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// test/server.js\nimport { rest } from 'msw'\nimport { setupServer } from 'msw/node'\nimport { handlers } from './server-handlers'\n\nconst server = setupServer(...handlers)\nexport { server, rest }\n```\n\n----------------------------------------\n\nTITLE: Preventing Layout Shift with Aspect Ratio Container\nDESCRIPTION: Using HTML and Tailwind CSS to prevent layout shift when loading images by setting an aspect ratio container. This ensures the space for the image is reserved before it loads, improving Cumulative Layout Shift (CLS) scores.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"aspect-[3/4] md:aspect-[3/2]\">\n\t<img src=\"...\" alt=\"...\" class=\"...\" />\n</div>\n```\n\n----------------------------------------\n\nTITLE: Implementing codegen Macro with TypeScript\nDESCRIPTION: This snippet shows how to implement the codegen macro function with TypeScript, including type definitions for function overloading.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/define-function-overload-types-with-type-script.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createMacro } from 'babel-plugin-macros'\nimport type { MacroHandler } from 'babel-plugin-macros'\n\nconst codegenMacro: MacroHandler = function codegenMacro(/* some args */) {\n\t// the implementation here is irrelevant\n}\n\n// use the `createMacro` utility to turn the codegenMacro into a babel macro\nconst macro = createMacro(codegenMacro)\n\n// This handles the tagged template literal API:\ndeclare function codegen(\n\tliterals: TemplateStringsArray,\n\t...interpolations: Array<unknown>\n): any\n\n// this handles the function call API:\ndeclare function codegen(code: string): any\n\n// this handles the `codegen.require` API:\ndeclare namespace codegen {\n\tfunction require(modulePath: string, ...args: Array<unknown>): any\n}\n\nexport default macro as typeof codegen\n```\n\n----------------------------------------\n\nTITLE: Using beforeAll and afterAll for Server Setup in Tests\nDESCRIPTION: This snippet shows how to use beforeAll and afterAll hooks for starting and stopping a server in tests. This is a valid use case for these hooks when shared setup and teardown are required across multiple tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nlet server\nbeforeAll(async () => {\n\tserver = await startServer()\n})\nafterAll(() => server.close())\n```\n\n----------------------------------------\n\nTITLE: Caching Evaluated MDX Components (TypeScript)\nDESCRIPTION: This code implements a caching mechanism for MDX components using LRU cache. It prevents repeated evaluation of the same MDX code, improving performance and reducing memory usage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fixing-a-memory-leak-in-a-production-node-js-app.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// This exists so we don't have to call new Function for the given code\n// for every request for a given blog post/mdx file.\nconst mdxComponentCache = new LRU<string, ReturnType<typeof getMdxComponent>>({\n\tmax: 1000,\n})\n\nfunction useMdxComponent(code: string) {\n\treturn React.useMemo(() => {\n\t\tif (mdxComponentCache.has(code)) {\n\t\t\treturn mdxComponentCache.get(code)!\n\t\t}\n\t\tconst component = getMdxComponent(code)\n\t\tmdxComponentCache.set(code, component)\n\t\treturn component\n\t}, [code])\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Async Function with Callback in JavaScript\nDESCRIPTION: This snippet shows how to implement an async function that accepts a callback or returns a promise in JavaScript.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/define-function-overload-types-with-type-script.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction asyncAdd(a, b, cb) {\n\tconst result = a + b\n\tif (cb) return cb(result)\n\telse return Promise.resolve(result)\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Computation Example in React FavoriteNumber Component\nDESCRIPTION: Demonstration of a component where derived state calculation might be unnecessary in some render cycles.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nfunction FavoriteNumber() {\n\tconst [name, setName] = React.useState('')\n\tconst [number, setNumber] = React.useState(0)\n\tconst numberWarning = getNumberWarning(number)\n\treturn (\n\t\t<div>\n\t\t\t<label>\n\t\t\t\tYour name: <input onChange={(e) => setName(e.target.value)} />\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\tYour favorite number:{' '}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tonChange={(e) => setNumber(Number(e.target.value))}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div>\n\t\t\t\t{name\n\t\t\t\t\t? `${name}'s favorite number is ${number}`\n\t\t\t\t\t: 'Please type your name'}\n\t\t\t</div>\n\t\t\t<div>{number > 10 ? numberWarning : null}</div>\n\t\t\t<div>{number < 0 ? numberWarning : null}</div>\n\t\t</div>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Named Exports Example\nDESCRIPTION: Demonstrates recommended usage of named exports for utility modules.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// math.js\nconst add = (x, y) => x + y\nconst subtract = (x, y) => x - y\nconst multiply = (x, y) => x * y\nexport {add, subtract, multiply}\n\n// foo.js\nimport {subtract, multiply} from './math'\n```\n\n----------------------------------------\n\nTITLE: TypeScript Generator with Yield Assignments\nDESCRIPTION: Demonstrates a generator function where yield expressions are assigned to variables, showing how to type the yield completion values for type safety. This creates two-way communication with the generator.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nfunction* generator(start: number) {\n\tconst newStart: number = yield start + 1\n\tyield newStart + 2\n}\n\nvar iterator = generator(0)\nconsole.log(iterator.next()) // { value: 1, done: false }\nconsole.log(iterator.next(3)) // { value: 5, done: false }\nconsole.log(iterator.next()) // { value: undefined, done: true }\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Runtime Errors in React Components\nDESCRIPTION: This code snippet shows a React application with two components that will throw errors due to missing 'subject' props. It illustrates the need for error handling in React applications.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\n\nfunction Greeting({ subject }) {\n\treturn <div>Hello {subject.toUpperCase()}</div>\n}\n\nfunction Farewell({ subject }) {\n\treturn <div>Goodbye {subject.toUpperCase()}</div>\n}\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<Greeting />\n\t\t\t<Farewell />\n\t\t</div>\n\t)\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n```\n\n----------------------------------------\n\nTITLE: Rendering Raw HTML in React Components\nDESCRIPTION: Demonstrates how to safely render raw HTML content within React components using a custom RawText component and string manipulation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-jsx-as-a-server-side-templating-language.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<head>\n\t<RawText>{polyfill.headHTML}</RawText>\n</head>\n```\n\nLANGUAGE: jsx\nCODE:\n```\nfunction RawText({ children }) {\n\treturn <raw-text dangerouslySetInnerHTML={{ __html: children }} />\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst htmlOutput = ReactDOMServer.renderToStaticMarkup(<Page {...options} />)\nconst rendered = `  \n  <!DOCTYPE html>  \n  ${removeRawText(htmlOutput)}  \n`\n// ...etc...\n```\n\nLANGUAGE: javascript\nCODE:\n```\nfunction removeRawText(string) {\n\treturn string.replace(/<\\/?raw-text>/g, '')\n}\n```\n\n----------------------------------------\n\nTITLE: Shallow Rendering Test with Enzyme\nDESCRIPTION: This code demonstrates a test using shallow rendering with Enzyme. It checks the props of the Fade component and simulates a button click to verify state changes. The test focuses on component internals rather than user-facing behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport Enzyme, { shallow } from 'enzyme'\nimport Adapter from 'enzyme-adapter-react-16'\nimport { HiddenMessage } from '../hidden-message'\n\nEnzyme.configure({ adapter: new Adapter() })\n\ntest('shallow', () => {\n\tconst wrapper = shallow(<HiddenMessage initialShow={true} />)\n\texpect(wrapper.find('Fade').props()).toEqual({\n\t\tin: true,\n\t\tchildren: <div>Hello world</div>,\n\t})\n\twrapper.find('button').simulate('click')\n\texpect(wrapper.find('Fade').props()).toEqual({\n\t\tin: false,\n\t\tchildren: <div>Hello world</div>,\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering Team T-Shirt Images in JSX\nDESCRIPTION: This snippet displays images of team t-shirts with links to purchase them, using inline styles for aspect ratio and a flex container for layout.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/teams.mdx#2025-04-12_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<div className=\"flex gap-4\">\n\t<a href=\"https://cottonbureau.com/p/4AAW9M\">\n\t\t<img\n\t\t\tsrc=\"https://res.cloudinary.com/kentcdodds-com/image/upload/f_auto,q_auto,dpr_2.0,ar_1:1,w_560/v1670441444/kentcdodds.com/content/teams/shirt-yellow\"\n\t\t\talt=\"Yellow T-Shirt with a Koala\"\n\t\t\tstyle={{ aspectRatio: '1/1' }}\n\t\t/>\n\t</a>\n\t<a href=\"https://cottonbureau.com/p/BT8VUW\">\n\t\t<img\n\t\t\tsrc=\"https://res.cloudinary.com/kentcdodds-com/image/upload/f_auto,q_auto,dpr_2.0,ar_1:1,w_560/v1670441444/kentcdodds.com/content/teams/shirt-blue\"\n\t\t\talt=\"Blue T-Shirt with a Koala\"\n\t\t\tstyle={{ aspectRatio: '1/1' }}\n\t\t/>\n\t</a>\n\t<a href=\"https://cottonbureau.com/p/6ZE96D\">\n\t\t<img\n\t\t\tsrc=\"https://res.cloudinary.com/kentcdodds-com/image/upload/f_auto,q_auto,dpr_2.0,ar_1:1,w_560/v1670441444/kentcdodds.com/content/teams/shirt-red\"\n\t\t\talt=\"Red T-Shirt with a Koala\"\n\t\t\tstyle={{ aspectRatio: '1/1' }}\n\t\t/>\n\t</a>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Logging Shallow Rendered Output\nDESCRIPTION: This snippet shows the output of shallow rendering, demonstrating that it doesn't fully render child components like Fade, but instead represents them as React elements with props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<div>\n\t<button onClick={[Function]}>Toggle</button>\n\t<Fade in={true}>\n\t\t<div>Hello world</div>\n\t</Fade>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Implementing a Combined Context Hook in React\nDESCRIPTION: This implementation shows how to create a custom hook that combines the state and dispatch hooks into a single function. Note that using this approach loses performance benefits for components that only need one or the other.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-optimize-your-context-value.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useCount() {\n\treturn [useCountState(), useCountDispatch()]\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Rendering with If Statements in React JSX\nDESCRIPTION: This code snippet demonstrates how to use if statements for conditional rendering in React, as an alternative to ternaries or &&.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction ContactList({ contacts }) {\n\tlet contactsElements = null\n\tif (contacts.length) {\n\t\tcontactsElements = contacts.map((contact) => (\n\t\t\t<li key={contact.id}>\n\t\t\t\t{contact.firstName} {contact.lastName}\n\t\t\t</li>\n\t\t))\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<ul>{contactsElements}</ul>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using useErrorBoundary Hook for Async Error Handling\nDESCRIPTION: This snippet demonstrates how to use the useErrorBoundary hook from react-error-boundary to handle asynchronous errors. Instead of maintaining error state locally, it passes errors to the nearest Error Boundary component through the showBoundary method.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-react-error-boundary-to-handle-errors-in-react/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Greeting() {\n\tconst [{ status, greeting }, setState] = React.useState({\n\t\tstatus: 'idle',\n\t\tgreeting: null,\n\t})\n\tconst { showBoundary } = useErrorBoundary()\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst name = event.target.elements.name.value\n\t\tsetState({ status: 'pending' })\n\t\tfetchGreeting(name).then(\n\t\t\t(newGreeting) => setState({ greeting: newGreeting, status: 'resolved' }),\n\t\t\t(error) => showBoundary(error),\n\t\t)\n\t}\n\n\treturn status === 'resolved' ? (\n\t\t<div>{greeting}</div>\n\t) : (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<label>Name</label>\n\t\t\t<input id=\"name\" />\n\t\t\t<button type=\"submit\" onClick={handleClick}>\n\t\t\t\tget a greeting\n\t\t\t</button>\n\t\t</form>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Basic useReducer API Demonstration\nDESCRIPTION: Shows the basic usage of useReducer hook, returning state and a dispatch function when provided with a reducer function and initial value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst [state, dispatch] = React.useReducer(reducerFn, initialValue)\n```\n\n----------------------------------------\n\nTITLE: Using Record Type for Calculator Operations in TypeScript\nDESCRIPTION: This snippet shows an attempt to use the Record type to simplify the operations object definition. However, it results in widening the operator type to string.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ntype OperationFn = (left: number, right: number) => number\nconst operations: Record<string, OperationFn> = {\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n}\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\n```\n\n----------------------------------------\n\nTITLE: Using 'aria-label' Attribute for Input Labeling in HTML\nDESCRIPTION: A method to label an input using the 'aria-label' attribute, though not recommended as it removes the visible label.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_5\n\nLANGUAGE: HTML\nCODE:\n```\n<input aria-label=\"Username\" />\n```\n\n----------------------------------------\n\nTITLE: Static Analysis Examples in JavaScript and TypeScript\nDESCRIPTION: Examples of code that can be caught by static analysis tools like ESLint and TypeScript. It demonstrates a for-loop bug and a type mismatch error.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/static-vs-unit-vs-integration-vs-e2e-tests.mdx#2025-04-12_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// can you spot the bug?\n// I'll bet ESLint's for-direction rule could\n// catch it faster than you in a code review 😉\nfor (var i = 0; i < 10; i--) {\n\tconsole.log(i)\n}\n\nconst two = '2'\n// ok, this one's contrived a bit,\n// but TypeScript will tell you this is bad:\nconst result = add(1, two)\n```\n\n----------------------------------------\n\nTITLE: Advanced Macro Implementation\nDESCRIPTION: Complete implementation of a macro that handles multiple reference types including JSX and template literals\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-your-own-code-transform.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = createMacro(myMacro)\n\nfunction myMacro({ references, state, babel }) {\n\tconst { JSXMacro = [], default: defaultImport = [] } = references\n\n\tdefaultImport.forEach((referencePath) => {\n\t\tif (referencePath.parentPath.type === 'TaggedTemplateExpression') {\n\t\t\tconsole.log(\n\t\t\t\t'template literal contents',\n\t\t\t\treferencePath.parentPath.get('quasi'),\n\t\t\t)\n\t\t} else if (referencePath.parentPath.type === 'CallExpression') {\n\t\t\tif (referencePath === referencePath.parentPath.get('callee')) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'function call arguments (as callee)',\n\t\t\t\t\treferencePath.parentPath.get('arguments'),\n\t\t\t\t)\n\t\t\t} else if (\n\t\t\t\treferencePath.parentPath.get('arguments').includes(referencePath)\n\t\t\t) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'function call arguments (as argument)',\n\t\t\t\t\treferencePath.parentPath.get('arguments'),\n\t\t\t\t)\n\t\t\t}\n\t\t} else {\n\t\t\t// throw a helpful error message or something :)\n\t\t}\n\t})\n\n\tJSXMacro.forEach((referencePath) => {\n\t\tif (referencePath.parentPath.type === 'JSXOpeningElement') {\n\t\t\tconsole.log('jsx props', {\n\t\t\t\tattributes: referencePath.parentPath.get('attributes'),\n\t\t\t\tchildren: referencePath.parentPath.parentPath.get('children'),\n\t\t\t})\n\t\t} else {\n\t\t\t// throw a helpful error message or something :)\n\t\t}\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Using afterEach for Consistent Cleanup in React Tests\nDESCRIPTION: This snippet demonstrates the use of afterEach hook to ensure consistent cleanup in React tests, even when a test fails. It prevents errors from propagating to subsequent tests due to leftover DOM elements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { cleanup, render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\nafterEach(() => cleanup())\n\ntest('example 1', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText } = render(<Login onSubmit={handleSubmit} />)\n\tuserEvent.type(getByLabelText(/username/i), 'kentcdodds')\n\tuserEvent.type(getByLabelText(/password/i), 'ilovetwix')\n\t// more test here\n})\n\ntest('example 2', () => {\n\tconst handleSubmit = jest.fn()\n\tconst { getByLabelText } = render(<Login onSubmit={handleSubmit} />)\n\tuserEvent.type(getByLabelText(/username/i), 'kentcdodds')\n\t// more test here\n})\n```\n\n----------------------------------------\n\nTITLE: Testing jQuery Plugin with DOM Testing Library\nDESCRIPTION: Example showing how to test a jQuery counter plugin using DOM Testing Library and Jest. The code demonstrates framework-agnostic testing principles by implementing and testing a simple click counter component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-is-an-implementation-detail.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport '@testing-library/jest-dom/extend-expect'\nimport { getQueriesForElement } from '@testing-library/dom'\nimport userEvent from '@testing-library/user-event'\nimport $ from 'jquery'\n\n$.fn.countify = function countify() {\n\tthis.html(`\n    <div>\n      <button>0</button>\n    </div>\n  `)\n\tconst $button = this.find('button')\n\t$button._count = 0\n\t$button.click(() => {\n\t\t$button._count++\n\t\t$button.text($button._count)\n\t})\n}\n\n// tests:\ntest('counter increments', () => {\n\tconst div = document.createElement('div')\n\t$(div).countify()\n\tconst { getByText } = getQueriesForElement(div)\n\tconst counter = getByText('0')\n\tuserEvent.click(counter)\n\texpect(counter).toHaveTextContent('1')\n\n\tuserEvent.click(counter)\n\texpect(counter).toHaveTextContent('2')\n})\n```\n\n----------------------------------------\n\nTITLE: React Component Using Boolean Loading States\nDESCRIPTION: Example React component showing problematic implementation using boolean loading states, demonstrating potential race conditions and state conflicts.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-isloading-booleans.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction YourPosition() {\n\tconst { isLoading, position, error } = useGeoPosition()\n\n\tif (isLoading) {\n\t\treturn <div>Loading your position...</div>\n\t}\n\n\tif (position) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\tLat: {position.coords.latitude}, Long: {position.coords.longitude}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tif (error) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div>Oh no, there was a problem getting your position:</div>\n\t\t\t\t<pre>{error.message}</pre>\n\t\t\t</div>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Polyfill Service Implementation Handler\nDESCRIPTION: Express route handler that generates and serves browser-specific polyfills using polyfill-service module. Includes caching headers and content type configuration.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/polyfill-as-needed-with-polyfill-service.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport polyfill from 'polyfill-service'\n\nasync function getBrowserPolyfill(req, res) {\n\tconst script = await polyfill.getPolyfillString({\n\t\t/* options */\n\t})\n\tres.set({\n\t\t'Content-Type': 'application/javascript;charset=utf-8',\n\t\t'Content-Length': script.length,\n\t})\n\tif (shouldCacheAggressively) {\n\t\tres.setHeader('Cache-Control', 'immutable')\n\t}\n\tres.write(script)\n\tres.end()\n}\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 5: With Initializer Function\nDESCRIPTION: Iteration that introduces an initializer function to prepare for supporting lazy initialization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) =>\n\ttypeof newState === 'function' ? newState(prevState) : newState\n\nconst useStateInitializer = (initialArg) => initialArg\n\nfunction useState(initialValue) {\n\treturn React.useReducer(useStateReducer, initialValue, useStateInitializer)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Intl.ListFormat for creating human-readable lists in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the Intl.ListFormat API to create properly formatted lists with conjunctions in different styles.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst items = [\n\t'Sojourner',\n\t'Opportunity',\n\t'Spirit',\n\t'Curiosity',\n\t'Perseverance',\n]\n\nconst formatter = new Intl.ListFormat('en', {\n\tstyle: 'long',\n\ttype: 'conjunction',\n})\nconsole.log(formatter.format(items))\n// logs: \"Sojourner, Opportunity, Spirit, Curiosity, and Perseverance\"\n```\n\n----------------------------------------\n\nTITLE: Private Class Fields Implementation in JavaScript\nDESCRIPTION: Shows the proposed private class fields syntax for JavaScript classes, demonstrating private property and method implementation using the # prefix.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nclass Person {\n  #name\n  greeting = 'hey there'\n  #getPrefixedName = prefix => `${prefix}: ${this.#name}`\n  constructor(name) {\n    this.#name = name\n  }\n  setName(strName) {\n    #name = strName\n    // look at this! shorthand for:\n    // this.#name = strName\n  }\n  getName() {\n    return #getPrefixedName('Name')\n  }\n  getGreetingCallback() {\n    const {greeting} = this\n    return subject => `${this.greeting} ${subject}, I'm ${#name}`\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using JSX in React Components\nDESCRIPTION: The course introduces JSX as an abstraction over React.createElement, showing how JSX syntax converts to regular JavaScript. This helps reinforce the concept that React is built on simple JavaScript principles.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-beginners-guide-to-reactjs.mdx#2025-04-12_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\n// JSX example\n<div>Hello, world!</div>\n\n// Equivalent React.createElement call\nReact.createElement('div', null, 'Hello, world!')\n```\n\n----------------------------------------\n\nTITLE: Structuring Asynchronous Learning Schedule for KCD Learning Club\nDESCRIPTION: This code snippet illustrates how to structure an asynchronous learning schedule for a KCD Learning Club, with completion dates for each topic without specific meeting times.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/clubs.mdx#2025-04-12_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n```\n1. Sept. 14th: Finish \"Fundamentals of Testing in JavaScript\"\n2. Sept. 17th: Finish \"JavaScript Mocking Fundamentals\"\n3. Sept. 21st: Finish \"Configure Jest for Testing JavaScript Applications\"\n4. Sept. 24th: Finish \"Test React Components with Jest and React Testing Library\"\n5. Sept. 28th: Finish \"Install, Configure, and Script Cypress for JavaScript Web Applications\"\n6. Oct. 1st: Finish \"Use DOM Testing Library to test any JS framework\"\n7. Oct. 5th: Finish \"Test Node.js Backends\"\n```\n```\n\n----------------------------------------\n\nTITLE: Lazy Initialization with localStorage\nDESCRIPTION: Improved implementation using lazy initialization to optimize performance when reading from localStorage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-state-lazy-initialization-and-function-updates/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nconst getInitialState = () => Number(window.localStorage.getItem('count'))\nconst [count, setCount] = React.useState(getInitialState)\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with Async Operation in TypeScript\nDESCRIPTION: This snippet demonstrates how to test a React component with an async operation, waiting for the 'saving' text to be removed after submission.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\ntest('calls updateUsername with the new username', async () => {\n\tconst handleUpdateUsername = jest.fn()\n\tconst fakeUsername = 'sonicthehedgehog'\n\n\trender(<UsernameForm updateUsername={handleUpdateUsername} />)\n\n\tconst usernameInput = screen.getByLabelText(/username/i)\n\tuser.type(usernameInput, fakeUsername)\n\tuser.click(screen.getByText(/submit/i))\n\n\texpect(handleUpdateUsername).toHaveBeenCalledWith(fakeUsername)\n\tawait waitForElementToBeRemoved(() => screen.queryByText(/saving/i))\n})\n```\n\n----------------------------------------\n\nTITLE: Tic-Tac-Toe with Multiple useState Variables and Additional Feature\nDESCRIPTION: This implementation expands on the previous approach by adding a feature to select two squares at once. It demonstrates how the complexity increases as new features are added, requiring duplicate state update logic.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst [nextValue, setNextValue] = React.useState(calculateNextValue(squares))\n\tconst [winner, setWinner] = React.useState(calculateWinner(squares))\n\tconst [status, setStatus] = React.useState(calculateStatus(squares))\n\n\tfunction selectSquare(square) {\n\t\tif (winner || squares[square]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square] = nextValue\n\n\t\tconst newNextValue = calculateNextValue(squaresCopy)\n\t\tconst newWinner = calculateWinner(squaresCopy)\n\t\tconst newStatus = calculateStatus(newWinner, squaresCopy, newNextValue)\n\t\tsetSquares(squaresCopy)\n\t\tsetNextValue(newNextValue)\n\t\tsetWinner(newWinner)\n\t\tsetStatus(newStatus)\n\t}\n\n\tfunction selectTwoSquares(square1, square2) {\n\t\tif (winner || squares[square1] || squares[square2]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square1] = nextValue\n\t\tsquaresCopy[square2] = nextValue\n\n\t\tconst newNextValue = calculateNextValue(squaresCopy)\n\t\tconst newWinner = calculateWinner(squaresCopy)\n\t\tconst newStatus = calculateStatus(newWinner, squaresCopy, newNextValue)\n\t\tsetSquares(squaresCopy)\n\t\tsetNextValue(newNextValue)\n\t\tsetWinner(newWinner)\n\t\tsetStatus(newStatus)\n\t}\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: React Component Lazy Loading\nDESCRIPTION: Shows how babel-plugin-import-inspector works with react-loadable to enable code splitting and lazy loading of React components with a simplified API.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-writing-custom-babel-and-eslint-plugins-can-increase-productivity-and-improve-user-experience.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { loadable } from 'react-loadable'\nimport Component from './heavy-component'\n```\n\n----------------------------------------\n\nTITLE: Error Stack Trace Capture Implementation\nDESCRIPTION: Final implementation using Error.captureStackTrace for cleaner stack traces\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nfunction assertAdd(inputs, output) {\n\ttry {\n\t\texpect(add(...inputs)).toBe(output)\n\t} catch (error) {\n\t\tError.captureStackTrace(error, assertAdd)\n\t\tthrow error\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Async Module Implementation\nDESCRIPTION: JavaScript module that exports a function for async usage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// async-script.js\nimport { appendDiv } from './append-div.js'\n\nfunction go() {\n\tappendDiv('Hello from async script')\n}\n\nexport { go }\n```\n\n----------------------------------------\n\nTITLE: Advanced Macro Usage Examples\nDESCRIPTION: Demonstration of various macro usage patterns including function calls, JSX, and template literals\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-your-own-code-transform.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport myMacro, { JSXMacro } from 'AnyNameThatEndsIn.macro'\n// (note: in reality, the AnyNameThatEndsIn.macro should be the name of your package\n// for example: `codegen.macro`)\nconst functionCall = myMacro('Awesome')\nconst jsx = <JSXMacro cool=\"right!?\">Hi!</JSXMacro>\nconst templateLiteral = myMacro`hi ${`there`}`\nliterallyAnythingWorks(myMacro)\n```\n\n----------------------------------------\n\nTITLE: Scoped CSS Variables Example\nDESCRIPTION: Shows how CSS variables can be scoped to different selectors, creating different colored text sections.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-css-variables.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<style>\n\t\t.blue-text {\n\t\t\t--color: blue;\n\t\t}\n\t\t.red-text {\n\t\t\t--color: red;\n\t\t}\n\t\t.my-text {\n\t\t\tcolor: var(--color);\n\t\t}\n\t</style>\n\t<body>\n\t\t<div class=\"blue-text\">\n\t\t\t<div class=\"my-text\">This will be blue</div>\n\t\t</div>\n\t\t<div class=\"red-text\">\n\t\t\t<div class=\"my-text\">This will be red</div>\n\t\t</div>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: HTML Select Compound Component Example\nDESCRIPTION: Demonstrates the traditional HTML select and option compound components pattern, showing how components work together to create a cohesive interface.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compound-components-with-react-hooks.mdx#2025-04-12_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<select>\n\t<option value=\"value1\">key1</option>\n\t<option value=\"value2\">key2</option>\n\t<option value=\"value3\">key3</option>\n</select>\n```\n\n----------------------------------------\n\nTITLE: Inline Refactoring to Demonstrate the Root Problem\nDESCRIPTION: This refactored example explicitly shows how directly calling a function component leads to hook errors by revealing that all hook calls are associated with the App component, not with individual Counter instances.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter() {\n\tconst [count, setCount] = React.useState(0)\n\tconst increment = () => setCount((c) => c + 1)\n\treturn <button onClick={increment}>{count}</button>\n}\n\nfunction App() {\n\tconst [items, setItems] = React.useState([])\n\tconst addItem = () => setItems((i) => [...i, { id: i.length }])\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={addItem}>Add Item</button>\n\t\t\t<div>\n\t\t\t\t{items.map(() => {\n\t\t\t\t\treturn Counter()\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Proper State Management Implementation\nDESCRIPTION: Shows the correct implementation using React useState hook to manage dynamic values, demonstrating proper state management patterns.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction AddWithInput(props) {\n\tconst [n2, setN2] = React.useState(0)\n\n\tfunction handleInputChange(event) {\n\t\tconst input = event.target\n\t\tconst newN2 = Number(input.value)\n\t\tsetN2(newN2)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{props.n1} +{' '}\n\t\t\t<input type=\"number\" value={n2} onChange={handleInputChange} /> ={' '}\n\t\t\t{props.n1 + n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Counter with Initial Count Prop in React\nDESCRIPTION: Enhanced counter component that accepts an initialCount prop to set the starting value and reset state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-initializer-pattern/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Counter({ initialCount = 0 }: { initialCount?: number }) {\n\tconst [count, setCount] = React.useState(initialCount)\n\tconst increment = () => setCount((c) => c + 1)\n\tconst reset = () => setCount(initialCount)\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={increment}>{count}</button>\n\t\t\t<button onClick={reset}>Reset</button>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Button Click Handler in React TSX\nDESCRIPTION: Two versions of a button click handler implementation in React - one using an inline arrow function and another with direct method reference, demonstrating a potential performance optimization that could lead to bugs.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-implementation-details.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<button onClick={() => this.setOpenIndex(index)}>{item.title}</button>\n```\n\nLANGUAGE: tsx\nCODE:\n```\n<button onClick={this.setOpenIndex}>{item.title}</button>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Error Handling with Type Annotations\nDESCRIPTION: Initial attempt at TypeScript error handling with basic type annotations for the reportError function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/get-a-catch-block-error-message-with-typescript.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst reportError = ({ message }: { message: string }) => {\n\t// send the error to our logging service...\n}\n\ntry {\n\tthrow new Error('Oh no!')\n} catch (error) {\n\t// we'll proceed, but let's report it\n\treportError({ message: error.message })\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring a Module with Named Export in TypeScript Declaration File\nDESCRIPTION: Shows how to write type definitions for a function with properties in a .d.ts file as a named export. This approach is used when the module exports specific named functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare const sum: {\n\t(a: number, b: number): number\n\toperator: string\n}\nexport { sum }\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Deployment Pipeline Diagram in JSX\nDESCRIPTION: This code snippet renders a themed diagram of the deployment pipeline using the Themed component. It provides both dark and light versions of the diagram, each linking to a Cloudinary-hosted image.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/deployment-pipeline-dark\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/deployment-pipeline-dark\"\n\t\t\t\timgProps={{ alt: 'Excalidraw diagram of a deployment pipeline' }}\n\t\t\t/>\n\t\t</a>\n\t}\n\tlight={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/deployment-pipeline-light\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/deployment-pipeline-light\"\n\t\t\t\timgProps={{ alt: 'Excalidraw diagram of a deployment pipeline' }}\n\t\t\t/>\n\t\t</a>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Proper Usage of query* Variants in React Testing Library\nDESCRIPTION: Illustrates the correct use of query* variants for checking non-existence of elements, as opposed to using them for positive assertions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nexpect(screen.queryByRole('alert')).toBeInTheDocument()\n\n// ✅\nexpect(screen.getByRole('alert')).toBeInTheDocument()\nexpect(screen.queryByRole('alert')).not.toBeInTheDocument()\n```\n\n----------------------------------------\n\nTITLE: Rendering Callout Component in JSX for Remix Benefits\nDESCRIPTION: This code snippet demonstrates the use of a custom Callout component in JSX to highlight a key benefit of using Remix for web development. It emphasizes how Remix enables developers to create amazing user experiences while maintaining code quality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<callout-success class=\"important\">\n\tRemix enables me to build amazing user experiences and still be happy with the\n\tcode I had to write to get there.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: React Component with React.FC Type\nDESCRIPTION: An example of using the React.FC type to define a functional component in TypeScript, highlighting its limitations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst Calculator: React.FC<CalculatorProps> = ({ left, right, operator }) => {\n\t// implementation clipped for brevity\n}\n```\n\n----------------------------------------\n\nTITLE: Improved TypeScript Props with Typed Operations\nDESCRIPTION: An enhanced version of the Calculator component with typed operations and improved prop types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nconst operations = {\n\t'+': (left: number, right: number): number => left + right,\n\t'-': (left: number, right: number): number => left - right,\n\t'*': (left: number, right: number): number => left * right,\n\t'/': (left: number, right: number): number => left / right,\n}\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: string\n\tright: number\n}\nfunction Calculator({ left, operator, right }: CalculatorProps) {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Object References to Share Mutable State\nDESCRIPTION: This snippet demonstrates how to use object references to create a shared mutable state between variables, allowing updates to be reflected across multiple references.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-pass-by-value-function-parameters.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nlet a = { current: 1 }\nlet b = a\n\nconsole.log(a.current, b.current) // 1, 1\n\na.current = 2\nconsole.log(a.current, b.current) // 2, 2 🎉\n```\n\n----------------------------------------\n\nTITLE: Illustrating Minified React Component Names in JavaScript\nDESCRIPTION: This code demonstrates how component names are changed after minification, which can affect performance profiling readability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/profile-a-react-app-for-performance.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction a() {\n\treturn <div>Awesome</div>\n}\nconsole.log(a.name) // <-- logs \"a\"\n\nclass b extends React.Component {\n\trender() {\n\t\treturn <div>Less Awesome</div>\n\t}\n}\nconsole.log(b.name) // <-- logs \"b\"\n```\n\n----------------------------------------\n\nTITLE: Custom Expect Testing Implementation\nDESCRIPTION: Creates a custom expect function for assertions, similar to modern testing frameworks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst { sum, subtract } = require('./math')\n\nlet result, expected\n\nresult = sum(3, 7)\nexpected = 10\nexpect(result).toBe(expected)\n\nresult = subtract(7, 3)\nexpected = 4\nexpect(result).toBe(expected)\n\nfunction expect(actual) {\n\treturn {\n\t\ttoBe(expected) {\n\t\t\tif (actual !== expected) {\n\t\t\t\tthrow new Error(`${actual} is not equal to ${expected}`)\n\t\t\t}\n\t\t},\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Using snapshot-diff for React Component Comparison\nDESCRIPTION: Demonstrates how to use snapshot-diff to compare two states of a React component and generate a diff-style snapshot that shows only the changes between the states.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/effective-snapshot-testing.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst React = require('react')\nconst { toMatchDiffSnapshot } = require('snapshot-diff')\nconst Component = require('./Component')\n\nexpect.extend({ toMatchDiffSnapshot })\n\ntest('snapshot difference between 2 React components state', () => {\n\texpect(<Component test=\"say\" />).toMatchDiffSnapshot(\n\t\t<Component test=\"my name\" />,\n\t)\n})\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with Local Storage\nDESCRIPTION: Testing the Counter component with localStorage integration using React Testing Library, ensuring the component reads from and updates localStorage correctly.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Counter from '../counter'\n\nafterEach(() => {\n\twindow.localStorage.removeItem('count')\n})\n\ntest('counter increments the count', () => {\n\trender(<Counter />)\n\tconst button = screen.getByRole('button')\n\texpect(button).toHaveTextContent('0')\n\tuserEvent.click(button)\n\texpect(button).toHaveTextContent('1')\n})\n\ntest('reads and updates localStorage', () => {\n\twindow.localStorage.setItem('count', 3)\n\trender(<Counter />)\n\tconst button = screen.getByRole('button')\n\texpect(button).toHaveTextContent('3')\n\tuserEvent.click(button)\n\texpect(button).toHaveTextContent('4')\n\texpect(window.localStorage.getItem('count')).toBe('4')\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Batched Profile Data Sending in React\nDESCRIPTION: Demonstrates how to collect profiling data in a queue and send it in batches every 5 seconds. This approach helps to reduce the frequency of network requests for performance data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-production-performance-monitoring.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nlet queue = []\n\n// sendProfileQueue every 5 seconds\nsetInterval(sendProfileQueue, 5000)\n\nfunction onRenderCallback(\n\tid,\n\tphase,\n\tactualDuration,\n\tbaseDuration,\n\tstartTime,\n\tcommitTime,\n\tinteractions,\n) {\n\tqueue.push({\n\t\tid,\n\t\tphase,\n\t\tactualDuration,\n\t\tbaseDuration,\n\t\tstartTime,\n\t\tcommitTime,\n\t\tinteractions,\n\t})\n}\n\nfunction sendProfileQueue() {\n\tif (!queue.length) {\n\t\treturn Promise.resolve()\n\t}\n\tconst queueToSend = [...queue]\n\tqueue = []\n\t// here's where we'd actually make the server call to send the queueToSend\n\t// data to our backend...\n\tconsole.info('sending profile queue', queueToSend)\n\treturn Promise.resolve()\n}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Module Import Example\nDESCRIPTION: Demonstrates dynamic importing of modules using import() function with promise handling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// script-src.js\nimport { appendDiv } from './append-div.js'\n\nappendDiv('Hello from external script')\n\nimport('./async-script.js').then(\n\t(moduleExports) => {\n\t\tmoduleExports.go()\n\t},\n\t(error) => {\n\t\tconsole.error('there was an error loading the script')\n\t\tthrow error\n\t},\n)\n```\n\n----------------------------------------\n\nTITLE: Route-specific CSS styling example\nDESCRIPTION: A CSS example showing how developers traditionally namespace styles to prevent conflicts between pages, by prefixing selectors with a page-specific class name.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-remix-makes-css-clashes-predictable.mdx#2025-04-12_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n.about-page h1 {\n\tcolor: blue;\n}\n```\n\n----------------------------------------\n\nTITLE: Async React Component with Fetch\nDESCRIPTION: Implementation of the Greeting component with asynchronous data fetching, demonstrating the basic structure before adding tracing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tracing-user-interactions-with-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Greeting() {\n\tconst [greeting, setGreeting] = React.useState('')\n\n\t// please don't judge me, I'm leaving out loading and error states and cancelation\n\t// to simplify this example!\n\tconst [name, setName] = React.useState('')\n\n\tReact.useEffect(() => {\n\t\tif (!name) {\n\t\t\treturn\n\t\t}\n\t\tconst onSuccess = (newGreeting) => setGreeting(newGreeting)\n\t\tfetchGreeting(name).then(onSuccess)\n\t}, [name])\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tsetName(event.target.elements.name.value)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<label htmlFor=\"name\">Name:</label>\n\t\t\t\t<input id=\"name\" />\n\t\t\t</form>\n\t\t\t<div>{greeting}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating DOM Elements with Vanilla JavaScript\nDESCRIPTION: This HTML snippet demonstrates how to create and manipulate DOM elements using vanilla JavaScript, without React. It creates a div element, sets its content and class, and appends it to the root element.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script type=\"module\">\n\t\t\tconst rootElement = document.getElementById('root')\n\t\t\tconst element = document.createElement('div')\n\t\t\telement.textContent = 'Hello World'\n\t\t\telement.className = 'container'\n\t\t\trootElement.append(element)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Parameter Defaults in React Custom Hooks\nDESCRIPTION: Shows how to use parameter defaults in function declarations, which is particularly useful in React for setting default prop values and in custom hooks for providing default options.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-to-know-for-react.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// add(1)\n// add(1, 2)\nfunction add(a, b = 0) {\n\treturn a + b\n}\n\n// is the same as\nconst add = (a, b = 0) => a + b\n\n// is the same as\nfunction add(a, b) {\n\tb = b === undefined ? 0 : b\n\treturn a + b\n}\n\n// in React:\nfunction useLocalStorageState({\n\tkey,\n\tinitialValue,\n\tserialize = (v) => v,\n\tdeserialize = (v) => v,\n}) {\n\tconst [state, setState] = React.useState(\n\t\t() => deserialize(window.localStorage.getItem(key)) || initialValue,\n\t)\n\n\tconst serializedState = serialize(state)\n\tReact.useEffect(() => {\n\t\twindow.localStorage.setItem(key, serializedState)\n\t}, [key, serializedState])\n\n\treturn [state, setState]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Web Crawler Access with robots.txt\nDESCRIPTION: This robots.txt file sets permissions for search engine crawlers. It allows all user agents to access all pages of the site and indicates the location of the sitemap for improved indexing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/public/robots.txt#2025-04-12_snippet_0\n\nLANGUAGE: robotstxt\nCODE:\n```\nUser-agent: *\nAllow: /\n\nSitemap: https://kentcdodds.com/sitemap.xml\n```\n\n----------------------------------------\n\nTITLE: React.createElement API Signature\nDESCRIPTION: Shows the function signature of React.createElement, explaining its parameters for element type, props, and children.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nfunction createElement(elementType, props, ...children) {}\n```\n\n----------------------------------------\n\nTITLE: Initializing getDisplayName Function with Nested Closure in JavaScript\nDESCRIPTION: This snippet demonstrates a function getDisplayName with a nested closure upperFirstCharacter. It capitalizes the first character of both firstName and lastName.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-avoid-nesting-closures.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getDisplayName({ firstName, lastName }) {\n\tconst upperFirstCharacter = (string) =>\n\t\tstring.slice(0, 1).toUpperCase() + string.slice(1)\n\n\treturn `${upperFirstCharacter(firstName)} ${upperFirstCharacter(lastName)}`\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Error Message for Incorrect Role Query in React Testing Library\nDESCRIPTION: Shows the detailed error message provided when using an incorrect role in a *ByRole query, which includes available roles and DOM structure.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// assuming we've got this DOM structure to work with\n// <button><span>Hello</span> <span>World</span></button>\nscreen.getByRole('blah')\n```\n\n----------------------------------------\n\nTITLE: Demonstrating React Performance Optimization\nDESCRIPTION: This CodeSandbox example demonstrates a slow React app and its optimized version. It showcases how to improve performance in a contrived scenario, highlighting the difference between optimized and unoptimized code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/optimize-react-re-renders.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nhttps://codesandbox.io/s/react-codesandbox-qtdob\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Image Components in JSX\nDESCRIPTION: This code snippet demonstrates the use of a custom Themed component to conditionally render dark and light versions of an image. It utilizes the BlogImage component to display images from Cloudinary with specific props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/remix-the-yang-to-react-s-yin.mdx#2025-04-12_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/backend-for-frontend-dark\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/backend-for-frontend-dark\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Similar to the diagrams before with the addition of a \"Backend for frontend\" row that shows Remix spanning over the client and network boundary into the Server and an arrow pointing to \"Rails/PHP/Java/.Net\"',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n\tlight={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/backend-for-frontend-light\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/backend-for-frontend-light\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Similar to the diagrams before with the addition of a \"Backend for frontend\" row that shows Remix spanning over the client and network boundary into the Server and an arrow pointing to \"Rails/PHP/Java/.Net\"',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Infinite Loop Example in JavaScript\nDESCRIPTION: A demonstration of how an infinite loop blocks the main JavaScript thread, preventing user interaction with the webpage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/speed-up-your-app-with-web-workers.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nwhile (true) {}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic Polyfill for Array.prototype.includes in JavaScript\nDESCRIPTION: This snippet shows a simplified polyfill implementation for the Array.prototype.includes method. It demonstrates how polyfills can add missing functionality to older JavaScript environments.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-a-polyfill.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nif (!Array.prototype.includes) {\n\tArray.prototype.includes = function includes(searchElement) {\n\t\treturn this.indexOf(searchElement) !== -1\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Development Entry Point with Babel Registration\nDESCRIPTION: The development entry script that registers Babel for on-the-fly compilation and then requires the source code. This allows using modern JavaScript features during development without a separate build step.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nrequire('@babel/register')\nrequire('./src')\n```\n\n----------------------------------------\n\nTITLE: Adding Babel Script to React Setup\nDESCRIPTION: Initial HTML setup showing the addition of Babel compiler script while still using React.createElement syntax. Includes React, ReactDOM, and Babel CDN imports.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<body>\n\t\t<div id=\"root\"></div>\n\t\t<script src=\"https://unpkg.com/react@16.13.1/umd/react.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/react-dom@16.13.1/umd/react-dom.development.js\"></script>\n\t\t<script src=\"https://unpkg.com/@babel/standalone@7.8.3/babel.js\"></script>\n\t\t<script type=\"module\">\n\t\t\tconst rootElement = document.getElementById('root')\n\t\t\tconst element = React.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'container' },\n\t\t\t\t'Hello World',\n\t\t\t)\n\t\t\tReactDOM.render(element, rootElement)\n\t\t</script>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Array Method Chaining Implementation\nDESCRIPTION: Uses chained array methods (map, filter, map) to process file paths and generate move commands. Takes a list of files from find command output, processes them, and generates shell commands for moving files.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/array-reduce-vs-chaining-vs-for-loop.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst lines = execSync(`find \"${searchPath}\" -type f`).toString().split('\\n')\n\nconst commands = lines\n\t.map((f) => f.trim())\n\t.filter(Boolean)\n\t.map((file) => {\n\t\tconst destFile = getDestFile(file)\n\t\tconst destFileDir = path.dirname(destFile)\n\t\treturn `mkdir -p \"${destFileDir}\" && mv \"${file}\" \"${destFile}\"`\n\t})\n\ncommands.forEach((command) => execSync(command))\n```\n\n----------------------------------------\n\nTITLE: Optimizing Derived State with useMemo in React\nDESCRIPTION: Example of using useMemo hook to memoize computationally expensive derived state calculations and prevent unnecessary recalculations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst nextValue = React.useMemo(() => calculateNextValue(squares), [squares])\n\tconst winner = React.useMemo(() => calculateWinner(squares), [squares])\n\tconst status = React.useMemo(\n\t\t() => calculateStatus(winner, squares, nextValue),\n\t\t[winner, squares, nextValue],\n\t)\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Glamorous Pseudoclasses Example\nDESCRIPTION: Shows how to implement hover effects using glamorous pseudoclasses.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nconst MyLink = glamorous.a({\n\t':hover': {\n\t\tcolor: 'red',\n\t},\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Generator Functions in TypeScript\nDESCRIPTION: Shows a basic generator function implementation in TypeScript that yields incremental values. The example includes the iterator usage pattern with next() method calls.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nfunction* generator(start: number) {\n\tyield start + 1\n\tyield start + 2\n}\n\nvar iterator = generator(0)\nconsole.log(iterator.next()) // { value: 1, done: false }\nconsole.log(iterator.next()) // { value: 2, done: false }\nconsole.log(iterator.next()) // { value: undefined, done: true }\n```\n\n----------------------------------------\n\nTITLE: Initial useState Implementation with useReducer\nDESCRIPTION: Starting point for implementing useState with useReducer, with empty reducer function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = () => {}\n\nfunction useState() {\n\treturn React.useReducer(useStateReducer)\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Context Consumer Without Provider\nDESCRIPTION: Shows an example of using useContext without a provider, which would result in an error because there's no default value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-use-react-context-effectively.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction CountDisplay() {\n\tconst { count } = React.useContext(CountContext)\n\treturn <div>{count}</div>\n}\n\nReactDOM.render(<CountDisplay />, document.getElementById('⚛️'))\n```\n\n----------------------------------------\n\nTITLE: Defining Frontmatter in Markdown for Blog Post\nDESCRIPTION: This snippet defines the frontmatter for the blog post, including title, date, description, categories, metadata, and banner information. It sets up the structure and metadata for the blog post content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/favor-progress-over-pride-in-open-source.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Favor Progress Over Pride in Open Source\ndate: 2020-08-24\ndescription:\n  How I deprecated my most popular open source project in favor of a better\n  library\ncategories:\n  - open source\nmeta:\n  keywords:\n    - javascript\n    - css-in-js\n    - glamorous\n    - open source\n    - oss\nbannerCloudinaryId: kentcdodds.com/content/blog/favor-progress-over-pride-in-open-source/banner\nbannerCredit: Photo by [Morning Brew](https://unsplash.com/photos/X8-ogEgk338)\n---\n```\n\n----------------------------------------\n\nTITLE: LiteFS Error Recovery Commands\nDESCRIPTION: Commands for recovering from LiteFS checksum errors by scaling down to a single region, deleting the database, and importing a backup.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nfly scale count 1\n```\n\n----------------------------------------\n\nTITLE: Simplified Derived State Calculation in React Board Component\nDESCRIPTION: Improved approach showing direct calculation of derived values without state management, leading to simpler and more maintainable code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nfunction Board({ squares, onSelectSquare }) {\n\tconst nextValue = calculateNextValue(squares)\n\tconst winner = calculateWinner(squares)\n\tconst status = calculateStatus(squares)\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Math Module in JavaScript\nDESCRIPTION: Defines a simple math module with sum and subtract functions that will be used for testing examples.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst sum = (a, b) => a + b\nconst subtract = (a, b) => a - b\n\nmodule.exports = { sum, subtract }\n```\n\n----------------------------------------\n\nTITLE: Testing with Node's Assert Module\nDESCRIPTION: Demonstrates using Node's built-in assert module for testing the math functions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-test.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst assert = require('assert')\nconst { sum, subtract } = require('./math')\n\nlet result, expected\n\nresult = sum(3, 7)\nexpected = 10\nassert.strictEqual(result, expected)\n\nresult = subtract(7, 3)\nexpected = 4\nassert.strictEqual(result, expected)\n```\n\n----------------------------------------\n\nTITLE: Implementing Client Entry Point\nDESCRIPTION: Client-side entry point configuration for hydrating the React application in the browser.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { RemixBrowser } from '@remix-run/react'\nimport { hydrateRoot } from 'react-dom/client'\n\nhydrateRoot(document, <RemixBrowser />)\n```\n\n----------------------------------------\n\nTITLE: Running Automated Tests Commands\nDESCRIPTION: Commands for running both Jest-based unit/component tests and Playwright-based E2E tests in different modes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\n# run the unit and component tests with jest via:\nnpm run test\n\n# run the Playwright tests in dev mode:\nnpm run test:e2e:dev\n\n# run the Playwright tests in headless mode:\nnpm run test:e2e:run\n```\n\n----------------------------------------\n\nTITLE: Deploying Firebase Functions Locally\nDESCRIPTION: Command to deploy Firebase functions from the local environment after enabling billing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\nfirebase deploy\n```\n\n----------------------------------------\n\nTITLE: Snapshot Example for Babel Plugin Testing\nDESCRIPTION: An example of using snapshots to test a Babel plugin with babel-plugin-tester. The snapshot shows the input code and transformed output side-by-side.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/effective-snapshot-testing.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexports[`importAll.sync uses static imports 1`] = `\n\nimport importAll from 'import-all.macro'\n\nconst a = importAll.sync('./files/*.js')\n\n      ↓ ↓ ↓ ↓ ↓ ↓\n\nimport * as _filesAJs from './files/a.js'\nimport * as _filesBJs from './files/b.js'\nimport * as _filesCJs from './files/c.js'\nimport * as _filesDJs from './files/d.js'\n\nconst a = {\n  './files/a.js': _filesAJs,\n  './files/b.js': _filesBJs,\n  './files/c.js': _filesCJs,\n  './files/d.js': _filesDJs,\n}\n`\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Monkey-Patching Mock in JavaScript Test\nDESCRIPTION: This test uses monkey-patching to mock the getWinner function, allowing for more specific assertions about the winner of the thumb war game.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utils from '#app/utils'\n\ntest('returns winner', () => {\n\tconst originalGetWinner = utils.getWinner\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = (p1, p2) => p2\n\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\n\t// eslint-disable-next-line import/namespace\n\tutils.getWinner = originalGetWinner\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Jest Module Mock with Direct Mock Function\nDESCRIPTION: Example showing how to mock a module using jest.mock() with an inline implementation that returns a mocked getWinner function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/but-really-what-is-a-javascript-mock.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport thumbWar from '../thumb-war'\nimport * as utilsMock from '#app/utils'\n\njest.mock('#app/utils', () => {\n\treturn {\n\t\tgetWinner: jest.fn((p1, p2) => p2),\n\t}\n})\n\ntest('returns winner', () => {\n\tconst winner = thumbWar('Ken Wheeler', 'Kent C. Dodds')\n\texpect(winner).toBe('Kent C. Dodds')\n\texpect(utilsMock.getWinner).toHaveBeenCalledTimes(2)\n\tutilsMock.getWinner.mock.calls.forEach((args) => {\n\t\texpect(args).toEqual(['Ken Wheeler', 'Kent C. Dodds'])\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: For...of Loop Implementation\nDESCRIPTION: Modern for...of loop implementation for processing file paths and generating move commands. Provides a more concise and readable approach compared to traditional for loop.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/array-reduce-vs-chaining-vs-for-loop.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst commands = []\nfor (const line of lines) {\n\tconst file = line.trim()\n\tif (!file) continue\n\n\tconst destFile = getDestFile(file)\n\tconst destFileDir = path.dirname(destFile)\n\tcommands.push(`mkdir -p \"${destFileDir}\" && mv \"${file}\" \"${destFile}\"`)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Render Props for Row Rendering in React Virtualized\nDESCRIPTION: Demonstrates a use case where render props remain useful even with hooks, showing how react-virtualized uses a rowRenderer prop for inverting control of row rendering to the user.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<List\n\t// ... some props\n\trowRenderer={({ key, index, style }) => (\n\t\t<div\n\t\t// ... some props\n\t\t/>\n\t)}\n/>\n```\n\n----------------------------------------\n\nTITLE: Implementing Math Route Controllers\nDESCRIPTION: Defines mathematical operation routes with add and subtract functionality. Includes controller functions that process query parameters and return calculated results.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport express from 'express'\n\n// A function to get the routes.\n// That way all the route definitions are in one place which I like.\n// This is the only thing that's exported\nfunction getMathRoutes() {\n\tconst router = express.Router()\n\trouter.get('/add', add)\n\trouter.get('/subtract', subtract)\n\treturn router\n}\n\n// all the controller and utility functions here:\nasync function add(req, res) {\n\tconst sum = Number(req.query.a) + Number(req.query.c)\n\tres.send(sum.toString())\n}\n\nasync function subtract(req, res) {\n\tconst difference = Number(req.query.a) - Number(req.query.b)\n\tres.send(difference.toString())\n}\n\nexport { getMathRoutes }\n```\n\n----------------------------------------\n\nTITLE: Defining Operator Union Type for Calculator in TypeScript\nDESCRIPTION: This snippet introduces a union type for operators to maintain type safety, but requires updating the type definition when adding new operators.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\ntype OperationFn = (left: number, right: number) => number\ntype Operator = '+' | '-' | '/' | '*'\nconst operations: Record<Operator, OperationFn> = {\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n}\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\n```\n\n----------------------------------------\n\nTITLE: Git Setup for Repository Forking\nDESCRIPTION: Command sequence for setting up a properly configured fork of the repository, ensuring the local main branch tracks the upstream repository.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ngit remote add upstream https://github.com/kentcdodds/kentcdodds.com.git\ngit fetch upstream\ngit branch --set-upstream-to=upstream/main main\n```\n\n----------------------------------------\n\nTITLE: Traditional Element Selection Using QuerySelector\nDESCRIPTION: Example of selecting form elements using traditional querySelector methods, which can be brittle to UI changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst usernameField = rootNode.querySelector('.username-field')\nconst passwordField = rootNode.querySelector('.password-field')\nconst submitButton = rootNode.querySelector('.btn')\n```\n\n----------------------------------------\n\nTITLE: Rendering Simple Callout in Markdown\nDESCRIPTION: This snippet shows another callout block in markdown, similar to the previous one but without additional attributes. It's used to emphasize a key point about learning from open source contributions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-getting-into-open-source-has-been-awesome-for-me.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\tIt's amazing what happens when you regularly read code written by many\n\tdifferent people when many different people read your own code.\n\tLearning happens.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Capturing Fly.io Application Logs with Timestamp\nDESCRIPTION: A bash command to save application logs from Fly.io to a local file with a timestamp in the filename. This was used to capture logs for later analysis when debugging memory spikes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fixing-a-memory-leak-in-a-production-node-js-app.mdx#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nfly logs -a kcd > ~/Desktop/locker/logs/kcd.$(date +\"%Y%m%d%H%M\").log\n```\n\n----------------------------------------\n\nTITLE: Typing the JSON response in TypeScript\nDESCRIPTION: This snippet demonstrates how to type the JSON response from the API, using a custom JSONResponse type and the Omit utility type.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype JSONResponse = {\n\tdata?: {\n\t\tpokemon: Omit<PokemonData, 'fetchedAt'>\n\t}\n\terrors?: Array<{ message: string }>\n}\nconst { data, errors }: JSONResponse = await response.json()\n```\n\n----------------------------------------\n\nTITLE: TypeScript Satisfies Operator Usage\nDESCRIPTION: Demonstrates the new satisfies operator introduced in TypeScript 4.9.0 for type checking object literals.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_9\n\nLANGUAGE: ts\nCODE:\n```\ntype OperationFn = (left: number, right: number) => number\n\nconst operations = {\n\t'+': (left, right) => left + right,\n\t'-': (left, right) => left - right,\n\t'*': (left, right) => left * right,\n\t'/': (left, right) => left / right,\n} satisfies Record<string, OperationFn>\n```\n\n----------------------------------------\n\nTITLE: React Toggle Component with Basic Prop Drilling\nDESCRIPTION: Refactored toggle component split into two components demonstrating basic prop drilling by passing state and handler to child component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/prop-drilling.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [on, setOn] = React.useState(false)\n\tconst toggle = () => setOn((o) => !o)\n\treturn <Switch on={on} onToggle={toggle} />\n}\n\nfunction Switch({ on, onToggle }) {\n\treturn (\n\t\t<div>\n\t\t\t<div>The button is {on ? 'on' : 'off'}</div>\n\t\t\t<button onClick={onToggle}>Toggle</button>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Hook Effect With Proper Dependencies\nDESCRIPTION: Corrected version of the DogInfo component where dogId is properly included in the dependencies array, ensuring the effect reruns when the prop changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DogInfo({ dogId }) {\n\tconst [dog, setDog] = useState(null)\n\t// imagine you also have loading/error states. omitting to save space...\n\n\tuseEffect(() => {\n\t\tgetDog(dogId).then((d) => setDog(d))\n\t}, [dogId]) // ✅\n\n\treturn <div>{/* render the dog info here */}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Firebase Token for CI\nDESCRIPTION: Command to generate a Firebase token for use in continuous integration environments.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nfirebase login:ci\n```\n\n----------------------------------------\n\nTITLE: Installing Experimental React Versions for Concurrent Mode\nDESCRIPTION: This snippet shows how to install the experimental versions of React and React DOM using npm or yarn. These versions are required to enable Concurrent Mode.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-enable-react-concurrent-mode.mdx#2025-04-12_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install react@experimental react-dom@experimental\n# or: yarn add react@experimental react-dom@experimental\n```\n\n----------------------------------------\n\nTITLE: Implementing Module Pattern in JavaScript\nDESCRIPTION: Demonstrates the Revealing Module Pattern implementation for creating a person object with private state and public methods. Shows how to handle encapsulation without using classes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getPerson(initialName) {\n\tlet name = initialName\n\tconst person = {\n\t\tsetName(strName) {\n\t\t\tname = strName\n\t\t},\n\t\tgreeting: 'Hey there!',\n\t\tgetName() {\n\t\t\treturn getPrefixedName('Name')\n\t\t},\n\t\tgetGreetingCallback() {\n\t\t\tconst { greeting } = person\n\t\t\treturn (subject) => `${greeting} ${subject}, I'm ${name}`\n\t\t},\n\t}\n\tfunction getPrefixedName(prefix) {\n\t\treturn `${prefix}: ${name}`\n\t}\n\treturn person\n}\n```\n\n----------------------------------------\n\nTITLE: Glamorous CSS Grid Example\nDESCRIPTION: Shows how to implement CSS Grid layouts using glamorous with @supports queries.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nconst MyGrid = glamorous.div({\n\tmargin: 'auto',\n\tbackgroundColor: '#fff',\n\tcolor: '#444',\n\t'[@supports](http://twitter.com/supports \"Twitter profile for @supports\") (display: grid)':\n\t\t{\n\t\t\tdisplay: 'grid',\n\t\t\tgridGap: 10,\n\t\t\tgridTemplateAreas: `  \n      \"....... header header\"  \n      \"sidebar content content\"  \n      \"footer  footer  footer\"  \n    `,\n\t\t},\n})\n\nconst Box = glamorous.div({\n\tbackgroundColor: '#444',\n\tcolor: '#fff',\n\tborderRadius: 5,\n\tpadding: 10,\n\tfontSize: '150%',\n})\n\nconst HeaderFooter = glamorous(Box)({\n\tbackgroundColor: '#999',\n})\n\nfunction App() {\n\treturn (\n\t\t<MyGrid>\n\t\t\t<HeaderFooter css={{ gridArea: 'header' }}>Header</HeaderFooter>\n\t\t\t<Box css={{ gridArea: 'sidebar' }}>Sidebar</Box>\n\t\t\t<Box css={{ gridArea: 'content' }}>\n\t\t\t\tContent\n\t\t\t\t<br />\n\t\t\t\tMore content than we had before so this column is now quite tall.\n\t\t\t</Box>\n\t\t\t<HeaderFooter css={{ gridArea: 'footer' }}>Footer</HeaderFooter>\n\t\t</MyGrid>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Traditional For Loop Implementation\nDESCRIPTION: Classic for loop approach to process file paths and generate move commands. Uses index-based iteration to process the array of file paths.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/array-reduce-vs-chaining-vs-for-loop.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst commands = []\nfor (let index = 0; index < lines.length; index++) {\n\tconst line = lines[index]\n\tconst file = line.trim()\n\tif (file) {\n\t\tconst destFile = getDestFile(file)\n\t\tconst destFileDir = path.dirname(destFile)\n\t\tcommands.push(`mkdir -p \"${destFileDir}\" && mv \"${file}\" \"${destFile}\"`)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Testing React Component with API Client Mock\nDESCRIPTION: Example of testing a checkout component by mocking the API client directly. Shows potential issues with this approach including reduced confidence in integration testing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-mocking-fetch.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/checkout.js\nimport * as React from 'react'\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport { client } from '#app/utils/api-client'\n\njest.mock('#app/utils/api-client')\n\ntest('clicking \"confirm\" submits payment', async () => {\n\tconst shoppingCart = buildShoppingCart()\n\trender(<Checkout shoppingCart={shoppingCart} />)\n\n\tclient.mockResolvedValueOnce(() => ({ success: true }))\n\n\tuserEvent.click(screen.getByRole('button', { name: /confirm/i }))\n\n\texpect(client).toHaveBeenCalledWith('checkout', { data: shoppingCart })\n\texpect(client).toHaveBeenCalledTimes(1)\n\texpect(await screen.findByText(/success/i)).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Iterator Return Type in TypeScript\nDESCRIPTION: Defines the return type of the next() method for a generator iterator, showing the structure with value and done properties. This type represents what's returned when calling next() on a generator.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\ntype IteratorNextType = {\n\tvalue: number | void\n\tdone: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Basic TypeScript Function Type Patterns\nDESCRIPTION: Core patterns for defining function types in TypeScript, showing the difference between using => for function types and : for return types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Simple type for a function, use =>\ntype FnType = (arg: ArgType) => ReturnType\n\n// Every other time, use :\ntype FnAsObjType = {\n\t(arg: ArgType): ReturnType\n}\ninterface InterfaceWithFn {\n\tfn(arg: ArgType): ReturnType\n}\n\nconst fnImplementation = (arg: ArgType): ReturnType => {\n\t/* implementation */\n}\n```\n\n----------------------------------------\n\nTITLE: Class Component Render Method Example\nDESCRIPTION: Illustrates how function definitions in render phase have always been part of React, even before hooks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nclass FavoriteNumbers extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t{this.props.favoriteNumbers.map((number) => (\n\t\t\t\t\t<li key={number}>{number}</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Improving Code Readability with Prettier in JavaScript\nDESCRIPTION: This example shows how Prettier can automatically format code to make the order of operations more clear. It adds parentheses to clarify the precedence of logical operators.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/eliminate-an-entire-category-of-bugs-with-a-few-simple-tools.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst a = false\nconst b = false\nconst c = true\nconst d = a && b || c\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst a = false\nconst b = false\nconst c = true\nconst d = (a && b) || c\n```\n\n----------------------------------------\n\nTITLE: Scaling Down to Single Region Commands\nDESCRIPTION: Commands for listing volumes, deleting unneeded volumes, and scaling down to a single region when disabling LiteFS.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nfly vol list\n# grab the ID for all but the primary you want to keep\nfly vol delete {id}\nfly scale count 1\n```\n\n----------------------------------------\n\nTITLE: Specialized Filter Function\nDESCRIPTION: Example of building a specialized filter function using the inverted control pattern for filtering animals by leg count.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfunction filterByLegCount(array, legCount) {\n\treturn filter(array, (animal) => animal.legs === legCount)\n}\n```\n\n----------------------------------------\n\nTITLE: Failed Type Guarding with Separate Function in TypeScript\nDESCRIPTION: Demonstrates how extracting type guard logic into a separate function breaks TypeScript's ability to track type narrowing. The compiler doesn't recognize that the property is guaranteed to exist after the function call.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\ntype User = {\n\tname: string\n\tdisplayName: string | null\n}\n\nfunction assertDisplayName(user: User) {\n\tif (!user.displayName) throw new Error('Oh no, user has no displayName')\n}\n\nfunction logUserDisplayName(user: User) {\n\tassertDisplayName(user)\n\tconsole.log(user.displayName.toUpperCase())\n}\n```\n\n----------------------------------------\n\nTITLE: Glamorous Animations Example\nDESCRIPTION: Demonstrates creating and using keyframe animations with glamorous and glamor.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { css } from 'glamor'\n\nconst bounce = css.keyframes({\n\t'0%': { transform: 'scale(1)', opacity: 0.3 },\n\t'55%': { transform: 'scale(1.2)', opacity: 1 },\n\t'100%': { transform: 'scale(1)', opacity: 0.3 },\n})\n\nconst MyBouncyDiv = glamorous.div({\n\tanimation: `${bounce} 1s infinite`,\n\twidth: 50,\n\theight: 50,\n\tbackgroundColor: 'red',\n})\n```\n\n----------------------------------------\n\nTITLE: Associating Label with Input Using 'aria-labelledby' and 'id' Attributes in HTML\nDESCRIPTION: An alternative method to associate a label with an input using 'aria-labelledby' on the input and 'id' on the label.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_3\n\nLANGUAGE: HTML\nCODE:\n```\n<label id=\"username\">Username</label>\n<input aria-labelledby=\"username\" />\n```\n\n----------------------------------------\n\nTITLE: Highlighting Key Advice with Success Callout in Markdown\nDESCRIPTION: This snippet uses the callout-success block to emphasize the main advice of the article about how to stop being a junior developer.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-being-a-junior.mdx#2025-04-12_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\tWhat do senior developers do in your company? Do that instead of the things\n\tjunior developers do. That's it.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Invalid State Management Attempt\nDESCRIPTION: Shows an incorrect attempt to handle dynamic values by modifying props, demonstrating why state is needed instead.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction AddWithInput(props) {\n\tfunction handleInputChange(event) {\n\t\tconst input = event.target\n\t\tconst newN2 = Number(input.value)\n\t\tprops.n2 = newN2\n\t}\n\treturn (\n\t\t<div>\n\t\t\t{props.n1} +{' '}\n\t\t\t<input type=\"number\" value={props.n2} onChange={handleInputChange} /> ={' '}\n\t\t\t{props.n1 + props.n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Server Entry Point\nDESCRIPTION: Server-side entry point for rendering React components and handling HTTP responses with proper headers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport ReactDOMServer from 'react-dom/server'\nimport { RemixServer } from '@remix-run/react'\n\nexport default function handleRequest(\n\trequest,\n\tresponseStatusCode,\n\tresponseHeaders,\n\tremixContext,\n) {\n\tconst markup = ReactDOMServer.renderToString(\n\t\t<RemixServer context={remixContext} url={request.url} />,\n\t)\n\n\tresponseHeaders.set('Content-Type', 'text/html')\n\n\treturn new Response(`<!DOCTYPE html>${markup}`, {\n\t\tstatus: responseStatusCode,\n\t\theaders: responseHeaders,\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing toggleClass Function with IE8 Support in JavaScript\nDESCRIPTION: A JavaScript function that toggles a class on an HTML element with compatibility for older browsers like IE8. This demonstrates an abstraction that handles classList support differences across browsers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// $(el).toggleClass(className);\n\nfunction toggleClass(el, className) {\n\tif (el.classList) {\n\t\tel.classList.toggle(className)\n\t} else {\n\t\tvar classes = el.className.split(' ')\n\t\tvar existingIndex = -1\n\t\tfor (var i = classes.length; i--; ) {\n\t\t\tif (classes[i] === className) existingIndex = i\n\t\t}\n\n\t\tif (existingIndex >= 0) {\n\t\t\tclasses.splice(existingIndex, 1)\n\t\t} else {\n\t\t\tclasses.push(className)\n\t\t}\n\n\t\tel.className = classes.join(' ')\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Using ESModule Imports in Node.js\nDESCRIPTION: A simple entry point script that demonstrates how to import and use an ESModule in Node.js. Shows top-level await usage with imported module functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-node-js.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// index.js\nimport { getFiles } from './get-files.js'\n\nconsole.log(await getFiles('.'))\n```\n\n----------------------------------------\n\nTITLE: Babel Module Import Comparison\nDESCRIPTION: Shows how Babel's handling of imports changed between versions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// Before Babel change\nimport add from './add'\nconst three = add(1, 2)\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// After Babel change\nimport * as add from './add'\nconst three = add.default(1, 2)\n```\n\n----------------------------------------\n\nTITLE: Component Injection Pattern with Render Props\nDESCRIPTION: Shows an alternative approach using component injection pattern, which provides a cleaner implementation for handling lifecycle hooks with render props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/answers-to-common-questions-about-render-props.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nclass RegularClassComponent extends React.Component {\n\tcomponentDidUpdate() {\n\t\t// here you are :)\n\t\tconsole.log(this.props.whatever)\n\t}\n\trender() {\n\t\treturn <div>{/* your ui */}</div>\n\t}\n}\n\nfunction App() {\n\treturn <CompInjectionComp component={RegularClassComponent} />\n}\n```\n\n----------------------------------------\n\nTITLE: Basic MDX Usage Example with React Component\nDESCRIPTION: Demonstrates how to combine Markdown syntax with imported React components in MDX, showing the fundamental capability of mixing interactive components with regular markdown content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/mdx-deck-slide-decks-powered-by-markdown-and-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nimport InteractiveGraph from './my-d3-graph'\n\n# Checkout this cool graph!\n\n> This is markdown, for real\n\n<InteractiveGraph />\n\n**That's right!** We're rendering a **React Component** in Markdown!\n```\n\n----------------------------------------\n\nTITLE: Custom Array Filter Implementation in JavaScript\nDESCRIPTION: Demonstrates a basic implementation of a filter function that removes null and undefined values from an array, used as an example of when not to apply inversion of control.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nfunction filter(array) {\n\tlet newArray = []\n\tfor (let index = 0; index < array.length; index++) {\n\t\tconst element = array[index]\n\t\tif (element !== null && element !== undefined) {\n\t\t\tnewArray[newArray.length] = element\n\t\t}\n\t}\n\treturn newArray\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Conditional User Greeting in JSX\nDESCRIPTION: This snippet uses the OptionalUser component to conditionally render a personalized greeting for logged-in users or a general message for visitors, encouraging account creation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/teams.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<OptionalUser>\n\t{(maybeUser) =>\n\t\tmaybeUser ? (\n\t\t\t<p>\n\t\t\t\tHey <span className=\"text-team-current\">{maybeUser.firstName}</span>!{' '}\n\t\t\t\tRemember when you signed up for an account and chose your team? Have you\n\t\t\t\twondered what that was all about? Let's talk about it!\n\t\t\t</p>\n\t\t) : (\n\t\t\t<p>\n\t\t\t\tHey Visitor! Did you know you can{' '}\n\t\t\t\t<a href=\"/login\" className=\"underline\">\n\t\t\t\t\tcreate an account\n\t\t\t\t</a>{' '}\n\t\t\t\ton this site? Well you can. This page talks about some reasons you may\n\t\t\t\twant to.\n\t\t\t</p>\n\t\t)\n\t}\n</OptionalUser>\n```\n\n----------------------------------------\n\nTITLE: Example of Unnecessary Commented Code in JavaScript\nDESCRIPTION: Shows a function with unnecessary commented out code that adds confusion and cognitive load to the codebase.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-dont-commit-commented-out-code.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction foo(bar) {\n\tconst baz = bar(false)\n\t// we no longer do this for some good reason\n\t// if (baz === 'foobar') {\n\t// return baz\n\t// } else {\n\t// return bar.foobar()\n\t// }\n\treturn baz\n}\n```\n\n----------------------------------------\n\nTITLE: Combined State and Dispatch Hook Pattern in React\nDESCRIPTION: This code shows an alternative pattern that combines state and dispatch into a single hook call, which some developers prefer for simplicity, though it may sacrifice some performance benefits.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-optimize-your-context-value.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst [state, dispatch] = useCount()\n```\n\n----------------------------------------\n\nTITLE: Loading d3 Library with Version Range Using unpkg\nDESCRIPTION: Demonstrates how to use a version range when loading the d3 library via unpkg. This approach allows for minor version updates while avoiding major breaking changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/unpkg-an-open-source-cdn-for-npm.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<script src=\"https://unpkg.com/d3@^5.5.0\" />\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Blog Image Component in JSX for Remix Error Handling\nDESCRIPTION: This code snippet shows the use of a custom ThemedBlogImage component in JSX to display an image illustrating Remix's nested error handling capabilities. It demonstrates how Remix can render contextual errors without breaking the entire application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<ThemedBlogImage\n\tdarkCloudinaryId=\"kentcdodds.com/content/blog/why-i-love-remix/nested-errors-dark\"\n\tlightCloudinaryId=\"kentcdodds.com/content/blog/why-i-love-remix/nested-errors-light\"\n\timgProps={{\n\t\talt: 'Excalidraw wireframe of a nested user interface with only one part that is broken and the rest is working',\n\t}}\n/>\n```\n\n----------------------------------------\n\nTITLE: Initial Machine Creation Function\nDESCRIPTION: Basic structure of the createMachine function that returns a machine object.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction createMachine(stateMachineDefinition) {\n\tconst machine = {\n\t\t// machine object\n\t}\n\treturn machine\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Available Scripts in paypal-scripts\nDESCRIPTION: A command line output showing all the available scripts in the paypal-scripts tool developed by Kent C. Dodds at PayPal. The tool consolidates various development tasks like building, testing, linting, and more.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2018-in-review.mdx#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nbuild\nclean\ndev\nformat\ngh-pages\nlint\npre-commit\nrelease\nremark\ntest\ntypecheck\nvalidate\n```\n\n----------------------------------------\n\nTITLE: Demonstrating limitations of Array.join() method in JavaScript\nDESCRIPTION: This snippet shows how the simple .join() method falls short when creating human-readable lists from arrays.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(['apple'].join(', ')) // apple\n// looks good\nconsole.log(['apple', 'grape'].join(', ')) // apple, grape\n// nah, I want \"apple and grape\"\nconsole.log(['apple', 'grape', 'pear'].join(', ')) // apple, grape, pear\n// wut?\n```\n\n----------------------------------------\n\nTITLE: Using Toggle Hook in React Component\nDESCRIPTION: Shows how to use the useToggle hook in a React component, simplifying the implementation compared to the render props version.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\tconst { on, toggle } = useToggle()\n\treturn <button onClick={toggle}>{on ? 'on' : 'off'}</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Express Route Handler Testing with AHA Pattern\nDESCRIPTION: Improved version of the Express.js route handler tests using the AHA (Avoid Hasty Abstraction) principle. Shows how thoughtful abstraction can make tests more maintainable and easier to understand.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/aha-testing/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport * as blogPostController from '../blog-post'\n\njest.mock('../../lib/db')\n\nfunction setup(overrides = {}) {\n\tconst req = {\n\t\tlocale: {\n\t\t\tsource: 'default',\n\t\t\tlanguage: 'en',\n\t\t\tregion: 'GB',\n\t\t},\n\t\tuser: {\n\t\t\tguid: '0336397b-e29d-4b63-b94d-7e68a6fa3747',\n\t\t\tisActive: false,\n\t\t\tpicture: 'http://placehold.it/32x32',\n\t\t\tage: 30,\n\t\t\tname: {\n\t\t\t\tfirst: 'Francine',\n\t\t\t\tlast: 'Oconnor',\n\t\t\t},\n\t\t\tcompany: 'ACME',\n\t\t\temail: 'francine.oconnor@ac.me',\n\t\t\tlatitude: 51.507351,\n\t\t\tlongitude: -0.127758,\n\t\t\tfavoriteFruit: 'banana',\n\t\t},\n\t\tbody: {},\n\t\tcookies: {},\n\t\tquery: {},\n\t\tparams: {\n\t\t\tbucket: 'photography',\n\t\t},\n\t\theader(name) {\n\t\t\treturn {\n\t\t\t\tAuthorization: 'Bearer TEST_TOKEN',\n\t\t\t}[name]\n\t\t},\n\t\t...overrides,\n\t}\n\n\tconst res = {\n\t\tclearCookie: jest.fn(),\n\t\tcookie: jest.fn(),\n\t\tend: jest.fn(),\n\t\tlocals: {\n\t\t\tcontent: {},\n\t\t},\n\t\tjson: jest.fn(),\n\t\tsend: jest.fn(),\n\t\tsendStatus: jest.fn(),\n\t\tset: jest.fn(),\n\t}\n\tconst next = jest.fn()\n\n\treturn { req, res, next }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementation Details Testing Anti-pattern\nDESCRIPTION: Shows an example of testing implementation details using Enzyme, demonstrating how not to test React components. This approach is tightly coupled to component internals.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\ntest('setOpenIndex sets the open index state properly', () => {\n\t// using enzyme\n\tconst wrapper = mount(<Accordion items={[]} />)\n\texpect(wrapper.state('openIndex')).toBe(0)\n\twrapper.instance().setOpenIndex(1)\n\texpect(wrapper.state('openIndex')).toBe(1)\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Person Class in JavaScript\nDESCRIPTION: Demonstrates a class-based implementation of a Person object with methods for name management and greeting generation. Shows use of constructor, private properties, and instance methods.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nclass Person {\n\tconstructor(name) {\n\t\tthis._name = name\n\t\tthis.greeting = 'Hey there!'\n\t}\n\tsetName(strName) {\n\t\tthis._name = strName\n\t}\n\tgetName() {\n\t\treturn this._getPrefixedName('Name')\n\t}\n\tgetGreetingCallback() {\n\t\tconst { greeting, _name } = this\n\t\treturn (subject) => `${greeting} ${subject}, I'm ${_name}`\n\t}\n\t_getPrefixedName(prefix) {\n\t\treturn `${prefix}: ${this._name}`\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Slow React Components with Global State\nDESCRIPTION: This code snippet demonstrates a React application with global state causing performance issues. It includes a SlowComponent and a DogName component, both using state managed in the parent App component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/state-colocation-will-make-your-react-app-faster/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction sleep(time) {\n\tconst done = Date.now() + time\n\twhile (done > Date.now()) {\n\t\t// sleep...\n\t}\n}\n\n// imagine that this slow component is actually slow because it's rendering a\n// lot of data (for example).\nfunction SlowComponent({ time, onChange }) {\n\tsleep(time)\n\treturn (\n\t\t<div>\n\t\t\tWow, that was{' '}\n\t\t\t<input\n\t\t\t\tvalue={time}\n\t\t\t\ttype=\"number\"\n\t\t\t\tonChange={(e) => onChange(Number(e.target.value))}\n\t\t\t/>\n\t\t\tms slow\n\t\t</div>\n\t)\n}\n\nfunction DogName({ time, dog, onChange }) {\n\treturn (\n\t\t<div>\n\t\t\t<label htmlFor=\"dog\">Dog Name</label>\n\t\t\t<br />\n\t\t\t<input id=\"dog\" value={dog} onChange={(e) => onChange(e.target.value)} />\n\t\t\t<p>{dog ? `${dog}'s favorite number is ${time}.` : 'enter a dog name'}</p>\n\t\t</div>\n\t)\n}\n\nfunction App() {\n\t// this is \"global state\"\n\tconst [dog, setDog] = React.useState('')\n\tconst [time, setTime] = React.useState(200)\n\treturn (\n\t\t<div>\n\t\t\t<DogName time={time} dog={dog} onChange={setDog} />\n\t\t\t<SlowComponent time={time} onChange={setTime} />\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Simplified useDarkMode Example\nDESCRIPTION: Basic implementation of useDarkMode hook without TypeScript types to demonstrate the core functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/wrapping-react-use-state-with-type-script.mdx#2025-04-12_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction useDarkMode() {\n  const [mode, setMode] = React.useState(() => {\n    // ...\n    return 'light'\n  })\n\n  // ...\n\n  return [mode, setMode]\n}\n\nfunction App() {\n  const [mode, setMode] = useDarkMode()\n  return (\n    <button onClick={() => setMode(mode === 'light' ? 'dark' : 'light')}>\n      Toggle from {mode}\n    </button>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example of Incorrect React Test with Act Warning\nDESCRIPTION: This code demonstrates a problematic React test that triggers an 'act' warning because it doesn't properly wait for asynchronous operations to complete before the test finishes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// 🛑 THIS IS AN EXAMPLE OF WHAT NOT TO DO...\ntest('course shows loading screen', () => {\n\tgetCourseInfo.mockResolvedValueOnce(buildCourse())\n\trender(<Course courseId=\"123\" />)\n\tconst alert = screen.getByRole('alert')\n\texpect(alert).toHaveTextContent(/loading/i)\n})\n```\n\n----------------------------------------\n\nTITLE: WaitFor Test Example\nDESCRIPTION: Demonstrates how Testing Library implements stack trace manipulation in waitFor utility to provide better error messages for asynchronous operations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n● waitFor works\n\n  TestingLibraryElementError: Unable to find an element with the text: /nothing matches this/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    <body />\n\n      2 |\n      3 | test('waitFor has a nice stack trace', async () => {\n    > 4 |   await waitFor(() => {\n        |         ^\n      5 |     screen.getByText(/nothing matches this/)\n      6 |   })\n      7 | })\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:94:27)\n      at Object.<anonymous> (add.test.js:4:9)\n```\n\n----------------------------------------\n\nTITLE: CSS Backdrop Filter for Blur Effect\nDESCRIPTION: CSS property that creates the blur effect on the placeholder image\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_8\n\nLANGUAGE: css\nCODE:\n```\nbackdrop-filter: blur(24px);\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoded Image Data URL\nDESCRIPTION: Base64 encoded data URL representation of the blurred placeholder image\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_6\n\nLANGUAGE: text\nCODE:\n```\ndata:image/webp;base64,UklGRhQBAABXRUJQVlA4IAgBAAAQDQCdASpkAEMAPrFGmko7qyWhsls9U3AWCWkGcA01nlwbK5buwWRoA3koD7+5vLBXAtOMrneG2GT90JyrLz+2XeotIAEq5PL4F0N1qTRIJ7LnMa5Zcre8UaDTMRtFt14eXNoGYkhNSt0REMN2PN4FwAD+7s4jHeyE9BXykzZMxIuwC4FSp408GYxRjoczsMvwZlqrnzr4cuA6X6MspvaoVHUro1XNU1SNxrLKLjhZrJ3GmlyoorlW1L532OP9tbhOeQgFiDwE81g+CH4d16xfOjEGrpus0wYxdunoI7Nokc5fnyoAw8pKJEq6cW3Yp4rqZw9fosV61qnAN+ViAH+WOzoqC6R90AA=\n```\n\n----------------------------------------\n\nTITLE: Removing unnecessary cleanup in React Testing Library\nDESCRIPTION: Shows how to avoid using the deprecated manual cleanup method since it now happens automatically in most testing frameworks. This simplifies the test setup code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nimport { render, screen, cleanup } from '@testing-library/react'\n\nafterEach(cleanup)\n\n// ✅\nimport { render, screen } from '@testing-library/react'\n```\n\n----------------------------------------\n\nTITLE: Testing the arrayify function with falsy values\nDESCRIPTION: Unit test that verifies the arrayify function returns an empty array when called with falsy values (undefined, null, etc.).\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-know-what-to-test.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\ntest('returns an empty array if given a falsy value', () => {\n\texpect(arrayify()).toEqual([])\n})\n```\n\n----------------------------------------\n\nTITLE: Creating a Render Props Wrapper for Toggle Hook in React\nDESCRIPTION: Implements a Toggle component that uses the useToggle hook internally but exposes a render props API, allowing for gradual migration from render props to hooks.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nconst Toggle = ({ children, ...props }) => children(useToggle(props))\n```\n\n----------------------------------------\n\nTITLE: Generating Cloudinary URL for Blurred Image Placeholder\nDESCRIPTION: URL configuration for Cloudinary to generate a small, blurred version of an image that will be used as a placeholder\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_5\n\nLANGUAGE: text\nCODE:\n```\nhttps://res.cloudinary.com/kentcdodds-com/image/upload/w_100,q_auto,f_webp,e_blur:1000/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop\n```\n\n----------------------------------------\n\nTITLE: GitHub Repository Examples\nDESCRIPTION: References to early open source projects and contributions, including Java-Helper, My-Components, and MassMessenger repositories.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2010s-decade-in-review.mdx#2025-04-12_snippet_0\n\nLANGUAGE: url\nCODE:\n```\nhttps://github.com/kentcdodds/Java-Helper\nhttps://github.com/kentcdodds/My-Components\nhttps://github.com/kentcdodds/MassMessenger\n```\n\n----------------------------------------\n\nTITLE: Line-Column Macro Usage Example - JavaScript\nDESCRIPTION: Example showing how the line-column macro is used and its output after transformation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-impossible-states-impossible.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconsole.log(`we're at ${3}:${32}`)\nconsole.log(`and now we're at ${4}:${40}`)\n```\n\n----------------------------------------\n\nTITLE: Writing Nested Tests for React Login Component\nDESCRIPTION: This code snippet demonstrates a heavily nested test suite for the Login component, using Jest and React Testing Library. It showcases the problems with over-abstraction and excessive nesting in tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/login.js\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\ndescribe('Login', () => {\n\tlet utils,\n\t\thandleSubmit,\n\t\tuser,\n\t\tchangeUsernameInput,\n\t\tchangePasswordInput,\n\t\tclickSubmit\n\n\tbeforeEach(() => {\n\t\thandleSubmit = jest.fn()\n\t\tuser = { username: 'michelle', password: 'smith' }\n\t\tutils = render(<Login onSubmit={handleSubmit} />)\n\t\tchangeUsernameInput = (value) =>\n\t\t\tuserEvent.type(utils.getByLabelText(/username/i), value)\n\t\tchangePasswordInput = (value) =>\n\t\t\tuserEvent.type(utils.getByLabelText(/password/i), value)\n\t\tclickSubmit = () => userEvent.click(utils.getByText(/submit/i))\n\t})\n\n\tdescribe('when username and password is provided', () => {\n\t\tbeforeEach(() => {\n\t\t\tchangeUsernameInput(user.username)\n\t\t\tchangePasswordInput(user.password)\n\t\t})\n\n\t\tdescribe('when the submit button is clicked', () => {\n\t\t\tbeforeEach(() => {\n\t\t\t\tclickSubmit()\n\t\t\t})\n\n\t\t\tit('should call onSubmit with the username and password', () => {\n\t\t\t\texpect(handleSubmit).toHaveBeenCalledTimes(1)\n\t\t\t\texpect(handleSubmit).toHaveBeenCalledWith(user)\n\t\t\t})\n\t\t})\n\t})\n\n\tdescribe('when the password is not provided', () => {\n\t\tbeforeEach(() => {\n\t\t\tchangeUsernameInput(user.username)\n\t\t})\n\n\t\tdescribe('when the submit button is clicked', () => {\n\t\t\tlet errorMessage\n\t\t\tbeforeEach(() => {\n\t\t\t\tclickSubmit()\n\t\t\t\terrorMessage = utils.getByRole('alert')\n\t\t\t})\n\n\t\t\tit('should show an error message', () => {\n\t\t\t\texpect(errorMessage).toHaveTextContent(/password is required/i)\n\t\t\t})\n\t\t})\n\t})\n\n\tdescribe('when the username is not provided', () => {\n\t\tbeforeEach(() => {\n\t\t\tchangePasswordInput(user.password)\n\t\t})\n\n\t\tdescribe('when the submit button is clicked', () => {\n\t\t\tlet errorMessage\n\t\t\tbeforeEach(() => {\n\t\t\t\tclickSubmit()\n\t\t\t\terrorMessage = utils.getByRole('alert')\n\t\t\t})\n\n\t\t\tit('should show an error message', () => {\n\t\t\t\texpect(errorMessage).toHaveTextContent(/username is required/i)\n\t\t\t})\n\t\t})\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Optimized Conditional Computation in React\nDESCRIPTION: Improved version of the FavoriteNumber component that only calculates numberWarning when necessary based on conditions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nfunction FavoriteNumber() {\n\tconst [name, setName] = React.useState('')\n\tconst [number, setNumber] = React.useState(0)\n\tconst numberIsTooHigh = number > 10\n\tconst numberIsTooLow = number < 0\n\tconst numberWarning =\n\t\tnumberIsTooHigh || numberIsTooLow ? getNumberWarning(number) : null\n\treturn (\n\t\t<div>\n\t\t\t<label>\n\t\t\t\tYour name: <input onChange={(e) => setName(e.target.value)} />\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\tYour favorite number:{' '}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tonChange={(e) => setNumber(Number(e.target.value))}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div>\n\t\t\t\t{name\n\t\t\t\t\t? `${name}'s favorite number is ${number}`\n\t\t\t\t\t: 'Please type your name'}\n\t\t\t</div>\n\t\t\t<div>{numberIsTooHigh ? numberWarning : null}</div>\n\t\t\t<div>{numberIsTooLow ? numberWarning : null}</div>\n\t\t</div>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Initializing and Using react-i18n Module in JavaScript\nDESCRIPTION: Demonstrates the initialization and usage of a custom react-i18n module with a 'sorta-curried' API for accessing nested content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rendering-a-function-with-react.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport getContent, { init } from 'react-i18n'\ninit({\n\tcontent: {\n\t\tpages: {\n\t\t\thome: {\n\t\t\t\tnav: {\n\t\t\t\t\tabout: 'About',\n\t\t\t\t\tcontactUs: 'Contact us',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n})\n\n// here's the sorta-curried part...\n// These all result in exactly the same thing: \"About\"\ngetContent('pages.home.nav.about')\ngetContent('pages')('home')('nav')('about')\ngetContent('pages.home')('nav.about')\ngetContent('pages')('home.nav')('about')\n// etc...\n```\n\n----------------------------------------\n\nTITLE: Implementing Root Component\nDESCRIPTION: Root component implementation with a simple counter using React hooks, demonstrating server-side HTML rendering.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport * as React from 'react'\n\nexport default function App() {\n\tconst [count, setCount] = React.useState(0)\n\treturn (\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<title>My First Remix App</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<p>This is a remix app. Hooray!</p>\n\t\t\t\t<button onClick={() => setCount((c) => c + 1)}>{count}</button>\n\t\t\t</body>\n\t\t</html>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Dispense Function Implementation\nDESCRIPTION: Original implementation of the dispense function without memoization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/usememo-and-usecallback/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nconst dispense = (candy) => {\n\tsetCandies((allCandies) => allCandies.filter((c) => c !== candy))\n}\n```\n\n----------------------------------------\n\nTITLE: Type Annotations and Extractions\nDESCRIPTION: Examples of adding type annotations to variables and extracting function types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum: (a: number, b: number) => number = (a, b) => a + b\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype MathFn = (a: number, b: number) => number\nconst sum: MathFn = (a, b) => a + b\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype MathFn = {\n\t(a: number, b: number): number\n}\nconst sum: MathFn = (a, b) => a + b\n```\n\n----------------------------------------\n\nTITLE: Testing React Class Component with Enzyme\nDESCRIPTION: An example of testing a React class component using Enzyme, which relies on implementation details like component instance and state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\ntest('setOpenIndex sets the open index state properly', () => {\n\tconst wrapper = mount(<Accordion items={[]} />)\n\texpect(wrapper.state('openIndex')).toBe(0)\n\twrapper.instance().setOpenIndex(1)\n\texpect(wrapper.state('openIndex')).toBe(1)\n})\n```\n\n----------------------------------------\n\nTITLE: Example Babel Localization Plugin Usage\nDESCRIPTION: A code demo showing how to use a custom babel plugin for loading localization strings based on environment variables. This plugin enables server-side markdown file imports for localization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-writing-custom-babel-and-eslint-plugins-can-increase-productivity-and-improve-user-experience.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport markdownFile from './localization/en/some-file.md'\n```\n\n----------------------------------------\n\nTITLE: Blog Post Frontmatter in Markdown\nDESCRIPTION: YAML frontmatter metadata for a blog post, including title, date, description, categories, keywords, and banner image configuration.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/full-time-educator.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: \"🚨 Big Announcement: I'm a full-time educator! 👨‍🏫\"\ndate: 2019-02-17\ndescription:\n  After years of teaching on the side, I've decided to take the plunge and go\n  full-time as an educator!\ncategories:\n  - personal\nmeta:\n  keywords:\n    - personal\n    - career\nbannerCloudinaryId: kentcdodds.com/content/blog/full-time-educator/banner\n---\n```\n\n----------------------------------------\n\nTITLE: Implementing File System Operations with ESModules in Node.js\nDESCRIPTION: A module that provides functionality to recursively read files from a directory using Node.js ESM syntax. Uses fs/promises for file system operations and handles both files and directories.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-node-js.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// get-files.js\nimport path from 'path'\nimport fs from 'fs/promises'\n\nconst isDir = async (d) => (await fs.lstat(d)).isDirectory()\n\nasync function getFiles(dir) {\n\tconst list = await fs.readdir(dir)\n\tconst filePromises = list.map(async (filename) => {\n\t\tconst filepath = path.join(dir, filename)\n\t\tif (await isDir(filepath)) {\n\t\t\treturn { type: 'dir', filepath }\n\t\t} else {\n\t\t\tconst content = String(await fs.readFile(filepath))\n\t\t\treturn { type: 'file', filepath, content }\n\t\t}\n\t})\n\treturn Promise.all(filePromises)\n}\n\nexport { getFiles }\n```\n\n----------------------------------------\n\nTITLE: Configuring URL Redirects for Legacy and Current Routes\nDESCRIPTION: Defines URL redirect mappings for various paths including blog posts, RSS feeds, workshops, and podcast episodes. Handles legacy routes, service worker paths, and specific content migrations. Includes redirects to external sites like epicreact.dev and testingjavascript.com.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/server/_redirects.txt#2025-04-12_snippet_3\n\nLANGUAGE: txt\nCODE:\n```\n/post/:slug*                                                             /blog/:slug*\n/rss.xml                                                                 /blog/rss.xml\n/feed                                                                    /blog/rss.xml\n/rss                                                                     /blog/rss.xml\n/blog/rss                                                                /blog/rss.xml\n/blog/feed                                                               /blog/rss.xml\n/blog/blog/rss.xml                                                       /blog/rss.xml\n/bring-kindness-back-to-open-source                                      https://www.hanselman.com/blog/bring-kindness-back-to-open-source\n/humans.txt                                                              /credits\n/mockServiceWorker.js                                                    /404\n/sw.js                                                                   /404\n/static(.*)                                                              /404\n/page-data(.*)                                                           /404\n/writing/:slug*                                                          https://kentcdodds-old.netlify.app/writing/:slug*\n/blog/always-use-memo-your-context-value                                /blog/how-to-optimize-your-context-value\n/blog/moist-programming                                                 /blog/aha-programming\n/aha                                                                    /blog/aha-programming\n/blog/aha                                                               /blog/aha-programming\n/workshops/advanced-react-component-patterns                            /workshops/advanced-react-patterns\n/workshops/hooks                                                        /workshops/react-hooks\n/workshops/build-react-apps                                             /workshops/build-react-apps-1\n/workshops/build-react-apps-advanced                                    /workshops/build-react-apps-3\n/workshops/web-app-fundamentals                                         /workshops/web-app-fundamentals-part-1\n/blog/make-test-utils-for-your-app                                      /blog/test-utils\n/blog/what-code-comments-can-teach-us-about-scaling-a-codebase          /blog/colocation\n/blog/avoid-nesting-in-tests                                            /blog/avoid-nesting-when-youre-testing\n/podcast                                                                /chats-with-kent-podcast\n/blog/state-colocation-will-make-your-app-faster                        /blog/state-colocation-will-make-your-react-app-faster\n/blog/why-your-team-needs-testing-java-script-com                       /blog/why-your-team-needs-testing-javascript-com\n/cohorts                                                                /clubs\n/learning-clubs                                                         /clubs\n/blog/how-to-write-a-react-component-in-type-script                     /blog/how-to-write-a-react-component-in-typescript\n/blog/how-to-write-a-type-narrowing-identity-function-in-typescript     /blog/how-to-write-a-constrained-identity-function-in-typescript\n/talks/the-web-s-next-transformation                                    /talks/the-web-s-next-transition\n/talks/fullstack-components                                             /talks/full-stack-components\n/workshops/advanced-react-hooks                                         https://epicreact.dev/advanced-hooks\n/workshops/cypress-fundamentals                                         https://testingjavascript.com/playlists/install-configure-and-script-cypress-for-javascript-web-applications-fca9\n/workshops/react-fundamentals                                           https://epicreact.dev/fundamentals\n/workshops/react-hooks                                                  https://epicreact.dev/hooks\n/workshops/react-performance                                            https://epicreact.dev/performance\n/workshops/testing-fundamentals                                         https://testingjavascript.com/playlists/fundamentals-of-testing-in-javascript-2c8a\n/workshops/testing-node-apps                                            https://testingjavascript.com/playlists/test-node-js-backends-1f90\n/workshops/testing-react-apps                                           https://epicreact.dev/testing\n/chats-with-kent-podcast/seasons/01/episodes/01                         /chats-with-kent-podcast/seasons/01/episodes/growing-your-skills-and-career-through-teaching-with-ali-spittel\n/blog/application-state-management                                      /blog/application-state-management-with-react\n/blog/how-to-start-testing                                              /blog/how-to-add-testing-to-an-existing-project\n/blog/super-simple-start-to-serverless                                  /blog/super-simple-start-to-netlify-functions\n/blog/unit-vs-integration-vs-e2e-tests                                  /blog/static-vs-unit-vs-integration-vs-e2e-tests\n/chats-with-kent-podcast/seasons/01/episodes/creating-successful-mentor-relationships-with-emma-wedekind        /chats-with-kent-podcast/seasons/01/episodes/creating-successful-mentor-relationships-with-emma-bostian\n```\n\n----------------------------------------\n\nTITLE: Invalid Props Modification Example\nDESCRIPTION: Shows an incorrect attempt to modify props directly, which is not allowed in React. This anti-pattern demonstrates why props should be treated as immutable.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Add(props) {\n\tif (typeof props.n2 === 'undefined') {\n\t\tprops.n2 = 0\n\t}\n\treturn (\n\t\t<div>\n\t\t\t{props.n1} + {props.n2} = {props.n1 + props.n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating React Component Name Preservation in JavaScript\nDESCRIPTION: This snippet shows how React uses the 'name' property of components for identification, and how this is affected by code minification.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/profile-a-react-app-for-performance.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction AwesomeAppComponent() {\n\treturn <div>Awesome</div>\n}\nconsole.log(AwesomeAppComponent.name) // <-- logs \"AwesomeAppComponent\"\n\nclass LessAwesomeAppComponent extends React.Component {\n\trender() {\n\t\treturn <div>Less Awesome</div>\n\t}\n}\nconsole.log(LessAwesomeAppComponent.name) // <-- logs \"LessAwesomeAppComponent\"\n```\n\n----------------------------------------\n\nTITLE: Blog Post Frontmatter in Markdown\nDESCRIPTION: YAML frontmatter metadata for the blog post including title, date, description, keywords, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/sunsetting-javascript-air.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\narchived: true\ntitle: 🌆 Sunsetting JavaScript Air 🌆\ndate: 2016-10-28\ndescription: for now... 🌇\nmeta:\n  keywords:\n    - javascript\n    - open source\n    - Podcast\n    - web development\nbannerCloudinaryId: kentcdodds.com/content/blog/sunsetting-javascript-air/banner\nbannerCredit: '[https://javascriptair.com](https://javascriptair.com)'\n---\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Reducer Support to useToggle Hook in React\nDESCRIPTION: Modified useToggle to accept a reducer parameter, allowing users to provide their own reducer function for custom state update logic.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useToggle({ reducer }) {\n\tconst [{ on }, dispatch] = React.useReducer(toggleReducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: actionTypes.toggle })\n\tconst setOn = () => dispatch({ type: actionTypes.on })\n\tconst setOff = () => dispatch({ type: actionTypes.off })\n\n\treturn { on, toggle, setOn, setOff }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Boolean for Filtering in JavaScript\nDESCRIPTION: Shows the standard JavaScript approach to filtering falsy values from an array using the Boolean function as a predicate. TypeScript doesn't recognize this as a type guard by default.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\n// Array<number | undefined>\nconst arrayWithoutFalsyValues = arrayWithFalsyValues.filter(Boolean)\n```\n\n----------------------------------------\n\nTITLE: Filter With Options Wrapper\nDESCRIPTION: Higher-level abstraction built on top of the inverted control filter, providing simplified API for common use cases.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction filterWithOptions(array, {\n\tfilterNull = true,\n\tfilterUndefined = true,\n\tfilterZero = false,\n\tfilterEmptyString = false,\n} = {}) {\n\treturn filter(\n\t\tarray,\n\t\t(element) =>\n\t\t\t!(\n\t\t\t\t(filterNull && element === null) ||\n\t\t\t\t(filterUndefined && element === undefined) ||\n\t\t\t\t(filterZero && element === 0) ||\n\t\t\t\t(filterEmptyString && element === '')\n\t\t\t),\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Using React i18n Component\nDESCRIPTION: Example of using the i18n utility in a React component to retrieve localized content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport getContentForFile from 'react-i18n'\nconst i18n = getContentForFile('pages/home')\n\nfunction App() {\n\treturn (\n\t\t<div>\n\t\t\t<h1>{i18n('header.title')}</h1>\n\t\t\t<div>{i18n('header.subtitle')}</div>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: First Test Suite Implementation\nDESCRIPTION: Initial test implementation with shared component state, demonstrating the problems with test interdependence.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/test-isolation-with-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport '@testing-library/jest-dom/extend-expect'\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport { Counter } from '../counter'\n\nconst { getByText } = render(<Counter maxClicks={4} initialCount={3} />)\nconst counterButton = getByText(/^count/i)\n\ntest('the counter is initialized to the initialCount', () => {\n\texpect(counterButton).toHaveTextContent('3')\n})\n\ntest('when clicked, the counter increments the click', () => {\n\tuserEvent.click(counterButton)\n\texpect(counterButton).toHaveTextContent('4')\n})\n```\n\n----------------------------------------\n\nTITLE: Integration Tests for FruitAutocomplete Component using Enzyme\nDESCRIPTION: This code snippet shows integration tests for the FruitAutocomplete component using Enzyme. It tests the default state, menu visibility, and search functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-components-using-render-props.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { mount } from 'enzyme'\nimport FruitAutocomplete from '../fruit-autocomplete'\n\n// some handy utilities\n// learn more about this `sel` function\n// from my other blog post: http://kcd.im/sel-util\nconst sel = (id) => `[data-test=\"${id}\"]`\nconst hasMenu = (wrapper) => wrapper.find(sel('menu')).length === 1\n\ntest('menu is closed by default', () => {\n\tconst wrapper = mount(<FruitAutocomplete />)\n\texpect(hasMenu(wrapper)).toBe(false)\n})\n\ntest('lists fruit with a keydown of ArrowDown on the input', () => {\n\tconst wrapper = mount(<FruitAutocomplete />)\n\tconst input = wrapper.find('input')\n\tinput.simulate('keydown', { key: 'ArrowDown' })\n\texpect(hasMenu(wrapper)).toBe(true)\n})\n\ntest('can search for and select \"banana\"', () => {\n\tconst onChange = jest.fn()\n\tconst wrapper = mount(<FruitAutocomplete onChange={onChange} />)\n\tconst input = wrapper.find('input')\n\tinput.simulate('change', { target: { value: 'banana' } })\n\tinput.simulate('keydown', { key: 'ArrowDown' })\n\tinput.simulate('keydown', { key: 'Enter' })\n\texpect(onChange).toHaveBeenCalledTimes(1)\n\tconst downshift = expect.any(Object)\n\texpect(onChange).toHaveBeenCalledWith('banana', downshift)\n\texpect(input.instance().value).toBe('banana')\n})\n```\n\n----------------------------------------\n\nTITLE: Glamorous Media Queries Example\nDESCRIPTION: Shows how to implement responsive design using media queries in glamorous.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nconst MyResponsiveDiv = glamorous.div({\n\twidth: '100%',\n\tpadding: 20,\n\t'[@media](http://twitter.com/media \"Twitter profile for @media\")(min-width: 400px)':\n\t\t{\n\t\t\twidth: '85%',\n\t\t\tpadding: 0,\n\t\t},\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Calculator Operations in TypeScript\nDESCRIPTION: This snippet defines a calculator's operations using an object with typed functions. It demonstrates the initial approach to typing each function individually.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst operations = {\n\t'+': (left: number, right: number): number => left + right,\n\t'-': (left: number, right: number): number => left - right,\n\t'*': (left: number, right: number): number => left * right,\n\t'/': (left: number, right: number): number => left / right,\n}\n\ntype CalculatorProps = {\n\tleft: number\n\toperator: keyof typeof operations\n\tright: number\n}\n\nfunction Calculator({ left, operator, right }: CalculatorProps) {\n\tconst result = operations[operator](left, right)\n\treturn (\n\t\t<div>\n\t\t\t<code>\n\t\t\t\t{left} {operator} {right} = <output>{result}</output>\n\t\t\t</code>\n\t\t</div>\n\t)\n}\n\nconst examples = (\n\t<>\n\t\t<Calculator left={1} operator=\"+\" right={2} />\n\t\t<Calculator left={1} operator=\"-\" right={2} />\n\t\t<Calculator left={1} operator=\"*\" right={2} />\n\t\t<Calculator left={1} operator=\"/\" right={2} />\n\t</>\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Enum-like Types and Utility Functions in TypeScript\nDESCRIPTION: This TypeScript code defines custom types for Team and Role, along with utility functions to check and handle these types. It's used to maintain enum-like functionality after migrating to SQLite, which doesn't support enums natively.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype Team = 'RED' | 'BLUE' | 'YELLOW'\ntype Role = 'ADMIN' | 'MEMBER'\ntype OptionalTeam = Team | 'UNKNOWN'\n\nconst teams: Array<Team> = ['RED', 'BLUE', 'YELLOW']\nconst roles: Array<Role> = ['ADMIN', 'MEMBER']\nconst isTeam = (team?: string): team is Team => teams.includes(team as Team)\nconst isRole = (role?: string): role is Role => roles.includes(role as Role)\nconst getTeam = (team?: string): Team | null => (isTeam(team) ? team : null)\nconst getOptionalTeam = (team?: string): OptionalTeam =>\n\tisTeam(team) ? team : 'UNKNOWN'\n```\n\n----------------------------------------\n\nTITLE: Declaring a Module with Default Export in TypeScript Declaration File\nDESCRIPTION: Shows how to write type definitions for a function with properties in a .d.ts file as a default export. This is useful for creating type definitions for JavaScript modules.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare const sum: {\n\t(a: number, b: number): number\n\toperator: string\n}\nexport default sum\n```\n\n----------------------------------------\n\nTITLE: TypeScript Error Handling with Unknown Type\nDESCRIPTION: Improved error handling using type checking and string conversion for unknown error types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/get-a-catch-block-error-message-with-typescript.mdx#2025-04-12_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntry {\n\tthrow new Error('Oh no!')\n} catch (error) {\n\tlet message\n\tif (error instanceof Error) message = error.message\n\telse message = String(error)\n\t// we'll proceed, but let's report it\n\treportError({ message })\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing React Hook Error with Proper Component Rendering\nDESCRIPTION: The solution to the hook error is to use JSX to render the Counter component inside the map callback, ensuring each Counter instance is properly created by React with its own hook state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-call-a-react-function-component/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<div>{items.map(i => <Counter key={i.id} />)}</div>\n```\n\n----------------------------------------\n\nTITLE: Recommended TypeScript React Component Declaration\nDESCRIPTION: The recommended way to declare a React component with TypeScript, using a function declaration and type annotation for props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Calculator({ left, operator, right }: CalculatorProps) {\n\t// implementation clipped for brevity\n}\n```\n\n----------------------------------------\n\nTITLE: Frontmatter Configuration in Markdown\nDESCRIPTION: YAML frontmatter configuration for the blog post defining metadata like title, date, description, categories, keywords, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-new-kentcdodds.com.mdx#2025-04-12_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\ntitle: Introducing the new kentcdodds.com\ndate: 2021-10-04\ndescription: This site just experienced a huge rewrite and I want to show you around a bit.\ncategories:\n  - personal\nmeta:\n  keywords:\n    - kent c. dodds\n    - kcd teams\n    - epic web discord\n    - the call kent podcast\nbannerCloudinaryId: kent/riding-onewheel-outdoors-fast\nbannerAlt: Kent riding on a onewheel in the outdoors\n---\n```\n\n----------------------------------------\n\nTITLE: Demonstrating ESLint Configuration in JavaScript\nDESCRIPTION: This snippet recommends replacing certain ESLint configurations with eslint-config-react-app and using Prettier for code formatting. It highlights the importance of choosing the right tools and configurations to improve code quality and maintainability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-users-care-about-how-you-write-code.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nDelete `eslint-config-react` and `eslint-config-airbnb` and use `eslint-config-react-app` instead. Also... Use [prettier](https://prettier.io/)...\n```\n\n----------------------------------------\n\nTITLE: Extending Built-in Jest Configuration with paypal-scripts\nDESCRIPTION: Demonstrates how to extend the built-in Jest configuration from paypal-scripts by importing the default config and modifying it. This allows developers to maintain most of the benefits of the toolkit while customizing specific options.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/concerning-toolkits.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// jest.config.js\nconst builtInJestConfig = require('paypal-scripts/jest')\nbuiltInJestConfig.notify = true\nmodule.exports = builtInJestConfig\n```\n\n----------------------------------------\n\nTITLE: Cloudinary-Optimized Responsive Image Implementation\nDESCRIPTION: A real-world example of an image tag with Cloudinary URLs that include various width transformations in the srcset attribute. This provides multiple image sizes for different device widths while using Cloudinary's image optimization features.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<img\n\ttitle=\"Photo by Kari Shea\"\n\tclass=\"z-10 rounded-lg object-cover object-center transition-opacity\"\n\talt=\"MacBook Pro on top of brown table\"\n\tsrc=\"https://res.cloudinary.com/kentcdodds-com/image/upload/w_1517,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop\"\n\tsrcset=\"\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_280,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop   280w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_560,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop   560w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_840,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop   840w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_1100,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop 1100w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_1650,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop 1650w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_2500,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop 2500w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_2100,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop 2100w,\n\t\thttps://res.cloudinary.com/kentcdodds-com/image/upload/w_3100,q_auto,f_auto,b_rgb:e6e9ee/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/banner_iplhop 3100w\n\t\"\n\tsizes=\"(max-width:1023px) 80vw, (min-width:1024px) and (max-width:1620px) 67vw, 1100px\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Basic Glamor Component Style Example\nDESCRIPTION: Demonstrates the basic usage of glamor.css to create a styled div component with fontSize and textAlign properties.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst styles = glamor.css({\n\tfontSize: 20,\n\ttextAlign: 'center',\n})\nfunction MyStyledDiv({ className = '', ...rest }) {\n\treturn <div className={`${styles} ${className}`} {...rest} />\n}\n```\n\n----------------------------------------\n\nTITLE: Console Error Mocking in Jest Tests\nDESCRIPTION: Code that mocks console.error implementation in Jest tests to suppress expected error logging during test execution. Uses Jest's spyOn functionality to mock and restore console behavior.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nbeforeEach(() => {\n\tjest.spyOn(console, 'error')\n\tconsole.error.mockImplementation(() => {})\n})\n\nafterEach(() => {\n\tconsole.error.mockRestore()\n})\n```\n\n----------------------------------------\n\nTITLE: Class Component with a Bug Demonstrating Why act() Warnings Matter\nDESCRIPTION: A buggy version of the class component that fails to update the status to 'fulfilled' after a successful API call. This bug would be caught by proper act() handling in tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nclass UsernameFormClass extends React.Component {\n\tstate = { status: 'idle', error: null }\n\thandleSubmit = async (event) => {\n\t\tevent.preventDefault()\n\t\tconst newUsername = event.target.elements.username.value\n\t\tthis.setState({ status: 'pending' })\n\t\ttry {\n\t\t\tawait this.props.updateUsername(newUsername)\n\t\t\t// this.setState({status: 'fulfilled'})\n\t\t} catch (e) {\n\t\t\tthis.setState({ status: 'rejected', error: e })\n\t\t}\n\t}\n\trender() {\n\t\tconst { error, status } = this.state\n\n\t\treturn (\n\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t\t<input id=\"username\" />\n\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t<span>{status === 'pending' ? 'Saving...' : null}</span>\n\t\t\t\t<span>{status === 'rejected' ? error.message : null}</span>\n\t\t\t</form>\n\t\t)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Creating and Downloading Heap Snapshots in Node.js with Remix\nDESCRIPTION: This TypeScript code defines a Remix Resource Route that creates and downloads a heap snapshot of the Node.js application. It uses the v8 module to write the heap snapshot to a file and streams it as a response for download. The function is restricted to admin users and includes error handling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fixing-a-memory-leak-in-a-production-node-js-app.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport path from 'path'\nimport os from 'os'\nimport fs from 'fs'\nimport v8 from 'v8'\nimport { Response } from '@remix-run/node'\nimport { PassThrough } from 'stream'\nimport type { LoaderFunctionArgs } from '@remix-run/node'\nimport { requireAdminUser } from '#app/utils/session.server'\nimport { formatDate } from '#app/utils/misc'\n\nexport async function loader({ request }: LoaderFunctionArgs) {\n\tawait requireAdminUser(request)\n\tconst host =\n\t\trequest.headers.get('X-Forwarded-Host') ?? request.headers.get('host')\n\n\tconst tempDir = os.tmpdir()\n\tconst filepath = path.join(\n\t\ttempDir,\n\t\t`${host}-${formatDate(new Date(), 'yyyy-MM-dd HH_mm_ss_SSS')}.heapsnapshot`,\n\t)\n\n\tconst snapshotPath = v8.writeHeapSnapshot(filepath)\n\tif (!snapshotPath) {\n\t\tthrow new Response('No snapshot saved', { status: 500 })\n\t}\n\n\tconst body = new PassThrough()\n\tconst stream = fs.createReadStream(snapshotPath)\n\tstream.on('open', () => stream.pipe(body))\n\tstream.on('error', (err) => body.end(err))\n\tstream.on('end', () => body.end())\n\n\treturn new Response(body, {\n\t\tstatus: 200,\n\t\theaders: {\n\t\t\t'Content-Type': 'application/octet-stream',\n\t\t\t'Content-Disposition': `attachment; filename=\"${path.basename(\n\t\t\t\tsnapshotPath,\n\t\t)}\"`\n\t\t\t'Content-Length': (await fs.promises.stat(snapshotPath)).size.toString(),\n\t\t},\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom useCounter Hook\nDESCRIPTION: Extracting counter logic into a custom hook for better code sharing while maintaining the same functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nfunction useCounter() {\n\tconst [count, setCount] = useState(0)\n\tconst increment = () => setCount((currentCount) => currentCount + 1)\n\treturn { count, increment }\n}\n\nexport default useCounter\n```\n\n----------------------------------------\n\nTITLE: Configuring Terser Webpack Plugin to Preserve Function and Class Names in JavaScript\nDESCRIPTION: This snippet shows how to modify the Terser Webpack Plugin configuration to keep function and class names intact during minification, which is crucial for accurate React profiling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/profile-a-react-app-for-performance.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// ... some config ...\nnew TerserPlugin({\n\tterserOptions: {\n\t\t// ... some other config ...\n\t\tmangle: {\n\t\t\tsafari10: true,\n\t\t},\n\t\tkeep_classnames: true,\n\t\tkeep_fnames: true,\n\t\t// ... some more config ...\n\t},\n\t// ... even more config ...\n})\n```\n\n----------------------------------------\n\nTITLE: Image Reference in Markdown - Graph Visualization\nDESCRIPTION: Markdown code showing an image reference for a collaborators graph visualization in ng-stats project.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-dont-commit-generated-files-to-master.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n![ng-stats graph for collaborators](https://res.cloudinary.com/kentcdodds-com/image/upload/v1625033525/kentcdodds.com/content/blog/why-i-dont-commit-generated-files-to-master/0.png)\n```\n\n----------------------------------------\n\nTITLE: Updated Login Form with Multiple Buttons\nDESCRIPTION: Modified version of the login form that includes both signup and login buttons, demonstrating how UI changes can break traditional selectors.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst form = (\n\t<form onSubmit={handleSubmit}>\n\t\t<div>\n\t\t\t<label htmlFor=\"username\">Username</label>\n\t\t\t<input id=\"username\" className=\"username-field\" />\n\t\t</div>\n\t\t<div>\n\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t<input id=\"password\" type=\"password\" className=\"password-field\" />\n\t\t</div>\n\t\t<div>\n\t\t\t<button type=\"submit\" className=\"btn\">\n\t\t\t\tSign up\n\t\t\t</button>\n\t\t\t<button type=\"submit\" className=\"btn\">\n\t\t\t\tLogin\n\t\t\t</button>\n\t\t</div>\n\t</form>\n)\n```\n\n----------------------------------------\n\nTITLE: useState Implementation Step 2: Renamed Parameters\nDESCRIPTION: Improves code readability by renaming the dispatch argument to 'newState' which better reflects its purpose in this implementation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst useStateReducer = (prevState, newState) => newState\n\nfunction useState() {\n\treturn React.useReducer(useStateReducer)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Component Composition for State Management in React\nDESCRIPTION: This snippet illustrates how to use component composition to manage and pass state more efficiently, reducing prop drilling in React applications.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/application-state-management-with-react.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\tconst [someState, setSomeState] = React.useState('some state')\n\treturn (\n\t\t<>\n\t\t\t<Header\n\t\t\t\tlogo={<Logo someState={someState} />}\n\t\t\t\tsettings={<Settings onStateChange={setSomeState} />}\n\t\t\t/>\n\t\t\t<LeftNav>\n\t\t\t\t<SomeLink someState={someState} />\n\t\t\t\t<SomeOtherLink someState={someState} />\n\t\t\t\t<Etc someState={someState} />\n\t\t\t</LeftNav>\n\t\t\t<MainContent>\n\t\t\t\t<SomeSensibleComponent someState={someState} />\n\t\t\t\t<AndSoOn someState={someState} />\n\t\t\t</MainContent>\n\t\t</>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Props with Local Variable Solution\nDESCRIPTION: Shows the correct way to handle optional props using a local variable instead of modifying props directly.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Add(props) {\n\tlet n2 = props.n2\n\tif (typeof n2 === 'undefined') {\n\t\tn2 = 0\n\t}\n\treturn (\n\t\t<div>\n\t\t\t{props.n1} + {n2} = {props.n1 + n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating && Operator Behavior in JavaScript\nDESCRIPTION: This code snippet illustrates how the && operator behaves with different truthy and falsy values in JavaScript, explaining why it can cause issues in JSX.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n0 && true // 0\ntrue && 0 // 0\nfalse && true // false\ntrue && '' // ''\n```\n\n----------------------------------------\n\nTITLE: Implementing addThings Function with Necessary Nested Closure in JavaScript\nDESCRIPTION: This snippet demonstrates a case where nesting is necessary. The addThings function uses a nested add function that requires access to the additive parameter.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-avoid-nesting-closures.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction addThings(additive, ...numbers) {\n\tconst add = (n) => n + additive\n\treturn numbers.map(add)\n}\n\naddThings(3, 1, 2, 3, 4)\n// ↳ [4, 5, 6, 7]\n```\n\n----------------------------------------\n\nTITLE: HTML with Multiple Module Imports\nDESCRIPTION: HTML file demonstrating both inline and external module imports using script tags.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<script type=\"module\">\n\timport { appendDiv } from './append-div.js'\n\tappendDiv('Hello from inline script')\n</script>\n<script type=\"module\" src=\"./script-src.js\"></script>\n```\n\n----------------------------------------\n\nTITLE: Adding Value and Transition Properties\nDESCRIPTION: Implementation of the basic value and transition properties in the machine object.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfunction createMachine(stateMachineDefinition) {\n\tconst machine = {\n\t\tvalue: stateMachineDefinition.initialState,\n\t\ttransition(currentState, event) {\n\t\t\treturn machine.value\n\t\t},\n\t}\n\treturn machine\n}\n```\n\n----------------------------------------\n\nTITLE: Props Destructuring with Default Values\nDESCRIPTION: Demonstrates a more modern approach using destructuring and default values for props, showing clean syntax for handling optional props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/props-vs-state/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Add({ n1, n2 = 0 }) {\n\treturn (\n\t\t<div>\n\t\t\t{n1} + {n2} = {n1 + n2}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Incorrect Error Component with && in React JSX\nDESCRIPTION: This code snippet shows an incorrect implementation of an Error component using &&, which can lead to rendering undefined when the error prop is undefined.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/use-ternaries-rather-than-and-and-in-jsx.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Error({ error }) {\n\treturn error && <div className=\"fancy-error\">{error.message}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Class Instance Method Comparison in JavaScript\nDESCRIPTION: Demonstrates how class instances share method references through the prototype chain, showing memory efficiency compared to the module pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst person1 = new Person('Jane Doe')\nconst person2 = new Person('Jane Doe')\nperson1.getGreetingCallback === person2.getGreetingCallback // true\n// and to take it a tiny bit further, these are also both true:\nperson1.getGreetingCallback === Person.prototype.getGreetingCallback\nperson2.getGreetingCallback === Person.prototype.getGreetingCallback\n```\n\n----------------------------------------\n\nTITLE: Initial Password Validation Tests\nDESCRIPTION: Initial test suite for password validation that appears correct but contains flawed test cases that don't properly validate individual password requirements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-test-fail.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// __tests__/utils.js\nimport { isPasswordAllowed } from '#app/utils'\n\ntest('allows passwords that are good', () => {\n\texpect(isPasswordAllowed('Ab3.efgh')).toBe(true)\n})\n\ntest('disallows passwords less than 7 characters', () => {\n\texpect(isPasswordAllowed('Ab3.ef')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a non-alphanumeric character', () => {\n\texpect(isPasswordAllowed('Ab3')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a digit', () => {\n\texpect(isPasswordAllowed('Ab.')).toBe(false)\n})\n\ntest('disallows passwords that do not contain an uppercase letter', () => {\n\texpect(isPasswordAllowed('b3.')).toBe(false)\n})\n\ntest('disallows passwords that do not contain a lowercase letter', () => {\n\texpect(isPasswordAllowed('A3.')).toBe(false)\n})\n```\n\n----------------------------------------\n\nTITLE: Express Server Initialization and Configuration\nDESCRIPTION: The server startup logic, including Express initialization, route mounting, error handling, and graceful shutdown. It wraps the server in a promise-based API for easier testing and ensures proper cleanup on application exit.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport express from 'express'\n\n// this is all it takes to enable async/await for express middleware\nimport 'express-async-errors'\n\nimport logger from 'loglevel'\n\n// all the routes for my app are retrieved from the src/routes/index.js module\nimport { getRoutes } from './routes'\n\nfunction startServer({ port = process.env.PORT } = {}) {\n\tconst app = express()\n\n\t// I mount my entire app to the /api route (or you could just do \"/\" if you want)\n\tapp.use('/api', getRoutes())\n\n\t// add the generic error handler just in case errors are missed by middleware\n\tapp.use(errorMiddleware)\n\n\t// I prefer dealing with promises. It makes testing easier, among other things.\n\t// So this block of code allows me to start the express app and resolve the\n\t// promise with the express server\n\treturn new Promise((resolve) => {\n\t\tconst server = app.listen(port, () => {\n\t\t\tlogger.info(`Listening on port ${server.address().port}`)\n\n\t\t\t// this block of code turns `server.close` into a promise API\n\t\t\tconst originalClose = server.close.bind(server)\n\t\t\tserver.close = () => {\n\t\t\t\treturn new Promise((resolveClose) => {\n\t\t\t\t\toriginalClose(resolveClose)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// this ensures that we properly close the server when the program exists\n\t\t\tsetupCloseOnExit(server)\n\n\t\t\t// resolve the whole promise with the express server\n\t\t\tresolve(server)\n\t\t})\n\t})\n}\n\n// here's our generic error handler for situations where we didn't handle\n// errors properly\nfunction errorMiddleware(error, req, res, next) {\n\tif (res.headersSent) {\n\t\tnext(error)\n\t} else {\n\t\tlogger.error(error)\n\t\tres.status(500)\n\t\tres.json({\n\t\t\tmessage: error.message,\n\t\t\t// we only add a `stack` property in non-production environments\n\t\t\t...(process.env.NODE_ENV === 'production'\n\t\t\t\t? null\n\t\t\t\t: { stack: error.stack }),\n\t\t})\n\t}\n}\n\n// ensures we close the server in the event of an error.\nfunction setupCloseOnExit(server) {\n\t// thank you stack overflow\n\t// https://stackoverflow.com/a/14032965/971592\n\tasync function exitHandler(options = {}) {\n\t\tawait server\n\t\t\t.close()\n\t\t\t.then(() => {\n\t\t\t\tlogger.info('Server successfully closed')\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tlogger.warn('Something went wrong closing the server', e.stack)\n\t\t\t})\n\n\t\tif (options.exit) process.exit()\n\t}\n\n\t// do something when app is closing\n\tprocess.on('exit', exitHandler)\n\n\t// catches ctrl+c event\n\tprocess.on('SIGINT', exitHandler.bind(null, { exit: true }))\n\n\t// catches \"kill pid\" (for example: nodemon restart)\n\tprocess.on('SIGUSR1', exitHandler.bind(null, { exit: true }))\n\tprocess.on('SIGUSR2', exitHandler.bind(null, { exit: true }))\n\n\t// catches uncaught exceptions\n\tprocess.on('uncaughtException', exitHandler.bind(null, { exit: true }))\n}\n\nexport { startServer }\n```\n\n----------------------------------------\n\nTITLE: Enhanced Toggle Component with Click Limit\nDESCRIPTION: Extends the Toggle component to limit the number of clicks on the Switch. It introduces a new state to track clicks and disables toggling after 4 clicks until reset.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [clicksSinceReset, setClicksSinceReset] = React.useState(0)\n\tconst tooManyClicks = clicksSinceReset >= 4\n\n\tconst { on, toggle, setOn, setOff } = useToggle()\n\n\tfunction handleClick() {\n\t\ttoggle()\n\t\tsetClicksSinceReset((count) => count + 1)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={setOff}>Switch Off</button>\n\t\t\t<button onClick={setOn}>Switch On</button>\n\t\t\t<Switch on={on} onClick={handleClick} />\n\t\t\t{tooManyClicks ? (\n\t\t\t\t<button onClick={() => setClicksSinceReset(0)}>Reset</button>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Logger with Mutable Object Reference\nDESCRIPTION: This code snippet shows how to create a logger that uses an object reference to always log the latest value, even when the original variable is reassigned.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-pass-by-value-function-parameters.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getLatestLogger(argRef) {\n\tfunction logger() {\n\t\tconsole.log(argRef.current)\n\t}\n\treturn logger\n}\n\nconst fruitRef = { current: 'raspberry' }\n\nconst latestLogger = getLatestLogger(fruitRef)\n\nlatestLogger() // \"raspberry\"\nfruitRef.current = 'peach'\nlatestLogger() // \"peach\" 🎉\n```\n\n----------------------------------------\n\nTITLE: Reduce Method Implementation\nDESCRIPTION: Alternative implementation using Array.reduce() to process file paths and generate move commands in a single iteration. Accumulates results into an array while filtering and transforming the data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/array-reduce-vs-chaining-vs-for-loop.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst commands = lines.reduce((accumulator, line) => {\n\tlet file = line.trim()\n\tif (file) {\n\t\tconst destFile = getDestFile(file)\n\t\tconst destFileDir = path.dirname(destFile)\n\t\taccumulator.push(`mkdir -p \"${destFileDir}\" && mv \"${file}\" \"${destFile}\"`)\n\t}\n\treturn accumulator\n}, [])\n```\n\n----------------------------------------\n\nTITLE: Alternative React Component Syntax\nDESCRIPTION: An example of an alternative syntax for the Calculator component using arrow functions and implicit returns.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-react-component-in-typescript.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst Calculator = ({ left, operator, right }) => (\n\t<div>\n\t\t<code>\n\t\t\t{left} {operator} {right} ={' '}\n\t\t\t<output>{operations[operator](left, right)}</output>\n\t\t</code>\n\t</div>\n)\n```\n\n----------------------------------------\n\nTITLE: Alternative React.createElement Usage with Children Prop\nDESCRIPTION: Illustrates how to use React.createElement with the children prop instead of separate arguments for children.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-jsx.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nui = React.createElement('div', { id: 'root', children: 'Hello world' })\n```\n\n----------------------------------------\n\nTITLE: Defining a Sum Function with Properties in TypeScript\nDESCRIPTION: Defines a function called 'sum' that adds two numbers and includes an 'operator' property. This demonstrates how functions can have properties attached to them in TypeScript.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = (a: number, b: number): number => a + b\nsum.operator = '+'\n```\n\n----------------------------------------\n\nTITLE: Using custom listify function in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the custom listify function in practical scenarios.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst to = `To: ${listify(mentionedMembersNicknames)}`\n// and\nconst didYouMean = `Did you mean ${listify(closeMatches, {\n\tconjunction: 'or ',\n})}?`\n```\n\n----------------------------------------\n\nTITLE: ES6 Class Structure Limitation\nDESCRIPTION: Illustrates how the 'newspaper' structure doesn't work well with ES6 classes. Classes require a specific structure that can lead to readability issues similar to the first example.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/newspaper-code-structure.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nexport default class Person {\n\tconstructor() {}\n\twalk() {}\n\ttalk() {}\n}\n```\n\n----------------------------------------\n\nTITLE: Failed Module Initialization Example\nDESCRIPTION: Example showing a failed attempt to initialize data before module imports due to ES modules specification constraints.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/pure-modules.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// a.js\nconst script = document.createElement('script')\nscript.setAttribute('id', 'server-data')\nscript.setAttribute('type', 'application/json')\ndocument.body.appendChild(script)\n\nimport './b'\nconsole.log('ready')\n```\n\n----------------------------------------\n\nTITLE: Improved Module Without Side Effects\nDESCRIPTION: Refactored implementation that moves side effects into an explicit initialization function.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// react-i18n/index.js\n// ... stuff\nfunction init(options) {\n\t// ... other stuff\n\t// side-effect! But it's ok now because that's clear\n\tconst messages = JSON.parse(document.getElementById('react-messages'))\n\t// ... other other stuff\n}\n// ... more stuff\nexport { getContentForFile as default, init }\n```\n\n----------------------------------------\n\nTITLE: Importing and Rendering a React Component in MDX\nDESCRIPTION: This code imports a UserProfileExample component and renders it within an MDX document with styling for demonstration purposes. The component is displayed with a maximum width of 300px and centered with margins.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-the-test-user/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport UserProfileExample from './user-profile-example'\n\n<div style={{ maxWidth: 300, margin: '10px auto 40px auto' }}>\n\t<UserProfileExample />\n</div>\n```\n\n----------------------------------------\n\nTITLE: Loading d3 Library Using unpkg in HTML\nDESCRIPTION: Shows how to include the d3 library in an HTML file using an unpkg URL. This example demonstrates loading a specific version of the library, which is recommended for stability.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/unpkg-an-open-source-cdn-for-npm.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<script src=\"https://unpkg.com/d3@5.5.0/dist/d3.min.js\" />\n```\n\n----------------------------------------\n\nTITLE: Photo Gallery Layout in HTML/JSX\nDESCRIPTION: Responsive photo gallery layout using flex container to display Kent's profile photos with download links\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/info.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'space-around', textAlign: 'center'}}>\n\t<div>\n\t\t<a target=\"_blank\" rel=\"noreferrer noopener\" href=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kent/profile.jpg\">\n\t\t\t<img alt=\"Cropped photo of Kent\" style={{ height: 200, width: 200, display: 'block', marginBottom: 4 }} src=\"https://res.cloudinary.com/kentcdodds-com/image/upload/f_auto,q_auto,dpr_2.0,h_200,ar_1:1,c_fill/kent/profile\" />\n\t\t\t<small>Uncropped photo of Kent</small>\n\t\t</a>\n\t</div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Demonstrating PayPal.me Emoji Easter Egg in JavaScript\nDESCRIPTION: This code snippet demonstrates the usage of emoji easter eggs in PayPal.me URLs. It shows how specific emojis can be appended to a PayPal.me link to create custom payment requests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2010s-decade-in-review.mdx#2025-04-12_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\n\"[🍕](https://www.paypal.me/kentcdodds/🍕),\\n[💰](https://www.paypal.me/kentcdodds/💰)\"\n```\n\n----------------------------------------\n\nTITLE: Using improved listify function with Intl.ListFormat in JavaScript\nDESCRIPTION: This snippet demonstrates how to use the improved listify function that utilizes Intl.ListFormat in practical scenarios.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// no change for the default case\nconst to = `To: ${listify(mentionedMembersNicknames)}`\n// switch to using the \"type\" option rather than overloading/abusing the term \"conjunction\"\nconst didYouMean = `Did you mean ${listify(closeMatches, {\n\ttype: 'disjunction',\n})}?`\n```\n\n----------------------------------------\n\nTITLE: Class Methods in TypeScript\nDESCRIPTION: Examples of implementing methods in TypeScript classes including regular methods and class fields.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nclass MathUtils {\n\tsum(a: number, b: number): number {\n\t\treturn a + b\n\t}\n}\n\nconst math = new MathUtils()\nmath.sum(1, 2)\n```\n\nLANGUAGE: typescript\nCODE:\n```\nclass MathUtils {\n\tsum = (a: number, b: number): number => {\n\t\treturn a + b\n\t}\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\ninterface MathUtilsInterface {\n\tsum(a: number, b: number): number\n}\n\nclass MathUtils implements MathUtilsInterface {\n\tsum(a: number, b: number): number {\n\t\treturn a + b\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Adding type annotations to fetchPokemon function\nDESCRIPTION: This snippet shows the process of adding TypeScript type annotations to the fetchPokemon function, including parameter and return types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst formatDate = (date: Date) => {\n\t// ...\n}\n\nasync function fetchPokemon(name: string): Promise<PokemonData> {\n\t// ...\n\tif (response.ok) {\n\t\t// ...\n\t} else {\n\t\t// NOTE: Having to explicitly type the argument to `.map` means that\n\t\t// the array you're maping over isn't typed properly! We'll fix this later...\n\t\tconst error = new Error(\n\t\t\terrors?.map((e: { message: string }) => e.message).join('\\n') ??\n\t\t\t\t'unknown',\n\t\t)\n\t\t// ...\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Full-Stack Image Components in JSX\nDESCRIPTION: This code snippet showcases the use of a custom Themed component to conditionally render dark and light versions of a full-stack architecture image. It uses the BlogImage component to display images from Cloudinary with specific props.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/remix-the-yang-to-react-s-yin.mdx#2025-04-12_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/full-stack-dark\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/full-stack-dark\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Similar to the diagrams before with the addition of a \"Full Stack\" row that shows Remix spanning over the entire client, network chasm, and server',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n\tlight={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/full-stack-light\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/remix-the-yang-to-react-s-yin/full-stack-light\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Similar to the diagrams before with the addition of a \"Full Stack\" row that shows Remix spanning over the entire client, network chasm, and server',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Handling Typos in Content Keys with react-i18n\nDESCRIPTION: Demonstrates how the react-i18n module handles typos in content keys, returning a string representation of the path.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rendering-a-function-with-react.mdx#2025-04-12_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nconst ui = (\n  <a href=\"/about\">\n    {getContent('pages.typo.nav.about')}\n  </a>\n)\n// that'll get you:\n<a href=\"/about\">{pages.typo.nav.about}</a>\n// note, that's a string of \"{\" and \"}\"...\n// not jsx interpolation...\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Different JavaScript Function Forms\nDESCRIPTION: Comprehensive example showing various ways to define functions in JavaScript, including function declarations, expressions, arrow functions, and object methods.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/function-forms.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nfunction functionDeclaration() {\n\t// do stuff\n\t// return stuff\n}\n\n// using var because I'm feeling retro\nvar functionExpression = function () {\n\t// do stuff\n\t// return stuff\n}\n\nvar functionExpressionWithName = function someName() {\n\t// do stuff\n\t// return stuff\n}\n\nconst arrowFunction = () => {\n\t// do stuff\n\t// return stuff\n}\n\nconst arrowFunctionWithImplicitReturn = () => 'return stuff'\n\nconst obj = {\n\tfunctionExpressionProperty: function () {},\n\tarrowFunctionProperty: () => {},\n\tobjectMethodFunction() {},\n}\n```\n\n----------------------------------------\n\nTITLE: Nesting Input Within Label Element in HTML\nDESCRIPTION: A method to associate a label with an input by nesting the input within the label element.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_4\n\nLANGUAGE: HTML\nCODE:\n```\n<label>\n\tUsername\n\t<input />\n</label>\n```\n\n----------------------------------------\n\nTITLE: Insufficient Form Input Labeling in HTML\nDESCRIPTION: An example of a form input with a label that is not properly associated, which is still not accessible.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<label>Username</label>\n<input />\n```\n\n----------------------------------------\n\nTITLE: Basic React Toggle Component Implementation\nDESCRIPTION: Simple implementation of a toggle component using React useState hook with inline rendering.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/prop-drilling.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Toggle() {\n\tconst [on, setOn] = React.useState(false)\n\tconst toggle = () => setOn((o) => !o)\n\treturn (\n\t\t<div>\n\t\t\t<div>The button is {on ? 'on' : 'off'}</div>\n\t\t\t<button onClick={toggle}>Toggle</button>\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Selecting Elements by Test ID\nDESCRIPTION: Example showing how to select elements using the data-testid attribute in tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nconst usernameEl = getByTestId('username')\n```\n\n----------------------------------------\n\nTITLE: Comparing Module Pattern Instances in JavaScript\nDESCRIPTION: Shows how the module pattern creates unique function instances for each object, demonstrating memory implications compared to class-based approaches.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/classes-complexity-and-functional-programming.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst person1 = getPerson('Jane Doe')\nconst person2 = getPerson('Jane Doe')\nperson1.getGreetingCallback === person2.getGreetingCallback // false\n```\n\n----------------------------------------\n\nTITLE: Enabling React Strict Mode in TSX\nDESCRIPTION: This snippet shows how to wrap the main App component with React.StrictMode to enable strict mode for the entire application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-strict-mode.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: Debugging MCP Server Connection\nDESCRIPTION: Command to directly connect to the MCP server for debugging purposes using the command line.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/README.md#2025-04-12_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx mcp-remote http://localhost:8787/sse\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for ESModules Support\nDESCRIPTION: Package.json configuration required to enable ESModule support in a Node.js project. Sets the type field to module to indicate ESM usage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-node-js.mdx#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"type\": \"module\"\n}\n```\n\n----------------------------------------\n\nTITLE: Testing ImperativeCounter Component without act()\nDESCRIPTION: This snippet shows a test for the ImperativeCounter component without using act(). This approach will result in act() warnings because the imperative method calls are outside React's callstack.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/fix-the-not-wrapped-in-act-warning/index.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { render, screen, act } from '@testing-library/react'\nimport ImperativeCounter from '../imperative-counter'\n\ntest('can call imperative methods on counter component', () => {\n\tconst counterRef = React.createRef()\n\trender(<ImperativeCounter ref={counterRef} />)\n\texpect(screen.getByText('The count is: 0')).toBeInTheDocument()\n\n\tcounterRef.current.increment()\n\texpect(screen.getByText('The count is: 1')).toBeInTheDocument()\n\n\tcounterRef.current.decrement()\n\texpect(screen.getByText('The count is: 0')).toBeInTheDocument()\n})\n```\n\n----------------------------------------\n\nTITLE: Anti-Pattern: Multiple Small Tests for React Component\nDESCRIPTION: This snippet demonstrates an anti-pattern of writing multiple small tests for a React component. It shows how this approach can lead to issues with test isolation, shared mutable state, and React act() warnings.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-fewer-longer-tests/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// 🛑 THIS IS AN EXAMPLE OF WHAT NOT TO DO...\nimport * as React from 'react'\nimport { render, wait, cleanup } from '@testing-library/react/pure'\nimport { getCourseInfo } from '../api'\nimport Course from '../course'\n\njest.mock('../api')\n\nfunction buildCourse(overrides) {\n\treturn {\n\t\ttitle: 'TEST_COURSE_TITLE',\n\t\tsubtitle: 'TEST_COURSE_SUBTITLE',\n\t\ttopics: ['TEST_COURSE_TOPIC'],\n\t\t...overrides,\n\t}\n}\n\ndescribe('Course success', () => {\n\tconst courseId = '123'\n\tconst title = 'My Awesome Course'\n\tconst subtitle = 'Learn super cool things'\n\tconst topics = ['topic 1', 'topic 2']\n\n\tlet utils\n\tbeforeAll(() => {\n\t\tgetCourseInfo.mockResolvedValueOnce(\n\t\t\tbuildCourse({ title, subtitle, topics }),\n\t\t)\n\t})\n\n\tafterAll(() => {\n\t\tcleanup()\n\t\tjest.resetAllMocks()\n\t})\n\n\tit('should show a loading spinner', () => {\n\t\tutils = render(<Course courseId={courseId} />)\n\t\texpect(utils.getByRole('alert')).toHaveTextContent(/loading/i)\n\t})\n\n\tit('should call the getCourseInfo function properly', () => {\n\t\texpect(getCourseInfo).toHaveBeenCalledWith(courseId)\n\t})\n\n\tit('should render the title', async () => {\n\t\texpect(await utils.findByRole('heading')).toHaveTextContent(title)\n\t})\n\n\tit('should render the subtitle', () => {\n\t\texpect(utils.getByText(subtitle)).toBeInTheDocument()\n\t})\n\n\tit('should render the list of topics', () => {\n\t\tconst topicElsText = utils\n\t\t\t.getAllByRole('listitem')\n\t\t\t.map((el) => el.textContent)\n\t\texpect(topicElsText).toEqual(topics)\n\t})\n})\n\ndescribe('Course failure', () => {\n\tconst courseId = '321'\n\tconst message = 'TEST_ERROR_MESSAGE'\n\n\tlet utils, alert\n\tbeforeAll(() => {\n\t\tgetCourseInfo.mockRejectedValueOnce({ message })\n\t})\n\n\tafterAll(() => {\n\t\tcleanup()\n\t\tjest.resetAllMocks()\n\t})\n\n\tit('should show a loading spinner', () => {\n\t\tutils = render(<Course courseId={courseId} />)\n\t\talert = utils.getByRole('alert')\n\t\texpect(alert).toHaveTextContent(/loading/i)\n\t})\n\n\tit('should call the getCourseInfo function properly', () => {\n\t\texpect(getCourseInfo).toHaveBeenCalledWith(courseId)\n\t})\n\n\tit('should render the error message', async () => {\n\t\tawait wait(() => expect(alert).toHaveTextContent(message))\n\t})\n})\n```\n\n----------------------------------------\n\nTITLE: Cleaner JavaScript Function Without Comments\nDESCRIPTION: Shows the same function refactored to remove unnecessary commented code, resulting in cleaner and more maintainable code.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-dont-commit-commented-out-code.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfunction foo(bar) {\n\treturn bar(false)\n}\n```\n\n----------------------------------------\n\nTITLE: Loading Local DevTools Configuration\nDESCRIPTION: Webpack-specific implementation for loading local developer-specific tools through a separate untracked file. Enables developers to have personal DevTools configurations without affecting others.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-your-own-dev-tools.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst requireDevToolsLocal = require.context(\n\t'./',\n\tfalse,\n\t/dev-tools\\.local\\.js/,\n)\nconst local = requireDevToolsLocal.keys()[0]\nif (local) {\n\trequireDevToolsLocal(local).default\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Function Hoisting Behavior\nDESCRIPTION: Example showing how function declarations are hoisted while function expressions are not, resulting in different behavior when called before definition.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/function-forms.mdx#2025-04-12_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nthisWorks()\n\nfunction thisWorks() {}\n\nthisThrowsAnError()\n\nvar thisThrowsAnError = function () {}\n```\n\n----------------------------------------\n\nTITLE: Babel Compiled Array Destructuring\nDESCRIPTION: Demonstrates how Babel compiles array destructuring syntax to ES5 compatible code with loose mode disabled.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-array-destructuring-fundamentals.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n'use strict'\n\nvar _slicedToArray = (function () {\n\tfunction sliceIterator(arr, i) {\n\t\tvar _arr = []\n\t\tvar _n = true\n\t\tvar _d = false\n\t\tvar _e = undefined\n\t\ttry {\n\t\t\tfor (\n\t\t\t\tvar _i = arr[Symbol.iterator](), _s;\n\t\t\t\t!(_n = (_s = _i.next()).done);\n\t\t\t\t_n = true\n\t\t\t) {\n\t\t\t\t_arr.push(_s.value)\n\t\t\t\tif (i && _arr.length === i) break\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_d = true\n\t\t\t_e = err\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_n && _i['return']) _i['return']()\n\t\t\t} finally {\n\t\t\t\tif (_d) throw _e\n\t\t\t}\n\t\t}\n\t\treturn _arr\n\t}\n\treturn function (arr, i) {\n\t\tif (Array.isArray(arr)) {\n\t\t\treturn arr\n\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\treturn sliceIterator(arr, i)\n\t\t} else {\n\t\t\tthrow new TypeError(\n\t\t\t\t'Invalid attempt to destructure non-iterable instance',\n\t\t\t)\n\t\t}\n\t}\n})()\n\nvar _useState = useState(0),\n\t_useState2 = _slicedToArray(_useState, 2),\n\tcount = _useState2[0],\n\tsetCount = _useState2[1]\n```\n\n----------------------------------------\n\nTITLE: Comparing Implicit and Explicit Assertions with Testing Library in JavaScript\nDESCRIPTION: This snippet demonstrates the difference between using a 'get*' query implicitly as an assertion and explicitly asserting its presence. The explicit assertion is recommended for better code readability and intention communication.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-mistakes-with-react-testing-library.mdx#2025-04-12_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\n// ❌\nscreen.getByRole('alert', { name: /error/i })\n\n// ✅\nexpect(screen.getByRole('alert', { name: /error/i })).toBeInTheDocument()\n```\n\n----------------------------------------\n\nTITLE: Interactive Remix Project Setup\nDESCRIPTION: This snippet shows the interactive prompts and responses when setting up a new Remix project. It includes options for project location, deployment target, language preference, and package installation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-beginner-s-guide-to-remix.mdx#2025-04-12_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nR E M I X\n\n💿 Welcome to Remix! Let's get you set up with a new project.\n\n? Where would you like to create your app? remix-jokes\n? Where do you want to deploy? Choose Remix if you're unsure, it's easy to change deployment targets. Remix App Server\n? TypeScript or JavaScript? TypeScript\n? Do you want me to run `npm install`? Yes\n💿 Created local .npmrc with Remix Registry\n```\n\n----------------------------------------\n\nTITLE: Glamorous JSXStyle-inspired API Example\nDESCRIPTION: Demonstrates the jsxstyle-inspired API for creating components without explicit naming.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst { Div, A } = glamorous\n\nfunction App() {\n\treturn (\n\t\t<Div textAlign=\"center\" color=\"red\">\n\t\t\t<A\n\t\t\t\thref=\"[https://brave.com/](https://brave.com)\"\n\t\t\t\ttextDecoration=\"none\"\n\t\t\t\tcolor=\"darkorange\"\n\t\t\t\ttextShadow=\"1px 1px 2px orange\"\n\t\t\t>\n\t\t\t\tBrowse faster and safer with Brave.\n\t\t\t</A>\n\t\t\t<div>It's fast, fun, and safe!</div>\n\t\t</Div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Controlling isOpen State in Downshift React Component\nDESCRIPTION: This code snippet demonstrates how to control the isOpen state of a Downshift component in React. It shows an example where the isOpen prop is set to true, making it a controlled component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-downshift-for-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Downshift isOpen={true} />\n```\n\n----------------------------------------\n\nTITLE: Markdown Blog Post Structure\nDESCRIPTION: Front matter configuration for a blog post about public speaking, including metadata like title, date, description, and banner image details\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-and-how-i-started-public-speaking.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Why and How I started public speaking\ndate: 2018-08-27\ndescription: Some stories and some advice from an international speaker and trainer\nmeta:\n  keywords:\n    - Public Speaking\nbannerCloudinaryId: unsplash/photo-1516280440614-37939bbacd81\nbannerCredit: Photo by [Bogomil Mihaylov](https://unsplash.com/photos/ekHSHvgr27k)\n---\n```\n\n----------------------------------------\n\nTITLE: Manual Project Setup Commands\nDESCRIPTION: Complete set of commands for manually setting up the project, including cloning, environment configuration, database setup, validation, and test preparation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ngit clone <your-fork>\ncd ./kentcdodds.com\n\n# copy the .env.example to .env\n#   everything's mocked out during development so you shouldn't need to\n#   change any of these values unless you want to hit real environments.\ncp .env.example .env\n\n# Install deps\nnpm install\n\n# setup database\nprisma migrate reset --force\n\n# run build, typecheck, linting\nnpm run validate\n\n# setup cache database\nnpm run prime-cache:mocks\n\n# Install playwright browsers\nnpm run test:e2e:install\n\n# run e2e tests\nnpm run test:e2e:run\n```\n\n----------------------------------------\n\nTITLE: Glamorous Child Selectors Example\nDESCRIPTION: Demonstrates using child selectors for nested styling with glamorous.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst MyDiv = glamorous.div({\n\tdisplay: 'block',\n\t'& .bold': { fontWeight: 'bold' },\n\t'& .one': { color: 'blue' },\n\t':hover .two': { color: 'red' },\n})\n\nconst ui = (\n\t<MyDiv>\n\t\t<div className=\"one bold\">is blue-bold!</div>\n\t\t<div className=\"two\">hover red!</div>\n\t</MyDiv>\n)\n```\n\n----------------------------------------\n\nTITLE: Complete State Machine Implementation\nDESCRIPTION: Full implementation of the state machine with transition handling, state management, and action execution.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/implementing-a-simple-state-machine-library-in-javascript.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nfunction createMachine(stateMachineDefinition) {\n\tconst machine = {\n\t\tvalue: stateMachineDefinition.initialState,\n\t\ttransition(currentState, event) {\n\t\t\tconst currentStateDefinition = stateMachineDefinition[currentState]\n\t\t\tconst destinationTransition = currentStateDefinition.transitions[event]\n\t\t\tif (!destinationTransition) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst destinationState = destinationTransition.target\n\t\t\tconst destinationStateDefinition =\n\t\t\t\tstateMachineDefinition[destinationState]\n\n\t\t\tdestinationTransition.action()\n\t\t\tcurrentStateDefinition.actions.onExit()\n\t\t\tdestinationStateDefinition.actions.onEnter()\n\n\t\t\tmachine.value = destinationState\n\n\t\t\treturn machine.value\n\t\t},\n\t}\n\treturn machine\n}\n\nconst machine = createMachine({\n\tinitialState: 'off',\n\toff: {\n\t\tactions: {\n\t\t\tonEnter() {\n\t\t\t\tconsole.log('off: onEnter')\n\t\t\t},\n\t\t\tonExit() {\n\t\t\t\tconsole.log('off: onExit')\n\t\t\t},\n\t\t},\n\t\ttransitions: {\n\t\t\tswitch: {\n\t\t\t\ttarget: 'on',\n\t\t\t\taction() {\n\t\t\t\t\tconsole.log('transition action for \"switch\" in \"off\" state')\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n\ton: {\n\t\tactions: {\n\t\t\tonEnter() {\n\t\t\t\tconsole.log('on: onEnter')\n\t\t\t},\n\t\t\tonExit() {\n\t\t\t\tconsole.log('on: onExit')\n\t\t\t},\n\t\t},\n\t\ttransitions: {\n\t\t\tswitch: {\n\t\t\t\ttarget: 'off',\n\t\t\t\taction() {\n\t\t\t\t\tconsole.log('transition action for \"switch\" in \"on\" state')\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n})\n\nlet state = machine.value\nconsole.log(`current state: ${state}`)\nstate = machine.transition(state, 'switch')\nconsole.log(`current state: ${state}`)\nstate = machine.transition(state, 'switch')\nconsole.log(`current state: ${state}`)\n```\n\n----------------------------------------\n\nTITLE: Exporting JavaScript Function Module\nDESCRIPTION: Creates and exports a function that appends a div element with a message to the document body.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// append-div.js\nfunction appendDiv(message) {\n\tconst div = document.createElement('div')\n\tdiv.textContent = message\n\tdocument.body.appendChild(div)\n}\n\nexport { appendDiv }\n```\n\n----------------------------------------\n\nTITLE: Basic React Router Redirect Example\nDESCRIPTION: Example showing how to implement a client-side redirect using React Router's Redirect component - demonstrating what NOT to do.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-client-side-route-redirects.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction App() {\n\treturn (\n\t\t<BrowserRouter>\n\t\t\t<Redirect from=\"/old-route\" to=\"/new-route\" />\n\t\t\t{/* ... more routes etc... */}\n\t\t</BrowserRouter>\n\t)\n```\n\n----------------------------------------\n\nTITLE: Implementing a Simple Netlify Lambda Function in JavaScript\nDESCRIPTION: This JavaScript code defines a simple Lambda function that responds with a greeting. It demonstrates how to handle query parameters and return a formatted response.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-netlify-functions.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// functions/hello.js\nexports.handler = async (event) => {\n\tconst subject = event.queryStringParameters.name || 'World'\n\treturn {\n\t\tstatusCode: 200,\n\t\tbody: `Hello ${subject}!`,\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Stack Trace Filter Implementation\nDESCRIPTION: Enhanced helper function that filters stack trace for better error reporting\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfunction assertAdd(inputs, output) {\n\ttry {\n\t\texpect(add(...inputs)).toBe(output)\n\t} catch (error) {\n\t\terror.stack = error.stack\n\t\t\t.split('\\n')\n\t\t\t.filter((line) => !line.includes('assertAdd'))\n\t\t\t.join('\\n')\n\t\tthrow error\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: React Declarative Component Quote\nDESCRIPTION: A quote highlighting React's core purpose as a UI library, demonstrating its focus on user interface building.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/remix-the-yang-to-react-s-yin.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n> A JavaScript library for building user interfaces\n```\n\n----------------------------------------\n\nTITLE: Basic Layout Structure for Currency Input Component\nDESCRIPTION: Demonstrates the layout structure for a currency input component with a currency code, input field, and currency code select dropdown. This layout is shared across different style implementations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compose-render-props.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n{\n{currencyCode}{input}\n{currencyCodeSelect}\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Database Connectivity Diagram in JSX\nDESCRIPTION: This code snippet renders a themed diagram of the database connectivity using the Themed component. It provides both dark and light versions of the diagram, each linking to a Cloudinary-hosted image.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/database-connectivity-dark\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/database-connectivity-dark\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Excalidraw diagram of a databases in different regions',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n\tlight={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/database-connectivity-light\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/database-connectivity-light\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Excalidraw diagram of a databases in different regions',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Generating a Remix Project with NPX\nDESCRIPTION: This command uses npx to run create-remix and set up a new Remix project. It initiates an interactive setup process for configuring the project.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-beginner-s-guide-to-remix.mdx#2025-04-12_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpx create-remix@latest\n```\n\n----------------------------------------\n\nTITLE: Associating Label with Input Using 'for' and 'id' Attributes in HTML\nDESCRIPTION: A recommended method to associate a label with an input using the 'for' attribute on the label and 'id' on the input.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_2\n\nLANGUAGE: HTML\nCODE:\n```\n<label for=\"username\">Username</label>\n<input id=\"username\" />\n```\n\n----------------------------------------\n\nTITLE: Email Communication Example - Outreach to Frontend Masters\nDESCRIPTION: Example of a professional outreach email sent to Marc Grabanski of Frontend Masters, demonstrating how to effectively pitch yourself for speaking opportunities.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/getting-noticed-and-widening-your-reach.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nHey dude,\\nI'm listening to your JSJabber episode and I've been wanting to do a FEM workshop for a long time. I've been trying to think about what I could contribute and something that I'm really into is open source. I have a growing list of open source libraries [on npm](https://www.npmjs.com/~kentcdodds) and [GitHub](https://github.com/kentcdodds) and I'm the owner and maintainer of [angular-formly](https://github.com/formly-js/angular-formly) which has grown in popularity.\\n\\nI also have an [egghead.io series](https://egghead.io/series/how-to-write-an-open-source-javascript-library) on the subject. But, as you know, a workshop format would make it pretty useful.\\n\\nI think that we could get more people into open source if they just knew how to get started. I believe you're interested in open source as well with your jQuery UI Datepicker experience. I think you could be pretty jazzed about this workshop.\\nWhat do I need to do to make this happen?\\n\\nThanks!\\n\\nKent\n```\n\n----------------------------------------\n\nTITLE: Button Selection with QuerySelectorAll\nDESCRIPTION: Example showing how to modify selectors to handle multiple buttons, highlighting the brittleness of index-based selection.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/making-your-ui-tests-resilient-to-change.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n// change this:\nconst submitButton = rootNode.querySelector('.btn')\n// to this:\nconst submitButton = rootNode.querySelectorAll('.btn')[1]\n```\n\n----------------------------------------\n\nTITLE: Defining Colocation Principle in Markdown\nDESCRIPTION: This snippet presents the fundamental principle of colocation in software development, emphasizing the importance of placing code close to where it's relevant.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/colocation.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\tPlace code as close to where it's relevant as possible\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Login Component Implementation and Testing with React Testing Library\nDESCRIPTION: A complete example showing both a React login form component implementation and its corresponding test using React Testing Library. The component handles form submission, API calls, and state management while the test demonstrates user interaction simulation and assertions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-react-testing-library.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// login.js\nimport * as React from 'react'\n\nfunction Login() {\n\tconst [state, setState] = React.useReducer((s, a) => ({ ...s, ...a }), {\n\t\tresolved: false,\n\t\tloading: false,\n\t\terror: null,\n\t})\n\n\tfunction handleSubmit(event) {\n\t\tevent.preventDefault()\n\t\tconst { usernameInput, passwordInput } = event.target.elements\n\n\t\tsetState({ loading: true, resolved: false, error: null })\n\n\t\twindow\n\t\t\t.fetch('/api/login', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tusername: usernameInput.value,\n\t\t\t\t\tpassword: passwordInput.value,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t.then((r) => r.json())\n\t\t\t.then(\n\t\t\t\t(user) => {\n\t\t\t\t\tsetState({ loading: false, resolved: true, error: null })\n\t\t\t\t\twindow.localStorage.setItem('token', user.token)\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tsetState({ loading: false, resolved: false, error: error.message })\n\t\t\t\t},\n\t\t\t)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"usernameInput\">Username</label>\n\t\t\t\t\t<input id=\"usernameInput\" />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<label htmlFor=\"passwordInput\">Password</label>\n\t\t\t\t\t<input id=\"passwordInput\" type=\"password\" />\n\t\t\t\t</div>\n\t\t\t\t<button type=\"submit\">Submit{state.loading ? '...' : null}</button>\n\t\t\t</form>\n\t\t\t{state.error ? <div role=\"alert\">{state.error.message}</div> : null}\n\t\t\t{state.resolved ? (\n\t\t\t\t<div role=\"alert\">Congrats! You're signed in!</div>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\nexport default Login\n\n// __tests__/login.js\n// again, these first two imports are something you'd normally handle in\n// your testing framework configuration rather than importing them in every file.\nimport '@testing-library/jest-dom/extend-expect'\n\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\ntest('allows the user to login successfully', async () => {\n\t// mock out window.fetch for the test\n\tconst fakeUserResponse = { token: 'fake_user_token' }\n\tjest.spyOn(window, 'fetch').mockImplementationOnce(() => {\n\t\treturn Promise.resolve({\n\t\t\tjson: () => Promise.resolve(fakeUserResponse),\n\t\t})\n\t})\n\n\trender(<Login />)\n\n\t// fill out the form\n\tuserEvent.type(screen.getByLabelText(/username/i), 'chuck')\n\tuserEvent.type(screen.getByLabelText(/password/i), 'norris')\n\n\tuserEvent.click(screen.getByText(/submit/i))\n\n\t// just like a manual tester, we'll instruct our test to wait for the alert\n\t// to show up before continuing with our assertions.\n\tconst alert = await screen.findByRole('alert')\n\n\t// .toHaveTextContent() comes from jest-dom's assertions\n\t// otherwise you could use expect(alert.textContent).toMatch(/congrats/i)\n\t// but jest-dom will give you better error messages which is why it's recommended\n\texpect(alert).toHaveTextContent(/congrats/i)\n\texpect(window.localStorage.getItem('token')).toEqual(fakeUserResponse.token)\n})\n```\n\n----------------------------------------\n\nTITLE: External JavaScript Module Import\nDESCRIPTION: External JavaScript file that imports and uses the appendDiv function from the module.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-es-modules-in-the-browser.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// script-src.js\nimport { appendDiv } from './append-div.js'\n\nappendDiv('Hello from external script')\n```\n\n----------------------------------------\n\nTITLE: Common JavaScript Module Structure\nDESCRIPTION: Demonstrates a common way of structuring JavaScript modules that can be difficult to read and maintain. This approach mixes exports, object definitions, and functions throughout the file.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/newspaper-code-structure.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nexport const bar = {\n\tsome: 'property',\n\tsomeFunction() {\n\t\t// with plenty of lines\n\t\t// and more stuff\n\t\t// because... reasons...\n\t},\n\tsomeOtherFunction() {\n\t\t// because we need it\n\t\t// it's really important...\n\t},\n\tsomeOtherProperty: true,\n\tanotherFunction() {\n\t\t// forgot about this one...\n\t\t// why is it here, instead of at top?\n\t\t// who knows... Doesn't affect functionality right?\n\t\t// but it might impact readability...\n\t\t// especially if it gets long and stuff\n\t},\n\tdontForgetMe: '!!!!',\n\tohWaitNeedThisToo() {\n\t\t// yet another function\n\t\t// man, I need a few of these don't I?\n\t\t// what other functions does this \"bar\" thing have?\n\t\t// does this file export anything else? I guess I'll have to search around and find out...\n\t},\n}\n\nexport function longFunction() {\n\t// I could really use a doughnut right now...\n\t// Sometimes functions need to do a lot of things\n\t// You should keep these functions short\n\t// Otherwise your code is hard for a reader to consume...\n\t// and that makes me sad :-(\n\t// and confused\n}\n\nexport function meToo() {\n\t// make sure you scroll around the file\n\t// so you know EVERYTHING that this module exports\n\t// Because with this method, discovering that is a little difficult.\n\t// There's gotta be a better way!\n}\n\nexport const thereIsABetterWay = true\n```\n\n----------------------------------------\n\nTITLE: Using Array.prototype.includes Method in JavaScript\nDESCRIPTION: This code demonstrates the use of the Array.prototype.includes method, which is an API that requires polyfilling for older browsers that don't support it natively.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-a-polyfill.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst contacts = ['Brooke', 'Becca', 'Nathan', 'Adam', 'Michael']\nif (contacts.includes('Rachel')) {\n\tconsole.log('You have a Rachel!')\n}\n```\n\n----------------------------------------\n\nTITLE: Serve Handler JSON Configuration\nDESCRIPTION: JSON configuration for implementing redirects when using serve-handler for local production builds.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-client-side-route-redirects.mdx#2025-04-12_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"redirects\": [\n\t\t{\n\t\t\t\"source\": \"/\",\n\t\t\t\"destination\": \"/list\",\n\t\t\t\"type\": 302\n\t\t}\n\t]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for Remix Production\nDESCRIPTION: Adding a 'start' script to package.json to run Remix in production mode using 'remix-serve' and setting NODE_ENV.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"scripts\": {\n\t\t\"build\": \"remix build\",\n\t\t\"dev\": \"remix dev\",\n\t\t\"start\": \"cross-env NODE_ENV=production remix-serve ./build\"\n\t},\n\t\"dependencies\": {\n\t\t\"@remix-run/react\": \"^1.6.5\",\n\t\t\"@remix-run/serve\": \"^1.6.5\",\n\t\t\"cross-env\": \"^7.0.3\",\n\t\t\"react\": \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\"\n\t},\n\t\"devDependencies\": {\n\t\t\"@remix-run/dev\": \"^1.6.5\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Basic React Component Event Handler Implementation\nDESCRIPTION: Demonstrates a simple React component with an event handler function defined inside the component. Used to illustrate that inline function definitions are not necessarily a performance concern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nfunction MyComponent() {\n\tfunction handleClick() {\n\t\tconsole.log('clicked some other component')\n\t}\n\treturn <SomeOtherComponent onClick={handleClick} />\n}\n```\n\n----------------------------------------\n\nTITLE: Improved Generic Content Access\nDESCRIPTION: More flexible implementation allowing multiple ways to access content.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport getContent from 'react-i18n'\n\n// etc...\ngetContent('pages/home.header.title')\ngetContent('pages/home')('header.title')\ngetContent('pages/home.header')('title')\n// etc...\n```\n\n----------------------------------------\n\nTITLE: Prisma Schema Definition for Postgres Database\nDESCRIPTION: Prisma schema showing the data model for the application including User, Session, Call and PostRead entities. The schema defines relationships between entities and includes enums for Role and Team.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/i-migrated-from-a-postgres-cluster-to-distributed-sqlite-with-litefs.mdx#2025-04-12_snippet_0\n\nLANGUAGE: prisma\nCODE:\n```\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"POSTGRES_DATABASE_URL\")\n}\n\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\nenum Role {\n  ADMIN\n  MEMBER\n}\n\nenum Team {\n  BLUE\n  RED\n  YELLOW\n}\n\nmodel User {\n  id           String     @id @default(uuid())\n  createdAt    DateTime   @default(now())\n  updatedAt    DateTime   @updatedAt\n  email        String     @unique(map: \"User.email_unique\")\n  firstName    String\n  discordId    String?\n  kitId        String?\n  role         Role       @default(MEMBER)\n  team         Team\n  calls        Call[]\n  sessions     Session[]\n  postReads    PostRead[]\n}\n\nmodel Session {\n  id             String   @id @default(uuid())\n  createdAt      DateTime @default(now())\n  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId         String\n  expirationDate DateTime\n}\n\nmodel Call {\n  id          String   @id @default(uuid())\n  createdAt   DateTime @default(now())\n  updatedAt   DateTime @updatedAt\n  title       String\n  description String\n  keywords    String\n  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId      String\n  base64      String\n}\n\nmodel PostRead {\n  id        String   @id @default(uuid())\n  createdAt DateTime @default(now())\n  user      User?    @relation(fields: [userId], references: [id], onDelete: Cascade)\n  userId    String?\n  clientId  String?\n  postSlug  String\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Hook Effect Without Dependencies\nDESCRIPTION: Example of a buggy implementation of useEffect hook in a DogInfo component where dependencies array is empty, causing the effect to only run on mount and miss prop updates.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-pitfalls/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction DogInfo({ dogId }) {\n\tconst [dog, setDog] = useState(null)\n\t// imagine you also have loading/error states. omitting to save space...\n\n\tuseEffect(() => {\n\t\tgetDog(dogId).then((d) => setDog(d))\n\t}, []) // 😱\n\n\treturn <div>{/* render the dog info here */}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Mixed Module System Example\nDESCRIPTION: Shows problematic mixing of ES6 exports with CommonJS require statements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// add.js\nexport default (x, y) => x + y\n\n// bar.js\nconst three = require('./add')(1, 2)\n```\n\n----------------------------------------\n\nTITLE: Development Server Proxy Setup\nDESCRIPTION: Express.js proxy configuration for handling redirects during local development with Create React App.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-client-side-route-redirects.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nfunction proxy(app) {\n\tapp.get(/^\\/$/, (req, res) => res.redirect('/list'))\n}\n\nmodule.exports = proxy\n```\n\n----------------------------------------\n\nTITLE: Using unpkg URL Structure for Package Access\nDESCRIPTION: Demonstrates the basic URL structure for accessing files from npm packages via unpkg. This format allows developers to quickly load any file from any package using a simple URL pattern.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/unpkg-an-open-source-cdn-for-npm.mdx#2025-04-12_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nunpkg.com/:package@:version/:file\n```\n\n----------------------------------------\n\nTITLE: React Element Structure Representation\nDESCRIPTION: This code snippet illustrates the JavaScript object structure of a React element, showing how shallow rendering interprets and represents components.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n{\n  \"type\": \"div\",\n  \"props\": {\n    \"children\": [\n      {\n        \"type\": \"button\",\n        \"props\": {\n          \"onClick\": [Function],\n          \"children\": \"Toggle\"\n        }\n      },\n      {\n        \"type\": [Function: Fade],\n        \"props\": {\n          \"in\": true,\n          \"children\": {\n            \"type\": \"div\",\n            \"props\": {\n              \"children\": \"Hello world\"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Express Route Handler Setup for Polyfill Service\nDESCRIPTION: Basic Express route configuration to serve the polyfill endpoint at /polyfill.js\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/polyfill-as-needed-with-polyfill-service.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\napp.get('/polyfill.js', getBrowserPolyfill)\n```\n\n----------------------------------------\n\nTITLE: CLI Script Structure with Node.js\nDESCRIPTION: Basic structure of a Node.js CLI script showing the shebang line for executing with node and yargs configuration for argument parsing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tips-for-making-a-cli-based-tool-with-node.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n#!/usr/bin/env node\n\n// Rest of the file configures yargs for argument parsing\n```\n\n----------------------------------------\n\nTITLE: Illustrating Variable Assignment and Value Copying in JavaScript\nDESCRIPTION: This code example shows how assigning one variable to another creates a copy of the value, not a reference to the original variable.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/javascript-pass-by-value-function-parameters.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nlet a = 1\nlet b = a\n\nconsole.log(a, b) // 1, 1\n\na = 2\nconsole.log(a, b) // 2, 1 ‼️\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json Build Script\nDESCRIPTION: Package.json configuration with build script and dependencies for Remix application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"scripts\": {\n\t\t\"build\": \"remix build\"\n\t},\n\t\"dependencies\": {\n\t\t\"react\": \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\"\n\t},\n\t\"devDependencies\": {\n\t\t\"@remix-run/dev\": \"^1.6.5\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up CLI Binary Entry Point in package.json\nDESCRIPTION: Configuration in package.json that specifies the binary name and path for the CLI tool. The key becomes the command name and the value is the path to the executable file.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tips-for-making-a-cli-based-tool-with-node.mdx#2025-04-12_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"bin\": {\n    \"split-guide\": \"dist/bin/index.js\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Entry Point for Express App with Environment Handling\nDESCRIPTION: The main entry point for the Express application that handles different environments. In production, it loads the compiled code, while in development it uses nodemon for auto-reloading.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nif (process.env.NODE_ENV === 'production') {\n\trequire('./dist')\n} else {\n\trequire('nodemon')({ script: 'dev.js' })\n}\n```\n\n----------------------------------------\n\nTITLE: Detecting Object Structure Errors with TypeScript\nDESCRIPTION: This snippet illustrates how TypeScript can catch errors related to object structure. It defines a User type and a function that expects an object of that type, which helps identify mismatches in the object structure.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/eliminate-an-entire-category-of-bugs-with-a-few-simple-tools.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nfunction getFullName(user) {\n\tconst {\n\t\tname: { first, middle, last },\n\t} = user\n\treturn [first, middle, last].filter(Boolean).join(' ')\n}\n\ngetFullName({ first: 'Joe', middle: 'Bud', last: 'Matthews' })\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype User = {\n  name: {\n    first: string,\n    middle: string,\n    last: string,\n  },\n}\nfunction getFullName(user: User): string {\n  const {\n    name: {first, middle, last},\n  } = user\n  return [first, middle, last].filter(Boolean).join(' ')\n}\n```\n\n----------------------------------------\n\nTITLE: Adding PRs Welcome Badge in README\nDESCRIPTION: Markdown code snippet for adding a 'PRs Welcome' badge to a project's README file to encourage contributions.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-how-to-contribute-to-open-source.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[![PRs Welcome](https://img.shields.io/badge/prs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com)\n```\n\n----------------------------------------\n\nTITLE: Testing Implementation Details with React and Enzyme in JavaScript\nDESCRIPTION: This example demonstrates a common mistake of testing implementation details in a React component using Enzyme. The test directly accesses component instance state and methods, making it brittle to refactoring and unable to catch real functionality issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/common-testing-mistakes.mdx#2025-04-12_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// counter.js\nimport * as React from 'react'\n\nexport class Counter extends React.Component {\n\tstate = { count: 0 }\n\tincrement = () => this.setState(({ count }) => ({ count: count + 1 }))\n\trender() {\n\t\tconst { count } = this.state\n\t\treturn <button onClick={this.increment}>{count}</button>\n\t}\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// __tests__/counter.js\nimport * as React from 'react'\n// (it's hard to test implementation details with React Testing Library,\n//  so we'll use enzyme in this example 😅)\nimport { mount } from 'enzyme'\nimport { Counter } from '../counter'\n\ntest('the increment method increments count', () => {\n\tconst wrapper = mount(<Counter />)\n\t// don't ever do this:\n\texpect(wrapper.instance().state.count).toBe(0)\n\twrapper.instance().increment()\n\texpect(wrapper.instance().state.count).toBe(1)\n})\n```\n\n----------------------------------------\n\nTITLE: Jest Test Implementation\nDESCRIPTION: Same test rewritten using Jest's expect assertions\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ntest('sums numbers', () => {\n\texpect(add(1, 2)).toBe(4)\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack for React Production Profiling\nDESCRIPTION: Demonstrates how to modify webpack configuration to enable profiling in production builds by aliasing react-dom and scheduler/tracing to their profiling versions. This configuration is typically found in react-scripts webpack config for Create React App projects.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/profile-a-react-app-for-performance.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// ... config ...\nresolve: {\n  // ... config ...\n  alias: {\n    // Support React Native Web\n    // https://www.smashingmagazine.com/2016/08/a-glimpse-into-the-future-with-react-native-for-web/\n    'react-native': 'react-native-web',\n    'react-dom$': 'react-dom/profiling',\n    'scheduler/tracing': 'scheduler/tracing-profiling',\n  },\n  // ... more config ...\n}\n// ... more config ...\n```\n\n----------------------------------------\n\nTITLE: Implementing Firebase Cloud Function\nDESCRIPTION: Implementation of a simple HTTP-triggered Firebase Cloud Function that responds with a greeting message.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst functions = require('firebase-functions')\n\nmodule.exports = {\n\thello: functions.https.onRequest((req, res) => {\n\t\tconst subject = req.query.subject || 'World'\n\t\tres.send(`Hello ${subject}!`)\n\t}),\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nexports.hello = functions.https.onRequest((req, res) => {})\n```\n\n----------------------------------------\n\nTITLE: Original Content Access Pattern\nDESCRIPTION: Original implementation showing how content was accessed using file paths.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport getContentForFile from 'react-i18n'\nconst i18n = getContentForFile('pages/home')\n\n// etc...\ni18n('header.title')\n// etc...\n```\n\n----------------------------------------\n\nTITLE: Basic Filter Implementation\nDESCRIPTION: Initial implementation of a filter function that removes null and undefined values from an array.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/inversion-of-control.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction filter(array) {\n\tlet newArray = []\n\tfor (let index = 0; index < array.length; index++) {\n\t\tconst element = array[index]\n\t\tif (element !== null && element !== undefined) {\n\t\t\tnewArray[newArray.length] = element\n\t\t}\n\t}\n\treturn newArray\n}\n```\n\n----------------------------------------\n\nTITLE: Simplified codegen.macro Usage with External File in JavaScript\nDESCRIPTION: This snippet demonstrates a simplified way to use codegen.macro by importing the workaround code from an external file. This approach improves code maintainability and preserves syntax highlighting and linting capabilities.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-maintainable-workarounds-with-codegen.mdx#2025-04-12_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nPropTypes = codegen`module.exports = require('./prop-types-workaround')`\n```\n\n----------------------------------------\n\nTITLE: Example Usage of babel-plugin-codegen\nDESCRIPTION: This snippet shows an example of using babel-plugin-codegen to generate code at compile time.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/define-function-overload-types-with-type-script.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// @codegen\nconst fs = require('fs')\nconst fruits = fs.readFileSync('./fruit.txt', 'utf8').toString().split('\\n')\nmodule.exports = fruits\n\t.map((fruit) => `export const ${fruit} = '${fruit}';`)\n\t.join('')\n```\n\n----------------------------------------\n\nTITLE: Installing Required Packages for Remix\nDESCRIPTION: Commands to install the core dependencies for a Remix application including React and development tools.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install react react-dom\nnpm install --save-dev @remix-run/dev\n```\n\n----------------------------------------\n\nTITLE: Basic Reducer Function Pattern\nDESCRIPTION: Shows the basic pattern for a reducer function that receives previous state and dispatch arguments and returns new state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-implement-usestate-with-usereducer.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst reducerFn = (prevState, dispatchArg) => newState\n```\n\n----------------------------------------\n\nTITLE: Configuring Babel for Node.js with .babelrc.js\nDESCRIPTION: A Babel configuration file that targets the Node.js version specified in package.json. It uses @babel/preset-env to compile code to the appropriate JavaScript syntax for the specified Node version.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst pkg = require('./package.json')\n\nmodule.exports = {\n\tpresets: [\n\t\t[\n\t\t\t'@babel/preset-env',\n\t\t\t{\n\t\t\t\ttargets: {\n\t\t\t\t\tnode: pkg.engines.node,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t],\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Gemmafy Macro Transform\nDESCRIPTION: Implementation of the gemmafy macro that splits strings and joins them with dog emojis using babel transforms\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/write-your-own-code-transform.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nmodule.exports = createMacro(gemmafyMacro)\n\nfunction gemmafyMacro({ references, state, babel }) {\n\treferences.default.forEach((referencePath) => {\n\t\tconst [firstArgumentPath] = referencePath.parentPath.get('arguments')\n\t\tconst stringValue = firstArgumentPath.node.value\n\t\tconst gemmafied = stringValue.split(' ').join(' 🐶 ')\n\t\tconst gemmafyFunctionCallPath = firstArgumentPath.parentPath\n\t\tconst gemmafiedStringLiteralNode = babel.types.stringLiteral(gemmafied)\n\t\tgemmafyFunctionCallPath.replaceWith(gemmafiedStringLiteralNode)\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Markdown Frontmatter for Blog Post\nDESCRIPTION: This code snippet shows the frontmatter of a Markdown blog post, including metadata such as title, date, description, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/hi-thanks-for-reaching-out-to-me.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Hi, thanks for reaching out to me 👋\ndate: 2020-12-02\ndescription: How to get help from Kent\nbannerCloudinaryId: kentcdodds.com/content/blog/hi-thanks-for-reaching-out-to-me/banner\nbannerCredit: Photo by [Giovanni Calia](https://unsplash.com/photos/Volo9FYUAzU)\n---\n```\n\n----------------------------------------\n\nTITLE: Testing React Component Methods Directly\nDESCRIPTION: This test example demonstrates a problematic approach of testing React component methods directly using shallow rendering. It accesses internal component state and methods, which is considered a poor testing practice.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-never-use-shallow-rendering.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\ntest('toggle toggles the state of show', () => {\n\tconst wrapper = shallow(<HiddenMessage initialShow={true} />)\n\texpect(wrapper.state().show).toBe(true) // initialized properly\n\twrapper.instance().toggle()\n\twrapper.update()\n\texpect(wrapper.state().show).toBe(false) // toggled\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Twitter API Client in TypeScript\nDESCRIPTION: This snippet defines a TwitterApi class that handles interactions with the Twitter API. It includes configuration for API endpoints, bearer token management, and methods for fetching tweet data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/app/utils/twitter/README.md#2025-04-12_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { TweetData } from './api-types'\n\nconst API_ENDPOINT = 'https://api.twitter.com'\nconst SYNDICATION_URL = 'https://syndication.twitter.com'\n\nfunction getToken() {\n  return process.env.TWITTER_BEARER_TOKEN\n}\n\nexport class TwitterApi {\n  private static _instance: TwitterApi\n  private token: string | null = null\n\n  private constructor() {}\n\n  public static get instance(): TwitterApi {\n    return this._instance || (this._instance = new TwitterApi())\n  }\n\n  private async getToken() {\n    if (!this.token) {\n      this.token = getToken()\n    }\n    return this.token\n  }\n\n  async getTweet(id: string): Promise<TweetData> {\n    const requestUrl = `${API_ENDPOINT}/2/tweets/${id}?expansions=author_id,attachments.media_keys,referenced_tweets.id,referenced_tweets.id.author_id,entities.mentions.username,attachments.poll_ids&media.fields=url,alt_text,type,width,height,variants&poll.fields=options,end_datetime,duration_minutes&tweet.fields=created_at,public_metrics,entities,source,text&user.fields=profile_image_url,verified,name,username`\n    const res = await fetch(requestUrl, {\n      headers: {\n        authorization: `Bearer ${await this.getToken()}`,\n      },\n    })\n\n    if (res.ok) {\n      const data = await res.json()\n      return data\n    }\n\n    if (res.status === 404) {\n      return this.getTweetFromScraper(id)\n    }\n\n    throw new Error(`Failed to fetch tweet data: ${res.statusText}`)\n  }\n\n  private async getTweetFromScraper(id: string): Promise<TweetData> {\n    const requestUrl = `${SYNDICATION_URL}/tweet-result?id=${id}`\n    const res = await fetch(requestUrl)\n\n    if (!res.ok) {\n      throw new Error(`Failed to fetch tweet data: ${res.statusText}`)\n    }\n\n    return res.json()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing React Class Component with Local Storage\nDESCRIPTION: An enhanced version of the Counter class component that uses localStorage to persist the count value across page reloads.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-my-tests.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nclass Counter extends React.Component {\n\tstate = {\n\t\tcount: Number(window.localStorage.getItem('count') || 0),\n\t}\n\tincrement = () => this.setState(({ count }) => ({ count: count + 1 }))\n\tcomponentDidMount() {\n\t\twindow.localStorage.setItem('count', this.state.count)\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (prevState.count !== this.state.count) {\n\t\t\twindow.localStorage.setItem('count', this.state.count)\n\t\t}\n\t}\n\trender() {\n\t\treturn <button onClick={this.increment}>{this.state.count}</button>\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Styled-Components Equivalent Example\nDESCRIPTION: Shows how the same component can be written using styled-components syntax for comparison.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nconst MyStyledDiv = styled.div`\n\tfont-size: 20px;\n\ttext-align: center;\n`\n```\n\n----------------------------------------\n\nTITLE: Installing Remix Serve Package\nDESCRIPTION: Command to install the @remix-run/serve package, which is used to run the Remix server.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @remix-run/serve\n```\n\n----------------------------------------\n\nTITLE: Implementing Cache Usage Example with Credits Data\nDESCRIPTION: Demonstrates practical implementation of the cachified function for managing credits data. Shows how to use Redis cache with YAML parsing and data transformation, including error handling and type checking.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nasync function getPeople({\n\trequest,\n\tforceFresh,\n}: {\n\trequest?: Request\n\tforceFresh?: boolean | string\n}) {\n\tconst allPeople = await cachified({\n\t\tcache: redisCache,\n\t\tkey: 'content:data:credits.yml',\n\t\trequest,\n\t\tforceFresh,\n\t\tmaxAge: 1000 * 60 * 60 * 24 * 30,\n\t\tgetFreshValue: async () => {\n\t\t\tconst creditsString = await downloadFile('content/data/credits.yml')\n\t\t\tconst rawCredits = YAML.parse(creditsString)\n\t\t\tif (!Array.isArray(rawCredits)) {\n\t\t\t\tconsole.error('Credits is not an array', rawCredits)\n\t\t\t\tthrow new Error('Credits is not an array.')\n\t\t\t}\n\n\t\t\treturn rawCredits.map(mapPerson).filter(typedBoolean)\n\t\t},\n\t\tcheckValue: (value: unknown) => Array.isArray(value),\n\t})\n\treturn allPeople\n}\n```\n\n----------------------------------------\n\nTITLE: Inline JavaScript Image Loading Optimization\nDESCRIPTION: Example of attempted optimization using inline JavaScript for faster image loading transitions, which was later modified due to React constraints.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/building-an-awesome-image-loading-experience.mdx#2025-04-12_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n// ...\nconst jsImgEl = React.cloneElement(img, {\n\tref: jsImgElRef,\n\tonload: \"this.classList.remove('opacity-0')\",\n\tclassName: clsx(img.props.className, 'transition-opacity', {\n\t\t'opacity-0': !visible,\n\t}),\n})\n// ...\n```\n\n----------------------------------------\n\nTITLE: GitHub Actions Workflow for Firebase Deployment\nDESCRIPTION: YAML configuration for a GitHub Actions workflow that automatically deploys Firebase functions when changes are pushed to the main branch.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nname: deploy\non:\n  push:\n    branches:\n      - main\njobs:\n  main:\n    runs-on: ubuntu-latest\n    steps:\n      - name: ⬇️ Checkout repo\n        uses: actions/checkout@v2\n\n      - name: ⎔ Setup node\n        uses: actions/setup-node@v1\n        with:\n          node-version: 12\n\n      - name: 📥 Download deps\n        working-directory: functions\n        run: npm install\n\n      - name: 🚀 Deploy\n        run: npx firebase-tools deploy --token \"$FIREBASE_TOKEN\"\n        env:\n          FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}\n```\n\n----------------------------------------\n\nTITLE: Setting up Local Development Environment for Remote MCP Server\nDESCRIPTION: Commands to clone the repository, install dependencies, and run the remote MCP server locally for development purposes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/static/README.md#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# clone the repository\ngit clone git@github.com:cloudflare/ai.git\n\n# install dependencies\ncd ai\nnpm install\n\n# run locally\nnpx nx dev remote-mcp-server\n```\n\n----------------------------------------\n\nTITLE: Displaying Themed CloudinaryVideo Component in JSX\nDESCRIPTION: This code renders a CloudinaryVideo component with different cloudinaryId values for dark and light themes, showing the team chooser interface.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/teams.mdx#2025-04-12_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<CloudinaryVideo\n\t\t\tcloudinaryId=\"kentcdodds.com/content/teams/team-chooser-dark\"\n\t\t\taspectRatio=\"250:113\"\n\t\t\tcrop=\"fit\"\n\t\t\twidth={1600}\n\t\t/>\n\t}\n\tlight={\n\t\t<CloudinaryVideo\n\t\t\tcloudinaryId=\"kentcdodds.com/content/teams/team-chooser-light\"\n\t\t\taspectRatio=\"250:113\"\n\t\t\tcrop=\"fit\"\n\t\t\twidth={1600}\n\t\t/>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple Toggle Hook in React\nDESCRIPTION: Implements a basic useToggle hook that provides on state and toggle function. This hook replaces the need for a render props component for simple toggle functionality.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-hooks-whats-going-to-happen-to-render-props.mdx#2025-04-12_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nfunction useToggle(initialOn = false) {\n\tconst [on, setOn] = useState(initialOn)\n\tconst toggle = () => setOn(!on)\n\treturn { on, toggle }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Callout Component in JSX for Remix User Experience\nDESCRIPTION: This code snippet uses a custom Callout component in JSX to emphasize that Remix prioritizes excellent user experience by default. It highlights this as a primary reason for the author's preference for the Remix framework.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<callout-success>\n\tRemix makes a terrific user experience the default. And that's one of the\n\tprimary reasons I love Remix.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Defining Localization Properties File\nDESCRIPTION: Example of a properties file containing localized strings for a homepage in US English.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_0\n\nLANGUAGE: properties\nCODE:\n```\nheader.title=PayPal Rocks\nheader.subtitle=No really, it does\n```\n\n----------------------------------------\n\nTITLE: Configuring URL Redirects for kentcdodds.com\nDESCRIPTION: A configuration file that defines URL redirects, similar to Netlify's _redirects file. It uses path-to-regexp syntax for both source and destination paths, and supports HTTP method specification. Includes both practical redirects and security-related redirects that point suspicious requests to a Rick Roll video.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/server/_redirects.txt#2025-04-12_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n# This is similar to netlify's _redirects file, but we're not using netlify at all\n# So just keep that in mind. This is a hand-rolled thing.\n# Basically, you should be able to use params as documented in path-to-regexp on both the from and to side\n# These will also all apply to every HTTP method unless you specify a method as the first part of the line (comma-separated and all caps).\n\n# I keep making this mistake 😅\n/call                                                                 /calls\n\n# Just a convenience for myself\n/photo                                                                https://res.cloudinary.com/kentcdodds-com/image/upload/v1625699252/kent/profile\n\n################# lol, nice\n# not a single URL actually ends in .php... or .env\n/(.*).php                                                               https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/(.*).env                                                               https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/ads.txt                                                                https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/boaform(.*)                                                            https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/setup.cgi                                                              https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/cgi-bin(.*)                                                            https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/s3cmd.ini                                                              https://www.youtube.com/watch?v=dQw4w9WgXcQ\n/HNAP1(.*)                                                              https://www.youtube.com/watch?v=dQw4w9WgXcQ\n```\n\n----------------------------------------\n\nTITLE: Rendering the App with Context Providers in React\nDESCRIPTION: This code shows how to set up the root rendering of a React application with nested providers for authentication and user data. It wraps the main App component with necessary context providers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/authentication-in-react-applications.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app'\nimport AppProviders from './context'\n\nReactDOM.render(\n\t<AppProviders>\n\t\t<App />\n\t</AppProviders>,\n\tdocument.getElementById('root'),\n)\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for Remix Development\nDESCRIPTION: Adding a 'dev' script to package.json to run Remix in development mode using 'remix dev'.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-remix.mdx#2025-04-12_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"scripts\": {\n\t\t\"build\": \"remix build\",\n\t\t\"dev\": \"remix dev\"\n\t},\n\t\"dependencies\": {\n\t\t\"@remix-run/react\": \"^1.6.5\",\n\t\t\"@remix-run/serve\": \"^1.6.5\",\n\t\t\"react\": \"^18.2.0\",\n\t\t\"react-dom\": \"^18.2.0\"\n\t},\n\t\"devDependencies\": {\n\t\t\"@remix-run/dev\": \"^1.6.5\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Claude Desktop for Remote MCP Server Connection\nDESCRIPTION: JSON configuration to connect Claude Desktop to a remote MCP server deployed on Cloudflare Workers. This setup points to the workers.dev URL of the deployed MCP server.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/static/README.md#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"mcpServers\": {\n    \"math\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"mcp-remote\",\n        \"https://worker-name.account-name.workers.dev/sse\"\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Themed Image Component in React/JSX\nDESCRIPTION: React/JSX component that renders themed images with light and dark variants using Cloudinary. The component includes links to full-size images and proper alt text for accessibility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<Themed\n\tdark={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/fly-request-replays-dark\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/fly-request-replays-dark\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Excalidraw diagram of a user POST request made to different regions being routed to the primary region',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n\tlight={\n\t\t<a\n\t\t\thref=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/fly-request-replays-light\"\n\t\t\ttarget=\"_blank\"\n\t\t>\n\t\t\t<BlogImage\n\t\t\t\tcloudinaryId=\"kentcdodds.com/content/blog/how-i-built-a-modern-website-in-2021/fly-request-replays-light\"\n\t\t\t\timgProps={{\n\t\t\t\t\talt: 'Excalidraw diagram of a user POST request made to different regions being routed to the primary region',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</a>\n\t}\n/>\n```\n\n----------------------------------------\n\nTITLE: Modified JSDOM Error Handler with Console Comparison\nDESCRIPTION: Enhanced error handler code that compares different console object references for debugging.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nthis.on('jsdomError', (e) => {\n\tconsole.log(anyConsole === global.MY_CONSOLE)\n\tanyConsole.error(e.stack, e.detail)\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Firebase Functions Package\nDESCRIPTION: Package.json configuration for Firebase Functions, specifying Node.js version and required dependencies.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"engines\": {\n\t\t\"node\": \"12\"\n\t},\n\t\"dependencies\": {\n\t\t\"firebase-admin\": \"^9.3.0\",\n\t\t\"firebase-functions\": \"^3.11.0\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Route Redirect Pattern\nDESCRIPTION: Example of an acceptable use of Redirect for conditional routing based on authentication status.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-client-side-route-redirects.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<Route exact path=\"/\">\n\t{loggedIn ? <Redirect to=\"/dashboard\" /> : <PublicHomePage />}\n</Route>\n```\n\n----------------------------------------\n\nTITLE: Exploring Package Dependencies for Contribution Opportunities\nDESCRIPTION: Example showing how to examine package.json dependencies to find potential projects to contribute to\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-open-source-project-should-i-contribute-to.mdx#2025-04-12_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"package.json\"\n```\n\n----------------------------------------\n\nTITLE: Structuring Flexible Meeting Schedule for KCD Learning Club\nDESCRIPTION: This code snippet shows how to create a more flexible meeting schedule for a KCD Learning Club, with meetings twice a week instead of weekly.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/clubs.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n```\nMondays and Thursdays at 3:30 PM MST:\n\n1. Sept. 14th: Fundamentals of Testing in JavaScript\n2. Sept. 17th: JavaScript Mocking Fundamentals\n3. Sept. 21st: Configure Jest for Testing JavaScript Applications\n4. Sept. 24th: Test React Components with Jest and React Testing Library\n5. Sept. 28th: Install, Configure, and Script Cypress for JavaScript Web Applications\n6. Oct. 1st: Use DOM Testing Library to test any JS framework\n7. Oct. 5th: Test Node.js Backends\n```\n```\n\n----------------------------------------\n\nTITLE: Rendering Callout Info Block in Markdown\nDESCRIPTION: This snippet demonstrates how to create a callout information block in Markdown, emphasizing Kent's expectation for conferences to cover speakers' expenses.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/confs.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-info>\n\tI expect conferences to pay for all of the speakers' conference ticket,\n\tflights, hotel, and domestic travel because otherwise the speaker pool is\n\tlimited to only those who can afford to travel. I don't attend conferences\n\twhich do not pay for these things for speakers.\n</callout-info>\n```\n\n----------------------------------------\n\nTITLE: Defining Page Metadata in Markdown\nDESCRIPTION: This snippet defines the metadata for the page using YAML front matter in a Markdown file. It includes the title, description, banner image details, and image credits.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/appearances.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Appearances\ndescription: Podcasts, interviews, and blogposts where you can find me featured\nbannerCloudinaryId: kent/kent-cory-podcast\nbannerCredit: 'Photo shared by Cory House:\n  https://x.com/housecor/status/746744878973911040'\nbannerAlt: Kent talking with Cory House with recording equipment\n---\n```\n\n----------------------------------------\n\nTITLE: Incorrect Form Input Labeling in HTML\nDESCRIPTION: An example of an incorrectly labeled form input, which is not accessible to screen readers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them.mdx#2025-04-12_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\nUsername:\n<input />\n```\n\n----------------------------------------\n\nTITLE: Frontmatter Configuration in Markdown\nDESCRIPTION: YAML frontmatter configuration for a blog post, including title, date, description, meta keywords, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/goodbye-medium.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Goodbye Medium\ndate: 2019-02-25\ndescription: I've migrated from Medium to kentcdodds.com/blog... Here's why\nmeta:\n  keywords:\n    - career\nbannerCloudinaryId: unsplash/photo-1507527413181-c37774c5cb27\nbannerCredit: Photo by [Bobby Johnson](https://unsplash.com/photos/swCOXlxmr5U)\n---\n```\n\n----------------------------------------\n\nTITLE: Optimizing React Performance with State Colocation\nDESCRIPTION: This code snippet shows how to improve performance by colocating the 'dog' state within the DogName component, reducing unnecessary re-renders of the SlowComponent.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/state-colocation-will-make-your-react-app-faster/index.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nfunction DogName({ time }) {\n\tconst [dog, setDog] = React.useState('')\n\treturn (\n\t\t<div>\n\t\t\t<label htmlFor=\"dog\">Dog Name</label>\n\t\t\t<br />\n\t\t\t<input id=\"dog\" value={dog} onChange={(e) => setDog(e.target.value)} />\n\t\t\t<p>{dog ? `${dog}'s favorite number is ${time}.` : 'enter a dog name'}</p>\n\t\t</div>\n\t)\n}\n\nfunction App() {\n\t// this is \"global state\"\n\tconst [time, setTime] = React.useState(200)\n\treturn (\n\t\t<div>\n\t\t\t<DogName time={time} />\n\t\t\t<SlowComponent time={time} onChange={setTime} />\n\t\t</div>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Alternative implementation of arrayify using filter\nDESCRIPTION: An alternative implementation of the arrayify function that uses array filtering to handle falsy values, demonstrating how code coverage can be misleading regarding use case coverage.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-know-what-to-test.mdx#2025-04-12_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nfunction arrayify(maybeArray) {\n\tif (Array.isArray(maybeArray)) {\n\t\treturn maybeArray\n\t} else {\n\t\treturn [maybeArray].filter(Boolean)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Analyzing Code Base Statistics with cloc\nDESCRIPTION: Terminal command using cloc to analyze the size and composition of the codebase, showing distribution of files and code lines across different programming languages.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npx cloc ./app ./types ./tests ./styles ./mocks ./cypress ./prisma ./.github\n     266 text files.\n     257 unique files.\n      15 files ignored.\n\ngithub.com/AlDanial/cloc v 1.90  T=0.16 s (1601.9 files/s, 194240.7 lines/s)\n-------------------------------------------------------------------------------\nLanguage                     files          blank        comment           code\n-------------------------------------------------------------------------------\nTypeScript                     219           2020            583          21582\nCSS                             10            198            301           4705\nJSON                             7              0              0            609\nYAML                             2             43             13            232\nSQL                              7             20             25             52\nJavaScript                       4              2              3             42\nMarkdown                         1              0              0              2\nTOML                             1              0              2              1\n-------------------------------------------------------------------------------\nSUM:                           251           2283            927          27225\n-------------------------------------------------------------------------------\n```\n\n----------------------------------------\n\nTITLE: Cloning and Running MCP Server Locally\nDESCRIPTION: Commands to clone the repository, install dependencies, and run the MCP server locally for development.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/README.md#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# clone the repository\ngit clone git@github.com:cloudflare/ai.git\n\n# install dependencies\ncd ai\nnpm install\n\n# run locally\nnpx nx dev remote-mcp-server\n```\n\n----------------------------------------\n\nTITLE: Custom listify function implementation in JavaScript\nDESCRIPTION: This snippet provides a custom implementation of a listify function that creates human-readable lists from arrays.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfunction listify(\n\tarray,\n\t{ conjunction = 'and ', stringify = (item) => item.toString() } = {},\n) {\n\treturn array.reduce((list, item, index) => {\n\t\tif (index === 0) return stringify(item)\n\t\tif (index === array.length - 1) {\n\t\t\tif (index === 1) return `${list} ${conjunction}${stringify(item)}`\n\t\t\telse return `${list}, ${conjunction}${stringify(item)}`\n\t\t}\n\t\treturn `${list}, ${stringify(item)}`\n\t}, '')\n}\n```\n\n----------------------------------------\n\nTITLE: Analyzing Node Modules Content with cloc\nDESCRIPTION: Command sequence to clone a repository, install dependencies, and analyze the content types in node_modules using the cloc utility.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ngit clone https://github.com/downshift-js/downshift.git\ncd downshift\nnpm install\nnpx cloc ./node_modules\n```\n\n----------------------------------------\n\nTITLE: Starting Node Server with MSW Mocks\nDESCRIPTION: Commands for starting a Node.js server with and without MSW (Mock Service Worker) mocks enabled. The mocks are loaded using the Node.js --require flag.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnode .\n```\n\nLANGUAGE: bash\nCODE:\n```\nnode --require ./mocks .\n```\n\n----------------------------------------\n\nTITLE: Configuring URL Redirects for Podcast Episodes\nDESCRIPTION: URL redirect configuration that maps old podcast episode URLs to a shorter, more streamlined URL structure. Includes individual redirects for three seasons of podcast episodes and catch-all redirects for podcast sections.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/server/_redirects.txt#2025-04-12_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n################ old podcast URLs:\n/chats-with-kent-podcast/seasons/01/episodes/growing-your-skills-and-career-through-teaching-with-ali-spittel                   /chats/01/01/growing-your-skills-and-career-through-teaching-with-ali-spittel\n/chats-with-kent-podcast/seasons/01/episodes/establishing-your-personal-brand-with-cassidy-williams                             /chats/01/02/establishing-your-personal-brand-with-cassidy-williams\n/chats-with-kent-podcast/seasons/01/episodes/realigning-your-model-of-react-after-hooks-with-dan-abramov                        /chats/01/03/realigning-your-model-of-react-after-hooks-with-dan-abramov\n/chats-with-kent-podcast/seasons/01/episodes/a-rundown-of-whats-next-for-react-with-dan-abramov                                 /chats/01/04/a-rundown-of-whats-next-for-react-with-dan-abramov\n/chats-with-kent-podcast/seasons/01/episodes/make-your-apps-resilient-finite-state-machines-with-david-khourshid                /chats/01/05/make-your-apps-resilient-finite-state-machines-with-david-khourshid\n/chats-with-kent-podcast/seasons/01/episodes/creating-successful-mentor-relationships-with-emma-bostian                         /chats/01/06/creating-successful-mentor-relationships-with-emma-bostian\n/chats-with-kent-podcast/seasons/01/episodes/funding-open-source-maintainers-using-ethical-advertising-with-eric-berry          /chats/01/07/funding-open-source-maintainers-using-ethical-advertising-with-eric-berry\n/chats-with-kent-podcast/seasons/01/episodes/the-state-of-webassembly-with-lin-clark-and-till-schneidereit                      /chats/01/08/the-state-of-webassembly-with-lin-clark-and-till-schneidereit\n/chats-with-kent-podcast/seasons/01/episodes/a-few-excellent-reasons-for-why-you-should-give-graphql-a-try-with-peggy-rayzis    /chats/01/09/a-few-excellent-reasons-for-why-you-should-give-graphql-a-try-with-peggy-rayzis\n/chats-with-kent-podcast/seasons/01/episodes/there-arent-any-shortcuts-to-expertise-with-sara-vieira                            /chats/01/10/there-arent-any-shortcuts-to-expertise-with-sara-vieira\n/chats-with-kent-podcast/seasons/01/episodes/become-intentional-with-your-time-with-scott-hanselman                             /chats/01/11/become-intentional-with-your-time-with-scott-hanselman\n/chats-with-kent-podcast/seasons/01/episodes/you-can-learn-a-lot-for-the-low-price-of-your-ego-with-shawn-wang                  /chats/01/12/you-can-learn-a-lot-for-the-low-price-of-your-ego-with-shawn-wang\n/chats-with-kent-podcast/seasons/01/episodes/getting-started-with-code-live-streaming-with-suz-hinton                           /chats/01/13/getting-started-with-code-live-streaming-with-suz-hinton\n/chats-with-kent-podcast/seasons/01/episodes/lessons-learned-from-four-major-projects-with-shirley-wu                           /chats/01/14/lessons-learned-from-four-major-projects-with-shirley-wu\n/chats-with-kent-podcast/seasons/02/episodes/lindsey-kopacz-chats-with-kent-about-a11y                                          /chats/02/01/lindsey-kopacz-chats-with-kent-about-a11y\n/chats-with-kent-podcast/seasons/02/episodes/bianca-gandolfo-chats-with-kent-about-lifestyle-design                             /chats/02/02/bianca-gandolfo-chats-with-kent-about-lifestyle-design\n/chats-with-kent-podcast/seasons/02/episodes/jenn-creighton-chats-with-kent-about-avoiding-an-apropcolypse                      /chats/02/03/jenn-creighton-chats-with-kent-about-avoiding-an-apropcolypse\n/chats-with-kent-podcast/seasons/02/episodes/henry-zhu-chats-with-kent-about-the-human-side-of-open-source                      /chats/02/04/henry-zhu-chats-with-kent-about-the-human-side-of-open-source\n/chats-with-kent-podcast/seasons/02/episodes/jen-luker-chats-with-kent-about-finding-inspiration-from-anywhere                  /chats/02/05/jen-luker-chats-with-kent-about-finding-inspiration-from-anywhere\n/chats-with-kent-podcast/seasons/02/episodes/kelly-vaughn-chats-with-kent-about-personal-finance                                /chats/02/06/kelly-vaughn-chats-with-kent-about-personal-finance\n/chats-with-kent-podcast/seasons/02/episodes/nader-dabit-chats-with-kent-about-keeping-an-optimistic-mindset                    /chats/02/07/nader-dabit-chats-with-kent-about-keeping-an-optimistic-mindset\n/chats-with-kent-podcast/seasons/02/episodes/angie-jones-chats-with-kent-about-automated-visual-testing                         /chats/02/08/angie-jones-chats-with-kent-about-automated-visual-testing\n/chats-with-kent-podcast/seasons/02/episodes/erik-rasmussen-chats-with-kent-about-maintaining-open-source-libraries             /chats/02/09/erik-rasmussen-chats-with-kent-about-maintaining-open-source-libraries\n/chats-with-kent-podcast/seasons/02/episodes/ken-wheeler-chats-with-kent-about-going-for-challenging-opportunities              /chats/02/10/ken-wheeler-chats-with-kent-about-going-for-challenging-opportunities\n/chats-with-kent-podcast/seasons/02/episodes/eve-porcello-chats-with-kent-about-sustainably-expanding-skills                    /chats/02/11/eve-porcello-chats-with-kent-about-sustainably-expanding-skills\n/chats-with-kent-podcast/seasons/02/episodes/laurie-barth-chats-with-kent-about-growing-outside-of-your-comfort-zone            /chats/02/12/laurie-barth-chats-with-kent-about-growing-outside-of-your-comfort-zone\n/chats-with-kent-podcast/seasons/03/episodes/alex-anderson-creates-web-based-spaceship-controls                                 /chats/03/01/alex-anderson-creates-web-based-spaceship-controls\n/chats-with-kent-podcast/seasons/03/episodes/amelia-wattenberger-breaks-the-ux-mold                                             /chats/03/02/amelia-wattenberger-breaks-the-ux-mold\n/chats-with-kent-podcast/seasons/03/episodes/courtney-mccleve-on-developing-empathy                                             /chats/03/03/courtney-mccleve-on-developing-empathy\n/chats-with-kent-podcast/seasons/03/episodes/dr-michaela-greiler-makes-code-reviews-your-teams-superpower                       /chats/03/04/dr-michaela-greiler-makes-code-reviews-your-teams-superpower\n/chats-with-kent-podcast/seasons/03/episodes/talia-nassi-on-testing-in-production                                               /chats/03/05/talia-nassi-on-testing-in-production\n/chats-with-kent-podcast/seasons/03/episodes/justin-mcmurdie-breaks-apps-into-micro-services                                    /chats/03/06/justin-mcmurdie-breaks-apps-into-micro-services\n/chats-with-kent-podcast/seasons/03/episodes/michael-chan-teaches-you-how-to-break-into-the-industry                            /chats/03/07/michael-chan-teaches-you-how-to-break-into-the-industry\n/chats-with-kent-podcast/seasons/03/episodes/michael-chan-encapsulates-state                                                    /chats/03/08/michael-chan-encapsulates-state\n/chats-with-kent-podcast/seasons/03/episodes/preethi-kasireddy-reinvents-herself                                                /chats/03/09/preethi-kasireddy-reinvents-herself\n/chats-with-kent-podcast/seasons/03/episodes/saron-yitbareks-path-into-tech                                                     /chats/03/10/saron-yitbareks-path-into-tech\n/chats-with-kent-podcast/seasons/03/episodes/serene-yew-provides-mentorship                                                     /chats/03/11/serene-yew-provides-mentorship\n/chats-with-kent-podcast/seasons/03/episodes/tanner-linsley-separates-ui-state-and-server-state                                 /chats/03/12/tanner-linsley-separates-ui-state-and-server-state\n\n/chats-with-kent-podcast                                                                                                        /chats\n# podcast catch-all\n/chats-with-kent-podcast/seasons/:seasonNumber/:path*       /chats/:seasonNumber\n\n/workshops/past                                            /workshops\n/workshops/remix-fundamentals                              /workshops/web-app-fundamentals\n```\n\n----------------------------------------\n\nTITLE: Function Declarations in TypeScript\nDESCRIPTION: Examples of function declarations with inferred and explicit return types.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// inferred return type\nfunction sum(a: number, b: number) {\n\treturn a + b\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n// defined return type\nfunction sum(a: number, b: number): number {\n\treturn a + b\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Frontmatter for Blog Post\nDESCRIPTION: YAML frontmatter defining metadata for the blog post, including title, date, description, categories, keywords, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-next-chapter-epicai-pro.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: 'The next chapter: EpicAI.pro'\ndate: 2025-04-10\ndescription: \"What I'm working on with AI education and why I think it's the future.\"\ncategories:\n  - ai\nmeta:\n  keywords:\n    - ai\n    - mcp\n    - education\n    - epicai.pro\nbannerCloudinaryId: unsplash/photo-1500674425229-f692875b0ab7\nbannerAlt: Photo of island and thunder\nbannerCredit: Photo by [Johannes\n  Plenio](https://unsplash.com/photos/photo-of-island-and-thunder-E-Zuyev2XWo)\n---\n```\n\n----------------------------------------\n\nTITLE: Failed Generic Constraint Attempt\nDESCRIPTION: Demonstrates an unsuccessful attempt to create a generic constrained function that fails due to TypeScript limitations.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-write-a-constrained-identity-function-in-typescript.mdx#2025-04-12_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nconst constrain = <Given, Inferred extends Given>(item: Inferred) => item\n\n// @ts-expect-error Expected 2 type arguments, but got 1.(2558)\nconst numbers = constrain<Record<string, number>>({ one: 1 /* etc. */ })\n```\n\n----------------------------------------\n\nTITLE: Structuring Weekly Meeting Schedule for KCD Learning Club\nDESCRIPTION: This code snippet demonstrates how to structure a weekly meeting schedule for a KCD Learning Club. It includes the meeting time, timezone, and topics for each session.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/clubs.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```\nWeekly on Mondays at 3:30 PM MST:\n\n1. Sept. 14th: Fundamentals of Testing in JavaScript\n2. Sept. 21st: JavaScript Mocking Fundamentals\n3. Sept. 28th: Configure Jest for Testing JavaScript Applications\n4. Oct. 5th: Test React Components with Jest and React Testing Library\n5. Oct. 12th: Install, Configure, and Script Cypress for JavaScript Web Applications\n6. Oct. 19th: Use DOM Testing Library to test any JS framework\n7. Oct. 26th: Test Node.js Backends\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing fetchPokemon function in TypeScript\nDESCRIPTION: This snippet defines a function to fetch Pokemon data from a GraphQL API using the fetch API. It includes error handling and data formatting.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/using-fetch-with-type-script.mdx#2025-04-12_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst formatDate = (date) =>\n\t`${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')} ${String(\n\t\tdate.getSeconds(),\n\t).padStart(2, '0')}.${String(date.getMilliseconds()).padStart(3, '0')}`\n\nasync function fetchPokemon(name) {\n\tconst pokemonQuery = `\n    query PokemonInfo($name: String) {\n      pokemon(name: $name) {\n        id\n        number\n        name\n        image\n        attacks {\n          special {\n            name\n            type\n            damage\n          }\n        }\n      }\n    }\n  `\n\n\tconst response = await window.fetch('https://graphql-pokemon2.vercel.app/', {\n\t\t// learn more about this API here: https://graphql-pokemon2.vercel.app/\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'content-type': 'application/json;charset=UTF-8',\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tquery: pokemonQuery,\n\t\t\tvariables: { name: name.toLowerCase() },\n\t\t}),\n\t})\n\n\tconst { data, errors } = await response.json()\n\tif (response.ok) {\n\t\tconst pokemon = data?.pokemon\n\t\tif (pokemon) {\n\t\t\t// add fetchedAt helper (used in the UI to help differentiate requests)\n\t\t\tpokemon.fetchedAt = formatDate(new Date())\n\t\t\treturn pokemon\n\t\t} else {\n\t\t\treturn Promise.reject(new Error(`No pokemon with the name \"${name}\"`))\n\t\t}\n\t} else {\n\t\t// handle the graphql errors\n\t\tconst error = new Error(\n\t\t\terrors?.map((e) => e.message).join('\\n') ?? 'unknown',\n\t\t)\n\t\treturn Promise.reject(error)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up a JavaScript Open Source Project\nDESCRIPTION: A common sequence of steps to set up a JavaScript open source project on your local machine. This includes cloning the repository, installing dependencies, and running tests.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-learn-an-open-source-codebase.mdx#2025-04-12_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n1.  clone repo\n2.  npm install\n3.  npm test\n```\n\n----------------------------------------\n\nTITLE: Required HTML Structure for Impure Implementation\nDESCRIPTION: HTML structure required by the impure module implementation to provide server data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/pure-modules.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<script type=\"application/json\" id=\"server-data\">\n\t{ \"user\": null }\n</script>\n```\n\n----------------------------------------\n\nTITLE: Exploring Intl.ListFormat with different locales in JavaScript\nDESCRIPTION: This snippet shows how Intl.ListFormat behaves differently with various locales and formatting options.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/listify-a-java-script-array.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nnew Intl.ListFormat('en', { style: 'narrow', type: 'unit' }).format(items)\n// Sojourner Opportunity Spirit Curiosity Perseverance\n\nnew Intl.ListFormat('es', { style: 'narrow', type: 'unit' }).format(items)\n// Sojourner Opportunity Spirit Curiosity Perseverance\n\nnew Intl.ListFormat('de', { style: 'narrow', type: 'unit' }).format(items)\n// Sojourner, Opportunity, Spirit, Curiosity und Perseverance\n```\n\n----------------------------------------\n\nTITLE: Setting Firebase Project Association\nDESCRIPTION: Configuration file that associates the local repository with a specific Firebase project for deployment purposes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"projects\": {\n\t\t\"default\": \"{your-project-id}\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Jest Error Output Example\nDESCRIPTION: Full error output from Jest showing the error chain through JSDOM, React, and custom code when handling an invalid HTML attribute combination.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nError: Uncaught [Error: downshift: You provided the id of \"foo\" for your input, but the htmlFor of your label is \"bar\". You must either remove the id from your input or set the htmlFor of the label equal to the input id.]\n    at reportException (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)\n    at invokeEventListeners (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:209:9)\n    at HTMLUnknownElementImpl._dispatch (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:119:9)\n    at HTMLUnknownElementImpl.dispatchEvent (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:82:17)\n    at HTMLUnknownElementImpl.dispatchEvent (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:30:27)\n    at HTMLUnknownElement.dispatchEvent (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:143:21)\n    at Object.invokeGuardedCallbackDev (/Users/kdodds/Developer/downshift/node_modules/react-dom/cjs/react-dom.development.js:581:16)\n    at invokeGuardedCallback (/Users/kdodds/Developer/downshift/node_modules/react-dom/cjs/react-dom.development.js:438:27)\n    at renderRoot (/Users/kdodds/Developer/downshift/node_modules/react-dom/cjs/react-dom.development.js:10366:7)\n```\n\n----------------------------------------\n\nTITLE: Running Static Tests Commands\nDESCRIPTION: Commands for running formatting, linting, and type checking operations individually on the codebase.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nnpm run format\nnpm run lint\nnpm run typecheck\n```\n\n----------------------------------------\n\nTITLE: Embedding Google Calendar in JSX\nDESCRIPTION: This code snippet embeds a Google Calendar iframe into a JSX component. It displays Kent's live streaming schedule with custom styling and parameters.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/live.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<div className={{ overflowY: 'scroll' }}>\n\t<iframe\n\t\tsrc=\"https://calendar.google.com/calendar/embed?height=600&wkst=1&bgcolor=%23ffffff&ctz=America%2FDenver&showCalendars=0&showTabs=1&showPrint=0&title=EpicWeb.dev%20Live%20Streaming%20Schedule&src=Y19wNWdyaTl1bHVtNWw3MDBpZHFmcmw3c210Y0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23C0CA33\"\n\t\tstyle={{\n\t\t\tborder: 'solid 1px #777',\n\t\t\tminWidth: '400px',\n\t\t\theight: '450px',\n\t\t\twidth: '100%',\n\t\t}}\n\t\tframeBorder=\"0\"\n\t\tscrolling=\"no\"\n\t></iframe>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Non-Compound Component Alternative\nDESCRIPTION: Shows a less elegant alternative to compound components, demonstrating why compound components are preferable for complex interfaces.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/compound-components-with-react-hooks.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<select options=\"key1:value1;key2:value2;key3:value3\"></select>\n```\n\n----------------------------------------\n\nTITLE: Creating External Link in Markdown\nDESCRIPTION: This code snippet demonstrates how to create an external link in Markdown, linking to the Writing Through Brambles website.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/writing-blog/first-conference-part-3.mdx#2025-04-12_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n[writingthroughbrambles.com](http://www.writingthroughbrambles.com)\n```\n\n----------------------------------------\n\nTITLE: Displaying Income Sources Table in Markdown\nDESCRIPTION: This code snippet shows a markdown table listing various income sources for Kent C. Dodds, including descriptions and who pays for each source. It's wrapped in a div with a style for horizontal scrolling.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/transparency.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<div style={{overflowX: 'scroll'}}>\n\n| Source                                                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Who pays                      |\n| ----------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |\n| [EpicWeb.dev](https://www.epicweb.dev)                            | [A collaborative effort](https://www.epicweb.dev/credits) to teach people Full Stack web development. It's packed full of knowledge, some of which is open source. I sell lifetime licenses to access the 450+ videos.                                                                                                                                                                                                                                        | Engineers and their employers |\n| [EpicReact.dev](https://epicreact.dev)                            | [A collaborative effort](https://epicreact.dev/credits) to teach people React. It's packed full of knowledge, some of which is open source. I sell lifetime licenses to access the 350+ videos.                                                                                                                                                                                                                                                               | Engineers and their employers |\n| [TestingJavaScript.com](https://testingjavascript.com)            | Similar to EpicReact, but for Testing.                                                                                                                                                                                                                                                                                                                                                                                                                        | Engineers and their employers |\n| [Egghead.io](https://kcd.im/egghead)                              | I'm one of many instructors on this platform. I have hundreds of videos teaching JavaScript, React, Testing, and more (though it's not nearly as comprehensive as EpicReact or TestingJavaScript). Many are free to access. Many are paid courses. Egghead charges for a yearly subscription and I get paid based on how long people spend watching my videos relative to other's videos. I also get a bonus when people subscribe with my affiliation links. | Engineers and their employers |\n| [Live Workshops](/workshops)                                      | I sell individual tickets to workshops in collaboration with conferences or other partners. Sometimes I will sell an entire workshop or series of workshops to businesses for their engineers.                                                                                                                                                                                                                                                                | Engineers and their employers |\n| [Frontend Masters](https://kcd.im/fem)                            | Very similar to Egghead.                                                                                                                                                                                                                                                                                                                                                                                                                                      | Engineers and their employers |\n| [Consulting](http://kcd.im/consult)                               | Occasionally someone will grab an hour of my paid time.                                                                                                                                                                                                                                                                                                                                                                                                       | Engineers and their employers |\n| [Amazon Associates](https://affiliate-program.amazon.com/)        | All amazon links you find on my website have my Amazon Affiliate code attached to them and I get a tiny bit of money from that.                                                                                                                                                                                                                                                                                                                               | Amazon                        |\n| [Fathom affiliates](https://app.usefathom.com/share/hjuudkmt/kcd) | My analytics resource is Fathom and they're amazing. When people sign up with my link I get a little money from that.                                                                                                                                                                                                                                                                                                                                         | Fathom                        |\n\n</div>\n```\n\n----------------------------------------\n\nTITLE: Listing Podcast Series in Markdown\nDESCRIPTION: This snippet lists Kent C. Dodds' own podcast series using Markdown syntax. It includes bullet points for each podcast with hyperlinks to their respective websites.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/appearances.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n### My own:\n\n- [Calls with Kent](https://kentcdodds.com/calls)\n- [Chats with Kent](https://kentcdodds.com/chats)\n- [Remix Podcast](https://remix.transistor.fm)\n- [EpicReact.dev Podcast](https://epicreact.dev/podcast)\n- [3 Minutes with Kent](https://briefs.fm/3-minutes-with-kent)\n- [React30](https://react30.com)\n- [JavaScriptAir](https://javascriptair.com)\n- [AngularAir](https://angularair.com)\n```\n\n----------------------------------------\n\nTITLE: Displaying Kody the Koala Image with Custom Styling in JSX\nDESCRIPTION: This code renders an image of Kody the Koala mascot with specific styling, including centered alignment, max width, and a custom border radius.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/teams.mdx#2025-04-12_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<img\n\tsrc=\"https://res.cloudinary.com/kentcdodds-com/image/upload/kentcdodds.com/illustrations/kody_profile_white\"\n\talt=\"Koala\"\n\tstyle={{\n\t\tdisplay: 'block',\n\t\tmargin: '0 auto 30px auto',\n\t\tmaxWidth: '250px',\n\t\twidth: '100%',\n\t\tborderRadius: '0 0 50% 50%',\n\t}}\n/>\n```\n\n----------------------------------------\n\nTITLE: Code Statistics Output from cloc Analysis\nDESCRIPTION: Statistical output showing the breakdown of file types and line counts in the node_modules directory.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_4\n\nLANGUAGE: text\nCODE:\n```\n------------------------------------------------\nLanguage     files  blank     comment    code\n------------------------------------------------\nJavaScript   21024  283714    342123    1735415\nJSON         2807   1422      0         550205\nMarkdown     1736   66030     4         168463\nTypeScript   1032   17525     56659     127105\nHTML         60     2463      40        20773\nXML          45     241       13        9377\nC/C++ Header 20     1115      325       5571\n...\n```\n\n----------------------------------------\n\nTITLE: Module with Side Effects\nDESCRIPTION: Example of problematic implementation with side effects during module import.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improving-the-usability-of-your-modules.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// react-i18n/index.js\n// ... stuff\n// side-effect!\nconst content = JSON.parse(document.getElementById('react-messages'))\n// ... more stuff\nexport { getContentForFile as default, init }\n```\n\n----------------------------------------\n\nTITLE: Configuring Firebase Project Settings\nDESCRIPTION: Basic Firebase configuration file that initializes a Firebase project. This is a required file even with minimal configuration.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{}\n```\n\n----------------------------------------\n\nTITLE: Using CLI Tool in npm Scripts\nDESCRIPTION: Example of how to use a locally installed CLI tool in package.json scripts section\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/tips-for-making-a-cli-based-tool-with-node.mdx#2025-04-12_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"scripts\": {\n    \"generate\": \"split-guide\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Callout in Markdown\nDESCRIPTION: This snippet demonstrates how to create a callout block in markdown to highlight important information. It uses custom HTML-like syntax, likely processed by a specific markdown renderer.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-getting-into-open-source-has-been-awesome-for-me.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success class=\"important\">\n\tI got over one of the hardest hurdles in open source: The first contribution.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Testing React Accordion with Enzyme in TypeScript\nDESCRIPTION: Example of implementation detail testing using Enzyme, showing how to test internal state and component structure. These tests are brittle and prone to breaking during refactoring.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/testing-implementation-details.mdx#2025-04-12_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport Enzyme, { mount } from 'enzyme'\nimport EnzymeAdapter from 'enzyme-adapter-react-16'\nimport Accordion from '../accordion'\n\nEnzyme.configure({ adapter: new EnzymeAdapter() })\n\ntest('setOpenIndex sets the open index state properly', () => {\n\tconst wrapper = mount(<Accordion items={[]} />)\n\texpect(wrapper.state('openIndex')).toBe(0)\n\twrapper.instance().setOpenIndex(1)\n\texpect(wrapper.state('openIndex')).toBe(1)\n})\n\ntest('Accordion renders AccordionContents with the item contents', () => {\n\tconst hats = { title: 'Favorite Hats', contents: 'Fedoras are classy' }\n\tconst footware = {\n\t\ttitle: 'Favorite Footware',\n\t\tcontents: 'Flipflops are the best',\n\t}\n\tconst wrapper = mount(<Accordion items={[hats, footware]} />)\n\texpect(wrapper.find('AccordionContents').props().children).toBe(hats.contents)\n})\n```\n\n----------------------------------------\n\nTITLE: Embedding Twitter Post in Markdown\nDESCRIPTION: This code snippet demonstrates how to embed a Twitter post in Markdown format, using a link to the tweet.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/writing-blog/first-conference-part-3.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096440304041775104\n```\n\n----------------------------------------\n\nTITLE: Example of Code Hidden by Comments\nDESCRIPTION: Demonstrates how important code can be obscured by large blocks of commented code, making it harder to scan and understand the codebase.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/please-dont-commit-commented-out-code.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// dozens\n//\n// of\n//\n// lines\n//\n// of\n//\n// commented\n//\n// code\nsomeImportantCode()\n// dozens\n//\n// of\n//\n// more\n//\n// lines\n//\n// of\n//\n// commented\n//\n// code\n```\n\n----------------------------------------\n\nTITLE: Markdown Link References for Contributing Resources\nDESCRIPTION: HTML comment-wrapped markdown link references for project resources, including an Egghead.io course on OSS contributions and the project's GitHub issues page.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_17\n\nLANGUAGE: markdown\nCODE:\n```\n<!-- prettier-ignore-start -->\n[egghead]: https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github\n[issues]: https://github.com/kentcdodds/kentcdodds.com/issues\n<!-- prettier-ignore-end -->\n```\n\n----------------------------------------\n\nTITLE: Global Console Testing Setup\nDESCRIPTION: Code to store a reference to the global console object for testing purposes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nglobal.MY_CONSOLE = console\n```\n\n----------------------------------------\n\nTITLE: Basic JavaScript Test Example\nDESCRIPTION: Simple test example showing a basic assertion using vanilla JavaScript\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/improve-test-error-messages-of-your-abstractions/index.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst add = (a, b) => a + b\n\nif (add(1, 2) !== 4) {\n\tthrow new Error('Expected 3 to be 4')\n}\n```\n\n----------------------------------------\n\nTITLE: Dockerfile Modifications for Disabling LiteFS\nDESCRIPTION: Changes required in the Dockerfile to disable LiteFS and use direct SQLite access instead.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_13\n\nLANGUAGE: Dockerfile\nCODE:\n```\n# TODO: enable litefs\n# ENV LITEFS_DIR=\"/litefs\"\nENV LITEFS_DIR=\"/data/litefs-disabled\"\n\n...\n\n# TODO: enable litefs proxy\n# ENV PORT=\"8081\"\nENV PORT=\"8080\"\n\n...\n\n# TODO: enable litefs\n# COPY --from=flyio/litefs:0.5.10 /usr/local/bin/litefs /usr/local/bin/litefs\n# ADD other/litefs.yml /etc/litefs.yml\n# RUN mkdir -p /data ${LITEFS_DIR}\n\n# CMD [\"litefs\", \"mount\"]\nCMD [\"npm\", \"start\"]\n```\n\n----------------------------------------\n\nTITLE: Configuring Claude Desktop for Local MCP Server Connection\nDESCRIPTION: JSON configuration to connect Claude Desktop to a local MCP server. This setup uses the mcp-remote utility to proxy communications between Claude and the local server.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/static/README.md#2025-04-12_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"mcpServers\": {\n    \"math\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"mcp-remote\",\n        \"http://localhost:8787/sse\"\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Referencing Netlify Functions Endpoint in Markdown\nDESCRIPTION: Shows the default path for Netlify Functions. This endpoint is not configurable directly, but can be aliased using redirects.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-netlify-functions.mdx#2025-04-12_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n`/.netlify/functions`\n```\n\n----------------------------------------\n\nTITLE: Loading Latest Version of d3 Library Using unpkg\nDESCRIPTION: Illustrates how to load the latest version of the d3 library using unpkg. However, this approach is not recommended as it may lead to breaking changes in your application.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/unpkg-an-open-source-cdn-for-npm.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<script src=\"https://unpkg.com/d3\" />\n```\n\n----------------------------------------\n\nTITLE: Creating Hyperlink in Markdown\nDESCRIPTION: This code snippet shows how to create a hyperlink in Markdown, linking to the StoryGrid website.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/writing-blog/first-conference-part-3.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[StoryGrid](https://storygrid.com)\n```\n\n----------------------------------------\n\nTITLE: Async Arrow Function in TypeScript\nDESCRIPTION: Shows how to define an async arrow function with a Promise return type. The return type must be wrapped in the Promise generic to properly type the resolved value.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/typescript-function-syntaxes.mdx#2025-04-12_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nconst sum = async (a: number, b: number): Promise<number> => a + b\n```\n\n----------------------------------------\n\nTITLE: Refactoring React Tests with Setup Functions\nDESCRIPTION: This snippet demonstrates how to refactor React tests using setup functions instead of beforeEach hooks. It creates separate setup functions for different test scenarios, avoiding mutable variables and promoting code reuse.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/avoid-nesting-when-youre-testing/index.mdx#2025-04-12_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { render } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport Login from '../login'\n\nfunction setup() {\n\tconst handleSubmit = jest.fn()\n\tconst utils = render(<Login onSubmit={handleSubmit} />)\n\tconst user = { username: 'michelle', password: 'smith' }\n\tconst changeUsernameInput = (value) =>\n\t\tuserEvent.type(utils.getByLabelText(/username/i), value)\n\tconst changePasswordInput = (value) =>\n\t\tuserEvent.type(utils.getByLabelText(/password/i), value)\n\tconst clickSubmit = () => userEvent.click(utils.getByText(/submit/i))\n\treturn {\n\t\t...utils,\n\t\thandleSubmit,\n\t\tuser,\n\t\tchangeUsernameInput,\n\t\tchangePasswordInput,\n\t\tclickSubmit,\n\t}\n}\n\nfunction setupSuccessCase() {\n\tconst utils = setup()\n\tutils.changeUsernameInput(utils.user.username)\n\tutils.changePasswordInput(utils.user.password)\n\tutils.clickSubmit()\n\treturn utils\n}\n\nfunction setupWithNoPassword() {\n\tconst utils = setup()\n\tutils.changeUsernameInput(utils.user.username)\n\tutils.clickSubmit()\n\tconst errorMessage = utils.getByRole('alert')\n\treturn { ...utils, errorMessage }\n}\n\nfunction setupWithNoUsername() {\n\tconst utils = setup()\n\tutils.changePasswordInput(utils.user.password)\n\tutils.clickSubmit()\n\tconst errorMessage = utils.getByRole('alert')\n\treturn { ...utils, errorMessage }\n}\n\ntest('calls onSubmit with the username and password', () => {\n\tconst { handleSubmit, user } = setupSuccessCase()\n\texpect(handleSubmit).toHaveBeenCalledTimes(1)\n\texpect(handleSubmit).toHaveBeenCalledWith(user)\n})\n\ntest('shows an error message when submit is clicked and no username is provided', () => {\n\tconst { handleSubmit, errorMessage } = setupWithNoUsername()\n\texpect(errorMessage).toHaveTextContent(/username is required/i)\n\texpect(handleSubmit).not.toHaveBeenCalled()\n})\n\ntest('shows an error message when password is not provided', () => {\n\tconst { handleSubmit, errorMessage } = setupWithNoPassword()\n\texpect(errorMessage).toHaveTextContent(/password is required/i)\n\texpect(handleSubmit).not.toHaveBeenCalled()\n})\n```\n\n----------------------------------------\n\nTITLE: Image Reference in Markdown - Git Diffs\nDESCRIPTION: Markdown code showing an image reference for git diff visualization.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-dont-commit-generated-files-to-master.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n![A wall of git diffs](https://res.cloudinary.com/kentcdodds-com/image/upload/v1625033525/kentcdodds.com/content/blog/why-i-dont-commit-generated-files-to-master/1.png)\n```\n\n----------------------------------------\n\nTITLE: Analyzing Content Word Count with find and wc\nDESCRIPTION: Terminal command using find and wc to count the total number of words in the site's content, demonstrating the scale of written material on the website.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-built-a-modern-website-in-2021.mdx#2025-04-12_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ find ./content -type f | xargs wc -w | tail -1\n  280801 total\n```\n\n----------------------------------------\n\nTITLE: Glamorous Basic Component Example\nDESCRIPTION: Demonstrates creating basic styled components with glamorous including a Title and Wrapper component with various styling properties.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-glamorous.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst Title = glamorous.h1({\n\tfontSize: '1.5em',\n\ttextAlign: 'center',\n\tcolor: 'palevioletred',\n})\n\nconst Wrapper = glamorous.section({\n\tpadding: '4em',\n\tbackground: 'papayawhip',\n})\n\nfunction App() {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Title>Hello World, this is my first glamorous component!</Title>\n\t\t</Wrapper>\n\t)\n}\n```\n\n----------------------------------------\n\nTITLE: Angular and JavaScript Projects\nDESCRIPTION: References to personal projects built while learning AngularJS and vanilla JavaScript, including InfiniteWPM and dt-script-loader.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2010s-decade-in-review.mdx#2025-04-12_snippet_1\n\nLANGUAGE: url\nCODE:\n```\nhttps://github.com/kentcdodds/InfiniteWPM\nhttps://github.com/kentcdodds/dt-script-loader\nhttps://github.com/kentcdodds/js-point\n```\n\n----------------------------------------\n\nTITLE: Adding Translation Metadata to Blog Posts in MDX\nDESCRIPTION: Shows how to add translation metadata to an MDX file for a blog post. The metadata includes the language, link to the translation, and information about the translator.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_0\n\nLANGUAGE: mdx\nCODE:\n```\n---\ntitle: Some great post\n... other stuff ...\ntranslations:\n  - language: Español\n    link: https://example.com/your/translation/link/here\n    author:\n      name: Your name\n      link: https://example.com/your/link/here\n... more other stuff ...\n---\n```\n\n----------------------------------------\n\nTITLE: Adding Contributing Guide Reference\nDESCRIPTION: Markdown snippet for adding a reference to the video series in a project's CONTRIBUTING.md file to help first-time contributors.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-how-to-contribute-to-open-source.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n**Working on your first Pull Request?** You can learn how from this _free_ series\\n[How to Contribute to an Open Source Project on GitHub](https://egghead.io/series/how-to-contribute-to-an-open-source-project-on-github)\n```\n\n----------------------------------------\n\nTITLE: Dynamic Module Property Example\nDESCRIPTION: Shows why dynamic property assignment doesn't work with ES6 modules due to static analysis requirements.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// foo.js\nconst foo = {}\nexport default foo\nsomethingAsync().then((result) => (foo[result.key] = result.value))\n\n// bar.js\nimport { foobar } from './foo'\n```\n\n----------------------------------------\n\nTITLE: Adding Default Reducer to useToggle Hook in React\nDESCRIPTION: Final version of useToggle hook with default parameters, allowing it to work without configuration while still supporting custom reducers for advanced use cases.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/the-state-reducer-pattern-with-react-hooks.mdx#2025-04-12_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nfunction useToggle({ reducer = toggleReducer } = {}) {\n\tconst [{ on }, dispatch] = React.useReducer(reducer, { on: false })\n\n\tconst toggle = () => dispatch({ type: actionTypes.toggle })\n\tconst setOn = () => dispatch({ type: actionTypes.on })\n\tconst setOff = () => dispatch({ type: actionTypes.off })\n\n\treturn { on, toggle, setOn, setOff }\n}\n\nexport { useToggle, actionTypes, toggleReducer }\n```\n\n----------------------------------------\n\nTITLE: Blog Post Frontmatter in Markdown\nDESCRIPTION: YAML frontmatter for a blog post containing metadata like title, date, description, keywords, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/merry-christmas.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Merry Christmas!\ndate: 2017-12-25\ndescription:\n  As I write this, it's Christmas Eve. My kids have fallen asleep and I've\n  wrapped up the last few presents I've made or purchased for them...\nmeta:\n  keywords:\n    - Christmas\n    - Light The World\nbannerCloudinaryId: kentcdodds.com/content/blog/merry-christmas/banner\nbannerCredit: '[#LightTheWorld](https://www.mormon.org/christmas/25-ways-25-days)'\n---\n```\n\n----------------------------------------\n\nTITLE: Custom Jest Matchers Reference Links in Markdown\nDESCRIPTION: Documentation links for custom Jest matchers toBeInTheDOM and toHaveTextContent, with reference to their implementation in react-testing-library\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-the-react-testing-library.mdx#2025-04-12_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n- [`toBeInTheDOM`](https://github.com/testing-library/react-testing-library/blob/fd2df8d18652786a95bce34741180137f9d2cef2/README.md#tobeinthedom): Assert whether an element present in the DOM or not.\n- [`toHaveTextContent`](https://github.com/testing-library/react-testing-library/blob/fd2df8d18652786a95bce34741180137f9d2cef2/README.md#tohavetextcontent): Check whether the given element has a text content or not.\n```\n\n----------------------------------------\n\nTITLE: Example Usage of codegen.macro\nDESCRIPTION: This snippet demonstrates various ways to use codegen.macro, including tagged template literals, function calls, and external module importing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/define-function-overload-types-with-type-script.mdx#2025-04-12_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport codegen from 'codegen.macro'\n\n// using as a tagged template literal:\ncodegen`\n  module.exports = \"const tag = 'this is an example'\"\n`\n\n// using as a function\ncodegen(`\n  module.exports = \"const fn = 'this is another example'\"\n`)\n\n// codegen-ing an external module (and pass an argument):\nconst jpgs = codegen.require('./get-files-list', '**/*.jpg')\n\nconst ui = <Codegen>{`module.exports = require('./some-jsx-code')`}</Codegen>\n```\n\n----------------------------------------\n\nTITLE: Setting Up Git Ignores\nDESCRIPTION: Git ignore configuration to exclude node_modules and Firebase log files from version control.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_3\n\nLANGUAGE: text\nCODE:\n```\nnode_modules\n\n# ignores a few log files firebase creates when running functions locally\n*.log\n```\n\n----------------------------------------\n\nTITLE: Markdown Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for the blog post, including metadata like title, date, description, categories, keywords, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/launching-epic-web.mdx#2025-04-12_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\ntitle: Launching Epic Web\ndate: 2023-12-20\ndescription: The story of how Epic Web came to be\ncategories:\n  - personal\nmeta:\n  keywords:\n    - web development\n    - courses\n    - epic web\n    - education\n    - story\nbannerCloudinaryId: kentcdodds.com/content/blog/launching-epic-web/banner\nbannerAlt:\n  Illustration of three rocket ships taking off from a blue planet with an\n  orange planet and stars in the background\n---\n```\n\n----------------------------------------\n\nTITLE: HTML Component Callout\nDESCRIPTION: A callout component implementation with an information class and aside styling, containing a note about URL shorteners.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/goodbye-medium.mdx#2025-04-12_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<callout-info class=\"aside\">\n\tNote: this is actually the same reason I use `kcd.im` so much as well. I can\n\tchange where those URLs go if I ever need to which I definitely have. I\n\trecommend [you set up a URL shortener\n\tyourself](https://youtu.be/HL6paXyx6hM?index=40&list=PLV5CVI1eNcJgCrPH_e6d57KRUTiDZgs0u)\n\t(it'll take you minutes and it's totally free).\n</callout-info>\n```\n\n----------------------------------------\n\nTITLE: LiteFS Database Import Commands\nDESCRIPTION: Commands for SSH-ing into the Fly.io instance, deleting the problematic LiteFS database, and importing a backup.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\n# ssh into fly console\nfly ssh console -C bash -s\n\n# delete the litefs database\nrm -rf /data/litefs/dbs/sqlite.db\n# import the backup\nlitefs import -name sqlite.db /data/sqlite.db.bkp\n```\n\n----------------------------------------\n\nTITLE: Mocha Test Skip Example\nDESCRIPTION: Shows how to skip tests in Mocha using describe.skip to allow first-time contributors to implement the functionality\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/first-timers-only.mdx#2025-04-12_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\ndescribe.skip\n```\n\n----------------------------------------\n\nTITLE: GitHub Search Query Example\nDESCRIPTION: Demonstrates the URL format for searching GitHub issues with the first-timers-only label\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/first-timers-only.mdx#2025-04-12_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\nhttps://github.com/search?utf8=%E2%9C%93&q=label%3Afirst-timers-only+is%3Aopen&type=Issues&ref=searchresults\n```\n\n----------------------------------------\n\nTITLE: Conditional PropTypes Import with codegen.macro in JavaScript\nDESCRIPTION: This snippet uses codegen.macro to conditionally import PropTypes based on the build format. For UMD builds, it pulls PropTypes from the global object, while for other formats, it uses require('prop-types').\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/make-maintainable-workarounds-with-codegen.mdx#2025-04-12_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nPropTypes = codegen`  \n  if (process.env.BUILD_FORMAT === 'umd') {  \n    module.exports = \"(typeof window !== 'undefined' ? window : global).PropTypes\"  \n  } else {  \n    module.exports = \"require('prop-types')\"  \n  }  \n`\n```\n\n----------------------------------------\n\nTITLE: Testing the useUndo Hook with React Testing Library\nDESCRIPTION: A comprehensive test for the useUndo hook using React Testing Library to simulate user interactions. The test verifies undo/redo functionality by interacting with the example component and asserting on the expected state changes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-test-custom-react-hooks/index.mdx#2025-04-12_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport {render, screen} from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport * as React from 'react'\n\nimport {UseUndoExample} from '../use-undo.example'\n\ntest('allows you to undo and redo', () => {\n  render(<UseUndoExample />)\n  const present = screen.getByText(/present/i)\n  const past = screen.getByText(/past/i)\n  const future = screen.getByText(/future/i)\n  const input = screen.getByLabelText(/new value/i)\n  const submit = screen.getByText(/submit/i)\n  const undo = screen.getByText(/undo/i)\n  const redo = screen.getByText(/redo/i)\n\n  // assert initial state\n  expect(undo).toBeDisabled()\n  expect(redo).toBeDisabled()\n  expect(past).toHaveTextContent(`Past:`)\n  expect(present).toHaveTextContent(`Present: one`)\n  expect(future).toHaveTextContent(`Future:`)\n\n  // add second value\n  input.value = 'two'\n  await userEvent.click(submit)\n\n  // assert new state\n  expect(undo).not.toBeDisabled()\n  expect(redo).toBeDisabled()\n  expect(past).toHaveTextContent(`Past: one`)\n  expect(present).toHaveTextContent(`Present: two`)\n  expect(future).toHaveTextContent(`Future:`)\n\n  // add third value\n  input.value = 'three'\n  await userEvent.click(submit)\n\n  // assert new state\n  expect(undo).not.toBeDisabled()\n  expect(redo).toBeDisabled()\n  expect(past).toHaveTextContent(`Past: one, two`)\n  expect(present).toHaveTextContent(`Present: three`)\n  expect(future).toHaveTextContent(`Future:`)\n\n  // undo\n  await userEvent.click(undo)\n\n  // assert \"undone\" state\n  expect(undo).not.toBeDisabled()\n  expect(redo).not.toBeDisabled()\n  expect(past).toHaveTextContent(`Past: one`)\n  expect(present).toHaveTextContent(`Present: two`)\n  expect(future).toHaveTextContent(`Future: three`)\n\n  // undo again\n  await userEvent.click(undo)\n\n  // assert \"double-undone\" state\n  expect(undo).toBeDisabled()\n  expect(redo).not.toBeDisabled()\n  expect(past).toHaveTextContent(`Past:`)\n  expect(present).toHaveTextContent(`Present: one`)\n  expect(future).toHaveTextContent(`Future: two, three`)\n\n  // redo\n  await userEvent.click(redo)\n\n  // assert undo + undo + redo state\n  expect(undo).not.toBeDisabled()\n  expect(redo).not.toBeDisabled()\n  expect(past).toHaveTextContent(`Past: one`)\n  expect(present).toHaveTextContent(`Present: two`)\n  expect(future).toHaveTextContent(`Future: three`)\n\n  // add fourth value\n  input.value = 'four'\n  await userEvent.click(submit)\n\n  // assert final state (note the lack of \"third\")\n  expect(undo).not.toBeDisabled()\n  expect(redo).toBeDisabled()\n  expect(past).toHaveTextContent(`Past: one, two`)\n  expect(present).toHaveTextContent(`Present: four`)\n  expect(future).toHaveTextContent(`Future:`)\n})\n```\n\n----------------------------------------\n\nTITLE: Embedding Multiple Twitter Posts in Markdown\nDESCRIPTION: These code snippets demonstrate how to embed multiple Twitter posts in Markdown format, using links to the tweets.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/writing-blog/first-conference-part-3.mdx#2025-04-12_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096455319977287680\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096456233979019264\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096478185317900292\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096486497971101696\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096500573715623936\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kent_writes/status/1096520519422074885\n```\n\n----------------------------------------\n\nTITLE: Debugging JSDOM Console Event Handler\nDESCRIPTION: Code modification to debug console object reference issues in JSDOM's error handling system.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nthis.on('jsdomError', (e) => {\n\tconsole.log(anyConsole === console)\n\tanyConsole.error(e.stack, e.detail)\n})\n```\n\n----------------------------------------\n\nTITLE: Refactoring Tic-Tac-Toe to Reduce Duplication with Helper Function\nDESCRIPTION: This implementation improves on the previous approach by extracting the state update logic into a shared function to reduce code duplication, though it still requires managing synchronized state variables.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/dont-sync-state-derive-it.mdx#2025-04-12_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nfunction Board() {\n\tconst [squares, setSquares] = React.useState(Array(9).fill(null))\n\tconst [nextValue, setNextValue] = React.useState(calculateNextValue(squares))\n\tconst [winner, setWinner] = React.useState(calculateWinner(squares))\n\tconst [status, setStatus] = React.useState(calculateStatus(squares))\n\n\tfunction setNewState(newSquares) {\n\t\tconst newNextValue = calculateNextValue(newSquares)\n\t\tconst newWinner = calculateWinner(newSquares)\n\t\tconst newStatus = calculateStatus(newWinner, newSquares, newNextValue)\n\t\tsetSquares(newSquares)\n\t\tsetNextValue(newNextValue)\n\t\tsetWinner(newWinner)\n\t\tsetStatus(newStatus)\n\t}\n\n\tfunction selectSquare(square) {\n\t\tif (winner || squares[square]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square] = nextValue\n\t\tsetNewState(squaresCopy)\n\t}\n\n\tfunction selectTwoSquares(square1, square2) {\n\t\tif (winner || squares[square1] || squares[square2]) {\n\t\t\treturn\n\t\t}\n\t\tconst squaresCopy = [...squares]\n\t\tsquaresCopy[square1] = nextValue\n\t\tsquaresCopy[square2] = nextValue\n\t\tsetNewState(squaresCopy)\n\t}\n\n\t// return beautiful JSX\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding Images in Markdown\nDESCRIPTION: These snippets show how to embed images in Markdown using the image syntax. The images are hosted on Cloudinary and represent various moments from Kent's life and work.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2010s-decade-in-review.mdx#2025-04-12_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n![Me teaching a testing workshop for workshop.me at Trulia](https://res.cloudinary.com/kentcdodds-com/image/upload/v1623175014/kentcdodds.com/blog/2010s-decade-in-review/2018-workshop.jpg)\n```\n\nLANGUAGE: markdown\nCODE:\n```\n![A circular city](https://res.cloudinary.com/kentcdodds-com/image/upload/v1623175013/kentcdodds.com/blog/2010s-decade-in-review/2018-shurlan.jpg)\n```\n\nLANGUAGE: markdown\nCODE:\n```\n![A word count showing I wrote 50,000 words](https://res.cloudinary.com/kentcdodds-com/image/upload/v1623175011/kentcdodds.com/blog/2010s-decade-in-review/2018-nanowrimo.jpg)\n```\n\nLANGUAGE: markdown\nCODE:\n```\n![Me with a dog](https://res.cloudinary.com/kentcdodds-com/image/upload/v1623175010/kentcdodds.com/blog/2010s-decade-in-review/2018-gemma.jpg)\n```\n\nLANGUAGE: markdown\nCODE:\n```\n![Selfie of me with a ton of people behind me](https://res.cloudinary.com/kentcdodds-com/image/upload/v1623175021/kentcdodds.com/blog/2010s-decade-in-review/2019-family-search.jpg)\n```\n\n----------------------------------------\n\nTITLE: Fly.toml Configuration Change for Disabling LiteFS\nDESCRIPTION: Change to the Fly.toml configuration file to disable the LiteFS proxy healthcheck.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_14\n\nLANGUAGE: toml\nCODE:\n```\n# TODO: enable litefs proxy\n#   [[services.http_checks]]\n#     grace_period = \"10s\"\n#     interval = \"30s\"\n#     method = \"GET\"\n#     timeout = \"5s\"\n#     path = \"/litefs/health\"\n```\n\n----------------------------------------\n\nTITLE: Clearing MCP Authentication Cache\nDESCRIPTION: Command to remove cached authentication files for troubleshooting MCP connection issues.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/mcp/README.md#2025-04-12_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf ~/.mcp-auth\n```\n\n----------------------------------------\n\nTITLE: Blog Post YAML Front Matter Example\nDESCRIPTION: Example of YAML front matter configuration for a blog post, showing metadata like title, date, description, categories, and keywords.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/automation.mdx#2025-04-12_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\ntitle: An Argument for Automation\ndate: 2020-02-10\ndescription: Why it can be worth spending 1 hour automating a 10 second task\ncategories:\n  - productivity\nmeta:\n  keywords:\n    - javascript\n    - automation\n    - web development\nbannerCloudinaryId: kentcdodds.com/content/blog/automation/banner\nbannerCredit: Rube Goldberg Machine\n---\n```\n\n----------------------------------------\n\nTITLE: Possessive Apostrophe Example in Markdown\nDESCRIPTION: Demonstrates the correct way to write Kent's last name with a possessive apostrophe\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/info.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nDodds' not Dodd's nor Dodds's\n```\n\n----------------------------------------\n\nTITLE: Database Backup Commands\nDESCRIPTION: Commands for backing up the SQLite database on Fly.io, checking its integrity, and downloading it locally.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nfly ssh console -C bash -s\n# select a specific instance\n\n# make a backup of the database\ncp /data/litefs/dbs/sqlite.db/database /data/sqlite.db.bkp\n\n# do an integrity check\nsqlite3 /data/sqlite.db.bkp \"PRAGMA integrity_check;\"\n\n# make a gzip copy so it downloads faster\ngzip -c /data/sqlite.db.bkp > /data/sqlite.db.bkp.gz\n```\n\n----------------------------------------\n\nTITLE: Database Reset Command\nDESCRIPTION: Prisma command for resetting the database to the latest schema and running the seed script to populate it with example data.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\nnpx prisma migrate reset --force\n```\n\n----------------------------------------\n\nTITLE: Frontmatter Metadata Configuration in Markdown\nDESCRIPTION: YAML frontmatter block defining page metadata including title, description, and banner image details for a personal testimony page\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/short-testimony.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Testimony\ndescription: The (short) Testimony of Jesus Christ by Kent C. Dodds\nbannerCloudinaryId: kentcdodds.com/pages/testimony/jesus-is-resurrected\nbannerAlt: 'Jesus Is Resurrected and Appears to Mary Magdalene'\n---\n```\n\n----------------------------------------\n\nTITLE: Revoking Firebase Token\nDESCRIPTION: Command to revoke a previously generated Firebase token for security purposes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nfirebase logout --token 1//06SeHVPB6AOF9CgYIARAAGAYSNwF-L9IrcdTvBfmn_ako1m3iJXRNpyV6tROQ193ZTGUtwLB95aoCC1l45ES40dRYfa5YjNCRxRc\n```\n\n----------------------------------------\n\nTITLE: Simplified toggleClass Function for Modern Browsers in JavaScript\nDESCRIPTION: A simplified version of the toggleClass function that uses the classList API directly, suitable for modern browsers that don't require IE8 support. Demonstrates unnecessary abstraction.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-to-react.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// $(el).toggleClass(className)\n\nfunction toggleClass(el, className) {\n\tel.classList.toggle(className)\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding Video Player in React JSX\nDESCRIPTION: JSX code for embedding a responsive video player with controls that displays a workshop conversation between Kent and Taylor about remote workshops. The video is loaded from Dropbox and includes styling for responsive display.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-teach.mdx#2025-04-12_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<video\n\tstyle={{ width: '100%', maxWidth: 720, maxHeight: 405, marginBottom: 40 }}\n\tcontrols\n>\n\t<source\n\t\tsrc=\"https://www.dropbox.com/s/4frvj56k11othzu/Edited%20Kent%20%26%20Taylor%20Remote%20Workshop%20Talk.mp4?raw=1\"\n\t\ttype=\"video/mp4\"\n\t/>\n</video>\n```\n\n----------------------------------------\n\nTITLE: Warning Against Multi-Component ESLint Rule in Markdown\nDESCRIPTION: This snippet uses a callout to warn against using an ESLint rule that discourages multiple components in a single file, which goes against the principle of colocation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/colocation.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-warning class=\"aside\">\n\tAnd for heaven's sake, [please DELETE THIS ESLINT\n\tRULE](https://github.com/yannickcr/eslint-plugin-react/blob/e6b4c33a1db4cc94c3e9223b09fb92b1dbddc00d/docs/rules/no-multi-comp.md)\n\tand all rules like it.\n</callout-warning>\n```\n\n----------------------------------------\n\nTITLE: Formatting Callout in Markdown\nDESCRIPTION: This snippet demonstrates how to create a styled callout box in Markdown, likely using custom syntax for a specific platform or tool. It emphasizes a tip about diversifying where you publicize your work.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/increase-your-marketability.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\t_Tip: diversify where you publicise things to reach a wider audience._\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Committing and Pushing Changes\nDESCRIPTION: Git commands to commit and push changes, triggering the GitHub Actions workflow for deployment.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-firebase-functions.mdx#2025-04-12_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\ngit add -A\ngit commit -m \"firebase functions rock\"\ngit push\n```\n\n----------------------------------------\n\nTITLE: Defining Frontmatter in Markdown for a Blog Post\nDESCRIPTION: This code snippet defines the frontmatter for a blog post using YAML syntax in a markdown file. It includes metadata such as title, date, description, categories, keywords, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-your-team-needs-testing-javascript-com.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Why your team needs TestingJavaScript.com\ndate: 2019-12-03\ndescription: A letter you can copy/paste and send to your boss.\ncategories:\n  - testing\nmeta:\n  keywords:\n    - javascript\n    - testing\nbannerCloudinaryId: unsplash/photo-1483428400520-675ef69a3bc4\nbannerCredit: Photo by [Hudson Hintze](https://unsplash.com/photos/vpxeE7s-my4)\n---\n```\n\n----------------------------------------\n\nTITLE: Markdown Blog Post Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for a blog post about the Modern Frontends Live conference experience, including metadata like title, date, categories, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/my-modern-frontends-live-experience.mdx#2025-04-12_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\ntitle: My Modern Frontends Live Experience\ndate: 2022-11-22\nunlisted: true\ndescription: I'll not return. My experience was borderline fraudulent. Let me explain.\ncategories:\n  - conferences\nmeta:\n  keywords:\n    - conferences\nbannerCloudinaryId: unsplash/photo-1514982587862-a0134757ce24\nbannerAlt: grey can on bush\nbannerCredit: Photo by [Rubén Bagüés](https://unsplash.com/photos/9JIKom7Z9a0)\n---\n```\n\n----------------------------------------\n\nTITLE: Downloading Database Backup Command\nDESCRIPTION: Command for downloading a backed up SQLite database from Fly.io to a local machine.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nfly sftp get -s /data/sqlite.db.bkp.gz ./sqlite.db.bkp.gz\n# select the same instance as above\n```\n\n----------------------------------------\n\nTITLE: Displaying Warning Callout in Markdown\nDESCRIPTION: This snippet demonstrates how to create a warning callout in markdown, emphasizing the difficulty of contributing to projects not used regularly.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/open-source-stamina.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-warning>\n\tIt's really hard to be motivated to contribute to something that you're not\n\tusing on a regular basis.\n</callout-warning>\n```\n\n----------------------------------------\n\nTITLE: JSDOM Error Stack Trace Example\nDESCRIPTION: Example of an error stack trace from JSDOM showing the source of an error in the runtime-script-errors.js file.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/spelunking-in-node-modules.mdx#2025-04-12_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nat reportException (/Users/kdodds/Developer/downshift/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)\n```\n\n----------------------------------------\n\nTITLE: Generating Email Link in Markdown\nDESCRIPTION: This snippet creates a markdown link for an email address. It uses HTML attributes to open the email in a new tab and includes a pre-filled subject line for the Code of Conduct.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/pages/conduct.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<a\n\ttarget=\"_blank\"\n\trel=\"noreferrer noopener\"\n\thref=\"mailto:team+coc@kentcdodds.com?subject=Regarding%20the%20Code%20of%20Conduct\"\n>{`team+coc@kentcdodds.com`}</a>\n```\n\n----------------------------------------\n\nTITLE: Creating Internal Links in Markdown\nDESCRIPTION: These code snippets show how to create internal links in Markdown, referencing other parts of the conference series.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/writing-blog/first-conference-part-3.mdx#2025-04-12_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n[Read Part 0](./first-conference-part-0)\n[Read Part 1](./first-conference-part-1)\n[Read Part 2](./first-conference-part-2)\n[Read Part 3 (that's this post)](./first-conference-part-3)\n[Read Part 4](./first-conference-part-4)\n```\n\n----------------------------------------\n\nTITLE: Initial LiteFS Disabling Commands\nDESCRIPTION: Commands for backing up the database in preparation for disabling LiteFS.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_10\n\nLANGUAGE: sh\nCODE:\n```\nfly ssh console -C bash\n\n# make a copy of the database\ncp /data/litefs/dbs/sqlite.db/database /data/sqlite.db\n\n# do an integrity check\nsqlite3 /data/sqlite.db \"PRAGMA integrity_check;\"\n```\n\n----------------------------------------\n\nTITLE: Database Copying for LiteFS Disabling\nDESCRIPTION: Commands for copying SQLite databases to a different location when disabling LiteFS.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nfly ssh console -C bash\n\ncp /data/litefs/dbs/sqlite.db/database /data/litefs-disabled/sqlite.db\ncp /data/litefs/dbs/cache.db/database /data/litefs-disabled/cache.db\n```\n\n----------------------------------------\n\nTITLE: Netlify Redirects Configuration\nDESCRIPTION: Configuration for implementing server-side redirects in Netlify using the _redirects file.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-using-client-side-route-redirects.mdx#2025-04-12_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n/  /list  302!\n```\n\n----------------------------------------\n\nTITLE: Removing Regions from Fly.io Deployment\nDESCRIPTION: Commands for listing, destroying volumes, and scaling down when removing regions from the Fly.io deployment.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\nfly vol list\nfly vol destroy <VOL_ID>\nfly scale count <COUNT>\n```\n\n----------------------------------------\n\nTITLE: No code snippets found\nDESCRIPTION: This article is a course overview and contains no code snippets. It consists of descriptive text explaining course content and structure.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/introducing-a-new-course-simplify-react-apps-with-react-hooks-and-suspense.mdx#2025-04-12_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: Configuring package.json for Express Application\nDESCRIPTION: The package.json configuration for an Express application, including dependencies, build tools, and scripts. It uses Express, babel for transpilation, and nodemon for development.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n\t\"main\": \"index.js\",\n\t\"engines\": {\n\t\t\"node\": \"12.18.2\"\n\t},\n\t\"dependencies\": {\n\t\t\"express\": \"^4.17.1\",\n\t\t\"express-async-errors\": \"^3.1.1\",\n\t\t\"loglevel\": \"^1.6.8\"\n\t},\n\t\"devDependencies\": {\n\t\t\"@babel/cli\": \"^7.10.4\",\n\t\t\"@babel/core\": \"^7.10.4\",\n\t\t\"@babel/preset-env\": \"^7.10.4\",\n\t\t\"@babel/register\": \"^7.10.4\",\n\t\t\"nodemon\": \"^2.0.4\"\n\t},\n\t\"scripts\": {\n\t\t\"start\": \"node .\",\n\t\t\"build\": \"babel --delete-dir-on-start --out-dir dist --copy-files --ignore \\\"**/__tests__/**,**/__mocks__/**\\\" --no-copy-ignored src\"\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Remix Data Requirements Callout\nDESCRIPTION: A callout highlighting how Remix shifts data requirements from render-time to URL-based determination.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/remix-the-yang-to-react-s-yin.mdx#2025-04-12_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\\n\\tWith these features, we go from \"I have to render to know data requirements\"\\n\\tto \"I know data requirements from the URL.\"\\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Managing Navigation States in Remix\nDESCRIPTION: This code example shows how to handle pending states during navigation and form submissions in Remix. It uses the useNavigation hook to display appropriate text based on the current navigation state.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/why-i-love-remix.mdx#2025-04-12_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst navigation = useNavigation()\n\nconst text =\n\tnavigation.state === 'submitting'\n\t\t? 'Saving...'\n\t\t: navigation.state === 'loading'\n\t\t\t? 'Saved!'\n\t\t\t: 'Ready'\n```\n\n----------------------------------------\n\nTITLE: Example of React Profiler Data Output\nDESCRIPTION: Shows a sample of the data structure returned by the React Profiler. This includes timing information and interaction data for a profiled component.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/react-production-performance-monitoring.mdx#2025-04-12_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n{\n  id: \"Navigation\",\n  phase: \"update\",\n  actualDuration: 0.09999994654208422,\n  baseDuration: 0.3799999540206045,\n  startTime: 104988.11499998556,\n  commitTime: 104988.45000000438,\n  interactions: [ // this is actually a Set, not an array\n    {\n      __count: 0\n      id: 3,\n      name: \"menu click\",\n      timestamp: 104978.33499999251,\n    }\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: CSS Variables with Cascade Behavior\nDESCRIPTION: Illustrates how CSS variable inheritance works with nested elements and specificity rules.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/super-simple-start-to-css-variables.mdx#2025-04-12_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<html>\n\t<style>\n\t\t.blue-text {\n\t\t\t--color: blue;\n\t\t}\n\t\t.red-text {\n\t\t\t--color: red;\n\t\t}\n\t\t.my-text {\n\t\t\tcolor: var(--color);\n\t\t}\n\t</style>\n\t<body>\n\t\t<div class=\"blue-text\">\n\t\t\t<div class=\"my-text\">This will be blue</div>\n\t\t\t<div class=\"red-text\">\n\t\t\t\t<div class=\"my-text\">\n\t\t\t\t\tThis will be red (even though it's within the blue-text div, the\n\t\t\t\t\tred-text is more specific).\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Testing Express Server with Jest\nDESCRIPTION: An example of how to test the Express server in integration tests. It starts the server before tests and closes it after completion, demonstrating how the promise-based API simplifies testing.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { startServer } from '../start'\n\nlet server, baseURL\nbeforeAll(async () => {\n\tserver = await startServer()\n\tbaseURL = `http://localhost:${server.address().port}/api`\n})\n\nafterAll(() => server.close())\n\n// make requests to the baseURL\n```\n\n----------------------------------------\n\nTITLE: Configuring Main Express Router\nDESCRIPTION: Sets up the main Express router that combines all route modules. Demonstrates a modular approach to route organization by importing and mounting sub-routes.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/how-i-structure-express-apps.mdx#2025-04-12_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport express from 'express'\n// any other routes imports would go here\nimport { getMathRoutes } from './math'\n\nfunction getRoutes() {\n\t// create a router for all the routes of our app\n\tconst router = express.Router()\n\n\trouter.use('/math', getMathRoutes())\n\t// any additional routes would go here\n\n\treturn router\n}\n\nexport { getRoutes }\n```\n\n----------------------------------------\n\nTITLE: Markdown Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for a blog post about career building, including metadata like title, date, description, categories, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/intentional-career-building.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Intentional Career Building\ndate: 2020-05-26\ndescription: A challenge and ideas for you to do something to build your career.\ncategories:\n  - career\nmeta:\n  keywords:\n    - career\nbannerCloudinaryId: unsplash/photo-1456255985051-dcbc4f615823\nbannerCredit: Photo by [Radek Grzybowski](https://unsplash.com/photos/8tem2WpFPhM)\n---\n```\n\n----------------------------------------\n\nTITLE: Defining Frontmatter in Markdown for Blog Post Metadata\nDESCRIPTION: This code snippet demonstrates the use of YAML frontmatter in a Markdown file to define metadata for a blog post. It includes properties such as title, date, description, categories, keywords, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/build-vs-buy-component-libraries-edition.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: 'Build vs Buy: Component Libraries edition'\ndate: 2021-02-04\ndescription:\n  Some things to think about before you decide to create your own component\n  library.\ncategories:\n  - open source\nmeta:\n  keywords:\n    - components\n    - react\n    - angular\n    - vue\n    - business\n    - oss\nbannerCloudinaryId: unsplash/photo-1590403183019-8ab6ba58ce50\nbannerCredit: Photo by [George Bakos](https://unsplash.com/photos/VDAzcZyjun8)\n---\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Arrow Function Syntax in JavaScript\nDESCRIPTION: This snippet shows the use of arrow function syntax, which is a feature that requires syntax transformation for older browsers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-is-a-polyfill.mdx#2025-04-12_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst addOne = (num) => num + 1\nif (addOne(2) > 2) {\n\tconsole.log('Math. Wow!')\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Another Success Callout in Markdown\nDESCRIPTION: This snippet demonstrates another use of the callout-success block to emphasize a key point about becoming an expert in chosen technologies.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-being-a-junior.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\tStaying on top of a few chosen technologies allows anyone to become an expert\n\tin them rather quickly.\n</callout-success>\n```\n\n----------------------------------------\n\nTITLE: Computer Science Challenges Quote\nDESCRIPTION: Famous Phil Karlton quote about the two hardest problems in computer science, emphasizing the difficulty of cache invalidation.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/remix-the-yang-to-react-s-yin.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n> There are only two hard things in Computer Science: cache invalidation and\\nnaming things.\n```\n\n----------------------------------------\n\nTITLE: Using Debugger for Code Exploration\nDESCRIPTION: Using the debugger statement to explore and understand library code before contributing\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/what-open-source-project-should-i-contribute-to.mdx#2025-04-12_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ndebugger\n```\n\n----------------------------------------\n\nTITLE: Markdown Blog Post Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for a blog post including title, date, description, categories, meta keywords, and banner image details.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/my-car-accident.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: My Car Accident\ndate: 2022-12-29\ndescription: I was involved in a very bad car accident in 2022. Here's the story.\ncategories:\n  - personal\nmeta:\n  keywords:\n    - car accident\n    - tesla\n    - recovery\nbannerCloudinaryId: kentcdodds.com/content/blog/my-car-accident/car-in-daylight\nbannerAlt:\n  Kent standing by a wrecked Tesla model 3 in a junkyard. It's completely\n  crushed.\n---\n```\n\n----------------------------------------\n\nTITLE: Creating an Info Callout in Markdown\nDESCRIPTION: This snippet demonstrates how to create an informational callout in Markdown using custom HTML-like syntax. The callout contains a note about the purpose of the live stream and its focus on Remix.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rsc-with-dan-abramov-and-joe-savona-live-stream.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-info class=\"aside\">\n\tIt should be noted that the objective of this live stream was not to instruct\n\tyou, but to answer my own questions. I realize some folks will wish we spent\n\tmore time explaining some of the concepts and answering other people's\n\tquestions, but we only had time for my own questions. This is also why there\n\twas such a big focus on Remix as well since I'm a heavy Remix user.\n</callout-info>\n```\n\n----------------------------------------\n\nTITLE: Linking to Twitter Posts in Markdown\nDESCRIPTION: These code snippets demonstrate how to create links to Twitter posts using Markdown syntax. The links are formatted to direct to specific tweets on Twitter's platform.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/2010s-decade-in-review.mdx#2025-04-12_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kentcdodds/status/974298832929353729\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kentcdodds/status/974278185540964352\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kentcdodds/status/980799621080391680\n```\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://x.com/kentcdodds/status/982252230613938177\n```\n\n----------------------------------------\n\nTITLE: Adding Regions to Fly.io Deployment\nDESCRIPTION: Commands for adding additional regions to the Fly.io deployment by creating volumes and scaling up.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/CONTRIBUTING.md#2025-04-12_snippet_15\n\nLANGUAGE: sh\nCODE:\n```\nfly vol create data --size 3 --region ams\nfly scale count 2\n```\n\n----------------------------------------\n\nTITLE: Displaying Info Callout in Markdown\nDESCRIPTION: This snippet shows how to create an info callout in markdown, used to acknowledge reviewers of the blog post.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/open-source-stamina.mdx#2025-04-12_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-info class=\"aside\">\n\tThanks to [TJ Holowaychuk](https://x.com/tjholowaychuk), [Friedel\n\tZiegelmayer](https://x.com/dignifiedquire), and [Mark\n\tTrostler](https://x.com/zzoass) for reviewing this post.\n</callout-info>\n```\n\n----------------------------------------\n\nTITLE: Markdown Front Matter Configuration\nDESCRIPTION: YAML front matter for a blog post containing metadata like title, date, description, translations, keywords, and banner image information.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/solidifying-what-you-learn.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Solidifying what you learn\ndate: 2018-03-05\ndescription: Teaching is nature's way of letting you know how sloppy your understanding is.\ntranslations:\n  - language: Español\n    link: https://posts.rafaeldavis.dev/solidificando-lo-que-aprendes\n    author:\n      name: Rafael D. Hernandez\n      link: https://x.com/RafaelDavisH\nmeta:\n  keywords:\n    - Learning\n    - Teaching\nbannerCloudinaryId: unsplash/photo-1489718199993-da7196b7f1b4\nbannerCredit: Photo by [Aaron Burden](https://unsplash.com/photos/BojuZpqw4zM)\n---\n```\n\n----------------------------------------\n\nTITLE: Embedding YouTube Video in Markdown\nDESCRIPTION: This snippet shows how to embed a YouTube video link in a Markdown file. The link is presented as a plain text URL, which will be rendered as a clickable link in most Markdown viewers.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/rsc-with-dan-abramov-and-joe-savona-live-stream.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nhttps://www.youtube.com/watch?v=h7tur48JSaw&list=PLV5CVI1eNcJi8sor_aQ2AzOeQ3On3suOr\n```\n\n----------------------------------------\n\nTITLE: Displaying Success Callout in Markdown\nDESCRIPTION: This snippet shows how to create a callout block in Markdown to highlight important information. It uses custom syntax, likely processed by a specific Markdown renderer.\nSOURCE: https://github.com/kentcdodds/kentcdodds.com/blob/main/content/blog/stop-being-a-junior.mdx#2025-04-12_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<callout-success>\n\tThere's absolutely no time limit on how long you have to be a developer before\n\tyou are no longer a junior.\n</callout-success>\n```"
  }
]
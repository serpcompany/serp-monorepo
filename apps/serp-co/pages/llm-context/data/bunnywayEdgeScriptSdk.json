[
  {
    "owner": "bunnyway",
    "repo": "edge-script-sdk",
    "content": "TITLE: Creating HTTP Server with Bunny Edge Script SDK in TypeScript\nDESCRIPTION: Example demonstrates setting up a local HTTP server using the Bunny Edge Scripting SDK. The server listens on port 8080 and responds with 'Hello, Bunny Edge!' after a simulated 1-second delay. Includes request logging functionality to mirror production environment behavior.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/README.md#2025-04-22_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as BunnySDK from \"@bunny.net/edgescript-sdk\";\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nconsole.log(\"Starting server...\");\n\nBunnySDK.net.http.serve({ port: 8080, hostname: '127.0.0.1' }, async (req) => {\n  console.log(`[INFO]: ${req.method} - ${req.url}`);\n  await sleep(1000); // Simulate some processing delay\n  return new Response(\"Hello, Bunny Edge!\");\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Edge Script Security Rules\nDESCRIPTION: This code snippet demonstrates how to implement security rules in Edge Script to control access to resources. It checks if the client's user agent contains suspicious patterns and blocks or allows the request accordingly.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nif (req.headers.get('user-agent').match(/suspicious_pattern/)) {\n  // Block the request\n  return res.status(403).send('Access Denied');\n} else {\n  // Allow the request\n  return next();\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Geo-blocking with Edge Script\nDESCRIPTION: This code demonstrates how to implement geo-blocking functionality using Edge Script. It checks the client's country code and blocks access based on geographic location.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// Get client's country code\nconst country = req.geo.country;\n\n// Block access from specific countries\nconst blockedCountries = ['XX', 'YY', 'ZZ'];\n\nif (blockedCountries.includes(country)) {\n  return res.status(403).send('Content not available in your region');\n}\n\n// Continue with the request\nreturn next();\n```\n\n----------------------------------------\n\nTITLE: Working with Cookies in Edge Script\nDESCRIPTION: This snippet illustrates how to work with cookies in Edge Script. It shows how to read cookies from requests and set cookies in responses with various options like expiration and domain.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Reading a cookie from request\nconst sessionId = req.cookies.get('session_id');\n\n// Setting a basic cookie in response\nres.cookies.set('visited', 'true');\n\n// Setting a cookie with options\nres.cookies.set('user_pref', 'dark_mode', {\n  maxAge: 86400, // 1 day in seconds\n  domain: '.example.com',\n  path: '/',\n  secure: true,\n  httpOnly: true\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic HTTP Server with Bunny Edge SDK in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a simple HTTP server using the Bunny Edge SDK. It includes a sleep function for simulating processing delay and sets up a server that responds with 'Hello, Bunny Edge!' to all requests.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/README.md#2025-04-22_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as BunnySDK from \"@bunny.net/edgescript-sdk\";\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nconsole.log(\"Starting server...\");\n\nBunnySDK.net.http.serve({ port: 8080, hostname: '127.0.0.1' }, async (req) => {\n  console.log(`[INFO]: ${req.method} - ${req.url}`);\n  await sleep(1000); // Simulate some processing delay\n  return new Response(\"Hello, Bunny Edge!\");\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Client Information in Edge Script\nDESCRIPTION: This snippet shows how to access client information like IP address, device type, and geographical data in Edge Script. This data can be used for analytics, personalization, or security purposes.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// Client IP address\nconst ip = req.ip;\n\n// Client geographical information\nconst geo = req.geo;\nconst country = geo.country;\nconst city = geo.city;\nconst latitude = geo.latitude;\nconst longitude = geo.longitude;\n\n// Client device information (derived from user-agent)\nconst userAgent = req.headers.get('user-agent');\nconst isMobile = /mobile/i.test(userAgent);\n```\n\n----------------------------------------\n\nTITLE: Manipulating Response Objects in Edge Script\nDESCRIPTION: This code demonstrates how to modify response objects in Edge Script. It shows setting response status, headers, and body content to customize what gets sent back to the client.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Setting response status code\nres.status(200);\n\n// Setting response headers\nres.headers.set('Content-Type', 'application/json');\nres.headers.set('Custom-Header', 'Value');\n\n// Setting response body\nres.send({ message: 'Success' });\n\n// Chaining methods\nreturn res.status(200).send('OK');\n```\n\n----------------------------------------\n\nTITLE: Handling Request Objects in Edge Script\nDESCRIPTION: This snippet shows how to access and manipulate the request object in Edge Script. It demonstrates retrieving various properties like method, path, and query parameters from the request.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/simple-http-page/README.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst method = req.method; // GET, POST, etc.\nconst path = req.path; // /path/to/resource\nconst query = req.query; // Query parameters\nconst cookies = req.cookies; // Cookie object\nconst headers = req.headers; // Headers object\n\n// Getting a specific query parameter\nconst paramValue = req.query.get('paramName');\n\n// Getting a specific header\nconst userAgent = req.headers.get('user-agent');\n```\n\n----------------------------------------\n\nTITLE: Listing Files in BunnyCDN Storage Zone using TypeScript\nDESCRIPTION: This code example demonstrates how to connect to a BunnyCDN Storage Zone and list files within it. It uses environment variables for authentication and sets up a local HTTP server to display the file listing results.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-storage/README.md#2025-04-22_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport * as BunnySDK from \"@bunny.net/edgescript-sdk\";\nimport * as BunnyStorageSDK from \"@bunny.net/storage-sdk\";\n\nlet sz_zone = process.env.STORAGE_ZONE!;\nlet access_key = process.env.STORAGE_ACCESS_KEY!;\n\nlet sz = BunnyStorageSDK.zone.connect_with_accesskey(BunnyStorageSDK.regions.StorageRegion.Falkenstein, sz_zone, access_key);\n\nconsole.log(\"Starting server...\");\n\nBunnySDK.net.http.serve({ port: 8080, hostname: '127.0.0.1' }, async (req) => {\n  let list = await BunnyStorageSDK.file.list(sz, \"/\");\n  console.log(`[INFO]: ${req.method} - ${req.url}`);\n  return new Response(JSON.stringify(list));\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for Edge Script SDK\nDESCRIPTION: Defines the package configuration for the Edge Script SDK project, including metadata, scripts, and dependencies. It specifies build processes, testing frameworks, and required libraries for development and production.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/example/deno-middleware-http/README.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"@bunny-stream/edge-script-sdk\",\n  \"version\": \"1.0.1\",\n  \"description\": \"SDK for Bunny.net Edge Script\",\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"test\": \"jest\",\n    \"prepare\": \"npm run build\"\n  },\n  \"keywords\": [\n    \"bunny\",\n    \"edge\",\n    \"script\",\n    \"sdk\"\n  ],\n  \"author\": \"Bunny.net\",\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"@types/jest\": \"^29.5.1\",\n    \"jest\": \"^29.5.0\",\n    \"ts-jest\": \"^29.1.0\",\n    \"typescript\": \"^5.0.4\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.12.0 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.12.0, which includes a minor change to properly export ESM for Node & Deno.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.12.0\n\n### Minor Changes\n\n- 6199c9e: Properly export ESM for Node & Deno\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.0 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.0, which includes a minor change to add middleware for local development.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.0\n\n### Minor Changes\n\n- c536c15: Add middleware for local development\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.10.0 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.10.0, which includes minor changes to the serve function's signature and behavior.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.10.0\n\n### Minor Changes\n\n- 3ba61ac: New overloading for serve to avoid putting listener\n- 49b0fa1: serve function should have the handler as first arg\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.8.0 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.8.0, which includes a minor change to add a toString method to TCP Listener.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_13\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.8.0\n\n### Minor Changes\n\n- 88318ed: Add a toString method to TCP Listener\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.9.0 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.9.0, which includes minor changes related to TcpListener and address handling.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_11\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.9.0\n\n### Minor Changes\n\n- ec2d606: Consider the fact we can have a TcpListener with no associated Addr\n- 85e8df4: Add a proper addr handling\"\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.4 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.4, which includes a patch change to update the package export for Deno compatibility.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.4\n\n### Patch Changes\n\n- 7a5f7b8: Update the export of the package to have a conditional export for Deno\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.2 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.2, which includes a patch change to ensure proper property passing for middleware URL.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.2\n\n### Patch Changes\n\n- 54e064e: Ensure proper property passing for middleware url\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.1 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.1, which includes a patch change to fix an issue with passing headers in local mode.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.1\n\n### Patch Changes\n\n- ea59365: Fix issue while passing header in local mode\"\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.3 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.3, which includes a patch change to ensure subpath access in local mode.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.3\n\n### Patch Changes\n\n- 43738c5: Ensure we can access subpath when in local\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.11.5 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.11.5, which includes a patch change to update README.md.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.11.5\n\n### Patch Changes\n\n- 05edf67: Update README.md\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.9.3 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.9.3, which includes a patch change to remove process replace.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_8\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.9.3\n\n### Patch Changes\n\n- 555a50f: Remove process replace\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.9.2 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.9.2, which includes a patch change to attempt removal of the process dependency.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_9\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.9.2\n\n### Patch Changes\n\n- 96c00b7: Try to remove the process dep\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.9.1 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.9.1, which includes a patch change to fix the build.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_10\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.9.1\n\n### Patch Changes\n\n- 7d99bc7: Fix build\n```\n\n----------------------------------------\n\nTITLE: Displaying Changelog Entry for Version 0.8.1 in Markdown\nDESCRIPTION: Shows the changelog entry for version 0.8.1, which includes a patch change to modify IP separator when printing.\nSOURCE: https://github.com/bunnyway/edge-script-sdk/blob/main/libs/bunny-sdk/CHANGELOG.md#2025-04-22_snippet_12\n\nLANGUAGE: markdown\nCODE:\n```\n## 0.8.1\n\n### Patch Changes\n\n- 0698b9b: Change IP separator from ',' to '.' when printing\n```"
  }
]
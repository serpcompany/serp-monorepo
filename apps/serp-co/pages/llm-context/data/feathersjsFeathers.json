[
  {
    "owner": "feathersjs",
    "repo": "feathers",
    "content": "TITLE: Installing Feathers API Server Dependencies for TypeScript\nDESCRIPTION: Command to install the necessary Feathers packages for creating a REST and WebSocket API server with TypeScript.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @feathersjs/socketio @feathersjs/koa --save\n```\n\n----------------------------------------\n\nTITLE: Getting Started with Feathers\nDESCRIPTION: Commands to create a new Feathers application. The process involves creating a new project with the Feathers CLI, navigating to the project directory, and starting the development server.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm create feathers my-new-app\n$ cd my-new-app\n$ npm run dev\n```\n\n----------------------------------------\n\nTITLE: Setting up Authentication Service in TypeScript\nDESCRIPTION: Standard setup for initializing the AuthenticationService at the '/authentication' path with JWT and Local strategies. Includes type declaration for TypeScript service types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/service.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new JWTStrategy())\n  authentication.register('local', new LocalStrategy())\n\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Using app.configure for Plugin Initialization\nDESCRIPTION: Demonstrates how to use the configure method to initialize plugins or separate application logic into different files.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst setupService = (app: Application) => {\n  app.use('/todos', todoService)\n}\n\napp.configure(setupService)\n```\n\n----------------------------------------\n\nTITLE: Installing and Starting New Feathers Application\nDESCRIPTION: Commands to create and start a new Feathers application project. Uses npm create to scaffold a new application and starts the development server.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/feathers/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm create feathers my-new-app\n$ cd my-new-app\n$ npm start\n```\n\n----------------------------------------\n\nTITLE: Using validateData Hook with TypeBox Schema in Feathers.js\nDESCRIPTION: Example of implementing the validateData hook with a TypeBox schema to validate request data in create, update, and patch operations. It defines user data schema and creates a validator function to use in service hooks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv, hooks as schemaHooks } from '@feathersjs/schema'\nimport { Type, getValidator } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport { dataValidator } from '../validators'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\nconst userDataSchema = Type.Pick(userSchema, ['email', 'password'])\n\n// Returns validation functions for `create`, `update` and `patch`\nconst userDataValidator = getValidator(userDataSchema, dataValidator)\n\napp.service('users').hooks({\n  before: {\n    all: [schemaHooks.validateData(userDataValidator)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Defining ObjectIdSchema in TypeBox and JSON Schema\nDESCRIPTION: This snippet demonstrates how to use the ObjectIdSchema helper from @feathersjs/typebox or @feathersjs/schema to create a schema that accepts both MongoDB ObjectId and string representations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ObjectIdSchema } from '@feathersjs/typebox' // or '@feathersjs/schema'\n\nconst typeboxSchema = Type.Object({\n  userId: ObjectIdSchema()\n})\n\nconst jsonSchema = {\n  type: 'object',\n  properties: {\n    userId: ObjectIdSchema()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Runtime Logging and Data Modification Hooks in FeathersJS\nDESCRIPTION: This example demonstrates creating hooks that log the runtime of service methods and add a createdAt property before saving data to the database. It shows how to use around hooks for performance monitoring and before hooks for data transformation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers, type HookContext, type NextFunction } from '@feathersjs/feathers'\n\nconst app = feathers()\n\napp.service('messages').hooks({\n  around: {\n    all: [\n      // A hook that wraps around all other hooks and the service method\n      // logging the total runtime of a successful call\n      async (context: HookContext, next: NextFunction) => {\n        const startTime = Date.now()\n\n        await next()\n\n        console.log(`Method ${context.method} on ${context.path} took ${Date.now() - startTime}ms`)\n      }\n    ]\n  },\n  before: {\n    create: [\n      async (context: HookContext) => {\n        context.data = {\n          ...context.data,\n          createdAt: Date.now()\n        }\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic Feathers Service Class in TypeScript\nDESCRIPTION: This example demonstrates how to create a service class with all standard CRUD methods and register it with a Feathers application. It shows the TypeScript interface for service methods including find, get, create, update, patch, remove, setup, and teardown.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/services.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Application, Id, NullableId, Params } from '@feathersjs/feathers'\n\nclass MyService {\n  async find(params: Params) {}\n  async get(id: Id, params: Params) {}\n  async create(data: any, params: Params) {}\n  async update(id: NullableId, data: any, params: Params) {}\n  async patch(id: NullableId, data: any, params: Params) {}\n  async remove(id: NullableId, params: Params) {}\n  async setup(path: string, app: Application) {}\n  async teardown(path: string, app: Application) {}\n}\n\nconst app = feathers<{ myservice: MyService }>()\n\napp.use('myservice', new MyService())\n```\n\n----------------------------------------\n\nTITLE: Basic Schema Pattern Implementation in TypeScript\nDESCRIPTION: Demonstrates the basic pattern for defining schemas, types, validators, and resolvers using TypeBox in FeathersJS.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport const nameSchema = Type.Object({\n  text: Type.String()\n})\nexport type Name = Static<typeof nameSchema>\nexport const nameValidator = getValidator(nameSchema, dataValidator)\nexport const nameResolver = resolve<Name, HookContext>({})\n```\n\n----------------------------------------\n\nTITLE: Basic Hook Registration Pattern in Feathers.js\nDESCRIPTION: Shows the standard format for registering hooks on a service, including around, before, after and error hooks with both global (all) and method-specific hooks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\napp.service('servicename').hooks({\n  around: {\n    all: [\n      async (context: HookContext, next: NextFunction) => {\n        console.log('around all hook ran')\n        await next()\n      }\n    ],\n    find: [\n      /* other hook functions here */\n    ],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: [],\n    // Custom methods use hooks as well\n    myCustomMethod: []\n  },\n  before: {\n    all: [async (context: HookContext) => console.log('before all hook ran')],\n    find: [\n      /* other hook functions here */\n    ],\n    get: []\n    // ...etc\n  },\n  after: {\n    find: [async (context: HookContext) => console.log('after find hook ran')]\n  },\n  error: {}\n})\n```\n\n----------------------------------------\n\nTITLE: Local Authentication with Feathers.js\nDESCRIPTION: JSON payload for authenticating a user with the local strategy (email/password) by sending a POST request to the authentication endpoint. This returns a JWT token used for authenticated requests.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n// POST /authentication\n{\n  \"strategy\": \"local\",\n  \"email\": \"hello@feathersjs.com\",\n  \"password\": \"supersecret\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Standard Hook Function in FeathersJS\nDESCRIPTION: This snippet shows the basic structure of a hook function for before, after or error hooks. The function is async and takes the hook context as its parameter, allowing it to interact with or modify the request/response flow.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { HookContext } from '../declarations'\n\nexport const hookFunction = async (context: HookContext) => {\n  // Do things here\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Feathers Server URL\nDESCRIPTION: The URL endpoint for accessing the Feathers server instance running locally.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_12\n\nLANGUAGE: plaintext\nCODE:\n```\nhttp://localhost:3030\n```\n\n----------------------------------------\n\nTITLE: Implementing Message Service with create() Method in TypeScript\nDESCRIPTION: Demonstrates implementing a create method in a message service that stores messages in an array. This shows the basic pattern for handling data creation in a service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Id, Params } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  messages: Message[] = []\n\n  async create(data: Message, params: Params) {\n    this.messages.push(data)\n\n    return data\n  }\n}\n\napp.use('messages', new MessageService())\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Feathers Application with TypeScript\nDESCRIPTION: A complete TypeScript example showing how to create a Feathers application with a message service that supports creating and finding messages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\n\n// This is the interface for the message data\ninterface Message {\n  id?: number\n  text: string\n}\n\n// A messages service that allows us to create new\n// and return all existing messages\nclass MessageService {\n  messages: Message[] = []\n\n  async find() {\n    // Just return all our messages\n    return this.messages\n  }\n\n  async create(data: Pick<Message, 'text'>) {\n    // The new message is the data text with a unique identifier added\n    // using the messages length since it changes whenever we add one\n    const message: Message = {\n      id: this.messages.length,\n      text: data.text\n    }\n\n    // Add new message to the list\n    this.messages.push(message)\n\n    return message\n  }\n}\n\n// This tells TypeScript what services we are registering\ntype ServiceTypes = {\n  messages: MessageService\n}\n\nconst app = feathers<ServiceTypes>()\n\n// Register the message service on the Feathers application\napp.use('messages', new MessageService())\n\n// Log every time a new message has been created\napp.service('messages').on('created', (message: Message) => {\n  console.log('A new message has been created', message)\n})\n\n// A function that creates messages and then logs\n// all existing messages on the service\nconst main = async () => {\n  // Create a new message on our message service\n  await app.service('messages').create({\n    text: 'Hello Feathers'\n  })\n\n  // And another one\n  await app.service('messages').create({\n    text: 'Hello again'\n  })\n\n  // Find all existing messages\n  const messages = await app.service('messages').find()\n\n  console.log('All messages', messages)\n}\n\nmain()\n```\n\n----------------------------------------\n\nTITLE: Implementing Feathers Services as Class and Object in TypeScript\nDESCRIPTION: This example demonstrates how to create Feathers services using both class and object implementations, showing all standard service methods. It includes type definitions and shows how to register the services with a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Params, Id, NullableId } from '@feathersjs/feathers'\n\nclass MyServiceClass {\n  async find(params: Params) {\n    return []\n  }\n  async get(id: Id, params: Params) {}\n  async create(data: any, params: Params) {}\n  async update(id: NullableId, data: any, params: Params) {}\n  async patch(id: NullableId, data: any, params: Params) {}\n  async remove(id: NullableId, params: Params) {}\n  async setup(app: Application, path: string) {}\n  async teardown(app: Application, path: string) {}\n}\n\nconst myServiceObject = {\n  async find(params: Params) {\n    return []\n  },\n  async get(id: Id, params: Params) {},\n  async create(data: any, params: Params) {},\n  async update(id: NullableId, data: any, params: Params) {},\n  async patch(id: NullableId, data: any, params: Params) {},\n  async remove(id: NullableId, params: Params) {},\n  async setup(app: Application, path: string) {},\n  async teardown(app: Application, path: string) {}\n}\n\ntype ServiceTypes = {\n  'my-service': MyServiceClass\n  'my-service-object': typeof myServiceObject\n}\n\nconst app = feathers<ServiceTypes>()\n\napp.use('my-service', new MyServiceClass())\napp.use('my-service-object', myServiceObject)\n```\n\n----------------------------------------\n\nTITLE: Adding ObjectId Keyword to AJV Validator for MongoDB\nDESCRIPTION: Demonstrates how to add a custom keyword to AJV for validating and converting MongoDB ObjectIds.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { keywordObjectId } from '@feathersjs/mongodb'\n\nconst validator = new Ajv()\n\nvalidator.addKeyword(keywordObjectId)\n```\n\n----------------------------------------\n\nTITLE: Configuring Authentication Service with JWT and Local Strategies in FeathersJS\nDESCRIPTION: Sets up an authentication service with JWT and local authentication strategies in a FeathersJS application. Imports necessary dependencies, declares type definitions, and registers authentication strategies on the app instance.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/authentication.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\n\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new JWTStrategy())\n  authentication.register('local', new LocalStrategy())\n\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Service with Feathers\nDESCRIPTION: Demonstrates how to define a service class and register it with the Feathers application using app.use().\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers, type Id } from '@feathersjs/feathers'\n\nclass MessageService {\n  async get(id: Id) {\n    return {\n      id,\n      text: `This is the ${id} message!`\n    }\n  }\n}\n\ntype ServiceTypes = {\n  // Add services path to type mapping here\n  messages: MessageService\n}\n\nconst app = feathers<ServiceTypes>()\n\n// Register a service instance on the app\napp.use('messages', new MessageService())\n\n// Get the service and call the service method with the correct types\nconst message = await app.service('messages').get('test')\n```\n\n----------------------------------------\n\nTITLE: Creating Access Token in Feathers.js Authentication Service\nDESCRIPTION: Demonstrates how to create a new access token using the authentication service. The token is a JWT with a custom payload.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/service.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst token = await app.service('authentication').createAccessToken({\n  permission: 'admin'\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing an Around Hook in FeathersJS\nDESCRIPTION: This example demonstrates the structure of an around hook, which can control the entire request flow. It shows how to use the context and next function parameters, with code that runs before and after the service method, plus error handling capabilities.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { HookContext, NextFunction } from '../declarations'\n\nexport const myAfoundHook = async (context: HookContext, next: NextFunction) => {\n  try {\n    // Code before `await next()` runs before the main function\n    await next()\n    // Code after `await next()` runs after the main function.\n  } catch (error) {\n    // Do things on error\n  } finally {\n    // Do things always\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Service Registration and Basic Functionality in FeathersJS (TypeScript)\nDESCRIPTION: This snippet demonstrates how to test if a service is registered and perform basic operations like finding all users. It uses the app object to access services and assert their functionality.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.test.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// For more information about this file see https://dove.feathersjs.com/guides/cli/service.test.html\nimport assert from 'assert'\nimport { app } from '../../../src/app'\n\ndescribe('users service', () => {\n  it('registered the service', () => {\n    const service = app.service('users')\n\n    assert.ok(service, 'Registered the service')\n  })\n\n  it('finds all users', async () => {\n    const users = await app.service('users').find({\n      paginate: false\n    })\n\n    assert.ok(Array.isArray(users))\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Markdown Table of Core Database Adapters\nDESCRIPTION: A table listing the core database adapters available in Feathers, showing package names and their supported data stores.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/adapters.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Core Package         | Supported Data Stores                                                                                          |\n| -------------------- | -------------------------------------------------------------------------------------------------------------- |\n| [Memory](./memory)   | Memory                                                                                                         |\n| [MongoDB](./mongodb) | MongoDB                                                                                                        |\n| [SQL (Knex)](./knex) | MySQL<br/> MariaDB <br/> PostgreSQL<br/> CockroachDB<br/> SQLite<br/> Amazon Redshift<br/> OracleDB<br/> MSSQL |\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Service Class in TypeScript for Feathers\nDESCRIPTION: This snippet demonstrates how to create a custom service class in TypeScript for Feathers. It shows various method implementations including find, get, create, and custom methods, with type annotations for parameters and return values.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Id, NullableId, Params } from '@feathersjs/feathers'\n\ninterface MyParams extends Params {}\n\nclass MyService {\n  async find(params: MyParams) {\n    return {\n      message: 'This type is inferred'\n    }\n  }\n\n  async get(id: Id) {\n    return [\n      {\n        id\n      }\n    ]\n  }\n\n  async create(data: Message, params: MyParams) {\n    return data\n  }\n\n  // Custom method made available to clients needs to have `data` and `params`\n  async customMethod(data: CustomMethodData, params: MyParams) {}\n\n  // A method that is only available internally can do anything\n  async anyOtherMethod() {\n    const [entry] = await this.get('david')\n\n    return entry.id\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Extending User Schema with Avatar in FeathersJS (TypeScript)\nDESCRIPTION: This code snippet extends the user schema in a FeathersJS application to include an avatar property. It adds logic to set a default Gravatar image if no avatar is provided, and modifies the query resolver to control user data access. The code uses TypeBox for schema definition and validation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/schemas.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// For more information about this file see https://dove.feathersjs.com/guides/cli/service.schemas.html\nimport crypto from 'crypto'\nimport { resolve } from '@feathersjs/schema'\nimport { Type, getValidator, querySyntax } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport { passwordHash } from '@feathersjs/authentication-local'\n\nimport type { HookContext } from '../../declarations'\nimport { dataValidator, queryValidator } from '../../validators'\n\n// Main data model schema\nexport const userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.Optional(Type.String()),\n    githubId: Type.Optional(Type.Number()),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\nexport type User = Static<typeof userSchema>\nexport const userValidator = getValidator(userSchema, dataValidator)\nexport const userResolver = resolve<User, HookContext>({})\n\nexport const userExternalResolver = resolve<User, HookContext>({\n  // The password should never be visible externally\n  password: async () => undefined\n})\n\n// Schema for creating new users\nexport const userDataSchema = Type.Pick(\n  userSchema,\n  ['email', 'password', 'githubId', 'avatar'],\n  {\n    $id: 'UserData',\n    additionalProperties: false\n  }\n)\nexport type UserData = Static<typeof userDataSchema>\nexport const userDataValidator = getValidator(userDataSchema, dataValidator)\nexport const userDataResolver = resolve<User, HookContext>({\n  password: passwordHash({ strategy: 'local' }),\n  avatar: async (value, user) => {\n    // If the user passed an avatar image, use it\n    if (value !== undefined) {\n      return value\n    }\n\n    // Gravatar uses MD5 hashes from an email address to get the image\n    const hash = crypto.createHash('md5').update(user.email.toLowerCase()).digest('hex')\n    // Return the full avatar URL\n    return `https://s.gravatar.com/avatar/${hash}?s=60`\n  }\n})\n\n// Schema for updating existing users\nexport const userPatchSchema = Type.Partial(userSchema, {\n  $id: 'UserPatch'\n})\nexport type UserPatch = Static<typeof userPatchSchema>\nexport const userPatchValidator = getValidator(userPatchSchema, dataValidator)\nexport const userPatchResolver = resolve<User, HookContext>({\n  password: passwordHash({ strategy: 'local' })\n})\n\n// Schema for allowed query properties\nexport const userQueryProperties = Type.Pick(userSchema, ['id', 'email', 'githubId'])\nexport const userQuerySchema = Type.Intersect(\n  [\n    querySyntax(userQueryProperties),\n    // Add additional query properties here\n    Type.Object({}, { additionalProperties: false })\n  ],\n  { additionalProperties: false }\n)\nexport type UserQuery = Static<typeof userQuerySchema>\nexport const userQueryValidator = getValidator(userQuerySchema, queryValidator)\nexport const userQueryResolver = resolve<UserQuery, HookContext>({\n  // If there is a user (e.g. with authentication), they are only allowed to see their own data\n  id: async (value, user, context) => {\n    // We want to be able to get a list of all users but\n    // only let a user modify their own data otherwise\n    if (context.params.user && context.method !== 'find') {\n      return context.params.user.id\n    }\n\n    return value\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Converting Feathers Query to Aggregation Pipeline in TypeScript\nDESCRIPTION: Demonstrates how a standard Feathers query is converted to MongoDB aggregation pipeline stages. This includes matching, sorting, skipping, and limiting results.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = {\n  text: { $regex: 'feathersjs', $options: 'igm' },\n  $sort: { createdAt: -1 },\n  $skip: 20,\n  $limit: 10\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\n;[\n  // returns the set of records containing the word \"feathersjs\"\n  { $match: { text: { $regex: 'feathersjs', $options: 'igm' } } },\n  // Sorts the results of the previous step by newest messages, first.\n  { $sort: { createdAt: -1 } },\n  // Skips the first 20 records of the previous step\n  { $skip: 20 },\n  // returns the next 10 records\n  { $limit: 10 }\n]\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Message Schema with TypeBox in TypeScript\nDESCRIPTION: Creates a basic message schema using TypeBox's Type.Object with properly typed fields. The schema includes id, text, createdAt and userId fields, with an explicit type definition using Static.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\n\nconst messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    userId: Type.Number()\n  },\n  { $id: 'Message', additionalProperties: false }\n)\n\ntype Message = Static<typeof messageSchema>\n```\n\n----------------------------------------\n\nTITLE: Listening for Service Events in JavaScript\nDESCRIPTION: This code snippet shows how to listen for real-time events from a Feathers service. When a new record is created in the 'myservice' service, the event handler will log the created data to the console.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/services.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('myservice').on('created', (data) => {\n  console.log('Got created event', data)\n})\n```\n\n----------------------------------------\n\nTITLE: Managing User Login Channel Assignments in Feathers.js\nDESCRIPTION: This code demonstrates how to handle user login events by moving connections from anonymous to authenticated channels and adding them to role-specific or resource-specific channels based on user properties.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\napp.on('login', (payload: AuthenticationResult, { connection }: Params) => {\n  // connection can be undefined if there is no\n  // real-time connection, e.g. when logging in via REST\n  if (connection) {\n    // The user attached to this connection\n    const { user } = connection\n\n    // The connection is no longer anonymous, remove it\n    app.channel('anonymous').leave(connection)\n\n    // Add it to the authenticated user channel\n    app.channel('authenticated').join(connection)\n\n    // Channels can be named anything and joined on any condition `\n    // E.g. to send real-time events only to admins use\n    if (user.isAdmin) {\n      app.channel('admins').join(connection)\n    }\n\n    // If the user has joined e.g. chat rooms\n    user.rooms.forEach((room) => {\n      app.channel(`rooms/${room.id}`).join(connection)\n    })\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Application in Feathers (TypeScript)\nDESCRIPTION: This snippet demonstrates how the main application file configures authentication and services using the configure function.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/app.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// ...\nimport { services } from './services'\n\n// ...\napp.configure(authentication)\napp.configure(services)\n// ...\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Methods in FeathersJS Service\nDESCRIPTION: Example showing how to implement and register custom methods in a FeathersJS service. The code demonstrates creating a service with both standard and custom methods, and registering them using the methods option. It includes type definitions for better type safety.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Id, Params } from '@feathersjs/feathers'\n\ntype CustomData = {\n  name: string\n}\n\nclass MyService {\n  async get(id: Id, params: Params) {\n    return {\n      id,\n      message: `You have to do ${id}`\n    }\n  }\n\n  async myCustomMethod(data: CustomData, params: Params) {\n    return data\n  }\n}\n\ntype ServiceTypes = {\n  'my-service': MyService\n}\n\nconst app = feathers<ServiceTypes>()\n  .configure(rest())\n  .use('my-service', new MyService(), {\n    // Pass all methods you want to expose\n    methods: ['get', 'myCustomMethod']\n  })\n```\n\n----------------------------------------\n\nTITLE: AuthenticationBaseStrategy Implementation\nDESCRIPTION: Base implementation of an authentication strategy providing common functionality including name setting, application reference, authentication service configuration, and entity service access.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/strategy.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nclass AuthenticationBaseStrategy {\n  setName(name) { this.name = name; }\n  setApplication(app) { this.app = app; }\n  setAuthentication(service) { this.authentication = service; }\n  get configuration() { return this.authentication.configuration[this.name]; }\n  get entityService() { return this.app.service(this.authentication.configuration.entity); }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting and Getting Application Configuration\nDESCRIPTION: Shows how to use app.set and app.get for application-wide configuration with proper TypeScript types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\n\ntype ServiceTypes = {\n  // Add services path to type mapping here\n}\n\n// app.get and app.set can be typed when initializing the app\ntype Configuration = {\n  port: number\n}\n\nconst app = feathers<ServiceTypes, Configuration>()\n\napp.set('port', 3030)\n\napp.listen(app.get('port'))\n```\n\n----------------------------------------\n\nTITLE: Setting up Channels in Feathers.js with TypeScript\nDESCRIPTION: This code demonstrates a complete channels.js configuration file that establishes anonymous and authenticated channels, handles connections and login events, and configures event publishing for a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection, Params } from '@feathersjs/feathers'\nimport type { Application, HookContext } from './declarations'\n\nexport default function (app: any) {\n  if (typeof app.channel !== 'function') {\n    // If no real-time functionality has been configured just return\n    return\n  }\n\n  app.on('connection', (connection: RealTimeConnection) => {\n    // On a new real-time connection, add it to the anonymous channel\n    app.channel('anonymous').join(connection)\n  })\n\n  app.on('login', (AuthenticationResult: any, { connection }: Params) => {\n    // connection can be undefined if there is no\n    // real-time connection, e.g. when logging in via REST\n    if (connection) {\n      // The connection is no longer anonymous, remove it\n      app.channel('anonymous').leave(connection)\n\n      // Add it to the authenticated user channel\n      app.channel('authenticated').join(connection)\n    }\n  })\n\n  // eslint-disable-next-line no-unused-vars\n  app.publish((data: any, context: HookContext) => {\n    // Here you can add event publishers to channels set up in `channels.js`\n    // To publish only for a specific event use `app.publish(eventname, () => {})`\n    console.log(\n      'Publishing all events to all authenticated users. See `channels.js` and https://docs.feathersjs.com/api/channels.html for more information.'\n    )\n\n    // e.g. to publish all service events to all authenticated users use\n    return app.channel('authenticated')\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Local Authentication Example\nDESCRIPTION: Example of authenticating with local email/password strategy\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/client.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntry {\n  // Authenticate with the local email/password strategy\n  await app.authenticate({\n    strategy: 'local',\n    email: 'my@email.com',\n    password: 'my-password'\n  })\n  // Show e.g. logged in dashboard page\n} catch (error: any) {\n  // Show login page (potentially with `e.message`)\n  console.error('Authentication error', e)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing MongoDB Transactions in FeathersJS Hooks\nDESCRIPTION: Example of using MongoDB transactions within a FeathersJS hook by creating a session and passing it through params.mongodb to multiple service calls.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ObjectId } from 'mongodb'\nimport { HookContext } from '../declarations'\n\nexport const myHook = async (context: HookContext) => {\n  const { app } = context\n  const session = app.get('mongoClient').startSession()\n\n  try {\n    await session.withTransaction(async () => {\n      const fooData = { message: 'Data for foo' }\n      const barData = { text: 'Data for bar' }\n\n      await app.service('fooService').create(fooData, {\n        mongodb: { session }\n      })\n      await app.service('barService').create(barData, {\n        mongodb: { session }\n      })\n    })\n  } finally {\n    await session.endSession()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Feathers API Server with REST and WebSocket Support\nDESCRIPTION: A complete example showing how to extend a basic Feathers application into an API server with REST endpoints using KoaJS and real-time functionality using Socket.io.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport { koa, rest, bodyParser, errorHandler, serveStatic } from '@feathersjs/koa'\nimport socketio from '@feathersjs/socketio'\n\n// This is the interface for the message data\ninterface Message {\n  id?: number\n  text: string\n}\n\n// A messages service that allows us to create new\n// and return all existing messages\nclass MessageService {\n  messages: Message[] = []\n\n  async find() {\n    // Just return all our messages\n    return this.messages\n  }\n\n  async create(data: Pick<Message, 'text'>) {\n    // The new message is the data text with a unique identifier added\n    // using the messages length since it changes whenever we add one\n    const message: Message = {\n      id: this.messages.length,\n      text: data.text\n    }\n\n    // Add new message to the list\n    this.messages.push(message)\n\n    return message\n  }\n}\n\n// This tells TypeScript what services we are registering\ntype ServiceTypes = {\n  messages: MessageService\n}\n\n// Creates an KoaJS compatible Feathers application\nconst app = koa<ServiceTypes>(feathers())\n\n// Use the current folder for static file hosting\napp.use(serveStatic('.'))\n// Register the error handle\napp.use(errorHandler())\n// Parse JSON request bodies\napp.use(bodyParser())\n\n// Register REST service handler\napp.configure(rest())\n// Configure Socket.io real-time APIs\napp.configure(socketio())\n// Register our messages service\napp.use('messages', new MessageService())\n\n// Add any new real-time connection to the `everybody` channel\napp.on('connection', (connection) => app.channel('everybody').join(connection))\n// Publish all events to the `everybody` channel\napp.publish((_data) => app.channel('everybody'))\n\n// Start the server\napp\n  .listen(3030)\n  .then(() => console.log('Feathers server listening on localhost:3030'))\n\n// For good measure let's create a message\n// So our API doesn't look so empty\napp.service('messages').create({\n  text: 'Hello world from the server'\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Company Ownership Filter with resolveQuery in TypeScript\nDESCRIPTION: This advanced example demonstrates using resolveQuery to implement an ownership filter for a Company service. It ensures that users can only access and modify companies they own, by automatically filtering queries based on the authenticated user.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\n// Main data model schema\nexport const companySchema = Type.Object(\n  {\n    id: Type.String({ format: 'uuid' }),\n    name: Type.String(),\n    ownerUser: Type.Ref(userSchema)\n  },\n  { $id: 'Company', additionalProperties: false }\n)\n\n// Schema for allowed query properties\nexport const companyQueryProperties = Type.Pick(companySchema, ['id'])\nexport const companyQuerySchema = Type.Intersect(\n  [\n    querySyntax(companyQueryProperties),\n    // Add additional query properties here\n    Type.Object({}, { additionalProperties: false })\n  ],\n  { additionalProperties: false }\n)\nexport type CompanyQuery = Static<typeof companyQuerySchema>\nexport const companyQueryValidator = getValidator(companyQuerySchema, queryValidator)\nexport const companyQueryResolver = resolve<CompanyQuery, HookContext>({})\n\nexport const companyFilterQueryResolver = resolve<Company, HookContext>({\n  ownerUser: (value, obj, context) => {\n    if (context.params.user) {\n      return context.params.user.id\n    }\n    return value\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Message Schema in FeathersJS (TypeScript/SQL)\nDESCRIPTION: This code snippet demonstrates how to update the message schema for a FeathersJS chat application using TypeScript and SQL. It includes the main data model schema, resolvers for creating and querying messages, and virtual property for user association.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/schemas.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// For more information about this file see https://dove.feathersjs.com/guides/cli/service.schemas.html\nimport { resolve, virtual } from '@feathersjs/schema'\nimport { Type, getValidator, querySyntax } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\n\nimport type { HookContext } from '../../declarations'\nimport { dataValidator, queryValidator } from '../../validators'\nimport { userSchema } from '../users/users.schema'\n\n// Main data model schema\nexport const messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    userId: Type.Number(),\n    user: Type.Ref(userSchema)\n  },\n  { $id: 'Message', additionalProperties: false }\n)\nexport type Message = Static<typeof messageSchema>\nexport const messageValidator = getValidator(messageSchema, dataValidator)\nexport const messageResolver = resolve<Message, HookContext>({\n  user: virtual(async (message, context) => {\n    // Associate the user that sent the message\n    return context.app.service('users').get(message.userId)\n  })\n})\n\nexport const messageExternalResolver = resolve<Message, HookContext>({})\n\n// Schema for creating new entries\nexport const messageDataSchema = Type.Pick(messageSchema, ['text'], {\n  $id: 'MessageData'\n})\nexport type MessageData = Static<typeof messageDataSchema>\nexport const messageDataValidator = getValidator(messageDataSchema, dataValidator)\nexport const messageDataResolver = resolve<Message, HookContext>({\n  userId: async (_value, _message, context) => {\n    // Associate the record with the id of the authenticated user\n    return context.params.user.id\n  },\n  createdAt: async () => {\n    return Date.now()\n  }\n})\n\n// Schema for updating existing entries\nexport const messagePatchSchema = Type.Partial(messageSchema, {\n  $id: 'MessagePatch'\n})\nexport type MessagePatch = Static<typeof messagePatchSchema>\nexport const messagePatchValidator = getValidator(messagePatchSchema, dataValidator)\nexport const messagePatchResolver = resolve<Message, HookContext>({})\n\n// Schema for allowed query properties\nexport const messageQueryProperties = Type.Pick(messageSchema,[\n  'id',\n  'text',\n  'createdAt',\n  'userId'\n])\nexport const messageQuerySchema = Type.Intersect(\n  [\n    querySyntax(messageQueryProperties),\n    // Add additional query properties here\n    Type.Object({}, { additionalProperties: false })\n  ],\n  { additionalProperties: false }\n)\nexport type MessageQuery = Static<typeof messageQuerySchema>\nexport const messageQueryValidator = getValidator(messageQuerySchema, queryValidator)\nexport const messageQueryResolver = resolve<MessageQuery, HookContext>({\n  userId: async (value, user, context) => {\n    // We want to be able to find all messages but\n    // only let a user modify their own messages otherwise\n    if (context.params.user && context.method !== 'find') {\n      return context.params.user.id\n    }\n\n    return value\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Listening to Service Events with Socket.io in FeathersJS\nDESCRIPTION: Shows how to listen to various service events (created, updated, patched, removed) for real-time functionality in a FeathersJS application using Socket.io.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nconst socket = io('http://localhost:3030/')\n\nsocket.on('messages created', (message: Message) => {\n  console.log('Got a new Todo!', message)\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst socket = io('http://localhost:3030/')\n\nsocket.on('my/messages updated', (message: Message) => {\n  console.log('Got an updated Todo!', message)\n})\n\nsocket.emit(\n  'update',\n  'my/messages',\n  1,\n  {\n    text: 'Updated text'\n  },\n  {},\n  (error, callback) => {\n    // Do something here\n  }\n)\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst socket = io('http://localhost:3030/')\n\nsocket.on('messages removed', (message: Message) => {\n  // Remove element showing the Todo from the page\n  $('#message-' + message.id).remove()\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst socket = io('http://localhost:3030/')\n\nsocket.on('messages myevent', function (data: any) {\n  console.log('Got myevent event', data)\n})\n```\n\n----------------------------------------\n\nTITLE: Field selection with $select in Feathers.js\nDESCRIPTION: Shows how to select specific fields to include in the query results using the $select filter. This works with any service method including find and get operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Only return the `text` and `userId` field in a message\napp.service('messages').find({\n  query: {\n    $select: ['text', 'userId']\n  }\n})\n\napp.service('messages').get(1, {\n  query: {\n    $select: ['text']\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?$select[]=text&$select[]=userId\nGET /messages/1?$select[]=text\n```\n\n----------------------------------------\n\nTITLE: Basic Hook Registration Configuration\nDESCRIPTION: Configures authentication, schema validation, and data resolution hooks for a FeathersJS service across different method types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\napp.service(messagePath).hooks({\n  around: {\n    all: [\n      authenticate('jwt'),\n      schemaHooks.resolveExternal(messageExternalResolver),\n      schemaHooks.resolveResult(messageResolver)\n    ]\n  },\n  before: {\n    all: [schemaHooks.validateQuery(messageQueryValidator), schemaHooks.resolveQuery(messageQueryResolver)],\n    find: [],\n    get: [],\n    create: [schemaHooks.validateData(messageDataValidator), schemaHooks.resolveData(messageDataResolver)],\n    patch: [schemaHooks.validateData(messagePatchValidator), schemaHooks.resolveData(messagePatchResolver)],\n    remove: []\n  },\n  after: {\n    all: []\n  },\n  error: {\n    all: []\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Application-wide Error Hook in Feathers.js\nDESCRIPTION: Shows how to implement an application-wide error logging hook that captures errors from all services and methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\napp.hooks({\n  error: {\n    all: [\n      async (context: HookContext) => {\n        console.error(`Error in '${context.path}' service method '${context.method}'`, context.error.stack)\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Cache System with Around Hook\nDESCRIPTION: Example of implementing a caching system using an around hook, demonstrating how to handle pre-execution cache checking and post-execution cache updates in a single hook.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/whats-new.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext, NextFunction } from '../../declarations'\n\nexport const simpleCache = new Map()\n\nexport const myHook = async (context: HookContext, next: NextFunction) => {\n  // Check the cache for an existing record\n  const existing = simpleCache.get(context.id)\n\n  // If an existing record was found, set it as context.result to skip the database call.\n  if (existing) {\n    context.result = existing\n  }\n\n  await next()\n\n  // Cache the latest record by its id\n  simpleCache.set(context.result.id, context.result)\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Socket.io Client with FeathersJS\nDESCRIPTION: Basic setup of Socket.io client with FeathersJS application, including real-time events and service calls\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\nimport io from 'socket.io-client'\n\nconst socket = io('http://api.feathersjs.com')\nconst app = feathers()\n\n// Set up Socket.io client with the socket\napp.configure(socketio(socket))\n\n// Receive real-time events through Socket.io\napp.service('messages').on('created', (message) => console.log('New message created', message))\n\n// Call the `messages` service\napp.service('messages').create({\n  text: 'A message from a REST client'\n})\n```\n\n----------------------------------------\n\nTITLE: Testing Authenticated Service Operations in FeathersJS (TypeScript)\nDESCRIPTION: This snippet shows how to test service operations that require authentication. It creates a test user and passes it as params.user to simulate an authenticated request, then tests creating a message for that user.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.test.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// For more information about this file see https://dove.feathersjs.com/guides/cli/service.test.html\nimport assert from 'assert'\nimport { app } from '../../../src/app'\n\ndescribe('messages service', () => {\n  it('registered the service', () => {\n    const service = app.service('messages')\n\n    assert.ok(service, 'Registered the service')\n  })\n\n  it('can create a new message for a user', async () => {\n    const user = await app.service('users').create({\n      email: 'test@feathersjs.com',\n      password: 'supersecret'\n    })\n\n    const message = await app.service('messages').create(\n      {\n        text: 'Hello world'\n      },\n      { user }\n    )\n\n    assert.strictEqual(message.userId, user.id)\n\n    await app.service('messages').remove(message.id)\n    await app.service('users').remove(user.id)\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Application-wide Transaction Handling in FeathersJS\nDESCRIPTION: This snippet shows how to implement application-wide transaction handling in FeathersJS using Knex. It wraps create, update, patch, and delete operations in a transaction, handling both successful commits and rollbacks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { transaction } from '@feathersjs/knex'\n\nconst transactionHandler = async (context: HookContext<any>, next: NextFunction) => {\n  try {\n    console.log('Start our work')\n    await transaction.start()(context)\n    await next()\n    await transaction.end()(context)\n    console.log('Work done')\n  } catch (err) {\n    console.log('Rollback')\n    await transaction.rollback()(context)\n    throw err\n  }\n}\n\n// Register hooks that run on all service methods\napp.hooks({\n  around: {\n    create: [transactionHandler],\n    patch: [transactionHandler],\n    update: [transactionHandler],\n    delete: [transactionHandler]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveQuery Hook for User Data in TypeScript\nDESCRIPTION: This example shows how to use the resolveQuery hook to modify params.query. It demonstrates setting default values and limiting queries based on user permissions. The hook can be used as an around or before hook.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hooks as schemaHooks, resolve } from '@feathersjs/schema'\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport type { HookContext } from '../declarations'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\nexport const userQueryProperties = Type.Pick(userSchema, ['id', 'email'])\nexport const userQuerySchema = querySyntax(userQueryProperties)\nexport type UserQuery = Static<typeof userQuerySchema>\n\nexport const userQueryResolver = resolve<UserQuery, HookContext>({\n  // If there is an authenticated user, they can only see their own data\n  id: (value, query, context) => {\n    if (context.params.user) {\n      return context.params.user.id\n    }\n\n    return value\n  }\n})\n\n// The query can be resolved on every method\napp.service('users').hooks({\n  before: {\n    all: [resolveQuery(userQueryResolver)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Service-wide Transaction Handling in FeathersJS\nDESCRIPTION: This snippet shows how to implement service-wide transaction handling in FeathersJS using Knex. It adds transaction start, end, and rollback hooks to a specific service, ensuring all operations within the service are transactional.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\napp.service(orderPath).hooks({\n  around: {\n    // ...\n  },\n  before: {\n    // ...\n    create: [\n      schemaHooks.validateData(orderDataValidator),\n      schemaHooks.resolveData(orderDataResolver),\n      transaction.start()\n    ]\n  },\n  after: {\n    create: [\n      async (context: HookContext<OrderService>) => {\n        const ourOrder = context.result as Order //Let's not deal with arrays or pagination for now\n\n        await context.app\n          .service(shippingOrderPath)\n          .create(\n            { expedited: true, shipped: false, order_id: ourOrder.id },\n            { transaction: context.params.transaction }\n          )\n      },\n      transaction.end()\n    ]\n  },\n  error: {\n    all: [transaction.rollback()]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing JWT Payload in FeathersJS Authentication Service\nDESCRIPTION: This JavaScript code extends the AuthenticationService class to customize the JWT payload. It adds user permissions to the payload if they exist. The custom service is then used to replace the default authentication service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/stateless.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationService } = require('@feathersjs/authentication');\n\nclass MyAuthService extends AuthenticationService {\n  async getPayload(authResult, params) {\n    // Call original `getPayload` first\n    const payload = await super.getPayload(authResult, params);\n    const { user } = authResult;\n\n    if (user && user.permissions) {\n      payload.permissions = user.permissions;\n    }\n\n    return payload;\n  }\n}\n\napp.use('/authentication', new MyAuthService(app));\n```\n\n----------------------------------------\n\nTITLE: Updating Message Schema in FeathersJS (TypeScript/MongoDB)\nDESCRIPTION: This code snippet shows how to update the message schema for a FeathersJS chat application using TypeScript and MongoDB. It includes the main data model schema, resolvers for creating and querying messages, and virtual property for user association.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/schemas.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// // For more information about this file see https://dove.feathersjs.com/guides/cli/service.schemas.html\nimport { resolve, virtual } from '@feathersjs/schema'\nimport { Type, getValidator, querySyntax } from '@feathersjs/typebox'\nimport { ObjectIdSchema } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\n\nimport type { HookContext } from '../../declarations'\nimport { dataValidator, queryValidator } from '../../validators'\nimport { userSchema } from '../users/users.schema'\n\n// Main data model schema\nexport const messageSchema = Type.Object(\n  {\n    _id: ObjectIdSchema(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    userId: Type.String({ objectid: true }),\n    user: Type.Ref(userSchema)\n  },\n  { $id: 'Message', additionalProperties: false }\n)\nexport type Message = Static<typeof messageSchema>\nexport const messageValidator = getValidator(messageSchema, dataValidator)\nexport const messageResolver = resolve<Message, HookContext>({\n  user: virtual(async (message, context) => {\n    // Associate the user that sent the message\n    return context.app.service('users').get(message.userId)\n  })\n})\n\nexport const messageExternalResolver = resolve<Message, HookContext>({})\n\n// Schema for creating new entries\nexport const messageDataSchema = Type.Pick(messageSchema, ['text'], {\n  $id: 'MessageData'\n})\nexport type MessageData = Static<typeof messageDataSchema>\nexport const messageDataValidator = getValidator(messageDataSchema, dataValidator)\nexport const messageDataResolver = resolve<Message, HookContext>({\n  userId: async (_value, _message, context) => {\n    // Associate the record with the id of the authenticated user\n    return context.params.user._id\n  },\n  createdAt: async () => {\n    return Date.now()\n  }\n})\n\n// Schema for updating existing entries\nexport const messagePatchSchema = Type.Partial(messageSchema, {\n  $id: 'MessagePatch'\n})\nexport type MessagePatch = Static<typeof messagePatchSchema>\nexport const messagePatchValidator = getValidator(messagePatchSchema, dataValidator)\nexport const messagePatchResolver = resolve<Message, HookContext>({})\n\n// Schema for allowed query properties\nexport const messageQueryProperties = Type.Pick(messageSchema, ['_id', 'text', 'createdAt', 'userId'])\nexport const messageQuerySchema = Type.Intersect(\n  [\n    querySyntax(messageQueryProperties),\n    // Add additional query properties here\n    Type.Object({}, { additionalProperties: false })\n  ],\n  { additionalProperties: false }\n)\nexport type MessageQuery = Static<typeof messageQuerySchema>\nexport const messageQueryValidator = getValidator(messageQuerySchema, queryValidator)\nexport const messageQueryResolver = resolve<MessageQuery, HookContext>({\n  userId: async (value, user, context) => {\n    // We want to be able to find all messages but\n    // only let a user modify their own messages otherwise\n    if (context.params.user && context.method !== 'find') {\n      return context.params.user._id\n    }\n\n    return value\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Publishing Service Events in FeathersJS (TypeScript)\nDESCRIPTION: Shows how to publish service events to specific channels. It includes examples of publishing all events from the 'messages' service to a room-specific channel and publishing the 'created' event of the 'users' service to admins and the user who created it.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { HookContext } from './declarations'\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\napp.on('login', (payload: AuthenticationResult, { connection }: Params) => {\n  // connection can be undefined if there is no\n  // real-time connection, e.g. when logging in via REST\n  if (connection && connection.user.isAdmin) {\n    app.channel('admins').join(connection)\n  }\n})\n\n// Publish all messages service events only to its room channel\napp.service('messages').publish((data: Message, context: HookContext) => {\n  return app.channel(`rooms/${data.roomId}`)\n})\n\n// Publish the `created` event to admins and the user that sent it\napp.service('users').publish('created', (data: User, context: HookContext) => {\n  return [\n    app.channel('admins'),\n    app.channel(app.channels).filter((connection) => connection.user._id === context.params.user._id)\n  ]\n})\n\n// Prevent all events in the `password-reset` service from being published\napp.service('password-reset').publish(() => null)\n```\n\n----------------------------------------\n\nTITLE: Setting Service Parameters in Express Middleware\nDESCRIPTION: Demonstrates how to set and access service parameters through Express middleware in a FeathersJS application. Shows parameter passing between middleware and service methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Id, Params } from '@feathersjs/feathers'\nimport express, { json, urlencoded, rest } from '@feathersjs/express'\n\nconst app = express(feathers())\n\napp.use(json())\napp.use(urlencoded({ extended: true }))\napp.use(function (req, res, next) {\n  req.feathers.fromMiddleware = 'Hello world'\n  next()\n})\napp.configure(rest())\n\napp.use('todos', {\n  async get(id: Id, params: Params) {\n    console.log(params.provider) // -> 'rest'\n    console.log(params.fromMiddleware) // -> 'Hello world'\n\n    return {\n      id,\n      params,\n      description: `You have to do ${id}!`\n    }\n  }\n})\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Email Service in Feathers\nDESCRIPTION: This snippet demonstrates how to create a custom email service in Feathers that sends emails without storing them in a database. It uses the standard 'create' method to send the email.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nclass EmailService {\n  async create(data: EmailData) {\n    return sendEmail(data)\n  }\n}\n\napp.use('/email', new EmailService())\n```\n\n----------------------------------------\n\nTITLE: Setting up Validators with Ajv in Feathers.js\nDESCRIPTION: Standard validators.ts file setup that configures data and query validators using Ajv with added formats from ajv-formats. The dataValidator handles standard validation while queryValidator includes coerceTypes for automatic string type conversion.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv, addFormats } from '@feathersjs/schema'\nimport type { FormatsPluginOptions } from '@feathersjs/schema'\n\nconst formats: FormatsPluginOptions = [\n  'date-time',\n  'time',\n  'date',\n  'email',\n  'hostname',\n  'ipv4',\n  'ipv6',\n  'uri',\n  'uri-reference',\n  'uuid',\n  'uri-template',\n  'json-pointer',\n  'relative-json-pointer',\n  'regex'\n]\n\nexport const dataValidator = addFormats(new Ajv({}), formats)\n\nexport const queryValidator = addFormats(\n  new Ajv({\n    coerceTypes: true\n  }),\n  formats\n)\n```\n\n----------------------------------------\n\nTITLE: Defining logError Hook in TypeScript for FeathersJS\nDESCRIPTION: This code snippet defines the logError hook in TypeScript for FeathersJS. It is located in the src/hooks/log-error.ts file and uses the logger to log errors for any service method. The hook is designed to capture and log both general errors and validation errors.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/log-error.md#2025-04-17_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\n// src/hooks/log-error.ts\n\n// Code for the logError hook would be here\n// It would likely include error handling logic and use of the logger\n```\n\n----------------------------------------\n\nTITLE: Using the patch Method for Single and Multiple Records\nDESCRIPTION: Demonstrates how to use the patch method to update one or multiple records. The example shows patching a single message and patching all unread messages to mark them as read.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nconst patchedMessage = await app.service('messages').patch(1, {\n  text: 'A patched message'\n})\n\nconsole.log(patchedMessage)\n\nconst params = {\n  query: { read: false }\n}\n\n// Mark all unread messages as read\nconst multiPatchedMessages = await app.service('messages').patch(\n  null,\n  {\n    read: true\n  },\n  params\n)\n```\n\n----------------------------------------\n\nTITLE: Creating Data Validators with TypeBox\nDESCRIPTION: Demonstrates how to create data validators for service methods using getDataValidator with Ajv to validate user data for create, update, and patch operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv } from '@feathersjs/schema'\nimport { Type, getDataValidator } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\n// Pick the data for creating a new user\nconst userDataSchema = Type.Pick(userSchema, ['email', 'password'])\n\nconst dataValidator = new Ajv()\n\nconst userDataValidator = getDataValidator(userDataSchema, dataValidator)\n\n// For more granular control\nconst userDataValidator = getDataValidator(\n  {\n    create: userDataSchema,\n    update: userDataSchema,\n    patch: Type.Partial(userDataSchema)\n  },\n  dataValidator\n)\n```\n\n----------------------------------------\n\nTITLE: Overriding MongoDB Service Methods in TypeScript\nDESCRIPTION: This snippet shows how to override the standard service methods in a Feathers MongoDB service. It includes type definitions and method signatures for find, get, create, update, patch, and remove operations, adapted for MongoDB specifics.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Paginated } from '@feathersjs/feathers'\nimport { AdapterId } from '@feathersjs/mongodb'\n\nexport interface MessageParams extends MongoDBAdapterParams<MessageQuery> {}\n\n// By default calls the standard MongoDB adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends MongoDBService<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async find(\n    params?: ServiceParams & { paginate?: { paginate?: { default?: number; max?: number } } }\n  ): Promise<Paginated<Message>>\n  async find(params?: ServiceParams & { paginate: false }): Promise<Message[]>\n  async find(params?: ServiceParams): Promise<Paginated<Message> | Message[]>\n  async find(params?: ServiceParams): Promise<Paginated<Message> | Message[]> {\n    return super.find(params)\n  }\n\n  async get(id: AdapterId, params?: ServiceParams): Promise<Message> {\n    return super.get(id, params)\n  }\n\n  async create(data: MessageData, params?: ServiceParams): Promise<Message>\n  async create(data: MessageData[], params?: ServiceParams): Promise<Message[]>\n  async create(data: MessageData | MessageData[], params?: ServiceParams): Promise<Message | Message[]> {\n    return super.create(data, params)\n  }\n\n  async update(id: AdapterId, data: MessageData, params?: ServiceParams): Promise<Message> {\n    return super.update(id, data, params)\n  }\n\n  async patch(id: null, data: MessagePatch, params?: ServiceParams): Promise<Message[]>\n  async patch(id: AdapterId, data: MessagePatch, params?: ServiceParams): Promise<Message>\n  async patch(\n    id: NullableAdapterId,\n    data: MessagePatch,\n    params?: ServiceParams\n  ): Promise<Message | Message[]> {\n    return super.patch(id, data, params)\n  }\n\n  async remove(id: AdapterId, params?: ServiceParams): Promise<Message>\n  async remove(id: null, params?: ServiceParams): Promise<Message[]>\n  async remove(id: NullableAdapterId, params?: ServiceParams): Promise<Message | Message[]> {\n    return super.remove(id, params)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring AJV Validators with Custom Formats in TypeScript\nDESCRIPTION: This code snippet sets up two Ajv instances for validating data and queries in a Feathers.js application. It imports necessary modules, defines a list of additional formats, and creates separate validators for data and queries with different configurations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/validators.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv, addFormats } from '@feathersjs/schema'\nimport type { FormatsPluginOptions } from '@feathersjs/schema'\n\nconst formats: FormatsPluginOptions = [\n  'date-time',\n  'time',\n  'date',\n  'email',\n  'hostname',\n  'ipv4',\n  'ipv6',\n  'uri',\n  'uri-reference',\n  'uuid',\n  'uri-template',\n  'json-pointer',\n  'relative-json-pointer',\n  'regex'\n]\n\nexport const dataValidator = addFormats(new Ajv({}), formats)\n\nexport const queryValidator = addFormats(\n  new Ajv({\n    coerceTypes: true\n  }),\n  formats\n)\n```\n\n----------------------------------------\n\nTITLE: Generating Authentication Setup in FeathersJS\nDESCRIPTION: Command to initialize a standard authentication setup in a FeathersJS application using the Feathers CLI. This sets up JWT authentication, local authentication with email and password, and OAuth authentication with providers like GitHub.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/authentication.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate authentication\n```\n\n----------------------------------------\n\nTITLE: Using Pipeline Queries with $lookup and $unwind in Feathers\nDESCRIPTION: Shows how to use params.pipeline to append additional stages to a query, specifically using $lookup to populate a user attribute and $unwind to transform the result.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nconst result = await app.service('messages').find({\n  query: { $sort: { name: 1 } },\n  pipeline: [\n    {\n      $lookup: {\n        from: 'users',\n        localField: 'userId',\n        foreignField: '_id',\n        as: 'user'\n      }\n    },\n    { $unwind: { path: '$user' } }\n  ],\n  paginate: false\n})\n```\n\n----------------------------------------\n\nTITLE: Sorting results with $sort in Feathers.js\nDESCRIPTION: Demonstrates how to sort query results using the $sort filter. This example sorts messages by creation date in descending order to find the 10 newest messages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Find the 10 newest messages\napp.service('messages').find({\n  query: {\n    $limit: 10,\n    $sort: {\n      createdAt: -1\n    }\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\n/messages?$limit=10&$sort[createdAt]=-1\n```\n\n----------------------------------------\n\nTITLE: Configuring Feathers Client in React Native with Authentication\nDESCRIPTION: TypeScript code for setting up a Feathers client in React Native with Socket.io transport and authentication support, using AsyncStorage for token storage.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport io from 'socket.io-client'\nimport { AsyncStorage } from 'react-native'\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\nimport authentication from '@feathersjs/authentication-client'\n\nconst socket = io('http://api.my-feathers-server.com', {\n  transports: ['websocket'],\n  forceNew: true\n})\nconst client = feathers()\n\nclient.configure(socketio(socket))\nclient.configure(\n  authentication({\n    storage: AsyncStorage\n  })\n)\n\nconst messageService = client.service('messages')\n\nmessageService.on('created', (message: Message) => console.log('Created a message', message))\n\n// Use the messages service from the server\nmessageService.create({\n  text: 'Message from client'\n})\n```\n\n----------------------------------------\n\nTITLE: Using the find Method with Query Parameters\nDESCRIPTION: Demonstrates how to use the find method with query parameters to filter results. The examples show finding messages for a specific user and finding messages that belong to either of two rooms.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// Find all messages for user with id 1\nconst messages = await app.service('messages').find({\n  query: {\n    userId: 1\n  }\n})\n\nconsole.log(messages)\n\n// Find all messages belonging to room 1 or 3\nconst roomMessages = await app.service('messages').find({\n  query: {\n    roomId: {\n      $in: [1, 3]\n    }\n  }\n})\n\nconsole.log(roomMessages)\n```\n\n----------------------------------------\n\nTITLE: Initializing a Database Service with NameService Class in TypeScript\nDESCRIPTION: Shows how to import and initialize a database adapter service with optional configuration parameters. The example demonstrates both basic initialization and setting options like id field, event names, and pagination.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { NameService } from 'feathers-<name>'\n\napp.use('/messages', new NameService())\napp.use('/messages', new NameService({ id, events, paginate }))\n```\n\n----------------------------------------\n\nTITLE: Initializing REST Client\nDESCRIPTION: TypeScript code showing how to initialize a Feathers client with REST connection\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport rest from '@feathersjs/rest-client'\nimport { createClient } from 'my-app'\n\nconst connection = rest('https://myapp.com').fetch(window.fetch.bind(window))\n\nconst client = createClient(connection)\n```\n\n----------------------------------------\n\nTITLE: Basic Configuration Usage in TypeScript\nDESCRIPTION: Demonstrates how to initialize and use configuration in a FeathersJS application. Shows how to access configuration values using app.get()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/configuration.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport configuration from '@feathersjs/configuration'\n\n// Use the application root and `config/` as the configuration folder\nconst app = feathers().configure(configuration())\n\n// Will return 3030 with  `{ \"port\": 3030 }` in config/default.json\napp.get('port')\n```\n\n----------------------------------------\n\nTITLE: FeathersJS Profiler Hook Implementation\nDESCRIPTION: Implementation of a profiler hook that measures and logs execution time of service methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext, NextFunction } from '../declarations'\nimport { logger } from '../logger'\n\nexport const profiler = async (context: HookContext, next: NextFunction) => {\n  const startTime = Date.now()\n\n  await next()\n\n  const runtime = Date.now() - startTime\n\n  console.log(`Calling ${context.method} on service ${context.path} took ${runtime}ms`)\n}\n```\n\n----------------------------------------\n\nTITLE: Custom SQL Knex Service Methods in TypeScript\nDESCRIPTION: This snippet demonstrates how to create custom service methods for a Feathers SQL Knex service by extending the KnexAdapter class. It includes examples of custom find and get methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Id } from '@feathersjs/feathers'\nimport { KnexAdapter } from '@feathersjs/knex'\n\nexport interface MessageParams extends KnexAdapterParams<MessageQuery> {}\n\n// By default calls the standard Knex adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends KnexAdapter<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async find(params: ServiceParams) {\n    const page = this._find(params)\n\n    return {\n      status: 'ok',\n      ...page\n    }\n  }\n\n  async get(id: Id, params: ServiceParams) {\n    return {\n      message: `Hello ${id}`\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Authentication Configuration in JSON Format\nDESCRIPTION: Example configuration for the authentication service including JWT settings, entity references, and strategy definitions. This would typically be placed in config/default.json.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/service.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"secret\": \"CHANGE_ME\",\n    \"entity\": \"user\",\n    \"service\": \"users\",\n    \"authStrategies\": [\"jwt\", \"local\"],\n    \"jwtOptions\": {\n      \"header\": { \"typ\": \"access\" },\n      \"audience\": \"https://yourdomain.com\",\n      \"issuer\": \"feathers\",\n      \"algorithm\": \"HS256\",\n      \"expiresIn\": \"1d\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Local Authentication in FeathersJS Client\nDESCRIPTION: Demonstrates a complete authentication flow test including user creation, login, token verification, and cleanup. The test creates a new user, authenticates them using the local strategy, verifies the authentication response, and then performs cleanup by removing the test user.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.test.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nit('creates and authenticates a user with email and password', async () => {\n  const userData: userData = {\n    email: 'someone@example.com',\n    password: 'supersecret'\n  }\n\n  await client.service('users').create(userData)\n\n  const { user, accessToken } = await client.authenticate({\n    strategy: 'local',\n    ...userData\n  })\n\n  assert.ok(accessToken, 'Created access token for user')\n  assert.ok(user, 'Includes user in authentication data')\n  assert.strictEqual(user.password, undefined, 'Password is hidden to clients')\n\n  await client.logout()\n\n  // Remove the test user on the server\n  await app.service('users').remove(user.id)\n})\n```\n\n----------------------------------------\n\nTITLE: Initializing a Feathers Application with TypeScript\nDESCRIPTION: Creates a new Feathers application instance with TypeScript typing for services and configuration options.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\n\ntype ServiceTypes = {\n  // Add registered services here\n}\n\n// Types for `app.set(name, value)` and `app.get(name)`\ntype Configuration = {\n  port: number\n}\n\nconst app = feathers<ServiceTypes, Configuration>()\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveResult Hook in Feathers Service\nDESCRIPTION: This example shows how to use the resolveResult hook to resolve the result of a service call, including populating associations and adding computed properties.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hooks as schemaHooks, resolve, virtual } from '@feathersjs/schema'\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport type { HookContext } from '../declarations'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\nconst messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    userId: Type.Number(),\n    user: Type.Ref(userSchema)\n  },\n  { $id: 'Message', additionalProperties: false }\n)\n\ntype Message = Static<typeof messageSchema>\n\nexport const messageResolver = resolve<Message, HookContext>({\n  user: virtual(async (message, context) => {\n    // Populate the user associated via `userId`\n    const user = await context.app.service('users').get(message.userId)\n    return user\n  })\n})\n\napp.service('messages').hooks({\n  around: {\n    all: [schemaHooks.resolveResult(messageResolver)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Feathers Client Connection\nDESCRIPTION: Establishes Socket.io connection and initializes Feathers client application with authentication support. Configures localStorage for token storage.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n/* global io, feathers, moment */\n// Establish a Socket.io connection\nconst socket = io()\n// Initialize our Feathers client application through Socket.io\n// with hooks and authentication.\nconst client = feathers()\n\nclient.configure(feathers.socketio(socket))\n// Use localStorage to store our login token\nclient.configure(feathers.authentication())\n```\n\n----------------------------------------\n\nTITLE: Implementing Real-time Message Interface with Feathers and Socket.io\nDESCRIPTION: A complete HTML page implementation that creates a real-time messaging interface using Feathers client and Socket.io. The code includes UI elements for message input, message display, and JavaScript functionality for handling real-time message creation and updates.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_11\n\nLANGUAGE: html\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>Feathers Example</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/daisyui@2.46.1/dist/full.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <link\n      href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2/dist/tailwind.min.css\"\n      rel=\"stylesheet\"\n      type=\"text/css\"\n    />\n    <link rel=\"stylesheet\" href=\"https://feathersjs.com/feathers-chat.css\" />\n  </head>\n  <body data-theme=\"dracula\">\n    <main id=\"main\" class=\"p-8\">\n      <h1 class=\"font-medium leading-tight text-5xl mt-0 mb-2\">Welcome to Feathers</h1>\n\n      <div class=\"form-control w-full py-2\">\n        <form class=\"input-group overflow-hidden\" onsubmit=\"sendMessage(event)\">\n          <input name=\"message\" id=\"message-text\" type=\"text\" class=\"input input-bordered w-full\" />\n          <button type=\"submit\" class=\"btn\">Send</button>\n        </form>\n      </div>\n      <h2 class=\"pt-1 pb-2 text-lg\">Messages</h2>\n    </main>\n\n    <script src=\"//unpkg.com/@feathersjs/client@^5.0.0/dist/feathers.js\"></script>\n    <script src=\"/socket.io/socket.io.js\"></script>\n    <script type=\"text/javascript\">\n      // Set up socket.io\n      const socket = io('http://localhost:3030')\n      // Initialize a Feathers app\n      const app = feathers()\n\n      // Register socket.io to talk to our server\n      app.configure(feathers.socketio(socket))\n\n      // Form submission handler that sends a new message\n      async function sendMessage(event) {\n        const messageInput = document.getElementById('message-text')\n\n        event.preventDefault()\n\n        // Create a new message with the input field value\n        await app.service('messages').create({\n          text: messageInput.value\n        })\n\n        messageInput.value = ''\n      }\n\n      // Renders a single message on the page\n      function addMessage(message) {\n        document.getElementById('main').innerHTML += `<div class=\"chat chat-start\">\n          <div class=\"chat-bubble\">${message.text}</div>\n        </div>`\n      }\n\n      const main = async () => {\n        // Find all existing messages\n        const messages = await app.service('messages').find()\n\n        // Add existing messages to the list\n        messages.forEach(addMessage)\n\n        // Add any newly created message to the list in real-time\n        app.service('messages').on('created', addMessage)\n      }\n\n      main()\n    </script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing resolveExternal Hook for User Data in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the resolveExternal hook to create a safe version of user data for external clients. It hides sensitive information like passwords and can be used as an around or after hook.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hooks as schemaHooks, resolve } from '@feathersjs/schema'\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport type { HookContext } from '../declarations'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\nexport const userExternalResolver = resolve<User, HookContext>({\n  // Always hide the password for external responses\n  password: () => undefined\n})\n\n// Dispatch should be resolved on every method\napp.service('users').hooks({\n  around: {\n    all: [schemaHooks.resolveExternal(userExternalResolver)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using EventEmitters with Feathers Services in TypeScript\nDESCRIPTION: This snippet demonstrates how to use EventEmitters with Feathers services, including listening to events, unbinding listeners, and emitting custom events.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst messages = app.service('messages')\n\n// Listen to a normal service event\nmessages.on('patched', (message: Message) => console.log('message patched', message))\n\n// Only listen to an event once\nmesssages.once('removed', (message: Message) => console.log('First time a message has been removed', message))\n\n// A reference to a handler\nconst onCreatedListener = (message: Message) => console.log('New message created', message)\n\n// Listen `created` with a handler reference\nmessages.on('created', onCreatedListener)\n\n// Unbind the `created` event listener\nmessages.removeListener('created', onCreatedListener)\n\n// Send a custom event\nmessages.emit('customEvent', {\n  anything: 'Data can be anything'\n})\n```\n\n----------------------------------------\n\nTITLE: Using Schema References in TypeScript\nDESCRIPTION: Demonstrates how to use schema references with the $ref keyword and explicitly add referenced types in TypeScript.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { FromSchema } from '@feathersjs/schema'\n\nexport const userSchema = {\n  $id: 'User',\n  type: 'object',\n  additionalProperties: false,\n  required: ['email', 'password'],\n  properties: {\n    id: { type: 'number' },\n    email: { type: 'string' },\n    password: { type: 'string' }\n  }\n} as const\n\nexport type User = FromSchema<typeof userSchema>\n\nexport const messageSchema = {\n  $id: 'Message',\n  type: 'object',\n  additionalProperties: false,\n  required: ['text'],\n  properties: {\n    text: { type: 'string' },\n    user: { $ref: 'User' }\n  }\n} as const\n\nexport type Message = FromSchema<\n  typeof messageSchema,\n  {\n    // All schema references need to be passed to get the correct type\n    references: [typeof userSchema]\n  }\n>\n```\n\n----------------------------------------\n\nTITLE: Simple equality comparison in Feathers.js queries\nDESCRIPTION: Demonstrates basic equality filtering where fields without special query parameters are compared directly for equality. This example finds all unread messages in room #2.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all unread messages in room #2\napp.service('messages').find({\n  query: {\n    read: false,\n    roomId: 2\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?read=false&roomId=2\n```\n\n----------------------------------------\n\nTITLE: Using $in and $nin operators in Feathers.js\nDESCRIPTION: Shows how to use $in and $nin operators to find records where a property matches ($in) or doesn't match ($nin) any values in an array. This example finds messages in rooms 2 or 5.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages in room 2 or 5\napp.service('messages').find({\n  query: {\n    roomId: {\n      $in: [2, 5]\n    }\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?roomId[$in][]=2&roomId[$in][]=5\n```\n\n----------------------------------------\n\nTITLE: Creating Request and Response Schemas for Custom Methods\nDESCRIPTION: TypeBox schema definitions for a custom sayHello method, defining both the request and response object structures. The request schema includes validation rules like minLength and the response schema defines the expected return type.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n//Our request object, we expect something like {name: \"Bob\"}\nexport const sayHelloRequest = Type.Object(\n  {\n    name: Type.String({\n      description: \"Who are we saying hello to!\",\n      examples: [\"Bob\"],\n      minLength: 2,\n    }),\n  },\n  { $id: \"sayHelloRequest\", additionalProperties: false },\n);\n\n//We intend on returning an object with a string response property\nexport const sayHelloResponse = Type.Object(\n  { response: Type.String() },\n  { $id: \"sayHelloResponse\", additionalProperties: false },\n);\n\nexport const sayHelloValidator = getValidator(sayHelloRequest, dataValidator);\n```\n\n----------------------------------------\n\nTITLE: Implementing KnexService for Messages\nDESCRIPTION: Example of creating a Messages service using KnexService with TypeScript. Shows service class implementation with proper typing and configuration setup.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport { KnexService } from '@feathersjs/knex'\nimport type { KnexAdapterParams, KnexAdapterOptions } from '@feathersjs/knex'\n\nimport type { Application } from '../../declarations'\nimport type { Messages, MessagesData, MessagesQuery } from './messages.schema'\n\nexport interface MessagesParams extends KnexAdapterParams<MessagesQuery> {}\n\nexport class MessagesService<ServiceParams extends Params = MessagesParams> extends KnexService<\n  Messages,\n  MessagesData,\n  ServiceParams\n> {}\n\nexport const messages = (app: Application) => {\n  const options: KnexAdapterOptions = {\n    paginate: app.get('paginate'),\n    Model: app.get('sqliteClient'),\n    name: 'messages'\n  }\n  app.use('messages', new MessagesService(options))\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Authenticate Hook Usage with Multiple Strategies in TypeScript\nDESCRIPTION: This example demonstrates how to use the authenticate hook with multiple strategies ('jwt' and 'api-key') in a FeathersJS service. It uses the default authentication service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/hook.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { authenticate } from '@feathersjs/authentication'\n\n// Authenticate with `jwt` and `api-key` strategy\n// using app.service('authentication') as the authentication service\napp.service('messages').hooks({\n  around: {\n    all: [authenticate('jwt', 'api-key')]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Passing Transaction in FeathersJS Service Create Method\nDESCRIPTION: This code snippet demonstrates how to pass a transaction object when creating a Shipping Order in FeathersJS. It ensures that the Shipping Order creation is part of the same transaction as the Order creation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nafter: {\n  create: [\n    async (context: HookContext<OrderService>) => {\n      const ourOrder = context.result as Order\n\n      await context.app.service(shippingOrderPath).create(\n        { expedited: true, shipped: false, order_id: ourOrder.id },\n        { transaction: context.params.transaction } // <--\n      )\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Related Schemas with References in TypeBox\nDESCRIPTION: Demonstrates how to define related schemas (User and Message) with TypeBox, creating separate data schemas for creating new records using Type.Pick. Shows how to reference one schema from another.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\n\nconst userSchema = Type.Object(\n  {\n    id: Type.Number(),\n    email: Type.String(),\n    password: Type.String(),\n    avatar: Type.Optional(Type.String())\n  },\n  { $id: 'User', additionalProperties: false }\n)\ntype User = Static<typeof userSchema>\n\n// Pick the data for creating a new user\nconst userDataSchema = Type.Pick(userSchema, ['email', 'password'])\n\ntype UserData = Static<typeof userDataSchema>\n\nconst messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    userId: Type.Number(),\n    // Reference the user\n    user: Type.Ref(userSchema)\n  },\n  { $id: 'Message', additionalProperties: false }\n)\n\ntype Message = Static<typeof messageSchema>\n\n// Pick the data for creating a new message\nconst messageDataSchema = Type.Pick(messageSchema, ['text'])\n\ntype MessageData = Static<typeof messageDataSchema>\n```\n\n----------------------------------------\n\nTITLE: Generating a New Feathers Application with CLI\nDESCRIPTION: Command to create a new Feathers application called 'feathers-chat' using the latest version of the Feathers CLI.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm create feathers@latest feathers-chat\n```\n\n----------------------------------------\n\nTITLE: Creating Allow-ApiKey Hook in TypeScript\nDESCRIPTION: A hook that extracts the API key from the request header and sets up authentication parameters. This TypeScript hook runs before the authenticate hook to prepare API key authentication if a valid token is present in the headers.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { HookContext, NextFunction } from '@feathersjs/feathers';\n\nexport default () => async (context: HookContext, next: NextFunction) => {\n  const { params, app } = context;\n\n  const headerField = app.get('authentication').apiKey.header;\n  const token = params.headers ? params.headers[headerField] : null;\n\n  if (token && params.provider && !params.authentication) {\n    context.params = {\n      ...params,\n      authentication: {\n        strategy: 'apiKey',\n        token\n      }\n    };\n  }\n\n  return next();\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Validation with Error Throwing in FeathersJS Hooks\nDESCRIPTION: This example shows how to use hooks for data validation. It demonstrates checking if a message text is empty and throwing an error to prevent the service method from executing if validation fails.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\napp.service('messages').hooks({\n  before: {\n    create: [\n      async (context: HookContext) => {\n        if (context.data.text.trim() === '') {\n          throw new Error('Message text can not be empty')\n        }\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Messages Service Test in JavaScript for Feathers.js\nDESCRIPTION: JavaScript code for testing message creation and processing, including user information handling in Feathers.js messages service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nconst assert = require('assert');\nconst app = require('../../src/app');\n\ndescribe('\\'messages\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('messages');\n\n    assert.ok(service, 'Registered the service');\n  });\n\n  it('creates and processes message, adds user information', async () => {\n    // Create a new user we can use for testing\n    const user = await app.service('users').create({\n      email: 'messagetest@example.com',\n      password: 'supersecret'\n    });\n\n    // The messages service call params (with the user we just created)\n    const params = { user };\n    const message = await app.service('messages').create({\n      text: 'a test',\n      additional: 'should be removed'\n    }, params);\n\n    assert.equal(message.text, 'a test');\n    // `userId` should be set to the provided user's id\n    assert.equal(message.userId, user._id);\n    // Additional property has been removed\n    assert.ok(!message.additional);\n    // `user` has been populated\n    assert.deepEqual(message.user, user);\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Service Options with Custom Methods and Events\nDESCRIPTION: Shows how to register a service with custom methods and events, extending EventEmitter for event handling.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { EventEmitter } from 'events'\nimport { feathers, type Id } from '@feathersjs/feathers'\n\n// Feathers services will always be event emitters\n// but we can also extend it for better type consistency\nclass MessageService extends EventEmitter {\n  async doSomething(data: { message: string }, params: Params) {\n    this.emit('something', 'I did something')\n    return data\n  }\n\n  async get(id: Id) {\n    return {\n      id,\n      text: `This is the ${id} message!`\n    }\n  }\n}\n\ntype ServiceTypes = {\n  // Add services path to type mapping here\n  messages: MessageService\n}\n\nconst app = feathers<ServiceTypes>()\n\n// Register a service with options\napp.use('messages', new MessageService(), {\n  methods: ['get', 'doSomething'],\n  events: ['something']\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing JWT Authentication Service\nDESCRIPTION: TypeScript implementation of JWT authentication service setup with type declarations and strategy registration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/jwt.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new JWTStrategy())\n\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Query Schema with TypeBox querySyntax\nDESCRIPTION: Shows how to create a query schema for Feathers using the querySyntax helper to validate query parameters against a subset of fields from the main schema.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { querySyntax } from '@feathersjs/typebox'\n\n// Schema for allowed query properties\nconst messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'], {\n  additionalProperties: false\n})\nconst messageQuerySchema = querySyntax(messageQueryProperties)\n\ntype MessageQuery = Static<typeof messageQuerySchema>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Events in Feathers Service with TypeScript\nDESCRIPTION: This code shows how to implement custom events in a Feathers service using TypeScript. It includes a payment service with custom 'status' events and demonstrates how to register the service with custom events.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nclass PaymentService {\n  async create(data: any, params: Params) {\n    const customer = await createStripeCustomer(params.user)\n    this.emit('status', { status: 'created' })\n\n    const payment = await createPayment(data)\n    this.emit('status', { status: 'completed' })\n\n    return payment\n  }\n}\n\n// Then register it like this:\napp.use('payments', new PaymentService(), {\n  events: ['status']\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Methods to MongoDB Service in TypeScript\nDESCRIPTION: This snippet shows how to add custom methods to a Feathers MongoDB service. It includes an example of a custom 'myMethod' that takes custom data and parameters.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface MessageParams extends MongoDBAdapterParams<MessageQuery> {}\n\nexport type MyMethodData = { name: string }\n\n// By default calls the standard MongoDB adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends MongoDBService<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async myMethod(data: MyMethodData, params: ServiceParams) {\n    return {\n      message: `${data.greeting || 'Hello'} ${params.user.name}!`\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Hooks with a Feathers Service in TypeScript\nDESCRIPTION: This snippet shows how to register hooks with a Feathers service, including the logRuntime hook and other built-in hooks for authentication and schema validation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/hooks.md#2025-04-17_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\n// For more information about this file see https://dove.feathersjs.com/guides/cli/service.html\nimport { authenticate } from '@feathersjs/authentication'\n\nimport { hooks as schemaHooks } from '@feathersjs/schema'\n\nimport {\n  messageDataValidator,\n  messagePatchValidator,\n  messageQueryValidator,\n  messageResolver,\n  messageExternalResolver,\n  messageDataResolver,\n  messagePatchResolver,\n  messageQueryResolver\n} from './messages.schema'\n\nimport type { Application } from '../../declarations'\nimport { MessageService, getOptions } from './messages.class'\nimport { messagePath, messageMethods } from './messages.shared'\nimport { logRuntime } from '../../hooks/log-runtime'\n\nexport * from './messages.class'\nexport * from './messages.schema'\n\n// A configure function that registers the service and its hooks via `app.configure`\nexport const message = (app: Application) => {\n  // Register our service on the Feathers application\n  app.use(messagePath, new MessageService(getOptions(app)), {\n    // A list of all methods this service exposes externally\n    methods: messageMethods,\n    // You can add additional custom events to be sent to clients here\n    events: []\n  })\n  // Initialize hooks\n  app.service(messagePath).hooks({\n    around: {\n      all: [\n        logRuntime,\n        authenticate('jwt'),\n        schemaHooks.resolveExternal(messageExternalResolver),\n        schemaHooks.resolveResult(messageResolver)\n      ]\n    },\n    before: {\n      all: [schemaHooks.validateQuery(messageQueryValidator), schemaHooks.resolveQuery(messageQueryResolver)],\n      find: [],\n      get: [],\n      create: [schemaHooks.validateData(messageDataValidator), schemaHooks.resolveData(messageDataResolver)],\n      patch: [schemaHooks.validateData(messagePatchValidator), schemaHooks.resolveData(messagePatchResolver)],\n      remove: []\n    },\n    after: {\n      all: []\n    },\n    error: {\n      all: []\n    }\n  })\n}\n\n// Add this service to the service type index\ndeclare module '../../declarations' {\n  interface ServiceTypes {\n    [messagePath]: MessageService\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Redis-Based JWT Revocation in FeathersJS\nDESCRIPTION: Advanced implementation of JWT revocation using Redis as a storage backend. This implementation automatically expires revoked tokens and provides persistent storage. Includes Redis client setup and token management methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/revoke-jwt.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst redis = require('redis');\n\nconst { AuthenticationService } = require('@feathersjs/authentication');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nclass RedisAuthService extends AuthenticationService {\n  constructor (app, configKey) {\n    super(app, configKey);\n\n    const client = redis.createClient();\n\n    this.redis = {\n      client,\n      get: client.get.bind(client),\n      set: client.set.bind(client),\n      exists: client.exists.bind(client),\n      expireat: client.exists.bind(client)\n    }\n\n    (async () => {\n      await this.redis.client.connect();\n    })()\n  }\n\n  async revokeAccessToken (accessToken) {\n    // First make sure the access token is valid\n    const verified = await this.verifyAccessToken(accessToken);\n    // Calculate the remaining valid time for the token (in seconds)\n    const expiry = verified.exp - Math.floor(Date.now() / 1000);\n\n    // Add the revoked token to Redis and set expiration\n    await this.redis.set(accessToken, 1, { EX: expiry });\n\n    return verified;\n  }\n\n  async verifyAccessToken(accessToken) {\n    if (await this.redis.exists(accessToken)) {\n      throw new NotAuthenticated('Token revoked');\n    }\n\n    return super.verifyAccessToken(accessToken);\n  }\n\n  async remove (id, params) {\n    const authResult = await super.remove(id, params);\n    const { accessToken } = authResult;\n\n    if (accessToken) {\n      // If there is an access token, revoke it\n      await this.revokeAccessToken(accessToken);\n    }\n\n    return authResult;\n  }\n}\n\napp.use('/authentication', new RedisAuthService(app));\n```\n\n----------------------------------------\n\nTITLE: Customizing GitHub OAuth Strategy in Feathers.js\nDESCRIPTION: TypeScript implementation for extending the OAuthStrategy to customize the GitHub authentication. It adds avatar and email fields from the GitHub profile to the user entity when logging in via GitHub.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\nimport { oauth, OAuthStrategy } from '@feathersjs/authentication-oauth'\nimport type { OAuthProfile } from '@feathersjs/authentication-oauth'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nclass GitHubStrategy extends OAuthStrategy {\n  async getEntityData(profile: OAuthProfile, existing: any, params: Params) {\n    const baseData = await super.getEntityData(profile, existing, params)\n\n    return {\n      ...baseData,\n      // The GitHub profile image\n      avatar: profile.avatar_url,\n      // The user email address (if available)\n      email: profile.email\n    }\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new JWTStrategy())\n  authentication.register('local', new LocalStrategy())\n  authentication.register('github', new GitHubStrategy())\n\n  app.use('authentication', authentication)\n  app.configure(oauth())\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Info Service for Service Discovery\nDESCRIPTION: Implements a custom service that provides information about available services on the server, useful for client-server communication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nclass InfoService {\n  constructor(public app: Application) {}\n\n  async find() {\n    return {\n      service: Object.keys(this.app.services)\n    }\n  }\n}\n\napp.use('info', new InfoService(app))\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Users Service Test in TypeScript for Feathers.js\nDESCRIPTION: TypeScript code for testing user creation, password encryption, and external request handling in Feathers.js users service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport assert from 'assert';\nimport app from '../../src/app';\n\ndescribe('\\'users\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('users');\n\n    assert.ok(service, 'Registered the service');\n  });\n\n  it('creates a user, encrypts password and adds gravatar', async () => {\n    const user = await app.service('users').create({\n      email: 'test@example.com',\n      password: 'secret'\n    });\n\n    // Verify Gravatar has been set as we'd expect\n    assert.equal(user.avatar, 'https://s.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=60');\n    // Makes sure the password got encrypted\n    assert.ok(user.password !== 'secret');\n  });\n\n  it('removes password for external requests', async () => {\n    // Setting `provider` indicates an external request\n    const params = { provider: 'rest' };\n\n    const user = await app.service('users').create({\n      email: 'test2@example.com',\n      password: 'secret'\n    }, params);\n\n    // Make sure password has been removed\n    assert.ok(!user.password);\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing a Simple Message Service with find() Method in TypeScript\nDESCRIPTION: Example of implementing a message service with a find method that returns a static array of messages. This demonstrates the basic pattern for implementing the find service method.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nclass MessageService {\n  async find(params: Params) {\n    return [\n      {\n        id: 1,\n        text: 'Message 1'\n      },\n      {\n        id: 2,\n        text: 'Message 2'\n      }\n    ]\n  }\n}\n\napp.use('messages', new MessageService())\n```\n\n----------------------------------------\n\nTITLE: Creating Anonymous Authentication Strategy in TypeScript\nDESCRIPTION: Implements a custom authentication strategy class that handles anonymous authentication in FeathersJS. The strategy returns an object with anonymous:true to identify unauthenticated users.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/anonymous.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Params } from '@feathersjs/feathers';\nimport { AuthenticationBaseStrategy, AuthenticationResult, AuthenticationService } from '@feathersjs/authentication';\n\nclass AnonymousStrategy extends AuthenticationBaseStrategy {\n  async authenticate(authentication: AuthenticationResult, params: Params) {\n    return {\n      anonymous: true\n    }\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n  // ... authentication service setup\n  authentication.register('anonymous', new AnonymousStrategy());\n}\n```\n\n----------------------------------------\n\nTITLE: Using API Key Authentication with JWT Authentication\nDESCRIPTION: Example of integrating the API key authentication hook with the standard authenticate hook. This shows how to combine JWT and API key authentication strategies in a service's hooks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { authenticate } from '@feathersjs/authentication/lib/hooks';\nimport allowApiKey from './hooks/allow-api-key';\n\nall: [ allowApiKey(), authenticate('jwt', 'apiKey') ],\n```\n\n----------------------------------------\n\nTITLE: Implementing a Log Runtime Hook in TypeScript\nDESCRIPTION: This code demonstrates how to implement a hook that logs the runtime of a service method. It uses an 'around' hook to capture start and end times.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/hooks.md#2025-04-17_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport type { HookContext, NextFunction } from '../declarations'\nimport { logger } from '../logger'\n\nexport const logRuntime = async (context: HookContext, next: NextFunction) => {\n  const startTime = Date.now()\n  // Run everything else (other hooks and service call)\n  await next()\n\n  const duration = Date.now() - startTime\n  logger.info(`Calling ${context.method} on ${context.path} took ${duration}ms`)\n}\n\n```\n\n----------------------------------------\n\nTITLE: Global Event Publishing in FeathersJS (TypeScript)\nDESCRIPTION: Demonstrates how to publish events globally for all services. This example publishes all events to authenticated users and a custom 'log' event to all connections.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\napp.on('login', (payload: AuthenticationResult, { connection }: Params) => {\n  // connection can be undefined if there is no\n  // real-time connection, e.g. when logging in via REST\n  if (connection) {\n    app.channel('authenticated').join(connection)\n  }\n})\n\n// Publish all events to all authenticated users\napp.publish((data: any, context: HookContext) => {\n  return app.channel('authenticated')\n})\n\n// Publish the `log` custom event to all connections\napp.publish('log', (data: any, context: HookContext) => {\n  return app.channel(app.channels)\n})\n```\n\n----------------------------------------\n\nTITLE: MongoDB Regex Search Query Example\nDESCRIPTION: Example of a MongoDB query using regular expressions to perform basic text search with case insensitivity and other regex options.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  text: { $regex: 'feathersjs', $options: 'igm' },\n}\n```\n\n----------------------------------------\n\nTITLE: Patch Schema for Update Operations\nDESCRIPTION: Defines a patch schema for updating existing entries using Type.Partial to make all properties optional.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const messagePatchSchema = Type.Partial(messageSchema, {\n  $id: 'MessagePatch'\n})\nexport type MessagePatch = Static<typeof messagePatchSchema>\nexport const messagePatchValidator = getValidator(messagePatchSchema, dataValidator)\nexport const messagePatchResolver = resolve<Message, HookContext>({})\n```\n\n----------------------------------------\n\nTITLE: Configuring API Key Authentication in FeathersJS\nDESCRIPTION: Basic configuration for enabling API key authentication in FeathersJS. This snippet shows how to add the apiKey strategy to the authentication configuration with allowed keys and a custom header name.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"authentication\": {\n    ...otherConfig,\n    \"authStrategies\": [ ...otherStrategies, \"apiKey\" ],\n    \"apiKey\": {\n      \"allowedKeys\": [ \"API_KEY_1\", \"API_KEY_2\" ],\n      \"header\": \"x-access-token\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing API Key Strategy in TypeScript\nDESCRIPTION: A custom authentication strategy for API key validation in TypeScript. This strategy checks if the provided token matches any of the allowed keys in the configuration and returns a result object with apiKey set to true if authenticated.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationBaseStrategy, AuthenticationResult, AuthenticationService } from '@feathersjs/authentication';\nimport { NotAuthenticated } from '@feathersjs/errors';\nimport { ServiceAddons } from '@feathersjs/feathers';\nimport { Application } from './declarations';\n\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons<any>;\n  }\n}\n\nclass ApiKeyStrategy extends AuthenticationBaseStrategy {\n  app: Application;\n\n  constructor(app: Application) {\n    super();\n    this.app = app;\n  }\n\n  async authenticate(authentication: AuthenticationResult) {\n    const { token } = authentication;\n\n    const config = this.app.get('authentication').apiKey;\n\n    const match = config.allowedKeys.includes(token);\n    if (!match) throw new NotAuthenticated('Incorrect API Key');\n\n    return {\n      apiKey: true\n    }\n  }\n}\n\nexport default function (app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  // This can have multiple .register calls if multiple strategies have been added\n  authentication.register('apiKey', new ApiKeyStrategy(app));\n\n  app.use('/authentication', authentication);\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing REST Client with Feathers\nDESCRIPTION: Basic setup of a FeathersJS REST client with different base URL configurations and AJAX library setup.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport rest from '@feathersjs/rest-client'\n\nconst app = feathers()\n\n// Connect to the same as the browser URL (only in the browser)\nconst restClient = rest()\n\n// Connect to a different URL\nconst restClient = rest('http://feathers-api.com')\n\n// Configure an AJAX library (see below) with that client\napp.configure(restClient.fetch(window.fetch.bind(window)))\n\n// Connect to the `http://feathers-api.com/messages` service\nconst messages = app.service('messages')\n```\n\n----------------------------------------\n\nTITLE: Creating and Using Feathers Errors in TypeScript\nDESCRIPTION: Examples of creating various types of Feathers errors, including NotFound, GeneralError, and BadRequest. It demonstrates how to create errors with messages, wrap existing errors, and pass additional data.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/errors.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { NotFound, GeneralError, BadRequest } from '@feathersjs/errors'\n\n// If you were to create an error yourself.\nconst notFound = new NotFound('User does not exist')\n\n// You can wrap existing errors\nconst existing = new GeneralError(new Error('I exist'))\n\n// You can also pass additional data\nconst data = new BadRequest('Invalid email', {\n  email: 'sergey@google.com'\n})\n\n// You can also pass additional data without a message\nconst dataWithoutMessage = new BadRequest({\n  email: 'sergey@google.com'\n})\n\n// If you need to pass multiple errors\nconst validationErrors = new BadRequest('Invalid Parameters', {\n  errors: { email: 'Email already taken' }\n})\n\n// You can also omit the error message and we'll put in a default one for you\nconst validationErrors = new BadRequest({\n  errors: {\n    email: 'Invalid Email'\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Stateless JWT Authentication in FeathersJS\nDESCRIPTION: This JSON configuration sets up stateless JWT authentication by setting the 'entity' option to null. It also includes other JWT options such as header type, audience, issuer, algorithm, and expiration time.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/stateless.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"secret\": \"CHANGE_ME\",\n    \"entity\": null,\n    \"authStrategies\": [ \"jwt\", \"local\" ],\n    \"jwtOptions\": {\n      \"header\": { \"typ\": \"access\" },\n      \"audience\": \"https://yourdomain.com\",\n      \"issuer\": \"feathers\",\n      \"algorithm\": \"HS256\",\n      \"expiresIn\": \"1d\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth Authentication in FeathersJS\nDESCRIPTION: Example configuration for OAuth authentication settings including redirect URLs and provider credentials for Google and Twitter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"origins\": [\"localhost:3030\"],\n    \"oauth\": {\n      \"redirect\": \"/frontend\",\n      \"google\": {\n        \"key\": \"...\",\n        \"secret\": \"...\",\n        \"custom_params\": { \"access_type\": \"offline\" }\n      },\n      \"twitter\": {\n        \"key\": \"...\",\n        \"secret\": \"...\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Standalone Resolver in TypeScript\nDESCRIPTION: This snippet demonstrates how to create and use a standalone resolver with a custom context. It resolves 'likes' and 'user' properties for a Message type.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { resolve } from '@feathersjs/schema'\n\ntype User = {\n  id: number\n  name: string\n}\n\ntype Message = {\n  id: number\n  userId: number\n  likes: number\n  text: string\n  user: User\n}\n\nclass MyContext {\n  getUser(id) {\n    return {\n      id,\n      name: 'David'\n    }\n  }\n\n  getLikes(messageId) {\n    return 10\n  }\n}\n\nconst messageResolver = resolve<Message, MyContext>({\n  likes: (value, message, context) => {\n    return context.getLikes(message.id)\n  },\n  user: (value, message, context) => {\n    return context.getUser(message.userId)\n  }\n})\n\nconst resolvedMessage = await messageResolver.resolve(\n  {\n    id: 1,\n    userId: 23,\n    text: 'Hello!'\n  },\n  new MyContext()\n)\n```\n\n----------------------------------------\n\nTITLE: FeathersJS Around Hook Implementation\nDESCRIPTION: Implementation of an around hook that provides access to before, after, and error flows. Takes hook context and next function as parameters.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext, NextFunction } from '../declarations'\n\nexport const myFancyHook = async (context: HookContext, next: NextFunction) => {\n  console.log(`Running hook ${name} on ${context.path}.${context.method}`)\n  await next()\n  // Do things after here\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth Authentication in Feathers\nDESCRIPTION: TypeScript code snippet showing how to set up OAuth authentication in a Feathers application, including registering strategies and configuring the authentication service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\nimport { OAuthStrategy, oauth } from '@feathersjs/authentication-oauth'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new JWTStrategy())\n  authentication.register('github', new OAuthStrategy())\n  authentication.register('google', new OAuthStrategy())\n\n  app.use('authentication', authentication)\n  app.configure(oauth({}))\n}\n```\n\n----------------------------------------\n\nTITLE: Leaving a Channel in FeathersJS (TypeScript)\nDESCRIPTION: Shows how to remove a connection from a channel using a filter function. In this example, it removes the user with '_id' 5 from the 'admins' channel.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\n\n// Make the user with `_id` 5 leave the `admins` channel\napp.channel('admins').leave((connection: RealTimeConnection) => {\n  return connection.user._id === 5\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Query Extensions with TypeBox\nDESCRIPTION: Demonstrates how to extend the Feathers query syntax with custom operators like $ilike by using querySyntax with extensions parameter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { querySyntax } from '@feathersjs/typebox'\n\n// Schema for allowed query properties\nconst messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'], {\n  additionalProperties: false\n})\nconst messageQuerySchema = Type.Intersect(\n  [\n    // This will additionally allow querying for `{ name: { $ilike: 'Dav%' } }`\n    querySyntax(messageQueryProperties, {\n      name: {\n        $ilike: Type.String()\n      }\n    }),\n    // Add additional query properties here\n    Type.Object({})\n  ],\n  { additionalProperties: false }\n)\n```\n\n----------------------------------------\n\nTITLE: Skipping Service Method with context.result in FeathersJS Hooks\nDESCRIPTION: This snippet demonstrates how to skip the actual service method call by setting context.result in a before hook. It shows how to always return the authenticated user instead of fetching from the database for user get requests.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('users').hooks({\n  before: {\n    get: [\n      async (context: HookContext) => {\n        // Never call the actual users service\n        // just use the authenticated user\n        context.result = context.params.user\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Joining a Channel in FeathersJS (TypeScript)\nDESCRIPTION: Demonstrates how to join a channel when a user logs in, specifically joining the 'admins' channel for admin users. It shows that calling join multiple times on the same connection has no effect.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\napp.on('login', (payload: AuthenticationResult, { connection }: Params) => {\n  if (connection && connection.user.isAdmin) {\n    // Join the admins channel\n    app.channel('admins').join(connection)\n\n    // Calling a second time will do nothing\n    app.channel('admins').join(connection)\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Updated and Patched Events in Feathers Service with TypeScript\nDESCRIPTION: This code demonstrates how to implement and listen to 'updated' and 'patched' events in a Feathers service using TypeScript. It includes service methods and event listeners.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Id, Params, HookContext } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  async update(id: Id, data: Message) {\n    return data\n  }\n\n  async patch(id: Id, data: Message) {\n    return data\n  }\n}\n\nconst app = feathers<{ messages: MessageService }>()\n\napp.use('messages', new MessageService())\n\nconst messages = app.service('my/messages')\n\nmessages.on('updated', (message: Message, context: HookContext) => console.log('updated', message))\nmessages.on('patched', (message: Message) => console.log('patched', message))\n\nmessages.update(0, {\n  text: 'updated message'\n})\n\nmessages.patch(0, {\n  text: 'patched message'\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Auth0 Strategy in JavaScript\nDESCRIPTION: JavaScript implementation of Auth0 authentication strategy extending OAuthStrategy with custom entity data handling. Includes service registration and configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/auth0.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationService, JWTStrategy } = require('@feathersjs/authentication');\nconst { LocalStrategy } = require('@feathersjs/authentication-local');\nconst { expressOauth, OAuthStrategy } = require('@feathersjs/authentication-oauth');\n\nclass Auth0Strategy extends OAuthStrategy {\n  async getEntityData(profile) {\n    const baseData = await super.getEntityData(profile);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('auth0', new Auth0Strategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n\n----------------------------------------\n\nTITLE: Using $ne operator for not-equal comparison in Feathers.js\nDESCRIPTION: Demonstrates how to use the $ne (not equal) operator to find records that don't match a specific value. This example finds messages that are not marked as archived.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages that are not marked as archived\napp.service('messages').find({\n  query: {\n    archived: {\n      $ne: true\n    }\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?archived[$ne]=true\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Facebook OAuth Strategy in TypeScript\nDESCRIPTION: Extended implementation of the OAuthStrategy class in TypeScript to fetch additional profile information from Facebook's Graph API and process the user data for authentication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/facebook.md#2025-04-17_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { Params } from '@feathersjs/feathers';\nimport { AuthenticationService, JWTStrategy, AuthenticationRequest } from '@feathersjs/authentication';\nimport { LocalStrategy } from '@feathersjs/authentication-local';\nimport { expressOauth, OAuthStrategy, OAuthProfile } from '@feathersjs/authentication-oauth';\nimport axios from 'axios';\nimport { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons<any>;\n  }\n}\n\nclass FacebookStrategy extends OAuthStrategy {\n  async getProfile (authResult: AuthenticationRequest, _params: Params) {\n    // This is the OAuth access token that can be used\n    // for Facebook API requests as the Bearer token\n    const accessToken = authResult.access_token;\n\n    const { data } = await axios.get('https://graph.facebook.com/me', {\n      headers: {\n        authorization: `Bearer ${accessToken}`\n      },\n      params: {\n        // There are\n        fields: 'id,name,email'\n      }\n    });\n\n    return data;\n  }\n\n  async getEntityData(profile: OAuthProfile, existing: any, params: Params) {\n    // `profile` is the data returned by getProfile\n    const baseData = await super.getEntityData(profile, existing, params);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('facebook', new FacebookStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting User Password Field\nDESCRIPTION: Implementation of external resolver to hide password field in responses\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { resolve, schemaHooks } from '@feathersjs/schema'\n\nexport const userExternalResolver = resolve<User, HookContext>({\n  properties: {\n    // The password should never be visible externally\n    password: async () => undefined\n  }\n})\n\napp.service('users').hooks({\n  after: {\n    all: [schemaHooks.resolveExternal(userExternalResolver)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Service Behavior\nDESCRIPTION: Shows how to set up a default service handler that creates new memory services for undefined paths, instead of throwing NotFound errors.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nimport { MemoryService } from '@feathersjs/memory'\n\n// For every `path` that doesn't have a service\n// Automatically return a new in-memory service\napp.defaultService = function (path: string) {\n  return new MemoryService()\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clustered Feathers.js Server with WebSocket Transport\nDESCRIPTION: Server-side code to set up a Feathers.js application with clustering support using the socketio provider. This configuration restricts transport to websockets only to ensure successful handshakes across multiple worker processes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/general/scaling.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport cluster from 'cluster';\nimport feathers from '@feathersjs/feathers';\nimport socketio from '@feathersjs/socketio';\n\nconst CLUSTER_COUNT = 4;\n\nif (cluster.isMaster) {\n  for (let i = 0; i < CLUSTER_COUNT; i++) {\n    cluster.fork();\n  }\n} else {\n  const app = feathers();\n  // ensure the same worker handles websocket connections\n  app.configure(socketio({\n    transports: ['websocket']\n  }));\n  app.listen(4000);\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Registered Services in FeathersJS\nDESCRIPTION: Shows how to iterate through all registered services using app.services. This pattern is useful for service discovery and management.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nconst servicePaths = Object.keys(app.services)\n\nservicePaths.forEach((path) => {\n  const service = app.service(path)\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing GitHub OAuth Strategy in FeathersJS\nDESCRIPTION: Demonstrates how to extend the OAuthStrategy class to create a custom GitHub authentication strategy. The example shows how to modify the entity data by including the email from GitHub profile during user creation or update.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Application } from '@feathersjs/feathers'\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport type { OAuthProfile } from '@feathersjs/authentication'\nimport { OAuthStrategy } from '@feathersjs/authentication-oauth'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nclass MyGithubStrategy extends OAuthStrategy {\n  async getEntityData(profile: OAuthProfile) {\n    // Include the `email` from the GitHub profile when creating\n    // or updating a user that logged in with GitHub\n    const baseData = await super.getEntityData(profile)\n\n    return {\n      ...baseData,\n      email: profile.email\n    }\n  }\n}\n\nexport default (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('github', new MyGithubStrategy())\n\n  // ...\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Channels in FeathersJS (TypeScript)\nDESCRIPTION: Provides an example of how to keep channels updated based on changes in user data. It includes functions for joining channels, leaving channels, and updating channel assignments when user data changes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\n// Join a channel given a user and connection\nconst joinChannels = (user: User, connection: RealTimeConnection) => {\n  app.channel('authenticated').join(connection)\n  // Assuming that the chat room/user assignment is stored\n  // on an array of the user\n  user.rooms.forEach((room) => app.channel(`rooms/${roomId}`).join(connection))\n}\n\n// Get a user to leave all channels\nconst leaveChannels = (user: User) => {\n  app.channel(app.channels).leave((connection) => connection.user._id === user._id)\n}\n\n// Leave and re-join all channels with new user information\nconst updateChannels = (user: User) => {\n  // Find all connections for this user\n  const { connections } = app.channel(app.channels).filter((connection) => connection.user._id === user._id)\n\n  // Leave all channels\n  leaveChannels(user)\n\n  // Re-join all channels with the updated user information\n  connections.forEach((connection) => joinChannels(user, connection))\n}\n\napp.on('login', (payload: AuthenticationResult, { connection }: Params) => {\n  if (connection) {\n    // Join all channels on login\n    joinChannels(connection.user, connection)\n  }\n})\n\n// On `updated` and `patched`, leave and re-join with new room assignments\napp.service('users').on('updated', updateChannels)\napp.service('users').on('patched', updateChannels)\n// On `removed`, remove the connection from all channels\napp.service('users').on('removed', leaveChannels)\n```\n\n----------------------------------------\n\nTITLE: Creating Shipping Order in FeathersJS After Hook\nDESCRIPTION: This snippet shows an after hook in FeathersJS that automatically creates a Shipping Order when an Order is created. It demonstrates how to use the context to access the created Order and create a related Shipping Order.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nafter: {\n  create: [\n    async (context: HookContext<OrderService>) => {\n      const ourOrder = context.result as Order //Let's not deal with arrays or pagination for now\n\n      await context.app\n        .service(shippingOrderPath)\n        .create({ expedited: true, shipped: false, order_id: ourOrder.id })\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Around Hook in TypeScript\nDESCRIPTION: Shows the new around hook format introduced in FeathersJS Dove. Around hooks receive both context and next function arguments, allowing for more complex hook implementations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/whats-new.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext, NextFunction } from '../../declarations'\n\nexport const myHook = async (context: HookContext, next: NextFunction) => {\n  await next()\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Property Resolvers in TypeScript\nDESCRIPTION: This example shows how to define property resolvers for a User type, including an asynchronous resolver for 'isDrinkingAge' and a synchronous resolver for 'fullName'.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst userResolver = resolve<User, MyContext>({\n  isDrinkingAge: async (value, user, context) => {\n    const drinkingAge = await context.getDrinkingAge(user.country)\n\n    return user.age >= drinkingAge\n  },\n  fullName: (value, user, context) => {\n    return `${user.firstName} ${user.lastName}`\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Transaction Handling with Around Hook in FeathersJS\nDESCRIPTION: This code snippet demonstrates how to implement transaction handling using an around hook in FeathersJS. It shows a more flexible approach to managing transactions, including error handling and manual context passing.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  around: {\n    create: [\n      async (context: HookContext<OrderService>, next: NextFunction) => {\n        console.log('Start Work')\n        await transaction.start()(context)\n        try {\n          //We can do any work here, similar to a before hook\n          await next()\n          const ourOrder = context.result as Order\n\n          await context.app\n            .service(shippingOrderPath)\n            .create(\n              { expedited: true, shipped: false, order_id: ourOrder.id },\n              { transaction: context.params.transaction }\n            )\n          console.log('End Work')\n          transaction.end()(context)\n        } catch (err) {\n          console.log('Rollback')\n          transaction.rollback()(context)\n          throw err\n        }\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Resolver with Converter in TypeScript\nDESCRIPTION: This example shows how to use a resolver with a converter function that transforms the raw data before running property resolvers.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst userResolver = resolve<User, MyContext>(\n  {\n    isDrinkingAge: async (value, user, context) => {\n      const drinkingAge = await context.getDrinkingAge(user.country)\n\n      return user.age >= drinkingAge\n    },\n    fullName: async (value, user, context) => {\n      return `${user.firstName} ${user.lastName}`\n    }\n  },\n  {\n    // Convert the raw data into a new structure before running property resolvers\n    converter: async (rawData, context) => {\n      return {\n        firstName: rawData.data.first_name,\n        lastName: rawData.data.last_name\n      }\n    }\n  }\n)\n```\n\n----------------------------------------\n\nTITLE: Case-Insensitive Find Query with Collation in MongoDB\nDESCRIPTION: Shows how to perform a case-insensitive find operation using collation in MongoDB, specifically for finding students with grades of 'c' or greater.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst query = { grade: { $gte: 'c' } }\nconst collation = { locale: 'en', strength: 1 }\n\nconst collatedStudents = await students.find({ query, collation })\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Facebook OAuth Strategy in JavaScript\nDESCRIPTION: JavaScript implementation of a custom Facebook OAuth strategy that fetches additional profile fields and processes the user data for authentication in FeathersJS.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/facebook.md#2025-04-17_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nconst axios = require('axios');\nconst { AuthenticationService, JWTStrategy } = require('@feathersjs/authentication');\nconst { LocalStrategy } = require('@feathersjs/authentication-local');\nconst { expressOauth, OAuthStrategy } = require('@feathersjs/authentication-oauth');\n\nclass FacebookStrategy extends OAuthStrategy {\n  async getProfile (authResult) {\n    // This is the OAuth access token that can be used\n    // for Facebook API requests as the Bearer token\n    const accessToken = authResult.access_token;\n\n    const { data } = await axios.get('https://graph.facebook.com/me', {\n      headers: {\n        authorization: `Bearer ${accessToken}`\n      },\n      params: {\n        // There are\n        fields: 'id,name,email,picture'\n      }\n    });\n\n    return data;\n  }\n\n  async getEntityData(profile) {\n    // `profile` is the data returned by getProfile\n    const baseData = await super.getEntityData(profile);\n\n    return {\n      ...baseData,\n      name:  profile.name,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('facebook', new FacebookStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n\n----------------------------------------\n\nTITLE: Overriding SQL Knex Service Methods in TypeScript\nDESCRIPTION: This snippet demonstrates how to override the standard service methods in a Feathers SQL Knex service. It includes type definitions and method signatures for find, get, create, update, patch, and remove operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Id, NullableId, Paginated } from '@feathersjs/feathers'\n\nexport interface MessageParams extends KnexAdapterParams<MessageQuery> {}\n\n// By default calls the standard Knex adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends KnexService<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async find(\n    params?: MessageParams & { paginate?: { default?: number; max?: number } }\n  ): Promise<Paginated<Message>>\n  async find(params?: ServiceParams & { paginate: false }): Promise<Message[]>\n  async find(params?: ServiceParams): Promise<Paginated<Message> | Message[]>\n  async find(params?: ServiceParams): Promise<Paginated<Message> | Message[]> {\n    return super.find(params)\n  }\n\n  async get(id: Id, params?: ServiceParams): Promise<Message> {\n    return super.get(id, params)\n  }\n\n  async create(data: MessageData, params?: ServiceParams): Promise<Message>\n  async create(data: MessageData[], params?: ServiceParams): Promise<Message[]>\n  async create(data: MessageData | MessageData[], params?: ServiceParams): Promise<Message | Message[]> {\n    return super.create(data, params)\n  }\n\n  async update(id: Id, data: Data, params?: ServiceParams): Promise<Message> {\n    return super.update(id, data, params)\n  }\n\n  async patch(id: Id, data: MessagePatch, params?: ServiceParams): Promise<Message>\n  async patch(id: null, data: MessagePatch, params?: ServiceParams): Promise<Message[]>\n  async patch(id: NullableId, data: MessagePatch, params?: ServiceParams): Promise<Message | Message[]> {\n    return super.patch(id, data, params)\n  }\n\n  async remove(id: Id, params?: ServiceParams): Promise<Message>\n  async remove(id: null, params?: ServiceParams): Promise<Message[]>\n  async remove(id: NullableId, params?: ServiceParams): Promise<Message | Message[]> {\n    return super.remove(id, params)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing $skip pagination in Feathers.js queries\nDESCRIPTION: Shows how to use the $skip filter to paginate through results by skipping a specified number of records. This example skips the first two unread messages and returns the next two.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Retrieves the next two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    $skip: 2,\n    read: false\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?$limit=2&$skip=2&read=false\n```\n\n----------------------------------------\n\nTITLE: Custom REST Client Implementation\nDESCRIPTION: Example of extending the REST client with custom query transformation functionality using qs library.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Query } from '@feathersjs/feathers'\nimport { FetchClient } from '@feathersjs/rest-client'\nimport qs from 'qs'\n\nclass CustomFetch extends FetchClient {\n  getQuery(query: Query) {\n    if (Object.keys(query).length !== 0) {\n      const queryString = qs.stringify(query, {\n        strictNullHandling: true\n      })\n\n      return `?${queryString}`\n    }\n\n    return ''\n  }\n}\n\napp.configure(restClient.fetch(fetch, CustomFetch))\n```\n\n----------------------------------------\n\nTITLE: Custom Environment Variables Configuration\nDESCRIPTION: Example of custom-environment-variables.json file that maps environment variables to configuration properties\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/configuration.md#2025-04-17_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"port\": \"PORT\",\n  \"mongodb\": \"MONGOHQ_URL\"\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Views with FeathersJS Service Data\nDESCRIPTION: Example showing how to render Pug templates with data from a Feathers service. Demonstrates setting up the view engine, registering a service, and creating a route to render messages sorted by date.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/view-engine.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// You've set up your main Feathers app already\n\n// Register your view engine\napp.set('view engine', 'pug');\n\n// Register your message service\napp.use('/api/messages', memory());\n\n// Inside your main Feathers app\napp.get('/messages', function(req, res, next){\n  // You namespace your feathers service routes so that\n  // don't get route conflicts and have nice URLs.\n  app.service('api/messages')\n    .find({ query: {$sort: { updatedAt: -1 } } })\n    .then(result => res.render('message-list', result.data))\n    .catch(next);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Service Mixins in FeathersJS\nDESCRIPTION: Demonstrates how to add custom functionality to all services using mixins. The example shows adding a sayHello method to every registered service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Id } from '@feathersjs/feathers'\n\n// Mixins have to be added before registering any services\napp.mixins.push((service: any, path: string) => {\n  service.sayHello = function () {\n    return `Hello from service at '${path}'`\n  }\n})\n\napp.use('/todos', {\n  async get(id: Id) {\n    return { id }\n  }\n})\n\napp.service('todos').sayHello()\n// -> Hello from service at 'todos'\n```\n\n----------------------------------------\n\nTITLE: Authentication Strategy Interface Methods\nDESCRIPTION: Core methods that must be implemented by authentication strategies. These methods handle configuration, authentication, and HTTP request parsing.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/strategy.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  setName(name) {},           // Set strategy name\n  setApplication(app) {},      // Set Feathers app instance\n  setAuthentication(service) {}, // Set Authentication service\n  verifyConfiguration() {},     // Verify strategy configuration\n  authenticate(authentication, params) {}, // Handle authentication\n  parse(req, res) {}           // Parse HTTP request/response\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving and Using Feathers Services\nDESCRIPTION: Shows how to retrieve registered services using the app.service() method and call service methods. This snippet demonstrates basic service usage patterns in Feathers applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst myService = app.service('my-service')\n\nconst items = await myService.find()\n\nconst item = await app.service('my-service').get(1)\n\nconsole.log('.get(1)', item)\n```\n\n----------------------------------------\n\nTITLE: Custom MongoDB Service Methods in TypeScript\nDESCRIPTION: This snippet shows how to create custom service methods for a Feathers MongoDB service by extending the MongoDbAdapter class. It includes examples of custom find and get methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Id } from '@feathersjs/feathers'\nimport { MongoDbAdapter } from '@feathersjs/mongodb'\n\nexport interface MessageParams extends MongoDBAdapterParams<MessageQuery> {}\n\n// By default calls the standard MongoDB adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends MongoDbAdapter<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async find(params: ServiceParams) {\n    const page = this._find(params)\n\n    return {\n      status: 'ok',\n      ...page\n    }\n  }\n\n  async get(id: Id, params: ServiceParams) {\n    return {\n      message: `Hello ${id}`\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Resources with Socket.io in FeathersJS\nDESCRIPTION: Demonstrates how to use the 'update' method to replace single or multiple resources via Socket.io. It shows examples for updating a single resource by ID and updating multiple resources based on a query.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit(\n  'update',\n  'messages',\n  2,\n  {\n    text: 'I really have to do laundry'\n  },\n  (error, message) => {\n    console.log('Todo updated', message)\n  }\n)\n```\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit(\n  'update',\n  'messages',\n  null,\n  {\n    status: 'unread'\n  },\n  { status: 'read' }\n)\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Users Service Test in JavaScript for Feathers.js\nDESCRIPTION: JavaScript code for testing user creation, password encryption, and external request handling in Feathers.js users service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst assert = require('assert');\nconst app = require('../../src/app');\n\ndescribe('\\'users\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('users');\n\n    assert.ok(service, 'Registered the service');\n  });\n\n  it('creates a user, encrypts password and adds gravatar', async () => {\n    const user = await app.service('users').create({\n      email: 'test@example.com',\n      password: 'secret'\n    });\n\n    // Verify Gravatar has been set as we'd expect\n    assert.equal(user.avatar, 'https://s.gravatar.com/avatar/55502f40dc8b7c769880b10874abc9d0?s=60');\n    // Makes sure the password got encrypted\n    assert.ok(user.password !== 'secret');\n  });\n\n  it('removes password for external requests', async () => {\n    // Setting `provider` indicates an external request\n    const params = { provider: 'rest' };\n\n    const user = await app.service('users').create({\n      email: 'test2@example.com',\n      password: 'secret'\n    }, params);\n\n    // Make sure password has been removed\n    assert.ok(!user.password);\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Order Creation Hooks in Feathers\nDESCRIPTION: This code shows how to use Feathers hooks to handle complex order creation logic, including validation, stock checking, payment processing, and email sending.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\napp.service('orders').hooks({\n  before: {\n    create: [validateData(), checkStock(), checkVoucher()]\n  },\n  after: {\n    create: [\n      chargePayment(), // hook that calls `app.service('payment').create()`\n      sendEmail(), // hook that calls `app.service('email').create()`\n      updateStock() // Update product stock here\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Test Database for NeDB in Feathers.js\nDESCRIPTION: JSON configuration to set up a separate NeDB database for testing in Feathers.js.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"nedb\": \"../test/data\"\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Feathers Client in Node.js with Socket.io\nDESCRIPTION: TypeScript code for setting up a Feathers client that connects to a server using Socket.io. It configures a service and demonstrates both listening for events and creating data.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport io from 'socket.io-client'\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\n\nconst socket = io('http://api.my-feathers-server.com')\nconst client = feathers()\n\nclient.configure(socketio(socket))\n\nconst messageService = client.service('messages')\n\nmessageService.on('created', (message: Message) => console.log('Created a message', message))\n\n// Use the messages service from the server\nmessageService.create({\n  text: 'Message from client'\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing Raw Data with Underscore Methods\nDESCRIPTION: Shows how to call service methods without triggering hooks by prefixing the method name with an underscore. This provides access to raw data from the database without applying any transformations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// Call `get` without running any hooks\nconst message = await app.service('/messages')._get('<message id>')\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Google OAuth Strategy in Feathers.js\nDESCRIPTION: This code demonstrates how to create a custom Google OAuth strategy in Feathers.js. It extends the OAuthStrategy class to handle the data returned from Google and configure the authentication service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/google.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst axios = require('axios');\nconst { OAuthStrategy } = require('@feathersjs/authentication-oauth');\n\nclass GoogleStrategy extends OAuthStrategy {\n  async getEntityData(profile) {\n\n    // this will set 'googleId'\n    const baseData = await super.getEntityData(profile);\n\n    // this will grab the picture and email address of the Google profile\n    return {\n      ...baseData,\n      profilePicture: profile.picture,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('google', new GoogleStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n\n----------------------------------------\n\nTITLE: Setting Up Event Listeners and Real-time Updates in JavaScript\nDESCRIPTION: Implementation of event listeners for user interactions and real-time updates for messages and users using Feathers.js client.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst addEventListener = (selector, event, handler) => {\n  document.addEventListener(event, async (ev) => {\n    if (ev.target.closest(selector)) {\n      handler(ev)\n    }\n  })\n}\n\n// \"Signup and login\" button click handler\naddEventListener('#signup', 'click', async () => {\n  // For signup, create a new user and then log them in\n  const credentials = getCredentials()\n\n  // First create the user\n  await client.service('users').create(credentials)\n  // If successful log them in\n  await login(credentials)\n})\n\n// \"Login\" button click handler\naddEventListener('#login', 'click', async () => {\n  const user = getCredentials()\n\n  await login(user)\n})\n\n// \"Logout\" button click handler\naddEventListener('#logout', 'click', async () => {\n  await client.logout()\n\n  document.getElementById('app').innerHTML = loginTemplate()\n})\n\n// \"Send\" message form submission handler\naddEventListener('#send-message', 'submit', async (ev) => {\n  // This is the message text input field\n  const input = document.querySelector('[name=\"text\"]')\n\n  ev.preventDefault()\n\n  // Create a new message and then clear the input field\n  await client.service('messages').create({\n    text: input.value\n  })\n\n  input.value = ''\n})\n\n// Listen to created events and add the new message in real-time\nclient.service('messages').on('created', addMessage)\n\n// We will also see when new users get created in real-time\nclient.service('users').on('created', addUser)\n\n// Call login right away so we can show the chat window\n// If the user can already be authenticated\nlogin()\n```\n\n----------------------------------------\n\nTITLE: Basic Authentication Client Setup\nDESCRIPTION: Configuration of FeathersJS authentication client with Socket.IO transport\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/client.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\nimport io from 'socket.io-client'\nimport authentication from '@feathersjs/authentication-client'\n\nconst socket = io('http://api.feathersjs.com')\nconst app = feathers()\n\n// Setup the transport (Rest, Socket, etc.) here\napp.configure(socketio(socket))\n\n// Available options are listed in the \"Options\" section\napp.configure(authentication())\n```\n\n----------------------------------------\n\nTITLE: Implementing Login and Signup Functionality in JavaScript\nDESCRIPTION: Functions to handle user authentication, including retrieving credentials and logging in using either email/password or stored token.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// Retrieve email/password object from the login/signup page\nconst getCredentials = () => {\n  const user = {\n    email: document.querySelector('[name=\"email\"]').value,\n    password: document.querySelector('[name=\"password\"]').value\n  }\n\n  return user\n}\n\n// Log in either using the given email/password or the token from storage\nconst login = async (credentials) => {\n  try {\n    if (!credentials) {\n      // Try to authenticate using an existing token\n      await client.reAuthenticate()\n    } else {\n      // Otherwise log in with the `local` strategy using the credentials we got\n      await client.authenticate({\n        strategy: 'local',\n        ...credentials\n      })\n    }\n\n    // If successful, show the chat page\n    showChat()\n  } catch (error) {\n    // If we got an error, show the login page\n    showLogin(error)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Method in a Feathers.js Service Class\nDESCRIPTION: Implementation of a custom sayHello method in a user service class that accepts a validated request object and returns a typed response. The method extracts the name from the data and returns a formatted greeting.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nasync sayHello(data: Static<typeof sayHelloRequest>): Promise<Static<typeof sayHelloResponse>> {  \n  const { name } = data  \n  return { response: `Hello ${name}` }  \n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic FeathersJS Server with File Upload Service\nDESCRIPTION: A basic FeathersJS server setup that includes a file upload service using feathers-blob with filesystem storage. This server initializes the core FeathersJS components and configures the uploads service to store files in a local directory.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/* --- server.js --- */\n\nconst feathers = require('@feathersjs/feathers');\nconst express = require('@feathersjs/express');\nconst socketio = require('@feathersjs/socketio');\n\n// feathers-blob service\nconst blobService = require('feathers-blob');\n// Here we initialize a FileSystem storage,\n// but you can use feathers-blob with any other\n// storage service like AWS or Google Drive.\nconst fs = require('fs-blob-store');\nconst blobStorage = fs(__dirname + '/uploads');\n\n\n// Feathers app\nconst app = express(feathers());\n\n// Parse HTTP JSON bodies\napp.use(express.json());\n// Parse URL-encoded params\napp.use(express.urlencoded({ extended: true }));\n// Add REST API support\napp.configure(express.rest());\n// Configure Socket.io real-time APIs\napp.configure(socketio());\n\n\n// Upload Service\napp.use('/uploads', blobService({Model: blobStorage}));\n\n\n// Register a nicer error handler than the default Express one\napp.use(express.errorHandler());\n\n// Start the server\napp.listen(3030, function(){\n    console.log('Feathers app started at localhost:3030')\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Methods to SQL Knex Service in TypeScript\nDESCRIPTION: This snippet demonstrates how to add custom methods to a Feathers SQL Knex service. It includes an example of a custom 'myMethod' that takes custom data and parameters.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.class.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface MessageParams extends KnexAdapterParams<MessageQuery> {}\n\nexport type MyMethodData = { greeting: string }\n\n// By default calls the standard Knex adapter service methods but can be customized with your own functionality.\nexport class MessageService<ServiceParams extends Params = MessageParams> extends KnexService<\n  Message,\n  MessageData,\n  MessageParams,\n  MessagePatch\n> {\n  async myMethod(data: MyMethodData, params: ServiceParams) {\n    return {\n      message: `${data.greeting || 'Hello'} ${params.user.name}!`\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Resources with Socket.io in FeathersJS\nDESCRIPTION: Illustrates how to use the 'remove' method to delete single or multiple resources via Socket.io. Examples show removing a single resource by ID and removing multiple resources based on a query.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit('remove', 'messages', 2, {}, (error, message) => {\n  console.log('Removed a message', message)\n})\n```\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit('remove', 'messages', null, { status: 'archived' })\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Messages Service Test in TypeScript for Feathers.js\nDESCRIPTION: TypeScript code for testing message creation and processing, including user information handling in Feathers.js messages service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport assert from 'assert';\nimport app from '../../src/app';\n\ndescribe('\\'messages\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('messages');\n\n    assert.ok(service, 'Registered the service');\n  });\n\n  it('creates and processes message, adds user information', async () => {\n    // Create a new user we can use for testing\n    const user = await app.service('users').create({\n      email: 'messagetest@example.com',\n      password: 'supersecret'\n    });\n\n    // The messages service call params (with the user we just created)\n    const params = { user };\n    const message = await app.service('messages').create({\n      text: 'a test',\n      additional: 'should be removed'\n    }, params);\n\n    assert.equal(message.text, 'a test');\n    // `userId` should be set to passed users it\n    assert.equal(message.userId, user._id);\n    // Additional property has been removed\n    assert.ok(!message.additional);\n    // `user` has been populated\n    assert.deepEqual(message.user, user);\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io with Default Settings in Feathers\nDESCRIPTION: Sets up Socket.io transport with default configuration using app.listen or app.setup(server).\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio'\n\nconst app = feathers()\n\napp.configure(socketio())\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Simulating Error in FeathersJS Before Create Hook\nDESCRIPTION: This code snippet demonstrates how to simulate an error in a FeathersJS before create hook. It can be used to test error handling and transaction rollback scenarios in a Shipping Order service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ncreate: [\n  async () => {\n    throw new Error('Fail')\n  },\n  schemaHooks.validateData(shippingOrderDataValidator),\n  schemaHooks.resolveData(shippingOrderDataResolver)\n]\n```\n\n----------------------------------------\n\nTITLE: Creating a Before-Create Hook for Converting Files to DataURI\nDESCRIPTION: A Feathers hook that converts uploaded files to dataURI format before storage. This is necessary because feathers-blob only understands files encoded as dataURI.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n/* --- server.js --- */\nconst dauria = require('dauria');\n\n// before-create Hook to get the file (if there is any)\n// and turn it into a datauri,\n// transparently getting feathers-blob to work\n// with multipart file uploads\napp.service('/uploads').before({\n    create: [\n        function(context) {\n            if (!context.data.uri && context.params.file){\n                const file = context.params.file;\n                const uri = dauria.getBase64DataURI(file.buffer, file.mimetype);\n                context.data = {uri: uri};\n            }\n        }\n    ]\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Pagination in a Feathers Database Service\nDESCRIPTION: Demonstrates how to set pagination options when initializing a database service. The example shows setting default and maximum page sizes, overriding pagination for specific calls, and disabling pagination.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst service = require('feathers-<db-name>')\n\n// Set the `paginate` option during initialization\napp.use(\n  '/todos',\n  service({\n    paginate: {\n      default: 5,\n      max: 25\n    }\n  })\n)\n\n// override pagination in `params.paginate` for this call\napp.service('todos').find({\n  paginate: {\n    default: 100,\n    max: 200\n  }\n})\n\n// disable pagination for this call\napp.service('todos').find({\n  paginate: false\n})\n```\n\n----------------------------------------\n\nTITLE: Registering FeathersJS Application Hooks\nDESCRIPTION: Example of registering hooks at the application level, specifically adding the profiler hook to run on all service methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { profiler } from './hooks/profiler'\n\n//...\n\n// Register hooks that run on all service methods\napp.hooks({\n  around: {\n    all: [ logError, profiler ]\n  },\n  before: {},\n  after: {},\n  error: {}\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io with uWebSockets.js in Feathers\nDESCRIPTION: Sets up Socket.io transport using uWebSockets.js for improved performance and lower latency.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio'\nimport { App } from 'uWebSockets.js'\n\nconst app = feathers()\n\napp.configure(\n  socketio((io) => {\n    io.attachApp(App())\n  })\n)\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Configuring Local Authentication\nDESCRIPTION: TypeScript implementation of local authentication setup in a FeathersJS application\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nexport const authentication = (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('local', new LocalStrategy())\n\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Winston Logger in FeathersJS (TypeScript)\nDESCRIPTION: This snippet configures a Winston logger with default settings. It sets the log level to 'info' and uses console transport. The logger is exported for use in other parts of the application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/logger.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createLogger, format, transports } from 'winston'\n\n// Configure the Winston logger. For the complete documentation see https://github.com/winstonjs/winston\nexport const logger = createLogger({\n  // To see more detailed errors, change this to 'debug'\n  level: 'info',\n  format: format.combine(format.splat(), format.simple()),\n  transports: [new transports.Console()]\n})\n```\n\n----------------------------------------\n\nTITLE: Registering Application Hooks in Feathers (TypeScript)\nDESCRIPTION: This code shows how to register application-wide hooks in a Feathers application, including a logErrorHook for all service methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/app.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Register hooks that run on all service methods\napp.hooks({\n  around: {\n    all: [logErrorHook]\n  },\n  before: {},\n  after: {},\n  error: {}\n})\n```\n\n----------------------------------------\n\nTITLE: Creating MongoDB Indexes in FeathersJS Service\nDESCRIPTION: Example of creating indexes for a MongoDB collection when initializing a service, including setting up a unique constraint on an email field.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const getOptions = (app: Application): MongoDBAdapterOptions => {\n  return {\n    paginate: app.get('paginate'),\n    Model: app\n      .get('mongodbClient')\n      .then((db) => db.collection('myservice'))\n      .then((collection) => {\n        collection.createIndex({ email: 1 }, { unique: true })\n\n        return collection\n      })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Feathers with Koa\nDESCRIPTION: Example of initializing a Feathers application with Koa, including error handling, authentication, body parsing, and REST configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport { koa, errorHandler, bodyParser, rest } from '@feathersjs/koa'\n\nconst app = koa(feathers())\n\napp.use(errorHandler())\napp.use(authentication())\napp.use(bodyParser())\napp.configure(rest())\n```\n\n----------------------------------------\n\nTITLE: Customizing AuthenticationService in Feathers.js\nDESCRIPTION: Shows how to extend the AuthenticationService class to customize the getPayload method. This example adds user permissions to the payload if available.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/service.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\nimport { AuthenticationService } from '@feathersjs/authentication'\n\nclass MyAuthService extends AuthenticationService {\n  async getPayload(authResult: AuthenticationResult, params: Params) {\n    // Call original `getPayload` first\n    const payload = await super.getPayload(authResult, params)\n    const { user } = authResult\n\n    if (user && user.permissions) {\n      payload.permissions = user.permissions\n    }\n\n    return payload\n  }\n}\n\napp.use('/authentication', new MyAuthService(app))\n```\n\n----------------------------------------\n\nTITLE: Using $gt and $gte operators in Feathers.js\nDESCRIPTION: Shows how to use $gt (greater than) and $gte (greater than or equal) operators for numeric comparison. This example finds messages created within the last day.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages within the last day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $gt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?createdAt[$gt]=1479664146607\n```\n\n----------------------------------------\n\nTITLE: Defining Service Types in Feathers.js\nDESCRIPTION: Example of creating a ServiceTypes interface to map service paths to their corresponding service types in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// A mapping of service names to types. Will be extended in service files.\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ServiceTypes {}\n```\n\n----------------------------------------\n\nTITLE: REST Transport Configuration\nDESCRIPTION: Configuration of REST transport with JSON and URL-encoded parsers\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport express, { json, urlencoded, rest } from '@feathersjs/express'\n\n// Create an Express compatible Feathers application\nconst app = express(feathers())\n\n// Turn on JSON parser for REST services\napp.use(json())\n// Turn on URL-encoded parser for REST services\napp.use(urlencoded({ extended: true }))\n// Set up REST transport\napp.configure(rest())\n```\n\n----------------------------------------\n\nTITLE: Configuring Adapter Options Dynamically with params.adapter\nDESCRIPTION: Shows how to dynamically modify database adapter options using the params.adapter property. This example demonstrates enabling multiple entry creation for a specific request.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst messages = [\n  {\n    text: 'message 1'\n  },\n  {\n    text: 'message 2'\n  }\n]\n\n// Enable multiple entry insertion for this request\napp.service('messages').create(messages, {\n  adapter: {\n    multi: true\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using the get Method to Retrieve a Single Record\nDESCRIPTION: Demonstrates how to use the get method to retrieve a single record by its unique identifier. The example shows both the JavaScript method call and the equivalent HTTP request.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst message = await app.service('messages').get(1)\n\nconsole.log(message)\n```\n\n----------------------------------------\n\nTITLE: Using Application Event Emitters\nDESCRIPTION: Demonstrates how to listen for and emit application-level events using the built-in EventEmitter functionality.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\napp.on('login', (user) => console.log('Logged in', user))\n```\n\n----------------------------------------\n\nTITLE: Defining Order Schema with TypeBox in FeathersJS\nDESCRIPTION: This code snippet defines the schema for an Order using TypeBox in a FeathersJS application. It specifies the structure and types of the Order object properties.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const orderSchema = Type.Object(\n  {\n    id: Type.String({ format: 'uuid' }),\n    item: Type.String(),\n    address: Type.String(),\n    quantity: Type.Number()\n  },\n  { $id: 'Order', additionalProperties: false }\n)\n```\n\n----------------------------------------\n\nTITLE: Filtering Channels in FeathersJS (TypeScript)\nDESCRIPTION: Demonstrates how to create a new channel by filtering connections from existing channels. This example creates a channel with all connections of the user with '_id' 5.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\n\n// Returns a new channel with all connections of the user with `_id` 5\nconst userFive = app\n  .channel(app.channels)\n  .filter((connection: RealTimeConnection) => connection.user._id === 5)\n```\n\n----------------------------------------\n\nTITLE: Defining User Schema with JSON Schema in TypeScript\nDESCRIPTION: Demonstrates how to create a JSON schema for a user object and derive a TypeScript type from it using @feathersjs/schema.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { FromSchema } from '@feathersjs/schema'\n\nexport const userSchema = {\n  $id: 'User',\n  type: 'object',\n  additionalProperties: false,\n  required: ['email', 'password'],\n  properties: {\n    id: { type: 'number' },\n    email: { type: 'string' },\n    password: { type: 'string' }\n  }\n} as const\n\nexport type User = FromSchema<typeof userSchema>\n```\n\n----------------------------------------\n\nTITLE: Implementing Firebase Authentication Strategy in FeathersJS\nDESCRIPTION: Custom OAuth strategy implementation for Firebase authentication in FeathersJS. This includes initializing Firebase Admin SDK and extending the OAuthStrategy class to handle Firebase authentication tokens.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/firebase.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst firebase = require('firebase-admin');\nconst { OAuthStrategy } = require('@feathersjs/authentication-oauth');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nconst logger = require('./logger');\n\nfunction initialize(app){\n  const firebaseConfig = app.get('firebase');\n\n  // Initialize app\n  try {\n    firebase.initializeApp({\n      credential: firebase.credential.cert(firebaseConfig)\n    });\n  } catch (e) {\n    console.log('erorr initializing firebase', e);\n  }\n}\n\nclass FirebaseStrategy extends OAuthStrategy {\n\n  async authenticate(authentication, params){\n    logger.debug('firebase:strategy:authenticate');\n    return super.authenticate(authentication, params);\n  }\n\n  async getProfile(data, _params){\n    const firebase = require('firebase-admin');\n    let user;\n\n    try {\n      user = await firebase.auth().verifyIdToken(data.access_token);\n    } catch(e){\n      logger.error(e);\n      throw new NotAuthenticated();\n    }\n\n    logger.debug(`firebase:strategy:getProfile:successful ${user.user_id}`);\n\n    return {\n      email: user.email,\n      id: user.user_id\n    };\n  }\n\n  async getEntityData(profile) {\n    const baseData = await super.getEntityData(profile);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nmodule.exports = { initialize, FirebaseStrategy };\n```\n\n----------------------------------------\n\nTITLE: FeathersJS Before/After/Error Hook Implementation\nDESCRIPTION: Implementation of a basic hook function that handles before, after, or error cases. Takes only the hook context as parameter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext } from '../declarations'\n\nexport const myFancyHook = async (context: HookContext) => {\n  console.log(`Running hook ${name} on ${context.path}.${context.method}`)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Created Event in Feathers Service with TypeScript\nDESCRIPTION: This snippet shows how to implement and listen to the 'created' event in a Feathers service using TypeScript. It includes service definition and event handling.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers, type Params, type HookContext } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  async create(data: Message) {\n    return data\n  }\n}\n\nconst app = feathers<{ messages: MessageService }>()\n\napp.use('messages', new MessageService())\n\n// Retrieve the wrapped service object which is also an EventEmitter\nconst messages = app.service('messages')\n\nmessages.on('created', (message: Message, contexHookContext) => console.log('created', message))\n\nmessages.create({\n  text: 'We have to do something!'\n})\n```\n\n----------------------------------------\n\nTITLE: Using Query Syntax Helper in TypeScript\nDESCRIPTION: Shows how to use the querySyntax helper to create a schema that complies with Feathers query syntax, including $limit, $skip, $select, and $sort.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { querySyntax } from '@feathersjs/schema'\nimport type { FromSchema } from '@feathersjs/schema'\n\nexport const userQuerySchema = {\n  $id: 'UserQuery',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    ...querySyntax(userSchema.properties)\n  }\n} as const\n\nexport type UserQuery = FromSchema<typeof userQuerySchema>\n\nconst userQuery: UserQuery = {\n  $limit: 10,\n  $select: ['email', 'id'],\n  $sort: {\n    email: 1\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Pagination for a Single Request with params.paginate\nDESCRIPTION: Demonstrates how to disable pagination for a specific service method call by setting params.paginate to false, returning all results as an array instead of a paginated object.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Get all messages as an array\nconst allMessages = await app.service('messages').find({\n  paginate: false\n})\n```\n\n----------------------------------------\n\nTITLE: Using $and operator for AND conditions in Feathers.js\nDESCRIPTION: Shows how to use the $and operator to find records that match all of the given criteria. This example finds messages that are both not archived and from room 2.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages that are not marked as archived and in room 2\napp.service('messages').find({\n  query: {\n    $and: [{ archived: { $ne: true } }, { roomId: 2 }]\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?$and[0][archived][$ne]=true&$and[1][roomId]=2\n```\n\n----------------------------------------\n\nTITLE: Defining Application Type in Feathers.js\nDESCRIPTION: Example of creating an Application type that combines ServiceTypes and Configuration interfaces in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// The application instance type that will be used everywhere else\nexport type Application = FeathersApplication<ServiceTypes, Configuration>\n```\n\n----------------------------------------\n\nTITLE: Emitting Custom Events in Feathers Hooks with JavaScript\nDESCRIPTION: This snippet demonstrates how to emit custom events within Feathers hooks using JavaScript. It shows emitting a 'status' event in an after hook for the create method.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('payments').hooks({\n  after: {\n    create(context: HookContext) {\n      context.service.emit('status', { status: 'completed' })\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing MongoDB Collection in FeathersJS Service (TypeScript)\nDESCRIPTION: This code snippet demonstrates how to access the MongoDB collection associated with a specific service in FeathersJS. It uses the getModel() method on the service instance.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/databases.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst userCollection = await app.service('users').getModel()\n```\n\n----------------------------------------\n\nTITLE: Implementing Auth0 Strategy in TypeScript\nDESCRIPTION: TypeScript implementation of Auth0 authentication strategy extending OAuthStrategy with custom entity data handling. Includes service registration and module declarations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/auth0.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ServiceAddons, Params } from '@feathersjs/feathers';\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication';\nimport { LocalStrategy } from '@feathersjs/authentication-local';\nimport { oauth, OAuthStrategy, OAuthProfile } from '@feathersjs/authentication-oauth';\n\nimport { Application } from './declarations';\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    'authentication': AuthenticationService & ServiceAddons<any>;\n  }\n}\n\nclass Auth0Strategy extends OAuthStrategy {\n  async getEntityData(profile: OAuthProfile, existing: any, params: Params) {\n    const baseData = await super.getEntityData(profile, existing, params);\n\n    return {\n      ...baseData,\n      email: profile.email\n    };\n  }\n}\n\nexport default function(app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('auth0', new Auth0Strategy());\n\n  app.use('/authentication', authentication);\n  app.configure(oauth());\n}\n```\n\n----------------------------------------\n\nTITLE: Preventing External Service Calls in Feathers Hooks\nDESCRIPTION: Shows how to use params.provider in a hook to prevent external users from making certain service method calls.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('users').hooks({\n  before: {\n    remove(context) {\n      // check for if(context.params.provider) to prevent any external call\n      if (context.params.provider === 'socketio') {\n        throw new Error('You can not delete a user via Socket.io')\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Connection with Object in FeathersJS (JSON)\nDESCRIPTION: This JSON configuration example demonstrates how to set up a PostgreSQL connection using an object with individual connection parameters instead of a connection string in FeathersJS.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/databases.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n\"postgresql\": {\n  \"client\": \"pg\",\n  \"connection\": {\n    \"host\": \"localhost\",\n    \"port\": 5432,\n    \"user\": \"postgres\",\n    \"password\": \"postgres\",\n    \"database\": \"pgtest\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Express Integration Setup\nDESCRIPTION: Initializes a Feathers application with Express integration\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport express from '@feathersjs/express'\n\nconst app = express(feathers())\n```\n\n----------------------------------------\n\nTITLE: Defining Date Type Validator in FeathersJS\nDESCRIPTION: Creates a validator that ensures a value is an instance of Date. This validator requires Extended Ajv Configuration to work properly and may not be suitable for validating dates intended for database storage.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_89\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Date()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = Date\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  instanceOf: 'Date'\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring parseAuthentication Middleware in Feathers.js with Express\nDESCRIPTION: This snippet demonstrates how to use the parseAuthentication middleware with a custom authentication service and specified strategies. It's useful for parsing headers for authentication information in addition to the default authentication service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { parseAuthentication } from '@feathersjs/express'\n\napp.use(\n  parseAuthentication({\n    service: 'api/v1/authentication',\n    strategies: ['jwt', 'local']\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Creating Nested Routes in Feathers\nDESCRIPTION: This snippet demonstrates how to create nested routes in Feathers by re-exporting an existing service and mapping route parameters to query parameters. It includes hooks for handling different HTTP methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napp.use('/posts', postService)\napp.use('/users', userService)\n\n// re-export the posts service on the /users/:userId/posts route\napp.use('/users/:userId/posts', app.service('posts'))\n\n// A hook that updates `data` with the route parameter\nasync function mapUserIdToData(context: HookContext) {\n  if (context.data && context.params.route.userId) {\n    context.data.userId = context.params.route.userId\n  }\n}\n\n// For the new route, map the `:userId` route parameter to the query in a hook\napp.service('users/:userId/posts').hooks({\n  before: {\n    find: [\n      async (context: HookContext) => {\n        // Map the `userId` route parameter to the query\n        context.params.query = {\n          ...context.params.query,\n          userId: context.params.route.userId\n        }\n      }\n    ],\n    create: mapUserIdToData,\n    update: mapUserIdToData,\n    patch: mapUserIdToData\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Services in Feathers (TypeScript)\nDESCRIPTION: This snippet shows how services are configured in a Feathers application. It exports a function that takes the Application object and configures the user service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/app.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Application } from '../declarations'\nimport { user } from './users/users'\n\nexport const services = (app: Application) => {\n  app.configure(user)\n  // All services will be registered here\n}\n```\n\n----------------------------------------\n\nTITLE: Handling User Logout in Feathers.js Channels\nDESCRIPTION: This snippet shows how to manage user logout events by moving connections back to anonymous channels. By default, a connection is automatically removed from all channels on logout.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport type { AuthenticationResult } from '@feathersjs/authentication'\n\napp.on('logout', (payload: AuthenticationResult, { connection }: Params) => {\n  if (connection) {\n    // Join the channels a logged out connection should be in\n    app.channel('anonymous').join(connection)\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Traditional Express Sessions with Feathers\nDESCRIPTION: This code snippet shows how to use traditional Express sessions with Feathers by setting the user from the session to the Feathers params using custom Express middleware.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\napp.use(function (req, res, next) {\n  // Set service call `param.user` from `session.user`\n  req.feathers.user = req.session.user\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Todo Service with get() Method in TypeScript\nDESCRIPTION: Example of a simple todo service that implements the get method to retrieve a single resource by ID. The service dynamically generates todo items based on the requested ID.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/services.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Id, Params } from '@feathersjs/feathers'\n\nclass TodoService {\n  async get(id: Id, params: Params) {\n    return {\n      id,\n      text: `You have to do ${id}!`\n    }\n  }\n}\n\napp.use('todos', new TodoService())\n```\n\n----------------------------------------\n\nTITLE: Sending Custom Data to Channels in FeathersJS (TypeScript)\nDESCRIPTION: Illustrates how to send custom data to a specific channel. This example sends a 'created' event for the 'users' service to the 'anonymous' channel with only the user's name as payload.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\n\napp.on('connection', (connection: RealTimeConnection) => {\n  // On a new real-time connection, add it to the\n  // anonymous channel\n  app.channel('anonymous').join(connection)\n})\n\n// Send the `users` `created` event to all anonymous\n// users but use only the name as the payload\napp.service('users').publish('created', (data: User) => {\n  return app.channel('anonymous').send({\n    name: data.name\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Using resolveQueryObjectId for Query Resolution\nDESCRIPTION: This snippet demonstrates how to use the resolveQueryObjectId helper to handle ObjectId queries, supporting conversion from strings and special MongoDB query operators.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport { resolveQueryObjectId } from '@feathersjs/mongodb'\n\nexport const messageQueryResolver = resolve<MessageQuery, HookContext>({\n  properties: {\n    userId: resolveQueryObjectId\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Winston Logger in FeathersJS (TypeScript)\nDESCRIPTION: This snippet demonstrates how to import and use the configured Winston logger in other files of the FeathersJS application. It shows a simple example of logging an info message.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/logger.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { logger } from './logger'\n\nlogger.info('Log some information here')\n```\n\n----------------------------------------\n\nTITLE: Accessing KnexJS Connection in FeathersJS (TypeScript)\nDESCRIPTION: This snippet demonstrates how to access the KnexJS database connection object in a FeathersJS application. The connection is retrieved from the app object using the database client key.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/databases.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst knex = app.get('<database>Client')\n```\n\n----------------------------------------\n\nTITLE: Implementing Removed Event in Feathers Service with TypeScript\nDESCRIPTION: This snippet illustrates how to implement and listen to the 'removed' event in a Feathers service using TypeScript. It includes the service method and event listener.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Id, Params, HookContext } from '@feathersjs/feathers'\n\ntype Message = { text: string }\n\nclass MessageService {\n  async remove(id: Id, params: Params) {\n    return { id }\n  }\n}\n\nconst app = feathers<{ messages: MessageService }>()\n\napp.use('messages', new MessageService())\n\nconst messages = app.service('messages')\n\nmessages.on('removed', (message: Message, context: HookContext) => console.log('removed', message))\nmessages.remove(1)\n```\n\n----------------------------------------\n\nTITLE: Removing User Connections from All Channels in Feathers.js\nDESCRIPTION: This code demonstrates how to make a user's connections leave all channels when a user is removed. It uses app.channels to get all channel names and removes the connection from each channel based on user ID.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\n\n// When a user is removed, make all their connections leave every channel\napp.service('users').on('removed', (user: User) => {\n  app.channel(app.channels).leave((connection: RealTimeConnection) => {\n    return user._id === connection.user._id\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Initializing MongoDB Service in FeathersJS\nDESCRIPTION: Example of creating a custom MongoDB service by extending the MongoDBService class and configuring it with the MongoDB client from the application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Params } from '@feathersjs/feathers'\nimport { MongoDBService } from '@feathersjs/mongodb'\nimport type { MongoDBAdapterParams, MongoDBAdapterOptions } from '@feathersjs/mongodb'\n\nimport type { Application } from '../../declarations'\nimport type { Messages, MessagesData, MessagesQuery } from './messages.schema'\n\nexport interface MessagesParams extends MongoDBAdapterParams<MessagesQuery> {}\n\nexport class MessagesService<ServiceParams extends Params = MessagesParams> extends MongoDBService<\n  Messages,\n  MessagesData,\n  ServiceParams\n> {}\n\nexport const messages = (app: Application) => {\n  const options: MongoDBAdapterOptions = {\n    paginate: app.get('paginate'),\n    Model: app.get('mongodbClient').then((db) => db.collection('messages'))\n  }\n  app.use('messages', new MessagesService(options))\n}\n```\n\n----------------------------------------\n\nTITLE: Creating SQL Migration for FeathersJS Chat Application\nDESCRIPTION: This code snippet demonstrates how to create a migration for updating the database schema in a FeathersJS chat application using SQL. It adds an avatar field to the users table and createdAt and userId fields to the messages table.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/schemas.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Knex } from 'knex'\n\nexport async function up(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('users', (table) => {\n    table.string('avatar')\n  })\n\n  await knex.schema.alterTable('messages', (table) => {\n    table.bigint('createdAt')\n    table.bigint('userId').references('id').inTable('users')\n  })\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('users', (table) => {\n    table.dropColumn('avatar')\n  })\n\n  await knex.schema.alterTable('messages', (table) => {\n    table.dropColumn('createdAt')\n    table.dropColumn('userId')\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Query Validators with TypeBox\nDESCRIPTION: Shows how to create a validator for query parameters using getValidator with Ajv configured to coerce types, which is useful for handling query strings from HTTP requests.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv } from '@feathersjs/schema'\nimport { Type, getValidator } from '@feathersjs/typebox'\n\n// Schema for allowed query properties\nconst messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'], {\n  additionalProperties: false\n})\nconst messageQuerySchema = querySyntax(messageQueryProperties)\ntype MessageQuery = Static<typeof messageQuerySchema>\n\n// Since queries can be only strings we can to coerce them\nconst queryValidator = new Ajv({\n  coerceTypes: true\n})\n\nconst messageQueryValidator = getValidator(messageQuerySchema, queryValidator)\n```\n\n----------------------------------------\n\nTITLE: Implementing validateQuery Hook in Feathers.js Services\nDESCRIPTION: Example showing how to validate query parameters using the validateQuery hook with TypeBox schema. It creates a query schema that defines allowed query properties and uses the queryValidator to validate and automatically coerce string types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Ajv, schemaHooks } from '@feathersjs/schema'\nimport { Type, getValidator } from '@feathersjs/typebox'\nimport { queryValidator } from '../validators'\n\n// Schema for allowed query properties\nconst messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'], {\n  additionalProperties: false\n})\nconst messageQuerySchema = querySyntax(messageQueryProperties)\ntype MessageQuery = Static<typeof messageQuerySchema>\n\nconst messageQueryValidator = getValidator(messageQuerySchema, queryValidator)\n\napp.service('messages').hooks({\n  around: {\n    all: [schemaHooks.validateQuery(messageQueryValidator)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Extending User Schema in TypeScript\nDESCRIPTION: Shows how to extend an existing schema by combining properties and required fields to create a new schema.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { FromSchema } from '@feathersjs/schema'\n\nexport const userDataSchema = {\n  $id: 'User',\n  type: 'object',\n  additionalProperties: false,\n  required: ['email', 'password'],\n  properties: {\n    email: { type: 'string' },\n    password: { type: 'string' }\n  }\n} as const\n\nexport type UserData = FromSchema<typeof userDataSchema>\n\nexport const userSchema = {\n  $id: 'UserResult',\n  type: 'object',\n  additionalProperties: false,\n  required: [...userDataSchema.required, 'id'],\n  properties: {\n    ...userDataSchema.properties,\n    id: { type: 'number' }\n  }\n} as const\n\nexport type User = FromSchema<typeof userSchema>\n```\n\n----------------------------------------\n\nTITLE: Custom Authentication Client Implementation\nDESCRIPTION: Example of extending AuthenticationClient class for custom functionality\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/client.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\nimport io from 'socket.io-client'\nimport authentication, { AuthenticationClient } from '@feathersjs/authentication-client'\n\nconst socket = io('http://api.feathersjs.com')\nconst app = feathers()\n\nclass MyAuthenticationClient extends AuthenticationClient {\n  getFromLocation(location) {\n    // Do custom location things here\n    return super.getFromLocation(location)\n  }\n}\n\n// Setup the transport (Rest, Socket, etc.) here\napp.configure(socketio(socket))\n\n// Pass the custom authentication client class as the `Authentication` option\napp.configure(\n  authentication({\n    Authentication: MyAuthenticationClient\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Using Socket.io Middleware to Modify Params in Feathers\nDESCRIPTION: Demonstrates how to use Socket.io middleware to modify the feathers property on the socket, which is then used as service call params.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napp.configure(\n  socketio((io) => {\n    io.use((socket, next) => {\n      socket.feathers.user = { name: 'David' }\n      next()\n    })\n  })\n)\n\napp.use('messages', {\n  async create(data, params, callback) {\n    // When called via SocketIO:\n    params.provider // -> socketio\n    params.user // -> { name: 'David' }\n    return data\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Chat UI Templates and Helpers\nDESCRIPTION: Defines HTML templates for login and chat interfaces, along with helper functions for user management and message display. Includes functions for safe HTML escaping and date formatting.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Login screen\nconst loginTemplate = (error) => `<div class=\"login flex min-h-screen bg-neutral justify-center items-center\">\n<div class=\"card w-full max-w-sm bg-base-100 px-4 py-8 shadow-xl\">\n  <div class=\"px-4\"><i alt=\"\" class=\"h-32 w-32 block mx-auto i-logos-feathersjs invert\"></i>\n    <h1 class=\"text-5xl font-bold text-center my-5 bg-clip-text bg-gradient-to-br\">\n      Feathers Chat\n    </h1>\n  </div>\n  <form class=\"card-body pt-2\">\n    ${error ? `<div class=\"alert alert-error justify-start\">\n      <i class=\"i-feather-alert-triangle\"></i>\n      <span class=\"flex-grow\">${error.message}</span>\n    </div>` : ''}\n    <div class=\"form-control\">\n      <label for=\"email\" class=\"label\"><span class=\"label-text\">Email</span></label>\n      <input type=\"text\" name=\"email\" placeholder=\"enter email\" class=\"input input-bordered\">\n    </div>\n    <div class=\"form-control mt-0\">\n      <label for=\"password\" class=\"label\"><span class=\"label-text\">Password</span></label>\n      <input type=\"password\" name=\"password\" placeholder=\"enter password\" class=\"input input-bordered\">\n    </div>\n    <div class=\"form-control mt-6\"><button id=\"login\" type=\"button\" class=\"btn\">Login</button></div>\n    <div class=\"form-control mt-6\"><button id=\"signup\" type=\"button\" class=\"btn\">Signup</button></div>\n    <div class=\"form-control mt-6\"><a href=\"/oauth/github\" id=\"github\" class=\"btn\">Login with GitHub</a></div>\n  </form>\n</div>\n</div>`\n\n// Main chat view\nconst chatTemplate = () => `<div class=\"drawer drawer-mobile\"><input id=\"drawer-left\" type=\"checkbox\" class=\"drawer-toggle\">\n  <div class=\"drawer-content flex flex-col\">\n    <div class=\"navbar w-full\">\n      <div class=\"navbar-start\">\n        <label for=\"drawer-left\" class=\"btn btn-square btn-ghost lg:hidden drawer-button\">\n          <i class=\"i-feather-menu text-lg\"></i>\n        </label>\n      </div>\n      <div class=\"navbar-center flex flex-col\">\n        <p>Feathers Chat</p>\n        <label for=\"drawer-right\" class=\"text-xs cursor-pointer\">\n          <span class=\"online-count\">0</span> User(s)\n        </label>\n      </div>\n      <div class=\"navbar-end\">\n        <div class=\"tooltip tooltip-left\" data-tip=\"Logout\">\n        <button type=\"button\" id=\"logout\" class=\"btn btn-ghost\"><i class=\"i-feather-log-out text-lg\"></i></button>\n      </div>\n      </div>\n    </div>\n    <div id=\"chat\" class=\"h-full overflow-y-auto px-3\"></div>\n    <div class=\"form-control w-full py-2 px-3\">\n      <form class=\"input-group overflow-hidden\" id=\"send-message\">\n        <input name=\"text\" type=\"text\" placeholder=\"Compose message\" class=\"input input-bordered w-full\">\n        <button type=\"submit\" class=\"btn\">Send</button>\n      </form>\n    </div>\n  </div>\n  <div class=\"drawer-side\"><label for=\"drawer-left\" class=\"drawer-overlay\"></label>\n    <ul class=\"menu user-list compact p-2 overflow-y-auto w-60 bg-base-300 text-base-content\">\n      <li class=\"menu-title\"><span>Users</span></li>\n    </ul>\n  </div>\n</div>`\n\n// Helper to safely escape HTML\nconst escapeHTML = (str) => str.replace(/&/g, '&amp').replace(/</g, '&lt').replace(/>/g, '&gt')\n\nconst formatDate = (timestamp) =>\n  new Intl.DateTimeFormat('en-US', {\n    timeStyle: 'short',\n    dateStyle: 'medium'\n  }).format(new Date(timestamp))\n\n// Add a new user to the list\nconst addUser = (user) => {\n  const userList = document.querySelector('.user-list')\n\n  if (userList) {\n    // Add the user to the list\n    userList.innerHTML += `<li class=\"user\">\n      <a>\n        <div class=\"avatar indicator\">\n          <div class=\"w-6 rounded\"><img src=\"${user.avatar}\" alt=\"${user.email}\"></div>\n        </div><span>${user.email}</span>\n      </a>\n    </li>`\n\n    // Update the number of users\n    const userCount = document.querySelectorAll('.user-list li.user').length\n\n    document.querySelector('.online-count').innerHTML = userCount\n  }\n}\n\n// Renders a message to the page\nconst addMessage = (message) => {\n  // The user that sent this message (added by the populate-user hook)\n  const { user = {} } = message\n  const chat = document.querySelector('#chat')\n  // Escape HTML to prevent XSS attacks\n  const text = escapeHTML(message.text)\n\n  if (chat) {\n    chat.innerHTML += `<div class=\"chat chat-start py-2\">\n      <div class=\"chat-image avatar\">\n        <div class=\"w-10 rounded-full\">\n          <img src=\"${user.avatar}\" />\n        </div>\n      </div>\n      <div class=\"chat-header pb-1\">\n        ${user.email}\n        <time class=\"text-xs opacity-50\">${formatDate(message.createdAt)}</time>\n      </div>\n      <div class=\"chat-bubble\">${text}</div>\n    </div>`\n\n    // Always scroll to the bottom of our message list\n    chat.scrollTop = chat.scrollHeight - chat.clientHeight\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Connection Events in Feathers.js Channels\nDESCRIPTION: This snippet shows how to manage new real-time connections by adding them to an anonymous channel, which is useful for sending updates to users who haven't authenticated yet.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/channels.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { RealTimeConnection } from '@feathersjs/feathers'\n\napp.on('connection', (connection: RealTimeConnection) => {\n  // On a new real-time connection, add it to the\n  // anonymous channel\n  app.channel('anonymous').join(connection)\n})\n```\n\n----------------------------------------\n\nTITLE: Using resolveObjectId for Property Resolution\nDESCRIPTION: This snippet shows how to use the resolveObjectId helper as a property resolver in Feathers. It includes an example of direct usage and a more complex scenario with conditional logic.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { resolveObjectId } from '@feathersjs/mongodb'\n\nexport const messageDataResolver = resolve<Message, HookContext>({\n  properties: {\n    userId: resolveObjectId\n  }\n})\n\nexport const messageDataResolver = resolve<Message, HookContext>({\n  properties: {\n    userId: async (value, _message, context) => {\n      // If the user is an admin, allow them to create messages for other users\n      if (context.params.user.isAdmin && value !== undefined) {\n        return resolveObjectId(value)\n      }\n      // Otherwise associate the record with the id of the authenticated user\n      return context.params.user._id\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Facebook OAuth Authentication in FeathersJS\nDESCRIPTION: Basic configuration for Facebook OAuth authentication in FeathersJS, specifying the app ID and secret in the default.json configuration file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/facebook.md#2025-04-17_snippet_0\n\nLANGUAGE: js\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"facebook\": {\n        \"key\": \"<App ID>\",\n        \"secret\": \"<App Secret>\"\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using resolveData Hook in Feathers Service\nDESCRIPTION: This snippet demonstrates how to use the resolveData hook to resolve data before create and patch operations in a Feathers service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { hooks as schemaHooks, resolve } from '@feathersjs/schema'\nimport { Type } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport type { HookContext } from '../declarations'\n\nconst messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String(),\n    createdAt: Type.Number(),\n    updatedAt: Type.Number(),\n    userId: Type.Number()\n  },\n  { $id: 'Message', additionalProperties: false }\n)\n\ntype Message = Static<typeof messageSchema>\n\n// Pick the data for creating a new message\nconst messageDataSchema = Type.Pick(messageSchema, ['text'])\ntype MessageData = Static<typeof messageDataSchema>\n\n// Resolver that automatically set `userId` and `createdAt`\nconst messageDataResolver = resolve<Message, HookContext>({\n  // Associate the currently authenticated user\n  userId: (value, message, context) => context.params?.user.id,\n  // Return the current date\n  createdAt: () => Date.now()\n})\n\n// Resolver that automatically sets `updatedAt`\nconst messagePatchResolver = resolve<Message, HookContext>({\n  // Return the current date\n  updatedAt: () => Date.now()\n})\n\napp.service('users').hooks({\n  before: {\n    create: [schemaHooks.resolveData(messageDataResolver)],\n    patch: [schemaHooks.resolveData(messagePatchResolver)]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Advanced Authenticate Hook Usage with Options in JavaScript\nDESCRIPTION: This snippet shows how to use the authenticate hook with custom options, including specifying a different authentication service path and multiple strategies.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/hook.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { authenticate } from '@feathersjs/authentication'\n\n// Authenticate with `jwt` and `api-key` strategy\n// using app.service('v1/authentication') as the authentication service\napp.service('messages').hooks({\n  before: {\n    all: [\n      authenticate({\n        service: 'v1/authentication',\n        strategies: ['jwt', 'api-key']\n      })\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Setting up HTTPS Server with Feathers and Koa\nDESCRIPTION: Example of setting up an HTTPS server with Feathers and Koa, including SSL certificate configuration and explicit app.setup() call.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport https from 'https'\nimport { app } from './app'\n\nconst port = app.get('port')\nconst server = https\n  .createServer(\n    {\n      key: fs.readFileSync('privatekey.pem'),\n      cert: fs.readFileSync('certificate.pem')\n    },\n    app.callback()\n  )\n  .listen(443)\n\n// Call app.setup to initialize all services and SocketIO\napp.setup(server)\n\nserver.on('listening', () => logger.info('Feathers application started'))\n```\n\n----------------------------------------\n\nTITLE: Configuring Firebase Authentication in FeathersJS\nDESCRIPTION: JSON configuration for setting up Firebase authentication in a FeathersJS application. This includes the authentication settings and Firebase service account credentials.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/firebase.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {}\n  },\n  \"firebase\": {\n    \"type\": \"THIS SHOULD BE YOUR SERVICE ACCOUNT\",\n    \"project_id\": \"GENERATED UNDER FIREBASE CONSOLE\",\n    \"...\": \"...\"\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Validating Dates with TypeBox String Format\nDESCRIPTION: Shows how to validate dates using TypeBox String format with the 'date-time' format specification to handle ISO8601 dates, which is the recommended approach for date validation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst userSchema = Type.Object(\n  {\n    createdAt: Type.String({ format: 'date-time' })\n  },\n  { $id: 'User', additionalProperties: false }\n)\n```\n\n----------------------------------------\n\nTITLE: Data Schema for Create Operations\nDESCRIPTION: Implements a data schema for creating new entries using Type.Pick to select specific properties from the main schema.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport const messageDataSchema = Type.Pick(messageSchema, ['text'], {\n  $id: 'MessageData'\n})\nexport type MessageData = Static<typeof messageDataSchema>\nexport const messageDataValidator = getValidator(messageDataSchema, dataValidator)\nexport const messageDataResolver = resolve<Message, HookContext>({})\n```\n\n----------------------------------------\n\nTITLE: Adding Error Handler as Application-Level Hook in TypeScript\nDESCRIPTION: Example of how to add the error handling middleware as an application-level error hook in a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/errors.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\napp.hooks({\n  //...\n  error: {\n    all: [errorHandler]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Integrating dotenv in FeathersJS Application (TypeScript)\nDESCRIPTION: This TypeScript code demonstrates how to integrate dotenv into a FeathersJS application. It imports and configures dotenv before importing the FeathersJS configuration, ensuring that environment variables from .env files are loaded.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/custom-environment-variables.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// dotenv replaces all environmental variables from ~/.env in ~/config/custom-environment-variables.json\nimport * as dotenv from 'dotenv'\ndotenv.config()\n\n// or for ES6\n\nimport 'dotenv/config';\n\nimport configuration from '@feathersjs/configuration'\n```\n\n----------------------------------------\n\nTITLE: Setup and Teardown Hooks in Feathers.js\nDESCRIPTION: Demonstrates how to implement setup and teardown hooks for database connection management during application lifecycle.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\napp.hooks({\n  setup: [\n    async (context: HookContext, next: NextFunction) => {\n      // E.g. wait for MongoDB connection to complete\n      await context.app.get('mongoClient').connect()\n      await next()\n    }\n  ],\n  teardown: [\n    async (context: HookContext, next: NextFunction) => {\n      // Close MongoDB connection\n      await context.app.get('mongoClient').close()\n      await next()\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Service Test in TypeScript for Feathers.js\nDESCRIPTION: TypeScript code for a basic service test in Feathers.js, checking if the service is registered.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport assert from 'assert';\nimport app from '../../src/app';\n\ndescribe('\\'users\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('users');\n\n    assert.ok(service, 'Registered the service');\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Referenced Types in FeathersJS\nDESCRIPTION: Shows how to create referenced types using Type.Ref(). The target type must specify an $id property to be referenced correctly. This is useful for creating complex schemas with reusable type definitions.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_94\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.String({ $id: 'T' })\nconst R = Type.Ref(T)\n```\n\n----------------------------------------\n\nTITLE: Using the remove Method for Single and Multiple Records\nDESCRIPTION: Demonstrates how to use the remove method to delete one or multiple records. The example shows removing a single message and removing all read messages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nconst removedMessage = await app.service('messages').remove(1)\n\nconsole.log(removedMessage)\n\nconst params = {\n  query: { read: true }\n}\n\n// Remove all read messages\nconst removedMessages = await app.service('messages').remove(null, params)\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Errors in TypeScript\nDESCRIPTION: Example of creating a custom error class by extending FeathersError. It shows how to define a new UnsupportedMediaType error with a custom code and class name.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/errors.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { FeathersError } from '@feathersjs/errors'\n\nclass UnsupportedMediaType extends FeathersError {\n  constructor(message: string, data: any) {\n    super(message, 'UnsupportedMediaType', 415, 'unsupported-media-type', data)\n  }\n}\n\nconst error = new UnsupportedMediaType('Not supported')\n\nconsole.log(error.toJSON())\n```\n\n----------------------------------------\n\nTITLE: Defining Shipping Order Schema with TypeBox in FeathersJS\nDESCRIPTION: This code snippet defines the schema for a Shipping Order using TypeBox in a FeathersJS application. It specifies the structure and types of the Shipping Order object properties, including a reference to the Order schema.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport const shippingOrderSchema = Type.Object(\n  {\n    id: Type.String({ format: 'uuid' }),\n    order_id: Type.String({ format: 'uuid', $schema: 'Order' }),\n    expedited: Type.Boolean(),\n    shipped: Type.Boolean()\n  },\n  { $id: 'ShippingOrder', additionalProperties: false }\n)\n```\n\n----------------------------------------\n\nTITLE: Accessing a Service and Listening for Events\nDESCRIPTION: Demonstrates how to access a registered service and subscribe to its events.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst messageService = app.service('messages')\n\nconst message = await messageService.get('test')\n\nconsole.log(message)\n\nmessageService.on('created', (message: Message) => {\n  console.log('Created a todo')\n})\n```\n\n----------------------------------------\n\nTITLE: Server-Side Parameter Processing Hook\nDESCRIPTION: Demonstrates how to extract and process client parameters on the server side from the query object.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\napp.hooks({\n  before: {\n    all: [\n      async (context: HookContext) => {\n        // Pull out `$client` parameter and create a new `query` object\n        const {\n          $client: { platform, version },\n          ...query\n        } = params.query\n\n        // Update context.params with the new information\n        context.params = {\n          ...context.params,\n          platform,\n          version,\n          query\n        }\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Connection Pool in FeathersJS (JSON)\nDESCRIPTION: This JSON configuration example shows how to set up a PostgreSQL connection with a custom connection pool size in FeathersJS. It includes the client type, connection string, and pool size settings.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/databases.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n\"postgresql\": {\n  \"client\": \"pg\",\n  \"connection\": \"<pg connection string>\",\n  \"pool\": {\n    \"min\": 0,\n    \"max\": 7\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Setup and Teardown Hooks in Feathers (TypeScript)\nDESCRIPTION: This snippet shows how to register setup and teardown hooks that run when the application starts or shuts down.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/app.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Register application setup and teardown hooks here\napp.hooks({\n  setup: [],\n  teardown: []\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Knex Errors in FeathersJS\nDESCRIPTION: This snippet shows how to handle Knex errors in FeathersJS while maintaining security. It demonstrates the use of a secure symbol to retrieve the original Knex error on the server side without exposing sensitive information to the client.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ERROR } from 'feathers-knex'\n\ntry {\n  await knexService.doSomething()\n} catch (error: any) {\n  // error is a FeathersError with just the message\n  // Safely retrieve the Knex error\n  const knexError = error[ERROR]\n}\n```\n\n----------------------------------------\n\nTITLE: FeathersJS Service-Specific Hook with Type\nDESCRIPTION: Implementation of a hook with specific service type for proper TypeScript type inference of context properties.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { UserService } from '../services/users/users'\nimport type { HookContext } from '../declarations'\n\nexport const myFancyUserHook = async (context: HookContext<UserService>) => {\n  console.log(`Running hook ${name} on ${context.path}.${context.method}`)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Feathers App in Tests (TypeScript)\nDESCRIPTION: This code demonstrates how to import and use the Feathers application in unit tests without starting a separate server instance.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/app.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport assert from 'assert'\nimport { app } from '../../src/app'\n\ndescribe('messages service', () => {\n  it('registered the service', () => {\n    const service = app.service('messages')\n\n    assert.ok(service, 'Registered the service')\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Anonymous Authentication Hook in TypeScript\nDESCRIPTION: Hook implementation that enables anonymous authentication for external service calls by setting the appropriate authentication strategy when no authentication is present.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/anonymous.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Hook, HookContext } from '@feathersjs/feathers';\n\nexport default (): Hook => {\n  return async (context: HookContext, next?: NextFunction) => {\n    const { params } = context;\n\n    if (params.provider && !params.authentication) {\n      context.params = {\n        ...params,\n        authentication: {\n          strategy: 'anonymous'\n        }\n      }\n    }\n\n    if (next) {\n      await next();\n    }\n\n    return context;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying with $limit filter in Feathers.js\nDESCRIPTION: Demonstrates how to limit the number of results returned from a service using the $limit filter. This retrieves only the first two unread messages from the messages service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Retrieves the first two unread messages\napp.service('messages').find({\n  query: {\n    $limit: 2,\n    read: false\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?$limit=2&read=false\n```\n\n----------------------------------------\n\nTITLE: Defining Configuration Types in Feathers.js\nDESCRIPTION: Example of extending the Configuration interface to include custom types for app.get and app.set methods in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// The types for app.get(name) and app.set(name)\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Configuration extends ApplicationConfiguration {\n  startupTime: Date\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Frontend with FeathersJS Client for File Uploading\nDESCRIPTION: A complete HTML page that implements a client-side file upload using feathers-client and jQuery. It demonstrates how to read a file as dataURI, monitor upload progress, and handle the server response when uploading files to a FeathersJS application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n    <head>\n        <title>Feathersjs File Upload</title>\n        <script   src='https://code.jquery.com/jquery-2.2.3.min.js'   integrity='sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo='   crossorigin='anonymous'></script>\n        <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/core-js/2.1.4/core.min.js'></script>\n        <script type='text/javascript' src='//unpkg.com/feathers-client@^2.0.0/dist/feathers.js'></script>\n        <script type='text/javascript'>\n            // feathers client initialization\n            const rest = feathers.rest('http://localhost:3030');\n            const app = feathers()\n            .configure(feathers.hooks())\n            .configure(rest.jquery($));\n\n            // setup jQuery to watch the ajax progress\n            $.ajaxSetup({\n                xhr: function () {\n                    var xhr = new window.XMLHttpRequest();\n                    // upload progress\n                    xhr.addEventListener('progress', function (evt) {\n                        if (evt.lengthComputable) {\n                            var percentComplete = evt.loaded / evt.total;\n                            console.log('upload progress: ', Math.round(percentComplete * 100) + '%');\n                        }\n                    }, false);\n                    return xhr;\n                }\n            });\n\n            const uploadService = app.service('uploads');\n            const reader  = new FileReader();\n\n            // encode selected files\n            $(document).ready(function(){\n                $('input#file').change(function(){\n                    var file = this.files[0];\n                    // encode dataURI\n                    reader.readAsDataURL(file);\n                })\n            });\n\n            // when encoded, upload\n            reader.addEventListener('load', function () {\n                console.log('encoded file: ', reader.result);\n                var upload = uploadService\n                    .create({uri: reader.result})\n                    .then(function(response){\n                        // success\n                        alert('UPLOADED!! ');\n                        console.log('Server responded with: ', response);\n                    });\n            }, false);\n        </script>\n    </head>\n    <body>\n        <h1>Let's upload some files!</h1>\n        <input type='file' id='file'/>\n    </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication with Express Session in FeathersJS\nDESCRIPTION: Implementation of session-based authentication for server-side rendering, including login/logout functionality and protected route handling using express-session and JWT authentication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/view-engine.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst session = require('express-session');\nconst { authenticate } = require('@feathersjs/express');\n\n// This sets `req.authentication` from the information added to the session\nconst setSessionAuthentication = (req, res, next) => {\n  req.authentication = req.session.authentication;\n  next();\n};\n\nmodule.exports = function (app) {\n  // Initialize Express-session - might have to be configured\n  // with a persisten storage adapter (like Redis)\n  app.use(session({\n    secret: 'session-secret',\n    saveUninitialized: false,\n    resave: true\n  }));\n\n  // An endpoint that you can POST to with `email` and `password` that\n  // will then perform a local user authentication\n  // e.g <form action=\"/login\" method=\"post\"></form>\n  app.post('/login', async (req, res, next) => {\n    try {\n      const { email, password } = req.body;\n      // Run normal local authentication through our service\n      const { accessToken } = await app.service('authentication').create({\n        strategy: 'local',\n        email,\n        password\n      });\n\n      // Register the JWT authentication information on the session\n      req.session.authentication = {\n        strategy: 'jwt',\n        accessToken\n      };\n\n      // Redirect to an authenticated page\n      res.redirect('/hello');\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Remove the authentication information from the session to log out\n  app.get('logout', (req, res) => {\n    delete req.session.authentication;\n    res.end('You are now logged out');\n  });\n\n  // Renders an authenticated page or an 401 error page\n  // Always needs `setSessionAuthentication, authenticate('jwt')` middleware first\n  app.get('/hello', setSessionAuthentication, authenticate('jwt'), (req, res) => {\n    res.end(`Authenticated page with user ${req.user.email}`);\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Client-Side Parameter Passing Example\nDESCRIPTION: Demonstrates how to safely pass client-side parameters to the server using the query object in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst params = { foo: 'bar' }\n\nconst user = await client.service('users').patch(1, { admin: true }, params)\n```\n\n----------------------------------------\n\nTITLE: Method-Specific Hook Configuration\nDESCRIPTION: Example of adding a profiling hook specifically to find and get methods while maintaining other hook configurations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napp.service(messagePath).hooks({\n  around: {\n    all: [\n      authenticate('jwt'),\n      schemaHooks.resolveExternal(messageExternalResolver),\n      schemaHooks.resolveResult(messageResolver)\n    ],\n    find: [profiler],\n    get: [profiler]\n  },\n  before: {\n    all: [schemaHooks.validateQuery(messageQueryValidator), schemaHooks.resolveQuery(messageQueryResolver)],\n    find: [],\n    get: [],\n    create: [schemaHooks.validateData(messageDataValidator), schemaHooks.resolveData(messageDataResolver)],\n    patch: [schemaHooks.validateData(messagePatchValidator), schemaHooks.resolveData(messagePatchResolver)],\n    remove: []\n  },\n  after: {\n    all: []\n  },\n  error: {\n    all: []\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Service Behavior in FeathersJS\nDESCRIPTION: Shows how to modify the default behavior when accessing non-existent services via app.service(). Returns null instead of throwing NotFound error.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\napp.defaultService = () => {\n  return null // undefined\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Login and Chat Pages in JavaScript\nDESCRIPTION: Functions to show the login page and chat page, including fetching and displaying recent messages and registered users.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Show the login page\nconst showLogin = () => {\n  document.getElementById('app').innerHTML = loginTemplate()\n}\n\n// Shows the chat page\nconst showChat = async () => {\n  document.getElementById('app').innerHTML = chatTemplate()\n\n  // Find the latest 25 messages. They will come with the newest first\n  const messages = await client.service('messages').find({\n    query: {\n      $sort: { createdAt: -1 },\n      $limit: 25\n    }\n  })\n\n  // We want to show the newest message last\n  messages.data.reverse().forEach(addMessage)\n\n  // Find all users\n  const users = await client.service('users').find()\n\n  // Add each user to the list\n  users.data.forEach(addUser)\n}\n```\n\n----------------------------------------\n\nTITLE: HTTPS Server Configuration\nDESCRIPTION: Setup for HTTPS server with Feathers and Express\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport https from 'https'\nimport { app } from './app'\n\nconst port = app.get('port')\nconst server = https\n  .createServer(\n    {\n      key: fs.readFileSync('privatekey.pem'),\n      cert: fs.readFileSync('certificate.pem')\n    },\n    app\n  )\n  .listen(443)\n\n// Call app.setup to initialize all services and SocketIO\napp.setup(server)\n\nserver.on('listening', () => logger.info('Feathers application started'))\n```\n\n----------------------------------------\n\nTITLE: Emitting Custom Application Events with TypeScript\nDESCRIPTION: Shows how to emit custom events from a Feathers application with TypeScript type definitions for the event data.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ntype MyEventData = { message: string }\n\napp.emit('myevent', {\n  message: 'Something happened'\n})\n\napp.on('myevent', (data: MyEventData) => console.log('myevent happened', data))\n```\n\n----------------------------------------\n\nTITLE: Configuring Extended Ajv for TypeBox in TypeScript\nDESCRIPTION: This snippet shows how to configure Ajv to support extended TypeBox types. It includes custom validation for Constructor, Function, Date, Promise, Uint8Array, Undefined, and Void types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_84\n\nLANGUAGE: typescript\nCODE:\n```\nimport { TypeGuard } from '@sinclair/typebox'\nimport { Value } from '@sinclair/typebox/value'\nimport addFormats from 'ajv-formats'\nimport type { Options } from 'ajv'\nimport Ajv from 'ajv'\n\nfunction schemaOf(schemaOf: string, value: unknown, schema: unknown) {\n  switch (schemaOf) {\n    case 'Constructor':\n      return TypeGuard.IsConstructor(schema) && Value.Check(schema, value) // not supported\n    case 'Function':\n      return TypeGuard.IsFunction(schema) && Value.Check(schema, value) // not supported\n    case 'Date':\n      return TypeGuard.IsDate(schema) && Value.Check(schema, value)\n    case 'Promise':\n      return TypeGuard.IsPromise(schema) && Value.Check(schema, value) // not supported\n    case 'Uint8Array':\n      return TypeGuard.IsUint8Array(schema) && Value.Check(schema, value)\n    case 'Undefined':\n      return TypeGuard.IsUndefined(schema) && Value.Check(schema, value) // not supported\n    case 'Void':\n      return TypeGuard.IsVoid(schema) && Value.Check(schema, value)\n    default:\n      return false\n  }\n}\n\nexport function createAjv(options: Options = {}) {\n  return addFormats(new Ajv(options), [\n    'date-time',\n    'time',\n    'date',\n    'email',\n    'hostname',\n    'ipv4',\n    'ipv6',\n    'uri',\n    'uri-reference',\n    'uuid',\n    'uri-template',\n    'json-pointer',\n    'relative-json-pointer',\n    'regex',\n  ])\n  .addKeyword({ type: 'object', keyword: 'instanceOf', validate: schemaOf })\n  .addKeyword({ type: 'null', keyword: 'typeOf', validate: schemaOf })\n  .addKeyword('exclusiveMinimumTimestamp')\n  .addKeyword('exclusiveMaximumTimestamp')\n  .addKeyword('minimumTimestamp')\n  .addKeyword('maximumTimestamp')\n  .addKeyword('minByteLength')\n  .addKeyword('maxByteLength')\n}\n\nexport const dataValidator: Ajv = createAjv({})\nexport const queryValidator: Ajv = createAjv({ coerceTypes: true })\n```\n\n----------------------------------------\n\nTITLE: Validating Binary Format in TypeScript\nDESCRIPTION: Validates a binary string according to the OpenAPI 3.0.0 specification using Type.String with 'binary' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'binary' })\n```\n\n----------------------------------------\n\nTITLE: Validating UUID Format in TypeScript\nDESCRIPTION: Validates a Universally Unique Identifier according to RFC 4122 using Type.String with 'uuid' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'uuid' })\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io with Custom Callback in Feathers\nDESCRIPTION: Sets up Socket.io transport with a custom callback for additional configuration and middleware.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio'\n\nconst app = feathers()\n\napp.configure(\n  socketio((io) => {\n    io.on('connection', (socket) => {\n      // Do something here\n    })\n\n    // Registering Socket.io middleware\n    io.use(function (socket, next) {\n      // Exposing a request property to services and hooks\n      socket.feathers.referrer = socket.request.referrer\n      next()\n    })\n  })\n)\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Initializing TypeScript Project for Feathers\nDESCRIPTION: Commands to initialize a Node.js project with npm, install TypeScript dependencies, and create a TypeScript configuration file for a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnpm init --yes\n# Install TypeScript and its NodeJS wrapper\nnpm i typescript ts-node @types/node --save-dev\n# Also initialize a TS configuration file that uses modern JavaScript\nnpx tsc --init --target es2020\n```\n\n----------------------------------------\n\nTITLE: Registering Firebase Authentication Strategy in FeathersJS\nDESCRIPTION: Configuration for the FeathersJS authentication service, registering the custom Firebase strategy for use in the application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/firebase.md#2025-04-17_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationService, JWTStrategy } = require('@feathersjs/authentication');\nconst { expressOauth } = require('@feathersjs/authentication-oauth');\n\nconst { FirebaseStrategy } = require('./firebase');\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('firebase', new FirebaseStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(expressOauth());\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Additional Query Properties with TypeBox\nDESCRIPTION: Shows how to add query properties that fall outside the standard Feathers query syntax by using Type.Intersect to combine querySyntax with additional properties.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { querySyntax } from '@feathersjs/typebox'\n\n// Schema for allowed query properties\nconst messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'], {\n  additionalProperties: false\n})\nconst messageQuerySchema = Type.Intersect(\n  [\n    querySyntax(messageQueryProperties),\n    Type.Object({\n      isActive: Type.Boolean()\n    })\n  ],\n  { additionalProperties: false }\n)\n\ntype MessageQuery = Static<typeof messageQuerySchema>\n```\n\n----------------------------------------\n\nTITLE: Proxy Permissions Query Using $feathers Stage in MongoDB Aggregation\nDESCRIPTION: Demonstrates a complex query using the custom $feathers stage to query pages through a permissions collection, applying user-specific filters and populating related data.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nconst result = await app.service('permissions').find({\n  query: {},\n  pipeline: [\n    // query all permissions records which apply to the current user\n    {\n      $match: { userId: context.params.user._id }\n    },\n    // populate the pageId onto each `permission` record, as an array containing one page\n    {\n      $lookup: {\n        from: 'pages',\n        localField: 'pageId',\n        foreignField: '_id',\n        as: 'page'\n      }\n    },\n    // convert the `page` array into an object, so now we have an array of permissions with permission.page on each.\n    {\n      $unwind: { path: '$page' }\n    },\n    // Add a permissionId to each page\n    {\n      $addFields: {\n        'page.permissionId': '$_id'\n      }\n    },\n    // discard the permission and only keep the populated `page`, and bring it top level in the array\n    {\n      $replaceRoot: { newRoot: '$page' }\n    },\n    // apply the feathers query stages to the aggregation pipeline.\n    // now the query will apply to the pages, since we made the pages top level in the previous step.\n    {\n      $feathers: {}\n    }\n  ],\n  paginate: false\n})\n```\n\n----------------------------------------\n\nTITLE: Initializing Debug Module in FeathersJS\nDESCRIPTION: Shows how to initialize the debug module in FeathersJS after its removal as a direct dependency. This allows for custom debugging functionality while supporting various platforms.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport debug from 'debug'\n\nfeathers.setDebug(debug)\n```\n\n----------------------------------------\n\nTITLE: Using Data Validator in TypeScript\nDESCRIPTION: Shows how to use the getDataValidator function to create validators for create, update, and patch service methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getDataValidator, Ajv } from '@feathersjs/schema'\nimport type { FromSchema } from '@feathersjs/schema'\n\nconst userDataSchema = {\n  $id: 'User',\n  type: 'object',\n  additionalProperties: false,\n  required: ['email', 'password'],\n  properties: {\n    email: { type: 'string' },\n    password: { type: 'string' }\n  }\n} as const\n\ntype UserData = FromSchema<typeof userDataSchema>\n\nconst dataValidator = new Ajv()\n\nconst dataValidator = getDataValidator(userDataSchema, dataValidator)\n```\n\n----------------------------------------\n\nTITLE: Service and Middleware Registration\nDESCRIPTION: Examples of registering services and middleware with Express-enabled Feathers app\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Register a service\napp.use('todos', {\n  async get(id) {\n    return { id }\n  }\n})\n\n// Register an Express middleware\napp.use('/test', (req, res) => {\n  res.json({\n    message: 'Hello world from Express middleware'\n  })\n})\n\n// Register multiple Express middleware functions\napp.use(\n  '/test',\n  (req, res, next) => {\n    res.data = 'Step 1 worked'\n    next()\n  },\n  (req, res) => {\n    res.json({\n      message: `Hello world from Express middleware ${res.data}`\n    })\n  }\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Finally Hook Using Around Hooks in FeathersJS\nDESCRIPTION: Shows how to implement finally hook functionality using the new around hooks system, replacing the removed finally hook type.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('myservice').hooks([\n  async (context, next) => {\n    try {\n      await next()\n    } finally {\n      // Do finally hook stuff here\n    }\n  }\n])\n```\n\n----------------------------------------\n\nTITLE: Client-side JavaScript for Firebase Authentication with FeathersJS\nDESCRIPTION: Client-side JavaScript that initializes the FeathersJS client, Firebase SDK, and Firebase UI. It handles authentication flows, token management, and UI state changes between guest and authenticated user views.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/firebase.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nlet client, ui;\n\ninit();\n\nfunction init(){\n  initializeFeathers();\n  initializeAuth();\n  initializeFirebase();\n}\n\nfunction initializeFeathers(){\n  // Establish a Socket.io connection\n  const socket = io();\n  // Initialize our Feathers client application through Socket.io\n  // with hooks and authentication.\n  client = feathers();\n\n  client.configure(feathers.socketio(socket));\n  // Use localStorage to store our login token\n  client.configure(feathers.authentication());\n}\n\n// Either re-authenticate existing session, or start Firebase UI\nasync function initializeAuth(){\n  try {\n    await client.reAuthenticate();\n    showMemberApp();\n  } catch(e){\n    // Error re-authenticating, so let's start Firebase UI\n    showGuestApp();\n  }\n\n  // No longer need to prepare anything\n  document.getElementById('app-preparing').style.display = 'none';\n}\n\nfunction initializeFirebase(){\n  // Your web app's Firebase configuration\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  var firebaseConfig = {\n    // Copy this from your Firebase Console\n    // Under Project Settings -> Web App\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n\n  // Initialize the FirebaseUI Widget using Firebase.\n  ui = new firebaseui.auth.AuthUI(firebase.auth());\n}\n\n\nasync function showMemberApp(){\n  // Get user information\n  const { user } = await client.get('authentication');\n\n  // Hide Guest App\n  document.getElementById('app-guest').style.display = 'none';\n\n  // Show member app\n  document.getElementById('app-member').style.display = 'block';\n  document.getElementById('app-member').innerHTML = `Logged in as, ${user.email}. <a href=\"#\" id=\"logout\">Logout</a>`;\n\n}\n\nfunction showGuestApp(){\n  // Hide & clear member app\n  document.getElementById('app-member').style.display = 'none';\n  document.getElementById('app-member').innerHTML = '';\n\n  // Show Guest app\n  document.getElementById('app-guest').style.display = 'block';\n  startFirebaseUI();\n}\n\nfunction startFirebaseUI(){\n  ui.start('#firebaseui-auth-container', {\n    callbacks: {\n      signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n        // User successfully signed in.\n        // Return type determines whether we continue the redirect automatically\n        // or whether we leave that to developer to handle.\n        firebase.auth().currentUser.getIdToken(/* forceRefresh */ true).then(async function(idToken) {\n          await client.authenticate({\n            strategy: 'firebase',\n            access_token: idToken,\n          });\n          showMemberApp();\n        });\n\n        return false;\n      },\n      uiShown: function() {\n        // The widget is rendered.\n        // Hide the loader.\n        document.getElementById('loader').style.display = 'none';\n      }\n    },\n    // Will use popup for IDP Providers sign-in flow instead of the default, redirect.\n    signInFlow: 'popup',\n    credentialHelper: firebaseui.auth.CredentialHelper.NONE, // disable accountchooter.com helper\n    signInOptions: [\n      firebase.auth.EmailAuthProvider.PROVIDER_ID,\n      firebase.auth.FacebookAuthProvider.PROVIDER_ID,\n      firebase.auth.TwitterAuthProvider.PROVIDER_ID,\n    ],\n    // Other config options...\n  });\n}\n\nconst addEventListener = (selector, event, handler) => {\n  document.addEventListener(event, async ev => {\n    if (ev.target.closest(selector)) {\n      handler(ev);\n    }\n  });\n};\n\n// \"Logout\" button click handler\naddEventListener('#logout', 'click', async () => {\n  await client.logout();\n\n  showGuestApp();\n});\n```\n\n----------------------------------------\n\nTITLE: Custom Local Strategy Implementation\nDESCRIPTION: Example of extending the LocalStrategy class with custom query handling\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Application, Params, Query } from '@feathersjs/feathers'\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\n\nclass MyLocalStrategy extends LocalStrategy {\n  async getEntityQuery(query: Query, params: Params) {\n    // Query for use but only include `active` users\n    return {\n      ...query,\n      active: true,\n      $limit: 1\n    }\n  }\n}\n\nexport default (app: Application) => {\n  const authService = new AuthenticationService(app)\n\n  authService.register('local', new MyLocalStrategy())\n\n  // ...\n  app.use('/authentication', authService)\n}\n```\n\n----------------------------------------\n\nTITLE: Calling Custom Methods with Socket.io in FeathersJS\nDESCRIPTION: Demonstrates how to call custom service methods via Socket.io by sending a socket.emit message with the method name, service name, data, and query.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit('myCustomMethod', 'myservice', { message: 'Hello world' }, {}, (error, data) => {\n  console.log('Called myCustomMethod', data)\n})\n```\n\n----------------------------------------\n\nTITLE: Patching Resources with Socket.io in FeathersJS\nDESCRIPTION: Shows how to use the 'patch' method to merge existing data of single or multiple resources with new data via Socket.io. Examples include patching a single resource by ID and patching multiple resources based on a query.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit(\n  'patch',\n  'messages',\n  2,\n  {\n    read: true\n  },\n  (error, message) => {\n    console.log('Patched message', message)\n  }\n)\n```\n\nLANGUAGE: javascript\nCODE:\n```\nsocket.emit(\n  'patch',\n  'messages',\n  null,\n  {\n    status: 'read'\n  },\n  {\n    status: 'unread'\n  },\n  (error, message) => {\n    console.log('Patched message', message)\n  }\n)\n```\n\n----------------------------------------\n\nTITLE: Creating a New Feathers Application\nDESCRIPTION: Command that runs automatically when creating a new Feathers application, installing the CLI and setting up the initial project structure.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nnpm create feathers@latest my-app\n```\n\n----------------------------------------\n\nTITLE: Using $or operator for OR conditions in Feathers.js\nDESCRIPTION: Demonstrates how to use the $or operator to find records that match any of the given criteria. This example finds messages that are either not archived or belong to room 2.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages that are not marked as archived\n// or any message from room 2\napp.service('messages').find({\n  query: {\n    $or: [{ archived: { $ne: true } }, { roomId: 2 }]\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?$or[0][archived][$ne]=true&$or[1][roomId]=2\n```\n\n----------------------------------------\n\nTITLE: Registering Service with Custom Middleware in Feathers with Koa\nDESCRIPTION: Example of registering a service with custom Koa middleware in Feathers, demonstrating the use of the 'before' option.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napp.use('/todos', new TodoService(), {\n  koa: {\n    before: [\n      async (ctx, next) => {\n        ctx.feathers // data that will be merged into sevice `params`\n\n        // This will run all subsequent middleware and the service call\n        await next()\n\n        // Then we have additional properties available on the context\n        ctx.hook // the hook context from the method call\n        ctx.body // the return value\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuration Validation Implementation\nDESCRIPTION: Shows how to implement configuration validation using TypeBox schema and Ajv validator in a FeathersJS application\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/configuration.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport { Ajv } from '@feathersjs/schema'\nimport { Type, getValidator } from '@feathersjs/typebox'\nimport type { Static } from '@feathersjs/typebox'\nimport configuration from '@feathersjs/configuration'\n\nconst configurationSchema = Type.Object(\n  {\n    port: Type.Number(),\n    host: Type.String()\n  },\n  { $id: 'Configuration', additionalProperties: false }\n)\n\nconst configurationValidator = getValidator(configurationSchema, new Ajv())\n\ntype ServiceTypes = {}\n// Use the schema type for typed `app.get` and `app.set` calls\ntype Configuration = Static<typeof configurationSchema>\n\n// Use the application root and `config/` as the configuration folder\nconst app = feathers<ServiceTypes, Configuration>().configure(configuration(configurationValidator))\n\n// Configuration will only be validated now\napp\n  .listen()\n  .then(() => console.log('Server started'))\n  .catch((error) => {\n    // Configuration validation errors will show up here\n    console.log(error.data)\n  })\n```\n\n----------------------------------------\n\nTITLE: Validating Float Format in TypeScript\nDESCRIPTION: Validates floats according to the OpenAPI 3.0.0 specification using Type.String with 'float' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'float' })\n```\n\n----------------------------------------\n\nTITLE: JWT Strategy Configuration\nDESCRIPTION: JSON configuration for customizing JWT authentication header and schemes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/jwt.md#2025-04-17_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"jwt\": {\n      \"header\": \"X-Auth\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Null Query Values\nDESCRIPTION: Example of a hook that converts string 'null' values to actual null in query parameters for database operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\napp.service('myservice').hooks({\n  before: {\n    find: [\n      async (context: HookContext) => {\n        const {\n          params: { query = {} }\n        } = context\n\n        if (query.phone === 'null') {\n          query.phone = null\n        }\n\n        context.params.query = query\n\n        return context\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Authenticating with cURL in Feathers.js\nDESCRIPTION: Command to authenticate a user using cURL by sending a POST request to the authentication endpoint with the local strategy, email, and password.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\ncurl 'http://localhost:3030/authentication/' \\\n  -H 'Content-Type: application/json' \\\n  --data-binary '{ \"strategy\": \"local\", \"email\": \"hello@feathersjs.com\", \"password\": \"supersecret\" }'\n```\n\n----------------------------------------\n\nTITLE: Custom REST Formatter\nDESCRIPTION: Implementation of a custom REST response formatter\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport express, { json, urlencoded, rest } from '@feathersjs/express'\n\nconst app = express(feathers())\n\n// Turn on JSON parser for REST services\napp.use(json())\n// Turn on URL-encoded parser for REST services\napp.use(urlencoded({ extended: true }))\n// Set up REST transport\napp.configure(\n  rest(function (req, res) {\n    // Format the message as text/plain\n    res.format({\n      'text/plain': function () {\n        res.end(`The Message is: \"${res.data.text}\"`)\n      }\n    })\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Using Collation for Case-Insensitive Patching in MongoDB\nDESCRIPTION: Demonstrates how to use collation for case-insensitive operations in MongoDB, specifically for patching records with alphabetical ordering.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst patch = { shouldStudyMore: true }\nconst query = { grade: { $gte: 'c' } }\nconst collation = { locale: 'en', strength: 1 }\nconst patchedStudent = await students.patch(null, patch, { query, collation })\n```\n\n----------------------------------------\n\nTITLE: Implementing Error Handling Middleware in JavaScript\nDESCRIPTION: Example of an error handling middleware function that can be used as an application-level error hook in Feathers. It handles different types of errors and modifies the error stack in production environments.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/errors.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst errors = require('@feathersjs/errors')\nconst errorHandler = (ctx) => {\n  if (ctx.error) {\n    const error = ctx.error\n    if (!error.code) {\n      const newError = new errors.GeneralError('server error')\n      ctx.error = newError\n      return ctx\n    }\n    if (error.code === 404 || process.env.NODE_ENV === 'production') {\n      error.stack = null\n    }\n    return ctx\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Validating Time Format in TypeScript\nDESCRIPTION: Validates a string against the HH:MM:SS.SSS+HH:MM time format using Type.String with 'time' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'time' })\n```\n\n----------------------------------------\n\nTITLE: Configuring TypeScript Compiler Options for Feathers.js\nDESCRIPTION: This JSON configuration sets up TypeScript compiler options for a Feathers.js project. It specifies ES2020 as the target, uses CommonJS modules, and enables strict type checking. The configuration also sets up source map generation and includes various type definition files.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/tsconfig.md#2025-04-17_snippet_0\n\nLANGUAGE: JSON\nCODE:\n```\n{\n  \"compilerOptions\": {\n    \"target\": \"es2020\",\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"outDir\": \"./lib\",\n    \"rootDir\": \"./src\",\n    \"declaration\": true,\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"sourceMap\": true\n  },\n  \"exclude\": [\n    \"test\"\n  ],\n  \"include\": [\n    \"src/**/*.ts\",\n    \"src/**/*.d.ts\",\n    \"test/**/*.ts\"\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Generating a Feathers Hook using CLI\nDESCRIPTION: This snippet shows how to use the Feathers CLI to generate a new hook.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/hooks.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpx feathers generate hook\n```\n\n----------------------------------------\n\nTITLE: Implementing Async Processing After Response\nDESCRIPTION: Example of a hook that performs asynchronous operations (sending email and logging) after the response without waiting for completion.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nasync (context: HookContext) => {\n  // Send an email by calling to the email service.\n  context.app.service('emails').create({\n    to: 'user@email.com',\n    body: 'You are so great!'\n  })\n\n  // Send a message to some logging service.\n  context.app.service('logging').create(context.data)\n\n  return context\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Environment Variables in FeathersJS (JSON)\nDESCRIPTION: This JSON configuration maps environment variables to application settings. It sets the port, host, and authentication secret using custom environment variables, with the port being parsed as a number.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/custom-environment-variables.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"port\": {\n    \"__name\": \"PORT\",\n    \"__format\": \"number\"\n  },\n  \"host\": \"HOSTNAME\",\n  \"authentication\": {\n    \"secret\": \"FEATHERS_SECRET\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using $lt and $lte operators in Feathers.js\nDESCRIPTION: Demonstrates how to use $lt (less than) and $lte (less than or equal) operators for numeric comparison. This example finds messages older than a day based on creation timestamp.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/querying.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n// Find all messages older than a day\nconst DAY_MS = 24 * 60 * 60 * 1000\n\napp.service('messages').find({\n  query: {\n    createdAt: {\n      $lt: new Date().getTime() - DAY_MS\n    }\n  }\n})\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?createdAt[$lt]=1479664146607\n```\n\n----------------------------------------\n\nTITLE: Defining String Enums with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use StringEnum utility to specify allowed string values for a property. It also shows how to add additional options like default values.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_41\n\nLANGUAGE: javascript\nCODE:\n```\nimport { StringEnum } from '@feathersjs/typebox'\n\nconst T = StringEnum(['crow', 'dove', 'eagle'])\n// Add additional options\nconst T = StringEnum(['crow', 'dove', 'eagle'], {\n    default: 'crow'\n})\n```\n\n----------------------------------------\n\nTITLE: Query Schema Definition\nDESCRIPTION: Implements a query schema that defines allowable query properties and includes query syntax operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport const messageQueryProperties = Type.Pick(messageSchema, ['id', 'text', 'createdAt', 'userId'])\nexport const messageQuerySchema = Type.Intersect(\n  [\n    querySyntax(messageQueryProperties),\n    Type.Object({}, { additionalProperties: false })\n  ],\n  { additionalProperties: false }\n)\nexport type MessageQuery = Static<typeof messageQuerySchema>\nexport const messageQueryValidator = getValidator(messageQuerySchema, queryValidator)\nexport const messageQueryResolver = resolve<MessageQuery, HookContext>({})\n```\n\n----------------------------------------\n\nTITLE: Using Feathers Client with Script Tags in Browser\nDESCRIPTION: HTML example showing how to load Feathers client and Socket.io client via CDN script tags and initialize a connection to a Feathers server.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<script src=\"//unpkg.com/@feathersjs/client@^5.0.0/dist/feathers.js\"></script>\n<script src=\"//unpkg.com/socket.io-client@^4.0.0/dist/socket.io.js\"></script>\n<script>\n  // Socket.io is exposed as the `io` global.\n  const socket = io('http://localhost:3030')\n  // @feathersjs/client is exposed as the `feathers` global.\n  const app = feathers()\n\n  app.configure(feathers.socketio(socket))\n  app.configure(feathers.authentication())\n\n  app.service('messages').create({\n    text: 'A new message'\n  })\n\n  // feathers.errors is an object with all of the custom error types.\n</script>\n```\n\n----------------------------------------\n\nTITLE: Authenticated Request with Token\nDESCRIPTION: Example of making an authenticated request using the Bearer token received from authentication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Content-Type: application/json\" -H \"Authorization: Bearer <your access token>\" http://localhost:3030/messages\n```\n\n----------------------------------------\n\nTITLE: Listening to Custom Events in Feathers Client with JavaScript\nDESCRIPTION: This code shows how to listen to custom events in a Feathers client using JavaScript. It includes examples of listening to events on both the service and the socket connection.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/events.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nclient.service('payments').on('status', (data) => {})\n\n// or\nsocket.on('payments status', (data) => {})\n```\n\n----------------------------------------\n\nTITLE: Creating Pick Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Pick to form a new object containing only the array of keys provided in the second argument.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_68\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Pick(\n  Type.Object({\n    x: Type.Number(),\n    y: Type.Number()\n  }),\n  ['x']\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Before/After/Error Hook in TypeScript\nDESCRIPTION: Demonstrates the traditional hook format for before, after, and error hooks in FeathersJS Dove. These hooks receive a context object as their only argument and return either the context or undefined.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/whats-new.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { HookContext } from '../../declarations'\n\nexport const myHook = async (context: HookContext) => {\n  return context\n}\n```\n\n----------------------------------------\n\nTITLE: Validating URI Reference Format in TypeScript\nDESCRIPTION: Validates a URI reference using Type.String with 'uri-reference' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'uri-reference' })\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Database Connection in Feathers.js\nDESCRIPTION: JSON configuration for PostgreSQL database connection settings, including the database driver package name and connection string.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/default.json.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"postgresql\": {\n    \"connection\": \"pg\",\n    \"client\": \"postgres://postgres:@localhost:5432/feathers-chat\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Intersect Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Intersect to create an object type by combining two or more other object types.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_53\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Intersect([\n  Type.Object({\n    x: Type.Number()\n  }),\n  Type.Object({\n    y: Type.Number()\n  })\n])\n```\n\n----------------------------------------\n\nTITLE: HTTP DELETE Requests for remove Method\nDESCRIPTION: Shows the HTTP DELETE requests equivalent to the remove method examples. Includes removing a single record and removing multiple records with a query parameter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_16\n\nLANGUAGE: http\nCODE:\n```\nDELETE /messages/1\n```\n\nLANGUAGE: http\nCODE:\n```\nDELETE /messages?read=true\n```\n\n----------------------------------------\n\nTITLE: Main Message Schema Definition\nDESCRIPTION: Defines the main data model schema for messages with id and text properties, including type definitions and validators.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport const messageSchema = Type.Object(\n  {\n    id: Type.Number(),\n    text: Type.String()\n  },\n  { $id: 'Message', additionalProperties: false }\n)\nexport type Message = Static<typeof messageSchema>\nexport const messageValidator = getValidator(messageSchema, dataValidator)\nexport const messageResolver = resolve<Message, HookContext>({})\n```\n\n----------------------------------------\n\nTITLE: Multi-Server REST Client Configuration\nDESCRIPTION: Example showing how to connect to multiple Feathers servers using different REST client instances.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport rest from '@feathersjs/rest-client'\n\nconst app = feathers()\n\nconst client1 = rest('http://feathers-api.com').fetch(window.fetch.bind(window))\nconst client2 = rest('http://other-feathers-api.com').fetch(window.fetch.bind(window))\n\n// With additional options to e.g. set authentication information\nconst client2 = rest('http://other-feathers-api.com').fetch(window.fetch.bind(window), {\n  headers: {\n    Authorization: 'Bearer <Token for other-feathers-api.com>'\n  }\n})\n\n// Configuring this will initialize default services for http://feathers-api.com\napp.configure(client1)\n\n// Connect to the `http://feathers-api.com/messages` service\nconst messages = app.service('messages')\n\n// Register /users service that points to http://other-feathers-api.com/users\napp.use('users', client2.service('users'))\n\nconst users = app.service('users')\n```\n\n----------------------------------------\n\nTITLE: Creating Tuple Schema in JavaScript\nDESCRIPTION: Creates an array type with exactly two items matching the specified types using Type.Tuple()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Tuple([Type.Number(), Type.Number()])\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = [number, number]\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'array',\n  items: [{ type: 'number' }, { type: 'number' }],\n  additionalItems: false,\n  minItems: 2,\n  maxItems: 2\n}\n```\n\n----------------------------------------\n\nTITLE: Using the create Method to Create Single and Multiple Records\nDESCRIPTION: Demonstrates how to use the create method to create a single record or multiple records. The example shows creating one message and creating an array of messages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst message = await app.service('messages').create({\n  text: 'A test message'\n})\n\nconsole.log(message)\n\nconst messages = await app.service('messages').create([\n  {\n    text: 'Hi'\n  },\n  {\n    text: 'How are you'\n  }\n])\n\nconsole.log(messages)\n```\n\n----------------------------------------\n\nTITLE: Using Query Validator in TypeScript\nDESCRIPTION: Demonstrates how to use the getValidator function to create a validator for query schemas, with type coercion enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { querySyntax, Ajv, getValidator } from '@feathersjs/schema'\nimport type { FromSchema } from '@feathersjs/schema'\n\nexport const userQuerySchema = {\n  $id: 'UserQuery',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    ...querySyntax(userSchema.properties)\n  }\n} as const\n\nexport type UserQuery = FromSchema<typeof userQuerySchema>\n\n// Since queries can be only strings we can to coerce them\nconst queryValidator = new Ajv({\n  coerceTypes: true\n})\n\nconst messageValidator = getValidator(userQuerySchema, queryValidator)\n```\n\n----------------------------------------\n\nTITLE: External Resolver Implementation\nDESCRIPTION: Shows how to implement an external resolver to hide protected properties from clients.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.schemas.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const messagesExternalResolver = resolve<Messages, HookContext>({\n  someSecretProperty: async () => undefined\n})\n```\n\n----------------------------------------\n\nTITLE: Using Number Options with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use various number options like multipleOf, maximum, exclusiveMaximum, minimum, and exclusiveMinimum with Type.Number.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_83\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Number({ multipleOf: 2 })\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Number({ maximum: 20 })\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Number({ exclusiveMaximum: 20 })\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Number({ minimum: 20 })\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Number({ exclusiveMinimum: 20 })\n```\n\n----------------------------------------\n\nTITLE: Creating an Authenticated Message with cURL in Feathers.js\nDESCRIPTION: Command to create a new message using cURL with JWT authentication. The Authorization header includes the Bearer token received from authentication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\ncurl 'http://localhost:3030/messages/' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer <accessToken>' \\\n  --data-binary '{ \"text\": \"Hello from the console\" }'\n```\n\n----------------------------------------\n\nTITLE: Validating URI Template Format in TypeScript\nDESCRIPTION: Validates a URI Template according to RFC 6570 using Type.String with 'uri-template' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'uri-template' })\n```\n\n----------------------------------------\n\nTITLE: Using Service Lookup for Route Parameters\nDESCRIPTION: Shows how to look up a service by path and extract route parameters, useful for services with dynamic routes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nconst lookup = app.lookup('messages/4321')\n\n// lookup.service -> app.service('messages')\n// lookup.data -> { __id: '4321' }\n\n// `lookup.dta` needs to be passed as `params.route`\nlookup.service.find({\n  route: lookup.data\n})\n```\n\n----------------------------------------\n\nTITLE: Validating Email Format in TypeScript\nDESCRIPTION: Validates email addresses against the format specified by RFC 1034 using Type.String with 'email' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'email' })\n```\n\n----------------------------------------\n\nTITLE: Custom Service Methods with Socket.io\nDESCRIPTION: Implementation of custom service methods with TypeScript types and Socket.io client\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport type { Params } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio-client'\nimport type { SocketService } from '@feathersjs/socketio-client'\nimport io from 'socket.io-client'\n\n// `data` and return type of custom method\ntype CustomMethodData = { name: string }\ntype CustomMethodResponse = { acknowledged: boolean }\n\ntype ServiceTypes = {\n  // The type is a Socket service extended with custom methods\n  myservice: SocketService & {\n    myCustomMethod(data: CustomMethodData, params: Params): Promise<CustomMethodResponse>\n  }\n}\n\nconst socket = io('http://api.feathersjs.com')\nconst client = feathers<ServiceTypes>()\nconst socketClient = socketio(socket)\n\n// Set up Socket.io client with the socket\nclient.configure(socketClient)\n\n// Register a socket client service with all methods listed\nclient.use('myservice', socketClient.service('myservice'), {\n  methods: ['find', 'get', 'create', 'update', 'patch', 'remove', 'myCustomMethod']\n})\n\n// Then it can be used like other service methods\nclient.service('myservice').myCustomMethod(data, params)\n```\n\n----------------------------------------\n\nTITLE: Defining HookContext Type in Feathers.js\nDESCRIPTION: Example of creating a HookContext type that combines the Application type with a generic service type in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n// The context for hook functions - can be typed with a service class\nexport type HookContext<S = any> = FeathersHookContext<Application, S>\n```\n\n----------------------------------------\n\nTITLE: Using the update Method to Replace a Record\nDESCRIPTION: Demonstrates how to use the update method to completely replace a record identified by its ID. The example shows updating a message's text property.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nconst updatedMessage = await app.service('messages').update(1, {\n  text: 'Updates message'\n})\n\nconsole.log(updatedMessage)\n```\n\n----------------------------------------\n\nTITLE: Creating Number Schema in JavaScript\nDESCRIPTION: Creates a number schema and type using Type.Number()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Number()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = number\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'number'\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io Server with Custom Ping Settings for React Native\nDESCRIPTION: JavaScript code showing how to configure the Socket.io server with custom ping interval and timeout settings to avoid timeout issues in React Native for Android.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport socketio from '@feathersjs/socketio'\n\nconst app = feathers()\n\napp.configure(\n  socketio({\n    pingInterval: 10000,\n    pingTimeout: 50000\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing Upload Service in FeathersJS CLI Generated Application\nDESCRIPTION: Implementation of the uploads service within a FeathersJS application generated using @feathersjs/cli. This code shows how to configure the feathers-blob service within the standard service structure, including hooks and filters setup.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n/* --- /src/services/uploads/uploads.service.js --- */\n\n// Initializes the `uploads` service on path `/uploads'\n\nconst createModel = require('../../models/uploads.model');\nconst hooks = require('./uploads.hooks');\nconst filters = require('./uploads.filters');\n\n\n// feathers-blob service\nconst blobService = require('feathers-blob');\n// Here we initialize a FileSystem storage,\n// but you can use feathers-blob with any other\n// storage service like AWS or Google Drive.\nconst fs = require('fs-blob-store');\n\n\n// File storage location. Folder must be created before upload.\n// Example: './uploads' will be located under feathers app top level.\nconst blobStorage = fs('./uploads');\n\nmodule.exports = function() {\n  const app = this;\n  const Model = createModel(app);\n  const paginate = app.get('paginate');\n\n  // Initialize our service with any options it requires\n  app.use('/uploads', blobService({ Model: blobStorage}));\n\n  // Get our initialized service so that we can register hooks and filters\n  const service = app.service('uploads');\n\n  service.hooks(hooks);\n\n  if (service.filter) {\n    service.filter(filters);\n  }\n};\n```\n\n----------------------------------------\n\nTITLE: Example JSON Request and Response for File Upload\nDESCRIPTION: Sample JSON for uploading a file as a dataURI to the FeathersJS uploads service, followed by the expected response format. The request contains a base64-encoded GIF file and the response includes file metadata.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    'uri': 'data:image/gif;base64,R0lGODlhEwATAPcAAP/+//7/////+////fvzYvryYvvzZ/fxg/zxWfvxW/zwXPrtW/vxXvfrXv3xYvrvYvntYvnvY/ruZPrwZPfsZPjsZfjtZvfsZvHmY/zxavftaPrvavjuafzxbfnua/jta/ftbP3yb/zzcPvwb/zzcfvxcfzxc/3zdf3zdv70efvwd/rwd/vwefftd/3yfPvxfP70f/zzfvnwffvzf/rxf/rxgPjvgPjvgfnwhPvzhvjvhv71jfz0kPrykvz0mv72nvblTPnnUPjoUPrpUvnnUfnpUvXlUfnpU/npVPnqVPfnU/3uVvvsWPfpVvnqWfrrXPLiW/nrX/vtYv7xavrta/Hlcvnuf/Pphvbsif3zk/zzlPzylfjuk/z0o/LqnvbhSPbhSfjiS/jlS/jjTPfhTfjlTubUU+/iiPPokfrvl/Dll/ftovLWPfHXPvHZP/PbQ/bcRuDJP/PaRvjgSffdSe3ddu7fge7fi+zkuO7NMvPTOt2/Nu7SO+3OO/PWQdnGbOneqeneqvDqyu3JMuvJMu7KNfHNON7GZdnEbejanObXnOW8JOa9KOvCLOnBK9+4Ku3FL9ayKuzEMcenK9e+XODOiePSkODOkOW3ItisI9yxL+a9NtGiHr+VH5h5JsSfNM2bGN6rMJt4JMOYL5h4JZl5Jph3Jpl4J5h5J5h3KJl4KZp5Ks+sUN7Gi96lLL+PKMmbMZt2Jpp3Jpt3KZl4K7qFFdyiKdufKsedRdm7feOpQN2QKMKENrpvJbFfIrNjJL1mLMBpLr9oLrFhK69bJFkpE1kpFYNeTqFEIlsoFbmlnlsmFFwpGFkoF/////7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAANAALAAAAAATABMAAAj/AKEJHCgokKJKlhThGciQYSIva7r8SHPFzqGGAwPd4bKlh5YsPKy0qFLnT0NAaHTcsIHDho0aKkaAwGCGEkM1NmSkIjWLBosVJT6cOjUrzsBKPl54KmYsACoTMmk1WwaA1CRoeM7siJEqmTIAsjp40ICK2bEApfZcsoQlxwxRzgI8W8XhgoVYA+Kq6sMK0QEYKVCUkoVqQwQJFTwFEAAAFZ9PlFy4OEEiRIYJD55EodDA1ClTbPp0okRFxBQDBRgskAKhiRMlc+Sw4SNpFCIoBBwkUMBkCBIiY8qAgcPG0KBHrBTFQbCEV5EjQYQACfNFjp5CgxpxagVtUhIjwzaJYSHzhQ4cP3ryQHLEqJbASnu+6EIW6o2b2X0ISXK0CFSugazs0YYmwQhziyuE2PLLIv3h0hArkRhiCCzAENOLL7tgAoqDGLXSSSaPMLIIJpmAUst/GA3UCiuv1PIKLtw1FBAAOw=='\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  'id': '6454364d8facd7a88e627e4c4b11b032d2f83af8f7f9329ffc2b7a5c879dc838.gif',\n  'uri': 'the-same-uri-we-uploaded',\n  'size': 1156\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing HTML Structure for Feathers Chat App\nDESCRIPTION: Sets up the base HTML structure with required dependencies including Feathers client, Socket.io, and DaisyUI CSS framework. Configures viewport and styling for the chat application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/frontend/javascript.md#2025-04-17_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>feathers-chat</title>\n    <meta name=\"description\" content=\"A Feathers chat application\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <link\n      href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2.2/dist/tailwind.min.css\"\n      rel=\"stylesheet\"\n      type=\"text/css\"\n    />\n    <link href=\"https://cdn.jsdelivr.net/npm/daisyui@2.18.1/dist/full.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <link rel=\"stylesheet\" href=\"https://dove.feathersjs.com/feathers-chat.css\" />\n  </head>\n  <body>\n    <div id=\"app\" data-theme=\"dracula\"></div>\n    <script src=\"https://unpkg.com/@feathersjs/client@^5.0.0-pre.34/dist/feathers.js\"></script>\n    <script src=\"/socket.io/socket.io.js\"></script>\n    <script type=\"module\" src=\"client.js\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic JWT Revocation with In-Memory Storage in FeathersJS\nDESCRIPTION: Basic implementation of JWT revocation using an in-memory object to store revoked tokens. Extends AuthenticationService to add token revocation capabilities through the revokeAccessToken and verifyAccessToken methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/revoke-jwt.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationService } = require('@feathersjs/authentication');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nconst revokedTokens = {};\n\nclass RevokableAuthService extends AuthenticationService {\n  async revokeAccessToken (accessToken) {\n    // First make sure the access token is valid\n    const verified = await this.verifyAccessToken(accessToken);\n\n    revokedTokens[accessToken] = true;\n\n    return verified;\n  }\n\n  async verifyAccessToken(accessToken) {\n    // First check if the token has been revoked\n    if (revokedTokens[accessToken]) {\n      throw new NotAuthenticated('Token revoked');\n    }\n\n    return super.verifyAccessToken(accessToken);\n  }\n\n  async remove (id, params) {\n    const authResult = await super.remove(id, params);\n    const { accessToken } = authResult;\n\n    if (accessToken) {\n      // If there is an access token, revoke it\n      await this.revokeAccessToken(accessToken);\n    }\n\n    return authResult;\n  }\n}\n\napp.use('/authentication', new RevokableAuthService(app));\n```\n\n----------------------------------------\n\nTITLE: Configuring Directory Paths in package.json\nDESCRIPTION: JSON configuration that specifies custom paths for source and test directories in a FeathersJS project. The 'lib' property defines the source code directory path, while 'test' specifies the test files location.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/package.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"directories\": {\n    \"lib\": \"api/src\",\n    \"test\": \"api/test\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Service Hooks Structure\nDESCRIPTION: Demonstrates the hook registration structure including the new around hooks property alongside traditional before, after, and error hooks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/whats-new.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport const serviceHooks = {\n  // `around` hook are new in Feathers Dove\n  around: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n  // before/after/error hooks also continue to work\n  before: {},\n  after: {},\n  error: {}\n}\n```\n\n----------------------------------------\n\nTITLE: Validating Hostname Format in TypeScript\nDESCRIPTION: Validates hostnames against the format specified by RFC 1034 using Type.String with 'hostname' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'hostname' })\n```\n\n----------------------------------------\n\nTITLE: Configuring Feathers.js Client for Clustered Server\nDESCRIPTION: Client-side code to connect to a clustered Feathers.js server. It configures the socket.io client to use only the websocket transport and disables protocol upgrade to ensure consistent connections to the same server worker.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/general/scaling.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport feathers from '@feathersjs/client';\nimport socketio from '@feathersjs/socketio-client';\nimport io from 'socket.io-client';\n\nconst app = feathers()\n  .configure(socketio(\n    io('http://api.feathersjs.com', {\n      transports: ['websocket'],\n      upgrade: false\n    })\n  ));\n```\n\n----------------------------------------\n\nTITLE: Configuring Query String Parsing in Koa\nDESCRIPTION: Example of configuring koa-qs to increase the array limit in query strings for Koa applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n// app.ts\nimport koaQs from 'koa-qs'\n\n// ...\nkoaQs(app, 'extended', {\n  arrayLimit: 200\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io with Custom Options in Feathers\nDESCRIPTION: Sets up Socket.io transport with custom options, such as changing the default path.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio'\n\nconst app = feathers()\n\napp.configure(\n  socketio(\n    {\n      path: '/ws/'\n    },\n    (io) => {\n      // Do something here\n      // This function is optional\n    }\n  )\n)\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Initializing Socket.io Client\nDESCRIPTION: TypeScript code showing how to initialize a Feathers client with Socket.io connection\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport io from 'socket.io-client'\nimport socketio from '@feathersjs/socketio-client'\nimport { createClient } from 'my-app'\n\nconst connection = socketio(io('https://myapp.com'))\n\nconst client = createClient(connection)\n```\n\n----------------------------------------\n\nTITLE: Shared Service Path Configuration\nDESCRIPTION: Example of using shared service paths with the FeathersJS REST client to make parameterized requests.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport rest from '@feathersjs/rest-client'\n// usersMessagesPath contains 'users/:userId/messages'\nimport { createClient, usersMessagesPath } from 'my-app'\n\nconst connection = rest('https://myapp.com').fetch(window.fetch.bind(window))\n\nconst client = createClient(connection)\n\n// Call the `https://myapp.com/users/2/messages` URL\nclient.service(usersMessagesPath).find({\n  route: {\n    userId: 2\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Invoking Configuration Validation in FeathersJS (TypeScript)\nDESCRIPTION: This snippet demonstrates how the configuration schema is validated when the FeathersJS application starts up. It occurs when either app.listen() or app.setup() is called.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/configuration.md#2025-04-17_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\napp.listen()\n```\n\nLANGUAGE: TypeScript\nCODE:\n```\napp.setup()\n```\n\n----------------------------------------\n\nTITLE: Creating Anonymous Authentication Strategy in JavaScript\nDESCRIPTION: JavaScript version of the anonymous authentication strategy implementation for FeathersJS applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/anonymous.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationBaseStrategy, AuthenticationService } = require('@feathersjs/authentication');\n\nclass AnonymousStrategy extends AuthenticationBaseStrategy {\n  async authenticate(authentication, params) {\n    return {\n      anonymous: true\n    }\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n  // ... authentication service setup\n  authentication.register('anonymous', new AnonymousStrategy());\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Validator to a Custom Method in Service Hooks\nDESCRIPTION: Hook configuration that adds the sayHelloValidator to the custom sayHello method. This ensures the request data is properly validated before the method executes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/validators.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nsayHello: [schemaHooks.validateData(sayHelloValidator)]\n```\n\n----------------------------------------\n\nTITLE: Referencing Configuration Schema in FeathersJS (TypeScript)\nDESCRIPTION: This snippet shows the file path for the configuration schema definition in a FeathersJS application. The schema is used for validating initial configuration and provides typing for app.get() and app.set() methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/configuration.md#2025-04-17_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nconfiguration.ts\n```\n\n----------------------------------------\n\nTITLE: HTTP PATCH Requests for patch Method\nDESCRIPTION: Shows the HTTP PATCH requests equivalent to the patch method examples. Includes patching a single record and patching multiple records with a query parameter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_14\n\nLANGUAGE: http\nCODE:\n```\nPATCH /messages/1\n{ \"text\": \"A patched message\" }\n```\n\nLANGUAGE: http\nCODE:\n```\nPATCH /messages?read=false\n{ \"read\": true }\n```\n\n----------------------------------------\n\nTITLE: Validating IPv6 Address Format in TypeScript\nDESCRIPTION: Validates an IPv6-formatted IP Address using Type.String with 'ipv6' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'ipv6' })\n```\n\n----------------------------------------\n\nTITLE: Compiling and Starting a Feathers.js TypeScript Application\nDESCRIPTION: Commands for compiling and starting a Feathers.js application written in TypeScript. It includes options for both production and development environments.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run compile\nnpm start\n```\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Basic Service Test in JavaScript for Feathers.js\nDESCRIPTION: JavaScript code for a basic service test in Feathers.js, checking if the service is registered.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst assert = require('assert');\nconst app = require('../../src/app');\n\ndescribe('\\'users\\' service', () => {\n  it('registered the service', () => {\n    const service = app.service('users');\n\n    assert.ok(service, 'Registered the service');\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Socket.io on a Separate Port in Feathers\nDESCRIPTION: Creates a new Socket.io server on a separate port in a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport socketio from '@feathersjs/socketio'\n\nconst app = feathers()\n\napp.configure(socketio(3031))\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Registering a User with cURL in Feathers.js\nDESCRIPTION: Command to register a new user using cURL by sending a POST request to the users endpoint with JSON data containing email and password.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncurl 'http://localhost:3030/users/' \\\n  -H 'Content-Type: application/json' \\\n  --data-binary '{ \"email\": \"hello@feathersjs.com\", \"password\": \"supersecret\" }'\n```\n\n----------------------------------------\n\nTITLE: Creating Partial Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Partial to create a schema for an object where all keys are optional.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_62\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Partial(\n  Type.Object({\n    x: Type.Number(),\n    y: Type.Number()\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Configuring Auth0 OAuth Settings in FeathersJS\nDESCRIPTION: JSON configuration for Auth0 OAuth settings including client ID, secret, subdomain and scope settings. This configuration should be added to the application's config file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/auth0.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"authentication\": {\n  \"oauth\": {\n    \"redirect\": \"/\",\n    \"auth0\": {\n      \"key\": \"<Client ID>\",\n      \"secret\": \"<Client Secret>\",\n      \"subdomain\": \"<Domain without auth0.com\",\n      \"scope\": [\"openid\", \"profile\", \"email\"]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Authentication Request with JSON\nDESCRIPTION: Example of authenticating with the FeathersJS authentication service using local strategy via POST request.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"strategy\": \"local\",\n  \"email\": \"your email\",\n  \"password\": \"your password\"\n}\n```\n\n----------------------------------------\n\nTITLE: Password Hash Resolver Implementation\nDESCRIPTION: Example of using passwordHash utility for secure password storage\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport const userDataResolver = resolve<User, HookContext>({\n  properties: {\n    password: passwordHash({ strategy: 'local' })\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Obtaining TypeScript Type from StringEnum\nDESCRIPTION: Shows how to derive a TypeScript type from a StringEnum definition using the Static utility.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_42\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Static } from '@feathersjs/typebox'\n\ntype T = Static<typeof T>\n```\n\n----------------------------------------\n\nTITLE: Extending ServiceTypes in Feathers.js\nDESCRIPTION: Example of extending the ServiceTypes interface to include a new service type using a declare module statement in a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/declarations.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n// Add this service to the service type index\ndeclare module '../../declarations' {\n  interface ServiceTypes {\n    users: UserService\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/koa Package\nDESCRIPTION: Command to install the @feathersjs/koa package using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install @feathersjs/koa --save\n```\n\n----------------------------------------\n\nTITLE: Anonymous Authentication Hook in JavaScript\nDESCRIPTION: JavaScript version of the hook that enables anonymous authentication for external service calls.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/anonymous.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n/* eslint-disable require-atomic-updates */\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return async context => {\n    const { params } = context;\n\n    if(params.provider && !params.authentication) {\n      context.params = {\n        ...params,\n        authentication: {\n          strategy: 'anonymous'\n        }\n      }\n    }\n\n    return context;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Defining BigInt Type Validator in FeathersJS\nDESCRIPTION: Creates a validator that ensures a value is of type BigInt. This validator requires Extended Ajv Configuration to function correctly.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_92\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.BigInt()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = bigint\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'null',\n  typeOf: 'BigInt'\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Debug Logger in FeathersJS\nDESCRIPTION: Demonstrates how to implement and set a custom debug logger in FeathersJS. The custom logger receives a name parameter and logs messages with console.log.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\n\nconst customDebug =\n  (name) =>\n  (...args) => {\n    console.log(name, ...args)\n  }\n\nfeathers.setDebug(customDebug)\n```\n\n----------------------------------------\n\nTITLE: HTTP GET Requests for find Method\nDESCRIPTION: Shows the HTTP GET requests equivalent to the find method examples. Includes a simple query parameter and an array query parameter using the $in operator.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_6\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?userId=1\n```\n\nLANGUAGE: http\nCODE:\n```\nGET /messages?roomId[$in]=1&roomId[$in]=3\n```\n\n----------------------------------------\n\nTITLE: Implementing API Key Strategy in JavaScript\nDESCRIPTION: A custom authentication strategy for API key validation in JavaScript. The strategy validates the token against allowed keys in the configuration and throws an error for invalid keys.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst { AuthenticationBaseStrategy, AuthenticationService } = require('@feathersjs/authentication');\nconst { NotAuthenticated } = require('@feathersjs/errors');\n\nclass ApiKeyStrategy extends AuthenticationBaseStrategy {\n  async authenticate(authentication) {\n    const { token } = authentication;\n\n    const config = this.authentication.configuration[this.name];\n\n    const match = config.allowedKeys.includes(token);\n    if (!match) throw new NotAuthenticated('Incorrect API Key');\n\n    return {\n      apiKey: true\n    }\n  }\n}\n\nmodule.exports = app => {\n  const authentication = new AuthenticationService(app);\n  // ... authentication service setup\n  authentication.register('apiKey', new ApiKeyStrategy());\n}\n```\n\n----------------------------------------\n\nTITLE: Structuring Feathers Homepage with Vue Components\nDESCRIPTION: This snippet demonstrates the structure of the Feathers homepage using imported Vue components. It includes components for the hero section, features, app creation guide, and a call-to-action section.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/index.md#2025-04-17_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<HomeHero />\n<HomeFeature1 />\n<HomeFeature2 />\n<!-- <HomeQuickStart /> -->\n<HomeCreateFirstApp />\n<HomeFeatureGrid />\n<HomeCTATextSection text=\"Create your first Feathers app, today!\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing Nested Routes in Feathers with Koa\nDESCRIPTION: Example of implementing nested routes in Feathers with Koa, demonstrating params usage including route parameters.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport { koa, errorHandler, bodyParser, rest } from '@feathersjs/koa'\n\nconst app = koa(feathers())\n\napp.use('users/:userId/messages', {\n  async get(id, params) {\n    console.log(params.query) // -> ?query\n    console.log(params.provider) // -> 'rest'\n    console.log(params.fromMiddleware) // -> 'Hello world'\n    console.log(params.route) // will be `{ userId: '1' }` for GET /users/1/messages\n\n    return {\n      id,\n      params,\n      read: false,\n      text: `Feathers is great!`,\n      createdAt: new Date().getTime()\n    }\n  }\n})\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Complete API Key Authentication Configuration Example\nDESCRIPTION: A fully working example configuration for a FeathersJS application using only API key authentication. This includes necessary settings for secret, service, and entity (set to null since only API key auth is used).\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"host\": \"localhost\",\n  \"port\": 3030,\n  \"public\": \"../public/\",\n  \"paginate\": {\n    \"default\": 10,\n    \"max\": 50\n  },\n  \"authentication\": {\n    \"secret\": \"some-secret\",\n    \"service\": \"users\",\n    \"entity\": null,\n    \"authStrategies\": [\"apiKey\"],\n    \"apiKey\": {\n      \"allowedKeys\": [ \"API_KEY_1\", \"API_KEY_2\" ],\n      \"header\": \"x-access-token\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: HTTP GET Request for get Method\nDESCRIPTION: Shows the HTTP GET request equivalent to the get method example, retrieving a single record by its ID.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_8\n\nLANGUAGE: http\nCODE:\n```\nGET /messages/1\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS Origins in Feathers.js\nDESCRIPTION: JSON configuration for specifying allowed frontend URLs for CORS policies and oAuth login redirects. This example shows configuration for local development and production URLs.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/default.json.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"origins\": [\"http://localhost:3030\", \"http://localhost:5000\", \"https://app.feathersjs.com\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth Login Link in HTML\nDESCRIPTION: HTML snippet demonstrating how to create a link for initiating OAuth authentication flow in the browser.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<a href=\"/oauth/github\">Login with GitHub</a>\n```\n\n----------------------------------------\n\nTITLE: Installing Socket.io Client Dependencies\nDESCRIPTION: NPM installation command for required Socket.io client packages\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/socketio-client socket.io-client --save\n```\n\n----------------------------------------\n\nTITLE: Starting the Feathers Server (TypeScript with MongoDB)\nDESCRIPTION: Commands to compile TypeScript and start the Feathers server for MongoDB configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nnpm run compile\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Socket Disconnect Handler\nDESCRIPTION: Example of handling socket disconnect events\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napp.io.on('disconnect', (reason: any) => {\n  // Show offline message\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Multipart Upload Server with Multer in FeathersJS\nDESCRIPTION: Server-side configuration for handling multipart/form-data uploads using multer middleware. This snippet shows how to parse the file named 'uri' and transfer it to the Feathers service context.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n/* --- server.js --- */\nconst multer = require('multer');\nconst multipartMiddleware = multer();\n\n// Upload Service with multipart support\napp.use('/uploads',\n\n    // multer parses the file named 'uri'.\n    // Without extra params the data is\n    // temporarely kept in memory\n    multipartMiddleware.single('uri'),\n\n    // another middleware, this time to\n    // transfer the received file to feathers\n    function(req,res,next){\n        req.feathers.file = req.file;\n        next();\n    },\n    blobService({Model: blobStorage})\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Allow-ApiKey Hook in JavaScript\nDESCRIPTION: A hook that extracts the API key from request headers and prepares authentication parameters. This JavaScript hook enables API key authentication for external requests by setting up the proper authentication context.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/apiKey.md#2025-04-17_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n/* eslint-disable require-atomic-updates */\nmodule.exports = function (options = {}) { // eslint-disable-line no-unused-vars\n  return async context => {\n    const { params, app } = context;\n\n    const headerField = app.get('authentication').apiKey.header;\n    const token = params.headers[headerField];\n\n    if (token && params.provider && !params.authentication) {\n      context.params = {\n        ...params,\n        authentication: {\n          strategy: 'apiKey',\n          token\n        }\n      };\n    }\n\n    return context;\n  };\n};\n```\n\n----------------------------------------\n\nTITLE: Defining Constructor Type with TypeBox in TypeScript\nDESCRIPTION: This snippet demonstrates how to define a Constructor type using TypeBox. It specifies a constructor with string and number parameters that returns a boolean.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_85\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Constructor([Type.String(), Type.Number()], Type.Boolean())\n```\n\n----------------------------------------\n\nTITLE: Using Virtual Property Resolvers in TypeScript\nDESCRIPTION: This snippet demonstrates the use of virtual property resolvers, which always return their own value without using the input value. It's a rewrite of the previous property resolver example.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/resolvers.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { resolve, virtual } from '@feathersjs/schema'\n\nconst userResolver = resolve<User, MyContext>({\n  isDrinkingAge: virtual(async (user, context) => {\n    const drinkingAge = await context.getDrinkingAge(user.country)\n\n    return user.age >= drinkingAge\n  }),\n  fullName: virtual((user, context) => {\n    return `${user.firstName} ${user.lastName}`\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: Successful JWT Strategy Authentication Example in JavaScript\nDESCRIPTION: This snippet shows the structure of params after a successful JWT strategy authentication. It demonstrates how the authentication information is merged into the params object.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/hook.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nparams.authentication.payload // The decoded payload\nparams.authentication.strategy === 'jwt' // The strategy name\nparams.user // or params[entity] if entity is not `null`\n```\n\n----------------------------------------\n\nTITLE: Starting the Feathers Server (TypeScript with SQL)\nDESCRIPTION: Commands to compile TypeScript, run database migrations, and start the Feathers server for SQL database configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnpm run compile\nnpm run migrate\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Updated Parameter Type Declarations\nDESCRIPTION: New TypeScript interface definitions for service parameters and queries\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Params } from '@feathersjs/feathers'\n\nexport type MyQuery = {\n  name: string\n}\n\nexport interface MyServiceParams extends Params<MyQuery> {\n  user: User\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TypeBox Enum in JavaScript\nDESCRIPTION: Demonstrates how to create an Enum type using TypeBox's Type.Enum utility.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_44\n\nLANGUAGE: javascript\nCODE:\n```\nenum Foo {\n  A,\n  B,\n}\nconst T = Type.Enum(Foo)\n```\n\n----------------------------------------\n\nTITLE: Configuring Google OAuth Settings in Feathers.js\nDESCRIPTION: This snippet shows how to configure Google OAuth settings in the Feathers.js config file. It includes the necessary properties such as key, secret, scope, and nonce.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/google.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"google\": {\n        \"key\": \"<App ID>\",\n        \"secret\": \"<App Secret>\",\n        \"scope\": [\"openid\", \"email\"],\n        \"nonce\": true\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing MongoDB Adapter in FeathersJS\nDESCRIPTION: Command to install the MongoDB adapter for FeathersJS via npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/mongodb.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm install --save @feathersjs/mongodb\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Partial\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Partial definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_64\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    x: { type: 'number' },\n    y: { type: 'number' }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Running Knex Migrations in Feathers.js\nDESCRIPTION: Command to execute Knex migrations for the database connection specified in the configuration environment.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/knexfile.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run migrate\n```\n\n----------------------------------------\n\nTITLE: Using Query Property Helper in TypeScript\nDESCRIPTION: Demonstrates the use of the queryProperty helper to create a schema that allows default query operators for a single property.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/schema.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { queryProperty } from '@feathersjs/schema'\n\nexport const userQuerySchema = {\n  $id: 'UserQuery',\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    name: queryProperty({ type: 'string' })\n  }\n} as const\n```\n\n----------------------------------------\n\nTITLE: Registering a User with REST API in Feathers.js\nDESCRIPTION: Example of the JSON payload for registering a new user by sending a POST request to the users endpoint. This creates a new user with email and password credentials.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_0\n\nLANGUAGE: js\nCODE:\n```\n// POST /users\n{\n  \"email\": \"hello@feathersjs.com\",\n  \"password\": \"supersecret\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Case Insensitive Route Lookups\nDESCRIPTION: Shows how to enable case insensitive service lookups in a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\napp.routes.caseSensitive = false\n```\n\n----------------------------------------\n\nTITLE: Defining Function Type with TypeBox in TypeScript\nDESCRIPTION: This snippet shows how to define a Function type using TypeBox. It specifies a function with string and number parameters that returns a boolean.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_86\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Function([Type.String(), Type.Number()], Type.Boolean())\n```\n\n----------------------------------------\n\nTITLE: Authentication with cURL\nDESCRIPTION: Example of authentication request using cURL, demonstrating how to send credentials and receive an access token.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Content-Type: application/json\" -X POST -d '{\"strategy\":\"local\",\"email\":\"your email\",\"password\":\"your password\"}' http://localhost:3030/authentication\n```\n\n----------------------------------------\n\nTITLE: Route Parameters in Express Service\nDESCRIPTION: Demonstrates accessing route parameters in a FeathersJS service using nested routes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport express, { rest } from '@feathersjs/express'\n\nconst app = express(feathers())\n\napp.configure(rest())\napp.use(function (req, res, next) {\n  req.feathers.fromMiddleware = 'Hello world'\n  next()\n})\n\napp.use('users/:userId/messages', {\n  async get(id, params) {\n    console.log(params.query) // -> ?query\n    console.log(params.provider) // -> 'rest'\n    console.log(params.fromMiddleware) // -> 'Hello world'\n    console.log(params.route.userId) // will be `1` for GET /users/1/messages\n\n    return {\n      id,\n      params,\n      read: false,\n      text: `Feathers is great!`,\n      createdAt: new Date().getTime()\n    }\n  }\n})\n\napp.listen(3030)\n```\n\n----------------------------------------\n\nTITLE: Authentication Configuration\nDESCRIPTION: JSON configuration for local authentication strategy settings\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"local\": {\n      \"usernameField\": \"email\",\n      \"passwordField\": \"password\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuration Environment Example\nDESCRIPTION: Example configuration for environment variables using node-config\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"someSetting\": \"${SOME_CONFIG_VAR}\",\n  \"port\": \"${PORT}\",\n  \"somePath\": \"./config/someFile.json\"\n}\n```\n\n----------------------------------------\n\nTITLE: Direct Socket.io Connection in Browser\nDESCRIPTION: HTML script setup for direct Socket.io connection without Feathers client\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<!-- Connecting to the same URL -->\n<script src=\"/socket.io/socket.io.js\"></script>\n<script>\n  var socket = io()\n</script>\n\n<!-- Connecting to a different server -->\n<script src=\"http://localhost:3030/socket.io/socket.io.js\"></script>\n<script>\n  var socket = io('http://localhost:3030/')\n</script>\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Express Package\nDESCRIPTION: Command to install the @feathersjs/client package via npm package manager. This package is required for Express framework bindings and REST provider functionality in FeathersJS applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/express/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/client --save\n```\n\n----------------------------------------\n\nTITLE: TypeScript Service Type Declaration\nDESCRIPTION: Extends the ServiceTypes interface to include the testing service type using the shared path as a key.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '../../../declarations' {\n  interface ServiceTypes {\n    [testingPath]: TestingService\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Test Scripts for TypeScript Feathers.js Project\nDESCRIPTION: JSON configuration for test scripts in package.json for a TypeScript-based Feathers.js project.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n  \"scripts\": {\n    \"test\": \"npm run compile && npm run mocha\",\n    \"dev\": \"ts-node-dev --no-notify src/\",\n    \"start\": \"npm run compile && node lib/\",\n    \"clean\": \"shx rm -rf test/data/\",\n    \"mocha\": \"npm run clean && NODE_ENV=test ts-mocha \\\"test/**/*.ts\\\" --recursive --exit\",\n    \"compile\": \"shx rm -rf lib/ && tsc\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Adding a New Database Connection\nDESCRIPTION: Command to set up a new database connection. This is typically done during app creation but can be used to set up additional databases.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate connection\n```\n\n----------------------------------------\n\nTITLE: Adding Email Scope to Facebook OAuth Configuration\nDESCRIPTION: Configuration to request email permission during Facebook OAuth authentication by adding the appropriate scope to the default.json file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/facebook.md#2025-04-17_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"facebook\": {\n        \"key\": \"<App ID>\",\n        \"secret\": \"<App Secret>\",\n        \"scope\": [\"email, public_profile\"]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing MongoDB Client in FeathersJS (TypeScript)\nDESCRIPTION: This snippet shows how to access the MongoDB client in a FeathersJS application. The client is retrieved asynchronously from the app object using the 'mongodbClient' key.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/databases.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst db = await app.get('mongodbClient')\n```\n\n----------------------------------------\n\nTITLE: Socket.io Authentication\nDESCRIPTION: Example of authenticating Socket.io connection using credentials\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/socketio.md#2025-04-17_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport io from 'socket.io-client'\n\nconst socket = io('http://localhost:3030')\n\nsocket.emit(\n  'create',\n  'authentication',\n  {\n    strategy: 'local',\n    email: 'hello@feathersjs.com',\n    password: 'supersecret'\n  },\n  function (error, authResult) {\n    console.log(authResult)\n    // authResult will be {\"accessToken\": \"your token\", \"user\": user }\n    // You can now send authenticated messages to the server\n  }\n)\n```\n\n----------------------------------------\n\nTITLE: Configuring Allowed Origins for OAuth Redirects\nDESCRIPTION: JSON configuration snippet for setting allowed origins for OAuth redirects in a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"origins\": [\n    \"http://localhost:500\", \"https://myapp.feathersjs.com\"\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Authentication\nDESCRIPTION: Command to set up Feathers authentication and a users service, which is required for other services needing authentication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate authentication\n```\n\n----------------------------------------\n\nTITLE: Custom Headers for REST Service Calls\nDESCRIPTION: Example of setting custom headers for REST service calls using params.headers.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\napp.service('messages').create(\n  {\n    text: 'A message from a REST client'\n  },\n  {\n    headers: { 'X-Requested-With': 'FeathersJS' }\n  }\n)\n```\n\n----------------------------------------\n\nTITLE: Initializing JavaScript Project for Feathers\nDESCRIPTION: Command to initialize a basic Node.js project with npm for a JavaScript-based Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nnpm init --yes\n```\n\n----------------------------------------\n\nTITLE: Custom Method Request with cURL\nDESCRIPTION: Example of calling a custom service method using the X-Service-Method header via cURL.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Content-Type: application/json\" -H \"X-Service-Method: myCustomMethod\" -X POST -d '{\"message\": \"Hello world\"}' http://localhost:3030/myservice\n```\n\n----------------------------------------\n\nTITLE: Exporting Shared Variables in FeathersJS Service\nDESCRIPTION: Default exports in the <service>.shared file include the service path and available methods. These variables are used across the client and server applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/service.shared.md#2025-04-17_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n<name>Path\n<name>Methods\n```\n\n----------------------------------------\n\nTITLE: Creating Object Schema in JavaScript\nDESCRIPTION: Creates an object schema where all properties are required by default using Type.Object()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Object({\n  x: Type.Number(),\n  y: Type.Number()\n})\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = {\n  x: number,\n  y: number\n}\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    x: {\n      type: 'number'\n    },\n    y: {\n      type: 'number'\n    }\n  },\n  required: ['x', 'y']\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Feathers Development Environment\nDESCRIPTION: Instructions for cloning and setting up the Feathers repository for development. These commands clone the repository, navigate to the feathers directory, and install all dependencies.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncd feathers\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Creating a Dockerfile for Feathers application\nDESCRIPTION: Dockerfile configuration to containerize a Feathers application. It uses the Node.js LTS Alpine image, sets up the working directory, copies package files, installs dependencies, copies the app files, exposes port 3030, and specifies the start command.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/deploy/docker.md#2025-04-17_snippet_1\n\nLANGUAGE: dockerfile\nCODE:\n```\nFROM node:lts-alpine\n\nWORKDIR /usr/src/app\n\nCOPY package*.json ./\n\nRUN npm install\n\nCOPY . .\n\nEXPOSE 3030\n\nCMD [\"npm\", \"run\", \"start\"]\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Readonly\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Readonly definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_78\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = {\n  readonly name: string\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Literal Schema in JavaScript\nDESCRIPTION: Creates a schema and type that must match the provided value using Type.Literal()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Literal(42)\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = 42\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  const: 42,\n  type: 'number'\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Pagination Settings in Feathers.js\nDESCRIPTION: JSON configuration for setting default and maximum pagination limits for database services. This controls how many items are returned per page when querying data.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/default.json.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"paginate\": {\n    \"default\": 10,\n    \"max\": 100\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating RegEx Schema in JavaScript\nDESCRIPTION: Creates a string schema that validates against a regular expression object using Type.RegEx()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.RegEx(/foo/)\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = string\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'string',\n  pattern: 'foo'\n}\n```\n\n----------------------------------------\n\nTITLE: Generating a Service\nDESCRIPTION: Command to generate a new service connected to a database or a custom service.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate service\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Omit\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Omit definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_72\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = Omit<\n  {\n    x: number,\n    y: number\n  },\n  'x'\n>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Declaration Updates for Feathers v5\nDESCRIPTION: Updated TypeScript declarations for application configuration and hook context types\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Application as ExpressFeathers } from '@feathersjs/express'\nimport { HookContext as FeathersHookContext } from '@feathersjs/feathers'\n\nexport interface Configuration {\n  port: number\n}\nexport interface ServiceTypes {}\nexport type Application = ExpressFeathers<ServiceTypes, Configuration>\nexport type HookContext = FeathersHookContext<Application>\n```\n\n----------------------------------------\n\nTITLE: Implementing Service Mixins in FeathersJS\nDESCRIPTION: Demonstrates the new approach to extending service functionality using Object.assign instead of the removed service.mixin() method.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\napp.mixins.push((service, path) => {\n  const { create } = service\n\n  Object.assign(service, {\n    create(data, params) {\n      // do something here, then invoke the old method\n      // through normal JavaScript functionality\n      return create.call(this, data, params)\n    }\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: HTML Template for Firebase Authentication UI\nDESCRIPTION: HTML page that integrates Firebase UI for authentication. This template includes necessary Firebase SDK scripts, Firebase UI components, and containers for guest and authenticated user interfaces.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/firebase.md#2025-04-17_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Firebase Authentication Example</title>\n  <!-- The core Firebase JS SDK is always required and must be listed first -->\n  <script src=\"https://www.gstatic.com/firebasejs/7.21.0/firebase-app.js\"></script>\n\n  <!-- TODO: Add SDKs for Firebase products that you want to use\n       https://firebase.google.com/docs/web/setup#available-libraries -->\n  <script src=\"https://www.gstatic.com/firebasejs/7.21.0/firebase-auth.js\"></script>\n\n  <!-- Firebase UI -->\n  <script src=\"https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js\"></script>\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css\" />\n\n</head>\n<body>\n  <!-- The surrounding HTML is left untouched by FirebaseUI.\n      Your app may use that space for branding, controls and other customizations.-->\n  <h1>Welcome to My Awesome App</h1>\n\n  <!-- Optionally show a preparing state, until the guest or member app is ready. Usually after authentication is determined -->\n  <div id=\"app-preparing\"></div>\n\n  <!-- App for guests to auth, etc. -->\n  <div id=\"app-guest\" style=\"display: none;\">\n    <div id=\"firebaseui-auth-container\"></div>\n    <div id=\"loader\">Loading...</div>\n  </div>\n\n  <!-- App for members only -->\n  <div id=\"app-member\" style=\"display: none;\"></div>\n\n  <!-- Custom -->\n  <script src=\"//unpkg.com/@feathersjs/client@^4.3.0/dist/feathers.js\"></script>\n  <script src=\"/socket.io/socket.io.js\"></script>\n  <script src=\"/client.js\"></script>\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: GitHub OAuth Configuration in Feathers.js\nDESCRIPTION: JSON configuration for GitHub OAuth authentication in Feathers.js. This needs to be added to the config/default.json file with the client ID and secret from a registered GitHub OAuth application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/login.md#2025-04-17_snippet_5\n\nLANGUAGE: js\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"github\": {\n        \"key\": \"<Client ID>\",\n        \"secret\": \"<Client Secret>\"\n      }\n    },\n    // Other authentication configuration is here\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Project Directory for Feathers Application\nDESCRIPTION: Shell commands to create a new directory for the Feathers application and navigate into it.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nmkdir feathers-basics\ncd feathers-basics\n```\n\n----------------------------------------\n\nTITLE: Running Prettier Code Formatting in FeathersJS\nDESCRIPTION: Command to run Prettier formatting on all existing source files in a FeathersJS application. This will apply the code style rules defined in the .prettierrc configuration file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/prettierrc.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run prettier\n```\n\n----------------------------------------\n\nTITLE: Setting Extra Headers in Socket.io Client Connection\nDESCRIPTION: Demonstrates how to set extra headers when initializing a Socket.io client connection.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nconst socket = io('http://localhost:9777', {\n  extraHeaders: {\n    MyHeader: 'somevalue'\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Optional\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Optional definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_75\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = {\n  name?: string\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Record Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Record to create the JSON Schema equivalent of TypeScript's Record utility type.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_59\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Record(Type.String(), Type.Number())\n```\n\n----------------------------------------\n\nTITLE: Validating URI Format in TypeScript\nDESCRIPTION: Validates a full URI using Type.String with 'uri' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'uri' })\n```\n\n----------------------------------------\n\nTITLE: Installing KnexJS Adapter\nDESCRIPTION: Command to install the @feathersjs/knex package as a project dependency\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm install --save @feathersjs/knex\n```\n\n----------------------------------------\n\nTITLE: Creating KeyOf Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.KeyOf to create a schema for a string that can be any of the keys of a provided Type.Object.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_47\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.KeyOf(\n  Type.Object({\n    x: Type.Number(),\n    y: Type.Number()\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Rendering Packages Component with Suspense (Vue)\nDESCRIPTION: Renders the Packages component within a Vue Suspense wrapper and ClientOnly component to handle asynchronous loading. The component displays a curated list of Feathers packages that can be sorted by various criteria.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/ecosystem/index.md#2025-04-17_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<ClientOnly>\n  <Suspense>\n    <Packages class=\"mt-4\" />\n  </Suspense>\n</ClientOnly>\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/generators via npm\nDESCRIPTION: This command installs the @feathersjs/generators package as a development dependency in a Node.js project. It's typically used in Feathers applications for code generation tasks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/generators/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/generators --save-dev\n```\n\n----------------------------------------\n\nTITLE: JWT Authentication Request Format\nDESCRIPTION: JSON structure for making JWT authentication requests to the server.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/jwt.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"strategy\": \"jwt\",\n  \"accessToken\": \"<your JWT>\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Promise Type with TypeBox in TypeScript\nDESCRIPTION: This snippet illustrates how to define a Promise type using TypeBox. It specifies a Promise that resolves to a string.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_87\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Promise(Type.String())\n```\n\n----------------------------------------\n\nTITLE: Creating New Knex Migration in Feathers.js\nDESCRIPTION: Command to create a new Knex migration file. Replace <name> with the desired name for the migration. This will generate a new file in the migrations/ folder.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/knexfile.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm run migrate:make -- <name>\n```\n\n----------------------------------------\n\nTITLE: Generating a Hook\nDESCRIPTION: Command to generate a new hook in the 'hooks' folder, which can then be registered in services.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate hook\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers API Server Dependencies for JavaScript\nDESCRIPTION: Command to install the necessary Feathers packages for creating a REST and WebSocket API server with JavaScript, including static file serving.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_9\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @feathersjs/socketio @feathersjs/koa koa-static --save\n```\n\n----------------------------------------\n\nTITLE: Validating Date Format in TypeScript\nDESCRIPTION: Validates a string against the YYYY-MM-DD date format using Type.String with 'date' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'date' })\n```\n\n----------------------------------------\n\nTITLE: Using Readonly Modifier with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to mark a key in Type.Object as readonly using Type.Readonly.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_77\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Object({\n  name: Type.Readonly(Type.String())\n})\n```\n\n----------------------------------------\n\nTITLE: Updated Express Import Syntax\nDESCRIPTION: New import syntax for Express middleware functions in TypeScript\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport express, { json, urlencoded, notFound, errorHandler } from '@feathersjs/express'\n\napp.use(json())\napp.use(urlencoded())\napp.use(notFound())\napp.use(errorHandler())\n```\n\n----------------------------------------\n\nTITLE: Building Docker image for Feathers application\nDESCRIPTION: Command to build a Docker image for the Feathers application, tagging it as 'my-feathers-image'.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/deploy/docker.md#2025-04-17_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ndocker build -t my-feathers-image .\n```\n\n----------------------------------------\n\nTITLE: Creating Required Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Required to create a schema for an object where all keys are required.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_65\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Required(\n  Type.Object({\n    x: Type.Optional(Type.Number()),\n    y: Type.Optional(Type.Number())\n  })\n)\n```\n\n----------------------------------------\n\nTITLE: Creating Omit Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Omit to form a new object containing all keys except those provided in the second argument.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_71\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Omit(\n  Type.Object({\n    x: Type.Number(),\n    y: Type.Number()\n  }),\n  ['x']\n)\n```\n\n----------------------------------------\n\nTITLE: Generating a new Feathers application\nDESCRIPTION: Commands to create a new directory for the Feathers application and generate a new app using the Feathers CLI.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/deploy/docker.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nmkdir feathers-app\ncd feathers-app/\nfeathers generate app\n```\n\n----------------------------------------\n\nTITLE: Running the TypeScript Feathers Application\nDESCRIPTION: Command to execute the TypeScript Feathers application using ts-node.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nnpx ts-node app.ts\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Omit\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Omit definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_73\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    y: { type: 'number' }\n  },\n  required: ['y']\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Additional String Formats in TypeScript\nDESCRIPTION: Example of configuring additional string formats in the FormatsPluginOptions array, including iso-time, iso-date-time, duration, byte, int32, int64, float, double, password, and binary.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_21\n\nLANGUAGE: typescript\nCODE:\n```\nconst formats: FormatsPluginOptions = [\n  'date-time',\n  'time',\n  'date',\n  'email',\n  'hostname',\n  'ipv4',\n  'ipv6',\n  'uri',\n  'uri-reference',\n  'uuid',\n  'uri-template',\n  'json-pointer',\n  'relative-json-pointer',\n  'regex',\n  'iso-time',\n  'iso-date-time',\n  'duration',\n  'byte',\n  'int32',\n  'int64',\n  'float',\n  'double',\n  'password',\n  'binary',\n]\n```\n\n----------------------------------------\n\nTITLE: Running Feathers application Docker container\nDESCRIPTION: Command to start a Docker container from the previously built image. It runs in detached mode, maps port 3030, names the container 'my-feathers-container', and uses the 'my-feathers-image' image.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/deploy/docker.md#2025-04-17_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\ndocker run -d -p 3030:3030 --name my-feathers-container my-feathers-image\n```\n\n----------------------------------------\n\nTITLE: Installing and Generating Feathers Application using NPM\nDESCRIPTION: Command to create a new Feathers.js application using the NPM create command. This will scaffold a new application in a directory named 'my-app' with all necessary boilerplate code and dependencies.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/create-feathers/README.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm create feathers my-app\n```\n\n----------------------------------------\n\nTITLE: Validating IPv4 Address Format in TypeScript\nDESCRIPTION: Validates an IPv4-formatted IP Address using Type.String with 'ipv4' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'ipv4' })\n```\n\n----------------------------------------\n\nTITLE: Creating Array Schema in JavaScript\nDESCRIPTION: Creates an array of the provided type using Type.Array()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Array(Type.Number())\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = number[]\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'array',\n  items: {\n    type: 'number'\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server with Auto-Reload\nDESCRIPTION: Command to run the Feathers server in development mode with automatic reloading on code changes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Installing Authentication Client Module\nDESCRIPTION: NPM installation command for the FeathersJS authentication client module\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/client.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-client --save\n```\n\n----------------------------------------\n\nTITLE: Defining Symbol Type Validator in FeathersJS\nDESCRIPTION: Creates a validator that ensures a value is of type Symbol. This validator requires Extended Ajv Configuration to work properly.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_91\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Symbol()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = symbol\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'null',\n  typeOf: 'Symbol'\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Union Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Union to create a type which can be one of the types in the provided array.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_50\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Union([Type.String(), Type.Number()])\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Required\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Required definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_66\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = Required<{\n  x?: number,\n  y?: number\n}>\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/configuration package\nDESCRIPTION: This command installs the @feathersjs/configuration package using npm. It saves the package as a dependency in the project's package.json file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/configuration/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/configuration --save\n```\n\n----------------------------------------\n\nTITLE: Configuring Query String Parser\nDESCRIPTION: Shows how to configure the Express query parser to handle larger arrays in query strings.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nvar qs = require('qs')\n\napp.set('query parser', function (str) {\n  return qs.parse(str, {\n    arrayLimit: 100\n  })\n})\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Enum\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Enum definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_45\n\nLANGUAGE: javascript\nCODE:\n```\nenum Foo {\n  A,\n  B,\n}\ntype T = Foo\n```\n\n----------------------------------------\n\nTITLE: Running Tests\nDESCRIPTION: Command to execute the test suite that comes with the generated Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\nnpm test\n```\n\n----------------------------------------\n\nTITLE: Service Type Declaration Updates\nDESCRIPTION: Updated TypeScript service type declarations without ServiceAddons\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ndeclare module '../../declarations' {\n  interface ServiceTypes {\n    messages: Messages\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Test Scripts for JavaScript Feathers.js Project\nDESCRIPTION: JSON configuration for test scripts in package.json for a JavaScript-based Feathers.js project.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n  \"scripts\": {\n    \"test\": \"npm run eslint && npm run mocha\",\n    \"eslint\": \"eslint src/. test/. --config .eslintrc.json\",\n    \"start\": \"node src/\",\n    \"clean\": \"shx rm -rf test/data/\",\n    \"mocha\": \"npm run clean && NODE_ENV=test mocha test/ --recursive --exit\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Frontend Implementation with Dropzone.js and Socket.io\nDESCRIPTION: A complete HTML frontend example that uses Dropzone.js for the file upload UI and socket.io for real-time updates. This approach allows showing upload progress while maintaining real-time functionality.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/express/file-uploading.md#2025-04-17_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n    <head>\n        <title>Feathersjs File Upload</title>\n\n        <link rel='stylesheet' href='assets/dropzone.css'>\n        <script src='assets/dropzone.js'></script>\n\n        <script type='text/javascript' src='socket.io/socket.io.js'></script>\n        <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/core-js/2.1.4/core.min.js'></script>\n        <script type='text/javascript' src='//unpkg.com/feathers-client@^2.0.0/dist/feathers.js'></script>\n        <script type='text/javascript'>\n            // feathers client initialization\n            var socket = io('http://localhost:3030');\n            const app = feathers()\n            .configure(feathers.hooks())\n            .configure(feathers.socketio(socket));\n            const uploadService = app.service('uploads');\n\n            // Now with Real-Time Support!\n            uploadService.on('created', function(file){\n                alert('Received file created event!', file);\n            });\n\n\n            // Let's use DropZone!\n            Dropzone.options.myAwesomeDropzone = {\n                paramName: 'uri',\n                uploadMultiple: false,\n                init: function(){\n                    this.on('uploadprogress', function(file, progress){\n                        console.log('progresss', progress);\n                    });\n                }\n            };\n        </script>\n    </head>\n    <body>\n        <h1>Let's upload some files!</h1>\n        <form action='/uploads'\n          class='dropzone'\n          id='my-awesome-dropzone'></form>\n    </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Running Feathers Generate Command\nDESCRIPTION: Command to run the Feathers generate command, which displays available generator options.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate\n```\n\n----------------------------------------\n\nTITLE: Installing Authentication Package\nDESCRIPTION: NPM installation command for the FeathersJS local authentication package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-local --save\n```\n\n----------------------------------------\n\nTITLE: HTTP PUT Request for update Method\nDESCRIPTION: Shows the HTTP PUT request equivalent to the update method example, completely replacing a record identified by its ID.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_12\n\nLANGUAGE: http\nCODE:\n```\nPUT /messages/1\n{ \"text\": \"Updated message\" }\n```\n\n----------------------------------------\n\nTITLE: Creating Never Type with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to use Type.Never to create a type that will never validate if the attribute is present.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_56\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Never()\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Adapter Commons Package\nDESCRIPTION: Command to install the @feathersjs/adapter-commons package via npm as a project dependency.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/adapter-commons/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/adapter-commons --save\n```\n\n----------------------------------------\n\nTITLE: Validating 32-bit Integer Format in TypeScript\nDESCRIPTION: Validates signed 32-bit integers according to the OpenAPI 3.0.0 specification using Type.String with 'int32' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'int32' })\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Record\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Record definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_61\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  patternProperties: {\n    '^.*$': {\n      type: 'number'\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Validating ISO Time Format in TypeScript\nDESCRIPTION: Validates against UTC-based time format using Type.String with 'iso-time' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'iso-time' })\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Local Authentication Package\nDESCRIPTION: Command to install the @feathersjs/authentication-local package via npm package manager.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-local/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-local --save\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers CLI for a New Project\nDESCRIPTION: Command to create a new Feathers application using npm. This installs the Feathers CLI locally in the project.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/index.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm create feathers@latest my-app\n```\n\n----------------------------------------\n\nTITLE: TypeScript Package Scripts Configuration\nDESCRIPTION: NPM scripts configuration for TypeScript projects including test, coverage, and compilation commands.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n  \"scripts\": {\n    \"test\": \"npm run compile && npm run coverage\",\n    \"dev\": \"ts-node-dev --no-notify src/\",\n    \"start\": \"npm run compile && node lib/\",\n    \"clean\": \"shx rm -rf test/data/\",\n    \"coverage\": \"nyc npm run mocha\",\n    \"mocha\": \"npm run clean && NODE_ENV=test ts-mocha \\\"test/**/*.ts\\\" --recursive --exit\",\n    \"compile\": \"shx rm -rf lib/ && tsc\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Authentication Package\nDESCRIPTION: NPM installation command for the FeathersJS authentication module.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/jwt.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication --save\n```\n\n----------------------------------------\n\nTITLE: Defining Undefined Type Validator in FeathersJS\nDESCRIPTION: Creates a validator that ensures a value is undefined. This validator requires Extended Ajv Configuration to function correctly.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_90\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Undefined()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = undefined\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  specialized: 'Undefined'\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Union\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Union definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_52\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  anyOf: [{ type: 'string' }, { type: 'number' }]\n}\n```\n\n----------------------------------------\n\nTITLE: Authentication Request Format\nDESCRIPTION: Example of the JSON payload structure for local authentication requests\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/local.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"strategy\": \"local\",\n  \"email\": \"hello@feathersjs.com\",\n  \"password\": \"supersecret\"\n}\n```\n\n----------------------------------------\n\nTITLE: Validating 64-bit Integer Format in TypeScript\nDESCRIPTION: Validates signed 64-bit integers according to the OpenAPI 3.0.0 specification using Type.String with 'int64' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_27\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'int64' })\n```\n\n----------------------------------------\n\nTITLE: Query Parameter Example in JSON\nDESCRIPTION: Shows the structure of parsed query parameters from a GET request using the qs module.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"read\": \"true\",\n  \"$sort\": { \"createdAt\": \"-1\" }\n}\n```\n\n----------------------------------------\n\nTITLE: Validating Byte Format in TypeScript\nDESCRIPTION: Validates base64-encoded data according to the OpenAPI 3.0.0 specification using Type.String with 'byte' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'byte' })\n```\n\n----------------------------------------\n\nTITLE: HTTP POST Request for create Method\nDESCRIPTION: Shows the HTTP POST request equivalent to the create method example, creating a single record.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/common.md#2025-04-17_snippet_10\n\nLANGUAGE: http\nCODE:\n```\nPOST /messages\n{\n  \"text\": \"A test message\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running the JavaScript Feathers Application\nDESCRIPTION: Command to execute the JavaScript Feathers application using Node.js.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nnode app.mjs\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/authentication-client package using npm\nDESCRIPTION: This command installs the @feathersjs/authentication-client package and saves it as a dependency in the project's package.json file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-client/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-client --save\n```\n\n----------------------------------------\n\nTITLE: Validating Regular Expression Format in TypeScript\nDESCRIPTION: Tests whether a string is a valid regular expression by passing it to RegExp constructor using Type.String with 'regex' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'regex' })\n```\n\n----------------------------------------\n\nTITLE: Displaying Feathers CLI Help\nDESCRIPTION: Command to display the help menu for the Feathers CLI using npx.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/cli/README.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ npx feathers help\n```\n\n----------------------------------------\n\nTITLE: Installing Socket.io for Feathers\nDESCRIPTION: Command to install the @feathersjs/socketio package using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/socketio.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/socketio --save\n```\n\n----------------------------------------\n\nTITLE: Configuring Discord OAuth Provider in FeathersJS\nDESCRIPTION: This JSON snippet shows how to configure the Discord OAuth provider in the FeathersJS authentication settings. It includes the app ID, secret, and required scopes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/_discord.md#2025-04-17_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"discord\": {\n        \"key\": \"<App ID>\",\n        \"secret\": \"<App Secret>\",\n        \"scope\": [\"identify email\"]\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Vue Component in Script Setup Block (Vue/TypeScript)\nDESCRIPTION: Sets up a Vue component with TypeScript using the script setup syntax. Imports the Packages component that will be used to display the curated list of Feathers packages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/ecosystem/index.md#2025-04-17_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport Packages from './Packages.vue'\n</script>\n```\n\n----------------------------------------\n\nTITLE: Using ReadonlyOptional Modifier with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to mark a key in Type.Object as both readonly and optional using Type.ReadonlyOptional.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_80\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Object({\n  name: Type.ReadonlyOptional(Type.String())\n})\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox KeyOf\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox KeyOf definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_49\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  anyOf: [\n    { type: 'string', const: 'x' },\n    { type: 'string', const: 'y' }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Validating Password Format in TypeScript\nDESCRIPTION: Validates passwords according to the OpenAPI 3.0.0 specification using Type.String with 'password' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'password' })\n```\n\n----------------------------------------\n\nTITLE: Generating FeathersJS Hook via CLI\nDESCRIPTION: Command to generate a new hook using the FeathersJS CLI\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/hook.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx feathers generate hook\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/authentication-oauth Package\nDESCRIPTION: Command to install the @feathersjs/authentication-oauth package using npm. This package is required for implementing OAuth authentication in Feathers applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-oauth/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-oauth --save\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Record\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Record definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_60\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = Record<string, number>\n```\n\n----------------------------------------\n\nTITLE: Validating Duration Format in TypeScript\nDESCRIPTION: Validates a duration string representing a period of time as specified in RFC3339 appendix-A using Type.String with 'duration' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'duration' })\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Intersect\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Intersect definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_55\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    x: { type: 'number' },\n    y: { type: 'number' }\n  },\n  required: ['x', 'y']\n}\n```\n\n----------------------------------------\n\nTITLE: Route Placeholders with TypeScript\nDESCRIPTION: Example of using route placeholders in FeathersJS REST client with TypeScript, demonstrating how to configure and use parameterized service URLs.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client/rest.md#2025-04-17_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { feathers } from '@feathersjs/feathers'\nimport rest from '@feathersjs/rest-client'\n\nconst app = feathers()\n\n// Connect to the same as the browser URL (only in the browser)\nconst restClient = rest()\n\n// Connect to a different URL\nconst restClient = rest('http://feathers-api.com')\n\n// Configure an AJAX library (see below) with that client\napp.configure(restClient.fetch(window.fetch.bind(window)))\n\n// Connect to the `http://feathers-api.com/messages` service\nconst messages = app.service('users/:userId/messages')\n\n// Call the `http://feathers-api.com/users/2/messages` URL\nmessages.find({\n  route: {\n    userId: 2\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Removing Primus packages from FeathersJS core\nDESCRIPTION: A breaking change that removes @feathersjs/primus packages from the core to be moved into the ecosystem.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: Git\nCODE:\n```\n- **package:** Remove @feathersjs/primus packages from core ([#1919](https://github.com/feathersjs/feathers/issues/1919)) ([d20b7d5](https://github.com/feathersjs/feathers/commit/d20b7d5a70f4d3306e294696156e8aa0337c35e9)), closes [#1899](https://github.com/feathersjs/feathers/issues/1899)\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Union\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Union definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_51\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = string | number\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox ReadonlyOptional\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox ReadonlyOptional definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_82\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string'\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Enum\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Enum definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_46\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  anyOf: [\n    { type: 'number', const: 0 },\n    { type: 'number', const: 1 }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Never\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Never definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_58\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  allOf: [\n    { type: 'boolean', const: false },\n    { type: 'boolean', const: true }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Installing dotenv in FeathersJS (Shell)\nDESCRIPTION: This command installs the dotenv package as a project dependency, allowing the use of .env files for environment variable configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/custom-environment-variables.md#2025-04-17_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm install dotenv --save\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Partial\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Partial definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_63\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = Partial<{\n  x: number,\n  y: number\n}>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Pick\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Pick definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_69\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = Pick<\n  {\n    x: number,\n    y: number\n  },\n  'x'\n>\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Knex Adapter via NPM\nDESCRIPTION: Command to install the @feathersjs/knex package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/knex/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/knex --save\n```\n\n----------------------------------------\n\nTITLE: Importing Vue Components for Feathers Homepage\nDESCRIPTION: This snippet imports various Vue components used to build the Feathers framework homepage. It includes components for the hero section, feature showcases, quick start guide, and other page elements.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/index.md#2025-04-17_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport HomeHero from './components/HomeHero.vue'\nimport HomeFeature1 from './components/HomeFeature1.vue'\nimport HomeFeature2 from './components/HomeFeature2.vue'\nimport HomeQuickStart from './components/HomeQuickStart.vue'\nimport HomeCreateFirstApp from './components/HomeCreateFirstApp.vue'\nimport HomeFeatureGrid from './components/HomeFeatureGrid.vue'\nimport HomeCTATextSection from './components/HomeCTATextSection.vue'\nimport Footer from './components/Footer.vue'\n</script>\n```\n\n----------------------------------------\n\nTITLE: Implementing Anonymous Authentication Hook\nDESCRIPTION: Example of how to apply the anonymous authentication hook in combination with the authenticate hook in service configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/anonymous.md#2025-04-17_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nall: [ allowAnonymous(), authenticate('jwt', 'anonymous') ],\n```\n\n----------------------------------------\n\nTITLE: Using @feathers/hooks and adding async type in FeathersJS core\nDESCRIPTION: A feature that updates the core to use @feathers/hooks and adds an async type.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_5\n\nLANGUAGE: Git\nCODE:\n```\n- **core:** use @feathers/hooks and add async type ([#1929](https://github.com/feathersjs/feathers/issues/1929)) ([a5c4756](https://github.com/feathersjs/feathers/commit/a5c47562eae8410c82fe2f6308f26f8e78b6a3e8))\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox ReadonlyOptional\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox ReadonlyOptional definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_81\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = {\n  readonly name?: string\n}\n```\n\n----------------------------------------\n\nTITLE: Validating ISO Date-Time Format in TypeScript\nDESCRIPTION: Validates against the date-time format described in RFC3339/ISO8601 using Type.String with 'iso-date-time' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_23\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'iso-date-time' })\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Pick\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Pick definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_70\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    x: { type: 'number' }\n  },\n  required: ['x']\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Node and npm Versions\nDESCRIPTION: Commands to verify Node.js and npm are properly installed by checking their versions in the terminal.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode --version\n```\n\nLANGUAGE: sh\nCODE:\n```\nnpm --version\n```\n\n----------------------------------------\n\nTITLE: Linking Client in Project\nDESCRIPTION: Commands for linking the Feathers client in a client-side application\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncd path/to/client\nnpm link my-app\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/mongodb Package\nDESCRIPTION: Command to install the @feathersjs/mongodb package using npm. This package provides MongoDB service adapter functionality for Feathers applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/mongodb/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/mongodb --save\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Readonly\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Readonly definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_79\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string'\n    }\n  },\n  required: ['name']\n}\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Socket.io Client Package\nDESCRIPTION: Command to install the @feathersjs/socketio-client package using npm package manager\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio-client/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/socketio-client --save\n```\n\n----------------------------------------\n\nTITLE: Creating Integer Schema in JavaScript\nDESCRIPTION: Creates an integer schema and type using Type.Integer()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Integer()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = number\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'integer'\n}\n```\n\n----------------------------------------\n\nTITLE: Documenting FeathersJS Changes in Markdown\nDESCRIPTION: A changelog entry documenting new features and breaking changes in the FeathersJS framework, including authentication v3 implementation, database adapter utilities, and TypeScript support.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n### Features\n\n- @feathers/cli: introduce option to choose jest for tests instead of mocha ([#1057](https://github.com/feathersjs/feathers/issues/1057)) ([1356a1c](https://github.com/feathersjs/feathers/commit/1356a1c))\n- @feathersjs/authentication-oauth ([#1299](https://github.com/feathersjs/feathers/issues/1299)) ([656bae7](https://github.com/feathersjs/feathers/commit/656bae7))\n- Add authentication through oAuth redirect to authentication client ([#1301](https://github.com/feathersjs/feathers/issues/1301)) ([35d8043](https://github.com/feathersjs/feathers/commit/35d8043))\n- Add AuthenticationBaseStrategy and make authentication option handling more explicit ([#1284](https://github.com/feathersjs/feathers/issues/1284)) ([2667d92](https://github.com/feathersjs/feathers/commit/2667d92))\n- Add TypeScript definitions ([#1275](https://github.com/feathersjs/feathers/issues/1275)) ([9dd6713](https://github.com/feathersjs/feathers/commit/9dd6713))\n- Added generators for feathers-objection & feathers-cassandra ([#1010](https://github.com/feathersjs/feathers/issues/1010)) ([c8b27d0](https://github.com/feathersjs/feathers/commit/c8b27d0))\n- Allow registering a service at the root level ([#1115](https://github.com/feathersjs/feathers/issues/1115)) ([c73d322](https://github.com/feathersjs/feathers/commit/c73d322))\n- Allow to skip sending service events ([#1270](https://github.com/feathersjs/feathers/issues/1270)) ([b487bbd](https://github.com/feathersjs/feathers/commit/b487bbd))\n- Authentication v3 client ([#1240](https://github.com/feathersjs/feathers/issues/1240)) ([65b43bd](https://github.com/feathersjs/feathers/commit/65b43bd))\n- Authentication v3 core server implementation ([#1205](https://github.com/feathersjs/feathers/issues/1205)) ([1bd7591](https://github.com/feathersjs/feathers/commit/1bd7591))\n- Authentication v3 Express integration ([#1218](https://github.com/feathersjs/feathers/issues/1218)) ([82bcfbe](https://github.com/feathersjs/feathers/commit/82bcfbe))\n- Authentication v3 local authentication ([#1211](https://github.com/feathersjs/feathers/issues/1211)) ([0fa5f7c](https://github.com/feathersjs/feathers/commit/0fa5f7c))\n- Common database adapter utilities and test suite ([#1130](https://github.com/feathersjs/feathers/issues/1130)) ([17b3dc8](https://github.com/feathersjs/feathers/commit/17b3dc8))\n- Make custom query for oAuth authentication ([#1124](https://github.com/feathersjs/feathers/issues/1124)) ([5d43e3c](https://github.com/feathersjs/feathers/commit/5d43e3c))\n- Remove (hook, next) signature and SKIP support ([#1269](https://github.com/feathersjs/feathers/issues/1269)) ([211c0f8](https://github.com/feathersjs/feathers/commit/211c0f8))\n- Support params symbol to skip authenticate hook ([#1296](https://github.com/feathersjs/feathers/issues/1296)) ([d16cf4d](https://github.com/feathersjs/feathers/commit/d16cf4d))\n\n### BREAKING CHANGES\n\n- Rewrite for authentication v3\n- Update authentication strategies for @feathersjs/authentication v3\n- **package:** Removes adapter tests from @feathersjs/adapter-commons\n- Move database adapter utilities from @feathersjs/commons into its own module\n- This module no longer supports Node.js 0.10\n```\n\n----------------------------------------\n\nTITLE: Running Tests with Coverage\nDESCRIPTION: Command to execute tests with coverage reporting.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_17\n\nLANGUAGE: sh\nCODE:\n```\nnpm test\n```\n\n----------------------------------------\n\nTITLE: Formatting package.json in FeathersJS errors package\nDESCRIPTION: A bug fix to format the package.json file with spaces in the @feathersjs/errors package.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: Git\nCODE:\n```\n- **errors:** Format package.json with spaces ([cbd31c1](https://github.com/feathersjs/feathers/commit/cbd31c10c2c574de63d6ca5e55dbfb73a5fdd758))\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Required\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Required definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_67\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    x: { type: 'number' },\n    y: { type: 'number' }\n  },\n  required: ['x', 'y']\n}\n```\n\n----------------------------------------\n\nTITLE: Validating JSON Pointer Format in TypeScript\nDESCRIPTION: Validates a JSON Pointer according to RFC 6901 using Type.String with 'json-pointer' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'json-pointer' })\n```\n\n----------------------------------------\n\nTITLE: Using Optional Modifier with TypeBox in JavaScript\nDESCRIPTION: Demonstrates how to mark a key in Type.Object as optional using Type.Optional.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_74\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Object({\n  name: Type.Optional(Type.String())\n})\n```\n\n----------------------------------------\n\nTITLE: Running Linting and Mocha Tests in Feathers.js\nDESCRIPTION: Command to run code linting and Mocha tests for a Feathers.js application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm test\n```\n\n----------------------------------------\n\nTITLE: Validating Double Format in TypeScript\nDESCRIPTION: Validates doubles according to the OpenAPI 3.0.0 specification using Type.String with 'double' format. Must be manually enabled.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'double' })\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/authentication Package\nDESCRIPTION: This command installs the @feathersjs/authentication package using npm. It adds the package to the project's dependencies.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication --save\n```\n\n----------------------------------------\n\nTITLE: Defining Void Type Validator in FeathersJS\nDESCRIPTION: Creates a validator that ensures a value is null. This validator requires Extended Ajv Configuration to work properly.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_93\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Void()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = void\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'null'\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Commons via npm\nDESCRIPTION: This command installs the @feathersjs/commons package using npm and saves it as a dependency in the project's package.json file.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/commons/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/commons --save\n```\n\n----------------------------------------\n\nTITLE: Client-Server Integration Test Implementation\nDESCRIPTION: Complete test suite implementation showing how to set up client-server testing environment in FeathersJS. Includes server startup, client authentication, and service testing with Socket.IO integration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/general/client-test.md#2025-04-17_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst assert = require('assert');\nconst feathersClient = require('@feathersjs/client');\nconst io = require('socket.io-client');\nconst app = require('../../src/app');\n\nconst host = app.get('host');\nconst port = app.get('port');\nconst email = 'login@example.com';\nconst password = 'login';\n\ndescribe('\\'users\\' service - client', function () {\n  this.timeout(10000);\n  let server;\n  let client;\n\n  before(async () => {\n    await app.service('users').create({ email, password });\n\n    server = app.listen(port);\n    server.on('listening', async () => {\n      // eslint-disable-next-line no-console\n      console.log('Feathers application started on http://%s:%d', host, port);\n    });\n\n    client = await makeClient(host, port, email, password);\n  });\n\n  after(() => {\n    client.logout();\n    server.close();\n  });\n\n  describe('Run tests using client and server', () => {\n    it('registered the service', () => {\n      const service = client.service('users');\n\n      assert.ok(service, 'Registered the service');\n    });\n\n    it('creates a user, encrypts password and adds gravatar', async () => {\n      const user = await client.service('users').create({\n        email: 'testclient@example.com',\n        password: 'secret'\n      });\n\n      // Verify Gravatar has been set to what we'd expect\n      assert.equal(user.avatar, 'https://s.gravatar.com/avatar/1b9c869fa7a93e59463c31a377fe0cf6?s=60');\n      // Makes sure the password got encrypted\n      assert.ok(user.password !== 'secret');\n    });\n\n    it('removes password for external requests', async () => {\n      // Setting `provider` indicates an external request\n      const params = { provider: 'rest' };\n\n      const user = await client.service('users').create({\n        email: 'testclient2@example.com',\n        password: 'secret'\n      }, params);\n\n      // Make sure password has been removed\n      assert.ok(!user.password);\n    });\n  });\n});\n\nasync function makeClient(host, port, email, password) {\n  const client = feathersClient();\n  const socket = io(`http://${host}:${port}`, {\n    transports: ['websocket'], forceNew: true, reconnection: false, extraHeaders: {}\n  });\n  client.configure(feathersClient.socketio(socket));\n  client.configure(feathersClient.authentication({\n    storage: localStorage()\n  }));\n\n  await client.authenticate({\n    strategy: 'local',\n    email,\n    password,\n  });\n\n  return client;\n}\n\nfunction localStorage () {\n  const store = {};\n\n  return {\n    setItem (key, value) {\n      store[key] = value;\n    },\n    getItem (key) {\n      return store[key];\n    },\n    removeItem (key) {\n      delete store[key];\n    }\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Boolean Schema in JavaScript\nDESCRIPTION: Creates a boolean schema and type using Type.Boolean()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Boolean()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = boolean\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'boolean'\n}\n```\n\n----------------------------------------\n\nTITLE: Version Comparison Links in Markdown\nDESCRIPTION: Markdown links comparing different versions of the FeathersJS transport-commons package using Github URLs.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n# [4.0.0-pre.0](https://github.com/feathersjs/feathers/compare/v3.2.0-pre.1...v4.0.0-pre.0) (2019-04-21)\n```\n\n----------------------------------------\n\nTITLE: JavaScript Package Scripts Configuration\nDESCRIPTION: NPM scripts configuration for JavaScript projects including test, coverage, and linting commands.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_15\n\nLANGUAGE: js\nCODE:\n```\n  \"scripts\": {\n    \"test\": \"npm run eslint && npm run coverage\",\n    \"coverage\": \"nyc npm run mocha\",\n    \"eslint\": \"eslint src/. test/. --config .eslintrc.json\",\n    \"dev\": \"nodemon src/\",\n    \"start\": \"node src/\",\n    \"clean\": \"shx rm -rf test/data/\",\n    \"mocha\": \"npm run clean && NODE_ENV=test mocha test/ --recursive --exit\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Adding JWT getEntityQuery in Authentication\nDESCRIPTION: A bug fix that adds a JWT getEntityQuery functionality to the authentication module.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: Markdown\nCODE:\n```\n### Bug Fixes\n\n- **authentication:** Add JWT getEntityQuery ([#2013](https://github.com/feathersjs/feathers/issues/2013)) ([e0e7fb5](https://github.com/feathersjs/feathers/commit/e0e7fb5162940fe776731283b40026c61d9c8a33))\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Client via NPM\nDESCRIPTION: Command to install the @feathersjs/client package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/README.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install @feathersjs/client --save\n```\n\n----------------------------------------\n\nTITLE: Validating Relative JSON Pointer Format in TypeScript\nDESCRIPTION: Validates a Relative JSON Pointer using Type.String with 'relative-json-pointer' format.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nType.String({ format: 'relative-json-pointer' })\n```\n\n----------------------------------------\n\nTITLE: Defining Uint8Array Type with TypeBox in TypeScript\nDESCRIPTION: This snippet demonstrates how to define a Uint8Array type using TypeBox.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_88\n\nLANGUAGE: typescript\nCODE:\n```\nconst T = Type.Uint8Array()\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox KeyOf\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox KeyOf definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_48\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = keyof {\n  x: number,\n  y: number,\n}\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS REST Client Package\nDESCRIPTION: Command to install the @feathersjs/rest-client package via npm package manager. This package is required for implementing REST client services in FeathersJS applications.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/rest-client/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/rest-client --save\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS TypeBox Package\nDESCRIPTION: Command to install the @feathersjs/typebox package using npm package manager.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/typebox/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/typebox --save\n```\n\n----------------------------------------\n\nTITLE: Changelog Version Links in Markdown\nDESCRIPTION: Markdown links to changelog versions, providing navigation between different versions and showing full diffs between releases.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_6\n\nLANGUAGE: Markdown\nCODE:\n```\n[v3.0.0-pre.6](https://github.com/feathersjs/transport-commons/tree/v3.0.0-pre.6)\n[Full Changelog](https://github.com/feathersjs/transport-commons/compare/v3.0.0-pre.5...v3.0.0-pre.6)\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry for Feathers.js Updates\nDESCRIPTION: Markdown formatted changelog showing version changes, bug fixes, features and breaking changes for Feathers.js framework components.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Bug Fixes\n\n- **adapter-commons:** Clarify adapter query filtering ([#2607](https://github.com/feathersjs/feathers/issues/2607)) ([2dac771])\n- **adapter-tests:** Ensure multi tests can run standalone ([#2608](https://github.com/feathersjs/feathers/issues/2608)) ([d7243f2])\n- **authentication-oauth:** Fix issue with overriding the default Grant configuration ([#2615](https://github.com/feathersjs/feathers/issues/2615)) ([b345857])\n\n### Features\n\n- **mongodb:** Add feathers-mongodb adapter as @feathersjs/mongodb ([#2610](https://github.com/feathersjs/feathers/issues/2610)) ([6d43734])\n- **schema:** Allow hooks to run resolvers in sequence ([#2609](https://github.com/feathersjs/feathers/issues/2609)) ([d85c507])\n\n### BREAKING CHANGES\n\n- **adapter-commons:** Changes the common adapter base class to use `sanitizeQuery` and `sanitizeData`\n```\n\n----------------------------------------\n\nTITLE: Version and Issue Reference\nDESCRIPTION: Example version number and issue reference format used throughout the changelog\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-client/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n\n### Bug Fixes\n\n- **dependencies:** Update dependencies ([#3571](https://github.com/feathersjs/feathers/issues/3571))\n```\n\n----------------------------------------\n\nTITLE: Installing Local Development Client\nDESCRIPTION: Commands for bundling and linking the Feathers client locally for development\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run bundle:client\nnpm link\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Client Dependencies for Node.js\nDESCRIPTION: Command to install the necessary packages for using Feathers client with Socket.io in Node.js.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/feathers @feathersjs/socketio-client socket.io-client --save\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of StringEnum\nDESCRIPTION: Illustrates the JSON Schema equivalent of a StringEnum definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_43\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  enum: ['crow', 'dove', 'eagle']\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Configuration Package\nDESCRIPTION: NPM installation command for @feathersjs/configuration package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/configuration.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/configuration --save\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Intersect\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Intersect definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_54\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = { x: number } & { y: number }\n```\n\n----------------------------------------\n\nTITLE: Starting the Feathers Server (JavaScript)\nDESCRIPTION: Command to start the Feathers server for JavaScript projects.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nnpm start\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Schema Package via NPM\nDESCRIPTION: Command to install the @feathersjs/schema package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/schema/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/schema --save\n```\n\n----------------------------------------\n\nTITLE: Conventional Commit Format Example for Version Update\nDESCRIPTION: Shows the version bump format used in the changelog with commit hashes and issue references\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n\n### Bug Fixes\n\n- **dependencies:** Update dependencies ([#3571](https://github.com/feathersjs/feathers/issues/3571)) ([ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217))\n```\n\n----------------------------------------\n\nTITLE: Version Tag Links\nDESCRIPTION: Markdown format version comparison links showing the change between versions\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n## [5.0.32](https://github.com/feathersjs/feathers/compare/v5.0.31...v5.0.32) (2025-02-01)\n```\n\n----------------------------------------\n\nTITLE: Latest Version Changes - v5.0.33\nDESCRIPTION: Details of bug fixes and dependency updates for version 5.0.33\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/memory/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n\n### Bug Fixes\n\n- **dependencies:** Update dependencies ([#3571](https://github.com/feathersjs/feathers/issues/3571))\n```\n\n----------------------------------------\n\nTITLE: Improved TypeScript Adapter Typings\nDESCRIPTION: Enhancement to adapter typings implementation as part of issue #2605\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n**typescript:** Improve adapter typings ([#2605](https://github.com/feathersjs/feathers/issues/2605)) ([3b2ca0a](https://github.com/feathersjs/feathers/commit/3b2ca0a6a8e03e8390272c4d7e930b4bffdaacf5))\n```\n\n----------------------------------------\n\nTITLE: Creating Client Package\nDESCRIPTION: Command to bundle the client SDK into an installable package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm run bundle:client\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Client for React Native\nDESCRIPTION: Command to install the required packages for using Feathers client with Socket.io in a React Native application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/feathers @feathersjs/socketio-client socket.io-client\n```\n\n----------------------------------------\n\nTITLE: Creating Null Schema in JavaScript\nDESCRIPTION: Creates a schema and type only allowing null using Type.Null()\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = Type.Null()\n```\n\nLANGUAGE: typescript\nCODE:\n```\ntype T = null\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'null'\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Client Package\nDESCRIPTION: Command to install the bundled client package from a server\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/cli/client.md#2025-04-17_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install https://myapp.com/appname-x.x.x.tgz\n```\n\n----------------------------------------\n\nTITLE: TypeScript Equivalent of TypeBox Never\nDESCRIPTION: Shows the TypeScript type equivalent of a TypeBox Never definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_57\n\nLANGUAGE: javascript\nCODE:\n```\ntype T = never\n```\n\n----------------------------------------\n\nTITLE: Accessing Messages API Endpoint\nDESCRIPTION: The URL endpoint for directly accessing the messages service API which returns JSON response of all messages.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_13\n\nLANGUAGE: plaintext\nCODE:\n```\nhttp://localhost:3030/messages\n```\n\n----------------------------------------\n\nTITLE: Installing nyc Package for Code Coverage\nDESCRIPTION: Command to install the nyc package for code coverage testing as a development dependency.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nnpm install nyc --save-dev\n```\n\n----------------------------------------\n\nTITLE: FeatherJS Commons Change Log\nDESCRIPTION: Markdown formatted changelog documenting version history with semantic versioning and conventional commit message guidelines.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/commons/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Change Log\n\nAll notable changes to this project will be documented in this file.\nSee [Conventional Commits](https://conventionalcommits.org) for commit guidelines.\n```\n\n----------------------------------------\n\nTITLE: Implementing Discord OAuth Strategy in FeathersJS Authentication\nDESCRIPTION: This TypeScript code demonstrates how to set up Discord OAuth authentication in a FeathersJS application. It includes registering the Discord strategy and implementing custom profile and entity data retrieval methods.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/authentication/_discord.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport {OAuthProfile, OAuthStrategy} from \"@feathersjs/authentication-oauth\";\nimport {AuthenticationRequest} from \"@feathersjs/authentication\";\nimport axios, {AxiosRequestConfig} from 'axios'\nimport {ServiceAddons} from '@feathersjs/feathers';\nimport {AuthenticationService, JWTStrategy} from '@feathersjs/authentication';\nimport {LocalStrategy} from '@feathersjs/authentication-local';\nimport {oauth} from '@feathersjs/authentication-oauth';\nimport {Application} from './declarations';\n\n\nexport default function (app: Application) {\n  const authentication = new AuthenticationService(app);\n\n  authentication.register('jwt', new JWTStrategy());\n  authentication.register('local', new LocalStrategy());\n  authentication.register('discord', new DiscordStrategy());\n\n  app.use('/authentication', authentication);\n  app.configure(oauth());\n}\n\nexport class DiscordStrategy extends OAuthStrategy {\n  async getProfile(authResult: AuthenticationRequest) {\n    // This is the OAuth access token that can be used\n    // for Discord API requests as the Bearer token\n    const accessToken = authResult.access_token;\n    const userOptions: AxiosRequestConfig = {\n      method: 'GET',\n      headers: {'Authorization': `Bearer ${accessToken}`},\n      url: `https://discord.com/api/users/@me`,\n    };\n    const {data} = await axios(userOptions);\n    return data;\n  }\n\n  async getEntityData(profile: OAuthProfile) {\n    // `profile` is the data returned by getProfile\n    const baseData = await super.getEntityData(profile);\n\n    if (profile.avatar == null) {\n      profile.avatar = 'https://cdn.discordapp.com/embed/avatars/0.png'\n    } else {\n      const isGif = profile.avatar.startsWith('a_');\n      profile.avatar = `https://cdn.discordapp.com/avatars/${profile['id']}/${profile['avatar']}.${isGif ? 'gif' : 'png'}`\n    }\n\n    return {\n      ...baseData,\n      username: profile.username,\n      email: profile.email,\n      avatar: profile.avatar,\n    };\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Authentication Feature Addition\nDESCRIPTION: Add parseStrategies feature to allow separate strategies for creating JWTs and parsing headers\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n**authentication:** Add parseStrategies to allow separate strategies for creating JWTs and parsing headers ([#1708](https://github.com/feathersjs/feathers/issues/1708)) ([5e65629](https://github.com/feathersjs/feathers/commit/5e65629b924724c3e81d7c81df047e123d1c8bd7))\n```\n\n----------------------------------------\n\nTITLE: Socket.io Version Update\nDESCRIPTION: Update socket.io dependency version to 2.0.0\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n**package:** update socket.io to version 2.0.0 ([#75](https://github.com/feathersjs/feathers/issues/75)) ([d4a4b71](https://github.com/feathersjs/feathers/commit/d4a4b71))\n```\n\n----------------------------------------\n\nTITLE: Repository Link in Changelog\nDESCRIPTION: Markdown link to the conventional commits documentation, used as a reference for commit message guidelines.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-local/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[Conventional Commits](https://conventionalcommits.org)\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Core Package\nDESCRIPTION: Command to install the core Feathers package (@feathersjs/feathers) using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/starting.md#2025-04-17_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @feathersjs/feathers --save\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers Client Bundle Package\nDESCRIPTION: Command to install the bundled Feathers client package that includes all client modules in a single package, useful for non-module environments.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/client.md#2025-04-17_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/client --save\n```\n\n----------------------------------------\n\nTITLE: Installing the Authentication Package with npm\nDESCRIPTION: Command to install the @feathersjs/authentication package using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/service.md#2025-04-17_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm install @feathersjs/authentication --save\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Errors Package\nDESCRIPTION: Command to install the @feathersjs/errors package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/errors/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/errors --save\n```\n\n----------------------------------------\n\nTITLE: JSON Schema Representation of TypeBox Optional\nDESCRIPTION: Illustrates the JSON Schema equivalent of a TypeBox Optional definition.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/schema/typebox.md#2025-04-17_snippet_76\n\nLANGUAGE: javascript\nCODE:\n```\nconst T = {\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string'\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing TypeScript Coverage Reporter\nDESCRIPTION: Command to install the Istanbul TypeScript configuration package for TypeScript projects.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_12\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @istanbuljs/nyc-config-typescript --save-dev\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/errors in Node.js\nDESCRIPTION: Command to install the @feathersjs/errors package using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/errors.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/errors --save\n```\n\n----------------------------------------\n\nTITLE: Version Number Link Format\nDESCRIPTION: Markdown formatted version number with comparison link\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/mongodb/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33)\n```\n\n----------------------------------------\n\nTITLE: Commit Reference Link Format\nDESCRIPTION: Format used for referencing specific commits and issues in GitHub markdown\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/configuration/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n([#3571](https://github.com/feathersjs/feathers/issues/3571)) ([ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217))\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS v5 Prerelease\nDESCRIPTION: Command to upgrade all Feathers core packages to their latest versions using npm-check-updates\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/migrating.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx npm-check-updates --upgrade --filter /@feathersjs/\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Installing shx for Cross-Platform File Operations in Feathers.js\nDESCRIPTION: Command to install shx package for cross-platform file operations in Feathers.js testing setup.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnpm install shx --save-dev\n```\n\n----------------------------------------\n\nTITLE: Windows Coverage Command\nDESCRIPTION: Specific command for running coverage tests on Windows systems.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_16\n\nLANGUAGE: sh\nCODE:\n```\nnpm run clean & SET NODE_ENV=test& nyc mocha\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/feathers Package\nDESCRIPTION: Command to install the core Feathers module using npm package manager.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/application.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/feathers --save\n```\n\n----------------------------------------\n\nTITLE: Commit Hash Reference\nDESCRIPTION: Example of how commit hashes are referenced in the changelog entries\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-client/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n([ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217))\n```\n\n----------------------------------------\n\nTITLE: Installing Feathers CLI Package\nDESCRIPTION: Command to install the Feathers CLI as a development dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/cli/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/cli --save-dev\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry - Version 5.0.23\nDESCRIPTION: Shows changes for version 5.0.23 with core hooks update\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/feathers/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.23](https://github.com/feathersjs/feathers/compare/v5.0.22...v5.0.23) (2024-02-25)\n\n### Bug Fixes\n\n- **core:** Update to latest feathersjs/hooks ([#3434](https://github.com/feathersjs/feathers/issues/3434)) ([1499ccc](https://github.com/feathersjs/feathers/commit/1499ccc41fb3ebba97b2c84e0cb19bc48ad3c651))\n```\n\n----------------------------------------\n\nTITLE: Version Comparison Link Format\nDESCRIPTION: Standard format used for version comparison links in GitHub markdown\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/configuration/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33)\n```\n\n----------------------------------------\n\nTITLE: Running Feathers Tests\nDESCRIPTION: Commands for running tests in the Feathers project. The first command runs all tests in the monorepo, while the second demonstrates how to run tests for a specific module.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/README.md#2025-04-17_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm test\n```\n\nLANGUAGE: bash\nCODE:\n```\ncd packages/feathers\nnpm test\n```\n\n----------------------------------------\n\nTITLE: Omitting Query in JWT Strategy\nDESCRIPTION: A bug fix that omits the query in the JWT strategy of the authentication module.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: Markdown\nCODE:\n```\n### Bug Fixes\n\n- **authentication:** Omit query in JWT strategy ([#2011](https://github.com/feathersjs/feathers/issues/2011)) ([04ce7e9](https://github.com/feathersjs/feathers/commit/04ce7e98515fe9d495cd0e83e0da097e9bcd7382))\n```\n\n----------------------------------------\n\nTITLE: Installing @feathersjs/koa Package via npm\nDESCRIPTION: This command installs the @feathersjs/koa package using npm. It adds the package as a dependency to the project.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/koa/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/koa --save\n```\n\n----------------------------------------\n\nTITLE: Git Commit Hash Reference for Authentication Updates\nDESCRIPTION: Git commit hash showing implementation of authentication v3 core server.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\n1bd7591\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Memory Adapter\nDESCRIPTION: Command to install the @feathersjs/memory package using npm package manager.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/memory.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm install --save @feathersjs/memory\n```\n\n----------------------------------------\n\nTITLE: Commit Reference Format\nDESCRIPTION: Markdown formatted Git commit hash with link\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/mongodb/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n[ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217)\n```\n\n----------------------------------------\n\nTITLE: Commit Hash Links\nDESCRIPTION: Markdown format links to specific commit hashes\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n[ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217)\n[221b92b](https://github.com/feathersjs/feathers/commit/221b92bb0ee5d54fb1036742968797cb02e56da2)\n```\n\n----------------------------------------\n\nTITLE: Removing environment variable substitution in FeathersJS configuration\nDESCRIPTION: A breaking change that removes environment variable substitution functionality from the configuration package.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: Git\nCODE:\n```\n- **configuration:** Remove environment variable substitution ([#1942](https://github.com/feathersjs/feathers/issues/1942)) ([caaa21f](https://github.com/feathersjs/feathers/commit/caaa21ffdc6a8dcac82fb403c91d9d4b781a6c0a))\n```\n\n----------------------------------------\n\nTITLE: Changelog Entry - Version 5.0.33\nDESCRIPTION: Lists changes for version 5.0.33 including dependency update fixes\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/feathers/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n\n### Bug Fixes\n\n- **dependencies:** Update dependencies ([#3571](https://github.com/feathersjs/feathers/issues/3571)) ([ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217))\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS SocketIO Package\nDESCRIPTION: Command to install the @feathersjs/socketio package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/socketio --save\n```\n\n----------------------------------------\n\nTITLE: Git Commit References\nDESCRIPTION: Git commit hashes and links for tracking specific changes\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nad611cb6ffb1dc31d603ba5817331318c5a23217\n```\n\n----------------------------------------\n\nTITLE: Configuring Web Crawler Access in robots.txt for Feathers.js\nDESCRIPTION: This robots.txt file sets the crawling rules for web robots visiting the Feathers.js project site or repository. It allows all user agents (*) to access all parts of the site, indicated by the 'Allow: /' directive.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/public/robots.txt#2025-04-17_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nUser-agent: *\nAllow: /\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Document\nDESCRIPTION: A GitHub-style changelog document detailing version updates, closed issues, and merged pull requests for the FeathersJS authentication client library. The changelog spans multiple versions from v0.1.0 to v0.3.2.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-client/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## [v0.3.2](https://github.com/feathersjs/authentication-client/tree/v0.3.2) (2017-04-30)\n\n[Full Changelog](https://github.com/feathersjs/authentication-client/compare/v0.3.1...v0.3.2)\n\n**Closed issues:**\n\n- An in-range update of feathers-errors is breaking the build  [\\#45](https://github.com/feathersjs/authentication-client/issues/45)\n- Proper way to save jwt in cookies [\\#41](https://github.com/feathersjs/authentication-client/issues/41)\n- Allow customizing the `tokenField` [\\#38](https://github.com/feathersjs/authentication-client/issues/38)\n- Show blank page in safari@iOS 8.3 [\\#37](https://github.com/feathersjs/authentication-client/issues/37)\n```\n\n----------------------------------------\n\nTITLE: Release Version Headers in Markdown\nDESCRIPTION: Version headers and links for FeathersJS Express releases including version comparison links.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/express/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# [4.0.0-pre.0](https://github.com/feathersjs/feathers/compare/v3.2.0-pre.1...v4.0.0-pre.0) (2019-04-21)\n\n## [1.3.1](https://github.com/feathersjs/feathers/compare/@feathersjs/express@1.3.0...@feathersjs/express@1.3.1) (2019-01-02)\n\n<a name=\"1.3.0\"></a>\n# [1.3.0](https://github.com/feathersjs/feathers/compare/@feathersjs/express@1.2.7...@feathersjs/express@1.3.0) (2018-12-16)\n```\n\n----------------------------------------\n\nTITLE: Bug Fix for FeathersJS Client Types Field\nDESCRIPTION: Fix addressing issue #2596 related to @feathersjs/client types field definition\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n**client:** Fix @feathersjs/client types field ([#2596](https://github.com/feathersjs/feathers/issues/2596)) ([d719f54](https://github.com/feathersjs/feathers/commit/d719f54daee63daf9ed5cc762626ca15131086de))\n```\n\n----------------------------------------\n\nTITLE: Issue and Pull Request Links\nDESCRIPTION: Markdown format links to GitHub issues and PR numbers\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/socketio/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[#3571](https://github.com/feathersjs/feathers/issues/3571)\n[#3545](https://github.com/feathersjs/feathers/issues/3545)\n```\n\n----------------------------------------\n\nTITLE: Version Comparison Link in Markdown\nDESCRIPTION: Version comparison link showing changes between two versions in Markdown format\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/configuration/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n[4.3.2](https://github.com/feathersjs/feathers/compare/v4.3.1...v4.3.2)\n```\n\n----------------------------------------\n\nTITLE: Commit Reference Link\nDESCRIPTION: Example of a commit reference link in the changelog, linking to specific issue and commit.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication-local/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[#3571](https://github.com/feathersjs/feathers/issues/3571)\n```\n\n----------------------------------------\n\nTITLE: Installing Express Integration Package\nDESCRIPTION: NPM installation command for the @feathersjs/express package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/express.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/express --save\n```\n\n----------------------------------------\n\nTITLE: Type Fix for TypeScript Error Definitions\nDESCRIPTION: Bug fix to improve TypeScript type definitions, specifically for the data property in @feathersjs/errors and backwards compatibility.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/errors/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n**typescript:** Fix `data` property definition in @feathersjs/errors\n```\n\n----------------------------------------\n\nTITLE: Error Formatting Package JSON Configuration\nDESCRIPTION: Format update to package.json to use spaces for consistent error handling package configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/errors/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n**errors:** Format package.json with spaces\n```\n\n----------------------------------------\n\nTITLE: TypeScript nyc Configuration\nDESCRIPTION: Configuration file for nyc specifying TypeScript file inclusion patterns.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/testing.md#2025-04-17_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"extends\": \"@istanbuljs/nyc-config-typescript\",\n  \"include\": [\n    \"src/**/*.ts\",\n    \"src/**/*.tsx\"\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating FeathersJS core to TypeScript\nDESCRIPTION: A feature that migrates the @feathersjs/feathers package to TypeScript.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: Git\nCODE:\n```\n- **core:** Migrate @feathersjs/feathers to TypeScript ([#1963](https://github.com/feathersjs/feathers/issues/1963)) ([7812529](https://github.com/feathersjs/feathers/commit/7812529ff0f1008e21211f1d01efbc49795dbe55))\n```\n\n----------------------------------------\n\nTITLE: Markdown Frontmatter Configuration\nDESCRIPTION: YAML frontmatter configuration for the documentation page specifying deep outline structure.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/index.md#2025-04-17_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\noutline: deep\n---\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Memory Adapter via NPM\nDESCRIPTION: Command to install the @feathersjs/memory package as a project dependency using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/memory/README.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ npm install --save @feathersjs/memory\n```\n\n----------------------------------------\n\nTITLE: Including Query Params in Authentication Hook\nDESCRIPTION: A bug fix that includes query parameters when authenticating via the authenticate hook.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: Markdown\nCODE:\n```\n### Bug Fixes\n\n- **authentication:** Include query params when authenticating via authenticate hook [#2009](https://github.com/feathersjs/feathers/issues/2009) ([4cdb7bf](https://github.com/feathersjs/feathers/commit/4cdb7bf2898385ddac7a1692bc9ac2f6cf5ad446))\n```\n\n----------------------------------------\n\nTITLE: Checking Transaction Completion in FeathersJS Publish Function\nDESCRIPTION: This snippet demonstrates how to check if a transaction has been completed before publishing events in a FeathersJS service. It uses the 'transaction.committed' promise to ensure the transaction is successful before proceeding.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/knex.md#2025-04-17_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\napp.service('messages').publish(async (data, context) => {\n  const { transaction } = context.params\n\n  if (transaction) {\n    const success = await transaction.committed\n\n    if (!success) {\n      return []\n    }\n  }\n\n  return app.channel(`rooms/${data.roomId}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Simplified Around Hook Registration in Feathers.js\nDESCRIPTION: Demonstrates simplified hook registration patterns using around hooks, which can be registered as an array for all methods or as an object with method-specific hooks.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/hooks.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n// Passing an array of around hooks that run for every method\napp.service('servicename').hooks([\n  async (context: HookContext, next: NextFunction) => {\n    console.log('around all hook ran')\n    await next()\n  }\n])\n\n// Passing an object with method names and a list of around hooks\napp.service('servicename').hooks({\n  get: [\n    async (context: HookContext, next: NextFunction) => {\n      console.log('around get hook ran')\n      await next()\n    }\n  ],\n  create: [],\n  update: [],\n  patch: [],\n  remove: [],\n  myCustomMethod: []\n})\n```\n\n----------------------------------------\n\nTITLE: Version History Entry\nDESCRIPTION: Changelog entry for version 5.0.0-pre.1 listing new features and changes\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n# [5.0.0-pre.1](https://github.com/feathersjs/feathers/compare/v4.5.11...v5.0.0-pre.1) (2020-12-17)\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Middleware and Service in Feathers with Koa\nDESCRIPTION: Example of implementing a custom middleware and service in Feathers with Koa, demonstrating params usage and REST configuration.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/koa.md#2025-04-17_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { rest } from '@feathersjs/koa'\nimport type { NextFunction } from '@feathersjs/koa'\nimport type { Id, Params } from '@feathersjs/feathers'\n\nclass TodoService {\n  async get(id: Id, params: Params & { fromMiddleware: string }) {\n    const { fromMiddleware } = params\n\n    return { id, fromMiddleware }\n  }\n}\n\n// Register Koa middleware\napp.use(async (ctx: any, next: NextFunction) => {\n  ctx.feathers = {\n    ...ctx.feathers,\n    fromMiddleware: 'Hello from Koa middleware'\n  }\n\n  await next()\n})\napp.configure(rest())\n\n// Register a service\napp.use('todos', new TodoService())\n```\n\n----------------------------------------\n\nTITLE: Git Commit Hash Reference\nDESCRIPTION: Git commit hash showing fix for feathers-memory dependency update.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n9422b13\n```\n\n----------------------------------------\n\nTITLE: Implementing MemoryService in TypeScript\nDESCRIPTION: Example showing how to create a custom message service extending MemoryService with TypeScript types. Demonstrates type definition for Message and MessageData interfaces and service initialization.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/databases/memory.md#2025-04-17_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { MemoryService } from '@feathersjs/memory'\n\ntype Message = {\n  id: number\n  text: string\n}\n\ntype MessageData = Pick<Message, 'text'>\n\nclass MyMessageService extends MemoryService<Message, MessageData> {}\n\napp.use('messages', new MyMessageService({}))\n```\n\n----------------------------------------\n\nTITLE: Custom JWT Strategy Implementation\nDESCRIPTION: Extended JWT strategy implementation with custom entity query filtering for activated users.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/jwt.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { AuthenticationService, JWTStrategy } from '@feathersjs/authentication'\nimport { LocalStrategy } from '@feathersjs/authentication-local'\nimport type { Application } from './declarations'\n\ndeclare module './declarations' {\n  interface ServiceTypes {\n    authentication: AuthenticationService\n  }\n}\n\nclass MyJwtStrategy extends JWTStrategy {\n  // Only allow authenticating activated users\n  async getEntityQuery(params: Params) {\n    return {\n      active: true\n    }\n  }\n}\n\nexport default (app: Application) => {\n  const authentication = new AuthenticationService(app)\n\n  authentication.register('jwt', new MyJwtStrategy())\n\n  // ...\n  app.use('authentication', authentication)\n}\n```\n\n----------------------------------------\n\nTITLE: Memory Adapter Bugfix - v5.0.11\nDESCRIPTION: Fix for memory adapter pagination totals and Knex dependency updates\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/memory/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.11](https://github.com/feathersjs/feathers/compare/v5.0.10...v5.0.11) (2023-10-11)\n\n### Bug Fixes\n\n- **memory:** Ensure correct pagination totals ([#3307](https://github.com/feathersjs/feathers/issues/3307))\n- **knex:** Update all dependencies and Knex peer ([#3308](https://github.com/feathersjs/feathers/issues/3308))\n```\n\n----------------------------------------\n\nTITLE: Version Comparison Links\nDESCRIPTION: Git comparison links showing changes between different versions of the authentication package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/authentication/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[#3571](https://github.com/feathersjs/feathers/issues/3571)\n```\n\n----------------------------------------\n\nTITLE: Removing legacy message format in FeathersJS transport-commons\nDESCRIPTION: A breaking change that removes the old message format and client service timeout in the transport-commons package.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/CHANGELOG.md#2025-04-17_snippet_6\n\nLANGUAGE: Git\nCODE:\n```\n- **transport-commons:** Remove legacy message format and unnecessary client timeouts ([#1939](https://github.com/feathersjs/feathers/issues/1939)) ([5538881](https://github.com/feathersjs/feathers/commit/5538881a08bc130de42c5984055729d8336f8615))\n```\n\n----------------------------------------\n\nTITLE: Client-Side Hook for Parameter Passing\nDESCRIPTION: Shows how to set up a client-side hook to include additional parameters in the query object for server communication.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/help/faq.md#2025-04-17_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nclient.hooks({\n  before: {\n    all: [\n      async (context: HookContext) => {\n        context.params.query = {\n          ...context.params.query,\n          $client: {\n            platform: 'ios',\n            version: '1.0'\n          }\n        }\n      }\n    ]\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Registering Setup and Teardown Hooks\nDESCRIPTION: Shows how to register application-level setup and teardown hooks for handling server startup and shutdown operations.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/whats-new.md#2025-04-17_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\napp.hooks({\n  setup: [connectMongoDB],\n  teardown: [closeMongoDB]\n})\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth Link for Account Linking\nDESCRIPTION: HTML snippet showing how to create a link for OAuth authentication that includes an existing access token for account linking.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<a href=\"/oauth/github?feathers_token=<your access token>\"> Login with GitHub </a>\n```\n\n----------------------------------------\n\nTITLE: Default Entity Query Implementation in OAuthStrategy\nDESCRIPTION: Default implementation of the getEntityQuery method that returns a query object to find an entity based on the OAuth profile ID.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  [`${this.name}Id`]: profile.sub || profile.id\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring OAuth Redirect URL\nDESCRIPTION: JSON configuration snippet for setting a custom redirect URL after OAuth authentication in a Feathers application.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"authentication\": {\n    \"oauth\": {\n      \"redirect\": \"https://app.mydomain.com/\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing FeathersJS Client Package\nDESCRIPTION: Command to install the @feathersjs/client package as a development dependency for testing purposes.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/cookbook/general/client-test.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/client --save-dev\n```\n\n----------------------------------------\n\nTITLE: Creating OAuth Link with Dynamic Redirect\nDESCRIPTION: HTML snippet demonstrating how to create an OAuth authentication link with a dynamic redirect parameter.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<a href=\"/oauth/github?redirect=dashboard\"> Login with GitHub </a>\n```\n\n----------------------------------------\n\nTITLE: Navigating to Project Directory\nDESCRIPTION: Command to change into the newly created project directory after generation.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/guides/basics/generator.md#2025-04-17_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncd feathers-chat\n```\n\n----------------------------------------\n\nTITLE: Installing OAuth Authentication Package for Feathers\nDESCRIPTION: Command to install the @feathersjs/authentication-oauth package using npm.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/docs/api/authentication/oauth.md#2025-04-17_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @feathersjs/authentication-oauth --save\n```\n\n----------------------------------------\n\nTITLE: Breaking Changes Entry\nDESCRIPTION: Documentation of breaking changes in transport-commons package\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### BREAKING CHANGES\n\n- **transport-commons:** Removes the old message format and client service timeout\n```\n\n----------------------------------------\n\nTITLE: Feathers Pre-Release Version Links\nDESCRIPTION: Markdown links to version comparison pages showing changes between pre-release versions\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/schema/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n# [5.0.0-pre.20](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.19...v5.0.0-pre.20) (2022-05-04)\n\n# [5.0.0-pre.19](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.18...v5.0.0-pre.19) (2022-05-01)\n\n# [5.0.0-pre.18](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.17...v5.0.0-pre.18) (2022-04-11)\n\n# [5.0.0-pre.17](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.16...v5.0.0-pre.17) (2022-02-15)\n\n# [5.0.0-pre.16](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.15...v5.0.0-pre.16) (2022-01-12)\n\n# [5.0.0-pre.15](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.14...v5.0.0-pre.15) (2021-11-27)\n\n# [5.0.0-pre.14](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.13...v5.0.0-pre.14) (2021-10-13)\n\n# [5.0.0-pre.13](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.12...v5.0.0-pre.13) (2021-10-13)\n\n# [5.0.0-pre.12](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.11...v5.0.0-pre.12) (2021-10-12)\n\n# [5.0.0-pre.11](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.10...v5.0.0-pre.11) (2021-10-06)\n\n# [5.0.0-pre.10](https://github.com/feathersjs/feathers/compare/v5.0.0-pre.9...v5.0.0-pre.10) (2021-09-19)\n```\n\n----------------------------------------\n\nTITLE: Version History Entry - Markdown\nDESCRIPTION: Example change log entry showing version number, changes, and commit information\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/schema/CHANGELOG.md#2025-04-17_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n## [5.0.33](https://github.com/feathersjs/feathers/compare/v5.0.32...v5.0.33) (2025-02-24)\n\n### Bug Fixes\n\n- **dependencies:** Update dependencies ([#3571](https://github.com/feathersjs/feathers/issues/3571)) ([ad611cb](https://github.com/feathersjs/feathers/commit/ad611cb6ffb1dc31d603ba5817331318c5a23217))\n```\n\n----------------------------------------\n\nTITLE: Git Commit Hash Reference for Test Updates\nDESCRIPTION: Git commit hash showing update to adapter common tests.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\n8166dda\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Format\nDESCRIPTION: Standard changelog entry format using markdown headers, bullet points and links to reference issues and commits. Documents version changes, bug fixes and new features.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/errors/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n# [4.0.0-pre.1](https://github.com/feathersjs/feathers/compare/v4.0.0-pre.0...v4.0.0-pre.1) (2019-05-08)\n\n### Bug Fixes\n\n- Do not log as errors below a 500 response ([#1256](https://github.com/feathersjs/feathers/issues/1256)) ([33fd0e4](https://github.com/feathersjs/feathers/commit/33fd0e4))\n```\n\n----------------------------------------\n\nTITLE: Git Commit Hash Reference for TypeScript Updates\nDESCRIPTION: Git commit hash showing addition of TypeScript definitions.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/client/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\n9dd6713\n```\n\n----------------------------------------\n\nTITLE: Issue Reference Format\nDESCRIPTION: Markdown formatted reference to GitHub issue number with link\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/mongodb/CHANGELOG.md#2025-04-17_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[#3571](https://github.com/feathersjs/feathers/issues/3571)\n```\n\n----------------------------------------\n\nTITLE: Commit Reference Link in Markdown\nDESCRIPTION: Git commit reference hash with link in Markdown format\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/configuration/CHANGELOG.md#2025-04-17_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n[7d53a00](https://github.com/feathersjs/feathers/commit/7d53a00)\n```\n\n----------------------------------------\n\nTITLE: Changelog Link Reference\nDESCRIPTION: Markdown syntax for full changelog comparison between versions using Github URLs.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n[Full Changelog](https://github.com/feathersjs/transport-commons/compare/v4.1.0...v4.1.1)\n```\n\n----------------------------------------\n\nTITLE: Pull Request Reference\nDESCRIPTION: Markdown format for referencing pull requests with numbers and links.\nSOURCE: https://github.com/feathersjs/feathers/blob/dove/packages/transport-commons/CHANGELOG.md#2025-04-17_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n- Properly dispatch arrays that do not come from Feathers hook events [\\#77](https://github.com/feathersjs/transport-commons/pull/77) ([daffl](https://github.com/daffl))\n```"
  }
]
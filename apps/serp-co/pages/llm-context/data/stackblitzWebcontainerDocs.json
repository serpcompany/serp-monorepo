[
  {
    "owner": "stackblitz",
    "repo": "webcontainer-docs",
    "content": "TITLE: Starting a Dev Server in WebContainer - JavaScript\nDESCRIPTION: This snippet shows how to start a dev server inside a WebContainer using `npm run start`. It listens for the `server-ready` event to determine when the server is ready to accept requests. Requires a running `webcontainerInstance` and a project with a `start` script in `package.json`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/running-processes.md#_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nasync function startDevServer() {\n  // Run `npm run start` to start the Express app\n  await webcontainerInstance.spawn('npm', ['run', 'start']);\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    // ...\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Install dependencies function in WebContainer (JavaScript)\nDESCRIPTION: This function asynchronously installs dependencies using `npm install` within the WebContainer. It uses `webcontainerInstance.spawn` to run the command and returns a promise that resolves with the exit code of the process. A `0` exit code indicates successful installation.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nasync function installDependencies() {\n  // Install dependencies\n  const installProcess = await webcontainerInstance.spawn('npm', ['install']);\n  // Wait for install command to exit\n  return installProcess.exit;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing WebContainer and Starting Dev Server\nDESCRIPTION: This JavaScript code sets up an event listener for the `load` event on the `window` object. It retrieves the content of `index.js`, initializes the WebContainer instance, mounts the files, installs dependencies, and starts the dev server by calling `startDevServer()`. An error is thrown if the dependency installation fails.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/4-running-dev-server.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  const exitCode = await installDependencies();\n  if (exitCode !== 0) {\n    throw new Error('Installation failed');\n  };\n\n  startDevServer();\n});\n```\n\n----------------------------------------\n\nTITLE: Writing to the terminal in installDependencies\nDESCRIPTION: This code snippet updates the `installDependencies` function to pipe the output of the `npm install` process to the terminal.  It takes terminal instance as an argument.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_7\n\nLANGUAGE: js\nCODE:\n```\n/**\n * @param {Terminal} terminal\n */\nasync function installDependencies(terminal) {\n  // Install dependencies\n  const installProcess = await webcontainerInstance.spawn('npm', ['install']);\n  installProcess.output.pipeTo(new WritableStream({\n    write(data) {\n      terminal.write(data);\n    }\n  }))\n  // Wait for install command to exit\n  return installProcess.exit;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - NextJS\nDESCRIPTION: This snippet configures COOP and COEP headers for all pages in a Next.js application using the `next.config.js` file. It uses the `headers` configuration option to add the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers to all routes via a wildcard source. This ensures that every page served by Next.js fulfills the cross-origin isolation requirements.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\n// https://nextjs.org/docs/api-reference/next.config.js/introduction\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/(.*)',\n        headers: [\n          {\n            key: 'Cross-Origin-Embedder-Policy',\n            value: 'require-corp',\n          },\n          {\n            key: 'Cross-Origin-Opener-Policy',\n            value: 'same-origin',\n          },\n        ],\n      },\n    ];\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - Netlify\nDESCRIPTION: This snippet shows how to configure COOP and COEP headers for all pages in a `netlify.toml` file.  It adds the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` to all routes.  This enforces cross-origin isolation for all pages served by Netlify, meeting the requirements for WebContainers.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n[[headers]]\n  for = \"/*\"\n  [headers.values]\n    Cross-Origin-Embedder-Policy = \"require-corp\"\n    Cross-Origin-Opener-Policy = \"same-origin\"\n```\n\n----------------------------------------\n\nTITLE: Listening to textarea Changes and Updating File\nDESCRIPTION: This code snippet demonstrates how to listen for changes in a textarea element and trigger a file write operation using the `writeIndexJS` function.  It attaches an 'input' event listener to the `textareaEl` and calls `writeIndexJS` function with the current value of the textarea as the content to be written. `files['index.js'].file.contents` is used to initialize the textarea with initial file content.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/5-editing-a-file-updating-the-iframe.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Reading Process Output in WebContainer - JavaScript\nDESCRIPTION: This snippet shows how to read the output of a process spawned in a WebContainer.  It pipes the `output` stream of the process to a `WritableStream`, allowing you to process the output data. Requires a running `webcontainerInstance` and a spawned process.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/running-processes.md#_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nconst installProcess = await webcontainerInstance.spawn('npm', ['install']);\n\n  installProcess.output.pipeTo(new WritableStream({\n    write(data) {\n      console.log(data);\n    }\n  }));\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - Nuxt 3\nDESCRIPTION: This snippet configures COOP and COEP headers for all pages in a Nuxt 3 application via the `nuxt.config.js` file.  It modifies the `routeRules` section within the `nitro` configuration to set the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers for all routes. This ensures that every page meets the cross-origin isolation requirements.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n// https://nuxt.com/docs/api/configuration/nuxt-config\nexport default defineNuxtConfig({\n  nitro: {\n    routeRules: {\n      '**': {\n        headers: {\n          'Cross-Origin-Embedder-Policy': 'require-corp',\n          'Cross-Origin-Opener-Policy': 'same-origin',\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - Cloudflare\nDESCRIPTION: This snippet shows how to configure COOP and COEP headers for a specific page (e.g., `/tutorial`) using the `_headers` file in Cloudflare. It sets the `Cross-Origin-Embedder-Policy` to `require-corp` and `Cross-Origin-Opener-Policy` to `same-origin` for only the specified route. This is useful for applying the headers only where WebContainers are used.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n/tutorial\n  Cross-Origin-Embedder-Policy: require-corp\n  Cross-Origin-Opener-Policy: same-origin\n```\n\n----------------------------------------\n\nTITLE: Deleting File or Directory using fs.rm (JavaScript)\nDESCRIPTION: This snippet demonstrates how to delete a file or a directory using the `fs.rm` method. For deleting a directory, the `recursive` option must be set to `true`. The `force` option can also be used for deletion. It requires a WebContainer instance to be initialized.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\n// Delete a file\nawait webcontainerInstance.fs.rm('/src/main.js');\n\n// Delete a directory\nawait webcontainerInstance.fs.rm('/src', { recursive: true });\n```\n\n----------------------------------------\n\nTITLE: Starting Dev Server with WebContainers\nDESCRIPTION: This JavaScript code defines an asynchronous function `startDevServer` that starts an Express app using `npm run start` within a WebContainer. It listens for the `server-ready` event emitted by the WebContainer instance and then updates the `src` attribute of an iframe element with the URL of the running server.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/4-running-dev-server.md#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nasync function startDevServer() {\n  // Run `npm run start` to start the Express app\n  await webcontainerInstance.spawn('npm', ['run', 'start']);\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    iframeEl.src = url;\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - SvelteKit (+page.server.js)\nDESCRIPTION: This snippet demonstrates setting COOP and COEP headers for a specific page (e.g., `/tutorial`) using the `+page.server.js` file within SvelteKit. The `load` function, which runs on the server, sets the headers using the `setHeaders` function, ensuring that only this specific page has the configured headers. It is the preferred approach when you need to control headers on a per-page basis.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('./$types').PageServerLoad} */\nexport const load = ({ setHeaders }) => {\n  setHeaders({\n    'Cross-Origin-Embedder-Policy': 'require-corp',\n    'Cross-Origin-Opener-Policy': 'same-origin',\n  });\n};\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - NextJS\nDESCRIPTION: This snippet shows how to configure COOP and COEP headers for a specific page (e.g., `/tutorial`) within the `next.config.js` file in Next.js. The `headers` configuration option is used to apply the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers only to the `/tutorial` route. This enables cross-origin isolation only where required.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\n// https://nextjs.org/docs/api-reference/next.config.js/introduction\nmodule.exports = {\n  async headers() {\n    return [\n      {\n        source: '/tutorial',\n        headers: [\n          {\n            key: 'Cross-Origin-Embedder-Policy',\n            value: 'require-corp',\n          },\n          {\n            key: 'Cross-Origin-Opener-Policy',\n            value: 'same-origin',\n          },\n        ],\n      },\n    ];\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Mounting Snapshots in WebContainer - TypeScript\nDESCRIPTION: Shows how to fetch a pre-generated snapshot (binary data) from a server and mount it within a WebContainer instance. It details the steps to fetch the snapshot as an ArrayBuffer and then mount it using `webcontainer.mount()`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { WebContainer } from '@webcontainer/api';\n\nconst webcontainer = await WebContainer.boot();\n\nconst snapshotResponse = await fetch('/snapshot');\nconst snapshot = await snapshotResponse.arrayBuffer();\n\nawait webcontainer.mount(snapshot);\n\n```\n\n----------------------------------------\n\nTITLE: Writing to File with WebContainers fs API (main.js)\nDESCRIPTION: This code snippet defines an asynchronous function `writeIndexJS` that writes content to the `/index.js` file within the WebContainers file system. It uses the `webcontainerInstance.fs.writeFile` method to perform the file writing operation. The function takes a string `content` as input, which represents the new content to be written to the file.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/5-editing-a-file-updating-the-iframe.md#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n/** @param {string} content*/\n\nasync function writeIndexJS(content) {\n  await webcontainerInstance.fs.writeFile('/index.js', content);\n};\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - Vercel\nDESCRIPTION: This snippet demonstrates how to configure COOP and COEP headers for a specific page (e.g., `/tutorial`) using the `vercel.json` file. The configuration specifies a `source` for the `/tutorial` route, setting the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers accordingly for that particular page. It's used when only specific pages require cross-origin isolation.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"headers\": [\n    {\n      \"source\": \"/tutorial\",\n      \"headers\": [\n        {\n          \"key\": \"Cross-Origin-Embedder-Policy\",\n          \"value\": \"require-corp\"\n        },\n        {\n          \"key\": \"Cross-Origin-Opener-Policy\",\n          \"value\": \"same-origin\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - SvelteKit (hook)\nDESCRIPTION: This snippet shows how to configure COOP and COEP headers for a specific page (e.g., `/tutorial`) within the `hooks.server.js` file in a SvelteKit application. The headers are set conditionally based on the request path. This approach allows for fine-grained control over which pages receive the cross-origin isolation headers.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nexport const handle = async ({ request, resolve }) => {\n  const response = await resolve(request);\n\n  if (request.path === '/tutorial') {\n    response.headers.set('Cross-Origin-Embedder-Policy', 'require-corp');\n    response.headers.set('Cross-Origin-Opener-Policy', 'same-origin');\n  }\n\n  return response;\n};\n```\n\n----------------------------------------\n\nTITLE: Mounting project files in WebContainer with JavaScript\nDESCRIPTION: This JavaScript snippet demonstrates how to mount project files into the WebContainer's file system using the `mount` method. This effectively copies the files into the WebContainer environment for use within the container.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.mount(projectFiles);\n```\n\n----------------------------------------\n\nTITLE: Generating Snapshots for WebContainer - TypeScript\nDESCRIPTION: Demonstrates how to generate a snapshot of a folder using `@webcontainer/snapshot` and serve it. It outlines both an Express-based server route and a SvelteKit-like approach for providing the snapshot as a response with the correct content type.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { snapshot } from '@webcontainer/snapshot';\n\n// snapshot is a `Buffer`\nconst folderSnapshot = await snapshot(SOURCE_CODE_FOLDER);\n\n// for an express-based application\napp.get('/snapshot', (req, res) => {\n  res\n    .setHeader('content-type', 'application/octet-stream')\n    .send(snapshot);\n});\n\n// for a SvelteKit-like application\nexport function getSnapshot(req: Request) {\n  return new Response(sourceSnapshot, {\n    headers: {\n      'content-type': 'application/octet-stream',\n    },\n  });\n}\n\n```\n\n----------------------------------------\n\nTITLE: Mounting to a Different Path in WebContainer - JavaScript\nDESCRIPTION: Shows how to mount files to a specific path within the WebContainer file system using the `mountPoint` property. It illustrates mounting files to a 'my-mount-point' directory.  Remember to create the directory first using `mkdir`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('@webcontainer/api').FileSystemTree} */\n\nconst files = {\n  'package.json': {\n    /* Omitted for brevity */\n  },\n  'index.html': {\n    /* Omitted for brevity */\n  },\n};\n\nawait webcontainerInstance.mount(files, { mountPoint: 'my-mount-point' });\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.fs.mkdir('my-mount-point');\nawait webcontainerInstance.mount(files, { mountPoint: 'my-mount-point' });\n\n```\n\n----------------------------------------\n\nTITLE: Starting a Dev Server in WebContainer using JavaScript\nDESCRIPTION: This JavaScript function shows how to spawn processes to install dependencies and start a dev server within a WebContainer. It handles the installation process and throws an error if it fails, then it starts the dev server.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nasync function startDevServer() {\n  const installProcess = await webcontainerInstance.spawn('npm', ['install']);\n\n  const installExitCode = await installProcess.exit;\n\n  if (installExitCode !== 0) {\n    throw new Error('Unable to run npm install');\n  }\n\n  // `npm run dev`\n  await webcontainerInstance.spawn('npm', ['run', 'dev']);\n}\n```\n\n----------------------------------------\n\nTITLE: Adding CORS Headers with Vite Plugin (JavaScript)\nDESCRIPTION: This snippet demonstrates how to create a Vite plugin to add CORS headers to responses in a Vite-based application. It sets the `Cross-Origin-Opener-Policy`, `Cross-Origin-Embedder-Policy`, and `Cross-Origin-Resource-Policy` headers to enable cross-origin isolation. This is particularly useful for WebContainers when dealing with `postMessage` errors related to `SharedArrayBuffers`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/troubleshooting.md#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n   {\n      name: 'add-cors',\n\n      configureServer(server) {\n        server.middlewares.use((_req, res, next) => {\n          res.setHeader('Cross-Origin-Opener-Policy', 'same-origin');\n          res.setHeader('Cross-Origin-Embedder-Policy', 'require-corp');\n          res.setHeader('Cross-Origin-Resource-Policy', 'cross-origin');\n          next();\n        });\n      },\n    }\n```\n\n----------------------------------------\n\nTITLE: Writing a File with Encoding using fs.writeFile (JavaScript)\nDESCRIPTION: This snippet demonstrates how to write a file with a specific encoding using the `fs.writeFile` method. The third argument allows specifying encoding options like `latin1`. It requires a WebContainer instance to be initialized.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.fs.writeFile(\n  '/src/main.js',\n  '\\xE5\\x8D\\x83\\xE8\\x91\\x89\\xE5\\xB8\\x82\\xE3\\x83\\x96\\xE3\\x83\\xAB\\xE3\\x83\\xBC\\xE3\\x82\\xB9',\n  { encoding: 'latin1' }\n);\n```\n\n----------------------------------------\n\nTITLE: Handling Window Resize Event in WebContainer - JavaScript\nDESCRIPTION: This code snippet demonstrates how to handle the window resize event to make a terminal within a WebContainer responsive. It uses the `FitAddon` from `Xterm.js` to adjust the terminal's dimensions and calls the `resize` method on the WebContainer shell process to redraw the screen with the new dimensions. The `cols` and `rows` properties are used to pass the new terminal dimensions.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.addEventListener('resize', () => {\n    fitAddon.fit();\n    shellProcess.resize({\n      cols: terminal.cols,\n      rows: terminal.rows,\n    });\n  });\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies in WebContainer - JavaScript\nDESCRIPTION: This function demonstrates how to install dependencies within a WebContainer instance using `npm install`. It spawns the `npm install` command, waits for the process to exit, and returns the exit code. Requires a running `webcontainerInstance`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/running-processes.md#_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nasync function installDependencies() {\n  // Install dependencies\n  const installProcess = await webcontainerInstance.spawn('npm', ['install']);\n  // Wait for install command to exit\n  return installProcess.exit;\n}\n```\n\n----------------------------------------\n\nTITLE: Navigating and Installing Dependencies\nDESCRIPTION: These commands navigate into the newly created Vite project directory, install the necessary dependencies using npm, and then start the development server.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_1\n\nLANGUAGE: Bash\nCODE:\n```\ncd webcontainers-express-app\nnpm install\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - Vercel\nDESCRIPTION: This snippet demonstrates how to configure COOP and COEP headers for all pages using the `vercel.json` file. The configuration includes a `source` pattern that matches all routes and sets the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers accordingly. This ensures that every page served by Vercel meets the cross-origin isolation requirement.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"headers\": [\n    {\n      \"source\": \"/(.*)\",\n      \"headers\": [\n        {\n          \"key\": \"Cross-Origin-Embedder-Policy\",\n          \"value\": \"require-corp\"\n        },\n        {\n          \"key\": \"Cross-Origin-Opener-Policy\",\n          \"value\": \"same-origin\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Add Terminal Interactivity (JavaScript)\nDESCRIPTION: This JavaScript code modifies the `startShell` function to enable terminal interactivity.  It obtains a writer for the shell process's input stream and then attaches an `onData` handler to the terminal. Each time data is received in the terminal, the handler writes that data to the input stream, effectively sending user input to the shell.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nasync function startShell(terminal) {\n  const shellProcess = await webcontainerInstance.spawn('jsh');\n  shellProcess.output.pipeTo(\n    new WritableStream({\n      write(data) {\n        terminal.write(data);\n      },\n    })\n  );\n\n  const input = shellProcess.input.getWriter();\n  terminal.onData((data) => {\n    input.write(data);\n  });\n\n  return shellProcess;\n};\n```\n\n----------------------------------------\n\nTITLE: Exporting Filesystem Data - Javascript\nDESCRIPTION: Demonstrates how to export the filesystem of a WebContainer using the `export` method. It shows exporting a 'dist' directory as a zip file (Uint8Array) and then creating a Blob from the exported data for further use, such as downloading.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await webcontainerInstance.export('dist', { format: 'zip' });\n\nconst zip = new Blob([data]);\n```\n\n----------------------------------------\n\nTITLE: Defining SpawnOptions interface - TypeScript\nDESCRIPTION: Defines the `SpawnOptions` interface, which allows specifying options for spawning a process within the WebContainer. These options include the current working directory (`cwd`), environment variables (`env`), output control, and terminal settings.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_30\n\nLANGUAGE: ts\nCODE:\n```\nexport interface SpawnOptions {\n  cwd?: string;\n  env?: Record<string, string | number | boolean>;\n  output?: boolean;\n  terminal?: { cols: number; rows: number };\n}\n```\n\n----------------------------------------\n\nTITLE: Writing to terminal in startDevServer\nDESCRIPTION: This code snippet updates the `startDevServer` function to pipe the output of the `npm run start` process to the terminal. It takes terminal instance as an argument.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_8\n\nLANGUAGE: js\nCODE:\n```\n/**\n * @param {Terminal} terminal\n */\nasync function startDevServer(terminal) {\n  // Run `npm run start` to start the Express app\n  const serverProcess = await webcontainerInstance.spawn('npm', [\n    'run',\n    'start',\n  ]);\n  serverProcess.output.pipeTo(\n    new WritableStream({\n      write(data) {\n        terminal.write(data);\n      },\n    })\n  );\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    iframeEl.src = url;\n  });\n}\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - Nuxt 3\nDESCRIPTION: This snippet demonstrates configuring COOP and COEP headers for a specific page (e.g., `/tutorial`) in a Nuxt 3 application using `nuxt.config.js`. The `routeRules` configuration within the `nitro` object is used to define specific headers for the `/tutorial` route. This ensures that the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers are applied only to the designated page.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n// https://nuxt.com/docs/api/configuration/nuxt-config\nexport default defineNuxtConfig({\n  nitro: {\n    routeRules: {\n      '/tutorial': {\n        headers: {\n          'Cross-Origin-Embedder-Policy': 'require-corp',\n          'Cross-Origin-Opener-Policy': 'same-origin',\n        },\n      },\n    },\n  },\n});\n```\n\n----------------------------------------\n\nTITLE: Start Shell Function (JavaScript)\nDESCRIPTION: This JavaScript function, `startShell`, spawns a `jsh` shell within the WebContainer. It pipes the shell's output stream to the `Xterm.js` terminal instance, making the shell's output visible in the terminal. Dependencies include `webcontainerInstance` and `Terminal`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\n/**\n * @param {Terminal} terminal\n */\nasync function startShell(terminal) {\n  const shellProcess = await webcontainerInstance.spawn('jsh');\n  shellProcess.output.pipeTo(\n    new WritableStream({\n      write(data) {\n        terminal.write(data);\n      },\n    })\n  );\n  return shellProcess;\n};\n```\n\n----------------------------------------\n\nTITLE: Import FitAddon (JavaScript)\nDESCRIPTION: This line imports the `FitAddon` class from the `@xterm/addon-fit` package. This allows the application to use the addon to automatically resize the terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { FitAddon } from '@xterm/addon-fit';\n```\n\n----------------------------------------\n\nTITLE: Creating Folders and Files in WebContainer - JavaScript\nDESCRIPTION: Demonstrates how to create a directory structure including files within directories in WebContainers. The example showcases how to represent a 'src' directory containing 'main.js' and 'main.css' files along with 'package.json' and 'index.html' files at the root.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('@webcontainer/api').FileSystemTree} */\n\nconst files = {\n  // This is a directory - provide its name as a key\n  src: {\n    // Because it's a directory, add the \"directory\" key\n    directory: {\n      // This is a file - provide its path as a key:\n      'main.js': {\n        // Because it's a file, add the \"file\" key\n        file: {\n          contents: `\n            console.log('Hello from WebContainers!')\n          `,\n        },\n      },\n      // This is another file inside the same folder\n      'main.css': {\n        // Because it's a file, add the \"file\" key\n        file: {\n          contents: `\n            body {\n              margin: 0;\n            }\n          `,\n        },\n      },\n    },\n  },\n  // This is a file outside the folder\n  'package.json': {\n    /* Omitted for brevity */\n  },\n  // This is another file outside the folder\n  'index.html': {\n    /* Omitted for brevity */\n  },\n};\n\nawait webcontainerInstance.mount(files);\n\n```\n\n----------------------------------------\n\nTITLE: Streaming npm install output (JavaScript)\nDESCRIPTION: This snippet shows how to capture and process the output stream of the `npm install` command. It uses the `output` property of the process spawned by `webcontainerInstance.spawn` and pipes the output to a `WritableStream`. This allows for real-time logging or processing of the command's output.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst installProcess = await webcontainerInstance.spawn('npm', ['install']);\n  \ninstallProcess.output.pipeTo(new WritableStream({\n  write(data) {\n    console.log(data);\n  }\n}));\n```\n\n----------------------------------------\n\nTITLE: Call startShell Function (JavaScript)\nDESCRIPTION: This JavaScript code calls the `startShell` function at the end of the event listener attached to the `load` event. This initializes the shell after the WebContainer is booted and the files are mounted.  It passes the `terminal` object as a parameter to `startShell`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n\n  const terminal = new Terminal({\n    convertEol: true,\n  });\n  terminal.open(terminalEl);\n\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    iframeEl.src = url;\n  });\n\n  startShell(terminal);\n});\n```\n\n----------------------------------------\n\nTITLE: Defining FileSystemTree interface - TypeScript\nDESCRIPTION: Defines the `FileSystemTree` interface, representing a tree-like structure for defining the contents of a folder to be mounted. It's a map of names to `FileNode`, `SymlinkNode`, or `DirectoryNode` objects.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_25\n\nLANGUAGE: ts\nCODE:\n```\ninterface FileSystemTree {\n  [name: string]: FileNode | SymlinkNode | DirectoryNode;\n}\n```\n\n----------------------------------------\n\nTITLE: Spawning a Process in WebContainer - JavaScript\nDESCRIPTION: This snippet demonstrates how to spawn a process inside a WebContainer instance using the `spawn` method.  It takes the command as a string and arguments as an array. It returns a `WebContainerProcess` object. Requires a running `webcontainerInstance`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/running-processes.md#_snippet_0\n\nLANGUAGE: js\nCODE:\n```\nwebcontainerInstance.spawn('npm', ['install']);\n```\n\nLANGUAGE: js\nCODE:\n```\nwebcontainerInstance.spawn('ls', ['src', '-l']);\n```\n\n----------------------------------------\n\nTITLE: Representing a directory in WebContainers JavaScript\nDESCRIPTION: Illustrates how a directory is represented in WebContainers as a JavaScript object.  It contains the directory name as a key and a nested 'directory' key.  Files are added inside the 'directory' key.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = {\n  // This is a directory - provide its name as a key\n  src: {\n    // Because it's a directory, add the \"directory\" key\n    directory: {\n      // Here we will add files\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - Cloudflare\nDESCRIPTION: This snippet demonstrates how to configure COOP and COEP headers for all pages using the `_headers` file in Cloudflare. It sets the `Cross-Origin-Embedder-Policy` to `require-corp` and `Cross-Origin-Opener-Policy` to `same-origin` for every route. This configuration ensures that all pages served by Cloudflare meet the cross-origin isolation requirement for WebContainers.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n/*\n  Cross-Origin-Embedder-Policy: require-corp\n  Cross-Origin-Opener-Policy: same-origin\n```\n\n----------------------------------------\n\nTITLE: Defining DirectoryNode interface - TypeScript\nDESCRIPTION: Defines the `DirectoryNode` interface, representing a directory in the `FileSystemTree`.  The `directory` property contains another `FileSystemTree` representing the directory's contents.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_29\n\nLANGUAGE: ts\nCODE:\n```\ninterface DirectoryNode {\n  directory: FileSystemTree;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a FileSystemTree example - JavaScript\nDESCRIPTION: Example of creating a `FileSystemTree` to represent a project structure.  It demonstrates how to define directories, files with content, and symbolic links within the tree.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_26\n\nLANGUAGE: js\nCODE:\n```\nconst tree = {\n  myproject: {\n    directory: {\n      'foo.js': {\n        file: {\n          contents: 'const x = 1;',\n        },\n      },\n      'bar.js': {\n        file: {\n          symlink: './foo.js',\n        },\n      },\n      '.envrc': {\n        file: {\n          contents: 'ENVIRONMENT=staging'\n        }\n      },\n    },\n  },\n  emptyFolder: {\n    directory: {}\n  },\n};\n```\n\n----------------------------------------\n\nTITLE: Remove Unnecessary Code in main.js (JavaScript)\nDESCRIPTION: This snippet removes the `installDependencies` and `startDevServer` methods from the `window.addEventListener('load', ...)` block in `main.js`. It retains the `server-ready` event listener, which is still needed to update the iframe's source when the server is ready.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n\n  const terminal = new Terminal({\n    convertEol: true,\n  });\n  terminal.open(terminalEl);\n\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    iframeEl.src = url;\n  });\n});\n```\n\n----------------------------------------\n\nTITLE: Running npm install command in WebContainer (JavaScript)\nDESCRIPTION: This snippet shows how to execute the `npm install` command inside a WebContainer instance using the `webcontainerInstance.spawn` method.  The command is broken down into its constituent parts (`npm` and `install`) and passed as arguments to the `spawn` method. This installs the project dependencies.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nwebcontainerInstance.spawn('npm', ['install']);\n```\n\n----------------------------------------\n\nTITLE: Vue Component Setup\nDESCRIPTION: This is the setup block for a Vue component written in TypeScript. It imports and registers components for use within the template. The `lang=\"ts\"` attribute indicates that the code within the `<script>` tag is TypeScript.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/builder-io-playground.md#_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Defining ServerReadyListener Type - Typescript\nDESCRIPTION: Defines the `ServerReadyListener` type, a function invoked when a server within the WebContainer is started and ready to receive traffic. It receives the port number and the URL of the server.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n(port: number, url: string): void\n```\n\n----------------------------------------\n\nTITLE: Spawning a Process with Arguments - Javascript\nDESCRIPTION: Illustrates how to spawn a process within the WebContainer with command-line arguments, using the `spawn` method.  In this example, it executes the `npm i` command to install dependencies.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst install = await webcontainerInstance.spawn('npm', ['i']);\n```\n\n----------------------------------------\n\nTITLE: Vue Component Setup with TypeScript\nDESCRIPTION: This code snippet sets up a Vue component using TypeScript. It imports necessary components and data, defines the component using `<script setup lang=\"ts\">`, and uses imported data to configure the page.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/stackblitz-web-publisher.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n<script setup lang=\"ts\">\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\nimport VideoLink from '@theme/components/Helpers/VideoLink.vue';\nimport AttributionLinks from '@theme/components/Helpers/AttributionLinks.vue';\nimport { people } from '@theme/data/people';\nconst { SYLWIA_VARGAS } = people;\n</script>\n```\n\n----------------------------------------\n\nTITLE: Defining PortListener Type - Typescript\nDESCRIPTION: Defines the `PortListener` type, which is a function that's called when a port is opened or closed by a process running within the WebContainer. It receives the port number, the type of event ('open' or 'close'), and the URL associated with the port.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n(port: number, type: \"open\" | \"close\", url: string): void\n```\n\n----------------------------------------\n\nTITLE: Installing WebContainer API using npm\nDESCRIPTION: This command installs the WebContainer API package from npm, allowing you to use its functionalities in your project. Ensure you are in the project directory before running this command.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @webcontainer/api\n```\n\n----------------------------------------\n\nTITLE: Defining PreviewMessage Type - Typescript\nDESCRIPTION: Defines the `PreviewMessage` type, representing messages received from a preview iframe. It's a union of `UncaughtExceptionMessage`, `UnhandledRejectionMessage`, and `ConsoleErrorMessage`, and includes base information such as `previewId`, `port`, `pathname`, `search`, and `hash`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype PreviewMessage = (UncaughtExceptionMessage | UnhandledRejectionMessage | ConsoleErrorMessage) & BasePreviewMessage;\n\ninterface BasePreviewMessage {\n    previewId: string;\n    port: number;\n    pathname: string;\n    search: string;\n    hash: string;\n}\n\ninterface UncaughtExceptionMessage {\n    type: PreviewMessageType.UncaughtException;\n    message: string;\n    stack: string | undefined;\n}\n\ninterface UnhandledRejectionMessage {\n    type: PreviewMessageType.UnhandledRejection;\n    message: string;\n    stack: string | undefined;\n}\n\ninterface ConsoleErrorMessage {\n    type: PreviewMessageType.ConsoleError;\n    args: any[];\n    stack: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining BootOptions Interface - Typescript\nDESCRIPTION: Defines the `BootOptions` interface used when booting a WebContainer instance. It allows configuration of Cross-Origin Embedder Policy (COEP), setting a working directory name, and forwarding preview errors from embedded iframes to the parent page. These options influence the environment and error handling during the WebContainer's lifecycle.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface BootOptions {\n  coep?: 'require-corp' | 'credentialless' | 'none';\n  workdirName?: string;\n  forwardPreviewErrors?: boolean | 'exceptions-only';\n}\n```\n\n----------------------------------------\n\nTITLE: Calling installDependencies function (JavaScript)\nDESCRIPTION: This snippet demonstrates how to call the `installDependencies` function within an event listener. It initializes the WebContainer, mounts files, and then calls `installDependencies`.  Error handling is included to catch installation failures. Dependencies include the `files` object and `webcontainerInstance`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  const exitCode = await installDependencies();\n  if (exitCode !== 0) {\n    throw new Error('Installation failed');\n  };\n});\n```\n\n----------------------------------------\n\nTITLE: Using Vue Component with Data\nDESCRIPTION: This HTML-like code snippet utilizes the imported `Home` Vue component and passes the `footerSections` data as a prop. This likely renders the `Home` component with dynamic content provided by the `footerSections` data, customizing its appearance or functionality.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/index.md#_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<Home :footerSections=\"footerSections\" />\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for All Pages - SvelteKit\nDESCRIPTION: This snippet configures COOP and COEP headers for all pages in a SvelteKit application using the `hooks.server.js` file. It intercepts every request, resolves it, and then sets the `Cross-Origin-Embedder-Policy` and `Cross-Origin-Opener-Policy` headers on the response before returning it. This ensures that all pages served have the necessary headers for cross-origin isolation.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nexport const handle = async ({ request, resolve }) => {\n  const response = await resolve(request);\n\n  response.headers.set('Cross-Origin-Embedder-Policy', 'require-corp');\n  response.headers.set('Cross-Origin-Opener-Policy', 'same-origin');\n\n  return response;\n};\n```\n\n----------------------------------------\n\nTITLE: Auth LoggedIn Example - TypeScript\nDESCRIPTION: This snippet demonstrates how to use the `auth.loggedIn` function to wait for a user to be logged in before performing actions like installing private packages. It first boots the WebContainer instance, then waits for authentication using `auth.loggedIn`, and finally spawns an npm install process.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_12\n\nLANGUAGE: ts\nCODE:\n```\nconst instance = await WebContainer.boot();\n\n// wait until the user is logged in\nawait auth.loggedIn();\n\n// we can now fetch private packages from our organisation\nawait instance.spawn('npm', ['install']);\n```\n\n----------------------------------------\n\nTITLE: Vue Component Import\nDESCRIPTION: Imports Vue components `PageHeading` and `Screenshot` for use in the current component. `PageHeading` is likely a custom component used for displaying the title and category of the project, while `Screenshot` displays an image with an optional link.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/builder-io-playground.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n```\n\n----------------------------------------\n\nTITLE: Defining Export Options Interface in TypeScript\nDESCRIPTION: This TypeScript interface `ExportOptions` defines the structure for configuring data exports. It allows specifying the export `format` (json, binary, or zip) and providing globbing patterns for including (`includes`) or excluding (`excludes`) files during the export process. The `format` defaults to `json` if not specified.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_31\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface ExportOptions {\n  format?: 'json' | 'binary' | 'zip',\n  includes?: string[];\n  excludes?: string[];\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Preview Script - JavaScript\nDESCRIPTION: This snippet demonstrates how to set a script that will be injected into all previews within a WebContainer instance. It defines a simple JavaScript script that logs \"Hello world!\" to the console and then uses the `setPreviewScript` method to apply it to all previews.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nconst script = `\n  console.log('Hello world!');\n`;\n\nawait webcontainerInstance.setPreviewScript(script);\n\n// now all previews will always print hello world to the console if they serve HTML\n```\n\n----------------------------------------\n\nTITLE: Running the documentation site in development mode\nDESCRIPTION: This code snippet provides the commands needed to set up and run the WebContainer API documentation site locally in development mode. It assumes you have Node.js and npm installed. First, install the dependencies using `npm install`, then start the development server with `npm run dev`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/README.md#_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Passing Terminal instance to functions\nDESCRIPTION: This code snippet updates the `installDependencies` and `startDevServer` function calls to pass the `terminal` instance as an argument. This allows these functions to write output to the terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n\n  const terminal = new Terminal({\n    convertEol: true,\n  });\n  terminal.open(terminalEl);\n\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  const exitCode = await installDependencies(terminal);\n  if (exitCode !== 0) {\n    throw new Error('Installation failed');\n  };\n\n  startDevServer(terminal);\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Preview Message Event Handler - Javascript\nDESCRIPTION: Demonstrates how to register an event handler for 'preview-message' events. These events are emitted by the WebContainer when messages are received from a preview iframe, providing a mechanism for the parent page to process messages such as errors originating from within the previewed content.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nwebcontainerInstance.on('preview-message', (message) => {\n  // process the message received from a preview\n});\n```\n\n----------------------------------------\n\nTITLE: Running cd hello-world command in WebContainer (JavaScript)\nDESCRIPTION: This code demonstrates how to execute the `cd hello-world` command within a WebContainer instance. The command is split into the command itself (`cd`) and its argument (`hello-world`) and passed to the `webcontainerInstance.spawn` method.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nwebcontainerInstance.spawn('cd', ['hello-world']);\n```\n\n----------------------------------------\n\nTITLE: Writing a File using fs.writeFile (JavaScript)\nDESCRIPTION: This snippet demonstrates how to write a file using the `fs.writeFile` method. If the file does not exist, it will be created. If it exists, it will be overwritten. It requires a WebContainer instance to be initialized.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.fs.writeFile('/src/main.js', 'console.log(\"Hello from WebContainers!\")');\n```\n\n----------------------------------------\n\nTITLE: Load and Fit FitAddon (JavaScript)\nDESCRIPTION: This JavaScript code creates a `FitAddon` instance, loads it into the terminal, and then calls the `fit()` method to adjust the terminal's dimensions to fit its container. This ensures that the terminal is properly sized when the page loads.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n\n  const fitAddon = new FitAddon();\n\n  const terminal = new Terminal({\n    convertEol: true,\n  });\n  terminal.loadAddon(fitAddon);\n  terminal.open(terminalEl);\n\n  fitAddon.fit();\n\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  // Wait for `server-ready` event\n  webcontainerInstance.on('server-ready', (port, url) => {\n    iframeEl.src = url;\n  });\n\n  startShell(terminal);\n});\n```\n\n----------------------------------------\n\nTITLE: SvelteKit Page Heading Component (Vue)\nDESCRIPTION: This snippet utilizes the `PageHeading` component to display the title and category of the SvelteKit community project.  It sets the `title` prop to \"SvelteKit\" and the `category` prop to \"tutorial\" to provide context for the project documentation.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/sveltekit.md#_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<PageHeading title=\"SvelteKit\" category=\"tutorial\" />\n```\n\n----------------------------------------\n\nTITLE: Reading file with encoding using readFile - TypeScript\nDESCRIPTION: Example demonstrating how to read a file with a specified encoding using the `readFile` method of the WebContainer's file system API.  It specifies the file path and the desired encoding (utf-8) as arguments.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_15\n\nLANGUAGE: ts\nCODE:\n```\nconst content = await webcontainerInstance.fs.readFile('/package.json', 'utf-8');\n```\n\n----------------------------------------\n\nTITLE: Creating and opening Terminal instance\nDESCRIPTION: This code snippet creates a new `Terminal` instance and attaches it to the `terminalEl` element. The `convertEol` option is set to `true` to ensure the cursor always starts at the beginning of the next line.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_4\n\nLANGUAGE: js\nCODE:\n```\nwindow.addEventListener('load', async () => {\n  textareaEl.value = files['index.js'].file.contents;\n  textareaEl.addEventListener('input', (e) => {\n    writeIndexJS(e.currentTarget.value);\n  });\n\n  const terminal = new Terminal({\n    convertEol: true,\n  });\n  terminal.open(terminalEl);\n\n  // Call only once\n  webcontainerInstance = await WebContainer.boot();\n  await webcontainerInstance.mount(files);\n\n  const exitCode = await installDependencies();\n  if (exitCode !== 0) {\n    throw new Error('Installation failed');\n  };\n\n  startDevServer();\n});\n```\n\n----------------------------------------\n\nTITLE: Adding StackBlitz Domains to Edge Enhanced Security Exceptions\nDESCRIPTION: This code snippet shows the domains that need to be added as exceptions in Microsoft Edge's 'Enhanced your security on the web' settings when set to 'Strict'. This allows StackBlitz projects to run by enabling WebAssembly usage.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/browser-config.md#_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\nstackblitz.com\n[*.]staticblitz.com\n```\n\n----------------------------------------\n\nTITLE: Deleting a directory recursively using rm - JavaScript\nDESCRIPTION: Demonstrates how to delete a directory and its contents recursively using the `rm` method. It requires setting the `recursive` option to `true`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_20\n\nLANGUAGE: js\nCODE:\n```\nawait webcontainerInstance.fs.rm('/src', { recursive: true });\n```\n\n----------------------------------------\n\nTITLE: Updating main.js - Adding Textarea and Iframe\nDESCRIPTION: This JavaScript snippet updates the content of the `main.js` file to include a `textarea` and an `iframe` within a container. It sets up the basic HTML structure for the editor and preview areas.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\ndocument.querySelector('#app').innerHTML = `\n  <div class=\"container\">\n    <div class=\"editor\">\n      <textarea>I am a textarea</textarea>\n    </div>\n    <div class=\"preview\">\n      <iframe src=\"loading.html\"></iframe>\n    </div>\n  </div>\n`\n```\n\n----------------------------------------\n\nTITLE: Loading Multiple Files into WebContainer - JavaScript\nDESCRIPTION: Loads multiple files (package.json and index.html) into a WebContainer using the `mount` method. The provided object defines each file and its content, allowing WebContainer to create these files in its virtual file system.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('@webcontainer/api').FileSystemTree} */\n\nconst files = {\n  'package.json': {\n    file: {\n      contents: `\n        {\n          \"name\": \"vite-starter\",\n          \"private\": true,\n          \"version\": \"0.0.0\",\n          \"type\": \"module\",\n          \"scripts\": {\n            \"dev\": \"vite\",\n            \"build\": \"vite build\",\n            \"preview\": \"vite preview\"\n          },\n          \"devDependencies\": {\n            \"vite\": \"^4.0.4\"\n          }\n        }`,\n    },\n  },\n  'index.html': {\n    file: {\n      contents: `\n        <!DOCTYPE html>\n        <html lang=\"en\">\n          <head>\n            <meta charset=\"UTF-8\" />\n            <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n            <title>Vite App</title>\n          </head>\n          <body>\n            <div id=\"app\"></div>\n            <script type=\"module\" src=\"/src/main.js\"></script>\n          </body>\n        </html>`,\n    },\n  },\n};\n\nawait webcontainerInstance.mount(files);\n\n```\n\n----------------------------------------\n\nTITLE: Writing a file using writeFile - JavaScript\nDESCRIPTION: Example showing how to write a file using the `writeFile` method with default options.  It takes the file path and content as arguments.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_21\n\nLANGUAGE: js\nCODE:\n```\nawait webcontainerInstance.fs.writeFile('/src/main.js', 'console.log(\"Hello from WebContainers!\")');\n```\n\n----------------------------------------\n\nTITLE: Updating main.js - Initial Content\nDESCRIPTION: This JavaScript snippet updates the content of the `main.js` file. It imports the CSS file and then clears the content of the element with the ID 'app'.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport './style.css';\n\ndocument.querySelector('#app').innerHTML = ``;\n```\n\n----------------------------------------\n\nTITLE: Renaming a file using rename - JavaScript\nDESCRIPTION: Demonstrates how to rename a file using the `rename` method of the WebContainer's file system API. It takes the old path and the new path as arguments.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_17\n\nLANGUAGE: js\nCODE:\n```\nawait webcontainerInstance.fs.rename('/src/index.js', '/src/main.js');\n```\n\n----------------------------------------\n\nTITLE: Watching a directory recursively using watch - JavaScript\nDESCRIPTION: Example showing how to watch a directory and its subdirectories for changes using the `watch` method with the `recursive` option set to `true`. It logs the filename and event type to the console.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_24\n\nLANGUAGE: js\nCODE:\n```\nwebcontainerInstance.fs.watch('/src', { recursive: true }, (event, filename) => {\n    console.log(`file: ${filename} action: ${event}`);\n});\n```\n\n----------------------------------------\n\nTITLE: Setting COOP/COEP Headers for Specific Page - Netlify\nDESCRIPTION: This snippet shows how to configure COOP and COEP headers for a specific page (e.g., `/tutorial`) in a `netlify.toml` file. It sets the `Cross-Origin-Embedder-Policy` to `require-corp` and `Cross-Origin-Opener-Policy` to `same-origin` for a specified route only. This approach is beneficial when cross-origin isolation is required only for certain pages.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/configuring-headers.md#_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n[[headers]]\n  for = \"/tutorial\"\n  [headers.values]\n    Cross-Origin-Embedder-Policy = \"require-corp\"\n    Cross-Origin-Opener-Policy = \"same-origin\"\n```\n\n----------------------------------------\n\nTITLE: Writing a file with encoding using writeFile - JavaScript\nDESCRIPTION: Example demonstrating how to write a file with a specified encoding using the `writeFile` method. It specifies the file path, content, and encoding (latin1) as arguments.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_22\n\nLANGUAGE: js\nCODE:\n```\nawait webcontainerInstance.fs.writeFile(\n  '/src/main.js',\n  '\\xE5\\x8D\\x83\\xE8\\x91\\x89\\xE5\\xB8\\x82\\xE3\\x83\\x96\\xE3\\x83\\xAB\\xE3\\x83\\xBC\\xE3\\x82\\xB9',\n  { encoding: 'latin1' }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Options interface for readdir - TypeScript\nDESCRIPTION: Defines the `Options` interface for the `readdir` method.  It allows specifying the encoding for the returned data and whether to return `Dirent` objects instead of filenames.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_14\n\nLANGUAGE: ts\nCODE:\n```\ninterface Options {\n  encoding?: BufferEncoding;\n  withFileTypes?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Running ls src -l command in WebContainer (JavaScript)\nDESCRIPTION: This example shows how to run the `ls src -l` command inside a WebContainer.  The command is split into its component parts: the command itself (`ls`) and the arguments (`src`, `-l`). These are passed as arguments to the `webcontainerInstance.spawn` method.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/3-installing-dependencies.md#_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nwebcontainerInstance.spawn('ls', ['src', '-l']);\n```\n\n----------------------------------------\n\nTITLE: Defining Options interface for rm - TypeScript\nDESCRIPTION: Defines the `Options` interface for the `rm` method. It includes options to force deletion and recursively remove directories.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_18\n\nLANGUAGE: ts\nCODE:\n```\ninterface Options {\n  force?: boolean;\n  recursive?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Reading file without encoding using readFile - TypeScript\nDESCRIPTION: Example demonstrating how to read a file without specifying an encoding using the `readFile` method. This returns a `UInt8Array` containing the file's content.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_16\n\nLANGUAGE: ts\nCODE:\n```\nconst bytes = await webcontainerInstance.fs.readFile('/package.json');\n```\n\n----------------------------------------\n\nTITLE: Resize Output Lines in Shell (JavaScript)\nDESCRIPTION: This JavaScript code modifies the `startShell` function to pass the terminal's dimensions (columns and rows) to the `webcontainerInstance.spawn` method. This allows the WebContainer process to be aware of the terminal's size and properly wrap the output.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_8\n\nLANGUAGE: JavaScript\nCODE:\n```\nasync function startShell(terminal) {\n  const shellProcess = await webcontainerInstance.spawn('jsh', {\n    terminal: {\n      cols: terminal.cols,\n      rows: terminal.rows,\n    },\n  });\n  shellProcess.output.pipeTo(\n    new WritableStream({\n      write(data) {\n        terminal.write(data);\n      },\n    })\n  );\n\n  const input = shellProcess.input.getWriter();\n\n  terminal.onData((data) => {\n    input.write(data);\n  });\n\n  return shellProcess;\n}\n```\n\n----------------------------------------\n\nTITLE: Watching a file using watch - JavaScript\nDESCRIPTION: Demonstrates how to watch a file for changes using the `watch` method.  It logs the event type to the console.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_23\n\nLANGUAGE: js\nCODE:\n```\nwebcontainerInstance.fs.watch('/src/main.js', (event) => {\n    console.log(`action: ${event}`);\n});\n```\n\n----------------------------------------\n\nTITLE: Adding StackBlitz URL Patterns to Chrome Cookie Exceptions\nDESCRIPTION: This code snippet demonstrates the URL patterns that need to be added to the 'Sites that can always use cookies' section in Chrome's cookie settings to allow StackBlitz projects to use Service Workers. This is necessary if the 'Block Third Party Cookies' option is enabled in Chrome.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/browser-config.md#_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\nhttps://[*.]stackblitz.io\nhttps://[*.]webcontainer.io\n```\n\n----------------------------------------\n\nTITLE: Configuring Cross-Origin Isolation with YAML\nDESCRIPTION: This YAML configuration snippet sets the necessary headers for cross-origin isolation, which is required by WebContainers. These headers ensure that `SharedArrayBuffer` can be used.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nCross-Origin-Embedder-Policy: require-corp\nCross-Origin-Opener-Policy: same-origin\n```\n\n----------------------------------------\n\nTITLE: Loading a Single File into WebContainer - JavaScript\nDESCRIPTION: Loads a single file (package.json) into the WebContainer's file system using the `mount` method.  The code demonstrates the FileSystemTree structure required for mounting files and then reads the file content using `readFile`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('@webcontainer/api').FileSystemTree} */\n\nconst files = {\n  'package.json': {\n    file: {\n      contents: `\n        {\n          \"name\": \"vite-starter\",\n          \"private\": true,\n          \"version\": \"0.0.0\",\n          \"type\": \"module\",\n          \"scripts\": {\n            \"dev\": \"vite\",\n            \"build\": \"vite build\",\n            \"preview\": \"vite preview\"\n          },\n          \"devDependencies\": {\n            \"vite\": \"^4.0.4\"\n          }\n        }`,\n    },\n  },\n};\n\nawait webcontainerInstance.mount(files);\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst file = await webcontainerInstance.fs.readFile('/package.json');\n\n```\n\n----------------------------------------\n\nTITLE: Creating a WebContainer instance in JavaScript\nDESCRIPTION: This JavaScript code snippet imports the `WebContainer` class and creates a single instance using the `boot` method. The `boot` method can only be called once and only one WebContainer instance can be created.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { WebContainer } from '@webcontainer/api';\n\n// Call only once\nconst webcontainerInstance = await WebContainer.boot();\n```\n\n----------------------------------------\n\nTITLE: Reading a Directory in WebContainer - JavaScript\nDESCRIPTION: Explains how to read the contents of a directory within a WebContainer using the `readdir` method. It demonstrates retrieving an array of filenames and directory names, and mentions options for retrieving `Dirent` objects with file type information or specifying the encoding.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = await webcontainerInstance.fs.readdir('/src');\n//    ^ is an array of strings\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = await webcontainerInstance.fs.readdir('/src', {\n  withFileTypes: true,\n});\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = await webcontainerInstance.fs.readdir('/src', { encoding: 'buffer' });\n//    ^ it is an array of UInt8Array\n\n```\n\n----------------------------------------\n\nTITLE: Representing package.json file in WebContainers JavaScript\nDESCRIPTION: Demonstrates how a `package.json` file is represented as a nested JavaScript object within WebContainers. The object includes the file path, the 'file' key, and the 'contents' key holding the JSON content as a string.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = {\n  // This is a file - provide its path as a key:\n  'package.json': {\n    // Because it's a file, add the \"file\" key\n    file: {\n      // Now add its contents\n      contents: `\n        {\n          \"name\": \"vite-starter\",\n          \"private\": true,\n         // ...\n          },\n          \"devDependencies\": {\n            \"vite\": \"^4.0.4\"\n          }\n        }`,\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Importing Xterm.js\nDESCRIPTION: This line imports the `Terminal` class from the `@xterm/xterm` package. This is necessary to create an instance of the terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport { Terminal } from '@xterm/xterm'\n```\n\n----------------------------------------\n\nTITLE: Creating a Recursive Directory using fs.mkdir (JavaScript)\nDESCRIPTION: This snippet demonstrates how to create a nested directory using the `recursive` option with the `fs.mkdir` method. This allows creating multiple levels of directories in a single operation. It requires a WebContainer instance to be initialized.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.fs.mkdir('this/is/my/nested/folder', { recursive: true });\n```\n\n----------------------------------------\n\nTITLE: Reading a File in WebContainer - JavaScript\nDESCRIPTION: Illustrates how to read the contents of a file within a WebContainer using the `readFile` method of the `fs` property. It shows how to retrieve the file as a `UInt8Array` by default, or as a string if a specific encoding (e.g., 'utf-8') is provided.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst file = await webcontainerInstance.fs.readFile('/package.json');\n//    ^ it is a UInt8Array\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\nconst file = await webcontainerInstance.fs.readFile('/package.json', 'utf-8');\n//    ^ it is a string\n\n```\n\n----------------------------------------\n\nTITLE: Representing a directory with file in WebContainers JavaScript\nDESCRIPTION: Demonstrates representing a directory with a file inside it using nested JavaScript objects in WebContainers. It showcases the structure for defining a directory and including a file (e.g., 'main.js') with its content.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nconst files = {\n  // This is a directory - provide its name as a key\n  src: {\n    // Because it's a directory, add the \"directory\" key\n    directory: {\n      // This is a file - provide its path as a key:\n      'main.js': {\n        // Because it's a file, add the \"file\" key\n        file: {\n          contents: `\n            console.log('Hello from WebContainers!')\n          `,\n        },\n      },\n    },\n  },\n};\n\n```\n\n----------------------------------------\n\nTITLE: Setting up Vue component with TypeScript\nDESCRIPTION: This code snippet demonstrates how to set up a Vue component using TypeScript. It imports necessary components and uses the `<script setup lang=\"ts\">` syntax to define the component's logic.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/clack.md#_snippet_0\n\nLANGUAGE: Vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Previewing the Dev Server in an Iframe using JavaScript\nDESCRIPTION: This JavaScript code snippet sets the source of an iframe element to the URL provided by the `server-ready` event. This allows you to preview the running dev server within the iframe.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/quickstart.md#_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nwebcontainerInstance.on('server-ready', (port, url) => (iframeEl.src = url));\n```\n\n----------------------------------------\n\nTITLE: Defining ErrorListener Type - Typescript\nDESCRIPTION: Defines the `ErrorListener` type, which is a function that's called when an internal error is triggered within the WebContainer. It receives an error object containing a message.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n(error: { message: string }): void\n```\n\n----------------------------------------\n\nTITLE: Install @xterm/addon-fit (Bash)\nDESCRIPTION: This command installs the `@xterm/addon-fit` plugin using npm.  This plugin provides the functionality to automatically adjust the terminal's columns and rows based on the size of its containing element.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_5\n\nLANGUAGE: Bash\nCODE:\n```\nnpm install @xterm/addon-fit\n```\n\n----------------------------------------\n\nTITLE: Creating a Directory using fs.mkdir (JavaScript)\nDESCRIPTION: This snippet demonstrates how to create a directory using the `fs.mkdir` method. If the directory already exists, it will throw an error. It requires a WebContainer instance to be initialized.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/working-with-the-file-system.md#_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nawait webcontainerInstance.fs.mkdir('src');\n```\n\n----------------------------------------\n\nTITLE: Installing Xterm.js using npm\nDESCRIPTION: This command installs the `@xterm/xterm` package, which is a terminal frontend component, using npm. It's a prerequisite for adding a terminal to the web application.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @xterm/xterm\n```\n\n----------------------------------------\n\nTITLE: Defining BufferEncoding Type Alias in TypeScript\nDESCRIPTION: This TypeScript type alias `BufferEncoding` defines the allowed string values for buffer encoding formats. It encompasses various encoding schemes like 'ascii', 'utf8', 'base64', 'latin1', and 'hex'. This type is used to ensure type safety when specifying the encoding format for buffer operations.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_33\n\nLANGUAGE: typescript\nCODE:\n```\ntype BufferEncoding =\n  | 'ascii'\n  | 'utf8'\n  | 'utf-8'\n  | 'utf16le'\n  | 'ucs2'\n  | 'ucs-2'\n  | 'base64'\n  | 'base64url'\n  | 'latin1'\n  | 'binary'\n  | 'hex';\n```\n\n----------------------------------------\n\nTITLE: Referencing terminal div element\nDESCRIPTION: This code snippet creates a JavaScript variable `terminalEl` that references the terminal `div` element in the DOM. This reference is used later to attach the Xterm.js terminal to the `div`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n/** @type {HTMLTextAreaElement | null} */\nconst terminalEl = document.querySelector('.terminal');\n```\n\n----------------------------------------\n\nTITLE: Importing Xterm.js CSS\nDESCRIPTION: This line imports the CSS styles for Xterm.js, which are necessary to style the terminal. The styles provide the default look and feel for the terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nimport '@xterm/xterm/css/xterm.css';\n```\n\n----------------------------------------\n\nTITLE: Defining Preview Script Options Interface in TypeScript\nDESCRIPTION: The `PreviewScriptOptions` interface in TypeScript allows configuring attributes for scripts injected into previews. It includes options for setting the `type` attribute ('module' or 'importmap'), and boolean flags to enable the `defer` and `async` attributes. These options control how the script is loaded and executed within the preview environment.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\nexport interface PreviewScriptOptions {\n  type?: 'module' | 'importmap';\n  defer?: boolean;\n  async?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Adding terminal div element\nDESCRIPTION: This code snippet adds a new `div` element with the class 'terminal' to the HTML structure of the application. This `div` will serve as the container for the Xterm.js terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/6-connect-a-terminal.md#_snippet_1\n\nLANGUAGE: js\nCODE:\n```\ndocument.querySelector('#app').innerHTML = `\n  <div class=\"container\">\n    <div class=\"editor\">\n      <textarea>I am a textarea</textarea>\n    </div>\n    <div class=\"preview\">\n      <iframe src=\"loading.html\"></iframe>\n    </div>\n  </div>\n  <div class=\"terminal\"></div>\n`;\n```\n\n----------------------------------------\n\nTITLE: Defining FileNode interface - TypeScript\nDESCRIPTION: Defines the `FileNode` interface, representing a file with contents in the `FileSystemTree`. The contents can be either a string or a `Uint8Array`.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_27\n\nLANGUAGE: ts\nCODE:\n```\ninterface FileNode {\n  file: {\n    contents: string | Uint8Array;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Vite Project\nDESCRIPTION: This command initializes a new Vite project using the vanilla JavaScript template. It sets up the basic project structure and configuration files.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_0\n\nLANGUAGE: Bash\nCODE:\n```\nnpm create vite webcontainers-express-app --template vanilla\n```\n\n----------------------------------------\n\nTITLE: Defining SymlinkNode interface - TypeScript\nDESCRIPTION: Defines the `SymlinkNode` interface, representing a symbolic link in the `FileSystemTree`.  The `symlink` property specifies the target path of the symbolic link.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_28\n\nLANGUAGE: ts\nCODE:\n```\ninterface SymlinkNode {\n  file: {\n    symlink: string;\n  };\n}\n```\n\n----------------------------------------\n\nTITLE: Auth Init Options Interface - TypeScript\nDESCRIPTION: This snippet defines the `AuthInitOptions` interface, which is used as the options parameter for the `auth.init` function. It includes properties for specifying the StackBlitz origin, client ID, and OAuth scope.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\ninterface AuthInitOptions {\n  /**\n   * StackBlitz' origin.\n   *\n   * @default https://stackblitz.com\n   */\n  editorOrigin?: string;\n\n  /**\n   * The client id for this OAuth application.\n   */\n  clientId: string;\n\n  /**\n   * OAuth scope. The value can be found under your `Teams Settings` > `API`.\n   *\n   * @see https://www.rfc-editor.org/rfc/rfc6749#section-3.3\n   */\n  scope: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Vue components in TypeScript\nDESCRIPTION: This code snippet imports two Vue components, `PageHeading` and `Screenshot`, into the current TypeScript file. These components are used to render the page heading and a screenshot of the re:tune application, respectively. The components are imported from the specified paths within the project's theme directory. This is required to use these components within the Vue template.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/retune.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n```\n\n----------------------------------------\n\nTITLE: Updating style.css - Basic Styling\nDESCRIPTION: This CSS snippet defines the styles for the application, including the container, textarea, and iframe. It sets up the layout and appearance of the editor and preview areas.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_5\n\nLANGUAGE: CSS\nCODE:\n```\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  height: 100vh;\n}\n\n.container {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n  height: 100%;\n  width: 100%;\n}\n\ntextarea {\n  width: 100%;\n  height: 100%;\n  resize: none;\n  border-radius: 0.5rem;\n  background: black;\n  color: white;\n  padding: 0.5rem 1rem;\n}\n\niframe {\n  height: 100%;\n  width: 100%;\n  border-radius: 0.5rem;\n}\n```\n\n----------------------------------------\n\nTITLE: Auth Failed Error Interface - TypeScript\nDESCRIPTION: This snippet defines the `AuthFailedError` interface, which represents an authentication failure. It includes a status indicating authentication failure, a short error description, and a detailed error description.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_11\n\nLANGUAGE: ts\nCODE:\n```\ninterface AuthFailedError {\n  status: 'auth-failed';\n\n  /**\n   * A short description of the error.\n   */\n  error: string;\n\n  /**\n   * A detailed description of the error.\n   */\n  description: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up a Vue component for the Angular tutorial page\nDESCRIPTION: This code snippet sets up a Vue component for the Angular tutorial page, importing necessary components like `PageHeading` and `Screenshot`. It uses TypeScript for type safety and defines the component's script section.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/angular-tutorial.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n<script setup lang=\"ts\">\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Querying Textarea and Iframe Elements\nDESCRIPTION: This JavaScript code retrieves references to the `iframe` and `textarea` elements using `document.querySelector`. These references are stored in `iframeEl` and `textareaEl` variables for later use.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\n/** @type {HTMLIFrameElement | null} */\nconst iframeEl = document.querySelector('iframe');\n\n/** @type {HTMLTextAreaElement | null} */\nconst textareaEl = document.querySelector('textarea');\n```\n\n----------------------------------------\n\nTITLE: Vue Component Setup\nDESCRIPTION: This code snippet sets up a Vue component using the `<script setup lang=\"ts\">` syntax. It imports `PageHeading` and `Screenshot` components for use in the page.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/schachnovelle.md#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\n<script setup lang=\"ts\">\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\n</script>\n```\n\n----------------------------------------\n\nTITLE: Deleting a file using rm - JavaScript\nDESCRIPTION: Example showing how to delete a file using the `rm` method. It takes the file path as an argument.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_19\n\nLANGUAGE: js\nCODE:\n```\nawait webcontainerInstance.fs.rm('/src/main.js');\n```\n\n----------------------------------------\n\nTITLE: Importing Vue Components and Data\nDESCRIPTION: This TypeScript code snippet imports a Vue component named `Home` and a data structure `footerSections` from specified modules. The `Home` component is likely used to render the main content of the page, while `footerSections` probably contains data for the footer.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/index.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport Home from '@theme/components/Home.vue';\n\nimport { footerSections } from '@theme/data/links';\n```\n\n----------------------------------------\n\nTITLE: SvelteKit Component Imports (Vue)\nDESCRIPTION: This snippet imports necessary Vue components for rendering the SvelteKit community project documentation page. It includes components for page headings, screenshots, video links, and attribution links, enhancing the page's visual and informational structure.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/community-projects/sveltekit.md#_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport PageHeading from '@theme/components/Helpers/CommunityProjectPageHeading.vue';\nimport Screenshot from '@theme/components/Helpers/Screenshot.vue';\nimport VideoLink from '@theme/components/Helpers/VideoLink.vue';\nimport AttributionLinks from '@theme/components/Helpers/AttributionLinks.vue';\nimport { people } from '@theme/data/people';\nconst { RICH_HARRIS } = people;\n```\n\n----------------------------------------\n\nTITLE: Update loading.html (HTML)\nDESCRIPTION: This snippet updates the `loading.html` file to display the message \"Use the terminal to run a command!\". This informs the user that they can now interact with the terminal.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/7-add-interactivity.md#_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\nUse the terminal to run a command!\n```\n\n----------------------------------------\n\nTITLE: Defining Options interface for mkdir - TypeScript\nDESCRIPTION: Defines the `Options` interface for the `mkdir` method. The `recursive` option, when set to true, enables the creation of any missing folders in the specified path.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_13\n\nLANGUAGE: ts\nCODE:\n```\ninterface Options {\n  recursive?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating loading.html - Initial Content\nDESCRIPTION: This HTML snippet defines the content of the `loading.html` file, displaying \"Installing dependencies...\" which will be shown while the WebContainer is getting ready.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/tutorial/1-build-your-first-webcontainer-app.md#_snippet_3\n\nLANGUAGE: HTML\nCODE:\n```\nInstalling dependencies...\n```\n\n----------------------------------------\n\nTITLE: Running Commands in a Specific Directory with Turbo (JavaScript)\nDESCRIPTION: This snippet shows how to use the `turbo` command to execute commands in a specific directory within a WebContainer. It uses the `--cwd` flag to specify the working directory for the command. This is helpful for managing multiple projects within the same WebContainer environment.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/guides/troubleshooting.md#_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nwebcontainer.spawn('turbo', ['--cwd', `~/projects/${id}`, 'exec', 'astro', 'dev']);\n```\n\n----------------------------------------\n\nTITLE: Spawning a Process without Arguments - Javascript\nDESCRIPTION: Illustrates how to spawn a process within the WebContainer without command-line arguments. In this example, it executes the `yarn` command directly.\nSOURCE: https://github.com/stackblitz/webcontainer-docs/blob/main/docs/api.md#_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst install = await webcontainerInstance.spawn('yarn');\n```"
  }
]
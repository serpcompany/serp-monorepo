[
  {
    "owner": "batosai",
    "repo": "adonis-attachment",
    "content": "TITLE: Creating Attachment from Uploaded File in Adonis.js\nDESCRIPTION: This snippet demonstrates how to create an attachment from a user-uploaded file in an Adonis.js controller. It uses the attachmentManager to create the attachment and assigns it to a user model property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Image URLs in TypeScript with AdonisJS Attachment\nDESCRIPTION: Examples of generating regular and signed URLs for image attachments and their variants using TypeScript in AdonisJS. Demonstrates both direct URL generation and variant-specific URL generation.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait user.avatar.getUrl()\nawait user.avatar.getUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getUrl()\n\nawait user.avatar.getSignedUrl()\nawait user.avatar.getSignedUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getSignedUrl()\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Uploaded File in AdonisJS\nDESCRIPTION: Demonstrates how to create an attachment from a user-uploaded file using the attachmentManager. The code shows handling file upload in a controller action and associating it with a user model.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from File Upload in AdonisJS Controller\nDESCRIPTION: Demonstrates how to create an attachment from a user-uploaded file using the attachment manager. The code shows handling file upload and saving it to a user model.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/controller-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling File Upload in Controller\nDESCRIPTION: TypeScript code for a controller method that handles file upload and creates an attachment using the AdonisJS attachment package. It demonstrates how to use the attachmentManager to create an attachment from a file.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/README.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Attachment in User Model\nDESCRIPTION: TypeScript code for defining an avatar attachment in a User model using the AdonisJS attachment package. It demonstrates how to use the @attachment decorator and compose the Attachmentable mixin.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/README.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Image URLs in TypeScript for AdonisJS\nDESCRIPTION: This snippet demonstrates how to generate URLs for images and their variants using TypeScript in an AdonisJS application. It includes methods for both regular and signed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait user.avatar.getUrl()\nawait user.avatar.getUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getUrl()\n\nawait user.avatar.getSignedUrl()\nawait user.avatar.getSignedUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getSignedUrl()\n```\n\n----------------------------------------\n\nTITLE: Handling File Upload in UsersController with AdonisJS (TypeScript)\nDESCRIPTION: This code snippet illustrates how to handle file uploads in a UsersController using the Adonis Attachment plugin. It shows importing the attachmentManager, retrieving the uploaded file from the request, and creating an attachment for the user model.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/start-here.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Model with Attachment in AdonisJS (TypeScript)\nDESCRIPTION: This snippet shows how to set up a User model in AdonisJS to support file attachments using the @jrmc/adonis-attachment plugin. It demonstrates importing necessary modules, composing the model with Attachmentable, and declaring an avatar attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/start-here.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Picture Component Implementation in Edge Template\nDESCRIPTION: Edge template implementation of a responsive Picture component with multiple source elements for different viewport sizes.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset=\"{{ await source.getUrl('large') }}\">\n  <source media=\"(min-width: 768px)\" srcset=\"{{ await source.getUrl('medium') }}\">\n  <source media=\"(min-width: 480px)\" srcset=\"{{ await source.getUrl('small') }}\">\n  <img src=\"{{ await source.getUrl() }}\" alt=\"image description\">\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Buffer in AdonisJS\nDESCRIPTION: Shows how to create an attachment from a buffer using the attachmentManager. The example reads a file into a buffer and creates an attachment with a specified filename.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const buffer = await readFile(app.makePath('me.jpg'))\n\n    user.avatar = await attachmentManager.createFromBuffer(buffer, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Picture Component Implementation in React\nDESCRIPTION: React component implementation of a responsive Picture element that accepts source and alt props.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport React from 'react';\n\nconst Picture = ({ source, alt }) => {\n  return (\n    <picture>\n      <source media=\"(min-width: 1200px)\" srcSet={source.large.url} />\n      <source media=\"(min-width: 768px)\" srcSet={source.medium.url} />\n      <source media=\"(min-width: 480px)\" srcSet={source.small.url} />\n      <img src={source.url} alt={alt} />\n    </picture>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Base64 in AdonisJS Controller\nDESCRIPTION: Demonstrates creating an attachment from a base64 encoded string. Available from version 2.3.0, this method allows direct conversion of base64 image data to an attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/controller-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const b64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=\"\n\n    user.avatar = await attachmentManager.createFromBase64(b64, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Attachment Model Setup in AdonisJS\nDESCRIPTION: Basic setup of an AdonisJS model with attachment decorator. Shows how to import required dependencies and set up a basic attachment field.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from URL in Adonis.js\nDESCRIPTION: This snippet shows how to create an attachment from a URL in an Adonis.js controller. It uses the attachmentManager to create an attachment from the specified URL and assigns it to a user model property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const url = new URL('https://site.com/picture.jpg')\n\n    user.avatar = await attachmentManager.createFromUrl(url, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Base64 String in Adonis.js\nDESCRIPTION: This snippet shows how to create an attachment from a base64-encoded string in an Adonis.js controller. It uses the attachmentManager to create an attachment from the base64 string and assigns it to a user model property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const b64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=\"\n\n    user.avatar = await attachmentManager.createFromBase64(b64, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Buffer in AdonisJS Controller\nDESCRIPTION: Shows how to create an attachment from a buffer using the attachment manager. The example reads a file into a buffer and attaches it to a user model.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/controller-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const buffer = await readFile(app.makePath('me.jpg'))\n\n    user.avatar = await attachmentManager.createFromBuffer(buffer, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Attachment Variants in TypeScript\nDESCRIPTION: Configuration for generating multiple size variants of an attachment. This example shows how to specify thumbnail, medium, and large variants for an avatar image.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large'] // [!code highlight]\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Multiple Attachments from Uploaded Files in Adonis.js\nDESCRIPTION: This snippet shows how to create multiple attachments from user-uploaded files in an Adonis.js controller. It uses the attachmentManager to create attachments from multiple files and assigns them to a user model property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const files = request.files('files')!\n    const user = new User()\n\n    user.files = await attachmentManager.createFromFiles(files)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Base64 in AdonisJS\nDESCRIPTION: Illustrates creating an attachment from a base64-encoded string. Available since v2.3.0, this method accepts a base64 string and filename to create an attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const b64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=\"\n\n    user.avatar = await attachmentManager.createFromBase64(b64, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Model for File Attachment in TypeScript\nDESCRIPTION: Sets up a User model with file attachment capabilities using the @jrmc/adonis-attachment package. It defines an 'avatar' property as an Attachment type.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/start-here.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Attachment in Adonis.js\nDESCRIPTION: This snippet shows how to delete an attachment in an Adonis.js model and controller. It defines an attachment property in the model and demonstrates setting it to null in the controller to delete the attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel { \n  @attachment()\n  declare avatar: Attachment | null\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nuser.avatar = null\nawait user.save()\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from File Path in AdonisJS\nDESCRIPTION: Shows how to create an attachment from a file path. Available since v3.1.0, this method takes a file path and desired filename to create an attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const path = app.makePath('me.jpg')\n\n    user.avatar = await attachmentManager.createFromPath(path, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Attachment Model Setup in TypeScript\nDESCRIPTION: Basic setup of a model with file attachment using the @attachment decorator. Shows how to import required dependencies and declare an avatar attachment field.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { attachment } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends BaseModel {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing preComputeUrls Helper Method for User Model in TypeScript\nDESCRIPTION: This code snippet defines a static method preComputeUrls on the User model to compute URLs for attachments and their variants. It handles both single and multiple user instances, and demonstrates how to compute URLs with different options.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\nimport { attachment, Attachmentable, attachmentManager } from '@jrmc/adonis-attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  static async preComputeUrls(models: User | User[]) {\n    if (Array.isArray(models)) {\n      await Promise.all(models.map((model) => this.preComputeUrls(model)))\n      return\n    }\n\n    // compute url for original file\n    await attachmentManager.computeUrl(models.avatar)\n\n    // compute url for thumbnail variant\n    const thumb = models.avatar.getVariant('thumbnail')\n    await attachmentManager.computeUrl(thumb)\n\n    // compute url for medium variant with expiration time option\n    const medium = models.avatar.getVariant('medium')\n    await attachmentManager.computeUrl(medium, {\n      expiresIn: '30 mins',\n    })\n  }\n\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large']\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Variants\nDESCRIPTION: Shows how to configure multiple image variants for an attachment using the variants property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large']\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from File Path in Adonis.js\nDESCRIPTION: This snippet demonstrates how to create an attachment from a file path in an Adonis.js controller. It uses the attachmentManager to create an attachment from the specified file path and assigns it to a user model property.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const path = app.makePath('me.jpg')\n\n    user.avatar = await attachmentManager.createFromPath(path, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Vue with Inertia for AdonisJS\nDESCRIPTION: This snippet demonstrates how to display images using pre-computed URLs in a Vue component when using Inertia with AdonisJS. The preComputeUrl option is required for this approach.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<img :src=\"user.avatar.thumbnail.url\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Handling File Upload in Controller\nDESCRIPTION: Implements file upload handling in a UsersController, using attachmentManager to process the uploaded file and associate it with a user model.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/start-here.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Images in Edge Templates with AdonisJS Attachment\nDESCRIPTION: Examples of rendering images in Edge templates using various URL generation methods including signed URLs with expiration times and content options.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl() }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl({\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail', {\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Buffer in Adonis.js\nDESCRIPTION: This snippet demonstrates how to create an attachment from a buffer in an Adonis.js controller. It reads a file into a buffer and then uses the attachmentManager to create an attachment from that buffer.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport app from '@adonisjs/core/services/app'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const buffer = await readFile(app.makePath('me.jpg'))\n\n    user.avatar = await attachmentManager.createFromBuffer(buffer, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Svelte with Inertia for AdonisJS\nDESCRIPTION: This snippet shows how to display images using pre-computed URLs in a Svelte component when using Inertia with AdonisJS. The preComputeUrl option is required for this approach.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: svelte\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Deleting Attachments in AdonisJS\nDESCRIPTION: Demonstrates how to delete an attachment by setting it to null and saving the model. Includes model setup with the Attachmentable mixin and attachment decorator.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends compose(BaseModel, Attachmentable) { \n  @attachment()\n  declare avatar: Attachment | null\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nuser.avatar = null\nawait user.save()\n```\n\n----------------------------------------\n\nTITLE: Implementing Animated GIF to WebP Converter in TypeScript\nDESCRIPTION: Custom converter class that transforms animated GIF images to WebP format using the sharp library. It preserves animation properties like loop count and frame delay.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport sharp from 'sharp'\n\nexport default class Gif2WebpConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    const sharpImage = sharp(input, { animated: true, pages: -1 })\n\n    const imageMeta = await sharpImage.metadata()\n    const { loop, delay } = imageMeta\n\n    const options = {\n      webp: {\n        loop,\n        delay,\n      }\n    }\n\n    const buffer = await sharpImage\n      .withMetadata()\n      .webp(options.webp)\n      .toBuffer()\n\n    return buffer\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Image URLs in TypeScript\nDESCRIPTION: This snippet demonstrates how to generate URLs for images and their variants using TypeScript. It includes methods for both regular and signed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nawait user.avatar.getUrl()\nawait user.avatar.getUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getUrl()\n\nawait user.avatar.getSignedUrl()\nawait user.avatar.getSignedUrl('thumbnail')\n// or await user.avatar.getVariant('thumbnail').getSignedUrl()\n```\n\n----------------------------------------\n\nTITLE: Attachment Variants Configuration\nDESCRIPTION: Shows how to configure multiple size variants for an attachment, useful for generating different image sizes.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large']\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Images in Vue with Inertia\nDESCRIPTION: Example of rendering image attachments in Vue components when using Inertia with precomputed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<img :src=\"user.avatar.thumbnail.url\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Configuring Adonis Attachment in TypeScript\nDESCRIPTION: This snippet demonstrates the basic configuration structure for Adonis Attachment, including setting up converters and type declarations.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: {\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n      }\n    }\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Animated GIF to WebP Converter Implementation\nDESCRIPTION: TypeScript class implementing conversion of animated GIF files to WebP format using Sharp library, preserving animation properties like loop count and frame delay\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport sharp from 'sharp'\n\nexport default class Gif2WebpConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    const sharpImage = sharp(input, { animated: true, pages: -1 })\n\n    const imageMeta = await sharpImage.metadata()\n    const { loop, delay } = imageMeta\n\n    const options = {\n      webp: {\n        loop,\n        delay,\n      }\n    }\n\n    const buffer = await sharpImage\n      .withMetadata()\n      .webp(options.webp)\n      .toBuffer()\n\n    return buffer\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Uploaded Image in Edge Template (Edge)\nDESCRIPTION: This snippet demonstrates how to render an uploaded image in an Edge template using the Adonis Attachment plugin. It uses the getUrl() method of the attachment to retrieve the image URL.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/start-here.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl() }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Edge Templates for AdonisJS\nDESCRIPTION: This snippet shows how to use the generated URLs to display images in Edge templates. It includes examples for regular URLs, signed URLs with expiration times, and different image variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl() }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl({\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail', {\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in React with Inertia\nDESCRIPTION: This snippet shows how to display images in a React component when using Inertia. It assumes that preComputeUrl is enabled and demonstrates accessing the thumbnail URL.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing Video to Animated GIF Converter in TypeScript\nDESCRIPTION: Custom converter class that extends the base Converter class to convert videos to animated GIFs using FFmpeg. It handles both file and buffer inputs, and uses temporary files for processing.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport os from 'node:os'\nimport path from 'node:path'\nimport fs from 'fs/promises'\nimport { cuid } from '@adonisjs/core/helpers'\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport ffmpeg from 'fluent-ffmpeg'\n\nexport default class Video2GifConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    return await this.videoToGif(ffmpeg, input)\n  }\n\n  async videoToGif(ffmpeg: Function, input: Input) {\n    let file = input\n\n    if (Buffer.isBuffer(input)) {\n      file = await this.bufferToTempFile(input)\n    }\n\n    return new Promise<string>((resolve, reject) => {\n      const folder = os.tmpdir()\n      const filename = `${cuid()}.png`\n      const destination = path.join(folder, filename)\n\n\n      const ff = ffmpeg(file)\n\n      if (this.binPaths) {\n        if (this.binPaths.ffmpegPath) {\n          ff.setFfmpegPath(this.binPaths.ffmpegPath)\n        }\n      }\n\n      ff\n      .withOptions([\n        '-ss 1',\n        `-i ${file}`,\n        `-filter_complex [0:v]trim=duration=3;`,\n        '-f gif'\n      ])\n      .on('end', () => {\n        resolve(destination)\n      })\n      .on('error', (err: Error) => {\n        reject(err)\n      })\n      .output(destination)\n      .run()\n    })\n  }\n\n  async bufferToTempFile(input: Buffer) {\n    const folder = os.tmpdir()\n    const tempFilePath = path.join(folder, `tempfile-${Date.now()}.tmp`)\n    await fs.writeFile(tempFilePath, input)\n    return tempFilePath\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating New Table with JSON Column in Adonis.js Migration\nDESCRIPTION: Example of creating a new database table with a JSON column for storing image metadata. Uses the schema.createTable method to define a users table with an avatar column of JSON type.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/migration-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.createTable(this.tableName, (table) => {\n    table.increments()\n    table.json('avatar') // <-- Use a JSON data type\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in React with Inertia for AdonisJS\nDESCRIPTION: This snippet shows how to display images using pre-computed URLs in a React component when using Inertia with AdonisJS. The preComputeUrl option is required for this approach.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing Animated GIF to WebP Converter in TypeScript\nDESCRIPTION: Custom converter class that extends the base Converter class to convert animated GIFs to WebP format using the Sharp library. It preserves animation properties like loop and delay.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport sharp from 'sharp'\n\nexport default class Gif2WebpConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    const sharpImage = sharp(input, { animated: true, pages: -1 })\n\n    const imageMeta = await sharpImage.metadata()\n    const { loop, delay } = imageMeta\n\n    const options = {\n      webp: {\n        loop,\n        delay,\n      }\n    }\n\n    const buffer = await sharpImage\n      .withMetadata()\n      .webp(options.webp)\n      .toBuffer()\n\n    return buffer\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Large Image Converter in Adonis Attachment\nDESCRIPTION: This snippet shows how to configure a 'large' image converter that resizes images to 1280 pixels using the image_converter from the Adonis Attachment package.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/image.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    large: { // [!code focus:6]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'), \n      options: {\n        resize: 1280,\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Specifying Storage Disk for Attachments in TypeScript\nDESCRIPTION: Configuration for selecting a specific storage disk for attachments. This example demonstrates setting the 's3' disk instead of using the default from the drive configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ disk: 's3' }) // [!code highlight]\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Images in React with Inertia\nDESCRIPTION: Example of rendering image attachments in React components when using Inertia with precomputed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Regenerating Variants for Single Row in TypeScript\nDESCRIPTION: Example showing how to regenerate variants for a single user record using RegenerateService. Requires dependency injection and async/await support.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/regenerate-variant.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n  @inject()\n  async regenerate(regenerate: RegenerateService) {\n    const user = await User.first()\n\n    if (user) {\n      await regenerate.row(user).run()\n    }\n  }\n```\n\n----------------------------------------\n\nTITLE: Advanced Image Resizing Configuration in Adonis Attachment\nDESCRIPTION: This comprehensive example demonstrates advanced configuration for image resizing. It includes importing necessary types, using Sharp for precise control over resizing parameters, and extending the AttachmentVariants interface for type safety.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/image.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\nimport sharp from 'sharp'\n\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: {\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        format: 'jpeg',\n        resize: { // https://sharp.pixelplumbing.com/api-resize\n          width: 400,\n          height: 400,\n          fit: sharp.fit.cover,\n          position: 'top'\n        },\n      }\n    }\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PDF Thumbnail Converter in Adonis Attachment\nDESCRIPTION: Basic configuration for enabling the PDF thumbnail converter in the attachment configuration file. This sets up the converter with default settings (JPEG format and original PDF size).\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// config/attachment.ts\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing Video Thumbnail Converter with Options\nDESCRIPTION: Extended configuration for the video thumbnail converter that includes custom options. This example sets the output format to JPEG and resizes the thumbnail to 720 pixels. These options leverage the underlying image_converter functionality.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/video-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n      options: {\n        format: 'jpeg',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Attachment Configuration in TypeScript\nDESCRIPTION: This snippet demonstrates the basic structure of the attachment configuration file. It includes setting up converters and declaring type extensions for attachment variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: {\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n      }\n    }\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Regenerating Variants with Custom Options in TypeScript\nDESCRIPTION: Examples showing how to regenerate variants with specific options for both row and model levels. Demonstrates using variants and attributes options to limit which items are regenerated.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/regenerate-variant.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n  await regenerate.row(user, {\n    variants: [ 'thumbnail' ],\n    attributes: [ 'avatar', 'files' ]\n  }).run()\n\n  await regenerate.model(User, {\n    variants: [ 'thumbnail' ],\n    attributes: [ 'avatar', 'files' ]\n  }).run()\n```\n\n----------------------------------------\n\nTITLE: Configuring Thumbnail Converter with Advanced Resize Options in Adonis Attachment\nDESCRIPTION: This snippet shows how to configure a 'thumbnail' converter with advanced resize options including width, height, fit, and position. It also includes type declarations for attachment variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/image.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\nimport sharp from 'sharp'\n\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: {\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        format: 'jpeg',\n        resize: { // https://sharp.pixelplumbing.com/api-resize\n          width: 400,\n          height: 400,\n          fit: sharp.fit.cover,\n          position: 'top'\n        },\n      }\n    }\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Subfolder\nDESCRIPTION: Demonstrates how to specify a subfolder for file storage using the folder property in the attachment decorator.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ folder: 'uploads/avatars' })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Video Thumbnail Converter Options in Adonis Attachment (TypeScript)\nDESCRIPTION: This snippet demonstrates how to customize the video thumbnail converter options in the Adonis Attachment config. It shows setting the output format to JPEG and resizing the thumbnail to 720 pixels.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/video-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n      options: {\n        format: 'jpeg',\n        resize: 720\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Folder Path\nDESCRIPTION: Examples of specifying storage folders for attachments, including static paths and dynamic paths using model parameters.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ folder: 'uploads/avatars' })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Adonis Attachment for Image Variants\nDESCRIPTION: This snippet shows how to configure Adonis Attachment for creating different image variants. It defines converters for small, medium, and large sizes using the image_converter.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  preComputeUrl: true,\n  converters: [\n    {\n      key: 'small',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 480,\n      }\n    },\n    {\n      key: 'medium',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 768,\n      }\n    },\n    {\n      key: 'large',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 1200,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Handling API Exceptions in Adonis Attachment\nDESCRIPTION: Implementation of HttpExceptionHandler for API responses. Shows how to catch and handle E_CANNOT_WRITE_FILE exceptions by returning a 422 status code with error messages.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/exceptions.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      const err = error as errors.E_CANNOT_WRITE_FILE\n      ctx.response.status(422).send(err.messages)\n      return\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Edge Templates\nDESCRIPTION: This snippet shows how to use the generated URLs to display images in Edge templates. It includes examples of regular URLs, signed URLs, and URL generation with custom expiration times.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl() }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl({\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail') }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ await user.avatar.getSignedUrl('thumbnail', {\n  expiresIn: '30 mins',\n}) }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Customizing Image Quality in Thumbnail Converter for Adonis Attachment\nDESCRIPTION: This snippet shows how to customize the image quality for a 'thumbnail' converter. It uses an object format to specify both the format (JPEG) and quality (80) for the output image.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/image.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: { // [!code focus:12]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: {\n          format: 'jpeg',\n          options: {\n            quality: 80\n          }\n        }\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Multiple Attachments Configuration\nDESCRIPTION: Implementation of the attachments decorator for handling arrays of attachments, with a note about potential resource usage.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachments } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends BaseModel {\n  @attachments()\n  declare files: Attachment[] | null\n}\n```\n\n----------------------------------------\n\nTITLE: Specifying Subfolder for Attachments in TypeScript\nDESCRIPTION: Configuration for storing attachment files in a specific subfolder. This example demonstrates setting the 'folder' property to define a custom storage path for avatars.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ folder: 'uploads/avatars' }) // [!code highlight]\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring User Model with Attachment Decorator\nDESCRIPTION: Sets up a User model with an avatar attachment using the @attachment decorator from adonis-attachment. Defines the avatar property with the Attachment type.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/start-here.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { attachment } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends BaseModel {\n  @attachment()\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Using Pre-Computed URLs in Edge Templates\nDESCRIPTION: This snippet demonstrates how to use pre-computed URLs in Edge templates when the preComputeUrl option is enabled. It shows how to access the URL directly from the avatar object and its variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ user.avatar.url }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ user.avatar.getVariant('thumbnail').url }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Configuring Adonis Attachment in TypeScript\nDESCRIPTION: Defines the basic configuration for Adonis Attachment, including a thumbnail converter using the image_converter.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  converters: [\n    {\n      key: 'thumbnail',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Custom Folder Function Configuration\nDESCRIPTION: Demonstrates using custom functions to determine attachment folder paths, including datetime-based and model-field-based paths.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @column()\n  declare name: string\n\n  @attachment({ folder: () => DateTime.now().toFormat('yyyy/MM') })\n  declare avatar: Attachment\n\n  @attachment({ folder: (user: User) => user.name })\n  declare file: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from URL in AdonisJS\nDESCRIPTION: Demonstrates creating an attachment from a URL. Available since v3.1.0, this method downloads a file from a URL and creates an attachment with the specified filename.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const url = new URL('https://site.com/picture.jpg')\n\n    user.avatar = await attachmentManager.createFromUrl(url, 'photo.jpg')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Precomputed URLs in Edge Templates\nDESCRIPTION: Examples of accessing precomputed URLs in Edge templates when preComputeUrl feature is enabled.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ user.avatar.url }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ user.avatar.getVariant('thumbnail').url }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Handling E_CANNOT_WRITE_FILE Exception in Web Context\nDESCRIPTION: This code snippet shows how to handle the E_CANNOT_WRITE_FILE exception in a web context. It flashes an error message to the session and redirects the user back to the previous page.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/exceptions.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      ctx.session.flash('notification', {\n        type: 'error',\n        message: err.message,\n      })\n\n      return ctx.response.redirect('back')\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pre-Compute URLs Helper Method in TypeScript for Adonis User Model\nDESCRIPTION: This snippet defines a static method 'preComputeUrls' on the User model to manually compute URLs for attachments and their variants. It handles both single and multiple user instances, and demonstrates how to set expiration times for signed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\nimport { attachment, Attachmentable, attachmentManager } from '@jrmc/adonis-attachment'\n\nclass User extends compose(BaseModel, Attachmentable) {\n  static async preComputeUrls(models: User | User[]) {\n    if (Array.isArray(models)) {\n      await Promise.all(models.map((model) => this.preComputeUrls(model)))\n      return\n    }\n\n    // compute url for original file\n    await attachmentManager.computeUrl(models.avatar)\n\n    // compute url for thumbnail variant\n    const thumb = models.avatar.getVariant('thumbnail')\n    await attachmentManager.computeUrl(thumb)\n\n    // compute url for medium variant with expiration time option\n    const medium = models.avatar.getVariant('medium')\n    await attachmentManager.computeUrl(medium, {\n      expiresIn: '30 mins',\n    })\n  }\n\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large']\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Folder Path with Parameters\nDESCRIPTION: Shows how to use model field values as parameters in attachment folder paths. Parameters are automatically processed with lowercase, HTML escape, and slugify.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @column()\n  declare name: string\n\n  @attachment({ folder: 'uploads/:name/avatars' })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Stream in AdonisJS\nDESCRIPTION: Shows how to create an attachment from a readable stream. Available since v3.1.0, this method accepts a readable stream and filename to create an attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/controller-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport fs from 'node:fs'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const videoStream = fs.createReadStream(app.makePath('path/video.mkv'))\n\n    user.avatar = await attachmentManager.createFromStream(videoStream, 'name.mkv')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using preComputeUrls for Multiple Users in TypeScript\nDESCRIPTION: This code snippet demonstrates how to use the preComputeUrls method to compute URLs for multiple user instances. It retrieves all users and then computes their attachment URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await User.all()\nawait User.preComputeUrls(users)\n\nreturn users\n```\n\n----------------------------------------\n\nTITLE: Configuring URL Pre-computation\nDESCRIPTION: Shows how to enable URL pre-computation for attachments after SELECT queries using the preComputeUrl option.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ preComputeUrl: true })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Attachment URL Pre-computation in User Model\nDESCRIPTION: Defines a User model with a static helper method to pre-compute URLs for avatar attachments and their variants. The method supports both single and multiple model instances, with optional URL expiration settings.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\nimport { attachment, attachmentManager } from '@jrmc/adonis-attachment'\n\nclass User extends BaseModel {\n  static async preComputeUrls(models: User | User[]) {\n    if (Array.isArray(models)) {\n      await Promise.all(models.map((model) => this.preComputeUrls(model)))\n      return\n    }\n\n    // compute url for original file\n    await attachmentManager.computeUrl(models.avatar)\n\n    // compute url for thumbnail variant\n    const thumb = models.avatar.getVariant('thumbnail')\n    await attachmentManager.computeUrl(thumb)\n\n    // compute url for medium variant with expiration time option\n    const medium = models.avatar.getVariant('medium')\n    await attachmentManager.computeUrl(medium, {\n      expiresIn: '30 mins',\n    })\n  }\n\n  @attachment({\n    variants: ['thumbnail', 'medium', 'large']\n  })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Serialization Configuration\nDESCRIPTION: Example of customizing attachment serialization output to return only the URL of the attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/model-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n@attachments({\n  preComputeUrl: true,\n  serialize: (value?: Attachment) => value?.url ?? null\n})\ndeclare avatar: Attachment | null\n```\n\n----------------------------------------\n\nTITLE: Handling Web Exceptions in Adonis Attachment\nDESCRIPTION: Implementation of HttpExceptionHandler for web applications. Demonstrates handling E_CANNOT_WRITE_FILE exceptions by setting flash messages and redirecting back to the previous page.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/exceptions.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      ctx.session.flash('notification', {\n        type: 'error',\n        message: err.message,\n      })\n\n      return ctx.response.redirect('back')\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Image Attachment JSON Structure\nDESCRIPTION: JSON structure for image attachments including metadata like dimensions, GPS coordinates, orientation, and variants. Supports thumbnail generation with WebP conversion and blurhash.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/structure-data-json.md#2025-04-19_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\":\"xjfpa4tuxh66p6s3hrgl0pzn.jpg\",\n  \"extname\":\"jpg\",\n  \"size\":28267,\n  \"meta\":{\n    \"date\":\"2010:01:15 18:51:34\",\n    \"host\":\"Adobe Photoshop CS3 Windows\",\n    \"dimension\":{\n      \"width\":346,\n      \"height\":346\n    },\n    \"gps\":{\n      \"latitude\":48.862725,\n      \"longitude\":2.287592,\n      \"altitude\":2.287592\n    },\n    \"orientation\":{\n      \"value\":1,\n      \"description\":\"top-left\"\n    }\n  },\n  \"mimeType\":\"image/jpeg\",\n  \"path\":\"uploads/avatars/xjfpa4tuxh66p6s3hrgl0pzn.jpg\",\n  \"originalName\":\"aco_bot.jpg\",\n  \"url\": \"/uploads/avatars/[...]\", \n  \"variants\":[\n    {\n      \"key\":\"thumbnail\",\n      \"folder\":\"uploads/avatars/variants/xjfpa4tuxh66p6s3hrgl0pzn.jpg\",\n      \"name\":\"ajtugq7224qp9moqyi216vur.webp\",\n      \"extname\":\"webp\",\n      \"size\":14860,\n      \"meta\":{\n        \"date\":\"2010:01:15 18:51:34\",\n        \"host\":\"Adobe Photoshop CS3 Windows\",\n        \"dimension\":{\n          \"width\":300,\n          \"height\":300\n        },\n        \"orientation\":{\n          \"value\":1,\n          \"description\":\"top-left\"\n        }\n      },\n      \"mimeType\":\"image/webp\",\n      \"path\":\"uploads/avatars/variants/xjfpa4tuxh66p6s3hrgl0pzn.jpg/ajtugq7224qp9moqyi216vur.webp\",\n      \"url\": \"/uploads/avatars/variants/[...]\",\n      \"blurhash\": \"UDIMp4S~0L0f01M{~B^j0gn*NGxG^Ot7M{NH\" \n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling URL Pre-Computation in Adonis Attachment\nDESCRIPTION: Demonstrates how to enable pre-computation of URLs after SELECT queries by setting the preComputeUrl flag to true.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  preComputeUrl: true, // [!code focus]\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Video Thumbnail Converter in Adonis Attachment\nDESCRIPTION: Basic configuration for adding the video thumbnail converter to the Adonis Attachment package. The converter is defined in the config/attachment.ts file and imports the video_thumbnail_converter module.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/video-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// config/attachment.ts\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Pre-Compute URLs Method for Multiple Users in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the 'preComputeUrls' method to compute URLs for multiple User instances retrieved from the database.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await User.all()\nawait User.preComputeUrls(users)\n\nreturn users\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Format for Thumbnail Converter in Adonis Attachment\nDESCRIPTION: This example demonstrates how to configure a 'thumbnail' converter with a custom format (JPEG) and resize option. It shows how to change the default WebP format to JPEG for specific use cases.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/image.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: { // [!code focus:7]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: 'jpeg', // [!code highlight]\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Picture Component in Edge Template\nDESCRIPTION: Edge template implementation of a picture component that uses responsive image sources with different breakpoints. Handles async URL loading for different image variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset=\"{{ await source.getUrl('large') }}\">\n  <source media=\"(min-width: 768px)\" srcset=\"{{ await source.getUrl('medium') }}\">\n  <source media=\"(min-width: 480px)\" srcset=\"{{ await source.getUrl('small') }}\">\n  <img src=\"{{ await source.getUrl() }}\" alt=\"image description\">\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Implementing Video to Animated GIF Converter in TypeScript\nDESCRIPTION: Custom converter class that transforms video files to animated GIFs using ffmpeg. It handles both file paths and buffer inputs, creating temporary files when necessary. The converter extracts a 3-second clip starting from the first second of the video.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport os from 'node:os'\nimport path from 'node:path'\nimport fs from 'fs/promises'\nimport { cuid } from '@adonisjs/core/helpers'\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport ffmpeg from 'fluent-ffmpeg'\n\nexport default class Video2GifConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    return await this.videoToGif(ffmpeg, input)\n  }\n\n  async videoToGif(ffmpeg: Function, input: Input) {\n    let file = input\n\n    if (Buffer.isBuffer(input)) {\n      file = await this.bufferToTempFile(input)\n    }\n\n    return new Promise<string>((resolve, reject) => {\n      const folder = os.tmpdir()\n      const filename = `${cuid()}.png`\n      const destination = path.join(folder, filename)\n\n\n      const ff = ffmpeg(file)\n\n      if (this.binPaths) {\n        if (this.binPaths.ffmpegPath) {\n          ff.setFfmpegPath(this.binPaths.ffmpegPath)\n        }\n      }\n\n      ff\n      .withOptions([\n        '-ss 1',\n        `-i ${file}`,\n        `-filter_complex [0:v]trim=duration=3;`,\n        '-f gif'\n      ])\n      .on('end', () => {\n        resolve(destination)\n      })\n      .on('error', (err: Error) => {\n        reject(err)\n      })\n      .output(destination)\n      .run()\n    })\n  }\n\n  async bufferToTempFile(input: Buffer) {\n    const folder = os.tmpdir()\n    const tempFilePath = path.join(folder, `tempfile-${Date.now()}.tmp`)\n    await fs.writeFile(tempFilePath, input)\n    return tempFilePath\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Video Thumbnail Converter in Adonis Attachment\nDESCRIPTION: This snippet shows how to configure the video thumbnail converter in the Adonis attachment configuration file. It imports the converter and sets it up as a 'preview' converter.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/video-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: { // [!code focus:3]\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Pre-Compute URLs Method for Single User in TypeScript\nDESCRIPTION: This snippet shows how to use the 'preComputeUrls' method to compute URLs for a single User instance retrieved from the database.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst user = await User.findOrFail(1)\nawait User.preComputeUrls(user)\n\nreturn user\n```\n\n----------------------------------------\n\nTITLE: Configuring Video Thumbnail Converter with Custom Options\nDESCRIPTION: This snippet demonstrates how to configure the video thumbnail converter with custom options. It sets the image format to JPEG and resizes the thumbnail to 720 pixels.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/video-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: { // [!code focus:7]\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n      options: {\n        format: 'jpeg',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Picture Component in React\nDESCRIPTION: This snippet demonstrates how to use the Picture component in a React application. It passes the article.image as the source prop and provides an alt prop.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n<Picture \n  source={ article.image } \n  alt=\"Image alt\" \n/>\n```\n\n----------------------------------------\n\nTITLE: Using preComputeUrls for a Single User in TypeScript\nDESCRIPTION: This code snippet shows how to use the preComputeUrls method for a single user instance. It finds a user by ID and then computes the attachment URLs for that user.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst user = await User.findOrFail(1)\nawait User.preComputeUrls(user)\n\nreturn user\n```\n\n----------------------------------------\n\nTITLE: Customizing Document Thumbnail Converter Options\nDESCRIPTION: Extended configuration that demonstrates how to customize the document thumbnail converter with specific options. This example changes the output format to WebP and sets a specific resize dimension.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/document-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Using Pre-compute URLs with Multiple Users\nDESCRIPTION: Example showing how to pre-compute URLs for multiple user records retrieved from the database.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst users = await User.all()\nawait User.preComputeUrls(users)\n\nreturn users\n```\n\n----------------------------------------\n\nTITLE: Configuring Video Thumbnail Converter in Adonis Attachment (TypeScript)\nDESCRIPTION: This snippet shows how to configure the video thumbnail converter in the Adonis Attachment config file. It demonstrates adding the converter to the converters array with a 'preview' key.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/video-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/video_thumbnail_converter'),\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Using Picture Component in Vue\nDESCRIPTION: This snippet shows how to use the Picture component in a Vue application. It binds the article.image to the source prop and provides an alt prop.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\n<Picture \n  :source=\"article.image\" \n  alt=\"Image alt\" \n/>\n```\n\n----------------------------------------\n\nTITLE: Using Pre-compute URLs with Single User\nDESCRIPTION: Example demonstrating how to pre-compute URLs for a single user record retrieved from the database.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/pre-compile-on-demand.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst user = await User.findOrFail(1)\nawait User.preComputeUrls(user)\n\nreturn user\n```\n\n----------------------------------------\n\nTITLE: Customizing Document Thumbnail Converter Options in Adonis Attachment (TypeScript)\nDESCRIPTION: This snippet demonstrates how to customize the document thumbnail converter options. It sets the output format to WebP and resizes the thumbnail to 720 pixels, using the image converter options.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/document-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Large Image Converter in Adonis Attachment\nDESCRIPTION: This snippet demonstrates how to configure a 'large' image converter with a resize option of 1280 pixels.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/image.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// config/attachment.ts\nconst attachmentConfig = defineConfig({\n  converters: {\n    large: { // [!code focus:6]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'), \n      options: {\n        resize: 1280,\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Attachment from Stream in Adonis.js\nDESCRIPTION: This snippet demonstrates how to create an attachment from a stream in an Adonis.js controller. It creates a read stream from a file and uses the attachmentManager to create an attachment from that stream.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/controller-setup.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport fs from 'node:fs'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const user = new User()\n\n    const videoStream = fs.createReadStream(app.makePath('path/video.mkv'))\n\n    user.avatar = await attachmentManager.createFromStream(videoStream, 'name.mkv')\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Settings\nDESCRIPTION: TypeScript configuration for AdonisJS attachment plugin defining image variants with different sizes. Includes converter setup for small, medium and large image versions.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  preComputeUrl: true,\n  converters: [\n    {\n      key: 'small',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 480,\n      }\n    },\n    {\n      key: 'medium',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 768,\n      }\n    },\n    {\n      key: 'large',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 1200,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Picture Component Implementation in Vue\nDESCRIPTION: Vue component implementation of a responsive Picture element using template syntax and script setup.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_2\n\nLANGUAGE: vue\nCODE:\n```\n<template>\n  <picture>\n    <source media=\"(min-width: 1200px)\" :srcset=\"source.large.url\">\n    <source media=\"(min-width: 768px)\" :srcset=\"source.medium.url\">\n    <source media=\"(min-width: 480px)\" :srcset=\"source.small.url\">\n    <img :src=\"source.url\" :alt=\"alt\">\n  </picture>\n<template>\n\n<script setup>\n  defineProps({\n    source: Object,\n    alt: String\n  })\n</script>\n```\n\n----------------------------------------\n\nTITLE: Customizing PDF Thumbnail Converter Options in Adonis Attachment\nDESCRIPTION: Extended configuration example showing how to customize the PDF thumbnail converter with specific options like format and resize. This example changes the output format to WebP and sets the resize dimension to 720.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Thumbnail Converter with Custom Format in Adonis Attachment\nDESCRIPTION: This snippet shows how to configure a 'thumbnail' converter with a resize option of 300 pixels and a custom JPEG format.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/image.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: { // [!code focus:7]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: 'jpeg', // [!code highlight]\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Handling File Upload in UsersController with TypeScript\nDESCRIPTION: Implements file upload logic in a controller using the attachmentManager from @jrmc/adonis-attachment. It processes the uploaded file and associates it with a User model instance.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/start-here.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\n\nclass UsersController {\n  public store({ request }: HttpContext) {\n    const avatar = request.file('avatar')!\n    const user = new User()\n\n    user.avatar = await attachmentManager.createFromFile(avatar)\n    await user.save()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Article Model with Attachment\nDESCRIPTION: TypeScript model definition for Article using AdonisJS with attachment decorator. Configures image field with small, medium and large variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { attachment } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends BaseModel { \n  @attachment({\n    variants: ['small', 'medium', 'large'] \n  }) \n  declare image: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Picture Component Implementation in Svelte\nDESCRIPTION: Svelte component implementation of a responsive Picture element with script and template sections.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_3\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  export let source;\n  export let alt;\n</script>\n\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset={source.large.url}>\n  <source media=\"(min-width: 768px)\" srcset={source.medium.url}>\n  <source media=\"(min-width: 480px)\" srcset={source.small.url}>\n  <img src={source.url} alt={alt}>\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic PDF Thumbnail Converter\nDESCRIPTION: Basic configuration for adding PDF thumbnail conversion capability to Adonis Attachment. Sets up the 'preview' converter using the built-in PDF thumbnail converter.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Image Converter Configuration\nDESCRIPTION: Configures a basic image converter with a 'large' key setting that resizes images to 1280 pixels.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/image.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'large',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'), \n      options: {\n        resize: 1280,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Queue Event Handler Configuration in TypeScript\nDESCRIPTION: Configuration for queue event handlers including error handling, task completion, and queue drain events using the attachment manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/queue.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport logger from '@adonisjs/core/services/logger'\n\nattachmentManager.queue.onError = function (error, task) {\n  logger.info(`${task.name} task failed with the following error`)\n  logger.error(error.message)\n}\n\nattachmentManager.queue.taskCompleted = function (task) {\n  logger.info(`${task.name} completed. ${attachmentManager.queue.size()} tasks left`)\n}\n\nattachmentManager.queue.drained = function () {\n  logger.info('Processed last task in the queue')\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Vue with Inertia\nDESCRIPTION: This snippet demonstrates how to display images in a Vue component when using Inertia. It assumes that preComputeUrl is enabled and shows how to bind the thumbnail URL to the src attribute.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<img :src=\"user.avatar.thumbnail.url\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Attachment Configuration Setup\nDESCRIPTION: Configuration setup for AdonisJS attachment handling with image converter options for different sizes.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  preComputeUrl: true,\n  converters: [\n    {\n      key: 'small',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 480,\n      }\n    },\n    {\n      key: 'medium',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 768,\n      }\n    },\n    {\n      key: 'large',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 1200,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Thumbnail Converter with Custom Quality in Adonis Attachment\nDESCRIPTION: This snippet demonstrates how to configure a 'thumbnail' converter with a resize option of 300 pixels and custom JPEG format with 80% quality.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/image.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: { // [!code focus:12]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: {\n          format: 'jpeg',\n          options: {\n            quality: 80\n          }\n        }\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Image Format Configuration\nDESCRIPTION: Demonstrates how to configure the image converter with a specific output format (JPEG) along with resize settings.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/image.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'thumbnail',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: 'jpeg',\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Queue Event Handlers in TypeScript\nDESCRIPTION: Implementation of queue event handlers for error handling, task completion tracking, and queue drainage notification using the attachment manager.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/queue.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport logger from '@adonisjs/core/services/logger'\n\nattachmentManager.queue.onError = function (error, task) {\n  logger.info(`${task.name} task failed with the following error`)\n  logger.error(error.message)\n}\n\nattachmentManager.queue.taskCompleted = function (task) {\n  logger.info(`${task.name} completed. ${attachmentManager.queue.size()} tasks left`)\n}\n\nattachmentManager.queue.drained = function () {\n  logger.info('Processed last task in the queue')\n}\n\n```\n\n----------------------------------------\n\nTITLE: Altering Existing Column to JSON Type in Adonis.js Migration\nDESCRIPTION: Example of modifying an existing database column to use JSON data type. Uses schema.alterTable to change the avatar column's type to JSON.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/migration-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.alterTable(this.tableName, (table) => {\n    table.json('avatar').alter() // <-- Alter the column definition\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Article Model with Attachment in Adonis\nDESCRIPTION: This snippet demonstrates how to define an Article model in Adonis that uses the Attachment feature. It imports necessary types and decorators, and declares an image property as an Attachment with variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) { \n  @attachment({\n    variants: ['small', 'medium', 'large'] \n  }) \n  declare image: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Image Quality Configuration\nDESCRIPTION: Shows how to configure image conversion with custom quality settings using an object-based format configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/image.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'thumbnail',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n        format: {\n          format: 'jpeg',\n          options: {\n            quality: 80\n          }\n        }\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Advanced Resize Configuration\nDESCRIPTION: Demonstrates advanced resize configuration using Sharp's API options including width, height, fit, and position parameters.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/image.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport sharp from 'sharp'\n\nexport default defineConfig({\n  converters: [\n    {\n      key: 'thumbnail',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        format: 'jpeg',\n        resize: {\n          width: 400,\n          height: 400,\n          fit: sharp.fit.cover,\n          position: 'top'\n        },\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Synchronous Queue Processing\nDESCRIPTION: Example of how to implement synchronous queue processing using Promises, useful for unit testing scenarios\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/queue.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n  const notifier = new Promise((resolve) => {\n    attachmentManager.queue.drained = resolve\n  })\n\n  generateUserWithAttachment()\n\n  await notifier\n\n  /**\n   * Tasks have been processed.\n   */\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Document Thumbnail Converter in TypeScript\nDESCRIPTION: Basic configuration setup for the document thumbnail converter in the attachment.ts config file. Defines a 'preview' converter that imports the document thumbnail converter module.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/document-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Disabling File Renaming\nDESCRIPTION: Shows how to disable automatic file renaming for attachments using the rename option.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ rename: false })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring BlurHash Generation for Thumbnail Converter in Adonis Attachment\nDESCRIPTION: This snippet demonstrates how to enable and customize BlurHash generation for the 'thumbnail' converter. It includes options for enabling BlurHash and setting componentX and componentY values.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/image.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: { // [!code focus:10]\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'), \n      options: {\n        blurhash: true\n        // or\n        // blurhash: {\n        //   enabled: true,\n        //   componentX: 4,\n        //   componentY: 4\n        // }\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Basic PDF Thumbnail Converter Configuration in TypeScript\nDESCRIPTION: Basic configuration setup for enabling PDF thumbnail conversion with default JPEG format and video size settings.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Altering Existing Column to JSON Type in Adonis.js Migration\nDESCRIPTION: This snippet shows how to modify an existing column's data type to JSON in an Adonis.js migration. It uses the schema.alterTable method to change the 'avatar' column to JSON type.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/migration-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Within the migration file\n\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.alterTable(this.tableName, (table) => {\n    table.json('avatar').alter() // <-- Alter the column definition\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Attachment in AdonisJS\nDESCRIPTION: Shows how to delete an attachment by setting it to null in both the model definition and controller implementation.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/controller-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends compose(BaseModel, Attachmentable) { \n  @attachment()\n  declare avatar: Attachment | null\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nuser.avatar = null\nawait user.save()\n```\n\n----------------------------------------\n\nTITLE: Disabling Default Metadata Generation in Adonis Attachment\nDESCRIPTION: Shows how to disable the default metadata generation by setting the meta flag to false in the configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  meta: false, // [!code focus]\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Creating JSON Column for Image Metadata in TypeScript\nDESCRIPTION: This snippet demonstrates how to create a new table with a JSON column for storing image metadata using Adonis.js migrations. It creates a 'users' table with an 'avatar' column of JSON type.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/migration-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Within the migration file\n\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.createTable(this.tableName, (table) => {\n    table.increments()\n    table.json('avatar') // <-- Use a JSON data type\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Custom PDF Thumbnail Converter Configuration in TypeScript\nDESCRIPTION: Extended configuration example showing how to customize the PDF thumbnail converter with specific format (WebP) and resize options.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Regenerating Variants for Entire Model in TypeScript\nDESCRIPTION: Example demonstrating how to regenerate variants for all records of a model using RegenerateService. Requires dependency injection and async/await support.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/regenerate-variant.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n  @inject()\n  async regenerate(regenerate: RegenerateService) {\n    if (user) {\n      await regenerate.model(User).run()\n    }\n  }\n```\n\n----------------------------------------\n\nTITLE: Enabling URL Pre-Computation for Attachments in TypeScript\nDESCRIPTION: Configuration for pre-computing attachment URLs after SELECT queries. This feature was introduced in v2.2.0 and is disabled by default.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ preComputeUrl: true }) // [!code highlight]\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Converter Command in Adonis\nDESCRIPTION: Shell command to generate a new converter file in the Adonis application\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnode ace make:converter gif2webp\n```\n\n----------------------------------------\n\nTITLE: Creating JSON Column for Image Metadata in Adonis.js Migration\nDESCRIPTION: This snippet demonstrates how to create a new database table with a JSON column for storing image metadata. It uses the Adonis.js schema builder to define the table structure.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/migration-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Within the migration file\n\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.createTable(this.tableName, (table) => {\n    table.increments()\n    table.json('avatar') // <-- Use a JSON data type\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring PDF Thumbnail Converter with Custom Options\nDESCRIPTION: Enhanced configuration for PDF thumbnail conversion with custom format and resize options. Demonstrates how to set WebP format and specific resize dimensions.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/pdf-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/pdf_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: File Converters Support Matrix Table\nDESCRIPTION: A markdown table listing the available converters with their supported file types, descriptions, and required dependencies. Includes converters for images, PDFs, documents, and videos.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/table-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n|Converter      |File type      |Description|Required |\n| ------------- | :-----------: | -------- | -------- |\n|[image_converter](/v2/guide/converters/image)|JPEG, PNG, WebP, GIF and AVIF | Generate other image and change format/size etc...|[sharp](https://sharp.pixelplumbing.com/)|\n|[pdf_thumbnail_converter](/v2/guide/converters/pdf-thumbnail)|PDF |Generate thumbnail image of PDF|[poppler(pdftocairo)](https://www.npmjs.com/package/node-poppler)|\n|[document_thumbnail_converter](/v2/guide/converters/document-thumbnail)|PDF, ODT, ODS, DOCX, DOC, NUMBERS, PAGES, XLSX, XLS, CSV, RTF, TXT |Generate thumbnail image of document|[libreoffice-file-converter](https://www.npmjs.com/package/libreoffice-file-converter)|\n|[video_thumbnail_converter](/v2/guide/converters/video-thumbnail)|MP4, MOV, AVI, FLV, MKV |Generate thumbnail image of video|[fluent-ffmpeg](https://www.npmjs.com/package/fluent-ffmpeg)|\n```\n\n----------------------------------------\n\nTITLE: Converter Types Reference Table\nDESCRIPTION: A markdown table listing available converters with their supported file types, descriptions, and required dependencies. Includes image converter for image formats, PDF thumbnail generator, document thumbnail generator for various document formats, and video thumbnail generator for video formats.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/table-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n|Converter      |File type      |Description|Required |\n| ------------- | :-----------: | -------- | -------- |\n|[image_converter](/guide/converters/image)|JPEG, PNG, WebP, GIF and AVIF | Generate other image and change format/size etc...|[sharp](https://sharp.pixelplumbing.com/)|\n|[pdf_thumbnail_converter](/guide/converters/pdf-thumbnail)|PDF |Generate thumbnail image of PDF|[poppler(pdftocairo)](https://www.npmjs.com/package/node-poppler)|\n|[document_thumbnail_converter](/guide/converters/document-thumbnail)|PDF, ODT, ODS, DOCX, DOC, NUMBERS, PAGES, XLSX, XLS, CSV, RTF, TXT |Generate thumbnail image of document|[libreoffice-file-converter](https://www.npmjs.com/package/libreoffice-file-converter)|\n|[video_thumbnail_converter](/guide/converters/video-thumbnail)|MP4, MOV, AVI, FLV, MKV |Generate thumbnail image of video|[fluent-ffmpeg](https://www.npmjs.com/package/fluent-ffmpeg)|\n```\n\n----------------------------------------\n\nTITLE: Adonis Attachment Converters Table\nDESCRIPTION: A markdown table listing available file converters in the Adonis Attachment package, including their supported file types, descriptions, and required dependencies.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/table-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n|Converter      |File type      |Description|Required |\n| ------------- | :-----------: | -------- | -------- |\n|[image_converter](/guide/converters/image)|JPEG, PNG, WebP, GIF and AVIF | Generate other image and change format/size etc...|[sharp](https://sharp.pixelplumbing.com/)|\n|[pdf_thumbnail_converter](/guide/converters/pdf-thumbnail)|PDF |Generate thumbnail image of PDF|[poppler(pdftocairo)](https://www.npmjs.com/package/node-poppler)|\n|[document_thumbnail_converter](/guide/converters/document-thumbnail)|PDF, ODT, ODS, DOCX, DOC, NUMBERS, PAGES, XLSX, XLS, CSV, RTF, TXT |Generate thumbnail image of document|[libreoffice-file-converter](https://www.npmjs.com/package/libreoffice-file-converter)|\n|[video_thumbnail_converter](/guide/converters/video-thumbnail)|MP4, MOV, AVI, FLV, MKV |Generate thumbnail image of video|[fluent-ffmpeg](https://www.npmjs.com/package/fluent-ffmpeg)|\n```\n\n----------------------------------------\n\nTITLE: Disabling Meta Generation for Attachments in TypeScript\nDESCRIPTION: Configuration for disabling automatic metadata generation for attachments. This feature was introduced in v2.1.0 and is enabled by default.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ meta: false }) // [!code highlight]\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Manual Installation of Adonis Attachment\nDESCRIPTION: Install the Adonis Attachment package manually using npm, pnpm, or yarn, followed by the configuration command.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/installation.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Generating Migration for Altering Column Type in Bash\nDESCRIPTION: This bash command creates a new migration file to change the 'avatar' column to JSON type in the 'users' table using Adonis.js CLI.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/migration-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Create a new migration file\nnode ace make:migration change_avatar_column_to_json --table=users\n```\n\n----------------------------------------\n\nTITLE: Configuring Document Thumbnail Converter in Adonis Attachment (TypeScript)\nDESCRIPTION: This snippet shows how to configure the document thumbnail converter in the Adonis Attachment configuration file. It imports the converter and sets it up for use with the 'preview' key.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/converters/document-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// config/attachment.ts\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering Images in Svelte with Inertia\nDESCRIPTION: Example of rendering image attachments in Svelte components when using Inertia with precomputed URLs.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/view-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: svelte\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Displaying Images in Svelte with Inertia\nDESCRIPTION: This snippet illustrates how to display images in a Svelte component when using Inertia. It assumes that preComputeUrl is enabled and shows how to bind the thumbnail URL to the src attribute.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/view-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: svelte\nCODE:\n```\n<img src={user.avatar.thumbnail.url} loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Disabling File Renaming for Attachments in TypeScript\nDESCRIPTION: Configuration for disabling automatic file renaming for attachments. This feature was introduced in v2.1.0 and is enabled by default.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ rename: false }) // [!code highlight]\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Installing AdonisJS Attachment Package\nDESCRIPTION: Command to install and configure the AdonisJS attachment package using the Ace CLI.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/README.md#2025-04-19_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnode ace add @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Configuring Document Thumbnail Converter in Adonis Attachment\nDESCRIPTION: Basic configuration for adding the document thumbnail converter to the Adonis Attachment configuration file. This enables converting documents to thumbnail images.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/converters/document-thumbnail.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// config/attachment.ts\nconst attachmentConfig = defineConfig({\n  converters: {\n    preview: {\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n    }\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Displaying Pre-computed URLs in Edge Templates for AdonisJS\nDESCRIPTION: This snippet demonstrates how to display images using pre-computed URLs in Edge templates when the preComputeUrl option is enabled.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/view-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ user.avatar.url }}\" loading=\"lazy\" alt=\"\" />\n<img src=\"{{ user.avatar.getVariant('thumbnail').url }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Disabling Default File Renaming in Adonis Attachment\nDESCRIPTION: This configuration disables the default file renaming behavior by setting the rename flag to false.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  rename: false,\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Manual installation of Adonis Attachment with pnpm\nDESCRIPTION: Instructions for manually installing the Adonis Attachment package using pnpm and then running the configure command.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/installation.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\npnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Configuring Document Thumbnail Converter with Custom Options\nDESCRIPTION: Extended configuration for the document thumbnail converter with custom format and resize options. Demonstrates how to set WebP format and specific resize dimensions.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/converters/document-thumbnail.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  converters: [\n    {\n      key: 'preview',\n      converter: () => import('@jrmc/adonis-attachment/converters/document_thumbnail_converter'),\n      options: {\n        format: 'webp',\n        resize: 720\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Displaying Uploaded Image in Edge Template\nDESCRIPTION: Shows how to render an uploaded image in an Edge template. It uses the getUrl() method of the attachment to retrieve the image URL.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/start-here.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl() }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Disabling Default File Renaming in Adonis Attachment\nDESCRIPTION: Illustrates how to disable the default file renaming behavior by setting the rename flag to false in the configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  rename: false, // [!code focus]\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Web Exceptions in Adonis\nDESCRIPTION: Example of handling attachment-related exceptions in a web context. Demonstrates how to catch E_CANNOT_WRITE_FILE errors and display flash messages with redirects.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/exceptions.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      ctx.session.flash('notification', {\n        type: 'error',\n        message: err.message,\n      })\n\n      return ctx.response.redirect('back')\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Converter using Adonis CLI\nDESCRIPTION: Command to generate a new custom converter file using the Adonis CLI. This creates a converter class in the app/converters directory.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace make:converter gif2webp\n```\n\n----------------------------------------\n\nTITLE: Specifying Storage Disk\nDESCRIPTION: Demonstrates how to specify a custom storage disk for attachments, such as using S3 instead of the default disk.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ disk: 's3' })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Default File Renaming in Attachment Configuration\nDESCRIPTION: This snippet illustrates how to disable the default file renaming behavior by setting the rename flag to false in the attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  rename: false, // [!code focus]\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Attachment Converters in TypeScript\nDESCRIPTION: New configuration structure for defining attachment converters in the /config/attachment.ts file. It uses the defineConfig function and includes type definitions for attachment variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/changelog.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  converters: {\n    thumbnail: {\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n      }\n    }\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Altering Existing Column to JSON Type in TypeScript\nDESCRIPTION: This migration script alters an existing 'avatar' column in the 'users' table to use JSON data type. It's used to modify the column definition for storing image metadata.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/basic_usage/migration-setup.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Within the migration file\n\nprotected tableName = 'users'\n\npublic async up() {\n  this.schema.alterTable(this.tableName, (table) => {\n    table.json('avatar').alter() // <-- Alter the column definition\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Metadata Generation\nDESCRIPTION: Demonstrates how to disable automatic metadata generation for attachments using the meta option.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/model-setup.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nclass User extends BaseModel {\n  @attachment({ meta: false })\n  declare avatar: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Binary Paths in Attachment Configuration\nDESCRIPTION: This code shows how to manually set the paths for ffmpeg, ffprobe, pdftocairo, and LibreOffice binaries in the attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  bin: { // [!code focus:8]\n    ffmpegPath: 'ffmpeg_path', // the full path of the binary\n    ffprobePath: 'ffprobe_path', // the full path of the binary\n    pdftocairoBasePath: 'base_dir_path' // the path of the directory containing the binary\n    libreofficePaths: [\n      'libreoffice_path', // the full path of the binary\n    ] // Array of paths to LibreOffice binary executables.\n  },\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Binary Paths for Adonis Attachment\nDESCRIPTION: This configuration sets custom paths for ffmpeg, ffprobe, pdftocairo, and LibreOffice binaries used by Adonis Attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  bin: {\n    ffmpegPath: 'ffmpeg_path',\n    ffprobePath: 'ffprobe_path',\n    pdftocairoBasePath: 'base_dir_path'\n    libreofficePaths: [\n      'libreoffice_path',\n    ]\n  },\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Handling API Exceptions in Adonis\nDESCRIPTION: Example of handling attachment-related exceptions in an API context. Shows how to catch and handle E_CANNOT_WRITE_FILE errors with a custom response.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/exceptions.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      const err = error as errors.E_CANNOT_WRITE_FILE\n      ctx.response.status(422).send(err.messages)\n      return\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Pre-computed URLs in Adonis Attachment\nDESCRIPTION: This configuration enables pre-computing URLs after SELECT queries by setting the preComputeUrl flag to true.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  preComputeUrl: true,\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring FFmpeg Binary Paths in Attachment Configuration\nDESCRIPTION: This TypeScript code shows how to configure the paths for ffmpeg and ffprobe binaries in the attachment configuration using the app.makePath() function.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  bin: { // [!code focus:4]\n    ffmpegPath: app.makePath('bin/ffmpeg'),\n    ffprobePath: app.makePath('bin/ffprobe'),\n  },\n  converters: [\n    // ...\n  ]\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Execute Permissions for FFmpeg Binaries\nDESCRIPTION: This shell command sets execute permissions for ffmpeg and ffprobe binaries in the /bin directory.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ncd bin\nchmod +x ffmpeg\nchmod +x ffprobe\n```\n\n----------------------------------------\n\nTITLE: Article Model with Attachment Configuration\nDESCRIPTION: AdonisJS model setup with attachment decorator for handling image variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/use-cases/picture.md#2025-04-19_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment'\n\nclass User extends compose(BaseModel, Attachmentable) { \n  @attachment({\n    variants: ['small', 'medium', 'large'] \n  }) \n  declare image: Attachment\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Default Metadata Generation in Adonis Attachment\nDESCRIPTION: This configuration disables the default metadata generation by setting the meta flag to false.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  meta: false,\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Handling E_CANNOT_WRITE_FILE Exception in API Context\nDESCRIPTION: This code snippet demonstrates how to handle the E_CANNOT_WRITE_FILE exception in an API context using the HttpExceptionHandler class. It sends a 422 status code with the error messages.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/exceptions.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { errors } from '@jrmc/adonis-attachment'\n\nexport default class HttpExceptionHandler extends ExceptionHandler {\n  async handle(error: unknown, ctx: HttpContext) {\n    if (error instanceof errors.E_CANNOT_WRITE_FILE) {\n      const err = error as errors.E_CANNOT_WRITE_FILE\n      ctx.response.status(422).send(err.messages)\n      return\n    }\n\n    return super.handle(error, ctx)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Queue Preload File in Adonis\nDESCRIPTION: Command to generate a preload file for handling queue events in Adonis.js\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/queue.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace make:preload queue\n```\n\n----------------------------------------\n\nTITLE: Enabling Pre-Computed URLs in Attachment Configuration\nDESCRIPTION: This snippet shows how to enable pre-computation of URLs after SELECT queries by setting the preComputeUrl flag to true in the attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  preComputeUrl: true, // [!code focus]\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Disabling Default Metadata Generation in Attachment Configuration\nDESCRIPTION: This code demonstrates how to disable the default metadata generation by setting the meta flag to false in the attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst attachmentConfig = defineConfig({\n  meta: false, // [!code focus]\n  converters: {\n    // ...\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Queue Preload File in Adonis\nDESCRIPTION: Command to generate a preload file for handling queue events in Adonis framework.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/queue.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace make:preload queue\n```\n\n----------------------------------------\n\nTITLE: Configuring Queue Event Handlers\nDESCRIPTION: Implementation of queue event handlers for error handling, task completion, and queue drainage using the attachment manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/advanced_usage/queue.md#2025-04-19_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { attachmentManager } from '@jrmc/adonis-attachment'\nimport logger from '@adonisjs/core/services/logger'\n\nattachmentManager.queue.onError = function (error, task) {\n  logger.info(`${task.name} task failed with the following error`)\n  logger.error(error.message)\n}\n\nattachmentManager.queue.taskCompleted = function (task) {\n  logger.info(`${task.name} completed. ${attachmentManager.queue.size()} tasks left`)\n}\n\nattachmentManager.queue.drained = function () {\n  logger.info('Processed last task in the queue')\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Migration for Altering Column Type in Adonis.js\nDESCRIPTION: This command creates a new migration file to alter an existing column's data type to JSON. It uses the Adonis.js CLI to generate the migration file.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/migration-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Create a new migration file\nnode ace make:migration change_avatar_column_to_json --table=users\n```\n\n----------------------------------------\n\nTITLE: Generating Custom Converter File in AdonisJS\nDESCRIPTION: Command to create a new converter file using the AdonisJS CLI. It generates a converter class with a specific naming convention in the app/converters directory.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace make:converter gif2webp\n```\n\n----------------------------------------\n\nTITLE: Creating Picture Component in Edge Template\nDESCRIPTION: This snippet shows how to create a picture component using Edge templating engine. It uses source tags for different viewport sizes and an img tag as fallback.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset=\"{{ await source.getUrl('large') }}\">\n  <source media=\"(min-width: 768px)\" srcset=\"{{ await source.getUrl('medium') }}\">\n  <source media=\"(min-width: 480px)\" srcset=\"{{ await source.getUrl('small') }}\">\n  <img src=\"{{ await source.getUrl() }}\" alt=\"image description\">\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Setting Execution Permissions for FFmpeg Binaries\nDESCRIPTION: This shell command demonstrates how to set execution permissions for ffmpeg and ffprobe binaries after downloading them.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ncd bin\nchmod +x ffmpeg\nchmod +x ffprobe\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Binary Paths in Adonis Attachment\nDESCRIPTION: Demonstrates how to set custom paths for ffmpeg, ffprobe, pdftocairo, and LibreOffice binaries in the Adonis Attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  bin: { // [!code focus:8]\n    ffmpegPath: 'ffmpeg_path', // the full path of the binary\n    ffprobePath: 'ffprobe_path', // the full path of the binary\n    pdftocairoBasePath: 'base_dir_path' // the path of the directory containing the binary\n    libreofficePaths: [\n      'libreoffice_path', // the full path of the binary\n    ] // Array of paths to LibreOffice binary executables.\n  },\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Generating Migration File via Adonis CLI\nDESCRIPTION: Command to generate a new migration file for altering an existing column to JSON type using the Adonis CLI ace command.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/basic_usage/migration-setup.md#2025-04-19_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Create a new migration file\nnode ace make:migration change_avatar_column_to_json --table=users\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with NPM\nDESCRIPTION: Installs the Sharp image processing module using NPM package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-image.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install sharp\n```\n\n----------------------------------------\n\nTITLE: Creating Picture Component in React\nDESCRIPTION: This snippet demonstrates how to create a Picture component in React. It accepts source and alt props, and renders a picture element with multiple source tags for different viewport sizes.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport React from 'react';\n\nconst Picture = ({ source, alt }) => {\n  return (\n    <picture>\n      <source media=\"(min-width: 1200px)\" srcSet={source.large.url} />\n      <source media=\"(min-width: 768px)\" srcSet={source.medium.url} />\n      <source media=\"(min-width: 480px)\" srcSet={source.small.url} />\n      <img src={source.url} alt={alt} />\n    </picture>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Execution Permissions for FFmpeg Binaries\nDESCRIPTION: Shell commands to set execution permissions for ffmpeg and ffprobe binaries after downloading them.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ncd bin\nchmod +x ffmpeg\nchmod +x ffprobe\n```\n\n----------------------------------------\n\nTITLE: Configuring FFmpeg Binary Paths in Adonis Attachment\nDESCRIPTION: Shows how to configure the paths for ffmpeg and ffprobe binaries using the app.makePath() helper in the Adonis Attachment configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  bin: { // [!code focus:4]\n    ffmpegPath: app.makePath('bin/ffmpeg'),\n    ffprobePath: app.makePath('bin/ffprobe'),\n  },\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering Attachment in Edge Template\nDESCRIPTION: Displays the uploaded avatar image in an Edge template using the getUrl() method from the attachment object.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/start-here.md#2025-04-19_snippet_2\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl() }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with PNPM\nDESCRIPTION: Installs the Sharp image processing module using PNPM package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-image.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install sharp\n```\n\n----------------------------------------\n\nTITLE: Creating Picture Component in Vue\nDESCRIPTION: This snippet shows how to create a Picture component in Vue. It uses a template for the picture element and a script setup for defining props.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n<template>\n  <picture>\n    <source media=\"(min-width: 1200px)\" :srcset=\"source.large.url\">\n    <source media=\"(min-width: 768px)\" :srcset=\"source.medium.url\">\n    <source media=\"(min-width: 480px)\" :srcset=\"source.small.url\">\n    <img :src=\"source.url\" :alt=\"alt\">\n  </picture>\n<template>\n\n<script setup>\n  defineProps({\n    source: Object,\n    alt: String\n  })\n</script>\n```\n\n----------------------------------------\n\nTITLE: Configuring FFmpeg Binary Paths in Adonis Attachment\nDESCRIPTION: This configuration sets the paths for ffmpeg and ffprobe binaries using the app.makePath() function.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  bin: {\n    ffmpegPath: app.makePath('bin/ffmpeg'),\n    ffprobePath: app.makePath('bin/ffprobe'),\n  },\n  converters: [\n    // ...\n  ]\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Queue Concurrency in Adonis Attachment\nDESCRIPTION: Demonstrates how to set the concurrency for the conversion queue, allowing multiple tasks to be processed simultaneously.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/configuration.md#2025-04-19_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  queue: { // [!code focus:3]\n    concurrency: 2\n  },\n  converters: [\n    // ...\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Queue Concurrency in Attachment Configuration\nDESCRIPTION: This snippet demonstrates how to configure the queue concurrency for processing tasks in the attachment configuration. It sets the concurrency to 2, allowing two tasks to be processed simultaneously.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/configuration.md#2025-04-19_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  queue: { // [!code focus:3]\n    concurrency: 2\n  },\n  converters: {\n    // ...\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Installing libreoffice-file-converter using Package Managers\nDESCRIPTION: Commands for installing the libreoffice-file-converter package using different Node.js package managers (npm, pnpm, and yarn).\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-document.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install libreoffice-file-converter\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install libreoffice-file-converter\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add libreoffice-file-converter\n```\n\n----------------------------------------\n\nTITLE: Creating Picture Component in Svelte\nDESCRIPTION: This snippet demonstrates how to create a Picture component in Svelte. It exports source and alt variables and uses them in the picture element markup.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n<script>\n  export let source;\n  export let alt;\n</script>\n\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset={source.large.url}>\n  <source media=\"(min-width: 768px)\" srcset={source.medium.url}>\n  <source media=\"(min-width: 480px)\" srcset={source.small.url}>\n  <img src={source.url} alt={alt}>\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Creating Queue Preload File in Adonis\nDESCRIPTION: Command to generate a preload file for queue event handling using Ace CLI\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/queue.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace make:preload queue\n```\n\n----------------------------------------\n\nTITLE: Video Attachment JSON Structure\nDESCRIPTION: JSON structure for video attachments including basic metadata and preview image generation. Supports video dimensions and preview image variants.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/structure-data-json.md#2025-04-19_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\":\"rp1xsz3mz3o70190qnmaptyb.mkv\",\n  \"extname\":\"mkv\",\n  \"size\":1677679979,\n  \"meta\":{\n    \"dimension\":{\n      \"width\":1912,\n      \"height\":812\n    }\n  },\n  \"mimeType\":\"video/x-matroska\",\n  \"path\":\"videos/rp1xsz3mz3o70190qnmaptyb.mkv\",\n  \"originalName\":\"The.Legend.of.Kunlun.2022.FRENCH.1080p.WEBRip.x264.AAC-MULTiViSiON.mkv\",\n  \"variants\":[\n    {\n      \"key\":\"preview\",\n      \"folder\":\"videos/variants/rp1xsz3mz3o70190qnmaptyb.mkv\",\n      \"name\":\"o8lechg4cuy8psth0b2uebq4.jpg\",\n      \"extname\":\"jpg\",\n      \"size\":31150,\n      \"meta\": {\n        \"dimension\":{\n          \"width\":720,\n          \"height\":306\n        },\n        \"orientation\":{\n          \"value\":1,\n          \"description\":\"top-left\"\n        }\n      },\n      \"mimeType\":\"image/jpeg\",\n      \"path\":\"videos/variants/rp1xsz3mz3o70190qnmaptyb.mkv/o8lechg4cuy8psth0b2uebq4.jpg\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Queue Concurrency in Adonis Attachment\nDESCRIPTION: This configuration sets the concurrency for the convert processing queue to 2 tasks.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/configuration.md#2025-04-19_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig } from '@jrmc/adonis-attachment'\nimport { InferConverters } from '@jrmc/adonis-attachment/types/config'\n\nconst attachmentConfig = defineConfig({\n  queue: {\n    concurrency: 2\n  },\n  converters: {\n    // ...\n  }\n})\n\nexport default attachmentConfig\n\ndeclare module '@jrmc/adonis-attachment' {\n  interface AttachmentVariants extends InferConverters<typeof attachmentConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Installing node-poppler dependency for PDF thumbnail generation\nDESCRIPTION: Commands to install the node-poppler package using different package managers. This package is required for generating thumbnail images from PDF files in the Adonis Attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-pdf.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add node-poppler\n```\n\n----------------------------------------\n\nTITLE: Using Picture Component in Edge Template\nDESCRIPTION: This snippet shows how to use the Picture component in an Edge template. It passes the article.image as the source and provides an alt text.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n@!picture({\n  source: article.image,\n  alt: \"Image alt\"\n})\n```\n\n----------------------------------------\n\nTITLE: Manual installation of Adonis Attachment with yarn\nDESCRIPTION: Instructions for manually installing the Adonis Attachment package using yarn and then running the configure command.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/installation.md#2025-04-19_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nyarn add @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Implementing Picture Component in Svelte\nDESCRIPTION: Svelte component implementation for responsive picture element. Exports source and alt props for component configuration.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_3\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  export let source;\n  export let alt;\n</script>\n\n<picture>\n  <source media=\"(min-width: 1200px)\" srcset={source.large.url}>\n  <source media=\"(min-width: 768px)\" srcset={source.medium.url}>\n  <source media=\"(min-width: 480px)\" srcset={source.small.url}>\n  <img src={source.url} alt={alt}>\n</picture>\n```\n\n----------------------------------------\n\nTITLE: Implementing Picture Component in Vue\nDESCRIPTION: Vue component implementation using template syntax for responsive picture element. Defines props for source object and alt text.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_2\n\nLANGUAGE: vue\nCODE:\n```\n<template>\n  <picture>\n    <source media=\"(min-width: 1200px)\" :srcset=\"source.large.url\">\n    <source media=\"(min-width: 768px)\" :srcset=\"source.medium.url\">\n    <source media=\"(min-width: 480px)\" :srcset=\"source.small.url\">\n    <img :src=\"source.url\" :alt=\"alt\">\n  </picture>\n<template>\n\n<script setup>\n  defineProps({\n    source: Object,\n    alt: String\n  })\n</script>\n```\n\n----------------------------------------\n\nTITLE: Implementing Picture Component in React\nDESCRIPTION: React component implementation for responsive picture element. Takes source and alt props to render different image sizes based on viewport width.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/use-cases/picture.md#2025-04-19_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport React from 'react';\n\nconst Picture = ({ source, alt }) => {\n  return (\n    <picture>\n      <source media=\"(min-width: 1200px)\" srcSet={source.large.url} />\n      <source media=\"(min-width: 768px)\" srcSet={source.medium.url} />\n      <source media=\"(min-width: 480px)\" srcSet={source.small.url} />\n      <img src={source.url} alt={alt} />\n    </picture>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Adonis Attachment with Ace Command\nDESCRIPTION: Simple installation using the Adonis ace command for automatic configuration\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/installation.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace add @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg dependency using yarn\nDESCRIPTION: Command to install the fluent-ffmpeg package using yarn. This package is required for generating video thumbnails in the Adonis Attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-video.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Using Picture Component in Svelte\nDESCRIPTION: This snippet demonstrates how to use the Picture component in a Svelte application. It passes the article.image as the source prop and provides an alt prop.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/use-cases/picture.md#2025-04-19_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\n<Picture \n  source={ article.image } \n  alt=\"Image alt\" \n/>\n```\n\n----------------------------------------\n\nTITLE: Installing Adonis Attachment with Ace Command\nDESCRIPTION: Use the Adonis Ace command to automatically install and configure the Adonis Attachment package.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/installation.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace add @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Installing Adonis Attachment with ace command\nDESCRIPTION: The simplest way to install the Adonis Attachment package using the ace command which automatically configures the package.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/installation.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace add @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Manual Installation Options for Different Package Managers\nDESCRIPTION: Manual installation steps using npm, pnpm, or yarn, followed by the configure command\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/installation.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Video to Animated GIF Converter Implementation\nDESCRIPTION: TypeScript class implementing video to animated GIF conversion using FFmpeg, handling both file and buffer inputs with temporary file management\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/advanced_usage/custom-converter.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { ConverterAttributes } from '@jrmc/adonis-attachment/types/converter'\nimport type { Input } from '@jrmc/adonis-attachment/types/input'\n\nimport os from 'node:os'\nimport path from 'node:path'\nimport fs from 'fs/promises'\nimport { cuid } from '@adonisjs/core/helpers'\nimport Converter from '@jrmc/adonis-attachment/converters/converter'\nimport ffmpeg from 'fluent-ffmpeg'\n\nexport default class Video2GifConverter extends Converter {\n  async handle({ input }: ConverterAttributes): Promise<Input> {\n    return await this.videoToGif(ffmpeg, input)\n  }\n\n  async videoToGif(ffmpeg: Function, input: Input) {\n    let file = input\n\n    if (Buffer.isBuffer(input)) {\n      file = await this.bufferToTempFile(input)\n    }\n\n    return new Promise<string>((resolve, reject) => {\n      const folder = os.tmpdir()\n      const filename = `${cuid()}.png`\n      const destination = path.join(folder, filename)\n\n\n      const ff = ffmpeg(file)\n\n      if (this.binPaths) {\n        if (this.binPaths.ffmpegPath) {\n          ff.setFfmpegPath(this.binPaths.ffmpegPath)\n        }\n      }\n\n      ff\n      .withOptions([\n        '-ss 1',\n        `-i ${file}`,\n        `-filter_complex [0:v]trim=duration=3;`,\n        '-f gif'\n      ])\n      .on('end', () => {\n        resolve(destination)\n      })\n      .on('error', (err: Error) => {\n        reject(err)\n      })\n      .output(destination)\n      .run()\n    })\n  }\n\n  async bufferToTempFile(input: Buffer) {\n    const folder = os.tmpdir()\n    const tempFilePath = path.join(folder, `tempfile-${Date.now()}.tmp`)\n    await fs.writeFile(tempFilePath, input)\n    return tempFilePath\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg using yarn\nDESCRIPTION: Command to install the fluent-ffmpeg package using yarn. This provides another option for adding the necessary dependency to the Adonis attachment project for video processing.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-video.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Installing node-poppler dependency for PDF thumbnail generation\nDESCRIPTION: Commands for installing the node-poppler package using different package managers. This package is required for generating PDF thumbnails in Adonis Attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-pdf.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add node-poppler\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module using npm\nDESCRIPTION: This command installs the Sharp module using npm (Node Package Manager). Sharp is required for generating variant images in the project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-image.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install sharp\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with PNPM\nDESCRIPTION: Command to install the Sharp module using PNPM package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-image.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install sharp\n```\n\n----------------------------------------\n\nTITLE: Manual installation of Adonis Attachment with npm\nDESCRIPTION: Instructions for manually installing the Adonis Attachment package using npm and then running the configure command.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/essentials/installation.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @jrmc/adonis-attachment\nnode ace configure @jrmc/adonis-attachment\n```\n\n----------------------------------------\n\nTITLE: Installing node-poppler via Package Managers\nDESCRIPTION: Commands for installing the node-poppler package using different Node.js package managers (npm, pnpm, and yarn). This package provides Node.js bindings for the poppler PDF toolkit.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-pdf.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install node-poppler\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add node-poppler\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module using yarn\nDESCRIPTION: This command installs the Sharp module using yarn package manager. Sharp is essential for generating image variants in the project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-image.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add sharp\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg dependency using pnpm\nDESCRIPTION: Command to install the fluent-ffmpeg package using pnpm. This package is required for generating video thumbnails in the Adonis Attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-video.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg using pnpm\nDESCRIPTION: Command to install the fluent-ffmpeg package using pnpm. This alternative package manager can be used to add the required dependency for video thumbnail generation.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-video.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with NPM\nDESCRIPTION: Command to install the Sharp module using NPM package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-image.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install sharp\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with Yarn\nDESCRIPTION: Command to install the Sharp module using Yarn package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-image.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add sharp\n```\n\n----------------------------------------\n\nTITLE: Configuring Adonis Drive for Attachment Storage\nDESCRIPTION: Configuration for the @adonisjs/drive package to set up file storage compatible with older versions of the attachment package. It defines the default disk and file system service settings.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/changelog.md#2025-04-19_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport env from '#start/env'\nimport app from '@adonisjs/core/services/app'\nimport { defineConfig, services } from '@adonisjs/drive'\n\nconst driveConfig = defineConfig({\n  default: env.get('DRIVE_DISK'),\n\n  services: {\n    fs: services.fs({\n      location: app.publicPath(),\n      serveFiles: true,\n      routeBasePath: '/uploads',\n      visibility: 'public',\n    }),\n  },\n})\n\nexport default driveConfig\n\ndeclare module '@adonisjs/drive/types' {\n  export interface DriveDisks extends InferDriveDisks<typeof driveConfig> {}\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module with Yarn\nDESCRIPTION: Installs the Sharp image processing module using Yarn package manager\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-image.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add sharp\n```\n\n----------------------------------------\n\nTITLE: Installing libreoffice-file-converter with pnpm\nDESCRIPTION: Command to install the libreoffice-file-converter package using pnpm package manager. This package enables document conversion for thumbnails in Adonis Attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-document.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install libreoffice-file-converter\n```\n\n----------------------------------------\n\nTITLE: Old Configuration Structure for Attachment Converters\nDESCRIPTION: Previous configuration structure for defining attachment converters in the /config/attachment.ts file, using an array of converter objects.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/changelog.md#2025-04-19_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@jrmc/adonis-attachment'\n\nexport default defineConfig({\n  converters: [\n    {\n      key: 'thumbnail',\n      converter: () => import('@jrmc/adonis-attachment/converters/image_converter'),\n      options: {\n        resize: 300,\n      }\n    }\n  ]\n})\n```\n\n----------------------------------------\n\nTITLE: Installing libreoffice-file-converter package\nDESCRIPTION: Commands to install the libreoffice-file-converter package using different package managers. This package is required for generating image variants for thumbnail documents.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-document.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install libreoffice-file-converter\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install libreoffice-file-converter\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add libreoffice-file-converter\n```\n\n----------------------------------------\n\nTITLE: Installing libreoffice-file-converter with yarn\nDESCRIPTION: Command to install the libreoffice-file-converter package using yarn package manager. This dependency is needed for document conversion in Adonis Attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-document.md#2025-04-19_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nyarn add libreoffice-file-converter\n```\n\n----------------------------------------\n\nTITLE: Installing Beta Version of @jrmc/adonis-attachment\nDESCRIPTION: Command to add the beta version of the @jrmc/adonis-attachment package to an AdonisJS project using the ace CLI.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/changelog.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnode ace add @jrmc/adonis-attachment@beta\n```\n\n----------------------------------------\n\nTITLE: Including Converter Table Documentation\nDESCRIPTION: HTML comment directive to include a table of converters from an external markdown file\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/essentials/introduction.md#2025-04-19_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<!--@include: ../partials/table-converter.md-->\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg dependency using npm\nDESCRIPTION: Command to install the fluent-ffmpeg package using npm. This package is required for generating video thumbnails in the Adonis Attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-video.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg Package\nDESCRIPTION: Command line instructions for installing the fluent-ffmpeg package using different package managers (npm, pnpm, yarn). This package is required for generating video thumbnails and requires ffmpeg to be installed on the system.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/guide/partials/install-video.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install fluent-ffmpeg\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm install fluent-ffmpeg\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Including Table Converter Documentation\nDESCRIPTION: HTML comment indicating inclusion of external table converter documentation file\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/essentials/introduction.md#2025-04-19_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<!--@include: ../partials/table-converter.md-->\n```\n\n----------------------------------------\n\nTITLE: Installing fluent-ffmpeg using npm\nDESCRIPTION: Command to install the fluent-ffmpeg package using npm. This package is required for generating video thumbnail variants in the Adonis attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-video.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install fluent-ffmpeg\n```\n\n----------------------------------------\n\nTITLE: Configuring VitePress Homepage Layout for Adonis Attachment\nDESCRIPTION: YAML configuration that defines the homepage structure including hero section with action buttons and three main feature sections highlighting upload, conversion, and frontend compatibility features.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/index.md#2025-04-19_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nlayout: home\n\nhero:\n  name: \"Adonis Attachment\"\n  text: \"Simple upload for Lucid models.\"\n  tagline: \"Automatically generating various sizes and formats.\"\n  actions:\n    - theme: brand\n      text: Getting started\n      link: /guide/start-here\n    - theme: alt\n      text: View on GitHub\n      link: https://github.com/batosai/adonis-attachment\n\nfeatures:\n  - icon:\n      light: /light-upload.svg\n      dark: /dark-upload.svg\n    title: Upload\n    details: Simplifying upload management.\n  - icon:\n      light: /light-convert.svg\n      dark: /dark-convert.svg\n    title: Convert\n    details: Optimise, convert, crop image, thumbnail video etc.\n  - icon:\n      light: /light-view.svg\n      dark: /dark-view.svg\n    title: Edge & inertia compliant\n    details: Go to attachment in your favorite frontend\n```\n\n----------------------------------------\n\nTITLE: Initializing Basic Model Attachment in TypeScript\nDESCRIPTION: Basic setup for an AdonisJS model with an attachment. This example shows importing necessary components, applying the Attachmentable mixin, and declaring an avatar attachment field.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/basic_usage/model-setup.md#2025-04-19_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { BaseModel } from '@adonisjs/lucid/orm'\nimport { compose } from '@adonisjs/core/helpers'\nimport { attachment, Attachmentable } from '@jrmc/adonis-attachment'\nimport type { Attachment } from '@jrmc/adonis-attachment/types/attachment' // [!code highlight]\n\nclass User extends compose(BaseModel, Attachmentable) { // [!code highlight]\n  @attachment() // [!code highlight]\n  declare avatar: Attachment // [!code highlight]\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Attachment in Edge Template\nDESCRIPTION: Edge template code for displaying an avatar attachment using the AdonisJS attachment package. It shows how to use the getUrl() method to retrieve the attachment URL.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/README.md#2025-04-19_snippet_3\n\nLANGUAGE: edge\nCODE:\n```\n<img src=\"{{ await user.avatar.getUrl() }}\" loading=\"lazy\" alt=\"\" />\n```\n\n----------------------------------------\n\nTITLE: Installing libreoffice-file-converter with npm\nDESCRIPTION: Command to install the libreoffice-file-converter package using npm package manager. This package is required for document conversion functionality in Adonis Attachment.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v3/guide/partials/install-document.md#2025-04-19_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install libreoffice-file-converter\n```\n\n----------------------------------------\n\nTITLE: Installing Sharp Module using pnpm\nDESCRIPTION: This command installs the Sharp module using pnpm (Performant npm). Sharp is necessary for image processing in the adonis-attachment project.\nSOURCE: https://github.com/batosai/adonis-attachment/blob/main/docs/v2/guide/partials/install-image.md#2025-04-19_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\npnpm install sharp\n```"
  }
]
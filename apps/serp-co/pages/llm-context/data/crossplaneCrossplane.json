[
  {
    "owner": "crossplane",
    "repo": "crossplane",
    "content": "TITLE: Owner-Based Struct Tree with Sub-struct Approach in YAML\nDESCRIPTION: Example showing the recommended sub-struct approach using forProvider/atProvider fields, which clearly separates provider-specific fields from Crossplane/Kubernetes fields, making the resource definition more maintainable and clear.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.gcp.crossplane.io/v1alpha1\nkind: Network\nmetadata:\n  name: my-legacy-network\n  selfLink: /apis/compute.gcp.crossplane.io/v1alpha1/networks/my-legacy-network\nspec:\n  providerConfigRef:\n    name: monus-gcp\n  reclaimPolicy: Delete\n  writeConnectionSecretToRef: {}\n  forProvider:\n    name: monus-legacy-network-res\n    routingConfig:\n      routingMode: REGIONAL\nstatus:\n  conditions:\n  - lastTransitionTime: \"2019-08-29T05:55:16Z\"\n    reason: Successfully reconciled managed resource\n    status: \"True\"\n    type: Synced\n  atProvider:\n    IPv4Range: 10.240.0.0/16\n    creationTimestamp: \"2019-08-28T10:45:27.445-07:00\"\n    gatewayIPv4: 10.240.0.1\n    id: 75666386684937048\n    kind: compute#network\n    name: monus-legacy-network-res\n    routingConfig:\n      routingMode: REGIONAL\n    selfLink: https://www.googleapis.com/compute/v1/projects/crossplane-playground/global/networks/monus-legacy-network-res\n```\n\n----------------------------------------\n\nTITLE: GlobalAddressParameters Example with Required and Optional Fields\nDESCRIPTION: Example Go struct definition demonstrating the use of pointer types for optional fields and value types for required fields, following Kubernetes conventions with appropriate comment markers and struct tags.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\ntype GlobalAddressParameters struct {\n  ...\n\n  // IPVersion: The IP version that will be used by this address. Valid\n  // options are IPV4 or IPV6.\n  //\n  // Possible values:\n  //   \"IPV4\"\n  //   \"IPV6\"\n  //   \"UNSPECIFIED_VERSION\"\n  // +optional\n  IPVersion *string `json:\"ipVersion,omitempty\"`\n\n  // Name of the resource. The name must be 1-63 characters long, and comply\n  // with RFC1035. Specifically, the name must be 1-63 characters long and\n  // match the regular expression `[a-z]([-a-z0-9]*[a-z0-9])?`. The first\n  // character must be a lowercase letter, and all following characters\n  // (except for the last character) must be a dash, lowercase letter, or\n  // digit. The last character must be a lowercase letter or digit.\n  Name string `json:\"name\"`\n\n  // Network: The URL of the network in which to reserve the address. This\n  // field can only be used with INTERNAL type with the VPC_PEERING\n  // purpose.\n  // +optional\n  Network *string `json:\"network,omitempty\"`\n  \n  ...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Provider Package Metadata in YAML\nDESCRIPTION: Example of a Provider package metadata specification in YAML format, showing all supported fields including controller configuration, dependencies, and permission requests.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-format-v2.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: meta.pkg.crossplane.io/v1alpha1\nkind: Provider\nmetadata:\n  name: provider-example\n  annotations:\n    company: Upbound\n    maintainer: Nic Cope <negz@upbound.io>\n    keywords: cloud-native, kubernetes\n    source: github.com/crossplane-contrib/provider-example\n    license: Apache-2.0\n    description: |\n      The Example provider adds support for example resources to Crossplane.\n    provider: example\nspec:\n  controller:\n    image: example/provider-example:v0.1.0\n  crossplane: v0.13.0\n  dependsOn:\n  - provider: example/provider-uncommon\n    version: v0.1.0\n  permissionRequests:\n  - apiGroups:\n      - otherpackage.example.com\n    resources:\n      - otherresource\n      - otherresource/status\n    verbs:\n      - \"*\"\n```\n\n----------------------------------------\n\nTITLE: Defining a Crossplane Resource Kind in Go\nDESCRIPTION: This code snippet defines the structure for a `FavouriteDBInstance` resource in Go, including its Spec and Status. The `Spec` defines the desired state of the infrastructure, while `Status` reflects the observed state. Kubebuilder markers are used to define the resource as a Kubernetes object and set its scope to Cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n\"type FavouriteDBInstanceSpec struct {\n    // INSERT ADDITIONAL SPEC FIELDS - desired state of infrastructure\n    // Important: Run \\\"make\\\" to regenerate code after modifying this file\n}\n\n// FavouriteDBInstanceStatus defines the observed state of FavouriteDBInstance\ntype FavouriteDBInstanceStatus struct {\n    // INSERT ADDITIONAL STATUS FIELD - define observed state of infrastructure\n    // Important: Run \\\"make\\\" to regenerate code after modifying this file\n}\n\n// +kubebuilder:object:root=true\n\n// FavouriteDBInstance is the Schema for the favouritedbinstance API\n// +kubebuilder:resource:scope=Cluster\ntype FavouriteDBInstance struct {\n    metav1.TypeMeta   `json:\",inline\"`\n    metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n    Spec   FavouriteDBInstanceeSpec  `json:\"spec,omitempty\"`\n    Status FavouriteDBInstanceStatus `json:\"status,omitempty\"`\n}\"\n```\n\n----------------------------------------\n\nTITLE: Structuring Crossplane API Object with Separated Spec and Status in Go\nDESCRIPTION: This code snippet shows how to properly structure a Crossplane API object by separating the embedded struct into spec and status components. It demonstrates the correct way to handle mixed configurable and non-configurable fields in Crossplane managed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// This is the Crossplane representation of the API object spec\ntype CrossplaneAPIObjectSpec struct {\n  // Configurable field in top-level object\n  // +optional\n  FieldOne *string `json:\"fieldOne,omitempty\"`\n  \n  // Embedded struct in top-level object\n  // +optional\n  EmbeddedStructOne *EmbeddedStructSpec `json:\"embeddedStructOne,omitempty\"`\n}\n\n// Only the configurable fields in EmbeddedStruct\ntype EmbeddedStructSpec struct {\n  // This field is configurable so it should be in spec.forProvider\n  // +optional\n  SomeConfigurableField *string `json:\"someConfigurableField,omitempty\"`\n\n  // This field is configurable so it should be in spec.forProvider\n  // +optional\n  AnotherConfigurableField *string `json:\"anotherConfigurableField,omitempty\"`\n}\n\n// This is the Crossplane representation of the API object status\ntype CrossplaneAPIObjectStatus struct {\n  // Non-Configurable field in top-level object\n  FieldTwo *string `json:\"fieldTwo,omitempty\"`\n  \n  // Embedded struct in top-level object\n  EmbeddedStructOne *EmbeddedStructStatus `json:\"embeddedStructOne,omitempty\"`\n}\n\n// Only the non-configurable fields in EmbeddedStruct\ntype EmbeddedStructStatus struct {\n  // This field is not configurable so it should be in status.atProvider\n  SomeNonConfigurableField string `json:\"someNonConfigurableField,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Composition for Private MySQL Server\nDESCRIPTION: Example composition demonstrating how to create an Azure MySQL server with customizable configurations, including resource group, server settings, and network rules\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Composition\nmetadata:\n  name: private-mysql-server\n  labels:\n    connectivity: private\nspec:\n  from:\n    apiVersion: database.example.org/v1alpha1\n    kind: MySQLInstance\n  to:\n  - base:\n      apiVersion: azure.crossplane.io/v1alpha3\n      kind: ResourceGroup\n      spec:\n        location: West US\n        providerConfigRef:\n          name: example\n        reclaimPolicy: Delete\n    patches:\n    - fromFieldPath: \"spec.region\"\n      toFieldPath: \"spec.forProvider.location\"\n      transforms:\n      - type: map\n        map:\n          us-west: \"West US\"\n          us-east: \"East US\"\n  - base:\n      apiVersion: database.azure.crossplane.io/v1beta1\n      kind: MySQLServer\n      spec:\n        forProvider:\n          administratorLogin: myadmin\n          resourceGroupNameSelector:\n            matchComposite: true\n          location: West US\n          sslEnforcement: Disabled\n          version: \"5.6\"\n          sku:\n            tier: Basic\n            capacity: 1\n            family: Gen5\n          storageProfile:\n            storageMB: 20480\n        writeConnectionSecretToRef:\n          namespace: crossplane-system\n        providerConfigRef:\n          name: example\n        reclaimPolicy: Delete\n    patches:\n    - fromFieldPath: \"metadata.uid\"\n      toFieldPath: \"spec.writeConnectionSecretToRef.name\"\n    - fromFieldPath: \"spec.engineVersion\"\n      toFieldPath: \"spec.forProvider.version\"\n    - fromFieldPath: \"spec.storageGB\"\n      toFieldPath: \"spec.forProvider.storageMB\"\n      transforms:\n      - type: math\n        math:\n          multiply: 1024\n    - fromFieldPath: \"spec.region\"\n      toFieldPath: \"spec.forProvider.location\"\n      transforms:\n      - type: map\n        map:\n          us-west: \"West US\"\n          us-east: \"East US\"\n    connectionDetails:\n    - name: username\n      fromConnectionSecretKey: username\n    - name: password\n      fromConnectionSecretKey: password\n    - name: endpoint\n      fromConnectionSecretKey: endpoint\n  - base:\n      apiVersion: database.azure.crossplane.io/v1alpha3\n      kind: MySQLServerVirtualNetworkRule\n      spec:\n        serverNameSelector:\n          matchComposite: true\n        resourceGroupNameSelector:\n          matchComposite: true\n        properties:\n          virtualNetworkSubnetIdRef:\n            name: sample-subnet\n        reclaimPolicy: Delete\n        providerConfigRef:\n          name: azure-provider\"\n```\n\n----------------------------------------\n\nTITLE: Implementing XRobotGroup Composition Function in Go\nDESCRIPTION: This example demonstrates a Crossplane Function that composes Robot resources based on an XRobotGroup XR specification. It showcases how to use the Go SDK to handle composite resources, set external names, and manage composed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n    \"context\"\n    \"fmt\"\n    \"math/rand\"\n\n    \"github.com/upbound/provider-dummy/apis/iam/v1alpha1\"\n\n    function \"github.com/crossplane/fn-sdk-go\"\n    \"github.com/crossplane/fn-sdk-go/pb\"\n    \"github.com/crossplane/fn-sdk-go/errors\"\n)\n\nvar colors = []string{\"red\", \"green\", \"blue\", \"yellow\", \"orange\"}\n\n// Function defines the logic of your Function.\nfunc Function(ctx context.Context, req *pb.RunFunctionRequest) (*pb.RunFunctionResponse, error) {\n  // Get the desired XR from the request.\n  xr := function.NewEmptyCompositeResource()\n  function.GetCompositeResource(req, xr)\n\n  // Get the desired resource count from the XR.\n  count, err := xr.GetInteger(\"spec.count\")\n  if err != nil {\n      return errors.Wrap(err, \"could not get desired resource count\")\n  }\n\n  // Create a response to return. This deep-copies any existing desired state.\n  rsp := function.NewResponseTo(req)\n\n  // Ensure the desired number of robots exist.\n  for i := 0; i < int(count); i++ {\n      name := fmt.Sprintf(\"robot-%d\")\n\n      // Get the desired composed resource (if any) from the request.\n      // Since we're using Go we can import and work with API types if we want.\n      robot := &v1alpha1.Robot{}\n      function.GetComposedResource(req, name, robot)\n\n      // The robot's external name should be derived from the XR's.\n      function.SetExternalName(robot, fmt.Sprintf(\"%s-%s\", function.GetExternalName(xr), name))\n\n      // Give this robot a random color!\n      if robot.Spec.ForProvider.Color != \"\" {\n          c := colors[rant.Intn(len(colors))]\n          robot.Spec.ForProvider.Color = c\n\n          // Add a result indicating that we set the color. Crossplane will\n          // surface this as a Kubernetes event and a debug log.\n          function.Normalf(rsp, \"set robot %q color to %q\", name, c)\n      }\n\n      // Set our new desired robot state. This will be a no-op if our robot\n      // already existed.\n      function.SetComposedResource(rsp, name, robot)\n  }\n\n  return rsp, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane from Stable Channel Using Helm\nDESCRIPTION: This snippet illustrates how to install Crossplane from the stable Helm chart repository into a Kubernetes cluster. It ensures that the necessary namespace is created and the Helm repository is properly added and updated.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_0\n\nLANGUAGE: console\nCODE:\n```\nkubectl create namespace crossplane-system\n\nhelm repo add crossplane-stable https://charts.crossplane.io/stable\nhelm repo update\n\nhelm install crossplane --namespace crossplane-system crossplane-stable/crossplane\n```\n\n----------------------------------------\n\nTITLE: Implementing Table Driven Tests in Go\nDESCRIPTION: A comprehensive example of implementing table-driven tests in Go for Crossplane. Shows the standard structure including test case definition, args/want structs, and comparison using go-cmp. Includes context handling and error comparison.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_15\n\nLANGUAGE: go\nCODE:\n```\n// Example is the function we're testing.\nfunc Example(ctx context.Context, input string) (int, error) {\n        // ...\n}\n\n// Test function names are always PascalCase. No underscores.\nfunc TestExample(t *testing.T) {\n        type args struct {\n                ctx   context.Context\n                input string\n        }\n\n        type want struct {\n                output int\n                err    error\n        }\n\n        cases := map[string]struct{\n                reason string\n                args   args\n                want   want\n        }{\n                // The summary is always PascalCase. No spaces, hyphens, or underscores.\n                \"BriefTestCaseSummary\": {\n                        reason: \"A longer summary of what we're testing - printed if the test fails.\",\n                        args: args{\n                                ctx: context.Background(),\n                                input: \"some input value\",\n                        }\n                        want: want{\n                                output: \"the expected output\",\n                                err: nil,\n                        }\n                },\n        }\n        \n        for name, tc := range cases {\n                t.Run(name, func(t *testing.T) {\n                        got, err := Example(tc.args.ctx, tc.args.input)\n\n                        // We prefer to use https://github.com/google/go-cmp/\n                        // even for simple comparisons to keep test output\n                        // consistent. Some Crossplane specific cmp options can\n                        // be found in crossplane-runtime/pkg/test.\n                        if diff := cmp.Diff(tc.want.err, err, cmpopts.EquateErrors()); diff != \"\" {\n                                t.Errorf(\"%s\\nExample(...): -want, +got:\\n%s\", tc.reason, diff)\n                        }\n\n                        if diff := cmp.Diff(tc.want.output, got); diff != \"\" {\n                                t.Errorf(\"%s\\nExample(...): -want, +got:\\n%s\", tc.reason, diff)\n                        }\n                })\n        }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Managed Resource Controller for FavouriteDBInstance in Go\nDESCRIPTION: Complete implementation of a managed resource controller showcasing the setup, connection management, and external resource operations (Create, Read, Update, Delete) for a FavouriteDBInstance resource. Uses Crossplane's managed.NewReconciler and implements managed.ExternalClient interface.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\nimport (\n    \"context\"\n    \"fmt\"\n    \"strings\"\n\n    \"github.com/pkg/errors\"\n    corev1 \"k8s.io/api/core/v1\"\n    \"k8s.io/apimachinery/pkg/types\"\n    ctrl \"sigs.k8s.io/controller-runtime\"\n    \"sigs.k8s.io/controller-runtime/pkg/client\"\n\n    // An API client of the hypothetical FavouriteDB service.\n    \"github.com/fcp-sdk/v1/services/database\"\n\n    xpv1 \"github.com/crossplane/crossplane-runtime/apis/common/v1\"\n    \"github.com/crossplane/crossplane-runtime/pkg/meta\"\n    \"github.com/crossplane/crossplane-runtime/pkg/resource\"\n    \"github.com/crossplane/crossplane-runtime/pkg/reconciler/managed\"\n\n    \"github.com/crossplane/provider-fcp/apis/database/v1alpha3\"\n    fcpv1alpha3 \"github.com/crossplane/provider-fcp/apis/v1alpha3\"\n)\n\ntype FavouriteDBInstanceController struct{}\n\n// SetupWithManager instantiates a new controller using a managed.Reconciler\n// configured to reconcile FavouriteDBInstances using an ExternalClient produced by\n// connecter, which satisfies the ExternalConnecter interface.\nfunc (c *FavouriteDBInstanceController) SetupWithManager(mgr ctrl.Manager) error {\n    return ctrl.NewControllerManagedBy(mgr).\n        Named(strings.ToLower(fmt.Sprintf(\"%s.%s\", v1alpha3.FavouriteDBInstanceKind, v1alpha3.Group))).\n        For(&v1alpha3.FavouriteDBInstance{}).\n        Complete(managed.NewReconciler(mgr,\n            resource.ManagedKind(v1alpha3.FavouriteDBInstanceGroupVersionKind),\n            managed.WithExternalConnecter(&connecter{client: mgr.GetClient()})))\n}\n\n// Connecter satisfies the resource.ExternalConnecter interface.\ntype connecter struct{ client client.Client }\n\n// Connect to the supplied resource.Managed (presumed to be a\n// FavouriteDBInstance) by using the Provider it references to create a new\n// database client.\nfunc (c *connecter) Connect(ctx context.Context, mg resource.Managed) (managed.ExternalClient, error) {\n    // Assert that resource.Managed we were passed in fact contains a\n    // FavouriteDBInstance. We told NewControllerManagedBy that this was a\n    // controller For FavouriteDBInstance, so something would have to go\n    // horribly wrong for us to encounter another type.\n    i, ok := mg.(*v1alpha3.FavouriteDBInstance)\n    if !ok {\n        return nil, errors.New(\"managed resource is not a FavouriteDBInstance\")\n    }\n\n    // Get the Provider referenced by the FavouriteDBInstance.\n    p := &fcpv1alpha3.Provider{}\n    if err := c.client.Get(ctx, meta.NamespacedNameOf(i.Spec.ProviderReference), p); err != nil {\n        return nil, errors.Wrap(err, \"cannot get Provider\")\n    }\n\n    // Get the Secret referenced by the Provider.\n    s := &corev1.Secret{}\n    n := types.NamespacedName{Namespace: p.Namespace, Name: p.Spec.Secret.Name}\n    if err := c.client.Get(ctx, n, s); err != nil {\n        return nil, errors.Wrap(err, \"cannot get Provider secret\")\n    }\n\n    // Create and return a new database client using the credentials read from\n    // our Provider's Secret.\n    client, err := database.NewClient(ctx, s.Data[p.Spec.Secret.Key])\n    return &external{client: client}, errors.Wrap(err, \"cannot create client\")\n}\n\n// External satisfies the resource.ExternalClient interface.\ntype external struct{ client database.Client }\n\n// Observe the existing external resource, if any. The managed.Reconciler\n// calls Observe in order to determine whether an external resource needs to be\n// created, updated, or deleted.\nfunc (e *external) Observe(ctx context.Context, mg resource.Managed) (managed.ExternalObservation, error) {\n    i, ok := mg.(*v1alpha3.FavouriteDBInstance)\n    if !ok {\n        return managed.ExternalObservation{}, errors.New(\"managed resource is not a FavouriteDBInstance\")\n    }\n\n    // Use our FavouriteDB API client to get an up to date view of the external\n    // resource.\n    existing, err := e.client.GetInstance(ctx, i.Spec.Name)\n\n    // If we encounter an error indicating the external resource does not exist\n    // we want to let the managed.Reconciler know so it can create it.\n    if database.IsNotFound(err) {\n        return managed.ExternalObservation{ResourceExists: false}, nil\n    }\n\n    // Any other errors are wrapped (as is good Go practice) and returned to the\n    // managed.Reconciler. It will update the \"Synced\" status condition\n    // of the managed resource to reflect that the most recent reconcile failed\n    // and ensure the reconcile is reattempted after a brief wait.\n    if err != nil {\n        return managed.ExternalObservation{}, errors.Wrap(err, \"cannot get instance\")\n    }\n\n    // The external resource exists. Copy any output-only fields to their\n    // corresponding entries in our status field.\n    i.Status.Status = existing.GetStatus()\n    i.Status.Hostname = existing.GetHostname()\n    i.Status.ID = existing.GetID()\n\n    // Update our \"Ready\" status condition to reflect the status of the external\n    // resource. Most managed resources use the below well known reasons that\n    // the \"Ready\" status may be true or false, but managed resource authors\n    // are welcome to define and use their own.\n    switch i.Status.Status {\n    case database.StatusOnline:\n        resource.SetBindable(i)\n        i.SetConditions(xpv1.Available())\n    case database.StatusCreating:\n        i.SetConditions(xpv1.Creating())\n    case database.StatusDeleting:\n        i.SetConditions(xpv1.Deleting())\n    }\n\n    // Finally, we report what we know about the external resource. In this\n    // hypothetical case FancinessLevel is the only field that can be updated\n    // after creation time, so the resource does not need to be updated if\n    // the actual fanciness level matches our desired fanciness level. Any\n    // ConnectionDetails we return will be published to the managed resource's\n    // connection secret if it specified one.\n    o := managed.ExternalObservation{\n        ResourceExists:   true,\n        ResourceUpToDate: existing.GetFancinessLevel == i.Spec.FancinessLevel,\n        ConnectionDetails: managed.ConnectionDetails{\n            xpv1.ResourceCredentialsSecretUserKey:     []byte(existing.GetUsername()),\n            xpv1.ResourceCredentialsSecretEndpointKey: []byte(existing.GetHostname()),\n        },\n    }\n\n    return o, nil\n}\n\n// Create a new external resource based on the specification of our managed\n// resource. managed.Reconciler only calls Create if Observe reported\n// that the external resource did not exist.\nfunc (e *external) Create(ctx context.Context, mg resource.Managed) (managed.ExternalCreation, error) {\n    i, ok := mg.(*v1alpha3.FavouriteDBInstance)\n    if !ok {\n        return managed.ExternalCreation{}, errors.New(\"managed resource is not a FavouriteDBInstance\")\n    }\n    // Indicate that we're about to create the instance. Remember ExternalClient\n    // authors can use a bespoke condition reason here in cases where Creating\n    // doesn't make sense.\n    i.SetConditions(xpv1.Creating())\n\n    // Create must return any connection details that are set or returned only\n    // at creation time. The managed.Reconciler will merge any details\n    // with those returned during the Observe phase.\n    password := database.GeneratePassword()\n    cd := managed.ConnectionDetails{xpv1.ResourceCredentialsSecretPasswordKey: []byte(password)}\n\n    // Create a new instance.\n    new := database.Instance{Name: i.Name, FancinessLevel: i.FancinessLevel, Version: i.Version}\n    err := e.client.CreateInstance(ctx, new, password)\n\n    // Note that we use resource.Ignore to squash any error that indicates the\n    // external resource already exists. Create implementations must not return\n    // an error if asked to create a resource that already exists. Real managed\n    // resource controllers are advised to avoid unintentially 'adoptign' an\n    // existing, unrelated external resource, per\n    // https://github.com/crossplane/crossplane-runtime/issues/27\n    return managed.ExternalCreation{ConnectionDetails: cd}, errors.Wrap(resource.Ignore(database.IsExists, err), \"cannot create instance\")\n}\n\n// Update the existing external resource to match the specifications of our\n// managed resource. managed.Reconciler only calls Update if Observe\n// reported that the external resource was not up to date.\nfunc (e *external) Update(ctx context.Context, mg resource.Managed) (managed.ExternalUpdate, error) {\n    i, ok := mg.(*v1alpha3.FavouriteDBInstance)\n    if !ok {\n        return managed.ExternalUpdate{}, errors.New(\"managed resource is not a FavouriteDBInstance\")\n    }\n\n    // Recall that FancinessLevel is the only field that we _can_ update.\n    new := database.Instance{Name: i.Name, FancinessLevel: i.FancinessLevel}\n    err := e.client.UpdateInstance(ctx, new)\n    return managed.ExternalUpdate{}, errors.Wrap(err, \"cannot update instance\")\n}\n\n// Delete the external resource. managed.Reconciler only calls Delete\n// when a managed resource with the 'Delete' deletion policy (the default) has\n// been deleted.\nfunc (e *external) Delete(ctx context.Context, mg resource.Managed) error {\n    i, ok := mg.(*v1alpha3.FavouriteDBInstance)\n    if !ok {\n        return errors.New(\"managed resource is not a FavouriteDBInstance\")\n    }\n    // Indicate that we're about to delete the instance.\n    i.SetConditions(xpv1.Deleting())\n\n    // Delete the instance.\n    err := e.client.DeleteInstance(ctx, i.Spec.Name)\n\n    // Note that we use resource.Ignore to squash any error that indicates the\n    // external resource does not exist. Delete implementations must not return\n    // an error when asked to delete a non-existent external resource.\n\n```\n\n----------------------------------------\n\nTITLE: Defining MySQLInstanceRequirement in Crossplane YAML\nDESCRIPTION: This YAML snippet defines a MySQLInstanceRequirement custom resource in Crossplane. It specifies the requirements for a MySQL instance, including engine version, storage, and region. It also includes fields for resource binding and composition selection.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.example.org/v1alpha1\nkind: MySQLInstanceRequirement\nmetadata:\n  namespace: default\n  name: sql\nspec:\n  engineVersion: \"5.7\"\n  storageGB: 10\n  region: us-west\n  resourceRef:\n  - name: default-sql-dd02m\n  compositionSelector:\n   matchLabels:\n     connectivity: private\n  compositionRef:\n  - name: private-mysql-server\n  writeConnectionSecretToRef:\n    name: sql\n```\n\n----------------------------------------\n\nTITLE: Boilerplate Go Code for Crossplane Function\nDESCRIPTION: This code snippet shows the initial boilerplate generated for a Crossplane Function using the Go SDK. It includes the basic structure and imports required for Function development.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n    \"context\"\n\n    function \"github.com/crossplane/fn-sdk-go\"\n    \"github.com/crossplane/fn-sdk-go/pb\"\n    \"github.com/crossplane/fn-sdk-go/errors\"\n)\n\n// Function defines the logic of your Function.\nfunc Function(ctx context.Context, req *pb.RunFunctionRequest) (*pb.RunFunctionResponse, error) {\n  // Get the desired XR from the request.\n  xr := function.NewEmptyCompositeResource()\n  if err := function.GetCompositeResource(req, xr); err != nil {\n      return errors.Wrap(err, \"could not get composite resource\")\n  }\n\n  // TODO: Replace this with your function logic. :)\n  rsp := function.NewResponseTo(req)\n  function.Normalf(rsp, \"successfully read desired composite resource %q\", xr.GetName())\n\n  return rsp, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a MySQLInstance and CloudSQLInstanceClass in Kubernetes YAML\nDESCRIPTION: This snippet demonstrates how to create a MySQLInstance resource claim and a CloudSQLInstanceClass for managing a Google Cloud SQL instance in Crossplane. The MySQLInstance defines its engine version and connection settings, while the CloudSQLInstanceClass specifies provider settings, including database version, region, and instance configuration. Both resources facilitate the dynamic provisioning of infrastructure.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: example-resource-claim\nspec:\n  engineVersion: \"5.7\"\n  writeConnectionSecretToRef:\n    name: sql\n  classSelector:\n    matchLabels:\n      example: \"true\"\n---\napiVersion: database.gcp.crossplane.io/v1beta1\nkind: CloudSQLInstanceClass\nmetadata:\n  name: example-resource-class\n  labels:\n    example: \"true\"\nspecTemplate:\n  forProvider:\n    databaseVersion: MYSQL_5_6\n    region: us-west2\n    settings:\n      tier: db-n1-standard-1\n      dataDiskType: PD_SSD\n      dataDiskSizeGb: 10\n      ipConfiguration:\n        ipv4Enabled: true\n  writeConnectionSecretsToNamespace: crossplane-system\n  providerConfigRef:\n    name: example\n\n```\n\n----------------------------------------\n\nTITLE: Implementing FavouriteDBInstance Managed Resource in Go\nDESCRIPTION: Definition of the FavouriteDBInstance managed resource, including its parameters, spec, and status. This implementation follows Crossplane's managed resource guidelines and Kubernetes API conventions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// FavouriteDBInstanceParameters define the desired state of an FavouriteDB\n// instance. Most fields map directly to an Instance:\n// https://favourite.example.org/api/v1/db#Instance\ntype FavouriteDBInstanceParameters struct {\n\n    // We're still working on a standard for naming external resources. See\n    // https://github.com/crossplane/crossplane/issues/624 for context.\n\n    // Name of this instance.\n    Name string `json:\"name\"`\n\n    // Note that fanciness_level becomes fancinessLevel below. Kubernetes API\n    // conventions trump cloud provider fidelity.\n\n    // FancinessLevel specifies exactly how fancy this instance is.\n    FancinessLevel int `json:\"fancinessLevel\"`\n\n    // Version specifies what version of FancySQL this instance will run.\n    // +optional\n    Version *string `json:\"version,omitempty\"`\n}\n\n// A FavouriteDBInstanceSpec defines the desired state of a FavouriteDBInstance.\ntype FavouriteDBInstanceSpec struct {\n    xpv1.ResourceSpec  `json:\",inline\"`\n    ForProvider FavouriteDBInstanceParameters `json:\"forProvider\"`\n}\n\n// A FavouriteDBInstanceStatus represents the observed state of a\n// FavouriteDBInstance.\ntype FavouriteDBInstanceStatus struct {\n    xpv1.ResourceStatus `json:\",inline\"`\n\n    // Note that we add the three \"output only\" fields here in the status,\n    // instead of the parameters. We want this representation to be high\n    // fidelity just like the parameters.\n\n    // ID of this instance.\n    ID int `json:\"id,omitempty\"`\n\n    // Status of this instance.\n    Status string `json:\"status,omitempty\"`\n\n    // Hostname of this instance.\n    Hostname string `json:\"hostname,omitempty\"`\n}\n\n// A FavouriteDBInstance is a managed resource that represents a Favourite DB\n// instance.\n// +kubebuilder:subresource:status\ntype FavouriteDBInstance struct {\n    metav1.TypeMeta   `json:\",inline\"`\n    metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n    Spec   FavouriteDBInstanceSpec   `json:\"spec\"`\n    Status FavouriteDBInstanceStatus `json:\"status,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Crossplane Composition using Pipeline mode in YAML\nDESCRIPTION: This YAML snippet defines a Crossplane Composition using the new 'Pipeline' mode, allowing for sequence-based function calls to determine the composition of an XR. It includes steps with respective functions and optional inputs. Each step is processed in sequence, passing the output of one step as the input to the next.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v2alpha1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1\n    kind: XPostgreSQLInstance\n  # This Composition uses a pipeline of Functions instead of (P&T) resources.\n  mode: Pipeline\n  pipeline:\n    # Each step in the pipeline calls one Composition Function.\n  - step: compose-xr-using-go-templates\n    # The functionRef tells the Composition which Function to call. Crossplane\n    # passes the desired and observed state of the XR and any existing composed\n    # resources as 'arguments' to the Function call.\n    functionRef:\n      name: go-templates\n    # A Function call may optionally accept input. Think of this like an\n    # additional, optional argument to the Function call. The input is a nested\n    # KRM resource - i.e. it has an apiVersion and kind.\n    input:\n      apiVersion: example.org/v1\n      kind: GoTemplate\n      source: Remote\n      remote: git://github.com/example/my-xpostgresql-go-templates\n    # A pipeline can have multiple steps. Each step is processed in order. This\n    # validation step is passed the desired state accumulated by the prior step.\n  - step: validate-composed-resources\n    functionRef:\n      name: cel-validation\n```\n\n----------------------------------------\n\nTITLE: Defining ApplicationDefinition in Crossplane\nDESCRIPTION: Example of creating an ApplicationDefinition for a Wordpress application. This defines the schema and configuration for creating Wordpress custom resources, including CRD specifications, service account references, and composition settings.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: ApplicationDefinition\nmetadata:\n  name: wordpresses.apps.example.org\nspec:\n  crdSpecTemplate:\n    group: apps.example.org\n    version: v1alpha1\n    names:\n      kind: Wordpress\n      listKind: WordpressList\n      plural: wordpresses\n      singular: wordpress\n    validation:\n      openAPIV3Schema:\n        properties:\n          administratorLogin:\n            type: string\n          storageSize:\n            type: int\n          storageType:\n            type: string\n        type: object\n  serviceAccountRef:\n    namespace: crossplane-system\n    name: wordpresses.apps.example.org\n  defaultCompositionRef:\n    name: local-wordpress\n  enforcedCompositionRef:\n    name: wordpresses.apps.example.org\n```\n\n----------------------------------------\n\nTITLE: Defining ImageConfig API for Crossplane Package Management in YAML\nDESCRIPTION: This YAML snippet defines the structure of the proposed ImageConfig API for Crossplane packages. It includes fields for matching images, registry configuration (authentication and TLS), and image verification settings using Cosign.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-image-config.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1alpha1\nkind: ImageConfig\nmetadata:\n  name: acme-packages\nspec:\n  matchImages:\n    - type: Prefix\n      prefix: registry1.com/acme-co/configuration-foo\n    - type: Prefix\n      prefix: registry1.com/acme-co/configuration-bar\n    - type: Prefix\n      prefix: registry1.com/acme-co/function-baz\n  registry:\n    authentication:\n      pullSecretRef:\n        name: acme-registry-credentials\n    tls:\n      mode: Strict # Defaults to Strict, other values are Insecure, or Disabled\n      caBundleConfigMapRef:\n        name: registry1-ca\n        key: ca.crt\n  verification:\n    provider: Cosign\n    cosign:\n      authorities:\n        - name: verify acme builds\n          keyless:\n            url: https://fulcio.sigstore.dev\n            identities:\n              - issuer: https://token.actions.githubusercontent.com\n                subjectRegExp: https://github.com/acme-co/crossplane-packages/*\n          attestations:\n            - name: verify attestations\n              predicateType: spdxjson\n```\n\n----------------------------------------\n\nTITLE: Creating AWS Secret Manager Resource with Crossplane Provider-AWS\nDESCRIPTION: Example of creating a Secret resource in AWS Secret Manager using Crossplane's provider-aws. This demonstrates how to reference a Kubernetes secret with connection details to store in an external secret store.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_18\n\nLANGUAGE: yaml\nCODE:\n```\nprovider-aws Secret resource\n```\n\n----------------------------------------\n\nTITLE: Using a MySQLInstance Custom Resource in YAML\nDESCRIPTION: This snippet shows how an infrastructure operator would create a MySQLInstance custom resource after the InfrastructureDefinition is applied. It includes specifications for MySQL configuration, composition selection, resource references, and connection details management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.example.org/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: sql\nspec:\n  # The schema for the following three fields is defined by the above\n  # InfrastructureDefinition.\n  engineVersion: \"5.7\"\n  storageGB: 10\n  region: us-west\n  # The below schema is automatically injected into the CustomResourceDefinition\n  # that is created by the InfrastructureDefinition that defines the\n  # MySQLInstance resource.\n  # Multiple compositions may potentially satisfy a particular kind of\n  # infrastructure. Each infrastructure instance may influence which composition\n  # is used via label selectors. This could be used, for example, to determine\n  # whether a GCP CloudSQLInstance or an Azure SQLServer based composition\n  # satisfied this MySQLInstance.\n  compositionSelector:\n   matchLabels:\n     connectivity: private\n  # The MySQLInstance author may explicitly select which composition should be\n  # used by setting the compositionRef. In the majority of cases the author\n  # will ignore this field and it will be set by a controller, similar to the\n  # contemporary classRef field.\n  compositionRef:\n    name: private-mysql-server\n  # Each infrastructure resource maintains an array of the resources it\n  # composes. Composed resources are always cluster scoped, and always either\n  # primitive or composite infrastructure resources. Composed resources model\n  # their relationship with the infrastructure resource via their controller\n  # reference. The infrastructure resource must maintain this array because\n  # there is currently no user friendly, performant way to discover which\n  # resources (of arbitrary kinds) are controlled by a particular resource per\n  # https://github.com/kubernetes/kubernetes/issues/54498\n  resourceRefs:\n  - apiVersion: azure.crossplane.io/v1alpha3\n    kind: ResourceGroup\n    name: sql-34jd2\n  - apiVersion: database.azure.crossplane.io/v1beta1\n    kind: MySQLServer\n    name: sql-3i3d1\n  - apiVersion: database.azure.crossplane.io/v1alpha3\n    kind: MySQLServerVirtualNetworkRule\n    name: sql-2mdus\n  # The MySQLInstance author must specify where the MySQLInstance will write\n  # its connection details as a Kubernetes secret. The keys of the secret are\n  # specified by the InfrastructureDefinition.\n  writeConnectionSecretToRef:\n    namespace: crossplane-system\n    name: sql\n  # This cluster scoped MySQLInstance _may_ bind to exactly one namespaced\n  # MySQLInstanceRequirement. See InfrastructurePublication below for details.\n  requirementRef:\n    namespace: default\n    name: sql\n  # The reclaim policy determines what happens to this infrastructure\n  # resource and all of the infrastructure resources it composes if it is\n  # bound and then released. The policy may be either 'Delete' or 'Retain'.\n  reclaimPolicy: Retain\n```\n\n----------------------------------------\n\nTITLE: Function Options Pattern Implementation in Go\nDESCRIPTION: Demonstrates the recommended pattern for handling multiple optional function arguments using variadic options.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\ntype Wrangler struct {\n        fw fowl.Wrangler\n        loose int\n}\n\ntype Option func(w *Wrangler)\n\nfunc WithFowlWrangler(fw fowl.Wrangler) Option {\n        return func(w *Wrangler) {\n                w.fw = fw\n        }\n}\n\nfunc NewWrangler(looseGeese int, o ...Option) *Wrangler {\n        w := &Wrangler{\n                fw: fowl.DefaultWrangler{}\n                loose: \n        }\n\n        for _, fn := range o {\n                fn(w)\n        }\n\n        return w\n}\n\nfunc example() {\n        w := NewWrangler(42,\n                WithFowlWrangler(chicken.NewWrangler()),\n                WithSomeOtherOption(),\n                WithYetAnotherOption())\n        \n        w.Wrangle()\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane from Master Channel Using Helm\nDESCRIPTION: This snippet details the process to install Crossplane from the master Helm chart repository. It requires creating a namespace, adding the master repository, updating it, searching for available versions, and executing the install command with the specific version.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_1\n\nLANGUAGE: console\nCODE:\n```\nkubectl create namespace crossplane-system\nhelm repo add crossplane-master https://charts.crossplane.io/master/\nhelm repo update\nhelm search repo crossplane-master --devel\n\nhelm install crossplane --namespace crossplane-system crossplane-master/crossplane --devel --version <version>\n```\n\n----------------------------------------\n\nTITLE: Implementing Create Function for Helm Release Controller\nDESCRIPTION: Handles Helm chart installation by pulling the chart, composing value overrides, creating namespace if needed, and executing helm install command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// Create performs helm install\nfunc (c *external) Create(ctx context.Context, mg resource.Managed) (managed.ExternalCreation, error) {\n    // Implementation details omitted for brevity\n    return managed.ExternalCreation{}, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Composition in Crossplane YAML\nDESCRIPTION: Example Composition resource that defines how to create a GCP CloudSQL instance with configurable storage size. Demonstrates the basic patch-and-transform functionality where values from the composite resource are mapped to the composed resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: AcmeCoDatabase\n  resources:\n  - name: cloudsqlinstance\n    base:\n      apiVersion: database.gcp.crossplane.io/v1beta1\n      kind: CloudSQLInstance\n      spec:\n        forProvider:\n          databaseVersion: POSTGRES_9_6\n          region: us-central1\n          settings:\n            tier: db-custom-1-3840\n            dataDiskType: PD_SSD\n    patches:\n    - type: FromCompositeFieldPath\n      fromFieldPath: spec.parameters.storageGB\n      toFieldPath: spec.forProvider.settings.dataDiskSizeGb\n```\n\n----------------------------------------\n\nTITLE: Configuring Kubernetes Provider with ServiceAccount\nDESCRIPTION: Example of setting up a Kubernetes ProviderConfig that references a ServiceAccount token for in-cluster authentication.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: kubernetes.crossplane.io/v1beta1\nkind: ProviderConfig\nmetadata:\n  name: demo-k8s-provider\n  namespace: my-infra-dev\nspec:\n  credentialsSecretRef:\n    # Get secret name from service account\n    name: my-service-account-secret\n```\n\n----------------------------------------\n\nTITLE: Initializing and Scaffolding a Crossplane Function with Go SDK\nDESCRIPTION: This snippet demonstrates how to initialize a new Crossplane Function using the Go SDK template and lists the generated boilerplate files.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n# Initialize a new Function that uses the Go SDK.\n$ kubectl crossplane init function --template=\"github.com/crossplane/fn-template-go\"\n\n# This generates boilerplate that uses the Go SDK.\n$ ls\ncrossplane.yaml  fn.go  fn_test.go  go.mod  main.go\n\n# At a minimum you need to add your Function logic to fn.go\nvim fn.go\n```\n\n----------------------------------------\n\nTITLE: Defining a Complex Crossplane KubernetesApplication in YAML\nDESCRIPTION: This snippet showcases the proposed KubernetesApplication resource, which includes multiple KubernetesApplicationResources for deploying complex applications like WordPress across multiple Kubernetes resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesApplication\nmetadata:\n  name: wordpress-demo\n  namespace: complex\n  labels:\n    app: wordpress-demo\nspec:\n  clusterSelector:\n    matchLabels:\n      app: wordpress-demo\n  resourceTemplates:\n  - metadata:\n      name: wordpress-demo-namespace\n      labels:\n        app: wordpress-demo\n    spec:\n      template:\n        apiVersion: v1\n        kind: Namespace\n        metadata:\n          name: wordpress\n          labels:\n            app: wordpress\n  - metadata:\n      name: wordpress-demo-deployment\n      labels:\n        app: wordpress-demo\n    spec:\n      secrets:\n      - name: sql\n      template:\n        apiVersion: apps/v1\n        kind: Deployment\n        metadata:\n          namespace: wordpress\n          name: wordpress\n          labels:\n            app: wordpress\n        spec:\n          selector:\n            matchLabels:\n              app: wordpress\n          template:\n            metadata:\n              labels:\n                app: wordpress\n            spec:\n              containers:\n                - name: wordpress\n                  image: wordpress:4.6.1-apache\n                  ports:\n                    - containerPort: 80\n                      name: wordpress\n  - metadata:\n      name: wordpress-demo-service\n      labels:\n        app: wordpress-demo\n    spec:\n      template:\n        apiVersion: v1\n        kind: Service\n        metadata:\n          namespace: wordpress\n          name: wordpress\n          labels:\n            app: wordpress\n        spec:\n          ports:\n            - port: 80\n          selector:\n            app: wordpress\n          type: LoadBalancer\n```\n\n----------------------------------------\n\nTITLE: Basic CloudSQL Instance Configuration in Crossplane YAML\nDESCRIPTION: Example showing the current supported configuration fields for a CloudSQLInstance resource in Crossplane. This represents a simplified version with basic settings like tier, network, version, and storage configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: database.gcp.crossplane.io/v1alpha1\nkind: CloudSQLInstance\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  tier: db-n1-standard-1\n  authorizedNetworks:\n  - 73.98.0.0/16\n  databaseVersion: MYSQL_5_6\n  region: us-central1\n  storageType: PD_SSD\n  storageGB: 50\n  labels:\n    cool: very\n```\n\n----------------------------------------\n\nTITLE: Creating Wordpress Custom Resource in Crossplane\nDESCRIPTION: Example of creating a Wordpress custom resource using the schema defined by the ApplicationDefinition. Includes configuration for administrator login, storage settings, and composition selection.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: example.org/v1alpha1\nkind: Wordpress\nmetadata:\n  namespace: default\n  name: coolblog\nspec:\n  administratorLogin: admin\n  storageSize: 2\n  storageType: SSD\n  compositionSelector:\n    matchLabels:\n      compute: kubernetes\n      database: mysql\n  compositionRef:\n  - name: wordpress-kubernetes-mysql\n  resourceRefs:\n  - apiVersion: database.example.org/v1alpha1\n    kind: MySQLInstanceRequirement\n    name: coolblog-3jmdf\n  - apiVersion: workload.crossplane.io/v1alpha1\n    kind: KubernetesApplication\n    name: coolblog-3mdm2\n```\n\n----------------------------------------\n\nTITLE: Building Initial Environment in Crossplane Compositions\nDESCRIPTION: A simplified implementation showing how Crossplane builds the initial in-memory environment from a composition. It starts with default data and merges in data from any selected EnvironmentConfigs.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment-beta.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\n// simplified logic implemented by the composite.APIEnvironmentFetcher\nfunc buildInitialEnvironment(composition) (env environment) {\n  // start from the defaults, if any\n\tenv := composition.spec.environment.defaultData\n\n\t// get all the EnvironmentConfigs selected by the composition, either by name or via label selectors\n\tfor _, envConfig = range composition.GetSelectedEnvironmentConfigs() {\n\t\tenv = merge(env, envConfig.data)\n\t}\n\n\treturn env\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Connect Function for Helm Release Controller\nDESCRIPTION: Creates Kubernetes and Helm clients using provided Kubernetes Provider credentials to establish connection for external operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n// Connect creates kubernetes and helm clients\nfunc (c *external) Connect(ctx context.Context, mg resource.Managed) error {\n    // Implementation details omitted for brevity\n    return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Crossplane Provider Main Function\nDESCRIPTION: Main function implementation for a Crossplane provider, demonstrating how to setup the controller manager, register API schemas, and start the controller.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\nimport (\n    \"time\"\n\n    \"sigs.k8s.io/controller-runtime/pkg/client/config\"\n    \"sigs.k8s.io/controller-runtime/pkg/manager\"\n    \"sigs.k8s.io/controller-runtime/pkg/manager/signals\"\n\n    crossplaneapis \"github.com/crossplane/crossplane/apis\"\n\n    fcpapis \"github.com/crossplane/provider-fcp/apis\"\n    \"github.com/crossplane/provider-fcp/pkg/controller\"\n)\n\nfunc main() {\n    cfg, err := config.GetConfig()\n    if err != nil {\n        panic(err)\n    }\n\n    mgr, err := manager.New(cfg, manager.Options{SyncPeriod: 1 * time.Hour})\n    if err != nil {\n        panic(err)\n    }\n\n    if err := crossplaneapis.AddToScheme(mgr.GetScheme()); err != nil {\n        panic(err)\n    }\n\n    if err := fcpapis.AddToScheme(mgr.GetScheme()); err != nil {\n        panic(err)\n    }\n\n    if err := controller.SetupWithManager(mgr); err != nil {\n        panic(err)\n    }\n\n    panic(mgr.Start(signals.SetupSignalHandler()))\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Azure Infrastructure for Wordpress with AKS and MySQL\nDESCRIPTION: This YAML configuration sets up the basic Azure infrastructure required for deploying Wordpress with Crossplane. It creates a provider configuration, resource group, virtual network, and subnet with the Microsoft.Sql service endpoint to enable connectivity between AKS and MySQL.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: example-provider-azure\n  namespace: crossplane-system\ntype: Opaque\ndata:\n  credentials: BASE64ENCODED_AZURE_PROVIDER_CREDS\n---\napiVersion: azure.crossplane.io/v1beta1\nkind: ProviderConfig\nmetadata:\n  name: example\n  namespace: crossplane-system\nspec:\n  credentialsSecretRef:\n    name: example-provider-azure\n    key: credentials\n---\napiVersion: azure.crossplane.io/v1alpha1\nkind: ResourceGroup\nmetadata:\n  name: wordpress-rg\n  namespace: crossplane-system\nspec:\n  name: wordpress-rg\n  location: Central US\n  providerConfigRef:\n    name: example\n    namespace: crossplane-system\n---\n# New resource kind\napiVersion: network.azure.crossplane.io/v1alpha1\nkind: VirtualNetwork\nmetadata:\n  name: wordpress-vnet\n  namespace: crossplane-system\nspec:\n  name: wordpress-vnet\n  addressSpace: 10.0.0.0/16\n  resourceGroupName: wordpress-rg\n  location: Central US\n  providerConfigRef:\n    name: example\n    namespace: crossplane-system\n---\n# New resource kind\napiVersion: network.azure.crossplane.io/v1alpha1\nkind: Subnet\nmetadata:\n  name: wordpress-subnet\n  namespace: crossplane-system\nspec:\n  name: wordpress-subnet\n  addressPrefix: 10.0.0.0/24\n  serviceEndpoints:\n   - Microsoft.Sql\n  virtualNetworkName: wordpress-vnet\n  resourceGroupName: wordpress-rg\n  providerConfigRef:\n    name: example\n    namespace: crossplane-system\n---\napiVersion: database.azure.crossplane.io/v1alpha1\nkind: SQLServerClass\nmetadata:\n  name: wordpress-mysql\n  namespace: crossplane-system\nspecTemplate:\n  name: wordpress-mysql\n  adminLoginName: myadmin\n  resourceGroupName: wordpress-rg\n  location: Central US\n  sslEnforced: false\n  version: \"5.6\"\n  pricingTier:\n    tier: Basic\n    vcores: 1\n    family: Gen5\n  storageProfile:\n    storageGB: 25\n    backupRetentionDays: 7\n    geoRedundantBackup: false \n  providerRef:\n    name: example\n    namespace: crossplane-system\n  reclaimPolicy: Delete\n---\napiVersion: compute.azure.crossplane.io/v1alpha1\nkind: AKSClusterClass\nmetadata:\n  name: akscluster\n  namespace: crossplane-system\nspecTemplate:\n  resourceGroupName: wordpress-rg\n  # Deploying into existing subnet not currently supported\n  virtualNetworkName: wordpress-vnet\n  subnetName: wordpress-subnet\n  location: Central US\n  version: \"1.12.8\"\n  nodeCount: 1\n  nodeVMSize: Standard_B2s\n  dnsNamePrefix: crossplane-aks\n  disableRBAC: false\n  writeServicePrincipalTo:\n    name: akscluster\n  providerRef:\n    name: example\n    namespace: crossplane-system\n  reclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Creating API scaffold with Kubebuilder\nDESCRIPTION: This command uses kubebuilder to create an API scaffold for a new Crossplane resource named FavouriteDBInstance. It specifies the group, version, kind, and other parameters to generate the initial code structure. The --resource flag indicates that a resource should be created, and the --controller flag indicates that a controller should not be created.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_0\n\nLANGUAGE: console\nCODE:\n```\n\"kubebuilder create api \\\n    --group example --version v1alpha1 --kind FavouriteDBInstance \\\n    --resource=true --controller=false --namespaced=false\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Crossplane Core ClusterRole YAML\nDESCRIPTION: Defines the RBAC permissions required for the main Crossplane controller manager to operate, including managing CRDs, composite resources, and provider configurations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane\nrules:\n# Crossplane creates events to report its status.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [create]\n# Crossplane manages the secrets of its composite resources. It never explicitly\n# deletes secrets, but instead relies on garbage collection.\n- apiGroups: [\"\"]\n  resources: [secrets]\n  verbs: [get, create, update]\n# Crossplane creates CRDs in response to the creation of XRDs.\n- apiGroups: [apiextensions.k8s.io]\n  resources: [customresourcedefinitions]\n  verbs: [get, create, update, delete]\n# Crossplane has full access to the types it defines.\n- apiGroups:\n  - apiextensions.crossplane.io\n  - pkg.crossplane.io\n  resources: [\"*\"]\n  verbs: [\"*\"]\n# Crossplane has full access to the composite resources and claims it defines.\n- apiGroups: [xr.example.org]\n  resources:\n  - examplecomposites\n  - examplecomposites/status\n  - exampleclaims\n  - exampleclaims/status\n  verbs: [\"*\"]\n# Crossplane has access to the provider resource that it may need to compose.\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - exampleproviderconfigs\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Mapping Connection Details in a Single Composition Resource\nDESCRIPTION: Example of a Composition that satisfies the connection details contract by mapping all required details from a single composed resource, with custom name mapping for the username field.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_18\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Composition\n# ...\nspec:\n  to:\n  - base:\n      # ...\n    patches:\n      # ...\n    connectionDetails:\n    - name: username\n      fromConnectionSecretKey: admin-username\n    - fromConnectionSecretKey: password\n    - fromConnectionSecretKey: endpoint\n```\n\n----------------------------------------\n\nTITLE: Defining Release Custom Resource in Crossplane Helm Provider\nDESCRIPTION: Example YAML configuration for the Release custom resource that defines a Helm chart deployment with value overrides, patches, and provider configuration references. Demonstrates the structure for deploying a WordPress chart with external database configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: helm.crossplane.io/v1alpha1\nkind: Release\nmetadata:\n  name: wordpress-example\nspec:\n  forProvider:\n    chart:\n      name: wordpress\n      repository: https://charts.bitnami.com/bitnami\n      version: 9.3.19\n    namespace: wordpress\n    values:\n      mariadb:\n        enabled: false\n      externaldb:\n        enabled: true\n    valuesFrom:\n    - configMapKeyRef:\n        name: wordpress-defaults\n        namespace: prod\n        key: values.yaml\n        optional: false\n    set:\n    - name: wordpressBlogName\n      value: \"Hello Crossplane\"\n    - name: externalDatabase.host\n      valueFrom:\n        secretKeyRef:\n          name: dbconn\n          key: host\n    - name: externalDatabase.user\n      valueFrom:\n        secretKeyRef:\n          name: dbconn\n          key: username\n    - name: externalDatabase.password\n      valueFrom:\n        secretKeyRef:\n          name: dbconn\n          key: password\n    patchesFrom:\n    - configMapKeyRef:\n        name: labels\n        namespace: prod\n        key: patches.yaml\n        optional: false\n    - configMapKeyRef:\n        name: wordpress-nodeselector\n        namespace: prod\n        key: patches.yaml\n        optional: false\n    - secretKeyRef:\n        name: image-pull-secret-patch\n        namespace: prod\n        key: patches.yaml\n        optional: false\n  providerConfigRef: \n    name: cluster-1-provider\n  reclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Defining AWS Postgres Resource Class in Crossplane\nDESCRIPTION: Example of defining a ResourceClass for a Postgres RDS database instance on AWS, specifying parameters like instance class, master username, security groups, and size.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: ResourceClass\nmetadata:\n  name: cloud-postgresql\n  namespace: crossplane-system\nparameters:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups: \"sg-ab1cdefg,sg-05adsfkaj1ksdjak\"\n  size: \"20\"\nprovisioner: rdsinstance.database.aws.crossplane.io/v1alpha1\nproviderRef:\n  name: aws-provider\nreclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Testing a Crossplane Function using kubectl crossplane\nDESCRIPTION: Example of using the kubectl crossplane CLI to test a Function by providing an input request file and viewing the response. This allows testing Functions in isolation without running a full Crossplane installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\nkubectl crossplane function test xpkg.upbound.io/negz/go-templates:v0.1.0 run-function-request.json\n```\n\n----------------------------------------\n\nTITLE: Basic Field Mapping in Crossplane Transform Functions\nDESCRIPTION: Example of basic field mapping using transform functions to copy values from composite resource to composed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\npatches:\n- fromFieldPath: \"spec.region\"\n  toFieldPath: \"spec.forProvider.location\"\n```\n\n----------------------------------------\n\nTITLE: Using Helper Functions\nDESCRIPTION: Example showing how to use helper functions like getComposedResource and getCompositionEnvVar for easier access to resources and environment variables.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-function-go-templating.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n{{- range $i := until ( .observed.composite.resource.spec.count | int ) }}\n---\napiVersion: iam.aws.upbound.io/v1beta1\nkind: User\nmetadata:\n  annotations:\n    gotemplating.fn.crossplane.io/composition-resource-name: test-user-{{ $i }}\n  labels:\n    testing.upbound.io/example-name: test-user-{{ $i }}\n    {{ $composed := getComposedResource $.observed ( print \"test-user-\" $i ) }}\n    dummy: {{ default ( randomChoice \"foo\" \"bar\" \"baz\" ) $composed.resource.metadata.labels.dummy }}\n    env: {{ getCompositionEnvVar $. \"key1\" }}\n  name: test-user-{{ $i }}\nspec:\n  forProvider: {}\n{{- end }}\n```\n\n----------------------------------------\n\nTITLE: Defining PackageRevision Structure in Go\nDESCRIPTION: Defines the PackageRevision struct which represents a specific revision of a Crossplane package. It includes metadata, specification, and status fields.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_10\n\nLANGUAGE: go\nCODE:\n```\n// +kubebuilder:printcolumn:name=\"AGE\",type=\"date\",JSONPath=\".metadata.creationTimestamp\"\ntype PackageRevision struct {\n  metav1.TypeMeta   `json:\",inline\"`\n  metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n  Spec   PackageRevisionSpec   `json:\"spec,omitempty\"`\n  Status PackageRevisionStatus `json:\"status,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Creating PostgreSQLInstance Claim in Crossplane\nDESCRIPTION: This YAML snippet shows how to create a PostgreSQLInstance claim that references the previously defined PostgreSQLInstanceClass. It specifies the desired PostgreSQL version and connection secret.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  name: app-postgresql\n  namespace: app-project1-dev\nspec:\n  classRef:\n    name: postgresql-standard\n  writeConnectionSecretToRef:\n    name: postgresqlconn\n  engineVersion: \"12\"\n```\n\n----------------------------------------\n\nTITLE: Building and Pushing Crossplane Function Package\nDESCRIPTION: This snippet shows the commands to build a Crossplane Function package and push it to an OCI registry. It demonstrates how Functions can be packaged and distributed similarly to Providers or Configurations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\n# Building the Function produces an installable Function package.\n$ kubectl crossplane function build\n\n# Push the package to any OCI registry.\n$ kubectl crossplane function push xpkg.upbound.io/negz/function-many-robots:v0.1.0\n```\n\n----------------------------------------\n\nTITLE: Defining Package Struct in Go for Crossplane\nDESCRIPTION: This code snippet defines the new Package struct, which is the proposed CRD type for adding a package to Crossplane. It includes modifications from the ClusterPackageInstall, such as new fields for revision activation policy and history limit.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\n// +kubebuilder:object:root=true\n\n// Package is the CRD type for a request to add a package to Crossplane.\n// +kubebuilder:resource:categories=crossplane\n// +kubebuilder:subresource:status\n// +kubebuilder:printcolumn:name=\"READY\",type=\"string\",JSONPath=\".status.conditionedStatus.conditions[?(@.type=='Ready')].status\"\n// +kubebuilder:printcolumn:name=\"SOURCE\",type=\"string\",JSONPath=\".spec.source\"\n// +kubebuilder:printcolumn:name=\"PACKAGE\",type=\"string\",JSONPath=\".spec.package\"\n// +kubebuilder:printcolumn:name=\"CRD\",type=\"string\",JSONPath=\".spec.crd\"\n// +kubebuilder:printcolumn:name=\"AGE\",type=\"date\",JSONPath=\".metadata.creationTimestamp\"\ntype Package struct {\n  metav1.TypeMeta   `json:\",inline\"`\n  metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n  Spec   PackageSpec   `json:\"spec,omitempty\"`\n  Status PackageStatus `json:\"status,omitempty\"`\n}\n\n// PackageSpec specifies details about a request to install a package to\n// Crossplane.\ntype PackageSpec struct {\n  PackageControllerOptions `json:\",inline\"`\n\n  // Package is the name of the package that is being requested. It should\n  // be either an OCI image or a Git source.\n  Package string `json:\"package\"`\n\n  // RevisionActivationPolicy specifies how the package controller should\n  // update from one revision to the next. Options are Automatic or Manual.\n  // Default is Automatic.\n  RevisionActivationPolicy *string `json:\"revisionActivationPolicy,omitempty\"`\n\n  // RevisionHistoryLimit dictates how the package controller cleans up old\n  // inactive package revisions.\n  // Defaults to 1. Can be disabled by explicitly setting to 0.\n  RevisionHistoryLimit *int64 `json:\"revisionHistoryLimit,omitempty\"`\n}\n\n// PackageControllerOptions allow for changes in the Package extraction and\n// packaged controller, if applicable. These can affect how images are fetched and how\n// Package derived resources are created.\ntype PackageControllerOptions struct {\n  // ImagePullSecrets are named secrets in the same workspace that can be used\n  // to fetch Packages from private repositories and to run controllers from\n  // private repositories\n  ImagePullSecrets []corev1.LocalObjectReference `json:\"imagePullSecrets,omitempty\"`\n\n  // ImagePullPolicy defines the pull policy for all images used during\n  // Package extraction and when running the packaged controller, if applicable.\n  ImagePullPolicy corev1.PullPolicy `json:\"imagePullPolicy,omitempty\"`\n\n  // ServiceAccount options allow for changes to the ServiceAccount the\n  // Package Manager creates for the PackageRevision's controller, if applicable.\n  ServiceAccount *ServiceAccountOptions `json:\"serviceAccount,omitempty\"`\n}\n\n// ServiceAccountOptions augment the ServiceAccount created by the Package\n// controller\ntype ServiceAccountOptions struct {\n  Annotations map[string]string `json:\"annotations,omitempty\"`\n}\n\n// PackageInstallStatus represents the observed state of a PackageInstall.\ntype PackageInstallStatus struct {\n  xpv1.ConditionedStatus `json:\"conditionedStatus,omitempty\"`\n\n  CurrentRevision string `json:\"currentRevision,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: External Client Interface Definition - Go\nDESCRIPTION: This Go snippet defines the ExternalClient interface, outlining the methods that Crossplane providers must implement to manage external resources. It provides a structure for observing, creating, updating, and deleting resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\ntype ExternalClient interface {\n\tObserve(ctx context.Context, mg resource.Managed) (ExternalObservation, error)\n\tCreate(ctx context.Context, mg resource.Managed) (ExternalCreation, error)\n\tUpdate(ctx context.Context, mg resource.Managed) (ExternalUpdate, error)\n\tDelete(ctx context.Context, mg resource.Managed) error\n}\n```\n\n----------------------------------------\n\nTITLE: Defining AttributeReferencer Interface in Go\nDESCRIPTION: Go interface definition for AttributeReferencer, which provides methods for resolving and assigning referenced attributes.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\ntype AttributeReferencer interface {\n\n\t// GetStatus looks up the referenced objects in K8S api and returns a list\n\t// of ReferenceStatus\n\tGetStatus(context.Context, CanReference, client.Reader) ([]ReferenceStatus, error)\n\n\t// Build retrieves referenced resource, as well as other non-managed\n\t// resources (like a `ProviderConfig`), and builds the referenced attribute\n\tBuild(context.Context, CanReference, client.Reader) (string, error)\n\n\t// Assign accepts a managed resource object, and assigns the given value to the\n\t// corresponding property\n\tAssign(CanReference, string) error\n}\n```\n\n----------------------------------------\n\nTITLE: Composition Configuration with Default Store\nDESCRIPTION: Example of a Composition resource configuring connection details to be published to the default StoreConfig created during installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsToStoreConfigRef: default\n```\n\n----------------------------------------\n\nTITLE: Defining AWS S3 Bucket CRD Group Separation in Crossplane\nDESCRIPTION: Demonstrates how to separate Custom Resource Definitions (CRDs) for AWS S3 buckets based on the tool used for management (Terrajet, Cloud Control, Native) at the API group level in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n* `s3.aws.jet.crossplane.io/v1alpha1` for Terrajet S3\n* `s3.aws.cc.crossplane.io/v1alpha1` for Cloud Control S3\n* `s3.aws.crossplane.io/v1alpha1` for native S3\n```\n\n----------------------------------------\n\nTITLE: Implementing a Fuzz Test Function in Go\nDESCRIPTION: Example of how to define a fuzz test function in Go. This snippet shows the basic structure of a fuzz test case that can be run using Go's native fuzzing support.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-fuzz-test-cases.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\npackage somepackage\n\nimport \"testing\"\n\nfunc FuzzTestName(f *testing.F) {\n\tf.Fuzz(func(t *testing.T/*, ... some input we want to be randomized ...*/) {\n\t\t// ... use the randomized input to test the function ...\n\t})\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Environment Setup with Crossplane Integration Testing Framework in Go\nDESCRIPTION: Demonstrates how to set up a testing environment using the athodyd framework by creating a new manager with a Kubernetes REST configuration and CRD directory paths. The framework handles installing CRDs into a cluster and returning a controller manager.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\ncfg, err := config.GetConfig()\nif err != nil {\n    t.Fatal(err)\n}\n\na, err := athodyd.New(cfg, athodyd.WithCRDDirectoryPaths([]string{\"../crds\"}))\nif err != nil {\n    t.Fatal(err)\n}\n```\n\n----------------------------------------\n\nTITLE: Publishing Connection Details to Kubernetes Secret Configuration\nDESCRIPTION: Example configuration for publishing connection details to a Kubernetes secret using the new publishConnectionDetailsTo field, which references a default StoreConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    configRef:\n      name: default\n```\n\n----------------------------------------\n\nTITLE: Building and Testing Crossplane with Earthly in Go\nDESCRIPTION: Commands for building, testing, and deploying Crossplane using Earthly. These commands cover running code generators, linters, unit tests, end-to-end tests, and deploying to a local kind cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nearthly +reviewable\nearthly -P +e2e\nearthly +hack\n```\n\n----------------------------------------\n\nTITLE: Defining Aggregated ClusterRoles for Crossplane Admin Access\nDESCRIPTION: This YAML snippet demonstrates the creation of aggregated ClusterRoles for Crossplane admin access. It shows a user-facing 'crossplane-admin' role and a base role that aggregates to it, including specific rules for various API groups and resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n---\n# The 'user-facing' crossplane-admin role.\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-admin\naggregationRule:\n  clusterRoleSelectors:\n  - matchLabels:\n      rbac.crossplane.io/aggregate-to-crossplane-admin: \"true\"\n---\n# The 'base' role containing the fixed rules that always aggregate to the above\n# crossplane-admin cluster role.\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane:aggregate-to-admin\n  labels:\n    rbac.crossplane.io/aggregate-to-crossplane-admin: \"true\"\nrules:\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n- apiGroups: [\"\"]\n  resources: [secrets, namespaces]\n  verbs: [\"*\"]\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [clusterroles]\n  verbs: [get, list, watch]\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [clusterrolebindings, rolebindings]\n  verbs: [*]\n- apiGroups:\n  - apiextensions.crossplane.io\n  - pkg.crossplane.io\n  resources: [\"*\"]\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Defining Dependency Structure in Go\nDESCRIPTION: Defines the Dependency struct which specifies the dependency of a package. It allows specifying either a package name or a custom resource definition.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_12\n\nLANGUAGE: go\nCODE:\n```\ntype Dependency struct {\n  // Package is the name of the package package that is being requested, e.g.,\n  // myapp. Either Package or CustomResourceDefinition can be specified.\n  Package string `json:\"package,omitempty\"`\n\n  // CustomResourceDefinition is the full name of a CRD that is owned by the\n  // package being requested. This can be a convenient way of installing a\n  // package when the desired CRD is known, but the package name that contains\n  // it is not known. Either Package or CustomResourceDefinition can be\n  // specified.\n  CustomResourceDefinition string `json:\"crd,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Iterated Resource Fetching Logic in Golang\nDESCRIPTION: The pseudo-code in Golang demonstrates the logic for running a function composition pipeline, fetching extra resources iteratively until stability or a maximum iteration limit is reached. This involves integration with the Crossplane framework and handling of function responses. Dependencies include a Golang environment and libraries for Crossplane interactions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_2\n\nLANGUAGE: golang\nCODE:\n```\n// The following code should not be considered as a final implementation, but\n// rather as a pseudo-code to show the intended logic.\n\nconst (\n  // maxIterations is the maximum number of times a Function should be called,\n  // limiting the number of times it can request for extra resources, capped for\n  // safety. We might allow Composition authors customize this value in the future.\n    maxIterations = 3\n)\n\n\n// Compose resources using the Functions pipeline.\nfunc (c *FunctionComposer) Compose(ctx context.Context, xr *composite.Unstructured, req CompositionRequest) (CompositionResult, error) {\n\t// Existing code omitted for brevity...\n\n\t// Run any Composition Functions in the pipeline.\n\tfor _, fn := range req.Revision.Spec.Pipeline {\n\t\t// used to store the resources fetched at the previous iteration \n\t\tvar extraResources map[string]v1beta1.Resources\n\t\t// used to store the requirements returned at the previous iteration \n\t\tvar requirements map[string]v1beta1.ResourceSelector\n\t\t\n\t\tfor i := int64(0); i < maxIterations; i++ {\n\t\t\treq := &v1beta1.RunFunctionRequest{Observed: o, Desired: d, Context: fctx, extraResources: extraResources}\n\n\t\t\t// Run the Composition Function and get the response.\n\t\t\trsp, err := c.pipeline.RunFunction(ctx, fn.FunctionRef.Name, req)\n\t\t\tif err != nil {\n\t\t\t\treturn CompositionResult{}, errors.Wrapf(err, /* ... */)\n\t\t\t}\n\n\t\t\t// Pass the desired state and context returned by this Function to the next iteration.\n\t\t\td = rsp.GetDesired()\n\t\t\tfctx = rsp.GetContext()\n\t\t\t\n\t\t\trs := rsp.GetRequirements()\n\t\t\tif rs.Equal(requirements) {\n\t\t\t\t// the requirements stabilized, the function is done\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// if we reached the maximum number of iterations we need to return an error\n\t\t\tif i == maxIterations - 1 {\n\t\t\t\treturn CompositionResult{}, errors.Wrapf(err, /* ... */)\n\t\t\t}\n\t\t\t\n\t\t\t// store the requirements for the next iteration \n\t\t\trequirements = rs\n\n\t\t\textraResourcesRequirements := rs.GetExtraResources()\n\n\t\t\t// Cleanup the extra resources from the previous iteration to store the new ones\n\t\t\textraResources = make(map[string]v1beta1.Resources)\n\t\t\t\n\t\t\t// Fetch the requested resources and add them to the desired state.\n\t\t\tfor name, selector := range extraResourcesRequirements {\n\t\t\t\t// Fetch the requested resources and add them to the desired state.\n\t\t\t\tresources, err := fetchResources(ctx, c.client, selector)\n\t\t\t\tif err != nil {\n\t\t\t\t\treturn CompositionResult{}, errors.Wrapf(err, /* ... */)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// resources would be nil in case of not found resources\n\t\t\t\textraResources[name] = resources\n\t\t\t}\n\n\t\t}\n\t\t\n\t\t// Existing code omitted for brevity...\n\t}\n\t\n\t// Existing code omitted for brevity...\n}\n\n// fetchResources fetches resources that match the given selector.\nfunc fetchResources(ctx context.Context, client client.Reader, selector *v1beta1.ResourceSelector) ([]*unstructured.Unstructured, error) {\n\t// Fetch resources by name or label selector...\n\t// return nil on not found error\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using Resource Reference Selector in Crossplane\nDESCRIPTION: Example of a reference selector that allows referencing resources by their properties rather than by explicit names, useful for dynamically provisioned resources whose names are not known in advance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_16\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  forProvider:\n    networkSelector:\n      # Match only managed resources that are part of the same composite, i.e.\n      # managed resources that have the same controller reference as the\n      # selecting resource.\n      matchControllerRef: true\n      # Match only managed resources with the supplied labels.\n      matchLabels:\n        example: label\n```\n\n----------------------------------------\n\nTITLE: Using Cross-Resource References in Crossplane YAML\nDESCRIPTION: Example of how a Crossplane user can reference another resource (VPC in this case) using the simple reference syntax. This demonstrates the referencing mechanism where users only need to specify the name of the target resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  forProvider:\n    vpcIdRef:\n      name: my-little-vpc\n```\n\n----------------------------------------\n\nTITLE: Defining the Reconcile Method in Go\nDESCRIPTION: This code defines a Reconcile method that receives a request and processes it according to the Reconcile interface from controller-runtime. Inputs are reconcile requests, and the output is a pair consisting of a reconcile result object and an error object. It requires the controller-runtime library and interacts with Kubernetes objects.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nfunc (r *Reconciler) Reconcile(req reconcile.Request) (reconcile.Result, error){\n...\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Controllers and API Types to Testing Manager in Go\nDESCRIPTION: Shows how to add API types to the manager scheme and register controllers with the integration testing manager. This follows the same pattern as when setting up controllers for production use.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\naddToScheme(a.GetScheme()) // add API types to the manager scheme\ncontrollerSetupWithManager(a) // register controllers with the manager\n```\n\n----------------------------------------\n\nTITLE: Defining Provider ClusterRoles and ClusterRoleBinding\nDESCRIPTION: This YAML snippet shows the creation of a provider-specific system ClusterRole and its corresponding ClusterRoleBinding. It grants access to specific custom resources defined by the provider.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane:provider:7f63e3661:system\nrules:\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - examplemanageds/status\n  - exampleproviderconfigs\n  - exampleproviderconfigs/status\n  verbs: [get, list, watch, update, patch]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: crossplane:provider:7f63e3661:system\nroleRef:\n  apiVersion: rbac.authorization.k8s.io/v1\n  kind: ClusterRole\n  name: crossplane:provider:7f63e3661:system\nsubjects:\n- kind: ServiceAccount\n  name: crossplane-provider-7f63e3661\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Crossplane API Object Spec with Required Fields in Optional Embedded Structs\nDESCRIPTION: Example Go struct showing the Crossplane representation of an API object where a single field in an optional embedded struct is marked as required. This approach prevents the creation of meaningless YAML configurations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\n// This is the Crossplane representation of the API object spec\ntype CrossplaneAPIObjectSpec struct {\n  // Configurable field in top-level object\n  // +optional\n  FieldOne *string `json:\"fieldOne,omitempty\"`\n  \n  // Embedded struct in top-level object\n  // +optional\n  EmbeddedStructOne *EmbeddedStructSpec `json:\"embeddedStructOne,omitempty\"`\n}\n\n// Only the configurable fields in EmbeddedStruct\ntype EmbeddedStructSpec struct {\n  // This field is configurable so it should be in spec.forProvider\n  // It is required because its parent is optional and it is the only field of its parent\n  SomeConfigurableField string `json:\"someConfigurableField\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Function gRPC Service in Protobuf\nDESCRIPTION: Defines the gRPC service and message types for Crossplane Function communication, specifying request and response structures for Function invocation\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_3\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\nservice FunctionRunnerService {\n  rpc RunFunction(RunFunctionRequest) returns (RunFunctionResponse) {}\n}\n\nmessage RunFunctionRequest {\n  RequestMeta meta = 1;\n  State observed = 2;\n  State desired = 3;\n  optional google.protobuf.Struct input = 4;\n}\n\nmessage RunFunctionResponse {\n  ResponseMeta meta = 1;\n  State desired = 2;\n  repeated Result results = 3;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring GCP Provider with Service Account Credentials\nDESCRIPTION: Example of setting up a GCP ProviderConfig with service account credentials for provisioning cloud resources in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\n# GCP Admin service account secret - used by GCP Provider\napiVersion: v1\nkind: Secret\nmetadata:\n  name: example-provider-gcp\n  namespace: gcp-infra-dev\ntype: Opaque\ndata:\n  credentials.json: BASE64ENCODED_GCP_PROVIDER_CREDS\n---\n# GCP Provider with service account secret reference - used to provision cache resources\napiVersion: gcp.crossplane.io/v1beta1\nkind: ProviderConfig\nmetadata:\n  name: example\n  namespace: gcp-infra-dev\nspec:\n  credentialsSecretRef:\n    name: example-provider-gcp\n    key: credentials.json\n  projectID: PROJECT_ID\n```\n\n----------------------------------------\n\nTITLE: Defining PackageLock API Structure in Go\nDESCRIPTION: Defines the structure of the PackageLock API, including PackageLock, PackageLockSpec, and PackageDependencies types. This API is used to track ownership and dependencies of Crossplane packages.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_16\n\nLANGUAGE: go\nCODE:\n```\n// A PackageLock keeps track of Crossplane packages.\ntype PackageLock struct {\n  metav1.TypeMeta   `json:\",inline\"`\n  metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n  Spec   PackageLockSpec   `json:\"spec,omitempty\"`\n  Status PackageLockStatus `json:\"status,omitempty\"`\n}\n\ntype PackageLockSpec struct {\n  Packages                  []PackageDependencies `json:\"packages,omitempty\"`\n  Compositions              map[string]string     `json:\"compositions,omitempty\"`\n  CustomResourceDefinitions map[string]string     `json:\"customResourceDefinitions,omitempty\"`\n}\n\ntype PackageDependencies struct {\n  Name         string   `json:\"name,omitempty\"`\n  Image        string   `json:\"image,omitempty\"`\n  Dependencies []string `json:\"dependencies,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Singleton ImageConfig with Multiple Rules in YAML\nDESCRIPTION: Example of a singleton ImageConfig object containing multiple verification rules for different image repositories. It demonstrates how to configure Cosign keyless verification for different image sources with specific identity matching criteria.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-image-config.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1alpha1\nkind: ImageConfig\nmetadata:\n  name: default  # or whatever \"singleton\" name\nspec:\n  rules:\n    - matchImages:\n        - prefix: registry1.com/acme-co/configuration-foo\n        - prefix: registry1.com/acme-co/configuration-bar\n        - prefix: registry1.com/acme-co/function-baz\n      verification:\n        provider: cosign\n        cosign:\n          authorities:\n            - name: verify acme builds\n              keyless:\n                url: https://fulcio.sigstore.dev\n                identities:\n                  - issuer: https://token.actions.githubusercontent.com\n                    subjectRegExp: https://github.com/acme-co/crossplane-packages/*\n    - matchImages:\n        - prefix: registry2.com/org-foo/\n      verification:\n        provider: cosign\n        cosign:\n          authorities:\n            - name: verify org-foo builds\n              keyless:\n                url: https://fulcio.sigstore.dev\n                identities:\n                  - issuer: https://token.actions.githubusercontent.com\n                    subjectRegExp: https://github.com/org-foo/crossplane-packages/*\n```\n\n----------------------------------------\n\nTITLE: Defining Connection Details Contract in InfrastructureDefinition\nDESCRIPTION: Example showing how to define the connection details that a composite resource will expose, establishing a contract that must be fulfilled by its composed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_17\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: InfrastructureDefinition\n# ...\nspec:\n  connectionDetails:\n  - username\n  - password\n  - endpoint\n```\n\n----------------------------------------\n\nTITLE: Configuring VPC Subnetwork in GCP using Crossplane\nDESCRIPTION: YAML configuration for creating a VPC Subnetwork managed resource in GCP through Crossplane. Specifies subnetwork properties including IP ranges, region, logging configuration, and secondary IP ranges for pods and services.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: vpc.gcp.crossplane.io/v1alpha1\nkind: Subnetwork\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  description: My cool VPC subnetwork\n  network: projects/coolproject/global/networks/coolestvpc\n  ipCidrRange: 192.168.0.0/24\n  region: us-central-1\n  privateIpGoogleAccess: true\n  secondaryIpRanges:\n  - rangeName: pods\n    ipCidrRange: 10.0.0.0/8\n  - rangeName: services\n    ipCidrRange: 172.16.0.0/16\n  enableFlowLogs: true\n  logConfig:\n    enable: true\n    flowSampling: 0.5\n    metadata: INCLUDE_ALL_METADATA\n    aggregationInterval: 5-min\n```\n\n----------------------------------------\n\nTITLE: Implementing ProviderConfig for Favourite Cloud in Go\nDESCRIPTION: Definition of the ProviderConfig resource for Favourite Cloud. This structure is used to configure the connection to a specific Favourite Cloud project using a particular service account.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// A ProviderSpec defines the desired state of a Provider.\ntype ProviderSpec struct {\n    xpv1.ProviderSpec `json:\",inline\"`\n\n    // Information required outside of the Secret referenced in the embedded\n    // xpv1.ProviderSpec that is required to authenticate to the provider.\n    // ProjectID is used as an example here.\n    ProjectID string `json:\"projectID\"`\n}\n\n// A Provider configures a Favourite Cloud 'provider', i.e. a connection to a\n// particular Favourite Cloud project using a particular Favourite Cloud service\n// account.\ntype Provider struct {\n    metav1.TypeMeta   `json:\",inline\"`\n    metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n    Spec ProviderSpec `json:\"spec\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining VPC and Subnet Resources with Cross-Referencing in YAML\nDESCRIPTION: Example YAML configuration demonstrating how to define a VPC and Subnet with cross-referencing using the proposed attribute referencing syntax.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: network.aws.crossplane.io/v1alpha2\nkind: VPC\nmetadata:\n  namespace: cool-ns\n  name: my-vpc\nspec:\n  ...\n---\napiVersion: network.aws.crossplane.io/v1alpha2\nkind: Subnet\nmetadata:\n  namespace: cool-ns\n  name: my-subnet\nspec:\n  # this is the vpcId of the external vpc, represented by my-vpc\n  vpcId: [my-vpc_vpcId]\n  ...\n```\n\n----------------------------------------\n\nTITLE: Returning Requeue Result in Go\nDESCRIPTION: Shows how to return a requeue result after a successful update operation in a Crossplane controller. This instructs the controller to check the resource again after a specified duration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\nreconcile.Result{RequeueAfter: successDuration}\n```\n\n----------------------------------------\n\nTITLE: Configuring Direct Network Reference in Crossplane Resource\nDESCRIPTION: Example of a standard Crossplane resource configuration that directly references a VPC network by specifying its full path in the forProvider section.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_13\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  forProvider:\n    network: /projects/example/global/networks/desired-vpc-network\n```\n\n----------------------------------------\n\nTITLE: Initializing Terraform Provider in Go\nDESCRIPTION: Main entry point code for a generated Terraform provider that initializes the provider, builds the index, and starts the Terraform manager with specified options.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\nproviderInit := generated.ProviderInit()\nidxr := plugin.NewIndexer()\ngenerated.Index(idxr)\nidx, err := idxr.BuildIndex()\nkingpin.FatalIfError(err, \"Failed to index provider plugin\")\n\nopts := ctrl.Options{SyncPeriod: syncPeriod}\nropts := client.NewRuntimeOptions().\n    WithPluginDirectory(*pluginDirectory).\n    WithPoolSize(5)\nlog.Debug(\"Starting\", \"sync-period\", syncPeriod.String())\nerr = controller.StartTerraformManager(idx, providerInit, opts, ropts, log)\n```\n\n----------------------------------------\n\nTITLE: Configuring Earthly Build Process for Go Project\nDESCRIPTION: This Earthfile demonstrates how to set up a build process for a Go project using Earthly. It includes targets for dependency management, building the application, and creating a Docker image.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-build-with-earthly.md#2025-04-21_snippet_0\n\nLANGUAGE: Dockerfile\nCODE:\n```\nVERSION 0.8\nFROM golang:1.22\nWORKDIR /go-workdir\n\ndeps:\n    COPY go.mod go.sum ./\n    RUN go mod download\n    # Output these back in case go mod download changes them.\n    SAVE ARTIFACT go.mod AS LOCAL go.mod\n    SAVE ARTIFACT go.sum AS LOCAL go.sum\n\nbuild:\n    FROM +deps\n    COPY main.go .\n    RUN go build -o output/example main.go\n    SAVE ARTIFACT output/example AS LOCAL local-output/go-example\n\ndocker:\n    COPY +build/example .\n    ENTRYPOINT [\"/go-workdir/example\"]\n    SAVE IMAGE go-example:latest\n```\n\n----------------------------------------\n\nTITLE: Composition Configuration with Custom Infrastructure Store\nDESCRIPTION: Example of a Composition resource configuring connection details to be published to a StoreConfig for the infrastructure-staging namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsToStoreConfigRef: store-infrastructure-staging\n```\n\n----------------------------------------\n\nTITLE: Defining CompositionRevision in YAML\nDESCRIPTION: Example of a CompositionRevision resource that represents an immutable snapshot of a Composition version.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-revisions.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: CompositionRevision\nmetadata:\n  name: example-fklem2\n  labels:\n    crossplane.io/composition-name: example\n    crossplane.io/composition-spec-hash: 707e5bf63687fce7\n  ownerReferences:\n  - apiVersion: apiextensions.crossplane.io/v1\n    kind: Composition\n    name: example\n    controller: true\nspec:\n  revision: 1\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: CompositePostgreSQLInstance\n  writeConnectionSecretsToNamespace: crossplane-system\n  resources:\n    - name: cloudsqlinstance\n      base:\n        apiVersion: database.gcp.crossplane.io/v1beta1\n        kind: CloudSQLInstance\n        spec:\n          forProvider:\n            databaseVersion: POSTGRES_12\n            region: us-central1\n            settings:\n              tier: db-custom-1-3840\n              dataDiskType: PD_SSD\n      patches:\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.settings.dataDiskSizeGb\"\n```\n\n----------------------------------------\n\nTITLE: Default Management Policies Configuration in YAML\nDESCRIPTION: Example showing how default management policies are configured in the new system, demonstrating both the full list and wildcard syntax.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Default\nspec:\n  managementPolicies: FullControl\n  deletionPolicy: Delete\n\n# would be replaced with:\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\", \"LateInitialize\"]\n  # or\n  managementPolicies: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Publishing Connection Details to Vault Secret Configuration\nDESCRIPTION: Example configuration for publishing connection details to a Vault secret by referencing a vault-dev StoreConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    configRef:\n      name: vault-dev\n```\n\n----------------------------------------\n\nTITLE: Configuring Post-Rendering Patches for Helm Charts\nDESCRIPTION: Example YAML configuration showing how to define post-rendering patches for Helm charts using the kustomize patch transformer interface. Includes examples of replace and add operations targeting specific Kubernetes resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\npatches:\n- patch: |-\n    - op: replace\n      path: /some/existing/path\n      value: new value\n  target:\n    kind: MyKind\n    labelSelector: \"env=dev\"\n- patch: |-\n    - op: add\n      path: /spec/template/spec/nodeSelector\n      value:\n        node.size: really-big\n        aws.az: us-west-2a\n  target:\n    kind: Deployment\n    labelSelector: \"env=dev\"\n```\n\n----------------------------------------\n\nTITLE: Defining Terraform Scheduler Interface for Crossplane Controllers\nDESCRIPTION: Interface definition for a Terraform scheduler that manages Terraform CLI interactions in a non-blocking fashion. This abstraction layer hides implementation details and provides a clean API for resource controllers.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\ntype Scheduler interface {\n\tExists(ctx context.Context, mg resource.Managed) (bool, error)\n\tUpdateStatus(ctx context.Context, mg resource.Managed) error\n\tLateInitialize(ctx context.Context, mg resource.Managed) (bool, error)\n\tIsReady(ctx context.Context, mg resource.Managed) (bool, error)\n\tIsUpToDate(ctx context.Context, mg resource.Managed) (bool, error)\n\tGetConnectionDetails(ctx context.Context, mg resource.Managed) (resource.ConnectionDetails, error)\n\tApply(ctx context.Context, mg resource.Managed) (*ApplyResult, error)\n\tDelete(ctx context.Context, mg resource.Managed) (*DeletionResult, error)\n}\n\ntype ApplyResult struct {\n  // Tells whether the apply operation is completed.\n  Completed bool\n  \n  // Sensitive information that is available during creation/update.\n  ConnectionDetails resource.ConnectionDetails\n}\n```\n\n----------------------------------------\n\nTITLE: Example Crossplane Composition Resource Definition in YAML\nDESCRIPTION: A sample Composition resource that illustrates how Crossplane's existing Patch & Transform system works. This example creates a GCP CloudSQLInstance and patches values from the composite resource to the underlying managed resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: AcmeCoDatabase\n  resources:\n  - name: cloudsqlinstance\n    base:\n      apiVersion: database.gcp.crossplane.io/v1beta1\n      kind: CloudSQLInstance\n      spec:\n        forProvider:\n          databaseVersion: POSTGRES_9_6\n          region: us-central1\n          settings:\n            tier: db-custom-1-3840\n            dataDiskType: PD_SSD\n    patches:\n    - type: FromCompositeFieldPath\n      fromFieldPath: spec.parameters.storageGB\n      toFieldPath: spec.forProvider.settings.dataDiskSizeGb\n```\n\n----------------------------------------\n\nTITLE: Math Transform Function in Crossplane\nDESCRIPTION: Example of using math transform function to perform simple mathematical operations like converting storage units.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\npatches:\n- fromFieldPath: \"spec.storageGB\"\n  toFieldPath: \"spec.forProvider.storageProfile.storageMB\"\n  transforms:\n    - type: math\n      math:\n        multiply: 1024\n```\n\n----------------------------------------\n\nTITLE: Defining Package-Specific Admin ClusterRole\nDESCRIPTION: YAML definition for a package-specific admin ClusterRole object. This role defines permissions for the AWS provider package and aggregates to the crossplane-admin role.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: package:crossplane:provider-aws:1.0:admin # Unique by package:{namespace-name}:{package-name}:{version}:{role}s\n  labels:\n    rbac.crossplane.io/aggregate-to-crossplane-admin: \"true\"\n# These rules will be added to the \"crossplane-admin\" role based on the label above\nrules:\n- apiGroups: [\"providers.aws.crossplane.io\"]\n  resources: [\"Provider\"]\n  verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\", \"deletecollection\", \"delete\"]\n ...\n```\n\n----------------------------------------\n\nTITLE: Setting API Server Request Rate in Go\nDESCRIPTION: Configures the API server client to rate limit requests based on the --max-reconcile-rate flag. This limits queries per second and burst capacity for all controllers in a provider.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-rate-limiting.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nAn API server client that rate limits itself to `--max-reconcile-rate * 5` qps,\nand `--max-reconcile-rate * 10` burst. With a default `--max-reconcile-rate` of\n10 this is 50 qps bursting to 100 queries.\n```\n\n----------------------------------------\n\nTITLE: Defining a Wordpress Application in Crossplane YAML\nDESCRIPTION: This YAML snippet demonstrates how to define a Wordpress application using a custom resource in Crossplane. It specifies the API version, kind, metadata, and basic configuration for a Wordpress instance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: apps.crossplane.io/v1alpha1\nkind: Wordpress\nmetadata:\n  name: example-wordpress-app\nspec:\n  image: wordpress:4.6.1-apache\n```\n\n----------------------------------------\n\nTITLE: Publishing Secrets to Vault using Kubernetes Auth - YAML\nDESCRIPTION: This YAML configuration defines a StoreConfig for deploying secrets to a Vault from Crossplane. It uses Kubernetes native authentication with specified roles and paths.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: secrets.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: vault-default\nspec:\n  type: Vault\n  defaultScope: crossplane-system\n  vault:\n    server: \"https://vault.acme.org\"\n    parentPath: \"secret/my-cloud/dev/\"\n    version: \"v2\"\n    caBundle: \"...\"\n\n    auth:\n      kubernetes:\n        mountPath: \"kubernetes\"\n        role: \"demo\"\n```\n\n----------------------------------------\n\nTITLE: Resource Composition Logic in Crossplane Patch-and-Transform Composer\nDESCRIPTION: A simplified implementation showing how Crossplane's P&T Composer composes resources using the in-memory environment. It applies patches between the XR, environment, and composed resources in sequence.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment-beta.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n// simplified logic implemented by composite.PTComposer\nfunc compose(composition, xr) {\n\t// build the initial in-memory environment\n\tenv := buildInitialEnvironment(composition)\n\n\t// apply patches between the XR (composite resource) and the environment, spec.environment.patches\n\tenv = composition.ApplyEnvironmentPatches(env, xr)\n\n\t// run the composition pipeline, applying all patches (spec.resources[*].patches) for each composed resource.\n  // Patching between XR, env and composed resource\n\tfor _, resource := range composition.spec.resources {\n\t\tfor _, patch := range resource.patches {\n\t\t\tenv = patch.ApplyToObjects(env, xr, resource)\n\t\t}\n\t}\n\n\t// env is now discarded\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PipelineStep Structure in Golang\nDESCRIPTION: Golang struct definition for PipelineStep that includes configuration for maximum iterations a step can execute. The MaxIterations field is optional with a default value of 1, and can be set to -1 for indefinite execution.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_4\n\nLANGUAGE: golang\nCODE:\n```\n// A PipelineStep in a Composition Function pipeline.\ntype PipelineStep struct {\n\t// Other fields omitted for brevity ...\n\n\t// MaxIterations is the maximum number of iterations this step should\n\t// execute. Set it to -1 to execute it indefinitely.\n\t// +kubebuilder:default=1\n\t// +optional\n\tMaxIterations *int64 `json:\"maxIterations,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Function Custom Resource in Kubernetes YAML\nDESCRIPTION: Example of a Function custom resource showing package details and status endpoint for gRPC communication\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1beta1\nkind: Function\nmetadata:\n  name: go-templates\nspec:\n  package: xpkg.upbound.io/negz/go-templates:v0.1.0\nstatus:\n  endpoint: https://go-templates-9sdfn2\n```\n\n----------------------------------------\n\nTITLE: Defining Azure Virtual Network Resource in YAML for Crossplane Provider\nDESCRIPTION: Example YAML manifest for an Azure Virtual Network resource to be deployed during performance testing. It specifies the resource configuration including address space, DNS servers, location, and resource group.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-performance-characteristics-of-providers.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: network.azure.jet.crossplane.io/v1alpha2\nkind: VirtualNetwork\nmetadata:\n  name: test-vn\nspec:\n  forProvider:\n    addressSpace:\n      - 10.0.0.0/16\n    dnsServers:\n      - 10.0.0.1\n      - 10.0.0.2\n      - 10.0.0.3\n    location: East US\n    resourceGroupName: example\n  providerConfigRef:\n    name: example\n```\n\n----------------------------------------\n\nTITLE: Setting Up MySQLInstance Claim Controller in Go\nDESCRIPTION: This function sets up a MySQLInstance claim reconciler which uses the resource.NewClaimReconciler to manage claim instances. The reconciler is configured to include both portable and non-portable class kinds while setting up appropriate event filters. It also defines the name format for the controller based on the MySQLInstance kind.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n// SetupWithManager adds a controller that reconciles MySQLInstance instance claims.\nfunc (c *MySQLInstanceClaimController) SetupWithManager(mgr ctrl.Manager) error {\n  r := resource.NewClaimReconciler(mgr,\n    resource.ClaimKind(databasev1alpha1.MySQLInstanceGroupVersionKind),\n    resource.ClassKind(v1alpha1.RDSInstanceClassGroupVersionKind),\n    resource.ManagedKind(v1alpha1.RDSInstanceGroupVersionKind),\n    resource.WithManagedConfigurators(\n      resource.ManagedConfiguratorFn(ConfigureMyRDSInstance),\n      resource.NewObjectMetaConfigurator(mgr.GetScheme()),\n    ))\n\n  name := strings.ToLower(fmt.Sprintf(\"%s.%s\", databasev1alpha1.MySQLInstanceKind, controllerName))\n\n  return ctrl.NewControllerManagedBy(mgr).\n    Named(name).\n    Watches(&source.Kind{Type: &v1alpha1.RDSInstance{}}, &resource.EnqueueRequestForClaim{}).\n    For(&databasev1alpha1.MySQLInstance{}).\n    WithEventFilter(resource.NewPredicates(resource.HasClassReferenceKind(resource.ClassKind(v1alpha1.RDSInstanceClassGroupVersionKind)))).\n    Complete(r)\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring External Runtime for a Crossplane Provider with Cloud Run\nDESCRIPTION: This YAML snippet demonstrates how to configure a Crossplane Provider to use an external runtime through a custom CloudRunRuntimeConfig resource. The Provider references a custom runtime configuration that would be reconciled by an external controller to deploy the provider to Google Cloud Run instead of Kubernetes.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-runtime-config.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  name: provider-example\nspec:\n  package: xpkg.upbound.io/crossplane-contrib/provider-example:v1.0.0\n  runtimeConfigRef:\n    apiVersion: pkg.example.org/v1\n    kind: CloudRunRuntimeConfig\n    name: default\n```\n\n----------------------------------------\n\nTITLE: Publishing Connection Details to Another Kubernetes Cluster - YAML\nDESCRIPTION: Example YAML configurations illustrating how to publish connection details to another Kubernetes cluster using StoreConfig with Kubernetes type.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    configRef:\n      name: kubernetes-cluster-1\n```\n\n----------------------------------------\n\nTITLE: StoreConfig for External Kubernetes Cluster - YAML\nDESCRIPTION: Defines a YAML config for external Kubernetes integration with Crossplane, specifying cluster namespace and authentication using kubeconfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_16\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: secrets.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: kubernetes-cluster-1\nspec:\n  type: Kubernetes\n  defaultScope: crossplane-system\n  kubernetes:\n    namespace: backend-dev\n    auth:\n      kubeconfig:\n        secretRef:\n          name: \"db-claim-cluster-conn\"\n          key: \"kubeconfig\"\n```\n\n----------------------------------------\n\nTITLE: Reading EKS Cluster Data with ObserveOnly\nDESCRIPTION: Demonstrates how to observe an existing EKS cluster to retrieve its OIDC issuer URL using ObserveOnly policy.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: eks.aws.crossplane.io/v1beta1\nkind: Cluster\nmetadata:\n  name: existing-eks-cluster\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: us-west-2\n```\n\n----------------------------------------\n\nTITLE: Comparing Embedding vs. Sub-struct Approaches in YAML\nDESCRIPTION: This example contrasts two approaches for structuring provider fields in Crossplane resources: direct embedding vs. using sub-structs (forProvider/atProvider). The sub-struct approach better separates provider-specific fields from Crossplane/Kubernetes fields.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.gcp.crossplane.io/v1alpha1\nkind: Network\nmetadata:\\\n  name: my-legacy-network\n  selfLink: /apis/compute.gcp.crossplane.io/v1alpha1/networks/my-legacy-network\nspec:\n  name: monus-legacy-network-res\n  providerConfigRef:\n    name: monus-gcp\n  reclaimPolicy: Delete\n  routingConfig:\n    routingMode: REGIONAL\nstatus:\n  IPv4Range: 10.240.0.0/16\n  conditions:\n  - lastTransitionTime: \"2019-08-29T05:55:16Z\"\n    reason: Successfully reconciled managed resource\n    status: \"True\"\n    type: Synced\n  creationTimestamp: \"2019-08-28T10:45:27.445-07:00\"\n  gatewayIPv4: 10.240.0.1\n  id: 75666386684937048\n  kind: compute#network\n  name: monus-legacy-network-res\n  routingConfig:\n    routingMode: REGIONAL\n  selfLink: https://www.googleapis.com/compute/v1/projects/crossplane-playground/global/networks/monus-legacy-network-res\n```\n\n----------------------------------------\n\nTITLE: Configuring Vault Generic Secret Resource\nDESCRIPTION: Reference to creating a GenericSecret resource for storing secrets in Vault using a hypothetical provider-vault for Crossplane. This illustrates the concept of using Crossplane providers for external secret management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_19\n\nLANGUAGE: yaml\nCODE:\n```\nGenericSecret\n```\n\n----------------------------------------\n\nTITLE: Using Cross Resource Reference in Crossplane\nDESCRIPTION: Example showing how to use Crossplane's cross resource reference feature to reference another managed resource (Network) instead of directly specifying the network path.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  forProvider:\n    networkRef:\n      name: desired-vpc-network\n```\n\n----------------------------------------\n\nTITLE: InitProvider Configuration Example in YAML\nDESCRIPTION: Example showing how to use the new initProvider field alongside forProvider for NodeGroup configuration, demonstrating field precedence and initialization.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: eks.aws.crossplane.io/v1alpha1\nkind: NodeGroup\nmetadata:\n  name: my-group\nspec:\n  initProvider:\n    scalingConfig:\n      desiredSize: 1\n  forProvider:\n    region: us-east-1\n    scalingConfig:\n      maxSize: 5\n      minSize: 1\n```\n\n----------------------------------------\n\nTITLE: Rewriting Crossplane Compositions with Extra Resource Functions\nDESCRIPTION: This YAML snippet shows how to rewrite a Crossplane Composition to use the new extra resource capabilities, allowing functions to request additional resources, such as `EnvironmentConfigs`. This requires the Crossplane ecosystem and understanding of YAML-based resource definitions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: nop.sqlinstances.example.org\nspec:\n  compositeTypeRef:\n    apiVersion: example.org/v1alpha1\n    kind: XSQLInstance\n  environment:\n    environmentConfigs:\n      - ref:\n          name: example-environment-1\n      - type: Selector\n        selector:\n          mode: Multiple\n          sortByFieldPath: data.priority\n          matchLabels:\n            - type: FromCompositeFieldPath\n              key: stage\n              valueFromFieldPath: metadata.labels[stage]\n  resources:\n    - name: nop\n      base:\n        apiVersion: nop.crossplane.io/v1alpha1\n        kind: NopResource\n        spec:\n          forProvider:\n            conditionAfter:\n              - conditionType: Ready\n                conditionStatus: \"False\"\n                time: 0s\n              - conditionType: Ready\n                conditionStatus: \"True\"\n                time: 1s\n      patches:\n        - type: FromEnvironmentFieldPath\n          fromFieldPath: complex.c.f\n          toFieldPath: metadata.annotations[valueFromEnv]\n\n```\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: nop.sqlinstances.example.org\nspec:\n  compositeTypeRef:\n    apiVersion: example.org/v1alpha1\n    kind: XSQLInstance\n  mode: Pipeline\n  pipeline:\n  - name: envconfigs\n    functionRef:\n      name: function-environment-configs\n    input:\n      apiVersion: extra.fn.crossplane.io/v1beta1\n      kind: ExtraResourceSelectors\n      extraResourceSelectors:\n        environmentConfigs:\n        - ref:\n            name: example-environment-1\n        - type: Selector\n          selector:\n            mode: Multiple\n            sortByFieldPath: data.priority\n            matchLabels:\n              - type: FromCompositeFieldPath\n                key: stage\n                valueFromFieldPath: metadata.labels[stage]\n  - name: patch-and-transform\n    functionRef:\n      name: function-patch-and-transform\n    input:\n      apiVersion: pt.fn.crossplane.io/v1beta1\n      kind: Resources\n      resources:\n        - name: nop\n          base:\n            apiVersion: nop.crossplane.io/v1alpha1\n            kind: NopResource\n            spec:\n              forProvider:\n                conditionAfter:\n                  - conditionType: Ready\n                    conditionStatus: \"False\"\n                    time: 0s\n                  - conditionType: Ready\n                    conditionStatus: \"True\"\n                    time: 1s\n          patches:\n            - type: FromEnvironmentFieldPath\n              fromFieldPath: complex.c.f\n              toFieldPath: metadata.annotations[valueFromEnv]\n\n```\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: nop.sqlinstances.example.org\nspec:\n  compositeTypeRef:\n    apiVersion: example.org/v1alpha1\n    kind: XSQLInstance\n  mode: Pipeline\n  pipeline:\n  - name: patch-and-transform\n    functionRef:\n      name: function-patch-and-transform\n    input:\n      apiVersion: pt.fn.crossplane.io/v1beta1\n      kind: Resources\n      environment:\n        environmentConfigs:\n        - ref:\n            name: example-environment-1\n        - type: Selector\n          selector:\n            mode: Multiple\n            sortByFieldPath: data.priority\n            matchLabels:\n              - type: FromCompositeFieldPath\n                key: stage\n                valueFromFieldPath: metadata.labels[stage]\n      resources:\n        - name: nop\n          base:\n            apiVersion: nop.crossplane.io/v1alpha1\n            kind: NopResource\n            spec:\n              forProvider:\n                conditionAfter:\n                  - conditionType: Ready\n                    conditionStatus: \"False\"\n                    time: 0s\n                  - conditionType: Ready\n                    conditionStatus: \"True\"\n                    time: 1s\n          patches:\n            - type: FromEnvironmentFieldPath\n              fromFieldPath: complex.c.f\n              toFieldPath: metadata.annotations[valueFromEnv]\n\n```\n\n----------------------------------------\n\nTITLE: Defining EnvironmentConfig Resource in YAML\nDESCRIPTION: Example of the new EnvironmentConfig resource that can store simple and complex data types as environment-specific configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: EnvironmentConfig\nmetadata:\n  name: example-environment\ndata:\n  simple: value\n  int: 123\n  bool: false\n  complex:\n    a: b\n    c:\n      d: e\n  list:\n    - a\n    - b\n    - c\n```\n\n----------------------------------------\n\nTITLE: Defining Federated Resource Structure in Go\nDESCRIPTION: Go struct definitions for federated resources showing how status information is tracked across clusters. Demonstrates the use of map[string]any for flexible status storage.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\ntype FederatedResource struct {\n\tmetav1.TypeMeta\n\tmetav1.ObjectMeta\n\n\tClusterStatus []ResourceClusterStatus\n}\n\ntype ResourceClusterStatus struct {\n\tClusterName string\n\tStatus      map[string]any\n}\n```\n\n----------------------------------------\n\nTITLE: Defining WordpressCluster Composition in Crossplane YAML\nDESCRIPTION: This snippet defines a Composition for a WordpressCluster, which creates a GKE cluster, a CloudSQL instance, and deploys Wordpress using Helm. It includes patches and connection details for resource configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Composition\nmetadata:\n  name: wordpressclusters.apps.example.org\nspec:\n  writeConnectionSecretsToNamespace: crossplane-system\n  reclaimPolicy: Delete\n  from:\n    apiVersion: apps.example.org/v1alpha1\n    kind: WordpressCluster\n  to:\n    - base:\n        apiVersion: container.gcp.crossplane.io/v1beta1\n        kind: GKECluster\n        spec:\n          providerConfigRef:\n            name: gcp-provider\n          forProvider:\n            addonsConfig:\n              kubernetesDashboard:\n                disabled: true\n              networkPolicyConfig:\n                disabled: true\n            databaseEncryption:\n              state: DECRYPTED\n            defaultMaxPodsConstraint:\n              maxPodsPerNode: 110\n            description: Wordpress Cluster\n            ipAllocationPolicy:\n              createSubnetwork: true\n              useIpAliases: true\n            networkPolicy:\n              enabled: false\n            legacyAbac:\n              enabled: false\n            podSecurityPolicyConfig:\n              enabled: false\n            verticalPodAutoscaling:\n              enabled: false\n            masterAuth:\n              username: admin\n            loggingService: logging.googleapis.com/kubernetes\n            monitoringService: monitoring.googleapis.com/kubernetes\n            networkRef:\n              name: gcp-wpclusters-network\n            location: us-central1\n            locations:\n              - us-central1-a\n          writeConnectionSecretToRef:\n            namespace: crossplane-system\n          reclaimPolicy: Delete\n      patches:\n        - fromFieldPath: \"metadata.name\"\n          toFieldPath: \"metadata.name\"\n        - fromFieldPath: \"metadata.name\"\n          toFieldPath: \"spec.writeConnectionSecretToRef.name\"\n      connectionDetails:\n        - fromConnectionSecretKey: kubeconfig\n    - base:\n        apiVersion: database.gcp.crossplane.io/v1beta1\n        kind: CloudSQLInstance\n        spec:\n          forProvider:\n            databaseVersion: MYSQL_5_6\n            region: us-central1\n            settings:\n              tier: db-custom-1-3840\n              dataDiskType: PD_SSD\n              ipConfiguration:\n                ipv4Enabled: true\n                authorizedNetworks:\n                  - value: \"0.0.0.0/0\"\n          writeConnectionSecretToRef:\n            namespace: crossplane-system\n          providerConfigRef:\n            name: gcp-provider\n          reclaimPolicy: Delete\n      patches:\n        - fromFieldPath: \"metadata.uid\"\n          toFieldPath: \"spec.writeConnectionSecretToRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-mysql\"\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.settings.dataDiskSizeGb\"\n      connectionDetails:\n        - fromConnectionSecretKey: username\n        - fromConnectionSecretKey: password\n        - fromConnectionSecretKey: endpoint\n        - name: port\n          value: \"5432\"\n    - base:\n        apiVersion: kubernetes.crossplane.io/v1beta1\n        kind: ProviderConfig\n      patches:\n        - fromFieldPath: \"metadata.name\"\n          toFieldPath: \"spec.credentialsSecretRef.name\"       \n    - base:\n        apiVersion: helm.crossplane.io/v1alpha1\n        kind: Release\n        spec:\n          forProvider:\n            chart:\n              name: wordpress\n              repository: https://charts.bitnami.com/bitnami\n            namespace: wordpress\n            values: |\n              mariadb.enabled: false\n              externaldb.enabled: true\n            set:\n            - name: externalDatabase.host\n              valueFrom:\n                secretKeyRef:\n                  key: host\n            - name: externalDatabase.user\n              valueFrom:\n                secretKeyRef:\n                  key: username\n            - name: externalDatabase.password\n              valueFrom:\n                secretKeyRef:\n                  key: password\n            - name: blogName\n          reclaimPolicy: Delete\n          providerSelector:\n            matchControllerRef: true\n      patches:\n        - fromFieldPath: \"spec.parameters.version\"\n          toFieldPath: \"spec.forProvider.chart.version\"\n        - fromFieldPath: \"metadata.uid\"\n          toFieldPath: \"spec.forProvider.set[0].valueFrom.secretKeyRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-mysql\"\n        - fromFieldPath: \"metadata.uid\"\n          toFieldPath: \"spec.forProvider.set[1].valueFrom.secretKeyRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-mysql\"\n          toFieldPath: \"spec.forProvider.set[2].valueFrom.secretKeyRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-mysql\"\n        - fromFieldPath: \"spec.parameters.blogName\"\n          toFieldPath: \"spec.forProvider.set[4].value\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Resource CreateUpdater Interface in Go\nDESCRIPTION: Interface defining create and update operations for managed resource synchronization.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\ntype createupdater interface {\n\tcreate(context.Context) (reconcile.Result, error)\n\tupdate(context.Context, *storage.BucketAttrs) (reconcile.Result, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Publishing Connection Details to Kubernetes Secret with Metadata\nDESCRIPTION: Example configuration for publishing connection details to a Kubernetes secret with additional metadata like labels and annotations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    metadata:\n      labels:\n        environment: production\n      annotations:\n        acme.example.io/secret-type: infrastructure\n    configRef:\n      name: default\n```\n\n----------------------------------------\n\nTITLE: Creating ObserveOnly GCP DatabaseInstance for Import\nDESCRIPTION: This YAML snippet demonstrates how to create a GCP DatabaseInstance resource with ObserveOnly policy as the first step in the new import procedure. It includes only the necessary identifying arguments.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: sql.gcp.upbound.io/v1beta1\nkind: DatabaseInstance\nmetadata:\n  annotations:\n    crossplane.io/external-name: existing-database-instance\n  name: existing-database-instance\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: \"us-central1\"\n```\n\n----------------------------------------\n\nTITLE: Custom Resource Definition\nDESCRIPTION: Example CRD configuration defining a custom resource type for the package.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.k8s.io/v1beta1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    controller-tools.k8s.io: \"1.0\"\n  name: mytypes.samples.crossplane.io\nspec:\n  group: samples.crossplane.io\n  names:\n    kind: Mytype\n    plural: mytypes\n  scope: Namespaced\n  version: v1alpha1\n```\n\n----------------------------------------\n\nTITLE: Modifying AWS VPC CRD for Optional CIDRBlock in ObserveOnly Mode\nDESCRIPTION: This diff shows the changes required to make the CIDRBlock parameter of AWS VPC optional when the management policy is set to ObserveOnly. It uses Common Expression Language (CEL) for conditional validation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\n        // CIDRBlock is the IPv4 network range for the VPC, in CIDR notation. For\n        // example, 10.0.0.0/16.\n-       // +kubebuilder:validation:Required\n        // +immutable\n-       CIDRBlock string `json:\"cidrBlock\"`\n+       CIDRBlock *string `json:\"cidrBlock,omitempty\"`\n\n        // The IPv6 CIDR block from the IPv6 address pool. You must also specify Ipv6Pool\n        // in the request. To let Amazon choose the IPv6 CIDR block for you, omit this\n@@ -170,6 +169,7 @@ type VPC struct {\n        metav1.TypeMeta   `json:\",inline\"`\n        metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n+       // +kubebuilder:validation:XValidation:rule=\"self.managementPolicy == 'ObserveOnly' || has(self.forProvider.cidrBlock)\",message=\"cidrBlock is a required parameter\"\n        Spec   VPCSpec   `json:\"spec\"`\n        Status VPCStatus `json:\"status,omitempty\"`\n }\n```\n\n----------------------------------------\n\nTITLE: Resolved Cross Resource Reference in Crossplane\nDESCRIPTION: Example showing how Crossplane populates both the direct resource reference and the cross-reference after resolving the reference, maintaining both values in the configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  forProvider:\n    # Network is populated with the value calculated by networkRef.\n    network: /projects/example/global/networks/desired-vpc-network\n    networkRef:\n      name: desired-vpc-network\n```\n\n----------------------------------------\n\nTITLE: Defining CompositeResourceStatusProps in Golang\nDESCRIPTION: This snippet defines the structure for storing watched resource references in the status field of a CompositeResource. It adds a new 'watchedResourceRefs' field to the status.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_9\n\nLANGUAGE: golang\nCODE:\n```\nfunc CompositeResourceStatusProps() map[string]extv1.JSONSchemaProps {\n\treturn map[string]extv1.JSONSchemaProps{\n\t\t// Other fields omitted for brevity ...\n\t\t\n\t\t\"watchedResourceRefs\": {\n\t\t\tType:     \"object\",\n\t\t\tRequired: []string{\"apiVersion\", \"kind\", \"name\"},\n\t\t\tProperties: map[string]extv1.JSONSchemaProps{\n\t\t\t\t\"apiVersion\": {Type: \"string\"},\n\t\t\t\t\"kind\":       {Type: \"string\"},\n\t\t\t\t\"name\":       {Type: \"string\"},\n\t\t\t},\n\t\t},\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: String Format Transform Function in Crossplane\nDESCRIPTION: Example of using string format transform function to format strings using Go fmt syntax for naming and annotations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\npatches:\n- fromFieldPath: \"metadata.annotations[crossplane.io/external-name]\"\n  toFieldPath: \"metadata.annotations[crossplane.io/external-name]\"\n  transforms:\n  - type: string\n    string:\n      fmt: \"%s-a\"\n```\n\n----------------------------------------\n\nTITLE: Environment Modification Patches in YAML\nDESCRIPTION: Examples of modifying the in-memory environment using ToEnvironmentFieldPath and CombineToEnvironment patches.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n- type: ToEnvironmentFieldPath\n  fromFieldPath: metadata.name\n  toFieldPath: tmp.name\n- type: CombineToEnvironment\n  combine:\n    variables:\n      - fromFieldPath: metadata.namespace\n      - fromFieldPath: metadata.name\n  toFieldPath: tmp.namespacedName\n```\n\n----------------------------------------\n\nTITLE: Variable Naming Conventions in Go\nDESCRIPTION: Example showing proper variable naming practices with both short and descriptive names based on scope and context.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\nconst NumberOfGeese = 42\n\nfunc capture(w goose.Wrangler, looseGeese int) error {\n        for looseGeese > 0 {\n                captured, err := w.Wrangle()\n                if err != nil {\n                        return errors.Wrap(err, \"defeated by geese\")\n                }\n                looseGeese = looseGeese - captured\n        }\n\n        y := goose.NewYard(w)\n        return y.Secure()\n}\n```\n\n----------------------------------------\n\nTITLE: Creating VirtualNetworkRule for MySQL DB Access from AKS\nDESCRIPTION: This YAML configuration creates a VirtualNetworkRule resource that allows the AKS cluster to access the MySQL database through the configured VNet service endpoint. This should be created after the Wordpress stack is installed.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.azure.crossplane.io/v1alpha1\nkind: VirtualNetworkRule\nmetadata:\n  name: wordpress-mysql-vnet\n  namespace: crossplane-system\nspecTemplate:\n  name: wordpress-mysql-vnet\n  serverName: wordpress-mysql\n  virtualNetworSubnetID: id(wordpress-subnet)\n  resourceGroupName: wordpress-rg\n  providerConfigRef:\n    name: example\n    namespace: crossplane-system\n  reclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Creating Kubernetes ProviderConfig in Crossplane\nDESCRIPTION: This YAML snippet demonstrates how to create a Kubernetes ProviderConfig in Crossplane, which is used to connect to a target Kubernetes cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: kubernetes.crossplane.io/v1beta1\nkind: ProviderConfig\nmetadata:\n  name: demo-k8s-provider\n  namespace: my-infra-dev\nspec:\n  credentialsSecretRef:\n    name: demo-cluster-creds\n```\n\n----------------------------------------\n\nTITLE: Defining a VPC with Observe Only Management Policy - YAML\nDESCRIPTION: This snippet defines a VPC resource in Crossplane with a management policy set to ObserveOnly, allowing for observation without making any changes to the resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: ec2.aws.crossplane.io/v1beta1\nkind: VPC\nmetadata:\n  annotations:\n    crossplane.io/external-name: vpc-12345678\n  name: observe-vpc\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: us-east-1\n```\n\n----------------------------------------\n\nTITLE: Updating RunFunctionResponse in Protobuf\nDESCRIPTION: This snippet shows the updated Protobuf definition for RunFunctionResponse, adding a new Requirements message with a watch_resources field to specify which resources should be watched by Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_10\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\nmessage RunFunctionResponse {\n  // Existing fields omitted for brevity\n\n  // Requirements that must be satisfied for this Function to run successfully.\n  Requirements requirements = 5;\n}\n\nmessage Requirements {\n  // Other fields omitted for brevity\n  \n  // Resources that should be watched by Crossplane.\n  repeated ResourceRef watch_resources = 2;\n}\n\nmessage ResourceRef {\n  string api_version = 1;\n  string kind = 2;\n  string name = 3;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ProviderInit Interface in Go\nDESCRIPTION: Example of implementing the ProviderInit interface in Go, which handles initialization and registration of provider CRDs and necessary connection values.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\ntype ProviderInit struct {\n    GVK    schema.GroupVersionKind\n    Scheme *runtime.Scheme\n    Init   func(ctx context.Context, mg resource.Managed) (terraform.ClientWithFinalizer, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Subnet in Existing VPC with ObserveOnly\nDESCRIPTION: Example showing how to create a Subnet in an existing VPC using ObserveOnly policy. The VPC resource is marked for observation only while a new Subnet is created referencing it.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: ec2.aws.crossplane.io/v1beta1\nkind: VPC\nmetadata:\n  name: existing-vpc\n  annotations:\n    crossplane.io/external-name: vpc-0f8da654a40cb68cb\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: us-east-1\n---\napiVersion: ec2.aws.crossplane.io/v1beta1\nkind: Subnet\nmetadata:\n  name: sample-subnet1\nspec:\n  forProvider:\n    region: us-east-1\n    availabilityZone: us-east-1b\n    cidrBlock: 172.16.1.0/16\n    vpcIdRef:\n      name: existing-vpc\n    mapPublicIPOnLaunch: true\n```\n\n----------------------------------------\n\nTITLE: Specifying Default Values in CRD\nDESCRIPTION: This YAML excerpt demonstrates how to specify default values for CRD fields using the standard Kubernetes mechanism. The `spec.image` field is configured with a default value.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n\"kind: CustomResourceDefinition\nmetadata:\n  creationTimestamp: null\n  name: wordpressinstances.wordpress.samples.stacks.crossplane.io\nspec:\n  group: wordpress.samples.stacks.crossplane.io\n  names:\n    kind: WordpressInstance\n    plural: wordpressinstances\n  scope: \\\"\\\"\n  validation:\n    openAPIV3Schema:\n      description: WordpressInstance is the Schema for the wordpressinstances API\n      properties:\n        ...\n        spec:\n          type: object\n          properties:\n            ...\n            image:\n              type: string\n              description: A custom wordpress container image id to use\n              # Defaults are specified like this, using the schema validation for CRD fields.\n              # For more about how this works with CRDs, see:\n              # https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/#defaulting\n              default: \\\"wordpress:4.6.1-apache\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Claim Resource Connection Details Configuration\nDESCRIPTION: Example of a Claim resource specifying where to publish connection details, using the claim namespace as scope instead of the defaultScope in StoreConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: database-creds\n```\n\n----------------------------------------\n\nTITLE: Configuring Provider with DeploymentRuntimeConfig in Crossplane\nDESCRIPTION: Example of referencing a DeploymentRuntimeConfig from a Provider resource in Crossplane. This demonstrates how to specify a custom runtime configuration for a provider package.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-runtime-config.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  name: provider-example\nspec:\n  package: xpkg.upbound.io/crossplane-contrib/provider-example:v1.0.0\n  runtimeConfigRef:\n    apiVersion: pkg.crossplane.io/v1\n    kind: DeploymentRuntimeConfig\n    name: default\n```\n\n----------------------------------------\n\nTITLE: Detailed Composition Function Configuration Example\nDESCRIPTION: A more detailed example of a function entry in the Composition specification, showing complete configuration options for a container-based function including resource limits, network settings, and timeout.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v2alpha1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: XPostgreSQLInstance\n  functions:\n  - name: my-cool-function\n    type: Container\n    # Configuration specific to `type: Container` functions.\n    container:\n      # The OCI image to pull and run.\n      image: xkpg.io/my-cool-function:0.1.0\n      # Whether to pull the function Never, Always, or IfNotPresent.\n      imagePullPolicy: IfNotPresent\n      # Secrets used to pull from a private registry.\n      imagePullSecrets:\n      - namespace: crossplane-system\n        name: my-xpkg-io-creds\n      # Note that only resource limits are supported - not requests.\n      # The function will be run with the specified resource limits.\n      resources:\n        limits:\n          memory: 64Mi\n          cpu: 250m\n      # Defaults to 'Isolated' - i.e an isolated network namespace.\n      network: Accessible\n      # How long the function may run before it's killed. Defaults to 10s.\n      timeout: 30s\n      # Containers are run by an external process listening at the supplied\n      # endpoint. Specifying an endpoint is optional; the endpoint defaults to\n      # the below value.\n      runner:\n        endpoint: unix:///@crossplane/fn/default.sock\n    # An x-kubernetes-embedded-resource RawExtension (i.e. an unschemafied\n    # Kubernetes resource). Passed to the function as the config block of its\n    # FunctionIO.\n    config:\n      apiVersion: database.example.org/v1alpha1\n      kind: Config\n      metadata:\n        name: cloudsql\n      spec:\n        version: POSTGRES_9_6\n```\n\n----------------------------------------\n\nTITLE: Defining DeploymentRuntimeConfig in Crossplane\nDESCRIPTION: Example of a DeploymentRuntimeConfig resource in Crossplane. This configuration allows fine-grained control over the Deployment, Service, and ServiceAccount used for package runtimes.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-runtime-config.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1alpha1\nkind: DeploymentRuntimeConfig\nmetadata:\n  name: default\nspec:\n  deploymentTemplate:\n    metadata:\n      labels:\n        example: label\n    spec:\n      replicas: 1\n      template:\n        securityContext:\n          runAsNonRoot: true\n          runAsUser: 2000\n          runAsGroup: 2000\n        containers:\n        - name: package-runtime\n          securityContext:\n            runAsNonRoot: true\n            runAsUser: 2000\n            runAsGroup: 2000\n            privileged: false\n            allowPrivilegeEscalation: false\n          ports:\n          - name: metrics\n            containerPort: 8080\n    serviceTemplate:\n      metadata: {}\n    serviceAccountTemplate:\n      metadata: {}\n```\n\n----------------------------------------\n\nTITLE: Defining VPC Status with Full State under status.atProvider - YAML\nDESCRIPTION: This snippet extends the previous definition by including the status information for the VPC resource, showcasing the full state which includes details such as CIDR block and tags.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: ec2.aws.crossplane.io/v1beta1\nkind: VPC\nmetadata:\n  annotations:\n    crossplane.io/external-name: vpc-12345678\n  name: observe-vpc\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: us-east-1\nstatus:\n  atProvider:\n    cidrBlock: 172.16.0.0/16\n    enableDnsHostNames: false\n    enableDnsSupport: true\n    instanceTenancy: default\n    region: us-east-1\n    tags:\n      - key: managed-by\n        value: terraform\n  conditions:\n  - lastTransitionTime: \"2023-01-26T14:30:19Z\"\n    reason: ReconcileSuccess\n    status: \"True\"\n    type: Synced\n```\n\n----------------------------------------\n\nTITLE: Defining Reference Resolution Policy Structure in Golang\nDESCRIPTION: Golang struct definition for Reference Resolution Policy that specifies when and how references should be resolved. It includes two main fields: Resolve (with options Always/IfNotPresent) and Resolution (with options Required/Optional). The struct uses Kubernetes builder annotations for validation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_6\n\nLANGUAGE: golang\nCODE:\n```\n// Policy represents the Resolve and Resolution policies of Reference instance.\ntype Policy struct {\n  // Resolve specifies when this reference should be resolved. The default\n  // is 'IfNotPresent', which will attempt to resolve the reference only when\n  // the corresponding field is not present. Use 'Always' to resolve the\n  // reference on every reconcile.\n  // +optional\n  // +kubebuilder:validation:Enum=Always;IfNotPresent\n  Resolve *ResolvePolicy `json:\"resolve,omitempty\"`\n\n  // Resolution specifies whether resolution of this reference is required.\n  // The default is 'Required', which means the reconcile will fail if the\n  // reference cannot be resolved. 'Optional' means this reference will be\n  // a no-op if it cannot be resolved.\n  // +optional\n  // +kubebuilder:default=Required\n  // +kubebuilder:validation:Enum=Required;Optional\n  Resolution *ResolutionPolicy `json:\"resolution,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Package Dependencies Configuration in Crossplane\nDESCRIPTION: Configuration example showing how to specify provider dependencies in a Crossplane Configuration package, including version constraints for multiple providers.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: meta.pkg.crossplane.io/v1alpha1\nkind: Configuration\nmetadata:\n  name: platform-ref-aws\nspec:\n  dependsOn:\n  - provider: xpkg.upbound.io/upbound/provider-aws\n    version: \">=v0.15.0\"\n  - provider: xpkg.upbound.io/crossplane-contrib/provider-helm\n    version: \">=v0.12.0\"\n```\n\n----------------------------------------\n\nTITLE: Defining MinimalGCP Custom Resource\nDESCRIPTION: This YAML defines a MinimalGCP custom resource, configuring a GCP infrastructure setup.  The apiVersion and kind specify the type of resource being defined (a MinimalGCP from the gcp.resourcepacks.crossplane.io API group). The spec section contains parameters like region, projectID, and credentialsSecretRef, configuring the GCP resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\nkind: MinimalGCP\nmetadata:\n  name: small-infra\n  annotations:\n    \\\"resourcepacks.crossplane.io/keep-defaulting-annotations\\\": \\\"true\\\"\n  labels:\n      \\\"foo-key\\\": bar-value\nspec:\n  region: us-west2\n  projectID: foo-project\n  credentialsSecretRef:\n    name: gcp-credentials\n    namespace: crossplane-system\n    key: credentials\"\n```\n\n----------------------------------------\n\nTITLE: Requeueing with Delay in Go\nDESCRIPTION: Illustrates the return of a Reconcile function with a requeue delay configured by 'requeueDelayOnSuccess'. The snippet is used to enforce a delay before requeueing an object that has been successfully reconciled. It depends on the controller-runtime framework for managing Reconcile requests. Inputs include a Reconcile request; the output is a Reconcile result that queues the object for future reconciliation after the delay.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nreturn reconcile.Result{RequeueAfter: reqeueuDelayOnSuccess}, nil\n```\n\n----------------------------------------\n\nTITLE: Reconciled EKS Cluster State\nDESCRIPTION: Shows the complete state of an observed EKS cluster including late-initialized spec.forProvider and populated status.atProvider fields.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: eks.aws.crossplane.io/v1beta1\nkind: Cluster\nmetadata:\n  annotations:\n    crossplane.io/external-name: existing-eks-cluster\n  name: existing-eks-cluster\nspec:\n  deletionPolicy: Delete\n  forProvider:\n    region: us-west-2\n  managementPolicy: ObserveOnly\n  providerConfigRef:\n    name: default\nstatus:\n  atProvider:\n    arn: arn:aws:eks:us-west-2:123456789012:cluster/eks-cluster-argocd-7sz2t-nxp5n\n    certificateAuthorityData: REDACTED\n    createdAt: \"2022-11-30T19:45:32Z\"\n    endpoint: https://F8C1E7B9B2A56C73A8E95C123508ACDF.yl4.us-west-2.eks.amazonaws.com\n    identity:\n      oidc:\n        issuer: https://oidc.eks.us-west-2.amazonaws.com/id/F8C1E7B9B2A56C73A8E95C123508ACDF\n    logging:\n      clusterLogging:\n        - enabled: false\n          types:\n            - api\n            - audit\n            - authenticator\n            - controllerManager\n            - scheduler\n    region: us-west-2\n    resourcesVpcConfig:\n      clusterSecurityGroupId: sg-08d05b318db73172b\n      endpointPrivateAccess: true\n      endpointPublicAccess: true\n      publicAccessCidrs:\n        - 0.0.0.0/0\n      securityGroupIds:\n        - sg-01a328726b00a8729\n      subnetIds:\n        - subnet-03bfe3917165fed12\n        - subnet-065318210004bc0f7\n        - subnet-098fe35ce8828fd7d\n        - subnet-06babff85d2d21cf2\n      vpcId: vpc-06eeba34a0b0d1d75\n    roleArn: arn:aws:iam::123456789012:role/existing-eks-cluster\n    tags:\n      managed-by: terraform\n    version: \"1.23\"\n    outpostConfig: {}\n    platformVersion: eks.5\n    status: ACTIVE\n  conditions:\n  - lastTransitionTime: \"2023-01-26T14:13:41Z\"\n    reason: Available\n    status: \"True\"\n    type: Ready\n  - lastTransitionTime: \"2023-01-26T14:13:41Z\"\n    reason: ReconcileSuccess\n    status: \"True\"\n    type: Synced\n```\n\n----------------------------------------\n\nTITLE: Configuring VPC Network in GCP using Crossplane\nDESCRIPTION: YAML configuration for creating a VPC Network managed resource in GCP through Crossplane. Defines network properties including name format, description, IP range, peering settings, and routing configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: vpc.gcp.crossplane.io/v1alpha1\nkind: Network\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  description: A really cool VPC network\n  # IPv4Range puts the network in subnetwork-less 'legacy mode'\n  IPv4Range: 10.0.0.0/8\n  # The documentation says this puts the VPC network in auto-create subnet mode.\n  # In my experiments it seemed to create the VPC in legacy mode instead.\n  autoCreateSubnetworks: true\n  peerings:\n  - name: peerwithsomeothercoolnetwork\n    network: someothercoolnetwork\n    autoCreateRoutes: true\n    exchangeSubnetRoutes: true\n  routingConfig:\n    routingMode: REGIONAL\n```\n\n----------------------------------------\n\nTITLE: Comparing PostgreSQL Server Schemas in YAML\nDESCRIPTION: This snippet compares the YAML schemas for a PostgreSQL Server resource across different implementations: Crossplane Native Provider, Terrajet provider-jet-azure, and a possible ARM implementation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n# Crossplane Native Provider\napiVersion: database.azure.crossplane.io/v1beta1\nkind: PostgreSQLServer\nmetadata:\n  name: example-psql\nspec:\n  forProvider:\n    administratorLogin: myadmin\n    resourceGroupName: example-rg\n    location: West US 2\n    minimalTlsVersion: TLS12\n    sslEnforcement: Disabled\n    version: \"11\"\n    sku:\n      tier: GeneralPurpose\n      capacity: 2\n      family: Gen5\n    storageProfile:\n      storageMB: 20480\n\n# Terrajet provider-jet-azure\napiVersion: postgresql.azure.jet.crossplane.io/v1alpha1\nkind: PostgresqlServer\nmetadata:\n  name: example\nspec:\n  forProvider:\n    name: example-psqlserver\n    resourceGroupName: example\n    location: \"East US\"\n    administratorLogin: \"psqladminun\"\n    skuName: \"GP_Gen5_4\" # different than native where 3 fields are used.\n    version: \"11\"\n    storageMb: 640000 # different than native where this is given under storageProfile\n    publicNetworkAccessEnabled: true # schema same, but not supported in our native provider yet.\n    sslEnforcementEnabled: true # in native, enum Disabled/Enabled instead of boolean\n    sslMinimalTlsVersionEnforced: \"TLS1_2\" # named differently as minimalTlsVersion\n\n# Possible ARM implementation example,\n# written by looking at https://docs.microsoft.com/en-us/azure/templates/microsoft.dbforpostgresql/servers?tabs=json\n# Exactly same as native implementation.\napiVersion: database.azure.crossplane.io/v1alpha1\nkind: PostgreSQLServer\nmetadata:\n  name: example-psql\nspec:\n  forProvider:\n    administratorLogin: myadmin\n    resourceGroupName: example-rg\n    location: West US 2\n    minimalTlsVersion: TLS12\n    sslEnforcement: Disabled\n    version: \"11\"\n    sku:\n      tier: GeneralPurpose\n      capacity: 2\n      family: Gen5\n    storageProfile:\n      storageMB: 20480\n```\n\n----------------------------------------\n\nTITLE: Configuring Change Logs via DeploymentRuntimeConfig in Crossplane\nDESCRIPTION: YAML configuration that enables change logging for a Crossplane provider by setting up a sidecar container, shared volume mount, and feature flag. This configuration can be reused across multiple providers.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-change-logs.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1beta1\nkind: DeploymentRuntimeConfig\nmetadata:\n  name: enable-change-logs\nspec:\n  deploymentTemplate:\n    spec:\n      selector: {}\n      template:\n        spec:\n          containers:\n          - name: package-runtime\n            args:\n            - --enable-change-logs\n            volumeMounts:\n            - name: change-log-vol\n              mountPath: /var/run/change-logs\n          - name: change-log-sidecar\n            image: crossplane/change-log-sidecar:latest\n            volumeMounts:\n            - name: change-log-vol\n              mountPath: /var/run/change-logs\n          volumes:\n          - name: change-log-vol\n            emptyDir: {}\n```\n\n----------------------------------------\n\nTITLE: Defining a MySQLInstanceRequirement and Pod\nDESCRIPTION: This YAML defines a `MySQLInstanceRequirement` and a Pod. The `MySQLInstanceRequirement` specifies the desired state of a MySQL instance, including version and storage. The Pod defines a simple WordPress deployment that consumes the database credentials from the secret generated by the Crossplane composition.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: common.crossplane.io/v1alpha1\nkind: MySQLInstanceRequirement\nmetadata:\n  name: sqldb\n  namespace: default\nspec:\n  version: \"5.7\"\n  storageGB: 20\n  writeConnectionSecretToRef:\n    name: sql-creds\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: wp\n  namespace: default\nspec:\ncontainers:\n- name: wordpress\n    image: \"wordpress:4.6.1-apache\"\n    env:\n    - name: WORDPRESS_DB_PASSWORD\n    valueFrom:\n        secretKeyRef:\n          name: sql-creds\n          key: password\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Configuration Metadata in YAML\nDESCRIPTION: This YAML snippet demonstrates the structure of a Configuration metadata file for Crossplane packages. It includes fields for specifying Crossplane version compatibility and package dependencies.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-format-v2.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# Required.\nspec:\n  # Optional. Specifies a Crossplane version that the package is compatible with.\n  crossplane: v0.13.0\n  # Optional. Used by Crossplane to ensure any dependencies of a configuration\n  # installed and running before the configuration is installed.\n  dependsOn:\n    # Required. Specifies an OCI image containing a package dependency. This key\n    # may be either 'provider' or 'configuration'. This is sugar; in either case\n    # the package manager determines whether the dependency is really a Provider\n    # or a Configuration by unpacking it and inspecting its kind.\n  - provider: example/provider-example\n    # Required. Will be extended to support version ranges in future, but\n    # currently treated as a specific version tag.\n    version: v0.1.0\n    # Required. Specifies an OCI image containing a package dependency. This key\n    # may be either 'provider' or 'configuration'. This is sugar; in either case\n    # the package manager determines whether the dependency is really a Provider\n    # or a Configuration by unpacking it and inspecting its kind.\n  - configuration: example/some-dependency\n    # Required. Will be extended to support version ranges in future, but\n    # currently treated as a specific version tag.\n    version: v0.2.0\n```\n\n----------------------------------------\n\nTITLE: Configuring DynamoDB Table with Provider Initialization\nDESCRIPTION: Configuration for a DynamoDB table with PROVISIONED billing mode, using initProvider to set initial capacity values while avoiding late initialization.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n  initProvider:\n    readCapacity: 1\n    writeCapacity: 1\n  forProvider:\n    billingMode: PROVISIONED\n...\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Admin ClusterRole in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-admin' ClusterRole, granting full access to Crossplane resources, including the ability to manage role bindings and access provider-defined resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-admin\nrules:\n# Crossplane administrators have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane administrators must create provider credential secrets, and may\n# need to read or otherwise interact with connection secrets. They may also need\n# to create or annotate namespaces.\n- apiGroups: [\"\"]\n  resources: [secrets, namespaces]\n  verbs: [\"*\"]\n# Crossplane administrators have access to view the cluster roles that they may\n# be able to grant to other subjects.\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [clusterroles]\n  verbs: [get, list, watch]\n# Crossplane administrators have access to grant the access they have to other\n# subjects.\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [clusterrolebindings, rolebindings]\n  verbs: [*]\n# Crossplane administrators have full access to built in Crossplane types.\n- apiGroups:\n  - apiextensions.crossplane.io\n  - pkg.crossplane.io\n  resources: [\"*\"]\n  verbs: [\"*\"]\n# Crossplane administrators have full access to all of the composite resources\n# and claims it defines.\n- apiGroups: [xr.example.org]\n  resources:\n  - examplecomposites\n  - examplecomposites/status\n  - exampleclaims\n  - exampleclaims/status\n  verbs: [\"*\"]\n# Crossplane administrators have full access to all resources defined by\n# installed providers.\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - exampleproviderconfigs\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Defining ClusterRole and ClusterRoleBinding for Agents\nDESCRIPTION: This YAML defines a ClusterRole named `read-for-agents` that allows reading cluster-scoped resources like CustomResourceDefinitions, InfrastructureDefinitions, InfrastructurePublications, and Compositions. A ClusterRoleBinding then binds this role to the `agent1` ServiceAccount. This setup enables the Crossplane agent to discover and access the required cluster-scoped resources in the central cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# To be able to read the cluster-scoped resources.\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: read-for-agents\nrules:\n- apiGroups: [\"apiextensions.kubernetes.io\"]\n  resources: [\"customresourcedefinitions\"]\n  verbs: [\"get\", \"watch\", \"list\"]\n- apiGroups: [\"apiextensions.crossplane.io\"]\n  resources:\n  - infrastructuredefinitions\n  - infrastructurepublications\n  - compositions\n  verbs: [\"get\", \"watch\", \"list\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: read-for-agents\nsubjects:\n- kind: ServiceAccount\n  name: agent1\n  apiGroup: rbac.authorization.k8s.io\nroleRef:\n  kind: ClusterRole\n  name: read-for-agents\n  apiGroup: rbac.authorization.k8s.io\n```\n\n----------------------------------------\n\nTITLE: Package Revision Status with ImageConfig Integration\nDESCRIPTION: Example of how a ProviderRevision object status would look with image verification status and selected ImageConfig events. Shows conditions for signature verification and the events that indicate which ImageConfig was used for different operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-image-config.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nStatus:\n  Conditions:\n    Last Transition Time:  2024-10-07T07:18:33Z\n    Reason:                VerificationSucceeded # or VerificationFailed, VerificationSkipped\n    Status:                True\n    Type:                  SignatureVerified\n    Last Transition Time:  2024-10-07T07:18:33Z\n    Reason:                HealthyPackageRevision\n    Status:                True\n    Type:                  Healthy    \nEvents:\n  Type     Reason                 Age                    From                                              Message\n  ----     ------                 ----                   ----                                              -------\n  Normal   SelectedImageConfig    2m19s                  packages/providerrevision.pkg.crossplane.io       Selected ImageConfig \"acme-packages\" for registry authentication\n  Normal   SelectedImageConfig    2m40s                  packages/providerrevision.pkg.crossplane.io       Selected ImageConfig \"acme-packages\" for signature verification\n```\n\n----------------------------------------\n\nTITLE: Defining a PostgreSQL Instance Claim in YAML\nDESCRIPTION: This YAML snippet defines a PostgreSQLInstance resource claim for a GitLab stack. It uses label selectors to specify the desired characteristics, enabling dynamic provisioning by selecting compatible resource classes. Dependencies include Kubernetes and Crossplane setup.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-simple-class-selection.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  namespace: acme-team\n  name: gitlab-database\nspec:\n  classSelector:\n    matchLabels:\n      stack: gitlab\n      grade: experimental\n      region: us-east-1\n```\n\n----------------------------------------\n\nTITLE: Implementing VpcIDRefResolver in Go\nDESCRIPTION: Go struct definition for VpcIDRefResolver, which implements the AttributeReferencer interface for resolving VPC IDs.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\ntype VpcIDRefResolver struct {\n  // the object that is needed for resolving vpcID\n  ObjectReference `json:\"inline\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Fully Managed GCP DatabaseInstance After Import\nDESCRIPTION: This YAML represents the final state of the GCP DatabaseInstance resource after changing the policy to Full and moving required fields from status.atProvider to spec.forProvider, giving Crossplane full control of the resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: sql.gcp.upbound.io/v1beta1\nkind: DatabaseInstance\nmetadata:\n  annotations:\n    crossplane.io/external-name: hasan-test-o-o\n  creationTimestamp: \"2023-02-22T07:14:56Z\"\n  finalizers:\n  - finalizer.managedresource.crossplane.io\n  generation: 7\n  name: hasan-test-o-o\n  resourceVersion: \"41275\"\n  uid: c3f5a1c9-d720-415e-8dcf-a16e80db7e6e\nspec:\n  managementPolicy: Full\n  forProvider:\n    databaseVersion: POSTGRES_14\n    region: us-central1\n    settings:\n    - diskSize: 100\n      tier: db-custom-4-26624\nstatus:\n  atProvider:\n    <removed-for-brevity>\n  conditions:\n  - lastTransitionTime: \"2023-02-22T07:16:51Z\"\n    reason: Available\n    status: \"True\"\n    type: Ready\n  - lastTransitionTime: \"2023-02-22T11:16:45Z\"\n    reason: ReconcileSuccess\n    status: \"True\"\n    type: Synced\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Crossplane-Controllers Helm Chart\nDESCRIPTION: Shows the directory structure for the proposed crossplane-controllers Helm chart which will be deployed into Host Cluster. It includes deployments for crossplane and stack-manager along with RBACs necessary for stack-manager on the Host Cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-host-aware-stack-manager.md#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── Chart.yaml\n├── templates\n│   ├── NOTES.txt\n│   ├── _helpers.tpl\n│   ├── crossplane-deployment.yaml\n│   ├── stack-manager-deployment.yaml\n│   ├── stack-manager-host-role.yaml\n│   ├── stack-manager-host-rolebinding.yaml\n│   └── stack-manager-host-serviceaccount.yaml\n├── values.yaml\n└── values.yaml.tmpl\n```\n\n----------------------------------------\n\nTITLE: Defining AWS RDS Instance Class\nDESCRIPTION: Example of a strongly-typed RDSInstanceClass for MySQL that specifies AWS-specific configuration parameters.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: database.aws.crossplane.io/v1alpha1\nkind: RDSInstanceClass\nmetadata:\n  name: rdsmysql\n  namespace: crossplane-system\nspecTemplate:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups:\n   - sg-ab1cdefg\n   - sg-05adsfkaj1ksdjak\n  size: 20\n  engine: mysql\n  providerRef:\n    name: example\n    namespace: crossplane-system\n  reclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane View ClusterRole in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-view' ClusterRole, which allows read-only access to all Crossplane resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-view\nrules:\n# Crossplane viewers have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane viewers may see which namespaces exist.\n- apiGroups: [\"\"]\n  resources: [namespaces]\n  verbs: [get, list, watch]\n# Crossplane viewers have read-only access to built in Crossplane types.\n- apiGroups:\n  - apiextensions.crossplane.io\n  - pkg.crossplane.io\n  resources: [\"*\"]\n  verbs: [get, list, watch]\n# Crossplane viewers have read-only access to all of the composite resources and\n# claims it defines.\n- apiGroups: [xr.example.org]\n  resources:\n  - examplecomposites\n  - examplecomposites/status\n  - exampleclaims\n  - exampleclaims/status\n  verbs: [get, list, watch]\n# Crossplane viewers have read-only access to all resources defined by installed\n# providers.\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - exampleproviderconfigs\n  verbs: [get, list, watch]\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Secret Definition in Kubernetes\nDESCRIPTION: This snippet provides an example of a Custom Secret Definition (CSD) for a MySQL database. It includes the API version, kind, metadata, specifications such as group, names, version, and validation schema that defines required properties like username and password.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-custom-secret-definitions.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: CustomSecretDefinition\nmetadata:\n  name: mysql.database.crossplane.io\nspec:\n  group: database.crossplane.io\n  names:\n    kind: mysql\n  version: v1alpha1\n  validation:\n    openAPIV3Schema:\n      properties:\n        username:\n          type: string\n        password:\n          type: string\n        required:\n        - username\n        - password\n```\n\n----------------------------------------\n\nTITLE: Configuring AWS Network and Security Resources for Crossplane\nDESCRIPTION: This YAML configuration sets up various AWS resources including VPC, Subnet, SecurityGroup, InternetGateway, RouteTable, IAMRole, IAMRolePolicyAttachment, and DBSubnetGroup. These resources are necessary for creating EKS clusters and RDS instances in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: VPC\nmetadata:\n  namespace: crossplane-system\n  name: my-vpc\nspec:\n  cidrBlock: 192.168.0.0/16\n---\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: Subnet\nmetadata:\n  namespace: crossplane-system\n  name: my-subnet-1\nspec:\n  # the id of the created VPC\n  vpcId: id(my-vpc)\n  cidrBlock: 192.168.64.0/18\n  availabilityZone: eu-west-1a\n---\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: SecurityGroup\nmetadata:\n  namespace: crossplane-system\n  name: my-eks-sg\nspec:\n  name: clusterSg\n  vpcId: id(my-vpc)\n  description: Cluster communication with worker nodes\n--\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: InternetGateway\nmetadata:\n  namespace: crossplane-system\n  name: my-gateway\nspec:\n  vpcId: id(my-vpc)\n--\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: RouteTable\nmetadata:\n  namespace: crossplane-system\n  name: my-rt\nspec:\n  vpcId: id(my-vpc)\n  routes:\n    - cidrBlock: 0.0.0.0/0\n      gateway: id(my-gateway)\n  associations:\n    - subnetId: id(my-subnet-1)\n--\napiVersion: identity.aws.crossplane.io/v1alpha1\nkind: IAMRole\nmetadata:\n  namespace: crossplane-system\n  name: my-cluster-role\nspec:\n  name: clusterRole\n  assumeRolePolicy: |\n    {\n      \"Version\": \"2012-10-17\",\n      \"Statement\": [\n        {\n          \"Effect\": \"Allow\",\n          \"Principal\": {\n            \"Service\": \"eks.amazonaws.com\"\n          },\n          \"Action\": \"sts:AssumeRole\"\n        }\n      ]\n    }\n--\napiVersion: identity.aws.crossplane.io/v1alpha1\nkind: IAMRolePolicyAttachment\nmetadata:\n  namespace: crossplane-system\n  name: my-cluster-role-policy-attachment-1\nspec:\n  policy_arn: arn:aws:iam::aws:policy/EKSClusterPolicy\n  role: name(my-cluster-role)\n--\napiVersion: identity.aws.crossplane.io/v1alpha1\nkind: IAMRolePolicyAttachment\nmetadata:\n  namespace: crossplane-system\n  name: my-cluster-role-policy-attachment-2\nspec:\n  policy_arn: arn:aws:iam::aws:policy/AmazonEKSClusterPolicy\n  role: name(my-cluster-role)\n\n### RDS connectivity related managed resources\n--\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: DBSubnetGroup\nmetadata:\n  namespace: crossplane-system\n  name: my-db-subnet-group\nspec:\n  name: subnetGroup\n  subnetIds: id(my-subnet-1)\n--\napiVersion: network.aws.crossplane.io/v1alpha1\nkind: SecurityGroup\nmetadata:\n  namespace: crossplane-system\n  name: my-rds-sg\nspec:\n  name: rdsSg\n  vpcId: id(my-vpc)\n  description: Cluster communication with worker nodes\n  ingress:\n    - fromPort: 3306\n      toPort: 3306\n      protocol: tcp\n      cidrBlocks:\n        - 0.0.0.0/0\n```\n\n----------------------------------------\n\nTITLE: Configuring AutoScalingGroup with Management Policies in YAML\nDESCRIPTION: Example showing how to configure an AutoScalingGroup without late initialization for the desiredCapacity field by specifying explicit management policies.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n  forProvider:\n    maxSize: 5\n    minSize: 1\n    launchConfigurationNameRef:\n      name: sample-launch-config\n    ...\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Edit ClusterRole in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-edit' ClusterRole, which is similar to the admin role but without the ability to manage role bindings.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-edit\nrules:\n# Crossplane editors have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane editors must create provider credential secrets, and may need to\n# read or otherwise interact with connection secrets.\n- apiGroups: [\"\"]\n  resources: [secrets]\n  verbs: [\"*\"]\n# Crossplane editors may see which namespaces exist, but not edit them.\n- apiGroups: [\"\"]\n  resources: [namespaces]\n  verbs: [get, list, watch]\n# Crossplane editors have full access to built in Crossplane types.\n- apiGroups:\n  - apiextensions.crossplane.io\n  - pkg.crossplane.io\n  resources: [\"*\"]\n  verbs: [\"*\"]\n# Crossplane editors have full access to all of the composite resources and\n# claims it defines.\n- apiGroups: [xr.example.org]\n  resources:\n  - examplecomposites\n  - examplecomposites/status\n  - exampleclaims\n  - exampleclaims/status\n  verbs: [\"*\"]\n# Crossplane viewers have full access to all resources defined by installed\n# providers.\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - exampleproviderconfigs\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Setting Composite Deletion Policy in YAML\nDESCRIPTION: Demonstrates how to configure a Claim in Crossplane to use a specific deletion propagation policy for associated Composite resources. The `compositeDeletePolicy` attribute specifies either `Background` or `Foreground`. This attribute guides the claim reconciler on which deletion policy to apply, influencing the order and visibility of deletion operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-foreground-deletion.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\\n  compositeDeletePolicy: Background\n```\n\n----------------------------------------\n\nTITLE: Defining Usage with Selectors in Crossplane YAML\nDESCRIPTION: Example of defining a Usage resource using selectors to match labels or controller references, allowing for usage relationships between resources created by the same composition instance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Usage\nmetadata:\n  name: release-uses-cluster\nspec:\n  of:\n    apiVersion: eks.upbound.io/v1beta1\n    kind: Cluster\n    resourceSelector:\n      matchControllerRef: true\n      matchLabels:\n        foo: bar\n  by:\n    apiVersion: helm.crossplane.io/v1beta1\n    kind: Release\n    resourceSelector:\n      matchControllerRef: true\n      matchLabels:\n        baz: qux\n```\n\n----------------------------------------\n\nTITLE: Defining a MySQLInstance Infrastructure Resource with InfrastructureDefinition in YAML\nDESCRIPTION: This snippet demonstrates how to create an InfrastructureDefinition for a MySQLInstance resource. It defines connection details, CRD specifications, optional service account, and composition references. This allows infrastructure operators to define composite resources that can be composed of other infrastructure resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: InfrastructureDefinition\nmetadata:\n  # InfrastructureDefinition names are subject to the constraints of Kubernetes\n  # CustomResourceDefinition names. They must be of the form <plural>.<group>.\n  name: mysqlinstances.database.example.org\nspec:\n  # Any composition that intends to satisfy an infrastructure resource must\n  # expose each of the named connection details exactly once in any of its\n  # connectionDetails objects. The connection secret published by the defined\n  # infrastructure resource will include only these connection details.\n  connectionDetails:\n  - username\n  - password\n  - endpoint\n  # Defines the structural schema and GroupVersionKind of this infrastructure.\n  # Only a single API version of the application may exist. Additional fields\n  # will be injected to support composition machinery.\n  crdSpecTemplate:\n    group: database.example.org\n    version: v1alpha1\n    names:\n      kind: MySQLInstance\n      listKind: MySQLInstanceList\n      plural: mysqlinstances\n      singular: mysqlinstance\n    validation:\n      openAPIV3Schema:\n        properties:\n          engineVersion:\n            type: string\n          region:\n            type: string\n          storageGB:\n            type: int\n        type: object\n  # An optional service account that will be used to reconcile MySQLInstance\n  # resources. This allows the use of RBAC to restrict which resources a\n  # MySQLInstance may be composed of. The specified service account must have\n  # full access to MySQLInstance resources, and 'get' access to Component\n  # resources.\n  #\n  # If the service account is omitted Crossplane will use its pod service\n  # account to manage MySQLInstance resources. This implies that anyone with\n  # sufficient RBAC permissions to create a Composition and to create a\n  # MySQLInstance will be able to compose their MySQLInstance of any\n  # infrastructure resource that Crossplane is able to create.\n  serviceAccountRef:\n    namespace: crossplane-system\n    name: mysqlinstances.database.example.org\n  # An optional default composition that will be set automatically for any\n  # MySQLInstance custom resources that omit both their compositeSelector and\n  # their compositeRef.\n  defaultCompositionRef:\n    name: cheap-rds\n  # An optional forced composition that will be set automatically for any\n  # MySQLInstance custom resource, overriding their compositeSelector and their\n  # compositeRef. If defaultComposition and forceComposition are both set, the\n  # forced composition wins.\n  enforcedCompositionRef:\n    name: mysqlinstances.database.example.org\n```\n\n----------------------------------------\n\nTITLE: FunctionIO for Reporting an Error\nDESCRIPTION: Example of a FunctionIO that reports an error condition in its results array, showing how functions can communicate failures.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: FunctionIO\nconfig:\n  apiVersion: database.example.org/v1alpha1\n  kind: Config\n  metadata:\n    name: cloudsql\n  spec:\n    version: POSTGRES_9_6\nobserved: {}  # Omitted for brevity.\nresults:\n- severity: Error\n  message: \"Could not render Database.postgresql.crossplane.io/v1beta1`\n```\n\n----------------------------------------\n\nTITLE: Observed GCP DatabaseInstance with Populated Status\nDESCRIPTION: This YAML shows the GCP DatabaseInstance resource after successful observation, with the status.atProvider field populated with the existing resource's values.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: sql.gcp.upbound.io/v1beta1\nkind: DatabaseInstance\nmetadata:\n  annotations:\n    crossplane.io/external-name: existing-database-instance\n  name: existing-database-instance\nspec:\n  managementPolicy: ObserveOnly\n  forProvider:\n    region: us-central1\nstatus:\n  atProvider:\n    connectionName: crossplane-playground:us-central1:existing-database-instance\n    databaseVersion: POSTGRES_14\n    deletionProtection: true\n    firstIpAddress: 35.184.74.79\n    id: existing-database-instance\n    publicIpAddress: 35.184.74.79\n    region: us-central1\n    <truncated-for-brevity>\n    settings:\n    - activationPolicy: ALWAYS\n      availabilityType: REGIONAL\n      diskSize: 100\n      <truncated-for-brevity>\n      pricingPlan: PER_USE\n      tier: db-custom-4-26624\n      version: 4\n  conditions:\n  - lastTransitionTime: \"2023-02-22T07:16:51Z\"\n    reason: Available\n    status: \"True\"\n    type: Ready\n  - lastTransitionTime: \"2023-02-22T07:16:51Z\"\n    reason: ReconcileSuccess\n    status: \"True\"\n    type: Synced\n```\n\n----------------------------------------\n\nTITLE: Defining Immutable Properties in Go Struct for Crossplane Custom Resource\nDESCRIPTION: This code snippet demonstrates how to define immutable properties in a Go struct for a Crossplane custom resource. It uses the '+immutable' marker to indicate fields that cannot be changed after resource creation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_11\n\nLANGUAGE: go\nCODE:\n```\ntype SubnetworkParameters struct {\n  // Name: The name of the resource...\n  // +immutable\n  Name string `json:\"name\"`\n\n  // Network: The URL of the network to which this subnetwork belongs,\n  // provided by the client when initially creating the subnetwork. Only\n  // networks that are in the distributed mode can have subnetworks. This\n  // field can be set only at resource creation time.\n  // +immutable\n  Network string `json:\"network\"`\n\n  // Region: URL of the region where the Subnetwork resides. This field\n  // can be set only at resource creation time.\n  // +optional\n  // +immutable\n  Region string `json:\"region,omitempty\"`\n\n  // SecondaryIPRanges: An array of configurations for secondary IP ranges\n  // for VM instances contained in this subnetwork. The primary IP of such\n  // VM must belong to the primary ipCidrRange of the subnetwork. The\n  // alias IPs may belong to either primary or secondary ranges. This\n  // field can be updated with a patch request.\n  // +optional\n  SecondaryIPRanges []*GCPSubnetworkSecondaryRange `json:\"secondaryIpRanges,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Default Class with Label in YAML\nDESCRIPTION: This YAML snippet shows how to designate a default MySQLInstanceClass by using labels. It demonstrates the requirement that only one portable class instance per namespace should be labeled as default.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstanceClass\nmetadata:\n  name: standard-mysql\n  namespace: crossplane-system\n  labels:\n    default: true\nclassRef:\n  kind: RDSInstanceClass\n  apiVersion: database.aws.crossplane.io/v1alpha1\n  name: standard-mysql\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Protobuf Message Definitions for Function Communication\nDESCRIPTION: Protocol buffer message definitions for RunFunctionResponse and RunFunctionRequest, implementing resource selection and requirements specification. Includes structures for resource selection by name and label selectors.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_5\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\nmessage RunFunctionResponse {\n  // Existing fields omitted for brevity\n\n  // Requirements that must be satisfied for this Function to run successfully.\n  Requirements requirements = 5;\n}\n\nmessage Requirements {\n  // Extra resources that this Function requires.\n  // The map key uniquely identifies the group of resources.\n  map<string, ResourceSelector> extra_resources = 1;\n}\n\nmessage ResourceSelector {\n  string api_version = 1;\n  string kind = 2;\n\n  // Here we would want to use a oneof, but due to the need of wrapping\n  // messages, the syntax would become a bit cumbersome, so we'll see how to handle\n  // that at implementation time.\n  optional string match_name = 3;\n  map<string, string> match_labels = 4;\n}\n\nmessage RunFunctionRequest {\n  // Existing fields omitted for brevity\n\n  // Note that extra resources is a map to Resources, plural.\n  // The map key corresponds to the key in a RunFunctionResponse's\n  // extra_resources field. If a Function requests extra resources that\n  // don't exist Crossplane sets the map key to an empty Resources\n  // message to indicate that it attempted to satisfy the request.\n  map<string, Resources> extra_resources = 3;\n}\n\n// Resources just exists because you can't have map<string, repeated Resource>.\nmessage Resources {\n  repeated Resource resources = 1;\n}\n```\n\n----------------------------------------\n\nTITLE: Publishing Infrastructure Resources with InfrastructurePublication in YAML\nDESCRIPTION: This snippet demonstrates how to use InfrastructurePublication to make a defined infrastructure resource available for use by application operators. It references the previously defined MySQLInstance infrastructure resource, publishing it for namespaced access.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: InfrastructurePublication\nmetadata:\n  # The name of the InfrastructurePublication must match the name of the\n  # infrastructure resource it publishes. A defined infrastructure resource may\n  # be published at most once. Only defined infrastructure resources may be\n  # published; i.e. a primitive managed resource such as a CloudSQLInstance may\n  # not be published for direct use by application operators.\n  name: mysqlinstances.database.example.org\nspec:\n  infrastructureDefinitionReference:\n    name: mysqlinstances.database.example.org\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Status Field in XRD\nDESCRIPTION: Example of defining a custom status field in an XRD (Crossplane Resource Definition) for user communication.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nstatus:\n  someCommunicationField:\n    - msg: \"Something went wrong.\"\n```\n\n----------------------------------------\n\nTITLE: Configuring EKS NodeGroup with Scaling Configuration\nDESCRIPTION: Example of EKS NodeGroup configuration using initProvider for initial desired size while allowing external scaling management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n  initProvider:\n    scalingConfig:\n      desiredSize: 1\n  forProvider:\n    region: us-east-1\n    scalingConfig:\n      maxSize: 5\n      minSize: 1\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Edit Role for Namespace in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-edit' Role for a specific namespace, granting full access to resource claims without the ability to manage role bindings.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  # This role applies only to the 'example' namespace.\n  namespace: example\n  name: crossplane-edit\nrules:\n# Crossplane namespace editors have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane namespace editors may need to read or otherwise interact with\n# resource claim connection secrets.\n- apiGroups: [\"\"]\n  resources: [secrets]\n  verbs: [\"*\"]\n# Crossplane editors have full access to all of the composite resource claims\n# that an admin has chosen to enable in their namespace.\n- apiGroups: [xr.example.org]\n  resources:\n  - exampleclaims\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Defining gRPC Service for External Secret Store Plugin\nDESCRIPTION: This protobuf snippet defines the gRPC service interface for the External Secret Store plugin. It includes methods for getting, applying, and deleting secrets, along with the necessary message definitions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-pluggable-secret-stores.md#2025-04-21_snippet_1\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\n// This service defines the APIs for an External Secret Store plugin.\nservice ExternalSecretStoreService {\n    rpc GetSecret(GetSecretRequest) returns (GetSecretResponse) {}\n    rpc ApplySecret(ApplySecretRequest) returns (ApplySecretResponse) {}\n    rpc DeleteKeys(DeleteKeysRequest) returns (DeleteKeysResponse) {}\n}\n\nmessage ConfigReference {\n    string api_version = 1;\n    string kind = 2;\n    string name = 3;\n}\nmessage Secret {\n    string scoped_name = 1;\n    map<string, string> metadata = 2;\n    map<string, bytes> data = 3;\n}\nmessage GetSecretRequest {\n    ConfigReference config = 1;\n    Secret secret = 2;\n    GetOptions options = 3;\n}\nmessage GetSecretResponse {\n    Secret secret = 1;\n}\nmessage ApplySecretRequest {\n    ConfigReference config = 1;\n    Secret secret = 2;\n    ApplyOptions options = 3;\n}\nmessage ApplySecretResponse {\n    bool changed = 1;\n}\nmessage DeleteKeysRequest {\n    ConfigReference config = 1;\n    Secret secret = 2;\n    DeleteOptions options = 3;\n}\nmessage DeleteKeysResponse {}\nmessage GetOptions {}\nmessage ApplyOptions {}\nmessage DeleteOptions {\n    bool keep_empty_secret = 1;\n}\n```\n\n----------------------------------------\n\nTITLE: Distributing Connection Details Across Multiple Composed Resources\nDESCRIPTION: Example showing how connection details can be satisfied by multiple composed resources within a Composition, with each required detail being satisfied exactly once across all resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_19\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Composition\n# ...\nspec:\n  to:\n  - base:\n      # ...\n    patches:\n      # ...\n    connectionDetails:\n    - name: username\n      fromConnectionSecretKey: admin-username\n    - fromConnectionSecretKey: password\n  - base:\n      # ...\n    patches:\n      # ...\n    connectionDetails:\n    - fromConnectionSecretKey: endpoint\n```\n\n----------------------------------------\n\nTITLE: Valid Crossplane Composition Example\nDESCRIPTION: A sample Composition defining an RDS PostgreSQL instance with correct schema and patch configurations\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-validating-webhook.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: xpostgresqlinstances.aws.database.example.org\n  annotations:\n    crossplane.io/composition-schema-aware-validation-mode: <selected_mode>\n  labels:\n    provider: aws\n    guide: quickstart\n    vpc: default\nspec:\n  writeConnectionSecretsToNamespace: crossplane-system\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: XPostgreSQLInstance\n  resources:\n    - name: rdsinstance\n      base:\n        apiVersion: database.aws.crossplane.io/v1beta1\n        kind: RDSInstance\n        spec:\n          forProvider:\n            region: us-east-1\n            dbInstanceClass: db.t2.small\n            masterUsername: masteruser\n            engine: postgres\n            engineVersion: \"12\"\n            skipFinalSnapshotBeforeDeletion: true\n            publiclyAccessible: true\n          writeConnectionSecretToRef:\n            namespace: crossplane-system\n      patches:\n        - fromFieldPath: \"metadata.uid\"\n          toFieldPath: \"spec.writeConnectionSecretToRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-postgresql\"\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.allocatedStorage\"\n      connectionDetails:\n        - fromConnectionSecretKey: username\n        - fromConnectionSecretKey: password\n        - fromConnectionSecretKey: endpoint\n        - fromConnectionSecretKey: port\n```\n\n----------------------------------------\n\nTITLE: Defining Default Resource Class with Label\nDESCRIPTION: Example of a ResourceClass with the default label that enables claims to omit explicit class references and use this as the default class.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: ResourceClass\nmetadata:\n  name: cloud-postgresql\n  namespace: crossplane-system\n  labels:\n    postgresqlinstance.database.crossplane.io/default: \"true\"\nparameters:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups: \"sg-ab1cdefg,sg-05adsfkaj1ksdjak\"\n  size: \"20\"\nprovisioner: rdsinstance.database.aws.crossplane.io/v1alpha1\nproviderRef:\n  name: aws-provider\nreclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Defining Environment Admin ClusterRole\nDESCRIPTION: YAML definition for an example environment admin ClusterRole object. This role aggregates permissions from other roles labeled for environment admin access.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-env-admin\n  labels:\n    crossplane.io/scope: \"environment\" # For discoverability for tools\naggregationRule:\n  clusterRoleSelectors:\n  - matchLabels:\n      rbac.crossplane.io/aggregate-to-environment-admin: \"true\"\nrules: [] # Rules are automatically filled in by the controller manager.\n```\n\n----------------------------------------\n\nTITLE: Enabling Foreground Propagation Policy in YAML\nDESCRIPTION: Illustrates configuring a Claim to use the Foreground propagation policy for deleting related Composite resources. Setting `compositeDeletePolicy` to `Foreground` changes the deletion approach to perform a cascading deletion where resources are deleted starting from leaf nodes back to the composite. This configuration aims to simulate the foreground deletion process.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-foreground-deletion.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\\n  compositeDeletePolicy: Foreground\n```\n\n----------------------------------------\n\nTITLE: PostgreSQL Instance Configuration with Composition References\nDESCRIPTION: Example showing PostgreSQL instance configuration with new composition revision and update policy fields.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-revisions.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.example.org/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  name: my-db\n  namespace: default\nspec:\n  parameters:\n    storageGB: 20\n  compositionSelector:\n    matchLabels:\n      provider: gcp\n  compositionRef:\n    name: example-gcp\n  compositionRevisionRef:\n    name: example-gcp-fk2ks\n  compositionUpdatePolicy: Automatic\n```\n\n----------------------------------------\n\nTITLE: FunctionIO for Creating a CloudSQLInstance\nDESCRIPTION: Example of a FunctionIO that specifies the desired state for creating a GCP CloudSQLInstance as a composed resource, including connection details and readiness checks.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: FunctionIO\nobserved: {}  # Omitted for brevity.\ndesired:\n  resources:\n  - name: cloudsqlinstance\n    resource:\n      apiVersion: database.gcp.crossplane.io/v1beta1\n      kind: CloudSQLInstance\n      spec:\n        forProvider:\n          databaseVersion: POSTGRES_9_6\n          region: us-central1\n          settings:\n            tier: db-custom-1-3840\n            dataDiskType: PD_SSD\n            dataDiskSizeGb: 20\n        writeConnectionSecretToRef:\n          namespace: crossplane-system\n          name: cloudsqlpostgresql-conn\n    connectionDetails:\n    - name: hostname\n      fromConnectionSecretKey: hostname\n    readinessChecks:\n    - type: None\n```\n\n----------------------------------------\n\nTITLE: Basic GKE Cluster Configuration in Crossplane\nDESCRIPTION: Demonstrates the current minimal GKE cluster configuration supported in Crossplane, showing only the fields that are actually parsed and submitted to the GKE API.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.gcp.crossplane.io/v1alpha1\nkind: GKECluster\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  clusterVersion: 1.13\n  createSubnetwork: false\n  enableIPAlias: true\n  labels:\n    cool: very\n  machineType: n1-standard-2\n  clusterIPV4CIDR: 192.168.0.0/16\n  nodeIPV4CIDR: 10.0.0.0/8\n  serviceIPV4CIDR: 172.16.0.0/24\n  nodeLabels:\n  - coollabel\n  numNodes: 6\n  zone: us-central1-a\n  Scopes:\n  - mycoolnodescope\n  username: cooluser\n```\n\n----------------------------------------\n\nTITLE: Advanced Function Result Example\nDESCRIPTION: Example of using the Result builder to create a complex result with conditions and targeting.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\nresult := rb.Fatal(messageUnauthorized).\n  TargetCompositeAndClaim().\n  WithConditionFalse(databaseReady, reasonUnauthorized).\n  Build()\nresponse.AddResult(rsp, result)\n```\n\n----------------------------------------\n\nTITLE: Creating Provider-specific Edit ClusterRole\nDESCRIPTION: This YAML snippet demonstrates the creation of a provider-specific 'edit' ClusterRole. It aggregates to Crossplane roles and grants full access to the provider's custom resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane:provider:7f63e3661:aggregate-to-edit\n  labels:\n    rbac.crossplane.io/aggregate-to-crossplane: \"true\"\n    rbac.crossplane.io/aggregate-to-edit: \"true\"\nrules:\n- apiGroups: [provider.example.org]\n  resources:\n  - examplemanageds\n  - exampleproviderconfigs\n  verbs: [*]\n```\n\n----------------------------------------\n\nTITLE: Invalid Crossplane Composition Example\nDESCRIPTION: A sample Composition with multiple schema validation errors demonstrating incorrect patch and field configurations\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-validating-webhook.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: xpostgresqlinstances.aws.database.example.org\n  annotations:\n    crossplane.io/composition-schema-aware-validation-mode: <selected_mode>\n  labels:\n    provider: aws\n    guide: quickstart\n    vpc: default\nspec:\n  writeConnectionSecretsToNamespace: crossplane-system\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: XPostgreSQLInstance\n  resources:\n    - name: rdsinstance\n      base:\n        apiVersion: database.aws.crossplane.io/v1beta1\n        kind: RDSInstance\n        spec:\n          forProvider:\n            dbInstanceClass: db.t2.small\n            masterUsername: masteruser\n            engin: postgres\n            engineVersion: \"12\"\n            skipFinalSnapshotBeforeDeletion: true\n            publiclyAccessible: true\n          writeConnectionSecretToRef:\n            namespace: crossplane-system\n      patches:\n        - fromFieldPath: \"metadata.uid\"\n          toFieldPath: \"spec.writeConnectionSecretToRef.name\"\n          transforms:\n            - type: string\n              string:\n                fmt: \"%s-postgresql\"\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.allocatedstorage\"\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.publiclyAccessible\"\n        - fromFieldPath: \"spec.parameters.wrongParameter\"\n          toFieldPath: \"spec.forProvider.engine\"\n      connectionDetails:\n        - fromConnectionSecretKey: username\n        - fromConnectionSecretKey: password\n        - fromConnectionSecretKey: endpoint\n        - fromConnectionSecretKey: port\n```\n\n----------------------------------------\n\nTITLE: Defining Composition Resource Policy in YAML\nDESCRIPTION: Example YAML configuration showing how to specify allowed extra resources in a Crossplane Composition, including regex patterns for resource names and label matching.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  mode: Pipeline\n  pipeline:\n    - step: get-extra-resources\n      functionRef:\n        name: function-extra-resources\n      allowedExtraResources:\n          # all Something.example.test.com/v1 resources\n        - apiVersion: example.test.com/v1\n          kind: Something\n          # both name and matchLabels to nil\n\n          # all SomethingElse.example.test.com/v1 resources named according to the provided regex\n        - apiVersion: example.test.com/v1\n          kind: SomethingElse\n          name: \"something-else-.*\"\n\n          # all EnvironmentConfigs with label environment=dev, prod or qa\n        - apiVersion: apiextensions.crossplane.io/v1alpha1\n          kind: EnvironmentConfig\n          matchLabels:\n            environment: \"(dev|prod|qa)\" # \"*\" would match any label value\n\n      input:\n        apiVersion: extra.fn.crossplane.io/v1beta1\n        kind: ExtraResourceSelectors\n        # a list of resources by name or label selector\n```\n\n----------------------------------------\n\nTITLE: MySQLInstance Claim YAML Configuration\nDESCRIPTION: This YAML snippet shows the configuration for a MySQLInstance claim that references a portable class. It demonstrates how to specify a class reference and connection details.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: my-app\nspec:\n  classRef:\n    name: standard-mysql\n  writeConnectionSecretToRef:\n    name: rdsmysql\n  engineVersion: \"5.6\"\n```\n\n----------------------------------------\n\nTITLE: Nested Error Handling Pattern (Anti-pattern)\nDESCRIPTION: Example showing a non-recommended approach using nested conditionals for error handling.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_13\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        if v, err := fetch(); err != nil {\n                return errors.Wrap(err, \"could not enable the thing\")\n        } else {\n                store(embiggen(v))\n        }\n        \n        return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Observed VPC Resource State\nDESCRIPTION: Shows the reconciled state of an observed VPC resource including its metadata, spec configurations, and status information after the first reconciliation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-observe-only-resources.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: ec2.aws.crossplane.io/v1beta1\nkind: VPC\nmetadata:\n  annotations:\n    crossplane.io/external-name: vpc-0f8da654a40cb68cb\n  name: existing-vpc\nspec:\n  deletionPolicy: Delete\n  forProvider:\n    region: us-east-1\n  managementPolicy: ObserveOnly\n  providerConfigRef:\n    name: default\nstatus:\n  atProvider:\n    cidrBlock: 172.16.0.0/16\n    enableDnsHostNames: false\n    enableDnsSupport: true\n    instanceTenancy: default\n    region: us-east-1\n    tags:\n      - key: managed-by\n        value: terraform\n  conditions:\n  - lastTransitionTime: \"2023-01-26T14:30:19Z\"\n    reason: ReconcileSuccess\n    status: \"True\"\n    type: Synced\n```\n\n----------------------------------------\n\nTITLE: CompositionFetcher Interface Implementation in Go\nDESCRIPTION: Definition of the CompositionFetcher interface and example usage in reconciliation logic.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-revisions.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// A CompositionFetcher fetches an appropriate Composition for the supplied\n// composite resource.\ntype CompositionFetcher interface {\n  Fetch(ctx context.Context, cr resource.Composite) (*v1.Composition, error)\n}\n\n// r.composition is a CompositionFetcher.\ncomp, err := r.composition.Fetch(ctx, cr)\nif err != nil {\n  return reconcile.Result{RequeueAfter: shortWait}, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing KubernetesTarget Type in Crossplane\nDESCRIPTION: This snippet outlines the first step in the technical implementation: creating the KubernetesTarget type in core Crossplane. This involves defining the KubernetesTarget custom resource and developing a controller to propagate Secret objects containing Kubernetes cluster connection information to the KubernetesTarget's namespace, if the target references a managed resource type supplied by that stack.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-consuming-k8s-clusters.md#2025-04-21_snippet_2\n\nLANGUAGE: Text\nCODE:\n```\n\"The first step would be implementing the `KubernetesTarget` type in [core Crossplane]. As mentioned above, in addition to the creation of the custom resource, a new controller would also be required in each stack to watch `KubernetesTarget` object creation and propagate `Secret` objects to its namespace if its `clusterRef` references a Kubernetes cluster managed resource type supplied by that stack. These controllers should use [predicates] to only reconcile `KubernetesTarget` objects that reference their resource type and do not already have a `connectionSecretRef` set, and should refuse to propagate a `Secret` if the `KubernetesTarget` references a managed resource that is not `Bound`. The majority of this logic can be shared across controllers by adding a new reconciler to [crossplane-runtime].\"\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests Directly\nDESCRIPTION: Commands for compiling and running E2E tests without using earthly\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ngo test -c -o e2e ./test/e2e\n\n./e2e -v=4 -test.v -test.failfast -fail-fast -destroy-kind-cluster=false -test.run ^TestPropagateFieldsRemovalToXRAfterUpgrade\n```\n\n----------------------------------------\n\nTITLE: Executing Terraform Apply in Kubeform\nDESCRIPTION: This snippet from Kubeform's controller (KFC) shows how it directly executes 'terraform apply' for resources requiring reconciliation. It demonstrates the integration of Terraform with Kubernetes custom controllers.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_7\n\nLANGUAGE: Go\nCODE:\n```\ndirectly exec()'ing `terraform apply`\n```\n\n----------------------------------------\n\nTITLE: Defining GroupVersionKind Variables for FavouriteDBInstance in Go\nDESCRIPTION: Creation of convenience GroupVersionKind variables for the FavouriteDBInstance resource. These variables are typically added to register.go or groupversion_info.go.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\n// FavouriteDBInstance type metadata.\nvar (\n    FavouriteDBInstanceKind             = reflect.TypeOf(FavouriteDBInstance{}).Name()\n    FavouriteDBInstanceKindAPIVersion   = FavouriteDBInstanceKind + \".\" + GroupVersion.String()\n    FavouriteDBInstanceGroupVersionKind = GroupVersion.WithKind(FavouriteDBInstanceKind)\n)\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Package Annotations\nDESCRIPTION: Specifies standard metadata annotations for Crossplane Configuration and Provider packages, including maintainer, source, license, description, and readme information\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/specifications/xpkg.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nannotations:\n  meta.crossplane.io/maintainer: \"Package Maintainers\"\n  meta.crossplane.io/source: \"https://example.com/package-source\"\n  meta.crossplane.io/license: \"Apache-2.0\"\n  meta.crossplane.io/description: \"A brief package description\"\n  meta.crossplane.io/readme: \"Detailed package documentation and information\"\n```\n\n----------------------------------------\n\nTITLE: Setting Composite Status Conditions\nDESCRIPTION: Example of setting status conditions on a Composite Resource using the Crossplane SDK.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\ndesiredXR, err := request.GetDesiredCompositeResource(req)\nc := xpv1.Condition{\n    Type:               xpv1.ConditionType(\"ImageReady\"),\n    Status:             corev1.ConditionFalse,\n    LastTransitionTime: metav1.Now(),\n    Reason:             \"NotFound\",\n    Message:            \"The image provided does not exist or you are not \"+\n                        \"authorized to use it.\",\n}\ndesiredXR.Resource.SetConditions(c)\nresponse.SetDesiredCompositeResource(rsp, desiredXR)\n```\n\n----------------------------------------\n\nTITLE: Configuring GCP Node Pool Management\nDESCRIPTION: Basic GCP Node Pool configuration example demonstrating management policy specification without late initialization.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n  forProvider:\n  ...\n```\n\n----------------------------------------\n\nTITLE: Rendering AWS IAM Resources with Go Templates\nDESCRIPTION: Example showing how to use Go templating to dynamically create AWS IAM Users and Access Keys based on a count specified in the composite resource spec.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-function-go-templating.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n{{- range $i := until ( .observed.composite.resource.spec.count | int ) }}\n---\napiVersion: iam.aws.upbound.io/v1beta1\nkind: User\nmetadata:\n  annotations:\n    gotemplating.fn.crossplane.io/composition-resource-name: test-user-{{ $i }}\n  name: test-user-{{ $i }}\n  labels:\n    testing.upbound.io/example-name: test-user-{{ $i }}\nspec:\n  forProvider: {}\n\n---\napiVersion: iam.aws.upbound.io/v1beta1\nkind: AccessKey\nmetadata:\n  annotations:\n    gotemplating.fn.crossplane.io/composition-resource-name: sample-access-key-{{ $i }}\n  name: sample-access-key-{{ $i }}\nspec:\n  forProvider:\n    userSelector:\n      matchLabels:\n        testing.upbound.io/example-name: test-user-{{ $i }}\n  writeConnectionSecretToRef:\n    name: sample-access-key-secret-{{ $i }}\n    namespace: crossplane-system\n{{- end }}\n```\n\n----------------------------------------\n\nTITLE: Referencing a Resource Class in PostgreSQL Instance Claim\nDESCRIPTION: Example of a PostgreSQLInstance claim that explicitly references a resource class, requiring the developer to know about the specific class.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  name: cloud-postgresql-claim\n  namespace: demo\nspec:\n  classRef:\n    name: cloud-postgresql\n    namespace: crossplane-system\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin-based Secret Store in YAML\nDESCRIPTION: This YAML snippet demonstrates how to configure a plugin-based secret store using StoreConfig and a custom VaultConfig resource. It shows the structure for specifying the plugin endpoint and referencing the plugin-specific configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-pluggable-secret-stores.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: gcp.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: vault\nspec:\n  type: Plugin\n  defaultScope: crossplane-system\n  external:\n    endpoint: ess-plugin-vault:4040  # Service endpoint of the plugin.\n    configRef:\n      apiVersion: secrets.crossplane.io/v1alpha1\n      kind: VaultConfig\n      name: vault-internal\n---\napiVersion: secrets.crossplane.io/v1alpha1\nkind: VaultConfig\nmetadata:\n  name: vault-internal\nspec:\n  server: http://vault.vault-system:8200\n  mountPath: secrets/\n  version: v2\n  auth:\n    method: Token\n    token:\n      source: Secret\n      secretRef:\n        namespace: crossplane-system\n        name: vault-token\n        key: token\n```\n\n----------------------------------------\n\nTITLE: Implementing KubernetesTarget with ClusterRef in Crossplane YAML\nDESCRIPTION: Example of a KubernetesTarget resource in the 'my-app-team' namespace that references a GKE cluster managed resource. This enables the cluster to be published for use by KubernetesApplications in that namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-consuming-k8s-clusters.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesTarget\nmetadata:\n  namespace: my-app-team\n  name: enable-dev-k8s\n  labels:\n    env: dev\nspec:\n  clusterRef:\n    kind: GKECluster\n    apiVersion: compute.gcp.crossplane.io/v1alpha3\n    name: dev-k8s-cluster\n```\n\n----------------------------------------\n\nTITLE: Implementing Update Function for Helm Release Controller\nDESCRIPTION: Performs Helm upgrade operation by pulling the chart, preparing desired configuration from values and sets, and executing helm upgrade command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\n// Update performs helm upgrade\nfunc (c *external) Update(ctx context.Context, mg resource.Managed) (managed.ExternalUpdate, error) {\n    // Implementation details omitted for brevity\n    return managed.ExternalUpdate{}, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Subnet YAML with VPCIDRef\nDESCRIPTION: Updated YAML configuration for a Subnet resource using the new VPCIDRef field for cross-referencing.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: network.aws.crossplane.io/v1alpha2\nkind: Subnet\nmetadata:\n  namespace: cool-ns\n  name: my-subnet\nspec:\n  # reference to API objects from which the vpcId will be resolved\n  vpcIdRef:\n    name: my-vpc\n  ...\n---\n```\n\n----------------------------------------\n\nTITLE: Maintaining High Fidelity in Subnet Type Definition\nDESCRIPTION: Go code diff showing how to maintain support for both direct VPCID specification and VPCIDRef in the Subnet type.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\n  // VPCID is the ID of the VPC.\n- VPCID string `json:\"vpcId\"`\n+ VPCID string `json:\"vpcId,omitempty\"`\n+ // VPCIDRef resolves the VPCID from the refenreced VPC\n+ VPCIDRef VpcIDRefResolver `json:\"vpcIdRef,omitempty\"`\n```\n\n----------------------------------------\n\nTITLE: Defining PackageRevisionSpec Structure in Go\nDESCRIPTION: Defines the PackageRevisionSpec struct which specifies the desired state of a PackageRevision. It includes fields for various definitions, controller specifications, and dependencies.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_11\n\nLANGUAGE: go\nCODE:\n```\ntype PackageRevisionSpec struct {\n  CustomResourceDefinitions            []metav1.TypeMeta           `json:\"customResourceDefinitions,omitempty\"`\n  InfrastructureDefinitions            []metav1.TypeMeta           `json:\"infrastructureDefinitions,omitempty\"`\n  InfrastructurePublications           []metav1.TypeMeta           `json:\"infrastructurePublications,omitempty\"`\n  Compositions                         []metav1.TypeMeta           `json:\"compositions,omitempty\"`\n  Controller                           ControllerSpec              `json:\"controller,omitempty\"`\n  InstallJobRef                        *corev1.ObjectReference     `json:\"installJobRef,omitempty\"`\n  Permissions                          PermissionsSpec             `json:\"permissions,omitempty\"`\n  DependsOn                            []Dependency                `json:\"dependsOn,omitempty\"`\n  DesiredState                         PackageRevisionDesiredState `json:\"desiredState\"`\n  Revision                             int64                       `json:\"revision\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Composite Status with Claim Conditions\nDESCRIPTION: Example of Composite status YAML showing claim condition propagation configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nstatus:\n  # The XR's condition types that should be back-propagated to the claim\n  claimConditions: [DatabaseReady, ImageReady]\n  # The XR's conditions\n  conditions:\n  - type: DatabaseReady\n    status: True\n    reason: Available\n  - type: ImageReady\n    status: False\n    reason: NotFound\n    message: The image provided does not exist or you are not authorized to use it.\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Resource Definition with Parent Labels in YAML\nDESCRIPTION: Example of a CustomResourceDefinition YAML for WordpressInstances, showing the proposed parent labels to establish its relationship with the StackInstall resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.k8s.io/v1beta1\nkind: CustomResourceDefinition\nmetadata:\n  creationTimestamp: null\n  name: wordpressinstances.wordpress.samples.stacks.crossplane.io\n  labels:\n    core.crossplane.io/parent-group: \"stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-kind: \"StackInstall\"\n    core.crossplane.io/parent-name: \"sample-stack-wordpress\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n    app.kubernetes.io/managed-by: stack-manager\n...\n```\n\n----------------------------------------\n\nTITLE: Implementing Observe Function for Helm Release Controller\nDESCRIPTION: Retrieves last release information using Helm history action and determines if the resource exists and is up to date based on desired state comparison.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// Observe gets release information\nfunc (c *external) Observe(ctx context.Context, mg resource.Managed) (managed.ExternalObservation, error) {\n    // Implementation details omitted for brevity\n    return managed.ExternalObservation{}, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Generated DeepCopy and Managed Interface Files\nDESCRIPTION: Automatically generated files for deep copy methods and resource.Managed interface implementations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_5\n\nLANGUAGE: filepath\nCODE:\n```\napis/<group>/<version>/zz_generated.deepcopy.go\napis/<group>/<version>/zz_generated.managed.go\n```\n\n----------------------------------------\n\nTITLE: Provider Pod StoreConfig for Vault - YAML\nDESCRIPTION: This YAML configuration creates a StoreConfig for provider pods within Crossplane, facilitating Vault interactions with specified authentication and scoping details.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: aws.secrets.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: vault-default\nspec:\n  type: Vault\n  defaultScope: crossplane-system\n  vault:\n    server: \"https://vault.acme.org\"\n    parentPath: \"secret/my-cloud/dev/\"\n    version: \"v2\"\n    caBundle: \"...\"\n    auth:\n      kubernetes:\n        mountPath: \"kubernetes\"\n        role: \"crossplane\"\n```\n\n----------------------------------------\n\nTITLE: Defining a Contemporary Crossplane Workload in YAML\nDESCRIPTION: This snippet demonstrates the structure of a current Crossplane Workload resource, including cluster selection, resource dependencies, and target Kubernetes resources like Deployments and Services.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: demo\nspec:\n  clusterSelector:\n    provider: gcp\n  resources:\n  - name: demo\n    secretName: demo\n  targetDeployment:\n    apiVersion: extensions/v1beta1\n    kind: Deployment\n    metadata:\n      name: wordpress\n      labels:\n        app: wordpress\n    spec:\n      selector:\n        app: wordpress\n      template:\n        metadata:\n          labels:\n            app: wordpress\n        spec:\n          containers:\n            - name: wordpress\n              image: wordpress:4.6.1-apache\n              ports:\n                - containerPort: 80\n  targetNamespace: demo\n  targetService:\n    apiVersion: v1\n    kind: Service\n    metadata:\n      name: wordpress\n    spec:\n      ports:\n        - port: 80\n      selector:\n        app: wordpress\n      type: LoadBalancer\n```\n\n----------------------------------------\n\nTITLE: Defining PackageRevision State Type in Go\nDESCRIPTION: Definition of PackageRevisionDesiredState type and its constant values for Active and Inactive states.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\ntype PackageRevisionDesiredState string\n\nconst (\n  PackageRevisionActive   PackageRevisionDesiredState = \"Active\"\n  PackageRevisionInactive PackageRevisionDesiredState = \"Inactive\"\n)\n\n// +kubebuilder:object:root=true\n\n// A PackageRevision that has been added to Crossplane.\n// +kubebuilder:resource:categories=crossplane\n// +kubebuilder:subresource:status\n// +kubebuilder:printcolumn:name=\"READY\",type=\"string\",JSONPath=\".status.conditionedStatus.conditions[?(@.type=='Ready')].status\"\n// +kubebuilder:printcolumn:name=\"VERSION\",type=\"string\",JSONPath=\".spec.version\"\n```\n\n----------------------------------------\n\nTITLE: Installing a Function in Crossplane in YAML\nDESCRIPTION: This YAML snippet shows how to install a Function in Crossplane. The Function is packaged and referenced by name, which corresponds to the 'functionRef' in a Composition using the 'Pipeline' mode.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1beta1\nkind: Function\nmetadata:\n  name: go-templates\nspec:\n  package: xpkg.upbound.io/negz/go-templates:v0.1.0\n```\n\n----------------------------------------\n\nTITLE: Labels and Annotations Template Example in YAML\nDESCRIPTION: Demonstrates how to handle labels and annotations in Template Stacks using list merging functions to define template behavior.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\n  templates:\n    example.example.org/v1:\n      fooresource: |\n      ...\n      metadata:\n        annotations:\n          {{- range $key, $value := (mergeFn .fooresource.metadata.annotations [\"foo\"]) }}\n          - {{$key}}: {{$value}}\n          {{- end }}\n```\n\n----------------------------------------\n\nTITLE: Composition Usage Definition Example in YAML\nDESCRIPTION: Example showing how to define a usage relationship within a Crossplane composition.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n    - name: xservices-uses-xeks\n      base:\n        apiVersion: apiextensions.crossplane.io/v1alpha1\n        kind: Usage\n        spec:\n          of:\n            - apiVersion: aws.platformref.upbound.io/v1alpha1\n              kind: XEKS\n              selector:\n                matchControllerRef: true\n          by:\n            apiVersion: aws.platformref.upbound.io/v1alpha1\n            kind: XServices\n            selector:\n              matchControllerRef: true\n```\n\n----------------------------------------\n\nTITLE: Composition with Functions Array Example\nDESCRIPTION: Example of a Composition resource with the proposed functions array, showing a container-based function implementation with basic configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v2alpha1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: XPostgreSQLInstance\n  functions:\n  - name: my-cool-function\n    type: Container\n    container:\n      image: xkpg.io/my-cool-function:0.1.0\n```\n\n----------------------------------------\n\nTITLE: Defining ControllerSpec Structure in Go\nDESCRIPTION: Defines the ControllerSpec struct which specifies the controller that implements the logic for a package. It includes options for service account and deployment.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_13\n\nLANGUAGE: go\nCODE:\n```\ntype ControllerSpec struct {\n  // ServiceAccount options allow for changes to the ServiceAccount the\n  // Package Manager creates for the Package's controller\n  ServiceAccount *ServiceAccountOptions `json:\"serviceAccount,omitempty\"`\n\n  Deployment *ControllerDeployment `json:\"deployment,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Provider CRD Statistics\nDESCRIPTION: List of major Crossplane providers and their CRD counts, showing the scale of the CRD scaling problem across different cloud providers.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n* https://marketplace.upbound.io/providers/upbound/provider-aws/v0.30.0 - 872\n* https://marketplace.upbound.io/providers/upbound/provider-azure/v0.28.0 - 692\n* https://marketplace.upbound.io/providers/upbound/provider-gcp/v0.28.0 - 325\n* https://marketplace.upbound.io/providers/crossplane-contrib/provider-tencentcloud/v0.6.0 - 268\n* https://marketplace.upbound.io/providers/crossplane-contrib/provider-aws/v0.37.1 - 178\n* https://marketplace.upbound.io/providers/frangipaneteam/provider-flexibleengine/v0.4.0 - 169\n* https://marketplace.upbound.io/providers/scaleway/provider-scaleway/v0.1.0 - 73\n```\n\n----------------------------------------\n\nTITLE: Defining MySQL Instance Policy for Default Class\nDESCRIPTION: Example of a MySQLInstancePolicy that specifies which class should be used as default for MySQL instances in a namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstancePolicy\nmetadata:\n  name: mysql-policy\n  namespace: my-app-namespace\ndefaultClassRef:\n  kind: RDSInstanceClass\n  apiVersion: database.aws.crossplane.io/v1alpha1\n  name: standard-mysql\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Use Publish Connection Details in YAML\nDESCRIPTION: Specifies the configuration to control where Crossplane publishes its connection details, providing a reference to the StoreConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: <secret-name>\n    configRef:\n      name: vault-default\n```\n\n----------------------------------------\n\nTITLE: Core Crossplane StoreConfig for Vault - YAML\nDESCRIPTION: Defines a StoreConfig for the Crossplane core application to interact with Vault. It sets up the default scope and authentication parameters.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: secrets.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: vault-default\nspec:\n  type: Vault\n  defaultScope: crossplane-system\n  vault:\n    server: \"https://vault.acme.org\"\n    parentPath: \"secret/my-cloud/dev/\"\n    version: \"v2\"\n    caBundle: \"...\"\n    auth:\n      kubernetes:\n        mountPath: \"kubernetes\"\n        role: \"crossplane\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Pipeline Step Types in Go\nDESCRIPTION: Golang struct definitions for PipelineStep and ResourceSelector types that implement the resource policy functionality in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_8\n\nLANGUAGE: golang\nCODE:\n```\n// A PipelineStep in a Composition Function pipeline.\ntype PipelineStep struct {\n\t// Step name. Must be unique within its Pipeline.\n\tStep string `json:\"step\"`\n\n\t// FunctionRef is a reference to the Composition Function this step should\n\t// execute.\n\tFunctionRef FunctionReference `json:\"functionRef\"`\n\n\t// Input is an optional, arbitrary Kubernetes resource (i.e. a resource\n\t// with an apiVersion and kind) that will be passed to the Composition\n\t// Function as the 'input' of its RunFunctionRequest.\n\t// +optional\n\t// +kubebuilder:pruning:PreserveUnknownFields\n\t// +kubebuilder:validation:EmbeddedResource\n\tInput *runtime.RawExtension `json:\"input,omitempty\"`\n\n\t// AllowedExtraResources is a list of resources by name or label selector\n\t// that this pipeline step is allowed to request.\n\t// +optional\n\tAllowedExtraResources []ResourceSelector `json:\"allowedExtraResources,omitempty\"`\n}\n\n// ResourceSelector is a selector for resources.\n// Both name and matchLabels are optional, if both are nil, all resources of the\n// specified kind and apiVersion can be requested.\ntype ResourceSelector struct {\n\tAPIVersion string `json:\"apiVersion\"`\n\tKind string `json:\"kind\"`\n\t\n\t// MatchName is a regex that the name of the resource must match.\n\t// Only one of MatchName or MatchLabels can be specified.\n\t// +optional\n\tMatchName *string `json:\"matchName,omitempty\"`\n\t\n\t// MatchLabels is a map of labels that the resource must match.\n\t// Values are regular expressions.\n\t// Only one of MatchName or MatchLabels can be specified.\n\t// +optional\n\tMatchLabels map[string]string `json:\"matchLabels,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Package Permission Scope in YAML\nDESCRIPTION: Specifies the permission scope for a Crossplane package, indicating whether the package operates at a cluster or namespace level\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n# Human readable title of application.\ntitle: Sample Crossplane Stack\n\n# Scope of permissions needed by the package once installed in the control plane,\n# current supported values are:\n#\n# - Cluster\n# - Namespaced\npermissionScope: Cluster\n```\n\n----------------------------------------\n\nTITLE: Various Management Policy Configurations in YAML\nDESCRIPTION: Examples of different management policy configurations including ObserveOnly, OrphanOnDelete, and other specialized cases.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# ObserveOnly\nspec:\n  managementPolicies: ObserveOnly\n\n# would be replaced with:\nspec:\n  managementPolicies: [\"Observe\"]\n\n# OrphanOnDelete\nspec:\n  managementPolicies: OrphanOnDelete\n\n# would be replaced with:\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Observe\", \"LateInitialize\"]\n\n# pause can be achieved by setting managementPolicies to empty list instead of\n# using the annotation\nspec:\n  managementPolicies: []\n\n# Turn off late initialization\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n```\n\n----------------------------------------\n\nTITLE: Listing InfrastructurePublications\nDESCRIPTION: This bash command uses `kubectl` to list all `InfrastructurePublications` in the cluster. This command allows users to discover what managed resources are available for provisioning through Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\nkubectl get infrastructurepublications\n```\n\n----------------------------------------\n\nTITLE: Defining Workload with Custom Scheduler in YAML\nDESCRIPTION: YAML configuration for a Crossplane workload specifying a custom scheduler name for extended scheduling functionality.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-workload-scheduler.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: test-workload\nspec:\n  schedulerName: my-customer-scheduler\n```\n\n----------------------------------------\n\nTITLE: Kyverno ClusterPolicy for Package Image Verification\nDESCRIPTION: Example of a Kyverno ClusterPolicy that could be used as an alternative approach to verify Crossplane Provider images. This policy enforces signature verification for all images from a specific registry using Sigstore keyless verification.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-image-config.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: kyverno.io/v1\nkind: ClusterPolicy\nmetadata:\n  name: signed-acme-providers\nspec:\n  validationFailureAction: Enforce\n  rules:\n  - name: check-signature\n    match:\n      any:\n      - resources:\n          kinds:\n          - Provider\n    imageExtractors:\n      Provider:\n        - name: \"providers\"\n          path: /spec/package\n    verifyImages:\n    - imageReferences:\n      - \"xpkg.upbound.io/acme-co/*\"\n      attestors:\n      - entries:\n        - keyless:\n            subject: \"https://github.com/acme-co/crossplane-packages/.github/workflows/supplychain.yml@refs/heads/main\"\n            issuer: \"https://token.actions.githubusercontent.com\"\n            rekor:\n              url: https://rekor.sigstore.dev\n```\n\n----------------------------------------\n\nTITLE: Defining Package Type in Go\nDESCRIPTION: Base Package type definition with metadata, spec, and status fields. Includes kubebuilder annotations for Kubernetes resource configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n// +kubebuilder:object:root=true\n\n// A Package that has been added to Crossplane.\n// +kubebuilder:resource:categories=crossplane\n// +kubebuilder:subresource:status\n// +kubebuilder:printcolumn:name=\"READY\",type=\"string\",JSONPath=\".status.conditionedStatus.conditions[?(@.type=='Ready')].status\"\n// +kubebuilder:printcolumn:name=\"VERSION\",type=\"string\",JSONPath=\".spec.version\"\n// +kubebuilder:printcolumn:name=\"AGE\",type=\"date\",JSONPath=\".metadata.creationTimestamp\"\ntype Package struct {\n  metav1.TypeMeta   `json:\",inline\"`\n  metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n  Spec   PackageSpec   `json:\"spec,omitempty\"`\n  Status PackageStatus `json:\"status,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Resource Operations Interface in Go\nDESCRIPTION: Interface defining core operations for resource handling including object operations, controller-runtime operations, and managed resource client operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\ntype operations interface {\n\t// Resource object operations\n\taddFinalizer()\n\tremoveFinalizer()\n\tisReclaimDelete() bool\n\tgetSpecAttrs() v1alpha1.ResourceSpecAttrs\n\tsetSpecAttrs(*group.ResourceAttrs)\n\tsetStatusAttrs(*group.ResouceAttrs)\n\tsetReady()\n\tfailReconcile(ctx context.Context, reason, msg string) error\n\n\t// Controller-runtime operations\n\tupdateObject(ctx context.Context) error\n\tupdateStatus(ctx context.Context) error\n\tupdateSecret(ctx context.Context) error\n\n\t// Managed Resource Client operations\n\tcreateResource(ctx context.Context, args string) error\n\tdeleteResource(ctx context.Context) error\n\tupdateResource(ctx context.Context, args string) error\n\tgetAttributes(ctx context.Context) (*group.ResourceAttrs, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Global Rate Limiter as Middleware Reconciler in Go\nDESCRIPTION: Due to limitations in controller-runtime, Crossplane implements a global rate limiter as a middleware Reconciler. This applies to all controllers within a provider.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-rate-limiting.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nDue to limitations of controller-runtime (see [issue #857]) the global rate\nlimiter is implemented as a middleware `Reconciler`. See [`reconciler.go`].\n```\n\n----------------------------------------\n\nTITLE: Rendering a Crossplane Composition locally using kubectl crossplane\nDESCRIPTION: Example of a hypothetical kubectl crossplane command to render a Composition locally, similar to 'helm template'. This command would pull Functions, execute them, and output the resulting resources without actual creation in the cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions.md#2025-04-21_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\nkubectl crossplane composition render composition.yaml xr.yaml\n```\n\n----------------------------------------\n\nTITLE: Publishing Connection Details to AWS Secret Manager with Tags\nDESCRIPTION: Example configuration for publishing connection details to AWS Secret Manager with additional tags.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    metadata:\n      tags:\n        environment: production\n    configRef:\n      name: aws-secret-manager-prod\n```\n\n----------------------------------------\n\nTITLE: Check logs of Crossplane stack\nDESCRIPTION: Retrieves logs from a pod associated with the installed Crossplane stack.  This is used for debugging and verifying the stack's behavior.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl logs mystackname-pod-name\"\n\n```\n\n----------------------------------------\n\nTITLE: Updating Protobuf Messages for Function Resource Requests\nDESCRIPTION: The protobuf messages are updated to include new structures for handling additional resource requests by functions. This includes defining new fields for requesting extra resources and defining selectors for these resources. Prerequisites include a basic understanding of protobuf syntax and message structures.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_1\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\nmessage RunFunctionResponse {\n  // Existing fields omitted for brevity\n\n  // Requirements that must be satisfied for this Function to run successfully.\n  Requirements requirements = 5;\n}\n\nmessage Requirements {\n  // Extra resources that this Function requires.\n  // The map key uniquely identifies the group of resources.\n  map<string, ResourceSelector> extra_resources = 1;\n}\n\nmessage ResourceRef {\n  string api_version = 1;\n  string kind = 2;\n  string name = 3;\n}\n\nmessage ResourceSelector {\n  string api_version = 1;\n  string kind = 2;\n\n  // here we would actually want to use a oneof, but due to the need of wrapping\n  // messages, the syntax would become a bit cumbersome, so we'll see how to handle\n  // that at implementation time.\n  optional string match_name = 3;\n  map<string, string> match_labels = 4;\n}\n\nmessage RunFunctionRequest {\n  // Existing fields omitted for brevity\n\n  // Note that extra resources is a map to Resources, plural.\n  // The map key corresponds to the key in a RunFunctionResponse's\n  // extra_resources field. If a Function requests extra resources that\n  // don't exist Crossplane sets the map key to an empty Resources\n  // message to indicate that it attempted to satisfy the request.\n  map<string, Resources> extra_resources = 3;\n}\n\n// Resources just exists because you can't have map<string, repeated google.protobuf.Struct>.\nmessage Resources {\n  repeated google.protobuf.Struct items = 1;\n}\n```\n\n----------------------------------------\n\nTITLE: XR with Environment Config References in YAML\nDESCRIPTION: Example of how EnvironmentConfig references are stored in the XR specification.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: demo.org/v1alpha1\nkind: XExample\nspec:\n  environmentConfigRefs:\n    - name: example-environment\n    - name: other-environment\n    - name: label-environment\n```\n\n----------------------------------------\n\nTITLE: FunctionIO for Setting XR Connection Detail\nDESCRIPTION: Example of a FunctionIO that specifies only a connection detail for the composite resource (XR), showing how functions can make targeted modifications.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: FunctionIO\nobserved: {}  # Omitted for brevity.\ndesired:\n  composite:\n    connectionDetails:\n    - type: FromValue\n      name: username\n      value: admin\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Resource Definition for WordPress Instance\nDESCRIPTION: Command to create a new Custom Resource Definition (CRD) for a WordPress instance in Crossplane using the stack CLI.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\nkubectl crossplane stack crd init WordpressInstance wordpress.samples.stacks.crossplane.io\n```\n\n----------------------------------------\n\nTITLE: Complete Network Configuration for GKE and CloudSQL Integration\nDESCRIPTION: Comprehensive YAML configuration that sets up Network, Subnetwork, CloudSQLInstanceClass, and GKEClusterClass resources to enable private network connectivity between GKE clusters and CloudSQL instances.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: vpc.gcp.crossplane.io/v1alpha1\nkind: Network\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  providerConfigRef:\n    namespace: crossplane-system\n    name: example\n  nameFormat: mycoolnetwork\n  autoCreateSubnetworks: false\n---\napiVersion: vpc.gcp.crossplane.io/v1alpha1\nkind: Subnetwork\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  providerConfigRef:\n    namespace: crossplane-system\n    name: example\n  nameFormat: mycoolsubnetwork\n  network: projects/mycoolproject/global/networks/mycoolnetwork\n  ipCidrRange: 172.16.10.0/24\n  region: us-central1\n  privateIpGoogleAccess: true\n  secondaryIpRanges:\n  - rangeName: pods\n    ipCidrRange: 10.0.0.0/8\n  - rangeName: services\n    ipCidrRange: 172.16.20.0/24\n---\napiVersion: database.gcp.crossplane.io/v1alpha1\nkind: CloudSQLInstanceClass\nmetadata:\n  namespace: crossplane-system\n  name: default-mysqlinstance\nspecTemplate:\n  nameFormat: mycoolname\n  databaseVersion: MYSQL_5_6\n  region: us-central1\n  tier: db-n1-standard-1\n  dataDiskSizeGb: 50\n  dataDiskType: PD_SSD\n  privateNetwork: /projects/mycoolproject/global/networks/mycoolnetwork\n  providerRef:\n    namespace: crossplane-system\n    name: example\n---\napiVersion: database.gcp.crossplane.io/v1alpha1\nkind: GKEClusterClass\nmetadata:\n  namespace: crossplane-system\n  name: default-kubernetescluster\nspecTemplate:\n  clusterVersion: \"1.12\"\n  machineType: n1-standard-2\n  numNodes: 3\n  zone: us-central1-a\n  network: mycoolnetwork\n  subnetwork: mycoolsubnetwork\n  enableIPAlias: true\n  clusterSecondaryRangeName: pods\n  servicesSecondaryRangeName: services\n  providerRef:\n    namespace: crossplane-system\n    name: example\n```\n\n----------------------------------------\n\nTITLE: Defining Base Composition in YAML\nDESCRIPTION: Example of a base Composition resource that defines a PostgreSQL instance configuration in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-revisions.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  compositeTypeRef:\n    apiVersion: database.example.org/v1alpha1\n    kind: CompositePostgreSQLInstance\n  writeConnectionSecretsToNamespace: crossplane-system\n  resources:\n    - name: cloudsqlinstance\n      base:\n        apiVersion: database.gcp.crossplane.io/v1beta1\n        kind: CloudSQLInstance\n        spec:\n          forProvider:\n            databaseVersion: POSTGRES_12\n            region: us-central1\n            settings:\n              tier: db-custom-1-3840\n              dataDiskType: PD_SSD\n      patches:\n        - fromFieldPath: \"spec.parameters.storageGB\"\n          toFieldPath: \"spec.forProvider.settings.dataDiskSizeGb\"\n```\n\n----------------------------------------\n\nTITLE: Nesting Template Stacks for Redis and CachingWebService in YAML\nDESCRIPTION: This YAML snippet demonstrates defining nested templates for Redis and CachingWebService CRDs within a Template Stack. It highlights how a `CachingWebService` references multiple templates for complex resource management. Basic understanding of structure and relationships in YAML files is assumed.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: Stack\nmetadata:\n  name: CachingWebServiceStack\nspec:\n  customresourcedefinitions:\n  - kind: Redis\n    apiVersion: redis.example.org/v1\n  - kind: CachingWebService\n    apiVersion: cachingwebservice.example.org/v1\n  templates:\n    redis.example.org/v1:\n      deployment: |\n        kind: Deployment\n        …\n          containers:\n          - name: redis-controller\n            image: example/redis-controller:{{.spec.redisVersion}}\n    cachingwebservice.example.org/v1:\n      cache: |\n        apiVersion: example.org/v1\n        kind: Redis\n        …\n        spec:\n          redisVersion: \"5\"\n      web: |\n        kind: Deployment\n        …\n          containers:\n          - name: nginx-controller\n            image: example/nginx-controller:{{.spec.nginxVersion}}\n--\napiVersion: example.org/v1\nkind: CachingWebService\nmetadata:\n  name: cacheme\nspec:\n  nginxVersion: \"1.17.4\"\n```\n\n----------------------------------------\n\nTITLE: Accessing Test Cluster Shell\nDESCRIPTION: Commands for executing into the test cluster container and setting up kubectl access\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndocker exec -ti $EARTHLY_CONTAINER_ID buildkit-runc exec -t $RUNC_CONTAINER_ID sh\nkind get clusters\napk add kubectl\n```\n\n----------------------------------------\n\nTITLE: Result Condition Protobuf Definition\nDESCRIPTION: Protobuf definition for Result message type with condition setting capabilities.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_5\n\nLANGUAGE: protobuf\nCODE:\n```\nmessage Result {\n  // Omitted for brevity\n\n  // Optionally update the supplied status condition on all targets.\n  // The result's reason and message will be used in the condition.\n  optional Condition condition = 4;\n}\n\nmessage Condition {\n  // Type of the condition, e.g. DatabaseReady.\n  // 'Ready' and 'Synced' are reserved for use by Crossplane.\n  string type = 1;\n\n  // Status of the condition.\n  Status status = 2;\n\n  // Machine-readable PascalCase reason.\n  string reason = 3;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Vertical Composition in Template Stacks with YAML\nDESCRIPTION: A YAML snippet that explains the concept of vertical composition within Template Stacks. It shows how to define multiple CRDs in a single stack and expresses resources to render for each CRD via a GVK map key, using a Redis stack as an example. Understanding of Kubernetes resources and YAML syntax is required.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nkind: Stack\nmetadata:\n  name: RedisStack\nspec:\n  customresourcedefinitions:\n  - kind: Redis\n    apiVersion: redis.example.org/v1\n  templates:\n    redis.example.org/v1:\n      deployment: |\n          …\n          containers:\n          - name: redis-controller\n            image: example/redis-controller:{{.spec.redisVersion}}\n```\n\n----------------------------------------\n\nTITLE: Composition Configuration with Vault Production Store\nDESCRIPTION: Example of a Composition resource configuring connection details to be published to a Vault production StoreConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsToStoreConfigRef: vault-production\n```\n\n----------------------------------------\n\nTITLE: Configuring AWS Resource Classes for EKS Cluster and RDS Instance in Crossplane\nDESCRIPTION: This YAML configuration defines resource classes for RDSInstance and EKSCluster in AWS using Crossplane. It specifies the parameters for creating standardized MySQL RDS instances and EKS clusters, including security groups, subnets, and other necessary configurations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: database.aws.crossplane.io/v1alpha1\nkind: RDSInstanceClass\nmetadata:\n  name: standard-mysql\n  namespace: crossplane-system\nspecTemplate:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups:\n    - id(my-rds-sg)\n  subnetGroupName: name(my-db-subnet-group)\n  size: 20\n  engine: mysql\n  reclaimPolicy: Delete\n  providerRef:\n    name: aws-provider\n    namespace: crossplane-system\n---\napiVersion: compute.aws.crossplane.io/v1alpha1\nkind: EKSClusterClass\nmetadata:\n  name: standard-cluster\n  namespace: crossplane-system\nspecTemplate:\n  region: eu-west-1\n  roleARN: arn(my-cluster-role)\n  vpcId: id(my-vpc)\n  subnetIds:\n    - id(my-subnet-1)\n  securityGroupIds:\n    - id(my-eks-sg)\n  workerNodes:\n    nodeInstanceType: m3.medium\n    nodeAutoScalingGroupMinSize: 1\n    nodeAutoScalingGroupMaxSize: 1\n    nodeGroupName: demo-nodes\n    clusterControlPlaneSecurityGroup: id(my-eks-sg)\n  reclaimPolicy: Delete\n  providerRef:\n    name: aws-provider\n    namespace: crossplane-system\n---\n```\n\n----------------------------------------\n\nTITLE: Annotating CRD with Crossplane Package Metadata in YAML\nDESCRIPTION: This example shows a Kubernetes CustomResourceDefinition with Crossplane package metadata annotations. The annotations provide information about the package, resource group, and UI schema that help with discovery and identification of Crossplane-managed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.k8s.io/v1beta1\nkind: CustomResourceDefinition\nmetadata:\n  name: mytypes.samples.crossplane.io\n  labels:\n    controller-tools.k8s.io: \"1.0\"\n    app.kubernetes.io/managed-by: package-manager\n  annotations:\n    packages.crossplane.io/package-title: \"Crossplane Sample Stack\"\n    packages.crossplane.io/group-title: \"Title of the Group\"\n    packages.crossplane.io/group-overview: \"Overview of the Group\"\n    packages.crossplane.io/group-overview-short: \"Short overview of the Group\"\n    packages.crossplane.io/group-readme: \"Readme of the Group\"\n    packages.crossplane.io/resource-category: \"Databases\"\n    packages.crossplane.io/resource-title: \"Example Resource\"\n    packages.crossplane.io/resource-title-plural: \"Example Resources\"\n    packages.crossplane.io/resource-overview: \"Overview of the Resource\"\n    packages.crossplane.io/resource-overview-short: \"Short overview of the Resource\"\n    packages.crossplane.io/resource-readme: \"Readme of the Resource\"\n    packages.crossplane.io/icon-data-uri: data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4K\n    packages.crossplane.io/ui-schema: |\n      version: 0.5\n      configSections:\n      - title: Configuration\n        description: Enter information specific to the configuration you wish to create.\n        items:\n        - name: dbReplicas\n          controlType: singleInput\n          type: integer\n          path: .spec.dbReplicas\n          title: DB Replicas\n          description: The number of DB Replicas\n          default: 1\n          validation:\n          - minimum: 1\n          - maximum: 3\n      ---\n      additionalSpec: example\n      stillYaml: true\n      usesSameSpecConvention: \"not necessary\"\n  ownerReferences:\n  - apiVersion: packages.crossplane.io/v1alpha1\n    kind: PackageInstall\n    name: stack-wordpress\n    uid: 1eb30f04-afdf-4282-bfd2-d0fb924f65d9\nspec:\n  group: samples.crossplane.io\n  names:\n    kind: Mytype\n    plural: mytypes\n  scope: Namespaced\n  version: v1alpha1\n```\n\n----------------------------------------\n\nTITLE: Configuring Mutating and Validating Webhooks in Kubernetes\nDESCRIPTION: YAML configuration examples for setting up mutating and validating webhooks in Kubernetes. Includes webhook configurations with admission review versions, client configs, and rule specifications.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-webhooks.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: admissionregistration.k8s.io/v1\nkind: MutatingWebhookConfiguration\nmetadata:\n  name: mutation-config\nwebhooks:\n  - admissionReviewVersions:\n    - v1beta1\n    name: mapplication.kb.io\n    clientConfig:\n      caBundle: ${CA_BUNDLE}\n      service:\n        name: webhook-service\n        namespace: default\n        path: /mutate\n    rules:\n      - apiGroups:\n          - apps\n      - apiVersions:\n          - v1\n        resources:\n          - deployments\n    sideEffects: None\n---\napiVersion: admissionregistration.k8s.io/v1\nkind: ValidatingWebhookConfiguration\nmetadata:\n  name: \"pod-policy.example.com\"\nwebhooks:\n- name: \"pod-policy.example.com\"\n  rules:\n  - apiGroups:   [\"\"]\n    apiVersions: [\"v1\"]\n    operations:  [\"CREATE\"]\n    resources:   [\"pods\"]\n    scope:       \"Namespaced\"\n  clientConfig:\n    service:\n      namespace: \"example-namespace\"\n      name: \"example-service\"\n    caBundle: ${CA_BUNDLE}\n  admissionReviewVersions: [\"v1\", \"v1beta1\"]\n  sideEffects: None\n  timeoutSeconds: 5\n```\n\n----------------------------------------\n\nTITLE: FunctionIO for Deleting a Composed Resource\nDESCRIPTION: Example of a FunctionIO that indicates a composed resource should be deleted by setting its resource field to null.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: FunctionIO\nobserved: {}  # Omitted for brevity.\ndesired:\n  resources:\n  - name: cloudsqlinstance\n    resource: null\n```\n\n----------------------------------------\n\nTITLE: Install kubectl plugin\nDESCRIPTION: Installs a kubectl plugin by downloading it from a specified URL and making it executable. This example specifically shows the installation of the 'kubectl-crossplane-stack-init' plugin.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n\"curl -s -o /usr/local/bin/kubectl-crossplane-stack-init /url/directly/to/the/script/somewhere >/dev/null\"\n\n```\n\n----------------------------------------\n\nTITLE: Creating Kubernetes Cluster Resource Claim\nDESCRIPTION: Example of creating a KubernetesCluster resource claim in Crossplane for managing external cluster resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: KubernetesCluster\nmetadata:\n  name: demo-cluster\n  namespace: my-infra-dev\nspec:\n  writeConnectionSecretToRef:\n    name: demo-cluster-creds\n```\n\n----------------------------------------\n\nTITLE: Comparing Network Resource Schemas in YAML\nDESCRIPTION: This snippet compares the YAML schemas for a Network resource across different implementations: Crossplane Native GCP Provider, a hypothetical provider-jet-gcp, and a possible Crossplane Provider built with DCL.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n# Crossplane Native GCP Provider\napiVersion: compute.gcp.crossplane.io/v1beta1\nkind: Network\nmetadata:\n  name: example\nspec:\n  forProvider:\n    autoCreateSubnetworks: false\n    routingConfig:\n      routingMode: REGIONAL\n\n# Possible provider-jet-gcp, written by looking at TF schema\napiVersion: compute.gcp.crossplane.io/v1beta1\nkind: Network\nmetadata:\n  name: example\nspec:\n  forProvider:\n    autoCreateSubnetworks: false\n    routingConfig:\n      routingMode: REGIONAL\n    deleteDefaultRoutesOnCreate: false # This field is added by Terraform maintainers.\n\n# Possible Crossplane Provider built with DCL\napiVersion: compute.gcp.crossplane.io/v1beta1\nkind: Network\nmetadata:\n  name: example\nspec:\n  forProvider:\n    autoCreateSubnetworks: false\n    routingConfig:\n      routingMode: REGIONAL\n```\n\n----------------------------------------\n\nTITLE: Defining a MySQL Resource Claim in Crossplane\nDESCRIPTION: A sample YAML configuration for a MySQL resource claim that references a resource class. This shows how application developers can request resources without knowing implementation details.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: demo\nspec:\n  classRef:\n    name: standard-mysql\n    namespace: crossplane-system\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Build Crossplane stack\nDESCRIPTION: Builds a Crossplane stack using the kubectl plugin. This command compiles the stack definition and prepares it for publishing or installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl crossplane stack build\"\n\n```\n\n----------------------------------------\n\nTITLE: Using Result Target in Function\nDESCRIPTION: Example of using the targeting functionality in a Composition Function.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\nresponse.Fatal(rsp, errors.New(\"The image provided does not exist or you are not authorized to use it.\")).\n  ConditionFalse(\"ImageReady\", \"NotFound\").\n  TargetCompositeAndClaim()\n```\n\n----------------------------------------\n\nTITLE: Publishing with an Out-of-Tree Secret Plugin - YAML\nDESCRIPTION: Configures a StoreConfig using a plugin for external secret management. This supports extending Crossplane’s secret handling capabilities with alternative plugins.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: secrets.crossplane.io/v1alpha1\nkind: StoreConfig\nmetadata:\n  name: acme-secretstore\nspec:\n  type: Plugin\n  defaultScope: crossplane-system\n  plugin:\n    name: plugin-x\n    endpoint: unix:///tmp/plugin-x.sock\n    config:\n      host: secretstore.acme.org\n      port: 9999\n      caBundle: \"...\"\n      some:\n        other:\n          arbitrary-config: true\n```\n\n----------------------------------------\n\nTITLE: Namespace Annotation for Custom Target Namespace\nDESCRIPTION: Kubernetes namespace configuration with custom target namespace and credentials secret annotation\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: foo\n  annotations:\n    \"agent.crossplane.io/target-namespace\": bar\n```\n\n----------------------------------------\n\nTITLE: Configuring Provider Revision Activation in YAML\nDESCRIPTION: Example showing how to configure provider packages with manual revision activation policy during migration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nrevisionActivationPolicy: Manual\n```\n\n----------------------------------------\n\nTITLE: Configuring Performance Test Parameters in YAML for Crossplane Provider\nDESCRIPTION: YAML configuration for specifying test parameters including experiment name, provider image, metrics to ignore, test count, and cluster type. This allows for flexible and declarative test setup.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-performance-characteristics-of-providers.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: test-experiment\nprovider:\n  image: crossplane/provider-jet-azure:v0.8.0\nmetrics:\n  ignore:\n  - cpu_utilization\n# What is repetition in this context exactly?\ncount: 1\ncluster: Kind | Minikube | Existing\n```\n\n----------------------------------------\n\nTITLE: Defining Workload with Cluster Selector in YAML\nDESCRIPTION: YAML configuration for a Crossplane workload using a cluster selector to target specific clusters based on attributes and labels.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-workload-scheduler.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: test-workload\nspec:\n  clusterSelector:\n    clusterVersion: '1.11.4'\n    cloudProvider: GCP\n    foo: bar\n  resources:\n    - name: demo-mysql\n  targetNamespace: demo\n  targetDeployment:\n  targetService:\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Resource Status Conditions in YAML\nDESCRIPTION: This snippet demonstrates a basic example of defining resource status conditions using JSONPath to access a conditions array. It specifies rules for Online, Offline, and Warning states based on Ready and Synchronized conditions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-status.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Example 1\nresourceStatus:\n  paths:\n    JSONPath: .status.conditionedStatus.conditions\n  states:\n    Online:\n    - Ready: 'True'\n      Synchronized: 'True'\n    Offline:\n    - Ready: 'False'\n      Synchronized: 'False'\n    Warning:\n    - Ready: 'False'\n      Synchronized: 'True'\n      SyncFailure: 'True'\n```\n\n----------------------------------------\n\nTITLE: Defining Rook CockroachDB ClusterClass in Crossplane\nDESCRIPTION: This YAML snippet shows how to create a non-portable Rook CockroachDB ClusterClass that references the ProviderConfig. It includes various configuration options for the CockroachDB cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: cockroachdb.rook.crossplane.io/v1alpha1\nkind: ClusterClass\nmetadata:\n  name: rook-cockroachdb\n  namespace: rook-infra-dev\nspecTemplate:\n  providerConfigRef:\n    name: demo-k8s-provider\n    namespace: my-infra-dev\n  # full documentation on all available settings can be found at:\n  # https://rook.io/docs/rook/master/cockroachdb-cluster-crd.html\n  scope:\n    nodeCount: 3\n    # You can only have one PersistentVolumeClaim in this list!\n    volumeClaimTemplates:\n    - metadata:\n        name: rook-cockroachdb-data\n      spec:\n        accessModes: [ \"ReadWriteOnce\" ]\n        # Uncomment and specify your StorageClass, otherwise\n        # the cluster admin defined default StorageClass will be used.\n        #storageClassName: \"your-cluster-storageclass\"\n        resources:\n          requests:\n            storage: \"1Gi\"\n  network:\n    ports:\n    - name: http\n      port: 8080\n    - name: grpc\n      port: 26257\n  secure: false\n  cachePercent: 25\n  maxSQLMemoryPercent: 25\n  # A key/value list of annotations\n  annotations:\n  #  key: value\n```\n\n----------------------------------------\n\nTITLE: Comparing Resource Definitions Across Provider Implementations\nDESCRIPTION: A YAML example comparing the same ECR Repository resource definition across native provider-aws, Terrajet provider-jet-aws, Cloud Control API input format, and a potential Cloud Control implementation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# Native provider-aws\napiVersion: ecr.aws.crossplane.io/v1alpha1\nkind: Repository\nmetadata:\n  name: example\n  labels:\n    region: us-east-1\nspec:\n  forProvider:\n    region: us-east-1\n    imageScanningConfiguration:\n      scanOnPush: true\n    imageTagMutability: IMMUTABLE\n    tags:\n     - key: key1\n       value: value1\n\n# Terrajet provider-jet-aws\napiVersion: ecr.aws.jet.crossplane.io/v1alpha1\nkind: Repository\nmetadata:\n  name: sample-repository\nspec:\n  forProvider:\n    region: us-east-1\n    imageScanningConfiguration:\n      - scanOnPush: true\n    imageTagMutability: IMMUTABLE\n    tags:\n      key1: value1\n\n# Cloud Control API input\nImageScanningConfiguration:\n  ScanOnPush: true\nImageTagMutability: IMMUTABLE\nRepositoryName: sample-repository # field is marked as identifier in the schema.\n\n# Possible CloudControl Implementation using provided schema\napiVersion: ecr.aws.crossplane.io/v1alpha1\nkind: Repository\nmetadata:\n  name: sample-repository\nspec:\n  forProvider:\n    region: us-east-1\n    imageScanningConfiguration:\n      - scanOnPush: true\n    imageTagMutability: IMMUTABLE\n    tags:\n     - key: key1\n       value: value1\n```\n\n----------------------------------------\n\nTITLE: Creating MySQL Instance Claim\nDESCRIPTION: Creates a MySQL instance claim without specifying a specific class, allowing automatic class resolution through policies\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: demo\nspec:\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Defining Resource Schema Structure Example\nDESCRIPTION: Code snippet showing Terraform schema.ResourceData interface example used in provider implementations. This demonstrates how providers handle resource state and schema definitions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nschema.ResourceData\n```\n\n----------------------------------------\n\nTITLE: Admission Webhook Handler Implementation in Go\nDESCRIPTION: Core logic implementation of the admission webhook handler that validates resource deletion requests.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\nfunc (h *handler) validateNoUsages(ctx context.Context, u *unstructured.Unstructured) admission.Response {\n\tusageList := &v1alpha1.UsageList{}\n\tif err := h.reader.List(ctx, usageList, client.MatchingFields{inUseIndexKey: getIndexValueForObject(u)}); err != nil {\n\t\treturn admission.Errored(http.StatusInternalServerError, err)\n\t}\n\tif len(usageList.Items) > 0 {\n\t\treturn admission.Response{\n\t\t\tAdmissionResponse: admissionv1.AdmissionResponse{\n\t\t\t\tAllowed: false,\n\t\t\t\tResult: &metav1.Status{\n\t\t\t\t\tCode:   int32(http.StatusConflict),\n\t\t\t\t\tReason: metav1.StatusReason(fmt.Sprintf(\"The resource is used by %d resource(s), including %s/%s\", len(usageList.Items), usageList.Items[0].Spec.By.Kind, usageList.Items[0].Spec.By.Name)),\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t}\n\treturn admission.Allowed(\"\")\n}\n```\n\n----------------------------------------\n\nTITLE: Composition with Environment Configuration in YAML\nDESCRIPTION: Example showing how to reference EnvironmentConfig resources in a Composition using direct references and label selectors.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1\nkind: Composition\nmetadata:\n  name: example\nspec:\n  environment:\n    environmentConfigs:\n    - type: Reference\n      reference:\n        name: example-environment\n    - type: Reference\n      reference:\n        name: other-environment\n    - type: Selector\n      selector: \n      - matchLabels:\n        - type: FromCompositeFieldPath\n          key: stage\n          valueFromFieldPath: spec.parameters.stage\n        - type: Value\n          key: my-label\n          value: metadata.labels[my-label]\n    patches:\n    - type: FromCompositeFieldPath\n      fromFieldPath: spec.widgets\n      toFieldPath: widgets.count\n    - type: FromEnvironmentFieldPath\n      fromFieldPath: spec.widgets\n      toFieldPath: widgets.count\n```\n\n----------------------------------------\n\nTITLE: Implementing ignoreChanges in Upjet's WriteMainTF Method for Terraform Providers\nDESCRIPTION: Code snippet showing how to modify Upjet's WriteMainTF method to transfer the spec.ignoreChanges field into Terraform's ignore_changes lifecycle configuration. This enables managed resources to specify fields that should be ignored during updates.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n// WriteMainTF writes the content main configuration file that has the desired\n// state configuration for Terraform.\nfunc (fp *FileProducer) WriteMainTF() error {\n\n    fp.parameters[\"lifecycle\"] = map[string]interface{}{\n        // If the resource is in a deletion process, we need to remove the\n        // deletion protection.\n        \"prevent_destroy\": !meta.WasDeleted(fp.Resource),\n        // Add fields which should be ignored on updates.\n        \"ignore_changes\": fp.Resource.GetIgnored(),\n    }\n...\n```\n\n----------------------------------------\n\nTITLE: Defining ConnectionSecretStore Interface in Go\nDESCRIPTION: Implements a Go interface for managing secret stores within Crossplane, allowing for operations like publish, unpublish, and fetch of connection details.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_13\n\nLANGUAGE: go\nCODE:\n```\ntype ConnectionSecretStore interface {\n\tConnectionDetailsPublisher\n\tConnectionDetailsFetcher\n}\n\ntype ConnectionDetailsPublisher interface {\n\tPublishConnection(ctx context.Context, p ConnectionSecretPublisher, c managed.ConnectionDetails) error\n\tUnpublishConnection(ctx context.Context, p ConnectionSecretPublisher, c managed.ConnectionDetails) error\n}\n\ntype ConnectionDetailsFetcher interface {\n\tFetchConnectionDetails(ctx context.Context, p ConnectionSecretPublisher) (managed.ConnectionDetails, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Defining RDS Instance Resource Class in Crossplane\nDESCRIPTION: Configures an AWS RDS instance class with specific database parameters, security groups, and provider references\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.aws.crossplane.io/v1alpha1\nkind: RDSInstanceClass\nmetadata:\n  name: standard-mysql\n  namespace: crossplane-system\nspecTemplate:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups:\n    - sg-ab1cdefg\n    - sg-05adsfkaj1ksdjak\n  size: 20\n  providerRef:\n    name: aws-provider\n  reclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Defining Workload with Cluster Affinity in YAML\nDESCRIPTION: YAML configuration for a Crossplane workload using cluster affinity to constrain eligible clusters based on labels and expressions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-workload-scheduler.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: test-workload\nspec:\n  affinity:\n    clusterAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        clusterSelectorTerms:\n        - matchExpressions:\n          - key: crossplane.io/provider\n            operator: In\n            values:\n            - aws\n      preferredDuringSchedulingIgnoredDuringExecution:\n      - weight: 1\n        preference:\n          matchExpressions:\n          - key: another-cluster-label-key\n            operator: In\n            values:\n            - another-cluster-label-value\n  resources:\n    - name: demo-mysql\n  targetNamespace: demo\n  targetDeployment:\n  targetService:\n```\n\n----------------------------------------\n\nTITLE: Creating ResourceClass in Crossplane YAML\nDESCRIPTION: This YAML snippet demonstrates how to create a ResourceClass in Crossplane, specifying parameters for an AWS S3 bucket and setting a reclaim policy.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-reclaim-policy.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: ResourceClass\nmetadata:\n  name: standard-aws-bucket\n  namespace: crossplane-system\n  annotations:\n    resource: bucket.storage.crossplane.io/v1alpha1\nparameters:\n  versioning: \"false\"\n  cannedACL: private\n  localPermission: ReadWrite\n  region: REGION\nprovisioner: s3bucket.storage.aws.crossplane.io/v1alpha1\nproviderRef:\n  name: demo-aws\nreclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Defining Usage Relationship in Crossplane YAML\nDESCRIPTION: Example of defining a Usage resource to establish a relationship between a Helm Release and an EKS Cluster. This prevents the Cluster from being deleted while the Release exists.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Usage\nmetadata:\n  name: release-uses-cluster\nspec:\n  reason: \"Release uses Cluster\"\n  of:\n    apiVersion: eks.upbound.io/v1beta1\n    kind: Cluster\n    resourceRef:\n      name: my-cluster\n  by:\n    apiVersion: helm.crossplane.io/v1beta1\n    kind: Release\n    resourceRef:\n      name: my-prometheus-chart\n```\n\n----------------------------------------\n\nTITLE: Composition Logic in Crossplane Function Composer\nDESCRIPTION: A simplified implementation showing how Crossplane's Function Composer handles composition using a context that includes the in-memory environment. The environment is passed through the function pipeline.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment-beta.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n// simplified logic implemented by composite.FunctionComposer\nfunc compose(composition, xr) {\n\t// build the initial context, embedding the initial in-memory environment at a well-known key\n\tcontext := map[well]any{\n\t\t\"apiextensions.crossplane.io/environment\": buildInitialEnvironment(composition)\n\t}\n\n\t// run the function pipeline, feeding the env\n\tfor _, function := range composition.spec.pipeline {\n\t\t\tcontext = function.run(context, xr)\n\t}\n\n\t// context (and so the embedded environment) is now discarded\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Terraform Diff Example\nDESCRIPTION: Reference to custom diff implementation in Terraform providers that enables resource-specific comparison logic.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\ncustom-diff-example\n```\n\n----------------------------------------\n\nTITLE: Defining Kustomization File\nDESCRIPTION: This YAML defines a standard Kustomization file that lists the resources to be included. In this case, it includes the 'gcp' directory, which likely contains other Kustomization files and resource definitions.  This file is intended to work with kustomize directly to customize the resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n\"resources:\n- gcp\"\n```\n\n----------------------------------------\n\nTITLE: Helper Function to Unset Ignored Fields for Non-Upjet Providers\nDESCRIPTION: Draft implementation of a helper function for crossplane-runtime that unsets fields specified in ignoreChanges. This function uses fieldpath to delete specified fields from the managed resource before updating, allowing provider maintainers to implement the feature consistently.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\nfunc UnsetIgnored(managed resource.Managed) error {\n\tp, err := PaveObject(managed)\n\tif err != nil {\n\t\treturn err\n\t}\n\t\n\tfor _, s := range managed.GetIgnored() {\n\t\terr = p.DeleteField(s)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\treturn nil\n}\n```\n\n----------------------------------------\n\nTITLE: Running Kubectl with Custom Discovery Client Parameters\nDESCRIPTION: This command uses a Docker image to run kubectl with custom token bucket rate limiter parameters for the discovery client.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --rm -v ~/.kube/config:/.kube/config ulucinar/kubectl-tbrl:v1.24.0-alpha.3.245 --discovery-burst=400 --discovery-avg-rate=50.0 get nodes\n```\n\n----------------------------------------\n\nTITLE: Environment Patching Examples in YAML\nDESCRIPTION: Examples of patching to and from the environment using various patch types including FromEnvironmentFieldPath and CombineFromEnvironment.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-environment.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n- type: FromEnvironmentFieldPath\n  fromFieldPath: key\n  toFieldPath: spec.forProvider.manifest.data.key\n- type: CombineFromEnvironment\n  combine:\n    variables:\n      - fromFieldPath: key\n      - fromFieldPath: key\n  toFieldPath: spec.forProvider.manifest.data.key\n```\n\n----------------------------------------\n\nTITLE: Configuring Kubernetes Provider for External Cluster\nDESCRIPTION: Setup for managing Kubernetes resources in an external cluster using custom credentials and ProviderConfig.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: demo-cluster-creds\n  namespace: my-infra-dev\ntype: Opaque\ndata:\n  endpoint: MY_K8S_ENDPOINT\n  username: MY_K8S_USERNAME\n  password: MY_K8S_PASSWORD\n  clusterCA: MY_K8S_CLUSTER_CA\n  clientCert: MY_K8S_CLIENT_CERT\n  clientKey: MY_K8S_CLIENT_KEY\n  token: MY_K8S_TOKEN\n---\napiVersion: kubernetes.crossplane.io/v1beta1\nkind: ProviderConfig\nmetadata:\n  name: demo-k8s-provider\n  namespace: my-infra-dev\nspec:\n  credentialsSecretRef:\n    name: demo-cluster-creds\n```\n\n----------------------------------------\n\nTITLE: Defining Representation Interfaces in Go\nDESCRIPTION: Definition of interfaces for translating between resource.Managed and cty.Value (Terraform's native serialization format) in Go.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_3\n\nLANGUAGE: Go\nCODE:\n```\ntype TerraformRepresentation interface {\n    RepresentationFromTerraform(ctx context.Context, diff *terraform.InstanceDiff, state *terraform.InstanceState, config map[string]interface{}) (resource.Managed, error)\n}\n\ntype CrossplaneRepresentation interface {\n    RepresentationFromCrossplane(ctx context.Context, mg resource.Managed) (cty.Value, error)\n}\n```\n\n----------------------------------------\n\nTITLE: MySQL Instance Policy with Provider Reference\nDESCRIPTION: Demonstrates a potential future state of policy objects that can specify default provider behavior\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstancePolicy\nmetadata:\n  name: mysql-aws-policy\n  namespace: crossplane-system\ndefaultClassRef:\n  kind: RDSInstanceClass\n  apiVersion: database.aws.crossplane.io/v1alpha1\n  name: standard-mysql\n  namespace: crossplane-system\ndefaultProviderRef:\n  kind: Provider\n  apiVersion: aws.crossplane.io/v1alpha1\n  name: my-aws-account\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Defining Workload with Inter-Workload Affinity and Anti-affinity in YAML\nDESCRIPTION: YAML configuration for a Crossplane workload using inter-workload affinity and anti-affinity to constrain scheduling based on other workloads.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-workload-scheduler.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: front-end\nspec:\n  affinity:\n   workloadAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n      - labelSelector:\n          matchExpressions:\n          - key: app\n            operator: In\n            values:\n            - back-end\n        topologyKey: crossplane.io/kubernetes\n    workloadAntiAffinity:\n      preferredDuringSchedulingIgnoredDuringExecution:\n      - weight: 100\n        workloadAffinityTerm:\n          labelSelector:\n            matchExpressions:\n            - key: app\n              operator: In\n              values:\n              - frontend\n          topologyKey: crossplane.io/kubernetes\n  resources:\n    - name: demo-mysql\n  targetNamespace: demo\n  targetDeployment:\n  targetService:\n```\n\n----------------------------------------\n\nTITLE: Validate Crossplane stack installation\nDESCRIPTION: Validates the installation of a Crossplane stack by applying sample instance configurations. This ensures that the stack is functioning as expected and can handle instance creation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl apply -f config/samples/*instance.yaml\"\n\n```\n\n----------------------------------------\n\nTITLE: Defining Provider API Object with Embedded Struct in Go\nDESCRIPTION: This code snippet demonstrates the structure of a provider API object with an embedded struct containing both configurable and non-configurable fields. It serves as an example of how provider APIs may represent resources with mixed field types.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// This is the provider's representation of the API object\ntype ProviderAPIObject struct {\n  // Configurable field in top-level object\n  FieldOne *string `json:\"fieldOne,omitempty\"`\n\n  // Non-Configurable field in top-level object\n  FieldTwo *string `json:\"fieldTwo,omitempty\"`\n  \n  // Embedded struct in top-level object\n  EmbeddedStructOne *EmbeddedStruct `json:\"embeddedStructOne,omitempty\"`\n}\n\ntype EmbeddedStruct struct {\n  // This field is configurable so it should be in spec.forProvider\n  SomeConfigurableField *string `json:\"someConfigurableField,omitempty\"`\n\n  // This field is configurable so it should be in spec.forProvider\n  AnotherConfigurableField *string `json:\"anotherConfigurableField,omitempty\"`\n\n  // This field is not configurable so it should be in status.atProvider\n  SomeNonConfigurableField string `json:\"someNonConfigurableField,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Completing Secret Management Interfaces in Go\nDESCRIPTION: Additional Go types for publishing and configuring secrets, including methods for setting and getting secret configurations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_14\n\nLANGUAGE: go\nCODE:\n```\ntype ConnectionSecretPublisher interface {\n\tObject\n\n\tConnectionSecretPublisherTo\n}\n\ntype ConnectionSecretPublisherTo interface {\n\tSetPublishConnectionSecretTo(c *xpv1.ConnectionSecretConfig)\n\tGetPublishConnectionSecretTo() *xpv1.ConnectionSecretConfig\n}\n\ntype ConnectionSecretConfig struct {\n\tName string `json:\"name\"`\n\tMetadata map[string]any `json:\"metadata\"`\n\tConfigRef *SecretStoreConfig `json:\"configRef\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Test CRDs with Custom Properties - Go\nDESCRIPTION: Command to generate test CRDs with 5000 OpenAPI v3 schema properties for performance testing. Used to analyze heap space allocation and API server resource consumption patterns.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/ulucinar/terrajet-scale/cmd/apigen generate -g 200 -c 200 --property-count 5000\n```\n\n----------------------------------------\n\nTITLE: Deleting Crossplane Solution\nDESCRIPTION: Command to delete a Crossplane solution and its associated resources using kubectl.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nkubectl delete -f <directory of YAML>\n```\n\n----------------------------------------\n\nTITLE: Example Managed Resource with GenerateName\nDESCRIPTION: Demonstrates how to use GenerateName for creating a managed resource with a unique name based on the claim's namespace and name.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.gcp.crossplane.io/v1alpha2\nkind: CloudSQLInstance\nmetadata:\n  generateName: myappnamespace-mydatabase-\n```\n\n----------------------------------------\n\nTITLE: Map Transform Function in Crossplane\nDESCRIPTION: Example of using map transform function to convert region values between different cloud provider formats.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\npatches:\n- fromFieldPath: \"spec.region\"\n  toFieldPath: \"spec.forProvider.location\"\n  transforms:\n  - type: map\n    map:\n      us-west: \"West US 2\"\n      us-east: \"East US 1\"\n```\n\n----------------------------------------\n\nTITLE: Defining Advanced Resource Status Conditions in YAML\nDESCRIPTION: This snippet shows a more complex example of defining resource status conditions. It includes custom conditions, overrides, and detailed condition properties. It demonstrates how to handle various scenarios and combine multiple conditions for determining resource states.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-status.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# Example 2\nresourceStatus:\n  paths:\n    JSONPath: .status.conditionedStatus.conditions # Example 2a\n    customConditions: # Example 2b\n      Ready:\n        JSONPath: .status.conditionedStatus.conditions[?(@.type=='Ready')]\n      Synchronized:\n        JSONPath: .status.conditionedStatus.conditions[?(@.type=='Synchronized')]\n      SyncFailure:\n        JSONPath: .status.conditionedStatus.conditions[?(@.type=='SyncFailure')] # Example 2c\n        customConditionProps: # Example 2d\n          status: .status.someRandomStatuses.SyncFailure.value\n          message: .status.someRandomStatuses.SyncFailure.text\n          lastTransitionTime: .status.someRandomStatuses.SyncFailure.updatedTime\n  states:\n    Online:\n    - Ready: True\n      Synchronized: True\n      SyncFailure: False\n    - Ready: True\n      Synchronized: True\n      SyncFailure: not 'True'\n    Offline:\n    - Ready: False\n      Synchronized: False\n    - Ready: True\n      Synchronized: not 'True'\n      SyncFailure: True\n    Warning:\n    - Ready: 'False'\n      Synchronized: 'True'\n      SyncFailure: 'True'\n```\n\n----------------------------------------\n\nTITLE: Resource Claim Using Default Class in Crossplane\nDESCRIPTION: A sample YAML configuration for a MySQL resource claim that relies on a default resource class, allowing for simplified resource provisioning without explicit class references.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: demo\nspec:\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane Package Using ClusterPackageInstall CRD\nDESCRIPTION: This YAML snippet demonstrates how to install a Crossplane package at the cluster scope using the ClusterPackageInstall CRD. It specifies the package source, name, and version.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: packages.crossplane.io/v1alpha1\nkind: ClusterPackageInstall\nmetadata:\n  name: gcp-from-package\nspec:\n  source: registry.crossplane.io\n  package: crossplane/provider-gcp:v0.1.0\nstatus:\n  conditions:\n  - type: Ready\n    status: \"True\"\n```\n\n----------------------------------------\n\nTITLE: Reverting Go Module Workaround for Crossplane Provider\nDESCRIPTION: This shell script demonstrates how to revert the temporary workaround by consuming the latest Crossplane Runtime, updating dependencies, and regenerating the code.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ngo mod edit -dropreplace=github.com/crossplane/crossplane-runtime\ngo get github.com/crossplane/crossplane-runtime@master\ngo mod tidy\nmake generate\n```\n\n----------------------------------------\n\nTITLE: Defining Resource Classes for Redis Instances\nDESCRIPTION: These YAML snippets define resource classes for Redis instances on GCP and Azure. Each class includes labels that describe the capabilities and configurations it offers, such as engine version and geographic region, aiding in resource claim matching.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-simple-class-selection.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: cache.gcp.crossplane.io/v1alpha2\nkind: CloudMemorystoreInstanceClass\nmetadata:\n  name: gcp-dev\n  labels:\n    engineVersion: \"3.2\"\n    region: us-west\n    replicated: \"true\"\nspecTemplate:\n  tier: STANDARD_HA\n  region: us-west2\n  memorySizeGb: 1\n  redisVersion: REDIS_3_2\n```\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: cache.azure.crossplane.io/v1alpha2\nkind: RedisClass\nmetadata:\n  name: azure-dev\n  labels:\n    engineVersion: \"3.2\"\n    region: us-west\n    replicated: \"true\"\nspecTemplate:\n  resourceGroupName: group-westus-1\n  location: West US\n  sku:\n    name: Basic\n    family: C\n    capacity: 0\n```\n\n----------------------------------------\n\nTITLE: Creating Portable PostgreSQLInstanceClass in Crossplane\nDESCRIPTION: This YAML snippet demonstrates how to create a portable PostgreSQLInstanceClass that references the previously defined ClusterClass for CockroachDB.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstanceClass\nmetadata:\n  name: postgresql-standard\n  namespace: app-project1-dev\nclassRef:\n  kind: ClusterClass\n  apiVersion: cockroachdb.rook.crossplane.io/v1alpha1\n  name: rook-cockroachdb\n  namespace: rook-infra-dev\n```\n\n----------------------------------------\n\nTITLE: Defining Implementation Struct in Go\nDESCRIPTION: Definition of the Implementation struct in Go, which holds the set of interfaces for resource-specific plugin code.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_4\n\nLANGUAGE: Go\nCODE:\n```\ntype Implementation struct {\n    ResourceMerger\n    ReconcilerConfigurer\n    TerraformRepresentation\n    CrossplaneRepresentation\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Default Values for CRD in YAML\nDESCRIPTION: The snippet shows how to define default values for a Custom Resource Definition (CRD) in Kubernetes using YAML. It specifies a `Breakfast` resource with a default `coffeeCreamer` value using the CRD defaulting feature in Kubernetes. This example assumes existing access and the ability to modify Kubernetes API resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: \"apiextensions.k8s.io/v1beta1\"\nkind: \"CustomResourceDefinition\"\nmetadata:\n  name: \"breakfast.example.crossplane.io\"\nspec:\n  group: \"example.crossplane.io\"\n  version: \"v1alpha1\"\n  scope: \"Namespaced\"\n  names:\n    plural: \"breakfasts\"\n    singular: \"breakfast\"\n    kind: \"Breakfast\"\n  validation:\n    openAPIV3Schema:\n      required: [\"spec\"]\n      properties:\n        spec:\n          required: [\"coffeeCreamer\"]\n          properties:\n            coffeeCreamer:\n              type: \"string\"\n              default: \"none\"\n```\n\n----------------------------------------\n\nTITLE: Defining Kubernetes Application with Parent Labels in YAML\nDESCRIPTION: Example of a KubernetesApplication YAML resource, demonstrating the parent labels that establish its relationship with the WordpressInstance resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesApplication\nmetadata:\n  name: wordpress-app-wordpress\n  labels:\n    stack: sample-stack-wordpress\n    core.crossplane.io/parent-kind: \"WordpressInstance\"\n    core.crossplane.io/parent-group: \"wordpress.samples.stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-name: \"my-wordpressinstance\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n    app.kubernetes.io/managed-by: stack-manager\n...\n```\n\n----------------------------------------\n\nTITLE: Positioning of Function's Deployment in Crossplane\nDESCRIPTION: The specification clarifies that a Function should not assume its deployment context, indicating it may not be in the same cluster or have network access.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition-functions-extra-resources.md#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nA Function MUST NOT assume it is deployed in any particular way, for example\nthat it is running as a Kubernetes Pod in the same cluster as Crossplane.\n\nA Function MUST NOT assume it has network access. A Function SHOULD fail\ngracefully if it needs but does not have network access, for example by\nreturning a Fatal result.\n```\n\n----------------------------------------\n\nTITLE: Example of Potential HelmComposition Extension\nDESCRIPTION: Conceptual example of a possible future extension point for Crossplane that would allow using Helm charts as a composition mechanism, showing how values from a custom resource could be mapped to Helm values.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-composition.md#2025-04-21_snippet_20\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: HelmComposition\nmetadata:\n  name: legacy-wordpress-chart\nspec:\n  from:\n    apiVersion: apps.example.org/v1alpha1\n    kind: Wordpress\n  to:\n    chart:\n      source: git\n      git:\n        url: https://github.com/crossplane/app-wordpress\n        path: helm-chart\n    values:\n    - fromFieldPath: \"spec.image\"\n      toValue: \"image\"\n    - fromFieldPath: \"spec.provisionPolicy\"\n      toValue: \"provisionPolicy\"\n```\n\n----------------------------------------\n\nTITLE: Creating a Structured E2E Test in Go for Crossplane\nDESCRIPTION: Example implementation of a Crossplane E2E test following project guidelines. Shows how to structure a test using features, labels, setup, assessment, and teardown phases within the e2e-framework pattern.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\npackage e2e\n\nimport \"sigs.k8s.io/e2e-framework/pkg/features\"\n\n// ...\n\n// TestSomeFeature ...\nfunc TestSomeFeature(t *testing.T) {\n   manifests := \"test/e2e/manifests/pkg/some-area/some-feature\"\n   namespace := \"some-namespace\"\n   // ... other variables or constants ...\n\n   environment.Test(t,\n      features.NewWithDescription(t.Name(), ...).         WithLabel(LabelArea, ...).         WithLabel(LabelSize, ...).         WithLabel(config.LabelTestSuite, config.TestSuiteDefault).         // ...         WithSetup(\"ReadyPrerequisites\", ...).         // ... other setup steps ...         AssessWithDescription(\"DoSomething\", ...).         AssessWithDescription(\"SomethingElseIsInSomeState\", ...).         // ... other assess steps ...         WithTeardown(\"DeleteCreatedResources\", ...).         // ... other teardown steps ...         Feature(),\n   )\n}\n\n// ...\n```\n\n----------------------------------------\n\nTITLE: Creating MySQL Instance Policy in Crossplane\nDESCRIPTION: Defines a namespace-scoped policy that specifies a default resource class for MySQL instance claims\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstancePolicy\nmetadata:\n  name: mysql-aws-policy\n  namespace: demo\ndefaultClassRef:\n  kind: RDSInstanceClass\n  apiVersion: database.aws.crossplane.io/v1alpha1\n  name: standard-mysql\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Executing Unit Tests in GitHub Actions CI for Go Functions\nDESCRIPTION: This YAML snippet defines a GitHub Actions job for running unit tests on a Go-based Composition Function. It sets up the Go environment, checks out the code, and runs the tests using the standard Go test command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-composition-function-build-tooling.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\njobs:\n  unit-test:\n    runs-on: ubuntu-22.04\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup Go\n        uses: actions/setup-go@v4\n        with:\n          go-version: ${{ env.GO_VERSION }}\n\n      - name: Run Unit Tests\n        run: go test -v -cover ./...\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Crossplane using Helm\nDESCRIPTION: This snippet shows the command to uninstall the Crossplane deployment from the Kubernetes cluster. It cleans up all components associated with Crossplane in the specified namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_2\n\nLANGUAGE: console\nCODE:\n```\nhelm delete crossplane --namespace crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Defining WordpressCluster InfrastructureDefinition in Crossplane YAML\nDESCRIPTION: This snippet defines an InfrastructureDefinition for WordpressCluster, specifying the CRD structure and validation schema for the composite resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: InfrastructureDefinition\nmetadata:\n  name: wordpressclusters.apps.example.org\nspec:\n  crdSpecTemplate:\n    group: apps.example.org\n    version: v1alpha1\n    names:\n      kind: WordpressCluster\n      listKind: WordpressClusterList\n      plural: wordpressclusters\n      singular: wordpresscluster\n    validation:\n      openAPIV3Schema:\n        type: object\n        properties:\n          spec:\n            type: object\n            properties:\n              parameters:\n                type: object\n                properties:\n                  version:\n                    type: string\n                  storageGB:\n                    type: integer\n                  blogName:\n                    type: string\n                required:\n                  - version\n                  - storageGB\n                  - blogName\n            required:\n              - parameters\n```\n\n----------------------------------------\n\nTITLE: Claim Status Examples\nDESCRIPTION: Examples of different Claim status conditions in various scenarios.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nstatus:\n  conditions:\n  - type: DatabaseReady\n    status: True\n    reason: Available\n  - type: ImageReady\n    status: True\n    reason: Available\n  - type: AppReady\n    status: True\n    reason: Available\n```\n\n----------------------------------------\n\nTITLE: Implementing ReconcilerConfigurer Interface in Go\nDESCRIPTION: Example of implementing the ReconcilerConfigurer interface in Go, used for initialization and registration of the Reconciler.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_2\n\nLANGUAGE: Go\nCODE:\n```\ntype ReconcilerConfigurer interface {\n    Configure(ctx context.Context, cm *manager.ControllerManager, mg resource.Managed) error\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying KubernetesApplication Scheduling Controller\nDESCRIPTION: This code snippet describes modifying the KubernetesApplication scheduling controller to list KubernetesTarget resources instead of KubernetesCluster claims.  The controller is updated to reference a local Secret with connection information via the KubernetesTarget resource, thus allowing scheduling to various resource types.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-consuming-k8s-clusters.md#2025-04-21_snippet_3\n\nLANGUAGE: Text\nCODE:\n```\n\"The next step would be to modify the `KubernetesApplication` [scheduling\ncontroller] to list `KubernetesTarget` resources in the namespace that match\nlabels, instead of the current implementation that lists `KubernetesCluster`\nclaims. Currently, this controller sets a reference to a `KubernetesCluster`\nclaim, which is then later propagated to the child\n`KubernetesApplicationResource` objects, which use it to get a `Secret` with\n[remote cluster connection information]. The same process can be achieved when\nreferencing a `KubernetesTarget` resource with a reference to a local `Secret`\nwith connection information. Because a `KubernetesApplication` is now being\nscheduled to something other than a `KubernetesCluster` claim (and may be\nscheduled to other resource types in the future), updating the `clusterRef`\nfield to be named `targetRef` and `clusterSelector` to `targetSelector` would be\nmore clear. This is the only API change proposed by this design and will result\nin the increment of the `KubernetesApplication` `apiVersion` from `v1alpha1` to\n`v1alpha2`.\"\n```\n\n----------------------------------------\n\nTITLE: Make kubectl plugins executable\nDESCRIPTION: Sets execute permissions for all kubectl-crossplane-* plugins located in /usr/local/bin. This command is essential to enable the plugins to be executed after they are downloaded.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n\"chmod +x /usr/local/bin/kubectl-crossplane-*\"\n\n```\n\n----------------------------------------\n\nTITLE: Defining PermissionsSpec Structure in Go\nDESCRIPTION: Defines the PermissionsSpec struct which specifies the permissions that a package will require to operate. It includes a list of RBAC policy rules.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_14\n\nLANGUAGE: go\nCODE:\n```\ntype PermissionsSpec struct {\n  Rules []rbac.PolicyRule `json:\"rules,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Hello World Custom Resource in YAML\nDESCRIPTION: Creates a Hello World custom resource instance with a name specification.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: helloworld.crossplane.example.com\nkind: HelloWorld\nmetadata:\n  name: world\nspec:\n  name: \"World\"\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Browse ClusterRole in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-browse' ClusterRole, which allows read-only access to composite resources and compositions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-browse\nrules:\n# Crossplane browsers have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane browsers have read-only access to compositions and XRDs. This\n# allows them to discover and select an appropriate composition when creating a\n# resource claim.\n- apiGroups:\n  - apiextensions.crossplane.io\n  resources: [\"*\"]\n  verbs: [get, list, watch]\n# Crossplane browsers have read-only access to all of the composite resources it\n# defines. This allows them to claim a statically provisioned composite\n# resource.\n- apiGroups: [xr.example.org]\n  resources:\n  - examplecomposites\n  verbs: [get, list, watch]\n```\n\n----------------------------------------\n\nTITLE: Admission Webhook Configuration in YAML\nDESCRIPTION: YAML configuration for the admission webhook that intercepts DELETE requests for resources marked as in-use.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nwebhooks:\n- name: nousages.apiextensions.crossplane.io\n  objectSelector:\n    matchLabels:\n      crossplane.io/in-use: true\n  rules:\n  - operations: [\"DELETE\"]\n    apiGroups: [\"*\"]\n    apiVersions: [\"*\"]\n    resources: [\"*\"]\n    scope: \"*\"\n```\n\n----------------------------------------\n\nTITLE: MySQL Instance Claim with Explicit Class Reference\nDESCRIPTION: Creates a MySQL instance claim with an explicit reference to a specific resource class\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: demo\nspec:\n  classRef:\n    kind: RDSInstanceClass\n    apiVersion: database.aws.crossplane.io/v1alpha1\n    name: standard-mysql\n    namespace: crossplane-system\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Defining Coffee Resource with Inline Template Variables in YAML\nDESCRIPTION: This snippet illustrates how to define a `Coffee` resource using an inline handlebar template variable `{{.coffeeCreamer}}`. It exemplifies how an application owner can parameterize a single resource within a complex set of YAML resources. No additional libraries are required, but familiarity with handlebar templates in YAML is essential. The snippet takes `coffeeCreamer` as a dynamic input and updates the resource specification accordingly.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: template.stacks.example.org/v1alpha1\nkind: Coffee\nmetadata:\n  name: delicious\nspec:\n  creamer: {{.coffeeCreamer}}\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane with Values File in Helm\nDESCRIPTION: This command installs Crossplane using Helm with configuration specified in a values.yaml file. This approach is useful when you need to configure multiple parameters.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_4\n\nLANGUAGE: console\nCODE:\n```\nhelm install crossplane --namespace crossplane-system crossplane-stable/crossplane -f values.yaml\n```\n\n----------------------------------------\n\nTITLE: Accessing Resources with Index Function\nDESCRIPTION: Example demonstrating how to access composed resources and environment variables using the index function.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-function-go-templating.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n{{- range $i := until ( .observed.composite.resource.spec.count | int ) }}\n---\napiVersion: iam.aws.upbound.io/v1beta1\nkind: User\nmetadata:\n  annotations:\n    gotemplating.fn.crossplane.io/composition-resource-name: test-user-{{ $i }}\n  name: test-user-{{ $i }}\n  labels:\n    testing.upbound.io/example-name: test-user-{{ $i }}\n  {{ if eq $.observed.resources nil }}\n    dummy: {{ randomChoice \"foo\" \"bar\" \"baz\" }}\n  {{ else }}\n    dummy: {{ ( index $.observed.resources ( print \"test-user-\" $i ) ).resource.metadata.labels.dummy }}\n  {{ end }}\n    env: {{ (index $.context \"apiextensions.crossplane.io/environment\").key1 }}\nspec:\n  forProvider: {}\n{{- end }}\n```\n\n----------------------------------------\n\nTITLE: Implementing KubernetesTarget with ConnectionSecretRef in Crossplane YAML\nDESCRIPTION: Example of a KubernetesTarget resource that directly references a local Secret containing connection information for a Kubernetes cluster. This enables 'Bring Your Own Cluster' scenarios where clusters not managed by Crossplane can be deployment targets.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-consuming-k8s-clusters.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesTarget\nmetadata:\n  namespace: my-app-team\n  name: enable-dev-k8s\n  labels:\n    env: dev\nspec:\n  connectionSecretRef:\n    name: my-k8s-connection\n```\n\n----------------------------------------\n\nTITLE: Updated MySQLInstance Claim Controller in Go\nDESCRIPTION: This snippet shows the revised version of the MySQLInstance claim reconciler that accommodates both portable and non-portable class types, enhancing the original implementation to support the new class structure.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\n// SetupWithManager adds a controller that reconciles MySQLInstance instance claims.\nfunc (c *MySQLInstanceClaimController) SetupWithManager(mgr ctrl.Manager) error {\n  r := resource.NewClaimReconciler(mgr,\n    resource.ClaimKind(databasev1alpha1.MySQLInstanceGroupVersionKind),\n    resource.ClassKinds{Portable: databasev1alpha1.MySQLInstanceGroupVersionKind, NonPortable: v1alpha1.RDSInstanceClassGroupVersionKind},\n    resource.ManagedKind(v1alpha1.RDSInstanceGroupVersionKind),\n    resource.WithManagedConfigurators(\n      resource.ManagedConfiguratorFn(ConfigureMyRDSInstance),\n      resource.NewObjectMetaConfigurator(mgr.GetScheme()),\n    ))\n\n  name := strings.ToLower(fmt.Sprintf(\"%s.%s\", databasev1alpha1.MySQLInstanceKind, controllerName))\n\n  return ctrl.NewControllerManagedBy(mgr).\n    Named(name).\n    Watches(&source.Kind{Type: &v1alpha1.RDSInstance{}}, &resource.EnqueueRequestForClaim{}).\n    For(&databasev1alpha1.MySQLInstance{}).\n    WithEventFilter(resource.NewPredicates(resource.HasClassReferenceKind(mgr.GetClient(), resource.ClassKinds{Portable: databasev1alpha1.MySQLInstanceGroupVersionKind, NonPortable: v1alpha1.RDSInstanceClassGroupVersionKind}))).\n    Complete(r)\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Template Stack using kubectl in Shell\nDESCRIPTION: Demonstrates how to install a Template Stack using kubectl command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_17\n\nLANGUAGE: sh\nCODE:\n```\nkubectl crossplane stack install example/foo-template-stack\n```\n\n----------------------------------------\n\nTITLE: Defining PackageRevisionStatus Structure in Go\nDESCRIPTION: Defines the PackageRevisionStatus struct which represents the observed state of a PackageRevision. It includes conditioned status and controller reference.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_15\n\nLANGUAGE: go\nCODE:\n```\ntype PackageRevisionStatus struct {\n  xpv1.ConditionedStatus `json:\"conditionedStatus,omitempty\"`\n  ControllerRef                     *corev1.ObjectReference `json:\"controllerRef,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Provider ClusterRole YAML\nDESCRIPTION: Defines the basic RBAC permissions required for a Crossplane provider to create events and manage secrets.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: example-provider\nrules:\n# Providers create events to report their status.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [create]\n# Providers read their credentials from secrets. They may also create and update\n```\n\n----------------------------------------\n\nTITLE: MinimalGCP Custom Resource with Status Condition\nDESCRIPTION: This YAML defines a MinimalGCP custom resource including its status, showing the Synced condition. The apiVersion and kind specify the type of resource being defined (a MinimalGCP from the gcp.resourcepacks.crossplane.io API group). The status section provides information about the resource's current state, including conditions like 'Synced'.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\nkind: MinimalGCP\nmetadata:\n  name: small-infra\n  annotations:\n      \\\"resourcepacks.crossplane.io/keep-defaulting-annotations\\\": \\\"true\\\"\n  labels:\n    \\\"foo-key\\\": bar-value\nspec:\n  region: us-west2\n  projectID: foo-project\n  credentialsSecretRef:\n    name: gcp-credentials\n    namespace: crossplane-system\n    key: credentials\nstatus:\n  conditions:\n  - lastTransitionTime: \\\"2019-12-03T23:16:58Z\\\"\n    reason: Successfully reconciled\n    status: \\\"True\\\"\n    type: Synced\"\n```\n\n----------------------------------------\n\nTITLE: Defining Namespace for Composite Resource Claims\nDESCRIPTION: This YAML snippet shows how to define a namespace that allows claiming of composite resources. It uses annotations to specify which composite resources can be claimed in the namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: example\n  annotations:\n    rbac.crossplane.io/composites.example.org: xrd-claim-accepted\n    rbac.crossplane.io/examplecomposites.xr.example.org: xrd-claim-accepted\n```\n\n----------------------------------------\n\nTITLE: Defining Hello World Stack in YAML\nDESCRIPTION: Defines a Hello World Stack resource with a custom resource definition and template status for greeting generation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: Stack\nmetadata:\n  name: HelloWorld\nspec:\n  customresourcedefinitions:\n  - kind: HelloWorld\n    apiVersion: helloworld.crossplane.example.com/v1\n  templateStatus:\n    helloworld.crossplane.example.com/v1: |\n      greeting: \"Hello, {{.spec.name}}!\"\n```\n\n----------------------------------------\n\nTITLE: Defining a WordpressInstance in YAML\nDESCRIPTION: This YAML defines an instance of a WordpressInstance Custom Resource. The `engineVersion` field would be available to the templating engine.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: wordpress.samples.stacks.crossplane.io/v1alpha1\nkind: WordpressInstance\nmetadata:\n  name: \\\"my-wordpress-app-from-helm2\\\"\n  namespace: dev\nspec:\n  engineVersion: \\\"8.0\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Setting Resource Ready Status\nDESCRIPTION: Example showing how to set the ready status of a Kubernetes ProviderConfig resource using a custom annotation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-function-go-templating.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: kubernetes.crossplane.io/v1alpha1\nkind: ProviderConfig\nmetadata:\n  name: composed-providerconfig\n  annotations:\n    gotemplating.fn.crossplane.io/ready: True\nspec:\n  credentials:\n    source: Secret\n    secretRef:\n      namespace: crossplane-system\n      name: cluster-config\n      key: kubeconfig\n```\n\n----------------------------------------\n\nTITLE: Promoting Release Builds Using a Bash Script\nDESCRIPTION: This snippet illustrates a build command for promoting a release build to a specified channel. The script requires parameters for the branch name, version, and channel to facilitate the promotion process effectively. The expected input includes the necessary parameters, and it outputs the promotion of the release build to the designated channel in the CI/CD pipeline.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-release-process.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n./build/run make promote BRANCH_NAME=${BRANCH_NAME} VERSION=${params.version} CHANNEL=${params.channel}\n```\n\n----------------------------------------\n\nTITLE: MySQLInstanceClass YAML Definition\nDESCRIPTION: This YAML configuration defines a MySQLInstanceClass that is marked as portable. It specifies a reference to a strongly-typed class in a designated namespace, allowing for different infrastructure across namespaces.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstanceClass\nmetadata:\n  name: standard-mysql\n  namespace: my-app\nclassRef:\n  kind: RDSInstanceClass\n  apiVersion: database.aws.crossplane.io/v1alpha1\n  name: standard-mysql\n  namespace: crossplane-system\n```\n\n----------------------------------------\n\nTITLE: Generated Resource by Template Stack Manager in YAML\nDESCRIPTION: Shows the resource generated by the Template Stack Manager based on the Foo custom resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_21\n\nLANGUAGE: yaml\nCODE:\n```\nkind: athing\nspec:\n  foovar: \"foo\"\n```\n\n----------------------------------------\n\nTITLE: Early Return Pattern Examples in Go\nDESCRIPTION: Contrasting examples showing the preferred early return pattern versus nested conditionals.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        v := fetch()\n        if v == 42 {\n                b := embiggen(v)\n                for k, v := range lookup(b) {\n                        if v == true {\n                                store(k)\n                        } else {\n                                remove(k)\n                        }\n                }\n                return nil\n        }\n        return errors.New(\"v was a bad number\")\n}\n```\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        v := fetch()\n        if v != 42 {\n                return errors.New(\"v was a bad number\")\n        }\n        b := embiggen(v)\n        for k, v := range lookup(b) {\n                if v == false {\n                        remove(k)\n                        continue\n                }\n                store(k)\n        }\n        return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Usage Resource Example in YAML\nDESCRIPTION: Example YAML configuration showing usage relationship between resources with selector-based resolution.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: Usage\nmetadata:\n  name: release-uses-clusters\nspec:\n  of:\n    apiVersion: eks.upbound.io/v1beta1\n    kind: Cluster\n    resourceSelector:\n      matchControllerRef: true\n      matchLabels:\n         foo: bar\n  by:\n    apiVersion: helm.crossplane.io/v1beta1\n    kind: Release\n    resourceRef:\n      name: my-prometheus-chart\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane View Role for Namespace in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-view' Role for a specific namespace, granting read-only access to resource claims within the namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  # This role applies only to the 'example' namespace.\n  namespace: example\n  name: crossplane-view\nrules:\n# Crossplane namespace viewers have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane namespace viewers have read-only access to all of the composite\n# resource claims that an admin has chosen to enable in their namespace.\n- apiGroups: [xr.example.org]\n  resources:\n  - exampleclaims\n  verbs: [get, list, watch]\n```\n\n----------------------------------------\n\nTITLE: Implementing Pause Annotation in YAML for Crossplane Managed Resource\nDESCRIPTION: This YAML snippet shows how to use the 'crossplane.io/paused' annotation to pause reconciliation of a Crossplane managed resource. When set to 'true', it stops further reconciliations on the resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: ec2.aws.upbound.io/v1beta1\nkind: VPC\nmetadata:\n  name: paused-vpc\n  annotations:\n    crossplane.io/paused: \"true\"\n...\n```\n\n----------------------------------------\n\nTITLE: Defining Multi-Namespace Package ClusterRole\nDESCRIPTION: YAML definition for a package-specific view ClusterRole object that applies to multiple namespaces. This role defines view permissions for a WordPress package installed in two different namespaces.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: package:crossplane:wordpress:2.0:view # Unique by package:{namespace-name}:{package-name}:{version}:{role}\n  labels:\n      rbac.crossplane.io/aggregate-to-namespace-view: \"true\"\n      namespace.crossplane.io/foo: \"true\"\n      namespace.crossplane.io/baz: \"true\"\nrules:\n- apiGroups: [\"wordpress.crossplane.io\"]\n  resources: [\"WordpressInstance\"]\n  verbs: [\"get\", \"list\", \"watch\"]\n ...\n```\n\n----------------------------------------\n\nTITLE: Defining Plus One Stack in YAML\nDESCRIPTION: Defines a Plus One Stack resource that appends '+' to the status output on each reconciliation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_14\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: Stack\nmetadata:\n  name: PlusOne\nspec:\n  customresourcedefinitions:\n  - kind: PlusOne\n    apiVersion: plusses.crossplane.example.com/v1\n  templateStatus:\n    plusses.crossplane.example.com/v1: |\n      output: \"+ {{.status.output}}\"\n```\n\n----------------------------------------\n\nTITLE: Updating Go Dependencies for Crossplane Provider\nDESCRIPTION: This snippet demonstrates how to update the Go module dependencies to use a temporary version of Crossplane Runtime and the latest Crossplane Tools. It's part of the workaround for code generation issues.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ngo mod edit -replace=github.com/crossplane/crossplane-runtime=github.com/turkenh/crossplane-runtime@v0.0.0-20220314141040-6f74175d3c1f\ngo get github.com/crossplane/crossplane-tools@master\n\ngo mod tidy\n```\n\n----------------------------------------\n\nTITLE: Install Crossplane stack using kubectl apply\nDESCRIPTION: Installs a Crossplane stack by applying the stack definition file. This is an alternative to using the kubectl plugin directly and allows for declarative installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl apply -f config/stack/install.stack.yaml\"\n\n```\n\n----------------------------------------\n\nTITLE: Running E2E Tests with Flags\nDESCRIPTION: Examples of running E2E tests using earthly with various debug and filtering options\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nearthly -P +e2e --FLAGS=\"-v=4\"\n\nearthly -P +e2e --FLAGS=\"-test.run ^TestConfiguration\"\n\nearthly -P +e2e --FLAGS=\"-labels area=apiextensions\"\n\nearthly -P +e2e --FLAGS=\"-feature=ConfigurationWithDependency\"\n\nearthly -i -P +e2e --FLAGS=\"-test.failfast -fail-fast -destroy-kind-cluster=false\"\n\nearthly -P +e2e --FLAGS=\"-test.v -test-suite=composition-webhook-schema-validation\"\n```\n\n----------------------------------------\n\nTITLE: MySQL Instance Claim without Class Reference\nDESCRIPTION: Example of a MySQLInstance claim that omits the class reference and relies on the namespace's MySQLInstancePolicy.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\n  namespace: my-app-namespace\nspec:\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Creating KubernetesTarget for KubernetesCluster Claims\nDESCRIPTION: This snippet details adding a controller to core Crossplane that watches for KubernetesCluster claim creation and automatically creates a KubernetesTarget resource.  The created KubernetesTarget has an ownerReference to the KubernetesCluster claim to ensure garbage collection.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-consuming-k8s-clusters.md#2025-04-21_snippet_4\n\nLANGUAGE: Text\nCODE:\n```\n\"Lastly, a single controller must be added to core Crossplane that watches for\nthe creation of `KubernetesCluster` claims and automatically creates a\n`KubernetesTarget` resource in the namespace when the `KubernetesCluster` claim\nbecomes `Bound`. As mentioned above, the created `KubernetesTarget` should have\nan `ownerReference` to the `KubernetesCluster` claim to ensure it is cleaned up\nby [garbage collection] when the claim is deleted.\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Provider API Filtering in Crossplane\nDESCRIPTION: Example configuration for enabling specific APIs in a Crossplane AWS provider. The enabledAPIs field allows selecting specific API endpoints to enable, supporting both exact matches and wildcards.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: pkg.crossplane.io/v1\nkind: Provider\nmetadata:\n  name: crossplane-aws\nspec:\n  package: upbound/provider-aws:v0.40.0\n  # A new, optional field enables matching APIs (i.e. CRDs). When this field is\n  # not specified all APIs are enabled.\n  enabledAPIs:\n  - \"vpcs.ec2.aws.upbound.io\"\n  - \"*.rds.aws.upbound.io\"\n```\n\n----------------------------------------\n\nTITLE: Early Return Error Handling Pattern\nDESCRIPTION: Recommended approach using early returns for error handling to maintain cleaner code structure.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_14\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        v, err := fetch()\n        if err != nil {\n                return errors.Wrap(err, \"could not enable the thing\")\n        }\n\n        store(embiggen(v))\n        return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Resource Metadata in YAML\nDESCRIPTION: YAML configuration for specifying resource metadata including API group, Kubernetes name, and kubectl display columns.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nresource_metadata:\n- terraform_name: google_service_account\n  api_group: iam.gcp.terraform-plugin.crossplane.io\n  crd_name: ServiceAccount\n  kubectl_printcolumns:\n  - type: string\n    json_path: .spec.forProvider.displayName\n    name: DISPLAYNAME\n```\n\n----------------------------------------\n\nTITLE: Initializing Unstructured Controller for Unknown Types in Go\nDESCRIPTION: Demonstrates how to set up a controller for arbitrary types declared at runtime using unstructured.Unstructured in Go. This approach allows the Template Stack Manager to handle CRDs that were not known at compile time.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\nvar obj unstructured.Unstructured\nobj.SetAPIVersion(\"foo/v1\")\nobj.SetKind(\"Bar\")\n\nerr := ctrl.NewControllerManagedBy(mgr).\n    For(&obj).\n    Owns(...).\n    Complete(&FooReconciler{})\n```\n\n----------------------------------------\n\nTITLE: Initializing Template Stack Project with Crossplane CLI\nDESCRIPTION: Command to initialize a new Template Stack project using the Crossplane CLI. This creates the boilerplate stack layout in the project directory.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nkubectl crossplane stack init --template myorg/mystack\n```\n\n----------------------------------------\n\nTITLE: Package Metadata Configuration\nDESCRIPTION: Example app.yaml configuration showing package metadata including version, maintainers, permissions and dependencies.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: 0.1.0\nversion: 0.0.1\ntitle: Sample Crossplane Stack\noverviewShort: A one line plain text explanation of this package\noverview: |\n  Multiple line plain text description of this package.\nreadme: |\n *Markdown* describing the sample Crossplane Stack project in more detail\nmaintainers:\n- name: Jared Watts\n  email: jared@upbound.io\nowners:\n- name: Bassam Tabbara\n  email: bassam@upbound.io\ncompany: Upbound\ncategory: Database\nkeywords:\n- \"samples\"\n- \"examples\"\n- \"tutorials\"\nwebsite: \"https://crossplane.io\"\nsource: \"https://github.com/crossplane/sample-stack\"\nlicense: Apache-2.0\npackageType: Provider\npermissionScope: Cluster\ndependsOn:\n- crd: \"mytype.mygroup.example.org/v1alpha1\"\n- crd: '*.yourstack.example.org/v1alpha1'\n```\n\n----------------------------------------\n\nTITLE: Generated Go Resource Type Structure\nDESCRIPTION: File path pattern for generated Go struct representations of Resource CRDs with kubebuilder annotations that represent Provider Managed Resources in the Kubernetes API.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_0\n\nLANGUAGE: filepath\nCODE:\n```\napis/<group>/<version>/<kind>_types.go\n```\n\n----------------------------------------\n\nTITLE: MySQL Instance Claim with Explicit Strongly-Typed Class Reference\nDESCRIPTION: Example of a MySQLInstance claim that explicitly references a strongly-typed RDSInstanceClass, reducing portability.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: mysql-claim\nspec:\n  classRef:\n    kind: RDSInstanceClass\n    apiVersion: database.aws.crossplane.io/v1alpha1\n    name: standard-mysql\n    namespace: crossplane-system\n  writeConnectionSecretToRef:\n    name: rdsmysql\n  engineVersion: \"5.6\"\n```\n\n----------------------------------------\n\nTITLE: Protecting a Resource from Deletion in Crossplane YAML\nDESCRIPTION: Example of using the Usage type to protect a resource (in this case, a database instance) from being deleted without necessarily being used by another resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: crossplane.io/v1\nkind: Usage\nspec:\n  reason: \"Production Database - should never be deleted\"\n  of:\n    apiVersion: rds.aws.upbound.io/v1beta1\n    kind: Instance\n    resourceRef:\n      name: my-cluster\n```\n\n----------------------------------------\n\nTITLE: Using Reconciled Values as Template Variables in YAML\nDESCRIPTION: This YAML snippet showcases the ability to use reconciled values from Kubernetes resources as template variables, specifically for managing resource status fields. It uses a `Stack` resource to illustrate how `templateStatus` can present a template for a resource's status body. Pre-existing familiarity with Kubernetes CRD resources and go-templates is beneficial for full understanding.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nkind: Stack\nmetadata:\n  name: Foo\nspec:\n  customresourcedefinitions:\n  - kind: Foo\n    apiVersion: foo.example.org/v1\n  template:\n    foo.example.org/v1:\n      templateA: |\n        kind: DependentThing\n        spec:\n        …\n  templateStatus:\n    foo.example.org/v1: |\n        statusField: {{.some.value}}\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane with Command Line Parameters in Helm\nDESCRIPTION: This command installs Crossplane using Helm with the image pull policy set to 'IfNotPresent'. It demonstrates how to pass individual configuration parameters via the command line.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_3\n\nLANGUAGE: console\nCODE:\n```\nhelm install --namespace crossplane-system crossplane-stable/crossplane --set image.pullPolicy=IfNotPresent\n```\n\n----------------------------------------\n\nTITLE: Defining ResourceReference Structure in Go\nDESCRIPTION: Defines the structure for resource references used to propagate connection secrets. Contains fields from corev1.ObjectReference plus an additional SecretName field for secret propagation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\ntype ResourceReference struct {\n    // These first seven fields are in reality an embedded\n    // corev1.ObjectReference.\n\tKind            string\n\tNamespace       string\n\tName            string\n\tUID             types.UID\n\tAPIVersion      string\n\tResourceVersion string\n\tFieldPath       string\n\n\tSecretName      string\n}\n```\n\n----------------------------------------\n\nTITLE: Error Wrapping Pattern in Go\nDESCRIPTION: Shows the recommended approach for wrapping errors with context using the crossplane-runtime/pkg/errors package.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\nimport \"github.com/crossplane/crossplane-runtime/pkg/errors\"\n\nfunc example() error {\n        v, err := fetch()\n        if err != nil {\n                return errors.Wrap(err, \"could not fetch the thing\")\n        }\n\n        store(embiggen(v))\n        return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Crossplane Framework Markdown Documentation\nDESCRIPTION: Complete project charter documentation explaining Crossplane's purpose, components, and scope as a framework for building cloud native control planes. Includes sections on control plane theory, core features, and project boundaries.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/CHARTER.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Project Charter\n\n## Overview\n\nCrossplane is a framework for building cloud native control planes without\nneeding to write code. It has a highly extensible backend that enables you to\nbuild a control plane that can orchestrate applications and infrastructure no\nmatter where they run, and a highly configurable frontend that puts you in\ncontrol of the schema of the declarative API it offers.\n\n## Control Planes\n\nControl planes first emerged in network packet switching, where devices must\nforward packets as fast as possible, but also be highly configurable. Breaking\nout the control plane from the data plane allows the former to be optimized for\nflexibility while the latter is optimized for speed. It also decouples the\nfailure domains - a control plane failure does not prevent the data plane from\nfunctioning. Control planes are rooted in control theory, in particular closed\nloop control where the actual state of a system is observed in order to\ndetermine how best to drive it toward a desired state.\n\nControl planes power cloud computing. Cloud providers like AWS are built with\ncontrol planes, as are projects like Kubernetes. In cloud computing the data\nplane is instead a \"compute plane\" consisting of applications and the\ninfrastructure they run on - VMs, containers, databases, caches, queues, etc.\n\nControl planes are popular in cloud computing because they:\n\n* Are \"always-on\", constantly correcting drift by driving observed state toward\n  desired state.\n* Are API-driven, which enables discovery, collaboration, and integration with\n  other systems.\n* Don't need to be installed on every laptop and CI/CD system, making them\n  easier to operate.\n* Keep control in a separate failure domain from the plane under control (e.g.\n  compute).\n\nCloud native organizations increasingly prefer control planes to approaches such\nas imperative scripts or Infrastructure-as-Code (IaC), but historically building\na control plane has required a significant investment to design and code it from\nscratch. This is where Crossplane comes in.\n\n## What Crossplane Is\n\nCrossplane is a neutral place for vendors and individuals to come together in\nenabling control planes. It offers a framework to build control planes for cloud\nnative computing without needing to write code (unless you want to). It shares a\nfoundation with Kubernetes, but supports many powerful extensions that enable it\nto control anything - not just containers. The Crossplane project consists of:\n\n* The Crossplane Resource Model (XRM). An API model for Crossplane extensions.\n* The ability to compose bespoke control plane APIs for any compute plane.\n* A package format and manager to extend your control plane with:\n  * The ability to orchestrate any kind of compute plane resource.\n  * New ways to compose control plane APIs.\n  * New integration with supporting services such as secret stores.\n* A set of providers and other integrations to cloud and infrastructure\n  offerings that enable resources to be provisioned and managed.\n* Tooling to create and test new Crossplane extensions.\n* A conformance program for Crossplane extensions.\n* Tooling, interfaces, and experiences that facilitate building, managing, and\n  consuming a control plane.\n\nAs a framework, Crossplane:\n\n* Avoids building features specific to any particular compute plane in its core.\n  Instead features pertaining to any particular cloud provider, project, or tool\n  are enabled through extension points.\n* Focuses on APIs. Crossplane provides and recommends \"golden path\" tools to\n  build conformant extensions but does not require them. Anything with\n  conformant API schema and behavior may be considered a Crossplane extension -\n  regardless of how it is built. \n* Optimizes for \"vertical integration\". That is, Crossplane extensions are\n  intended and designed to be used in conjunction with Crossplane and each\n  other.\n* Prioritizes enabling a \"separation of concerns\" between control plane curators\n  and consumers. Curators deploy, extend, and configure control planes, while\n  consumers use them to orchestrate compute planes.\n\n## What Crossplane Is Not\n\nCrossplane is not intended to be purpose built for any particular use case.\nInstead it is a general, but complete, framework that facilitates building,\ndeploying, configuring, and managing a control plane for your own highly bespoke\nuse case, often without writing any code.\n\nThe project is a neutral place for vendors and individuals to come together in\nenabling control planes. While any extension that passes the appropriate\nCrossplane conformance suite may consider itself to be\n\"a Crossplane extension\" - regardless of how it is built, licensed, or governed,\nwho maintains it, or where it is hosted - the project maintainers can endorse\na curated set of extensions to drive a high quality experience around them.\n\nConcrete examples of things that are not in scope for the project include (but\nare not limited to):\n\n* Providing or mandating abstractions around specific use cases such as\n  provisioning applications (e.g. a PaaS API) or provisioning Kubernetes\n  clusters. \n* Providing or mandating a configuration language (for example, CUE). Crossplane\n  provides a declarative API that may be targeted by arbitrary configuration\n  languages, and extension points that may be powered by arbitrary languages.\n* Enabling the use of Crossplane extensions without using Crossplane and vice\n  versa; this is not supported and may result in undefined behavior.\n* Providing or mandating opinions around control plane hosting, security and\n  tenancy models, or multiple control plane management.\n* Offering 'in-tree' support for particular compute planes - e.g. AWS. All\n  features specific to any specific compute plane provider are built as\n  extensions.\n* Offering a package specification or manager for anything other than Crossplane\n  extensions.\n\n## Updating this Document\n\nThis is a living document. Changes to the scope, principles, or mission\nstatement of the Crossplane project require a [majority vote][sc-voting] of the\nsteering committee.\n\n[sc-voting]: https://github.com/crossplane/crossplane/blob/main/GOVERNANCE.md#updating-the-governance\n```\n\n----------------------------------------\n\nTITLE: Defining WordPress Instance with Parent Labels in YAML\nDESCRIPTION: Example of a WordpressInstance YAML resource, showing the parent labels that establish its relationship with the Stack resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: wordpress.samples.stacks.crossplane.io/v1alpha1\nkind: WordpressInstance\nmetadata:\n  creationTimestamp: \"2019-10-23T23:47:40Z\"\n  generation: 1\n  name: my-wordpressinstance\n  namespace: app-project1-dev\n  resourceVersion: \"6445\"\n  selfLink: /apis/wordpress.samples.stacks.crossplane.io/v1alpha1/namespaces/app-project1-dev/wordpressinstances/my-wordpressinstance\n  uid: f2d13a15-1f9b-40a7-a173-a40abefa61bf\n  labels:\n    core.crossplane.io/parent-kind: \"Stack\"\n    core.crossplane.io/parent-group: \"stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-name: \"sample-stack-wordpress\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n    app.kubernetes.io/managed-by: stack-manager\n...\n```\n\n----------------------------------------\n\nTITLE: Example Managed Resource with Generated Name\nDESCRIPTION: Shows the result of creating a managed resource using GenerateName, with Kubernetes appending a unique suffix.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.gcp.crossplane.io/v1alpha2\nkind: CloudSQLInstance\nmetadata:\n  name: myappnamespace-mydatabase-5sc8a\n```\n\n----------------------------------------\n\nTITLE: Implementing Resource SyncDeleter Maker Interface in Go\nDESCRIPTION: Interface for creating new SyncDeleter instances, primarily used for test enablement in the reconciliation process.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\ntype maker interface {\n\tnewSyncDeleter(context.Context, *v1alpha1.Resource) (syncdeleter, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Horizontal Composition Stack Example in YAML\nDESCRIPTION: Shows how to implement horizontal composition in Template Stacks, demonstrating status field management and dependent resource relationships.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nkind: Stack\nmetadata:\n  name: Foo\nspec:\n  templateStatus:\n    foo.example.org/v1: |\n        statusField: {{.some.value}}\n  template:\n    foo.example.org/v1:\n      controller: |\n        kind: Thing\n        spec:\n        …\n      other: |\n        kind: DependentThing\n        spec:\n          someInput: {{.controller.status.statusField}}\n```\n\n----------------------------------------\n\nTITLE: Defining Hello World CRD in YAML\nDESCRIPTION: Defines the Custom Resource Definition (CRD) for the Hello World resource, specifying its schema and properties.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_13\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: helloworld.crossplane.example.com\nspec:\n  group: crossplane.example.com\n  versions:\n    - name: v1\n      served: true\n      storage: true\n      schema:\n        openAPIV3Schema:\n          type: object\n          properties:\n            spec:\n              type: object\n              properties:\n                name:\n                  type: string\n            status:\n              type: object\n              properties:\n                greeting:\n                  type: string\n      subresources:\n        status: {}\n  scope: Namespaced\n  names:\n    plural: helloworlds\n    singular: helloworld\n    kind: HelloWorld\n```\n\n----------------------------------------\n\nTITLE: Configuring Composite Connection Details\nDESCRIPTION: Example of using CompositeConnectionDetails meta resource to set connection details with conditional logic based on observed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-function-go-templating.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: meta.gotemplating.fn.crossplane.io/v1alpha1\nkind: CompositeConnectionDetails\nmetadata:\n  annotations:\n    gotemplating.fn.crossplane.io/composition-resource-name: connection-details\n  name: connection-details\n{{ if eq $.observed.resources nil }}\ndata: {}\n{{ else }}\ndata:\n  username: {{ ( index $.observed.resources \"sample-access-key-0\" ).connectionDetails.username }}\n  password: {{ ( index $.observed.resources \"sample-access-key-0\" ).connectionDetails.password }}\n  url: {{ \"http://www.example.com\" | b64enc }}\n{{ end }}\n```\n\n----------------------------------------\n\nTITLE: Defining ClusterPackageInstall Struct in Go for Crossplane\nDESCRIPTION: This code snippet defines the ClusterPackageInstall struct, which is the current CRD type for adding a package to Crossplane. It includes various Kubernetes metadata annotations and specifications for package installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\n// +kubebuilder:object:root=true\n\n// ClusterPackageInstall is the CRD type for a request to add a package to Crossplane.\n// +kubebuilder:resource:categories=crossplane\n// +kubebuilder:subresource:status\n// +kubebuilder:printcolumn:name=\"READY\",type=\"string\",JSONPath=\".status.conditionedStatus.conditions[?(@.type=='Ready')].status\"\n// +kubebuilder:printcolumn:name=\"SOURCE\",type=\"string\",JSONPath=\".spec.source\"\n// +kubebuilder:printcolumn:name=\"PACKAGE\",type=\"string\",JSONPath=\".spec.package\"\n// +kubebuilder:printcolumn:name=\"CRD\",type=\"string\",JSONPath=\".spec.crd\"\n// +kubebuilder:printcolumn:name=\"AGE\",type=\"date\",JSONPath=\".metadata.creationTimestamp\"\ntype ClusterPackageInstall struct {\n  metav1.TypeMeta   `json:\",inline\"`\n  metav1.ObjectMeta `json:\"metadata,omitempty\"`\n\n  Spec   PackageInstallSpec   `json:\"spec,omitempty\"`\n  Status PackageInstallStatus `json:\"status,omitempty\"`\n}\n\n// PackageInstallSpec specifies details about a request to install a package to\n// Crossplane.\ntype PackageInstallSpec struct {\n  PackageControllerOptions `json:\",inline\"`\n\n  // Source is the domain name for the package registry hosting the package\n  // being requested, e.g., registry.crossplane.io\n  Source string `json:\"source,omitempty\"`\n\n  // Package is the name of the package package that is being requested, e.g.,\n  // myapp. Either Package or CustomResourceDefinition can be specified.\n  Package string `json:\"package,omitempty\"`\n\n  // CustomResourceDefinition is the full name of a CRD that is owned by the\n  // package being requested. This can be a convenient way of installing a\n  // package when the desired CRD is known, but the package name that contains\n  // it is not known. Either Package or CustomResourceDefinition can be\n  // specified.\n  CustomResourceDefinition string `json:\"crd,omitempty\"`\n}\n\n// PackageControllerOptions allow for changes in the Package extraction and\n// deployment controllers. These can affect how images are fetched and how\n// Package derived resources are created.\ntype PackageControllerOptions struct {\n  // ImagePullSecrets are named secrets in the same workspace that can be used\n  // to fetch Packages from private repositories and to run controllers from\n  // private repositories\n  ImagePullSecrets []corev1.LocalObjectReference `json:\"imagePullSecrets,omitempty\"`\n\n  // ImagePullPolicy defines the pull policy for all images used during\n  // Package extraction and when running the Package controller.\n  // https://kubernetes.io/docs/concepts/configuration/overview/#container-images\n  ImagePullPolicy corev1.PullPolicy `json:\"imagePullPolicy,omitempty\"`\n\n  // ServiceAccount options allow for changes to the ServiceAccount the\n  // Package Manager creates for the Package's controller\n  ServiceAccount *ServiceAccountOptions `json:\"serviceAccount,omitempty\"`\n}\n\n// ServiceAccountOptions augment the ServiceAccount created by the Package\n// controller\ntype ServiceAccountOptions struct {\n  Annotations map[string]string `json:\"annotations,omitempty\"`\n}\n\n// PackageInstallStatus represents the observed state of a PackageInstall.\ntype PackageInstallStatus struct {\n  xpv1.ConditionedStatus `json:\"conditionedStatus,omitempty\"`\n\n  InstallJob    *corev1.ObjectReference `json:\"installJob,omitempty\"`\n  PackageRecord *corev1.ObjectReference `json:\"packageRecord,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Go Function Errors with cmpopts\nDESCRIPTION: Example showing how to test a simple function using cmpopts.AnyError and cmpopts.EquateErrors to verify error cases. Demonstrates table-driven testing pattern with error comparison.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\nfunc TestQuack(t *testing.T) {\n        type want struct {\n                output string\n                err error\n        }\n\n        // We only care that Quack returns an error when supplied with a bad\n        // input, and returns no error when supplied with good input.\n        cases := map[string]struct{\n                input string\n                want  want\n        }{\n                \"BadInput\": {\n                        input: \"Hello!\",\n                        want: want{\n                                err: cmpopts.AnyError,\n                        },\n                },\n                \"GoodInput\": {\n                        input: \"Quack!\",\n                        want: want{\n                                output: \"Quack!\",\n                        },\n                },\n        }\n\n        for name, tc := range cases {\n                t.Run(name, func(t *testing.T) {\n                        got, err := Quack(tc.input)\n\n                        if diff := cmp.Diff(got, tc.want.output); diff != \"\" {\n                                t.Errorf(\"Quack(): -got, +want:\\n%s\", diff)\n                        }\n\n                        if diff := cmp.Diff(err, tc.want.err, cmpopts.EquateErrors()); diff != \"\" {\n                                t.Errorf(\"Quack(): -got, +want:\\n%s\", diff)\n                        }\n                })\n        }\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Maintainers List\nDESCRIPTION: Structured markdown document listing current and emeritus maintainers of the Crossplane project with their contact information and GitHub handles.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/OWNERS.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Crossplane Maintainers\n\nThis page lists all active members **this** repository. Each repository in the\n[Crossplane organization](https://github.com/crossplane/) will list their\nrepository maintainers and reviewers in their own `OWNERS.md` file.\n\nPlease see [GOVERNANCE.md](GOVERNANCE.md) for governance guidelines and\nresponsibilities for the steering committee, maintainers, and reviewers.\n\nSee [CODEOWNERS](CODEOWNERS) for automatic PR assignment.\n\n## Maintainers\n\n* Nic Cope <negz@upbound.io> ([negz](https://github.com/negz))\n* Hasan Turken <hasan@upbound.io> ([turkenh](https://github.com/turkenh))\n* Bob Haddleton <bob.haddleton@nokia.com> ([bobh66](https://github.com/bobh66))\n* Philippe Scorsolini <philippe.scorsolini@upbound.io> ([phisco](https://github.com/phisco))\n\n## Emeritus Maintainers\n\n* Bassam Tabbara <bassam@upbound.io> ([bassam](https://github.com/bassam))\n* Jared Watts <jared@upbound.io> ([jbw976](https://github.com/jbw976))\n* Illya Chekrygin <illya.chekrygin@gmail.com> ([ichekrygin](https://github.com/ichekrygin))\n* Daniel Mangum <georgedanielmangum@gmail.com> ([hasheddan](https://github.com/hasheddan))\n* Muvaffak Onus <me@muvaf.com> ([muvaf](https://github.com/muvaf))\n```\n\n----------------------------------------\n\nTITLE: Complete CloudSQL Instance API Field Mapping in YAML\nDESCRIPTION: Comprehensive example showing how CloudSQL's external resource API fields would map to a Kubernetes YAML specification. Includes advanced configuration options for backup, networking, replication, and security settings.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: database.gcp.crossplane.io/v1alpha1\nkind: CloudSQLInstance\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  databaseVersion: MYSQL_5_6\n  region: us-central1\n  settings:\n    authorizedGaeApplications:\n    - mycoolapp\n    tier: db-n1-standard-1\n    backupConfiguration:\n      startTime: 2019-01-01 00:00:00\n      location: us-west1\n      enabled: true\n      binaryLogEnabled: true\n      replicationLogArchivingEnabled: true\n    pricingPlan: PER_USE\n    replicationType: ASYNCHRONOUS\n    activationPolicy: ON_DEMAND\n    ipConfiguration:\n      ipv4Enabled: true\n      authorizedNetworks:\n      - name: mycoolcidr\n        value: 73.98.0.0/16\n        expirationTime: datetime\n      requireSsl: false\n      privateNetwork: /projects/mycoolproject/global/networks/mycoolvpc\n    locationPreference:\n      followGaeApplication: mycoolapp\n      zone: us-central1-a\n    databaseFlags:\n    - name: cool\n      value: very\n    databaseReplicationEnabled: true\n    crashSafeReplicationEnabled: true\n    dataDiskSizeGb: 50\n    dataDiskType: PD_SSD\n    maintenanceWindow:\n      hour: 23\n      day: 2\n      updateTrack: stable\n    storageAutoResize: true\n    storageAutoResizeLimit: 500\n    userLabels:\n      cool: very\n  masterInstanceName: mycoolmastername\n  failoverReplica:\n    name: mycoolreplicaname\n  replicaConfiguration:\n    mysqlReplicaConfiguration:\n      dumpFilePath: dump\n      username: cooluser\n      password: secretpassword\n      connectRetryInterval: 60\n      masterHeartbeatPeriod: 100\n      caCertificate: PEMPEMPEM\n      clientCertificate: PEMPEMPEM\n      clientKey: PEMPEMPEM\n      sslCipher: supersecure\n      verifyServerCertificate: true\n    failoverTarget: false\n```\n\n----------------------------------------\n\nTITLE: Result Target Protobuf Definition\nDESCRIPTION: Protobuf definition for the Result message type with targeting capabilities.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-fn-claim-conditions.md#2025-04-21_snippet_2\n\nLANGUAGE: protobuf\nCODE:\n```\nmessage Result {\n  // Omitted for brevity\n\n  Target target = 3;\n}\n\n// Target of Function results.\nenum Target {\n  TARGET_UNSPECIFIED = 0;\n  TARGET_COMPOSITE_ONLY = 1;\n  TARGET_COMPOSITE_AND_CLAIM = 2;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Environment Cleanup in Integration Tests in Go\nDESCRIPTION: Shows how to handle cleanup of resources created during testing using a deferred function. This ensures that CRDs installed during setup are removed and the controller manager is stopped properly after tests complete.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\ndefer func() {\n    if err := a.Cleanup(); err != nil {\n        t.Fatal(err)\n    }\n}()\n```\n\n----------------------------------------\n\nTITLE: Stack Resource Definition with Controller Deployment in YAML\nDESCRIPTION: Illustrates the structure of a Stack resource with custom resource definitions and controller deployment specifications.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nkind: Stack\nmetadata:\n  name: RedisStack\nspec:\n  customresourcedefinitions:\n  - kind: Redis\n    apiVersion: redis.example.org/v1alpha1\n  controller:\n    deployment:\n      <typical Kubernetes Deployment resource>\n…\n```\n\n----------------------------------------\n\nTITLE: Initializing Crossplane Stack and CRD\nDESCRIPTION: This command initializes a Crossplane stack and its first CRD with a single command. It prompts the user for the CRD name and API group to generate the initial CRD file.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n\"$ kubectl crossplane stack init --template mygroup/mystackname --init-crd\n> CRD name: WordpressInstance\n> CRD api group: wordpress.samples.stacks.crossplane.io\"\n```\n\n----------------------------------------\n\nTITLE: Defining Variables in Kustomization for Crossplane Resources (YAML)\nDESCRIPTION: This snippet shows how to define variables in a Kustomization object for Crossplane resources. It demonstrates how to reference fields from other resources to be used in variable substitution.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nvars:\n- name: REGION\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: <CR NAME>\n  fieldref:\n    fieldpath: spec.region\n```\n\n----------------------------------------\n\nTITLE: Provider Family Label Definition in YAML\nDESCRIPTION: Example showing the provider family label configuration in crossplane.yaml for RBAC management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\npkg.crossplane.io/provider-family: \"aws\"\n```\n\n----------------------------------------\n\nTITLE: Defining values.yaml for helm templating\nDESCRIPTION: This YAML shows how values.yaml would look, given the WordpressInstance YAML, if helm were used as the engine. The `engineVersion` field is extracted.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\n\"engineVersion: \\\"8.0\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Required Markdown Header Template for Crossplane Design Documents\nDESCRIPTION: Standard header format that must be included in all design documents. Contains fields for document title, owner information, reviewers, and status with version.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Document Title\n* Owner: Some Person (@GithubUsername)\n* Reviewers: Crossplane Maintainers\n* Status: Accepted, revision 1.0\n```\n\n----------------------------------------\n\nTITLE: Resource Registration File Structure\nDESCRIPTION: File paths for registering Resource Types for controller runtime API interaction.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_1\n\nLANGUAGE: filepath\nCODE:\n```\napis/<provider>.go\napis/<group>/<version>/register.go\n```\n\n----------------------------------------\n\nTITLE: Defining OAM WorkloadDefinition in Crossplane\nDESCRIPTION: Initial WorkloadDefinition configuration that enables ContainerizedWorkload core workload type to be used by OAM Components.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-oam-workflow.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.oam.dev/v1alpha2\nkind: WorkloadDefinition\nmetadata:\n  name: containerizedworkloads.core.oam.dev\nspec:\n  definitionRef:\n    name: containerizedworkloads.core.oam.dev\n```\n\n----------------------------------------\n\nTITLE: Defining a Default ResourceClass in Crossplane\nDESCRIPTION: A sample YAML configuration for a default resource class that will be automatically selected for MySQL instances. It uses labels to mark itself as the default for that resource type.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: ResourceClass\nmetadata:\n  name: standard-mysql\n  namespace: crossplane-system\n  labels:\n    mysqlinstance.storage.crossplane.io/default: \"true\"\nparameters:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups: \"sg-ab1cdefg,sg-05adsfkaj1ksdjak\"\n  size: \"20\"\nprovisioner: rdsinstance.database.aws.crossplane.io/v1alpha1\nproviderRef:\n  name: aws-provider\nreclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Kubernetes Secret Using Custom Secret Definition\nDESCRIPTION: This snippet demonstrates how to create a Kubernetes Secret object using the schema defined by the Custom Secret Definition. It specifies API version, kind, metadata, type, and secret data which is Base64 encoded for security.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-custom-secret-definitions.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysecret\ntype: mysql.v1alpha1.database.crossplane.io\ndata:\n  username: YWRtaW4=\n  password: MWYyZDFlMmU2N2Rm\n```\n\n----------------------------------------\n\nTITLE: Generated Documentation Path\nDESCRIPTION: File path for package documentation containing Provider Resource details.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_2\n\nLANGUAGE: filepath\nCODE:\n```\napis/<group>/<version>/doc.go\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane Package Using PackageInstall CRD\nDESCRIPTION: This YAML snippet shows how to install a Crossplane package at the namespace scope using the PackageInstall CRD. It specifies the package source and the CRD that the package defines or owns.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: packages.crossplane.io/v1alpha1\nkind: PackageInstall\nmetadata:\n  name: wordpress-from-crd\nspec:\n  source: registry.crossplane.io\n  crd: wordpressinstances.wordpress.samples.packages.crossplane.io/v1alpha1\nstatus:\n  conditions:\n  - type: Creating\n    status: \"True\"\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane Stack\nDESCRIPTION: This command installs a Crossplane stack into the Crossplane control cluster. It retrieves the stack from the specified image and assigns it a name.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n\"kubectl crossplane stack install myorg/mystack mystack\"\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane Agent with Helm\nDESCRIPTION: This bash command installs the Crossplane agent using Helm. It sets the `apiGroups` parameter to specify the API groups that the agent should reconcile in the remote cluster. It also configures the name of the secret containing the credentials for the central cluster (`agent1-creds`) and the default target namespace (`bar`).\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nhelm install crossplane/agent \\\n   --set apiGroups=database.acmeco.org,network.acmeco.org \\\n   --set default-credentials-secret-name=agent1-creds \\\n   --set default-target-namespace=bar\n```\n\n----------------------------------------\n\nTITLE: Defining CloudSQLInstanceClass Resource\nDESCRIPTION: This YAML defines a CloudSQLInstanceClass resource, specifying the configuration for a Cloud SQL instance. It defines the database version, region, and settings such as data disk size and type, IP configuration, and tier. The metadata includes labels propagated from MinimalGCP and default labels, along with an ownerReference that ensures the resource is deleted when the MinimalGCP instance is deleted.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: database.gcp.crossplane.io/v1beta1\nkind: CloudSQLInstanceClass\nmetadata:\n  labels:\n    # All labels on MinimalGCP are propagated down to all resources.\n    \\\"foo-key\\\": bar-value\n    # Default labels for all deployed resources.\n    gcp.resourcepacks.crossplane.io/name: minimal-setup\n    gcp.resourcepacks.crossplane.io/uid: 34646233-f58e-4c99-b0a8-0d766533b12c\n  annotations:\n    # The defaulting annotation is kept since the annotation\n    # resourcepacks.crossplane.io/keep-defaulting-annotations on CR was true.\n    # Otherwise, it'd have been removed.\n    resourceclass.crossplane.io/is-default-class: \\\"true\\\"\n  name: minimal-setup-cloudsqlinstance-mysql\n  ownerReferences:\n  # Once the referred MinimalGCP instance is deleted, this resource will be\n  # deleted by Kubernetes api-server.\n  - apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    kind: MinimalGCP\n    name: minimal-setup\n    uid: 34646233-f58e-4c99-b0a8-0d766533b12c\nspecTemplate:\n  forProvider:\n    databaseVersion: MYSQL_5_7\n    # Propagated from MinimalGCP instance.\n    region: us-west2\n    settings:\n      dataDiskSizeGb: 10\n      dataDiskType: PD_SSD\n      ipConfiguration:\n        ipv4Enabled: false\n        privateNetworkRef:\n          # Hard-coded value was \\\"network\\\" but since Network with name \\\"network\\\"\n          # has a new name, the ref here is also updated.\n          name: minimal-setup-network\n      tier: db-n1-standard-1\n  providerRef:\n    name: minimal-setup-gcp-provider\n  reclaimPolicy: Delete\n  writeConnectionSecretsToNamespace: crossplane-system\n\n\"\n```\n\n----------------------------------------\n\nTITLE: Generated Examples Structure\nDESCRIPTION: File path pattern for valid example resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_3\n\nLANGUAGE: filepath\nCODE:\n```\nexamples/<group>/<kind>\n```\n\n----------------------------------------\n\nTITLE: Configuring OAM ApplicationConfiguration\nDESCRIPTION: ApplicationConfiguration that references a Component and provides parameter values for deployment.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-oam-workflow.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.oam.dev/v1alpha2\nkind: ApplicationConfiguration\nmetadata:\n  name: myapp-dev\nspec:\n  components:\n    - componentName: myapp\n      parameterValues:\n        - name: imageName\n          value: hello-world:latest\n```\n\n----------------------------------------\n\nTITLE: Defining Crossplane Admin Role for Namespace in YAML\nDESCRIPTION: This YAML snippet defines the 'crossplane-admin' Role for a specific namespace, granting full access to resource claims and the ability to manage role bindings within the namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  # This role applies only to the 'example' namespace.\n  namespace: example\n  name: crossplane-admin\nrules:\n# Crossplane namespace admins have access to view events.\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n# Crossplane namespace admins may need to read or otherwise interact with\n# resource claim connection secrets.\n- apiGroups: [\"\"]\n  resources: [secrets]\n  verbs: [\"*\"]\n# Crossplane namespace admins have access to view the cluster roles that they\n# may be able to grant to other subjects.\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [roles]\n  verbs: [get, list, watch]\n# Crossplane namespace admins have access to grant the access they have to other\n# subjects.\n- apiGroups: [rbac.authorization.k8s.io]\n  resources: [rolebindings]\n  verbs: [*]\n# Crossplane namespace admins have full access to all of the composite resource\n# claims that an admin has chosen to enable in their namespace.\n- apiGroups: [xr.example.org]\n  resources:\n  - exampleclaims\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: StackDefinition Controller Implementation - Go\nDESCRIPTION: Reference to the StackDefinition controller implementation for package template processing\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/6fc50822fbf11a7d31f8a9dabde5c8948c3b36ac/pkg/controller/packages/templates/stackdefinition_controller.go#L53\n```\n\n----------------------------------------\n\nTITLE: Generated Controller Files\nDESCRIPTION: File paths for controller registration and implementation files.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_4\n\nLANGUAGE: filepath\nCODE:\n```\npkg/controller/<provider>.go\npkg/controller/.../managed.go\n```\n\n----------------------------------------\n\nTITLE: Resource Metadata Configuration\nDESCRIPTION: Example resource.yaml showing metadata for a specific resource type within the package.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nid: mysql\ntitle: MySQL\ntitlePlural: MySQL Instances\ncategory: Database\noverviewShort: Overview of this resource in FooCompany MySQL\noverview: |\n  Longer plain text description.\n\n  Some detail.\nreadme: |\n  # MySQL Resource by FooCompany\n\n  This is the Crossplane Package mysql crd for FooCompany MySQL\n\n  ## Details\n\n  More markdown.\n\n  ## Examples\n\n    apiVersion: mysql.stacks.foocompany.example/v1\n    kind: mysql\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Crossplane Stack\nDESCRIPTION: This command uninstalls a Crossplane stack from the Crossplane control cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n\"kubectl crossplane stack uninstall mystack\"\n```\n\n----------------------------------------\n\nTITLE: Specifying a Templating Engine in stack.yaml\nDESCRIPTION: This YAML snippet from a `stack.yaml` specifies the kustomize templating engine.  The engine configuration can be specified at multiple levels in the configuration hierarchy.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\n\"behaviors:\n  engine:\n    type: kustomize\"\n```\n\n----------------------------------------\n\nTITLE: Defining Kustomization Overlay Template\nDESCRIPTION: This YAML defines a Kustomization overlay template used by the resource pack controller. It includes variables that will be populated with data from the MinimalGCP custom resource, such as region, projectID, and credentials. The commonLabels section defines labels that will be applied to all generated resources. The `resources` array is intended to be overridden by the controller.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\n\"# The MinimalGCP instance will be in the Kustomize resources for templating.\n# Resource pack generic controller will use this template in another directory\n# to create a final overlay for rendering. It will fill the missing runtime pieces such as name, namespace\n# and uid of the MinimalGCP instance. Then it will refer to this `resources` folder.\n#\n# NOTE: `resources` array in this file will be overridden by the controller. Use\n# kustomization.yaml file to list your resources.\n\nkind: Kustomization\nnamePrefix: \\\"\\\"\ncommonLabels:\n  gcp.resourcepacks.crossplane.io/name: \\\"\\\"\n  gcp.resourcepacks.crossplane.io/uid: \\\"\\\"\n\nvars:\n- name: REGION\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: \\\"\\\"\n  fieldref:\n    fieldpath: spec.region\n- name: GCP_PROJECT_ID\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: \\\"\\\"\n  fieldref:\n    fieldpath: spec.projectID\n- name: CRED_SECRET_KEY\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: \\\"\\\"\n  fieldref:\n    fieldpath: spec.credentialsSecretRef.key\n- name: CRED_SECRET_NAME\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: \\\"\\\"\n  fieldref:\n    fieldpath: spec.credentialsSecretRef.name\n- name: CRED_SECRET_NAMESPACE\n  objref:\n    kind: MinimalGCP\n    apiVersion: gcp.resourcepacks.crossplane.io/v1alpha1\n    name: \\\"\\\"\n  fieldref:\n    fieldpath: spec.credentialsSecretRef.namespace\"\n```\n\n----------------------------------------\n\nTITLE: Defining Stack Resource with Parent Labels in YAML\nDESCRIPTION: Example of a Stack YAML resource, demonstrating the use of parent labels to establish its relationship with the StackInstall resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: Stack\nmetadata:\n  creationTimestamp: \"2019-10-23T23:47:38Z\"\n  generation: 1\n  name: sample-stack-wordpress\n  namespace: app-project1-dev\n  ownerReferences:\n  - apiVersion: stacks.crossplane.io/v1alpha1\n    kind: StackInstall\n    name: sample-stack-wordpress\n    uid: 86c89c94-cfc0-474e-b3b3-beffc09e7793\n  resourceVersion: \"6431\"\n  selfLink: /apis/stacks.crossplane.io/v1alpha1/namespaces/app-project1-dev/stacks/sample-stack-wordpress\n  uid: ec52c8c2-379f-45ec-9458-e40f070f8d2e\n  labels:\n    app.kubernetes.io/managed-by: stack-manager\n    core.crossplane.io/parent-group: \"stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-kind: \"StackInstall\"\n    core.crossplane.io/parent-name: \"sample-stack-wordpress\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n...\n```\n\n----------------------------------------\n\nTITLE: Generated ContainerizedWorkload Configuration\nDESCRIPTION: ContainerizedWorkload resource automatically generated by the ApplicationConfiguration controller with parameterized values applied.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-oam-workflow.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.oam.dev/v1alpha2\nkind: ContainerizedWorkload\nmetadata:\n  name: myapp-workload\nspec:\n  osType: linux\n  containers:\n  - name: tbs11-app\n    image: hello-world:latest\n    resources:\n      cpu:\n        required: 1.0\n      memory:\n        required: 100MB\n    env:\n      - name: DB_HOST\n        valueFrom:\n          secretKeyRef:\n            name: mysqlconn\n            key: endpoint\n      - name: DB_USER\n        valueFrom:\n          secretKeyRef:\n            name: mysqlconn\n            key: username\n      - name: DB_PASSWORD\n        valueFrom:\n          secretKeyRef:\n            name: mysqlconn\n            key: password\n    ports:\n      - containerPort: 8080\n```\n\n----------------------------------------\n\nTITLE: Creating Namespaced Role for Composite Resource Claims\nDESCRIPTION: This YAML snippet demonstrates the creation of a namespaced 'crossplane-edit' role. It includes rules for accessing events, secrets, and specific composite resource claims within the namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_13\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: crossplane-edit\nrules:\n- apiGroups: [\"\"]\n  resources: [events]\n  verbs: [get, list, watch]\n- apiGroups: [\"\"]\n  resources: [secrets]\n  verbs: [\"*\"]\n- apiGroups: [xr.example.org]\n  resources:\n  - exampleclaims\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Package Installation Job Processing - Go\nDESCRIPTION: Implementation of package installation job processing, including object modifications and labeling\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/6fc50822fbf11a7d31f8a9dabde5c8948c3b36ac/pkg/controller/packages/install/installjob.go#L259\n```\n\n----------------------------------------\n\nTITLE: Resource Deletion Error Example in Bash\nDESCRIPTION: Example error message when attempting to delete a resource that is in use.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-generic-usage-type.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nError from server (The resource is used by Release/my-release): error when deleting \"my-cluster.yaml\": admission webhook \"nousages.apiextensions.crossplane.io\" denied the request: The resource is used by Release/my-release\n```\n\n----------------------------------------\n\nTITLE: Configuring Resource Overlays in YAML\nDESCRIPTION: YAML configuration for specifying resource overlays that allow overriding generated code with custom implementations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\nresource_overlays:\n- terraform_name: google_service_account\n  full_package_name: \"github.com/crossplane/provider-gcp/apis/iam/v1alpha1/\"\n```\n\n----------------------------------------\n\nTITLE: Setting up RBAC for Kubernetes Control Cluster\nDESCRIPTION: Configuration for ServiceAccount and RBAC permissions required for managing Kubernetes resources in the control cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: my-service-account\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: my-role\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - events\n  verbs:\n  - create\n  - update\n  - patch\n  - delete\n- apiGroups:\n  - \"\"\n  resources:\n  - secrets\n  - deployments\n  verbs:\n  - get\n  - list\n  - watch\n  - create\n  - update\n- apiGroups:\n  - minio.rook.io\n  - cockroachdb.rook.io\n  resources:\n  - \"*\"\n  verbs:\n  - \"*\"\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: my-role-binding\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: my-role\nsubjects:\n- kind: ServiceAccount\n  name: my-service-account\n  namespace: my-infra-dev\n```\n\n----------------------------------------\n\nTITLE: Defining MySQL Instance with Parent Labels in YAML\nDESCRIPTION: Example of a MySQLInstance YAML resource, demonstrating the parent labels that establish its relationship with the WordpressInstance resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: MySQLInstance\nmetadata:\n  name: wordpress-mysql-wordpress\n  labels:\n    stack: sample-stack-wordpress\n    core.crossplane.io/parent-kind: \"WordpressInstance\"\n    core.crossplane.io/parent-group: \"wordpress.samples.stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-name: \"my-wordpressinstance\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n    app.kubernetes.io/managed-by: stack-manager\n...\n```\n\n----------------------------------------\n\nTITLE: Helm Chart Metadata\nDESCRIPTION: This snippet displays various metadata about the Helm chart, including its name, description, and versions. It uses Go template expressions to access the corresponding fields from the `Chart` object provided by Helm.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/templates/NOTES.txt#2025-04-21_snippet_1\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Chart Name: {{.Chart.Name}}\"\n```\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Chart Description: {{.Chart.Description}}\"\n```\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Chart Version: {{.Chart.Version}}\"\n```\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Chart Application Version: {{.Chart.AppVersion}}\"\n```\n\n----------------------------------------\n\nTITLE: Example of Problematic YAML Configuration\nDESCRIPTION: This YAML example illustrates the problem that is avoided by making fields required in optional embedded structs. Without this design rule, users could create resources with meaningless empty embedded structs.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_10\n\nLANGUAGE: yaml\nCODE:\n```\n...\nspec:\n  providerConfigRef:\n    name: provider-gcp\n  reclaimPolicy: Delete\n  writeConnectionSecretToRef: {}\n  forProvider:\n    embeddedStructOne: # valid if we do not require embedded field\n    fieldOne: my-cool-field\n```\n\n----------------------------------------\n\nTITLE: Resulting KubernetesApplication Configuration\nDESCRIPTION: Final KubernetesApplication resource generated by the ContainerizedWorkload controller for deployment to target clusters.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-oam-workflow.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesApplication\nmetadata:\n  name: myapp-workload-0003\nspec:\n  resourceSelector:\n    matchLabels:\n      app: 2a23de82-58e4-11ea-8e2d-0242ac130003\n  targetSelector:\n    matchLabels: \n  resourceTemplates:\n    - metadata:\n        name: myappworkload-deployment\n        labels:\n           app: 2a23de82-58e4-11ea-8e2d-0242ac130003\n      spec:\n        template:\n          apiVersion: apps/v1\n          kind: Deployment\n          metadata:\n            namespace: default\n            name: myapp-workload\n            labels:\n               app: 2a23de82-58e4-11ea-8e2d-0242ac130003\n          spec:\n            selector:\n              matchLabels:\n                 app: 2a23de82-58e4-11ea-8e2d-0242ac130003\n            template:\n              metadata:\n                labels:\n                   app: 2a23de82-58e4-11ea-8e2d-0242ac130003\n              spec:\n                - name: tbs11-app\n                  image: hello-world:latest\n                  resources:\n                    cpu:\n                      required: 1.0\n                    memory:\n                      required: 100MB\n                  env:\n                    - name: DB_HOST\n                      valueFrom:\n                        secretKeyRef:\n                          name: mysqlconn\n                          key: endpoint\n                    - name: DB_USER\n                      valueFrom:\n                        secretKeyRef:\n                          name: mysqlconn\n                          key: username\n                    - name: DB_PASSWORD\n                      valueFrom:\n                        secretKeyRef:\n                          name: mysqlconn\n                          key: password\n                  ports:\n                    - containerPort: 8080\n```\n\n----------------------------------------\n\nTITLE: Creating Composite Resource ClusterRole for Edit Access\nDESCRIPTION: This YAML snippet shows the creation of a ClusterRole for edit access to a composite resource. It aggregates to various roles and includes rules for specific API groups and resources related to the composite resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane:composite:examplecomposites.xr.example.org:aggregate-to-edit\n  labels:\n    rbac.crossplane.io/aggregate-to-edit: \"true\"\n    rbac.crossplane.io/aggregate-to-ns-edit: \"true\"\n    rbac.crossplane.io/xrd: examplecomposites.xr.example.org\nrules:\n- apiGroups: [xr.example.org]\n  resources:\n  - exampleclaims\n  - exampleclaims/status\n  - examplecomposites\n  - examplecomposites/status\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Package Writing Implementation - Go\nDESCRIPTION: Reference to the code that writes Package objects and CRDs to stdout during the package installation process\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/a0d139f7cf269599ba916ed15af3fd68ffeabbdf/pkg/packages/unpack.go#L204\n```\n\n----------------------------------------\n\nTITLE: Implementing WriteKeyValues Method for Plugin Secret Store in Go\nDESCRIPTION: This Go code snippet shows the implementation of the WriteKeyValues method for the Plugin Secret Store. It demonstrates how the method interacts with the gRPC client to call the ApplySecret method of the External Secret Store plugin.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-pluggable-secret-stores.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nfunc (ss *SecretStore) WriteKeyValues(ctx context.Context, s *store.Secret, _ ...store.WriteOption) (changed bool, err error) {\n\t// TODO(turkenh): handle write options.\n\tresp, err := pb.NewExternalSecretStoreServiceClient(ss.conn).ApplySecret(ctx, &pb.ApplySecretRequest{\n\t\tConfig: &pb.ConfigReference{\n\t\t\tApiVersion: ss.pluginConfigRef.APIVersion,\n\t\t\tKind:       ss.pluginConfigRef.Kind,\n\t\t\tName:       ss.pluginConfigRef.Name,\n\t\t},\n\t\tSecret: &pb.Secret{\n\t\t\tScopedName: filepath.Join(s.Scope, s.Name),\n\t\t\tMetadata:   s.Metadata.Labels,\n\t\t\tData:       s.Data,\n\t\t},\n\t})\n\tif err != nil {\n\t\treturn false, err\n\t}\n\treturn resp.Changed, nil\n}\n```\n\n----------------------------------------\n\nTITLE: Defining VPC Parameters Structure in Go for AWS Terraform Resources\nDESCRIPTION: Example of a generated Go struct for AWS VPC parameters that maps Crossplane resource fields to Terraform provider fields using custom tags. The struct includes field-level documentation and validation annotations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n// VPCParameters define the desired state of an AWS Virtual Private Cloud.\ntype VPCParameters struct {\n\t// Region is the region you'd like your VPC to be created in.\n\tRegion *string `json:\"region\" tf:\"region\"`\n\n\t// CIDRBlock is the IPv4 network range for the VPC, in CIDR notation. For\n\t// example, 10.0.0.0/16.\n\t// +kubebuilder:validation:Required\n\t// +immutable\n\tCIDRBlock string `json:\"cidrBlock\" tf:\"cidr_block\"`\n\n\t// A boolean flag to enable/disable DNS support in the VPC\n\t// +optional\n\tEnableDNSSupport *bool `json:\"enableDnsSupport,omitempty\" tf:\"enable_dns_support\"`\n\n\t// Indicates whether the instances launched in the VPC get DNS hostnames.\n\t// +optional\n\tEnableDNSHostNames *bool `json:\"enableDnsHostNames,omitempty\" tf:\"enable_dns_host_names\"`\n\n\t// The allowed tenancy of instances launched into the VPC.\n\t// +optional\n\tInstanceTenancy *string `json:\"instanceTenancy,omitempty\" tf:\"instance_tenancy\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Namespace with Custom Credentials Secret\nDESCRIPTION: Kubernetes namespace configuration with custom target namespace and credentials secret specification\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: foo\n  annotations:\n    \"agent.crossplane.io/target-namespace\": bar\n    \"agent.crossplane.io/credentials-secret-name\": my-other-sa-creds\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: my-sa-creds\n  namespace: foo\ntype: Opaque\ndata:\n  kubeconfig: MWYyZDFlMmU2N2Rm...\n```\n\n----------------------------------------\n\nTITLE: Defining Kubernetes Cluster with Parent Labels in YAML\nDESCRIPTION: Example of a KubernetesCluster YAML resource, showing the parent labels that establish its relationship with the WordpressInstance resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-relationship-labels.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: KubernetesCluster\nmetadata:\n  name: wordpress-cluster-wordpress\n  labels:\n    stack: sample-stack-wordpress\n    core.crossplane.io/parent-kind: \"WordpressInstance\"\n    core.crossplane.io/parent-group: \"wordpress.samples.stacks.crossplane.io\"\n    core.crossplane.io/parent-version: \"v1alpha1\"\n    core.crossplane.io/parent-name: \"my-wordpressinstance\"\n    core.crossplane.io/parent-namespace: \"app-project1-dev\"\n    app.kubernetes.io/managed-by: stack-manager\n...\n```\n\n----------------------------------------\n\nTITLE: Component Definition Example in Go - CompositeResources\nDESCRIPTION: Example of a code reference showing the CompositeResources (XR) component used in Crossplane for cluster-scoped resource composition.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\nCompositeResources (XRs)\n```\n\n----------------------------------------\n\nTITLE: Component Definition Example in Go - XRD (CompositeResourceDefinition)\nDESCRIPTION: Example of a code reference showing the CompositeResourceDefinition (XRD) component usage in Crossplane. XRDs are used to create new platform APIs by extending the Kubernetes API.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nCompositeResourceDefinitions (XRDs)\n```\n\n----------------------------------------\n\nTITLE: Package Secret Sync Implementation - Go\nDESCRIPTION: Code handling the synchronization of ServiceAccount secrets for package controllers\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/6fc50822fbf11a7d31f8a9dabde5c8948c3b36ac/pkg/controller/packages/pkg/pkg.go#L696\n```\n\n----------------------------------------\n\nTITLE: Defining Foo Stack Resource in YAML\nDESCRIPTION: Defines a Foo Stack resource with custom resource definitions, templates, and template status.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_19\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: Stack\nmetadata:\n  name: Foo\nspec:\n  customresourcedefinitions:\n  - kind: Foo\n    apiVersion: group/version\n  templates:\n    # the GVK for the CRD the Stack consumer will create\n    foo.group/version:\n      # the template for the resources that the TSM will create\n      templateA: |\n        kind: athing\n        spec:\n          foovar: {{ .spec.foo }}\n  # the template for the status of the resource the Stack consumer created\n  templateStatus:\n    foo.group/version: |\n      statusthing: {{ .templateA.status.bar }}\n```\n\n----------------------------------------\n\nTITLE: Reference to Complex Resource Comparison\nDESCRIPTION: A reference to a more complex YAML example comparing RDS Instance resource definitions between different provider implementations, stored as a separate file.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nassets/design-doc-provider-strategy/cloudcontrol/comparison-dbinstance.yaml\n```\n\n----------------------------------------\n\nTITLE: Defining Resource SyncDeleter Interface in Go\nDESCRIPTION: Interface providing high-level object handling with sync and delete operations for resource management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\ntype syncdeleter interface {\n\tdelete(context.Context) (reconcile.Result, error)\n\tsync(context.Context) (reconcile.Result, error)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Secret Store Connection Details Manager in Go\nDESCRIPTION: This Go code snippet shows how to add the Secret Store Connection Details Manager as a ConnectionPublisher in the Setup function of a controller. It includes a feature flag check for enabling External Secret Stores.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\nfunc SetupServiceAccountKey(mgr ctrl.Manager, o controller.Options) error {\n     name := managed.ControllerName(v1alpha1.ServiceAccountKeyGroupKind)\n\n     cps := []managed.ConnectionPublisher{managed.NewAPISecretPublisher(mgr.GetClient(), mgr.GetScheme())}\n     if o.Features.Enabled(features.EnableAlphaExternalSecretStores) {\n             cps = append(cps, connection.NewDetailsManager(mgr.GetClient(), scv1alpha1.StoreConfigGroupVersionKind))\n     }\n\n     r := managed.NewReconciler(mgr,\n             resource.ManagedKind(v1alpha1.ServiceAccountKeyGroupVersionKind),\n             managed.WithInitializers(),\n             managed.WithExternalConnecter(&serviceAccountKeyServiceConnector{client: mgr.GetClient()}),\n             managed.WithPollInterval(o.PollInterval),\n             managed.WithLogger(o.Logger.WithValues(\"controller\", name)),\n             managed.WithRecorder(event.NewAPIRecorder(mgr.GetEventRecorderFor(name))),\n             managed.WithConnectionPublishers(cps...))\n\n     return ctrl.NewControllerManagedBy(mgr).\n             Named(name).\n```\n\n----------------------------------------\n\nTITLE: Parsing ResourceClass Parameters in Go\nDESCRIPTION: A Go function that creates an RDSInstanceSpec from a map of parameters. This illustrates the current untyped parameter handling in Crossplane, which lacks schema validation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\n// NewRDSInstanceSpec from properties map\nfunc NewRDSInstanceSpec(properties map[string]string) *RDSInstanceSpec {\n\tspec := &RDSInstanceSpec{\n\t\tResourceSpec: xpv1.ResourceSpec{\n\t\t\tReclaimPolicy: xpv1.ReclaimRetain,\n\t\t},\n\t}\n\n\tval, ok := properties[\"masterUsername\"]\n\tif ok {\n\t\tspec.MasterUsername = val\n\t}\n\n\tval, ok = properties[\"engineVersion\"]\n\tif ok {\n\t\tspec.EngineVersion = val\n\t}\n\n\tval, ok = properties[\"class\"]\n\tif ok {\n\t\tspec.Class = val\n\t}\n\n\tval, ok = properties[\"size\"]\n\tif ok {\n\t\tif size, err := strconv.Atoi(val); err == nil {\n\t\t\tspec.Size = int64(size)\n\t\t}\n\t}\n\n\tval, ok = properties[\"securityGroups\"]\n\tif ok {\n\t\tspec.SecurityGroups = append(spec.SecurityGroups, strings.Split(val, \",\")...)\n\t}\n\n\tval, ok = properties[\"subnetGroupName\"]\n\tif ok {\n\t\tspec.SubnetGroupName = val\n\t}\n\n\treturn spec\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Generic ResourceClass in Crossplane\nDESCRIPTION: A sample YAML configuration for a generic ResourceClass that provisions a MySQL database on AWS. This shows the current approach where all resource classes use the same kind regardless of what they provision.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-strongly-typed-class.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.crossplane.io/v1alpha1\nkind: ResourceClass\nmetadata:\n  name: standard-mysql\n  namespace: crossplane-system\nparameters:\n  class: db.t2.small\n  masterUsername: masteruser\n  securityGroups: \"sg-ab1cdefg,sg-05adsfkaj1ksdjak\"\n  size: \"20\"\nprovisioner: rdsinstance.database.aws.crossplane.io/v1alpha1\nproviderRef:\n  name: aws-provider\nreclaimPolicy: Delete\n```\n\n----------------------------------------\n\nTITLE: Referencing Provider Package in Crossplane\nDESCRIPTION: Example of referencing an OCI image containing a Crossplane provider package, which extends Crossplane's API with additional functionality.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_3\n\nLANGUAGE: xml\nCODE:\n```\nxpkg.upbound.io/crossplane-contrib/provider-argocd:v0.9.1\n```\n\n----------------------------------------\n\nTITLE: Creating ResourceClaim in Crossplane YAML\nDESCRIPTION: This YAML snippet shows how to create a ResourceClaim in Crossplane, referencing a ResourceClass to provision an AWS S3 bucket.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-reclaim-policy.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: storage.crossplane.io/v1alpha1\nkind: Bucket\nmetadata:\n  name: my-bucket\n  namespace: default\nspec:\n  classRef:\n    name: standard-aws-bucket\n    namespace: crossplane-system\n  name: my-bucket-1234\n```\n\n----------------------------------------\n\nTITLE: Generating CRDs for Crossplane Provider\nDESCRIPTION: This shell command generates the Custom Resource Definitions (CRDs) for the Crossplane provider, including the new Secret StoreConfig type.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nmake generate\n```\n\n----------------------------------------\n\nTITLE: Defining Plus One CRD in YAML\nDESCRIPTION: Defines the Custom Resource Definition (CRD) for the Plus One resource, specifying its schema and properties.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_16\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: plusone.crossplane.example.com\nspec:\n  group: crossplane.example.com\n  versions:\n    - name: v1\n      served: true\n      storage: true\n      schema:\n        openAPIV3Schema:\n          type: object\n          properties:\n            status:\n              type: object\n              properties:\n                output:\n                  type: string\n      subresources:\n        status: {}\n  scope: Namespaced\n  names:\n    plural: plusones\n    singular: plusone\n    kind: PlusOne\n```\n\n----------------------------------------\n\nTITLE: Listing Crossplane KubernetesApplication Resources in Bash\nDESCRIPTION: This snippet demonstrates how to list and inspect KubernetesApplication and KubernetesApplicationResource objects using kubectl commands, showing the status of complex application deployments.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ kubectl -n complex get kubernetesapplication wordpress-demo\nNAME             CLUSTER                  STATUS               DESIRED   SUBMITTED\nwordpress-demo   wordpress-demo-cluster   PartiallySubmitted   3         2\n\n$ kubectl -n complex get kubernetesapplicationresource --selector app=wordpress-demo\nNAME                        TEMPLATE-KIND   TEMPLATE-NAME   CLUSTER                  STATUS\nwordpress-demo-deployment   Deployment      wordpress       wordpress-demo-cluster   Submitted\nwordpress-demo-namespace    Namespace       wordpress       wordpress-demo-cluster   Submitted\nwordpress-demo-service      Service         wordpress       wordpress-demo-cluster   Failed\n```\n\n----------------------------------------\n\nTITLE: Error Handling with Nolint Directive in Go\nDESCRIPTION: Demonstrates proper usage of nolint directives when writing to a hash function, including specific linter disabling and required explanatory comment.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\nfunc hash(s string) string {\n        h := fnv.New32()\n        _ = h.Write([]byte(s)) //nolint:errcheck // Writing to a hash never returns an error.\n        return fmt.Sprintf(\"%x\", h.Sum32())\n}\n```\n\n----------------------------------------\n\nTITLE: Error Handling in Go Resource Controller\nDESCRIPTION: Example of error handling in a Crossplane resource controller, using errors.Wrap to add context to database not found errors.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_7\n\nLANGUAGE: go\nCODE:\n```\nreturn errors.Wrap(resource.Ignore(database.IsNotFound, err), \"cannot delete instance\")\n```\n\n----------------------------------------\n\nTITLE: Provider API Object Definition with Embedded Struct\nDESCRIPTION: Example Go struct representing a provider's API object with an embedded struct containing a single field. This is used to demonstrate the pattern for handling embedded structs in Crossplane resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_8\n\nLANGUAGE: go\nCODE:\n```\n// This is the provider's representation of the API object\ntype ProviderAPIObject struct {\n  // Configurable field in top-level object\n  FieldOne *string `json:\"fieldOne,omitempty\"`\n  \n  // Embedded struct in top-level object\n  EmbeddedStructOne *EmbeddedStruct `json:\"embeddedStructOne,omitempty\"`\n}\n\ntype EmbeddedStruct struct {\n  // This field is configurable so it should be in spec.forProvider\n  SomeConfigurableField *string `json:\"someConfigurableField,omitempty\"`\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Template Stack Project in Crossplane\nDESCRIPTION: Command to create and initialize a new template stack project with Helm support using the Crossplane CLI.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_13\n\nLANGUAGE: bash\nCODE:\n```\nkubectl crossplane stack init --template\n```\n\n----------------------------------------\n\nTITLE: CrossplaneApplicationResourceReference YAML Definition\nDESCRIPTION: YAML specification for a CrossplaneApplicationResourceReference resource that manages remote resource ownership and provides context about the controlling Crossplane instance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: workload.crossplane.io/v1alpha1\nkind: CrossplaneApplicationResourceReference\nmetadata:\n  name: demo\nremote:\n  apiServer: https://some.crossplane.apiserver.example.org\n  # Everything below represents the controlling resource in the controlling\n  # Crossplane API server.\n  apiVersion: workload.crossplane.io/v1alpha1\n  kind: KubernetesApplication\n  metadata:\n    name: demo\n    namespace: demo\n  uid: some-cool-uuid\n```\n\n----------------------------------------\n\nTITLE: Defining Configuration Package Metadata in YAML\nDESCRIPTION: Example of a Configuration package metadata specification in YAML format, showing the basic metadata structure including annotations and package identification.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-package-format-v2.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: meta.pkg.crossplane.io/v1alpha1\nkind: Configuration\nmetadata:\n  name: configuration-example\n  annotations:\n    company: Upbound\n    maintainer: Nic Cope <negz@upbound.io>\n    keywords: cloud-native, kubernetes, example\n    source: github.com/crossplane-contrib/config-example\n    license: Apache-2.0\n    description: |\n      The Example configuration adds example resources to Crossplane.\n    provider: example\n```\n\n----------------------------------------\n\nTITLE: Defining Package Annotations in Crossplane YAML\nDESCRIPTION: This YAML snippet demonstrates the recommended annotations for a Crossplane package, including metadata such as maintainer, source URL, license, description, and icon URI. It also shows how to specify human-friendly names for the package, API groups, and kinds.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-package-annotations.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: meta.pkg.crossplane.io/v1alpha1\nkind: Provider\nmetadata:\n  name: example\n  annotations:\n    # The package's maintainers, as a short opaque text string.\n    meta.crossplane.io/maintainer: Example T. Maintainer <example@example.org>\n\n    # The URL at which the package's source can be found.\n    meta.crossplane.io/source: https://github.com/crossplane/provider-example\n\n    # The license under which the package's source is released.\n    meta.crossplane.io/license: Apache-2.0\n\n    # A one sentence description of the package.\n    meta.crossplane.io/description: |\n      The Google Cloud Platform (GCP) Crossplane provider adds support for\n      managing GCP resources in Kubernetes.\n\n    # A longer description, documentation, etc.\n    meta.crossplane.io/readme: |\n      provider-example is a really great Crossplane provider...\n\n    # The provider's SVG icon URI. The SVG should be optimized for 24, 48, 65px\n    # and 2x versions. Consumers are encouraged to support at least data URIs.\n    # https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    meta.crossplane.io/iconURI: data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4KBIWXMA\n\n    # A 'human-friendly' name for this package.\n    friendly-name.meta.crossplane.io: \"Example Provider\"\n\n    # A 'human-friendly' name for an API group defined by this package.\n    friendly-group-name.meta.crossplane.io/database.example.org: \"Databases\"\n\n    # A 'human-friendly' name for a an API kind defined by this package. Note\n    # that the kind is singular, not plural (i.e. instance not instances).\n    friendly-kind-name.meta.crossplane.io/cloudsqlinstance.database.example.org: \"CloudSQL Instance\"\nspec:\n  controller:\n    image: crossplane/provider-example:v0.1.0\n```\n\n----------------------------------------\n\nTITLE: Defining Stack Install Resource in YAML\nDESCRIPTION: Creates a StackInstall resource to install a Template Stack.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_18\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: stacks.crossplane.io/v1alpha1\nkind: StackInstall\nmetadata:\n  name: Foo\nspec:\n  package: example/foo-template-stack:latest\n```\n\n----------------------------------------\n\nTITLE: Crossplane Agent with Custom Cluster Identifier\nDESCRIPTION: Helm installation command specifying a custom cluster identifier for conflict prevention\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nhelm install crossplane/agent \\\n  --set default-credentials-secret-name=my-sa-creds \\\n  --set cluster-identifier=my-funny-little-cluster\n```\n\n----------------------------------------\n\nTITLE: Navigate to project directory\nDESCRIPTION: Changes the current directory to the user's project directory. This is necessary to run subsequent commands that operate within the context of the project.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\n\"cd myproject\"\n\n```\n\n----------------------------------------\n\nTITLE: Discovering Environment-Level CRDs with kubectl\nDESCRIPTION: Command to fetch cluster-scoped Custom Resource Definitions (CRDs) using Crossplane environment scope label\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nkubectl get crds --selector crossplane.io\\/scope=environment\n```\n\n----------------------------------------\n\nTITLE: Modifying Subnet Type to Include VPCIDRef in Go\nDESCRIPTION: Go code diff showing the modification of the Subnet type to include a VPCIDRef field for attribute referencing.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_3\n\nLANGUAGE: go\nCODE:\n```\n- // VPCID is the ID of the VPC.\n- VPCID string `json:\"vpcId\"`\n+ // VPCIDRef resolves the VPCID from the refenreced VPC\n+ VPCIDRef *VpcIDRefResolver `json:\"vpcIdRef\" resource:\"attributereferencer\"`\n```\n\n----------------------------------------\n\nTITLE: Executing Command as Crossplane Admin\nDESCRIPTION: Example of running a Kubernetes command with crossplane-admin group privileges using impersonation\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nkubectl {any crossplane-admin operation} --as-group=crossplane:masters\n```\n\n----------------------------------------\n\nTITLE: Crossplane Resource Type References\nDESCRIPTION: References to core Crossplane resource types that define the platform APIs and extension model, including Provider, Function, Configuration, CompositeResourceDefinition, CompositeResource, and Claim.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_4\n\nLANGUAGE: xml\nCODE:\n```\nProvider\n```\n\nLANGUAGE: xml\nCODE:\n```\nFunction\n```\n\nLANGUAGE: xml\nCODE:\n```\nConfiguration\n```\n\nLANGUAGE: xml\nCODE:\n```\nDeployment\n```\n\nLANGUAGE: xml\nCODE:\n```\nCompositeResourceDefinition\n```\n\nLANGUAGE: xml\nCODE:\n```\nXRD\n```\n\nLANGUAGE: xml\nCODE:\n```\nCompositeResource\n```\n\nLANGUAGE: xml\nCODE:\n```\nXR\n```\n\nLANGUAGE: xml\nCODE:\n```\nClaim\n```\n\nLANGUAGE: xml\nCODE:\n```\nComposition\n```\n\n----------------------------------------\n\nTITLE: Example External Resource Labels\nDESCRIPTION: Illustrates how to label external resources with Crossplane-specific metadata for easier identification and management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-managed-resource-api-design.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\n\"crossplane-kind\": \"vpc.network.aws.crossplane.io\"\n\"crossplane-name\": \"myappnamespace-mynetwork-5sc8a\"\n\"crossplane-provider\": \"aws-provider\"\n```\n\n----------------------------------------\n\nTITLE: Defining ClusterRole for Crossplane Admin\nDESCRIPTION: YAML definition for the built-in crossplane-admin ClusterRole object. This role aggregates permissions from other roles labeled for Crossplane admin access.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane-admin\n  labels:\n    crossplane.io/scope: \"system\" # For discoverability for tools\naggregationRule:\n  clusterRoleSelectors:\n  - matchLabels:\n      rbac.crossplane.io/aggregate-to-crossplane-admin: \"true\"\nrules: [] # Rules are automatically filled in by the controller manager.\n```\n\n----------------------------------------\n\nTITLE: Creating Plus One Custom Resource in YAML\nDESCRIPTION: Creates a Plus One custom resource instance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_15\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: plusses.crossplane.example.com\nkind: PlusOne\nmetadata:\n  name: plusses\n```\n\n----------------------------------------\n\nTITLE: Desired Local-Mode Experience for Remote Clusters\nDESCRIPTION: Example YAML showing the desired UX for application operators using the proposed agent-based approach. This simplifies resource definitions by allowing direct deployment in remote clusters without wrappers, while still connecting to centrally managed infrastructure.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: common.crossplane.io/v1alpha1\nkind: MySQLInstanceRequirement\nmetadata:\n  name: sqldb\n  namespace: default\nspec:\n  version: \"5.7\"\n  storageGB: 20\n  writeConnectionSecretToRef:\n    name: sql-creds\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: wp\n  namespace: default\nspec:\ncontainers:\n- name: wordpress\n    image: \"wordpress:4.6.1-apache\"\n    env:\n    - name: WORDPRESS_DB_PASSWORD\n    valueFrom:\n        secretKeyRef:\n          name: sql-creds\n          key: password\n```\n\n----------------------------------------\n\nTITLE: Installing GCP Resource Pack in Kubernetes\nDESCRIPTION: YAML configuration for installing a GCP resource pack in Kubernetes. This snippet demonstrates how to create a custom resource instance of the resource pack's CRD.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: resourcepack.crossplane.io/v1alpha1\nkind: GCPEnvironment\nmetadata:\n  name: production\n  annotations:\n    resourcepacks.crossplane.io/keep-defaulting-annotations: \"true\"\nspec:\n  credentialsSecretRef:\n    name: gcp-creds\n    namespace: crossplane-system\n  region: us-west2\n  projectID: crossplane-playground\n  networkCIDR: 172.16.0.0/16\n```\n\n----------------------------------------\n\nTITLE: Properly Scoped Error Handling Pattern\nDESCRIPTION: Recommended approach to error handling with errors scoped to their conditional blocks to prevent shadowing issues.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_12\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        if err := enable(); err != nil {\n                // 'err' exists here inside the conditional block.\n                return errors.Wrap(err, \"could not enable the thing\")\n        }\n\n        // 'err' does not exist here at the function scope. It's scoped to the\n        // above conditional block.\n\n        return errors.Wrap(emit(), \"could not emit the thing\")\n}\n```\n\n----------------------------------------\n\nTITLE: Sample Crossplane Values Configuration for Helm\nDESCRIPTION: A sample YAML configuration for Crossplane installation that specifies the number of replicas, deployment strategy, and container image details including repository, tag, and pull policy.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/README.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nreplicas: 1\n\ndeploymentStrategy: RollingUpdate\n\nimage:\n  repository: xpkg.crossplane.io/crossplane/crossplane\n  tag: alpha\n  pullPolicy: Always\n```\n\n----------------------------------------\n\nTITLE: Non-Scoped Error Handling Pattern (Anti-pattern)\nDESCRIPTION: Example showing a non-recommended approach to error handling where the error variable is scoped to the function level, which can lead to shadowing issues.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_11\n\nLANGUAGE: go\nCODE:\n```\nfunc example() error {\n        err := enable()\n        if err != nil {\n                return errors.Wrap(err, \"could not enable the thing\")\n        }\n\n        // 'err' still exists here at the function scope.\n\n        return errors.Wrap(emit(), \"could not emit the thing\")\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Delete Function for Helm Release Controller\nDESCRIPTION: Executes helm uninstall command to remove the release and allows crossplane-runtime to remove the finalizer upon successful deletion.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-helm-provider.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\n// Delete performs helm uninstall\nfunc (c *external) Delete(ctx context.Context, mg resource.Managed) error {\n    // Implementation details omitted for brevity\n    return nil\n}\n```\n\n----------------------------------------\n\nTITLE: Scheduling a RedisCluster Claim Using Labels\nDESCRIPTION: In this YAML snippet, a RedisCluster claim is defined with a classSelector that uses labels to match resource classes with specific attributes, such as version, region, and replication. This enables dynamic selection of appropriate resource classes based on user-defined criteria.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-simple-class-selection.md#2025-04-21_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: cache.crossplane.io/v1alpha1\nkind: RedisCluster\nmetadata:\n  name: my-cache\nspec:\n  classSelector:\n    matchLabels:\n      engineVersion: \"3.2\"\n      region: us-west\n      replicated: \"true\"\n```\n\n----------------------------------------\n\nTITLE: Pod-Level Security Context Configuration\nDESCRIPTION: Default security context configuration for Crossplane package deployments, preventing root access and enforcing non-root execution\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nsecurityContext:\n  runAsNonRoot: true\n```\n\n----------------------------------------\n\nTITLE: Complete GKE Cluster API Specification\nDESCRIPTION: Shows a comprehensive translation of the GKE cluster external resource's writable API object fields to Kubernetes YAML specification, excluding deprecated fields.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-resource-connectivity-mvp.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.gcp.crossplane.io/v1alpha1\nkind: GKECluster\nmetadata:\n  namespace: crossplane-system\n  name: example\nspec:\n  nameFormat: mycoolname\n  description: My cool cluster\n  masterAuth:\n    username: cooluser\n    password: secretpassword\n    clientCertificateConfig:\n      issueClientCertificate: true\n  loggingService: logging.googleapis.com/kubernetes\n  monitoringService: monitoring.googleapis.com\n  network: mycoolnetwork\n  clusterIpv4Cidr: 10.0.0.0/8\n  addonsConfig:\n    httpLoadBalancing:\n      disabled: false\n    horizontalPodAutoscaling:\n      disabled: false\n    networkPolicyConfig:\n      disabled: false\n  subnetwork: mycoolsubnetwork\n  nodePools:\n  - name: string\n    config:\n      machineType: n1-standard-2\n      diskSizeGb: 20\n      oauthScopes:\n      - cool\n      serviceAccount: mycoolserviceaccount@accounts.google.com\n      metadata:\n        cool: very\n      imageType: coreos/stable\n      labels:\n        cool: true\n      localSsdCount: 0\n      tags:\n      - cool\n      preemptible: false\n      accelerators:\n        acceleratorCount: 2\n        acceleratorType: large\n      diskType: pd-ssd\n      minCpuPlatform: Intel Haswell\n      taints:\n        - key: color\n          value: purple\n          effect: NO_SCHEDULE\n    initialNodeCount: 3\n    version: 1.14\n    autoscaling:\n      enabled: true\n      minNodeCount: 3\n      maxNodeCount: 9\n    management:\n      autoUpgrade: true\n      autoRepair: true\n    maxPodsConstraint:\n      maxPodsPerNode: 254\n  locations:\n  - us-central1-a\n  enableKubernetesAlpha: false\n  resourceLabels:\n    cool: very\n  legacyAbac:\n    enabled: false\n  networkPolicy:\n    provider: CALICO\n    enabled: true\n  ipAllocationPolicy:\n    useIpAliases: true\n    createSubnetwork: false\n    subnetworkName: mycoolsubnetwork\n    clusterSecondaryRangeName: mycoolpodsrange\n    servicesSecondaryRangeName: mycoolservicesrange\n    clusterIpv4CidrBlock: 10.0.0.0/8\n    nodeIpv4CidrBlock: 172.16.1.0/24\n    servicesIpv4CidrBlock: 192.168.0.0/24\n    tpuIpv4CidrBlock: 172.16.2.0/24\n  masterAuthorizedNetworksConfig:\n    enabled: true\n    cidrBlocks:\n      displayName: coolcidr\n      cidrBlock: 93.80.0.0/16\n  defaultMaxPodsConstraint:\n    maxPodsPerNode: 254\n  resourceUsageExportConfig:\n    bigqueryDestination:\n      datasetId: mycooldataset\n    enableNetworkEgressMetering: true\n    consumptionMeteringConfig:\n      enabled: true\n  privateClusterConfig:\n    enablePrivateNodes: true\n    enablePrivateEndpoint: true\n    masterIpv4CidrBlock: 172.16.0.0/16\n  initialClusterVersion: 1.13\n  enableTpu: false\n```\n\n----------------------------------------\n\nTITLE: Git Commit with Sign-off Option\nDESCRIPTION: This snippet shows the Git command to create a commit while automatically signing it off. This is important for adhering to the Developer Certificate of Origin.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ngit commit -s -m 'This is my commit message'\n```\n\n----------------------------------------\n\nTITLE: Modifying Generate Command in Go\nDESCRIPTION: This code diff shows how to modify the generate command in the api/generate.go file. It removes the 'trivialVersions=true' option to allow generation of CRDs with the PublishConnectionDetailsTo API.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\n//go:generate go run -tags generate sigs.k8s.io/controller-tools/cmd/controller-gen object:headerFile=../hack/boilerplate.go.txt paths=./... crd:trivialVersions=true,crdVersions=v1 output:artifacts:config=../package/crds\n//go:generate go run -tags generate sigs.k8s.io/controller-tools/cmd/controller-gen object:headerFile=../hack/boilerplate.go.txt paths=./... crd:crdVersions=v1 output:artifacts:config=../package/crds\n```\n\n----------------------------------------\n\nTITLE: Reconciled Hello World Resource Status in YAML\nDESCRIPTION: Shows the reconciled Hello World resource with the generated greeting in its status.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: helloworld.crossplane.example.com\nkind: HelloWorld\nmetadata:\n  name: world\nspec:\n  name: \"World\"\nstatus:\n  greeting: \"Hello, World!\"\n```\n\n----------------------------------------\n\nTITLE: Using the Kubernetes Client in Integration Tests in Go\nDESCRIPTION: Demonstrates how to retrieve the Kubernetes client from the athodyd manager and inject it into test functions. This allows tests to interact with the API server for creating and manipulating resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nfor name, tc := range cases {\n    t.Run(name, func(t *testing.T) {\n        err := tc.test(a.GetClient()) // retrieve the kubernetes client from athodyd\n        if err != nil {\n            t.Error(err)\n        }\n    })\n}\n```\n\n----------------------------------------\n\nTITLE: Immutable Field Marker Comment\nDESCRIPTION: Code generator comment marker used to indicate immutable fields in Crossplane resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-webhooks.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\n// +immutable\n```\n\n----------------------------------------\n\nTITLE: Basic Package Directory Structure\nDESCRIPTION: Shows the minimum required file tree structure for a Crossplane package manager implementation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n.registry/\n├── app.yaml\n├── install.yaml\n└── resources\n      └── crd.yaml\n```\n\n----------------------------------------\n\nTITLE: Component Definition Example in Go - Compositions\nDESCRIPTION: Example of a code reference showing the Compositions component that contains blueprint logic for resource composition in Crossplane.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nCompositions\n```\n\n----------------------------------------\n\nTITLE: Referencing a Specific CloudSQL Instance Class\nDESCRIPTION: This YAML example shows how a resource claim can directly reference a specific CloudSQLInstanceClass using the classRef field, bypassing label selection. It requires the corresponding CloudSQLInstanceClass to be predefined in the cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-simple-class-selection.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  namespace: acme-team\n  name: gitlab-database\nspec:\n  classRef:\n    apiVersion: database.gcp.crossplane.io/v1alpha2\n    kind: CloudSQLInstanceClass\n    name: gitlab-experimental\n  writeConnectionSecretToRef:\n    name: app-postgresql-connection\n```\n\n----------------------------------------\n\nTITLE: Container-Level Security Context Configuration\nDESCRIPTION: Detailed security context settings for Crossplane package containers, restricting privilege escalation and root access\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nsecurityContext:\n  allowPrivilegeEscalation: false\n  privileged: false\n  runAsNonRoot: true\n```\n\n----------------------------------------\n\nTITLE: Defining a Monolithic Kubernetes Application in YAML\nDESCRIPTION: This YAML snippet demonstrates an alternative 'monolithic' design for a KubernetesApplication resource. It includes the application specification, resource templates, and status information for both the application and its managed resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\n---\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesApplication\nmetadata:\n  name: demo\nspec:\n  clusterSelector:\n    provider: gcp\n  resources:\n  - name: demo\n    secretName: demo\n  resourceTemplates:\n  - apiVersion: extensions/v1beta1\n    kind: Deployment\n    metadata:\n      name: wordpress\n      labels:\n        app: wordpress\n    spec:\n      selector:\n        app: wordpress\n      template:\n        metadata:\n          labels:\n            app: wordpress\n        spec:\n          containers:\n            - name: wordpress\n              image: wordpress:4.6.1-apache\n              ports:\n                - containerPort: 80\nstatus:\n  cluster:\n    namespace: cool\n    name: theperfectkubernetescluster\n  conditions:\n  - lastTransitionTime: 2018-10-02T12:25:39Z\n    lastUpdateTime: 2018-10-02T12:25:39Z\n    message: Successfully submitted cool/supercoolwork\n    status: \"True\"\n  remote:\n  - apiVersion: extensions/v1beta1\n    kind: Deployment\n    metadata:\n      name: wordpress\n      labels:\n        app: wordpress\n    status:\n      replicas: 2\n      availableReplicas: 2\n      unavailableReplicas: 2\n      observedGeneration: 3\n      conditions:\n      - lastTransitionTime: 2016-10-04T12:25:39Z\n        lastUpdateTime: 2016-10-04T12:25:39Z\n        message: Replica set \"nginx-deployment-4262182780\" is progressing.\n        reason: ReplicaSetUpdated\n        status: \"True\"\n        type: Progressing\n```\n\n----------------------------------------\n\nTITLE: Amending Commits with Sign-off\nDESCRIPTION: This snippet illustrates how to amend the last Git commit to add a sign-off, which can be used if the contributor forgets to include it initially. This supports compliance with contribution requirements.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ngit commit --amend -s\n```\n\n----------------------------------------\n\nTITLE: Configuring Azure AD Group with Initial Members\nDESCRIPTION: Azure AD Group configuration showing how to set initial members and owners while preventing updates to these fields later.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-ignore-changes.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  managementPolicies: [\"Create\", \"Update\", \"Delete\", \"Observe\"]\n  initProvider:\n    members:\n      - user1\n      - user2\n    owners:\n      - user3\n  forProvider:\n    displayName: my-group\n    securityEnabled: true\n```\n\n----------------------------------------\n\nTITLE: Returning from Reconcile Results in Go\nDESCRIPTION: This Go snippet demonstrates how to return a Reconcile result without requeuing. It is used when the resource processing is complete, and further operations are not required. Dependencies include the controller-runtime library, and its expected input is a Reconcile request. It outputs a Reconcile result with no additional operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-reconciler-patterns.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nreturn reconcile.Result{Requeue: false}, nil\n```\n\n----------------------------------------\n\nTITLE: Signing Off Commits - Git\nDESCRIPTION: This snippet demonstrates how to add a Signed-off-by line to commit messages to comply with the Developer Certificate of Origin. It shows both the manual addition and automation via Git command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\nThis is my commit message\n\nSigned-off-by: Random J Developer <random@developer.example.org>\n```\n\n----------------------------------------\n\nTITLE: Template Stack Manager Deployment Configuration in YAML\nDESCRIPTION: Defines the deployment configuration for the Template Stack Manager including container specifications and arguments.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\nkind: Stack\nspec:\n  controller:\n    deployment:\n      <typical Deployment fields>\n      …\n      containers:\n      - name: template-stack-manager\n        image: crossplane/template-stack-manager:latest\n        args: [\"--stack\", \"stackname\"]\n```\n\n----------------------------------------\n\nTITLE: Listing Compositions\nDESCRIPTION: This bash command uses `kubectl` to list all available `Compositions` in the cluster. Compositions are templates that define how to provision and configure infrastructure resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\nkubectl get compositions\n```\n\n----------------------------------------\n\nTITLE: Creating Namespace, ServiceAccount, Role, and RoleBinding\nDESCRIPTION: This YAML code creates a Namespace named `bar`, a ServiceAccount named `agent1` within that namespace, and a Role and RoleBinding to grant the ServiceAccount permissions to manage secrets and custom resources within the specified API groups. This allows the Crossplane agent running under the `agent1` ServiceAccount to create, read, update, and delete resources within the `bar` namespace in the central cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: bar\n---\n# The ServiceAccount whose credentials will be copied over to remote cluster\n# for agent to use to connect to the central cluster.\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: agent1\n  namespace: bar\n---\n# To be able to create & delete requirements in the designated namespace of\n# the central cluster.\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: agent-requirement\n  namespace: bar\nrules:\n- apiGroups: [\"\"]\n  resources: [\"secrets\"]\n  verbs: [\"*\"]\n- apiGroups: [\"database.acmeco.org\"]\n  resources: [\"*\"]\n  verbs: [\"*\"]\n- apiGroups: [\"network.acmeco.org\"]\n  resources: [\"*\"]\n  verbs: [\"*\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: agent-requirement\n  namespace: bar\nsubjects:\n- kind: ServiceAccount\n  name: agent1\n  apiGroup: rbac.authorization.k8s.io\nroleRef:\n  kind: Role\n  name: agent-requirement\n  apiGroup: rbac.authorization.k8s.io\n```\n\n----------------------------------------\n\nTITLE: Creating Managed Namespace and RoleBinding\nDESCRIPTION: YAML definitions for creating a managed namespace with Crossplane RBAC and a RoleBinding to grant admin access to a user. This example demonstrates how to set up self-service namespace management.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_11\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: v1\nkind: Namespace\nmetadata:\n  creationTimestamp: 2019-10-16T18:25:10Z\n  name: app-team-1\n  labels:\n    rbac.crossplane.io/managed-roles: \"true\" # Package manager creates and will manage namespace specific ClusterRoles when it see's this.\n---\napiVersion: rbac.authorization.k8s.io/v1\n# This role binding allows \"jane\" to admin the Crossplane app-team-1 namespace.\nkind: RoleBinding\nmetadata:\n  name: admin-namespace\n  namespace: app-team-1\nsubjects:\n- kind: User\n  name: jane # Name is case sensitive\n  apiGroup: rbac.authorization.k8s.io\nroleRef:\n  kind: ClusterRole\n  name: crossplane:ns:app-team-1:admin\n  apiGroup: rbac.authorization.k8s.io\n```\n\n----------------------------------------\n\nTITLE: Complete Integration Test Example Using Crossplane Framework in Go\nDESCRIPTION: A comprehensive example showing a complete integration test using the athodyd framework. The test demonstrates setting up the environment, adding controllers and API types, running tests that create and verify resources, and cleaning up afterward.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_6\n\nLANGUAGE: go\nCODE:\n```\n// TestThis tests this\nfunc TestThis(t *testing.T) {\n    cases := map[string]struct {\n        reason string\n        test   func(c client.Client) error\n    }{\n        \"CreateProvider\": {\n            reason: \"A GCP Provider should be created without error.\",\n            test: func(c client.Client) error {\n                p := &v1alpha3.Provider{\n                    ObjectMeta: metav1.ObjectMeta{\n                        Name: \"gcp-provider\",\n                    },\n                    Spec: v1alpha3.ProviderSpec{\n                        Secret: xpv1.SecretKeySelector{\n                            Key: \"credentials.json\",\n                            SecretReference: xpv1.SecretReference{\n                                Name:      \"example-provider-gcp\",\n                                Namespace: \"crossplane-system\",\n                            },\n                        },\n                        ProjectID: \"crossplane-playground\",\n                    },\n                }\n\n                defer func() {\n                    if err := c.Delete(context.Background(), p); err != nil {\n                        t.Error(err)\n                    }\n                }()\n\n                return c.Create(context.Background(), p)\n            },\n        },\n    }\n\n    cfg, err := config.GetConfig()\n    if err != nil {\n        t.Fatal(err)\n    }\n\n    a, err := athodyd.New(cfg, athodyd.WithCRDDirectoryPaths([]string{\"../crds\"}))\n    if err != nil {\n        t.Fatal(err)\n    }\n\n    addToScheme(a.GetScheme())\n    controllerSetupWithManager(a)\n\n    a.Run()\n\n    defer func() {\n        if err := a.Cleanup(); err != nil {\n            t.Fatal(err)\n        }\n    }()\n\n    for name, tc := range cases {\n        t.Run(name, func(t *testing.T) {\n            err := tc.test(a.GetClient())\n            if err != nil {\n                t.Error(err)\n            }\n        })\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Kubernetes Role for Crossplane Agent\nDESCRIPTION: This YAML defines a Kubernetes Role named `crossplane-agent` within the `default` namespace. It grants the Crossplane agent read and write access to all resources within the `acmeco.org` and `database.acmeco.org` API groups. This configuration allows the agent to manage custom resources and other objects defined within these groups.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: crossplane-agent\n  namespace: default\nrules:\n  # all kinds could be under one company/organization group\n- apiGroups: [\"acmeco.org\"] \n  resources: [\"*\"]\n  verbs: [\"*\"]\n  # or there could be logical groupings for different sets of requirements\n- apiGroups: [\"database.acmeco.org\"]\n  resources: [\"*\"]\n  verbs: [\"*\"]\n```\n\n----------------------------------------\n\nTITLE: Customizing the Cleanup Function in Integration Tests in Go\nDESCRIPTION: Demonstrates how to override the default Cleaner function with a custom implementation. This example provides a no-op cleaner that performs no actions and always succeeds.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\na, err := athodyd.New(cfg,\n    athodyd.WithCRDDirectoryPaths([]string{\"../crds\"}),\n    athodyd.WithCleaner(func(*envtest.Environment, client.Client){ return nil }))\n\nif err != nil {\n    t.Fatal(err)\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Crossplane Solution\nDESCRIPTION: Command to create/apply a Crossplane solution using kubectl with YAML configuration files.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-cross-resource-referencing.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nkubectl apply -f <directory of YAML>\n```\n\n----------------------------------------\n\nTITLE: Installing Crossplane Agent with Default Configuration\nDESCRIPTION: Helm installation command for Crossplane agent with default credentials and target namespace settings\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nhelm install crossplane/agent \\\n  --set default-credentials-secret-name=my-sa-creds \\\n  --set default-target-namespace=ns-in-central\n```\n\n----------------------------------------\n\nTITLE: Measuring Discovery Requests with Verbose Kubectl Output\nDESCRIPTION: This command clears the kubectl discovery cache and runs a 'get pods' command with verbose output to count the number of GET requests made during discovery.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nrm -fR  ~/.kube/cache/discovery/<host_port> && k -v=6 get pods 2>&1 | grep \"GET\" | wc -l\n```\n\n----------------------------------------\n\nTITLE: PostgreSQL Instance Claim without Class Reference\nDESCRIPTION: Example of a PostgreSQLInstance claim that omits the class reference, which will use the default class if available.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-default-resource-class.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: database.crossplane.io/v1alpha1\nkind: PostgreSQLInstance\nmetadata:\n  name: cloud-postgresql-claim\n  namespace: demo\nspec:\n  engineVersion: \"9.6\"\n```\n\n----------------------------------------\n\nTITLE: Accessing Test Cluster Steps\nDESCRIPTION: Commands for accessing the test cluster running in a buildkit container\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nearthly -i -P +e2e --FLAGS=\"-v=4\"\n\ndocker ps | grep earthly/buildkitd\nexport EARTHLY_CONTAINER_ID=<container_id>\n\ndocker exec $EARTHLY_CONTAINER_ID buildkit-runc list\nexport RUNC_CONTAINER_ID=<container_id>\n```\n\n----------------------------------------\n\nTITLE: Configuring Template Rendering with stack.yaml\nDESCRIPTION: This YAML configures how templates are rendered in response to a render request. It defines behaviors for CRDs, including engine type and lifecycle hooks.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\n\"# This field configures which templates are rendered in response\n# to a given object type. An instance of the object type is\n# considered to be a \\\"render request\\\".\nbehaviors:\n  # An engine configuration here will apply to the rest of the\n  # configuration, but it could also be specified at a per-crd\n  # level, or as low as a per-hook level. Engine configurations\n  # nested deeper in the configuration hierarchy will override\n  # ones which are higher up in the hierarchy, so a hook-level\n  # configuration would override this one.\n  engine:\n    type: kustomize\n\n  crds:\n    # This is a particular CRD which is being configured. When the\n    # controller sees an object of this type, it will do something.\n    wordpressinstance.wordpress.samples.stacks.crossplane.io:\n      # This is a top-level object to group hook configurations.\n      # There can be hooks for multiple different types of events.\n      hooks:\n        # Post create is triggered after an instance is created\n        postCreate:\n          # These are the templates which should be rendered when an object\n          # of the type above is seen.\n          #\n          # Defaults for the variables can be defined in the default values\n          # for the CRD fields, using the standard Kubernetes mechanism for\n          # specifying CRD field default values.\n          # Note that this is a list of objects, so multiple can be\n          # specified.\n          - directory: wordpress\n        # Post update is triggered after an instance is changed\n        postUpdate:\n          - directory: wordpress\"\n```\n\n----------------------------------------\n\nTITLE: Validating Object Creation in Go\nDESCRIPTION: Interface method signature for validating object creation in controller-runtime, used for admission webhooks.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-webhooks.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\nValidateCreate(o runtime.Object) error\n```\n\n----------------------------------------\n\nTITLE: Getting InfrastructureDefinition in YAML format\nDESCRIPTION: This bash command uses `kubectl` to retrieve the YAML representation of an `InfrastructureDefinition` named `mysqlinstance.database.acmeco.org`.  This command is used to inspect the definition of a published API, especially the keys included in the connection secret.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_13\n\nLANGUAGE: bash\nCODE:\n```\nkubectl get infrastructuredefinition mysqlinstance.database.acmeco.org -o yaml\n```\n\n----------------------------------------\n\nTITLE: Defining ResourceMerger Interface in Go\nDESCRIPTION: Definition of the ResourceMerger interface in Go, which encapsulates logic for merging cluster and provider representations of a managed resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terraform-provider-runtime.md#2025-04-21_snippet_1\n\nLANGUAGE: Go\nCODE:\n```\ntype ResourceMerger interface {\n    MergeResources(desired, observed resource.Managed) MergeDescription\n}\n```\n\n----------------------------------------\n\nTITLE: Kubernetes Version Information\nDESCRIPTION: This snippet retrieves and displays the Kubernetes version from the cluster where the Helm chart is being deployed.  It accesses the `KubeVersion` field within the `Capabilities` object provided by Helm.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/templates/NOTES.txt#2025-04-21_snippet_2\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Kube Version: {{.Capabilities.KubeVersion}}\"\n```\n\n----------------------------------------\n\nTITLE: Disabling Kubectl Discovery Client Rate Limiter\nDESCRIPTION: This command demonstrates how to disable the discovery client's rate limiter by setting the average rate to -1.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ndocker run --rm -v ~/.kube/config:/.kube/config ulucinar/kubectl-tbrl:v1.24.0-alpha.3.245 --discovery-avg-rate=-1 get nodes\n```\n\n----------------------------------------\n\nTITLE: Defining Namespace-Specific ClusterRole\nDESCRIPTION: YAML definition for a namespace-specific ClusterRole object. This role aggregates permissions from other roles labeled for the specific namespace and view access.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_8\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: crossplane:ns:foo:view\n  labels:\n    crossplane.io/scope: \"namespace\" # For discoverability by tools\n    namespace.crossplane.io/foo: \"true\"\naggregationRule:\n  clusterRoleSelectors:\n  - matchLabels:\n      rbac.crossplane.io/aggregate-to-namespace-view: \"true\"\n      namespace.crossplane.io/foo: \"true\" // Match installed packages for my namespace\nrules: [] # Rules are automatically filled in by the controller manager.\n```\n\n----------------------------------------\n\nTITLE: Shortcut for Container Access\nDESCRIPTION: Quick command to get the runc container ID when only one earthly job is running\nSOURCE: https://github.com/crossplane/crossplane/blob/main/test/e2e/README.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nexport RUNC_CONTAINER_ID=$(docker exec $EARTHLY_CONTAINER_ID buildkit-runc list -q)\n```\n\n----------------------------------------\n\nTITLE: CI Pipeline Configuration Reference - YAML\nDESCRIPTION: Reference to the CI/CD pipeline configuration file that runs extensive checks including E2E tests, unit tests, security scans, and fuzzing tests on all PRs, main branch, and release branches.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/security/self-assessment.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\n.github/workflows/ci.yml\n```\n\n----------------------------------------\n\nTITLE: Kubebuilder Webhook Marker Example\nDESCRIPTION: Example of a kubebuilder marker annotation used to generate webhook YAML configurations for CRDs.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-webhooks.md#2025-04-21_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\n// +kubebuilder:webhook:path=/mutate-batch-tutorial-kubebuilder-io-v1-cronjob,mutating=true,failurePolicy=fail,groups=batch.tutorial.kubebuilder.io,resources=cronjobs,verbs=create;update,versions=v1,name=mcronjob.kb.io\n```\n\n----------------------------------------\n\nTITLE: Calculating API Request Count for Discovery\nDESCRIPTION: This snippet demonstrates how to calculate the minimum number of API requests required for resource discovery. It uses the 'kubectl api-versions' command to count the number of GroupVersions.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n2 + $(kubectl api-versions | wc -l)\n```\n\n----------------------------------------\n\nTITLE: Custom Terraform Import Example\nDESCRIPTION: Reference to custom import logic implementation in Terraform providers that allows special handling during resource import operations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-terrajet.md#2025-04-21_snippet_1\n\nLANGUAGE: go\nCODE:\n```\ncustom-import-example\n```\n\n----------------------------------------\n\nTITLE: Handling Code Generation Error in Go\nDESCRIPTION: This snippet shows an error message that occurs during code generation when updating to the latest Crossplane Runtime. It highlights the need for a workaround in the subsequent steps.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-external-secret-stores.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n16:40:56 [ .. ] go generate darwin_amd64\nangryjet: error: error loading packages using pattern ./...: /Users/hasanturken/  Workspace/crossplane/provider-gcp/apis/cache/v1beta1/zz_  generated.managedlist.go:27:14: cannot use &l.Items[i] (value of type *  CloudMemorystoreInstance) as \"github.com/crossplane/crossplane-runtime/pkg/  resource\".Managed value in assignment: missing method GetPublishConnectionDetailsTo\nexit status 1\napis/generate.go:30: running \"go\": exit status 1\n16:41:04 [FAIL]\nmake[1]: *** [go.generate] Error 1\nmake: *** [generate] Error 2\n```\n\n----------------------------------------\n\nTITLE: Measuring kubectl PodList Fetch Time\nDESCRIPTION: Command to measure the total time taken to clear the discovery cache and fetch a PodList resource, providing a more realistic performance test scenario.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nrm -fR  ~/.kube/cache/discovery/<host_port> && time (kubectl get pods > /dev/null)\n```\n\n----------------------------------------\n\nTITLE: Defining a CRD instance in YAML\nDESCRIPTION: This YAML defines an instance of a Custom Resource Definition (CRD). The `ThingInstance` will be used as the input for rendering a template.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: thing.samples.stacks.crossplane.io/v1alpha1\nkind: ThingInstance\nmetadata:\n  name: thinginstance-sample\nspec:\n  myfield: myvalue\"\n```\n\n----------------------------------------\n\nTITLE: Defining Containerized Function Runner API - Protobuf\nDESCRIPTION: This snippet defines the protobuf service and message structures for running containerized functions. It includes the service definition, enumerations for image pull policies and network policies, and messages for configuration, resource limits, and request-response formats.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_8\n\nLANGUAGE: protobuf\nCODE:\n```\nsyntax = \"proto3\";\n\n// This service defines the APIs for a containerized function runner.\nservice ContainerizedFunctionRunner {\n    rpc RunFunction(RunFunctionRequest) returns (RunFunctionResponse) {}\n}\n\n// Corresponds to Kubernetes' image pull policy.\nenum ImagePullPolicy {\n  IF_NOT_PRESENT = 0;\n  ALWAYS = 1;\n  NEVER = 2;\n}\n\n// Corresponds to go-containerregistry's AuthConfig type.\n// https://pkg.go.dev/github.com/google/go-containerregistry@v0.11.0/pkg/authn#AuthConfig\nmessage ImagePullAuth {\n  string username = 1;\n  string password = 2;\n  string auth = 3;\n  string identity_token = 4;\n  string registry_token = 5;\n}\n\nmessage ImagePullConfig {\n  ImagePullPolicy pull_policy = 1;\n  ImagePullAuth auth = 2;\n}\n\n// Containers are run without network access (in an isolated network namespace)\n// by default.\nenum NetworkPolicy = {\n  ISOLATED = 0;\n  ACCESSIBLE = 1;\n}\n\n// Only resource limits are supported. Resource requests could be added in\n// future if a runner supported them (e.g. by running containers on Kubernetes).\nmessage Resources {\n  ResourceLimits limits = 1;\n}\n\nmessage ResourceLimits {\n  string memory = 1;\n  string cpu = 2;\n}\n\nmessage RunFunctionConfig {\n  Resources resources = 1;\n  NetworkPolicy network = 2;\n  Duration timeout = 3;\n}\n\n// The input FunctionIO is supplied as opaque bytes.\nmessage RunFunctionRequest {\n  string image = 1;\n  bytes input = 2;\n  ImagePullConfig pull_config = 3;\n  RunFunctionConfig config = 4;\n}\n\n// The output FunctionIO is supplied as opaque bytes. Errors encountered while\n// running a function (as opposed to errors returned _by_ a function) will be\n// encapsulated as gRPC errors.\nmessage RunFunctionResponse {\n  bytes output = 1;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Apache 2.0 License Header for Crossplane Project\nDESCRIPTION: This code snippet contains the Apache 2.0 license header used in the Crossplane project. It specifies the copyright holder, the license terms, and the conditions under which the software can be used and distributed.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/hack/boilerplate.go.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n/*\nCopyright 2021 The Crossplane Authors.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n```\n\n----------------------------------------\n\nTITLE: Package Unpack Path Reference - Go\nDESCRIPTION: Code reference showing the path for unpacking packages in Crossplane, linking to the unpack execution logic\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_0\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/a0d139f7cf269599ba916ed15af3fd68ffeabbdf/cmd/crossplane/package/unpack/unpack.go#L52\n```\n\n----------------------------------------\n\nTITLE: Measuring kubectl Discovery Cache Time\nDESCRIPTION: Command to measure the time taken for kubectl to establish the discovery cache by clearing the existing cache and running api-resources command.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-crd-scaling.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nrm -fR  ~/.kube/cache/discovery/<host_port> && time (kubectl api-resources > /dev/null)\n```\n\n----------------------------------------\n\nTITLE: Package Directory Structure\nDESCRIPTION: Directory structure showing the organization of CRDs and webhook configurations in the package folder.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-webhooks.md#2025-04-21_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── crds\n├── webhookconfigurations\n└── crossplane.yaml\n```\n\n----------------------------------------\n\nTITLE: Defining Requirements and Workloads in Crossplane KubernetesApplicationResource\nDESCRIPTION: Example YAML configuration demonstrating the current approach using KubernetesApplicationResource to deploy and manage workloads in remote clusters. This shows how a MySQLInstanceRequirement is defined in the central cluster, and then referenced in a Pod template that will be deployed to a remote cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: common.crossplane.io/v1alpha1\nkind: MySQLInstanceRequirement\nmetadata:\n  name: sqldb\n  namespace: default\nspec:\n  version: \"5.7\"\n  storageGB: 20\n  writeConnectionSecretToRef:\n    name: sql-creds\n---\napiVersion: workload.crossplane.io/v1alpha1\nkind: KubernetesApplicationResource\nmetadata:\n  name: wp-deployment\nspec:\n  # Select a KubernetesTarget which points to a secret that contains kubeconfig\n  # of remote cluster.\n  targetSelector:\n    matchLabels:\n      app: wp\n  # The list of secrets that should be copied from central cluster to the\n  # remote cluster.\n  secrets:\n    - name: sql-creds\n  # The template of the actual resource to be created in the remote cluster.\n  template:\n    apiVersion: v1\n    kind: Pod\n    metadata:\n    ...\n    spec:\n    containers:\n    - name: wordpress\n        image: \"wordpress:4.6.1-apache\"\n        env:\n        - name: WORDPRESS_DB_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: wp-deployment-sql-creds\n              key: password\n```\n\n----------------------------------------\n\nTITLE: Creating Foo Custom Resource in YAML\nDESCRIPTION: Creates a Foo custom resource instance with a foo specification.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_20\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: group/version\nkind: Foo\nspec:\n  foo: \"foo\"\n```\n\n----------------------------------------\n\nTITLE: Creating OAM Component with ContainerizedWorkload\nDESCRIPTION: Example of Component resource definition that specifies a containerized workload with environment variables, resource requirements, and parameterized image configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-oam-workflow.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: core.oam.dev/v1alpha2\nkind: Component\nmetadata:\n  name: myapp\nspec:\n  workload:\n    apiVersion: core.oam.dev/v1alpha2\n    kind: ContainerizedWorkload\n    metadata:\n      name: my-workload\n    spec:\n      osType: linux\n      containers:\n      - name: tbs11-app\n        image: hasheddan/tbs11:latest\n        resources:\n          cpu:\n            required: 1.0\n          memory:\n            required: 100MB\n        env:\n          - name: DB_HOST\n            valueFrom:\n              secretKeyRef:\n                name: mysqlconn\n                key: endpoint\n          - name: DB_USER\n            valueFrom:\n              secretKeyRef:\n                name: mysqlconn\n                key: username\n          - name: DB_PASSWORD\n            valueFrom:\n              secretKeyRef:\n                name: mysqlconn\n                key: password\n        ports:\n          - containerPort: 8080\n  parameters: \n  - name: imageName\n    required: false\n    fieldPaths: \n    - \"spec.containers[0].image\"\n```\n\n----------------------------------------\n\nTITLE: Defining Function Package Metadata in YAML\nDESCRIPTION: Example of a package.yaml file that defines metadata for a Crossplane function package. The file must be placed at the root of the filesystem and contains required fields like apiVersion, kind, and metadata with optional annotations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_9\n\nLANGUAGE: yaml\nCODE:\n```\n# Required. Must be as below.\napiVersion: meta.pkg.crossplane.io/v1alpha1\n# Required. Must be as below.\nkind: Function\n# Required.\nmetadata:\n  # Required. Must comply with Kubernetes API conventions.\n  name: function-example\n  # Optional. Must comply with Kubernetes API conventions.\n  annotations:\n    meta.crossplane.io/source: https://github.com/negz/example-fn\n    meta.crossplane.io/description: An example function\n```\n\n----------------------------------------\n\nTITLE: Defining Workload with Target Cluster in YAML\nDESCRIPTION: YAML configuration for a Crossplane workload specifying a target cluster by name and namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-workload-scheduler.md#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: compute.crossplane.io/v1alpha1\nkind: Workload\nmetadata:\n  name: test-workload\nspec:\n  resources:\n    - name: demo-mysql\n  targetCluster:\n    name: demo-cluster\n    namespace: crossplane-system\n  targetNamespace: demo\n  targetDeployment:\n  targetService:\n```\n\n----------------------------------------\n\nTITLE: Package Output Stream - Go\nDESCRIPTION: Code reference showing where package data is written to stdout in the unpack process\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-packages-v2.md#2025-04-21_snippet_2\n\nLANGUAGE: go\nCODE:\n```\ngithub.com/crossplane/crossplane/blob/a0d139f7cf269599ba916ed15af3fd68ffeabbdf/cmd/crossplane/package/unpack/unpack.go#L53\n```\n\n----------------------------------------\n\nTITLE: Common Tools CRD Count\nDESCRIPTION: List of commonly used Kubernetes tools and their CRD counts, providing context for the overall CRD load in a typical cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-smaller-providers.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n* Crossplane (without any providers) - 12\n* Google Config Connector - ~200\n* Azure Service Operator - ~190\n* Kyverno - 12\n* Istio - 14\n* Argo Workflows - 8\n```\n\n----------------------------------------\n\nTITLE: Updated Foo Resource with Status in YAML\nDESCRIPTION: Shows the updated Foo resource with the status propagated from the reconciled resource.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_23\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: group/version\nkind: Foo\nspec:\n  foo: \"foo\"\nstatus:\n  statusthing: \"bar\"\n```\n\n----------------------------------------\n\nTITLE: Building Crossplane Stack\nDESCRIPTION: This command builds a Crossplane stack, preparing it for publishing.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n\"kubectl crossplane stack build\"\n```\n\n----------------------------------------\n\nTITLE: Automating Tagging of Releases in Bash Script\nDESCRIPTION: This snippet details a build command intended for tagging a release version during the release process. It is executed on the release branch and utilizes the `make` command to create the version tag. The script parameters include the version number, which is essential for tagging the release accurately. Expected input is the version number, and upon execution, the output is the creation of a version tag in the repository.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-release-process.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n./build/run make tag VERSION=${params.version}\n```\n\n----------------------------------------\n\nTITLE: Configuring Name and Variant References in Kustomize for Crossplane (YAML)\nDESCRIPTION: This snippet demonstrates how to set up name references and variant references in a Kustomize configuration file for Crossplane resources. It shows how to link different resources and specify fields that should be considered for variant calculations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_7\n\nLANGUAGE: yaml\nCODE:\n```\nnameReference:\n  - kind: Provider\n    fieldSpecs:\n      - path: specTemplate/providerRef/name\n        kind: CloudMemoryInstanceClass\nvarReference:\n  - path: specTemplate/forProvider/region\n    kind: CloudMemorystoreInstanceClass\n```\n\n----------------------------------------\n\nTITLE: Crossplane Agent with Namespace Matching\nDESCRIPTION: Helm installation command enabling automatic namespace matching between remote and central clusters\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-agent.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nhelm install crossplane/agent \\\n  --set default-credentials-secret-name=my-sa-creds \\\n  --set match-namespaces=true\n```\n\n----------------------------------------\n\nTITLE: Configuration Options for Crossplane Integration Testing Framework in Go\nDESCRIPTION: Details the available option functions for customizing the athodyd framework configuration. These include options for setting custom builder and cleaner functions, specifying CRD directory paths, and configuring manager options.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-integration-tests.md#2025-04-21_snippet_5\n\nLANGUAGE: go\nCODE:\n```\n// WithBuilder sets a custom builder function for an Athodyd Config.\nfunc WithBuilder(builder OperationFn) Option {\n    return func(c *Config) {\n        c.Builder = builder\n    }\n}\n\n// WithCleaner sets a custom cleaner function for an Athodyd Config.\nfunc WithCleaner(cleaner OperationFn) Option {\n    return func(c *Config) {\n        c.Cleaner = cleaner\n    }\n}\n\n// WithCRDDirectoryPaths sets custom CRD locations for an Athodyd Config.\nfunc WithCRDDirectoryPaths(crds []string) Option {\n    return func(c *Config) {\n        c.CRDDirectoryPaths = crds\n    }\n}\n\n// WithManagerOptions sets custom options for the manager configured by Athodyd\n// Config.\nfunc WithManagerOptions(m manager.Options) Option {\n    return func(c *Config) {\n        c.ManagerOptions = m\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: ArgoCD Cluster Connection Details Template - YAML\nDESCRIPTION: Illustrates how to prepare a secret with a templated connection string using Crossplane for integration with ArgoCD, allowing for customized annotation and configuration.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-external-secret-stores.md#2025-04-21_snippet_17\n\nLANGUAGE: yaml\nCODE:\n```\nspec:\n  publishConnectionDetailsTo:\n    name: my-db-connection\n    metadata:\n      annotations:\n        acme.example.io/secret-type: infrastructure\n    template: |\n      name: my-crossplane-managed-cluster\n      server: {{ .ConnectionDetails.Endpoint }}\n      config: |\n        {\n          \"bearerToken\": \"{{ .ConnectionDetails.Bearer }}\",\n          \"tlsClientConfig\": {\n            \"insecure\": false,\n            \"caData\": \"{{ .ConnectionDetails.CABundle }}\"\n          }\n        }\n```\n\n----------------------------------------\n\nTITLE: Defining ClusterStackInstall in Crossplane\nDESCRIPTION: This YAML defines a ClusterStackInstall resource in Crossplane, specifying the package to install.  The apiVersion and kind specify the type of resource being defined (a ClusterStackInstall from the stacks.crossplane.io API group). The metadata section defines the name and namespace where the stack will be installed.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n\"apiVersion: stacks.crossplane.io/v1alpha1\nkind: ClusterStackInstall\nmetadata:\n  name: minimal-gcp\n  namespace: crossplane-system\nspec:\n  package: \\\"crossplane/minimal-gcp:latest\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Helm Release Information\nDESCRIPTION: This snippet displays the release name of the Helm chart. The `{{.Release.Name}}` Go template expression accesses the `Name` field from the `Release` object provided by Helm.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/cluster/charts/crossplane/templates/NOTES.txt#2025-04-21_snippet_0\n\nLANGUAGE: GoTemplate\nCODE:\n```\n\"Release: {{.Release.Name}}\"\n```\n\n----------------------------------------\n\nTITLE: Initializing CRD in Crossplane Stack\nDESCRIPTION: This command initializes a basic Custom Resource Definition (CRD) within a Crossplane stack. It creates the CRD in the appropriate folder, so that it becomes part of the stack.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n\"kubectl crossplane stack crd init WordpressInstance wordpress.samples.stacks.crossplane.io\"\n```\n\n----------------------------------------\n\nTITLE: Adding Var Object to Kustomization in Crossplane Controller (Go)\nDESCRIPTION: This Go code snippet demonstrates how to add a Var object to the Vars array of a Kustomization file in a Crossplane controller. It shows how to reference a specific field from a custom resource for use in Kustomize transformations.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-resource-packs.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\n{\n  Name:   \"REGION\",\n  ObjRef: ref,\n  FieldRef: types.FieldSelector{\n    FieldPath: \"spec.region\",\n  },\n},\n```\n\n----------------------------------------\n\nTITLE: Publishing Crossplane Stack\nDESCRIPTION: This command publishes a Crossplane stack, making it available for installation.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-template-stacks-experience.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n\"kubectl crossplane stack publish\"\n```\n\n----------------------------------------\n\nTITLE: Testing Complex Go Functions with Injected Errors\nDESCRIPTION: Example demonstrating how to test complex functions by injecting sentinel errors through dependencies. Shows error wrapping and comparison using cmpopts.EquateErrors.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/README.md#2025-04-21_snippet_10\n\nLANGUAGE: go\nCODE:\n```\nfunc TestComplicatedQuacker(t *testing.T) {\n        // We'll inject this error and test we return an error that errors.Is\n        // (i.e. wraps) it.\n        errBoom := errors.New(\"boom\")\n\n        type want struct {\n                output string\n                err error\n        }\n\n        cases := map[string]struct{\n                q     Quacker\n                input string\n                want  want\n        }{\n                \"BadQuackModulator\": {\n                        q: &ComplicatedQuacker{\n                                DuckIdentifer: func() (Duck, error) {\n                                        return &MockDuck{}, nil\n                                },\n                                QuackModulator: func() (int, error) {\n                                        // QuackModulator returns our sentinel\n                                        // error.\n                                        return 0, errBoom\n                                }\n                        },\n                        input: \"Hello!\",\n                        want: want{\n                                // We want an error that errors.Is (i.e. wraps)\n                                // our sentinel error. We don't test what error\n                                // message it was wrapped with.\n                                err: errBoom,\n                        },\n                },\n        }\n\n        for name, tc := range cases {\n                t.Run(name, func(t *testing.T) {\n                        got, err := tc.q.Quack(tc.input)\n\n                        if diff := cmp.Diff(got, tc.want.output); diff != \"\" {\n                                t.Errorf(\"q.Quack(): -got, +want:\\n%s\", diff)\n                        }\n\n                        if diff := cmp.Diff(err, tc.want.err, cmpopts.EquateErrors()); diff != \"\" {\n                                t.Errorf(\"q.Quack(): -got, +want:\\n%s\", diff)\n                        }\n                })\n        }\n}\n```\n\n----------------------------------------\n\nTITLE: Resource Group Configuration\nDESCRIPTION: Example group.yaml showing metadata for a group of related package resources.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\ngroup: databases.foocompany.io\ntitle: Sample Controller Types\noverviewShort: This is a one line plain text description of this resource group\noverview: |\n  This is a group description.\n  Talk about the types of CRDs in this group.\nreadme: |\n  # MySQL Resource Group by Foo Company\n\n  This is a Crossplane Package resource group for FooCompany MySQL\n```\n\n----------------------------------------\n\nTITLE: Running a Fuzz Test in Go\nDESCRIPTION: Command to run a fuzz test in Go. This bash command demonstrates how to execute a specific fuzz test case using the go test command with the -fuzz flag.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-adding-fuzz-test-cases.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ngo test -fuzz FuzzTestName\n```\n\n----------------------------------------\n\nTITLE: Discovering Namespace-Specific CRDs with kubectl\nDESCRIPTION: Command to retrieve Custom Resource Definitions (CRDs) specific to a namespace using Crossplane namespace scope labels\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-packages-security-isolation.md#2025-04-21_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nkubectl get crds --selector crossplane.io\\/scope=namespace,namespace.crossplane.io\\/foo=true\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Crossplane-Types Helm Chart\nDESCRIPTION: Shows the directory structure for the proposed crossplane-types Helm chart which will be deployed into Tenant Instance. This chart includes CRDs and RBACs related to CRDs.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-host-aware-stack-manager.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n.\n├── Chart.yaml\n├── crds\n│   ├── cache.crossplane.io_redisclusters.yaml\n│   ├── compute.crossplane.io_kubernetesclusters.yaml\n│   ├── compute.crossplane.io_machineinstances.yaml\n│   ├── database.crossplane.io_mysqlinstances.yaml\n│   ├── database.crossplane.io_postgresqlinstances.yaml\n│   ├── kubernetes.crossplane.io_providers.yaml\n│   ├── stacks.crossplane.io_clusterstackinstalls.yaml\n│   ├── stacks.crossplane.io_stackinstalls.yaml\n│   ├── stacks.crossplane.io_stacks.yaml\n│   ├── storage.crossplane.io_buckets.yaml\n│   ├── workload.crossplane.io_kubernetesapplicationresources.yaml\n│   └── workload.crossplane.io_kubernetesapplications.yaml\n├── templates\n│   ├── NOTES.txt\n│   ├── _helpers.tpl\n│   ├── crossplane-admin-clusterrole.yaml\n│   ├── crossplane-clusterrole.yaml\n│   ├── crossplane-clusterrolebinding.yaml\n│   ├── crossplane-serviceaccount.yaml\n│   ├── environment-personas-clusterroles.yaml\n│   ├── namespace-personas-clusterroles.yaml\n│   ├── stack-manager-clusterrolebinding.yaml\n│   └── stack-manager-serviceaccount.yaml\n├── values.yaml\n└── values.yaml.tmpl\n```\n\n----------------------------------------\n\nTITLE: Defining Monthly Release Schedule in Markdown\nDESCRIPTION: A markdown table outlining the proposed monthly release schedule for Crossplane, including various events like planning sessions, demo parties, and the actual release.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-release-process.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Day of release cycle | Event | Expectations |\n| ------------ | ----- | ------------ |\n|**Week 1**|||\n|1 Mon|Milestone starts|(no actual event or meeting held for this)|\n|1 Mon|Retrospective from previous release|A public formal retrospective is held for the community to participate in. The events of the previous milestone will be discussed to identify improvements. These improvements should be taken into the first planning of the milestone.|\n|2 Tues|Weekly planning|Group planning session to identify priorities and focus for the week.|\n|3 Wed|Backlog grooming & epic discovery|(optional) Session to triage new issues and help investigate and flesh out epics.  Early in the milestone, the emphasis is more on epic discovery since we are still working through understanding the epics.|\n|**Week 2**|||\n|8 Mon|Weekly planning|Group planning session to identify priorities and focus for the week.|\n|10 Wed|Backlog grooming|(optional) Session to triage new issues and prioritize the backlog.|\n|12 Fri|Halftime Demo party|Show off our progress in demos for the team and take in critical feedback and discuss potential course corrections to set effective strategy.|\n|**Week 3**|||\n|15 Mon|Weekly planning|Group planning session to identify priorities and focus for the week.|\n|17 Wed|Backlog grooming|(optional) Session to triage new issues and prioritize the backlog.|\n|**Week 4**|||\n|22 Mon|Weekly planning|Group planning session to identify priorities and focus for the week.|\n|25 Wed|Backlog grooming & Milestone planning|Session to triage new issues as we get closer to feature freeze.  Milestone planning begins for the **next** milestone as we identify themes, priorities, and high level epics that we want to address in the **next** release.|\n|26 Thurs|Feature freeze|Release branch is created on GitHub from `master` and only quality/reliability improvements will be accepted into the release branch afterwards.  No new features will be accepted into the release branch.|\n|27 Fri|Final Demo party|Developers give demonstrations of their accomplishments that will be shipping in the release.  Large scoped feedback should already have been collected by this point, only minor quality improvements should be accepted as feedback from the demos.\n|**Week 5**|||\n|30 Mon|Release published|All artifacts of the release will be published and available for the general community|\n```\n\n----------------------------------------\n\nTITLE: Implementing Managed Reconciler for CockroachDB Cluster Controller in Go\nDESCRIPTION: This snippet demonstrates how to implement a managed reconciler for a CockroachDB Cluster controller using the Crossplane runtime's resource management utilities and a hypothetical NativeConnecter type. It shows the SetupWithManager function that configures the controller with the appropriate resource kinds and connector.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/one-pager-k8s-native-providers.md#2025-04-21_snippet_9\n\nLANGUAGE: go\nCODE:\n```\nfunc (c *ClusterController) SetupWithManager(mgr ctrl.Manager) error {\n  r := resource.NewManagedReconciler(mgr,\n    resource.ManagedKind(v1alpha1.ClusterGroupVersionKind),\n    resource.WithExternalConnecter(&resource.NativeConnecter{client: mgr.GetClient(), kind: v1alpha1.Cluster}))\n\n  name := strings.ToLower(fmt.Sprintf(\"%s.%s\", v1alpha1.ClusterGroupKind, v1alpha1.Group))\n\n  return ctrl.NewControllerManagedBy(mgr).\n    Named(name).\n    For(&v1alpha1.Cluster{}).\n    Complete(r)\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Crossplane Namespace Role YAML\nDESCRIPTION: Defines the namespace-scoped RBAC permissions required for Crossplane to manage packages and providers within its system namespace.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-rbac-manager.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: crossplane-system\n  name: crossplane\nrules:\n# Crossplane uses jobs to unpack packages.\n- apiGroups: [batch, extensions]\n  resources: [jobs]\n  verbs: [get, create, update, delete]\n# Crossplane reads pod logs to unpack packages.\n- apiGroups: [\"\"]\n  resources: [pods]\n  verbs: [get, list]\n- apiGroups: [\"\"]\n  resources: [pods/log]\n  verbs: [get]\n# Crossplane uses deployments to run providers.\n- apiGroups: [extensions, apps]\n  resources: [deployments]\n  verbs: [list, watch, get, create, update, delete]\n# Crossplane manages service accounts for providers.\n- apiGroups: [\"\"]\n  resources: [serviceaccounts]\n  verbs: [list, watch, get, create, update, delete]\n```\n\n----------------------------------------\n\nTITLE: FunctionIO Basic Structure Example\nDESCRIPTION: Example of the FunctionIO type that functions use as input and output, showing the config and observed fields for a PostgreSQL instance.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-composition-functions.md#2025-04-21_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apiextensions.crossplane.io/v1alpha1\nkind: FunctionIO\nconfig:\n  apiVersion: database.example.org/v1alpha1\n  kind: Config\n  metadata:\n    name: cloudsql\n  spec:\n    version: POSTGRES_9_6\nobserved:\n  composite:\n    resource:\n      apiVersion: database.example.org/v1alpha1\n      kind: XPostgreSQLInstance\n      metadata:\n        name: my-db\n      spec:\n        parameters:\n          storageGB: 20\n        compositionSelector:\n          matchLabels:\n            provider: gcp\n      status:\n        conditions:\n        - type: Ready\n          status: True\n    connectionDetails:\n    - name: uri\n      value: postgresql://db.example.org:5432\n```\n\n----------------------------------------\n\nTITLE: Package Installation Configuration\nDESCRIPTION: Example install.yaml showing Kubernetes deployment configuration for the package controller.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-packages.md#2025-04-21_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: crossplane-sample-stack\n  labels:\n    core.crossplane.io/name: \"crossplane-sample-stack\"\nspec:\n  selector:\n    matchLabels:\n      core.crossplane.io/name: \"crossplane-sample-stack\"\n  replicas: 1\n  template:\n    metadata:\n      name: sample-stack-controller\n      labels:\n        core.crossplane.io/name: \"crossplane-sample-stack\"\n    spec:\n      containers:\n      - name: sample-stack-controller\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.namespace\n```\n\n----------------------------------------\n\nTITLE: Publish Crossplane stack\nDESCRIPTION: Publishes a Crossplane stack using the kubectl plugin. This command pushes the stack to a container registry, making it available for deployment. Docker registry credentials must be configured beforehand.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl crossplane stack publish\"\n\n```\n\n----------------------------------------\n\nTITLE: Defining KubernetesApplicationResource Specification in Go\nDESCRIPTION: Defines the structure for Kubernetes application resources, including an unstructured template and a list of secret references using corev1.LocalObjectReference.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/design-doc-complex-workloads.md#2025-04-21_snippet_4\n\nLANGUAGE: go\nCODE:\n```\ntype KubernetesApplicationResourceSpec struct {\n\tTemplate *unstructured.Unstructured\n\tSecrets  []corev1.LocalObjectReference\n}\n\ntype LocalObjectReference struct {\n\tName\n}\n```\n\n----------------------------------------\n\nTITLE: Defining JSON Structure for External API Object in Go\nDESCRIPTION: Example JSON structure representing an external API object for a Favourite DB instance. This structure is used to guide the implementation of the corresponding Go struct.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/guide-provider-development.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"id\": 42,\n    \"name\": \"mycoolinstance\",\n    \"fanciness_level\": 100,\n    \"version\": \"2.3\",\n    \"status\": \"ONLINE\",\n    \"hostname\": \"cool.fcp.example.org\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining gRPC FunctionRunnerService URL for Crossplane Composition Functions\nDESCRIPTION: Specifies the authoritative URL for the gRPC FunctionRunnerService definition that Composition Functions must implement. This service definition is crucial for ensuring compatibility between Crossplane and the Function.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/contributing/specifications/functions.md#2025-04-21_snippet_0\n\nLANGUAGE: protobuf\nCODE:\n```\nhttps://github.com/crossplane/crossplane/tree/main/apis/apiextensions/fn/proto\n```\n\n----------------------------------------\n\nTITLE: Initialize Crossplane stack\nDESCRIPTION: Initializes a Crossplane stack using the kubectl plugin.  The command takes a stack group and a stack name as input to create the initial scaffolding.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl crossplane stack init mystackgroup/mystackname\"\n\n```\n\n----------------------------------------\n\nTITLE: Generated CRD Configuration\nDESCRIPTION: File path for the generated Custom Resource Definition YAML that will be applied to the Crossplane cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/proposal-controller-code-generation.md#2025-04-21_snippet_6\n\nLANGUAGE: filepath\nCODE:\n```\nconfig/crd/<crd-name>.yaml\n```\n\n----------------------------------------\n\nTITLE: Install Crossplane stack using kubectl plugin\nDESCRIPTION: Installs a Crossplane stack using the kubectl plugin. This command deploys the stack into the Kubernetes cluster.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-stack-cli.md#2025-04-21_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\n\"kubectl crossplane stack install mystackgroup/mystackname\"\n\n```\n\n----------------------------------------\n\nTITLE: AWS Cloud Control API Script Example\nDESCRIPTION: A bash script to demonstrate the usage of AWS Cloud Control API, referenced in the document as a way to try out the Cloud Control API functionality.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/design-doc-provider-strategy.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nassets/design-doc-provider-strategy/cloudcontrol/aws.sh\n```\n\n----------------------------------------\n\nTITLE: Reconciled Resource with Status in YAML\nDESCRIPTION: Demonstrates the reconciled resource with an updated status from an external controller.\nSOURCE: https://github.com/crossplane/crossplane/blob/main/design/defunct/one-pager-template-stacks.md#2025-04-21_snippet_22\n\nLANGUAGE: yaml\nCODE:\n```\nkind: athing\nspec:\n  foovar: \"foo\"\nstatus:\n  bar: \"bar\"\n```"
  }
]
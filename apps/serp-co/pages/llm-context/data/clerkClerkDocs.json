[
  {
    "owner": "clerk",
    "repo": "clerk-docs",
    "content": "TITLE: Implementing Phone Number OTP Sign-In with Vanilla JavaScript and Clerk\nDESCRIPTION: This HTML and JavaScript code demonstrates how to implement a phone number OTP sign-in flow using Clerk in a vanilla JavaScript environment. It includes both the HTML structure and the JavaScript logic for handling the sign-in process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-in\">\n      <h2>Sign in</h2>\n      <form id=\"sign-in-form\">\n        <label for=\"phone\">Enter phone number</label>\n        <input type=\"tel\" name=\"phone\" id=\"sign-in-phone\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <form id=\"verifying\" hidden>\n      <h2>Verify your phone number</h2>\n      <label for=\"code\">Enter your verification code</label>\n      <input id=\"code\" name=\"code\" />\n      <button type=\"submit\" id=\"verify-button\">Verify</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  // Mount user button component\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  // Handle the sign-in form\n  document.getElementById('sign-in-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const phone = formData.get('phone')\n\n    try {\n      // Start the sign-in process using the user's identifier.\n      // In this case, it's their phone number.\n      const { supportedFirstFactors } = await clerk.client.signIn.create({\n        identifier: phone,\n      })\n\n      // Find the phoneNumberId from all the available first factors for the current sign-in\n      const firstPhoneFactor = supportedFirstFactors.find((factor) => {\n        return factor.strategy === 'phone_code'\n      })\n\n      const { phoneNumberId } = firstPhoneFactor\n\n      // Prepare first factor verification, specifying\n      // the phone code strategy.\n      await clerk.client.signIn.prepareFirstFactor({\n        strategy: 'phone_code',\n        phoneNumberId,\n      })\n\n      // Hide sign-in form\n      document.getElementById('sign-in').setAttribute('hidden', '')\n      // Show verification form\n```\n\n----------------------------------------\n\nTITLE: Configuring Playwright Tests with Auth State - TypeScript\nDESCRIPTION: Demonstrates how to structure multiple Playwright test projects so that a 'global setup' project runs first and prepares Clerk authentication state. Main and authenticated test projects depend on this setup, with authenticated tests referencing the generated 'user.json' for stateful test execution. Requires Playwright and any declared devices. No runtime parameters, but pattern depends on correct project structure and dependencies. Ensures authentication is performed once and tests consistently reuse the same state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-authenticated-flows.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// ...\\nprojects: [\\n  {\\n    name: 'global setup',\\n    testMatch: /global\\.setup\\.ts/,\\n  },\\n  {\\n    name: 'Main tests',\\n    testMatch: /.*app.spec.ts/,\\n    use: {\\n      ...devices['Desktop Chrome'],\\n    },\\n    dependencies: ['global setup'],\\n  },\\n  {\\n    name: 'Authenticated tests',\\n    testMatch: /.*authenticated.spec.ts/,\\n    use: {\\n      ...devices['Desktop Chrome'],\\n\\n      // Use prepared Clerk auth state\\n      storageState: 'playwright/.clerk/user.json',\\n    },\\n    dependencies: ['global setup'],\\n  },\\n]\n```\n\n----------------------------------------\n\nTITLE: Implementing Error Handling in Next.js Sign-in Form\nDESCRIPTION: A Next.js component implementing email/password sign-in with comprehensive error handling using Clerk's API. Includes form state management, error display, and session handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/error-handling.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\nimport { ClerkAPIError } from '@clerk/types'\nimport { isClerkAPIResponseError } from '@clerk/nextjs/errors'\n\nexport default function SignInForm() {\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [errors, setErrors] = React.useState<ClerkAPIError[]>()\n\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setErrors(undefined)\n    if (!isLoaded) return\n    try {\n      const signInAttempt = await signIn.create({\n        identifier: email,\n        password,\n      })\n      if (signInAttempt.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (err) {\n      if (isClerkAPIResponseError(err)) setErrors(err.errors)\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <>\n      <h1>Sign in</h1>\n      <form onSubmit={(e) => handleSubmit(e)}>\n        <div>\n          <label htmlFor=\"email\">Enter email address</label>\n          <input\n            onChange={(e) => setEmail(e.target.value)}\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            value={email}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Enter password</label>\n          <input\n            onChange={(e) => setPassword(e.target.value)}\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            value={password}\n          />\n        </div>\n        <button type=\"submit\">Sign in</button>\n      </form>\n\n      {errors && (\n        <ul>\n          {errors.map((el, index) => (\n            <li key={index}>{el.longMessage}</li>\n          ))}\n        </ul>\n      )}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Next.js Clerk Middleware and Route Protection - TypeScript\nDESCRIPTION: Illustrates use of clerkMiddleware and createRouteMatcher from @clerk/nextjs/server in TypeScript to define authentication and authorization rules in a Next.js 'middleware.ts' file. The example restricts '/admin' routes to users with org:admin role and '/dashboard' routes to authenticated users using auth.protect(). Also exports a Next.js 'config' object to fine-tune which routes the middleware should apply to, employing regex patterns to exclude static assets and always run for API/trpc routes. Dependencies: @clerk/nextjs v5+, Next.js 13.0.4+, and prior setup of Clerk project configuration. Inputs: incoming HTTP requests; Outputs: protected/unprotected routes as per middleware logic.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isDashboardRoute = createRouteMatcher(['/dashboard(.*)'])\nconst isAdminRoute = createRouteMatcher(['/admin(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  // Restrict admin route to users with specific role\n  if (isAdminRoute(req)) await auth.protect({ role: 'org:admin' })\n\n  // Restrict dashboard routes to signed in users\n  if (isDashboardRoute(req)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying and Processing Clerk Webhooks with Next.js Route Handler in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates a Route Handler for Next.js that receives Clerk webhook POST requests at '/api/webhooks'. It uses Clerk's `verifyWebhook` method to validate the payload signature and then logs the event ID and type before responding. The code expects the signing secret to be available via environment variables set in `.env`. It returns HTTP 200 for success and 400 for verification errors. Required dependency: '@clerk/nextjs/webhooks'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/nextjs/webhooks'\\n\\nexport async function POST(req: Request) {\\n  try {\\n    const evt = await verifyWebhook(req)\\n\\n    // Do something with payload\\n    // For this guide, log payload to console\\n    const { id } = evt.data\\n    const eventType = evt.type\\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\\n    console.log('Webhook payload:', evt.data)\\n\\n    return new Response('Webhook received', { status: 200 })\\n  } catch (err) {\\n    console.error('Error verifying webhook:', err)\\n    return new Response('Error verifying webhook', { status: 400 })\\n  }\\n}\\n\n```\n\n----------------------------------------\n\nTITLE: Using useClerk() to Trigger Sign-In in Vue\nDESCRIPTION: This Vue component demonstrates how to use the `useClerk()` composable. It imports `useClerk` from `@clerk/vue`, calls it within the `script setup` block to get the `clerk` instance, and then uses this instance in the template to trigger the `openSignIn()` method when a button is clicked.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-clerk.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useClerk } from '@clerk/vue'\n\nconst clerk = useClerk()\n</script>\n\n<template>\n  <button @click=\"clerk.openSignIn\">Sign in</button>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk JS SDK v5 using Package Managers - Bash\nDESCRIPTION: These snippets show how to install the latest version of @clerk/clerk-js (Core 2) using different JavaScript package managers: npm, yarn, pnpm, and bun. Each command must be executed in a terminal within your project directory. Dependencies: Node.js, the relevant package manager (npm, yarn, pnpm, or bun). The main parameter is the package manager command to use. Output is that the package is added to the project's dependencies. No special constraints.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-js\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-js\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-js\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/clerk-js\n```\n\n----------------------------------------\n\nTITLE: Installing the Clerk Next.js SDK using Bash\nDESCRIPTION: Shows how to add the `@clerk/nextjs` package to your Next.js project using various package managers (npm, yarn, pnpm, bun). This SDK provides the necessary tools to integrate Clerk authentication. Requires an existing Next.js project and the respective package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes with auth.protect()\nDESCRIPTION: Example of protecting routes using auth.protect() method. This middleware implementation automatically redirects unauthenticated users to the sign-in route when they try to access protected routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isProtectedRoute(req)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Server Actions with Clerk Auth in Server Components\nDESCRIPTION: This snippet demonstrates how to use the Clerk auth() helper to protect a server action in a Server Component. It checks if a user is signed in before allowing them to add an item to their cart.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default function AddToCart() {\n  async function addItem(formData: FormData) {\n    'use server'\n\n    const { userId } = await auth()\n\n    if (!userId) {\n      throw new Error('You must be signed in to add an item to your cart')\n    }\n\n    console.log('add item server action', formData)\n  }\n\n  return (\n    <form action={addItem}>\n      <input value={'test'} type=\"text\" name=\"name\" />\n      <button type=\"submit\">Add to Cart</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Installing expo-checkbox Dependency using npm\nDESCRIPTION: Installs the `expo-checkbox` package using the npm package manager. This package is required for rendering a checkbox component in the React Native/Expo example.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm install expo-checkbox\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in Next.js App Router\nDESCRIPTION: This snippet demonstrates how to wrap the root layout with ClerkProvider in a Next.js application using the App Router. It provides session and user context to the entire application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Sign-up with CAPTCHA in Next.js\nDESCRIPTION: A complete Next.js implementation of a custom sign-up form with Clerk's CAPTCHA widget integration. Includes email verification flow and error handling. The component uses the useSignUp hook from Clerk and manages form state for both initial sign-up and verification steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/bot-sign-up-protection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [verifying, setVerifying] = React.useState(false)\n  const [code, setCode] = React.useState('')\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      await signUp.create({\n        emailAddress,\n        password,\n      })\n\n      await signUp.prepareEmailAddressVerification({\n        strategy: 'email_code',\n      })\n\n      setVerifying(true)\n    } catch (err: any) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  const handleVerify = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      const completeSignUp = await signUp.attemptEmailAddressVerification({\n        code,\n      })\n\n      if (completeSignUp.status === 'complete') {\n        await setActive({ session: completeSignUp.createdSessionId })\n        router.push('/')\n      } else {\n        console.error(JSON.stringify(completeSignUp, null, 2))\n      }\n    } catch (err: any) {\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (verifying) {\n    return (\n      <>\n        <h1>Verify your email</h1>\n        <form onSubmit={handleVerify}>\n          <label id=\"code\">Enter your verification code</label>\n          <input value={code} id=\"code\" name=\"code\" onChange={(e) => setCode(e.target.value)} />\n          <button type=\"submit\">Verify</button>\n        </form>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <h1>Sign up</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"email\">Enter email address</label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            name=\"email\"\n            value={emailAddress}\n            onChange={(e) => setEmailAddress(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Enter password</label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n\n        <div id=\"clerk-captcha\"></div>\n\n        <div>\n          <button type=\"submit\">Next</button>\n        </div>\n      </form>\n    </>\n  )\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Sign-in Page with shadcn UI in Next.js\nDESCRIPTION: A complete sign-in page implementation using Clerk Elements with shadcn UI components. The implementation includes three main steps: initial sign-in form with social providers, authentication strategy selection, and verification methods (password and email code). It also features loading states and error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\nimport { Button } from '@/components/ui/button'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Icons } from '@/components/ui/icons'\n\nexport default function SignInPage() {\n  return (\n    <div className=\"grid w-full grow items-center px-4 sm:justify-center\">\n      <SignIn.Root>\n        <Clerk.Loading>\n          {(isGlobalLoading) => (\n            <>\n              <SignIn.Step name=\"start\">\n                <Card className=\"w-full sm:w-96\">\n                  <CardHeader>\n                    <CardTitle>Sign in to Acme Co</CardTitle>\n                    <CardDescription>Welcome back! Please sign in to continue</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"grid gap-y-4\">\n                    <div className=\"grid grid-cols-2 gap-x-4\">\n                      <Clerk.Connection name=\"github\" asChild>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          type=\"button\"\n                          disabled={isGlobalLoading}\n                        >\n                          <Clerk.Loading scope=\"provider:github\">\n                            {(isLoading) =>\n                              isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                <>\n                                  <Icons.gitHub className=\"mr-2 size-4\" />\n                                  GitHub\n                                </>\n                              )\n                            }\n                          </Clerk.Loading>\n                        </Button>\n                      </Clerk.Connection>\n                      <Clerk.Connection name=\"google\" asChild>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          type=\"button\"\n                          disabled={isGlobalLoading}\n                        >\n                          <Clerk.Loading scope=\"provider:google\">\n                            {(isLoading) =>\n                              isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                <>\n                                  <Icons.google className=\"mr-2 size-4\" />\n                                  Google\n                                </>\n                              )\n                            }\n                          </Clerk.Loading>\n                        </Button>\n                      </Clerk.Connection>\n                    </div>\n                    <p className=\"flex items-center gap-x-3 text-sm text-muted-foreground before:h-px before:flex-1 before:bg-border after:h-px after:flex-1 after:bg-border\">\n                      or\n                    </p>\n                    <Clerk.Field name=\"identifier\" className=\"space-y-2\">\n                      <Clerk.Label asChild>\n                        <Label>Email address</Label>\n                      </Clerk.Label>\n                      <Clerk.Input type=\"email\" required asChild>\n                        <Input />\n                      </Clerk.Input>\n                      <Clerk.FieldError className=\"block text-sm text-destructive\" />\n                    </Clerk.Field>\n                  </CardContent>\n                  <CardFooter>\n                    <div className=\"grid w-full gap-y-4\">\n                      <SignIn.Action submit asChild>\n                        <Button disabled={isGlobalLoading}>\n                          <Clerk.Loading>\n                            {(isLoading) => {\n                              return isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                'Continue'\n                              )\n                            }}\n                          </Clerk.Loading>\n                        </Button>\n                      </SignIn.Action>\n\n                      <Button variant=\"link\" size=\"sm\" asChild>\n                        <Clerk.Link navigate=\"sign-up\">\n                          Don&apos;t have an account? Sign up\n                        </Clerk.Link>\n                      </Button>\n                    </div>\n                  </CardFooter>\n                </Card>\n              </SignIn.Step>\n\n              <SignIn.Step name=\"choose-strategy\">\n                <Card className=\"w-full sm:w-96\">\n                  <CardHeader>\n                    <CardTitle>Use another method</CardTitle>\n                    <CardDescription>\n                      Facing issues? You can use any of these methods to sign in.\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"grid gap-y-4\">\n                    <SignIn.SupportedStrategy name=\"email_code\" asChild>\n                      <Button type=\"button\" variant=\"link\" disabled={isGlobalLoading}>\n                        Email code\n                      </Button>\n                    </SignIn.SupportedStrategy>\n                    <SignIn.SupportedStrategy name=\"password\" asChild>\n                      <Button type=\"button\" variant=\"link\" disabled={isGlobalLoading}>\n                        Password\n                      </Button>\n                    </SignIn.SupportedStrategy>\n                  </CardContent>\n                  <CardFooter>\n                    <div className=\"grid w-full gap-y-4\">\n                      <SignIn.Action navigate=\"previous\" asChild>\n                        <Button disabled={isGlobalLoading}>\n                          <Clerk.Loading>\n                            {(isLoading) => {\n                              return isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                'Go back'\n                              )\n                            }}\n                          </Clerk.Loading>\n                        </Button>\n                      </SignIn.Action>\n                    </div>\n                  </CardFooter>\n                </Card>\n              </SignIn.Step>\n\n              <SignIn.Step name=\"verifications\">\n                <SignIn.Strategy name=\"password\">\n                  <Card className=\"w-full sm:w-96\">\n                    <CardHeader>\n                      <CardTitle>Check your email</CardTitle>\n                      <CardDescription>\n                        Enter the verification code sent to your email\n                      </CardDescription>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Welcome back <SignIn.SafeIdentifier />\n                      </p>\n                    </CardHeader>\n                    <CardContent className=\"grid gap-y-4\">\n                      <Clerk.Field name=\"password\" className=\"space-y-2\">\n                        <Clerk.Label asChild>\n                          <Label>Password</Label>\n                        </Clerk.Label>\n                        <Clerk.Input type=\"password\" asChild>\n                          <Input />\n                        </Clerk.Input>\n                        <Clerk.FieldError className=\"block text-sm text-destructive\" />\n                      </Clerk.Field>\n                    </CardContent>\n                    <CardFooter>\n                      <div className=\"grid w-full gap-y-4\">\n                        <SignIn.Action submit asChild>\n                          <Button disabled={isGlobalLoading}>\n                            <Clerk.Loading>\n                              {(isLoading) => {\n                                return isLoading ? (\n                                  <Icons.spinner className=\"size-4 animate-spin\" />\n                                ) : (\n                                  'Continue'\n                                )\n                              }}\n                            </Clerk.Loading>\n                          </Button>\n                        </SignIn.Action>\n                        <SignIn.Action navigate=\"choose-strategy\" asChild>\n                          <Button type=\"button\" size=\"sm\" variant=\"link\">\n                            Use another method\n                          </Button>\n                        </SignIn.Action>\n                      </div>\n                    </CardFooter>\n                  </Card>\n                </SignIn.Strategy>\n\n                <SignIn.Strategy name=\"email_code\">\n                  <Card className=\"w-full sm:w-96\">\n                    <CardHeader>\n                      <CardTitle>Check your email</CardTitle>\n                      <CardDescription>\n                        Enter the verification code sent to your email\n                      </CardDescription>\n```\n\n----------------------------------------\n\nTITLE: JavaScript Clerk Authentication Implementation\nDESCRIPTION: Vanilla JavaScript implementation of email/password sign-up flow using Clerk SDK. Handles form submissions and user verification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  document.getElementById('sign-up-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const emailAddress = formData.get('email')\n    const password = formData.get('password')\n\n    try {\n      await clerk.client.signUp.create({ emailAddress, password })\n      await clerk.client.signUp.prepareEmailAddressVerification()\n      document.getElementById('sign-up').setAttribute('hidden', '')\n      document.getElementById('verifying').removeAttribute('hidden')\n    } catch (error) {\n      console.error(error)\n    }\n  })\n\n  document.getElementById('verifying').addEventListener('submit', async (e) => {\n    const formData = new FormData(e.target)\n    const code = formData.get('code')\n\n    try {\n      const signUpAttempt = await clerk.client.signUp.attemptEmailAddressVerification({\n        code,\n      })\n    } catch (error) {\n      console.error(error)\n    }\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Sign-in Flow with Password Support\nDESCRIPTION: Full implementation including password authentication, password reset flow, and email verification strategies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <h1>Sign in to your account</h1>\n\n        <Clerk.Connection name=\"google\">Sign in with Google</Clerk.Connection>\n\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignIn.Action submit>Continue</SignIn.Action>\n      </SignIn.Step>\n\n      <SignIn.Step name=\"verifications\">\n        <SignIn.Strategy name=\"email_code\">\n          <h1>Check your email</h1>\n          <p>\n            We sent a code to <SignIn.SafeIdentifier />.\n          </p>\n\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Email code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignIn.Action submit>Continue</SignIn.Action>\n        </SignIn.Strategy>\n\n        <SignIn.Strategy name=\"password\">\n          <h1>Enter your password</h1>\n\n          <Clerk.Field name=\"password\">\n            <Clerk.Label>Password</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignIn.Action submit>Continue</SignIn.Action>\n          <SignIn.Action navigate=\"forgot-password\">Forgot password?</SignIn.Action>\n        </SignIn.Strategy>\n\n        <SignIn.Strategy name=\"reset_password_email_code\">\n          <h1>Check your email</h1>\n          <p>\n            We sent a code to <SignIn.SafeIdentifier />.\n          </p>\n\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Email code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignIn.Action submit>Continue</SignIn.Action>\n        </SignIn.Strategy>\n      </SignIn.Step>\n\n      <SignIn.Step name=\"forgot-password\">\n        <h1>Forgot your password?</h1>\n\n        <SignIn.SupportedStrategy name=\"reset_password_email_code\">\n          Reset password\n        </SignIn.SupportedStrategy>\n\n        <SignIn.Action navigate=\"previous\">Go back</SignIn.Action>\n      </SignIn.Step>\n\n      <SignIn.Step name=\"reset-password\">\n        <h1>Reset your password</h1>\n\n        <Clerk.Field name=\"password\">\n          <Clerk.Label>New password</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <Clerk.Field name=\"confirmPassword\">\n          <Clerk.Label>Confirm password</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignIn.Action submit>Reset password</SignIn.Action>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-factor Authentication Sign-in with Clerk Elements in Next.js\nDESCRIPTION: This code demonstrates a complete multi-factor authentication sign-in flow using Clerk Elements. The implementation includes two steps: first allowing users to enter their email and password, and then verifying their identity with an SMS code if they have two-factor authentication enabled. The component is styled with Tailwind CSS and includes proper error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <div className=\"relative grid w-full flex-grow items-center bg-black px-4 sm:justify-center\">\n      <SignIn.Root>\n        <SignIn.Step\n          name=\"start\"\n          className=\"relative isolate w-full space-y-8 rounded-2xl bg-emerald-950 px-4 py-10 shadow-md ring-1 ring-inset ring-white/10 before:absolute before:inset-0 before:-z-10 before:rounded-2xl before:bg-black/50 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#34D399\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-white\">\n              Sign in to Clover\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-rose-400\" />\n          <Clerk.Field name=\"identifier\" className=\"group/field relative\">\n            <Clerk.Label className=\"absolute left-2 top-0 -translate-y-1/2 bg-emerald-950 px-2 font-mono text-xs/4 text-white before:absolute before:inset-0 before:-z-10 before:bg-black/50 group-focus-within/field:text-emerald-300 group-data-[invalid]/field:text-rose-400\">\n              Email address\n            </Clerk.Label>\n            <Clerk.Input\n              type=\"text\"\n              required\n              className=\"w-full rounded-lg bg-transparent px-4 py-2.5 text-sm text-white outline-none ring-1 ring-inset ring-white/20 hover:ring-white/30 focus:shadow-[0_0_6px_0] focus:shadow-emerald-500/20 focus:ring-[1.5px] focus:ring-emerald-300 data-[invalid]:shadow-rose-400/20 data-[invalid]:ring-rose-400\"\n            />\n            <Clerk.FieldError className=\"mt-2 block text-xs text-rose-400\" />\n          </Clerk.Field>\n          <Clerk.Field name=\"password\" className=\"group/field relative\">\n            <Clerk.Label className=\"absolute left-2 top-0 -translate-y-1/2 bg-emerald-950 px-2 font-mono text-xs/4 text-white before:absolute before:inset-0 before:-z-10 before:bg-black/50 group-focus-within/field:text-emerald-300 group-data-[invalid]/field:text-rose-400\">\n              Password\n            </Clerk.Label>\n            <Clerk.Input\n              type=\"password\"\n              required\n              className=\"w-full rounded-lg bg-transparent px-4 py-2.5 text-sm text-white outline-none ring-1 ring-inset ring-white/20 hover:ring-white/30 focus:shadow-[0_0_6px_0] focus:shadow-emerald-500/20 focus:ring-[1.5px] focus:ring-emerald-300 data-[invalid]:shadow-rose-400/20 data-[invalid]:ring-rose-400\"\n            />\n            <Clerk.FieldError className=\"mt-2 block text-xs text-rose-400\" />\n          </Clerk.Field>\n          <SignIn.Action\n            submit\n            className=\"relative isolate w-full rounded-lg bg-gradient-to-b from-emerald-400 to-emerald-500 px-3.5 py-2.5 text-center text-sm font-medium text-emerald-950 shadow-[0_1px_0_0_theme(colors.white/30%)_inset,0_-1px_1px_0_theme(colors.black/5%)_inset] outline-none before:absolute before:inset-0 before:-z-10 before:rounded-lg before:bg-white/10 before:opacity-0 hover:before:opacity-100 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-white active:text-emerald-950/80 active:before:bg-black/10\"\n          >\n            Sign In\n          </SignIn.Action>\n          <p className=\"text-center text-sm text-white/60\">\n            No account?{' '}\n            <Clerk.Link\n              navigate=\"sign-up\"\n              className=\"text-white decoration-white/30 underline-offset-4 outline-none hover:underline focus-visible:underline\"\n            >\n              Create an account\n            </Clerk.Link>\n          </p>\n        </SignIn.Step>\n        <SignIn.Step\n          name=\"verifications\"\n          className=\"relative isolate w-full space-y-8 rounded-2xl bg-emerald-950 px-4 py-10 shadow-md ring-1 ring-inset ring-white/10 before:absolute before:inset-0 before:-z-10 before:rounded-2xl before:bg-black/50 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#34D399\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-white\">\n              Verify phone code\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-rose-400\" />\n          <SignIn.Strategy name=\"phone_code\">\n            <Clerk.Field name=\"code\" className=\"group/field relative\">\n              <Clerk.Label className=\"absolute left-2 top-0 -translate-y-1/2 bg-emerald-950 px-2 font-mono text-xs/4 text-white before:absolute before:inset-0 before:-z-10 before:bg-black/50 group-focus-within/field:text-emerald-300 group-data-[invalid]/field:text-rose-400\">\n                Phone code\n              </Clerk.Label>\n              <Clerk.Input\n                type=\"otp\"\n                required\n                className=\"w-full rounded-lg bg-transparent px-4 py-2.5 text-sm text-white outline-none ring-1 ring-inset ring-white/20 hover:ring-white/30 focus:shadow-[0_0_6px_0] focus:shadow-emerald-500/20 focus:ring-[1.5px] focus:ring-emerald-300 data-[invalid]:shadow-rose-400/20 data-[invalid]:ring-rose-400\"\n              />\n              <Clerk.FieldError className=\"mt-2 block text-xs text-rose-400\" />\n            </Clerk.Field>\n            <SignIn.Action\n              submit\n              className=\"relative isolate w-full rounded-lg bg-gradient-to-b from-emerald-400 to-emerald-500 px-3.5 py-2.5 text-center text-sm font-medium text-emerald-950 shadow-[0_1px_0_0_theme(colors.white/30%)_inset,0_-1px_1px_0_theme(colors.black/5%)_inset] outline-none before:absolute before:inset-0 before:-z-10 before:rounded-lg before:bg-white/10 before:opacity-0 hover:before:opacity-100 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-white active:text-emerald-950/80 active:before:bg-black/10\"\n            >\n              Continue\n            </SignIn.Action>\n          </SignIn.Strategy>\n          <p className=\"text-center text-sm text-white/60\">\n            No account?{' '}\n            <Clerk.Link\n              navigate=\"sign-up\"\n              className=\"text-white decoration-white/30 underline-offset-4 outline-none hover:underline focus-visible:underline\"\n            >\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication in Next.js App Router Route Handlers\nDESCRIPTION: Demonstrates how to protect API routes using Clerk's auth() helper and access user information with currentUser() in a Next.js App Router route handler. This pattern ensures only authenticated users can access the API endpoint.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { NextResponse } from 'next/server'\nimport { currentUser, auth } from '@clerk/nextjs/server'\n\nexport async function GET() {\n  // Use `auth()` to get the user's ID\n  const { userId } = await auth()\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return new NextResponse('Unauthorized', { status: 401 })\n  }\n\n  // Use `currentUser()` to get the Backend API User object\n  const user = await currentUser()\n\n  // Add your Route Handler's logic with the returned `user` object\n\n  return NextResponse.json({ user: user }, { status: 200 })\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Elements via Package Managers (npm, yarn, pnpm, bun) in Shell\nDESCRIPTION: Provides commands to install the `@clerk/elements` library using different JavaScript package managers (npm, yarn, pnpm, bun). This package is necessary to begin building custom UIs with Clerk Elements in a Next.js project that is already set up with Clerk Core 2. Ensure your chosen package manager is installed in your development environment and that TypeScript's `moduleResolution` is set to `bundler` if applicable.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @clerk/elements\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add @clerk/elements\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm add @clerk/elements\n```\n\nLANGUAGE: sh\nCODE:\n```\nbun add @clerk/elements\n```\n\n----------------------------------------\n\nTITLE: Displaying Email and Password Sign-In Form with Clerk in React (JSX)\nDESCRIPTION: Displays a sign-in form in React for collecting the user's email and password and submitting them for authentication using Clerk. Assumes state variables and handlers such as setEmail, setPassword, and handleSubmit are defined in the parent context. Fields use controlled components to reflect current state. Intended for inclusion within a functional component; prerequisites include proper Clerk setup and corresponding handler implementations. The submitted data is expected to trigger a sign-in flow with Clerk, and any errors are handled per Clerk's documentation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_7\n\nLANGUAGE: jsx\nCODE:\n```\n<>\n  <h1>Sign in</h1>\n  <form onSubmit={(e) => handleSubmit(e)}>\n    <div>\n      <label htmlFor=\"email\">Enter email address</label>\n      <input\n        onChange={(e) => setEmail(e.target.value)}\n        id=\"email\"\n        name=\"email\"\n        type=\"email\"\n        value={email}\n      />\n    </div>\n    <div>\n      <label htmlFor=\"password\">Enter password</label>\n      <input\n        onChange={(e) => setPassword(e.target.value)}\n        id=\"password\"\n        name=\"password\"\n        type=\"password\"\n        value={password}\n      />\n    </div>\n    <button type=\"submit\">Sign in</button>\n  </form>\n</>\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication with requireAuth() in Express\nDESCRIPTION: Shows how to use the requireAuth() middleware to protect routes and redirect unauthenticated users. It includes examples of applying the middleware globally and to specific routes, with options for custom sign-in URLs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/express/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { requireAuth } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst PORT = 3000\n\n// Apply middleware to all routes\napp.use(requireAuth())\n\n// Apply middleware to a specific route\n// Redirects to the homepage if the user is not authenticated\napp.get('/protected', requireAuth(), (req, res) => {\n  res.send('This is a protected route.')\n})\n\n// Redirects to a custom URL if the user is not authenticated\n// Requires `CLERK_SIGN_IN_URL` to be set in env vars\napp.get('/protected', requireAuth({ signInUrl: process.env.CLERK_SIGN_IN_URL }), (req, res) => {\n  res.send('This is a protected route.')\n})\n\n// Redirects to a custom URL if the user is not authenticated\n// Uses the `signInUrl` option instead of the environment variable\napp.get('/protected', requireAuth({ signInUrl: '/sign-in' }), (req, res) => {\n  res.send('This is a protected route.')\n})\n\n// Start the server and listen on the specified port\napp.listen(PORT, () => {\n  console.log(`Server is running on http://localhost:${PORT}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Email and Password Sign-In Flow in Next.js\nDESCRIPTION: This code creates a sign-in form component for Next.js using Clerk's useSignIn hook. It handles form submission, initiates the sign-in process, and manages session activation upon successful authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\n\nexport default function SignInForm() {\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const router = useRouter()\n\n  // Handle the submission of the sign-in form\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    // Start the sign-in process using the email and password provided\n    try {\n      const signInAttempt = await signIn.create({\n        identifier: email,\n        password,\n      })\n\n      // If sign-in process is complete, set the created session as active\n      // and redirect the user\n      if (signInAttempt.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (err: any) {\n\n```\n\n----------------------------------------\n\nTITLE: Accessing Session Data with useAuth Hook in Expo\nDESCRIPTION: Demonstrates how to use the useAuth() hook to access session data and protect routes based on authentication state. The component shows loading states, handles unauthenticated users, and displays the userId and sessionId when authenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/read-session-user-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useAuth } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function UseAuthExample() {\n  const { isLoaded, isSignedIn, userId, sessionId, getToken } = useAuth()\n\n  if (!isLoaded) {\n    return <Text>Loading...</Text>\n  }\n\n  if (!isSignedIn) {\n    // You could also add a redirect to the sign-in page here\n    return <Text>Sign in to view this page</Text>\n  }\n\n  return (\n    <Text>\n      Hello, {userId}! Your current active session is {sessionId}.\n    </Text>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Authentication Data on Server-Side in App Router\nDESCRIPTION: Using Clerk's auth() helper to access user authentication data in Next.js App Router server components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, currentUser } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { userId } = await auth()\n  console.log(userId)\n\n  return <p>Home Page</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Admin Dashboard with User Search and Role Management in Next.js (TypeScript)\nDESCRIPTION: This Next.js page component (`AdminDashboard`) defines the admin interface. It first verifies the user has the 'admin' role using `checkRole` and redirects if not. It retrieves the search query from URL parameters and uses `clerkClient.users.getUserList` to fetch matching users if a query exists. The component then renders the `SearchUsers` component and maps over the fetched users, displaying their name, email, and current role. For each user, it provides forms with buttons ('Make Admin', 'Make Moderator', 'Remove Role') that submit the user ID and target role/action to the imported `setRole` and `removeRole` server actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { redirect } from 'next/navigation'\nimport { checkRole } from '@/utils/roles'\nimport { SearchUsers } from './SearchUsers'\nimport { clerkClient } from '@clerk/nextjs/server'\nimport { removeRole, setRole } from './_actions'\n\nexport default async function AdminDashboard(params: {\n  searchParams: Promise<{ search?: string }>\n}) {\n  if (!checkRole('admin')) {\n    redirect('/')\n  }\n\n  const query = (await params.searchParams).search\n\n  const client = await clerkClient()\n\n  const users = query ? (await client.users.getUserList({ query })).data : []\n\n  return (\n    <>\n      <p>This is the protected admin dashboard restricted to users with the `admin` role.</p>\n\n      <SearchUsers />\n\n      {users.map((user) => {\n        return (\n          <div key={user.id}>\n            <div>\n              {user.firstName} {user.lastName}\n            </div>\n\n            <div>\n              {\n                user.emailAddresses.find((email) => email.id === user.primaryEmailAddressId)\n                  ?.emailAddress\n              }\n            </div>\n\n            <div>{user.publicMetadata.role as string}</div>\n\n            <form action={setRole}>\n              <input type=\"hidden\" value={user.id} name=\"id\" />\n              <input type=\"hidden\" value=\"admin\" name=\"role\" />\n              <button type=\"submit\">Make Admin</button>\n            </form>\n\n            <form action={setRole}>\n              <input type=\"hidden\" value={user.id} name=\"id\" />\n              <input type=\"hidden\" value=\"moderator\" name=\"role\" />\n              <button type=\"submit\">Make Moderator</button>\n            </form>\n\n            <form action={removeRole}>\n              <input type=\"hidden\" value={user.id} name=\"id\" />\n              <button type=\"submit\">Remove Role</button>\n            </form>\n          </div>\n        )\n      })}\n    </>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using SignIn Component in React\nDESCRIPTION: This example shows how to implement a simple sign-in page in a React application using the SignIn component from @clerk/clerk-react.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignIn } from '@clerk/clerk-react'\n\nconst SignInPage = () => <SignIn />\n\nexport default SignInPage\n```\n\n----------------------------------------\n\nTITLE: Using redirectToSignIn() in Next.js App Router\nDESCRIPTION: This example demonstrates how to use the redirectToSignIn() method to redirect unauthenticated users to the sign-in page. It first checks if a userId exists through the auth() helper, and if not, redirects the user to sign in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/auth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { userId, redirectToSignIn } = await auth()\n\n  if (!userId) return redirectToSignIn()\n\n  return <h1>Hello, {userId}</h1>\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Authentication State Client-Side with useAuth Hook (TSX)\nDESCRIPTION: This code demonstrates using the `useAuth` hook from `@clerk/tanstack-react-start` in a React component within a TanStack React Start application. It retrieves the authentication status (`isLoaded`, `isSignedIn`), user ID (`userId`), and session ID (`sessionId`). The component conditionally renders loading, sign-in, or authenticated user information based on the hook's state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/read-session-data.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'routes/example.tsx' }}\nimport { useAuth } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/example')({\n  component: Example,\n})\n\nfunction Example() {\n  const { isLoaded, isSignedIn, userId, sessionId, getToken } = useAuth()\n\n  if (!isLoaded) {\n    return <div>Loading...</div>\n  }\n\n  if (!isSignedIn) {\n    // You could also add a redirect to the sign-in page here\n    return <div>Sign in to view this page</div>\n  }\n\n  return (\n    <div>\n      Hello, {userId}! Your current active session is {sessionId}.\n    </div>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Setting up ClerkProvider in a React Application\nDESCRIPTION: This snippet illustrates how to implement ClerkProvider in a React application's entry point. It includes setting up the publishable key and configuring the sign-out URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY} afterSignOutUrl=\"/\">\n      <App />\n    </ClerkProvider>\n  </React.StrictMode>,\n)\n```\n\n----------------------------------------\n\nTITLE: Preparing First Factor Authentication with Clerk (JavaScript)\nDESCRIPTION: Prepares the first authentication factor for a user using Clerk's `prepareFirstFactor` method. Supports multiple strategies (email, phone, OAuth, Web3 wallets, etc.) with different required parameters such as `emailAddressId`, `phoneNumberId`, `web3WalletId`, or `redirectUrl`. The identifier represents the user to be authenticated, and the strategy determines how the verification will be performed. Returns a `SignIn` object. Dependencies: Clerk SDK must be initialized; required strategy-specific parameters must be provided. Inputs: strategy, identifier, (strategy-dependent parameters). Output: Promise resolving to a `SignIn` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.prepareFirstFactor({\n  strategy: 'email_link',\n  identifier: 'test@example.com',\n})\n```\n\n----------------------------------------\n\nTITLE: Example of MetaMask Authentication in Clerk\nDESCRIPTION: Example of using the authenticateWithMetamask method to initiate authentication via a MetaMask wallet. This method prompts the user to connect their wallet and verify ownership.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.authenticateWithMetamask()\n```\n\n----------------------------------------\n\nTITLE: Implementing SMS OTP Auth in Next.js\nDESCRIPTION: A Next.js component that handles SMS OTP sign-up flow using Clerk. Includes phone number collection, verification code sending, and verification completion with session management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const [verifying, setVerifying] = React.useState(false)\n  const [phone, setPhone] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const router = useRouter()\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n\n    if (!isLoaded && !signUp) return null\n\n    try {\n      await signUp.create({\n        phoneNumber: phone,\n      })\n      await signUp.preparePhoneNumberVerification()\n      setVerifying(true)\n    } catch (err) {\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  async function handleVerification(e: React.FormEvent) {\n    e.preventDefault()\n\n    if (!isLoaded && !signUp) return null\n\n    try {\n      const signUpAttempt = await signUp.attemptPhoneNumberVerification({\n        code,\n      })\n\n      if (signUpAttempt.status === 'complete') {\n        await setActive({ session: signUpAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        console.error(signUpAttempt)\n      }\n    } catch (err) {\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (verifying) {\n    return (\n      <>\n        <h1>Verify your phone number</h1>\n        <form onSubmit={handleVerification}>\n          <label htmlFor=\"code\">Enter your verification code</label>\n          <input value={code} id=\"code\" name=\"code\" onChange={(e) => setCode(e.target.value)} />\n          <button type=\"submit\">Verify</button>\n        </form>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <h1>Sign up</h1>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"phone\">Enter phone number</label>\n        <input\n          value={phone}\n          id=\"phone\"\n          name=\"phone\"\n          type=\"tel\"\n          onChange={(e) => setPhone(e.target.value)}\n        />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example Clerk Webhook Payload for user.created Event (JSON)\nDESCRIPTION: Illustrates the JSON structure of a webhook payload sent by Clerk when a 'user.created' event occurs. It includes the event data (containing the user object details like email, IDs, timestamps, metadata), the event type ('user.created'), a timestamp, and the Clerk instance ID. This example payload helps developers understand the data format received at their configured webhook endpoint, emphasizing the need to verify the payload before processing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"birthday\": \"\",\n    \"created_at\": 1654012591514,\n    \"email_addresses\": [\n      {\n        \"email_address\": \"example@example.org\",\n        \"id\": \"idn_29w83yL7CwVlJXylYLxcslromF1\",\n        \"linked_to\": [],\n        \"object\": \"email_address\",\n        \"verification\": {\n          \"status\": \"verified\",\n          \"strategy\": \"ticket\"\n        }\n      }\n    ],\n    \"external_accounts\": [],\n    \"external_id\": \"567772\",\n    \"first_name\": \"Example\",\n    \"gender\": \"\",\n    \"id\": \"user_29w83sxmDNGwOuEthce5gg56FcC\",\n    \"image_url\": \"https://img.clerk.com/xxxxxx\",\n    \"last_name\": \"Example\",\n    \"last_sign_in_at\": 1654012591514,\n    \"object\": \"user\",\n    \"password_enabled\": true,\n    \"phone_numbers\": [],\n    \"primary_email_address_id\": \"idn_29w83yL7CwVlJXylYLxcslromF1\",\n    \"primary_phone_number_id\": null,\n    \"primary_web3_wallet_id\": null,\n    \"private_metadata\": {},\n    \"profile_image_url\": \"https://www.gravatar.com/avatar?d=mp\",\n    \"public_metadata\": {},\n    \"two_factor_enabled\": false,\n    \"unsafe_metadata\": {},\n    \"updated_at\": 1654012591835,\n    \"username\": null,\n    \"web3_wallets\": []\n  },\n  \"instance_id\": \"ins_123\",\n  \"object\": \"event\",\n  \"timestamp\": 1654012591835,\n  \"type\": \"user.created\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Server-Side Route Protection\nDESCRIPTION: Server-side authentication check implementation using Clerk's getAuth method and TanStack route handlers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createFileRoute, redirect } from '@tanstack/react-router'\nimport { createServerFn } from '@tanstack/react-start'\nimport { getAuth } from '@clerk/tanstack-react-start/server'\nimport { getWebRequest } from '@tanstack/react-start/server'\n\nconst authStateFn = createServerFn({ method: 'GET' }).handler(async () => {\n  const request = getWebRequest()\n  if (!request) throw new Error('No request found')\n  const { userId } = await getAuth(request)\n\n  if (!userId) {\n    throw redirect({\n      to: '/sign-in/$',\n    })\n  }\n\n  return { userId }\n})\n\nexport const Route = createFileRoute('/')({  \n  component: Home,\n  beforeLoad: async () => await authStateFn(),\n  loader: async ({ context }) => {\n    return { userId: context.userId }\n  },\n})\n\nfunction Home() {\n  const state = Route.useLoaderData()\n\n  return <h1>Welcome! Your ID is {state.userId}!</h1>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware in Next.js (TypeScript)\nDESCRIPTION: Defines the Clerk middleware in `middleware.ts` for a Next.js App Router application. It imports `clerkMiddleware` from `@clerk/nextjs/server` and exports it. The configuration object specifies which routes the middleware should match, excluding static files and internal Next.js paths while including API routes. This middleware makes authentication state available throughout the app but does not protect routes by default.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware()\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Mounting Clerk UI Components Conditionally (JavaScript)\nDESCRIPTION: Complete example for `main.js` demonstrating how to initialize Clerk, check the user's authentication state (`clerk.user`), and conditionally mount either the `<UserButton>` (if signed in) or the `<SignIn>` component (if signed out) into designated DOM elements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_5\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'main.js' }}\nimport { Clerk } from '@clerk/clerk-js'\n\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('app').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userButtonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userButtonDiv)\n} else {\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Setting up ClerkProvider and UI Components in Next.js Layout (TypeScript)\nDESCRIPTION: Illustrates how to integrate Clerk into the root layout (`app/layout.tsx`) of a Next.js App Router application. It wraps the main HTML structure with the `<ClerkProvider>` component to provide authentication context. It also includes Clerk's prebuilt UI components (`SignInButton`, `SignUpButton`, `SignedIn`, `SignedOut`, `UserButton`) within the header to handle user sign-in, sign-up, and displaying user information based on authentication status. Requires the `@clerk/nextjs` package to be installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { Metadata } from 'next'\nimport {\n  ClerkProvider,\n  SignInButton,\n  SignUpButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/nextjs'\nimport { Geist, Geist_Mono } from 'next/font/google'\nimport './globals.css'\n\nconst geistSans = Geist({\n  variable: '--font-geist-sans',\n  subsets: ['latin'],\n})\n\nconst geistMono = Geist_Mono({\n  variable: '--font-geist-mono',\n  subsets: ['latin'],\n})\n\nexport const metadata: Metadata = {\n  title: 'Clerk Next.js Quickstart',\n  description: 'Generated by create next app',\n}\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>\n          <header className=\"flex justify-end items-center p-4 gap-4 h-16\">\n            <SignedOut>\n              <SignInButton />\n              <SignUpButton />\n            </SignedOut>\n            <SignedIn>\n              <UserButton />\n            </SignedIn>\n          </header>\n          {children}\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk and Handling Email/Password Sign-In in JavaScript Web App\nDESCRIPTION: Handles the client-side logic for sign-in using Clerk in a JavaScript web application. Loads Clerk, checks user authentication state, displays the user button if signed in, or attaches a submit handler to the sign-in form if not. On submission, it calls Clerk's sign-in method, handles session activation, and reloads or logs errors as needed. Requires Clerk's SDK and environment variable for the publishable key. Inputs include email and password from the form; outputs include user UI updates or error reports.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  // Mount user button component\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  // Handle the sign-in form\n  document.getElementById('sign-in-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const emailAddress = formData.get('email')\n    const password = formData.get('password')\n\n    try {\n      // Start the sign-in process\n      const signInAttempt = await clerk.client.signIn.create({\n        identifier: emailAddress,\n        password,\n      })\n\n      // If the sign-in is complete, set the user as active\n      if (signInAttempt.status === 'complete') {\n        await clerk.setActive({ session: signInAttempt.createdSessionId })\n\n        location.reload()\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (error) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(error)\n    }\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Email Link Verification Status in React with Clerk\nDESCRIPTION: This code demonstrates how to handle different states of email link verification in a React component. It checks for various verification statuses (loading, failed, expired, client_mismatch) and renders appropriate UI based on the verification outcome.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n}, [handleEmailLinkVerification, loaded])\n\nif (verificationStatus === 'loading') {\n  return <div>Loading...</div>\n}\n\nif (verificationStatus === 'failed') {\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>The email link verification failed.</p>\n      <Link href=\"/sign-in\">Sign in</Link>\n    </div>\n  )\n}\n\nif (verificationStatus === 'expired') {\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>The email link has expired.</p>\n      <Link href=\"/sign-in\">Sign in</Link>\n    </div>\n  )\n}\n\n// OPTIONAL: This check is only required if you have\n// the 'Require the same device and browser' setting\n// enabled in the Clerk Dashboard\nif (verificationStatus === 'client_mismatch') {\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>\n        You must complete the email link sign-in on the same device and browser as you started it\n        on.\n      </p>\n      <Link href=\"/sign-in\">Sign in</Link>\n    </div>\n  )\n}\n\nreturn (\n  <div>\n    <h1>Verify your email</h1>\n    <p>Successfully signed in. Return to the original tab to continue.</p>\n  </div>\n)\n```\n\n----------------------------------------\n\nTITLE: Implementing SWR with Clerk Authentication in React\nDESCRIPTION: Integrates Clerk authentication with SWR data fetching library. Creates a custom hook that combines SWR's data fetching capabilities with Clerk's authentication token.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport useSWR from 'swr'\nimport { useAuth } from '@clerk/nextjs'\n\nexport default async function useClerkSWR(url) {\n  // Use `useAuth()` to access the `getToken()` method\n  const { getToken } = useAuth()\n\n  // Use `getToken()` to get the current session token\n  const token = await getToken()\n\n  const fetcher = async (...args) => {\n    return fetch(...args, {\n      headers: { Authorization: `Bearer ${token}` }, // Include the session token as a Bearer token in the Authorization header\n    }).then((res) => res.json())\n  }\n\n  return useSWR(url, fetcher)\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/nextjs SDK with Multiple Package Managers - Bash\nDESCRIPTION: Presents package manager commands for installing the latest @clerk/nextjs SDK with npm, yarn, pnpm, and bun on a Next.js project. Each command should be executed in the project root where package.json exists, and requires the respective package manager to be installed. This step upgrades the Clerk SDK to Core 2; successful execution adds or updates @clerk/nextjs in package.json and node_modules.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Loading ClerkJS Client Environment - TypeScript\nDESCRIPTION: Declares a TypeScript `load` function for initializing the Clerk object, fetching environment settings, and preparing client state from the Frontend API. Accepts an optional `ClerkOptions` object for customizing appearance, localization, navigation behavior, session handling, and other settings. Returns a Promise that resolves to void. Must be called before other Clerk methods are used. Relies on the imported Clerk client in a frontend (browser) context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nfunction load(options?: ClerkOptions): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Rendering Authenticated User Info with Clerk Composables in Vue (Vue)\nDESCRIPTION: Demonstrates the use of Clerk's useUser() composable in a Nuxt (Vue) page to display a user's first name if they are signed in. The example leverages isLoaded and isSignedIn flags to control conditional rendering during the authentication lifecycle. Dependent on Clerk Nuxt composables, it expects the Clerk module to be properly initialized in the Nuxt project. Input parameters are not directly provided, but the reactive user state and computed properties are used. The output is dynamic UI displaying loading, sign-in prompt, or personalized greeting.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nconst { isLoaded, isSignedIn, user } = useUser()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">Loading...</div>\n  <div v-else-if=\"!isSignedIn\">Sign in to access this page</div>\n  <div v-else>Hello, {{ user.firstName }}!</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Using Clerk `<Protect>` Component in a Next.js Server Component Layout (TypeScript)\nDESCRIPTION: Illustrates wrapping children with the `<Protect>` component from `@clerk/nextjs` within a Next.js React Server Component Layout (`layout.tsx`). The children are only rendered if the authenticated user has the specified `org:team_settings:read` permission. A warning highlights potential caching issues with layouts and auth checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { PropsWithChildren } from 'react'\nimport { Protect } from '@clerk/nextjs'\n\nexport default function SettingsLayout(props: PropsWithChildren) {\n  return <Protect permission=\"org:team_settings:read\">{props.children}</Protect>\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Astro SDK via bun - Bash\nDESCRIPTION: This bun command adds the Clerk Astro SDK to your Astro project's dependencies. bun should be globally installed beforehand. Run this in your project root to finish SDK installation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/astro\n```\n\n----------------------------------------\n\nTITLE: Implementing SignIn Component in Next.js\nDESCRIPTION: This snippet demonstrates how to use the SignIn component on a public page in a Next.js application. It uses the useUser hook to conditionally render the SignIn component or a welcome message.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { SignIn, useUser } from '@clerk/nextjs'\n\nexport default function Home() {\n  const { user } = useUser()\n\n  if (!user) return <SignIn />\n\n  return <div>Welcome!</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-up with Email Link in Next.js\nDESCRIPTION: This code snippet demonstrates how to implement a sign-up flow using email links in a Next.js application. It uses Clerk's useSignUp hook to create an email link flow, send a verification email, and handle the verification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp } from '@clerk/nextjs'\n\nexport default function SignInPage() {\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [verified, setVerified] = React.useState(false)\n  const [verifying, setVerifying] = React.useState(false)\n  const [error, setError] = React.useState('')\n  const { signUp, isLoaded } = useSignUp()\n\n  if (!isLoaded) return null\n\n  const { startEmailLinkFlow } = signUp.createEmailLinkFlow()\n\n  async function submit(e: React.FormEvent) {\n    e.preventDefault()\n    // Reset states in case user resubmits form mid sign-up\n    setVerified(false)\n    setError('')\n\n    setVerifying(true)\n\n    if (!isLoaded && !signUp) return null\n\n    // Start the sign-up process using the email provided\n    try {\n      await signUp.create({\n        emailAddress,\n      })\n\n      // Dynamically set the host domain for dev and prod\n      // You could instead use an environment variable or other source for the host domain\n      const protocol = window.location.protocol\n      const host = window.location.host\n\n      // Send the user an email with the email link\n      const signUpAttempt = await startEmailLinkFlow({\n        // URL to navigate to after the user visits the link in their email\n        redirectUrl: `${protocol}//${host}/sign-up/verify`,\n      })\n\n      // Check the verification result\n      const verification = signUpAttempt.verifications.emailAddress\n\n      // Handle if user visited the link and completed sign-up from /sign-up/verify\n      if (verification.verifiedFromTheSameClient()) {\n        setVerifying(false)\n        setVerified(true)\n      }\n    } catch (err: any) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n\n      if (err.errors?.[0]?.longMessage) {\n        console.log('Clerk error:', err.errors[0].longMessage)\n        setError(err.errors[0].longMessage)\n      } else {\n        setError('An error occurred.')\n      }\n    }\n  }\n\n  async function reset(e: React.FormEvent) {\n    e.preventDefault()\n    setVerifying(false)\n  }\n\n  if (error) {\n    return (\n      <div>\n        <p>Error: {error}</p>\n        <button onClick={() => setError('')}>Try again</button>\n      </div>\n    )\n  }\n\n  if (verifying) {\n    return (\n      <div>\n        <p>Check your email and visit the link that was sent to you.</p>\n        <form onSubmit={reset}>\n          <button type=\"submit\">Restart</button>\n        </form>\n      </div>\n    )\n  }\n\n  if (verified) {\n    return <div>Signed up successfully!</div>\n  }\n\n  return (\n    <div>\n      <h1>Sign up</h1>\n      <form onSubmit={submit}>\n        <input\n          type=\"email\"\n          placeholder=\"Enter email address\"\n          value={emailAddress}\n          onChange={(e) => setEmailAddress(e.target.value)}\n        />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Email/Password Sign-up with Verification using Clerk Elements in React\nDESCRIPTION: This code snippet showcases a complete sign-up flow implementation using Clerk Elements in a React component. It includes email and password input fields, email verification, and styling using Tailwind CSS. The component handles both the initial sign-up step and the email verification step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <div className=\"grid w-full flex-grow items-center bg-black px-4 sm:justify-center\">\n      <SignUp.Root>\n        <SignUp.Step\n          name=\"start\"\n          className=\"w-full space-y-6 rounded-2xl bg-neutral-900 bg-[radial-gradient(circle_at_50%_0%,theme(colors.white/10%),transparent)] px-4 py-10 ring-1 ring-inset ring-white/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#fff\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-white\">\n              Create an account\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <div className=\"space-y-4\">\n            <Clerk.Field name=\"emailAddress\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-white\">Email address</Clerk.Label>\n              <Clerk.Input\n                type=\"text\"\n                required\n                className=\"w-full rounded-md bg-neutral-900 px-3.5 py-2 text-sm text-white outline-none ring-1 ring-inset ring-zinc-700 hover:ring-zinc-600 focus:bg-transparent focus:ring-[1.5px] focus:ring-blue-400 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n            <Clerk.Field name=\"password\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-white\">Password</Clerk.Label>\n              <Clerk.Input\n                type=\"password\"\n                required\n                className=\"w-full rounded-md bg-neutral-900 px-3.5 py-2 text-sm text-white outline-none ring-1 ring-inset ring-zinc-700 hover:ring-zinc-600 focus:bg-transparent focus:ring-[1.5px] focus:ring-blue-400 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n          </div>\n          <SignUp.Captcha className=\"empty:hidden\" />\n          <SignUp.Action\n            submit\n            className=\"relative isolate w-full rounded-md bg-blue-500 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow-[0_1px_0_0_theme(colors.white/10%)_inset,0_0_0_1px_theme(colors.white/5%)] outline-none before:absolute before:inset-0 before:-z-10 before:rounded-md before:bg-white/5 before:opacity-0 hover:before:opacity-100 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-blue-400 active:text-white/70 active:before:bg-black/10\"\n          >\n            Sign Up\n          </SignUp.Action>\n          <p className=\"text-center text-sm text-zinc-400\">\n            Have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-in\"\n              className=\"font-medium text-white decoration-white/20 underline-offset-4 outline-none hover:underline focus-visible:underline\"\n            >\n              Sign in\n            </Clerk.Link>\n          </p>\n        </SignUp.Step>\n        <SignUp.Step\n          name=\"verifications\"\n          className=\"w-full space-y-6 rounded-2xl bg-neutral-900 bg-[radial-gradient(circle_at_50%_0%,theme(colors.white/10%),transparent)] px-4 py-10 ring-1 ring-inset ring-white/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#fff\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-white\">\n              Verify email code\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <SignUp.Strategy name=\"email_code\">\n            <Clerk.Field name=\"code\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-white\">Email code</Clerk.Label>\n              <Clerk.Input\n                required\n                className=\"w-full rounded-md bg-neutral-900 px-3.5 py-2 text-sm text-white outline-none ring-1 ring-inset ring-zinc-700 hover:ring-zinc-600 focus:bg-transparent focus:ring-[1.5px] focus:ring-blue-400 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n            <SignUp.Action\n              submit\n              className=\"relative isolate w-full rounded-md bg-blue-500 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow-[0_1px_0_0_theme(colors.white/10%)_inset,0_0_0_1px_theme(colors.white/5%)] outline-none before:absolute before:inset-0 before:-z-10 before:rounded-md before:bg-white/5 before:opacity-0 hover:before:opacity-100 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-blue-400 active:text-white/70 active:before:bg-black/10\"\n            >\n              Finish registration\n            </SignUp.Action>\n          </SignUp.Strategy>\n          <p className=\"text-center text-sm text-zinc-400\">\n            Have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-in\"\n              className=\"font-medium text-white decoration-white/20 underline-offset-4 outline-none hover:underline focus-visible:underline\"\n            >\n              Sign in\n            </Clerk.Link>\n          </p>\n        </SignUp.Step>\n      </SignUp.Root>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Next.js App Router\nDESCRIPTION: This snippet shows how to use Clerk's UserButton component in a Next.js application using the App Router. It demonstrates setting up a header component with conditional rendering for signed-in and signed-out states.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/nextjs'\n\nfunction Header() {\n  return (\n    <header style={{ display: 'flex', justifyContent: 'space-between', padding: 20 }}>\n      <h1>My App</h1>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n    </header>\n  )\n}\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <ClerkProvider>\n        <Header />\n        {children}\n      </ClerkProvider>\n    </html>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Building Header Layout with Clerk Components - Astro\nDESCRIPTION: This Astro template defines a site layout including authentication controls using Clerk components. It imports SignedIn, SignedOut, UserButton, and SignInButton from '@clerk/astro/components', and arranges them in a navigation bar to show user-specific options based on sign-in state. The component receives a title via props and wraps its content in a slot. Use this layout for any page requiring user authentication UX.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_7\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignedIn, SignedOut, UserButton, SignInButton } from '@clerk/astro/components'\n\nconst { title } = Astro.props\n---\n\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\" />\n    <meta name=\"generator\" content={Astro.generator} />\n  </head>\n  <body>\n    <header>\n      <h1>{title}</h1>\n      <nav>\n        <SignedOut>\n          <SignInButton mode=\"modal\" />\n        </SignedOut>\n        <SignedIn>\n          <UserButton />\n        </SignedIn>\n      </nav>\n    </header>\n    <article>\n      <slot />\n    </article>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Using the useAuth Hook for Authentication in Clerk v3 (React/JSX)\nDESCRIPTION: This snippet demonstrates usage of the new SSR-compatible useAuth hook provided by Clerk. It destructures key authentication properties and actions, enabling unified access for user/session data and methods (like getToken and signOut) in React components. Requires Clerk v3 and proper SDK initialization; the hook returns null values until loaded.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nconst { userId, sessionId, getToken, isLoaded, isSignedIn, signOut } = useAuth()\n```\n\n----------------------------------------\n\nTITLE: End-to-End Account Portal Authentication Testing with Clerk and Cypress (TypeScript)\nDESCRIPTION: Provides a complete Cypress test for the Clerk Account Portal authentication flow using setupClerkTestingToken from @clerk/testing/cypress. The snippet includes visiting a protected route, interacting with Clerk sign-in forms, entering credentials sourced from Cypress environment variables, and asserting successful redirection and access. Dependencies include Cypress, @clerk/testing/cypress, configured API keys, and the presence of test_user and test_password environment variables. Inputs involve URL and user form selectors. Outputs include verified navigation and access for an authenticated test user. The snippet requires that specific Clerk user and configuration prerequisites be met.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/test-account-portal.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { setupClerkTestingToken } from '@clerk/testing/cypress'\\n\\ndescribe('Testing Tokens', () => {\\n  it('sign in with Account Portal redirects', () => {\\n    setupClerkTestingToken()\\n\\n    cy.origin('https://verb-noun-00.accounts.dev', () => {\\n      cy.visit('http://localhost:3000/protected')\\n      cy.contains('h1', 'Sign in')\\n      cy.get('.cl-signIn-root').should('exist')\\n      cy.get('input[name=identifier]').type(Cypress.env('test_user'))\\n\\n      cy.get('.cl-formButtonPrimary').contains('button', 'Continue').click()\\n      cy.get('input[name=password]').type(Cypress.env('test_password'))\\n\\n      cy.get('.cl-formButtonPrimary').contains('button', 'Continue').click()\\n    })\\n\\n    cy.url().should('include', '/protected')\\n    // Ensure the user has successfully accessed the protected page\\n    // by checking an element on the page that only the authenticated user can access\\n    cy.contains('h1', 'This is a PROTECTED page')\\n  })\\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Organization Invitations with Next.js and Clerk\nDESCRIPTION: A complete Next.js implementation for handling organization invitation flows using Clerk. The component handles both sign-in and sign-up scenarios based on the invitation token and status, including form handling for new user registration and automatic sign-in for existing users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/accept-organization-invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useOrganization, useSignIn, useSignUp } from '@clerk/nextjs'\nimport { useSearchParams } from 'next/navigation'\n\nexport default function Page() {\n  const { isLoaded, signUp, setActive: setActiveSignUp } = useSignUp()\n  const { signIn, setActive: setActiveSignIn } = useSignIn()\n  const { organization } = useOrganization()\n  const [firstName, setFirstName] = React.useState('')\n  const [lastName, setLastName] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  // Get the token and account status from the query params\n  const token = useSearchParams().get('__clerk_ticket')\n  const accountStatus = useSearchParams().get('__clerk_status')\n\n  // If there is no invitation token, restrict access to this page\n  if (!token) {\n    return <p>No invitation token found.</p>\n  }\n\n  // Handle sign-in\n  React.useEffect(() => {\n    if (!signIn || !setActiveSignIn || !token || organization || accountStatus !== 'sign_in') {\n      return\n    }\n\n    const createSignIn = async () => {\n      try {\n        // Create a new `SignIn` with the supplied invitation token.\n        // Make sure you're also passing the ticket strategy.\n        const signInAttempt = await signIn.create({\n          strategy: 'ticket',\n          ticket: token as string,\n        })\n\n        // If the sign-in was successful, set the session to active\n        if (signInAttempt.status === 'complete') {\n          await setActiveSignIn({\n            session: signInAttempt.createdSessionId,\n          })\n        } else {\n          // If the sign-in attempt is not complete, check why.\n          // User may need to complete further steps.\n          console.error(JSON.stringify(signInAttempt, null, 2))\n        }\n      } catch (err) {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error('Error:', JSON.stringify(err, null, 2))\n      }\n    }\n\n    createSignIn()\n  }, [signIn])\n\n  // Handle submission of the sign-up form\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      // Create a new sign-up with the supplied invitation token.\n      // Make sure you're also passing the ticket strategy.\n      // After the below call, the user's email address will be\n      // automatically verified because of the invitation token.\n      const signUpAttempt = await signUp.create({\n        strategy: 'ticket',\n        ticket: token,\n        firstName,\n        lastName,\n        password,\n      })\n\n      // If the sign-up was successful, set the session to active\n      if (signUpAttempt.status === 'complete') {\n        await setActiveSignUp({ session: signUpAttempt.createdSessionId })\n      } else {\n        // If the sign-in attempt is not complete, check why.\n        // User may need to complete further steps.\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (accountStatus === 'sign_in' && !organization) {\n    return <div>Signing you in...</div>\n  }\n\n  if (accountStatus === 'sign_up' && !organization) {\n    return (\n      <>\n        <h1>Sign up</h1>\n        <form onSubmit={handleSignUp}>\n          <div>\n            <label htmlFor=\"firstName\">Enter first name</label>\n            <input\n              id=\"firstName\"\n              type=\"text\"\n              name=\"firstName\"\n              value={firstName}\n              onChange={(e) => setFirstName(e.target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"lastName\">Enter last name</label>\n            <input\n              id=\"lastName\"\n              type=\"text\"\n              name=\"lastName\"\n              value={lastName}\n              onChange={(e) => setLastName(e.target.value)}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"password\">Enter password</label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n          <div>\n            <button type=\"submit\">Next</button>\n          </div>\n        </form>\n      </>\n    )\n  }\n\n  return <div>Organization invitation accepted!</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Sign-In Token Example\nDESCRIPTION: Example showing how to create a sign-in token with a custom expiration time of one week. Uses the clerkClient.signInTokens.createSignInToken() method with userId and expiresInSeconds parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sign-in-tokens/create-sign-in-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst expiresInSeconds = 60 * 60 * 24 * 7 // 1 week\n\nconst response = await clerkClient.signInTokens.createSignInToken({\n  userId,\n  expiresInSeconds,\n})\n```\n\n----------------------------------------\n\nTITLE: Using auth.protect() in Next.js Route Handlers\nDESCRIPTION: This snippet demonstrates the use of `auth.protect()` in a Next.js Route Handler to protect against unauthenticated and unauthorized access. It checks for the 'org:team_settings:manage' permission and throws a 404 error if not authorized.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport const GET = async () => {\n  const { userId } = await auth.protect({\n    permission: 'org:team_settings:manage',\n  })\n\n  return Response.json({ userId })\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Nuxt SDK using Package Managers (Bash)\nDESCRIPTION: Commands to install the `@clerk/nuxt` package using different package managers (npm, yarn, pnpm, or bun). This SDK is required to integrate Clerk authentication features, including components and composables, into a Nuxt application. Requires Node.js and the respective package manager to be installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nuxt.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nuxt\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nuxt\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nuxt\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nuxt\n```\n\n----------------------------------------\n\nTITLE: Loading Profile Data with Clerk Server Helpers in React Router – TypeScript\nDESCRIPTION: This snippet demonstrates how to use Clerk's `getAuth()` helper to protect a server-side route and retrieve the currently authenticated user's data using the Backend SDK in a React Router application. It depends on `@clerk/react-router/ssr.server`, `@clerk/react-router/api.server`, and TypeScript type definitions. The page loader verifies authentication, fetches the full user object via `getUser()` using an environment secret, and returns serialized user data for rendering. The returned data includes profile information for authenticated sessions; unauthenticated requests are redirected to the sign-in page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { redirect } from 'react-router'\nimport { getAuth } from '@clerk/react-router/ssr.server'\nimport { createClerkClient } from '@clerk/react-router/api.server'\nimport type { Route } from './+types/profile'\n\nexport async function loader(args: Route.LoaderArgs) {\n  // Use `getAuth()` to get the user's ID\n  const { userId } = await getAuth(args)\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  // Instantiate the Backend SDK and get the user's full `Backend User` object\n  const user = await createClerkClient({ secretKey: process.env.CLERK_SECRET_KEY }).users.getUser(\n    userId,\n  )\n\n  return {\n    user: JSON.stringify(user),\n  }\n}\n\nexport default function Profile({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>Profile Data</h1>\n      <pre>\n        <code>{JSON.stringify(loaderData, null, 2)}</code>\n      </pre>\n    </div>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Adding Global TypeScript Type Reference for Clerk (TypeScript)\nDESCRIPTION: Provides a TypeScript code snippet for a global declaration file (`types/globals.d.ts`). Adding the `/// <reference types=\"@clerk/express/env\" />` directive enables TypeScript's type checking and autocompletion features for the `auth` object that Clerk middleware attaches to the Express request object, improving developer experience and code safety.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n/// <reference types=\"@clerk/express/env\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing MFA Sign-In Flow in React Native (Expo) with Clerk\nDESCRIPTION: This TSX component implements a multi-factor sign-in screen for a React Native application using Expo and Clerk. It utilizes the `useSignIn` hook to manage the sign-in process. The component first presents fields for email and password (`handleFirstStage`). If the initial sign-in attempt requires a second factor (`needs_second_factor`), it displays a form for entering a TOTP or backup code (`onPressTOTP`), including a checkbox to specify if a backup code is being used. Upon successful completion, it sets the active session and navigates the user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { useSignIn } from '@clerk/clerk-expo'\nimport { useRouter } from 'expo-router'\nimport { Text, TextInput, Button, View } from 'react-native'\nimport Checkbox from 'expo-checkbox'\n\nexport default function Page() {\n  const { signIn, setActive, isLoaded } = useSignIn()\n\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const [useBackupCode, setUseBackupCode] = React.useState(false)\n  const [displayTOTP, setDisplayTOTP] = React.useState(false)\n  const router = useRouter()\n\n  // Handle user submitting email and pass and swapping to TOTP form\n  const handleFirstStage = async () => {\n    if (!isLoaded) return\n\n    // Attempt to sign in using the email and password provided\n    try {\n      const attemptFirstFactor = await signIn.create({\n        identifier: email,\n        password,\n      })\n\n      // If the sign-in was successful, set the session to active\n      // and redirect the user\n      if (attemptFirstFactor.status === 'complete') {\n        await setActive({ session: attemptFirstFactor.createdSessionId })\n        router.replace('/')\n      } else if (attemptFirstFactor.status === 'needs_second_factor') {\n        // If the sign-in requires a second factor, display the TOTP form\n        setDisplayTOTP(true)\n      } else {\n        // If the sign-in failed, check why. User might need to\n        // complete further steps.\n        console.error(JSON.stringify(attemptFirstFactor, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  // Handle the submission of the TOTP or backup code\n  const onPressTOTP = React.useCallback(async () => {\n    if (!isLoaded) return\n\n    try {\n      // Attempt the TOTP or backup code verification\n      const attemptSecondFactor = await signIn.attemptSecondFactor({\n        strategy: useBackupCode ? 'backup_code' : 'totp',\n        code: code,\n      })\n\n      // If verification was completed, set the session to active\n      // and redirect the user\n      if (attemptSecondFactor.status === 'complete') {\n        await setActive({ session: attemptSecondFactor.createdSessionId })\n\n        router.replace('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(attemptSecondFactor, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [isLoaded, email, password, code, useBackupCode])\n\n  if (displayTOTP) {\n    return (\n      <View>\n        <Text>Verify your account</Text>\n\n        <View>\n          <TextInput\n            value={code}\n            placeholder=\"Enter the code\"\n            placeholderTextColor=\"#666666\"\n            onChangeText={(c) => setCode(c)}\n          />\n        </View>\n        <View style={{ flexDirection: 'row', alignItems: 'center', gap: 5 }}>\n          <Text>Check if this code is a backup code</Text>\n          <Checkbox value={useBackupCode} onValueChange={() => setUseBackupCode((prev) => !prev)} />\n        </View>\n        <Button title=\"Verify\" onPress={onPressTOTP} />\n      </View>\n    )\n  }\n\n  return (\n    <View>\n      <Text>Sign in</Text>\n      <View>\n        <TextInput\n          value={email}\n          placeholder=\"Enter email\"\n          placeholderTextColor=\"#666666\"\n          onChangeText={(email) => setEmail(email)}\n        />\n      </View>\n\n      <View>\n        <TextInput\n          value={password}\n          placeholder=\"Enter password\"\n          placeholderTextColor=\"#666666\"\n          secureTextEntry={true}\n          onChangeText={(password) => setPassword(password)}\n        />\n      </View>\n\n      <Button title=\"Continue\" onPress={handleFirstStage} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient Parameter in Clerk SDK (JavaScript)\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the createClerkClient function from the Clerk SDK for Node.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/clerk-sdk-node'\n\ncreateClerkClient({ apiKey: '...' })\ncreateClerkClient({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Implementing Email/Password Sign-In with Clerk in SwiftUI (Swift)\nDESCRIPTION: Implements a SwiftUI view for signing in with email and password using the Clerk Swift package. Provides input fields and a button to submit credentials, which triggers async sign-in logic. Handles different sign-in states, including prompting further steps if required or dumping the session on success. Requires Clerk dependencies and proper setup. Inputs include email and password string states; outputs include navigation or debug info depending on authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_11\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct EmailPasswordSignInView: View {\n  @State private var email = \"\"\n  @State private var password = \"\"\n\n  var body: some View {\n    TextField(\"Enter email address\", text: $email)\n    SecureField(\"Enter password\", text: $password)\n    Button(\"Sign In\") {\n      Task { await submit(email: email, password: password) }\n    }\n  }\n}\n\nextension EmailPasswordSignInView {\n\n  func submit(email: String, password: String) async {\n    do {\n      // Start the sign-in process using the email and password provided\n      let signIn = try await SignIn.create(strategy: .identifier(email, password: password))\n\n      switch signIn.status {\n      case .complete:\n        // If sign-in process is complete, navigate the user as needed.\n        dump(Clerk.shared.session)\n      default:\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        dump(signIn.status)\n      }\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Current User in a Next.js Server Component using Clerk (TypeScript/JSX)\nDESCRIPTION: This example shows how to use `currentUser()` from `@clerk/nextjs/server` inside an async Next.js Server Component (`app/page.tsx`). It awaits the `currentUser()` call to fetch the user object and then conditionally renders content based on whether a user is signed in. If signed in, it displays a greeting with the user's first name; otherwise, it shows 'Not signed in'. The function returns a `Backend User` object or null.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/current-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/page.tsx' }}\nimport { currentUser } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const user = await currentUser()\n\n  if (!user) return <div>Not signed in</div>\n\n  return <div>Hello {user?.firstName}</div>\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Session Token with publicMetadata in Clerk\nDESCRIPTION: JSON configuration for customizing the Clerk session token to include the user's publicMetadata. This allows access to metadata (including roles) directly from the session token without additional network requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metadata\": \"{{user.public_metadata}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using requireAuth Helper for Route-Level Auth in TypeScript\nDESCRIPTION: Shows how to attach the requireAuth middleware to individual application routes to ensure only authenticated users can access them. Utilizes the previously defined requireAuth helper and expects an application framework supporting middleware registration. Suitable for Express/Koa-like contexts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst app = new Framework()\n\napp.get('/path', requireAuth())\n```\n\n----------------------------------------\n\nTITLE: Using auth() in Next.js Server Components\nDESCRIPTION: This snippet demonstrates how to use Clerk's `auth()` helper in a Next.js Server Component. The auth() helper returns the user's authentication state and opts the entire route into dynamic rendering since it relies on request-time data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/rendering-modes.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\n// This page will be dynamically rendered at request time\nexport default async function Page() {\n  const { userId } = await auth()\n\n  // This will be immediately available on first render\n  console.log(userId)\n\n  return <p>Hello, {userId}</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Testing Token in Playwright Tests in TypeScript\nDESCRIPTION: This snippet shows how to use 'setupClerkTestingToken' from '@clerk/testing/playwright' within individual Playwright test cases. It injects a Testing Token into the test page context, bypassing Clerk's bot detection, and allows further interactions on protected pages. Dependencies: '@clerk/testing/playwright', '@playwright/test'. Key parameter: 'page', representing the current browser page. Input: test context. Output: Authenticated browser session for the test.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { setupClerkTestingToken } from '@clerk/testing/playwright'\nimport { test } from '@playwright/test'\n\ntest('sign up', async ({ page }) => {\n  await setupClerkTestingToken({ page })\n\n  await page.goto('/sign-up')\n  // Add additional test logic here\n})\n```\n\n----------------------------------------\n\nTITLE: Wrapping a Remix App with ClerkApp (Basic Usage)\nDESCRIPTION: This snippet shows how to wrap the root Remix component (`App`) using the `ClerkApp` higher-order component. This integrates Clerk's authentication context provider into the React tree, making authentication state available throughout the application. It assumes a standard Remix `root.tsx` file structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/clerk-app.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// The rest of your code\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\n// Wrap your app with `ClerkApp`\nexport default ClerkApp(App)\n```\n\n----------------------------------------\n\nTITLE: Configuring clerkMiddleware in Next.js\nDESCRIPTION: Example of setting up clerkMiddleware in a Next.js application. This snippet creates a middleware.ts file that integrates Clerk authentication with proper route matching configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware()\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Email and Password Sign-In Form with Clerk in Standard Web App (HTML)\nDESCRIPTION: Defines a basic HTML structure for a web app that integrates Clerk for authentication. Includes a sign-in form for collecting email and password, and container elements for displaying signed-in content. The page loads a JavaScript module (main.js) to handle logic. No dependencies apart from the referenced main.js and Clerk CDN/module loading. Parameters include email and password captured from form inputs. This layout supports extension via accompanying JavaScript to handle authentication workflows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_8\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-in\">\n      <h2>Sign in</h2>\n      <form id=\"sign-in-form\">\n        <label for=\"email\">Enter email address</label>\n        <input name=\"email\" id=\"sign-in-email\" />\n        <label for=\"password\">Enter password</label>\n        <input name=\"password\" id=\"sign-in-password\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Fetching Organization Data with Different Configuration Options in React\nDESCRIPTION: Examples of how to use the useOrganization() hook with different configurations to fetch and paginate organization data, including default values, custom pagination settings, and infinite scrolling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n// invitations.data will never be populated.\nconst { invitations } = useOrganization()\n\n// Use default values to fetch invitations, such as initialPage = 1 and pageSize = 10\nconst { invitations } = useOrganization({\n  invitations: true,\n})\n\n// Pass your own values to fetch invitations\nconst { invitations } = useOrganization({\n  invitations: {\n    pageSize: 20,\n    initialPage: 2, // skips the first page\n  },\n})\n\n// Aggregate pages in order to render an infinite list\nconst { invitations } = useOrganization({\n  invitations: {\n    infinite: true,\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Protecting a TanStack React Start API Route with Clerk (TS)\nDESCRIPTION: This snippet shows how to secure a TanStack React Start API route (`createAPIFileRoute`). It uses `getAuth` from `@clerk/tanstack-react-start/server` to get the `userId`. If the user is not authenticated (`!userId`), it returns a 401 Unauthorized response. Otherwise, it uses `createClerkClient` (Clerk Backend SDK) to fetch the full user object and returns it in the JSON response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\n```ts {{ filename: 'app/routes/api/example.ts' }}\nimport { getAuth } from '@clerk/tanstack-react-start/server'\nimport { json } from '@tanstack/react-start'\nimport { createAPIFileRoute } from '@tanstack/react-start/api'\n\nexport const Route = createAPIFileRoute('/api/example')({\n  GET: async ({ req, params }) => {\n    // Use `getAuth()` to retrieve the user's ID\n    const { userId } = await getAuth(req)\n\n    // Protect the API route by checking if the user is signed in\n    if (!userId) {\n      return json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    // Instantiate the Backend SDK\n    const clerkClient = createClerkClient({\n      secretKey: import.meta.env.CLERK_SECRET_KEY,\n    })\n\n    // Get the user's full `Backend User` object\n    const user = userId ? await clerkClient.users.getUser(userId) : null\n\n    return json({ user })\n  },\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Ending a Session in JavaScript\nDESCRIPTION: This JavaScript code demonstrates how to use the end method of the Session object to terminate the current session.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.end()\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of `buildClerkProps` in Next.js `getServerSideProps` (TypeScript)\nDESCRIPTION: This snippet demonstrates the fundamental use of `buildClerkProps` within the `getServerSideProps` function in a Next.js page. It retrieves the user ID using `getAuth` from the request context (`ctx.req`), includes basic handling for an unauthenticated user, and then injects Clerk-specific props into the page's props using `buildClerkProps(ctx.req)`. This makes the authentication state available on the client-side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/build-clerk-props.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'pages/myServerSidePage' }}\nimport { getAuth, buildClerkProps } from '@clerk/nextjs/server'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  const { userId } = getAuth(ctx.req)\n\n  if (!userId) {\n    // handle user is not signed in.\n  }\n\n  // Load any data your application needs for the page using the userId\n  return { props: { ...buildClerkProps(ctx.req) } }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Sign-Up Form with Custom Styling in React\nDESCRIPTION: This code snippet showcases a complete sign-up form implementation using Clerk's React components. It includes custom styling for form elements, error handling, and navigation between sign-up and sign-in pages. The component uses Clerk.Field for input fields and SignUp.Action for the submit button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JSX\nCODE:\n```\n    <div>\n      <SignUp.Root>\n        <SignUp.Step name=\"username\">\n          <header>\n            <h1 className=\"text-2xl font-semibold text-zinc-950\">\n              Create your account\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <Clerk.Field name=\"username\" className=\"space-y-2\">\n            <Clerk.Label className=\"text-sm font-medium text-zinc-950\">Username</Clerk.Label>\n            <Clerk.Input\n              type=\"text\"\n              required\n              className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n            />\n            <Clerk.FieldError className=\"block text-sm text-red-400\" />\n          </Clerk.Field>\n          <SignUp.Action\n            submit\n            className=\"w-full rounded-md bg-zinc-950 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow outline-none ring-1 ring-inset ring-zinc-950 hover:bg-zinc-800 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-zinc-950 active:text-white/70\"\n          >\n            Continue\n          </SignUp.Action>\n          <p className=\"text-center text-sm text-zinc-500\">\n            Already have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-in\"\n              className=\"font-medium text-zinc-950 decoration-zinc-950/20 underline-offset-4 outline-none hover:text-zinc-700 hover:underline focus-visible:underline\"\n            >\n              Sign in\n            </Clerk.Link>\n          </p>\n        </SignUp.Step>\n      </SignUp.Root>\n    </div>\n```\n\n----------------------------------------\n\nTITLE: Adding ClerkProvider and SignedIn/Out Components (TypeScript/TSX)\nDESCRIPTION: This snippet demonstrates how to wrap the application with the ClerkProvider and manage conditional UI using SignedIn, SignedOut, UserButton, and SignInButton components. It shows passing loaderData (from rootAuthLoader) and setting fallback redirect URLs for authentication flows. Dependencies: Clerk React Router SDK, React Router, TypeScript. Inputs: loaderData, authentication state; Output: mounted provider and dynamic user-aware header. Ensure to place this in root.tsx after configuring the loader.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react-router.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Other imports\\n\\nimport { ClerkProvider, SignedIn, SignedOut, UserButton, SignInButton } from '@clerk/react-router'\\n\\nexport default function App({ loaderData }: Route.ComponentProps) {\\n  return (\\n    <ClerkProvider\\n      loaderData={loaderData}\\n      signUpFallbackRedirectUrl=\\\"/\\\"\\n      signInFallbackRedirectUrl=\\\"/\\\"\\n    >\\n      <header className=\\\"flex items-center justify-center py-8 px-4\\\">\\n        <SignedOut>\\n          <SignInButton />\\n        </SignedOut>\\n        <SignedIn>\\n          <UserButton />\\n        </SignedIn>\\n      </header>\\n      <main>\\n        <Outlet />\\n      </main>\\n    </ClerkProvider>\\n  )\\n}\\n\\n// Rest of the root.tsx code\n```\n\n----------------------------------------\n\nTITLE: Configuring React Router Routes for Sign-Up in TypeScript\nDESCRIPTION: This TypeScript snippet shows how to configure routes in a React Router application using `@react-router/dev/routes`. It defines an array of routes, specifically adding a route configuration `route('sign-up/*', 'routes/sign-up.tsx')` which maps the URL path `/sign-up/*` to the previously created `sign-up.tsx` component file. This makes the custom sign-up page accessible within the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes.ts', mark: [6] }}\nimport { type RouteConfig, index, route } from '@react-router/dev/routes'\n\nexport default [\n  index('routes/home.tsx'),\n  route('sign-in/*', 'routes/sign-in.tsx'),\n  route('sign-up/*', 'routes/sign-up.tsx'),\n] satisfies RouteConfig\n```\n```\n\n----------------------------------------\n\nTITLE: Adding clerkMiddleware to an Express App (TypeScript)\nDESCRIPTION: Demonstrates importing and applying the `clerkMiddleware()` from `@clerk/express` to an Express application. This middleware automatically checks incoming requests for Clerk session tokens (JWT) in cookies or headers. If a valid token is found, it populates the `request.auth` object with authentication details. Requires environment variables (like API keys) to be loaded, typically via `dotenv/config`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'dotenv/config'\nimport express from 'express'\nimport { clerkMiddleware } from '@clerk/express'\n\nconst app = express()\nconst PORT = 3000\n\napp.use(clerkMiddleware())\n\n// Start the server and listen on the specified port\napp.listen(PORT, () => {\n  console.log(`Example app listening at http://localhost:${PORT}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Email/Password Sign-In Flow with Clerk in React Native (Expo, TypeScript)\nDESCRIPTION: Implements an email/password sign-in screen for a React Native app using Expo and Clerk. Uses Clerk's useSignIn hook to manage authentication state, react-navigation routing, and controlled input fields for user credentials. Handles sign-in submission, session activation, redirecting upon success, and error reporting. Relies on the @clerk/clerk-expo package and Expo Router. Expects 'emailAddress' and 'password' from state, and leverages async operations to communicate with Clerk's API. Displays sign-in and sign-up navigation options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSignIn } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\nimport { Text, TextInput, Button, View } from 'react-native'\nimport React from 'react'\n\nexport default function Page() {\n  const { signIn, setActive, isLoaded } = useSignIn()\n  const router = useRouter()\n\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  // Handle the submission of the sign-in form\n  const onSignInPress = React.useCallback(async () => {\n    if (!isLoaded) return\n\n    // Start the sign-in process using the email and password provided\n    try {\n      const signInAttempt = await signIn.create({\n        identifier: emailAddress,\n        password,\n      })\n\n      // If sign-in process is complete, set the created session as active\n      // and redirect the user\n      if (signInAttempt.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.replace('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [isLoaded, emailAddress, password])\n\n  return (\n    <View>\n      <Text>Sign in</Text>\n      <TextInput\n        autoCapitalize=\"none\"\n        value={emailAddress}\n        placeholder=\"Enter email\"\n        placeholderTextColor=\"#666666\"\n        onChangeText={(emailAddress) => setEmailAddress(emailAddress)}\n      />\n      <TextInput\n        value={password}\n        placeholder=\"Enter password\"\n        placeholderTextColor=\"#666666\"\n        secureTextEntry={true}\n        onChangeText={(password) => setPassword(password)}\n      />\n      <Button title=\"Sign in\" onPress={onSignInPress} />\n      <View style={{ flexDirection: 'row', gap: 4 }}>\n        <Text>Don't have an account?</Text>\n        <Link href=\"/sign-up\">\n          <Text>Sign up</Text>\n        </Link>\n      </View>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Layout for Onboarding Route in Next.js\nDESCRIPTION: Next.js layout component for the onboarding route that redirects users to the homepage if they have already completed onboarding. This uses Clerk's auth helper to check the onboarding status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { redirect } from 'next/navigation'\n\nexport default async function RootLayout({ children }: { children: React.ReactNode }) {\n  if ((await auth()).sessionClaims?.metadata.onboardingComplete === true) {\n    redirect('/')\n  }\n\n  return <>{children}</>\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering UserProfile Component in Next.js\nDESCRIPTION: Example of how to embed the <UserProfile /> component in a Next.js application using the optional catch-all route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { UserProfile } from '@clerk/nextjs'\n\nconst UserProfilePage = () => <UserProfile />\n\nexport default UserProfilePage\n```\n\n----------------------------------------\n\nTITLE: Implementing InstantDB Authentication Sync with Clerk\nDESCRIPTION: Client-side component that synchronizes authentication states between Clerk and InstantDB. It signs users into InstantDB using Clerk's session token when they're signed in, and signs them out of InstantDB when they sign out of Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { db } from '@/db/instant'\nimport { useAuth, useUser } from '@clerk/nextjs'\nimport { useEffect } from 'react'\n\n// If a user is signed in with Clerk, sign them in with InstantDB\nexport default function InstantDBAuthSync() {\n  const { isSignedIn } = useUser()\n  const { getToken } = useAuth()\n\n  useEffect(() => {\n    if (isSignedIn) {\n      getToken()\n        .then((token) => {\n          // Create a long-lived session with Instant for your Clerk user\n          // It will look up the user by email or create a new user with\n          // the email address in the session token.\n          db.auth.signInWithIdToken({\n            clientName: process.env.NEXT_PUBLIC_CLERK_CLIENT_NAME as string,\n            idToken: token as string,\n          })\n        })\n        .catch((error) => {\n          console.error('Error signing in with Instant', error)\n        })\n    } else {\n      db.auth.signOut()\n    }\n  }, [isSignedIn])\n\n  return null\n}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Implementation of Organization Role Management\nDESCRIPTION: Vanilla JavaScript implementation for managing organization roles using Clerk's JavaScript SDK. Includes functionality for rendering memberships and handling role updates and member removal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-roles.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    // Render list of organization memberships\n    async function renderMemberships(organization, isAdmin) {\n      try {\n        const { data } = await organization.getMemberships()\n        const memberships = data\n        console.log(`getMemberships:`, memberships)\n\n        memberships.map((membership) => {\n          const membershipTable = document.getElementById('memberships-table-body')\n          const row = membershipTable.insertRow()\n          row.insertCell().textContent = membership.publicUserData.userId\n          row.insertCell().textContent = membership.publicUserData.identifier\n          row.insertCell().textContent = membership.createdAt.toLocaleDateString()\n          row.insertCell().textContent = membership.role\n\n          // Add administrative actions:\n          // Add and remove a member, and update a member's role.\n          if (isAdmin) {\n            // Show update and remove member buttons\n            document.getElementById('update-role-head').removeAttribute('hidden')\n            document.getElementById('remove-member-head').removeAttribute('hidden')\n\n            // Get the user ID of the member\n            const userId = membership.publicUserData.userId\n\n            // Update a member's role\n            const updateBtn = document.createElement('button')\n            updateBtn.textContent = 'Change role'\n            updateBtn.addEventListener('click', async function (e) {\n              e.preventDefault()\n\n              const role = membership.role === 'org:admin' ? 'org:member' : 'org:admin'\n\n              await organization\n                .updateMember({ userId, role })\n                .then((res) => console.log(`updateMember response:`, res))\n                .catch((error) => console.log('An error occurred:', error))\n            })\n            row.insertCell().appendChild(updateBtn)\n\n            // Remove a member\n            const removeBtn = document.createElement('button')\n            removeBtn.textContent = 'Remove'\n            removeBtn.addEventListener('click', async function (e) {\n              e.preventDefault()\n\n              await organization\n                .removeMember(userId)\n                .then((res) => console.log(`removeMember response:`, res))\n            })\n            row.insertCell().appendChild(removeBtn)\n          }\n        })\n      } catch (err) {\n        console.error('Error:', err)\n      }\n    }\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in React\nDESCRIPTION: This snippet demonstrates how to create a SignUp page in a React application. It imports the SignUp component from @clerk/clerk-react and renders it as a functional component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignUp } from '@clerk/clerk-react'\n\nconst SignUpPage = () => <SignUp />\n\nexport default SignUpPage\n```\n\n----------------------------------------\n\nTITLE: OTP Input Component with Clerk Elements\nDESCRIPTION: A standalone OTP input component implementation using Clerk Elements. Features auto-submit functionality, custom rendering of input cells with status indicators, and animated cursor feedback. Designed to work within sign-in or sign-up authentication flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Input\n  type=\"otp\"\n  className=\"flex justify-center has-[:disabled]:opacity-50\"\n  autoSubmit\n  render={({ value, status }) => {\n    return (\n      <div\n        data-status={status}\n        className={cn(\n          'relative flex size-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md',\n          {\n            'z-10 ring-2 ring-ring ring-offset-background':\n              status === 'cursor' || status === 'selected',\n          },\n        )}\n      >\n        {value}\n        {status === 'cursor' && (\n          <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n            <div className=\"animate-caret-blink h-4 w-px bg-foreground duration-1000\" />\n          </div>\n        )}\n      </div>\n    )\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationInvitationList return signature in JavaScript\nDESCRIPTION: This snippet demonstrates the change in return signature for Users.getOrganizationInvitationList from directly returning data to returning an object with 'data' and 'totalCount' properties, which aligns with the Backend API response format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Adding TOTP MFA in React Native with QR Code Generation\nDESCRIPTION: This component implements the TOTP MFA setup flow in React Native. It includes generating a QR code or URI for authenticator apps, verifying the TOTP code, and creating backup codes using Clerk's API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { useUser } from '@clerk/clerk-expo'\nimport { Link } from 'expo-router'\nimport { QrCodeSvg } from 'react-native-qr-svg'\nimport { FlatList, Button, Text, TextInput, View } from 'react-native'\n\nimport { BackupCodeResource, TOTPResource } from '@clerk/types'\n\ntype AddTotpSteps = 'add' | 'verify' | 'backupcodes' | 'success'\ntype DisplayFormat = 'qr' | 'uri'\n\nfunction AddTOTPMfa({ setStep }: { setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>> }) {\n  const [totp, setTotp] = React.useState<TOTPResource | undefined>(undefined)\n  const [displayFormat, setDisplayFormat] = React.useState<DisplayFormat>('qr')\n  const { user } = useUser()\n\n  React.useEffect(() => {\n    void user\n      ?.createTOTP()\n      .then((totp: TOTPResource) => setTotp(totp))\n      .catch((err) => console.error(JSON.stringify(err, null, 2)))\n  }, [])\n\n  return (\n    <View>\n      <Text>Add TOTP MFA</Text>\n\n      {totp && displayFormat === 'qr' && (\n        <>\n          <View>\n            <QrCodeSvg value={totp?.uri || ''} frameSize={200} />\n          </View>\n          <Button title=\"Use URI\" onPress={() => setDisplayFormat('uri')} />\n        </>\n      )}\n\n      {totp && displayFormat === 'uri' && (\n        <>\n          <View>\n            <Text>{totp.uri}</Text>\n          </View>\n          <Button title=\"Use QR Code\" onPress={() => setDisplayFormat('qr')} />\n        </>\n      )}\n\n      <Button title=\"Verify\" onPress={() => setStep('verify')} />\n      <Button title=\"Reset\" onPress={() => setStep('add')} />\n    </View>\n  )\n}\n\nfunction VerifyMFA({ setStep }: { setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>> }) {\n  const [code, setCode] = React.useState('')\n\n  const { user } = useUser()\n\n  const verifyTotp = async (e: any) => {\n    await user\n      ?.verifyTOTP({ code })\n      .then(() => setStep('backupcodes'))\n      .catch((err) => console.error(JSON.stringify(err, null, 2)))\n  }\n\n  return (\n    <>\n      <Text>Verify MFA</Text>\n      <TextInput\n        value={code}\n        placeholder=\"Enter code\"\n        placeholderTextColor=\"#666666\"\n        onChangeText={(c) => setCode(c)}\n      />\n      <Button onPress={verifyTotp} title=\"Verify Code\" />\n      <Button onPress={() => setStep('add')} title=\"Reset\" />\n    </>\n  )\n}\n\nfunction BackupCodes({ setStep }: { setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>> }) {\n  const { user } = useUser()\n  const [backupCode, setBackupCode] = React.useState<BackupCodeResource | undefined>(undefined)\n\n  React.useEffect(() => {\n    if (backupCode) {\n      return\n    }\n\n    void user\n      ?.createBackupCode()\n      .then((backupCode: BackupCodeResource) => setBackupCode(backupCode))\n      .catch((err) => console.error(JSON.stringify(err, null, 2)))\n  }, [])\n\n  return (\n    <>\n      <Text>Verification was a success!</Text>\n      {backupCode && (\n        <View>\n          <Text>\n```\n\n----------------------------------------\n\nTITLE: Processing Authenticated Profile Form Submission with Clerk – TypeScript\nDESCRIPTION: This snippet shows how to handle authenticated form submissions on the server-side using Clerk's `getAuth()` and the Backend SDK in a React Router app. It requires dependencies on `@clerk/react-router/ssr.server`, `@clerk/react-router/api.server`, and React Router's form utilities. The `action` function ensures the user is authenticated and then reads form input (\"name\"), retrieves the full user object, and returns both for rendering. Unauthenticated users are redirected to sign-in. The React component renders a controlled form and displays the response data upon submission, providing a secured way to update or display user profile information.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { redirect, Form } from 'react-router'\nimport { getAuth } from '@clerk/react-router/ssr.server'\nimport { createClerkClient } from '@clerk/react-router/api.server'\nimport type { Route } from './+types/profile-form'\n\nexport async function action(args: Route.ActionArgs) {\n  // Use `getAuth()` to get the user's ID\n  const { userId } = await getAuth(args)\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  // Get the form data\n  const formData = await args.request.formData()\n  const name = formData.get('name')?.toString()\n\n  // Instantiate the Backend SDK and get the user's full `Backend User` object\n  const user = await createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n  }).users.getUser(userId)\n\n  return {\n    name,\n    user: JSON.stringify(user),\n  }\n}\n\nexport default function ProfileForm({ actionData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>Profile Data</h1>\n\n      <Form method=\"post\">\n        <label htmlFor=\"name\">Name</label>\n        <input type=\"text\" name=\"name\" id=\"name\" />\n        <button type=\"submit\">Submit</button>\n      </Form>\n\n      {actionData ? (\n        <pre>\n          <code>{JSON.stringify(actionData, null, 2)}</code>\n        </pre>\n      ) : null}\n    </div>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using useAuth() in Next.js Client Components with Dynamic Rendering\nDESCRIPTION: This example shows how to use the `useAuth()` hook in a Next.js Client Component that is configured for dynamic rendering. When used with a dynamic ClerkProvider, authentication data will be immediately available on first render.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/rendering-modes.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useAuth } from '@clerk/nextjs'\n\nexport default function Page() {\n  const { userId, sessionId, isSignedIn } = useAuth()\n\n  // All of these will be immediately available on first render\n  console.log(userId, sessionId, isSignedIn)\n\n  return (\n    <div>\n      <h1>Test Page</h1>\n      <p>User ID: {userId}</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a User with Clerk SDK in TypeScript\nDESCRIPTION: This snippet demonstrates how to programmatically create a new user using the Clerk SDK in a TypeScript environment. It requires the Clerk SDK to be properly initialized and authenticated in your backend project. The createUser function accepts an object including firstName, lastName, emailAddress (as an array of strings), and password. The function returns a promise resolving to the response object from the API. Parameters should match expected types; improper or missing fields may trigger validation errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/create-user.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.users.createUser({\n  firstName: 'Test',\n  lastName: 'User',\n  emailAddress: ['testclerk123@gmail.com'],\n  password: 'password',\n})\n```\n\n----------------------------------------\n\nTITLE: Loading User Data Using Clerk getAuth in a Remix Loader (TypeScript)\nDESCRIPTION: This snippet demonstrates using Clerk’s `getAuth` helper within a Remix loader function to retrieve the authenticated user’s ID and fetch the user object from Clerk’s Backend SDK. The code initializes the SDK client using an environment variable for the Clerk secret key. If no authenticated user is found (`userId` missing), it redirects to the sign-in page with a redirect URL. The loader returns serialized user data, expected to be consumed by a Remix route. Dependencies include `@remix-run/node`, `@clerk/remix/ssr.server`, and `@clerk/remix/api.server`. Ensure environment variables are set for Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { LoaderFunction, redirect } from '@remix-run/node'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { createClerkClient } from '@clerk/remix/api.server'\n\nexport const loader: LoaderFunction = async (args) => {\n  // Use `getAuth()` to retrieve the user's ID\n  const { userId } = await getAuth(args)\n\n  // If there is no userId, then redirect to sign-in route\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  // Initialize the Backend SDK and get the user's full `Backend User` object\n  const user = await createClerkClient({ secretKey: process.env.CLERK_SECRET_KEY }).users.getUser(\n    userId,\n  )\n\n  // Return the retrieved user data\n  return { serialisedUser: JSON.stringify(user) }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Next.js Custom Email/Password Sign-up Implementation\nDESCRIPTION: A React component for Next.js App Router that implements a custom email/password sign-up flow with email verification using Clerk. Handles both initial sign-up form and verification code submission.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [verifying, setVerifying] = React.useState(false)\n  const [code, setCode] = React.useState('')\n  const router = useRouter()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      await signUp.create({\n        emailAddress,\n        password,\n      })\n\n      await signUp.prepareEmailAddressVerification({\n        strategy: 'email_code',\n      })\n\n      setVerifying(true)\n    } catch (err: any) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  const handleVerify = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      const signUpAttempt = await signUp.attemptEmailAddressVerification({\n        code,\n      })\n\n      if (signUpAttempt.status === 'complete') {\n        await setActive({ session: signUpAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err: any) {\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (verifying) {\n    return (\n      <>\n        <h1>Verify your email</h1>\n        <form onSubmit={handleVerify}>\n          <label id=\"code\">Enter your verification code</label>\n          <input value={code} id=\"code\" name=\"code\" onChange={(e) => setCode(e.target.value)} />\n          <button type=\"submit\">Verify</button>\n        </form>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <h1>Sign up</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"email\">Enter email address</label>\n          <input\n            id=\"email\"\n            type=\"email\"\n            name=\"email\"\n            value={emailAddress}\n            onChange={(e) => setEmailAddress(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Enter password</label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">Continue</button>\n        </div>\n      </form>\n    </>\n  )\n```\n\n----------------------------------------\n\nTITLE: Using `clerkClient` within `getServerSideProps` with `buildClerkProps` (TypeScript)\nDESCRIPTION: This snippet illustrates how to integrate `clerkClient` within `getServerSideProps` to fetch user data based on the authenticated `userId` (obtained via `getAuth`). The fetched `user` object (or `undefined` if no `userId` exists) is then passed as part of the second argument to `buildClerkProps`. This pattern allows server-side logic to retrieve Clerk user data and pass it seamlessly to the client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/build-clerk-props.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'pages/api/example.ts' }}\nimport { getAuth, buildClerkProps, clerkClient } from '@clerk/nextjs/server'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  const { userId } = getAuth(ctx.req)\n\n  const user = userId ? await clerkClient().users.getUser(userId) : undefined\n\n  return { props: { ...buildClerkProps(ctx.req, { user }) } }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Password Input with Validation\nDESCRIPTION: Shows how to set up a password input field with real-time validation according to password rules set in the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"password\">\n  <Clerk.Label>Password</Clerk.Label>\n  <Clerk.Input type=\"password\" validatePassword />\n  <Clerk.FieldState>\n    {({ state, codes, message }) => (\n      <div>\n        <pre>Field state: {state}</pre>\n        <pre>Field msg: {message}</pre>\n        <pre>Codes: {codes?.join(', ')}</pre>\n      </div>\n    )}\n  </Clerk.FieldState>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Setting up Clerk Middleware in Next.js\nDESCRIPTION: Implementation of clerkMiddleware to handle authentication state throughout a Next.js application and enable route protection. Includes regex configuration to exclude static files from middleware processing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware()\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Setting up ClerkProvider with React Router\nDESCRIPTION: This snippet demonstrates how to implement ClerkProvider in a React Router application. It includes configuration for sign-in and sign-up fallback URLs and renders different components based on authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// Other imports\n\nimport { ClerkProvider, SignedIn, SignedOut, UserButton, SignInButton } from '@clerk/react-router'\n\nexport default function App({ loaderData }: Route.ComponentProps) {\n  return (\n    <ClerkProvider\n      loaderData={loaderData}\n      signUpFallbackRedirectUrl=\"/\"\n      signInFallbackRedirectUrl=\"/\"\n    >\n      <header className=\"flex items-center justify-center py-8 px-4\">\n        <SignedOut>\n          <SignInButton />\n        </SignedOut>\n        <SignedIn>\n          <UserButton />\n        </SignedIn>\n      </header>\n      <main>\n        <Outlet />\n      </main>\n    </ClerkProvider>\n  )\n}\n\n// Rest of the root.tsx code\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Redirect URLs via Environment Variables (env)\nDESCRIPTION: Sets up essential Clerk redirect URLs using environment variables in a .env file, aligning redirect behaviors with custom routes in the Remix app. Requires that the Clerk process loads these variables at startup (typically via dotenv or platform config). Parameters include CLERK_SIGN_IN_URL (path for sign-in), CLERK_SIGN_IN_FALLBACK_REDIRECT_URL (fallback for direct sign-in access), and CLERK_SIGN_UP_FALLBACK_REDIRECT_URL (fallback for sign-up navigation). Values must match the app's routing structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nCLERK_SIGN_IN_URL=/sign-in\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkApp Sign-Up Routes in SPA Mode - TypeScript\nDESCRIPTION: Customizes ClerkApp options directly in the Remix root file for SPA mode. Specifies where Clerk's sign-up page is hosted via 'signUpUrl' and defines fallback redirect URLs for both sign-up and sign-in logic. Prerequisite: import and use of ClerkApp along with an available publishable key. Intended for app/root.tsx.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default ClerkApp(App, {\n  publishableKey: PUBLISHABLE_KEY,\n  signUpUrl: '/sign-up',\n  signUpFallbackRedirectUrl: '/',\n  signInFallbackRedirectUrl: '/',\n})\n\n```\n\n----------------------------------------\n\nTITLE: Server-Side Route Protection\nDESCRIPTION: Implementation of server-side route protection using Clerk's getAuth function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { UserButton } from '@clerk/remix'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { LoaderFunction, redirect } from '@remix-run/node'\n\nexport const loader: LoaderFunction = async (args) => {\n  const { userId } = await getAuth(args)\n  if (!userId) {\n    return redirect('/sign-in')\n  }\n  return {}\n}\n\nexport default function Index() {\n  return (\n    <div>\n      <h1>Index route</h1>\n      <p>You are signed in!</p>\n      <UserButton />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Invitation Sign-up Flow in Next.js\nDESCRIPTION: This Next.js component demonstrates how to create a custom sign-up flow for handling application invitations. It extracts the invitation token from the URL, uses Clerk's useSignUp hook, and handles form submission to create a new user account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/application-invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp, useUser } from '@clerk/nextjs'\nimport { useSearchParams, useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const { user } = useUser()\n  const router = useRouter()\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const [firstName, setFirstName] = React.useState('')\n  const [lastName, setLastName] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  // Handle signed-in users visiting this page\n  // This will also redirect the user once they finish the sign-up process\n  React.useEffect(() => {\n    if (user?.id) {\n      router.push('/')\n    }\n  }, [user])\n\n  // Get the token from the query params\n  const token = useSearchParams().get('__clerk_ticket')\n\n  // If there is no invitation token, restrict access to this page\n  if (!token) {\n    return <p>No invitation token found.</p>\n  }\n\n  // Handle submission of the sign-up form\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      if (!token) return null\n\n      // Create a new sign-up with the supplied invitation token.\n      // Make sure you're also passing the ticket strategy.\n      // After the below call, the user's email address will be\n      // automatically verified because of the invitation token.\n      const signUpAttempt = await signUp.create({\n        strategy: 'ticket',\n        ticket: token,\n        firstName,\n        lastName,\n        password,\n      })\n\n      // If the sign-up was completed, set the session to active\n      if (signUpAttempt.status === 'complete') {\n        await setActive({ session: signUpAttempt.createdSessionId })\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <>\n      <h1>Sign up</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"firstName\">Enter first name</label>\n          <input\n            id=\"firstName\"\n            type=\"text\"\n            name=\"firstName\"\n            value={firstName}\n            onChange={(e) => setFirstName(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"lastName\">Enter last name</label>\n          <input\n            id=\"lastName\"\n            type=\"text\"\n            name=\"lastName\"\n            value={lastName}\n            onChange={(e) => setLastName(e.target.value)}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Enter password</label>\n          <input\n            id=\"password\"\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">Next</button>\n        </div>\n      </form>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Phone Number OTP Sign-In with Next.js and Clerk\nDESCRIPTION: This React component for Next.js implements a sign-in flow using phone number OTP with Clerk. It handles both the initial phone number submission and OTP verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\nimport { PhoneCodeFactor, SignInFirstFactor } from '@clerk/types'\nimport { useRouter } from 'next/navigation'\n\nexport default function Page() {\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const [verifying, setVerifying] = React.useState(false)\n  const [phone, setPhone] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const router = useRouter()\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n\n    if (!isLoaded && !signIn) return null\n\n    try {\n      // Start the sign-in process using the phone number method\n      const { supportedFirstFactors } = await signIn.create({\n        identifier: phone,\n      })\n\n      // Filter the returned array to find the 'phone_code' entry\n      const isPhoneCodeFactor = (factor: SignInFirstFactor): factor is PhoneCodeFactor => {\n        return factor.strategy === 'phone_code'\n      }\n      const phoneCodeFactor = supportedFirstFactors?.find(isPhoneCodeFactor)\n\n      if (phoneCodeFactor) {\n        // Grab the phoneNumberId\n        const { phoneNumberId } = phoneCodeFactor\n\n        // Send the OTP code to the user\n        await signIn.prepareFirstFactor({\n          strategy: 'phone_code',\n          phoneNumberId,\n        })\n\n        // Set verifying to true to display second form\n        // and capture the OTP code\n        setVerifying(true)\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  async function handleVerification(e: React.FormEvent) {\n    e.preventDefault()\n\n    if (!isLoaded && !signIn) return null\n\n    try {\n      // Use the code provided by the user and attempt verification\n      const signInAttempt = await signIn.attemptFirstFactor({\n        strategy: 'phone_code',\n        code,\n      })\n\n      // If verification was completed, set the session to active\n      // and redirect the user\n      if (signInAttempt.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n\n        router.push('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(signInAttempt)\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (verifying) {\n    return (\n      <>\n        <h1>Verify your phone number</h1>\n        <form onSubmit={handleVerification}>\n          <label htmlFor=\"code\">Enter your verification code</label>\n          <input value={code} id=\"code\" name=\"code\" onChange={(e) => setCode(e.target.value)} />\n          <button type=\"submit\">Verify</button>\n        </form>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <h1>Sign in</h1>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"phone\">Enter phone number</label>\n        <input\n          value={phone}\n          id=\"phone\"\n          name=\"phone\"\n          type=\"tel\"\n          onChange={(e) => setPhone(e.target.value)}\n        />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Secrets in .env Files for Node Applications\nDESCRIPTION: This `.env` snippet illustrates how to securely store Clerk keys and the webhook signing secret used for verifying incoming webhook payloads. It declares placeholders for the publishable and secret keys, as well as the webhook signing secret (`CLERK_WEBHOOK_SIGNING_SECRET`). All Clerk SDKs will read these environment variables for proper configuration. The secret value should be replaced with the one copied from the Clerk Dashboard. No code dependencies; ensure this file is not committed to public repositories.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\\nCLERK_SECRET_KEY={{secret}}\\nCLERK_WEBHOOK_SIGNING_SECRET=whsec_123\\n\n```\n\n----------------------------------------\n\nTITLE: Implementing SMS OTP Sign-In Flow with Clerk in Swift\nDESCRIPTION: This SwiftUI snippet defines a two-stage SMS OTP sign-in form using the Clerk SDK for iOS apps. The 'SMSOTPSignInView' offers a phone number field and, upon submission, sends an OTP code and displays a code input for verification, leveraging async/await patterns and error handling with dump(). Dependencies: SwiftUI, Clerk SDK, and iOS 15.0+ for async/await. Inputs: phone number and OTP code; Outputs: sets session or navigates based on verification status. Limitations: Assumes Clerk SDK is properly configured and client/signIn objects are available.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_8\n\nLANGUAGE: Swift\nCODE:\n```\nimport SwiftUI\\nimport Clerk\\n\\nstruct SMSOTPSignInView: View {\\n  @State private var phoneNumber = \"\"\\n  @State private var code = \"\"\\n  @State private var isVerifying = false\\n\\n  var body: some View {\\n    if isVerifying {\\n      TextField(\"Enter your verification code\", text: $code)\\n      Button(\"Verify\") {\\n        Task { await verify(code: code) }\\n      }\\n    } else {\\n      TextField(\"Enter phone number\", text: $phoneNumber)\\n      Button(\"Continue\") {\\n        Task { await submit(phoneNumber: phoneNumber) }\\n      }\\n    }\\n  }\\n}\\n\\nextension SMSOTPSignInView {\\n\\n  func submit(phoneNumber: String) async {\\n    do {\\n      // Start the sign-in process using the phone number method.\\n      let signIn = try await SignIn.create(strategy: .identifier(phoneNumber))\\n\\n      // Send the OTP code to the user.\\n      try await signIn.prepareFirstFactor(strategy: .phoneCode())\\n\\n      // Set isVerifying to true to display second form\\n      // and capture the OTP code.\\n      isVerifying = true\\n    } catch {\\n      // See https://clerk.com/docs/custom-flows/error-handling\\n      // for more info on error handling\\n      dump(error)\\n    }\\n  }\\n\\n  func verify(code: String) async {\\n    do {\\n      // Access the in progress sign in stored on the client object.\\n      guard let inProgressSignIn = Clerk.shared.client?.signIn else { return }\\n\\n      // Use the code provided by the user and attempt verification.\\n      let signIn = try await inProgressSignIn.attemptFirstFactor(strategy: .phoneCode(code: code))\\n\\n      switch signIn.status {\\n      case .complete:\\n        // If verification was completed, navigate the user as needed.\\n        dump(Clerk.shared.session)\\n      default:\\n        // If the status is not complete, check why. User may need to\\n        // complete further steps.\\n        dump(signIn.status)\\n      }\\n    } catch {\\n      // See https://clerk.com/docs/custom-flows/error-handling\\n      // for more info on error handling\\n      dump(error)\\n    }\\n  }\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Email and Password Sign-Up Flow in Expo\nDESCRIPTION: This code creates a sign-up flow in an Expo app using email and password. It handles form submission, email verification, and session management using Clerk's useSignUp hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { Text, TextInput, Button, View } from 'react-native'\nimport { useSignUp } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\n\nexport default function Page() {\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const router = useRouter()\n\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [pendingVerification, setPendingVerification] = React.useState(false)\n  const [code, setCode] = React.useState('')\n\n  // Handle submission of sign-up form\n  const onSignUpPress = async () => {\n    if (!isLoaded) return\n\n    // Start sign-up process using email and password provided\n    try {\n      await signUp.create({\n        emailAddress,\n        password,\n      })\n\n      // Send user an email with verification code\n      await signUp.prepareEmailAddressVerification({ strategy: 'email_code' })\n\n      // Set 'pendingVerification' to true to display second form\n      // and capture OTP code\n      setPendingVerification(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  // Handle submission of verification form\n  const onVerifyPress = async () => {\n    if (!isLoaded) return\n\n    try {\n      // Use the code the user provided to attempt verification\n      const signUpAttempt = await signUp.attemptEmailAddressVerification({\n        code,\n      })\n\n      // If verification was completed, set the session to active\n      // and redirect the user\n      if (signUpAttempt.status === 'complete') {\n        await setActive({ session: signUpAttempt.createdSessionId })\n        router.replace('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (pendingVerification) {\n    return (\n      <>\n        <Text>Verify your email</Text>\n        <TextInput\n          value={code}\n          placeholder=\"Enter your verification code\"\n          placeholderTextColor=\"#666666\"\n          onChangeText={(code) => setCode(code)}\n        />\n        <Button title=\"Verify\" onPress={onVerifyPress} />\n      </>\n    )\n  }\n\n  return (\n    <View>\n      <>\n        <Text>Sign up</Text>\n        <TextInput\n          autoCapitalize=\"none\"\n          value={emailAddress}\n          placeholder=\"Enter email\"\n          placeholderTextColor=\"#666666\"\n          onChangeText={(email) => setEmailAddress(email)}\n        />\n        <TextInput\n          value={password}\n          placeholder=\"Enter password\"\n          placeholderTextColor=\"#666666\"\n          secureTextEntry={true}\n          onChangeText={(password) => setPassword(password)}\n        />\n        <Button title=\"Continue\" onPress={onSignUpPress} />\n        <View style={{ flexDirection: 'row', gap: 4 }}>\n          <Text>Have an account?</Text>\n          <Link href=\"/sign-in\">\n            <Text>Sign in</Text>\n          </Link>\n        </View>\n      </>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Apollo Client with Clerk Authentication for Nhost\nDESCRIPTION: React component that configures Apollo Client GraphQL with Clerk authentication. This setup adds the JWT from Clerk to the Authorization header for GraphQL requests to Nhost/Hasura.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/nhost.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ApolloProvider, ApolloClient, HttpLink, from, InMemoryCache } from '@apollo/client'\nimport { setContext } from '@apollo/client/link/context'\nimport { useAuth } from '@clerk/nextjs'\n\nexport const ApolloProviderWrapper = ({ children }) => {\n  const { getToken } = useAuth()\n  const apolloClient = useMemo(() => {\n    const authMiddleware = setContext(async (req, { headers }) => {\n      const token = await user.getToken({ template: 'template' })\n      return {\n        headers: {\n          ...headers,\n          authorization: `Bearer ${token}`,\n        },\n      }\n    })\n\n    const httpLink = new HttpLink({\n      uri: process.env.GRAPHQL_URI,\n    })\n\n    return new ApolloClient({\n      link: from([authMiddleware, httpLink]),\n      cache: new InMemoryCache(),\n    })\n  }, [getToken])\n\n  return <ApolloProvider client={apolloClient}>{children}</ApolloProvider>\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Session Verification with Clerk Session API in JavaScript\nDESCRIPTION: This snippet initiates session verification by calling clerk.session.startVerification with a status of 'pending'. It requires Clerk's JavaScript SDK to be imported and a valid, initialized session object. The status parameter controls the verification state; passing 'pending' starts the verification flow. Returns a promise and is typically awaited in an async function context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_10\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.session.startVerification({\n  status: 'pending',\n})\n```\n\n----------------------------------------\n\nTITLE: Creating a Sign-Up Route with Clerk Elements in Next.js\nDESCRIPTION: This snippet shows how to set up the initial sign-up route using Clerk Elements in a Next.js application. It imports necessary components and creates a basic structure for the sign-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return <SignUp.Root>[Sign Up Root]</SignUp.Root>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Environment Variables\nDESCRIPTION: Setting up required Clerk API keys in the environment configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk API Keys in .env File (Env)\nDESCRIPTION: Defines the necessary environment variables (`NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` and `CLERK_SECRET_KEY`) in the `.env` file. These keys are obtained from the Clerk Dashboard and are essential for authenticating the Next.js application with Clerk services.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in Next.js Pages Router\nDESCRIPTION: Implementation of the ClerkProvider component in a Next.js application using Pages Router to enable Clerk authentication services.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport '@/styles/globals.css'\nimport { ClerkProvider } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: rootAuthLoader Configuration Interface\nDESCRIPTION: TypeScript interface showing all possible configuration options for the rootAuthLoader() function. Includes options for audience verification, authorized parties, domain settings, JWT verification, and various redirect URL configurations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/root-auth-loader.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface RootAuthLoaderConfig {\n  audience?: string | string[];\n  authorizedParties?: string[];\n  domain?: string;\n  isSatellite?: boolean;\n  jwtKey: string;\n  proxyUrl?: string;\n  publishableKey: string;\n  secretKey?: string;\n  signInUrl: string;\n  signUpUrl: string;\n  signInFallbackRedirectUrl?: string;\n  signUpFallbackRedirectUrl?: string;\n  signInForceRedirectUrl?: string;\n  signUpForceRedirectUrl?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing ClerkProvider for React Router in a React Application - TSX\nDESCRIPTION: This example demonstrates how to initialize the ClerkProvider at the root of a React application using React Router in library mode. 'ClerkProvider' is wrapped inside 'BrowserRouter' and receives the publishable key via a prop from environment variables. The root component 'App' is rendered at the 'root' DOM node, and ClerkProvider enables authentication context throughout the app. Ensure that '@clerk/react-router', React Router, and React are installed, and that the 'VITE_CLERK_PUBLISHABLE_KEY' environment variable is correctly set. The expected input is the environment variable; the output is an authenticated React Router app with Clerk features available.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/library-mode.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { StrictMode } from 'react'\\nimport { createRoot } from 'react-dom/client'\\nimport { BrowserRouter, Routes, Route } from 'react-router'\\nimport { ClerkProvider } from '@clerk/react-router'\\nimport './index.css'\\nimport App from './App.tsx'\\n\\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\\n\\ncreateRoot(document.getElementById('root')!).render(\\n  <StrictMode>\\n    <BrowserRouter>\\n      <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\\n        <Routes>\\n          <Route path=\"/\" element={<App />} />\\n        </Routes>\\n      </ClerkProvider>\\n    </BrowserRouter>\\n  </StrictMode>,\\n)\\n\n```\n\n----------------------------------------\n\nTITLE: Inviting Multiple Members to a Clerk Organization (JavaScript Example)\nDESCRIPTION: This snippet shows how to invite multiple users to the current organization simultaneously using the `clerk.organization.inviteMembers` method. It requires an object containing an array of `emailAddresses` and the `role` to assign to the invited members. The function returns a Promise resolving to an array of `OrganizationInvitation` objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait clerk.organization.inviteMembers({\n  emailAddresses: ['test@test.com', 'test2@test.com'],\n  role: 'org:member',\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Phone Number Addition in Next.js\nDESCRIPTION: A Next.js implementation that demonstrates how to add and verify a phone number using Clerk's API. Uses the useUser and useReverification hooks to manage user state and verification flow. Includes forms for phone number input and verification code confirmation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/add-phone.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { PhoneNumberResource } from '@clerk/types'\n\nexport default function Page() {\n  const { isLoaded, user } = useUser()\n  const [phone, setPhone] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const [isVerifying, setIsVerifying] = React.useState(false)\n  const [successful, setSuccessful] = React.useState(false)\n  const [phoneObj, setPhoneObj] = React.useState<PhoneNumberResource | undefined>()\n  const createPhoneNumber = useReverification((phone: string) =>\n    user?.createPhoneNumber({ phoneNumber: phone }),\n  )\n\n  if (!isLoaded) return null\n\n  if (isLoaded && !user?.id) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  // Handle addition of the phone number\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      // Add unverified phone number to user\n      const res = await createPhoneNumber(phone)\n      // Reload user to get updated User object\n      await user.reload()\n\n      // Create a reference to the new phone number to use related methods\n      const phoneNumber = user.phoneNumbers.find((a) => a.id === res?.id)\n      setPhoneObj(phoneNumber)\n\n      // Send the user an SMS with the verification code\n      phoneNumber?.prepareVerification()\n\n      // Set to true to display second form\n      // and capture the OTP code\n      setIsVerifying(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  // Handle the submission of the verification form\n  const verifyCode = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      // Verify that the provided code matches the code sent to the user\n      const phoneVerifyAttempt = await phoneObj?.attemptVerification({ code })\n\n      if (phoneVerifyAttempt?.verification.status === 'verified') {\n        setSuccessful(true)\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(phoneVerifyAttempt, null, 2))\n      }\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  // Display a success message if the phone number was added successfully\n  if (successful) {\n    return (\n      <>\n        <h1>Phone added</h1>\n      </>\n    )\n  }\n\n  // Display the verification form to capture the OTP code\n  if (isVerifying) {\n    return (\n      <>\n        <h1>Verify phone</h1>\n        <div>\n          <form onSubmit={(e) => verifyCode(e)}>\n            <div>\n              <label htmlFor=\"code\">Enter code</label>\n              <input\n                onChange={(e) => setCode(e.target.value)}\n                id=\"code\"\n                name=\"code\"\n                type=\"text\"\n                value={code}\n              />\n            </div>\n            <div>\n              <button type=\"submit\">Verify</button>\n            </div>\n          </form>\n        </div>\n      </>\n    )\n  }\n\n  // Display the initial form to capture the phone number\n  return (\n    <>\n      <h1>Add phone</h1>\n      <div>\n        <form onSubmit={(e) => handleSubmit(e)}>\n          <div>\n            <label htmlFor=\"phone\">Enter phone number</label>\n            <input\n              onChange={(e) => setPhone(e.target.value)}\n              id=\"phone\"\n              name=\"phone\"\n              type=\"phone\"\n              value={phone}\n            />\n          </div>\n          <div>\n            <button type=\"submit\">Continue</button>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Remix\nDESCRIPTION: This snippet demonstrates how to use Clerk's UserButton component in a Remix application. It includes setting up authentication checks in the loader function and rendering the UserButton or SignInButton based on the user's authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, UserButton, SignInButton, SignedOut } from '@clerk/remix'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { LoaderFunction, redirect } from '@remix-run/node'\n\nexport const loader: LoaderFunction = async (args) => {\n  const { userId } = await getAuth(args)\n\n  if (!userId) {\n    return redirect('/sign-in')\n  }\n\n  return {\n    props: {\n      userId,\n    },\n  }\n}\n\nexport default function Index() {\n  return (\n    <header>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Data in Next.js App Router Server Components and Actions\nDESCRIPTION: Shows how to get user authentication data and full user details in a Next.js App Router server component using Clerk's auth() and currentUser() helpers. This approach protects routes by checking if a user is signed in before showing personalized content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, currentUser } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  // Get the userId from auth() -- if null, the user is not signed in\n  const { userId } = await auth()\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return <div>Sign in to view this page</div>\n  }\n\n  // Get the Backend API User object when you need access to the user's information\n  const user = await currentUser()\n\n  // Use `user` to render user details or create UI elements\n  return <div>Welcome, {user.firstName}!</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Guest Layout with Authentication Check in Expo\nDESCRIPTION: This code creates a layout component for guest (unauthenticated) routes in an Expo app. It uses the useAuth hook to check if the user is signed in and redirects them to the dashboard if authenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Redirect, Stack } from 'expo-router'\nimport { useAuth } from '@clerk/clerk-expo'\n\nexport default function GuestLayout() {\n  const { isSignedIn } = useAuth()\n\n  if (isSignedIn) {\n    return <Redirect href={'/dashboard'} />\n  }\n\n  return <Stack />\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk BackupCodesNotAvailable Error - JSON\nDESCRIPTION: This snippet defines a standardized Clerk error object for the case where backup codes are not available because a prerequisite multi-factor method has not been enabled. It is written in JSON and used to communicate specific error states to client or server applications. Required parameters include a user-facing 'shortMessage', a more detailed 'longMessage', and a programmatic 'code'. Expected input/output is a serialized JSON object; this snippet assumes consumption by Clerk or compatible error-handling systems.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/backup-codes.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Backup codes not available\\\",\\n  \\\"longMessage\\\": \\\"In order to use backup codes, you have to enable any other Multi-factor method\\\",\\n  \\\"code\\\": \\\"backup_codes_not_available_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Clerk Sign-In State with useSignIn Composable in Vue\nDESCRIPTION: This Vue Single File Component example demonstrates how to use the useSignIn composable from the @clerk/vue package to obtain sign-in state and attempt status. It imports the composable, destructures isLoaded and signIn refs, and uses these in the template to show a loading handler and display the current sign-in status. Requires the @clerk/vue dependency and should be placed within a Clerk-configured Vue app. The main parameters are isLoaded (boolean, signals readiness) and signIn (object, exposes authentication status). Output is conditional UI rendering based on Clerk initialization and authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useSignIn } from '@clerk/vue'\n\nconst { isLoaded, signIn } = useSignIn()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Add logic to handle loading state -->\n  </div>\n\n  <div v-else>The current sign in attempt status is {{ signIn?.status }}.</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Testing Redirects with Clerk Account Portal using Cypress (TypeScript)\nDESCRIPTION: Demonstrates how to structure Cypress tests involving authentication redirects via Clerk Account Portal by using the cy.origin() function. The snippet outlines the redirection when a protected route is visited, simulating an external domain sign-in flow and verifying the framework navigates back to the app. Dependencies include Cypress and the Clerk testing token utility. The test expects properly configured Clerk API keys, a test user, and enabled username-password authentication. Input parameters include the Account Portal domain and test URLs. The output validates that the user is redirected back to the correct app route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/test-account-portal.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nit('sign in with Account Portal redirects', () => {\\n  setupClerkTestingToken()\\n\\n  // Set the origin to the Account Portal domain\\n  cy.origin('https://verb-noun-00.accounts.dev', () => {\\n    // Visit a protected page that redirects to the Account Portal when not signed in\\n    cy.visit('http://localhost:3000/protected')\\n    // Fill the form to sign in\\n    // Add any other actions to test\\n  })\\n\\n  // The user should be redirected back to the protected page\\n  cy.url().should('include', '/protected')\\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Publishable and Secret Keys (Next.js)\nDESCRIPTION: Defines the Next.js specific environment variables `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` for frontend access and `CLERK_SECRET_KEY` for backend use. These are required to connect your Next.js application to Clerk, obtained from the Clerk Dashboard. The `CLERK_SECRET_KEY` must remain private.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` | Your Clerk app's Publishable Key, which you can find in the Clerk Dashboard. It will be prefixed with `pk_test_` in development instances and `pk_live_` in production instances. |\n| `CLERK_SECRET_KEY` | Your Clerk app's Secret Key, which you can find in the Clerk Dashboard. It will be prefixed with `sk_test_` in development instances and `sk_live_` in production instances. **Do not expose this on the frontend with a public environment variable**. |\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationMembershipList return signature in JavaScript\nDESCRIPTION: This snippet demonstrates the change in return signature for Users.getOrganizationMembershipList from directly returning data to returning an object with 'data' and 'totalCount' properties, which aligns with the Backend API response format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Protecting Remix Route Content with Clerk Components (TSX)\nDESCRIPTION: This TSX example demonstrates protecting content within a Remix route (`routes/_index.tsx`) based on the user's authentication status using Clerk's control components. It imports and uses `<SignedIn>` to render content only for authenticated users (including a `<UserButton>`) and `<SignedOut>` to render content only for unauthenticated users (including a `<SignInButton>`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  SignInButton,\n  SignOutButton,\n  SignUpButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <h1>Index Route</h1>\n      <SignedIn>\n        <p>You are signed in!</p>\n\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <p>You are signed out</p>\n\n        <SignInButton />\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing a Paginated Organization List with Clerk in Next.js\nDESCRIPTION: This React component (`JoinedOrganizations`) uses the `useOrganizationList` hook from `@clerk/nextjs` to fetch and display a user's organization memberships with pagination enabled (`pageSize: 5`). It renders the memberships in a table, provides buttons to set an organization as active using `setActive`, and includes Next/Previous buttons powered by `fetchNext` and `fetchPrevious`. If the user has no memberships, it renders a `CreateOrganization` component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n```jsx {{ filename: 'app/components/CustomOrganizationSwitcher.tsx', collapsible: true }}\n'use client'\n\nimport { useAuth, useOrganizationList } from '@clerk/nextjs'\nimport CreateOrganization from '../components/create-organization' // See /docs/custom-flows/create-organizations for this component\n\n// List user's organization memberships\nexport default function JoinedOrganizations() {\n  const { isLoaded, setActive, userMemberships } = useOrganizationList({\n    userMemberships: {\n      // Set pagination parameters\n      pageSize: 5,\n      keepPreviousData: true,\n    },\n  })\n  const { orgId } = useAuth()\n\n  if (!isLoaded) {\n    return <p>Loading...</p>\n  }\n\n  return (\n    <>\n      <h1>Joined organizations</h1>\n      {userMemberships?.data?.length > 0 && (\n        <>\n          <table>\n            <thead>\n              <tr>\n                <th>Identifier</th>\n                <th>Organization</th>\n                <th>Joined</th>\n                <th>Role</th>\n                <th>Set as active org</th>\n              </tr>\n            </thead>\n            <tbody>\n              {userMemberships?.data?.map((mem) => (\n                <tr key={mem.id}>\n                  <td>{mem.publicUserData.identifier}</td>\n                  <td>{mem.organization.name}</td>\n                  <td>{mem.createdAt.toLocaleDateString()}</td>\n                  <td>{mem.role}</td>\n                  <td>\n                    {orgId === mem.organization.id ? (\n                      <button onClick={() => setActive({ organization: mem.organization.id })}>\n                        Set as active\n                      </button>\n                    ) : (\n                      <p>Currently active</p>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          <div>\n            <button\n              disabled={!userMemberships?.hasPreviousPage || userMemberships?.isFetching}\n              onClick={() => userMemberships?.fetchPrevious?.()}\n            >\n              Previous\n            </button>\n\n            <button\n              disabled={!userMemberships?.hasNextPage || userMemberships?.isFetching}\n              onClick={() => userMemberships?.fetchNext?.()}\n            >\n              Next\n            </button>\n          </div>\n        </>\n      )}\n      {userMemberships?.data?.length === 0 && (\n        <div>\n          <p>No organizations found</p>\n          <CreateOrganization />\n        </div>\n      )}\n    </>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Authentication with Google in React Native\nDESCRIPTION: Complete example showing how to implement Google OAuth authentication in a React Native application using Clerk's useOAuth hook, including browser warm-up functionality and error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/use-oauth.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport * as WebBrowser from 'expo-web-browser'\nimport { Text, View, Button } from 'react-native'\nimport { Link } from 'expo-router'\nimport { useOAuth } from '@clerk/clerk-expo'\nimport * as Linking from 'expo-linking'\n\nexport const useWarmUpBrowser = () => {\n  React.useEffect(() => {\n    // Warm up the android browser to improve UX\n    // https://docs.expo.dev/guides/authentication/#improving-user-experience\n    void WebBrowser.warmUpAsync()\n    return () => {\n      void WebBrowser.coolDownAsync()\n    }\n  }, [])\n}\n\nWebBrowser.maybeCompleteAuthSession()\n\nexport default function Page() {\n  useWarmUpBrowser()\n\n  const { startOAuthFlow } = useOAuth({ strategy: 'oauth_google' })\n\n  const onPress = React.useCallback(async () => {\n    try {\n      const { createdSessionId, signIn, signUp, setActive } = await startOAuthFlow({\n        redirectUrl: Linking.createURL('/dashboard', { scheme: 'myapp' }),\n      })\n\n      // If sign in was successful, set the active session\n      if (createdSessionId) {\n        setActive!({ session: createdSessionId })\n      } else {\n        // Use signIn or signUp returned from startOAuthFlow\n        // for next steps, such as MFA\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [])\n\n  return (\n    <View>\n      <Link href=\"/\">\n        <Text>Home</Text>\n      </Link>\n      <Button title=\"Sign in with Google\" onPress={onPress} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current User in Next.js Route Handlers\nDESCRIPTION: Demonstrates how to use the currentUser() helper to retrieve the current user object in a Route Handler. This is useful when you need access to user details beyond just the user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/route-handlers.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { NextResponse } from 'next/server'\nimport { currentUser } from '@clerk/nextjs/server'\nexport async function GET() {\n  const user = await currentUser()\n\n  if (!user) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  return NextResponse.json({ user })\n}\n```\n\n----------------------------------------\n\nTITLE: Restricting Access with clerkMiddleware to Users with Active Organizations - TypeScript\nDESCRIPTION: This middleware snippet restricts access so that only users with an active organization (orgId) can access protected resources. If the user is signed in but has no active org, they are redirected to the /org-selection page with a redirectUrl search parameter. It leverages @clerk/nextjs/server clerkMiddleware and Next.js API route matchers. Dependencies: @clerk/nextjs, NextResponse, Next.js middleware support. Inputs: request, session context, Outputs: possible redirect to org-selection or pass-through if criteria are met. Note: matcher array skips static assets and always applies to API routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_6\n\nLANGUAGE: TSX\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { userId, orgId } = await auth()\n\n  // Redirect signed in users to organization selection page if they are not active in an organization\n  if (userId && !orgId && req.nextUrl.pathname !== '/org-selection') {\n    const searchParams = new URLSearchParams({ redirectUrl: req.url })\n\n    const orgSelection = new URL(`/org-selection?${searchParams.toString()}`, req.url)\n\n    return NextResponse.redirect(orgSelection)\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n\n```\n\n----------------------------------------\n\nTITLE: Importing and Using ClerkProvider for Authentication Context\nDESCRIPTION: The ClerkProvider component serves as a context provider that makes authentication data accessible throughout the application. It should be implemented at the root of your application to provide global access to user session data and authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/clerk-provider/explanation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<ClerkProvider>\n```\n\n----------------------------------------\n\nTITLE: Updating User Password - Clerk TypeScript\nDESCRIPTION: Defines the updatePassword function, enabling the user to change their password by supplying newPassword and (optionally) currentPassword and signOutOfOtherSessions parameters. Passwords must be at least 8 characters. Returns a promise resolving to the updated User.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_32\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction updatePassword(params: UpdateUserPasswordParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: User Authentication in Next.js Route Handler with Clerk\nDESCRIPTION: Demonstrates how to use Clerk's auth() helper and Backend SDK in a Next.js App Router route handler to authenticate users and retrieve user data. Shows protection of routes and fetching user information using the Backend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, clerkClient } from '@clerk/nextjs/server'\n\nexport async function GET() {\n  // Use `auth()` to get the user's ID\n  const { userId } = await auth()\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return new NextResponse('Unauthorized', { status: 401 })\n  }\n\n  const client = await clerkClient()\n\n  // Use the Backend SDK's `getUser()` method to get the Backend User object\n  const user = await client.users.getUser(userId)\n\n  // Return the Backend User object\n  return NextResponse.json({ user: user }, { status: 200 })\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes by Organization Role with Clerk Middleware - TypeScript\nDESCRIPTION: Applies role-based access control, checking for 'org:admin' role membership when accessing '/api/admin' routes. If the role requirement isn't met, throws a 403 error. Relies on '@clerk/nuxt/server' and Nuxt's error utility. Handles incoming middleware events, blocks unauthorized admin route access.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/clerk-middleware.mdx#2025-04-23_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nuxt/server'\\n\\nexport default clerkMiddleware((event) => {\\n  const { has } = event.context.auth()\\n  const isAdminRoute = event.path.startsWith('/api/admin')\\n  const isAdmin = has({\\n    role: 'org:admin',\\n  })\\n\\n  // Check if the user is trying to access a protected route\\n  if (isAdminRoute) {\\n    // Check if the user has the required admin role\\n    if (!isAdmin) {\\n      throw createError({\\n        statusCode: 403,\\n        statusMessage: 'Unauthorized: Admin access required',\\n      })\\n    }\\n  }\\n})\n```\n\n----------------------------------------\n\nTITLE: Sign In Form Implementation with Clerk and shadcn/ui\nDESCRIPTION: A complete sign-in form implementation using Clerk components with custom styling. Includes card layout, OTP input field, resend action button, and navigation controls. Uses shadcn/ui components for consistent styling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<p className=\"text-sm text-muted-foreground\">\n  Welcome back <SignIn.SafeIdentifier />\n</p>\n</CardHeader>\n<CardContent className=\"grid gap-y-4\">\n  <Clerk.Field name=\"code\">\n    <Clerk.Label className=\"sr-only\">Email verification code</Clerk.Label>\n    <div className=\"grid gap-y-2 items-center justify-center\">\n      <div className=\"flex justify-center text-center\">\n        <Clerk.Input\n          type=\"otp\"\n          autoSubmit\n          className=\"flex justify-center has-[:disabled]:opacity-50\"\n          render={({ value, status }) => {\n            return (\n              <div\n                data-status={status}\n                className=\"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md data-[status=selected]:ring-1 data-[status=selected]:ring-ring data-[status=cursor]:ring-1 data-[status=cursor]:ring-ring\"\n              >\n                {value}\n              </div>\n            )\n          }}\n        />\n      </div>\n      <Clerk.FieldError className=\"block text-sm text-destructive text-center\" />\n      <SignIn.Action\n        asChild\n        resend\n        className=\"text-muted-foreground\"\n        fallback={({ resendableAfter }) => (\n          <Button variant=\"link\" size=\"sm\" disabled>\n            Didn&apos;t receive a code? Resend (\n            <span className=\"tabular-nums\">{resendableAfter}</span>)\n          </Button>\n        )}\n      >\n        <Button variant=\"link\" size=\"sm\">\n          Didn&apos;t receive a code? Resend\n        </Button>\n      </SignIn.Action>\n    </div>\n  </Clerk.Field>\n</CardContent>\n<CardFooter>\n  <div className=\"grid w-full gap-y-4\">\n    <SignIn.Action submit asChild>\n      <Button disabled={isGlobalLoading}>\n        <Clerk.Loading>\n          {(isLoading) => {\n            return isLoading ? (\n              <Icons.spinner className=\"size-4 animate-spin\" />\n            ) : (\n              'Continue'\n            )\n          }}\n        </Clerk.Loading>\n      </Button>\n    </SignIn.Action>\n    <SignIn.Action navigate=\"choose-strategy\" asChild>\n      <Button size=\"sm\" variant=\"link\">\n        Use another method\n      </Button>\n    </SignIn.Action>\n  </div>\n</CardFooter>\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication State Checks with useAuth in Vue\nDESCRIPTION: This snippet demonstrates how to use the useAuth() composable in a Vue component to check if Clerk has finished initializing and if the user is signed in. It renders different content based on the authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/vue-nuxt/use-auth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nconst { userId, isLoaded } = useAuth()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">Loading...</div>\n  <div v-else-if=\"!userId\">Sign in to access this page</div>\n  <div v-else>Hello, {{ userId }}!</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Customizing ClerkAuthorization with Custom Roles and Permissions in TypeScript\nDESCRIPTION: This example demonstrates how to modify the ClerkAuthorization interface to include custom roles and permissions specific to an application. It replaces default roles with custom ones and adds detailed permission types.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface ClerkAuthorization {\n    permission: 'org:quiz:create' | 'org:quiz:grade' | 'org:quiz:read' | 'org:quiz:fill'\n    role: 'org:super_admin' | 'org:teacher' | 'org:student'\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Permissions Middleware with Clerk Auth in TypeScript\nDESCRIPTION: Implements a middleware function that checks user permissions using the Auth object's has() method for fine-grained authorization. Returns HTTP 403 if permission check fails. Demonstrates composition with requireAuth to protect routes by both authentication and authorization policy. Requires an Auth object injected in context and a framework supporting middleware chains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst app = new Framework()\n\nconst hasPermission = (context, next) => {\n  const auth = getAuth(context)\n  if (!auth.has({ permission: 'permission' })) {\n    context.status = 403\n    return\n  }\n  return next()\n}\n\napp.get('/path', requireAuth(), hasPermission())\n```\n\n----------------------------------------\n\nTITLE: Basic Migration to clerkMiddleware() in Next.js\nDESCRIPTION: This snippet demonstrates the basic migration from authMiddleware() to clerkMiddleware(). It shows how to update imports, change the default export, and mirror the previous behavior of protecting all routes except '/sign-in' or '/sign-up'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport default clerkMiddleware(async (auth, request) => {\n  if (!isPublicRoute(request)) {\n    await auth.protect()\n  }\n})\n\nexport const config = {\n  matcher: ['/((?!.*\\..*|_next).*)', '/', '/(api|trpc)(.*)'],\n}\n```\n\n----------------------------------------\n\nTITLE: Building the Home Page UI with React Server Components\nDESCRIPTION: Next.js home page component that retrieves user messages from the database and displays them. It allows users to add new messages or delete existing ones using the Server Actions. The component uses Clerk's auth() helper to get the user ID for database queries.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createUserMessage, deleteUserMessage } from './actions'\nimport { db } from './db'\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Home() {\n  const { userId } = await auth()\n  if (!userId) throw new Error('User not found')\n  const existingMessage = await db.query.UserMessages.findFirst({\n    where: (messages, { eq }) => eq(messages.user_id, userId),\n  })\n\n  return (\n    <main>\n      <h1>Neon + Clerk Example</h1>\n      {existingMessage ? (\n        <div>\n          <p>{existingMessage.message}</p>\n          <form action={deleteUserMessage}>\n            <button>Delete Message</button>\n          </form>\n        </div>\n      ) : (\n        <form action={createUserMessage}>\n          <input type=\"text\" name=\"message\" placeholder=\"Enter a message\" />\n          <button>Save Message</button>\n        </form>\n      )}\n    </main>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Authentication Controls with Clerk Components in React - TSX\nDESCRIPTION: This code defines a sample header in a React app using prebuilt Clerk React Router components. 'SignedIn' and 'SignedOut' conditionally render their children according to the user's authentication status: 'SignInButton' is shown to signed-out users, and 'UserButton' (which provides account controls) appears to signed-in users. This requires '@clerk/react-router' and React as dependencies, and expects parent context from ClerkProvider. The component inputs are user authentication state and outputs relevant UI elements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/library-mode.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignInButton, SignedIn, SignedOut, UserButton } from '@clerk/react-router'\\n\\nexport default function App() {\\n  return (\\n    <header>\\n      <SignedOut>\\n        <SignInButton />\\n      </SignedOut>\\n      <SignedIn>\\n        <UserButton />\\n      </SignedIn>\\n    </header>\\n  )\\n}\\n\n```\n\n----------------------------------------\n\nTITLE: Installing Expo Secure Store (Bash)\nDESCRIPTION: Installs the `expo-secure-store` package using various package managers (npm, yarn, pnpm, bun). This library provides a way to securely store sensitive data, like authentication tokens, on the device.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add expo-secure-store\n```\n\n----------------------------------------\n\nTITLE: Implementing Start Step in Sign-up Flow with Clerk Elements\nDESCRIPTION: This code snippet shows how to implement the 'start' step of a sign-up flow using Clerk Elements. It includes a Google sign-up option, an email input field, captcha, and a submit action.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"start\">\n  <Clerk.Connection name=\"google\">Sign up with Google</Clerk.Connection>\n  <Clerk.Field name=\"identifier\">\n    <Clerk.Label>Email</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n\n  <SignUp.Captcha />\n\n  <SignUp.Action submit>Sign up</SignUp.Action>\n</SignUp.Step>\n```\n\n----------------------------------------\n\nTITLE: Implementing Protected Procedures with tRPC Middleware\nDESCRIPTION: Creates a protected procedure using tRPC middleware that verifies user authentication. The middleware throws an UNAUTHORIZED error if the user isn't signed in, ensuring that certain routes are only accessible to authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { initTRPC, TRPCError } from '@trpc/server'\nimport { Context } from './context'\n\nconst t = initTRPC.context<Context>().create()\n\n// Check if the user is signed in\n// Otherwise, throw an UNAUTHORIZED code\nconst isAuthed = t.middleware(({ next, ctx }) => {\n  if (!ctx.auth.userId) {\n    throw new TRPCError({ code: 'UNAUTHORIZED' })\n  }\n  return next({\n    ctx: {\n      auth: ctx.auth,\n    },\n  })\n})\n\nexport const router = t.router\nexport const publicProcedure = t.procedure\nexport const protectedProcedure = t.procedure.use(isAuthed)\n```\n\n----------------------------------------\n\nTITLE: Defining getOrganizationMembershipList Function in TypeScript\nDESCRIPTION: Function signature for retrieving a list of organization memberships. It takes GetOrganizationMembershipListParams as input and returns a Promise resolving to a PaginatedResourceResponse containing an array of OrganizationMembership objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-membership-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationMembershipList(\n  params: GetOrganizationMembershipListParams,\n): Promise<PaginatedResourceResponse<OrganizationMembership[]>>\n```\n\n----------------------------------------\n\nTITLE: Using SignIn Component in Remix\nDESCRIPTION: This example shows how to implement a sign-in page in a Remix application using the SignIn component from @clerk/remix.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/remix'\n\nexport default function SignInPage() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-Up Page with Clerk and Custom UI in Next.js\nDESCRIPTION: This code snippet defines a sign-up page component using Clerk for authentication and custom UI components. It includes steps for initial sign-up, continued registration, and email verification. The component uses Clerk's elements for form fields and actions, combined with custom styling and layout.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\nimport { Button } from '@/components/ui/button'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Icons } from '@/components/ui/icons'\nimport { cn } from '@/lib/utils'\n\nexport default function SignUpPage() {\n  return (\n    <div className=\"grid w-full grow items-center px-4 sm:justify-center\">\n      <SignUp.Root>\n        <Clerk.Loading>\n          {(isGlobalLoading) => (\n            <>\n              <SignUp.Step name=\"start\">\n                <Card className=\"w-full sm:w-96\">\n                  <CardHeader>\n                    <CardTitle>Create your account</CardTitle>\n                    <CardDescription>\n                      Welcome! Please fill in the details to get started.\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"grid gap-y-4\">\n                    <div className=\"grid grid-cols-2 gap-x-4\">\n                      <Clerk.Connection name=\"github\" asChild>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          type=\"button\"\n                          disabled={isGlobalLoading}\n                        >\n                          <Clerk.Loading scope=\"provider:github\">\n                            {(isLoading) =>\n                              isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                <>\n                                  <Icons.gitHub className=\"mr-2 size-4\" />\n                                  GitHub\n                                </>\n                              )\n                            }\n                          </Clerk.Loading>\n                        </Button>\n                      </Clerk.Connection>\n                      <Clerk.Connection name=\"google\" asChild>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          type=\"button\"\n                          disabled={isGlobalLoading}\n                        >\n                          <Clerk.Loading scope=\"provider:google\">\n                            {(isLoading) =>\n                              isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                <>\n                                  <Icons.google className=\"mr-2 size-4\" />\n                                  Google\n                                </>\n                              )\n                            }\n                          </Clerk.Loading>\n                        </Button>\n                      </Clerk.Connection>\n                    </div>\n                    <p className=\"flex items-center gap-x-3 text-sm text-muted-foreground before:h-px before:flex-1 before:bg-border after:h-px after:flex-1 after:bg-border\">\n                      or\n                    </p>\n                    <Clerk.Field name=\"emailAddress\" className=\"space-y-2\">\n                      <Clerk.Label asChild>\n                        <Label>Email address</Label>\n                      </Clerk.Label>\n                      <Clerk.Input type=\"email\" required asChild>\n                        <Input />\n                      </Clerk.Input>\n                      <Clerk.FieldError className=\"block text-sm text-destructive\" />\n                    </Clerk.Field>\n                    <Clerk.Field name=\"password\" className=\"space-y-2\">\n                      <Clerk.Label asChild>\n                        <Label>Password</Label>\n                      </Clerk.Label>\n                      <Clerk.Input type=\"password\" required asChild>\n                        <Input />\n                      </Clerk.Input>\n                      <Clerk.FieldError className=\"block text-sm text-destructive\" />\n                    </Clerk.Field>\n                  </CardContent>\n                  <CardFooter>\n                    <div className=\"grid w-full gap-y-4\">\n                      <SignUp.Captcha className=\"empty:hidden\" />\n                      <SignUp.Action submit asChild>\n                        <Button disabled={isGlobalLoading}>\n                          <Clerk.Loading>\n                            {(isLoading) => {\n                              return isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                'Continue'\n                              )\n                            }}\n                          </Clerk.Loading>\n                        </Button>\n                      </SignUp.Action>\n                      <Button variant=\"link\" size=\"sm\" asChild>\n                        <Clerk.Link navigate=\"sign-in\">Already have an account? Sign in</Clerk.Link>\n                      </Button>\n                    </div>\n                  </CardFooter>\n                </Card>\n              </SignUp.Step>\n\n              <SignUp.Step name=\"continue\">\n                <Card className=\"w-full sm:w-96\">\n                  <CardHeader>\n                    <CardTitle>Continue registration</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Clerk.Field name=\"username\" className=\"space-y-2\">\n                      <Clerk.Label>\n                        <Label>Username</Label>\n                      </Clerk.Label>\n                      <Clerk.Input type=\"text\" required asChild>\n                        <Input />\n                      </Clerk.Input>\n                      <Clerk.FieldError className=\"block text-sm text-destructive\" />\n                    </Clerk.Field>\n                  </CardContent>\n                  <CardFooter>\n                    <div className=\"grid w-full gap-y-4\">\n                      <SignUp.Action submit asChild>\n                        <Button disabled={isGlobalLoading}>\n                          <Clerk.Loading>\n                            {(isLoading) => {\n                              return isLoading ? (\n                                <Icons.spinner className=\"size-4 animate-spin\" />\n                              ) : (\n                                'Continue'\n                              )\n                            }}\n                          </Clerk.Loading>\n                        </Button>\n                      </SignUp.Action>\n                    </div>\n                  </CardFooter>\n                </Card>\n              </SignUp.Step>\n\n              <SignUp.Step name=\"verifications\">\n                <SignUp.Strategy name=\"email_code\">\n                  <Card className=\"w-full sm:w-96\">\n                    <CardHeader>\n                      <CardTitle>Verify your email</CardTitle>\n                      <CardDescription>\n                        Use the verification link sent to your email address\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"grid gap-y-4\">\n                      <div className=\"grid items-center justify-center gap-y-2\">\n                        <Clerk.Field name=\"code\" className=\"space-y-2\">\n                          <Clerk.Label className=\"sr-only\">Email address</Clerk.Label>\n                          <div className=\"flex justify-center text-center\">\n                            <Clerk.Input\n                              type=\"otp\"\n                              className=\"flex justify-center has-[:disabled]:opacity-50\"\n                              autoSubmit\n                              render={({ value, status }) => {\n                                return (\n                                  <div\n                                    data-status={status}\n                                    className={cn(\n                                      'relative flex size-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md',\n                                      {\n                                        'z-10 ring-2 ring-ring ring-offset-background':\n                                          status === 'cursor' || status === 'selected',\n                                      },\n                                    )}\n                                  >\n                                    {value}\n                                    {status === 'cursor' && (\n                                      <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n                                        <div className=\"animate-caret-blink h-4 w-px bg-foreground duration-1000\" />\n                                      </div>\n                                    )}\n                                  </div>\n                                )\n                              }}\n                            />\n                          </div>\n\n```\n\n----------------------------------------\n\nTITLE: State-Based Styling with Function as Children Pattern\nDESCRIPTION: Illustrates how to use the function as children pattern with Clerk Elements to access component state for complex styling or conditional rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"email\">\n  <Clerk.FieldState>{(state) => state === 'invalid' && <ErrorIcon />}</Clerk.FieldState>\n  <Clerk.Label>Email</Clerk.Label>\n  <Clerk.Input />\n  <Clerk.FieldError />\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Implementing MFA Enforcement Middleware in Next.js\nDESCRIPTION: A Next.js middleware implementation that checks if users have MFA enabled and redirects them to the MFA setup page if not. It uses createRouteMatcher to identify specific routes and checks the custom 'isMfa' claim from the session token.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/force-mfa.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nconst isMFARoute = createRouteMatcher(['/account/manage-mfa/add(.*)'])\nconst isSignInRoute = createRouteMatcher(['/sign-in(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { userId, sessionClaims } = await auth()\n\n  // Redirect to homepage if the user is signed in and on the sign-in page\n  if (userId !== null && isSignInRoute(req)) {\n    return NextResponse.redirect(new URL('/', req.url))\n  }\n\n  // Redirect to MFA setup page if MFA is not enabled\n  if (userId !== null && !isMFARoute(req)) {\n    if (sessionClaims.isMfa === undefined) {\n      console.error('You need to add the `isMfa` claim to your session token.')\n    }\n    if (sessionClaims.isMfa === false) {\n      return NextResponse.redirect(new URL('/account/manage-mfa/add', req.url))\n    }\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Sign-Up Screen (TypeScript/TSX)\nDESCRIPTION: Creates a sign-up screen component using React Native elements and the `useSignUp` hook from `@clerk/clerk-expo`. It handles user input for email and password, initiates the sign-up process, requests email verification via code, captures the verification code, attempts verification, and sets the session active upon success, redirecting the user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\nimport { Text, TextInput, TouchableOpacity, View } from 'react-native'\nimport { useSignUp } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\n\nexport default function SignUpScreen() {\n  const { isLoaded, signUp, setActive } = useSignUp()\n  const router = useRouter()\n\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [pendingVerification, setPendingVerification] = React.useState(false)\n  const [code, setCode] = React.useState('')\n\n  // Handle submission of sign-up form\n  const onSignUpPress = async () => {\n    if (!isLoaded) return\n\n    console.log(emailAddress, password)\n\n    // Start sign-up process using email and password provided\n    try {\n      await signUp.create({\n        emailAddress,\n        password,\n      })\n\n      // Send user an email with verification code\n      await signUp.prepareEmailAddressVerification({ strategy: 'email_code' })\n\n      // Set 'pendingVerification' to true to display second form\n      // and capture OTP code\n      setPendingVerification(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  // Handle submission of verification form\n  const onVerifyPress = async () => {\n    if (!isLoaded) return\n\n    try {\n      // Use the code the user provided to attempt verification\n      const signUpAttempt = await signUp.attemptEmailAddressVerification({\n        code,\n      })\n\n      // If verification was completed, set the session to active\n      // and redirect the user\n      if (signUpAttempt.status === 'complete') {\n        await setActive({ session: signUpAttempt.createdSessionId })\n        router.replace('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (pendingVerification) {\n    return (\n      <>\n        <Text>Verify your email</Text>\n        <TextInput\n          value={code}\n          placeholder=\"Enter your verification code\"\n          onChangeText={(code) => setCode(code)}\n        />\n        <TouchableOpacity onPress={onVerifyPress}>\n          <Text>Verify</Text>\n        </TouchableOpacity>\n      </>\n    )\n  }\n\n  return (\n    <View>\n      <>\n        <Text>Sign up</Text>\n        <TextInput\n          autoCapitalize=\"none\"\n          value={emailAddress}\n          placeholder=\"Enter email\"\n          onChangeText={(email) => setEmailAddress(email)}\n        />\n        <TextInput\n          value={password}\n          placeholder=\"Enter password\"\n          secureTextEntry={true}\n          onChangeText={(password) => setPassword(password)}\n        />\n        <TouchableOpacity onPress={onSignUpPress}>\n          <Text>Continue</Text>\n        </TouchableOpacity>\n        <View style={{ display: 'flex', flexDirection: 'row', gap: 3 }}>\n          <Text>Already have an account?</Text>\n          <Link href=\"/sign-in\">\n            <Text>Sign in</Text>\n          </Link>\n        </View>\n      </>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Public Metadata with Clerk Go SDK (Go)\nDESCRIPTION: This Go function updates a user's public metadata (such as role information) using the Clerk Go SDK. The handler builds a role data map then uses 'UpdateMetadata' (with 'PublicMetadata' argument) to assign the role for the given user. Requires correct initialization and session handling for Clerk and error management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_12\n\nLANGUAGE: go\nCODE:\n```\nvar client clerk.Client\n\nfunc addStripeCustomerID(user *clerk.User, role string) error {\n    Role := map[string]interface{}{\n        \"role\": role,\n    }\n  user, err := s.clerkClient.Users().UpdateMetadata(sess.UserID, &clerk.updateMetadataRequest{\n    PublicMetadata: role,\n  })\n\n  if err != nil {\n    panic(err)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Interacting with Clerk's Backend API in Next.js Route Handlers\nDESCRIPTION: Shows how to use clerkClient to interact with Clerk's Backend API for operations like updating user details. This demonstrates server-side interaction with the Clerk API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/route-handlers.mdx#2025-04-23_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { NextResponse, NextRequest } from 'next/server'\nimport { auth, clerkClient } from '@clerk/nextjs/server'\n\nexport async function POST(req: NextRequest) {\n  const { userId } = await auth()\n\n  if (!userId) return NextResponse.redirect(new URL('/sign-in', req.url))\n\n  const params = { firstName: 'John', lastName: 'Wick' }\n\n  const client = await clerkClient()\n\n  const user = await client.users.updateUser(userId, params)\n\n  return NextResponse.json({ user })\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing ClerkJS and Managing Organization Invitations\nDESCRIPTION: This JavaScript code initializes the ClerkJS library using a publishable key from environment variables. It checks if a user is logged in and has an active organization. If so, it fetches and renders the list of pending invitations, allowing admins to revoke them. Admins can also use the provided form to invite new members. If no organization is active, it mounts the Clerk OrganizationSwitcher component. If no user is logged in, it mounts the Clerk SignIn component. Error handling is included for missing keys and API request failures.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-organization-invitations.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    // Render list of organization invitations\n    async function renderInvitations(organization, isAdmin) {\n      const list = document.getElementById('invitations_list')\n      try {\n        const { data } = await organization.getInvitations()\n\n        const invitations = data\n\n        if (invitations.length === 0) {\n          list.textContent = 'No invitations'\n        }\n\n        invitations.map((invitation) => {\n          const li = document.createElement('li')\n          li.textContent = `${invitation.emailAddress} - ${invitation.role}`\n\n          // Add administrative actions; revoke invitation\n          if (isAdmin) {\n            const revokeBtn = document.createElement('button')\n            revokeBtn.textContent = 'Revoke'\n            revokeBtn.addEventListener('click', async function (e) {\n              e.preventDefault()\n              await invitation.revoke()\n            })\n            li.appendChild(revokeBtn)\n          }\n          // Add the entry to the list\n          list.appendChild(li)\n        })\n      } catch (err) {\n        console.error(err)\n      }\n    }\n\n    // Gets the current org, checks if the current user is an admin,\n    // renders invitations, and sets up the new invitation form.\n    async function checkAdminAndRenderInvitations() {\n      // This is the current organization ID.\n      const organizationId = clerk.organization.id\n\n      const { data } = await clerk.user.getOrganizationMemberships()\n      const organizationMemberships = data\n\n      const currentMembership = organizationMemberships.find(\n        (membership) => membership.organization.id === organizationId,\n      )\n      const currentOrganization = currentMembership.organization\n\n      if (!currentOrganization) return\n\n      const isAdmin = currentMembership.role === 'org:admin'\n\n      renderInvitations(currentOrganization, isAdmin)\n\n      if (isAdmin) {\n        const form = document.getElementById('new_invitation')\n        form.addEventListener('submit', async function (e) {\n          e.preventDefault()\n\n          const inputEl = document.getElementById('email_address')\n\n          if (!inputEl) return\n\n          try {\n            await currentOrganization.inviteMember({\n              emailAddress: inputEl.value,\n              role: 'org:member',\n            })\n          } catch (err) {\n            console.error(err)\n          }\n        })\n      }\n    }\n\n    checkAdminAndRenderInvitations()\n  } else {\n    // If there is no active organization,\n    // mount Clerk's <OrganizationSwitcher />\n    // to allow the user to set an organization as active\n    document.getElementById('app').innerHTML = `\n      <h2>Select an organization to set it as active</h2>\n      <div id=\"org-switcher\"></div>\n    `\n\n    const orgSwitcherDiv = document.getElementById('org-switcher')\n\n    clerk.mountOrganizationSwitcher(orgSwitcherDiv)\n  } \n} else {\n  // If there is no active user, mount Clerk's <SignIn />\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Name with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example usage of the updateOrganization function to update an organization's name. It demonstrates how to use the organizationId and provide a new name in the params object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst name = 'Test Updated'\n\nconst response = await clerkClient.organizations.updateOrganization(organizationId, { name })\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes by Permission with Clerk Middleware - TypeScript\nDESCRIPTION: Implements authorization checks for sensitive routes using custom permissions. This middleware verifies that the user has the 'org:invoices:create' permission before allowing access to '/api/invoices' routes. If the permission is missing, responds with a 403 Unauthorized error. Requires '@clerk/nuxt/server' and Nuxt error utility. Inputs are the middleware event object; unauthorized requests are blocked.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/clerk-middleware.mdx#2025-04-23_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nuxt/server'\\n\\nexport default clerkMiddleware((event) => {\\n  const { has } = event.context.auth()\\n  const isInvoicesRoute = event.path.startsWith('/api/invoices')\\n  const canCreateInvoices = has({\\n    permission: 'org:invoices:create',\\n  })\\n\\n  // Check if user is accessing sensitive customer data\\n  if (isInvoicesRoute) {\\n    // Check if user has the required permission\\n    if (!canCreateInvoices) {\\n      throw createError({\\n        statusCode: 403,\\n        statusMessage: 'Unauthorized: Missing permission to create invoices',\\n      })\\n    }\\n  }\\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Custom CSS Classes to Clerk Components in Next.js Pages Router\nDESCRIPTION: Example of using the appearance prop to apply custom CSS classes to a Clerk SignIn component in a Next.js app using the Pages Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignIn\n        appearance={{\n          elements: {\n            formButtonPrimary: 'your-org-button org-red-button',\n          },\n        }}\n      />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Creating Authenticated Fetch Hook in React\nDESCRIPTION: Custom React hook that adds authentication token to fetch requests, useful for background fetching when tab loses focus.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nexport default async function useFetch() {\n  const { getToken } = useAuth()\n\n  const token = await getToken()\n\n  const authenticatedFetch = async (...args) => {\n    return fetch(...args, {\n      headers: { Authorization: `Bearer ${token}` },\n    }).then((res) => res.json())\n  }\n  return authenticatedFetch\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a User Sign-Up View with Email Verification in SwiftUI (Swift)\nDESCRIPTION: This snippet defines a `SignUpView` struct in SwiftUI for handling user registration using Clerk. It includes state variables for email, password, and verification code, and a boolean `isVerifying` to manage the UI state between entering credentials and entering the verification code. The `signUp` async function initiates the sign-up process with email/password and prepares email code verification. The `verify` async function attempts to verify the sign-up using the entered code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_2\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'SignUpView.swift' }}\nimport SwiftUI\nimport Clerk\n\nstruct SignUpView: View {\n  @State private var email = \"\"\n  @State private var password = \"\"\n  @State private var code = \"\"\n  @State private var isVerifying = false\n\n  var body: some View {\n    VStack {\n      Text(\"Sign Up\")\n      if isVerifying {\n        TextField(\"Code\", text: $code)\n        Button(\"Verify\") {\n          Task { await verify(code: code) }\n        }\n      } else {\n        TextField(\"Email\", text: $email)\n        SecureField(\"Password\", text: $password)\n        Button(\"Continue\") {\n          Task { await signUp(email: email, password: password) }\n        }\n      }\n    }\n    .padding()\n  }\n}\n\nextension SignUpView {\n\n  func signUp(email: String, password: String) async {\n    do {\n      let signUp = try await SignUp.create(\n        strategy: .standard(emailAddress: email, password: password)\n      )\n\n      try await signUp.prepareVerification(strategy: .emailCode)\n\n      isVerifying = true\n    } catch {\n      dump(error)\n    }\n  }\n\n  func verify(code: String) async {\n    do {\n      guard let signUp = Clerk.shared.client?.signUp else {\n        isVerifying = false\n        return\n      }\n\n      try await signUp.attemptVerification(strategy: .emailCode(code: code))\n    } catch {\n      dump(error)\n    }\n  }\n\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Creating a User with Clerk Backend SDK (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates creating a user within an asynchronous POST request handler, likely an API route in a fullstack framework. It uses the `clerkClient.users.createUser` method from a Clerk Backend SDK, passing email and password. Includes basic error handling and returns a JSON response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/creating-users.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST() {\n  try {\n    const user = await clerkClient.users.createUser({\n      emailAddress: ['test@example.com'],\n      password: 'password',\n    })\n    return Response.json({ message: 'User created', user })\n  } catch (error) {\n    console.log(error)\n    return Response.json({ error: 'Error creating user' })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Routes in React Router\nDESCRIPTION: Adding webhook route configuration to the React Router setup.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { type RouteConfig, route, index } from '@react-router/dev/routes'\n\nexport default [\n  index('routes/home.tsx'),\n  route('api/webhooks', 'routes/webhooks.ts'),\n] satisfies RouteConfig\n```\n\n----------------------------------------\n\nTITLE: Server-side Supabase Integration with Clerk\nDESCRIPTION: Utility function to create a Supabase client on the server-side that uses Clerk authentication. It leverages the auth() function from Clerk to get the session token for the current user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { createClient } from '@supabase/supabase-js'\n\nexport function createServerSupabaseClient() {\n  return createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_KEY!,\n    {\n      async accessToken() {\n        return (await auth()).getToken()\n      },\n    },\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Authentication Middleware with Clerk in TypeScript\nDESCRIPTION: Defines middleware for Node.js frameworks that uses the Clerk client to authenticate incoming requests and stores the authentication state in the context. Optionally accepts a custom Clerk client; otherwise, defaults to the singleton. Sets up contextual keys for further downstream helpers. Relies on clerkClient.authenticateRequest, context handling, and async/await. Required: an initialized Clerk client and Node.js-compatible HTTP context interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkClient as defaultClerkClient } from './client.ts'\n\nconst clerkMiddleware = (options) => {\n  return async (context, next) => {\n    const clerkClient = options.clerkClient || defaultClerkClient\n\n    const requestState = await clerkClient.authenticateRequest(context.req, {\n      authorizedParties: ['https://example.com'],\n    })\n\n    context.set('clerkAuth', requestState.toAuth())\n    context.set('clerk', clerkClient)\n\n    await next()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Type Definition for resetPassword with Clerk (TypeScript)\nDESCRIPTION: Provides the TypeScript function signature for the `resetPassword` method in Clerk. Accepts a `ResetPasswordParams` object and returns a Promise resolving to a `SignIn` object, supporting robust typings for parameters and results. Dependencies: TypeScript environment and Clerk SDK typings. Inputs: `ResetPasswordParams` object. Output: Promise of type `SignIn`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_25\n\nLANGUAGE: typescript\nCODE:\n```\nfunction resetPassword(params: ResetPasswordParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Middleware in Next.js (TypeScript/TSX)\nDESCRIPTION: Creates and configures the Next.js middleware file (`middleware.ts`) using `clerkMiddleware` from `@clerk/nextjs/server`. This middleware is essential for managing authentication state and enabling route protection based on user authentication status. The `config` object specifies which routes the middleware should apply to, typically excluding static files and internal Next.js paths while including API routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware()\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Resend Action in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows how to implement the resend action for email code verification. It includes a code input field, a verify button, and a resend code button with a fallback for displaying the resend countdown.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"verifications\">\n  <SignIn.Strategy name=\"email_code\">\n    <Clerk.Field name=\"code\">\n      <Clerk.Label>Code</Clerk.Label>\n      <Clerk.Input />\n      <Clerk.FieldError />\n    </Clerk.Field>\n    <SignIn.Action submit>Verify</SignIn.Action>\n    <SignIn.Action\n      resend\n      fallback={({ resendableAfter }) => <p>Resend code in {resendableAfter} second(s)</p>}\n    >\n      Resend code\n    </SignIn.Action>\n  </SignIn.Strategy>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Link to UserButton in Next.js\nDESCRIPTION: This Next.js example shows how to add a 'Create organization' link to the UserButton component. When clicked, it navigates the user to a specified URL path.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        <UserButton.MenuItems>\n          <UserButton.Link\n            label=\"Create organization\"\n            labelIcon={<DotIcon />}\n            href=\"/create-organization\"\n          />\n        </UserButton.MenuItems>\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Invitation List Response Structure\nDESCRIPTION: Shows the modified response structure for getInvitationList that now returns an object with data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in React Router\nDESCRIPTION: This snippet shows how to create a dedicated SignUp page in a React Router application. It imports the SignUp component from @clerk/react-router and renders it as a functional component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignUp } from '@clerk/react-router'\n\nexport default function SignUpPage() {\n  return <SignUp />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Password Reset Flow in Next.js\nDESCRIPTION: A React component built with Next.js that implements a complete password reset flow using Clerk. The component handles sending reset codes, password updates, and includes support for 2FA verification. It uses Clerk's useAuth and useSignIn hooks for authentication management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/forgot-password.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\nimport React, { useEffect, useState } from 'react'\nimport { useAuth, useSignIn } from '@clerk/nextjs'\nimport type { NextPage } from 'next'\nimport { useRouter } from 'next/navigation'\n\nconst ForgotPasswordPage: NextPage = () => {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [code, setCode] = useState('')\n  const [successfulCreation, setSuccessfulCreation] = useState(false)\n  const [secondFactor, setSecondFactor] = useState(false)\n  const [error, setError] = useState('')\n\n  const router = useRouter()\n  const { isSignedIn } = useAuth()\n  const { isLoaded, signIn, setActive } = useSignIn()\n\n  useEffect(() => {\n    if (isSignedIn) {\n      router.push('/')\n    }\n  }, [isSignedIn, router])\n\n  if (!isLoaded) {\n    return null\n  }\n\n  async function create(e: React.FormEvent) {\n    e.preventDefault()\n    await signIn\n      ?.create({\n        strategy: 'reset_password_email_code',\n        identifier: email,\n      })\n      .then((_) => {\n        setSuccessfulCreation(true)\n        setError('')\n      })\n      .catch((err) => {\n        console.error('error', err.errors[0].longMessage)\n        setError(err.errors[0].longMessage)\n      })\n  }\n\n  async function reset(e: React.FormEvent) {\n    e.preventDefault()\n    await signIn\n      ?.attemptFirstFactor({\n        strategy: 'reset_password_email_code',\n        code,\n        password,\n      })\n      .then((result) => {\n        if (result.status === 'needs_second_factor') {\n          setSecondFactor(true)\n          setError('')\n        } else if (result.status === 'complete') {\n          setActive({ session: result.createdSessionId })\n          setError('')\n        } else {\n          console.log(result)\n        }\n      })\n      .catch((err) => {\n        console.error('error', err.errors[0].longMessage)\n        setError(err.errors[0].longMessage)\n      })\n  }\n\n  return (\n    <div>\n      <h1>Forgot Password?</h1>\n      <form onSubmit={!successfulCreation ? create : reset}>\n        {!successfulCreation && (\n          <>\n            <label htmlFor=\"email\">Provide your email address</label>\n            <input\n              type=\"email\"\n              placeholder=\"e.g john@doe.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n\n            <button>Send password reset code</button>\n            {error && <p>{error}</p>}\n          </>\n        )}\n\n        {successfulCreation && (\n          <>\n            <label htmlFor=\"password\">Enter your new password</label>\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\n\n            <label htmlFor=\"password\">\n              Enter the password reset code that was sent to your email\n            </label>\n            <input type=\"code\" value={code} onChange={(e) => setCode(e.target.value)} />\n\n            <button>Reset</button>\n            {error && <p>{error}</p>}\n          </>\n        )}\n\n        {secondFactor && <p>2FA is required, but this UI does not handle that</p>}\n      </form>\n    </div>\n  )\n}\n\nexport default ForgotPasswordPage\n```\n\n----------------------------------------\n\nTITLE: Creating Clerk Client with @clerk/backend in TypeScript\nDESCRIPTION: Initializes a default Clerk client using environment-provided keys and meta-information via @clerk/backend. Developers must use 'createClerkClient' and pass config values, enabling secure centralized API calls to the Clerk BAPI. Inputs are environment variables for keys (secret, API, publishable, JWT), version, and metadata; outputs an instantiated 'clerkClient' for use across the app. Requires @clerk/backend dependency and correct environment configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst API_VERSION = process.env.CLERK_API_VERSION || 'v1'\nconst SECRET_KEY = process.env.CLERK_SECRET_KEY || ''\nconst PUBLISHABLE_KEY = process.env.CLERK_PUBLISHABLE_KEY || ''\nconst API_URL = process.env.CLERK_API_URL || ''\nconst JWT_KEY = process.env.CLERK_JWT_KEY || ''\nconst SDK_METADATA = {\n  name: PACKAGE_NAME,\n  version: PACKAGE_VERSION,\n  environment: process.env.NODE_ENV,\n}\n\nexport const clerkClient = createClerkClient({\n  secretKey: SECRET_KEY,\n  apiUrl: API_URL,\n  apiVersion: API_VERSION,\n  jwtKey: JWT_KEY,\n  userAgent: `${PACKAGE_NAME}@${PACKAGE_VERSION}`,\n  sdkMetadata: SDK_METADATA,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Additional Fields Step in Clerk Sign-Up\nDESCRIPTION: This snippet adds a 'continue' step to the sign-up flow, allowing for the collection of additional required fields such as username when signing up with a social provider. It demonstrates how to handle cases where extra information is needed to complete the sign-up process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-up.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <SignUp.Root>\n      <SignUp.Step name=\"start\">\n        {/* ... previous code ... */}\n      </SignUp.Step>\n\n      <SignUp.Step name=\"continue\">\n        <h1>Fill in missing fields</h1>\n\n        <Clerk.Field name=\"username\">\n          <Clerk.Label>Username</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignUp.Action submit>Continue</SignUp.Action>\n      </SignUp.Step>\n\n      <SignUp.Step name=\"verifications\">\n        {/* ... previous code ... */}\n      </SignUp.Step>\n    </SignUp.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting SSR Pages and Fetching User Data with `clerkClient` (TypeScript)\nDESCRIPTION: This snippet shows how to protect a server-side rendered page in Next.js by checking for `userId` obtained via `getAuth`. It also demonstrates fetching detailed user information using `clerkClient` if the user is authenticated. The fetched `user` object is then passed as the second argument to `buildClerkProps` to make it available alongside standard Clerk props on the client-side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/build-clerk-props.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'pages/api/example.ts' }}\nimport { clerkClient, getAuth, buildClerkProps } from '@clerk/nextjs/server'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  const { userId } = getAuth(ctx.req)\n\n  const client = await clerkClient()\n\n  const user = userId ? await client.users.getUser(userId) : undefined\n\n  return { props: { ...buildClerkProps(ctx.req, { user }) } }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Adding a Member to an Organization in TypeScript\nDESCRIPTION: This snippet demonstrates how to add a user as a member to an organization using the addMember() method. It requires the user ID and the role for the new member.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction addMember(params: AddMemberParams): Promise<OrganizationMembership>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait organization.addMember({ userId: 'user_123', role: 'org:admin' })\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk JavaScript SDK via Package Manager (Bash)\nDESCRIPTION: Shows how to install the Clerk JavaScript SDK (`@clerk/clerk-js`) into a JavaScript project using various package managers (npm, yarn, pnpm, bun). This step is necessary when integrating Clerk using the NPM module approach.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm install @clerk/clerk-js\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn add @clerk/clerk-js\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm add @clerk/clerk-js\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun add @clerk/clerk-js\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk-Firebase Integration in Next.js App Router\nDESCRIPTION: Complete example of integrating Clerk authentication with Firebase in a Next.js application. This component initializes Firebase, provides methods for signing into Firebase using a Clerk token, and demonstrates fetching data from Firestore.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/firebase.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useAuth } from '@clerk/nextjs'\nimport { initializeApp } from 'firebase/app'\nimport { getAuth, signInWithCustomToken } from 'firebase/auth'\nimport { getFirestore } from 'firebase/firestore'\nimport { doc, getDoc } from 'firebase/firestore'\n\n// Add your Firebase config object\nconst firebaseConfig = {\n  apiKey: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n  authDomain: 'clerk-example-xxxxx.firebaseapp.com',\n  databaseURL: 'https://clerk-example-xxxxx-default-xxxx.firebaseio.com',\n  projectId: 'clerk-test-xxxx',\n  storageBucket: 'clerk-test-xxxx.appspot.com',\n  messagingSenderId: '012345678910',\n  appId: '1:012345678:web:abcdef123456hijklm',\n  measurementId: 'G-ABC123DEF',\n}\n\n// Connect to your Firebase app\nconst app = initializeApp(firebaseConfig)\n// Connect to your Firestore database\nconst db = getFirestore(app)\n// Connect to Firebase auth\nconst auth = getAuth(app)\n\n// Remove this if you do not have Firestore set up\n// for your Firebase app\nconst getFirestoreData = async () => {\n  const docRef = doc(db, 'example', 'example-document')\n  const docSnap = await getDoc(docRef)\n  if (docSnap.exists()) {\n    console.log('Document data:', docSnap.data())\n  } else {\n    // docSnap.data() will be undefined in this case\n    console.log('No such document!')\n  }\n}\n\nexport default function FirebaseUI() {\n  const { getToken, userId } = useAuth()\n\n  // Handle if the user is not signed in\n  // You could display content, or redirect them to a sign-in page\n  if (!userId) {\n    return <p>You need to sign in with Clerk to access this page.</p>\n  }\n\n  const signIntoFirebaseWithClerk = async () => {\n    const token = await getToken({ template: 'integration_firebase' })\n\n    const userCredentials = await signInWithCustomToken(auth, token || '')\n    // The userCredentials.user object can call the methods of\n    // the Firebase platform as an authenticated user.\n    console.log('User:', userCredentials.user)\n  }\n\n  return (\n    <main style={{ display: 'flex', flexDirection: 'column', rowGap: '1rem' }}>\n      <button onClick={signIntoFirebaseWithClerk}>Sign in</button>\n\n      {/* Remove this button if you do not have Firestore set up */}\n      <button onClick={getFirestoreData}>Get document</button>\n    </main>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current User Data with $userStore\nDESCRIPTION: Examples showing how to access the current User object across different frameworks. Handles loading states and signed-out scenarios.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/user-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $userStore } from '@clerk/astro/client'\n\nexport default function User() {\n  const user = useStore($userStore)\n\n  if (user === undefined) {\n    // Handle loading state however you like\n    return null\n  }\n\n  if (user === null) {\n    return <div>Not signed in</div>\n  }\n\n  return <div>Hello {user.fullName}!</div>\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $userStore } from '@clerk/astro/client'\n\nconst user = useStore($userStore)\n</script>\n\n<template>\n  <div v-if=\"user === undefined\">\n    <!-- Handle loading state however you like -->\n  </div>\n  <div v-else-if=\"user === null\">Not signed in</div>\n  <div v-else>Hello {{ user.fullName }}!</div>\n</template>\n```\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $userStore as user } from '@clerk/astro/client'\n</script>\n\n{#if $user === undefined}\n  <!-- Handle loading state however you like -->\n{:else if $user === null}\n  <div>Not signed in</div>\n{:else}\n  <div>Hello {$user.fullName}!</div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Securing Clerk Webhooks\nDESCRIPTION: Defines the `CLERK_WEBHOOK_SIGNING_SECRET` environment variable. This secret is crucial for verifying the authenticity of incoming Clerk webhooks in your backend using Clerk's `verifyWebhook()` function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_WEBHOOK_SIGNING_SECRET` | The signing secret for your webhook. |\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkApp with Options in Remix\nDESCRIPTION: This snippet demonstrates passing configuration options to the `ClerkApp` higher-order component in a Remix application. An options object is passed as the second argument to `ClerkApp`, allowing customization like setting the `publishableKey` using environment variables (`import.meta.env`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/clerk-app.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n// Wrap your app in ClerkApp(app)\nexport default ClerkApp(App, {\n  publishableKey: import.meta.env.VITE_CLERK_PUBLISHABLE_KEY,\n})\n```\n\n----------------------------------------\n\nTITLE: State-Based Styling for Clerk Elements using Data Attributes\nDESCRIPTION: Shows how to apply styles to Clerk Elements components based on their state using data attributes. This is useful for styling valid/invalid states of form fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.input {\n  --border-color: gray;\n  border: 1px solid var(--border-color);\n\n  &[data-invalid] {\n    --border-color: red;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating tRPC Context with Clerk Authentication\nDESCRIPTION: Defines a context creation function that uses Clerk's auth() helper to access the user's Auth object. This context will be available in all tRPC procedures, providing user authentication data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport const createContext = async () => {\n  return { auth: await auth() }\n}\n\nexport type Context = Awaited<ReturnType<typeof createContext>>\n```\n\n----------------------------------------\n\nTITLE: Creating an Inngest Function to Send Welcome Emails in TypeScript\nDESCRIPTION: This TypeScript snippet shows how to create a separate Inngest function, also triggered by 'clerk/user.created', specifically for sending a welcome email. It extracts the user's first name and primary email address from the event data and uses a placeholder `emails.sendWelcomeEmail` function to dispatch the email. This demonstrates the 'fan-out' pattern where multiple functions can react to the same event, decoupling tasks like database syncing and email sending.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/inngest.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst sendWelcomeEmail = inngest.createFunction(\n  { id: 'send-welcome-email' },\n  { event: 'clerk/user.created' },\n  async ({ event }) => {\n    const user = event.data\n    const { first_name } = user\n    const email = user.email_addresses.find(\n      (e) => e.id === user.primary_email_address_id,\n    ).email_address\n    // `emails` is a placeholder for the function in your codebase to send email\n    await emails.sendWelcomeEmail({ email, first_name })\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Authenticating Requests with authorizedParties using clerkClient - Clerk (TypeScript)\nDESCRIPTION: This TypeScript example shows how to pass the 'authorizedParties' option when invoking 'clerkClient.authenticateRequest' to authorize only specific origins for an incoming request ('req'). This helps restrict authentication to trusted domains and prevents security vulnerabilities such as CSRF. Dependencies include the Clerk Node.js SDK, and the function should be used in server-side request handling logic, ensuring 'authorizedParties' reflects allowed domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nclerkClient.authenticateRequest(req, {\n  authorizedParties: ['https://example.com'],\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Infinite Pagination for Organizations in React\nDESCRIPTION: A React component that demonstrates infinite pagination for organization memberships, allowing users to continuously load more organizations and select an active organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOrganizationList } from '@clerk/clerk-react'\nimport React from 'react'\n\nconst JoinedOrganizations = () => {\n  const { isLoaded, setActive, userMemberships } = useOrganizationList({\n    userMemberships: {\n      infinite: true,\n    },\n  })\n\n  if (!isLoaded) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <ul>\n        {userMemberships.data?.map((mem) => (\n          <li key={mem.id}>\n            <span>{mem.organization.name}</span>\n            <button onClick={() => setActive({ organization: mem.organization.id })}>Select</button>\n          </li>\n        ))}\n      </ul>\n\n      <button disabled={!userMemberships.hasNextPage} onClick={() => userMemberships.fetchNext()}>\n        Load more\n      </button>\n    </>\n  )\n}\n\nexport default JoinedOrganizations\n```\n\n----------------------------------------\n\nTITLE: Applying Inline CSS Styles to Clerk SignIn in Next.js Pages Router (TSX)\nDESCRIPTION: Illustrates how to apply inline CSS styles directly to the `formButtonPrimary` element of the Clerk `<SignIn>` component using a JavaScript object passed to the `appearance.elements` prop. This example customizes font size, text transformation, background color, and hover/focus/active states within the custom App component (`app.tsx`) of a Next.js Pages Router application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app.tsx', mark: [[7, 20]] }}\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignIn\n        appearance={{\n          elements: {\n            formButtonPrimary: {\n              fontSize: 14,\n              textTransform: 'none',\n              backgroundColor: '#611BBD',\n              '&:hover, &:focus, &:active': {\n                backgroundColor: '#49247A',\n              },\n            },\n          },\n        }}\n      />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n```\n\n----------------------------------------\n\nTITLE: Using Clerk UI Components in a Nuxt Vue Component (Vue)\nDESCRIPTION: Demonstrates how to use Clerk's prebuilt control components (`<SignedIn>`, `<SignedOut>`) and UI components (`<SignInButton>`, `<UserButton>`) within an `app.vue` file to conditionally render content based on the user's authentication status. Nuxt 3 automatically imports components from the `components/` directory, simplifying usage. This example creates a header that shows a sign-in button for logged-out users and a user button (with account options) for logged-in users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nuxt.mdx#2025-04-23_snippet_3\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\n// Components are automatically imported\n</script>\n\n<template>\n  <header>\n    <SignedOut>\n      <SignInButton />\n    </SignedOut>\n    <SignedIn>\n      <UserButton />\n    </SignedIn>\n  </header>\n\n  <main>\n    <NuxtPage />\n  </main>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Setting Public Metadata with Clerk Express SDK (TypeScript)\nDESCRIPTION: This TypeScript/Express snippet allows updating a user's public metadata (e.g., role) in Clerk via a REST endpoint. The Express route handler takes in 'role' and 'userId' from the request body, updates the associated metadata, and returns success in JSON. Depends on '@clerk/express' and proper backend configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/updateRole', async (req, res) => {\n  const { role, userId } = req.body\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    publicMetadata: {\n      role,\n    },\n  })\n  res.status(200).json({ success: true })\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-in Form with Email/Password in React Native\nDESCRIPTION: Implementation of a sign-in form component handling email/password authentication using Clerk in React Native. Includes form state management, sign-in attempt handling, and error management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nconst [password, setPassword] = React.useState('')\n\n// Handle the submission of the sign-in form\nconst onSignInPress = async () => {\n  if (!isLoaded) return\n\n  // Start the sign-in process using the email and password provided\n  try {\n    const signInAttempt = await signIn.create({\n      identifier: emailAddress,\n      password,\n    })\n\n    // If sign-in process is complete, set the created session as active\n    // and redirect the user\n    if (signInAttempt.status === 'complete') {\n      await setActive({ session: signInAttempt.createdSessionId })\n      router.replace('/')\n    } else {\n      // If the status isn't complete, check why. User might need to\n      // complete further steps.\n      console.error(JSON.stringify(signInAttempt, null, 2))\n    }\n  } catch (err) {\n    // See https://clerk.com/docs/custom-flows/error-handling\n    // for more info on error handling\n    console.error(JSON.stringify(err, null, 2))\n  }\n}\n\nreturn (\n  <View>\n    <Text>Sign in</Text>\n    <TextInput\n      autoCapitalize=\"none\"\n      value={emailAddress}\n      placeholder=\"Enter email\"\n      onChangeText={(emailAddress) => setEmailAddress(emailAddress)}\n    />\n    <TextInput\n      value={password}\n      placeholder=\"Enter password\"\n      secureTextEntry={true}\n      onChangeText={(password) => setPassword(password)}\n    />\n    <TouchableOpacity onPress={onSignInPress}>\n      <Text>Continue</Text>\n    </TouchableOpacity>\n    <View style={{ display: 'flex', flexDirection: 'row', gap: 3 }}>\n      <Text>Don't have an account?</Text>\n      <Link href=\"/sign-up\">\n        <Text>Sign up</Text>\n      </Link>\n    </View>\n  </View>\n)\n```\n\n----------------------------------------\n\nTITLE: Creating a User Sign-In View in SwiftUI (Swift)\nDESCRIPTION: This snippet presents a `SignInView` struct in SwiftUI for user authentication. It provides fields for email and password input using `TextField` and `SecureField`. A 'Continue' button triggers the `submit` asynchronous function, which calls the Clerk SDK's `SignIn.create` method with the provided email and password credentials to attempt user sign-in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_3\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'SignInView.swift' }}\nimport SwiftUI\nimport Clerk\n\nstruct SignInView: View {\n  @State private var email = \"\"\n  @State private var password = \"\"\n\n  var body: some View {\n    VStack {\n      Text(\"Sign In\")\n      TextField(\"Email\", text: $email)\n      SecureField(\"Password\", text: $password)\n      Button(\"Continue\") {\n        Task { await submit(email: email, password: password) }\n      }\n    }\n    .padding()\n  }\n}\n\nextension SignInView {\n\n  func submit(email: String, password: String) async {\n    do {\n      try await SignIn.create(\n        strategy: .identifier(email, password: password)\n      )\n    } catch {\n      dump(error)\n    }\n  }\n\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Tanstack React Start\nDESCRIPTION: This code shows how to use Clerk's UserButton component in a Tanstack React Start application. It demonstrates the setup of a route component with conditional rendering for authenticated and non-authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, UserButton, SignInButton, SignedOut } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/')({\n  component: Home,\n})\n\nfunction Home() {\n  return (\n    <header>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Conditionally Rendering a Component After Clerk Loads in Next.js\nDESCRIPTION: This React/JSX snippet demonstrates how to delay the mounting of a component (`Editor` from `@monaco-editor/react`) until Clerk has successfully loaded. It utilizes the `useClerk` hook from `@clerk/nextjs` to access the Clerk instance and checks the `clerk.loaded` property before rendering the `Editor`. This pattern is useful for preventing potential conflicts with scripts that might interfere with Clerk's initialization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/troubleshooting/script-loading.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Editor } from '@monaco-editor/react'\nimport { useClerk } from '@clerk/nextjs'\n\nexport default function Home() {\n  const clerk = useClerk()\n\n  return <main>{clerk.loaded && <Editor />}</main>\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Active Organization with Clerk in JavaScript\nDESCRIPTION: Code that creates a button to set an organization as active using Clerk's setActive method. It handles both successful responses and errors with proper error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst addBtn = document.createElement('button')\naddBtn.textContent = 'Set as active'\naddBtn.addEventListener('click', async function (e) {\n  e.preventDefault()\n\n  await clerk\n    .setActive({ organization: membership.organization.id })\n    .then((res) => {\n      console.log('Set as active:', res)\n    })\n    .catch((err) => {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    })\n})\nrow.insertCell().appendChild(addBtn)\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignIn in Next.js Pages Router\nDESCRIPTION: This example shows how to use the RedirectToSignIn component in a Next.js application using the Pages Router. It's implemented in the _app.tsx file, wrapping the entire application in ClerkProvider and controlling access with SignedIn and SignedOut components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signin.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToSignIn } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider>\n      <SignedIn>\n        <Component {...pageProps} />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignIn />\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Creating a Plasmo App with TailwindCSS and src Directory (Bash)\nDESCRIPTION: Initializes a new Chrome Extension project using the Plasmo framework via `pnpm`. This command specifically includes Tailwind CSS for styling and organizes source files within a `src/` directory. It then changes the current directory to the newly created project folder.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm create plasmo --with-tailwindcss --with-src clerk-chrome-extension\ncd clerk-chrome-extension\n```\n\n----------------------------------------\n\nTITLE: Processing User Lockout Expiration Time\nDESCRIPTION: JavaScript code showing how to handle user lockout expiration time and format it into a user-friendly message.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/error-handling.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nif (errors[0].code === 'user_locked') {\n  let currentDate = new Date()\n  currentDate.setSeconds(currentDate.getSeconds() + errors[0].meta.lockout_expires_in_seconds)\n  const lockoutExpiresAt = currentDate.toLocaleString()\n  console.log('Your account is locked, you will be able to try again at ' + lockoutExpiresAt)\n}\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/fastify SDK using package managers\nDESCRIPTION: Provides installation commands for the Clerk Fastify SDK across various package managers (npm, yarn, pnpm, bun). Ensures the necessary dependency is added to the project to enable Clerk’s backend utilities.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/fastify.mdx#_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\nnpm install @clerk/fastify\n```\n\nLANGUAGE: Shell\nCODE:\n```\nyarn add @clerk/fastify\n```\n\nLANGUAGE: Shell\nCODE:\n```\npnpm add @clerk/fastify\n```\n\nLANGUAGE: Shell\nCODE:\n```\nbun add @clerk/fastify\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignUp in Next.js Pages Router\nDESCRIPTION: Example showing how to use RedirectToSignUp component within Next.js Pages Router _app.tsx with ClerkProvider for authentication flow control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signup.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToSignUp } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider>\n      <SignedIn>\n        <Component {...pageProps} />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignUp />\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes by Authentication Status with Clerk Middleware - TSX\nDESCRIPTION: Protects administrative API routes by verifying user authentication. The middleware checks if a user is signed in (via userId) before allowing access to routes beginning with '/api/admin'. If not authenticated, throws a 401 Unauthorized error using Nuxt's createError(). Depends on '@clerk/nuxt/server' and Nuxt error utility. Takes the middleware event as input and blocks unauthorized requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/clerk-middleware.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TSX\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nuxt/server'\\n\\nexport default clerkMiddleware((event) => {\\n  const { userId } = event.context.auth()\\n  const isAdminRoute = event.path.startsWith('/api/admin')\\n\\n  if (!userId && isAdminRoute) {\\n    throw createError({\\n      statusCode: 401,\\n      statusMessage: 'Unauthorized: User not signed in',\\n    })\\n  }\\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in Next.js Pages Router\nDESCRIPTION: This code shows how to integrate ClerkProvider into a Next.js application using the Pages Router. It wraps the entire application to provide authentication context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Adding Start Step to Sign-in Flow\nDESCRIPTION: Implementation of the initial sign-in step using SignIn.Step component to render the starting UI of the authentication flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <h1>Sign in to your account</h1>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example Usage of getClient() Method\nDESCRIPTION: Demonstrates how to use the getClient() method from the Clerk Backend SDK to retrieve a specific client using their ID. Shows practical implementation using the clerkClient.clients interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/client/get-client.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst clientId = 'client_123'\n\nconst response = await clerkClient.clients.getClient(clientId)\n```\n\n----------------------------------------\n\nTITLE: Applying Custom Clerk Variables in Next.js (App Router) - TypeScript\nDESCRIPTION: Demonstrates how to globally customize Clerk components in a Next.js project using the App Router, by passing a `variables` object with properties such as `colorPrimary` and `colorText` to the `appearance` prop of the `ClerkProvider` component. Requires the `@clerk/nextjs` package and placement within the main layout file. Expects an object describing desired color values; styles are applied application-wide via provider context. Only applicable to App Router file structures.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional UserButton Menu Items in Next.js\nDESCRIPTION: Demonstrates how to conditionally render UserButton menu items based on user permissions using the has() helper function in Next.js. Shows loading state handling and permission checking.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton, useAuth } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  const { has, isLoaded } = useAuth()\n\n  if (!isLoaded) {\n    return <span>Loading...</span>\n  }\n\n  const isAdmin = has({ permission: 'org:app:admin' })\n\n  return (\n    <header>\n      <UserButton>\n        {isAdmin && (\n          <UserButton.MenuItems>\n            <UserButton.Link\n              label=\"Create organization\"\n              labelIcon={<DotIcon />}\n              href=\"/create-organization\"\n            />\n          </UserButton.MenuItems>\n        )}\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Next.js Server\nDESCRIPTION: Shows two ways to access the `JwtPayload` object containing session claims within a Next.js server environment using `getAuth` from either `@clerk/nextjs/server` or `@clerk/ssr.server`. This is relevant for understanding the impact of the removed `orgs` claim in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Passing Configuration Options to rootAuthLoader() with a Callback (TSX)\nDESCRIPTION: Shows how to provide configuration options (like `signInUrl`) to `rootAuthLoader()` as the third argument. This example combines passing options with using a callback function for custom data loading, demonstrating the flexibility of the function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/root-auth-loader.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/root.tsx' }}\nimport { rootAuthLoader } from '@clerk/react-router/ssr.server'\nimport type { Route } from './+types/root'\n\nexport async function loader(args: Route.LoaderArgs) {\n  return rootAuthLoader(\n    args,\n    ({ req, context, params }) => {\n      const { sessionId, userId, getToken } = req.auth\n      // Add logic to fetch data\n      return { yourData: 'here' }\n    },\n    { signInUrl: '/sign-in' }, // Options\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Installing the Clerk React SDK using Shell Commands\nDESCRIPTION: These commands demonstrate how to install the `@clerk/clerk-react` SDK using different package managers (npm, yarn, pnpm). This SDK provides components, hooks, and helpers for integrating Clerk authentication into a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-react\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-react\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Protecting Route Handlers using auth.protect() in Next.js\nDESCRIPTION: Shows how to protect a Route Handler using auth.protect() which returns a 404 error when there is no signed in user. This is a simple way to restrict access to authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/route-handlers.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport async function GET() {\n  // If there is no signed in user, this will return a 404 error\n  await auth.protect()\n\n  // Add your Route Handler logic here\n\n  return Response.json({ message: 'Hello world!' })\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk API Keys in .env File (Environment Variables)\nDESCRIPTION: This snippet demonstrates how to configure required Clerk API keys in a .env file for both the publishable (frontend) and secret (backend) keys. These variables must be placed in the root of your project for development and production environments. Required: valid keys from the Clerk dashboard. Input: environment variables; Output: runtime access to Clerk keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react-router.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationInvitationList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Users.getOrganizationInvitationList from directly returning data to returning an object with data and totalCount properties. This change helps with handling paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Defining CreateUserParams Interface in TypeScript\nDESCRIPTION: This code snippet defines the CreateUserParams interface, which includes various optional properties for creating a user. It covers basic user information, authentication methods, and metadata fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/create-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CreateUserParams {\n  externalId?: string;\n  firstName?: string;\n  lastName?: string;\n  emailAddress?: string[];\n  phoneNumber?: string[];\n  web3_wallet?: string[];\n  username?: string;\n  password?: string;\n  passwordDigest?: string;\n  passwordHasher?: 'argon2i' | 'argon2id' | 'awscognito' | 'bcrypt' | 'bcrypt_sha256_django' | 'md5' | 'pbkdf2_sha256' | 'pbkdf2_sha256_django' | 'pbkdf2_sha1' | 'phpass' | 'scrypt_firebase' | 'scrypt_werkzeug' | 'sha256';\n  skipPasswordChecks?: boolean;\n  skipPasswordRequirement?: boolean;\n  totpSecret?: string;\n  backupCodes?: string[];\n  publicMetadata?: UserPublicMetadata;\n  privateMetadata?: UserPrivateMetadata;\n  unsafeMetadata?: any;\n}\n```\n\n----------------------------------------\n\nTITLE: Next.js Custom MFA Sign-in Implementation\nDESCRIPTION: A Next.js component that implements a custom sign-in flow with MFA support. It handles both email/password authentication and second factor verification using TOTP or backup codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\n\nexport default function SignInForm() {\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const [useBackupCode, setUseBackupCode] = React.useState(false)\n  const [displayTOTP, setDisplayTOTP] = React.useState(false)\n  const router = useRouter()\n\n  const handleFirstStage = (e: React.FormEvent) => {\n    e.preventDefault()\n    setDisplayTOTP(true)\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return\n\n    try {\n      await signIn.create({\n        identifier: email,\n        password,\n      })\n\n      const signInAttempt = await signIn.attemptSecondFactor({\n        strategy: useBackupCode ? 'backup_code' : 'totp',\n        code: code,\n      })\n\n      if (signInAttempt.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        console.log(signInAttempt)\n      }\n    } catch (err) {\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (displayTOTP) {\n    return (\n      <div>\n        <h1>Verify your account</h1>\n        <form onSubmit={(e) => handleSubmit(e)}>\n          <div>\n            <label htmlFor=\"code\">Code</label>\n            <input\n              onChange={(e) => setCode(e.target.value)}\n              id=\"code\"\n              name=\"code\"\n              type=\"text\"\n              value={code}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"backupcode\">This code is a backup code</label>\n            <input\n              onChange={() => setUseBackupCode((prev) => !prev)}\n              id=\"backupcode\"\n              name=\"backupcode\"\n              type=\"checkbox\"\n              checked={useBackupCode}\n            />\n          </div>\n          <button type=\"submit\">Verify</button>\n        </form>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <h1>Sign in</h1>\n      <form onSubmit={(e) => handleFirstStage(e)}>\n        <div>\n          <label htmlFor=\"email\">Email</label>\n          <input\n            onChange={(e) => setEmail(e.target.value)}\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            value={email}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Password</label>\n          <input\n            onChange={(e) => setPassword(e.target.value)}\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            value={password}\n          />\n        </div>\n        <button type=\"submit\">Continue</button>\n      </form>\n    </>\n  )\n```\n\n----------------------------------------\n\nTITLE: Implementing Tanstack Query with Clerk Authentication in React\nDESCRIPTION: Demonstrates integration of Clerk authentication with Tanstack Query, including proper error handling and TypeScript support. Includes configuration for retry attempts and cache staleness.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@clerk/nextjs'\n\n// Define your query keys as constants to avoid typos\nexport const queryKeys = {\n  foo: ['foo'] as const,\n  // Add other query keys as needed\n}\n\n// Define the response type for type safety\ninterface FooResponse {\n  // Add your response type here\n  id: string\n  name: string\n}\n\nexport function useFooQuery() {\n  // Use `useAuth()` to access the `getToken()` method\n  const { getToken } = useAuth()\n\n  return useQuery({\n    queryKey: queryKeys.foo,\n    queryFn: async (): Promise<FooResponse> => {\n      // Use `getToken()` to get the current session token\n      const token = await getToken()\n\n      // Make the request\n      const response = await fetch('/api/foo', {\n        headers: {\n          Authorization: `Bearer ${token}`, // Include the session token as a Bearer token in the Authorization header\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (!response.ok) {\n        // Include status code and status text in error message\n        throw new Error(`API Error: ${response.status} ${response.statusText}`)\n      }\n\n      const data = await response.json()\n      return data as FooResponse\n    },\n    // Add common configuration options\n    retry: 2,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  })\n}\n\n// Usage in component:\nfunction MyComponent() {\n  const { data, isLoading, error } = useFooQuery()\n\n  if (isLoading) return <div>Loading...</div>\n  if (error) return <div>Error: {error.message}</div>\n  if (!data) return null\n\n  return <div>{data.name}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Express Route Middleware for Clerk Webhook Verification in TypeScript\nDESCRIPTION: This Express.js TypeScript snippet defines a POST handler at '/api/webhooks' using Clerk's '@clerk/express/webhooks' package. The handler ensures proper payload verification using the raw body and logs the event details. On successful verification, it responds with a success message; otherwise, it returns a 400 error. Set up dependencies: 'express' and '@clerk/express/webhooks'. The endpoint should be open as webhooks lack user authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/express/webhooks'\\nimport express from 'express'\\n\\nconst app = express()\\n\\napp.post('/api/webhooks', express.raw({ type: 'application/json' }), async (req, res) => {\\n  try {\\n    const evt = await verifyWebhook(req)\\n\\n    // Do something with payload\\n    // For this guide, log payload to console\\n    const { id } = evt.data\\n    const eventType = evt.type\\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\\n    console.log('Webhook payload:', evt.data)\\n\\n    return res.send('Webhook received')\\n  } catch (err) {\\n    console.error('Error verifying webhook:', err)\\n    return res.status(400).send('Error verifying webhook')\\n  }\\n})\\n\n```\n\n----------------------------------------\n\nTITLE: Verifying Email Address in Next.js with Clerk\nDESCRIPTION: This component handles the email verification process after a user clicks the link sent to their email. It uses Clerk's useClerk hook to access the handleEmailLinkVerification method. The component manages different verification statuses and displays appropriate messages based on the outcome.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/custom-flows/email-link-verification.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useClerk } from '@clerk/nextjs'\nimport { EmailLinkErrorCodeStatus, isEmailLinkError } from '@clerk/nextjs/errors'\nimport Link from 'next/link'\n\nexport type VerificationStatus =\n  | 'expired'\n  | 'failed'\n  | 'loading'\n  | 'verified'\n  | 'verified_switch_tab'\n  | 'client_mismatch'\n\nexport default function VerifyEmailLink() {\n  const [verificationStatus, setVerificationStatus] = React.useState('loading')\n\n  const { handleEmailLinkVerification, loaded } = useClerk()\n\n  async function verify() {\n    try {\n      await handleEmailLinkVerification({})\n      setVerificationStatus('verified')\n    } catch (err: any) {\n      let status: VerificationStatus = 'failed'\n\n      if (isEmailLinkError(err)) {\n        // If link expired, set status to expired\n        if (err.code === EmailLinkErrorCodeStatus.Expired) {\n          status = 'expired'\n        } else if (err.code === EmailLinkErrorCodeStatus.ClientMismatch) {\n          // OPTIONAL: This check is only required if you have\n          // the 'Require the same device and browser' setting\n          // enabled in the Clerk Dashboard\n          status = 'client_mismatch'\n        }\n      }\n\n      setVerificationStatus(status)\n      return\n    }\n  }\n\n  React.useEffect(() => {\n    if (!loaded) return\n\n    verify()\n  }, [handleEmailLinkVerification, loaded])\n\n  if (verificationStatus === 'loading') {\n    return <div>Loading...</div>\n  }\n\n  if (verificationStatus === 'failed') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link verification failed.</p>\n        <Link href=\"/account/add-email\">Return to add email</Link>\n      </div>\n    )\n  }\n\n  if (verificationStatus === 'expired') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link has expired.</p>\n        <Link href=\"/account/add-email\">Return to add email</Link>\n      </div>\n    )\n  }\n\n  // OPTIONAL: This check is only required if you have\n  // the 'Require the same device and browser' setting\n  // enabled in the Clerk Dashboard\n  if (verificationStatus === 'client_mismatch') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>\n          You must complete the email link verification on the same device and browser as you\n          started it on.\n        </p>\n        <Link href=\"/account/add-email\">Return to add email</Link>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>Successfully added email!</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Tanstack React Router `<SignedIn>` usage example\nDESCRIPTION: Shows how to incorporate `<SignedIn>` within a Tanstack React Router setup, creating routes and protecting content to be visible only to authenticated users. The example includes route creation and component definition.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { SignedIn } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/')({\n  component: Home,\n})\n\nfunction Home() {\n  return (\n    <div>\n      <SignedIn>\n        <p>You are signed in</p>\n      </SignedIn>\n      <p>Always visible</p>\n    </div>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: React Next.js `<SignedIn>` usage in `_app.tsx` with App Router\nDESCRIPTION: Illustrates usage of the `<SignedIn>` component in a Next.js application wrapping the app component, showing content visible only to signed-in users and always visible content. It imports necessary modules, sets up the provider, and renders conditional content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport '@/styles/globals.css'\nimport { ClerkProvider, SignedIn } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedIn>\n        <div>You are signed in</div>\n      </SignedIn>\n      <p>This content is always visible.</p>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n\n```\n\n----------------------------------------\n\nTITLE: Checking Authorization in JavaScript\nDESCRIPTION: This JavaScript code shows how to use the checkAuthorization method of the Session object to verify if the user has a specific role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.checkAuthorization({\n  role: 'admin',\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk API Keys in .env File (Shell)\nDESCRIPTION: Example structure for a `.env` file to store Clerk API keys. The `CLERK_PUBLISHABLE_KEY` and `CLERK_SECRET_KEY` are essential environment variables required by the Clerk SDK to authenticate requests with the Clerk API. These keys should be retrieved from the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-Step Sign-Up Flow with Clerk Elements in Next.js\nDESCRIPTION: This component creates a complete sign-up flow with email, password, and email verification using Clerk Elements. The implementation contains three steps: the initial form for collecting email and password, the verification step for email code validation, and a continuation step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <div className=\"grid w-full flex-grow items-center bg-zinc-100 px-4 sm:justify-center\">\n      <SignUp.Root>\n        <SignUp.Step\n          name=\"start\"\n          className=\"w-full space-y-6 rounded-2xl bg-white px-4 py-10 shadow-md ring-1 ring-black/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10 text-zinc-950\"\n              aria-hidden\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"currentColor\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-zinc-950\">\n              Create an account\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <div className=\"space-y-4\">\n            <Clerk.Field name=\"emailAddress\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-zinc-950\">Email</Clerk.Label>\n              <Clerk.Input\n                type=\"email\"\n                required\n                className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n            <Clerk.Field name=\"password\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-zinc-950\">Password</Clerk.Label>\n              <Clerk.Input\n                type=\"password\"\n                required\n                className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n          </div>\n          <SignUp.Action\n            submit\n            className=\"w-full rounded-md bg-zinc-950 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow outline-none ring-1 ring-inset ring-zinc-950 hover:bg-zinc-800 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-zinc-950 active:text-white/70\"\n          >\n            Sign Up\n          </SignUp.Action>\n\n          <p className=\"text-center text-sm text-zinc-500\">\n            Already have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-in\"\n              className=\"font-medium text-zinc-950 decoration-zinc-950/20 underline-offset-4 outline-none hover:text-zinc-700 hover:underline focus-visible:underline\"\n            >\n              Sign in\n            </Clerk.Link>\n          </p>\n        </SignUp.Step>\n        <SignUp.Step\n          name=\"verifications\"\n          className=\"w-full space-y-6 rounded-2xl bg-white px-4 py-10 shadow-md ring-1 ring-black/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10 text-zinc-950\"\n              aria-hidden\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"currentColor\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-zinc-950\">\n              Verify email code\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <SignUp.Strategy name=\"email_code\">\n            <Clerk.Field name=\"code\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-zinc-950\">Email code</Clerk.Label>\n              <Clerk.Input\n                type=\"otp\"\n                required\n                className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n            <SignUp.Action\n              submit\n              className=\"w-full rounded-md bg-zinc-950 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow outline-none ring-1 ring-inset ring-zinc-950 hover:bg-zinc-800 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-zinc-950 active:text-white/70\"\n            >\n              Verify\n            </SignUp.Action>\n          </SignUp.Strategy>\n          <p className=\"text-center text-sm text-zinc-500\">\n            Already have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-in\"\n              className=\"font-medium text-zinc-950 decoration-zinc-950/20 underline-offset-4 outline-none hover:text-zinc-700 hover:underline focus-visible:underline\"\n            >\n              Sign in\n            </Clerk.Link>\n          </p>\n        </SignUp.Step>\n        <SignUp.Step\n          name=\"continue\"\n          className=\"w-full space-y-6 rounded-2xl bg-white px-4 py-10 shadow-md ring-1 ring-black/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10 text-zinc-950\"\n              aria-hidden\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"currentColor\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-zinc-950\">\n              Continue registration\n\n```\n\n----------------------------------------\n\nTITLE: Setting the Clerk Publishable Key in Environment Variables\nDESCRIPTION: This snippet shows the format for setting the Clerk Publishable Key in a `.env` file. The key, obtained from the Clerk Dashboard, is assigned to the `VITE_CLERK_PUBLISHABLE_KEY` environment variable, making it accessible within the Vite application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme to SignIn Component in Next.js App Router\nDESCRIPTION: Shows how to apply the dark theme to a SignIn component using the appearance prop in Next.js App Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_22\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/nextjs'\nimport { dark } from '@clerk/themes'\n\nexport default function Page() {\n  return (\n    <SignIn\n      appearance={{\n        baseTheme: dark,\n      }}\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Helper Function to Check User Roles\nDESCRIPTION: A utility function that checks if the current user has a specific role by accessing the session claims. This simplifies role verification throughout the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Roles } from '@/types/globals'\nimport { auth } from '@clerk/nextjs/server'\n\nexport const checkRole = async (role: Roles) => {\n  const { sessionClaims } = await auth()\n  return sessionClaims?.metadata.role === role\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Private Metadata with Clerk Fullstack SDK (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates updating a user's private metadata (e.g., storing a Stripe customer ID) using Clerk's Fullstack SDK. The function expects a request containing 'stripeId' and 'userId', and updates the user's private metadata accordingly. Requires initialization of Clerk's SDK client as 'clerkClient'. Returns a JSON response to confirm the update completed successfully. Only available via backend SDK and not accessible to frontend for reading/writing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(req) {\n  const { stripeId, userId } = await req.json()\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    privateMetadata: {\n      stripeId: stripeId,\n    },\n  })\n\n  return Response.json({ success: true })\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.updateUserMetadata()\n```\n\n----------------------------------------\n\nTITLE: Attempting First Factor Verification in TypeScript\nDESCRIPTION: This snippet demonstrates the TypeScript function signature for the attemptFirstFactor method of the SignIn object. It takes AttemptFirstFactorParams as input and returns a Promise resolving to a SignIn object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptFirstFactor(params: AttemptFirstFactorParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Implementing Webhook Verification with Error Handling in TypeScript\nDESCRIPTION: Demonstrates how to use the verifyWebhook function to verify a webhook request, access event data, handle specific event types, and manage errors. It includes logging and appropriate HTTP responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/verify-webhook.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntry {\n  const evt = await verifyWebhook(request)\n\n  // Access the event data\n  const { id } = evt.data\n  const eventType = evt.type\n\n  // Handle specific event types\n  if (evt.type === 'user.created') {\n    console.log('New user created:', evt.data.id)\n    // Handle user creation\n  }\n\n  return new Response('Success', { status: 200 })\n} catch (err) {\n  console.error('Webhook verification failed:', err)\n  return new Response('Webhook verification failed', { status: 400 })\n}\n```\n\n----------------------------------------\n\nTITLE: Authorization Check Example in Next.js\nDESCRIPTION: Demonstrates how to use the has() method to check user permissions in a Next.js App Router page component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { has } = await auth()\n\n  const canManage = has({ permission: 'org:team_settings:manage' })\n\n  if (!canManage) return null\n\n  return <h1>Team Settings</h1>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToUserProfile in Remix\nDESCRIPTION: Example of using the RedirectToUserProfile component within a Remix route component with SignedIn/SignedOut conditional rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-userprofile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, RedirectToUserProfile } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <RedirectToUserProfile />\n      </SignedIn>\n      <SignedOut>\n        <p>You need to sign in to view your user profile.</p>\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Reordering Default and Custom Organization Profile Navigation in Dedicated Page - Clerk Vue - Vue\nDESCRIPTION: This Vue code configures setup for a custom organization profile page, adding a custom navigation page and homepage link with SVG icons and reordering default menu items using Clerk's OrganizationProfile component. Requires '@clerk/vue'. Slots are used for icon injection, and the template precisely orders custom and built-in navigation entries. This enables flexible organization profile navigation in Vue apps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_10\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\\\"ts\\\">\\nimport { OrganizationProfile } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <OrganizationProfile>\\n    <OrganizationProfile.Page label=\\\"Custom Page\\\" url=\\\"custom\\\">\\n      <template #labelIcon>\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n          <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n        </svg>\\n      </template>\\n      <div>\\n        <h1>Custom page</h1>\\n        <p>This is the content of the custom page.</p>\\n      </div>\\n    </OrganizationProfile.Page>\\n    <OrganizationProfile.Link label=\\\"Homepage\\\" url=\\\"/\\\">\\n      <template #labelIcon>\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n          <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n        </svg>\\n      </template>\\n    </OrganizationProfile.Link>\\n    <OrganizationProfile.Page label=\\\"members\\\" />\\n    <OrganizationProfile.Page label=\\\"general\\\" />\\n  </OrganizationProfile>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining the createEmailLinkFlow Method Signature in TypeScript\nDESCRIPTION: This TypeScript function signature defines the `createEmailLinkFlow` method for the Clerk `SignIn` object. It takes no arguments and returns an object containing two functions: `startEmailLinkFlow` (to initiate the email link verification) and `cancelEmailLinkFlow` (to stop the process). This provides fine-grained control over the email link authentication flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailLinkFlow(): {\n  startEmailLinkFlow: (params: SignInStartEmailLinkFlowParams) => Promise<SignIn>\n  cancelEmailLinkFlow: () => void\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Authentication Data in Node.js/Express with @clerk/clerk-sdk-node\nDESCRIPTION: Demonstrates using the `clerkClient.expressRequireAuth()` middleware from `@clerk/clerk-sdk-node` within an Express (or similar) router to protect a route and access authentication data via `req.auth`. The `req.auth` object contains session claims, relevant to the discussion about the removed `orgs` claim in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Nginx for Clerk Proxy\nDESCRIPTION: Nginx configuration for proxying requests to Clerk's Frontend API. It sets up a location block to handle requests to /__clerk/ and forwards them to the Clerk API with the necessary headers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_0\n\nLANGUAGE: nginx\nCODE:\n```\nhttp {\n  # ...\n  server {\n    # ...\n    location /__clerk/ {\n      rewrite          ^/__clerk/(.*)$ /$1 break;\n      proxy_pass       https://frontend-api.clerk.dev;\n      proxy_set_header Clerk-Proxy-Url https://app.dev/__clerk;\n      proxy_set_header Clerk-Secret-Key sk_live_***;\n      proxy_set_header X-Forwarded-For $remote_addr;\n      proxy_redirect   off;\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Organization List Pagination in React\nDESCRIPTION: Examples of how to fetch and paginate organization memberships using the useOrganizationList hook with different configuration options, from basic implementation to customized pagination settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n// userMemberships.data will never be populated\nconst { userMemberships } = useOrganizationList()\n\n// Use default values to fetch userMemberships, such as initialPage = 1 and pageSize = 10\nconst { userMemberships } = useOrganizationList({\n  userMemberships: true,\n})\n\n// Pass your own values to fetch userMemberships\nconst { userMemberships } = useOrganizationList({\n  userMemberships: {\n    pageSize: 20,\n    initialPage: 2, // skips the first page\n  },\n})\n\n// Aggregate pages in order to render an infinite list\nconst { userMemberships } = useOrganizationList({\n  userMemberships: {\n    infinite: true,\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Scaffolding a Vanilla JavaScript Vite Project (Bash)\nDESCRIPTION: Demonstrates commands using different package managers (npm, yarn, pnpm, bun) to create a new Vanilla JavaScript project using Vite, navigate into the project directory, install dependencies, and start the development server. This is the initial setup step when using the NPM module approach.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm create vite@latest clerk-javascript\ncd clerk-javascript\nnpm install\nnpm run dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn create vite clerk-javascript\ncd clerk-javascript\nyarn install\nyarn dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm create vite clerk-javascript\ncd clerk-javascript\npnpm install\npnpm dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun create vite clerk-javascript\ncd clerk-javascript\nbun install\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Deleting User with Clerk Backend SDK (TypeScript)\nDESCRIPTION: Demonstrates how to delete a user within an asynchronous function, likely an API route handler, using the `deleteUser` method from the `users` sub-api of the `clerkClient` instance. It includes basic error handling and returns a JSON response indicating success or failure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/deleting-users.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function DELETE() {\n  const userId = 'user_123'\n\n  try {\n    await clerkClient.users.deleteUser(userId)\n    return Response.json({ message: 'User deleted' })\n  } catch (error) {\n    console.log(error)\n    return Response.json({ error: 'Error deleting user' })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Data with useUser() Hook in React TSX\nDESCRIPTION: This component uses Clerk's useUser() hook to access the current user's data. It handles three states: loading (when user data is being fetched), unauthenticated (when no user is signed in), and authenticated (when a user is signed in). When authenticated, it displays a personalized greeting using the user's first name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/use-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function Example() {\n  const { isSignedIn, user, isLoaded } = useUser()\n\n  if (!isLoaded) {\n    return <div>Loading...</div>\n  }\n\n  if (!isSignedIn) {\n    return <div>Sign in to view this page</div>\n  }\n\n  return <div>Hello {user.firstName}!</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Vue CreateOrganization Implementation\nDESCRIPTION: Implementation of the CreateOrganization component in Vue.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { CreateOrganization } from '@clerk/vue'\n</script>\n\n<template>\n  <CreateOrganization />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Loading ClerkJS Client Environment - JavaScript Usage Example\nDESCRIPTION: Provides an example in JavaScript of asynchronously initializing the Clerk client by calling `clerk.load()`. Ensures the Clerk environment and configuration are prepared prior to other authentication flows. The `clerk` object must be previously imported and available in scope.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.load()\n```\n\n----------------------------------------\n\nTITLE: Updating Session Activity Timestamp with touch() in TypeScript\nDESCRIPTION: Defines the signature of the touch function for Clerk's Session API in TypeScript, which updates the session's last active time. Requires the Session type and Clerk client to be available. The function returns a Promise resolving to the updated Session object. Used to indicate ongoing user activity and should be invoked periodically to prevent session timeout.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction touch(): Promise<Session>\n```\n\n----------------------------------------\n\nTITLE: Configuring Localization in Astro Integration (JavaScript)\nDESCRIPTION: Demonstrates configuring Clerk localization within an Astro project using the official Clerk integration. Import the desired locale object (e.g., `frFR` for French) in `astro.config.mjs` and provide it to the `localization` option within the `clerk()` integration settings object. This ensures Clerk components rendered within the Astro site use the specified language.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'astro.config.mjs', mark: [2, 3, 8] }}\nimport clerk from '@clerk/astro'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      localization: frFR,\n    }),\n  ],\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Creating Auth Routes Layout (TypeScript/TSX)\nDESCRIPTION: Defines a layout component for authentication routes (within an `(auth)` group). It uses the `useAuth` hook from `@clerk/clerk-expo` to check if the user is already signed in. If signed in, it redirects the user to the home page (`/`); otherwise, it renders the nested routes using `Stack` from `expo-router`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Redirect, Stack } from 'expo-router'\nimport { useAuth } from '@clerk/clerk-expo'\n\nexport default function AuthRoutesLayout() {\n  const { isSignedIn } = useAuth()\n\n  if (isSignedIn) {\n    return <Redirect href={'/'} />\n  }\n\n  return <Stack />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing MFA Sign-In View in SwiftUI with Clerk\nDESCRIPTION: This Swift code defines a SwiftUI `View` (`MFASignInView`) for handling multi-factor authentication using the Clerk Swift SDK. It manages state variables for email, password, verification code, and UI flow control (`displayTOTP`). The `submit` function initiates the sign-in process with email/password using `SignIn.create`. If the status is `needsSecondFactor`, it updates the UI to show the code input field. The `verify` function (partially shown) is intended to handle the second-factor verification step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_10\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct MFASignInView: View {\n  @State private var email = \"\"\n  @State private var password = \"\"\n  @State private var code = \"\"\n  @State private var displayTOTP = false\n\n  var body: some View {\n    if displayTOTP {\n      TextField(\"Code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verify(code: code) }\n      }\n    } else {\n      TextField(\"Email\", text: $email)\n      SecureField(\"Password\", text: $password)\n      Button(\"Next\") {\n        Task { await submit(email: email, password: password) }\n      }\n    }\n  }\n}\n\nextension MFASignInView {\n\n  func submit(email: String, password: String) async {\n    do {\n      // Start the sign-in process.\n      let signIn = try await SignIn.create(strategy: .identifier(email, password: password))\n\n      switch signIn.status {\n      case .needsSecondFactor:\n        // Handle user submitting email and password and swapping to TOTP form.\n        displayTOTP = true\n      default:\n        // If the status is not needsSecondFactor, check why. User may need to\n        // complete different steps.\n        dump(signIn.status)\n      }\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n\n  func verify(code: String) async {\n    do {\n      // Access the in progress sign in stored on the client object.\n```\n\n----------------------------------------\n\nTITLE: Replacing auth().protect() with auth.protect() - Diff\nDESCRIPTION: This snippet migrates from calling protect() on the auth() result to calling it directly as a method of the imported auth object. The usage is updated to async and awaits auth.protect(). This streamlines the protection of server components or routes using Clerk in Next.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_4\n\nLANGUAGE: diff\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\n- export default function Page() {\n-   auth().protect()\n+ export default async function Page() {\n+   await auth.protect()\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing and Using Clerk SDK in Ruby\nDESCRIPTION: Demonstrates how to instantiate a Clerk::SDK instance and perform common user management operations including creating users, listing users, and managing user account locks. Shows basic CRUD operations using the Ruby SDK wrapper around Clerk's Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ruby.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\nsdk = Clerk::SDK.new\n\ncreate_user_request = Clerk::SDK::CreateUserRequest.new(\n  first_name: \"John\",\n  last_name: \"Doe\",\n  email_address: [\"john.doe@example.com\"],\n  password: \"password\"\n)\n\n# Create a user\nsdk.users.create(create_user_request)\n\n# List all users and ensure the user was created\nsdk.users.get_user_list\n\n# Get the first user created in your instance\nuser = sdk.users.get_user_list(limit: 1).first\n\n# Use the user's ID to lock the user\nsdk.users.lock_user(user[\"id\"])\n\n# Then, unlock the user so they can sign in again\nsdk.users.unlock_user(user[\"id\"])\n```\n\n----------------------------------------\n\nTITLE: Switching Between Sessions in JavaScript with Clerk\nDESCRIPTION: This JavaScript code demonstrates how to retrieve available sessions and switch between them using the Clerk object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n// You can get all the available sessions through the client\nconst availableSessions = window.Clerk.client.sessions\n\n// Use setActive to set the active session.\nwindow.Clerk.setActive({ session: availableSessions[0].id })\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Variables in Astro Config - JavaScript\nDESCRIPTION: Configures the Clerk integration for Astro by specifying a `variables` object inside the `appearance` property in the Astro config file. Requires the `@clerk/astro` integration and usage within the exported config. The colors defined are globally passed to all Clerk components through the integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Initiating Phone Number Verification in Clerk using TypeScript\nDESCRIPTION: This function initiates the sign-up verification process using a one-time code sent via SMS. It acts as a convenience wrapper around `SignUp.prepareVerification({ strategy: 'phone_code' })`. It accepts optional parameters (`PreparePhoneNumberVerificationParams`) which currently only support the 'phone_code' strategy. The function returns a Promise that resolves with the updated `SignUpResource`. The verification may fail if the phone number is invalid, unreachable, or already verified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nfunction preparePhoneNumberVerification(\n  params?: PreparePhoneNumberVerificationParams,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Creating an Inngest Function to Sync New Clerk Users in TypeScript\nDESCRIPTION: This snippet demonstrates how to define an Inngest function using `inngest.createFunction` in TypeScript. The function is triggered by the 'clerk/user.created' event. It extracts user details (ID, name, primary email) from the event payload and inserts them into a database using a hypothetical `database.users.insert` method. The event payload's `data` field directly corresponds to the Clerk User JSON object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/inngest.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst syncUser = inngest.createFunction(\n  { id: 'sync-user-from-clerk' }, // ←The 'id' is an arbitrary string used to identify the function in the dashboard\n  { event: 'clerk/user.created' }, // ← This is the function's triggering event\n  async ({ event }) => {\n    const user = event.data // The event payload's data will be the Clerk User json object\n    const { id, first_name, last_name } = user\n    const email = user.email_addresses.find(\n      (e) => e.id === user.primary_email_address_id,\n    ).email_address\n    await database.users.insert({ id, email, first_name, last_name })\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Configuring clerkMiddleware for Organization Activation - Clerk - TypeScript\nDESCRIPTION: Shows how to use Clerk's Next.js server middleware to activate the appropriate organization or personal account based on URL patterns. It configures organizationSyncOptions with organizationPatterns and personalAccountPatterns to match organization and personal account routes. Requires setup of @clerk/nextjs/server and changes in Next.js middleware configuration. Inputs are URL patterns; the output is automatic adjustment of the active organization state in Clerk's session management. Limitations include leaving the active organization unchanged if the slug is invalid or the user isn't a member.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(\n  (auth, req) => {\n    // Add your middleware checks\n  },\n  {\n    organizationSyncOptions: {\n      organizationPatterns: [\n        '/orgs/:slug', // Match the org slug\n        '/orgs/:slug/(.*)', // Wildcard match for optional trailing path segments\n      ],\n      personalAccountPatterns: [\n        '/me', // Match the personal account\n        '/me/(.*)', // Wildcard match for optional trailing path segments\n      ],\n    },\n  },\n)\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Implementation of Clerk Sign-in\nDESCRIPTION: Vanilla JavaScript implementation of Clerk sign-in with error handling and user session management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/error-handling.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('signed-in').innerHTML = `\n      <div id=\"user-button\"></div>\n    `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  document.getElementById('sign-in-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const emailAddress = formData.get('email')\n    const password = formData.get('password')\n\n    try {\n      const signInAttempt = await clerk.client.signIn.create({\n        identifier: emailAddress,\n        password,\n      })\n\n      if (signInAttempt.status === 'complete') {\n        await clerk.setActive({ session: signInAttempt.createdSessionId })\n\n        location.reload()\n      } else {\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (error) {\n      if (isClerkAPIResponseError(err)) {\n        const errors = err.errors\n        document.getElementById('error').textContent = errors[0].longMessage\n      }\n      console.error(JSON.stringify(err, null, 2))\n    }\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication UI Controls (TSX)\nDESCRIPTION: Demonstrates using Clerk's control components (`<SignedIn>`, `<SignedOut>`) and UI components (`<UserButton>`, `<SignInButton>`) to conditionally render UI elements based on the user's authentication state within the popup. `<SignedOut>` renders a sign-in button, while `<SignedIn>` renders a user button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignInButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/chrome-extension'\nimport { CountButton } from '~features/count-button'\n\nimport '~style.css'\n\nconst PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')\n}\n\nfunction IndexPopup() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <div className=\"plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-[600px] plasmo-w-[800px] plasmo-flex plasmo-flex-col\">\n        <header className=\"plasmo-w-full\">\n          <SignedOut>\n            <SignInButton mode=\"modal\" />\n          </SignedOut>\n          <SignedIn>\n            <UserButton />\n          </SignedIn>\n        </header>\n        <main className=\"plasmo-grow\">\n          <CountButton />\n        </main>\n      </div>\n    </ClerkProvider>\n  )\n}\n\nexport default IndexPopup\n```\n\n----------------------------------------\n\nTITLE: Importing Clerk Publishable Key\nDESCRIPTION: Importing and validating the Clerk Publishable Key in the main application file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/vue.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createApp } from 'vue'\nimport './style.css'\nimport App from './App.vue'\n\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\ncreateApp(App).mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Cached JWK Session Verification in Go using Clerk\nDESCRIPTION: Implementation showing how to cache JSON Web Keys for optimized session verification. Includes a JWK store interface and demonstrates proper key management and verification flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/verifying-sessions.mdx#2025-04-23_snippet_2\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"fmt\"\n\t\"net/http\"\n\t\"strings\"\n\n\t\"github.com/clerk/clerk-sdk-go/v2\"\n\t\"github.com/clerk/clerk-sdk-go/v2/jwks\"\n\t\"github.com/clerk/clerk-sdk-go/v2/jwt\"\n\t\"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\nfunc main() {\n\tmux := http.NewServeMux()\n\tmux.HandleFunc(\"/\", publicRoute)\n\n\tjwkStore := NewJWKStore()\n\n\tconfig := &clerk.ClientConfig{}\n\tconfig.Key = clerk.String(\"{{secret}}\")\n\tjwksClient := jwks.NewClient(config)\n\tmux.HandleFunc(\"/protected\", protectedRoute(jwksClient, jwkStore))\n\n\thttp.ListenAndServe(\":3000\", mux)\n}\n\nfunc publicRoute(w http.ResponseWriter, r *http.Request) {\n\tw.Write([]byte(`{\"access\": \"public\"}`))}\n\nfunc protectedRoute(jwksClient *jwks.Client, store JWKStore) func(http.ResponseWriter, *http.Request) {\n\treturn func(w http.ResponseWriter, r *http.Request) {\n\t\tsessionToken := strings.TrimPrefix(r.Header.Get(\"Authorization\"), \"Bearer \")\n\n\t\tjwk := store.GetJWK()\n\t\tif jwk == nil {\n\t\t\tunsafeClaims, err := jwt.Decode(r.Context(), &jwt.DecodeParams{\n\t\t\t\tToken: sessionToken,\n\t\t\t})\n\t\t\tif err != nil {\n\t\t\t\tw.WriteHeader(http.StatusUnauthorized)\n\t\t\t\tw.Write([]byte(`{\"access\": \"unauthorized\"}`))    return\n\t\t\t}\n\n\t\t\tjwk, err = jwt.GetJSONWebKey(r.Context(), &jwt.GetJSONWebKeyParams{\n\t\t\t\tKeyID:      unsafeClaims.KeyID,\n\t\t\t\tJWKSClient: jwksClient,\n\t\t\t})\n\t\t\tif err != nil {\n\t\t\t\tw.WriteHeader(http.StatusUnauthorized)\n\t\t\t\tw.Write([]byte(`{\"access\": \"unauthorized\"}`))    return\n\t\t\t}\n\t\t}\n\t\tstore.SetJWK(jwk)\n\n\t\tclaims, err := jwt.Verify(r.Context(), &jwt.VerifyParams{\n\t\t\tToken: sessionToken,\n\t\t\tJWK:   jwk,\n\t\t})\n\t\tif err != nil {\n\t\t\tw.WriteHeader(http.StatusUnauthorized)\n\t\t\tw.Write([]byte(`{\"access\": \"unauthorized\"}`))    return\n\t\t}\n\n\t\tusr, err := user.Get(r.Context(), claims.Subject)\n\t\tif err != nil {\n\t\t\t// handle the error\n\t\t}\n\t\tfmt.Fprintf(w, `{\"user_id\": \"%s\", \"user_banned\": \"%t\"}`, usr.ID, usr.Banned)\n\t}\n}\n\ntype JWKStore interface {\n\tGetJWK() *clerk.JSONWebKey\n\tSetJWK(*clerk.JSONWebKey)\n}\n\nfunc NewJWKStore() JWKStore {\n\treturn nil\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from withAuth to req.auth with clerkMiddleware - Express & Clerk - TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates migrating from the legacy withAuth wrapper to using the req.auth object in route handlers, after integrating clerkMiddleware in the Express middleware chain. It compares old and new approaches, showing imports, middleware setup, and endpoint definitions. Dependencies include Express, @clerk/express, and TypeScript; inputs are HTTP requests with authentication, outputting the authentication state as JSON.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { withAuth } from '@clerk/clerk-sdk-node'\nimport { clerkMiddleware } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst port = 3000\n\napp.use(clerkMiddleware())\n\napp.get(\n  '/auth-state',\n  withAuth((req, res) => res.json(req.auth)),\n)\napp.get('/auth-state', (req, res) => {\n  const authState = req.auth\n  return res.json(authState)\n})\n\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk API Keys in .env file\nDESCRIPTION: Environment variables configuration to set the Clerk API keys needed for authentication in a Next.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in Remix\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationProfile } from '@clerk/remix'\n\nexport default function OrganizationProfilePage() {\n  return <OrganizationProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes using App Router - Next.js - TypeScript/TSX\nDESCRIPTION: Demonstrates how to stack multiple Clerk themes (Dark and Neobrutalism) using the App Router in a Next.js project. Dependencies include @clerk/nextjs and @clerk/themes. The baseTheme array is set in the appearance prop, ensuring the Neobrutalism styles override the Dark theme where they overlap. Expects children as a ReactNode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { dark, neobrutalism } from '@clerk/themes'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: [dark, neobrutalism],\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification for User Email Updates with Prebuilt UI in React\nDESCRIPTION: This snippet demonstrates how to use useReverification() hook with Clerk's prebuilt UI to require users to reverify credentials before updating their primary email address. It shows how to handle user cancellation and other errors during the reverification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useReverification, useUser } from '@clerk/clerk-react'\nimport { isClerkRuntimeError, isReverificationCancelledError } from '@clerk/clerk-react/errors'\n\nexport function UpdateUserEmail() {\n  // Use `useUser()` to get the current user's `User` object\n  // `User` includes the `update()` method to update the user's primary email address\n  const { user } = useUser()\n\n  // Use `useReverification()` to enhance the `update()` method\n  // to handle the reverification process\n  const changePrimaryEmail = useReverification((emailAddressId: string) =>\n    user?.update({ primaryEmailAddressId: emailAddressId }),\n  )\n\n  const handleClick = async (emailAddressId: string) => {\n    try {\n      await changePrimaryEmail(emailAddressId)\n    } catch (e) {\n      // Handle if user cancels the reverification process\n      if (isClerkRuntimeError(e) && isReverificationCancelledError(e)) {\n        console.error('User cancelled reverification', e.code)\n      }\n\n      // Handle other errors\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(e, null, 2))\n    }\n  }\n\n  return (\n    <div>\n      <span>Your primary email address is {user?.primaryEmailAddress?.emailAddress}</span>\n\n      <ul>\n        {user?.emailAddresses.map((email) => (\n          <li key={email.id}>\n            <span>{email.emailAddress}</span>\n            {email.emailAddress !== user?.primaryEmailAddress?.emailAddress && (\n              <button onClick={() => handleClick(email.id)}>Make primary</button>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Sessions.getSessionList\nDESCRIPTION: Shows the changes to pagination parameters in Sessions.getSessionList method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await sessions.getSessionList({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing WithSession HOC with React Hooks in Clerk\nDESCRIPTION: Example code showing how to recreate the removed WithSession higher order component using Clerk's custom hooks. It leverages the useSession hook to provide session data to child components through a render prop pattern.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_50\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithSession = ({ children }) => {\n  const session = useSession()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(session)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-In Email Link Verification in Next.js with Clerk\nDESCRIPTION: This component handles the verification of the email link for sign-in. It uses Clerk's useClerk hook to access the handleEmailLinkVerification method and manages different verification statuses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useClerk } from '@clerk/nextjs'\nimport { EmailLinkErrorCodeStatus, isEmailLinkError } from '@clerk/nextjs/errors'\nimport Link from 'next/link'\n\nexport default function VerifyEmailLink() {\n  const [verificationStatus, setVerificationStatus] = React.useState('loading')\n\n  const { handleEmailLinkVerification, loaded } = useClerk()\n\n  async function verify() {\n    try {\n      // Dynamically set the host domain for dev and prod\n      // You could instead use an environment variable or other source for the host domain\n      const protocol = window.location.protocol\n      const host = window.location.host\n\n      await handleEmailLinkVerification({\n        // URL to navigate to if sign-in flow needs more requirements, such as MFA\n        redirectUrl: `${protocol}//${host}/sign-in`,\n      })\n\n      // If not redirected at this point,\n      // the flow has completed\n      setVerificationStatus('verified')\n    } catch (err: any) {\n      let status = 'failed'\n\n      if (isEmailLinkError(err)) {\n        // If link expired, set status to expired\n        if (err.code === EmailLinkErrorCodeStatus.Expired) {\n          status = 'expired'\n        } else if (err.code === EmailLinkErrorCodeStatus.ClientMismatch) {\n          // OPTIONAL: This check is only required if you have\n          // the 'Require the same device and browser' setting\n          // enabled in the Clerk Dashboard\n          status = 'client_mismatch'\n        }\n      }\n\n      setVerificationStatus(status)\n      return\n    }\n  }\n\n  React.useEffect(() => {\n    if (!loaded) return\n\n    verify()\n  }, [loaded])\n\n  if (verificationStatus === 'loading') {\n    return <div>Loading...</div>\n  }\n\n  if (verificationStatus === 'failed') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link verification failed.</p>\n        <Link href=\"/sign-in\">Sign in</Link>\n      </div>\n    )\n  }\n\n  if (verificationStatus === 'expired') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link has expired.</p>\n        <Link href=\"/sign-in\">Sign in</Link>\n      </div>\n    )\n  }\n\n  if (verificationStatus === 'client_mismatch') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>\n          You must complete the email link sign-in on the same device and browser that you started\n          it on.\n        </p>\n        <Link href=\"/sign-in\">Sign in</Link>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>Successfully signed in. Return to the original tab to continue.</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current User in Client Components - Server Action\nDESCRIPTION: This snippet demonstrates how to create a server action that accesses the current user data using Clerk's currentUser() helper. It shows retrieving user information for use in client components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n'use server'\nimport { currentUser } from '@clerk/nextjs/server'\n\nexport async function addHobby(formData: FormData) {\n  const user = await currentUser()\n\n  if (!user) {\n    throw new Error('You must be signed in to use this feature')\n  }\n\n  const serverData = {\n    usersHobby: formData.get('hobby'),\n    userId: user.id,\n    profileImage: user.imageUrl,\n  }\n\n  console.log('add Hobby completed with user details ', serverData)\n}\n```\n\n----------------------------------------\n\nTITLE: Using Strategy Component in Clerk Elements Sign-up Flow\nDESCRIPTION: This snippet demonstrates how to use the Strategy component to conditionally render authentication steps based on the required verification method. It shows an example for email code verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Strategy name=\"email_code\">\n  <Clerk.Field name=\"code\">\n    <Clerk.Label>Code</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n\n  <SignUp.Action submit>Verify</SignUp.Action>\n</SignUp.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Role-based Authorization with <Protect> in Next.js\nDESCRIPTION: This snippet demonstrates role-based authorization using the <Protect> component in a Next.js React Server Component. It checks if the user has either the 'org:admin' or 'org:billing_manager' role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Protect } from '@clerk/nextjs'\n\nexport default function Page() {\n  return (\n    <Protect\n      condition={(has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })}\n    >\n      <p>Admin settings</p>\n    </Protect>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Client-side Supabase Integration with Clerk\nDESCRIPTION: React component that demonstrates client-side integration of Supabase with Clerk authentication. It creates a custom Supabase client that injects the Clerk session token into request headers for authenticated API calls.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useEffect, useState } from 'react'\nimport { useSession, useUser } from '@clerk/nextjs'\nimport { createClient } from '@supabase/supabase-js'\n\nexport default function Home() {\n  const [tasks, setTasks] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [name, setName] = useState('')\n  // The `useUser()` hook is used to ensure that Clerk has loaded data about the signed in user\n  const { user } = useUser()\n  // The `useSession()` hook is used to get the Clerk session object\n  // The session object is used to get the Clerk session token\n  const { session } = useSession()\n\n  // Create a custom Supabase client that injects the Clerk session token into the request headers\n  function createClerkSupabaseClient() {\n    return createClient(\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\n      process.env.NEXT_PUBLIC_SUPABASE_KEY!,\n      {\n        async accessToken() {\n          return session?.getToken() ?? null\n        },\n      },\n    )\n  }\n\n  // Create a `client` object for accessing Supabase data using the Clerk token\n  const client = createClerkSupabaseClient()\n\n  // This `useEffect` will wait for the User object to be loaded before requesting\n  // the tasks for the signed in user\n  useEffect(() => {\n    if (!user) return\n\n    async function loadTasks() {\n      setLoading(true)\n      const { data, error } = await client.from('tasks').select()\n      if (!error) setTasks(data)\n      setLoading(false)\n    }\n\n    loadTasks()\n  }, [user])\n\n  async function createTask(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    // Insert task into the \"tasks\" database\n    await client.from('tasks').insert({\n      name,\n    })\n    window.location.reload()\n  }\n\n  return (\n    <div>\n      <h1>Tasks</h1>\n\n      {loading && <p>Loading...</p>}\n\n      {!loading && tasks.length > 0 && tasks.map((task: any) => <p key={task.id}>{task.name}</p>)}\n\n      {!loading && tasks.length === 0 && <p>No tasks found</p>}\n\n      <form onSubmit={createTask}>\n        <input\n          autoFocus\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Enter new task\"\n          onChange={(e) => setName(e.target.value)}\n          value={name}\n        />\n        <button type=\"submit\">Add</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Multiple Groups of Routes in Next.js\nDESCRIPTION: Example of protecting multiple groups of routes with different authorization requirements. This middleware uses multiple createRouteMatcher() instances to define tenant routes and admin routes with distinct access controls.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isTenantRoute = createRouteMatcher(['/organization-selector(.*)', '/orgid/(.*)'])\n\nconst isTenantAdminRoute = createRouteMatcher(['/orgId/(.*)/memberships', '/orgId/(.*)/domain'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  // Restrict admin routes to users with specific permissions\n  if (isTenantAdminRoute(req)) {\n    await auth.protect((has) => {\n      return has({ permission: 'org:admin:example1' }) || has({ permission: 'org:admin:example2' })\n    })\n  }\n  // Restrict organization routes to signed in users\n  if (isTenantRoute(req)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Managing SMS MFA Settings in Next.js with Clerk\nDESCRIPTION: This code snippet defines a React component for managing SMS-based multi-factor authentication settings. It includes functionality to display and manage phone numbers reserved for MFA, handle available phone numbers, and generate backup codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-sms-based-mfa.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { BackupCodeResource, PhoneNumberResource } from '@clerk/types'\nimport Link from 'next/link'\n\n// Display phone numbers reserved for MFA\nconst ManageMfaPhoneNumbers = () => {\n  const { user } = useUser()\n\n  if (!user) return null\n\n  // Check if any phone numbers are reserved for MFA\n  const mfaPhones = user.phoneNumbers\n    .filter((ph) => ph.verification.status === 'verified')\n    .filter((ph) => ph.reservedForSecondFactor)\n    .sort((ph: PhoneNumberResource) => (ph.defaultSecondFactor ? -1 : 1))\n\n  if (mfaPhones.length === 0) {\n    return <p>There are currently no phone numbers reserved for MFA.</p>\n  }\n\n  return (\n    <>\n      <h2>Phone numbers reserved for MFA</h2>\n      <ul>\n        {mfaPhones.map((phone) => {\n          return (\n            <li key={phone.id} style={{ display: 'flex', gap: '10px' }}>\n              <p>\n                {phone.phoneNumber} {phone.defaultSecondFactor && '(Default)'}\n              </p>\n              <div>\n                <button onClick={() => phone.setReservedForSecondFactor({ reserved: false })}>\n                  Disable for MFA\n                </button>\n              </div>\n\n              {!phone.defaultSecondFactor && (\n                <div>\n                  <button onClick={() => phone.makeDefaultSecondFactor()}>Make default</button>\n                </div>\n              )}\n\n              <div>\n                <button onClick={() => phone.destroy()}>Remove from account</button>\n              </div>\n            </li>\n          )\n        })}\n      </ul>\n    </>\n  )\n}\n\n// Display phone numbers that are not reserved for MFA\nconst ManageAvailablePhoneNumbers = () => {\n  const { user } = useUser()\n  const setReservedForSecondFactor = useReverification((phone: PhoneNumberResource) =>\n    phone.setReservedForSecondFactor({ reserved: true }),\n  )\n  const destroyPhone = useReverification((phone: PhoneNumberResource) => phone.destroy())\n\n  if (!user) return null\n\n  // Check if any phone numbers aren't reserved for MFA\n  const availableForMfaPhones = user.phoneNumbers\n    .filter((ph) => ph.verification.status === 'verified')\n    .filter((ph) => !ph.reservedForSecondFactor)\n\n  // Reserve a phone number for MFA\n  const reservePhoneForMfa = async (phone: PhoneNumberResource) => {\n    // Set the phone number as reserved for MFA\n    await setReservedForSecondFactor(phone)\n    // Refresh the user information to reflect changes\n    await user.reload()\n  }\n\n  if (availableForMfaPhones.length === 0) {\n    return <p>There are currently no verified phone numbers available to be reserved for MFA.</p>\n  }\n\n  return (\n    <>\n      <h2>Phone numbers that are not reserved for MFA</h2>\n\n      <ul>\n        {availableForMfaPhones.map((phone) => {\n          return (\n            <li key={phone.id} style={{ display: 'flex', gap: '10px' }}>\n              <p>{phone.phoneNumber}</p>\n              <div>\n                <button onClick={() => reservePhoneForMfa(phone)}>Use for MFA</button>\n              </div>\n              <div>\n                <button onClick={() => destroyPhone()}>Remove from account</button>\n              </div>\n            </li>\n          )\n        })}\n      </ul>\n    </>\n  )\n}\n\n// Generate and display backup codes\nfunction GenerateBackupCodes() {\n  const { user } = useUser()\n  const [backupCodes, setBackupCodes] = React.useState<BackupCodeResource | undefined>(undefined)\n  const createBackupCode = useReverification(() => user?.createBackupCode())\n\n  const [loading, setLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    if (backupCodes) {\n      return\n    }\n\n    setLoading(true)\n    void createBackupCode()\n      .then((backupCode: BackupCodeResource) => {\n        setBackupCodes(backupCode)\n        setLoading(false)\n      })\n      .catch((err) => {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2))\n        setLoading(false)\n      })\n  }, [])\n\n  if (loading) {\n    return <p>Loading...</p>\n  }\n\n  if (!backupCodes) {\n    return <p>There was a problem generating backup codes</p>\n  }\n\n  return (\n    <ol>\n      {backupCodes.codes.map((code, index) => (\n        <li key={index}>{code}</li>\n      ))}\n    </ol>\n  )\n}\n\nexport default function ManageSMSMFA() {\n  const [showBackupCodes, setShowBackupCodes] = React.useState(false)\n\n  const { isLoaded, user } = useUser()\n\n  if (!isLoaded) return null\n\n  if (!user) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  return (\n    <>\n      <h1>User MFA Settings</h1>\n\n      {/* Manage SMS MFA */}\n      <ManageMfaPhoneNumbers />\n      <ManageAvailablePhoneNumbers />\n      <Link href=\"/account/add-phone\">Add a new phone number</Link>\n\n      {/* Manage backup codes */}\n      {user.twoFactorEnabled && (\n        <div>\n          <p>\n            Generate new backup codes? -{' '}\n            <button onClick={() => setShowBackupCodes(true)}>Generate</button>\n          </p>\n        </div>\n      )}\n      {showBackupCodes && (\n        <>\n          <GenerateBackupCodes />\n          <button onClick={() => setShowBackupCodes(false)}>Done</button>\n        </>\n      )}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk `auth().has()` for Server-Side Permission Checks in Next.js Layout (TypeScript)\nDESCRIPTION: Demonstrates using the `auth` function and its `has()` method from `@clerk/nextjs/server` within a Next.js React Server Component Layout (`layout.tsx`). It checks for the `org:team_settings:read` permission and returns `null` if the user is unauthorized, allowing custom response logic. A warning highlights potential caching issues with layouts and auth checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { PropsWithChildren } from 'react'\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function SettingsLayout(props: PropsWithChildren) {\n  const { has } = await auth()\n\n  // Check if the user is authorized\n  const canAccessSettings = has({ permission: 'org:team_settings:read' })\n\n  // If has() returns false, the user does not have the correct permissions\n  // You can choose how your app responds. This example returns null.\n  if (!canAccessSettings) return null\n\n  return props.children\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk Middleware in Express\nDESCRIPTION: Demonstrates how to use the clerkMiddleware() function to check for session JWT and attach Auth object to the request. It shows both default usage and usage with options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/express/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/express'\n\nconst app = express()\n\n// Pass no parameters\napp.use(clerkMiddleware())\n\n// Pass options\napp.use(clerkMiddleware(options))\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Sign-In Screen (TypeScript/TSX - Partial)\nDESCRIPTION: Starts the implementation of a sign-in screen component using React Native elements and the `useSignIn` hook from `@clerk/clerk-expo`. This partial snippet sets up the necessary imports, state variables (like `emailAddress`), and hooks (`useSignIn`, `useRouter`) to handle user login with email and password.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSignIn } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\nimport { Text, TextInput, TouchableOpacity, View } from 'react-native'\nimport React from 'react'\n\nexport default function Page() {\n  const { signIn, setActive, isLoaded } = useSignIn()\n  const router = useRouter()\n\n  const [emailAddress, setEmailAddress] = React.useState('')\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk API Keys in .env File - Env\nDESCRIPTION: This code sample sets environment variables for the Clerk publishable and secret keys in your .env file, which are required for Clerk to authenticate users and manage sessions. Replace the placeholders with actual keys from the Clerk Dashboard. These variables are referenced throughout the project at runtime; ensure your app environment supports .env files.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nPUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Creating a Sign-In Page with Clerk in Next.js\nDESCRIPTION: Implementation of a sign-in page using Clerk's SignIn component with Next.js App Router routing conventions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Action Components in Clerk Elements Sign-up Flow\nDESCRIPTION: This code snippet showcases various uses of the Action component in a sign-up flow, including submit actions, navigation between steps, and resending verification codes with fallback content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"verifications\">\n  <SignUp.Strategy name=\"email_code\">\n    <Clerk.Field name=\"code\">\n      <Clerk.Label>Code</Clerk.Label>\n      <Clerk.Input />\n      <Clerk.FieldError />\n    </Clerk.Field>\n\n    <SignUp.Action submit>Verify</SignUp.Action>\n    <SignUp.Action\n      resend\n      fallback={({ resendableAfter }) => <p>Resend code in {resendableAfter} second(s)</p>}\n    >\n      Resend code\n    </SignUp.Action>\n  </SignUp.Strategy>\n</SignUp.Step>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Sign-Up URLs with Environment Variables - Env\nDESCRIPTION: Defines the environment variables required for Clerk's redirect behavior in SSR mode. 'CLERK_SIGN_UP_URL' sets the hosted path for the sign-up component, while the two fallback URLs handle direct visits and navigation between sign-up/sign-in. Must be set in the .env file before starting the app, and values should match the respective routes in Remix.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nCLERK_SIGN_UP_URL=/sign-up\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\n\n```\n\n----------------------------------------\n\nTITLE: Retrieving OAuth Access Token and Fetching Notion User Data in Next.js\nDESCRIPTION: This snippet demonstrates how to retrieve an OAuth access token for a user and use it to fetch user data from the Notion API. It uses Clerk's Backend SDK in a Next.js App Router environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, clerkClient } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nexport async function GET() {\n  const { userId } = await auth()\n\n  if (!userId) {\n    return NextResponse.json({ message: 'User not found' })\n  }\n\n  // Get the OAuth access token for the user\n  const provider = 'notion'\n\n  const client = await clerkClient()\n\n  const clerkResponse = await client.users.getUserOauthAccessToken(userId, provider)\n\n  const accessToken = clerkResponse[0].token || ''\n\n  if (!accessToken) {\n    return NextResponse.json({ message: 'Access token not found' }, { status: 401 })\n  }\n\n  // Fetch the user data from the Notion API\n  // This endpoint fetches a list of users\n  // https://developers.notion.com/reference/get-users\n  const notionUrl = 'https://api.notion.com/v1/users'\n\n  const notionResponse = await fetch(notionUrl, {\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n      'Notion-Version': '2022-06-28',\n    },\n  })\n\n  // Handle the response from the Notion API\n  const notionData = await notionResponse.json()\n\n  return NextResponse.json({ message: notionData })\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk SignUp Component in TanStack React Start Route (TSX)\nDESCRIPTION: This snippet demonstrates how to create a dedicated sign-up route in a TanStack React Start application using TanStack Router. It imports the `SignUp` component from `@clerk/tanstack-react-start` and uses `createFileRoute` to define a catch-all route at `/sign-up/$`. The `Page` component then renders the Clerk `SignUp` component, providing a dedicated user interface for registration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes/sign-up.$.tsx' }}\nimport { SignUp } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-up/$')({\n  component: Page,\n})\n\nfunction Page() {\n  return <SignUp />\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Protecting Astro Endpoints with Clerk Authentication\nDESCRIPTION: Demonstrates how to protect an Astro endpoint by checking for authenticated users using the auth() local and userId verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/endpoints.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function GET({ locals }) {\n  const { userId } = locals.auth()\n\n  if (!userId) {\n    return new Response('Error: No signed in user', { status: 401 })\n  }\n\n  // Add your Endpoint logic here\n\n  return new Response(JSON.stringify({ userId }))\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in Tanstack React Start\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in a Tanstack React Start application. This code creates a route and component that renders the OrganizationSwitcher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { OrganizationSwitcher } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/organization-switcher')({\n  component: OrganizationSwitcher,\n})\n\nfunction OrganizationSwitcher() {\n  return <OrganizationSwitcher />\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js SDK using npm (Bash)\nDESCRIPTION: Command to install the Clerk Next.js SDK (`@clerk/nextjs`) using the npm package manager. This is the first step required to integrate Clerk into a Next.js project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInWithMetamaskButton in React\nDESCRIPTION: Shows how to import and use the SignInWithMetamaskButton component in a React application. This example demonstrates the basic implementation in a functional component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/clerk-react'\n\nexport default function Example() {\n  return <SignInWithMetamaskButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Dedicated UserProfile Page with Custom Link in Next.js\nDESCRIPTION: Example showing how to create a dedicated UserProfile page with a custom link in Next.js. The code includes path routing configuration and demonstrates how to add a link to the homepage in the UserProfile sidebar.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserProfile } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nconst UserProfilePage = () => (\n  <UserProfile path=\"/user-profile\" routing=\"path\">\n    <UserProfile.Link label=\"Homepage\" labelIcon={<DotIcon />} url=\"/\" />\n  </UserProfile>\n)\n\nexport default UserProfilePage\n```\n\n----------------------------------------\n\nTITLE: Adding Additional OAuth Scopes to UserButton Component in React\nDESCRIPTION: This code shows how to add additional OAuth scopes to the UserButton component in a React application using Clerk. It specifies extra scopes for Google and GitHub providers within the userProfileProps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<UserButton\n  userProfileProps={{\n    additionalOAuthScopes: {\n      google: ['foo', 'bar'],\n      github: ['qux'],\n    },\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating User Password with Clerk's User.updatePassword Method in JavaScript\nDESCRIPTION: Demonstrates the new method for updating a user's password using Clerk's User.updatePassword method, which replaces the deprecated User.update({ password: 'x' }) approach. This change improves security by requiring the current password.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_21\n\nLANGUAGE: js\nCODE:\n```\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in Vue\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in a Vue application. This code creates a component that renders the OrganizationSwitcher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { OrganizationSwitcher } from '@clerk/vue'\n</script>\n\n<template>\n  <OrganizationSwitcher />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes - Vue - TypeScript\nDESCRIPTION: Shows how to set up Clerk in a Vue app with themes stacked using the clerkPlugin and the appearance.baseTheme array. Requires @clerk/vue and @clerk/themes. The plugin is configured before the application is mounted. The themes allow for flexible overriding of style definitions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_13\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\nimport { dark, neobrutalism } from '@clerk/themes'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    baseTheme: [dark, neobrutalism],\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk SDK in a SwiftUI App (Swift)\nDESCRIPTION: This snippet demonstrates initializing the Clerk SDK in the main application file (`@main App`) of a SwiftUI project. It imports the `Clerk` module, obtains the shared Clerk instance, and uses a `.task` modifier attached to a `ZStack` to configure the SDK with a publishable key and load it asynchronously. A `ProgressView` is displayed while the SDK is loading, and the main `ContentView` is shown once loaded.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_0\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'ClerkQuickstartApp.swift', mark: [2, 6, [10, 21]] }}\nimport SwiftUI\nimport Clerk\n\n@main\nstruct ClerkQuickstartApp: App {\n  @State private var clerk = Clerk.shared\n\n  var body: some Scene {\n    WindowGroup {\n      ZStack {\n        if clerk.isLoaded {\n          ContentView()\n        } else {\n          ProgressView()\n        }\n      }\n      .environment(clerk)\n      .task {\n        clerk.configure(publishableKey: \"{{pub_key}}\")\n        try? await clerk.load()\n      }\n    }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Tanstack Query Integration with Clerk\nDESCRIPTION: Comprehensive implementation of Tanstack Query with Clerk authentication, including error handling and TypeScript support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useQuery } from '@tanstack/react-query'\nimport { useAuth } from '@clerk/nextjs'\n\nexport const queryKeys = {\n  foo: ['foo'] as const,\n}\n\ninterface FooResponse {\n  id: string\n  name: string\n}\n\nexport function useFooQuery() {\n  const { getToken } = useAuth()\n\n  return useQuery({\n    queryKey: queryKeys.foo,\n    queryFn: async (): Promise<FooResponse> => {\n      const token = await getToken()\n\n      const response = await fetch('/api/foo', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error(`API Error: ${response.status} ${response.statusText}`)\n      }\n\n      const data = await response.json()\n      return data as FooResponse\n    },\n    retry: 2,\n    staleTime: 5 * 60 * 1000,\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Password in JavaScript\nDESCRIPTION: Demonstrates the change from using User.update to User.updatePassword for changing a user's password. The new method requires the current password and offers additional security options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Replacing User.update Password Method with User.updatePassword in JavaScript\nDESCRIPTION: User password updates now require using the updatePassword method instead of the general update method. This change improves security by requiring the current password to complete the update.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating `TokenVerificationErrorAction` Import Path in JavaScript\nDESCRIPTION: Illustrates updating the import path for `TokenVerificationErrorAction`. This type is now imported from `@clerk/backend/errors` instead of `@clerk/backend`, following the SDK's reorganization of error-related utilities.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_13\n\nLANGUAGE: js\nCODE:\n```\n    import { TokenVerificationErrorAction } from '@clerk/backend'\n    import { TokenVerificationErrorAction } from '@clerk/backend/errors'\n```\n\n----------------------------------------\n\nTITLE: Role-based Authorization in Next.js Client Component\nDESCRIPTION: This snippet shows how to implement role-based authorization in a Next.js Client Component using the has() function. It checks if the user has either the 'org:admin' or 'org:billing_manager' role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\nimport { useAuth } from '@clerk/nextjs'\n\nexport function SettingsForm() {\n  const { has } = useAuth()\n\n  // Check if the user is authorized\n  const canAccessSettings = has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })\n\n  // If has() returns false, the user does not have the correct permissions\n  // You can choose how your app responds. This example returns null.\n  if (!canAccessSettings) return null\n\n  // If the user is both authenticated and authorized, move forward with your logic\n  return <form>{/* Add UI for team settings */}</form>\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk SDK without a Client in Go\nDESCRIPTION: Sample code demonstrating how to initialize and execute API operations such as creating, retrieving, listing, and deleting users directly through package functions without creating a Client instance. Requires setting the API key and passing context for each operation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/overview.mdx#_snippet_2\n\nLANGUAGE: Go\nCODE:\n```\nimport (\n  \"github.com/clerk/clerk-sdk-go/v2\"\n  \"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\n// Each operation requires a context.Context as the first argument\nctx := context.Background()\n\n// Set the API key with your Clerk Secret Key\nclerk.SetKey(\"sk_live_xxx\")\n\n// Create a new user\nnewUser, err := user.Create(ctx, &user.CreateParams{})\nif err != nil {\n    // Handle error\n}\n\n// Get user details\nuserDetails, err := user.Get(ctx, \"user_id\")\nif err != nil {\n    // Handle error\n}\n\n// List users\nuserList, err := user.List(ctx, &user.ListParams{})\nif err != nil {\n    // Handle error\n}\nfor _, u := range userList.Users {\n    // Process each user\n}\n\n// Delete user\ndeletedResource, err := user.Delete(ctx, \"user_id\")\nif err != nil {\n    // Handle error\n}\n```\n\n----------------------------------------\n\nTITLE: Fastify POST Handler for Clerk Webhook Verification in TypeScript\nDESCRIPTION: This example sets up a Fastify POST route `'/api/webhooks'` to verify Clerk webhooks using '@clerk/fastify/webhooks'. The handler verifies the request signature, extracts and logs event details, then returns a success string or an error with HTTP 400. Requires 'fastify' and '@clerk/fastify/webhooks' as dependencies and must be available to public HTTP traffic as webhook calls are unauthenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/fastify/webhooks'\\nimport Fastify from 'fastify'\\n\\nconst fastify = Fastify()\\n\\nfastify.post('/api/webhooks', async (request, reply) => {\\n  try {\\n    const evt = await verifyWebhook(request)\\n\\n    // Do something with payload\\n    // For this guide, log payload to console\\n    const { id } = evt.data\\n    const eventType = evt.type\\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\\n    console.log('Webhook payload:', evt.data)\\n\\n    return 'Webhook received'\\n  } catch (err) {\\n    console.error('Error verifying webhook:', err)\\n    return reply.code(400).send('Error verifying webhook')\\n  }\\n})\\n\n```\n\n----------------------------------------\n\nTITLE: Using useAuth() to Access Auth State and Fetch Data in Vue\nDESCRIPTION: This Vue component example demonstrates importing `useAuth` from `@clerk/vue` to access reactive authentication state (`isLoaded`, `isSignedIn`) and the `getToken` method. It shows conditional rendering based on the loading and sign-in status and includes a function `fetchProtectedData` that retrieves a session token using `getToken` to make an authenticated request to a protected API endpoint.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-auth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useAuth } from '@clerk/vue'\n\nconst { getToken, isLoaded, isSignedIn } = useAuth()\n\nconst fetchProtectedData = async () => {\n  const token = await getToken.value()\n\n  // Fetch data from an external API\n  const response = await fetch('https://api.example.com/data', {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  return response.json()\n}\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">Loading...</div>\n  <div v-else-if=\"!isSignedIn\">Sign in to view this page</div>\n  <div v-else>\n    <!-- Your protected content here -->\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Signing Out User in Clerk SDK\nDESCRIPTION: Function to sign out the active user from all sessions or a specific session. It can accept optional SignOutOptions or a callback function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_37\n\nLANGUAGE: typescript\nCODE:\n```\nfunction signOut(options?: SignOutOptions): Promise<void>\n// OR\nfunction signOut(\n  signOutCallback?: () => void | Promise<any>,\n  options?: SignOutOptions,\n): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in Next.js\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in a Next.js application. This code creates a page that renders the OrganizationSwitcher component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationSwitcher } from '@clerk/nextjs'\n\nexport default function OrganizationSwitcherPage() {\n  return <OrganizationSwitcher />\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Layout Prop in Nuxt\nDESCRIPTION: Example of configuring Clerk layout options in a Nuxt application. This snippet shows how to set up custom layout settings in the Nuxt configuration file, including social button placement and terms page URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/layout.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      layout: {\n        socialButtonsPlacement: 'bottom',\n        socialButtonsVariant: 'iconButton',\n        termsPageUrl: 'https://clerk.com/terms',\n      },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Simple Pagination with useOrganization in Next.js\nDESCRIPTION: Next.js implementation of traditional pagination for organization memberships using the useOrganization hook with previous/next buttons to navigate through pages of member data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganization } from '@clerk/nextjs'\n\nexport default function MemberListPage() {\n  const { memberships } = useOrganization({\n    memberships: {\n      keepPreviousData: true, // Persist the cached data until the new data has been fetched\n    },\n  })\n\n  if (!memberships) {\n    // Handle loading state\n    return null\n  }\n\n  return (\n    <div>\n      <h2>Organization members</h2>\n      <ul>\n        {memberships.data?.map((membership) => (\n          <li key={membership.id}>\n            {membership.publicUserData.firstName} {membership.publicUserData.lastName} &lt;\n            {membership.publicUserData.identifier}&gt; :: {membership.role}\n          </li>\n        ))}\n      </ul>\n\n      <button disabled={!memberships.hasPreviousPage} onClick={memberships.fetchPrevious}>\n        Previous page\n      </button>\n\n      <button disabled={!memberships.hasNextPage} onClick={memberships.fetchNext}>\n        Next page\n      </button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Auth Object in Nuxt Event Handlers - JavaScript\nDESCRIPTION: Demonstrates how to access the 'Auth' object via 'event.context.auth()' within Nuxt event handlers. The 'Auth' object contains details such as session data, user ID, and organization ID. No external dependencies beyond the Nuxt Clerk SDK are required. Inputs include the 'event' object provided to the handler; outputs are object properties for authenticated user context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Example usage inside a Nuxt event handler:\nexport default defineEventHandler(async (event) => {\n  const auth = event.context.auth();\n  // 'auth' now contains session data, user ID, organization ID, etc.\n  // Use as needed for authentication or authorization logic\n});\n```\n\n----------------------------------------\n\nTITLE: Removing Redundant afterSignOutUrl Prop in UserButton JSX\nDESCRIPTION: Demonstrates how the `afterSignOutUrl=\"/\"` prop can be removed from the `<UserButton>` component in Core 2. The default redirect URL after sign-out is now `/`, making this explicit prop unnecessary if that is the desired behavior.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_14\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton afterSignOutUrl=\"/\" />\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Example Usage of updateUser() with Clerk Backend SDK in TypeScript\nDESCRIPTION: This example shows how to use the updateUser() function to update a user's first and last name. It demonstrates setting up the user ID and parameters object before making the API call.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst userId = 'user_123'\n\nconst params = { firstName: 'John', lastName: 'Wick' }\n\nconst response = await clerkClient.users.updateUser(userId, params)\n```\n\n----------------------------------------\n\nTITLE: Next.js Client Component for User Impersonation\nDESCRIPTION: Client-side component handling user interface and impersonation logic using Clerk hooks and APIs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport React from 'react'\nimport { useUser, useSignIn } from '@clerk/nextjs'\nimport { generateActorToken } from './_actions'\nimport { useRouter } from 'next/navigation'\n\ntype ParsedUser = {\n  id: string\n  email: string | undefined\n}\n\nexport type Actor = {\n  object: string\n  id: string\n  status: 'pending' | 'accepted' | 'revoked'\n  user_id: string\n  actor: object\n  token: string | null\n  url: string | null\n  created_at: Number\n  updated_at: Number\n}\n\nasync function createActorToken(actorId: string, userId: string) {\n  const res = await generateActorToken(actorId, userId)\n\n  if (!res.ok) console.log('Error', res.message)\n\n  return res.token\n}\n\nexport default function ImpersonateUsers({ users }: { users: ParsedUser[] }) {\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const router = useRouter()\n  const { user } = useUser()\n\n  if (!user?.id) return null\n\n  async function impersonateUser(actorId: string, userId: string) {\n    if (!isLoaded) return\n\n    const actorToken = await createActorToken(actorId, userId)\n\n    if (actorToken) {\n      try {\n        const { createdSessionId } = await signIn.create({\n          strategy: 'ticket',\n          ticket: actorToken,\n        })\n\n        await setActive({ session: createdSessionId })\n\n        router.push('/')\n      } catch (err) {\n        console.error(JSON.stringify(err, null, 2))\n      }\n    }\n  }\n\n  return (\n    <>\n      <p>Hello {user?.primaryEmailAddress?.emailAddress}</p>\n\n      <h1>Users</h1>\n      <ul>\n        {users?.map((userFromUserList) => {\n          return (\n            <li key={userFromUserList.id} style={{ display: 'flex', gap: '4px' }}>\n              <p>{userFromUserList?.email ? userFromUserList.email : userFromUserList.id}</p>\n              <button onClick={async () => await impersonateUser(user.id, userFromUserList.id)}>\n                Impersonate\n              </button>\n            </li>\n          )\n        })}\\n      </ul>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Singleton Clerk Instance Creation in TypeScript\nDESCRIPTION: Defines a function `createClerkInstance` using a `runOnce` utility to ensure the internal function `createClerkInstanceInternal` is executed only once (singleton pattern). This function begins the process of setting up the ClerkJS instance by attempting to access `window.Clerk`. It imports state stores (`$clerk`, `$state`) presumably for managing Clerk state within the SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/frontend-only.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nimport { runOnce } from './utils'\n// States accessible to other parts of your SDK and/or its users\nimport { $clerk, $state } from './stores'\n\nexport const createClerkInstance = runOnce(createClerkInstanceInternal)\n\nasync function createClerkInstanceInternal(options) {\n  let clerkJSInstance = window.Clerk\n}\n```\n\n----------------------------------------\n\nTITLE: Auth Object Without MFA Method Registered (Version 1)\nDESCRIPTION: Example of Clerk's deprecated version 1 Auth object for a user without an MFA method registered. The factorVerificationAge value [0,-1] indicates the first factor is verified but no second factor exists (-1).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  sessionId: 'sess_123',\n  userId: 'user_123',\n  orgId: null,\n  orgRole: null,\n  orgSlug: null,\n  orgPermissions: null,\n  factorVerificationAge: [0, -1],\n  has: [Function (anonymous)],\n  getToken: [AsyncFunction (anonymous)],\n  claims: {\n    azp: 'http://localhost:3000',\n    exp: 1666622607,\n    iat: 1666622547,\n    iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n    nbf: 1666622537,\n    sid: 'sess_123',\n    sub: 'user_123',\n    },\n  }\n```\n\n----------------------------------------\n\nTITLE: Handling Second Factor Verification Form Submission in JavaScript\nDESCRIPTION: This JavaScript snippet handles the submission event for a form intended for second-factor authentication (TOTP or backup code). It retrieves the code entered by the user, determines if it's a backup code or TOTP, and attempts verification using `clerk.client.signIn.attemptSecondFactor`. On successful verification, it activates the session and reloads the page; otherwise, it logs errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n// Hide sign-in form\ndocument.getElementById('sign-in').setAttribute('hidden', '')\n// Show verification form\ndocument.getElementById('verifying').removeAttribute('hidden')\n} catch (error) {\n// See https://clerk.com/docs/custom-flows/error-handling\n// for more info on error handling\nconsole.error(error)\n}\n})\n\n// Handle the verification form\ndocument.getElementById('verifying').addEventListener('submit', async (e) => {\nconst formData = new FormData(e.target)\nconst totp = formData.get('totp')\nconst backupCode = formData.get('backupCode')\n\ntry {\nconst useBackupCode = backupCode ? true : false\nconst code = backupCode ? backupCode : totp\n\n// Attempt the TOTP or backup code verification\nconst signInAttempt = await clerk.client.signIn.attemptSecondFactor({\nstrategy: useBackupCode ? 'backup_code' : 'totp',\ncode: code,\n})\n\n// If verification was completed, set the session to active\n// and redirect the user\nif (signInAttempt.status === 'complete') {\nawait clerk.setActive({ session: signInAttempt.createdSessionId })\n\nlocation.reload()\n} else {\n// If the status is not complete, check why. User may need to\n// complete further steps.\nconsole.error(signInAttempt)\n}\n} catch (error) {\n// See https://clerk.com/docs/custom-flows/error-handling\n// for more info on error handling\nconsole.error(error)\n}\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Path Routing for Clerk Authentication Components in JSX\nDESCRIPTION: Demonstrates how to set up path routing for various Clerk authentication components like SignIn, SignUp, UserProfile, CreateOrganization, and OrganizationProfile. Path routing is now the default strategy in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_19\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn path=\"/sign-in\" />\n<SignUp path=\"/sign-up\" />\n<UserProfile path=\"/user-profile\" />\n<CreateOrganization path=\"/create-org\" />\n<OrganizationProfile path=\"/org-profile\" />\n```\n\n----------------------------------------\n\nTITLE: Handling Reverification in a Custom TransferButton with Clerk in React (JavaScript)\nDESCRIPTION: This snippet defines a reusable TransferButton component in React that uses the useReverification hook from @clerk/react. The hook wraps a POST fetch request for transferring money, automatically handling user reverification if needed. The component expects an amount_in_cents prop, and clicking the button triggers the whole process. Dependencies: @clerk/react, working /api/reverification-example endpoint. Inputs: amount_in_cents prop; Outputs: reverified fetch POST request on click.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useReverification } from '@clerk/react'\\n\\nexport function TransferButton({ amount_in_cents }: { amount_in_cents: number }) {\\n  const transferMoney = useReverification(() =>\\n    fetch('/api/reverification-example', {\\n      method: 'POST',\\n      body: JSON.stringify({ amount_in_cents }),\\n    }),\\n  )\\n\\n  return <button onClick={transferMoney}>Transfer</button>\\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User with Clerk Backend SDK in TypeScript\nDESCRIPTION: This snippet demonstrates the function signature for updating a user. It takes a user ID and an object of update parameters, and returns a Promise that resolves to the updated User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateUser(userId: string, params: UpdateUserParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Implementing MFA Enforcement Middleware in Astro\nDESCRIPTION: An Astro middleware implementation that enforces MFA by redirecting users to the MFA setup page when they don't have it enabled. It uses route matching patterns and checks the session claims for MFA status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/force-mfa.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/astro/server'\n\nconst isMFARoute = createRouteMatcher(['/account/manage-mfa/add(.*)'])\nconst isSignInRoute = createRouteMatcher(['/sign-in(.*)'])\n\nexport const onRequest = clerkMiddleware((auth, context) => {\n  const { userId, sessionClaims } = auth()\n\n  // Redirect to homepage if the user is signed in and on the sign-in page\n  if (userId !== null && isSignInRoute(context.request)) {\n    return Response.redirect(new URL('/', context.request.url))\n  }\n\n  // Redirect to MFA setup page if MFA is not enabled\n  if (userId !== null && !isMFARoute(context.request)) {\n    if (sessionClaims.isMfa === undefined) {\n      console.error('You need to add the `isMfa` claim to your session token.')\n    }\n    if (sessionClaims.isMfa === false) {\n      return Response.redirect(new URL('/account/manage-mfa/add', context.request.url))\n    }\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Strategy Component in Clerk Elements Sign-In Flow\nDESCRIPTION: This snippet demonstrates the usage of the Strategy component for email code verification. It includes a code input field and a verify action button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Strategy name=\"email_code\">\n  <Clerk.Field name=\"code\">\n    <Clerk.Label>Code</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n  <SignIn.Action submit>Verify</SignIn.Action>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Basic Sign-in Route Setup with Next.js and Clerk Elements\nDESCRIPTION: Initial setup of a sign-in page using Clerk Elements in Next.js with an optional catch-all route. Implements the basic SignIn.Root component for state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return <SignIn.Root>[Sign In Root]</SignIn.Root>\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current User in Client Components - Client Component\nDESCRIPTION: This snippet shows how to create a client component that uses a server action passed as a prop to access user data. It demonstrates the UI portion that will trigger the server action.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nexport default function UI({ addHobby }) {\n  return (\n    <form action={addHobby}>\n      <input value={'soccer'} type=\"text\" name=\"hobby\" />\n      <button type=\"submit\">Submit your hobby</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Middleware for Route-Level RBAC Protection\nDESCRIPTION: Middleware that intercepts requests to admin routes and checks if the user has the required role. If not, it redirects them to the home page. This provides protection at the route level.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nconst isAdminRoute = createRouteMatcher(['/admin(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  // Protect all routes starting with `/admin`\n  if (isAdminRoute(req) && (await auth()).sessionClaims?.metadata?.role !== 'admin') {\n    const url = new URL('/', req.url)\n    return NextResponse.redirect(url)\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getMemberships Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for Organization.getMemberships have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating User.getOrganizationMemberships Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for User.getOrganizationMemberships have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing SignIn Component in TanStack React Start\nDESCRIPTION: This snippet demonstrates how to create a dedicated sign-in page in a TanStack React Start application using the SignIn component and createFileRoute from @tanstack/react-router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-in')({\n  component: SignIn,\n})\n\nfunction SignIn() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Google OAuth Sign-in with Clerk Elements in React\nDESCRIPTION: A React component implementing a Google OAuth sign-in flow using Clerk Elements. Features a Google sign-in button and navigation to sign-up. Includes custom styling with Tailwind CSS for a dark theme.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <div className=\"grid w-full flex-grow items-center bg-black px-4 sm:justify-center\">\n      <SignIn.Root>\n        <SignIn.Step\n          name=\"start\"\n          className=\"w-full flex-grow space-y-6 rounded-2xl bg-neutral-900 bg-[radial-gradient(circle_at_50%_0%,theme(colors.white/10%),transparent)] px-4 py-10 ring-1 ring-inset ring-white/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#fff\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-white\">\n              Sign in to Clover\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <div className=\"space-y-2\">\n            <Clerk.Connection\n              name=\"google\"\n              className=\"flex w-full items-center justify-center gap-x-3 rounded-md bg-neutral-700 px-3.5 py-1.5 text-sm font-medium text-white shadow-[0_1px_0_0_theme(colors.white/5%)_inset,0_0_0_1px_theme(colors.white/2%)_inset] outline-none hover:bg-gradient-to-b hover:from-white/5 hover:to-white/5 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-white active:bg-gradient-to-b active:from-black/20 active:to-black/20 active:text-white/70\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 17 16\"\n                className=\"w-4\"\n                aria-hidden\n              >\n                <path\n                  fill=\"currentColor\"\n                  d=\"M8.82 7.28v2.187h5.227c-.16 1.226-.57 2.124-1.192 2.755-.764.765-1.955 1.6-4.035 1.6-3.218 0-5.733-2.595-5.733-5.813 0-3.218 2.515-5.814 5.733-5.814 1.733 0 3.005.685 3.938 1.565l1.538-1.538C12.998.96 11.256 0 8.82 0 4.41 0 .705 3.591.705 8s3.706 8 8.115 8c2.382 0 4.178-.782 5.582-2.24 1.44-1.44 1.893-3.475 1.893-5.111 0-.507-.035-.978-.115-1.369H8.82Z\"\n                />\n              </svg>\n              Login with Google\n            </Clerk.Connection>\n          </div>\n          <p className=\"text-center text-sm text-neutral-400\">\n            No account?{' '}\n            <Clerk.Link\n              navigate=\"sign-up\"\n              className=\"font-medium text-white decoration-white/20 underline-offset-4 outline-none hover:underline focus-visible:underline\"\n            >\n              Create an account\n            </Clerk.Link>\n          </p>\n        </SignIn.Step>\n      </SignIn.Root>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Password with New Method in Clerk Backend\nDESCRIPTION: Shows the replacement of the deprecated password update approach with the new updatePassword method, which requires providing the current password for security reasons.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_45\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating User Password - Clerk JavaScript\nDESCRIPTION: Shows a JavaScript example usage of updatePassword to set a new password for the user, requiring both the current and new passwords. Returns the updated user object upon success.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_33\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.updatePassword({\n  currentPassword: 'current-password',\n  newPassword: 'new-password',\n})\n```\n\n----------------------------------------\n\nTITLE: React React Native `<SignedIn>` usage example\nDESCRIPTION: Shows how to use the `<SignedIn>` component in a React Native app to conditionally display content for authenticated users. It imports from `@clerk/clerk-expo` and uses React Native's `Text` and `View` components for layout.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { SignedIn } from '@clerk/clerk-expo'\nimport { Text, View } from 'react-native'\n\nexport default function Screen() {\n  return (\n    <View>\n      <SignedIn>\n        <Text>You are signed in</Text>\n      </SignedIn>\n      <Text>This content is always visible.</Text>\n    </View>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk SignIn Component in React JSX\nDESCRIPTION: This code snippet demonstrates how to render a Clerk SignIn component in a React application. It uses the SignIn.Root and SignIn.Step components to structure the sign-in flow and includes a link to create an account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n  }\n  ```\n</CodeBlockDemo>\n\n\n\n\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Fetch with Clerk Authentication in React\nDESCRIPTION: Creates an authenticated fetch wrapper using Clerk's useAuth hook to include the session token in request headers. Returns a function that automatically adds Bearer token authentication to fetch requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default async function useFetch() {\n  // Use `useAuth()` to access the `getToken()` method\n  const { getToken } = useAuth()\n\n  // Use `getToken()` to get the current session token\n  const token = await getToken()\n\n  const authenticatedFetch = async (...args) => {\n    return fetch(...args, {\n      headers: { Authorization: `Bearer ${token}` }, // Include the session token as a Bearer token in the Authorization header\n    }).then((res) => res.json())\n  }\n\n  return authenticatedFetch\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Sign-In Command in Cypress Tests - TypeScript\nDESCRIPTION: This snippet shows how to programmatically sign in a user within a Cypress test using the cy.clerkSignIn custom command. The test first navigates to the root page, signs in with the 'phone_code' strategy and a test phone number, then proceeds to a protected page where the user session remains authenticated. Prerequisites include a user with the specified identifier and registration of Clerk commands in the Cypress support file. The command requires the strategy parameter ('phone_code', 'email_code', or 'password'), the user identifier, and optionally a password for password-based sign-in. The input is a strategy configuration object, and the output is an authenticated Clerk session for the current test context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/custom-commands.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nit('sign in', () => {\n  cy.visit(`/`)\n  cy.clerkSignIn({ strategy: 'phone_code', identifier: '+15555550100' })\n  cy.visit('/protected')\n  // user is signed in from here on\n})\n```\n\n----------------------------------------\n\nTITLE: Protecting Route Handlers using auth().userId in Next.js\nDESCRIPTION: Demonstrates how to protect a Route Handler by checking auth().userId and customizing the error response. This approach provides more flexibility for handling unauthenticated requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/route-handlers.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nexport async function GET() {\n  const { userId } = await auth()\n\n  if (!userId) {\n    return NextResponse.json({ error: 'Error: No signed in user' }, { status: 401 })\n  }\n\n  // Add your Route Handler logic here\n\n  return NextResponse.json({ userId })\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Middleware to Make Sign-Up Route Public in Next.js\nDESCRIPTION: This middleware configuration makes specific routes public while protecting all others. It adds the sign-up route to the list of public routes using createRouteMatcher, ensuring users can access the sign-up page without authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\n// prettier-ignore\nconst isPublicRoute = createRouteMatcher([\n  '/sign-in(.*)',\n  '/sign-up(.*)'\n])\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (!isPublicRoute(req)) {\n    await auth.protect()\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: React Next.js `<SignedIn>` usage example with App Router\nDESCRIPTION: Demonstrates how to conditionally render content for signed-in users using the `<SignedIn>` component within a Next.js application employing the App Router. The example includes importing necessary components, wrapping application layout, and rendering content based on authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport React from 'react'\nimport { ClerkProvider, SignedIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <header>\n            <SignedIn>\n              <div>You are signed in</div>\n            </SignedIn>\n            <p>This content is always visible.</p>\n          </header>\n          {children}\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInWithMetamaskButton in Remix\nDESCRIPTION: Illustrates how to import and use the SignInWithMetamaskButton component in a Remix application. This snippet shows the basic implementation in a home page component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/remix'\n\nexport default function Home() {\n  return <SignInWithMetamaskButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Auth State in Playwright Global Setup - TypeScript\nDESCRIPTION: Sets up Clerk authentication for Playwright tests by signing in with credentials from environment variables, verifying access to a protected page, and serializing the authenticated browser context. Depends on @clerk/testing/playwright, @playwright/test, 'path', and valid environment credentials. Key parameters include user credentials via process.env. Produces a 'user.json' file used by test sessions as storageState. Designed to run before all tests as a global setup step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-authenticated-flows.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerk, clerkSetup } from '@clerk/testing/playwright'\\nimport { test as setup } from '@playwright/test'\\nimport path from 'path'\\n\\n// Configure Playwright with Clerk\\nsetup('global setup', async ({}) => {\\n  await clerkSetup()\\n})\\n\\n// Define the path to the storage file, which is `user.json`\\nconst authFile = path.join(__dirname, '../playwright/.clerk/user.json')\\n\\nsetup('authenticate and save state to storage', async ({ page }) => {\\n  // Perform authentication steps.\\n  // This example uses a Clerk helper to authenticate\\n  await page.goto('/')\\n  await clerk.signIn({\\n    page,\\n    signInParams: {\\n      strategy: 'password',\\n      identifier: process.env.E2E_CLERK_USER_USERNAME!,\\n      password: process.env.E2E_CLERK_USER_PASSWORD!,\\n    },\\n  })\\n  await page.goto('/protected')\\n  // Ensure the user has successfully accessed the protected page\\n  // by checking an element on the page that only the authenticated user can access\\n  await page.waitForSelector(\"h1:has-text('This is a PROTECTED page')\")\\n\\n  await page.context().storageState({ path: authFile })\\n})\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js SDK with Package Managers\nDESCRIPTION: Command-line instructions for installing the @clerk/nextjs package using different package managers (npm, yarn, pnpm, bun).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Handling Reverification for Server Action with Clerk in Next.js (TypeScript)\nDESCRIPTION: This snippet demonstrates how to use the useReverification hook from @clerk/nextjs to wrap a Next.js server action (myAction) for handling reverification in a client component. When the action is called via performAction, a modal will prompt the user for identity verification if needed; the action is retried automatically on successful verification. If the user cancels, null is returned and handled in the UI. Dependencies: @clerk/nextjs, a defined myAction server action, and React 18+ (app router). Inputs: user click; Outputs: reverified action or null if cancelled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { useReverification } from '@clerk/nextjs'\\nimport { myAction } from '../actions'\\n\\nexport default function Page() {\\n  const performAction = useReverification(myAction)\\n\\n  const handleClick = async () => {\\n    const myData = await performAction()\\n    // If `myData` is null, the user cancelled the reverification process\\n    // You can choose how your app responds. This example returns null.\\n    if (!myData) return\\n  }\\n\\n  return <button onClick={handleClick}>Perform action</button>\\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current Organization with Clerk useOrganization in Vue\nDESCRIPTION: This Vue component demonstrates how to use the useOrganization composable from Clerk to access the currently active organization. It uses reactive references to conditionally display either the OrganizationSwitcher or the organization's name, based on whether the organization is loaded. Dependencies include @clerk/vue, and the component expects Clerk to be set up and initialized in the Vue application. It returns the current organization and loading state, displaying loading indicators and organization details appropriately.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { OrganizationSwitcher, useOrganization } from '@clerk/vue'\n\nconst { organization, isLoaded } = useOrganization()\n</script>\n\n<template>\n  <div v-if=\"!organization\">\n    <OrganizationSwitcher />\n  </div>\n  <div v-if=\"isLoaded\">\n    <p>This current organization is {{ organization?.name }}</p>\n  </div>\n\n  <div v-else>\n    <p>Loading...</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Using <OrganizationList /> in Next.js\nDESCRIPTION: Example of implementing the <OrganizationList /> component in a Next.js application. It demonstrates setting up the component with various URL properties for organization creation, personal account selection, and organization selection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationList } from '@clerk/nextjs'\n\nexport default function OrganizationListPage() {\n  return (\n    <OrganizationList\n      afterCreateOrganizationUrl=\"/organization/:slug\"\n      afterSelectPersonalUrl=\"/user/:id\"\n      afterSelectOrganizationUrl=\"/organization/:slug\"\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing User Reverification Check in Next.js API Route with Clerk\nDESCRIPTION: This TypeScript code demonstrates how to implement a user reverification check in a Next.js API route using Clerk. It uses the `has()` helper to check if the user has verified their credentials within the last 10 minutes, and returns an error response if reverification is needed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/nextjs/reverification-route-handler.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, reverificationErrorResponse } from '@clerk/nextjs/server'\n\nexport const POST = async (req: Request) => {\n  const { has } = await auth()\n\n  // Check if the user has *not* verified their credentials within the past 10 minutes.\n  const shouldUserRevalidate = !has({ reverification: 'strict' })\n\n  // If the user hasn't reverified, return an error with the matching configuration (e.g., `strict`)\n  if (shouldUserRevalidate) {\n    return reverificationErrorResponse('strict')\n  }\n\n  // If the user has verified credentials, return a successful response\n  return new Response({ success: true })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing getToken() in Express\nDESCRIPTION: Example of using getToken() in an Express route. It checks for an active session, retrieves a token, and returns it in the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.get('/api/get-token', async (req, res) => {\n  const sessionId = req.auth.sessionId\n\n  if (!sessionId) {\n    res.status(401).json({ error: 'Unauthorized' })\n    return\n  }\n\n  const template = 'test'\n  const token = await clerkClient.sessions.getToken(sessionId, template)\n\n  res.json({ token })\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing Organization Information Server-Side in Next.js\nDESCRIPTION: This TypeScript React component demonstrates how to access organization information on the server-side using the auth() function from Clerk. It checks if the requested organization slug is valid and displays a welcome message or an organization list.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { OrganizationList } from '@clerk/nextjs'\n\nexport default async function Home({ params }: { params: { slug: string } }) {\n  const { orgSlug, sessionClaims } = await auth()\n  const { slug } = await params\n\n  if (slug != orgSlug) {\n    return (\n      <>\n        <p>Sorry, organization {slug} is not valid.</p>\n        <OrganizationList\n          hideSlug={false}\n          hidePersonal={false}\n          afterCreateOrganizationUrl=\"/orgs/:slug\"\n          afterSelectOrganizationUrl=\"/orgs/:slug\"\n          afterSelectPersonalUrl=\"/me\"\n        />\n      </>\n    )\n  }\n\n  // Access the organization name from the session claims\n  let orgId = sessionClaims['org_id'] as string\n\n  return <div>{orgId && `Welcome to organization ${orgId}`}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware for Webhook Routes - Next.js - TypeScript\nDESCRIPTION: This TypeScript code demonstrates the recommended configuration for Clerk middleware in a Next.js application to properly support webhook routes. It ensures that the '/api/webhooks/(.*)' route remains public so that unsigned, external requests from Clerk are accepted. The 'matcher' array is strategically set to skip static/internal routes and always apply to API and TRPC routes. Requires the '@clerk/nextjs/server' package and should be placed in a Next.js 'middleware.tsx' file. No parameters are required, and configuration is declarative; outputs are the correct middleware behavior for public API webhook paths.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/debug-your-webhooks.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\\n\\n// Make sure that the `/api/webhooks/(.*)` route is not protected here\\nexport default clerkMiddleware()\\n\\nexport const config = {\\n  matcher: [\\n    // Skip Next.js internals and all static files, unless found in search params\\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\\n    // Always run for API routes\\n    '/(api|trpc)(.*)',\\n  ],\\n}\\n\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification for API Fetcher Function with Prebuilt UI in React\nDESCRIPTION: This example shows how to use useReverification() to enhance a fetcher function that retrieves sensitive data (account balance) from an API route that requires user reverification. It demonstrates error handling for when users cancel the reverification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useReverification, useUser } from '@clerk/clerk-react'\nimport { isClerkRuntimeError, isReverificationCancelledError } from '@clerk/clerk-react/errors'\nimport { useState } from 'react'\n\nexport function UpdateUserEmail() {\n  const [balance, setBalance] = useState<number | null>(null)\n  const accountBalance = useReverification(() => fetch('/api/balance'))\n\n  const handleClick = async () => {\n    try {\n      const accountBalanceResponse = await accountBalance()\n\n      setBalance(accountBalanceResponse.amount)\n    } catch (e) {\n      // Handle if user cancels the reverification process\n      if (isClerkRuntimeError(e) && isReverificationCancelledError(e)) {\n        console.error('User cancelled reverification', e.code)\n      }\n\n      // Handle other errors\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(e, null, 2))\n    }\n  }\n\n  return (\n    <div>\n      <span>Your account balance is {balance ? `$${balance}` : '$******'}</span>\n      <button onClick={() => handleClick()}>See account balance</button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TooManyRequests Error Payload in Clerk (JSON)\nDESCRIPTION: This snippet defines the JSON response schema for a generic rate limit error (TooManyRequests) from the Clerk API. It includes a short message, a longer descriptive message, and a unique code identifier. This format is used as a standard response when users exceed allowed request limits; clients should handle it by retrying after a delay.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/rate-limits.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Too many requests\\\",\\n  \\\"longMessage\\\": \\\"Too many requests, retry later\\\",\\n  \\\"code\\\": \\\"too_many_requests\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Action and Page to UserButton in Vue\nDESCRIPTION: This Vue.js example demonstrates adding a custom 'Help' action and page to the UserButton component. It uses Vue's template slot syntax to incorporate a custom icon and help content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_6\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <UserButton>\n      <UserButton.MenuItems>\n        <UserButton.Action label=\"Help\" open=\"help\">\n          <template #labelIcon>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n              <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n            </svg>\n          </template>\n        </UserButton.Action>\n      </UserButton.MenuItems>\n\n      <UserButton.UserProfilePage label=\"Help\" url=\"help\">\n        <template #labelIcon>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n            <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n          </svg>\n        </template>\n        <div>\n          <h1>Help Page</h1>\n          <p>This is the custom help page</p>\n        </div>\n      </UserButton.UserProfilePage>\n    </UserButton>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignIn in Remix\nDESCRIPTION: This example shows how to use the RedirectToSignIn component in a Remix application. It demonstrates using SignedIn and SignedOut components to control access and display either a UserButton or RedirectToSignIn based on the user's authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signin.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, RedirectToSignIn, UserButton } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignIn />\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example: Retrieving User Profile URL with Clerk JS SDK (JavaScript)\nDESCRIPTION: Shows a practical example of calling the `clerk.buildUserProfileUrl` method to obtain the URL of the user's profile page. This method requires an initialized Clerk instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nawait clerk.buildUserProfileUrl()\n```\n\n----------------------------------------\n\nTITLE: Initiating Popup-Based SSO Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithPopup` function signature. This asynchronous function handles signing up a user via popup-based Single Sign On (SSO) like OAuth or SAML. It accepts `AuthenticateWithPopupParams` (including `redirectUrl`, `redirectUrlComplete`, `strategy`, `continueSignUp`, `emailAddress`, `identifier`, `legalAccepted`, `popup`) and opens a popup window for the identity provider authentication, returning a Promise that resolves to void.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithPopup(params: AuthenticateWithPopupParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Client Import Pattern\nDESCRIPTION: Demonstrates the change from using 'Clerk' import to 'createClerkClient' in the backend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_48\n\nLANGUAGE: javascript\nCODE:\n```\n// before\nimport { Clerk } from '@clerk/backend'\n\n// after\nimport { createClerkClient } from '@clerk/backend'\n```\n\n----------------------------------------\n\nTITLE: Using redirectToSignIn Method with clerkMiddleware()\nDESCRIPTION: This example shows how to use the redirectToSignIn method with clerkMiddleware(). It demonstrates accessing redirectToSignIn from the auth() object instead of importing it at the top level.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { redirectToSignIn } = await auth()\n  if (someCondition) redirectToSignIn()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Basic HTML Structure for Vite App (HTML)\nDESCRIPTION: Provides a minimal `index.html` structure suitable for a Vite application. It includes standard HTML boilerplate, a `div` with `id=\"app\"` as the mounting point for the application, and a script tag to load the main JavaScript file (`main.js`) as a module.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html' }}\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n    <script type=\"module\" src=\"/main.js\"></script>\n  </body>\n</html>\n```\n```\n\n----------------------------------------\n\nTITLE: Remix CreateOrganization Implementation\nDESCRIPTION: Basic implementation of the CreateOrganization component in Remix framework.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { CreateOrganization } from '@clerk/remix'\n\nexport default function CreateOrganizationPage() {\n  return <CreateOrganization />\n}\n```\n\n----------------------------------------\n\nTITLE: Using Protected Procedures in tRPC Router\nDESCRIPTION: Shows how to implement a protected route that requires authentication using the previously defined protectedProcedure. This example returns a secret message that includes the user's ID, accessible only to authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { router, protectedProcedure } from '../trpc'\n\nexport const protectedRouter = router({\n  hello: protectedProcedure.query(({ ctx }) => {\n    const { userId } = ctx.auth\n\n    return {\n      secret: `${userId} is using a protected procedure`,\n    }\n  }),\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-In Email Link Flow in Next.js with Clerk\nDESCRIPTION: This component handles the email link sign-in process. It uses Clerk's useSignIn hook to create the email link flow, send the verification email, and manage the sign-in states including error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\nimport { EmailLinkFactor, SignInFirstFactor } from '@clerk/types'\n\nexport default function SignInPage() {\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [verified, setVerified] = React.useState(false)\n  const [verifying, setVerifying] = React.useState(false)\n  const [error, setError] = React.useState('')\n  const { signIn, isLoaded } = useSignIn()\n\n  if (!isLoaded) return null\n\n  const { startEmailLinkFlow } = signIn.createEmailLinkFlow()\n\n  async function submit(e: React.FormEvent) {\n    e.preventDefault()\n    // Reset states in case user resubmits form mid sign-in\n    setVerified(false)\n    setError('')\n\n    if (!isLoaded && !signIn) return null\n\n    // Start the sign-in process using the email provided\n    try {\n      const { supportedFirstFactors } = await signIn.create({\n        identifier: emailAddress,\n      })\n\n      setVerifying(true)\n\n      // Filter the returned array to find the 'email_link' entry\n      const isEmailLinkFactor = (factor: SignInFirstFactor): factor is EmailLinkFactor => {\n        return factor.strategy === 'email_link'\n      }\n      const emailLinkFactor = supportedFirstFactors?.find(isEmailLinkFactor)\n\n      if (!emailLinkFactor) {\n        setError('Email link factor not found')\n        return\n      }\n\n      const { emailAddressId } = emailLinkFactor\n\n      // Dynamically set the host domain for dev and prod\n      // You could instead use an environment variable or other source for the host domain\n      const protocol = window.location.protocol\n      const host = window.location.host\n\n      // Send the user an email with the email link\n      const signInAttempt = await startEmailLinkFlow({\n        emailAddressId,\n        redirectUrl: `${protocol}//${host}/sign-in/verify`,\n      })\n\n      // Check the verification result\n      const verification = signInAttempt.firstFactorVerification\n\n      // Handle if verification expired\n      if (verification.status === 'expired') {\n        setError('The email link has expired.')\n      }\n\n      // Handle if user visited the link and completed sign-in from /sign-in/verify\n      if (verification.verifiedFromTheSameClient()) {\n        setVerifying(false)\n        setVerified(true)\n      }\n    } catch (err: any) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n      setError('An error occurred.')\n    }\n  }\n\n  async function reset(e: React.FormEvent) {\n    e.preventDefault()\n    setVerifying(false)\n  }\n\n  if (error) {\n    return (\n      <div>\n        <p>Error: {error}</p>\n        <button onClick={() => setError('')}>Try again</button>\n      </div>\n    )\n  }\n\n  if (verifying) {\n    return (\n      <div>\n        <p>Check your email and visit the link that was sent to you.</p>\n        <form onSubmit={reset}>\n          <button type=\"submit\">Restart</button>\n        </form>\n      </div>\n    )\n  }\n\n  if (verified) {\n    return <div>Signed in successfully!</div>\n  }\n\n  return (\n    <div>\n      <h1>Sign in</h1>\n      <form onSubmit={submit}>\n        <input\n          type=\"email\"\n          placeholder=\"Enter email address\"\n          value={emailAddress}\n          onChange={(e) => setEmailAddress(e.target.value)}\n        />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in User.getOrganizationSuggestions\nDESCRIPTION: Demonstration of pagination argument changes in User.getOrganizationSuggestions method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_17\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for User.getOrganizationSuggestions in JavaScript\nDESCRIPTION: The pagination arguments for User.getOrganizationSuggestions have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification with Clerk in Sinatra (Ruby)\nDESCRIPTION: Illustrates using the `reverify` filter in conjunction with `auth: true` to add a step-up authentication requirement for sensitive routes. The `/super-secret-admin` route uses the default `STRICT` reverification preset, while `/chill-admin` explicitly uses the `LAX` preset (`Clerk::StepUp::Preset::LAX`). Authenticated users accessing these routes may be prompted to re-authenticate based on the preset and their last verification time. Requires `Sinatra::Clerk` registration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/sinatra.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"clerk/sinatra\"\nrequire \"sinatra/base\"\n\nclass App < Sinatra::Base\n  register Sinatra::Clerk\n\n  get \"/\" do\n    erb :index, format: :html5\n  end\n\n  # Protect the \"/super-secret-admin\" route with the `auth` and `reverify` filters\n  # Reverification preset defaults to `STRICT`\n  post \"/super-secret-admin\", auth: true, reverify: true do\n    {message: clerk.user? ? \"Valid session\" : \"Not logged in\"}.to_json\n  end\n\n  # Protect the \"/chill-admin\" route with the `auth` and `reverify` filters\n  # Reverification preset is set to `LAX`\n  post \"/chill-admin\", auth: true, reverify: Clerk::StepUp::Preset::LAX do\n    {message: clerk.user? ? \"Valid session\" : \"Not logged in\"}.to_json\n  end\n\n  run! if app_file == $0\nend\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Reverification to Specific Rails Actions (Ruby)\nDESCRIPTION: Shows how to secure the `destroy` action in `AdminController` with Clerk's step-up authentication (reverification) using `before_action :require_reverification!`. It specifies the `LAX` preset (`Clerk::StepUp::Preset::LAX`) for reverification requirements using the `preset` option. This action requires the user to re-authenticate even if they have an active session, adding an extra layer of security on top of the general `require_clerk_session!` protection applied to the entire controller.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rails.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ruby\nCODE:\n```\n```ruby\nclass AdminController < ApplicationController\n  # Protect routes with the `require_clerk_session!` method\n  before_action :require_clerk_session!\n  # Protect `destroy` with the `require_reverification!` method\n  # Reverification preset is set to `LAX`\n  before_action :require_reverification!, only: :destroy, preset: Clerk::StepUp::Preset::LAX\n\n\n  def index\n    # ...\n  end\n\n  def destroy\n    # ...\n  end\nend\n```\n```\n\n----------------------------------------\n\nTITLE: Detecting Active Organization on Client Side with Clerk useAuth - TypeScript\nDESCRIPTION: This client-side hook usage example detects a user's active organization using Clerk's useAuth(). orgId is accessed via the hook and checked for null to determine session state. Requires @clerk/nextjs, must be used in a React component, and should run in a Next.js 'use client' context. Inputs: user session info, Outputs: Boolean hasActiveOrg is true if the user has an active organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_3\n\nLANGUAGE: TSX\nCODE:\n```\n'use client'\nimport { useAuth } from '@clerk/nextjs'\n\nexport default function Layout() {\n  const { orgId } = useAuth()\n\n  const hasActiveOrg = orgId !== null\n  // ...\n}\n\n```\n\n----------------------------------------\n\nTITLE: Applying CSS Module Styles to Clerk SignIn in Next.js App Router (TSX)\nDESCRIPTION: Demonstrates importing a CSS module (`styles/SignIn.module.css`) and applying its `primaryColor` class to the `formButtonPrimary` element of the Clerk `<SignIn>` component using the `appearance.elements` prop within the root layout (`app/layout.tsx`) of a Next.js App Router application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/layout.tsx', mark: [[9, 15]] }}\nimport styles from '../styles/SignIn.module.css'\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <SignIn\n            appearance={{\n              elements: {\n                formButtonPrimary: styles.primaryColor,\n              },\n            }}\n          />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Getting Organization Memberships - Clerk JavaScript - JavaScript\nDESCRIPTION: Fetches the current user's organization memberships in Clerk using getOrganizationMemberships. Returns paginated results with membership details. Optional paging parameters can be passed. Useful for listing organizations associated with a user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.getOrganizationMemberships()\n```\n\n----------------------------------------\n\nTITLE: Overriding Clerk Auth Filter Behavior in Sinatra (Ruby)\nDESCRIPTION: Demonstrates how to override the default redirection behavior of the `auth` filter using `set(:auth)`. In this configuration, if an unauthenticated user tries to access a route protected with `auth: true` (like `/admin`), they will be redirected to the application's homepage (`/`) instead of the default Clerk sign-in page. Requires the `Sinatra::Clerk` extension to be registered.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/sinatra.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"clerk/sinatra\"\nrequire \"sinatra/base\"\n\nclass App < Sinatra::Base\n  register Sinatra::Clerk\n\n  # Set `auth` to perform custom behavior\n  set(:auth) do |active|\n    condition do\n      # If the user is not authenticated, redirect to the homepage\n      if active && !clerk.session\n        puts \"User is not authenticated, redirecting to the homepage\"\n        redirect '/'\n      end\n    end\n  end\n\n  get \"/\" do\n    erb :index, format: :html5\n  end\n\n  # Protect the \"/admin\" route with the `auth` filter\n  # which will perform the custom behavior set in `set(:auth)`\n  get \"/admin\", auth: true do\n    @user = clerk.user\n    erb :admin, format: :html5\n  end\n\n  run! if app_file == $0\nend\n```\n\n----------------------------------------\n\nTITLE: Fetching User Data Server-Side in a TanStack React Start Server Function (TSX)\nDESCRIPTION: This snippet demonstrates how to use `getAuth` from `@clerk/tanstack-react-start/server` within a TanStack React Start server function (`createServerFn`) to retrieve the current user's ID. It protects the function by redirecting unauthenticated users. It then uses `createClerkClient` (Clerk Backend SDK) and the `userId` to fetch the full user object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes/index.tsx' }}\nimport { createFileRoute, useRouter, redirect } from '@tanstack/react-router'\nimport { createServerFn } from '@tanstack/react-start'\nimport { getAuth } from '@clerk/tanstack-react-start/server'\nimport { getWebRequest } from '@tanstack/react-start/server'\n\nconst authStateFn = createServerFn({ method: 'GET' }).handler(async () => {\n  // Use `getAuth()` to retrieve the user's ID\n  const { userId } = await getAuth(getWebRequest())\n\n  // Protect the server function by checking if the user is signed in\n  if (!userId) {\n    // This might error if you're redirecting to a path that doesn't exist yet\n    // You can create a sign-in route to handle this\n    throw redirect({\n      to: '/sign-in/$',\n    })\n  }\n\n  // Instantiate the Backend SDK\n  const clerkClient = createClerkClient({\n    secretKey: import.meta.env.CLERK_SECRET_KEY,\n  })\n\n  // Get the user's full `Backend User` object\n  const user = userId ? await clerkClient.users.getUser(userId) : null\n\n  return { user }\n})\n\nexport const Route = createFileRoute('/')({\n  component: Home,\n  beforeLoad: () => authStateFn(),\n  loader: async ({ context }) => {\n    return { userId: context.userId, user: context.user }\n  },\n})\n\nfunction Home() {\n  const state = Route.useLoaderData()\n\n  return (\n    <div>\n      <h1>Welcome, {state.user?.firstName}!</h1>\n      <p>Your ID is {state.userId}</p>\n    </div>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Organization Selection Page Implementation\nDESCRIPTION: Client-side component that renders the organization selection interface using Clerk's OrganizationList component. Handles redirect URLs through search parameters for seamless navigation after organization selection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { OrganizationList } from '@clerk/nextjs'\nimport { useSearchParams } from 'next/navigation'\n\nexport default function OrganizationSelection() {\n  const searchParams = useSearchParams()\n  const redirectUrl = searchParams.get('redirectUrl') ?? '/'\n\n  return (\n    <section>\n      <h1>Welcome to the Organization Selection page.</h1>\n      <p>\n        This part of the application requires the user to select an organization in order to\n        proceed. If you are not part of an organization, you can accept an invitation or create your\n        own organization.\n      </p>\n      <OrganizationList\n        hidePersonal={true}\n        afterCreateOrganizationUrl={redirectUrl}\n        afterSelectOrganizationUrl={redirectUrl}\n      />\n    </section>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing authenticated Fauna queries with Clerk in Next.js\nDESCRIPTION: React component that demonstrates how to use Clerk's authentication to make authenticated queries to a Fauna database in a Next.js application. The code shows how to get a JWT token from Clerk and use it to initialize a Fauna client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n'use client'\n\nimport React from 'react'\nimport { useAuth } from '@clerk/nextjs'\nimport { Client, fql } from 'fauna'\n\nexport default function Page() {\n  const [message, setMessage] = React.useState('')\n  // The `useAuth()` hook is used to get the `getToken()` method.\n  const { getToken } = useAuth()\n\n  // Create a function to make a query to Fauna.\n  const makeQuery = async () => {\n    let client\n\n    try {\n      // Get the custom Fauna token from Clerk.\n      const clerkToken = await getToken({ template: 'fauna' })\n\n      if (!clerkToken) {\n        setMessage('No token found')\n        return\n      }\n\n      // Initialize a new Fauna client with the Clerk token.\n      client = new Client({ secret: clerkToken })\n\n      // Make a query to Fauna.\n      const response = await client.query(fql`'Hello World!'`)\n      setMessage(JSON.stringify(response))\n    } catch (error) {\n      console.error(error)\n      setMessage('Error occurred')\n    } finally {\n      if (client) client.close()\n    }\n  }\n\n  return (\n    <>\n      <button onClick={makeQuery}>Make authenticated query</button>\n      <p>Message: {message}</p>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Allowlist Identifier List Retrieval in JavaScript\nDESCRIPTION: This snippet demonstrates the change in response payload for the getAllowlistIdentifierList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Updating Invitation List Retrieval in JavaScript\nDESCRIPTION: This snippet shows the change in response payload for the getInvitationList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Client Initialization Parameter from frontendApi to publishableKey\nDESCRIPTION: Demonstrates the parameter name change from frontendApi to publishableKey when initializing a Clerk client, along with the updated import from @clerk/backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_46\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/backend'\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = Clerk({ frontendApi: '...' })\nconst clerkClient = createClerkClient({ publishableKey: '...' })\n\nclerkClient.authenticateRequest({ frontendApi: '...' })\nclerkClient.authenticateRequest({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Initiating Web3 Wallet Verification in Clerk using TypeScript\nDESCRIPTION: This function initiates the sign-up verification process using a Web3 wallet (MetaMask, Coinbase Wallet, OKX Wallet). It's a convenience wrapper around `SignUp.prepareVerification` for Web3 strategies. It accepts optional `PrepareWeb3WalletVerificationParams` to specify the exact Web3 strategy. The function sends the wallet address and retrieves a nonce for signing, returning a Promise that resolves with the `SignUpResource`. Verification fails if the address is invalid or already verified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareWeb3WalletVerification(\n  params?: PrepareWeb3WalletVerificationParams,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Integrating Sign-Up/Sign-In View into ContentView in SwiftUI (Swift)\nDESCRIPTION: This updated `ContentView` snippet demonstrates integrating the `SignUpOrSignInView` for unauthenticated users. Instead of just showing a text message when `clerk.user` is nil, it now renders the `SignUpOrSignInView`, presenting the user with the interactive sign-up or sign-in interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_5\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'ContentView.swift', mark: [12] }}\nimport SwiftUI\nimport Clerk\n\nstruct ContentView: View {\n  @Environment(Clerk.self) private var clerk\n\n  var body: some View {\n    VStack {\n      if let user = clerk.user {\n        Text(\"Hello, \\(user.id)\")\n      } else {\n        SignUpOrSignInView()\n      }\n    }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Using authenticateWithWeb3 with Identifier in JavaScript\nDESCRIPTION: Illustrates calling the `authenticateWithWeb3` method on `clerk.signUp`, providing the required `identifier` (Web3 wallet address) parameter. This example initiates the Web3 authentication flow, assuming the `generateSignature` function will be handled internally or requires further implementation detail not shown here. The resulting `SignUpResource` is assigned to `signUp`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nconst signUp = await clerk.signUp.authenticateWithWeb3({\n  identifier: '0x1234567890123456789012345678901234567890',\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Remix\nDESCRIPTION: This snippet demonstrates how to create a dedicated SignUp page in a Remix application. It imports the SignUp component from @clerk/remix and renders it as a functional component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignUp } from '@clerk/remix'\n\nexport default function SignUpPage() {\n  return <SignUp />\n}\n```\n\n----------------------------------------\n\nTITLE: Adding the Start Step for Clerk Sign-Up Flow\nDESCRIPTION: This code adds the 'start' step to the sign-up flow using the SignUp.Step component. It demonstrates how to structure the initial step of the sign-up process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <SignUp.Root>\n      <SignUp.Step name=\"start\">\n        <h1>Create an account</h1>\n      </SignUp.Step>\n    </SignUp.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Setting InstantDB Environment Variables\nDESCRIPTION: Environment variable configuration in the .env file for storing InstantDB App ID and Clerk Client Name credentials.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_INSTANTDB_APP_ID=\nNEXT_PUBLIC_CLERK_CLIENT_NAME=\n```\n\n----------------------------------------\n\nTITLE: Programmatically Managing Verified Domains with Clerk API in TypeScript\nDESCRIPTION: This snippet demonstrates a custom flow for managing verified domains using the Clerk frontend API within a React/TypeScript application. It utilizes the `useOrganization` hook to get the organization context and then calls methods like `createDomain` to add a new domain, `prepareAffiliationVerification` and `attemptAffiliationVerification` to handle email-based verification, and `updateEnrollmentMode` to set the desired enrollment behavior (e.g., 'automatic_invitation').\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verified-domains.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst { organization, domains } = useOrganization()\n\n// create domain\nconst domain = await organization.createDomain('example.com')\n\n// prepare email verification\ndomain.prepareAffiliationVerification({ affiliationEmailAddress: 'foo@example.com' })\n\n// attempt email verification\ndomain.attemptAffiliationVerification({ code: '123456' })\n\n// update domain enrollment mode\ndomain.updateEnrollmentMode({ enrollmentMode: 'automatic_invitation' })\n```\n\n----------------------------------------\n\nTITLE: Conditional Rendering Using the `condition` Prop with Clerk `<Protect>`\nDESCRIPTION: Illustrates using the `condition` prop of `<Protect>` for more complex authorization logic. It accepts a function that receives a `has` helper to check for multiple roles or permissions (e.g., admin OR billing manager). Fallback content is displayed if the condition is false. Examples for Next.js (TSX), Astro, Vue, and Expo (TSX).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/protect.mdx#_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// filename: 'app/dashboard/settings/layout.tsx'\nimport type { PropsWithChildren } from 'react'\nimport { Protect } from '@clerk/nextjs'\n\nexport default function SettingsLayout(props: PropsWithChildren) {\n  return (\n    <Protect\n      condition={(has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })}\n      fallback={<p>Only an Admin or Billing Manager can access this content.</p>}\n    >\n      {props.children}\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { Protect } from '@clerk/astro/components'\n---\n\n<Protect condition={(has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })}>\n  <p slot=\"fallback\">Only an Admin or Billing Manager can access this content.</p>\n  <slot />\n</Protect>\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { Protect } from '@clerk/vue'\n</script>\n\n<template>\n  <Protect :condition=\"(has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })\">\n    <template #fallback>\n      <p>Only an Admin or Billing Manager can access this content.</p>\n    </template>\n    <p>Visible content.</p>\n  </Protect>\n</template>\n```\n\nLANGUAGE: tsx\nCODE:\n```\n// filename: 'app/dashboard/settings/_layout.tsx'\nimport { Slot } from 'expo-router'\nimport { Protect } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function SettingsLayout() {\n  return (\n    <Protect\n      condition={(has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' })}\n      fallback={<Text>Only an Admin or Billing Manager can access this content.</Text>}\n    >\n      <Slot />\n    </Protect>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Wrapping Next.js App with ClerkProvider and UI Components (TypeScript/TSX)\nDESCRIPTION: Illustrates how to wrap the main Next.js application component in `pages/_app.tsx` with the `<ClerkProvider>`. This makes Clerk's authentication context and hooks available throughout the application. The example also shows the usage of `<SignedIn>`, `<SignedOut>`, `<UserButton>`, and `<SignInButton>` components to render different UI elements conditionally based on the user's authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport '@/styles/globals.css'\nimport { ClerkProvider, SignInButton, SignedIn, SignedOut, UserButton } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Accessing User ID from Session Claims in Pages Router\nDESCRIPTION: Code snippet showing how to access user ID from session claims in Next.js Pages Router using getAuth() helper.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\nimport { getAuth, buildClerkProps } from '@clerk/nextjs/server'\nimport { GetServerSideProps } from 'next'\n```\n\n----------------------------------------\n\nTITLE: Authorization in Next.js Pages Router\nDESCRIPTION: This example shows how to use `getAuth()` and `has()` in a Next.js Pages Router application to check both authentication and authorization. It checks for the 'org:team_settings:read' permission and returns appropriate error responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\n\nexport default async function handler(req: NextApiRequest) {\n  const { userId, has } = await getAuth(req)\n\n  // Check if the user is authenticated\n  if (!userId) return res.status(401)\n\n  // Check if the user is authorized\n  const canRead = has({ permission: 'org:team_settings:read' })\n\n  // If has() returns false, the user does not have the correct permissions\n  // You can choose how your app responds. This example returns a 403 error.\n  if (!canRead) return res.status(403)\n\n  // If the user is both authenticated and authorized, move forward with your logic\n  return users.getTeams(userId)\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Localization in Vanilla JavaScript with ClerkJS (JavaScript/HTML)\nDESCRIPTION: Illustrates how to use localization with the ClerkJS library in a plain JavaScript setup. Import the locale object (e.g., `frFR`) in your main JavaScript file (`main.js`) and pass it to the `clerk.load()` method via the `localization` option. The accompanying `index.html` provides the necessary HTML structure (`<div id=\"app\">`) and includes the script to mount Clerk components with the specified localization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'main.js', mark: [2, 3, [8, 10]] }}\nimport { Clerk } from '@clerk/clerk-js'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load({\n  localization: frFR,\n})\n\nif (clerk.user) {\n  document.getElementById('app').innerHTML = `\n      <div id=\"user-button\"></div>\n    `\n\n  const userButtonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userButtonDiv)\n} else {\n  document.getElementById('app').innerHTML = `\n      <div id=\"sign-in\"></div>\n    `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n```\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html' }}\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n    <script type=\"module\" src=\"main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n```\n\n----------------------------------------\n\nTITLE: Next.js Email Verification Implementation\nDESCRIPTION: React component for handling email addition and verification using Clerk in Next.js. Uses useUser and useReverification hooks to manage the email addition process and verification flow with OTP codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/add-email.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { EmailAddressResource } from '@clerk/types'\n\nexport default function Page() {\n  const { isLoaded, user } = useUser()\n  const [email, setEmail] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const [isVerifying, setIsVerifying] = React.useState(false)\n  const [successful, setSuccessful] = React.useState(false)\n  const [emailObj, setEmailObj] = React.useState<EmailAddressResource | undefined>()\n  const createEmailAddress = useReverification((email: string) =>\n    user?.createEmailAddress({ email }),\n  )\n\n  if (!isLoaded) return null\n\n  if (isLoaded && !user?.id) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      const res = await createEmailAddress(email)\n      await user.reload()\n\n      const emailAddress = user.emailAddresses.find((a) => a.id === res?.id)\n      setEmailObj(emailAddress)\n\n      emailAddress?.prepareVerification({ strategy: 'email_code' })\n\n      setIsVerifying(true)\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  const verifyCode = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      const emailVerifyAttempt = await emailObj?.attemptVerification({ code })\n\n      if (emailVerifyAttempt?.verification.status === 'verified') {\n        setSuccessful(true)\n      } else {\n        console.error(JSON.stringify(emailVerifyAttempt, null, 2))\n      }\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  if (successful) {\n    return (\n      <>\n        <h1>Email added!</h1>\n      </>\n    )\n  }\n\n  if (isVerifying) {\n    return (\n      <>\n        <h1>Verify email</h1>\n        <div>\n          <form onSubmit={(e) => verifyCode(e)}>\n            <div>\n              <label htmlFor=\"code\">Enter code</label>\n              <input\n                onChange={(e) => setCode(e.target.value)}\n                id=\"code\"\n                name=\"code\"\n                type=\"text\"\n                value={code}\n              />\n            </div>\n            <div>\n              <button type=\"submit\">Verify</button>\n            </div>\n          </form>\n        </div>\n      </>\n    )\n  }\n\n  return (\n    <>\n      <h1>Add Email</h1>\n      <div>\n        <form onSubmit={(e) => handleSubmit(e)}>\n          <div>\n            <label htmlFor=\"email\">Enter email address</label>\n            <input\n              onChange={(e) => setEmail(e.target.value)}\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              value={email}\n            />\n          </div>\n          <div>\n            <button type=\"submit\">Continue</button>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Clerk MFA Implementation\nDESCRIPTION: JavaScript code for implementing MFA sign-in with Clerk. Handles initialization of Clerk client and form submission handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  document.getElementById('sign-in-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const emailAddress = formData.get('email')\n    const password = formData.get('password')\n\n    try {\n      await clerk.client.signIn.create({\n        identifier: emailAddress,\n        password,\n      })\n    }\n```\n\n----------------------------------------\n\nTITLE: Setting Up Providers in Next.js with Clerk and Nhost\nDESCRIPTION: React component configuration for Next.js that integrates both Nhost and Clerk providers. This wraps the application to provide authentication context from both services and redirects unauthenticated users to sign in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/nhost.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { NhostNextProvider, NhostClient } from '@nhost/nextjs'\nimport { ClerkProvider, RedirectToSignIn, SignedIn, SignedOut } from '@clerk/nextjs'\n\nconst nhost = new NhostClient({\n  subdomain: process.env.NEXT_PUBLIC_NHOST_SUBDOMAIN || '',\n  region: process.env.NEXT_PUBLIC_NHOST_REGION || '',\n})\n\nfunction MyApp({ Component, pageProps }) {\n  return (\n    <NhostNextProvider nhost={nhost} initial={pageProps.nhostSession}>\n      <ClerkProvider {...pageProps}>\n        <SignedIn>\n          <Component {...pageProps} />\n        </SignedIn>\n        <SignedOut>\n          <RedirectToSignIn />\n        </SignedOut>\n      </ClerkProvider>\n    </NhostNextProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using updateUserMetadata Function with Clerk Backend SDK\nDESCRIPTION: Example of how to use the updateUserMetadata function to update a user's public metadata. It demonstrates setting a simple key-value pair in the publicMetadata object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user-metadata.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.updateUserMetadata(userId, {\n  publicMetadata: {\n    example: 'metadata',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in React\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in a React application. This code creates a component that renders the OrganizationSwitcher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationSwitcher } from '@clerk/clerk-react'\n\nexport default function OrganizationSwitcherPage() {\n  return <OrganizationSwitcher />\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes Based on Authorization with auth.protect()\nDESCRIPTION: Demonstrates using auth.protect() for authorization-based route protection. This example restricts admin routes to users with specific permissions and returns a 404 error if the user lacks the required permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isProtectedRoute = createRouteMatcher(['/admin(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  // Restrict admin routes to users with specific permissions\n  if (isProtectedRoute(req)) {\n    await auth.protect((has) => {\n      return has({ permission: 'org:admin:example1' }) || has({ permission: 'org:admin:example2' })\n    })\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Middleware for Public Sign-In Routes in Next.js\nDESCRIPTION: This middleware setup creates a public route matcher for sign-in paths while protecting all other routes. It includes configuration for paths that should bypass Next.js internals and static files.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)']\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (!isPublicRoute(req)) {\n    await auth.protect()\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Email Verification Implementation\nDESCRIPTION: Addition of email verification step using SignIn.Strategy component to handle email code verification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <h1>Sign in to your account</h1>\n\n        <Clerk.Connection name=\"google\">Sign in with Google</Clerk.Connection>\n\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignIn.Action submit>Continue</SignIn.Action>\n      </SignIn.Step>\n\n      <SignIn.Step name=\"verifications\">\n        <SignIn.Strategy name=\"email_code\">\n          <h1>Check your email</h1>\n          <p>\n            We sent a code to <SignIn.SafeIdentifier />.\n          </p>\n\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Email code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignIn.Action submit>Continue</SignIn.Action>\n        </SignIn.Strategy>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a User in an Express Route (TypeScript)\nDESCRIPTION: This TypeScript snippet shows how to create a user within an Express application. It defines a POST route `/createUser`, imports `clerkClient` from `@clerk/express`, reads user data from the request body, calls `clerkClient.users.createUser`, and sends back a JSON response indicating success or failure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/creating-users.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/createUser', async (req, res) => {\n  const userData = req.body\n\n  try {\n    const user = await clerkClient.users.createUser(userData)\n    res.status(200).json({ message: 'User created', user })\n  } catch (error) {\n    console.log(error)\n    res.status(500).json({ error: 'Error creating user' })\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Paginating Organization Memberships with Clerk useOrganization in Vue\nDESCRIPTION: This Vue component demonstrates paginating organization memberships using the useOrganization composable from Clerk. It maintains local state for memberships and the current page, and uses the organization's getMemberships method to fetch data. The component displays paginated lists and navigation buttons, with loading states and fallbacks. Required dependencies are @clerk/vue and Vue's Composition API. The snippet is designed to be used within a Clerk-enabled Vue app, receiving page size and current page as parameters and outputting a list of memberships.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { ref, watchEffect } from 'vue'\nimport { OrganizationSwitcher, useOrganization } from '@clerk/vue'\n\nconst memberships = ref([])\nconst currentPage = ref(1)\nconst { organization, isLoaded } = useOrganization()\n\nconst pageSize = 5\n\nasync function fetchMemberships() {\n  if (!organization.value) {\n    return\n  }\n\n  // Use the `getMemberships()` method on the `organization` object to fetch the organization's memberships.\n  const { data } = await organization.value.getMemberships({\n    initialPage: currentPage.value,\n    pageSize: pageSize,\n  })\n  memberships.value = data\n}\n\nwatchEffect(() => {\n  if (!organization.value) {\n    return\n  }\n\n  fetchMemberships()\n})\n\nconst fetchPrevious = () => currentPage.value--\nconst fetchNext = () => currentPage.value++\n</script>\n\n<template>\n  <div v-if=\"!organization\">\n    <OrganizationSwitcher />\n  </div>\n\n  <div v-else-if=\"isLoaded\">\n    <h2>Organization members</h2>\n\n    <ul>\n      <li v-for=\"membership in memberships\" :key=\"membership.id\">\n        {{ membership.publicUserData.firstName }} {{ membership.publicUserData.lastName }} &lt;{{\n          membership.publicUserData.identifier\n        }}&gt; :: {{ membership.role }}\n      </li>\n    </ul>\n\n    <div>\n      <button :disabled=\"currentPage === 1\" @click=\"fetchPrevious\">Previous</button>\n      <button :disabled=\"memberships.length < pageSize\" @click=\"fetchNext\">Next</button>\n    </div>\n  </div>\n\n  <div v-else>\n    <p>Loading...</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with Next.js API Route\nDESCRIPTION: This snippet demonstrates how to update a user's unsafe metadata using Clerk's client in a Next.js API route. It receives a userId from a request and updates the user's birthday in the unsafeMetadata field.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(req) {\n  const { userId } = await req.json()\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    unsafeMetadata: {\n      birthday: '11-30-1969',\n    },\n  })\n\n  return Response.json({ success: true })\n}\n```\n\n----------------------------------------\n\nTITLE: Defining the SessionStatus Enum in TypeScript\nDESCRIPTION: A TypeScript type definition that enumerates all possible session status values. The enum includes statuses for active sessions, ended sessions, expired sessions, and various ways a session can be terminated or replaced.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/session-status.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\ntype SessionStatus =\n  | 'abandoned'\n  | 'active'\n  | 'ended'\n  | 'expired'\n  | 'removed'\n  | 'replaced'\n  | 'revoked'\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Remix\nDESCRIPTION: This snippet demonstrates how to customize all SignIn components in a Remix application by configuring the ClerkApp wrapper with appearance variables for consistent styling throughout the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    signIn: {\n      variables: {\n        colorPrimary: 'blue',\n        colorText: 'black',\n      },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Phone Number for User - Clerk JavaScript - JavaScript\nDESCRIPTION: Adds a phone number to the signed-in user account using Clerk's createPhoneNumber method. Requires '@clerk/clerk-js' and that phone numbers are enabled for the app. Input is an object with the phoneNumber string, and output is a resolved PhoneNumberResource. The phone number must be in E.164 format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.createPhoneNumber({ phoneNumber: '1234567890' })\n```\n\n----------------------------------------\n\nTITLE: Styling Clerk Elements with Tailwind CSS in React\nDESCRIPTION: Shows how to apply Tailwind CSS classes to Clerk Elements components for styling. This approach leverages existing Tailwind setup without additional configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step\n        name=\"start\"\n        className=\"bg-white w-96 rounded-2xl py-10 px-8 shadow-sm border space-y-6\"\n      >\n        <div className=\"grid grid-cols-2 gap-x-4\">\n          <Clerk.Connection\n            name=\"google\"\n            className=\"flex items-center gap-x-3 justify-center font-medium border shadow-sm py-1.5 px-2.5 rounded-md\"\n          >\n            <Clerk.Icon className=\"size-4\" />\n            Google\n          </Clerk.Connection>\n          <Clerk.Connection\n            name=\"github\"\n            className=\"flex items-center gap-x-3 justify-center font-medium border shadow-sm py-1.5 px-2.5 rounded-md\"\n          >\n            <Clerk.Icon className=\"size-4\" />\n            GitHub\n          </Clerk.Connection>\n        </div>\n        <Clerk.Field name=\"identifier\" className=\"space-y-2\">\n          <Clerk.Label className=\"text-sm font-medium\">Email</Clerk.Label>\n          <Clerk.Input className=\"w-full border rounded-md py-1.5 px-2.5\" />\n          <Clerk.FieldError className=\"block text-red-500 text-sm\" />\n        </Clerk.Field>\n        <SignIn.Action submit className=\"bg-black text-white rounded-md py-1.5 px-2.5\">\n          Continue\n        </SignIn.Action>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoading in Remix\nDESCRIPTION: Example of ClerkLoading component usage in a Remix application using @clerk/remix package. Shows how to handle loading states in Remix routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loading.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoading, ClerkLoaded } from '@clerk/remix'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Index() {\n  return (\n    <>\n      <ClerkLoading>\n        <p>Clerk is loading</p>\n      </ClerkLoading>\n      <ClerkLoaded>\n        <p>Clerk has loaded</p>\n      </ClerkLoaded>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pagination for Organization Memberships\nDESCRIPTION: Shows how to implement pagination for organization memberships using ClerkPaginatedResponse, including previous/next navigation and member list display.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/organization-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useState, useEffect } from 'react'\nimport { $organizationStore } from '@clerk/astro/client'\nimport { useStore } from '@nanostores/react'\n\nexport default function OrganizationMembers() {\n  const [memberships, setMemberships] = useState([])\n  const [currentPage, setCurrentPage] = useState(1)\n  const organization = useStore($organizationStore)\n\n  const pageSize = 10\n\n  useEffect(() => {\n    fetchMemberships()\n  }, [currentPage, organization])\n\n  const fetchMemberships = async () => {\n    if (!organization) {\n      return\n    }\n\n    const { data } = await organization.getMemberships({\n      initialPage: currentPage,\n      pageSize: 5,\n    })\n    setMemberships(data)\n  }\n\n  const fetchPrevious = () => setCurrentPage(currentPage - 1)\n  const fetchNext = () => setCurrentPage(currentPage + 1)\n\n  if (organization === undefined) {\n    // Handle loading state\n    return null\n  }\n\n  if (organization === null) {\n    // Handle no organization state\n    return null\n  }\n\n  return (\n    <div>\n      <h2>Organization members</h2>\n      <ul>\n        {memberships.map((membership) => (\n          <li key={membership.id}>\n            {membership.publicUserData.firstName} {membership.publicUserData.lastName} &lt;\n            {membership.publicUserData.identifier}&gt; :: {membership.role}\n          </li>\n        ))}\n      </ul>\n      <div>\n        <button onClick={fetchPrevious} disabled={currentPage === 1}>\n          Previous\n        </button>\n        <button onClick={fetchNext}>Next</button>\n      </div>\n    </div>\n  )\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $organization } from '@clerk/astro/client'\nimport { ref, watchEffect } from 'vue'\n\nconst memberships = ref([])\nconst currentPage = ref(1)\nconst organization = useStore($organizationStore)\n\nconst pageSize = 10\n\nconst fetchMemberships = async () => {\n  if (!organization.value) {\n    return\n  }\n\n  const { data } = await organization.value.getMemberships({\n    initialPage: currentPage.value,\n    pageSize: 5,\n  })\n  memberships.value = data\n}\n\nwatchEffect(() => {\n  if (!organization.value) {\n    return\n  }\n\n  fetchMemberships()\n})\n\nconst fetchPrevious = () => currentPage.value--\nconst fetchNext = () => currentPage.value++\n</script>\n\n<template>\n  <div v-if=\"organization === undefined\">\n    <!-- Handle loading state -->\n  </div>\n  <div v-else-if=\"organization === null\">\n    <!-- Handle no organization state -->\n  </div>\n  <div v-else>\n    <h2>Organization members</h2>\n    <ul>\n      <li v-for=\"membership in memberships\" :key=\"membership.id\">\n        {{ membership.publicUserData.firstName }} {{ membership.publicUserData.lastName }} &lt;{{\n          membership.publicUserData.identifier\n        }}&gt; :: {{ membership.role }}\n      </li>\n    </ul>\n    <div>\n      <button @click=\"fetchPrevious\" :disabled=\"currentPage === 1\">Previous</button>\n      <button @click=\"fetchNext\">Next</button>\n    </div>\n  </div>\n</template>\n```\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $organizationStore as organization } from '@clerk/astro/client'\n\n  let memberships = []\n  let currentPage = 1\n\n  async function fetchMemberships() {\n    if (!$organization) {\n      return\n    }\n\n    const { data } = await $organization.getMemberships({\n      initialPage: currentPage,\n      pageSize: 5,\n    })\n    memberships = data\n  }\n\n  $: fetchMemberships()\n\n  const fetchPrevious = () => currentPage.value--\n  const fetchNext = () => currentPage.value++\n</script>\n\n{#if organization === undefined}\n  <!-- Handle loading state -->\n{:else if organization === null}\n  <!-- Handle no organization state -->\n{:else}\n  <div>\n    <h2>Organization members</h2>\n    <ul>\n      {#each memberships as membership (membership.id)}\n        <li>\n          {membership.publicUserData.firstName}\n          {membership.publicUserData.lastName} &lt;\n          {membership.publicUserData.identifier}&gt; :: {membership.role}\n        </li>\n      {/each}\n    </ul>\n    <div>\n      <button on:click={fetchPrevious} disabled={currentPage === 1}>Previous</button>\n      <button on:click={fetchNext}>Next</button>\n    </div>\n  </div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Implementing getToken() in Remix\nDESCRIPTION: Example of using getToken() in a Remix action function. It checks for an active session, retrieves a token, and returns it in the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/remix/api.server'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { ActionFunction, json } from '@remix-run/node'\n\nexport const action: ActionFunction = async (req) => {\n  const { sessionId } = await getAuth(req)\n\n  const template = 'test'\n\n  const token = await createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n  }).sessions.getToken(sessionId, template)\n\n  return json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Using ClerkLoaded in Next.js App Router\nDESCRIPTION: This snippet demonstrates how to use the ClerkLoaded component in a Next.js application using the App Router. It wraps child components to ensure Clerk has loaded before rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loaded.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded } from '@clerk/nextjs'\n\nexport default function Page() {\n  return (\n    <ClerkLoaded>\n      <p>Clerk has loaded</p>\n      <MyCustomSignInFlow />\n    </ClerkLoaded>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Organization Invitation with Metadata using cURL (Bash)\nDESCRIPTION: This cURL command demonstrates adding public metadata when creating an organization invitation via the Clerk Backend API. The `public_metadata` field in the JSON payload accepts an object. This metadata will be transferred to the resulting organization membership's public metadata once the user accepts the invitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/invitations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/organizations/{org_123}/invitations' \\\n  -X POST \\\n  -H 'Authorization: Bearer {{secret}}' \\\n  -H 'Content-Type: application/json' \\\n  -d '{ \"inviter_user_id\": \"user_123\", \"email_address\": \"email@example.com\", \"role\": \"org:member\", \"public_metadata\": {\"department\": \"marketing\"} }'\n```\n\n----------------------------------------\n\nTITLE: Using setActive with Organization in JavaScript\nDESCRIPTION: Example showing how to use the new setActive method with organization parameters. This allows setting both an active session and organization simultaneously.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_46\n\nLANGUAGE: javascript\nCODE:\n```\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\n\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Private Metadata with Clerk Ruby SDK (Ruby)\nDESCRIPTION: This Ruby example demonstrates how to assign private metadata to a Clerk user, useful for sensitive information (e.g., Stripe ID). It initializes Clerk's SDK, builds a metadata hash, and performs the update using 'updateMetadata.' Requires the 'clerk' gem and an API key. Private metadata isn't accessible from frontend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ruby\nCODE:\n```\n# ruby json example with a private metadata and stripe id\nrequire 'clerk'\nrequire 'json'\n\nprivateMetadata = {\n  \"stripeID\": stripeCustomerID\n}\n\n\nclerk = Clerk::SDK.new(api_key: \"your_clerk_secret_key\")\nclerk.users.updateMetadata(\"user_xyz\", private_metadata: privateMetadata)\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in Tanstack React Start\nDESCRIPTION: Shows how to use the SignInButton component in a Tanstack React Start project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignInButton } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-in')({\n  component: SignIn,\n})\n\nfunction SignIn() {\n  return <SignInButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Astro\nDESCRIPTION: Astro-specific implementation of the SignedOut component for conditional rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_4\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignedOut } from '@clerk/astro/components'\n---\n\n<SignedOut>\n  <div>You are signed out</div>\n</SignedOut>\n<p>This content is always visible.</p>\n```\n\n----------------------------------------\n\nTITLE: Opening UserProfile Component as Overlay with JavaScript\nDESCRIPTION: Demonstrates how to open the <UserProfile /> component as an overlay using Clerk's JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-profile\"></div>\n`\n\nconst userProfileDiv = document.getElementById('user-profile')\n\nclerk.openUserProfile(userProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInWithMetamaskButton in Next.js\nDESCRIPTION: Demonstrates how to import and use the SignInWithMetamaskButton component in a Next.js application. This snippet shows the basic implementation in a home page component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return <SignInWithMetamaskButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in Astro\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in an Astro application. This code creates a page that renders the OrganizationSwitcher component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { OrganizationSwitcher } from '@clerk/astro/components'\n---\n\n<OrganizationSwitcher />\n```\n\n----------------------------------------\n\nTITLE: Authenticated SWR Hook Implementation\nDESCRIPTION: Custom hook combining SWR with Clerk authentication for data fetching in React applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport useSWR from 'swr'\n\nexport default async function useClerkSWR(url: string) {\n  const { getToken } = useAuth()\n\n  const token = await getToken()\n\n  const fetcher = async (...args: [RequestInfo]) => {\n    return fetch(...args, {\n      headers: { Authorization: `Bearer ${token}` },\n    }).then((res) => res.json())\n  }\n\n  return useSWR(url, fetcher)\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing the Waitlist Component in Next.js\nDESCRIPTION: Basic implementation of the Clerk Waitlist component on the home page of a Next.js application to allow users to join a waitlist.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Waitlist } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <Waitlist />\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Clerk Email Link Sign-Up Flow in TypeScript\nDESCRIPTION: Defines the `createEmailLinkFlow` function signature in TypeScript. This function returns an object containing two methods: `startEmailLinkFlow` (async, initiates the flow, sends the email link, and starts polling, taking `StartEmailLinkFlowParams`) and `cancelEmailLinkFlow` (stops the polling). It's used to manage sign-ups via email link verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailLinkFlow(): {\n  startEmailLinkFlow: (params: StartEmailLinkFlowParams) => Promise<SignUp>\n  cancelEmailLinkFlow: () => void\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailLinkFlow(): {\n  startEmailLinkFlow: (params: StartEmailLinkFlowParams) => Promise<SignUpResource>\n  cancelEmailLinkFlow: () => void\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Custom Claims in Next.js App Router\nDESCRIPTION: Example of accessing custom session token claims (fullName and primaryEmail) using the auth() helper in Next.js App Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/custom-session-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nexport async function GET() {\n  const { sessionClaims } = await auth()\n\n  const fullName = sessionClaims?.fullName\n\n  const primaryEmail = sessionClaims?.primaryEmail\n\n  return NextResponse.json({ fullName, primaryEmail })\n}\n```\n\n----------------------------------------\n\nTITLE: Setting User Profile Image - Clerk JavaScript\nDESCRIPTION: Demonstrates updating or removing a user's profile image via the setProfileImage API in JavaScript, providing a file object as input. On success, returns details about the new profile image.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_29\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.setProfileImage({ file: profileImage })\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Routes with UserButton in Clerk for Next.js (TypeScript)\nDESCRIPTION: Implements a custom user profile menu using Clerk's UserButton component in a Next.js app (TypeScript/React). Demonstrates how to add a custom page and homepage link, each with an icon, before the default 'Account' and 'Security' pages by utilizing the 'label' and 'url' props as well as 'labelIcon'. Requires '@clerk/nextjs' as a dependency. The home component returns a header with the UserButton configured for profile route reordering; inputs are handled by Clerk's UI and no specific output is returned other than the rendered React component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_10\n\nLANGUAGE: TypeScript\nCODE:\n```\n'use client'\\n\\nimport { UserButton } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\\n    </svg>\\n  )\\n}\\n\\nconst CustomPage = () => {\\n  return (\\n    <div>\\n      <h1>Custom page</h1>\\n      <p>This is the content of the custom page.</p>\\n    </div>\\n  )\\n}\\n\\nexport default function Home() {\\n  return (\\n    <header>\\n      <UserButton>\\n        <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\" labelIcon={<DotIcon />}>\\n          <CustomPage />\\n        </UserButton.UserProfilePage>\\n        <UserButton.UserProfileLink label=\"Homepage\" url=\"/\" labelIcon={<DotIcon />} />\\n        <UserButton.UserProfilePage label=\"account\" />\\n        <UserButton.UserProfilePage label=\"security\" />\\n      </UserButton>\\n    </header>\\n  )\\n}\n```\n\n----------------------------------------\n\nTITLE: Defining FormPasswordIncorrectCode Error in JSON\nDESCRIPTION: This JSON object represents the error returned when the password provided by the user during a sign-in attempt is incorrect. It contains a `shortMessage` informing the user the password was wrong and a unique `code` for this error type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/forms.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Password is incorrect. Try again, or use another method.\",\n  \"code\": \"form_password_incorrect\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Next.js Pages Router\nDESCRIPTION: This code demonstrates how to use Clerk's UserButton component in a Next.js application using the Pages Router. It shows the setup of a header component and wrapping the application with ClerkProvider.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/nextjs'\n\nfunction Header() {\n  return (\n    <header style={{ display: 'flex', justifyContent: 'space-between', padding: 20 }}>\n      <h1>My App</h1>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n    </header>\n  )\n}\n\nfunction MyApp({ pageProps }) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <Header />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidHandshake (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when an initial handshake request between the frontend and Clerk's backend is invalid for a specified reason. The reason is typically included in the long message. It includes a short message, a long message with a placeholder `<REASON>`, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_21\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"invalid handshake\",\n  \"longMessage\": \"The handshake request is invalid: <REASON>\",\n  \"code\": \"invalid_handshake_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: JWT Claims Access in NextJS\nDESCRIPTION: Accessing JWT session claims in Next.js applications using various Clerk authentication methods.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidAuthentication (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when a request cannot be authenticated because it lacks an active session. It includes a short message, a long message indicating the need for an active session, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid authentication\",\n  \"longMessage\": \"Unable to authenticate the request, you need to supply an active session\",\n  \"code\": \"authentication_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims with @clerk/backend (TypeScript)\nDESCRIPTION: Demonstrates accessing JWT session claims (`JwtPayload`) using the generic `@clerk/backend` package via `clerkClient.authenticateRequest`. This illustrates another way the removed `orgs` claim might have been accessed in backend code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript {{ filename: '@clerk/backend' }}\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n```\n\n----------------------------------------\n\nTITLE: Detecting Clerk Impersonated Sessions in Express.js (JavaScript)\nDESCRIPTION: Illustrates using the `clerkMiddleware` from `@clerk/express` to inject Clerk's authentication context into the Express request object. Within a route handler, `req.auth` provides access to the `Auth` object, including `userId` (impersonated user) and `actor` (impersonator details), enabling backend detection of impersonation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nimport express from 'express'\nimport { clerkMiddleware } from '@clerk/express'\n\nconst app = express()\n// Apply the Express SDK middleware\napp.use(clerkMiddleware())\n\napp.get('/protected-endpoint', (req, res) => {\n  // Clerk's authentication context can be accessed from the request object\n  const { userId, actor } = req.auth\n\n  res.json({ userId, actor })\n})\n\napp.listen(3000, () => {\n  console.log('Booted.')\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Next.js API Auth with withAuth Helper (React/Next.js)\nDESCRIPTION: This example demonstrates the use of the updated withAuth helper for securing Next.js API endpoints using Clerk v3. It imports withAuth from '@clerk/nextjs/api' and applies it to an async handler, which receives an auth object on the request. getToken can retrieve a custom token (e.g., for Hasura). Requires @clerk/nextjs v3, Next.js API routes, and Clerk setup.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { withAuth } from '@clerk/nextjs/api'\n\nexport default withAuth(async (req, res) => {\n  const { userId, sessionId, getToken } = req.auth\n  const hasuraToken = await getToken({ template: 'hasura' })\n  // Your handler\n})\n```\n\n----------------------------------------\n\nTITLE: Authorization in Next.js Route Handlers using has()\nDESCRIPTION: This example shows how to use the `has()` function in a Next.js Route Handler to check both authentication and authorization. It checks for the 'org:team_settings:read' permission and returns appropriate error responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport const GET = async () => {\n  const { userId, has } = await auth()\n\n  // Check if the user is authenticated\n  if (!userId) {\n    return Response.json({ error: 'User is not signed in' }, { status: 401 })\n  }\n\n  // Check if the user is authorized\n  const canRead = has({ permission: 'org:team_settings:read' })\n\n  // If has() returns false, the user does not have the correct permissions\n  // You can choose how your app responds. This example returns a 403 error.\n  if (!canRead)\n    return Response.json({ error: 'User does not have the correct permissions' }, { status: 403 })\n\n  // If the user is both authenticated and authorized, move forward with your logic\n  return users.getTeams(userId)\n}\n```\n\n----------------------------------------\n\nTITLE: Authorization in JavaScript using Clerk SDK\nDESCRIPTION: This example shows how to use the Clerk JavaScript SDK to check authorization. It uses the `checkAuthorization()` method to verify if the user has the 'org:team_settings:manage' permission.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\n// Check if the user is authenticated\nif (clerk.user) {\n  // Check if the user is authorized\n  const canManageSettings = clerk.session.checkAuthorization({\n    permission: 'org:team_settings:manage',\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Biometric Credentials in Expo React Native\nDESCRIPTION: This code snippet shows how to manage biometric credentials in an Expo React Native app, including deleting stored credentials for the logged-in user using the useLocalCredentials() hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/local-credentials.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useUser, useClerk } from '@clerk/clerk-expo'\nimport { useLocalCredentials } from '@clerk/clerk-expo/local-credentials'\nimport { View, Text, Button } from 'react-native'\n\nexport default function Page() {\n  const { user } = useUser()\n  const { signOut } = useClerk()\n\n  const { userOwnsCredentials, clearCredentials } = useLocalCredentials()\n\n  return (\n    <View>\n      <Text>Settings, {user?.emailAddresses[0].emailAddress}</Text>\n      <Button title=\"Sign out\" onPress={() => signOut()} />\n      {userOwnsCredentials && (\n        <Button title=\"Remove biometric credentials\" onPress={() => clearCredentials()} />\n      )}\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Sign-In Page in Next.js with Clerk\nDESCRIPTION: This code creates a page component that renders Clerk's SignIn component. It uses Next.js optional catch-all routing to handle various sign-in paths.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Client List Retrieval in JavaScript\nDESCRIPTION: Demonstrates the change in the return structure of getClientList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_41\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Initializing an Infinite Organization List with Clerk in Next.js\nDESCRIPTION: This React component (`JoinedOrganizations`) uses the `useOrganizationList` hook from `@clerk/nextjs` with the `infinite: true` option to fetch all of a user's organization memberships. It displays the memberships in a table, allowing the user to set an organization as active using the `setActive` function. If no memberships are found, it renders a `CreateOrganization` component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n```jsx {{ filename: 'app/components/CustomOrganizationSwitcher.tsx', collapsible: true }}\n'use client'\n\nimport { useAuth, useOrganizationList } from '@clerk/nextjs'\nimport CreateOrganization from '../components/create-organization' // See /docs/custom-flows/create-organizations for this component\n\n// List user's organization memberships\nexport default function JoinedOrganizations() {\n  const { isLoaded, setActive, userMemberships } = useOrganizationList({\n    userMemberships: {\n      // Set pagination parameters\n      infinite: true,\n    },\n  })\n  const { orgId } = useAuth()\n\n  if (!isLoaded) {\n    return <p>Loading...</p>\n  }\n\n  return (\n    <>\n      <h1>Joined organizations</h1>\n      {userMemberships?.data?.length > 0 && (\n        <table>\n          <thead>\n            <tr>\n              <th>Identifier</th>\n              <th>Organization</th>\n              <th>Joined</th>\n              <th>Role</th>\n              <th>Set as active org</th>\n            </tr>\n          </thead>\n          <tbody>\n            {userMemberships?.data?.map((mem) => (\n              <tr key={mem.id}>\n                <td>{mem.publicUserData.identifier}</td>\n                <td>{mem.organization.name}</td>\n                <td>{mem.createdAt.toLocaleDateString()}</td>\n                <td>{mem.role}</td>\n                <td>\n                  {orgId === mem.organization.id ? (\n                    <button onClick={() => setActive({ organization: mem.organization.id })}>\n                      Set as active\n                    </button>\n                  ) : (\n                    <p>Currently active</p>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      {userMemberships?.data?.length === 0 && (\n        <div>\n          <p>No organizations found</p>\n          <CreateOrganization />\n        </div>\n      )}\n    </>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Signing out a User with Clerk in Playwright Tests using TypeScript\nDESCRIPTION: This snippet shows how to sign out a currently authenticated user in a Playwright test using `clerk.signOut()`. It first signs a user in using `clerk.signIn()`, navigates to a protected page, then calls `clerk.signOut({ page })` after navigating back to an unprotected page. Finally, it attempts to access the protected page again, expecting a redirect to the sign-in page. Dependencies include `@clerk/testing` and `playwright`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-helpers.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { clerk } from '@clerk/testing/playwright'\n\ntest('sign out', async ({ page }) => {\n  // Navigate to an unprotected page that loads Clerk\n  await page.goto('/')\n\n  await clerk.signIn({\n    page,\n    signInParams: { strategy: 'phone_code', identifier: '+15555550100' },\n  })\n\n  await page.goto('/protected')\n  await clerk.signOut({ page })\n  await page.goto('/protected')\n  // should redirect to sign in page\n})\n```\n\n----------------------------------------\n\nTITLE: Custom Reverification UI Implementation for User Email Updates in React\nDESCRIPTION: This code shows how to build a custom UI for the reverification process using useReverification() hook's onNeedsReverification option. The component manages the verification state and renders a custom verification component when reverification is needed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useReverification, useUser } from '@clerk/clerk-react'\nimport { isClerkRuntimeError, isReverificationCancelledError } from '@clerk/clerk-react/errors'\nimport { useState } from 'react'\nimport { SessionVerificationLevel } from '@clerk/types'\nimport { VerificationComponent } from './VerificationComponent'\n\nexport function UpdateUserEmail() {\n  // Use `useUser()` to get the current user's `User` object\n  // `User` includes the `update()` method to update the user's primary email address\n  const { user } = useUser()\n\n  // TODO: Update to use exported type once available\n  const [verificationState, setVerificationState] = useState<\n    | {\n        complete: () => void\n        cancel: () => void\n        level: SessionVerificationLevel | undefined\n        inProgress: boolean\n      }\n    | undefined\n  >(undefined)\n\n  // Use `useReverification()` to enhance the `update()` method\n  // to handle the reverification process\n  const changePrimaryEmail = useReverification(\n    (emailAddressId: string) => user?.update({ primaryEmailAddressId: emailAddressId }),\n    {\n      onNeedsReverification: ({ complete, cancel, level }) => {\n        setVerificationState({\n          complete,\n          cancel,\n          level,\n          inProgress: true,\n        })\n      },\n    },\n  )\n\n  const handleClick = async (emailAddressId: string) => {\n    try {\n      await changePrimaryEmail(emailAddressId)\n    } catch (e) {\n      // Handle if user cancels the reverification process\n      if (isClerkRuntimeError(e) && isReverificationCancelledError(e)) {\n        console.error('User cancelled reverification', e.code)\n      }\n\n      // Handle other errors\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(e, null, 2))\n    }\n  }\n\n  return (\n    <div>\n      <span>Your primary email address is {user?.primaryEmailAddress?.emailAddress}</span>\n\n      <ul>\n        {user?.emailAddresses.map((email) => (\n          <li key={email.id}>\n            <span>{email.emailAddress}</span>\n            {user?.primaryEmailAddressId !== email.id && (\n              <button onClick={() => handleClick(email.id)}>Make primary</button>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      {verificationState?.inProgress && (\n        <VerificationComponent\n          level={verificationState?.level}\n          onComplete={() => {\n            verificationState.complete()\n            setVerificationState(undefined)\n          }}\n          onCancel={() => {\n            verificationState.cancel()\n            setVerificationState(undefined)\n          }}\n\n```\n\n----------------------------------------\n\nTITLE: Using Clerk `<Protect>` Component for Client-Side Authorization in Next.js (TypeScript)\nDESCRIPTION: Demonstrates using the `<Protect>` component from `@clerk/nextjs` within a Next.js Client Component (`'use client'`). It conditionally renders a form if the user has the `org:team_settings:manage` permission, otherwise displaying a fallback paragraph. This approach prevents rendering for unauthorized users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { Protect } from '@clerk/nextjs'\n\nexport default function SettingsForm() {\n  return (\n    <Protect\n      permission=\"org:team_settings:manage\"\n      fallback={<p>You are not allowed to see this section.</p>}\n    >\n      <form>{/* Add UI for managing team settings */}</form>\n    </Protect>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring Phone Number Creation Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Defines the createPhoneNumber function for associating a user phone number with Clerk, requiring the phoneNumber parameter in E.164 format. Returns a Promise of PhoneNumberResource. Phone number identifier must be enabled in app settings; input is a CreatePhoneNumberParams object and the output is a confirmed or pending phone number resource.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createPhoneNumber(params: CreatePhoneNumberParams): Promise<PhoneNumberResource>\n```\n\n----------------------------------------\n\nTITLE: Using getUser Function with Clerk Backend SDK\nDESCRIPTION: Example of how to use the getUser function from the Clerk Backend SDK to retrieve a user by their ID. It demonstrates passing a user ID and awaiting the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.getUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Managing Organization Roles in Next.js with Clerk\nDESCRIPTION: A React component that implements organization role management using Clerk's useOrganization hook. Includes functionality for listing members, updating roles, and removing members with pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-roles.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useState, useEffect, ChangeEventHandler, useRef } from 'react'\nimport { useOrganization, useUser } from '@clerk/nextjs'\nimport type { OrganizationCustomRoleKey } from '@clerk/types'\n\nexport const OrgMembersParams = {\n  memberships: {\n    pageSize: 5,\n    keepPreviousData: true,\n  },\n}\n\n// List of organization memberships. Administrators can\n// change member roles or remove members from the organization.\nexport const ManageRoles = () => {\n  const { user } = useUser()\n  const { isLoaded, memberships } = useOrganization(OrgMembersParams)\n\n  if (!isLoaded) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <h1>Memberships List</h1>\n      <table>\n        <thead>\n          <tr>\n            <th>User</th>\n            <th>Joined</th>\n            <th>Role</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {memberships?.data?.map((mem) => (\n            <tr key={mem.id}>\n              <td>\n                {mem.publicUserData.identifier} {mem.publicUserData.userId === user?.id && '(You)'}\n              </td>\n              <td>{mem.createdAt.toLocaleDateString()}</td>\n              <td>\n                <SelectRole\n                  defaultRole={mem.role}\n                  onChange={async (e) => {\n                    await mem.update({\n                      role: e.target.value as OrganizationCustomRoleKey,\n                    })\n                    await memberships?.revalidate()\n                  }}\n                />\n              </td>\n              <td>\n                <button\n                  onClick={async () => {\n                    await mem.destroy()\n                    await memberships?.revalidate()\n                  }}\n                >\n                  Remove\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div>\n        <button\n          disabled={!memberships?.hasPreviousPage || memberships?.isFetching}\n          onClick={() => memberships?.fetchPrevious?.()}\n        >\n          Previous\n        </button>\n\n        <button\n          disabled={!memberships?.hasNextPage || memberships?.isFetching}\n          onClick={() => memberships?.fetchNext?.()}\n        >\n          Next\n        </button>\n      </div>\n    </>\n  )\n}\n\ntype SelectRoleProps = {\n  fieldName?: string\n  isDisabled?: boolean\n  onChange?: ChangeEventHandler<HTMLSelectElement>\n  defaultRole?: string\n}\n\nconst SelectRole = (props: SelectRoleProps) => {\n  const { fieldName, isDisabled = false, onChange, defaultRole } = props\n  const { organization } = useOrganization()\n  const [fetchedRoles, setRoles] = useState<OrganizationCustomRoleKey[]>([])\n  const isPopulated = useRef(false)\n\n  useEffect(() => {\n    if (isPopulated.current) return\n    organization\n      ?.getRoles({\n        pageSize: 20,\n        initialPage: 1,\n      })\n      .then((res) => {\n        isPopulated.current = true\n        setRoles(res.data.map((roles) => roles.key as OrganizationCustomRoleKey))\n      })\n  }, [organization?.id])\n\n  if (fetchedRoles.length === 0) return null\n\n  return (\n    <select\n      name={fieldName}\n      disabled={isDisabled}\n      aria-disabled={isDisabled}\n      onChange={onChange}\n      defaultValue={defaultRole}\n    >\n      {fetchedRoles?.map((roleKey) => (\n        <option key={roleKey} value={roleKey}>\n          {roleKey}\n        </option>\n      ))}\n    </select>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: External Data Retrieval with JWT Token\nDESCRIPTION: Shows how to retrieve a JWT token from a template and use it to fetch data from external sources like Supabase.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/endpoints.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function GET({ locals }) {\n  const { userId, getToken } = locals.auth()\n\n  if (!userId) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  const token = await getToken({ template: 'supabase' })\n\n  // Fetch data from Supabase and return it.\n  const data = { supabaseData: 'Hello World' }\n\n  return new Response(JSON.stringify(data))\n}\n```\n\n----------------------------------------\n\nTITLE: Instantiating Clerk Client in Next.js (TypeScript)\nDESCRIPTION: This TypeScript snippet shows the specific requirement in Next.js to `await` the instantiation of the `clerkClient` before using its methods like `createUser`. This is necessary due to Next.js's architecture.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/creating-users.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.createUser()\n```\n\n----------------------------------------\n\nTITLE: Implementing Form Fields for Clerk Sign-Up\nDESCRIPTION: This snippet demonstrates how to add form fields to the sign-up flow using Clerk Elements. It includes fields for username, email, and password, as well as social connection options and a submit button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <SignUp.Root>\n      <SignUp.Step name=\"start\">\n        <h1>Create an account</h1>\n\n        <Clerk.Connection name=\"google\">Sign up with Google</Clerk.Connection>\n\n        <Clerk.Field name=\"username\">\n          <Clerk.Label>Username</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <Clerk.Field name=\"emailAddress\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <Clerk.Field name=\"password\">\n          <Clerk.Label>Password</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignUp.Captcha />\n\n        <SignUp.Action submit>Sign up</SignUp.Action>\n      </SignUp.Step>\n    </SignUp.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in Next.js\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in a Next.js application using an optional catch-all route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationProfile } from '@clerk/nextjs'\n\nexport default function OrganizationProfilePage() {\n  return <OrganizationProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Client-Side Route Protection\nDESCRIPTION: Example of client-side route protection using Clerk's control components and user management components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  SignedIn,\n  UserButton,\n  SignOutButton,\n  SignedOut,\n  SignInButton,\n  SignUpButton,\n} from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/')({ component: Home })\n\nfunction Home() {\n  return (\n    <div>\n      <h1>Index Route</h1>\n      <SignedIn>\n        <p>You are signed in</p>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <p>You are signed out</p>\n        <SignInButton />\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Attributes - Clerk JavaScript\nDESCRIPTION: Illustrates how to use the update method to modify a user's properties, such as their first name, through Clerk's JavaScript API. Input is an object of fields to modify; the method returns the updated user object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_31\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.update({ firstName: 'Test' })\n```\n\n----------------------------------------\n\nTITLE: Building a Client-Side Onboarding Form with Clerk in Next.js\nDESCRIPTION: React component that implements the onboarding form. This component uses Clerk's useUser hook to access user data and handles form submission to update the user's onboarding state in their public metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\nimport { completeOnboarding } from './_actions'\n\nexport default function OnboardingComponent() {\n  const [error, setError] = React.useState('')\n  const { user } = useUser()\n  const router = useRouter()\n\n  const handleSubmit = async (formData: FormData) => {\n    const res = await completeOnboarding(formData)\n    if (res?.message) {\n      // Reloads the user's data from the Clerk API\n      await user?.reload()\n      router.push('/')\n    }\n    if (res?.error) {\n      setError(res?.error)\n    }\n  }\n  return (\n    <div>\n      <h1>Welcome</h1>\n      <form action={handleSubmit}>\n        <div>\n          <label>Application Name</label>\n          <p>Enter the name of your application.</p>\n          <input type=\"text\" name=\"applicationName\" required />\n        </div>\n\n        <div>\n          <label>Application Type</label>\n          <p>Describe the type of your application.</p>\n          <input type=\"text\" name=\"applicationType\" required />\n        </div>\n        {error && <p className=\"text-red-600\">Error: {error}</p>}\n        <button type=\"submit\">Submit</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Securing API Routes in Next.js Pages Router with Clerk\nDESCRIPTION: Shows how to authenticate and authorize users in Next.js Pages Router API routes using Clerk's getAuth() and clerkClient helpers. This pattern allows for retrieving the full Backend User object for authenticated requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/read-session-data.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { getAuth, clerkClient } from '@clerk/nextjs/server'\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  // Use `getAuth()` to get the user's ID\n  const { userId } = getAuth(req)\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    return res.status(401).json({ error: 'Unauthorized' })\n  }\n\n  // Initialize the Backend SDK\n  const client = await clerkClient()\n\n  // Get the user's full `Backend User` object\n  const user = await client.users.getUser(userId)\n\n  return res.status(200).json({ user })\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Organizations with Clerk in JavaScript\nDESCRIPTION: Form submission handler that creates a new organization using Clerk's createOrganization method. It captures the organization name from an input field and handles the promise-based response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nform.addEventListener('submit', function (e) {\n  e.preventDefault()\n\n  const inputEl = document.getElementById('name')\n\n  if (!inputEl) {\n    // ... handle empty input\n    return\n  }\n\n  clerk\n    .createOrganization({ name: inputEl.value })\n    .then((res) => console.log(res))\n    .catch((error) => console.log('An error occurred:', error))\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Next.js App Router\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a Next.js app using the App Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { dark } from '@clerk/themes'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Data from External Sources using Clerk JWT in Next.js\nDESCRIPTION: Shows how to use auth().getToken() to retrieve a token from a JWT template and use it to fetch data from an external source like Supabase. This demonstrates integrating Clerk authentication with external APIs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/route-handlers.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { NextResponse } from 'next/server'\nimport { auth } from '@clerk/nextjs/server'\nexport async function GET() {\n  const { userId, getToken } = await auth()\n\n  if (!userId) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  const token = await getToken({ template: 'supabase' })\n\n  // Fetch data from Supabase and return it.\n  const data = { supabaseData: 'Hello World' }\n\n  return NextResponse.json({ data })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Astro\nDESCRIPTION: This snippet shows how to use the SignUp component in an Astro application. It imports the SignUp component from @clerk/astro/components and renders it directly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignUp } from '@clerk/astro/components'\n---\n\n<SignUp />\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenCannotBeRevoked Error\nDESCRIPTION: This JSON object defines the error returned when an attempt is made to revoke an actor token that is not in a 'pending' status. The long message dynamically includes the token's current status, explaining why revocation failed. The error code is `actor_token_cannot_be_revoked_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"cannot revoke\",\n  \"longMessage\": \"Actor token cannot be revoked because its status is <status>. Only pending tokens can be revoked.\",\n  \"code\": \"actor_token_cannot_be_revoked_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Auth Store in Svelte\nDESCRIPTION: Svelte implementation showing how to use $authStore with proper aliasing to avoid conflicts with Svelte's reactivity system prefix.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/auth-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $authStore as auth } from '@clerk/astro/client'\n</script>\n\n{#if $auth.userId === undefined}\n  <div>Loading...</div>\n{:else if $auth.userId === null}\n  <div>Sign in to view this page</div>\n{:else}\n  <div>...</div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Authentication-based Route Protection\nDESCRIPTION: Implementation of route protection based on user authentication status using clerkMiddleware and createRouteMatcher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-middleware.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/astro/server'\n\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\n\nexport const onRequest = clerkMiddleware((auth, context) => {\n  const { redirectToSignIn, userId } = auth()\n\n  if (!userId && isProtectedRoute(context.request)) {\n    // Add custom logic to run before redirecting\n\n    return redirectToSignIn()\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-Up Email Link Verification in Next.js with Clerk\nDESCRIPTION: This component handles the email link verification process for user sign-up. It uses Clerk's useSignUp hook to create and manage the email link flow, including error handling and status updates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignUp } from '@clerk/nextjs'\nimport { useClerk } from '@clerk/nextjs'\nimport { EmailLinkErrorCodeStatus, isEmailLinkError } from '@clerk/nextjs/errors'\nimport Link from 'next/link'\n\nexport default function VerifyEmailLink() {\n  const [verificationStatus, setVerificationStatus] = React.useState('loading')\n\n  const { handleEmailLinkVerification, loaded } = useClerk()\n\n  async function verify() {\n    try {\n      await handleEmailLinkVerification({\n        redirectUrl: `${window.location.origin}/sign-up`,\n      })\n\n      // If not redirected at this point,\n      // the flow has completed\n      setVerificationStatus('verified')\n    } catch (err: any) {\n      let status = 'failed'\n\n      if (isEmailLinkError(err)) {\n        // If link expired, set status to expired\n        if (err.code === EmailLinkErrorCodeStatus.Expired) {\n          status = 'expired'\n        } else if (err.code === EmailLinkErrorCodeStatus.ClientMismatch) {\n          // OPTIONAL: This check is only required if you have\n          // the 'Require the same device and browser' setting\n          // enabled in the Clerk Dashboard\n          status = 'client_mismatch'\n        }\n      }\n\n      setVerificationStatus(status)\n    }\n  }\n\n  React.useEffect(() => {\n    if (!loaded) return\n\n    verify()\n  }, [handleEmailLinkVerification, loaded])\n\n  if (verificationStatus === 'loading') {\n    return <div>Loading...</div>\n  }\n\n  if (verificationStatus === 'failed') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link verification failed.</p>\n        <Link href=\"/sign-up\">Sign up</Link>\n      </div>\n    )\n  }\n\n  if (verificationStatus === 'expired') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>The email link has expired.</p>\n        <Link href=\"/sign-up\">Sign up</Link>\n      </div>\n    )\n  }\n\n  // OPTIONAL: This check is only required if you have\n  // the 'Require the same device and browser' setting\n  // enabled in the Clerk Dashboard\n  if (verificationStatus === 'client_mismatch') {\n    return (\n      <div>\n        <h1>Verify your email</h1>\n        <p>\n          You must complete the email link sign-up on the same device and browser that you started\n          it on.\n        </p>\n        <Link href=\"/sign-up\">Sign up</Link>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <h1>Verify your email</h1>\n      <p>Successfully signed up. Return to the original tab to continue.</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/clerk-expo using Package Managers (Bash)\nDESCRIPTION: Installs the latest version of the `@clerk/clerk-expo` package using different package managers (npm, yarn, pnpm, bun). This step upgrades the project to use Clerk Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm install @clerk/clerk-expo\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn add @clerk/clerk-expo\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm add @clerk/clerk-expo\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun add @clerk/clerk-expo\n```\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/clerk-react using bun - Bash\nDESCRIPTION: Utilizes bun to install or update @clerk/clerk-react to its latest released version, granting access to all Core 2 enhancements. Suitable for projects managed with bun.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Attempting Email Address Verification in Clerk SignUp\nDESCRIPTION: This method attempts to verify an email address by validating a one-time verification code. It wraps the attemptVerification method with the 'email_code' strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptEmailAddressVerification(\n  params: AttemptEmailAddressVerificationParams,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Setting up Home Layout with Expo Router Stack\nDESCRIPTION: Basic layout configuration using Expo Router Stack navigation for the home route group.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Stack } from 'expo-router/stack'\n\nexport default function Layout() {\n  return <Stack />\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in Next.js\nDESCRIPTION: Demonstrates how to import and use the SignInButton component in a Next.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return <SignInButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting Web3Wallet Verification with Signature (TypeScript)\nDESCRIPTION: Defines the `attemptVerification` method signature for the `Web3Wallet` object. This asynchronous function attempts to complete the verification by submitting the signature obtained after `prepareVerification`. It requires `AttemptWeb3WalletVerificationParams` (containing the `signature`) and returns a Promise resolving to the `Web3Wallet` object, reflecting the outcome of the verification attempt.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/web3-wallet.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptVerification(params: AttemptWeb3WalletVerificationParams): Promise<Web3Wallet>\n```\n\n----------------------------------------\n\nTITLE: Implementing Geo Blocking with Clerk Middleware on Render\nDESCRIPTION: This code snippet shows how to implement geo blocking in Next.js using Clerk middleware and Render's cf-ipcountry header. It defines route matchers for protected and blocked routes, checks the client's country using the header provided by Render, and redirects visitors from disallowed countries to a block page. The middleware also handles authentication protection for designated routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/geo-blocking.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextResponse } from 'next/server'\n\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)'])\nconst isBlockRoute = createRouteMatcher(['/block(.*)'])\n\nconst allowedCountries = ['US']\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isBlockRoute(req)) {\n    return\n  }\n\n  // Use Render's `cf-ipcountry` header to get the client's country\n  const country = req.headers.get('cf-ipcountry')\n\n  // Redirect if the client's country is not allowed\n  if (country && !allowedCountries.includes(country)) {\n    return NextResponse.redirect(new URL('/block', req.url))\n  }\n\n  // Protect routes based on authentication status\n  if (isProtectedRoute(req)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Inline Styles to Clerk Elements in React\nDESCRIPTION: Demonstrates how to use inline styles with Clerk Elements components. This is useful for applying styles conditionally or avoiding separate CSS files.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step\n        name=\"start\"\n        style={{\n          backgroundColor: 'white',\n          padding: '1rem',\n          border: '1px solid #dddddd',\n          borderRadius: '4px',\n        }}\n      >\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label\n            style={{\n              color: '#dddddd',\n              fontSize: '0.875rem',\n            }}\n          >\n            Email\n          </Clerk.Label>\n          <Clerk.Input\n            style={{\n              border: '1px solid #dddddd',\n              borderRadius: '4px',\n              padding: '1rem',\n            }}\n          />\n        </Clerk.Field>\n        <SignIn.Action\n          submit\n          style={{\n            backgroundColor: '#111111',\n            color: 'white',\n            padding: '1rem',\n            borderRadius: '4px',\n          }}\n        >\n          Continue\n        </SignIn.Action>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Signing In Users with Passkeys using Clerk API in React\nDESCRIPTION: This code snippet shows how to sign in a user with a passkey using the Clerk API. It uses the useSignIn hook to access the signIn object and calls the authenticateWithPasskey method with the 'discoverable' flow option.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/passkeys.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport function SignInWithPasskeyButton() {\n  const { signIn } = useSignIn()\n  const router = useRouter()\n\n  const signInWithPasskey = async () => {\n    // 'discoverable' lets the user choose a passkey\n    // without auto-filling any of the options\n    try {\n      const signInAttempt = await signIn?.authenticateWithPasskey({\n        flow: 'discoverable',\n      })\n\n      if (signInAttempt?.status === 'complete') {\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.push('/')\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  return <button onClick={signInWithPasskey}>Sign in with a passkey</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Using getAuth() for Authentication and Authorization in Express\nDESCRIPTION: Demonstrates how to use getAuth() to retrieve authentication state and implement authorization checks. It combines requireAuth() for authentication and getAuth() for fine-grained authorization control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/express/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkMiddleware, getAuth, requireAuth } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst PORT = 3000\n\n// Apply `clerkMiddleware()` to all routes\napp.use(clerkMiddleware())\n\n// Use `getAuth()` to protect a route based on authorization status\nconst hasPermission = (req, res, next) => {\n  const auth = getAuth(req)\n\n  // Handle if the user is not authorized\n  if (!auth.has({ permission: 'org:admin:example' })) {\n    return res.status(403).send('Forbidden')\n  }\n\n  return next()\n}\n\n// Use `requireAuth()` to protect this route\n// If user is not authenticated, requireAuth() will redirect back to the homepage\napp.get('/path', requireAuth(), hasPermission, (req, res) => res.json(req.auth))\n\n// Start the server and listen on the specified port\napp.listen(PORT, () => {\n  console.log(`Server is running on http://localhost:${PORT}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Form Fields Implementation for Sign-in\nDESCRIPTION: Addition of form fields including email input and social connection (Google) sign-in option using Clerk.Field and Connection components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <h1>Sign in to your account</h1>\n\n        <Clerk.Connection name=\"google\">Sign in with Google</Clerk.Connection>\n\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n\n        <SignIn.Action submit>Continue</SignIn.Action>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Clerk Elements with CSS Modules in React\nDESCRIPTION: Illustrates how to use CSS Modules to style Clerk Elements components. This approach allows for scoped CSS classes and better organization of styles.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\nimport styles from './sign-in.module.css'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\" className={styles.startStep}>\n        <Clerk.Connection name=\"google\" className={styles.provider}>\n          Sign in with Google\n        </Clerk.Connection>\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label className={styles.label}>Email</Clerk.Label>\n          <Clerk.Input className={styles.input} />\n          <Clerk.FieldError className={styles.error} />\n        </Clerk.Field>\n        <SignIn.Action submit className={styles.submit}>\n          Continue\n        </SignIn.Action>\n      </SignIn.Step>\n      <SignIn.Step name=\"verifications\" className={styles.verificationsStep}>\n        <SignIn.Strategy name=\"email_code\">\n          <Clerk.Field name=\"code\">\n            <Clerk.Label className={styles.label}>Code</Clerk.Label>\n            <Clerk.Input className={styles.input} />\n            <Clerk.FieldError className={styles.error} />\n          </Clerk.Field>\n          <SignIn.Action submit className={styles.submit}>\n            Verify\n          </SignIn.Action>\n        </SignIn.Strategy>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Vue\nDESCRIPTION: Vue.js implementation of the SignedOut component using script setup and TypeScript.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_8\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignedOut } from '@clerk/vue'\n</script>\n\n<template>\n  <SignedOut>\n    <div>You are signed out</div>\n  </SignedOut>\n  <p>This content is always visible.</p>\n</template>\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for JavaScript Authentication Flow\nDESCRIPTION: HTML template that provides the structure for a vanilla JavaScript implementation of email/password sign-up with verification using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-up\">\n      <h2>Sign up</h2>\n      <form id=\"sign-up-form\">\n        <label for=\"email\">Enter email address</label>\n        <input type=\"email\" name=\"email\" id=\"sign-up-email\" />\n        <label for=\"password\">Enter password</label>\n        <input type=\"password\" name=\"password\" id=\"sign-up-password\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <form id=\"verifying\" hidden>\n      <h2>Verify your email</h2>\n      <label for=\"code\">Enter your verification code</label>\n      <input id=\"code\" name=\"code\" />\n      <button type=\"submit\" id=\"verify-button\">Verify</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Tanstack React Router\nDESCRIPTION: Integration with Tanstack React Router showing SignedOut component usage in a route component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedOut } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/')({\n  component: Home,\n})\n\nfunction Home() {\n  return (\n    <div>\n      <SignedOut>\n        <p>You are signed out.</p>\n      </SignedOut>\n      <p>This content is always visible.</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Checking DNS CAA Records for a Domain via dig - Shell\nDESCRIPTION: This shell command demonstrates how to check the DNS Certification Authority Authorization (CAA) records for a domain using the 'dig' utility. Replace 'example.com' with your actual domain to retrieve the current CAA records. An empty result means no restrictive CAAs are present. Dependencies include a Unix-like environment and dig installed. The command outputs CAA-related DNS entries, which are crucial for troubleshooting certificate provisioning with Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\ndig example.com +short CAA\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Sign-Up Attempt using TypeScript\nDESCRIPTION: This function updates the properties of the current `SignUp` resource. It accepts a `SignUpUpdateParams` object, which mirrors the structure and fields of `SignUpCreateParams`, containing the data to update the sign-up attempt. The function returns a Promise that resolves with the updated `SignUpResource` reflecting the changes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nfunction update(params: SignUpUpdateParams): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Updating Email Address Example Usage\nDESCRIPTION: Example showing how to use the updateEmailAddress function to modify an email address's verified status using the Clerk client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/update-email-address.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailAddressId = 'idn_123'\n\nconst params = { verified: false }\n\nconst response = await clerkClient.emailAddresses.updateEmailAddress(emailAddressId, params)\n```\n\n----------------------------------------\n\nTITLE: Creating Invitation Type Definition in TypeScript\nDESCRIPTION: TypeScript function signature for creating invitations, showing the return type and required parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/create-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createInvitation(params: CreateParams): Promise<Invitation>\n```\n\n----------------------------------------\n\nTITLE: Configuring Primary Domain Environment Variables for Clerk\nDESCRIPTION: Environment variable configuration for the primary domain in Next.js and Remix applications, including publishable key, secret key, and authentication URLs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\nNEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in\nNEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up\n```\n\nLANGUAGE: env\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\nCLERK_SIGN_IN_URL=/sign-in\n```\n\n----------------------------------------\n\nTITLE: Updating afterSignInUrl to signInFallbackRedirectUrl - React/JSX\nDESCRIPTION: Shows how to replace the deprecated afterSignInUrl prop with the new signInFallbackRedirectUrl on the SignIn component. Ensures backward compatible redirect behavior after sign-in. Input: JSX component with old prop; Output: equivalent component with updated prop name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_13\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn afterSignInUrl=\"/foo\" />\n<SignIn signInFallbackRedirectUrl=\"/foo\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing Geo Blocking with Clerk Middleware on Vercel\nDESCRIPTION: This code snippet demonstrates how to implement geo blocking in Next.js using Clerk middleware and Vercel's geolocation function. It defines protected and blocked routes, checks the client's country using Vercel's geolocation data, and redirects users from disallowed countries to a block page. The middleware also handles route protection based on authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/geo-blocking.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { geolocation } from '@vercel/functions'\nimport { NextResponse } from 'next/server'\n\n// Define your protected and blocked routes\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)'])\nconst isBlockRoute = createRouteMatcher(['/block(.*)'])\n\n// Define the countries you want to allow\nconst allowedCountries = ['US']\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isBlockRoute(req)) {\n    return\n  }\n\n  // Use Vercel's `geolocation()` function to get the client's country\n  const { country } = geolocation(req)\n\n  // Redirect if the client's country is not allowed\n  if (country && !allowedCountries.includes(country)) {\n    return NextResponse.redirect(new URL('/block', req.url))\n  }\n\n  // Protect routes based on authentication status\n  if (isProtectedRoute(req)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from setSession to setActive in JavaScript\nDESCRIPTION: Migration examples showing how to update from setSession to setActive method. The new setActive method takes an object with parameters rather than direct arguments and adds support for setting active organizations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_45\n\nLANGUAGE: javascript\nCODE:\n```\nawait setSession('sessionID', () => void)\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setSession(sessionObj)\nawait setActive({ session: sessionObj })\n\nawait setSession(sessionObj, () => void)\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n```\n\n----------------------------------------\n\nTITLE: Updating Organizations with Next.js and TypeScript\nDESCRIPTION: A React component that implements organization update functionality using Clerk's useOrganization hook. It includes form handling, state management, and navigation after successful updates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/update-organizations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useOrganization } from '@clerk/nextjs'\n\nexport default function UpdateOrganization() {\n  const [name, setName] = useState('')\n  const router = useRouter()\n  const { organization } = useOrganization()\n\n  useEffect(() => {\n    if (!organization) {\n      return\n    }\n    setName(organization.name)\n  }, [organization])\n\n  if (!organization) {\n    return null\n  }\n\n  async function submit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    try {\n      await organization?.update({ name })\n      router.push(`/organizations/${organization?.id}`)\n    } catch (err) {\n      console.error(err)\n    }\n  }\n\n  return (\n    <div>\n      <h1>Update the current organization</h1>\n      <form onSubmit={submit}>\n        <div>\n          <label htmlFor=\"name\">Name</label>\n          <input id=\"name\" name=\"name\" value={name} onChange={(e) => setName(e.target.value)} />\n        </div>\n        <button>Update</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Representing LastIdentificationSetFor2FAFailed Error in Clerk JSON\nDESCRIPTION: JSON object representing the 'LastIdentificationSetFor2FAFailed' error in Clerk. This error occurs when attempting to enable an identification for second-factor authentication (2FA) when it is the user's only identification. Setting up 2FA requires at least two identifications. It includes a short message ('Update failed'), a long message explaining why the update failed, and the specific error code 'identification_set_for2_f_a_failed_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/identifications.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Update failed\",\n  \"longMessage\": \"You cannot set your last identification as second factor.\",\n  \"code\": \"identification_set_for2_f_a_failed_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using authenticateWithCoinbaseWallet in JavaScript\nDESCRIPTION: Provides an example of calling the `authenticateWithCoinbaseWallet` method on the `clerk.signUp` object. This initiates the Coinbase Wallet authentication process and assigns the resulting `SignUpResource` to the `signUp` constant upon completion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst signUp = await clerk.signUp.authenticateWithCoinbaseWallet()\n```\n\n----------------------------------------\n\nTITLE: Updating UserButton Component Usage in JSX\nDESCRIPTION: Illustrates a breaking change in the `<UserButton />` component for Core 2. Explicitly setting `afterSignOutUrl=\"/\"` is no longer necessary as `/` is now the default value. The prop can be removed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n```jsx {{ prettier: false, del: [1], ins: [2] }}\n<UserButton afterSignOutUrl=\"/\" />\n<UserButton />\n```\n```\n\n----------------------------------------\n\nTITLE: Asserting Clerk Has Loaded in Cypress Tests - TypeScript\nDESCRIPTION: This snippet shows how to use the cy.clerkLoaded custom command to assert in a Cypress test that Clerk has finished loading on the page. After navigating to the target URL, cy.clerkLoaded() waits for Clerk to be fully initialized before proceeding. The prerequisite is that Clerk should be loaded on the page being tested, and that the custom commands have been registered. No parameters are required, and a passing assertion confirms Clerk's readiness. Use in scenarios where actions depend on Clerk’s bootstrapping.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/custom-commands.mdx#2025-04-23_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nit('check Clerk loaded', () => {\n  cy.visit(`/`)\n  cy.clerkLoaded()\n  // Clerk has been loaded from here on\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Sign-up Cannot Be Updated Error Response in Clerk (JSON)\nDESCRIPTION: This snippet details the JSON structure for the 'SignUpCannotBeUpdated' error, indicating that the sign-up process cannot proceed because it has reached a terminal or unchangeable state. Both a short and a long descriptive message are provided, including a unique code for this condition. Use this response to prevent further actions on completed or invalid state sign-up flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Sign up cannot be updated\\\",\\n  \\\"longMessage\\\": \\\"This sign up has reached a terminal state and cannot be updated\\\",\\n  \\\"code\\\": \\\"sign_up_cannot_be_updated\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Defining CAPTCHA Not Enabled Error Response in Clerk (JSON)\nDESCRIPTION: This snippet specifies the JSON object for the 'CaptchaNotEnabled' error, which is returned when the CAPTCHA feature is required but not configured in the Clerk instance. It provides a clear short and long message along with a specific error code. Applications should use this error to instruct administrators to enable CAPTCHA for enhanced bot detection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"CAPTCHA not enabled\\\",\\n  \\\"longMessage\\\": \\\"Bot detection can be applied only for instances which have enabled CAPTCHA.\\\",\\n  \\\"code\\\": \\\"captcha_not_enabled\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-Factor Sign-In Page with TypeScript and Clerk Elements\nDESCRIPTION: A React component implementing a sign-in page that supports email verification, Google OAuth, and MFA using Clerk Elements. The component includes email input, Google sign-in button, verification code input, and handles multi-step authentication flow with proper styling and error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <div className=\"grid w-full flex-grow items-center bg-white px-4 sm:justify-center\">\n      <SignIn.Root>\n        <SignIn.Step\n          name=\"start\"\n          className=\"w-full space-y-6 rounded-2xl px-4 py-10 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10\"\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"#0A0A0A\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-neutral-950\">\n              Sign in to Clover\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-600\" />\n          <Clerk.Field name=\"identifier\">\n            <Clerk.Label className=\"sr-only\">Email</Clerk.Label>\n            <Clerk.Input\n              type=\"email\"\n              required\n              placeholder=\"Email\"\n              className=\"w-full border-b border-neutral-200 bg-white pb-2 text-sm/6 text-neutral-950 outline-none placeholder:text-neutral-400 hover:border-neutral-300 focus:border-neutral-600 data-[invalid]:border-red-600 data-[invalid]:text-red-600\"\n            />\n            <Clerk.FieldError className=\"mt-2 block text-xs text-red-600\" />\n          </Clerk.Field>\n          <SignIn.Action\n            submit\n            className=\"relative w-full rounded-md bg-neutral-600 bg-gradient-to-b from-neutral-500 to-neutral-600 py-1.5 text-sm font-medium text-white shadow-[0_1px_1px_0_theme(colors.white/10%)_inset,0_1px_2.5px_0_theme(colors.black/36%)] outline-none ring-1 ring-inset ring-neutral-600 before:absolute before:inset-0 before:rounded-md before:bg-white/10 before:opacity-0 hover:before:opacity-100 focus-visible:outline-offset-2 focus-visible:outline-neutral-600 active:bg-neutral-600 active:text-white/60 active:before:opacity-0\"\n          >\n            Sign In\n          </SignIn.Action>\n          <div className=\"rounded-xl bg-neutral-100 p-5\">\n            <p className=\"mb-4 text-center text-sm/5 text-neutral-500\">\n              Alternatively, sign in with these platforms\n            </p>\n            <div className=\"space-y-2\">\n              <Clerk.Connection\n                name=\"google\"\n                className=\"flex w-full items-center justify-center gap-x-3 rounded-md bg-gradient-to-b from-white to-neutral-50 px-2 py-1.5 text-sm font-medium text-neutral-950 shadow outline-none ring-1 ring-black/5 hover:to-neutral-100 focus-visible:outline-offset-2 focus-visible:outline-neutral-600 active:text-neutral-950/60\"\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 16 16\"\n                  aria-hidden\n                  className=\"size-4\"\n                >\n                  <g clipPath=\"url(#a)\">\n                    <path\n                      fill=\"currentColor\"\n                      d=\"M8.32 7.28v2.187h5.227c-.16 1.226-.57 2.124-1.192 2.755-.764.765-1.955 1.6-4.035 1.6-3.218 0-5.733-2.595-5.733-5.813 0-3.218 2.515-5.814 5.733-5.814 1.733 0 3.005.685 3.938 1.565l1.538-1.538C12.498.96 10.756 0 8.32 0 3.91 0 .205 3.591.205 8s3.706 8 8.115 8c2.382 0 4.178-.782 5.582-2.24 1.44-1.44 1.893-3.475 1.893-5.111 0-.507-.035-.978-.115-1.369H8.32Z\"\n                    />\n                  </g>\n                  <defs>\n                    <clipPath id=\"a\">\n                      <path fill=\"#fff\" d=\"M0 0h16v16H0z\" />\n                    </clipPath>\n                  </defs>\n                </svg>\n                Login with Google\n              </Clerk.Connection>\n            </div>\n          </div>\n          <p className=\"text-center text-sm text-neutral-500\">\n            Don&apos;t have an account?{' '}\n            <Clerk.Link\n              navigate=\"sign-up\"\n              className=\"rounded px-1 py-0.5 text-neutral-700 outline-none hover:bg-neutral-100 focus-visible:bg-neutral-100\"\n            >\n              Sign up\n            </Clerk.Link>\n          </p>\n        </SignIn.Step>\n        <SignIn.Step\n          name=\"verifications\"\n          className=\"w-full space-y-6 rounded-2xl px-4 py-10 sm:w-96 sm:px-8\"\n        >\n          <SignIn.Strategy name=\"email_code\">\n            <header className=\"text-center\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 40 40\"\n                className=\"mx-auto size-10\"\n              >\n                <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                  <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n                </mask>\n                <g fill=\"#0A0A0A\" mask=\"url(#a)\">\n                  <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                  <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n                </g>\n              </svg>\n              <h1 className=\"mt-4 text-xl font-medium tracking-tight text-neutral-950\">\n                Verify email code\n              </h1>\n            </header>\n            <Clerk.GlobalError className=\"block text-sm text-red-600\" />\n            <Clerk.Field name=\"code\">\n              <Clerk.Label className=\"sr-only\">Email code</Clerk.Label>\n              <Clerk.Input\n                type=\"otp\"\n                required\n                placeholder=\"Email code\"\n                className=\"w-full border-b border-neutral-200 bg-white pb-2 text-sm/6 text-neutral-950 outline-none placeholder:text-neutral-400 hover:border-neutral-300 focus:border-neutral-600 data-[invalid]:border-red-600 data-[invalid]:text-red-600\"\n              />\n              <Clerk.FieldError className=\"mt-2 block text-xs text-red-600\" />\n            </Clerk.Field>\n            <SignIn.Action\n              submit\n              className=\"relative w-full rounded-md bg-neutral-600 bg-gradient-to-b from-neutral-500 to-neutral-600 py-1.5 text-sm text-white shadow-[0_1px_1px_0_theme(colors.white/10%)_inset,0_1px_2.5px_0_theme(colors.black/36%)] outline-none ring-1 ring-inset ring-neutral-600 before:absolute before:inset-0 before:rounded-md before:bg-white/10 before:opacity-0 hover:before:opacity-100 focus-visible:outline-offset-2 focus-visible:outline-neutral-600 active:bg-neutral-600 active:text-white/60 active:before:opacity-0\"\n            >\n              Continue\n            </SignIn.Action>\n\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification in Next.js Server Action\nDESCRIPTION: This example shows how to use the `auth.has()` helper to check if a user has verified their credentials within a 10-minute period in a Next.js Server Action. If verification is needed, it returns a reverification error using the 'strict' configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use server'\n\nimport { auth, reverificationError } from '@clerk/nextjs/server'\n\nexport const myAction = async () => {\n  const { has } = await auth.protect()\n\n  // Check if the user has *not* verified their credentials within the past 10 minutes\n  const shouldUserRevalidate = !has({ reverification: 'strict' })\n\n  // If the user hasn't reverified, return an error with the matching configuration (e.g. `strict`)\n  if (shouldUserRevalidate) {\n    return reverificationError('strict')\n  }\n\n  // If the user has verified credentials, return a successful response\n  return { success: true }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing GlobalError Message Rendering with Clerk.GlobalError (TypeScript/React)\nDESCRIPTION: Demonstrates how to customize the rendering of global error messages by passing a function as children to <Clerk.GlobalError> in TypeScript/React. The function receives both message and code properties, allowing for localization or specialized display. Must be nested inside <SignIn.Root>.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <Clerk.GlobalError>\n    {({ message, code }) => (\n      <span>\n        {message} ({code})\n      </span>\n    )}\n  </Clerk.GlobalError>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Using verifyTOTP Function with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of using the verifyTOTP function with Clerk's Backend SDK. It demonstrates how to verify a TOTP or backup code for a specific user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/verify-totp.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst code = '123456'\n\nconst response = await clerkClient.users.verifyTOTP({\n  userId,\n  code,\n})\n```\n\n----------------------------------------\n\nTITLE: Creating requireAuth Helper for Route Protection in TypeScript\nDESCRIPTION: Defines a middleware utility that enforces authenticated access to routes. Throws an error if no Auth object is present, returns HTTP 401 if user is not authenticated, and otherwise calls the next handler. Assumes presence of hasAuthObject and getAuth functions. Expects to be composed into middleware chains for route protection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport const requireAuth = (context, next) => {\n  if (!hasAuthObject(context)) {\n    throw new Error('Middleware required')\n  }\n  if (!getAuth(context).userId) {\n    context.status = 401\n    return\n  }\n  return next()\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring UserButton with Custom Properties\nDESCRIPTION: This example shows how to use the <UserButton /> component with custom properties. It demonstrates setting the userProfileMode to 'navigation' and providing a custom userProfileUrl.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton\n  userProfileMode=\"navigation\"\n  userProfileUrl=\"/manage-account\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating User Password in Clerk API (JavaScript)\nDESCRIPTION: Demonstrates the change from using User.update() to User.updatePassword() for updating a user's password. The new method requires the current password and offers additional security options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Creating a Paginated Organization Invitations Table in Next.js\nDESCRIPTION: A Next.js client component that renders organization invitations in a table with simple pagination controls for navigating through pages of invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganizationList } from '@clerk/nextjs'\n\nexport const UserInvitationsTable = () => {\n  const { isLoaded, userInvitations } = useOrganizationList({\n    userInvitations: {\n      infinite: true,\n      keepPreviousData: true,\n    },\n  })\n\n  if (!isLoaded || userInvitations.isLoading) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <table>\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Org name</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {userInvitations.data?.map((inv) => (\n            <tr key={inv.id}>\n              <th>{inv.emailAddress}</th>\n              <th>{inv.publicOrganizationData.name}</th>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <button disabled={!userInvitations.hasPreviousPage} onClick={userInvitations.fetchPrevious}>\n        Prev\n      </button>\n      <button disabled={!userInvitations.hasNextPage} onClick={userInvitations.fetchNext}>\n        Next\n      </button>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes with auth().userId()\nDESCRIPTION: Example of protecting routes using auth().userId approach. This method provides more control over what happens when an unauthenticated user attempts to access protected routes, allowing for custom logic before redirection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { userId, redirectToSignIn } = await auth()\n\n  if (!userId && isProtectedRoute(req)) {\n    // Add custom logic to run before redirecting\n\n    return redirectToSignIn()\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring OrganizationList for Slug-based Navigation - Clerk - TypeScript\nDESCRIPTION: Illustrates setting up Clerk's OrganizationList React component to enable slug-based URL navigation and personal account switching for organization management. Dependencies include Next.js, Clerk's React/Next.js SDK, and proper user authentication context. Key configuration options mirror those of OrganizationSwitcher: hideSlug, hidePersonal, afterCreateOrganizationUrl, afterSelectOrganizationUrl, and afterSelectPersonalUrl. This component should be placed in an authenticated context; renders an interactive list of organizations and handles navigation after user actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { OrganizationList } from '@clerk/nextjs'\n\nexport default function OrganizationListPage() {\n  return (\n    <OrganizationList\n      hideSlug={false} // Allow users to customize the org's URL slug\n      hidePersonal={false} // Allow users to select their personal account\n      afterCreateOrganizationUrl=\"/orgs/:slug\" // Navigate to the org's slug after creating an org\n      afterSelectOrganizationUrl=\"/orgs/:slug\" // Navigate to the org's slug after selecting it\n      afterSelectPersonalUrl=\"/me\" // Navigate to the personal account after selecting it\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User publicMetadata via Clerk Backend API - TypeScript\nDESCRIPTION: This TypeScript snippet defines an asynchronous function, completeOnboarding, which updates the user's publicMetadata using the Clerk backend API upon onboarding form submission. It imports Clerk-specific server utilities, retrieves the authenticated user's ID, checks for authentication, and updates metadata fields based on form data entries for applicationName and applicationType. Dependencies include @clerk/nextjs/server for auth and clerkClient, and proper Clerk setup on the server is required. The function expects a FormData object and returns either the updated metadata or an error message if the process fails or no user is authenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\n```tsx\n'use server'\n\nimport { auth, clerkClient } from '@clerk/nextjs/server'\n\nexport const completeOnboarding = async (formData: FormData) => {\n  const { userId } = await auth()\n\n  if (!userId) {\n    return { message: 'No Logged In User' }\n  }\n\n  const client = await clerkClient()\n\n  try {\n    const res = await client.users.updateUser(userId, {\n      publicMetadata: {\n        onboardingComplete: true,\n        applicationName: formData.get('applicationName'),\n        applicationType: formData.get('applicationType'),\n      },\n    })\n    return { message: res.publicMetadata }\n  } catch (err) {\n    return { error: 'There was an error updating the user metadata.' }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Example Usage of Revoking Invitation\nDESCRIPTION: Practical example demonstrating how to revoke an invitation using the Clerk Backend SDK. Shows how to call revokeInvitation with an invitation ID and handle the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/revoke-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst invitationId = 'inv_123'\n\nconst response = await clerkClient.invitations.revokeInvitation(invitationId)\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Phone Code Sign-In Strategy in JSX\nDESCRIPTION: This JSX snippet defines the UI for the phone code verification step within a Clerk sign-in flow. It includes a header with an SVG icon, an input field for the OTP code using Clerk components (`Clerk.Field`, `Clerk.Label`, `Clerk.Input`), error message displays (`Clerk.GlobalError`, `Clerk.FieldError`), a submit action button (`SignIn.Action`), and a link to the sign-up flow (`Clerk.Link`). The component leverages Clerk's authentication components and is styled using Tailwind CSS classes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn.Strategy name=\"phone_code\">\n  <header className=\"text-center\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill=\"none\"\n      viewBox=\"0 0 40 40\"\n      className=\"mx-auto size-10\"\n    >\n      <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n        <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n      </mask>\n      <g fill=\"#0A0A0A\" mask=\"url(#a)\">\n        <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n        <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n      </g>\n    </svg>\n    <h1 className=\"mt-4 text-xl font-medium tracking-tight text-neutral-950\">\n      Verify phone code\n    </h1>\n  </header>\n  <Clerk.GlobalError className=\"block text-sm text-red-600\" />\n  <Clerk.Field name=\"code\">\n    <Clerk.Label className=\"sr-only\">Phone code</Clerk.Label>\n    <Clerk.Input\n      type=\"otp\"\n      required\n      placeholder=\"Phone code\"\n      className=\"w-full border-b border-neutral-200 bg-white pb-2 text-sm/6 text-neutral-950 outline-none placeholder:text-neutral-400 hover:border-neutral-300 focus:border-neutral-600 data-[invalid]:border-red-600 data-[invalid]:text-red-600\"\n    />\n    <Clerk.FieldError className=\"mt-2 block text-xs text-red-600\" />\n  </Clerk.Field>\n  <SignIn.Action\n    submit\n    className=\"relative w-full rounded-md bg-neutral-600 bg-gradient-to-b from-neutral-500 to-neutral-600 py-1.5 text-sm text-white shadow-[0_1px_1px_0_theme(colors.white/10%)_inset,0_1px_2.5px_0_theme(colors.black/36%)] outline-none ring-1 ring-inset ring-neutral-600 before:absolute before:inset-0 before:rounded-md before:bg-white/10 before:opacity-0 hover:before:opacity-100 focus-visible:outline-offset-2 focus-visible:outline-neutral-600 active:bg-neutral-600 active:text-white/60 active:before:opacity-0\"\n  >\n    Login\n  </SignIn.Action>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Implementing Protected Server Actions with Client Components - Page Component\nDESCRIPTION: This snippet shows how to import and pass a server action to a client component. It demonstrates the page-level integration needed to connect server actions with client components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport AddItem from './components/AddItem'\nimport { addItem } from './actions'\nexport default function Hobby() {\n  return <AddItem addItem={addItem} />\n}\n```\n\n----------------------------------------\n\nTITLE: Auth Object With Active Organization (Version 2)\nDESCRIPTION: Example of Clerk's version 2 Auth object structure with an active organization. This shows the additional 'o' claim which contains organization data including id, role, permissions and slug details.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  azp: 'http://localhost:3000',\n  email: 'email@example.com',\n  exp: 1744734948,\n  fea: 'o:example-feature',\n  fva: [ 0, -1 ],\n  iat: 1744734888,\n  iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n  jti: '004f0096e5cd44911924',\n  nbf: 1744734878,\n  o: {\n    fpm: '1',\n    id: 'org_123',\n    per: 'example-perm',\n    rol: 'admin',\n    slg: 'example-org'\n  },\n  role: 'authenticated',\n  sid: 'sess_123',\n  sub: 'user_123',\n  v: 2\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing <OrganizationList /> in Vue\nDESCRIPTION: Example of using the <OrganizationList /> component in a Vue application. It demonstrates setting up the component with callback functions for URL generation after various actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { OrganizationList } from '@clerk/vue'\n</script>\n\n<template>\n  <OrganizationList\n    :after-create-organization-url=\"(org) => `/organization/${org.slug}`\"\n    :after-select-personal-url=\"(org) => `/organization/${org.slug}`\"\n    :after-select-organization-url=\"(org) => `/organization/${org.slug}`\"\n  />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Reloading User Data with useUser() in Vue\nDESCRIPTION: This Vue component illustrates how to refresh the current user's data using the `reload()` method available on the `user` object from the `useUser()` composable. An `updateUser` function simulates an external API call (e.g., to update metadata) and then calls `user.value?.reload()` to fetch the latest user information from Clerk. The template displays a button to trigger this process and shows user metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-user.mdx#2025-04-23_snippet_2\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useUser } from '@clerk/vue'\n\nconst { isLoaded, user } = useUser()\n\nconst updateUser = async () => {\n  // Update user data via an API endpoint\n  const updateMetadata = await fetch('/api/updateMetadata')\n\n  // Check if the update was successful\n  if (updateMetadata.message !== 'success') {\n    throw new Error('Error updating')\n  }\n\n  // If the update was successful, reload the user data\n  await user.value?.reload()\n}\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Handle loading state -->\n  </div>\n\n  <div v-else-if=\"user\">\n    <button @click=\"updateUser\">Update your metadata</button>\n    <p>user role: {{ user.publicMetadata?.role }}</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Migrating from setSession to setActive\nDESCRIPTION: Examples showing how to migrate from setSession to setActive with various parameter formats.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_56\n\nLANGUAGE: javascript\nCODE:\n```\nawait setSession('sessionID', () => void)\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setSession(sessionObj)\nawait setActive({ session: sessionObj })\n\nawait setSession(sessionObj, () => void)\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating Firebase Users to Clerk with Node.js - JavaScript\nDESCRIPTION: Reads a JSON export of Firebase users, transforms user data, and imports users to Clerk through Clerk's API. Requires 'node-fetch' v2, access to Clerk backend API, Firebase user export file, and hash parameters from Firebase. Handles password-based and OAuth users, and outputs success/error logs for each user. Limitations include no retry or rate-limiting logic; bulk imports with a large number of users may be rate-limited by Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst fetch = require('node-fetch')\nconst firebaseUsers = require('./firebase-users.json')\n\nasync function migrateToClerk() {\n  // You can find these values on your Firebase project's authentication settings\n  const signerKey = ''\n  const saltSeparator = ''\n  const rounds = ''\n  const memoryCost = ''\n\n  // You can find this value on your Clerk application's dashboard\n  const clerkBackendApiKey = ''\n\n  for (let user of firebaseUsers.users) {\n    const { email, localId, passwordHash, salt } = user\n\n    const body = passwordHash\n      ? {\n          email_address: [email],\n          external_id: localId,\n          password_hasher: 'scrypt_firebase',\n          password_digest: `${passwordHash}$${salt}$${signerKey}$${saltSeparator}$${rounds}$${memoryCost}`,\n        }\n      : {\n          email_address: [email],\n          external_id: localId,\n          skip_password_requirement: true,\n        }\n\n    try {\n      const result = await fetch('https://api.clerk.com/v1/users', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${clerkBackendApiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      })\n\n      if (!result.ok) {\n        throw Error(result.statusText)\n      } else {\n        console.log(`${email} added successfully`)\n      }\n    } catch (error) {\n      console.error(`Error migrating ${email}: ${error}`)\n    }\n  }\n}\n\nmigrateToClerk()\n\n```\n\n----------------------------------------\n\nTITLE: SignIn Component Property Types\nDESCRIPTION: Type definitions for the SignIn component's properties, including appearance customization, routing configuration, OAuth flow settings, and URL redirects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SignInProps {\n  appearance?: Appearance;\n  fallback?: ReactNode;\n  fallbackRedirectUrl?: string;\n  forceRedirectUrl?: string;\n  initialValues?: SignInInitialValues;\n  oauthFlow?: \"redirect\" | \"popup\" | \"auto\";\n  path?: string;\n  routing?: \"hash\" | \"path\";\n  signUpFallbackRedirectUrl?: string;\n  signUpForceRedirectUrl?: string;\n  signUpUrl?: string;\n  transferable?: boolean;\n  waitlistUrl?: string;\n  withSignUp?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Convex Platform Logo SVG – SVG\nDESCRIPTION: This SVG code snippet renders the Convex platform logo for visual identification within Clerk documentation. It requires support for inline SVG rendering in the host environment. The code does not take parameters and outputs a scalable vector image.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 89 90\" fill=\"none\"><path fill=\"#F3B01C\" d=\"M56.22 70.4c13.1-1.43 25.45-8.29 32.25-19.74-3.22 28.32-34.73 46.22-60.45 35.23-2.37-1.01-4.41-2.69-5.81-4.85-5.78-8.92-7.68-20.27-4.95-30.57 7.8 13.23 23.66 21.34 38.96 19.93Z\"/><path fill=\"#8D2676\" d=\"M16.78 42.16c-5.31 12.06-5.54 26.18.97 37.8C-5.16 63.02-4.91 26.77 17.47 10c2.07-1.55 4.53-2.47 7.11-2.61 10.61-.55 21.39 3.48 28.95 10.99-15.36.15-30.32 9.82-36.75 23.78Z\"/><path fill=\"#EE342F\" d=\"M60.94 22.09C53.19 11.47 41.06 4.24 27.77 4.02 53.46-7.44 85.06 11.14 88.5 38.61c.32 2.55-.1 5.15-1.25 7.45-4.8 9.58-13.7 17.01-24.1 19.76 7.62-13.89 6.68-30.86-2.21-43.73Z\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in Tanstack React Start\nDESCRIPTION: This code shows how to integrate ClerkProvider into a Tanstack React Start application. It wraps the root document to provide authentication context throughout the app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Outlet, createRootRoute } from '@tanstack/react-router'\nimport { Meta, Scripts } from '@tanstack/react-start'\nimport * as React from 'react'\nimport { ClerkProvider } from '@clerk/tanstack-react-start'\n\nexport const Route = createRootRoute({\n  component: () => {\n    return (\n      <RootDocument>\n        <Outlet />\n      </RootDocument>\n    )\n  },\n})\n\nfunction RootDocument({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html>\n        <head>\n          <Meta />\n        </head>\n        <body>\n          {children}\n          <Scripts />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining TOTP Resource Interface in TypeScript\nDESCRIPTION: This snippet defines a TypeScript interface `TOTPResource` used to represent TOTP (Time-based One-Time Password) secrets for authentication workflows. Required dependencies are a TypeScript environment. The properties include identifiers, the secret value (only available upon creation), TOTP configuration URI, verification state, backup codes, and timestamps. The `secret`, `uri`, and `backupCodes` fields are optional and only populated under specific conditions. Inputs and outputs adhere to standard property types without enforced runtime constraints.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/totp.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface TOTPResource {\n  /**\n   * The unique identifier for this TOTP secret.\n   */\n  id: string;\n  \n  /**\n   * The generated TOTP secret. This is only returned to the client upon creation and cannot be retrieved afterwards.\n   */\n  secret?: string;\n  \n  /**\n   * A complete TOTP configuration URI including the Issuer, Account, etc., that can be pasted to an authenticator app or encoded to a QR code.\n   * This is only returned to the client upon creation and cannot be retrieved afterwards.\n   */\n  uri?: string;\n  \n  /**\n   * Indicates whether this TOTP secret has been verified by the user by providing one code generated with it.\n   * TOTP is not enabled on the user unless they have a verified secret.\n   */\n  verified: boolean;\n  \n  /**\n   * A set of fresh generated Backup codes. Populated if the feature is enabled and the user doesn\\'t already have backup codes generated.\n   */\n  backupCodes?: string[];\n  \n  /**\n   * The date when the TOTP secret was created.\n   */\n  createdAt: Date;\n  \n  /**\n   * The date when the TOTP secret was last updated.\n   */\n  updatedAt: Date;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional Rendering with Clerk Authentication\nDESCRIPTION: Home page implementation showing conditional content rendering based on user authentication state using Clerk's SignedIn and SignedOut components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, useUser } from '@clerk/clerk-expo'\nimport { Link } from 'expo-router'\nimport { Text, View } from 'react-native'\nimport { SignOutButton } from '@/app/components/SignOutButton'\n\nexport default function Page() {\n  const { user } = useUser()\n\n  return (\n    <View>\n      <SignedIn>\n        <Text>Hello {user?.emailAddresses[0].emailAddress}</Text>\n        <SignOutButton />\n      </SignedIn>\n      <SignedOut>\n        <Link href=\"/(auth)/sign-in\">\n          <Text>Sign in</Text>\n        </Link>\n        <Link href=\"/(auth)/sign-up\">\n          <Text>Sign up</Text>\n        </Link>\n      </SignedOut>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining the prepareFirstFactor Method Signature in TypeScript\nDESCRIPTION: This TypeScript function signature defines the `prepareFirstFactor` method for the Clerk `SignIn` object. It accepts a `PrepareFirstFactorParams` object, which includes the authentication strategy (e.g., OTP, SSO), and returns a `Promise` resolving with a `SignIn` instance. This method initiates the verification process for the first authentication factor.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_20\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareFirstFactor(params: PrepareFirstFactorParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Configuring Localization in Nuxt using Clerk Module (TypeScript)\nDESCRIPTION: Demonstrates configuring Clerk localization in a Nuxt application via the `@clerk/nuxt` module. Import the desired locale object (e.g., `frFR` for French) in `nuxt.config.ts` and set it as the value for the `localization` key within the `clerk` configuration object. This integrates the specified localization into the Clerk components used throughout the Nuxt application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\n```ts {{ filename: 'nuxt.config.ts', mark: [1, 2, [6, 8]] }}\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    localization: frFR,\n  },\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Creating a Paginated Organization Invitations Table in React\nDESCRIPTION: A React component that displays organization invitations in a table with simple pagination controls, allowing users to navigate through pages of invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useOrganizationList } from '@clerk/clerk-react'\nimport React from 'react'\n\nconst UserInvitationsTable = () => {\n  const { isLoaded, userInvitations } = useOrganizationList({\n    userInvitations: {\n      infinite: true,\n      keepPreviousData: true,\n    },\n  })\n\n  if (!isLoaded || userInvitations.isLoading) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <table>\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Org name</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {userInvitations.data?.map((inv) => (\n            <tr key={inv.id}>\n              <th>{inv.emailAddress}</th>\n              <th>{inv.publicOrganizationData.name}</th>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <button disabled={!userInvitations.hasPreviousPage} onClick={userInvitations.fetchPrevious}>\n        Prev\n      </button>\n      <button disabled={!userInvitations.hasNextPage} onClick={userInvitations.fetchNext}>\n        Next\n      </button>\n    </>\n  )\n}\n\nexport default UserInvitationsTable\n```\n\n----------------------------------------\n\nTITLE: Current User Retrieval in Astro Endpoint\nDESCRIPTION: Demonstrates how to fetch the current user's data using the currentUser() local method in an Astro endpoint.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/endpoints.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function GET({ locals }) {\n  const user = await locals.currentUser()\n\n  if (!user) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  return new Response(JSON.stringify({ user }))\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Email Address to User Account in Next.js with Clerk\nDESCRIPTION: This component allows users to add a new email address to their account. It uses Clerk's useUser and useReverification hooks to handle the process. The component sends a verification email and updates the UI based on the current state of the process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/custom-flows/email-link-verification.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\n\nexport default function Page() {\n  const { isLoaded, user } = useUser()\n  const [email, setEmail] = React.useState('')\n  const [verifying, setVerifying] = React.useState(false)\n  const [error, setError] = React.useState('')\n  const createEmailAddress = useReverification((email: string) =>\n    user?.createEmailAddress({ email }),\n  )\n\n  if (!isLoaded) return null\n\n  if (isLoaded && !user?.id) {\n    return <p>You must be signed in to access this page</p>\n  }\n\n  // Handle addition of the email address\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      setVerifying(true)\n\n      // Add an unverified email address to user\n      const res = await createEmailAddress(email)\n      // Reload user to get updated User object\n      await user.reload()\n\n      // Find the email address that was just added\n      const emailAddress = user.emailAddresses.find((a) => a.id === res.id)\n\n      if (!emailAddress) {\n        setError('Email address not found')\n        return\n      }\n\n      const { startEmailLinkFlow } = emailAddress.createEmailLinkFlow()\n\n      // Dynamically set the host domain for dev and prod\n      // You could instead use an environment variable or other source for the host domain\n      const protocol = window.location.protocol\n      const host = window.location.host\n\n      // Send the user an email with the verification link\n      startEmailLinkFlow({ redirectUrl: `${protocol}//${host}/account/add-email/verify` })\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n      setError('An error occurred.')\n    }\n  }\n\n  async function reset(e: React.FormEvent) {\n    e.preventDefault()\n    setVerifying(false)\n  }\n\n  if (error) {\n    return (\n      <div>\n        <p>Error: {error}</p>\n        <button onClick={() => setError('')}>Try again</button>\n      </div>\n    )\n  }\n\n  if (verifying) {\n    return (\n      <div>\n        <p>Check your email and visit the link that was sent to you.</p>\n        <form onSubmit={reset}>\n          <button type=\"submit\">Restart</button>\n        </form>\n      </div>\n    )\n  }\n\n  // Display the initial form to capture the email address\n  return (\n    <>\n      <h1>Add email</h1>\n      <div>\n        <form onSubmit={(e) => handleSubmit(e)}>\n          <input\n            placeholder=\"Enter email address\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <button type=\"submit\">Continue</button>\n        </form>\n      </div>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoaded in React\nDESCRIPTION: This code snippet illustrates how to use the ClerkLoaded component in a React application. It includes a global declaration for the Clerk object on the window interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loaded.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded } from '@clerk/clerk-react'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Example() {\n  return (\n    <ClerkLoaded>\n      <p>Clerk has loaded</p>\n    </ClerkLoaded>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Data Client-Side with useUser Hook (TSX)\nDESCRIPTION: This snippet illustrates how to use the `useUser` hook from `@clerk/tanstack-react-start` to access the current user's data client-side in a TanStack React Start component. It checks if the data is loaded (`isLoaded`) and if the user is signed in (`isSignedIn`). If authenticated, it displays the user's first name obtained from the `user` object provided by the hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/read-session-data.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'routes/example.tsx' }}\nimport { useUser } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/example')({\n  component: Example,\n})\n\nfunction Example() {\n  const { isLoaded, isSignedIn, user } = useUser()\n\n  if (!isLoaded) {\n    return <div>Loading...</div>\n  }\n\n  if (!isSignedIn) {\n    // You could also add a redirect to the sign-in page here\n    return <div>Sign in to view this page</div>\n  }\n\n  return <div>Hello, {user.firstName}!</div>\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-in with Svelte and Clerk Store\nDESCRIPTION: Example of using $clerkStore in a Svelte component to implement a sign-in button. Shows how to handle Svelte's reserved $ prefix by aliasing the import.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $clerkStore as clerk } from '@clerk/astro/client'\n</script>\n\n<button on:click={() => $clerk.openSignIn()}>Sign in</button>\n```\n\n----------------------------------------\n\nTITLE: Deleting User via Clerk API using cURL (Bash)\nDESCRIPTION: Provides a cURL command example for directly interacting with the Clerk Backend API to delete a user. It specifies the DELETE HTTP method, the target user endpoint (`/v1/users/{user_id}`), and required headers, including the Authorization header with a bearer token (secret key) and the Content-Type header.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/deleting-users.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/users/{user_id}' -X DELETE -H 'Authorization:Bearer {{secret}}' -H 'Content-Type:application/json'\n```\n\n----------------------------------------\n\nTITLE: Uninstalling and Installing Clerk Vue SDK via pnpm - Bash\nDESCRIPTION: This snippet provides pnpm commands to migrate by removing the old package and adding the new Clerk Vue SDK. You must have pnpm installed. Running these commands replaces the existing vue-clerk dependency with @clerk/vue in your project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/migrating-from-vue-community-sdk.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm remove vue-clerk\\npnpm add @clerk/vue\n```\n\n----------------------------------------\n\nTITLE: Instantiating Clerk Client in Next.js (TypeScript)\nDESCRIPTION: Illustrates the specific requirement in Next.js applications to `await` the instantiation of the `clerkClient` before calling its methods, such as `deleteUser`. This ensures the client is properly initialized before use.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/deleting-users.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.deleteUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignOutButton in Next.js\nDESCRIPTION: Demonstrates how to use the SignOutButton component in a Next.js application. The component is imported from @clerk/nextjs and renders a default sign-out button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-out-button.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return <SignOutButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Next.js Pages Router\nDESCRIPTION: This snippet demonstrates how to customize all instances of the SignIn component in a Next.js Pages Router application by configuring appearance variables in the ClerkProvider within _app.tsx.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider\n      appearance={{\n        signIn: {\n          variables: {\n            colorPrimary: 'blue',\n            colorText: 'black',\n          },\n        },\n      }}\n    >\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Astro SDK via pnpm - Bash\nDESCRIPTION: This command line snippet executes pnpm to add the Clerk Astro SDK to an Astro project. pnpm must be installed prior to running the command. On success, Clerk is listed as a project dependency.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/astro\n```\n\n----------------------------------------\n\nTITLE: Defining getToken() Function in TypeScript\nDESCRIPTION: Function signature for getToken() in Clerk's Backend SDK. It takes a sessionId and template name as parameters and returns a Promise resolving to a Token.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getToken(sessionId: string, template: string): Promise<Token>\n```\n\n----------------------------------------\n\nTITLE: Closing SignIn Component Overlay with JavaScript\nDESCRIPTION: This example shows how to use the closeSignIn method to close the SignIn component overlay in a JavaScript application using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nclerk.openSignIn()\n\n// ...\n\nclerk.closeSignIn()\n```\n\n----------------------------------------\n\nTITLE: Configuring Redirect URLs in ClerkApp Options (TS)\nDESCRIPTION: This TypeScript snippet shows how to configure fallback redirect URLs within the `ClerkApp` options object. The `signInFallbackRedirectUrl` and `signUpFallbackRedirectUrl` properties are set to specify the default paths ('/') where users should be redirected after completing sign-in or sign-up actions if no other specific redirect is provided.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nexport default ClerkApp(App, {\n  publishableKey: PUBLISHABLE_KEY,\n  signInFallbackRedirectUrl: '/',\n  signUpFallbackRedirectUrl: '/',\n})\n```\n\n----------------------------------------\n\nTITLE: Deprecated Clerk Redirect Variables (General)\nDESCRIPTION: Lists deprecated general environment variables `CLERK_AFTER_SIGN_UP_URL` and `CLERK_AFTER_SIGN_IN_URL` for specifying redirection paths after sign-up or sign-in. It is recommended to use the newer `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL`, `CLERK_SIGN_UP_FORCE_REDIRECT_URL`, `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL`, and `CLERK_SIGN_IN_FORCE_REDIRECT_URL` variables instead.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_9\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_AFTER_SIGN_UP_URL` | Full URL or path to navigate to after successful sign up. Defaults to `/`. `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` and `CLERK_SIGN_UP_FORCE_REDIRECT_URL` have priority and should be used instead. |\n| `CLERK_AFTER_SIGN_IN_URL` | Full URL or path to navigate to after successful sign in. Defaults to `/`. `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` and `CLERK_SIGN_IN_FORCE_REDIRECT_URL` have priority and should be used instead. |\n```\n\n----------------------------------------\n\nTITLE: Retrieving Memberships for an Organization in TypeScript\nDESCRIPTION: This snippet demonstrates how to retrieve the list of memberships for the currently active organization using the getMemberships() method. It returns a paginated response of OrganizationMembership objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getMemberships(\n  params?: GetMembersParams,\n): Promise<ClerkPaginatedResponse<OrganizationMembership>>\n```\n\n----------------------------------------\n\nTITLE: Instantiating clerkClient in Next.js\nDESCRIPTION: This snippet shows how to properly instantiate the clerkClient in Next.js by awaiting its initialization before making API calls. This is specifically required for Next.js applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.updateUserMetadata()\n```\n\n----------------------------------------\n\nTITLE: Opting Out via Environment Variable - Astro/React Router - env\nDESCRIPTION: Set the PUBLIC_CLERK_TELEMETRY_DISABLED environment variable in your .env file to disable telemetry, particularly for Astro and React Router integrations. No dependencies necessary. Must be set prior to running the application. Input: none. Output: disables Clerk telemetry data transmission.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_5\n\nLANGUAGE: env\nCODE:\n```\nPUBLIC_CLERK_TELEMETRY_DISABLED=1\n```\n\n----------------------------------------\n\nTITLE: Updating Sessions.getSessionList Return Signature in Clerk API\nDESCRIPTION: The return signature of Sessions.getSessionList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut with React Router\nDESCRIPTION: Integration of SignedOut component with React Router for route-based conditional rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Routes, Route } from 'react-router'\nimport { ClerkProvider, SignedOut } from '@clerk/clerk-react'\n\nfunction App() {\n  return (\n    <ClerkProvider publishableKey={`{{pub_key}}`}>\n      <Routes>\n        <Route path=\"/\" element={<p>This page is publicly accessible.</p>} />\n        <Route\n          path=\"/public\"\n          element={\n            <SignedOut>\n              <p>You are signed out.</p>\n            </SignedOut>\n          }\n        />\n      </Routes>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining FormPasswordLengthTooShortCode Error in JSON\nDESCRIPTION: This JSON object defines the error details for when a user provides a password that is shorter than the required minimum length. It includes a `shortMessage` template indicating the minimum character requirement (`%d`) and a unique `code` identifying this specific error.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/forms.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Passwords must be %d characters or more.\",\n  \"code\": \"form_password_length_too_short\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with Go\nDESCRIPTION: This snippet demonstrates how to update a user's metadata using Clerk's Go SDK. It creates a function that adds a birthday to the user's unsafeMetadata field and handles potential errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_18\n\nLANGUAGE: go\nCODE:\n```\nvar client clerk.Client\n\nfunc addStripeCustomerID(user *clerk.User, stripeCustomerID string) error {\n    birthday := map[string]interface{}{\n        \"birthday\": \"04-20-1969\",\n    }\n  user, err := s.clerkClient.Users().UpdateMetadata(sess.UserID, &clerk.updateMetadataRequest{\n    UnsafeMetadata: birthday,\n  })\n\n  if err != nil {\n    panic(err)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for `EntitlementAlreadyAssociatedWithProduct` Clerk Error\nDESCRIPTION: This JSON object details the error returned by Clerk when an attempt is made to associate an entitlement that is already linked to the specified product. It contains a `shortMessage` ('already associated'), a `longMessage`, and the specific `code` ('entitlement_already_associated_code').\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/entitlements.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already associated\",\n  \"longMessage\": \"The given entitlement is already associated with the product.\",\n  \"code\": \"entitlement_already_associated_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `IdentificationBelongsToDifferentUser` in JSON\nDESCRIPTION: This JSON object defines the structure for the `IdentificationBelongsToDifferentUser` error in Clerk. It occurs when an identifier (e.g., email, phone number) provided during a sign-in or related process is found to belong to a different user account than the one currently being interacted with. It includes `shortMessage`, `longMessage`, and the `code` 'resource_forbidden'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"belongs to different user\",\n  \"longMessage\": \"The given identification belongs to a different user.\",\n  \"code\": \"resource_forbidden\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign Out Button Component with Clerk in React Native\nDESCRIPTION: A React Native component that handles user sign out using Clerk authentication. The component uses the useClerk hook to access the signOut function, implements error handling, and redirects to the home page after successful sign out using Expo Linking.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/expo/sign-out-custom-flow.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-expo'\nimport * as Linking from 'expo-linking'\nimport { Text, TouchableOpacity } from 'react-native'\n\nexport const SignOutButton = () => {\n  // Use `useClerk()` to access the `signOut()` function\n  const { signOut } = useClerk()\n\n  const handleSignOut = async () => {\n    try {\n      await signOut()\n      // Redirect to your desired page\n      Linking.openURL(Linking.createURL('/'))\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <TouchableOpacity onPress={handleSignOut}>\n      <Text>Sign out</Text>\n    </TouchableOpacity>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing User Ban with Clerk Client\nDESCRIPTION: Example showing how to ban a user using the Clerk client's banUser method. The example demonstrates passing a user ID and awaiting the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/ban-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.banUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in Next.js App Router\nDESCRIPTION: Implementation of the ClerkProvider component in a Next.js application using App Router to enable Clerk authentication services.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport './globals.css'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Biometric Sign-In in Expo React Native\nDESCRIPTION: This code snippet demonstrates how to use the useLocalCredentials() hook to implement biometric sign-in for returning users in an Expo React Native app. It handles both traditional and biometric sign-in methods.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/local-credentials.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useSignIn } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\nimport { Text, TextInput, Button, View } from 'react-native'\nimport { useState } from 'react'\nimport { useLocalCredentials } from '@clerk/clerk-expo/local-credentials'\n\nexport default function Page() {\n  const router = useRouter()\n  const { signIn, setActive, isLoaded } = useSignIn()\n  const { hasCredentials, setCredentials, authenticate, biometricType } = useLocalCredentials()\n\n  const [emailAddress, setEmailAddress] = useState('')\n  const [password, setPassword] = useState('')\n\n  const onSignInPress = async (useLocal: boolean) => {\n    if (!isLoaded) return\n\n    try {\n      const signInAttempt =\n        hasCredentials && useLocal\n          ? await authenticate()\n          : await signIn.create({\n              identifier: emailAddress,\n              password,\n            })\n\n      if (signInAttempt.status === 'complete') {\n        console.log('status is complete?', signInAttempt.status)\n\n        if (!useLocal) {\n          await setCredentials({\n            identifier: emailAddress,\n            password,\n          })\n        }\n\n        await setActive({ session: signInAttempt.createdSessionId })\n        router.replace('/')\n      } else {\n        console.error(JSON.stringify(signInAttempt, null, 2))\n      }\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <View>\n      <TextInput\n        autoCapitalize=\"none\"\n        value={emailAddress}\n        placeholder=\"Enter email\"\n        onChangeText={(emailAddress: string) => setEmailAddress(emailAddress)}\n      />\n\n      <TextInput\n        value={password}\n        placeholder=\"Enter password\"\n        secureTextEntry={true}\n        onChangeText={(password: string) => setPassword(password)}\n      />\n\n      <Button title=\"Sign In\" onPress={() => onSignInPress(false)} />\n\n      {hasCredentials && biometricType && (\n        <Button\n          title={\n            biometricType === 'face-recognition' ? 'Sign in with Face ID' : 'Sign in with Touch ID'\n          }\n          onPress={() => onSignInPress(true)}\n        />\n      )}\n\n      <View>\n        <Text>Don't have an account?</Text>\n\n        <Link href=\"/sign-up\">\n          <Text>Sign up</Text>\n        </Link>\n      </View>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining SessionVerifyAttemptSecondFactorParams Type in TypeScript\nDESCRIPTION: This TypeScript code defines the possible parameter types for the attemptSecondFactorVerification method, including phone code, TOTP, and backup code attempts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype SessionVerifyAttemptSecondFactorParams = PhoneCodeAttempt | TOTPAttempt | BackupCodeAttempt\n\ntype PhoneCodeAttempt = {\n  strategy: 'phone_code'\n  code: string\n}\n\ntype TOTPAttempt = {\n  strategy: 'totp'\n  code: string\n}\n\ntype BackupCodeAttempt = {\n  strategy: 'backup_code'\n  code: string\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Server-Side User IDs with Clerk in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to use Clerk's server-side authentication utilities to extract the userId within Next.js's getServerSideProps. It requires @clerk/nextjs API and expects a Next.js server runtime. The function fetches the userId from the request, handles the case where a user is not signed in, retrieves session claims if available, and finally builds Clerk-specific props for use in React components. Expects a valid context object with request, outputs props object for SSR pages, and should not be run on the client-side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  const { userId } = getAuth(ctx.req)\n\n  if (!userId) {\n    // handle user is not signed in.\n  }\n\n  const {\n    sessionClaims: { userId },\n  } = getAuth(req)\n  console.log(userId)\n\n  return { props: { ...buildClerkProps(ctx.req) } }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating AllowlistIdentifiers.getAllowlistIdentifierList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for AllowlistIdentifiers.getAllowlistIdentifierList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Using unlockUser Function with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example usage of the unlockUser function from the Clerk Backend SDK. It demonstrates how to unlock a user account by providing the user's ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/unlock-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.unlockUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Accessing JwtPayload Claims with getAuth in Fastify - TypeScript\nDESCRIPTION: This TypeScript snippet shows how to obtain Clerk JWT claims in a Fastify application using the @clerk/fastify SDK. The getAuth function is used asynchronously to extract sessionClaims from the request, which exposes organization information as per Core 2. Dependencies: Fastify, Clerk SDK, TypeScript. Main parameter: request. Output: JwtPayload object. Handles authentication in Fastify routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Implementing getToken() in Next.js Pages Router\nDESCRIPTION: Example of using getToken() in a Next.js Pages Router API route. It checks for an active session, retrieves a token, and returns it in the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient, getAuth } from '@clerk/nextjs/server'\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  const { sessionId } = getAuth(req)\n\n  if (!sessionId) {\n    return res.status(401).json({ error: 'Unauthorized' })\n  }\n\n  const template = 'test'\n  const client = await clerkClient()\n  const token = await client.sessions.getToken(sessionId, template)\n\n  return res.json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with Express\nDESCRIPTION: This example shows how to update a user's metadata in an Express.js application. It creates an endpoint that receives a stripeId and userId, then updates the user's birthday in unsafeMetadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/updateStripe', async (req, res) => {\n  const { stripeId, userId } = await req.body\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    unsafeMetadata: {\n      birthday: '11-30-1969',\n    },\n  })\n\n  res.status(200).json({ success: true })\n})\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Testing Tokens in Cypress Tests (TypeScript)\nDESCRIPTION: Example Cypress test (`.cy.ts` file) demonstrating the use of `setupClerkTestingToken()` from `@clerk/testing/cypress`. This function must be called within a test (e.g., inside an `it` block) to apply the Testing Token retrieved during the global setup, which is necessary to interact with Clerk-authenticated routes and bypass bot detection during end-to-end tests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { setupClerkTestingToken } from '@clerk/testing/cypress'\n\nit('sign up', () => {\n  setupClerkTestingToken()\n\n  cy.visit('/sign-up')\n  // Add any other actions to test\n})\n```\n\n----------------------------------------\n\nTITLE: Next.js Enterprise SSO Sign-in Implementation\nDESCRIPTION: Custom sign-in page implementation using Clerk's useSignIn hook to handle enterprise SSO authentication. Includes form handling and redirect configuration for the SSO flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/enterprise-connections.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useSignIn } from '@clerk/nextjs'\n\nexport default function Page() {\n  const { signIn, isLoaded } = useSignIn()\n\n  const signInWithEnterpriseSSO = (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!isLoaded) return null\n\n    const email = (e.target as HTMLFormElement).email.value\n\n    signIn\n      .authenticateWithRedirect({\n        identifier: email,\n        strategy: 'enterprise_sso',\n        redirectUrl: '/sign-in/sso-callback',\n        redirectUrlComplete: '/',\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err: any) => {\n        console.log(err.errors)\n        console.error(err, null, 2)\n      })\n  }\n\n  return (\n    <form onSubmit={(e) => signInWithEnterpriseSSO(e)}>\n      <input id=\"email\" type=\"email\" name=\"email\" placeholder=\"Enter email address\" />\n      <button>Sign in with Enterprise SSO</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Server Actions for Role Management\nDESCRIPTION: Server actions that allow administrators to set or remove roles for users. These functions use Clerk's Backend SDK to update a user's publicMetadata and include authorization checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n'use server'\n\nimport { checkRole } from '@/utils/roles'\nimport { clerkClient } from '@clerk/nextjs/server'\n\nexport async function setRole(formData: FormData) {\n  const client = await clerkClient()\n\n  // Check that the user trying to set the role is an admin\n  if (!checkRole('admin')) {\n    return { message: 'Not Authorized' }\n  }\n\n  try {\n    const res = await client.users.updateUserMetadata(formData.get('id') as string, {\n      publicMetadata: { role: formData.get('role') },\n    })\n    return { message: res.publicMetadata }\n  } catch (err) {\n    return { message: err }\n  }\n}\n\nexport async function removeRole(formData: FormData) {\n  const client = await clerkClient()\n\n  try {\n    const res = await client.users.updateUserMetadata(formData.get('id') as string, {\n      publicMetadata: { role: null },\n    })\n    return { message: res.publicMetadata }\n  } catch (err) {\n    return { message: err }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Multiple signUp Sub-entries in Clerk Localization with TypeScript\nDESCRIPTION: This snippet shows how to selectively override multiple sub-entries inside Clerk's signUp translation object using TypeScript (TSX/JSX style object). It targets individual text pieces for the signUp component (e.g., subtitles in different stages) to align with specific branding or app requirements. Suitable for passing as the localization prop to ClerkProvider. Inputs: override object keyed by Clerk's translation hierarchy. Output: Partial localization object merged by Clerk at runtime. Assumes you're working within a Next.js or React project using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nconst localization = {\n  signUp: {\n    start: {\n      subtitle: 'to access {{applicationName}}',\n    },\n    emailCode: {\n      subtitle: 'to access {{applicationName}}',\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Passkey Authentication in Clerk SignIn\nDESCRIPTION: Shows how to implement the Passkey component to trigger an autofill suggestion dialog with stored passkeys. When a user selects a passkey, a sign-in attempt is automatically created, providing a seamless authentication experience.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"start\">\n  <SignIn.Passkey>Continue with Passkey</SignIn.Passkey>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Example\nDESCRIPTION: Simple example showing how to retrieve organization memberships for a user using their user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-organization-membership-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.getOrganizationMembershipList({ userId })\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Stores in React Components\nDESCRIPTION: Example of using Clerk stores to access user data in a React component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/react.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { $userStore } from '@clerk/astro/client'\n\nexport default function Username() {\n  const user = useSyncExternalStore($userStore.listen, $userStore.get, $userStore.get)\n  return <>{user?.firstName}</>\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Clerk Module in Nuxt Configuration (TypeScript)\nDESCRIPTION: Configures the Nuxt application to use the Clerk module by adding `'@clerk/nuxt'` to the `modules` array in the `nuxt.config.ts` file. This integration automatically sets up Clerk's middleware, plugins, and makes Clerk components available throughout the application. Requires the `@clerk/nuxt` package to be installed first.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nuxt.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing Session Data with Clerk useSession() Composable in Vue\nDESCRIPTION: This Vue component example demonstrates how to utilize Clerk's useSession() composable to determine if the user session has loaded, whether a user is signed in, and to access the session's last activity time. To use this, include the @clerk/vue dependency in your project. Key variables destructured from useSession() are isLoaded, isSignedIn, and session; their states guide conditional rendering of loading, signed-out, or session-active UI. The session object exposes the lastActiveAt Date which is formatted using toLocaleString(). The component expects Clerk to be properly initialized in the Vue application context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useSession } from '@clerk/vue'\n\nconst { isLoaded, session, isSignedIn } = useSession()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Handle loading state -->\n  </div>\n\n  <div v-else-if=\"!isSignedIn\">\n    <!-- Handle signed out state -->\n  </div>\n\n  <div v-else>\n    <p>This session has been active since {{ session.lastActiveAt.toLocaleString() }}</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Tanstack React Start\nDESCRIPTION: This snippet shows how to create a dedicated SignUp page in a Tanstack React Start application. It imports the SignUp component from @clerk/tanstack-react-start and uses createFileRoute to define the route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignUp } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-up')({\n  component: SignUp,\n})\n\nfunction SignUp() {\n  return <SignUp />\n}\n```\n\n----------------------------------------\n\nTITLE: Example Usage of revokeSession() in TypeScript\nDESCRIPTION: This example demonstrates how to use the revokeSession() function from the Clerk Backend SDK. It revokes a session with the ID 'sess_123' using the clerkClient.sessions.revokeSession() method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/revoke-session.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst sessionId = 'sess_123'\n\nconst response = await clerkClient.sessions.revokeSession(sessionId)\n```\n\n----------------------------------------\n\nTITLE: Building a React Native Dashboard with User Impersonation using Clerk (TypeScript)\nDESCRIPTION: This snippet implements a React Native dashboard component using TypeScript. It utilizes Clerk hooks (`useUser`, `useSignIn`) and the custom `useUsers` hook to display the current user's info and a list of other application users. It includes functionality to impersonate another user by fetching an actor token from a `/generateActorToken` API endpoint and signing in using Clerk's ticket strategy via `signIn.create`. It depends on React, React Native, Expo Router, Clerk Expo SDK, and the `useUsers` hook, and assumes a backend API endpoint `/generateActorToken` exists.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useState } from 'react'\nimport { Button, Text, View } from 'react-native'\nimport { useRouter } from 'expo-router'\nimport { useUser, useSignIn } from '@clerk/clerk-expo'\nimport useUsers from '../hooks/useUsers'\n\nexport default function Dashboard() {\n  const [error, setError] = useState<string | null>(null)\n\n  const { isLoaded, signIn, setActive } = useSignIn()\n  const { user } = useUser()\n  const router = useRouter()\n  const { users, isLoading } = useUsers()\n\n  if (!user?.id) return null\n\n  // Create an actor token for the impersonation\n  async function createActorToken(actorId: string, userId: string) {\n    setError(null)\n\n    try {\n      const res = await fetch('/generateActorToken', {\n        method: 'POST',\n        body: JSON.stringify({\n          actorId,\n          userId,\n        }),\n      })\n\n      const data = await res.json()\n\n      if (data.errors) {\n        setError(data.errors[0].long_message)\n        return null\n      }\n\n      return data.token\n    } catch (err) {\n      setError('Failed to generate actor token')\n      return null\n    }\n  }\n\n  // Handle \"Impersonate\" button click\n  async function impersonateUser(actorId: string, userId: string) {\n    setError(null)\n    if (!isLoaded) return\n\n    // Calls your /generateActorToken API route\n    const actorToken = await createActorToken(actorId, userId)\n\n    // Sign in as the impersonated user\n    if (actorToken) {\n      try {\n        const { createdSessionId } = await signIn.create({\n          strategy: 'ticket',\n          ticket: actorToken,\n        })\n\n        await setActive({ session: createdSessionId })\n\n        router.push('/')\n      } catch (err) {\n        setError('Failed to impersonate user')\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2))\n      }\n    }\n  }\n\n  return (\n    <View>\n      <Text style={{ fontSize: 24, fontWeight: 'bold', padding: 10 }}>\n        Welcome to the dashboard, {user?.firstName}!\n      </Text>\n      <Text style={{ fontSize: 16, padding: 10 }}>Your user ID is {user?.id}</Text>\n\n      {isLoading && <Text>Loading your users...</Text>}\n\n      {!isLoading && users && (\n        <View style={{ padding: 10 }}>\n          <View style={{ flexDirection: 'row', padding: 5, borderBottomWidth: 1 }}>\n            <Text style={{ flex: 1, fontWeight: 'bold' }}>User ID</Text>\n            <Text style={{ flex: 1, fontWeight: 'bold' }}>Email ID</Text>\n            <Text style={{ flex: 1, fontWeight: 'bold' }}>First Name</Text>\n            <Text style={{ flex: 1, fontWeight: 'bold' }}>Actions</Text>\n          </View>\n          {users.map((userFromList) => {\n            const primaryEmail = userFromList.email_addresses?.find(\n              (email) => email.id === userFromList.primary_email_address_id,\n            )\n            return (\n              <View key={userFromList.id} style={{ flexDirection: 'row', padding: 5 }}>\n                <Text style={{ flex: 1 }}>{userFromList.id}</Text>\n                <Text style={{ flex: 1 }}>{primaryEmail?.id || 'N/A'}</Text>\n                <Text style={{ flex: 1 }}>{userFromList.first_name || 'N/A'}</Text>\n                <View style={{ flex: 1 }}>\n                  {/* Don't allow impersonation of yourself */}\n                  {userFromList.id !== user.id ? (\n                    <Button\n                      title=\"Impersonate\"\n                      onPress={async () => await impersonateUser(user.id, userFromList.id)}\n                    />\n                  ) : (\n                    <Text>You cannot impersonate yourself</Text>\n                  )}\n                </View>\n              </View>\n            )\n          })}\n        </View>\n      )}\n\n      {error && (\n        <View style={{ padding: 10, backgroundColor: '#ffebee' }}>\n          <Text style={{ color: '#c62828' }}>{error}</Text>\n        </View>\n      )}\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing TOTP MFA Addition Page in Next.js\nDESCRIPTION: This code snippet defines React components for adding TOTP-based multi-factor authentication. It includes steps for displaying QR code or URI, verifying the TOTP setup, and generating backup codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { TOTPResource } from '@clerk/types'\nimport Link from 'next/link'\nimport * as React from 'react'\nimport { QRCodeSVG } from 'qrcode.react'\nimport { GenerateBackupCodes } from '../page'\n\ntype AddTotpSteps = 'add' | 'verify' | 'backupcodes' | 'success'\n\ntype DisplayFormat = 'qr' | 'uri'\n\nfunction AddTotpScreen({\n  setStep,\n}: {\n  setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>>\n}) {\n  const { user } = useUser()\n  const [totp, setTOTP] = React.useState<TOTPResource | undefined>(undefined)\n  const [displayFormat, setDisplayFormat] = React.useState<DisplayFormat>('qr')\n  const createTOTP = useReverification(() => user?.createTOTP())\n\n  React.useEffect(() => {\n    void createTOTP()\n      .then((totp: TOTPResource) => {\n        setTOTP(totp)\n      })\n      .catch((err) =>\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2)),\n      )\n  }, [])\n\n  return (\n    <>\n      <h1>Add TOTP MFA</h1>\n\n      {totp && displayFormat === 'qr' && (\n        <>\n          <div>\n            <QRCodeSVG value={totp?.uri || ''} size={200} />\n          </div>\n          <button onClick={() => setDisplayFormat('uri')}>Use URI instead</button>\n        </>\n      )}\n      {totp && displayFormat === 'uri' && (\n        <>\n          <div>\n            <p>{totp.uri}</p>\n          </div>\n          <button onClick={() => setDisplayFormat('qr')}>Use QR Code instead</button>\n        </>\n      )}\n      <button onClick={() => setStep('add')}>Reset</button>\n\n      <p>Once you have set up your authentication app, verify your code</p>\n      <button onClick={() => setStep('verify')}>Verify</button>\n    </>\n  )\n}\n\nfunction VerifyTotpScreen({\n  setStep,\n}: {\n  setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>>\n}) {\n  const { user } = useUser()\n  const [code, setCode] = React.useState('')\n\n  const verifyTotp = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      await user?.verifyTOTP({ code })\n      setStep('backupcodes')\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <>\n      <h1>Verify TOTP</h1>\n      <form onSubmit={(e) => verifyTotp(e)}>\n        <label htmlFor=\"totp-code\">Enter the code from your authentication app</label>\n        <input type=\"text\" id=\"totp-code\" onChange={(e) => setCode(e.currentTarget.value)} />\n        <button type=\"submit\">Verify code</button>\n        <button onClick={() => setStep('add')}>Reset</button>\n      </form>\n    </>\n  )\n}\n\nfunction BackupCodeScreen({\n  setStep,\n}: {\n  setStep: React.Dispatch<React.SetStateAction<AddTotpSteps>>\n}) {\n  return (\n    <>\n      <h1>Verification was a success!</h1>\n      <div>\n        <p>\n          Save this list of backup codes somewhere safe in case you need to access your account in\n          an emergency\n        </p>\n        <GenerateBackupCodes />\n        <button onClick={() => setStep('success')}>Finish</button>\n      </div>\n    </>\n  )\n}\n\nfunction SuccessScreen() {\n  return (\n    <>\n      <h1>Success!</h1>\n```\n\n----------------------------------------\n\nTITLE: Protecting Express Routes with ClerkExpressRequireAuth (Node.js/Express)\nDESCRIPTION: This code demonstrates applying Clerk's ClerkExpressRequireAuth middleware to an Express app, enforcing authentication on protected routes. The middleware injects an auth object into req, providing user/session IDs and a getToken method for further authorization logic. Prerequisites: @clerk/clerk-sdk-node v3+, Express project, Clerk project configured.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nimport { ClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\n\napp.use(ClerkExpressRequireAuth())\napp.get('/', (req, res) => {\n  const { userId, sessionId, getToken } = req.auth\n  // Your handler...\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware for Onboarding Flow\nDESCRIPTION: NextJS middleware implementation that controls route access based on user authentication and onboarding status. It redirects users to appropriate pages depending on their sign-in and onboarding completion status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst isOnboardingRoute = createRouteMatcher(['/onboarding'])\nconst isPublicRoute = createRouteMatcher(['/public-route-example'])\n\nexport default clerkMiddleware(async (auth, req: NextRequest) => {\n  const { userId, sessionClaims, redirectToSignIn } = await auth()\n\n  // For users visiting /onboarding, don't try to redirect\n  if (userId && isOnboardingRoute(req)) {\n    return NextResponse.next()\n  }\n\n  // If the user isn't signed in and the route is private, redirect to sign-in\n  if (!userId && !isPublicRoute(req)) return redirectToSignIn({ returnBackUrl: req.url })\n\n  // Catch users who do not have `onboardingComplete: true` in their publicMetadata\n  // Redirect them to the /onboarding route to complete onboarding\n  if (userId && !sessionClaims?.metadata?.onboardingComplete) {\n    const onboardingUrl = new URL('/onboarding', req.url)\n    return NextResponse.redirect(onboardingUrl)\n  }\n\n  // If the user is logged in and the route is protected, let them view.\n  if (userId && !isPublicRoute(req)) return NextResponse.next()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Database Schema with Drizzle ORM\nDESCRIPTION: Creation of a database schema using Drizzle ORM that defines a user_messages table with columns for user_id, creation timestamp, and message content. The user_id column stores the Clerk user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { pgTable, text, timestamp } from 'drizzle-orm/pg-core'\n\nexport const UserMessages = pgTable('user_messages', {\n  user_id: text('user_id').primaryKey().notNull(),\n  createTs: timestamp('create_ts').defaultNow().notNull(),\n  message: text('message').notNull(),\n})\n```\n\n----------------------------------------\n\nTITLE: Updating `verifyJwt` Import Path in JavaScript\nDESCRIPTION: Shows the required change for importing the `verifyJwt` function. The import path has been updated from `@clerk/backend` to the new, more specific path `@clerk/backend/jwt` as part of SDK refactoring for better tree-shaking and organization. The old path is marked for deletion (-), and the new path is marked for insertion (+).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n    import { verifyJwt } from '@clerk/backend'\n    import { verifyJwt } from '@clerk/backend/jwt'\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Menu Items to UserButton using JavaScript SDK\nDESCRIPTION: This example shows how to add custom menu items to the UserButton component using the Clerk JavaScript SDK. It demonstrates mounting a custom action with an icon and click handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-button\"></div>\n`\n\nconst userButtonDiv = document.getElementById('user-button')\n\nclerk.mountUserButton(userButtonDiv, {\n  customMenuItems: [\n    {\n      label: 'Help modal',\n      onClick: () => {\n        alert('Open modal') // your custom event\n      },\n      mountIcon: (el) => {\n        el.innerHTML = '👤'\n      },\n      unmountIcon: (el) => {},\n    },\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: EnterpriseAccount Interface Properties TypeScript Definition\nDESCRIPTION: TypeScript interface properties that define the structure of an enterprise account including basic user information, authentication details, and metadata fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/enterprise-account.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface EnterpriseAccount {\n  active: boolean;\n  emailAddress: string;\n  enterpriseConnection: EnterpriseAccountConnection | null;\n  firstName: string | null;\n  lastName: string | null;\n  protocol: 'saml' | 'oauth';\n  provider: \"saml_okta\" | \"saml_google\" | \"saml_microsoft\" | \"saml_custom\" | `oauth_${OAuthProvider}`;\n  providerUserId: string | null;\n  publicMetadata: Record<string, unknown> | null;\n  verification: Verification | null;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Fastify using TypeScript\nDESCRIPTION: Shows how to access the JWT session claims (`JwtPayload`) within a Fastify application using the `getAuth` function provided by the `@clerk/fastify` package. This demonstrates the standard way to retrieve authenticated session details, including the JWT payload, in a Fastify server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Retrieving Sessions for a Specific User ID with Clerk Backend SDK\nDESCRIPTION: Example of using getSessionList to retrieve sessions for a specific user ID. This demonstrates basic usage of the function with the Clerk client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.sessions.getSessionList({ userId })\n```\n\n----------------------------------------\n\nTITLE: Setting up ClerkProvider in Root Route\nDESCRIPTION: Implementation of ClerkProvider component in the application's root route for authentication context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Outlet, createRootRoute } from '@tanstack/react-router'\nimport { Meta, Scripts } from '@tanstack/react-start'\nimport * as React from 'react'\nimport { ClerkProvider } from '@clerk/tanstack-react-start'\n\nexport const Route = createRootRoute({\n  component: () => {\n    return (\n      <RootDocument>\n        <Outlet />\n      </RootDocument>\n    )\n  },\n})\n\nfunction RootDocument({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html>\n        <head>\n          <Meta />\n        </head>\n        <body>\n          {children}\n          <Scripts />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating `signJwt` Import Path in JavaScript\nDESCRIPTION: Illustrates the necessary update for importing the `signJwt` function. As part of SDK improvements, its import path changed from `@clerk/backend` to the more specific `@clerk/backend/jwt`. The code shows the previous import statement to delete and the replacement import statement.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_5\n\nLANGUAGE: js\nCODE:\n```\n    import { signJwt } from '@clerk/backend'\n    import { signJwt } from '@clerk/backend/jwt'\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using npm - Bash\nDESCRIPTION: Installs or updates the project to use the latest versions of react and react-dom using npm. This command is used to meet the new minimum React 18 requirement for Clerk SDKs. The main parameters are the package names and the '@latest' version specifier. Input: run in a terminal; Output: node_modules and package.json updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Creating Phone Number - TypeScript Declaration\nDESCRIPTION: Method signature for creating a new phone number for the current user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Deleting User in Express with Clerk SDK (TypeScript)\nDESCRIPTION: Shows how to implement a user deletion endpoint in an Express application. It defines a POST route `/deleteUser` that extracts the `userId` from the request body, calls `clerkClient.users.deleteUser`, and sends back appropriate JSON responses based on success or failure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/deleting-users.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/deleteUser', async (req, res) => {\n  const userId = req.body.userId\n\n  try {\n    await clerkClient.users.deleteUser(userId)\n    res.status(200).json({ message: 'User deleted' })\n  } catch (error) {\n    console.log(error)\n    res.status(500).json({ error: 'Error deleting user' })\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Retrieving Private Metadata with Clerk Fullstack SDK (TypeScript)\nDESCRIPTION: This TypeScript function retrieves a user's private metadata using Clerk's Fullstack SDK. It accepts a request with 'userId', fetches the user object, and returns the privateMetadata as JSON. Requires 'clerkClient' to be properly initialized. Accessible only from backend; result includes all user private metadata fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function GET(req) {\n  const { userId } = await req.json()\n\n  const user = await clerkClient.users.getUser(userId)\n\n  return Response.json(user.privateMetadata)\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.getUser()\n```\n\n----------------------------------------\n\nTITLE: Implementing Infinite Pagination with useOrganization in React\nDESCRIPTION: Example of how to implement infinite pagination for organization memberships using the useOrganization hook with the infinite property, which appends new data to the existing list as users load more content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useOrganization } from '@clerk/clerk-react'\n\nexport default function MemberList() {\n  const { memberships } = useOrganization({\n    memberships: {\n      infinite: true, // Append new data to the existing list\n      keepPreviousData: true, // Persist the cached data until the new data has been fetched\n    },\n  })\n\n  if (!memberships) {\n    // Handle loading state\n    return null\n  }\n\n  return (\n    <div>\n      <h2>Organization members</h2>\n      <ul>\n        {memberships.data?.map((membership) => (\n          <li key={membership.id}>\n            {membership.publicUserData.firstName} {membership.publicUserData.lastName} &lt;\n            {membership.publicUserData.identifier}&gt; :: {membership.role}\n          </li>\n        ))}\n      </ul>\n\n      <button\n        disabled={!memberships.hasNextPage} // Disable the button if there are no more available pages to be fetched\n        onClick={memberships.fetchNext}\n      >\n        Load more\n      </button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Publishable Key in .env (env)\nDESCRIPTION: Example configuration for storing the Clerk Publishable Key in an `.env` file, specifically for Vite projects where environment variables prefixed with `VITE_` are exposed to the client-side code. Replace `{{pub_key}}` with your actual key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\n```env {{ filename: '.env' }}\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n```\n\n----------------------------------------\n\nTITLE: SignOutButton Usage in Vue\nDESCRIPTION: Shows how to implement the SignOutButton component in a Vue application, including both basic usage and a custom button example.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-out-button.mdx#2025-04-23_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignOutButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignOutButton />\n</template>\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignOutButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignOutButton>\n    <button>Custom sign out button</button>\n  </SignOutButton>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Setting Private Metadata via Clerk Backend REST API (cURL)\nDESCRIPTION: This cURL command shows how to update a user's private metadata via Clerk's REST API. Requires a valid Clerk secret API key for authorization in the 'Bearer' token and a properly formatted JSON payload. The endpoint updates the 'private_metadata' for the specified user. Only callable from the backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncurl -XPATCH -H 'Authorization: Bearer CLERK_SECRET_KEY' -H \"Content-type: application/json\" -d '{\n  \"private_metadata\": {\n    \"stripeId\": \"12356\"\n  }\n}' 'https://api.clerk.com/v1/users/{user_id}/metadata'\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Definition for SAML Connection Deletion\nDESCRIPTION: TypeScript function signature for deleting a SAML connection. Takes a SAML connection ID as input and returns a Promise containing a DeletedObject.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/delete-saml-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteSamlConnection(samlConnectionId: string): Promise<DeletedObject>\n```\n\n----------------------------------------\n\nTITLE: Defining OAuthStrategy Type in TypeScript\nDESCRIPTION: Defines the OAuthStrategy type to represent allowed OAuth authentication method values in TypeScript. It enables specification of either a supported provider strategy in the format `oauth_<provider>` or a custom OAuth strategy variant. Used in configuration objects (e.g., SignIn/SignUp params) to control social authentication flows. Depends on the OAuthProvider and CustomOAuthStrategy types; accepts both predefined and custom strategies as template literal types.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sso.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\ntype OAuthStrategy = `oauth_${OAuthProvider}` | CustomOAuthStrategy\n```\n\n----------------------------------------\n\nTITLE: Adding Verification Step to Clerk Sign-Up Flow\nDESCRIPTION: This code snippet adds a verification step to the sign-up flow, handling both phone and email verification strategies. It demonstrates conditional rendering of verification forms based on the authentication strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-up.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <SignUp.Root>\n      <SignUp.Step name=\"start\">\n        {/* ... previous code ... */}\n      </SignUp.Step>\n\n      <SignUp.Step name=\"verifications\">\n        <SignUp.Strategy name=\"phone_code\">\n          <h1>Check your phone for an SMS</h1>\n\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Phone Code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignUp.Action submit>Verify</SignUp.Action>\n        </SignUp.Strategy>\n\n        <SignUp.Strategy name=\"email_code\">\n          <h1>Check your email</h1>\n\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Email Code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n\n          <SignUp.Action submit>Verify</SignUp.Action>\n        </SignUp.Strategy>\n      </SignUp.Step>\n    </SignUp.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Client Initialization Parameter from apiKey to secretKey\nDESCRIPTION: Shows the parameter name change from apiKey to secretKey when initializing a Clerk client, along with the updated import from @clerk/backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_47\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/backend'\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = Clerk({ apiKey: '...' })\nconst clerkClient = createClerkClient({ secretKey: '...' })\n\nclerkClient.authenticateRequest({ apiKey: '...' })\nclerkClient.authenticateRequest({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Asserting Clerk is Loaded in Playwright Tests using TypeScript\nDESCRIPTION: This snippet demonstrates using `clerk.loaded({ page })` from `@clerk/testing/playwright` to assert that the Clerk instance has successfully loaded on the current page within a Playwright test. It requires navigating to a page where Clerk is initialized before making the assertion. Dependencies include `@clerk/testing` and `playwright`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-helpers.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { clerk } from '@clerk/testing/playwright'\n\ntest('ensure that clerk has loaded', async ({ page }) => {\n  // Navigate to an unprotected page that loads Clerk\n  await page.goto('/')\n\n  await clerk.loaded({ page })\n  // clerk has loaded\n})\n```\n\n----------------------------------------\n\nTITLE: Running Clerk CLI Upgrade Tool using yarn dlx - Bash\nDESCRIPTION: Executes Clerk's upgrade helper with yarn dlx to provide upgrade guidance for Core 2. This approach is recommended when using yarn's latest features.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances using App Router - Next.js - TypeScript/TSX\nDESCRIPTION: Demonstrates how to set a base theme for the entire app while overriding the theme for all instances of the SignIn Clerk component using ClerkProvider in Next.js App Router. Dependencies include @clerk/nextjs and @clerk/themes. Shows how to use the appearance baseTheme and a component-specific configuration for signIn.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { dark, neobrutalism } from '@clerk/themes'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n        signIn: { baseTheme: neobrutalism },\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Middleware and getAuth in Application Routes (TypeScript)\nDESCRIPTION: Demonstrates applying the Clerk authentication middleware to all routes and using the getAuth helper to conditionally respond based on user login state. Returns a JSON message indicating authentication status, using context.json for output. Expects the app instance to follow a Koa/Express-like interface. Relies on the prior existence of clerkMiddleware and getAuth.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst app = new Framework()\n\napp.use('*', clerkMiddleware())\napp.get('/', (context) => {\n  const auth = getAuth(context)\n\n  if (!auth?.userId) {\n    return context.json({ message: 'Not logged in' })\n  }\n\n  return context.json({ message: 'Logged in', userId: auth.userId })\n})\n```\n\n----------------------------------------\n\nTITLE: Handling Organization-related Operations with Clerk Auth\nDESCRIPTION: This snippet shows how to use Clerk auth() to check both user authentication and organization membership before allowing domain verification actions. It demonstrates organization-specific operations using the orgId property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default function AddVerifiedDomain() {\n  async function addVerifiedDomain(formData: FormData) {\n    'use server'\n\n    const { userId, orgId } = await auth()\n\n    if (!userId) {\n      throw new Error('You must be signed in to add a verified domain')\n    }\n\n    if (!orgId) {\n      throw new Error('No active organization found. Set one as active or create/join one')\n    }\n\n    const domain = formData.get('domain')?.toString()\n    if (!domain) {\n      throw new Error('Domain is required')\n    }\n\n    await clerkClient().organizations.createOrganizationDomain({\n      organizationId: orgId,\n      name: domain,\n      enrollmentMode: 'automatic_invitation',\n    })\n\n    console.log(`Added domain ${domain} to organization ${orgId}`)\n  }\n\n  return (\n    <form action={addVerifiedDomain}>\n      <input placeholder=\"example.com\" type=\"text\" name=\"domain\" />\n      <button type=\"submit\">Add Domain</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring lockUser Function Signature in TypeScript\nDESCRIPTION: TypeScript function signature for the lockUser method that takes a userId string parameter and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/lock-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction lockUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Implementing Phone Number OTP Sign-Up in iOS with Clerk\nDESCRIPTION: This Swift extension implements the sign-up process using phone number OTP with Clerk. It includes methods for submitting the phone number and verifying the OTP code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_4\n\nLANGUAGE: swift\nCODE:\n```\nextension SMSOTPSignUpView {\n\n  func submit(phoneNumber: String) async {\n    do {\n      // Start the sign-up process using the phone number method.\n      let signUp = try await SignUp.create(strategy: .standard(phoneNumber: phoneNumber))\n\n      // Start the verification - a SMS message will be sent to the\n      // number with a one-time code.\n      try await signUp.prepareVerification(strategy: .phoneCode)\n\n      // Set isVerifying to true to display second form and capture the OTP code.\n      isVerifying = true\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n\n  func verify(code: String) async {\n    do {\n      // Access the in progress sign up stored on the client object.\n      guard let inProgressSignUp = Clerk.shared.client?.signUp else { return }\n\n      // Use the code provided by the user and attempt verification.\n      let signUp = try await inProgressSignUp.attemptVerification(strategy: .phoneCode(code: code))\n\n      switch signUp.status {\n      case .complete:\n        // If verification was completed, navigate the user as needed.\n        dump(Clerk.shared.session)\n      default:\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        dump(signUp.status)\n      }\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Invitations.getInvitationList Return Signature in Clerk API\nDESCRIPTION: The return signature of Invitations.getInvitationList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: JWT Payload Structure in JSON\nDESCRIPTION: Demonstrates the decoded JWT payload structure containing user information and token metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/tokens-and-signatures.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"sub\": \"user_123\",\n  \"iat\": 1516239022\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Phone Number to String - TypeScript Declaration\nDESCRIPTION: Method signature for converting phone number to E.164 format string representation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction toString(): string\n```\n\n----------------------------------------\n\nTITLE: Database Transaction for Todo Toggle\nDESCRIPTION: Updates the completion status of all todos in a database transaction. Uses a map operation to create update transactions for each todo item.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst newVal = !todos.every((todo) => todo.done)\ndb.transact(todos.map((todo) => db.tx.todos[todo.id].update({ done: newVal })))\n```\n\n----------------------------------------\n\nTITLE: Revoking a Session using Clerk Backend SDK in TypeScript\nDESCRIPTION: This function revokes a Session given its ID. It takes a sessionId as a string parameter and returns a Promise that resolves to a Session object. When called, it signs out the user from the particular client referred to by the session.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/revoke-session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revokeSession(sessionId: string): Promise<Session>\n```\n\n----------------------------------------\n\nTITLE: Astro CreateOrganization Implementation\nDESCRIPTION: Implementation of the CreateOrganization component in Astro framework.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { CreateOrganization } from '@clerk/astro/components'\n---\n\n<CreateOrganization />\n```\n\n----------------------------------------\n\nTITLE: JavaScript Mount CreateOrganization Implementation\nDESCRIPTION: Example of mounting the CreateOrganization component using JavaScript.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"create-organization\"></div>\n`\n\nconst createOrgDiv = document.getElementById('create-organization')\n\nclerk.mountCreateOrganization(createOrgDiv)\n```\n\n----------------------------------------\n\nTITLE: Migrating Users.getOrganizationList Return Signature in JavaScript\nDESCRIPTION: Shows how the return signature of Users.getOrganizationList has changed. Instead of returning data directly, it now returns an object with data and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Installing the @clerk/localizations Package (Bash)\nDESCRIPTION: Provides commands to install the `@clerk/localizations` package using various JavaScript package managers (npm, yarn, pnpm, bun). This package is required to access predefined localization strings for Clerk components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/localizations\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/localizations\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/localizations\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/localizations\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Routes with Dedicated UserProfile Page in Clerk for Next.js (TypeScript)\nDESCRIPTION: Shows the use of Clerk's UserProfile component directly in a route-specific page of a Next.js application (TypeScript/React). Customizes the side navigation menu by adding a custom page with a labeled icon and homepage link before the default 'account' and 'security' pages. The setup depends on '@clerk/nextjs' and demonstrates the use of UserProfile.Page and UserProfile.Link within the UserProfile context, producing a dedicated user profile route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\n'use client'\\n\\nimport { UserProfile } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\\n    </svg>\\n  )\\n}\\n\\nconst CustomPage = () => {\\n  return (\\n    <div>\\n      <h1>Custom page</h1>\\n      <p>This is the content of the custom page.</p>\\n    </div>\\n  )\\n}\\n\\nconst UserProfilePage = () => (\\n  <UserProfile>\\n    <UserProfile.Page label=\"Custom Page\" url=\"custom\" labelIcon={<DotIcon />}>\\n      <CustomPage />\\n    </UserProfile.Page>\\n    <UserProfile.Link label=\"Homepage\" url=\"/\" labelIcon={<DotIcon />} />\\n    <UserProfile.Page label=\"account\" />\\n    <UserProfile.Page label=\"security\" />\\n  </UserProfile>\\n)\\n\\nexport default UserProfilePage\n```\n\n----------------------------------------\n\nTITLE: Updated Organization List Response Format\nDESCRIPTION: Shows the change in accessing organization list data with the new response format that includes totalCount.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Next.js Dashboard Main Page Implementation\nDESCRIPTION: Server component that fetches and displays user list with impersonation functionality. Includes permission checks and user data parsing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth, clerkClient } from '@clerk/nextjs/server'\nimport ImpersonateUsers from './_components'\n\nexport default async function AccountPage() {\n  const { has } = await auth()\n\n  if (!has({ permission: 'org:admin:impersonate' })) {\n    return <p>You do not have permission to access this page.</p>\n  }\n\n  const client = await clerkClient()\n  const users = await client.users.getUserList()\n\n  const parsedUsers = []\n  for (const user of users.data) {\n    parsedUsers.push({\n      id: user.id,\n      email: user.primaryEmailAddress?.emailAddress,\n    })\n  }\n\n  return <ImpersonateUsers users={parsedUsers} />\n}\n```\n\n----------------------------------------\n\nTITLE: Reordering Default and Custom Organization Profile Navigation in Dedicated Page - Clerk Next.js - TypeScript\nDESCRIPTION: This advanced snippet shows how to use OrganizationProfile in a dedicated Next.js page to reorder built-in navigation items and insert custom pages/links with icons using <OrganizationProfile.Page> and <OrganizationProfile.Link>. The DotIcon and CustomPage components are defined for iconography and interactive content. '@clerk/nextjs' is required. The navigation combines custom pages, links, and defaults in a specific order for enhanced flexibility.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { OrganizationProfile } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n      <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\" />\\n    </svg>\\n  )\\n}\\n\\nconst CustomPage = () => {\\n  return (\\n    <div>\\n      <h1>Custom page</h1>\\n      <p>This is the content of the custom page.</p>\\n    </div>\\n  )\\n}\\n\\nconst OrganizationProfilePage = () => (\\n  <OrganizationProfile>\\n    <OrganizationProfile.Page label=\\\"Custom Page\\\" url=\\\"custom\\\" labelIcon={<DotIcon />}>\\n      <CustomPage />\\n    </OrganizationProfile.Page>\\n    <OrganizationProfile.Link label=\\\"Homepage\\\" url=\\\"/\\\" labelIcon={<DotIcon />} />\\n    <OrganizationProfile.Page label=\\\"members\\\" />\\n    <OrganizationProfile.Page label=\\\"general\\\" />\\n  </OrganizationProfile>\\n)\\n\\nexport default OrganizationProfilePage\n```\n\n----------------------------------------\n\nTITLE: Updating Return Signature for Users.getOrganizationMembershipList in JavaScript\nDESCRIPTION: This snippet shows the change in return signature for the Users.getOrganizationMembershipList method. The new signature returns an object with 'data' and 'totalCount' properties, allowing easier access to the total number of items in paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Clerk General Authentication URL Variables\nDESCRIPTION: Configuration variables for standard Clerk authentication URLs, including sign-in, sign-up, force redirect, and fallback URLs. These variables control the authentication flow and redirect behavior in a standard Clerk implementation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/environment-variables.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description | Example |\n| - | - | - |\n| `CLERK_SIGN_IN_URL` | The full URL or path to your sign-in page. Needs to point to your primary application on the client-side. **Required for a satellite application in a development instance.** | `/sign-in` |\n| `CLERK_SIGN_UP_URL` | The full URL or path to your sign-up page. Needs to point to your primary application on the client-side. **Required for a satellite application in a development instance.** | `/sign-up` |\n| `CLERK_SIGN_IN_FORCE_REDIRECT_URL` | If provided, this URL will always be redirected to after the user signs in. | `/dashboard` |\n| `CLERK_SIGN_UP_FORCE_REDIRECT_URL` | If provided, this URL will always be redirected to after the user signs up. | `/dashboard` |\n| `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` | The fallback URL to redirect to after the user signs in, if there's no `redirect_url` in the path already. Defaults to `/`. | `/dashboard` |\n| `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` | The fallback URL to redirect to after the user signs up, if there's no `redirect_url` in the path already. Defaults to `/`. | `/dashboard` |\n```\n\n----------------------------------------\n\nTITLE: Accessing User Authentication Data on Server-Side in Pages Router\nDESCRIPTION: Using Clerk's getAuth() helper to access user authentication data in Next.js Pages Router getServerSideProps function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function getServerSideProps(context) {\n  const session = getAuth(context.req)\n\n  return { props: { ...buildClerkProps(ctx.req) } }\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Active Session and User in React with Clerk\nDESCRIPTION: This snippet demonstrates how to retrieve the active session and user using the useClerk hook from @clerk/clerk-react.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-react'\n\n// Get the active session and user\nconst { session, user } = useClerk()\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Backend Client\nDESCRIPTION: Example of creating and using a Clerk client with @clerk/backend package to authenticate requests and access session claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Configuring React Router Routes for Sign-In/Up (TSX)\nDESCRIPTION: This snippet shows how to configure React Router routes in `app/routes.ts`. It defines an index route pointing to `routes/home.tsx` and a splat route `sign-in/*` that maps to the previously created `SignInPage` component (`routes/sign-in.tsx`), making the combined sign-in/up page accessible.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes.ts', mark: [5] }}\nimport { type RouteConfig, index, route } from '@react-router/dev/routes'\n\nexport default [\n  index('routes/home.tsx'),\n  route('sign-in/*', 'routes/sign-in.tsx'),\n] satisfies RouteConfig\n```\n```\n\n----------------------------------------\n\nTITLE: Using SyncActiveOrganization in Layout to Ensure Consistent Organization Context - TypeScript\nDESCRIPTION: This layout component ensures the SyncActiveOrganization helper is present for all organization-routed pages, making sure organization context is in sync with the current URL. It acts as a wrapper layout for routes like /app/[orgId], importing and rendering the helper before children elements. Inputs: React children, Outputs: rendered children with organization context synchronized. Requirements: component must be used in a Next.js App Router project with Clerk and the SyncActiveOrganization helper.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_5\n\nLANGUAGE: TSX\nCODE:\n```\nimport { type PropsWithChildren } from 'react'\nimport { SyncActiveOrganization } from '../utils/sync-active-organization'\n\nexport default function OrganizationLayout(props: PropsWithChildren) {\n  return (\n    <>\n      <SyncActiveOrganization />\n      {props.children}\n    </>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Applying Custom CSS Classes to Clerk Components in Next.js App Router\nDESCRIPTION: Example of using the appearance prop to apply custom CSS classes to a Clerk SignIn component in a Next.js app using the App Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <SignIn\n            appearance={{\n              elements: {\n                formButtonPrimary: 'your-org-button org-red-button',\n              },\n            }}\n          />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Clerk Plugin for Specific Routes in Fastify\nDESCRIPTION: This example shows how to apply Clerk authentication only to specific routes by registering the plugin in the scope of those routes. The application is split into protected routes (which require authentication) and public routes that are accessible to everyone.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/fastify/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'dotenv/config'\nimport Fastify, { FastifyPluginCallback } from 'fastify'\nimport { clerkClient, clerkPlugin, getAuth } from '@clerk/fastify'\n\nconst fastify = Fastify({ logger: true })\n\nconst protectedRoutes: FastifyPluginCallback = (instance, options, done) => {\n  instance.register(clerkPlugin)\n\n  instance.get('/protected', async (req, reply) => {\n    const { userId } = getAuth(req)\n\n    // Protect the route from unauthenticated users\n    if (!userId) {\n      return reply.code(403).send({ message: 'Access denied. Authentication required.' })\n    }\n\n    const user = await clerkClient.users.getUser(userId)\n\n    // Only authenticated users will see the following message\n    reply.send({ message: 'This is a protected route.', user })\n  })\n\n  done()\n}\n\nconst publicRoutes: FastifyPluginCallback = (instance, options, done) => {\n  instance.get('/', async (req, reply) => {\n    reply.send({ message: 'This is a public route.' })\n  })\n\n  done()\n}\n\nfastify.register(protectedRoutes)\nfastify.register(publicRoutes)\n\nconst start = async () => {\n  try {\n    await fastify.listen({ port: 8080 })\n  } catch (error) {\n    fastify.log.error(error)\n    process.exit(1)\n  }\n}\n\nstart()\n```\n\n----------------------------------------\n\nTITLE: Defining the `inviteMembers` Function Signature in TypeScript\nDESCRIPTION: This TypeScript signature defines the `inviteMembers` function. It accepts an `InviteMembersParams` object containing an array of email addresses and a role string, and returns a Promise that resolves to an array of `OrganizationInvitation` objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\nfunction inviteMembers(params: InviteMembersParams): Promise<OrganizationInvitation[]>\n```\n```\n\n----------------------------------------\n\nTITLE: Using @clerk/clerk-sdk-node with Express\nDESCRIPTION: Example of how to use the @clerk/clerk-sdk-node package with an Express router. This snippet shows how to require authentication and access the auth object in a route handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Components for asChild Prop Usage\nDESCRIPTION: Shows how to implement a custom input component that can be used with the asChild prop in Clerk Elements. This ensures proper prop forwarding and ref handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { forwardRef } from 'react'\n\nconst CustomInput = forwardRef(function CustomInput(props, forwardedRef) {\n  return <input ref={forwardedRef} {...props} className=\"custom-class\" />\n})\n```\n\n----------------------------------------\n\nTITLE: Defining banUser Function Signature in TypeScript\nDESCRIPTION: TypeScript function signature for the banUser method that takes a user ID and returns a Promise containing the banned User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/ban-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction banUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `MutationOnOlderSignInNotAllowed` in JSON\nDESCRIPTION: This JSON object defines the structure for the `MutationOnOlderSignInNotAllowed` error in Clerk. It signifies that an attempt was made to modify or update a sign-in attempt that is considered old or stale, which is not permitted. It includes a `shortMessage` and the `code` 'resource_forbidden'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Update operations are not allowed on older sign ins\",\n  \"code\": \"resource_forbidden\"\n}\n```\n\n----------------------------------------\n\nTITLE: Wrapping Remix Root Component with ClerkApp (TSX)\nDESCRIPTION: This TSX snippet demonstrates wrapping the main Remix application component (`App`) with the `ClerkApp` higher-order component from `@clerk/remix`. It imports `ClerkApp`, retrieves the `VITE_CLERK_PUBLISHABLE_KEY` from environment variables via `import.meta.env`, and passes it to `ClerkApp` to initialize Clerk and provide authentication context throughout the React component tree.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkApp } from '@clerk/remix'\nimport { Links, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>\n  )\n}\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\n// Wrap your app with `ClerkApp`\nexport default ClerkApp(App, {\n  publishableKey: PUBLISHABLE_KEY,\n})\n```\n\n----------------------------------------\n\nTITLE: Example: Retrieving Active Organization with Clerk JS SDK (JavaScript)\nDESCRIPTION: Shows how to retrieve information about the currently active organization by passing `clerk.organization.id` to the `clerk.getOrganization` method. This assumes the user is currently associated with an active organization within the Clerk context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_13\n\nLANGUAGE: js\nCODE:\n```\nawait clerk.getOrganization(clerk.organization.id)\n```\n\n----------------------------------------\n\nTITLE: Defining SignInInitialValues Type for Clerk Sign-In Form in Typescript\nDESCRIPTION: This code snippet defines the SignInInitialValues type for Clerk sign-in forms in Typescript. It outlines the shape of the initialValues prop, allowing optional fields for email address, username, and phone number in E.164 format. The snippet requires Typescript and is used as a prop type definition for form pre-population; all properties are optional and accept either a string or undefined.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-initial-values.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SignInInitialValues = {\n  emailAddress?: string;\n  username?: string;\n  phoneNumber?: string; // E.164 format\n};\n```\n\n----------------------------------------\n\nTITLE: Synchronizing Active Organization from URL in Next.js - TypeScript\nDESCRIPTION: This component, SyncActiveOrganization, synchronizes the active Clerk organization with the organization ID specified in the URL using Next.js's useParams() and Clerk's useOrganizationList(). If the orgId in the URL does not match the session's orgId, setActive is called to update the active organization. Dependencies: @clerk/nextjs, Next.js App Router, useOrganizationList, useAuth. Inputs: session/context, URL params. Output: side effect (updates session active organization); Component returns null and is meant to be rendered for side effect.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_4\n\nLANGUAGE: TSX\nCODE:\n```\n'use client'\n\nimport { useEffect } from 'react'\nimport { redirect, useParams } from 'next/navigation'\nimport { useAuth, useOrganizationList } from '@clerk/nextjs'\n\nexport function SyncActiveOrganization() {\n  // Use `useOrganizationList()` to access the `setActive()` method\n  const { setActive, isLoaded } = useOrganizationList()\n\n  // Get the organization ID from the session\n  const { orgId } = useAuth()\n\n  // Get the organization ID from the URL\n  const { orgId: urlOrgId } = useParams() as { orgId: string }\n\n  useEffect(() => {\n    if (!isLoaded) return\n\n    // If the org ID in the URL is not valid, redirect to the homepage\n    if (!urlOrgId?.startsWith('org_')) {\n      redirect('/')\n      return\n    }\n\n    // If the org ID in the URL is not the same as\n    // the org ID in the session (the active organization),\n    // set the active organization to be the org ID from the URL\n    if (urlOrgId && urlOrgId !== orgId) {\n      void setActive({ organization: urlOrgId })\n    }\n  }, [orgId, isLoaded, setActive, urlOrgId])\n\n  return null\n}\n\n```\n\n----------------------------------------\n\nTITLE: Redirect URLs Response Format Update\nDESCRIPTION: Shows the changed response format for getRedirectUrlList with totalCount property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignIn in Next.js App Router\nDESCRIPTION: This snippet demonstrates how to use the RedirectToSignIn component in a Next.js application using the App Router. It wraps the component in ClerkProvider and uses SignedIn and SignedOut components to control access.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signin.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToSignIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html>\n      <body>\n        <ClerkProvider>\n          <SignedIn>{children}</SignedIn>\n          <SignedOut>\n            <RedirectToSignIn />\n          </SignedOut>\n        </ClerkProvider>\n      </body>\n    </html>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Next.js App Router\nDESCRIPTION: This snippet demonstrates how to customize a specific SignIn component instance in a Next.js App Router application by directly passing appearance variables to the component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/nextjs'\n\nexport default function Page() {\n  return (\n    <SignIn\n      appearance={{\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      }}\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Organization Public Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing public metadata for an organization with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationPublicMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Organizations with Clerk API in Vanilla JavaScript\nDESCRIPTION: This example shows how to use the clerk.createOrganization() method to create a new organization in a vanilla JavaScript application. It includes both HTML and JavaScript code for setting up the form and handling the organization creation process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/create-organizations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h1>Create an organization</h1>\n    <form id=\"create-organization\">\n      <label for=\"name\">Name</label>\n      <input id=\"name\" name=\"name\" />\n      <button>Create organization</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  const form = document.getElementById('create-organization')\n\n  form.addEventListener('submit', function (e) {\n    e.preventDefault()\n\n    const inputEl = document.getElementById('name')\n\n    if (!inputEl) {\n      // ... handle empty input\n      return\n    }\n\n    clerk\n      .createOrganization({ name: inputEl.value })\n      .then((res) => console.log(res))\n      .catch((error) => console.log('An error occurred:', error))\n  })\n} else {\n  // If there is no active user, mount Clerk's <SignIn />\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Active Session or Organization in Clerk SDK\nDESCRIPTION: Function to set the active session and/or organization. It accepts a SetActiveParams object and returns a promise.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_36\n\nLANGUAGE: typescript\nCODE:\n```\nfunction setActive(params: SetActiveParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Backup Codes Display Component\nDESCRIPTION: Component that displays backup codes in a FlatList with a finish button to complete the MFA setup process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n<FlatList\n  data={backupCode.codes.map((code) => ({\n    key: code,\n  }))}\n  renderItem={({ item }) => <Text>{item.key}</Text>}\n/>\n\n<Button title=\"Finish\" onPress={() => setStep('success')} />\n```\n\n----------------------------------------\n\nTITLE: Displaying Field State with Clerk.FieldState in TypeScript/React\nDESCRIPTION: Shows how to use <Clerk.FieldState> inside a form field to programmatically access and render the field's current state (such as idle, success, or error) in a TypeScript/React application. Requires the field to be created and referenced by name, supporting use cases like real-time validation feedback. Inputs and outputs depend on user's interaction with the input.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"emailAddress\">\n  <Clerk.Label>Email</Clerk.Label>\n  <Clerk.Input />\n  <Clerk.FieldState>{({ state }) => <p>Field's state is: {state}</p>}</Clerk.FieldState>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Resetting User Password with Clerk (JavaScript)\nDESCRIPTION: Allows resetting a user's password using Clerk's `resetPassword` method. Accepts parameters including the new `password` and an optional `signOutOfOtherSessions` flag to log out from other sessions upon resetting. Typically used in a password-reset flow, returning a `SignIn` object with the result. Depends on the Clerk SDK and requires that the user can be authenticated or the password reset process is initiated. Inputs: password (string), signOutOfOtherSessions (optional boolean). Output: Promise resolving to a `SignIn` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.signIn.resetPassword({\n  password: 'new-password',\n})\n```\n\n----------------------------------------\n\nTITLE: Example of OKX Wallet Authentication in Clerk\nDESCRIPTION: Example of using the authenticateWithOKXWallet method to initiate authentication via an OKX Wallet. This method prompts the user to connect their wallet and verify ownership.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.authenticateWithOKXWallet()\n```\n\n----------------------------------------\n\nTITLE: User List Response Format Update\nDESCRIPTION: Illustrates the new response format for getUserList including the totalCount property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `IdentificationClaimed` in JSON\nDESCRIPTION: This JSON object defines the structure for the `IdentificationClaimed` error in Clerk. It occurs during sign-up when one or more identifiers (like email or phone number) provided are already associated with a different existing user account. It contains `shortMessage`, `longMessage`, and the `code` 'identification_claimed'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Identification claimed by another user\",\n  \"longMessage\": \"One or more identifiers on this sign up have since been connected to a different User. Please sign up again.\",\n  \"code\": \"identification_claimed\"\n}\n```\n\n----------------------------------------\n\nTITLE: Adding UserProfileLink to UserButton in Astro\nDESCRIPTION: Example showing how to implement UserButton with a custom link in Astro. The code demonstrates how to use UserButton.UserProfileLink with a slot-based label icon implementation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_6\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.UserProfileLink label=\"Homepage\" url=\"/\">\n      <svg\n        slot=\"label-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        fill=\"currentColor\"\n      >\n        <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n      </svg>\n    </UserButton.UserProfileLink>\n  </UserButton>\n</header>\n```\n\n----------------------------------------\n\nTITLE: Making Same-Origin Request with Vanilla JavaScript\nDESCRIPTION: Simple fetch request for same-origin endpoints where session token is automatically passed via cookies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfetch('/api/foo').then((res) => res.json())\n```\n\n----------------------------------------\n\nTITLE: Implementing Protected Server Actions with Client Components - Client Component\nDESCRIPTION: This snippet shows how to create a client component that uses a server action passed as a prop. It demonstrates proper prop drilling to ensure headers are available when the action is called.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nexport default function AddItem({ addItem }) {\n  return (\n    <form action={addItem}>\n      <input value={'test'} type=\"text\" name=\"name\" />\n      <button type=\"submit\">Add to Cart</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Authenticating Grafbase Requests with Clerk and SWR\nDESCRIPTION: React hook implementation using SWR to authenticate GraphQL queries to Grafbase with Clerk's session token. It retrieves the token from Clerk and includes it as a Bearer token in the request headers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport const useQuery = (query, variables) => {\n  if (!query) {\n    throw Error('No query provided to `useQuery`')\n  }\n\n  // Use Clerk's `useAuth()` hook to access the `getToken()` method\n  const { getToken } = useAuth()\n\n  const fetcher = async () => {\n    // Retrieve Clerk's session token using the template you created in the Clerk Dashboard\n    const token = await getToken({ template: 'grafbase' })\n\n    try {\n      const response = await fetch('YOUR_GRAFBASE_API', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          authorization: `Bearer ${token}`, // Send the session token as a Bearer token in the `Authorization` header\n        },\n        body: JSON.stringify({ query, variables }),\n      })\n      return response.json()\n    } catch (err) {\n      console.error(err)\n    }\n  }\n  return useSWR(query, fetcher)\n}\n\nconst YOUR_GRAPHQL_QUERY = `\n\tquery {\n\t\t__schema {\n\t\t\ttypes {\n\t\t\t\tname\n\t\t\t}\n\t\t}\n\t}\n`\n\nconst SchemaPage = () => {\n  const { data, error } = useQuery(YOUR_GRAPHQL_QUERY)\n  if (error) {\n    return <div>error</div>\n  }\n  return <pre>{JSON.stringify({ data }, 2, null)}</pre>\n}\n\nexport default SchemaPage\n```\n\n----------------------------------------\n\nTITLE: Protecting Pages with Clerk Auth in Astro\nDESCRIPTION: Example of protecting a page by checking user authentication status using Astro.locals.auth(). Redirects unauthenticated users to sign in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/locals.mdx#2025-04-23_snippet_0\n\nLANGUAGE: astro\nCODE:\n```\n---\nconst { userId, redirectToSignIn } = Astro.locals.auth()\n\nif (!userId) {\n  return redirectToSignIn()\n}\n---\n\n<div>Protected page</div>\n```\n\n----------------------------------------\n\nTITLE: SignOutButton with asChild Prop in Astro\nDESCRIPTION: Demonstrates the use of the asChild prop in Astro when passing children to the SignOutButton component. This is required for custom button rendering in Astro.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-out-button.mdx#2025-04-23_snippet_3\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignOutButton } from '@clerk/astro/components'\n---\n\n<SignOutButton asChild>\n  <button>Custom sign out button</button>\n</SignOutButton>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Clerk Backend SDK Instance using clerkClient() - JavaScript\nDESCRIPTION: Illustrates obtaining a Clerk backend SDK instance by calling 'clerkClient()', enabling backend session management and direct API usage. Depends on the Clerk Nuxt SDK being installed and configured. Returns a Clerk backend SDK instance for use in event handlers or server routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Example usage in a server route:\nimport { clerkClient } from 'clerk/nuxt';\n\nexport default defineEventHandler(async (event) => {\n  const client = clerkClient();\n  // Use 'client' to interact with Clerk backend APIs\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Testing Token Example\nDESCRIPTION: Example usage of the createTestingToken method using the clerk instance to generate a new testing token.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/testing-tokens/create-testing-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerk.testingTokens.createTestingToken()\n```\n\n----------------------------------------\n\nTITLE: Implementing Waitlist Component in Vue\nDESCRIPTION: Basic implementation of the Waitlist component in a Vue application using the @clerk/vue package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { Waitlist } from '@clerk/vue'\n</script>\n\n<template>\n  <Waitlist />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Enabling Debug Mode for Clerk Middleware in Next.js (TypeScript)\nDESCRIPTION: Demonstrates how to enable debugging for Clerk middleware in a Next.js application using TypeScript. By passing `{ debug: true }` as an option to `clerkMiddleware()`, detailed logs are printed to the terminal, aiding in troubleshooting authentication issues. The example also shows the basic structure of a `middleware.ts` file with Clerk integration and a matcher configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'middleware.ts', mark: [[4, 7]] }}\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(\n  (auth, req) => {\n    // Add your middleware checks\n  },\n  { debug: true },\n)\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Decoding Clerk Publishable Key in JavaScript\nDESCRIPTION: This snippet demonstrates how to decode a Clerk Publishable Key to reveal the base64-encoded Frontend API URL. It removes the environment prefix and uses the atob() function to decode the base64 string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/how-clerk-works/overview.mdx#_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nconst publishableKey = 'pk_test_ZXhhbXBsZS5hY2NvdW50cy5kZXYk'\nconst keyWithoutPrefix = publishableKey.replace('pk_test_', '')\n\natob(keyWithoutPrefix) // => example.accounts.dev$\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with Resource Cache\nDESCRIPTION: Implementation of ClerkProvider setup with resource cache configuration in the root layout file for enabling offline support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/offline-support.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/clerk-expo'\nimport { Slot } from 'expo-router'\nimport { tokenCache } from '@clerk/clerk-expo/token-cache'\nimport { resourceCache } from '@clerk/clerk-expo/resource-cache'\n\nexport default function RootLayout() {\n  return (\n    <ClerkProvider tokenCache={tokenCache} __experimental_resourceCache={resourceCache}>\n      <Slot />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing the Cognito to Clerk User Migration Script (TypeScript)\nDESCRIPTION: A TypeScript script (`main.ts`) designed to perform a batch upload of Cognito users to Clerk. It initializes AWS Cognito and Clerk clients using credentials from the `.env` file. The script lists users from the specified Cognito pool, iterates through them, skips unconfirmed or external provider users, determines the correct user identifier (sub, email, or username based on Cognito configuration), and then calls the Clerk `createUser` API. For each user, it sets `passwordHasher` to 'awscognito' and constructs the `passwordDigest` in the format `awscognito#<COGNITO_USER_POOL_ID>#<COGNITO_CLIENT_ID>#<identifier>`. Includes error handling and a 500ms delay between API calls to respect Clerk's rate limits.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-cognito.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\nimport * as IDP from '@aws-sdk/client-cognito-identity-provider'\n\n// NOTE: The IAM user should have permissions roughly equivalent to AmazonCognitoReadOnly.\n// https://docs.aws.amazon.com/aws-managed-policy/latest/reference/AmazonCognitoReadOnly.html\nconst { AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_REGION } = process.env\nif (!AWS_ACCESS_KEY_ID || !AWS_SECRET_ACCESS_KEY || !AWS_REGION) {\n  throw new Error(\n    'AWS credentials are required. Double check that your `.env` file is set up correctly. Must have AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, and AWS_REGION.',\n  )\n}\n\nconst { COGNITO_USER_POOL_ID, COGNITO_CLIENT_ID } = process.env\nif (!COGNITO_USER_POOL_ID || !COGNITO_CLIENT_ID) {\n  throw new Error(\n    'Cognito user pool and client IDs are required. Double check that your `.env` file is set up correctly. Must have COGNITO_USER_POOL_ID and COGNITO_CLIENT_ID.',\n  )\n}\n\nconst { CLERK_SECRET_KEY } = process.env\nif (!CLERK_SECRET_KEY) {\n  throw new Error(\n    'Clerk Secret Key is required. Double check that your `.env` file is set up correctly. Must have CLERK_SECRET_KEY.',\n  )\n}\n\nconst idpClient = new IDP.CognitoIdentityProviderClient({\n  region: AWS_REGION,\n  credentials: {\n    accessKeyId: AWS_ACCESS_KEY_ID,\n    secretAccessKey: AWS_SECRET_ACCESS_KEY,\n  },\n})\n\nconst clerk = createClerkClient({\n  secretKey: CLERK_SECRET_KEY,\n})\n\nasync function main() {\n  const usersResponse = await idpClient.send(\n    new IDP.ListUsersCommand({ UserPoolId: COGNITO_USER_POOL_ID }),\n  )\n  if (!usersResponse.Users) {\n    throw new Error('No users found')\n  }\n\n  usersLoop: for (const cognitoUser of usersResponse.Users) {\n    // Skip unconfirmed users or EXTERNAL_PROVIDER users (like Facebook, Google, etc)\n    if (cognitoUser.UserStatus !== 'CONFIRMED') {\n      console.log(\n        'Skipping user: User is not confirmed:',\n        cognitoUser.Username,\n        cognitoUser.UserStatus,\n      )\n      continue\n    }\n\n    // This identifier must match the one that use used for sign in on the Cognito user pool.\n    // Note that in AWS, this option is only configurable at the time of user creation.\n    let identifier: string\n    // Comment/Uncomment the block(s) below to use the identifier from the Cognito user pool.\n    {\n      identifier = cognitoUser.Attributes?.find((a) => a.Name === 'sub')!.Value!\n    }\n    {\n      identifier = cognitoUser.Attributes?.find((a) => a.Name === 'email')!.Value!\n    }\n    {\n      identifier = cognitoUser.Username!\n    }\n\n    if (!identifier) {\n      console.log('Skipping user: No identifier found:', cognitoUser)\n      continue\n    }\n\n    const email = cognitoUser.Attributes?.find((a) => a.Name === 'email')!.Value!\n\n    try {\n      await clerk.users.createUser({\n        emailAddress: [email],\n        passwordDigest: `awscognito#${COGNITO_USER_POOL_ID}#${COGNITO_CLIENT_ID}#${identifier}`,\n        // @ts-expect-error - awscognito works, but is not a valid TypeScript yet\n        passwordHasher: 'awscognito',\n      })\n      console.log('Created clerk user for:', identifier)\n      await new Promise((resolve) => setTimeout(resolve, 500))\n    } catch (err) {\n      console.error(err)\n      break usersLoop\n    }\n  }\n}\n\nmain()\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Variables in Vue App - TypeScript\nDESCRIPTION: Initializes a Vue application and globally customizes Clerk components by passing an appearance object with a `variables` definition to the `clerkPlugin` during app setup. Requires Vue 3, the `@clerk/vue` plugin, and standard Vue initialization process. Variable settings propagate through all Clerk UI components mounted by the app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    variables: {\n      colorPrimary: 'blue',\n      colorText: 'black',\n    },\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Vanilla JavaScript Organization Update Implementation\nDESCRIPTION: JavaScript implementation for handling organization updates using Clerk's JavaScript SDK. Includes initialization, authentication checks, and form submission handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/update-organizations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    const form = document.getElementById('update-organization')\n\n    form.addEventListener('submit', function (e) {\n      e.preventDefault()\n\n      const inputEl = document.getElementById('name')\n\n      if (!inputEl) {\n        // ... handle empty input\n        return\n      }\n\n      clerk.organization\n        .update({ name: inputEl.value })\n        .then((res) => console.log(`Updated org:`, res))\n        .catch((error) => console.log('An error occurred:', error))\n    })\n  } else {\n    // If there is no active organization,\n    // mount Clerk's <OrganizationSwitcher />\n    // to allow the user to set an organization as active\n    document.getElementById('app').innerHTML = `\n      <h2>Select an organization to set it as active</h2>\n      <div id=\"org-switcher\"></div>\n    `\n\n    const orgSwitcherDiv = document.getElementById('org-switcher')\n\n    clerk.mountOrganizationSwitcher(orgSwitcherDiv)\n  }\n} else {\n  // If there is no active user, mount Clerk's <SignIn />\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Running Clerk CLI Upgrade Tool using bun dlx - Bash\nDESCRIPTION: Leverages bun's dlx to run the @clerk/upgrade CLI, producing a migration checklist for upgrading to Core 2. Intended for projects utilizing bun for development workflow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/clerk-react using npm - Bash\nDESCRIPTION: Installs or updates the project to the latest version of @clerk/clerk-react via npm, enabling Core 2 features and breaking changes. Run this command in the terminal inside the project root.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Vue `<SignedIn>` component usage example\nDESCRIPTION: Illustrates how to use `<SignedIn>` in a Vue component setup with `<script setup>` syntax, importing from `@clerk/vue` and wrapping content to display only to signed-in users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignedIn } from '@clerk/vue'\n</script>\n\n<template>\n  <SignedIn>\n    <div>You are signed in</div>\n  </SignedIn>\n  <p>This content is always visible.</p>\n</template>\n\n```\n\n----------------------------------------\n\nTITLE: Server Actions for Supabase Task Creation\nDESCRIPTION: Server action that handles adding new tasks to the Supabase database. Implements error handling and uses a custom Supabase client for database operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n'use server'\n\nimport { createServerSupabaseClient } from './client'\n\nexport async function addTask(name: string) {\n  const client = createServerSupabaseClient()\n\n  try {\n    const response = await client.from('tasks').insert({\n      name,\n    })\n\n    console.log('Task successfully added!', response)\n  } catch (error: any) {\n    console.error('Error adding task:', error.message)\n    throw new Error('Failed to add task')\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Secure Token Cache with ClerkProvider (TypeScript/TSX)\nDESCRIPTION: Updates the root layout to configure `ClerkProvider` with a secure token cache using `expo-secure-store`. It imports `tokenCache` from `@clerk/clerk-expo/token-cache` and passes it to the `tokenCache` prop of `ClerkProvider`. This ensures user session tokens are stored securely and encrypted.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/clerk-expo'\nimport { tokenCache } from '@clerk/clerk-expo/token-cache'\nimport { Slot } from 'expo-router'\n\nexport default function RootLayout() {\n  return (\n    <ClerkProvider tokenCache={tokenCache}>\n      <Slot />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Creation Method\nDESCRIPTION: Shows the change in Organization.create method parameter format from string to object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_57\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create('...')\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Implementing withSession Higher Order Function in Clerk\nDESCRIPTION: Example code showing how to recreate the removed withSession higher order function using Clerk's custom hooks. This function wraps a component and injects the session object as a prop, handling the null state when no session exists.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_54\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withSession(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const session = useSessionContext()\n\n    if (!session) return null\n\n    return <Component {...props} session={session} />\n  }\n\n  HOC.displayName = `withSession(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting Phone Number Verification in Clerk SignUp\nDESCRIPTION: This method attempts to verify a phone number by validating a one-time verification code. It wraps the attemptVerification method with the 'phone_code' strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptPhoneNumberVerification(\n  params: AttemptPhoneNumberVerificationParams,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Representing IdentificationNotFound Error in Clerk JSON\nDESCRIPTION: JSON object representing the 'IdentificationNotFound' error in Clerk. This error occurs when a requested identification resource cannot be located, typically identified by `<resourceID>`. It includes a short message ('Resource not found'), a detailed long message indicating the missing resource ID, and the specific error code 'resource_not_found_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/identifications.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Resource not found\",\n  \"longMessage\": \"No resource was found for ID <resourceID>\",\n  \"code\": \"resource_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to Clerk OrganizationProfile in Next.js\nDESCRIPTION: Demonstrates adding custom pages to the Clerk `<OrganizationProfile />` component in a Next.js application using TypeScript. Examples show using `OrganizationSwitcher.OrganizationProfilePage` for the modal context (within `<OrganizationSwitcher />`) and `OrganizationProfile.Page` for a dedicated page setup. Both require props like `label`, `url`, `labelIcon`, and accept page content as children (either components or direct elements). Requires the `@clerk/nextjs` package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/components/Header.tsx' }}\n'use client'\n\nimport { OrganizationSwitcher } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nconst CustomPage = () => {\n  return (\n    <div>\n      <h1>Custom page</h1>\n      <p>This is the content of the custom page.</p>\n    </div>\n  )\n}\n\nconst Header = () => (\n  <header>\n    <OrganizationSwitcher>\n      {/* You can pass the content as a component */}\n      <OrganizationSwitcher.OrganizationProfilePage\n        label=\"Custom Page\"\n        url=\"custom\"\n        labelIcon={<DotIcon />}\n      >\n        <CustomPage />\n      </OrganizationSwitcher.OrganizationProfilePage>\n\n      {/* You can also pass the content as direct children */}\n      <OrganizationSwitcher.OrganizationProfilePage\n        label=\"Terms\"\n        labelIcon={<DotIcon />}\n        url=\"terms\"\n      >\n        <div>\n          <h1>Custom Terms Page</h1>\n          <p>This is the content of the custom terms page.</p>\n        </div>\n      </OrganizationSwitcher.OrganizationProfilePage>\n    </OrganizationSwitcher>\n  </header>\n)\n\nexport default Header\n```\n```\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/organization-profile/[[...organization-profile]]/page.tsx' }}\n'use client'\n\nimport { OrganizationProfile } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nconst CustomPage = () => {\n  return (\n    <div>\n      <h1>Custom page</h1>\n      <p>This is the content of the custom page.</p>\n    </div>\n  )\n}\n\nconst OrganizationProfilePage = () => (\n  <OrganizationProfile path=\"/organization-profile\" routing=\"path\">\n    {/* You can pass the content as a component */}\n    <OrganizationProfile.Page label=\"Custom Page\" labelIcon={<DotIcon />} url=\"custom-page\">\n      <CustomPage />\n    </OrganizationProfile.Page>\n\n    {/* You can also pass the content as direct children */}\n    <OrganizationProfile.Page label=\"Terms\" labelIcon={<DotIcon />} url=\"terms\">\n      <div>\n        <h1>Custom Terms Page</h1>\n        <p>This is the content of the custom terms page.</p>\n      </div>\n    </OrganizationProfile.Page>\n  </OrganizationProfile>\n)\n\nexport default OrganizationProfilePage\n```\n```\n\n----------------------------------------\n\nTITLE: Migrating from createClerkExpressWithAuth and createClerkExpressRequireAuth - Express & Clerk - TypeScript\nDESCRIPTION: This TypeScript snippet instructs on replacing legacy custom middleware builders (createClerkExpressWithAuth, createClerkExpressRequireAuth) with clerkMiddleware, passing in custom Clerk client configuration for publishableKey, apiUrl, and secretKey. It demonstrates importing createClerkClient from @clerk/backend, initializing the Clerk client, and applying the middleware to routes. Only req.auth is used in route handlers. Dependencies: Express, @clerk/express, @clerk/backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_8\n\nLANGUAGE: ts\nCODE:\n```\nimport { createClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\nimport { createClerkClient } from '@clerk/backend'\nimport { clerkMiddleware } from '@clerk/express'\n\nconst customMiddleware = createClerkExpressRequireAuth({\n  publishableKey: '',\n  apiUrl: '',\n  secretKey: '',\n})\nconst clerkClient = createClerkClient({ publishableKey: '', apiUrl: '', secretKey: '' })\n\napp.use(clerkMiddleware({ clerkClient }))\n\napp.get('/path', customMiddleware, (req, res) => res.json(req.auth))\napp.get('/path', (req, res) => res.json(req.auth))\n```\n\n----------------------------------------\n\nTITLE: JavaScript Implementation of Clerk SMS OTP Auth\nDESCRIPTION: JavaScript code that implements the client-side logic for SMS OTP authentication using Clerk, including sign-up and verification handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  document.getElementById('sign-up-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const phoneNumber = formData.get('phone')\n\n    try {\n      await clerk.client.signUp.create({ phoneNumber })\n      await clerk.client.signUp.preparePhoneNumberVerification()\n      document.getElementById('sign-up').setAttribute('hidden', '')\n      document.getElementById('verifying').removeAttribute('hidden')\n    } catch (error) {\n      console.error(error)\n    }\n  })\n\n  document.getElementById('verifying').addEventListener('submit', async (e) => {\n    const formData = new FormData(e.target)\n    const code = formData.get('code')\n\n    try {\n      const verify = await clerk.client.signUp.attemptPhoneNumberVerification({\n        code,\n      })\n\n      await clerk.setActive({ session: verify.createdSessionId })\n    } catch (error) {\n      console.error(error)\n    }\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignUp in Next.js App Router\nDESCRIPTION: Example showing how to use RedirectToSignUp component within Next.js App Router layout with ClerkProvider for authentication flow control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signup.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToSignUp } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html>\n      <body>\n        <ClerkProvider>\n          <SignedIn>{children}</SignedIn>\n          <SignedOut>\n            <RedirectToSignUp />\n          </SignedOut>\n        </ClerkProvider>\n      </body>\n    </html>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk API and SDK Behavior (General)\nDESCRIPTION: Lists general environment variables for customizing Clerk's API and SDK interactions. These allow setting custom Clerk JS URLs/versions, API URLs/versions, JWT verification keys (`CLERK_JWT_KEY`), Frontend API URLs (`CLERK_FAPI`), and proxy URLs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_JS_URL` | Sets the URL that `@clerk/clerk-react` should hot-load `@clerk/clerk-js` from. `CLERK_JS` does the same but is deprecated. |\n| `CLERK_JS_VERSION` | Sets the npm version for `@clerk/clerk-js`. |\n| `CLERK_API_URL` | Sets the Clerk API URL for debugging. Defaults to `\"https://api.clerk.com\"` |\n| `CLERK_API_VERSION` | Sets the version of the Clerk API to use. Defaults to `\"v1\"` |\n| `CLERK_JWT_KEY` | Sets the JWT verification key that Clerk will use to provide networkless JWT session token verification. Refer to [Manual JWT verification](/docs/backend-requests/manual-jwt). |\n| `CLERK_FAPI` | Sets the URL to your Clerk apps' Frontend API. |\n| `CLERK_PROXY_URL` | Sets the URL for your proxy. |\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in React\nDESCRIPTION: This snippet illustrates how to use Clerk's UserButton component in a React application. It shows the implementation of a header component with conditional rendering for authenticated and non-authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, UserButton, SignInButton, SignedOut } from '@clerk/clerk-react'\n\nexport default function App() {\n  return (\n    <header>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Password Reset Flow in iOS Swift\nDESCRIPTION: A SwiftUI view that implements a password reset flow using Clerk's iOS SDK. The implementation handles the complete reset process including code verification and password updates. It uses Clerk's client object for managing the authentication state and reset process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/forgot-password.mdx#2025-04-23_snippet_1\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct ForgotPasswordView: View {\n  @Environment(Clerk.self) private var clerk\n  @State private var email = \"\"\n  @State private var code = \"\"\n  @State private var newPassword = \"\"\n  @State private var isVerifying = false\n\n  var body: some View {\n    switch clerk.client?.signIn?.status {\n    case .needsFirstFactor:\n      TextField(\"Enter your code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verify(code: code) }\n      }\n\n    case .needsSecondFactor:\n      Text(\"2FA is required, but this UI does not handle that\")\n\n    case .needsNewPassword:\n      SecureField(\"New password\", text: $newPassword)\n      Button(\"Set new password\") {\n        Task { await setNewPassword(password: newPassword) }\n      }\n\n    default:\n      if let session = clerk.session {\n        Text(\"Active Session: \\(session.id)\")\n      } else {\n        TextField(\"Email\", text: $email)\n        Button(\"Forgot password?\") {\n          Task { await createSignIn(email: email) }\n        }\n      }\n    }\n  }\n}\n\nextension ForgotPasswordView {\n\n  func createSignIn(email: String) async {\n    do {\n      try await SignIn.create(strategy: .identifier(email, strategy: .resetPasswordEmailCode()))\n    } catch {\n      dump(error)\n    }\n  }\n\n  func verify(code: String) async {\n    do {\n      guard let inProgressSignIn = clerk.client?.signIn else { return }\n      try await inProgressSignIn.attemptFirstFactor(strategy: .resetPasswordEmailCode(code: code))\n    } catch {\n      dump(error)\n    }\n  }\n\n  func setNewPassword(password: String) async {\n    do {\n      guard let inProgressSignIn = clerk.client?.signIn else { return }\n      try await inProgressSignIn.resetPassword(.init(password: password, signOutOfOtherSessions: true))\n    } catch {\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getRoles Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for Organization.getRoles have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating `decodeJwt` Import Path in JavaScript\nDESCRIPTION: Demonstrates updating the import path for the `decodeJwt` function. It has been moved from the top-level `@clerk/backend` to `@clerk/backend/jwt` to improve code organization and tree-shaking within the Clerk SDK. The example shows the old line to be removed and the new line to be added.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n    import { decodeJwt } from '@clerk/backend'\n    import { decodeJwt } from '@clerk/backend/jwt'\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToOrganizationProfile in React\nDESCRIPTION: Implementation of RedirectToOrganizationProfile in a React application with Clerk authentication. Shows usage within a private page component with proper authentication checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-organizationprofile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignedIn,\n  SignedOut,\n  RedirectToOrganizationProfile,\n} from '@clerk/clerk-react'\n\nfunction PrivatePage() {\n  return (\n    <ClerkProvider publishableKey={`{{pub_key}}`}>\n      <SignedIn>\n        <RedirectToOrganizationProfile />\n      </SignedIn>\n      <SignedOut>You need to sign in to view your organization profile.</SignedOut>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Roles for an Organization in TypeScript\nDESCRIPTION: This snippet demonstrates how to retrieve a paginated list of roles in the organization using the getRoles() method. It returns a paginated response of RoleResource objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getRoles(params?: GetRolesParams): Promise<ClerkPaginatedResponse<RoleResource>>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.getRoles()\n```\n\n----------------------------------------\n\nTITLE: Using getAuth with Updated Secret Key Parameter\nDESCRIPTION: Example of using the getAuth function with the updated 'secretKey' parameter instead of 'apiKey' in a Remix loader function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_14\n\nLANGUAGE: ts\nCODE:\n```\nimport { getAuth } from '@clerk/remix/ssr.server'\n\nexport const loader: LoaderFunction = async (args) => {\n  return getAuth(args, { secretKey: '...' })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-Out in iOS with Clerk\nDESCRIPTION: SwiftUI implementation of a sign-out flow using Clerk's iOS SDK. The view displays the active session ID and provides a sign-out button with error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/sign-out.mdx#2025-04-23_snippet_2\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct SignOutView: View {\n  @Environment(Clerk.self) private var clerk\n\n  var body: some View {\n    if let session = clerk.session {\n      Text(\"Active Session: \\(session.id)\")\n      Button(\"Sign out\") {\n        Task { await signOut() }\n      }\n    } else {\n      Text(\"You are signed out\")\n    }\n  }\n}\n\nextension SignOutView {\n\n  func signOut() async {\n    do {\n      try await clerk.signOut()\n    } catch {\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Root Layout with Clerk and InstantDB Auth Sync\nDESCRIPTION: Next.js root layout component that sets up Clerk authentication provider and includes the InstantDBAuthSync component to synchronize authentication between services.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport type { Metadata } from 'next'\nimport {\n  ClerkProvider,\n  SignInButton,\n  SignUpButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/nextjs'\nimport { Geist, Geist_Mono } from 'next/font/google'\nimport './globals.css'\nimport InstantDBAuthSync from '@/component/InstantDBAuthSync'\n\nconst geistSans = Geist({\n  variable: '--font-geist-sans',\n  subsets: ['latin'],\n})\n\nconst geistMono = Geist_Mono({\n  variable: '--font-geist-mono',\n  subsets: ['latin'],\n})\n\nexport const metadata: Metadata = {\n  title: 'Clerk Next.js Quickstart',\n  description: 'Generated by create next app',\n}\n\nexport default async function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n  return (\n    <ClerkProvider>\n      <InstantDBAuthSync />\n      <html lang=\"en\">\n        <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>\n          <header className=\"flex justify-end items-center p-4 gap-4 h-16\">\n            <SignedOut>\n              <SignInButton />\n              <SignUpButton />\n            </SignedOut>\n            <SignedIn>\n              <UserButton />\n            </SignedIn>\n          </header>\n          {children}\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Server-Side Authentication with getServerSideProps in Next.js Pages Router\nDESCRIPTION: Demonstrates how to use Clerk's getAuth() and buildClerkProps in getServerSideProps for server-side authentication in Next.js Pages Router. This pattern enables passing authentication data to client components during server-side rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/read-session-data.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { getAuth, buildClerkProps } from '@clerk/nextjs/server'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  // Use `getAuth()` to get the user's ID\n  const { userId } = getAuth(ctx.req)\n\n  // Protect the route by checking if the user is signed in\n  if (!userId) {\n    // Handle when the user is not signed in\n  }\n\n  // Initialize the Backend SDK\n  const client = await clerkClient()\n\n  // Get the user's full `Backend User` object\n  const user = userId ? await client.users.getUser(userId) : undefined\n\n  return { props: { ...buildClerkProps(ctx.req, { user }) } }\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Sessions by Status with Clerk Backend SDK\nDESCRIPTION: Example of using getSessionList to retrieve a list of expired sessions for a specific user. This demonstrates how to use the status parameter to filter sessions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst status = 'expired'\n\nconst response = await clerkClient.sessions.getSessionList({ userId, status })\n```\n\n----------------------------------------\n\nTITLE: Fetching Backend User Data Using Clerk SDK in Nuxt API Route (TypeScript)\nDESCRIPTION: This example uses Clerk's backend SDK in a Nuxt server event handler to securely retrieve the authenticated user's full backend data. It checks for a valid user ID from event.context.auth(), throws a 401 error if unauthorized, and otherwise fetches detailed user info via clerkClient's getUser() method. Requires @clerk/nuxt/server and proper Clerk backend setup. The key input is the request event, output is the user object or an authorization error. Designed for protecting API routes and returning rich user data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/nuxt/server'\n\nexport default defineEventHandler(async (event) => {\n  // Use `auth` to get the user's ID\n  const { userId } = event.context.auth()\n\n  // Protect the API route by checking if the user is signed in\n  if (!userId) {\n    throw createError({\n      statusCode: 401,\n      statusMessage: 'Unauthorized: No user ID provided',\n    })\n  }\n\n  // Get the user's full `Backend User` object\n  const user = await clerkClient(event).users.getUser(userId)\n\n  return user\n})\n```\n\n----------------------------------------\n\nTITLE: Checking Admin Status and Rendering Organization Memberships with Clerk in JavaScript\nDESCRIPTION: This snippet defines an async function to check if the current user is an admin of the active organization by using the Clerk SDK. It fetches organization memberships, locates the active organization, checks the admin role, and calls a render function to display memberships accordingly. To function, it depends on Clerk’s JavaScript SDK being initialized and available, as well as a DOM-based renderMemberships function; inputs include the currently authenticated user and organization's context. Errors during asynchronous operations are handled with try-catch and logged to the console.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-roles.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nasync function checkAdminAndRenderMemberships() {\n  const organizationId = clerk.organization.id\n\n  const { data } = await clerk.user.getOrganizationMemberships()\n\n  const organizationMemberships = data\n\n  const currentMembership = organizationMemberships.find(\n    (membership) => membership.organization.id === organizationId,\n  )\n  const currentOrganization = currentMembership.organization\n\n  if (!currentOrganization) return\n\n  const isAdmin = currentMembership.role === 'org:admin'\n\n  console.log(`Current organization:`, currentOrganization)\n\n  renderMemberships(currentOrganization, isAdmin)\n}\n\n```\n\n----------------------------------------\n\nTITLE: Migrating from ClerkExpressRequireAuth Middleware - Express & Clerk - TypeScript\nDESCRIPTION: This TypeScript code demonstrates how to transition from the ClerkExpressRequireAuth middleware to the new requireAuth function in the Express SDK. It shows modifying middleware imports and adjusting route handlers for protected routes. The requireAuth middleware checks for authentication and redirects or sends a protected message accordingly. Requires Express, @clerk/express, and TypeScript.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport { ClerkExpressRequireAuth, RequireAuthProp, StrictAuthProp } from '@clerk/clerk-sdk-node'\nimport { clerkMiddleware, requireAuth } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst port = 3000\n\n// Define a protected route\napp.get('/protected', ClerkExpressRequireAuth(), (req, res) => {\n  res.send('This is a protected route')\n})\napp.get('/protected', requireAuth(), (req, res) => {\n  res.send('This is a protected route')\n})\n\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Revoking a Sign-In Token with Clerk's Backend SDK in TypeScript\nDESCRIPTION: Example usage of the revokeSignInToken function from Clerk's Backend SDK. It demonstrates how to revoke a sign-in token using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sign-in-tokens/revoke-sign-in-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst signInTokenId = 'sit_123'\n\nconst response = await clerkClient.signInTokens.revokeSignInToken(signInTokenId)\n```\n\n----------------------------------------\n\nTITLE: Implementing <OrganizationList /> in React\nDESCRIPTION: Example of using the <OrganizationList /> component in a React application. It shows how to set up the component with callback functions for URL generation after various actions like creating an organization or selecting a personal account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationList } from '@clerk/clerk-react'\n\nexport default function OrganizationListPage() {\n  return (\n    <OrganizationList\n      afterCreateOrganizationUrl={(org) => `/organization/${org.slug}`}\n      afterSelectPersonalUrl={(user) => `/user/${user.id}`}\n      afterSelectOrganizationUrl={(org) => `/organization/${org.slug}`}\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using Function as Child for Field State with Clerk.Field in TypeScript/React\nDESCRIPTION: Demonstrates how to provide a render function as children to <Clerk.Field> to access and display the current field state (e.g., success, error, warning, info, idle) in TypeScript/React. No additional dependencies are required; the passed state string describes the current validity state of the field.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">{(state) => <p>Field's state is: {state}</p>}</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Setting Public Metadata with Clerk Fullstack SDK (TypeScript)\nDESCRIPTION: This TypeScript example shows how to set public metadata, such as a user role, using Clerk's Fullstack SDK on the backend. Expects 'role' and 'userId' in the request JSON, then updates the user's publicMetadata. Requires 'clerkClient' setup; result is a JSON confirmation object. Public metadata is accessible by the frontend but can only be written via backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nexport async function POST(req) {\n  const { role, userId } = await req.json()\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    publicMetadata: {\n      role,\n    },\n  })\n\n  return Response.json({ success: true })\n}\n```\n\nLANGUAGE: typescript\nCODE:\n```\nconst client = await clerkClient()\n\nconst response = await client.users.updateUserMetadata()\n```\n\n----------------------------------------\n\nTITLE: Detecting Clerk Impersonated Sessions in Next.js App Router (JSX)\nDESCRIPTION: Shows how to use the `auth()` helper function from `@clerk/nextjs/server` within a Next.js App Router Server Component. It asynchronously retrieves the `Auth` object, containing the `userId` (impersonated user) and the `actor` object (impersonator details), allowing server-side detection of impersonated sessions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  // Use Clerk's `auth()` helper to access the `Auth` object\n  const { userId, actor } = await auth()\n\n  return (\n    <div>\n      {actor && (\n        <span>\n          user {actor.sub} has signed in as user {userId}\n        </span>\n      )}\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: GetToken Implementation in Remix\nDESCRIPTION: Example of using getToken in a Remix action function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { ActionFunction, json } from '@remix-run/node'\n\nexport const action: ActionFunction = async (req) => {\n  const { getToken } = await getAuth(req)\n\n  const template = 'test'\n\n  const token = await getToken({ template })\n\n  return json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Authenticating Users with Clerk in Rack Application - Ruby\nDESCRIPTION: This snippet shows how to access authentication information using the 'clerk' object within your application logic (e.g., in app.rb). It checks if the user is authenticated using clerk.user, then returns their first name and ID if authenticated, or a 401 Not Authenticated response otherwise. It depends on the Clerk middleware being mounted, the 'clerk-sdk-ruby' gem, and a running Rack environment. Key input is the 'env' hash (provided by Rack), output is a Rack-compatible HTTP response tuple.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rack.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"erb\"\nrequire \"clerk\"\n\nclass App\n  def call(env)\n    clerk = env[\"clerk\"]\n\n    # Check if the user is authenticated\n    user = clerk.user\n    user ?\n      [200, {\"Content-Type\" => \"text/plain\"}, [\"Authenticated User: #{user.first_name} (#{user.id})\"]]:\n      [401, {\"Content-Type\" => \"text/plain\"}, [\"Not Authenticated\"]]\n  end\nend\n\n```\n\n----------------------------------------\n\nTITLE: GetOrganization Function Definition in TypeScript\nDESCRIPTION: Function signature for retrieving a single organization, accepting GetOrganizationParams and returning a Promise of Organization type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganization(params: GetOrganizationParams): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Using Clerk `useAuth().has()` for Client-Side Permission Checks in Next.js (TypeScript)\nDESCRIPTION: Shows how to use the `useAuth` hook and its `has()` method from `@clerk/nextjs` in a Client Component (`'use client'`). It checks for the `org:team_settings:manage` permission and returns `null` if the user lacks it, allowing for custom handling of unauthorized access instead of automatic redirection or error.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useAuth } from '@clerk/nextjs'\n\nexport default function SettingsForm() {\n  const { has } = useAuth()\n\n  if (!has) return null\n\n  // Check if the user is authorized\n  const canManageSettings = has({ permission: 'org:team_settings:manage' })\n\n  // If has() returns false, the user does not have the correct permissions\n  // You can choose how your app responds. This example returns null.\n  if (!canManageSettings) return null\n\n  // If the user is both authenticated and authorized, move forward with your logic\n  return <form>{/* Add UI for managing team settings */}</form>\n}\n```\n\n----------------------------------------\n\nTITLE: Simplifying @clerk/clerk-sdk-node Imports in Core 2\nDESCRIPTION: Illustrates the removal of specific `cjs/instance` and `esm/instance` import paths in Core 2. Developers should now import directly from the top-level `@clerk/clerk-sdk-node` package. The snippet shows the deprecated paths (marked with `del`) and the correct new import path (marked with `ins`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ... } from '@clerk/clerk-sdk-node/esm/instance'\nimport { ... } from '@clerk/clerk-sdk-node/cjs/instance'\nimport { ... } from '@clerk/clerk-sdk-node'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Redirect URLs with Pagination Support in Clerk Backend\nDESCRIPTION: Example showing the updated response format for retrieving redirect URLs, which now returns both data and totalCount for pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_42\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to UserProfile in Vue\nDESCRIPTION: Shows how to add custom pages to the UserProfile component in Vue. It demonstrates implementations for both UserButton and dedicated page scenarios.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_3\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <UserButton>\n      <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\">\n        <template #labelIcon>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n            <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n          </svg>\n        </template>\n        <div>\n          <h1>Custom page</h1>\n          <p>This is the content of the custom page.</p>\n        </div>\n      </UserButton.UserProfilePage>\n    </UserButton>\n  </header>\n</template>\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserProfile } from '@clerk/vue'\n</script>\n\n<template>\n  <UserProfile>\n    <UserProfile.Page label=\"Custom Page\" url=\"custom\">\n      <template #labelIcon>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </template>\n      <div>\n        <h1>Custom page</h1>\n        <p>This is the content of the custom page.</p>\n      </div>\n    </UserProfile.Page>\n  </UserProfile>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-up Route Component\nDESCRIPTION: React component for the sign-up route using Clerk's SignUp component with virtual routing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignUp } from '@clerk/chrome-extension'\n\nexport const SignUpPage = () => {\n  return (\n    <>\n      <p>Sign Up</p>\n      <SignUp routing=\"virtual\" />\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Phone Verification - TypeScript Declaration\nDESCRIPTION: Method signature for initiating the phone number verification process by sending an SMS code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareVerification(): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Defining SignInFirstFactor Union Type in TypeScript\nDESCRIPTION: Defines the SignInFirstFactor type as a union of various authentication strategies that can be used as the first factor in a sign-in process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SignInFirstFactor =\n  | EmailCodeFactor\n  | EmailLinkFactor\n  | PhoneCodeFactor\n  | PasswordFactor\n  | ResetPasswordPhoneCodeFactor\n  | ResetPasswordEmailCodeFactor\n  | Web3SignatureFactor\n  | OauthFactor\n  | SamlFactor\n```\n\n----------------------------------------\n\nTITLE: Defining SVG Logo with Dynamic Theming\nDESCRIPTION: This SVG defines a logo with a circular mask and paths that use CSS variables for color theming. It includes linear gradients for shading effects and adapts to light and dark color schemes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/nextjs.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 180 180\">\n  <mask\n    height=\"180\"\n    id=\":r8:mask0_408_134\"\n    maskUnits=\"userSpaceOnUse\"\n    width=\"180\"\n    x=\"0\"\n    y=\"0\"\n    style={{maskType:'alpha'}}\n  >\n    <circle cx=\"90\" cy=\"90\" style={{ fill: 'var(--light, black) var(--dark, white)' }} r=\"90\" />\n  </mask>\n\n  <g mask=\"url(#:r8:mask0_408_134)\">\n    <circle cx=\"90\" cy=\"90\" style={{ fill: 'var(--light, black) var(--dark, white)' }} r=\"90\" />\n\n    <path\n      d=\"M149.508 157.52L69.142 54H54V125.97H66.1136V69.3836L139.999 164.845C143.333 162.614 146.509 160.165 149.508 157.52Z\"\n      fill=\"url(#:r8:paint0_linear_408_134)\"\n    />\n\n    <rect fill=\"url(#:r8:paint1_linear_408_134)\" height=\"72\" width=\"12\" x=\"115\" y=\"54\" />\n  </g>\n\n  <defs>\n    <linearGradient\n      gradientUnits=\"userSpaceOnUse\"\n      id=\":r8:paint0_linear_408_134\"\n      x1=\"109\"\n      x2=\"144.5\"\n      y1=\"116.5\"\n      y2=\"160.5\"\n    >\n      <stop style={{ stopColor: 'var(--light, white) var(--dark, black)' }} />\n\n      <stop offset=\"1\" style={{ stopColor: 'var(--light, white) var(--dark, black)' }} stopOpacity=\"0\" />\n    </linearGradient>\n\n    <linearGradient\n      gradientUnits=\"userSpaceOnUse\"\n      id=\":r8:paint1_linear_408_134\"\n      x1=\"121\"\n      x2=\"120.799\"\n      y1=\"54\"\n      y2=\"106.875\"\n    >\n      <stop style={{ stopColor: 'var(--light, white) var(--dark, black)' }} />\n\n      <stop offset=\"1\" style={{ stopColor: 'var(--light, white) var(--dark, black)' }} stopOpacity=\"0\" />\n    </linearGradient>\n  </defs>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for Chrome Extension\nDESCRIPTION: Updates the package.json manifest configuration to include the public key, required permissions for cookies and storage, and host permissions for localhost and Clerk API access.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/configure-consistent-crx-id.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"manifest\": {\n      \"key\": \"$CRX_PUBLIC_KEY\",\n      \"permissions\": [\"cookies\", \"storage\"],\n      \"host_permissions\": [\"http://localhost/*\", \"$CLERK_FRONTEND_API/*\"]\n    }\n  }\n```\n\n----------------------------------------\n\nTITLE: Implementing Navigate Action in Clerk Elements Sign-In Flow\nDESCRIPTION: This snippet demonstrates the use of the Action component with the navigate property in the 'verifications' step. It includes a password input field, a sign-in button, and a 'forgot password' link.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"verifications\">\n  <SignIn.Strategy name=\"password\">\n    <Clerk.Field name=\"password\">\n      <Clerk.Label>Password</Clerk.Label>\n      <Clerk.Input />\n      <Clerk.FieldError />\n    </Clerk.Field>\n    <SignIn.Action submit>Sign in</SignIn.Action>\n    <SignIn.Action navigate=\"forgot-password\">Forgot password?</SignIn.Action>\n  </SignIn.Strategy>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances - Remix - TypeScript/TSX\nDESCRIPTION: Illustrates applying the Dark theme globally and Neobrutalism to the SignIn component in a Remix app using @clerk/remix and @clerk/themes. The appearance property on ClerkApp provides both global and component-specific theming. Requires @clerk/remix, @clerk/themes, and standard Remix dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport { dark } from '@clerk/themes'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    baseTheme: dark,\n    signIn: { baseTheme: neobrutalism },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing ClerkProvider Localizations in Next.js with TypeScript\nDESCRIPTION: This snippet demonstrates how to pass a custom localization object to ClerkProvider in a Next.js app using TypeScript (TSX). The localization object customizes UI strings (e.g. for social sign-in buttons). It requires @clerk/nextjs and expects a valid localization object keyed by translation identifiers. Input: localization object with overrides. Output: ClerkProvider renders components using the customized strings. All code must be within layout/app files where providers are configured.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport './globals.css'\n\nconst localization = {\n  socialButtonsBlockButton: 'Sign In with {{provider|titleize}}',\n}\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider localization={localization}>\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using redirectWithAuth in Clerk SDK\nDESCRIPTION: Example of using the redirectWithAuth method to navigate to a dashboard page with authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectWithAuth('/dashboard')\n```\n\n----------------------------------------\n\nTITLE: Displaying and Managing User Organization Invitations in Next.js\nDESCRIPTION: This React component uses the useOrganizationList hook to fetch and display a user's organization invitations. It renders a table with invitation details and provides an 'Accept' button for each invitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-user-org-invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n'use client'\n\nimport { useOrganizationList } from '@clerk/clerk-react'\nimport React from 'react'\n\nexport default function UserInvitationsList() {\n  const { isLoaded, userInvitations } = useOrganizationList({\n    userInvitations: {\n      infinite: true,\n      keepPreviousData: true,\n    },\n  })\n\n  if (!isLoaded || userInvitations.isLoading) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <h1>Organization invitations</h1>\n      <table>\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Organization name</th>\n            <th>Role</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {userInvitations.data?.map((invitation) => (\n            <tr key={invitation.id}>\n              <td>{invitation.emailAddress}</td>\n              <td>{invitation.publicOrganizationData.name}</td>\n              <td>{invitation.role}</td>\n              <td>\n                <button onClick={() => invitation.accept()}>Accept</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <button disabled={!userInvitations.hasNextPage} onClick={userInvitations.fetchNext}>\n        Load more\n      </button>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering User List by Email and Phone\nDESCRIPTION: Demonstrates filtering the user list by specific email addresses and phone numbers using the getUserList function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailAddress = ['email1@clerk.dev', 'email2@clerk.dev']\n\nconst phoneNumber = ['+12025550108']\n\n// If these filters are included, the response will contain only users that own any of these emails and/or phone numbers.\nconst { data, totalCount } = await clerkClient.users.getUserList({ emailAddress, phoneNumber })\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Definition for Updating Organization Metadata\nDESCRIPTION: Function signature for updating organization metadata, taking an organization ID and update parameters, returning a Promise of the updated Organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-metadata.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateOrganizationMetadata(\n  organizationId: string,\n  params: UpdateOrganizationMetadataParams,\n): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Creating a Dedicated UserProfile Page with Custom Link in Vue\nDESCRIPTION: Example of creating a dedicated UserProfile page with a custom link in Vue. The code demonstrates how to use the UserProfile component with a custom link to the homepage using Vue's template slots for the icon.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_9\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserProfile } from '@clerk/vue'\n</script>\n\n<template>\n  <UserProfile>\n    <UserProfile.Link label=\"Homepage\" url=\"/\">\n      <template #labelIcon>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </template>\n    </UserProfile.Link>\n  </UserProfile>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Starting the Nuxt Development Server using Package Managers (Bash)\nDESCRIPTION: Commands to start the Nuxt application's development server using various package managers (npm, yarn, pnpm, or bun). Running this command builds the application and serves it locally, typically at `http://localhost:3000`, allowing developers to test the integration and sign up/sign in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nuxt.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Updating useOrganization Hook Parameters for Memberships in JavaScript\nDESCRIPTION: Demonstrates the changes in the useOrganization hook parameters for memberships. The 'membershipList' param has been removed and replaced by 'memberships' with a different structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_45\n\nLANGUAGE: javascript\nCODE:\n```\n// before\nconst { membershipList } = useOrganization({\n  membershipList: { limit: 10, offset: 1 },\n})\n\n// after\nconst { memberships } = useOrganization({\n  memberships: {\n    initialPage: 1,\n    pageSize: 10,\n  },\n})\n\n// you can also simply return all memberships\nconst { memberships } = useOrganization({ memberships: true })\n```\n\n----------------------------------------\n\nTITLE: Implementing Submit Action in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows how to use the Action component with the submit property in the 'start' step of a sign-in flow. It includes an email input field and a submit button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"start\">\n  <Clerk.Field name=\"identifier\">\n    <Clerk.Label>Email</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n  <SignIn.Action submit>Sign in</SignIn.Action>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Hiding Unsupported Authentication Methods in SignIn Component\nDESCRIPTION: Use the appearance prop in the SignIn component to hide unsupported authentication methods in the Chrome Extension environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn\n  appearance={{\n    elements: {\n      socialButtonsRoot: 'plasmo-hidden',\n      dividerRow: 'plasmo-hidden',\n    },\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating User OAuth Access Token Retrieval in JavaScript\nDESCRIPTION: Demonstrates the change in the return structure of getUserOauthAccessToken method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_43\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Signature for Revoking Invitations\nDESCRIPTION: Function signature showing the parameter type and return value for the revokeInvitation method. Takes an invitation ID string and returns a Promise resolving to an Invitation object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/revoke-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revokeInvitation(invitationId: string): Promise<Invitation>\n```\n\n----------------------------------------\n\nTITLE: Protecting All Routes Except Public Paths with clerkMiddleware()\nDESCRIPTION: This snippet shows how to migrate from authMiddleware() to clerkMiddleware() when protecting all routes except specific public paths. It demonstrates the reversal of middleware logic to treat all pages as protected unless explicitly made public.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/', '/contact(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isPublicRoute(req)) return // if it's a public route, do nothing\n  await auth.protect() // for any other route, require auth\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Invitations by Status\nDESCRIPTION: Example showing how to retrieve only revoked invitations by applying a status filter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/get-invitation-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n// get all revoked invitations\nconst response = await clerkClient.invitations.getInvitationList({ status: 'revoked' })\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using pnpm dlx (Bash)\nDESCRIPTION: Executes the Clerk upgrade helper tool using pnpm's `dlx` command to find code changes needed for the upgrade from Core 1 to Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Attempting Second-Factor Verification with Clerk SDK in Swift\nDESCRIPTION: This Swift snippet demonstrates attempting a second-factor verification (such as TOTP or backup code) using the Clerk SDK. It first ensures there is an in-progress sign-in, then awaits the result of the second-factor strategy. The switch statement checks the sign-in status: if complete, it dumps the current session; otherwise, it inspects the status for further actions. Error handling is implemented as shown, with a reference to Clerk's error handling documentation. Dependencies include the Clerk SDK for Swift, and the code must be run in an async-capable context. Key parameters involve the verification code (TOTP or backup code) provided by the user. Outputs include debug dumps of the status or error objects. The snippet should be customized to fit navigation and business requirements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_11\n\nLANGUAGE: swift\nCODE:\n```\nguard let inProgressSignIn = Clerk.shared.client?.signIn else { return }\n\n// Attempt the TOTP or backup code verification.\nlet signIn = try await inProgressSignIn.attemptSecondFactor(strategy: .totp(code: code))\n\nswitch signIn.status {\ncase .complete:\n  // If sign-in process is complete, navigate the user as needed.\n  dump(Clerk.shared.session)\ndefault:\n  // If the status is not complete, check why. User may need to\n  // complete further steps.\n  dump(signIn.status)\n}\n} catch {\n// See https://clerk.com/docs/custom-flows/error-handling\n// for more info on error handling\ndump(error)\n}\n\n```\n\n----------------------------------------\n\nTITLE: Updating MultiSessionAppSupport Import Path\nDESCRIPTION: Shows the change in import path for the MultiSessionAppSupport component which is now moved to internal imports.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_54\n\nLANGUAGE: javascript\nCODE:\n```\nimport { MultiSessionAppSupport } from '@clerk/clerk-react'\nimport { MultiSessionAppSupport } from '@clerk/clerk-react/internal'\n```\n\n----------------------------------------\n\nTITLE: Mounting <OrganizationList /> in JavaScript\nDESCRIPTION: Example of mounting the <OrganizationList /> component in a JavaScript application using Clerk. It demonstrates initializing Clerk, creating a container element, and mounting the component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-list\"></div>\n`\n\nconst orgListDiv = document.getElementById('organization-list')\n\nclerk.mountOrganizationList(orgListDiv)\n```\n\n----------------------------------------\n\nTITLE: Retrieving Redirect URL List with Clerk Backend SDK\nDESCRIPTION: This function retrieves a list of all white-listed redirect URLs for the application. It returns a Promise that resolves to a PaginatedResourceResponse containing an array of RedirectUrl objects and a total count.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/get-redirect-url-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getRedirectUrlList(): () => Promise<PaginatedResourceResponse<RedirectUrl[]>>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to UserProfile in Next.js\nDESCRIPTION: Demonstrates how to add custom pages to the UserProfile component using Next.js. It shows two methods: rendering content as a component and as direct children.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nconst CustomPage = () => {\n  return (\n    <div>\n      <h1>Custom page</h1>\n      <p>This is the content of the custom page.</p>\n    </div>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        {/* You can pass the content as a component */}\n        <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\" labelIcon={<DotIcon />}>\n          <CustomPage />\n        </UserButton.UserProfilePage>\n\n        {/* You can also pass the content as direct children */}\n        <UserButton.UserProfilePage label=\"Terms\" labelIcon={<DotIcon />} url=\"terms\">\n          <div>\n            <h1>Custom Terms Page</h1>\n            <p>This is the content of the custom terms page.</p>\n          </div>\n        </UserButton.UserProfilePage>\n      </UserButton>\n    </header>\n  )\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserProfile } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nconst CustomPage = () => {\n  return (\n    <div>\n      <h1>Custom page</h1>\n      <p>This is the content of the custom page.</p>\n    </div>\n  )\n}\n\nconst UserProfilePage = () => (\n  <UserProfile path=\"/user-profile\" routing=\"path\">\n    {/* You can pass the content as a component */}\n    <UserProfile.Page label=\"Custom Page\" labelIcon={<DotIcon />} url=\"custom-page\">\n      <CustomPage />\n    </UserProfile.Page>\n\n    {/* You can also pass the content as direct children */}\n    <UserProfile.Page label=\"Terms\" labelIcon={<DotIcon />} url=\"terms\">\n      <div>\n        <h1>Custom Terms Page</h1>\n        <p>This is the content of the custom terms page.</p>\n      </div>\n    </UserProfile.Page>\n  </UserProfile>\n)\n\nexport default UserProfilePage\n```\n\n----------------------------------------\n\nTITLE: Cross-Origin Request with Vanilla JavaScript\nDESCRIPTION: Example of making cross-origin requests using Clerk session token in vanilla JavaScript.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/making-requests.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n(async () => {\n  fetch('/api/foo', {\n    headers: {\n      Authorization: `Bearer ${await Clerk.session.getToken()}`,\n    },\n  }).then((res) => res.json())\n})()\n```\n\n----------------------------------------\n\nTITLE: Replacing afterSignInUrl with signInFallbackRedirectUrl in SignIn Component - React JSX\nDESCRIPTION: This JSX snippet shows how to migrate from the deprecated afterSignInUrl prop to the new signInFallbackRedirectUrl prop on the <SignIn> component. This change follows Core 2's updated redirect handling for authentication events. Dependency: @clerk/clerk-js >= v5, React. Key parameter: signInFallbackRedirectUrl replaces afterSignInUrl. Input is the redirect URL string ('/foo'). Output and behavior remain consistent with earlier SDK versions under typical usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn afterSignInUrl=\"/foo\" />\n<SignIn signInFallbackRedirectUrl=\"/foo\" />\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to UserProfile in JavaScript\nDESCRIPTION: Shows how to add custom pages to the UserProfile component using the JavaScript SDK. It uses the mountUserProfile() method with the customPages property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-profile\"></div>\n`\n\nconst userProfileDiv = document.getElementById('user-profile')\n\nclerk.mountUserProfile(userProfileDiv, {\n  customPages: [\n    {\n      url: 'custom-page',\n      label: 'Custom Page',\n      mountIcon: (el) => {\n        el.innerHTML = '👋'\n      },\n      unmountIcon: (el) => {\n        el.innerHTML = ''\n      },\n      mount: (el) => {\n        el.innerHTML = `\n          <h1><b>Custom Page</b></h1>\n          <p>This is the content of the custom page.</p>\n          `\n      },\n      unmount: (el) => {\n        el.innerHTML = ''\n      },\n    },\n    {\n      url: '/other-page',\n      label: 'Other Page',\n      mountIcon: (el) => {\n        el.innerHTML = '🌐'\n      },\n      unmountIcon: (el) => {\n        el.innerHTML = ''\n      },\n    },\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Type Definition for prepareSecondFactor with Clerk (TypeScript)\nDESCRIPTION: Defines the TypeScript function signature for the `prepareSecondFactor` method in Clerk. Accepts an object of type `PrepareSecondFactorParams` and returns a Promise resolving to a `SignIn` object. Ensures type safety and documents the method's expected input and output structure. Dependencies: TypeScript-enabled environment, Clerk SDK types loaded. Inputs: `PrepareSecondFactorParams` object. Output: Promise of type `SignIn`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareSecondFactor(params: PrepareSecondFactorParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Removing a Member from a Clerk Organization (JavaScript Example)\nDESCRIPTION: This snippet demonstrates how to remove a member from the current organization using the `organization.removeMember` method. It requires the `userId` of the member to be removed and returns a Promise resolving to an `OrganizationMembership` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait organization.removeMember('user_123')\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Redirect Environment Variables (.env)\nDESCRIPTION: This snippet configures Clerk's redirect behavior using environment variables in a `.env` file. `CLERK_SIGN_IN_URL` specifies the path where the `<SignIn />` component is hosted. `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` sets the redirect target if users directly access the sign-in route when already authenticated or after sign-in. `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` sets the redirect target after signing up via the link on the sign-in component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\n```env {{ filename: '.env' }}\nCLERK_SIGN_IN_URL=/sign-in\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\n```\n```\n\n----------------------------------------\n\nTITLE: Signing Out All Sessions in JavaScript with Clerk\nDESCRIPTION: This JavaScript code shows how to sign out all active sessions using the Clerk object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\n// Use signOut to sign-out all active sessions.\nawait window.Clerk.signOut()\n```\n\n----------------------------------------\n\nTITLE: Exporting rootAuthLoader as Root Loader - Clerk Remix TypeScript\nDESCRIPTION: This snippet exports Clerk's rootAuthLoader function directly as the Remix root route loader. It imports rootAuthLoader from '@clerk/remix/ssr.server' and assigns it to the loader export using Remix's LoaderFunction type, ensuring the authentication state is provided to the root of the application. Required dependencies include the Clerk package for Remix applications. The loader receives the standard Remix LoaderFunction arguments and returns the authentication state. There are no additional configuration options or data loading logic in this usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/root-auth-loader.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// Your other imports\n\n// Import `rootAuthLoader`\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\n// Export `rootAuthLoader()` as the root route `loader`\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\n// The rest of your code\n```\n\n----------------------------------------\n\nTITLE: Updating User Attributes - Clerk TypeScript\nDESCRIPTION: Defines the update method for changing various attributes on a Clerk user, such as username, first/last name, primary contact IDs, and unsafeMetadata. All parameters are optional and provided in the params object; returns a promise resolving to the updated User. Proper feature toggles must be enabled in the Clerk Dashboard for some properties to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_30\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction update(params: UpdateUserParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Accessing Authentication Data via req.auth in Express (@clerk/clerk-sdk-node)\nDESCRIPTION: Shows how authentication data, including session claims (which contained the `orgs` claim in Core 1), is typically accessed via the `req.auth` object populated by the `clerkClient.expressRequireAuth()` middleware in an Express-like application using `@clerk/clerk-sdk-node`. This context is relevant to the `orgs` claim removal breaking change introduced in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Forgot Password Step in Clerk Elements Sign-In Flow\nDESCRIPTION: This snippet demonstrates the 'forgot-password' step, offering options to reset password via email or sign in with Google. It uses SupportedStrategy components to present these choices.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"forgot-password\">\n  <SignIn.SupportedStrategy name=\"reset_password_email_code\">\n    Reset your password via Email\n  </SignIn.SupportedStrategy>\n  <p>or</p>\n  <SignIn.SupportedStrategy name=\"google\">Sign in with Google</SignIn.SupportedStrategy>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Authenticating with Web3 in Clerk\nDESCRIPTION: Method signature for initiating a Web3 authentication flow. This verifies the user's ownership of a blockchain wallet address through cryptographic signature verification without requiring traditional credentials.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithWeb3(params: AuthenticateWithWeb3Params): Promise<SignInResource>\n```\n\n----------------------------------------\n\nTITLE: Updating Backend SDK Imports - Clerk - TypeScript\nDESCRIPTION: This TypeScript example shows the updated import paths for Backend SDK utilities when transitioning from @clerk/clerk-sdk-node to @clerk/express and @clerk/backend. Methods like User and requireAuth must be imported directly from the appropriate new packages. This migration removes ambiguity in imports and ensures consistency with the Express SDK. Dependencies: @clerk/express, @clerk/backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_9\n\nLANGUAGE: ts\nCODE:\n```\nimport { User, requireAuth } from '@clerk/clerk-sdk-node'\nimport { requireAuth } from '@clerk/express'\nimport { User } from '@clerk/backend'\n```\n\n----------------------------------------\n\nTITLE: Creating Webhook Handler in Nuxt\nDESCRIPTION: Implementation of a webhook handler in Nuxt.js that verifies and processes incoming webhook events.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/nuxt/webhooks'\n\nexport default defineEventHandler(async (event) => {\n  try {\n    const evt = await verifyWebhook(event)\n\n    // Do something with payload\n    // For this guide, log payload to console\n    const { id } = evt.data\n    const eventType = evt.type\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\n    console.log('Webhook payload:', evt.data)\n\n    return 'Webhook received'\n  } catch (err) {\n    console.error('Error verifying webhook:', err)\n    setResponseStatus(event, 400)\n    return 'Error verifying webhook'\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Private Metadata with Clerk Go SDK (Go)\nDESCRIPTION: This Go example demonstrates updating a user's private metadata using Clerk's Go SDK. The function 'addStripeCustomerID' accepts a Clerk user and a Stripe customer ID, then calls 'UpdateMetadata' with the private metadata. Requires correct initialization of 'clerk.Client' and error handling. Can't be accessed from the frontend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_2\n\nLANGUAGE: go\nCODE:\n```\nvar client clerk.Client\n\nfunc addStripeCustomerID(user *clerk.User, stripeCustomerID string) error {\n    stripeID := map[string]interface{}{\n        \"stripeID\": stripeCustomerID,\n    }\n\tuser, err := s.clerkClient.Users().UpdateMetadata(sess.UserID, &clerk.updateMetadataRequest{\n\t\tPrivateMetadata: stripeID,\n\t})\n\n\tif err != nil {\n\t\tpanic(err)\n\t}\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Remix Development Server (bash, all major package managers)\nDESCRIPTION: Shows commands for running the local Remix development server using npm, yarn, pnpm, or bun. The developer should run the appropriate command from the project's root directory based on the package manager in use. Output is that the server starts locally (typically at http://localhost:3000), allowing access to the custom sign-in-or-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Updating User Password with New API in JavaScript\nDESCRIPTION: This code demonstrates the change from the deprecated User.update method to the new User.updatePassword method. The new method improves security by requiring both the current and new passwords, and offers an option to sign out of other sessions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Backend SDK\nDESCRIPTION: Commands for installing the @clerk/backend package using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/backend\n```\n\n----------------------------------------\n\nTITLE: Remix Loader Function Implementation\nDESCRIPTION: Example of using Clerk client within a Remix loader function with authentication check and user retrieval.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { LoaderFunction, redirect } from '@remix-run/node'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { createClerkClient } from '@clerk/remix/api.server'\n\nexport const loader: LoaderFunction = async (args) => {\n  const { userId } = await getAuth(args)\n\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  const user = await createClerkClient({ secretKey: process.env.CLERK_SECRET_KEY }).users.getUser(\n    userId,\n  )\n\n  return { serialisedUser: JSON.stringify(user) }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Clerk Middleware Setup in Astro\nDESCRIPTION: Basic implementation of clerkMiddleware() in an Astro application's middleware file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-middleware.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/astro/server'\n\nexport const onRequest = clerkMiddleware()\n```\n\n----------------------------------------\n\nTITLE: Revoking Organization Invitation Example in TypeScript\nDESCRIPTION: Example of using the revokeOrganizationInvitation function from the Clerk Backend SDK. It demonstrates how to set up the required parameters and make the API call to revoke an invitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/revoke-organization-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst invitationId = 'orginv_123'\n\nconst requestingUserId = 'user_123'\n\nconst response = await clerkClient.organizations.revokeOrganizationInvitation({\n  organizationId,\n  invitationId,\n  requestingUserId,\n})\n```\n\n----------------------------------------\n\nTITLE: Creating New Client in TypeScript\nDESCRIPTION: Async method to create a new client instance and its associated cookie, returning a Promise of the Client object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/client.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(): Promise<Client>\n```\n\n----------------------------------------\n\nTITLE: Creating Clerk Client with Updated Secret Key Parameter\nDESCRIPTION: Example of creating a Clerk client using the createClerkClient function with the updated 'secretKey' parameter instead of 'apiKey'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\nimport { createClerkClient } from '@clerk/remix/api.server'\n\ncreateClerkClient({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Create Organization with ClerkJS - JavaScript Usage Example\nDESCRIPTION: This JavaScript example demonstrates invoking `clerk.redirectToCreateOrganization()` to redirect the user to the organization creation flow. The Promise can be awaited for navigation completion. Requires Clerk navigation helpers to be properly set up and the target route to exist.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectToCreateOrganization()\n```\n\n----------------------------------------\n\nTITLE: Clerk `CannotTransferPaidAppToAccountWithoutBillingInformation` Error (JSON)\nDESCRIPTION: Represents the JSON error response when a user tries to transfer a paid application to a personal workspace or organization that does not have billing information set up. Billing info is required for accounts owning paid applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"cannot transfer paid application, missing billing info\",\n  \"longMessage\": \"Paid applications can only be transferred to personal workspaces or organizations with billing info. Add the necessary billing info and try again.\",\n  \"code\": \"transfer_paid_app_to_free_account_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Custom SignUpButton Implementation\nDESCRIPTION: Examples showing how to create custom sign-up buttons by wrapping content within the SignUpButton component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-up-button.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignUpButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return (\n    <SignUpButton>\n      <button>Custom sign up button</button>\n    </SignUpButton>\n  )\n}\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignUpButton } from '@clerk/astro/components'\n---\n\n<SignUpButton asChild>\n  <button>Custom sign up button</button>\n</SignUpButton>\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignUpButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignUpButton>\n    <button>Custom sign up button</button>\n  </SignUpButton>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToOrganizationProfile in Next.js\nDESCRIPTION: Example of using RedirectToOrganizationProfile component within a Next.js application's _app.tsx file. The component is wrapped in SignedIn to ensure authentication and includes SignedOut fallback content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-organizationprofile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToOrganizationProfile } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedIn>\n        <RedirectToOrganizationProfile />\n      </SignedIn>\n      <SignedOut>You need to sign in to view your organization profile.</SignedOut>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Example Usage of getUserOauthAccessToken() in TypeScript\nDESCRIPTION: This example demonstrates how to use the getUserOauthAccessToken() function. It sets a userId and provider, then calls the function using clerkClient.users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-oauth-access-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst userId = 'user_123'\n\nconst provider = 'google'\n\nconst response = await clerkClient.users.getUserOauthAccessToken(userId, provider)\n```\n\n----------------------------------------\n\nTITLE: Accessing Current User Data in Server Actions\nDESCRIPTION: This snippet demonstrates how to use the Clerk currentUser() helper to fetch and use the current user's data in a server action. It retrieves user details like ID and profile image to enrich server-side operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { currentUser } from '@clerk/nextjs/server'\n\nexport default function AddHobby() {\n  async function addHobby(formData: FormData) {\n    'use server'\n\n    const user = await currentUser()\n\n    if (!user) {\n      throw new Error('You must be signed in to use this feature')\n    }\n\n    const serverData = {\n      usersHobby: formData.get('hobby'),\n      userId: user.id,\n      profileImage: user.imageUrl,\n    }\n\n    console.log('add item server action completed with user details ', serverData)\n  }\n\n  return (\n    <form action={addHobby}>\n      <input value={'soccer'} type=\"text\" name=\"hobby\" />\n      <button type=\"submit\">Submit your hobby</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Publishable Key Environment Variable\nDESCRIPTION: Defines the `VITE_CLERK_PUBLISHABLE_KEY` environment variable within a `.env` file. This key, obtained from the Clerk Dashboard, is required by the Clerk SDK on the client-side to identify your application in SPA mode. The `VITE_` prefix ensures it's exposed to client-side code when using Vite.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n\n----------------------------------------\n\nTITLE: Forcing Organizations with <OrganizationList />\nDESCRIPTION: Example of using the <OrganizationList /> component with the hidePersonal property to force users to join or create an organization. This prevents users from using their personal accounts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function OrganizationListPage() {\n  return (\n    <OrganizationList\n      hidePersonal={true}\n      // ...\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining revokeOrganizationInvitation Function in TypeScript\nDESCRIPTION: Function signature for revoking an organization invitation. It takes RevokeOrganizationInvitationParams as input and returns a Promise resolving to an OrganizationInvitation object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/revoke-organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revokeOrganizationInvitation(\n  params: RevokeOrganizationInvitationParams,\n): Promise<OrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: Using <OrganizationList /> in Astro\nDESCRIPTION: Demonstration of integrating the <OrganizationList /> component in an Astro application. It shows how to set up the component with static URL strings for different actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { OrganizationList } from '@clerk/astro/components'\n---\n\n<OrganizationList\n  afterCreateOrganizationUrl=\"/organization/:slug\"\n  afterSelectPersonalUrl=\"/user/:id\"\n  afterSelectOrganizationUrl=\"/organization/:slug\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Setting Public Metadata via Clerk Backend REST API (cURL)\nDESCRIPTION: This cURL statement updates a user's publicMetadata (e.g., sets a role) via the Clerk backend API. You must supply a valid Clerk secret API key and provide the data as JSON. Public metadata is readable from the frontend but only writable via backend endpoints.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_14\n\nLANGUAGE: bash\nCODE:\n```\ncurl -XPATCH -H 'Authorization: Bearer CLERK_SECRET_KEY' -H \"Content-type: application/json\" -d '{\n  \"public_metadata\": {\n    \"role\": \"shopper\"\n  }\n}' 'https://api.clerk.com/v1/users/{user_id}/metadata'\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in React App\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { dark } from '@clerk/themes'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n      }}\n      publishableKey={clerkPubKey}\n    >\n      <div>Hello from clerk</div>\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Installing expo-checkbox Dependency using bun\nDESCRIPTION: Adds the `expo-checkbox` package using the bun package manager. This package is a prerequisite for the checkbox component in the React Native/Expo sign-in example.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nbun add expo-checkbox\n```\n\n----------------------------------------\n\nTITLE: Accessing Password Field State and Codes with Clerk.FieldState in TypeScript/React\nDESCRIPTION: This code demonstrates advanced usage of <Clerk.FieldState> within a password input field, allowing access to the field's state, error codes, and accompanying messages in TypeScript/React. Intended for use-cases where password validation details are needed, the snippet logs these details using <pre> tags for debugging or UI feedback. Dependencies include Clerk Elements and rendering under a Clerk.Field with password input enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"password\">\n  <Clerk.Label>Password</Clerk.Label>\n  <Clerk.Input type=\"password\" validatePassword />\n  <Clerk.FieldState>\n    {({ state, codes, message }) => (\n      <div>\n        <pre>Field state: {state}</pre>\n        <pre>Field msg: {message}</pre>\n        <pre>Codes: {JSON.stringify(codes, null, 2)}</pre>\n      </div>\n    )}\n  </Clerk.FieldState>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk and Convex Providers in React\nDESCRIPTION: Sets up the React application entry point with both Clerk and Convex providers. This configuration makes authentication globally accessible and integrates Clerk's authentication with Convex's client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/convex.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\nimport { ClerkProvider, useAuth } from '@clerk/clerk-react'\nimport { ConvexProviderWithClerk } from 'convex/react-clerk'\nimport { ConvexReactClient } from 'convex/react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\n\nconst convex = new ConvexReactClient(import.meta.env.VITE_CONVEX_URL as string)\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <ConvexProviderWithClerk client={convex} useAuth={useAuth}>\n        <App />\n      </ConvexProviderWithClerk>\n    </ClerkProvider>\n  </React.StrictMode>,\n)\n```\n\n----------------------------------------\n\nTITLE: Inviting a Member to an Organization in TypeScript\nDESCRIPTION: This snippet shows how to create and send an invitation to a target email address for becoming a member with a specified role using the inviteMember() method. It returns an OrganizationInvitation object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nfunction inviteMember(params: InviteMemberParams): Promise<OrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: Passing Configuration Options to rootAuthLoader - Clerk Remix TypeScript\nDESCRIPTION: This snippet shows how to pass an optional configuration object to rootAuthLoader, in addition to the loader arguments and a data-loading callback. The configuration may include options such as 'signInForceRedirectUrl' for customizing redirect behavior after authentication. Required dependencies include the Clerk Remix package and familiarity with the available rootAuthLoader options. Inputs consist of loader args, the callback handler, and the config object. The output is the combined auth state and custom data as defined by the callback, with behaviors additionally controlled by the provided options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/root-auth-loader.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n// Your imports\n\nexport const loader: LoaderFunction = (args) => {\n  return rootAuthLoader(\n    args,\n    ({ req }) => {\n      const { sessionId, userId, getToken } = req.auth\n      // Add logic to fetch data\n      return { yourData: 'here' }\n    },\n    {\n      signInForceRedirectUrl: '/dashboard',\n    },\n  )\n}\n\n// The rest of your code\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for `FormInvalidEntitlementKey` Clerk Error\nDESCRIPTION: This JSON object represents the error returned by Clerk when an entitlement key format is invalid. It includes a `shortMessage`, a detailed `longMessage` explaining the correct format (`<scope>:<feature>`), and a unique `code` ('form_invalid_entitlement_key_code').\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/entitlements.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"invalid key format\",\n  \"longMessage\": \"<value> cannot be used as an entitlement key. An entitlement key should have the following format: <scope>:<feature> Both `scope` and `feature` should only contain alphanumeric characters without any spaces.\",\n  \"code\": \"form_invalid_entitlement_key_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Organization by Slug Example\nDESCRIPTION: Example demonstrating how to retrieve an organization using its slug instead of ID with the Clerk Backend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst slug = 'my-organization-slug'\n\nconst response = await clerkClient.organizations.getOrganization({ slug })\n```\n\n----------------------------------------\n\nTITLE: Detecting Clerk Impersonated Sessions using Clerk.js (JavaScript)\nDESCRIPTION: Demonstrates initializing the Clerk frontend object using `@clerk/clerk-js` and accessing the `session` object after loading. It checks if `session.actor` exists to identify an impersonated session and logs the actor's subject (`sub`) ID and the currently impersonated user's ID (`user.id`). Requires the Clerk Publishable Key for initialization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nconst { session } = clerk\n\nif (session.actor) {\n  const { actor, user } = session\n\n  console.log(`User ${actor.sub} is signed in as user ${user.id}.`)\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from ClerkExpressWithAuth Middleware - Express & Clerk - TypeScript\nDESCRIPTION: This TypeScript example shows how to replace the legacy ClerkExpressWithAuth middleware with a custom withAuth implementation in the Express SDK. It sets up the clerkMiddleware, then defines withAuth to populate req.auth or assign an empty object for unauthenticated requests. Protected routes are defined using this middleware, returning the authentication state as JSON. Requires Express, @clerk/express, and Clerk's auth setup.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { ClerkExpressWithAuth } from '@clerk/clerk-sdk-node'\nimport { clerkMiddleware } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst port = 3000\n\n// clerkMiddleware is required to be set in the middleware chain before req.auth is used\napp.use(clerkMiddleware())\n\nconst withAuth = (req, res, next) => {\n  const { userId } = req.auth\n  // If the user is not authenticated, return an empty object\n  req.auth = userId ? auth : {}\n  next()\n}\n\n// Define a protected route\napp.get('/protected-route', ClerkExpressWithAuth(), (req, res) => {\n  res.json(req.auth)\n})\napp.get('/protected', withAuth, (req, res) => {\n  res.json(req.auth)\n})\n\napp.listen(port, () => {\n  console.log(`Server is running on http://localhost:${port}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Initiating Web3Wallet Verification (TypeScript)\nDESCRIPTION: Defines the `prepareVerification` method signature for the `Web3Wallet` object. This asynchronous function initiates the verification process by requesting a nonce to be signed. It requires `PrepareWeb3WalletVerificationParams` (specifying the `strategy` like 'web3_metamask_signature') and returns a Promise resolving to the updated `Web3Wallet` object containing verification status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/web3-wallet.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareVerification(params: PrepareWeb3WalletVerificationParams): Promise<Web3Wallet>\n```\n\n----------------------------------------\n\nTITLE: Using Existing Components with Clerk Elements via asChild Prop\nDESCRIPTION: Demonstrates how to use the asChild prop to integrate existing UI components with Clerk Elements. This is useful for maintaining consistency with an existing design system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nimport { Button } from '@components/button'\nimport { Input } from '@components/input'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <Clerk.Connection name=\"google\" asChild>\n          <Button>Sign in with Google</Button>\n        </Clerk.Connection>\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input asChild>\n            <Input />\n          </Clerk.Input>\n          <Clerk.FieldError />\n        </Clerk.Field>\n        <SignIn.Action submit asChild>\n          <Button>Continue</Button>\n        </SignIn.Action>\n      </SignIn.Step>\n      <SignIn.Step name=\"verifications\">\n        <SignIn.Strategy name=\"email_code\">\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Code</Clerk.Label>\n            <Clerk.Input asChild>\n              <Input />\n            </Clerk.Input>\n            <Clerk.FieldError />\n          </Clerk.Field>\n          <SignIn.Action submit asChild>\n            <Button>Continue</Button>\n          </SignIn.Action>\n        </SignIn.Strategy>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of getUserList with Clerk Backend SDK\nDESCRIPTION: Demonstrates the basic usage of getUserList function to retrieve a list of users using the Clerk client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Implementing Phone Number Addition in iOS SwiftUI\nDESCRIPTION: A SwiftUI implementation for adding and verifying phone numbers using Clerk's iOS SDK. Provides a user interface for phone number input and verification code confirmation, with proper error handling and state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/add-phone.mdx#2025-04-23_snippet_1\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct AddPhoneView: View {\n  @State private var phone = \"\"\n  @State private var code = \"\"\n  @State private var isVerifying = false\n  // Create a reference to the phone number that we'll be creating\n  @State private var newPhoneNumber: PhoneNumber?\n\n  var body: some View {\n    if newPhoneNumber?.verification?.status == .verified {\n      Text(\"Phone added!\")\n    }\n\n    if isVerifying {\n      TextField(\"Enter code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verifyCode(code) }\n      }\n    } else {\n      TextField(\"Enter phone number\", text: $phone)\n      Button(\"Continue\") {\n        Task { await createPhone(phone) }\n      }\n    }\n  }\n}\n\nextension AddPhoneView {\n\n  func createPhone(_ phone: String) async {\n    do {\n      guard let user = Clerk.shared.user else { return }\n\n      // Add an unverified phone number to user,\n      // then send the user an sms message with the verification code\n      self.newPhoneNumber = try await user\n        .createPhoneNumber(phone)\n        .prepareVerification()\n\n      // Set to true to display second form\n      // and capture the OTP code\n      isVerifying = true\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n\n  func verifyCode(_ code: String) async {\n    do {\n      guard let newPhoneNumber else { return }\n\n      // Verify that the code entered matches the code sent to the user\n      self.newPhoneNumber = try await newPhoneNumber.attemptVerification(code: code)\n\n      // If the status is not complete, check why. User may need to\n      // complete further steps.\n      dump(self.newPhoneNumber?.verification?.status)\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling OAuth Callback in Next.js\nDESCRIPTION: This code snippet shows how to handle the redirect callback after OAuth authentication in a Next.js application using Clerk's AuthenticateWithRedirectCallback component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/oauth-connections.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { AuthenticateWithRedirectCallback } from '@clerk/nextjs'\n\nexport default function Page() {\n  // Handle the redirect flow by calling the Clerk.handleRedirectCallback() method\n  // or rendering the prebuilt <AuthenticateWithRedirectCallback/> component.\n  // This is the final step in the custom OAuth flow.\n  return <AuthenticateWithRedirectCallback />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing withSession Higher Order Function\nDESCRIPTION: Example showing how to recreate the withSession higher order function using Clerk's hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_52\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withSession(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const session = useSessionContext()\n\n    if (!session) return null\n\n    return <Component {...props} session={session} />\n  }\n\n  HOC.displayName = `withSession(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: JWT Claims with Backend SDK\nDESCRIPTION: Accessing JWT session claims using the Clerk Backend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Checking Primary Identification - Clerk JavaScript\nDESCRIPTION: Demonstrates how to use the isPrimaryIdentification method in JavaScript to determine if a specific email address is marked as the primary identifier for the user. Uses the first email address from the user's emailAddresses list as input.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_23\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.isPrimaryIdentification(clerk.user.emailAddresses[0])\n```\n\n----------------------------------------\n\nTITLE: Updating User Data with useUser() in Vue\nDESCRIPTION: This Vue component shows how to update the current user's data using the `user` object obtained from the `useUser()` composable. It defines an `updateUser` async function that calls the `user.value?.update()` method with new `firstName` and `lastName` values. The template includes a button to trigger the update and displays the user's first and last names.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useUser } from '@clerk/vue'\n\nconst { isLoaded, user } = useUser()\n\nconst updateUser = async () => {\n  await user.value?.update({\n    firstName: 'John',\n    lastName: 'Doe',\n  })\n}\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Handle loading state -->\n  </div>\n\n  <div v-else-if=\"user\">\n    <button @click=\"updateUser\">Update your name</button>\n    <p>user.firstName: {{ user?.firstName }}</p>\n    <p>user.lastName: {{ user?.lastName }}</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Updating SignOutButton Component in Clerk SDK (React)\nDESCRIPTION: This snippet demonstrates how to update the SignOutButton component in the Clerk SDK for React. The signOutCallback prop has been replaced with a redirectUrl prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_37\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport const Signout = () => {\n  return (\n    <SignOutButton\n      redirectUrl=\"/your-path\"\n    >\n      <button>Sign Out</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example of Passkey Authentication in Clerk\nDESCRIPTION: Example of using the authenticateWithPasskey method with the 'discoverable' flow parameter. This indicates the client will require user interaction to select a passkey during authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.authenticateWithPasskey({ flow: 'discoverable' })\n```\n\n----------------------------------------\n\nTITLE: Using signOut in Clerk SDK\nDESCRIPTION: Example usage of the signOut method from the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.signOut()\n```\n\n----------------------------------------\n\nTITLE: Server-Side Task Rendering with Next.js and Supabase\nDESCRIPTION: Server component that fetches and displays tasks from Supabase. Uses a custom Supabase client to query the tasks table and renders them along with a form component for adding new tasks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport AddTaskForm from './AddTaskForm'\nimport { createServerSupabaseClient } from './client'\n\nexport default async function Home() {\n  // Use the custom Supabase client you created\n  const client = createServerSupabaseClient()\n\n  // Query the 'tasks' table to render the list of tasks\n  const { data, error } = await client.from('tasks').select()\n  if (error) {\n    throw error\n  }\n  const tasks = data\n\n  return (\n    <div>\n      <h1>Tasks</h1>\n\n      <div>{tasks?.map((task: any) => <p key={task.id}>{task.name}</p>)}</div>\n\n      <AddTaskForm />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkApp Wrapper\nDESCRIPTION: Implementation of the ClerkApp wrapper to provide authentication state throughout the React application tree.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\n\nexport const meta: MetaFunction = () => [\n  {\n    charset: 'utf-8',\n    title: 'New Remix App',\n    viewport: 'width=device-width,initial-scale=1',\n  },\n]\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nexport function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        {children}\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>\n  )\n}\n\nfunction App() {\n  return <Outlet />\n}\n\n// Wrap your app with `ClerkApp`\nexport default ClerkApp(App)\n```\n\n----------------------------------------\n\nTITLE: Fetching and Displaying Organization Memberships with ClerkJS\nDESCRIPTION: This JavaScript snippet demonstrates initializing ClerkJS using a publishable key and loading the Clerk instance. After ensuring a user is logged in (`clerk.user`), it fetches the user's organization memberships using `clerk.user.getOrganizationMemberships()`. It then iterates through the memberships and dynamically adds rows to an HTML table (`#memberships-table-body`) to display membership details. Requires ClerkJS library and a valid publishable key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'main.js', collapsible: true }}\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    const { data } = await clerk.user.getOrganizationMemberships()\n    const memberships = data\n\n    memberships.map((membership) => {\n      const membershipTable = document.getElementById('memberships-table-body')\n      const row = membershipTable.insertRow()\n      row.insertCell().textContent = membership.publicUserData.identifier\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignIn in React\nDESCRIPTION: This snippet demonstrates how to use the RedirectToSignIn component in a React application. It includes setting up ClerkProvider with a publishable key and using SignedIn and SignedOut components to control access to a private page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signin.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignedIn,\n  SignedOut,\n  RedirectToSignIn,\n  UserButton,\n} from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nfunction PrivatePage() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignIn />\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Authentication-Aware Header with Clerk Components in TypeScript\nDESCRIPTION: This TypeScript snippet defines a simple React functional component (`App`) that uses Clerk's control components. It imports `SignedIn`, `SignedOut`, `SignInButton`, and `UserButton` from `@clerk/clerk-react`. The header conditionally renders the `SignInButton` for signed-out users and the `UserButton` for signed-in users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/clerk-react'\n\nexport default function App() {\n  return (\n    <header>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Authenticating with Redirect in Clerk\nDESCRIPTION: Method signature for initiating authentication via redirect to an OAuth or SAML provider. This signs in users with an external account such as a social connection or enterprise SSO provider.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithRedirect(params: AuthenticateWithRedirectParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-Out in Next.js with Clerk\nDESCRIPTION: A React component that implements a custom sign-out button using the useClerk hook in Next.js App Router. The component renders a button that triggers the signOut function and redirects to the home page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/sign-out.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n'use client'\n\nimport { useClerk } from '@clerk/nextjs'\n\nexport const SignOutButton = () => {\n  const { signOut } = useClerk()\n\n  return (\n    <button onClick={() => signOut({ redirectUrl: '/' })}>Sign out</button>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Example Usage of updateOrganizationMetadata\nDESCRIPTION: Practical example showing how to update an organization's public metadata using the Clerk Backend SDK with a specific organization ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-metadata.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst response = await clerkClient.organizations.updateOrganizationMetadata(organizationId, {\n  publicMetadata: {\n    example: 'metadata',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Authentication Components Reference\nDESCRIPTION: Core authentication components used in Account Portal pages: SignIn, SignUp, UserProfile, CreateOrganization, OrganizationProfile, and Waitlist components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn />\n<SignUp />\n<UserProfile />\n<CreateOrganization />\n<OrganizationProfile />\n<Waitlist />\n```\n\n----------------------------------------\n\nTITLE: Basic Sign-In Flow using Clerk Elements in React\nDESCRIPTION: Demonstrates a basic sign-in flow using Clerk Elements components. This snippet serves as a starting point for the styling examples that follow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\">\n        <Clerk.Connection name=\"google\">Sign in with Google</Clerk.Connection>\n        <Clerk.Field name=\"identifier\">\n          <Clerk.Label>Email</Clerk.Label>\n          <Clerk.Input />\n          <Clerk.FieldError />\n        </Clerk.Field>\n        <SignIn.Action submit>Continue</SignIn.Action>\n      </SignIn.Step>\n      <SignIn.Step name=\"verifications\">\n        <SignIn.Strategy name=\"email_code\">\n          <Clerk.Field name=\"code\">\n            <Clerk.Label>Code</Clerk.Label>\n            <Clerk.Input />\n            <Clerk.FieldError />\n          </Clerk.Field>\n          <SignIn.Action submit>Verify</SignIn.Action>\n        </SignIn.Strategy>\n      </SignIn.Step>\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining getOrganizationList Function in TypeScript\nDESCRIPTION: Function signature for getOrganizationList, which retrieves a list of organizations. It returns a Promise that resolves to a PaginatedResourceResponse containing an array of Organization objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationList(\n  params: GetOrganizationListParams,\n): Promise<PaginatedResourceResponse<Organization[]>>\n```\n\n----------------------------------------\n\nTITLE: SignInRedirectOptions Interface Properties in TypeScript\nDESCRIPTION: This interface defines four optional properties that control redirect behavior after authentication. It includes options for forced redirects and fallback URLs for both sign-in and sign-up flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-redirect-options.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SignInRedirectOptions {\n  signInForceRedirectUrl?: string;\n  signUpForceRedirectUrl?: string;\n  signInFallbackRedirectUrl?: string;\n  signUpFallbackRedirectUrl?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Token Retrieval Usage Example in Swift\nDESCRIPTION: Example showing how to retrieve a token from the Clerk session and use it in an Authorization header. Demonstrates error handling with try-await pattern.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ios/get-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: swift\nCODE:\n```\nlet session = Clerk.shared.session\n\nif let token = try await session?.getToken()?.jwt { // => \"eyJhbGciOiJSUzI1NiIsImtpZC...\"\n  headers[\"Authorization\"] = \"Bearer \\(token)\"\n}\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes - React - TypeScript/TSX\nDESCRIPTION: Implements stacking of Dark and Neobrutalism themes in a plain React project using @clerk/clerk-react and @clerk/themes. Requires the Clerk Publishable Key in environment variables. The ClerkProvider receives both a publishableKey and an appearance prop with the stacked themes. Displays a basic greeting and expects REACT_APP_CLERK_PUBLISHABLE_KEY to be set.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { dark, neobrutalism } from '@clerk/themes'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: [dark, neobrutalism],\n      }}\n      publishableKey={clerkPubKey}\n    >\n      <div>Hello from clerk</div>\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Implementing Choose Strategy Step in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows how to implement the 'choose-strategy' step, allowing users to select an alternative sign-in method. It includes a SupportedStrategy component for phone code verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"choose-strategy\">\n  <SignIn.SupportedStrategy name=\"phone_code\">Send a code to your phone</SignIn.SupportedStrategy>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Integrating Clerk Middleware in Nuxt - JavaScript\nDESCRIPTION: Shows how to incorporate the 'clerkMiddleware()' helper into a Nuxt application to handle authentication and authorization through middleware. Requires the Clerk Nuxt SDK as a dependency. No direct parameters; typically registered within the Nuxt middleware directory. Facilitates easy protection of routes and access control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Example middleware setup:\nimport { clerkMiddleware } from 'clerk/nuxt';\n\nexport default clerkMiddleware();\n```\n\n----------------------------------------\n\nTITLE: Opening SignUp Component as Overlay with JavaScript\nDESCRIPTION: This snippet shows how to open the SignUp component as an overlay using JavaScript. It uses the openSignUp method to display the component at the root of the HTML body.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nclerk.openSignUp()\n```\n\n----------------------------------------\n\nTITLE: Making Authenticated API Requests with Fetch in Expo\nDESCRIPTION: Demonstrates how to make authenticated API requests using the Fetch API with Clerk session tokens. The function retrieves the Clerk instance, obtains a session token, and includes it in the request headers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/access-clerk-outside-components.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getClerkInstance } from '@clerk/clerk-expo'\n\nexport async function fetchFoo() {\n  const clerkInstance = getClerkInstance()\n  // Use `getToken()` to get the current session token\n  const token = await clerkInstance.session?.getToken()\n\n  const response = await fetch('/api/foo', {\n    headers: {\n      // Include the session token as a Bearer token in the Authorization header\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  })\n\n  if (!response.ok) {\n    // Include status code and status text in error message\n    throw new Error(`API Error: ${response.status} ${response.statusText}`)\n  }\n\n  return response.json()\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Sinatra Routes with Clerk Auth Filter in Ruby\nDESCRIPTION: This example shows how to protect a specific Sinatra route (`/admin`) using the `auth: true` filter provided by the `Sinatra::Clerk` extension. If a user attempts to access this route without being authenticated, they will be automatically redirected to the Clerk sign-in page by default. The `Sinatra::Clerk` extension must be registered first.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/sinatra.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"clerk/sinatra\"\nrequire \"sinatra/base\"\n\nclass App < Sinatra::Base\n  register Sinatra::Clerk\n\n  get \"/\" do\n    erb :index, format: :html5\n  end\n\n  # Protect the \"/admin\" route with the `auth` filter\n  # If the user is not authenticated, they will be redirected to the sign-in page\n  get \"/admin\", auth: true do\n    @user = clerk.user\n    erb :admin, format: :html5\n  end\n\n  run! if app_file == $0\nend\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Next.js\nDESCRIPTION: This snippet demonstrates how to use the SignUp component on a public page in a Next.js application. It uses the useUser hook to conditionally render the SignUp component or a welcome message.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { SignUp, useUser } from '@clerk/nextjs'\n\nexport default function Home() {\n  const { user } = useUser()\n\n  if (!user) return <SignUp />\n\n  return <div>Welcome!</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in React\nDESCRIPTION: Basic React implementation of SignedOut component with ClerkProvider and environment variable configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedOut, ClerkProvider } from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nfunction Page() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <SignedOut>\n        <p>You are signed out.</p>\n      </SignedOut>\n      <p>This content is always visible.</p>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk SignInTokenRevoked Error - JSON\nDESCRIPTION: Describes the JSON structure for the 'SignInTokenRevoked' error, which indicates that a sign in token is no longer valid due to revocation. No external dependencies are required; this is a data format definition. The snippet includes keys for a short message, detailed explanation, and error code, representing the expected output for systems handling token errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in-tokens.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"sign in token has been revoked\\\",\\n  \\\"longMessage\\\": \\\"This sign in token has been revoked and cannot be used anymore.\\\",\\n  \\\"code\\\": \\\"sign_in_token_revoked_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Password in JavaScript\nDESCRIPTION: Demonstrates the change from using User.update() to User.updatePassword() for updating a user's password. The new method requires both the current and new password for improved security.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Using OrganizationCustomPermissionKey Type in TypeScript\nDESCRIPTION: A type definition that represents a user's permission key in an organization. By default, it is a string type, but can be customized through ClerkAuthorization to support custom roles and permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-custom-permission-key.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nOrganizationCustomPermissionKey\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Navigation Using UserButton in Clerk for Vue (Vue Single File Component)\nDESCRIPTION: Configures Clerk's UserButton profile menu order in a Vue SFC using TypeScript setup. Imports the UserButton from '@clerk/vue' and demonstrates slotting custom label icons and custom content above the default 'account' and 'security' pages. Suitable for usage in a main layout file such as 'App.vue'; requires Clerk's Vue package as a dependency.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_14\n\nLANGUAGE: Vue\nCODE:\n```\n<script setup lang=\"ts\">\\nimport { UserButton } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <UserButton>\\n    <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\">\\n      <template #labelIcon>\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n        </svg>\\n      </template>\\n      <div>\\n        <h1>Custom page</h1>\\n        <p>This is the content of the custom page.</p>\\n      </div>\\n    </UserButton.UserProfilePage>\\n    <UserButton.UserProfileLink label=\"Homepage\" url=\"/\">\\n      <template #labelIcon>\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n        </svg>\\n      </template>\\n    </UserButton.UserProfileLink>\\n    <UserButton.UserProfilePage label=\"account\" />\\n    <UserButton.UserProfilePage label=\"security\" />\\n  </UserButton>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining the `updateMember` Function Signature in TypeScript\nDESCRIPTION: This TypeScript signature defines the `updateMember` function for modifying an organization member's attributes. It accepts an `UpdateMembershipParams` object containing the `userId` and the new `role`. It returns a Promise resolving to the updated `OrganizationMembership` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\nfunction updateMember(params: UpdateMembershipParams): Promise<OrganizationMembership>\n```\n```\n\n----------------------------------------\n\nTITLE: Accessing User ID from Session Claims in App Router\nDESCRIPTION: Using Clerk's auth() helper to access the user ID from session claims in Next.js App Router server components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { sessionClaims } = await auth()\n\n  if (!sessionClaims) {\n    return <p>Not signed in</p>\n  }\n\n  const userId = sessionClaims.sub\n\n  return <p>Welcome user {userId}</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Legacy requireAuth Behavior (Error Emission) - Express & Clerk - TypeScript\nDESCRIPTION: This snippet provides a custom Express middleware named legacyRequireAuth to reproduce the original error-emitting behavior of requireAuth from the Clerk Node SDK, rather than redirecting unauthenticated requests. It checks req.auth.userId and passes an error to the next function if unauthenticated. Inputs are HTTP requests; if the user is not authenticated, an error is thrown, otherwise, normal processing continues.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nconst legacyRequireAuth = (req, res, next) => {\n  if (!req.auth.userId) {\n    return next(new Error('Unauthenticated'))\n  }\n  next()\n}\napp.get('/', legacyRequireAuth, handler)\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware for Nuxt - TypeScript\nDESCRIPTION: Demonstrates how to manually configure the clerkMiddleware in a Nuxt project by adjusting the nuxt.config.ts. The configuration disables automatic addition of the server middleware and prepares the project for manual middleware setup. Required dependency: '@clerk/nuxt' Nuxt module. No parameters are present, but the config structure should be maintained. No output is produced; this file is for configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/clerk-middleware.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default defineNuxtConfig({\\n  modules: ['@clerk/nuxt'],\\n  clerk: {\\n    skipServerMiddleware: true,\\n  },\\n})\n```\n\n----------------------------------------\n\nTITLE: Express Middleware Integration for Clerk JWT Claims with @clerk/clerk-sdk-node - TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates Express.js integration with the Clerk SDK, showing how to require authentication via middleware and expose authentication claims at a '/me' endpoint. ClerkClient's expressRequireAuth attaches authentication info to the request. Dependencies: express, @clerk/clerk-sdk-node, TypeScript. Parameters: request, response objects. Output: Endpoint JSON containing authentication data. Suitable for secure back-end routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization.getInvitations in JavaScript\nDESCRIPTION: The pagination arguments for Organization.getInvitations have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating getUserList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getUserList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: UserButton Default Sign-Out URL Change - React/JSX\nDESCRIPTION: Demonstrates the transition from explicitly specifying the afterSignOutUrl prop to omitting it. When upgrading, the default redirect after sign out is now '/'; specifying it in <UserButton afterSignOutUrl=\"/\" /> is redundant. Input: a JSX component; Output: equivalent behavior with a cleaner component definition.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_12\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton afterSignOutUrl=\"/\" />\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Routes Using Dedicated UserProfile Page in Clerk for Astro (Astro Component)\nDESCRIPTION: Demonstrates dedicated user profile route configuration in Astro via Clerk's UserProfile component, customizing its navigation routes with both default and custom menu entries. Uses slot 'label-icon' to decorate the custom and homepage menu items, positioning these before the built-in 'account' and 'security' options. Depends on '@clerk/astro/components' in the Astro project and targets files like 'pages/user-profile.astro'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_13\n\nLANGUAGE: Astro\nCODE:\n```\n---\\nimport { UserProfile } from '@clerk/astro/components'\\n---\\n\\n<UserProfile>\\n  <UserProfile.Page label=\"Custom Page\" url=\"custom\">\\n    <svg\\n      slot=\"label-icon\"\\n      xmlns=\"http://www.w3.org/2000/svg\"\\n      viewBox=\"0 0 512 512\"\\n      fill=\"currentColor\"\\n    >\\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n    </svg>\\n    <div>\\n      <h1>Custom page</h1>\\n      <p>This is the content of the custom page.</p>\\n    </div>\\n  </UserProfile.Page>\\n  <UserProfile.Link label=\"Homepage\" url=\"/\">\\n    <svg\\n      slot=\"label-icon\"\\n      xmlns=\"http://www.w3.org/2000/svg\"\\n      viewBox=\"0 0 512 512\"\\n      fill=\"currentColor\"\\n    >\\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n    </svg>\\n  </UserProfile.Link>\\n  <UserProfile.Page label=\"account\" />\\n  <UserProfile.Page label=\"security\" />\\n</UserProfile>\n```\n\n----------------------------------------\n\nTITLE: Defining the SignInSecondFactor Union Type in TypeScript\nDESCRIPTION: Defines the SignInSecondFactor type as a union of three factor types: PhoneCodeFactor, TOTPFactor, and BackupCodeFactor. This represents the possible second-factor verification strategies available during sign-in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-second-factor.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SignInSecondFactor = PhoneCodeFactor | TOTPFactor | BackupCodeFactor\n```\n\n----------------------------------------\n\nTITLE: Implementing WithUser HOC with React Hooks in Clerk\nDESCRIPTION: Example code showing how to recreate the removed WithUser higher order component using Clerk's custom hooks. It uses the useUser hook to provide user data to child components through a render prop pattern.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_52\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithUser = ({ children }) => {\n  const user = useUser()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(user)\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidUserSettings (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when the authentication settings (`auth_config`) of the Clerk instance are misconfigured, preventing sign-in or sign-up operations. It indicates an administrative configuration issue. It includes a short message, a long message, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"invalid auth configuration\",\n  \"longMessage\": \"The authentication settings are invalid.\",\n  \"code\": \"invalid_user_settings_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Response Format for RedirectUrls.getRedirectUrlList in JavaScript\nDESCRIPTION: The response format for getRedirectUrlList has changed to include totalCount alongside data. This change aligns the SDK response with the Backend API's paginated response structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Representing ClientNotFound Error in JSON\nDESCRIPTION: This JSON object represents the structure of a 'ClientNotFound' error returned by Clerk. It occurs when a client lookup fails for a specific client ID. The object includes a short message, a detailed message specifying the missing client ID placeholder '<clientID>', and the error code 'resource_not_found_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/clients.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Client not found\",\n  \"longMessage\": \"No client was found with id <clientID>\",\n  \"code\": \"resource_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Sign Up Unsafe Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing unsafe metadata during sign-up process with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SignUpUnsafeMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk SignInTokenCannotBeRevoked Error - JSON\nDESCRIPTION: Captures the Clerk error JSON for 'SignInTokenCannotBeRevoked', which notifies that a token cannot be revoked due to its current status. Utilizes placeholders (e.g., <status>) for dynamic substitution and follows the pattern of concise error communication with a designated code. Intended for programmatic error recognition and user feedback.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in-tokens.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"cannot revoke\\\",\\n  \\\"longMessage\\\": \\\"Sign in token cannot be revoked because its status is <status>. Only pending tokens can be revoked.\\\",\\n  \\\"code\\\": \\\"sign_in_token_cannot_be_revoked_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Custom Clerk Variables in Next.js (Pages Router) - TypeScript\nDESCRIPTION: Shows how to apply global stylistic customizations to Clerk components in a Next.js Pages Router setup by providing a `variables` object through the `appearance` prop on `ClerkProvider`. Requires importing `@clerk/nextjs` and using Clerk's context provider in the custom App component. The appearance object can include color and text settings, affecting all nested Clerk UI as per the specified variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider\n      appearance={{\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      }}\n    >\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Updating setSession to setActive in Clerk SDK (JavaScript)\nDESCRIPTION: This snippet demonstrates the migration from the deprecated setSession method to the new setActive method in the Clerk SDK. The new method accepts an object with session, organization, and beforeEmit parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setActive({ session: sessionObj })\n\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\n\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Creating the Sign-In/Up Page Component in React Router (TSX)\nDESCRIPTION: This snippet defines a React functional component `SignInPage` using TypeScript and JSX. It imports and renders the Clerk `<SignIn />` component, providing a dedicated route (`/sign-in`) for users to either sign in or sign up within a single flow. This component should be placed in the application's routes directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes/sign-in.tsx' }}\nimport { SignIn } from '@clerk/react-router'\n\nexport default function SignInPage() {\n  return (\n    <div>\n      <h1>Sign in or up route</h1>\n      <SignIn />\n    </div>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Next.js Pages Router\nDESCRIPTION: Implementation example for Next.js Pages Router using SignedOut component within the main App component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport '@/styles/globals.css'\nimport { ClerkProvider, RedirectToSignIn, SignedOut } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedOut>\n        <p>You are signed out.</p>\n      </SignedOut>\n      <p>This content is always visible.</p>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Inviting a Single Member to a Clerk Organization (JavaScript Example)\nDESCRIPTION: This snippet demonstrates how to invite a single user to the current organization by providing their email address and assigning them a specific role using the `clerk.organization.inviteMember` method. This is an asynchronous operation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait clerk.organization.inviteMember({ emailAddress: 'test@test.com', role: 'org:member' })\n```\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Link to UserButton in Vue\nDESCRIPTION: This Vue.js snippet shows how to add a 'Create organization' link to the UserButton component. It uses Vue's slot syntax to incorporate a custom icon and directs users to a specific organization creation URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_10\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <UserButton>\n      <UserButton.MenuItems>\n        <UserButton.Link label=\"Create organization\" href=\"/create-organization\">\n          <template #labelIcon>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n              <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n            </svg>\n          </template>\n        </UserButton.Link>\n      </UserButton.MenuItems>\n    </UserButton>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Mounting UserButton with JavaScript\nDESCRIPTION: This code demonstrates how to mount the UserButton component using vanilla JavaScript and the Clerk SDK. It shows the process of initializing Clerk, creating a container element, and mounting the UserButton to that element.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-button\"></div>\n`\n\nconst userbuttonDiv = document.getElementById('user-button')\n\nclerk.mountUserButton(userbuttonDiv)\n```\n\n----------------------------------------\n\nTITLE: Configuring Cypress Global Setup with Clerk (TypeScript)\nDESCRIPTION: Example `cypress.config.ts` demonstrating how to integrate Clerk testing helpers using `clerkSetup` from `@clerk/testing/cypress` within the `setupNodeEvents` function. This setup retrieves a Clerk Testing Token at the start of the test suite, making it available for subsequent tests. Requires the application's `baseUrl` to be set.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkSetup } from '@clerk/testing/cypress'\nimport { defineConfig } from 'cypress'\n\nexport default defineConfig({\n  e2e: {\n    setupNodeEvents(on, config) {\n      return clerkSetup({ config })\n    },\n    baseUrl: 'http://localhost:3000', // your app's URL\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Action to UserButton in Next.js\nDESCRIPTION: This example demonstrates how to add a custom 'Open chat' action to the UserButton component in a Next.js application. It includes a custom icon and an onClick handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        <UserButton.MenuItems>\n          <UserButton.Action\n            label=\"Open chat\"\n            labelIcon={<DotIcon />}\n            onClick={() => alert('init chat')}\n          />\n        </UserButton.MenuItems>\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Styling Clerk Components with Global CSS\nDESCRIPTION: Example of using global CSS to style a Clerk component's primary button by targeting specific classes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: css\nCODE:\n```\n.cl-formButtonPrimary {\n  font-size: 14px;\n  text-transform: none;\n  background-color: #611bbd;\n}\n\n.cl-formButtonPrimary:hover,\n.cl-formButtonPrimary:focus,\n.cl-formButtonPrimary:active {\n  background-color: #49247a;\n}\n```\n\n----------------------------------------\n\nTITLE: Using ClerkLoaded in Remix\nDESCRIPTION: This example demonstrates the usage of ClerkLoaded component in a Remix application. It includes a global declaration for the Clerk object on the window interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loaded.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded } from '@clerk/remix'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Index() {\n  return (\n    <div>\n      <ClerkLoaded>\n        <p>Clerk has loaded</p>\n      </ClerkLoaded>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: User Public Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing public metadata for users with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ninterface UserPublicMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Email Address Type Definition in TypeScript\nDESCRIPTION: Type definition for the getEmailAddress function that retrieves a single EmailAddress object by ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/get-email-address.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getEmailAddress(emailAddressId: string): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Accessing SignIn State in React\nDESCRIPTION: Demonstrates how to use the $signInStore with React to check the current state of a sign-in attempt. Uses the useStore hook from nanostores/react to access the store state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-in-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $signInStore } from '@clerk/astro/client'\n\nexport default function SignInStep() {\n  const signIn = useStore($signInStore)\n\n  if (signIn === undefined) {\n    // Add logic to handle loading state\n    return null\n  }\n\n  return <div>The current sign in attempt status is {signIn.status}.</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Defining OAuth Redirect Callback Handler Function (TypeScript)\nDESCRIPTION: Provides the TypeScript signature for the `handleRedirectCallback` method. This function is called to complete an OAuth authentication flow that was initiated using `SignIn.authenticateWithRedirect` or `SignUp.authenticateWithRedirect`. It processes the redirect from the OAuth provider, finalizes the sign-in/sign-up attempt, and handles subsequent navigation based on the provided `params` (redirect URLs). An optional `customNavigate` function allows overriding the default navigation behavior.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nfunction handleRedirectCallback(\n  params: HandleOAuthCallbackParams,\n  customNavigate?: ((to: string) => Promise<unknown>) | undefined,\n): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Testing Header Forwarding in Clerk Middleware\nDESCRIPTION: This TypeScript code demonstrates how to log the forwarded headers in a Clerk middleware to verify correct configuration. It checks the x-forwarded-host and x-forwarded-proto headers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/deploy-behind-a-proxy.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default clerkMiddleware(\n  (auth, req) => {\n    console.log('=========================')\n    console.log('Request Headers')\n    console.log('x-forwarded-host', req.headers.get('x-forwarded-host'))\n    console.log('x-forwarded-proto', req.headers.get('x-forwarded-proto'))\n    console.log('=========================')\n  },\n  { debug: debugStatus },\n)\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient with publishableKey in JavaScript\nDESCRIPTION: Demonstrates the change from using 'frontendApi' to 'publishableKey' as a parameter when calling createClerkClient. This update involves changing both the key name and its value.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/fastify'\n\ncreateClerkClient({ frontendApi: '...' })\ncreateClerkClient({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updating authMiddleware Frontend API Parameter in JavaScript\nDESCRIPTION: Illustrates the change from using 'frontendApi' to 'publishableKey' as a parameter in the authMiddleware function. This update reflects the new naming convention for Clerk's frontend API key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nimport { authMiddleware } from '@clerk/nextjs/server'\n\nauthMiddleware({ frontendApi: '...' })\nauthMiddleware({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Defining Return Type for useLocalCredentials Hook in TypeScript\nDESCRIPTION: This code snippet outlines the return type for the useLocalCredentials hook. It includes boolean flags for credential status, biometric type information, and methods for managing and authenticating with local credentials.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/use-local-credentials.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface UseLocalCredentialsReturn {\n  hasCredentials: boolean;\n  userOwnsCredentials: boolean;\n  biometricType: 'face-recognition' | 'fingerprint' | null;\n  setCredentials: (params: LocalCredentials) => Promise<void>;\n  clearCredentials: () => Promise<void>;\n  authenticate: () => Promise<SignInResource>;\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server (Bash)\nDESCRIPTION: Commands to start the development server for the JavaScript application using different package managers (npm, yarn, pnpm, bun). This makes the application accessible, typically at `http://localhost:5173`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm run dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dev\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/fastify using yarn (Bash)\nDESCRIPTION: This command uses the Yarn package manager to add or update the `@clerk/fastify` package to the latest version, incorporating Core 2 features.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/fastify\n```\n\n----------------------------------------\n\nTITLE: Applying CSS Module Styles to Clerk SignIn in Next.js Pages Router (TSX)\nDESCRIPTION: Demonstrates importing a CSS module (`styles/SignIn.module.css`) and applying its `primaryColor` class to the `formButtonPrimary` element of the Clerk `<SignIn>` component using the `appearance.elements` prop within the custom App component (`app.tsx`) of a Next.js Pages Router application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app.tsx', mark: [[8, 14]] }}\nimport styles from '../styles/SignIn.module.css'\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignIn\n        appearance={{\n          elements: {\n            formButtonPrimary: styles.primaryColor,\n          },\n        }}\n      />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Page-Level RBAC Protection\nDESCRIPTION: Enhanced admin dashboard page with role-based protection at the component level. It checks if the user has the admin role and redirects to the home page if they don't.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { checkRole } from '@/utils/roles'\nimport { redirect } from 'next/navigation'\n\nexport default async function AdminDashboard() {\n  // Protect the page from users who are not admins\n  const isAdmin = await checkRole('admin')\n  if (!isAdmin) {\n    redirect('/')\n  }\n\n  return <p>This is the protected admin dashboard restricted to users with the `admin` role.</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Destroying Client in TypeScript\nDESCRIPTION: Async method to delete the client and reset all associated sessions, returning a void Promise.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/client.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk React SDK\nDESCRIPTION: Commands to install the Clerk React SDK using npm, yarn, or pnpm package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/convex.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-react\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-react\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for User.getOrganizationMemberships in JavaScript\nDESCRIPTION: The pagination arguments for User.getOrganizationMemberships have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Example Usage of SAML Connection Deletion\nDESCRIPTION: Demonstrates how to use the deleteSamlConnection method with the Clerk client to remove a SAML connection using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/delete-saml-connection.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst samlConnectionId = 'samlc_123'\n\nconst response = await clerkClient.samlConnections.deleteSamlConnection(samlConnectionId)\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Nuxt\nDESCRIPTION: This snippet shows how to customize all SignIn components in a Nuxt application by configuring the clerk module with appearance variables in the nuxt.config.ts file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_13\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      signIn: {\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Waitlist Component in React\nDESCRIPTION: Basic implementation of the Waitlist component in a React application using the @clerk/clerk-react package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Waitlist } from '@clerk/clerk-react'\n\nexport default function WaitlistPage() {\n  return <Waitlist />\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Webhook Handler in React Router\nDESCRIPTION: Implementation of a webhook handler in React Router that verifies and processes incoming webhook events.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/react-router/webhooks'\nimport type { Route } from './+types/webhooks'\n\nexport const action = async ({ request }: Route.ActionArgs) => {\n  try {\n    const evt = await verifyWebhook(request)\n\n    // Do something with payload\n    // For this guide, log payload to console\n    const { id } = evt.data\n    const eventType = evt.type\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\n    console.log('Webhook payload:', evt.data)\n\n    return new Response('Webhook received', { status: 200 })\n  } catch (err) {\n    console.error('Error verifying webhook:', err)\n    return new Response('Error verifying webhook', { status: 400 })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Organization Private Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing private metadata for an organization with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationPrivateMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing getToken() in Next.js App Router\nDESCRIPTION: Example of using getToken() in a Next.js App Router API route. It checks for an active session, retrieves a token, and returns it in the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { auth, clerkClient } from '@clerk/nextjs/server'\n\nexport async function GET() {\n  const { sessionId } = await auth()\n\n  if (!sessionId) {\n    return Response.json({ message: 'Unauthorized' }, { status: 401 })\n  }\n\n  const template = 'test'\n  const client = await clerkClient()\n  const token = await client.sessions.getToken(sessionId, template)\n\n  return Response.json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Path Routing with Clerk Authentication Components in JSX\nDESCRIPTION: Examples of how to implement path routing with Clerk authentication components. Path routing is now the default strategy in Core 2, requiring the 'path' prop to be defined for affected components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn path=\"/sign-in\" />\n<SignUp path=\"/sign-up\" />\n<UserProfile path=\"/user-profile\" />\n<CreateOrganization path=\"/create-org\" />\n<OrganizationProfile path=\"/org-profile\" />\n```\n\n----------------------------------------\n\nTITLE: Calling touch() to Maintain Session Activity in JavaScript\nDESCRIPTION: Shows how to call the async touch method on the Clerk session client to refresh the active timestamp. This helps maintain session validity and prevent user logouts due to inactivity. Must be run in an environment where Clerk's session client is initialized; returns a promise and should be awaited.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_12\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.session.touch()\n```\n\n----------------------------------------\n\nTITLE: Framework-specific Clerk Client Implementation\nDESCRIPTION: Examples of importing and using clerkClient across different frameworks including Next.js, Remix, Fastify, Astro, Express, and Nuxt.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/nextjs/server'\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/fastify'\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/astro/server'\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient } from '@clerk/nuxt/server'\n```\n\n----------------------------------------\n\nTITLE: Updating Invitation List Retrieval in JavaScript\nDESCRIPTION: Demonstrates the change in the return structure of getInvitationList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Defining OauthFactor Interface for OAuth Authentication\nDESCRIPTION: Specifies the type definition for OAuth verification factor with a strategy property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\ntype OauthFactor = {\n  strategy: OAuthStrategy\n}\n```\n\n----------------------------------------\n\nTITLE: Using getToken() with Clerk Backend SDK in JavaScript\nDESCRIPTION: Example of using getToken() with Clerk's Backend SDK in JavaScript. It demonstrates retrieving a token for a specific session and template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst sessionId = 'sess_123'\n\nconst template = 'test'\n\nconst response = await clerkClient.sessions.getToken(sessionId, template)\n```\n\n----------------------------------------\n\nTITLE: Updating SAML Connection Function Signature in TypeScript\nDESCRIPTION: This snippet shows the function signature for updateSamlConnection(). It takes a SAML connection ID and an optional params object, and returns a Promise that resolves to an Organization object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/update-saml-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateSamlConnection(\n  samlConnectionId: string,\n  params: UpdateSamlConnectionParams = {},\n): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Representing CheckoutLocked Billing Error in JSON (Clerk)\nDESCRIPTION: This JSON object represents the `CheckoutLocked` error in Clerk. It indicates that a checkout process is currently underway for the specified application ID and cannot be initiated again until the current one completes. The structure includes a short message, a detailed long message with the application ID placeholder, and the specific error code `checkout_locked_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Checkout is still processing\",\n  \"longMessage\": \"Checkout is still processing for application ID <appID>\",\n  \"code\": \"checkout_locked_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining the SessionWithActivities.revoke() method signature in TypeScript\nDESCRIPTION: This code snippet defines the TypeScript function signature for the revoke() method of the SessionWithActivities object. The method marks a session as revoked, though it will fail if applied to the currently active session. Only users can revoke their own sessions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/session-with-activities.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revoke(): Promise<SessionWithActivities>\n```\n\n----------------------------------------\n\nTITLE: SessionVerification Interface Properties in TypeScript\nDESCRIPTION: Detailed description of the SessionVerification interface properties including status, level, session object, verification states for first and second factors, and supported authentication factors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/session-verification.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SessionVerification {\n  status: 'needs_first_factor' | 'needs_second_factor' | 'complete';\n  level: 'first_factor' | 'second_factor' | 'multi_factor';\n  session: Session;\n  firstFactorVerification: Verification;\n  secondFactorVerification: Verification;\n  supportedFirstFactors: EmailCodeFactor[] | PhoneCodeFactor[] | PasswordFactor[];\n  supportedSecondFactors: TOTPFactor[] | PhoneCodeFactor[] | BackupCodeFactor[];\n}\n```\n\n----------------------------------------\n\nTITLE: Handling SMS OTP Verification with Clerk in JavaScript\nDESCRIPTION: This snippet implements an SMS OTP user sign-in flow with Clerk using asynchronous event handlers and form data manipulation in JavaScript. It listens for a form submit event to send OTP verification codes, then attempts to verify the code using Clerk's client API, handling errors with console output. Prerequisites include loading the Clerk JavaScript SDK and having corresponding form elements: a form with id 'verifying' and an input named 'code'. Inputs include the OTP code from the user, and output is an active session set with clerk.setActive. Limitations: This code assumes the presence of specific DOM elements and that Clerk is already initialized.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_7\n\nLANGUAGE: JavaScript\nCODE:\n```\ndocument.getElementById('verifying').removeAttribute('hidden')\\n} catch (error) {\\n  // See https://clerk.com/docs/custom-flows/error-handling\\n  // for more info on error handling\\n  console.error(error)\\n}\\n})\\n\\n// Handle the verification form\\ndocument.getElementById('verifying').addEventListener('submit', async (e) => {\\n  const formData = new FormData(e.target)\\n  const code = formData.get('code')\\n\\n  try {\\n    // Verify the phone number\\n    const verify = await clerk.client.signIn.attemptFirstFactor({\\n      strategy: 'phone_code',\\n      code,\\n    })\\n\\n    // Now that the user is created, set the session to active.\\n    await clerk.setActive({ session: verify.createdSessionId })\\n  } catch (error) {\\n    // See https://clerk.com/docs/custom-flows/error-handling\\n    // for more info on error handling\\n    console.error(error)\\n  }\\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Vue\nDESCRIPTION: This snippet demonstrates how to use the SignUp component in a Vue application. It imports the SignUp component from @clerk/vue and renders it in the template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_7\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignUp } from '@clerk/vue'\n</script>\n\n<template>\n  <SignUp />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in React\nDESCRIPTION: This code shows how to apply appearance variables to all instances of the SignIn component in a React application by configuring the ClerkProvider in app.tsx. It also handles environment variable validation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        signIn: {\n          variables: {\n            colorPrimary: 'blue',\n            colorText: 'black',\n          },\n        },\n      }}\n      publishableKey={clerkPubKey}\n    >\n      <div>Hello from clerk</div>\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationMemberships pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for User.getOrganizationMemberships where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Signing Out Active Session in React with Clerk\nDESCRIPTION: This React snippet shows how to sign out the active session using the useClerk hook and the session ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_9\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-react'\n\n// Get the signOut method and the active session\nconst { signOut, session } = useClerk()\n\n// Use signOut to sign-out the active session\nawait signOut(session.id)\n```\n\n----------------------------------------\n\nTITLE: Connecting and Managing External OAuth Accounts - Clerk JavaScript - JavaScript\nDESCRIPTION: Manages the flow for adding an external OAuth account (Notion) as a social connection for the user with Clerk's JavaScript SDK. Requires '@clerk/clerk-js' and a valid publishable key. Inputs are user clicks and existing session state; outputs include redirecting the browser for OAuth and updating HTML elements with verification status. Handles initialization, event-driven actions, and error reporting.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\\n\\n// Initialize Clerk with your Clerk Publishable Key\\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\\n\\nconst clerk = new Clerk(pubKey)\\nawait clerk.load()\\n\\nif (clerk.user) {\\n  // Find the external account for the provider\\n  const externalAccount = clerk.user.externalAccounts.find((p) => p.provider === 'notion')\\n  // If the external account exists, display its status\\n  document.getElementById('notion-status').innerHTML = externalAccount.verification.status\\n\\n  // When the button is clicked, initiate the connection with the provider\\n  document.getElementById('add-notion').addEventListener('click', async () => {\\n    clerk.user\\n      .createExternalAccount({ strategy: 'oauth_notion', redirect_url: '/' })\\n      .then((externalAccount) => {\\n        window.location.href = externalAccount.verification.externalVerificationRedirectURL\\n      })\\n      .catch((error) => {\\n        console.log('An error occurred:', error.errors)\\n      })\\n  })\\n} else {\\n  document.getElementById('app').innerHTML = `\\n    <div id=\\\"sign-in\\\"></div>\\n  `\\n\\n  const signInDiv = document.getElementById('sign-in')\\n\\n  clerk.mountSignIn(signInDiv)\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoading in Next.js Pages Router\nDESCRIPTION: Example of using ClerkLoading and ClerkLoaded components in Next.js Pages Router. Shows how to implement loading state handling in the traditional Pages Router format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loading.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded, ClerkLoading } from '@clerk/nextjs'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Page() {\n  return (\n    <>\n      <ClerkLoading>\n        <p>Clerk is loading</p>\n      </ClerkLoading>\n      <ClerkLoaded>\n        <p>Clerk has loaded</p>\n      </ClerkLoaded>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional UserButton Menu Items in Vue\nDESCRIPTION: Shows how to implement conditional rendering of UserButton menu items in Vue using the useAuth composable and computed properties for permission checking.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_14\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton, useAuth } from '@clerk/vue'\nimport { computed } from 'vue'\n\nconst { has, isLoaded } = useAuth()\n\nconst isAdmin = computed(() => has.value?.({ permission: 'org:app:admin' }))\n</script>\n\n<template>\n  <header v-if=\"isLoaded && isAdmin\">\n    <UserButton>\n      <UserButton.MenuItems>\n        <UserButton.Link label=\"Create organization\" href=\"/create-organization\">\n          <template #labelIcon>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n              <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n            </svg>\n          </template>\n        </UserButton.Link>\n      </UserButton.MenuItems>\n    </UserButton>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing Membership Requests Component in Next.js\nDESCRIPTION: A React component that uses the useOrganization hook to display and manage organization membership requests. Includes pagination and request handling functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-membership-requests.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n'use client'\n\nimport { useOrganization } from '@clerk/nextjs'\n\nexport const MembershipRequestsParams = {\n  membershipRequests: {\n    pageSize: 5,\n    keepPreviousData: true,\n  },\n}\n\n// List of organization membership requests.\nexport const MembershipRequests = () => {\n  const { isLoaded, membershipRequests } = useOrganization(MembershipRequestsParams)\n\n  if (!isLoaded) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <h1>Membership requests</h1>\n      <table>\n        <thead>\n          <tr>\n            <th>User</th>\n            <th>Date requested</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {membershipRequests?.data?.map((mem) => (\n            <tr key={mem.id}>\n              <td>{mem.publicUserData.identifier}</td>\n              <td>{mem.createdAt.toLocaleDateString()}</td>\n              <td>\n                <button\n                  onClick={async () => {\n                    await mem.accept()\n                  }}\n                >\n                  Accept\n                </button>\n                <button\n                  onClick={async () => {\n                    await mem.reject()\n                  }}\n                >\n                  Reject\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div>\n        <button\n          disabled={!membershipRequests?.hasPreviousPage || membershipRequests?.isFetching}\n          onClick={() => membershipRequests?.fetchPrevious?.()}\n        >\n          Previous\n        </button>\n\n        <button\n          disabled={!membershipRequests?.hasNextPage || membershipRequests?.isFetching}\n          onClick={() => membershipRequests?.fetchNext?.()}\n        >\n          Next\n        </button>\n      </div>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Vue\nDESCRIPTION: This snippet demonstrates how to configure appearance variables for all SignIn components in a Vue application by passing options to the clerkPlugin during app initialization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_12\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    signIn: {\n      variables: {\n        colorPrimary: 'blue',\n        colorText: 'black',\n      },\n    },\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Testing Phone Number Sign-Up with Clerk in React/JSX\nDESCRIPTION: This asynchronous function shows how to test the phone number sign-up flow using Clerk's `useSignUp` hook in a React/JSX application. It creates a sign-up attempt with a test phone number (`+12015550100`), prepares the phone number verification step, and attempts the verification using the fixed test code `424242`. It logs 'success' if the phone number verification status is 'verified', otherwise 'error'. This simulation requires Clerk's test mode to be active.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/test-emails-and-phones.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nconst testSignUpWithPhoneNumber = async () => {\n  const { signUp } = useSignUp()\n\n  await signUp.create({\n    phoneNumber: '+12015550100',\n  })\n  await signUp.preparePhoneNumberVerification()\n\n  const res = await signUp.attemptPhoneNumberVerification({\n    code: '424242',\n  })\n  if (res.verifications.phoneNumber.status == 'verified') {\n    console.log('success')\n  } else {\n    console.log('error')\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using redirectToSignIn with Options in Clerk SDK\nDESCRIPTION: Example of using the redirectToSignIn method with custom redirect URLs for sign-in and sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectToSignIn({\n  signInForceRedirectUrl: '/dashboard',\n  signUpForceRedirectUrl: '/dashboard',\n})\n```\n\n----------------------------------------\n\nTITLE: Adding clerkMiddleware for Authentication State - TypeScript\nDESCRIPTION: This TypeScript snippet creates a middleware file to inject Clerk middleware into an Astro project, enabling global access to user authentication state. '@clerk/astro/server' must be installed. It exports an onRequest constant set to the result of clerkMiddleware(), which can later be extended for route-specific protection.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/astro/server'\n\nexport const onRequest = clerkMiddleware()\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoading in Expo\nDESCRIPTION: Implementation of ClerkLoading component in an Expo/React Native application using @clerk/clerk-expo package. Shows how to handle loading states in a mobile context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loading.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoading, ClerkLoaded } from '@clerk/clerk-expo'\nimport { Text, View } from 'react-native'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Screen() {\n  return (\n    <View>\n      <ClerkLoading>\n        <Text>Clerk is loading</Text>\n      </ClerkLoading>\n      <ClerkLoaded>\n        <Text>Clerk has loaded</Text>\n      </ClerkLoaded>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Remix `<SignedIn>` usage example with React Router\nDESCRIPTION: Demonstrates the use of `<SignedIn>` within a Remix app, showing how to render content exclusively for signed-in users alongside always visible elements. It imports from `@clerk/remix` and structures the component accordingly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { SignedIn, UserButton } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <p>You are signed in</p>\n      </SignedIn>\n      <p>Always visible</p>\n    </div>\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Using Redirect Components in React\nDESCRIPTION: Various redirect components mentioned throughout the documentation for navigating to different Account Portal pages: RedirectToSignIn, RedirectToSignUp, RedirectToUserProfile, RedirectToCreateOrganization, and RedirectToOrganizationProfile.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<RedirectToSignIn />\n<RedirectToSignUp />\n<RedirectToUserProfile />\n<RedirectToCreateOrganization />\n<RedirectToOrganizationProfile />\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Action to UserButton in Vue\nDESCRIPTION: This Vue example demonstrates how to add a custom 'Open chat' action to the UserButton component. It includes a custom icon and a click handler defined in the script section.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_3\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton } from '@clerk/vue'\n\nfunction openChat() {\n  alert('init chat')\n}\n</script>\n\n<template>\n  <header>\n    <UserButton>\n      <UserButton.MenuItems>\n        <UserButton.Action label=\"Open chat\" @click=\"openChat\">\n          <template #labelIcon>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n              <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n            </svg>\n          </template>\n        </UserButton.Action>\n      </UserButton.MenuItems>\n    </UserButton>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Accessing Nonce via Next.js Headers (TSX)\nDESCRIPTION: Demonstrates how to retrieve the nonce value generated by the strict CSP middleware using the `headers()` function provided by Next.js. The nonce, available via the `x-nonce` header, can then be applied to inline or external custom script tags (`<script nonce={nonce}>`) to comply with the strict CSP.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_3\n\nLANGUAGE: TSX\nCODE:\n```\nimport { headers } from 'next/headers'\n\nexport default function Page() {\n  const nonce = headers().get('x-nonce')\n\n  return (\n    <div>\n      <script nonce={nonce} src=\"/custom-script.js\" />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Hiding Personal Accounts in Clerk OrganizationList - TypeScript\nDESCRIPTION: This snippet demonstrates how to hide a user's personal account in the <OrganizationList /> UI component by passing the hidePersonal prop. The component receives organization data and will not render the user's personal account if hidePersonal is set to true. Requires @clerk/nextjs and organization support to be enabled in the Clerk instance. Input: none, Output: <OrganizationList /> React component with personal accounts hidden.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TSX\nCODE:\n```\nexport default function Page() {\n  return (\n    <OrganizationList\n      // prettier-ignore\n      hidePersonal={true}\n    />\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Running TanStack React Start Development Server (bun)\nDESCRIPTION: This command uses Bun, a fast all-in-one JavaScript toolkit, to start the development server for the TanStack React Start application. Executing `bun dev` runs the development script configured in the project's `package.json`, making the application accessible locally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Infinite Pagination for Organizations in Next.js\nDESCRIPTION: A Next.js client component that implements infinite pagination for organization memberships, allowing users to load additional organizations and select an active one.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganizationList } from '@clerk/nextjs'\n\nexport const JoinedOrganizations = () => {\n  const { isLoaded, setActive, userMemberships } = useOrganizationList({\n    userMemberships: {\n      infinite: true,\n    },\n  })\n\n  if (!isLoaded) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <ul>\n        {userMemberships.data?.map((mem) => (\n          <li key={mem.id}>\n            <span>{mem.organization.name}</span>\n            <button onClick={() => setActive({ organization: mem.organization.id })}>Select</button>\n          </li>\n        ))}\n      </ul>\n\n      <button disabled={!userMemberships.hasNextPage} onClick={() => userMemberships.fetchNext()}>\n        Load more\n      </button>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Clerk Backend API Integration\nDESCRIPTION: Shows how to interact with Clerk's Backend API using clerkClient to perform user updates and other operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/endpoints.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/astro/server'\n\nexport async function POST(context) {\n  const { userId } = context.locals.auth()\n\n  if (!userId) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  const params = { firstName: 'Clerk', lastName: 'Cookie' }\n\n  const user = await clerkClient(context).users.updateUser(userId, params)\n\n  return new Response(JSON.stringify({ user }))\n}\n```\n\n----------------------------------------\n\nTITLE: Signing Out Active Session in JavaScript with Clerk\nDESCRIPTION: This JavaScript code demonstrates how to sign out the active session using the Clerk object and the session ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\n// Get the active session\nconst activeSession = window.Clerk.session\n\n// Use signOut to sign-out the active session\nawait window.Clerk.signOut(activeSession.id)\n```\n\n----------------------------------------\n\nTITLE: Mounting SignIn Component with JavaScript\nDESCRIPTION: This snippet demonstrates how to use the mountSignIn method to render the SignIn component to an HTML div element in a JavaScript application using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-in\"></div>\n`\n\nconst signInDiv = document.getElementById('sign-in')\n\nclerk.mountSignIn(signInDiv)\n```\n\n----------------------------------------\n\nTITLE: GetToken Type Definition\nDESCRIPTION: TypeScript type definitions for the getToken method and its options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst getToken: ServerGetToken\n\ntype ServerGetToken = (options?: ServerGetTokenOptions) => Promise<string | null>\n\ntype ServerGetTokenOptions = {\n  template?: string // The name of the custom JWT template to retrieve.\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Proxy in Next.js Middleware\nDESCRIPTION: Next.js middleware configuration for proxying requests to Clerk's Frontend API. It includes the middleware function and export configuration for matching routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { NextResponse } from 'next/server'\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware((auth, req) => {\n  if (req.nextUrl.pathname.match('__clerk')) {\n    const proxyHeaders = new Headers(req.headers)\n    proxyHeaders.set('Clerk-Proxy-Url', process.env.NEXT_PUBLIC_CLERK_PROXY_URL || '')\n    proxyHeaders.set('Clerk-Secret-Key', process.env.CLERK_SECRET_KEY || '')\n    if (req.ip) {\n      proxyHeaders.set('X-Forwarded-For', req.ip)\n    } else {\n      proxyHeaders.set('X-Forwarded-For', req.headers.get('X-Forwarded-For') || '')\n    }\n\n    const proxyUrl = new URL(req.url)\n    proxyUrl.host = 'frontend-api.clerk.dev'\n    proxyUrl.port = '443'\n    proxyUrl.protocol = 'https'\n    proxyUrl.pathname = proxyUrl.pathname.replace('/__clerk', '')\n\n    return NextResponse.rewrite(proxyUrl, {\n      request: {\n        headers: proxyHeaders,\n      },\n    })\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes AND anything passed through the proxy\n    '/(api|trpc|__clerk)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Replacing getPendingInvitations with getInvitations in Clerk SDK\nDESCRIPTION: Migration example for the deprecated Organization.getPendingInvitations method, which has been replaced with the more flexible Organization.getInvitations method that accepts a status filter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getPendingInvitations()\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Vue\nDESCRIPTION: This snippet shows how to customize a specific SignIn component in a Vue application by passing appearance properties directly to the component using the Vue binding syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_19\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignIn } from '@clerk/vue'\n</script>\n\n<template>\n  <SignIn :appearance=\"{ colorPrimary: 'blue', colorText: 'black' }\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Invitation using cURL\nDESCRIPTION: This snippet demonstrates how to send a POST request to the Clerk Backend API using cURL to create a new user invitation. It requires specifying the target email address in the JSON payload and providing the Clerk Secret Key via the Authorization header for authentication. The Content-Type header must be set to application/json.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://api.clerk.com/v1/invitations -X POST -d '{\"email_address\": \"email@example.com\"}' -H \"Authorization:Bearer {{secret}}\" -H 'Content-Type:application/json'\n```\n\n----------------------------------------\n\nTITLE: Defining revokeSignInToken Function in TypeScript\nDESCRIPTION: Function signature for revokeSignInToken, which takes a signInTokenId as a string parameter and returns a Promise resolving to a SignInToken object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sign-in-tokens/revoke-sign-in-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revokeSignInToken(signInTokenId: string): Promise<SignInToken>\n```\n\n----------------------------------------\n\nTITLE: Expo Enterprise SSO Implementation\nDESCRIPTION: Complete implementation of enterprise SSO authentication flow in Expo, including browser warming, session handling, and error management. Supports SAML but not OIDC.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/enterprise-connections.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport React, { useEffect, useState } from 'react'\nimport * as WebBrowser from 'expo-web-browser'\nimport * as AuthSession from 'expo-auth-session'\nimport { useSSO } from '@clerk/clerk-expo'\nimport { View, Button, TextInput } from 'react-native'\n\nexport const useWarmUpBrowser = () => {\n  useEffect(() => {\n    void WebBrowser.warmUpAsync()\n    return () => {\n      void WebBrowser.coolDownAsync()\n    }\n  }, [])\n}\n\nWebBrowser.maybeCompleteAuthSession()\n\nexport default function Page() {\n  useWarmUpBrowser()\n\n  const [email, setEmail] = useState('')\n  const { startSSOFlow } = useSSO()\n\n  const onPress = async () => {\n    try {\n      const { createdSessionId, setActive, signIn, signUp } = await startSSOFlow({\n        strategy: 'enterprise_sso',\n        identifier: email,\n        redirectUrl: AuthSession.makeRedirectUri(),\n      })\n\n      if (createdSessionId) {\n        setActive!({ session: createdSessionId })\n      }\n    } catch (err) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }\n\n  return (\n    <View>\n      <TextInput\n        value={email}\n        onChangeText={setEmail}\n        placeholder=\"Enter email\"\n        placeholderTextColor=\"#666666\"\n      />\n      <Button title=\"Sign in with SAML\" onPress={onPress} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: EmailLinkError Code Constants in Clerk\nDESCRIPTION: EmailLinkError is a custom error raised when email link verification fails. It includes error codes that indicate whether the link has expired or failed for other reasons.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-link-error.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nEmailLinkErrorCode.Expired\nEmailLinkErrorCode.Failed\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Organization Profile Link - Clerk Next.js - TypeScript\nDESCRIPTION: This snippet demonstrates how to add a custom link with a label icon to the Clerk <OrganizationSwitcher /> sidenav in a Next.js application. The custom DotIcon SVG component is used as a visual aid for the navigation link. Requires '@clerk/nextjs' as a dependency and must be used within a 'use client' file. The OrganizationSwitcher.OrganizationProfileLink is configured with 'label', 'url', and 'labelIcon' props. Inputs are the label, URL, and an icon; output is a header containing the extended organization switcher UI.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { OrganizationSwitcher } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n      <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\" />\\n    </svg>\\n  )\\n}\\n\\nconst Header = () => (\\n  <header>\\n    <OrganizationSwitcher>\\n      <OrganizationSwitcher.OrganizationProfileLink\\n        label=\\\"Homepage\\\"\\n        url=\\\"/\\\"\\n        labelIcon={<DotIcon />}\\n      />\\n    </OrganizationSwitcher>\\n  </header>\\n)\\n\\nexport default Header\n```\n\n----------------------------------------\n\nTITLE: Accessing User Information with clerkClient in Express\nDESCRIPTION: Illustrates how to use clerkClient to retrieve user information. It checks for authentication, gets the userId from the Auth object, and uses clerkClient.users.getUser() to fetch the User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/express/overview.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkClient, requireAuth } from '@clerk/express'\nimport express from 'express'\n\nconst app = express()\nconst PORT = 3000\n\napp.get('/user', async (req, res) => {\n  // Get the `userId` from the `Auth` object\n  const userId = req.auth.userId\n\n  // If user isn't authenticated, return a 401 error\n  if (!userId) {\n    res.status(401).json({ error: 'User not authenticated' })\n  }\n\n  // Use `clerkClient` to access Clerk's Backend SDK methods\n  // and get the user's User object\n  const user = await clerkClient.users.getUser(userId)\n\n  res.json(user)\n})\n\n// Start the server and listen on the specified port\napp.listen(PORT, () => {\n  console.log(`Server is running on http://localhost:${PORT}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Using RedirectToCreateOrganization in Next.js\nDESCRIPTION: This snippet demonstrates how to use the RedirectToCreateOrganization component in a Next.js application. It wraps the component with ClerkProvider and SignedIn components for authentication control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-createorganization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToCreateOrganization } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedIn>\n        <RedirectToCreateOrganization />\n      </SignedIn>\n      <SignedOut>You need to sign in to create an organization.</SignedOut>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Unmounting OrganizationProfile with JavaScript\nDESCRIPTION: Example of how to unmount the <OrganizationProfile /> component using the Clerk JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-profile\"></div>\n`\n\nconst orgProfileDiv = document.getElementById('organization-profile')\n\nclerk.mountOrganizationProfile(orgProfileDiv)\n\n// ...\n\nclerk.unmountOrganizationProfile(orgProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Configuring Primary Domain ClerkProvider with Props\nDESCRIPTION: React component configuration for ClerkProvider in the primary domain using property-based configuration instead of environment variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  const primarySignInUrl = '/sign-in'\n  const primarySignUpUrl = '/sign-up'\n  const satelliteUrl = 'https://satellite.dev'\n\n  return (\n    <html lang=\"en\">\n      <body>\n        <ClerkProvider\n          signInUrl={primarySignInUrl}\n          signUpUrl={primarySignUpUrl}\n          allowedRedirectOrigins={[satelliteUrl]}\n        >\n          <p>Satellite Next.js app</p>\n          {children}\n        </ClerkProvider>\n      </body>\n    </html>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Import in Clerk SDK (JavaScript)\nDESCRIPTION: This snippet shows how to update the Clerk import statement in the Clerk SDK. The default import has been changed to a named import.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n```\n\n----------------------------------------\n\nTITLE: Updating Server-Side Imports in NextJS\nDESCRIPTION: Migration of server-side imports from @clerk/nextjs root to @clerk/nextjs/server to improve bundle size and tree-shaking efficiency.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n  auth,\n  currentUser,\n  authMiddleware,\n  buildClerkProps,\n  verifyToken,\n  verifyJwt,\n  decodeJwt,\n  signJwt,\n  constants,\n  redirect,\n  createAuthenticateRequest,\n  createIsomorphicRequest,\n} from '@clerk/nextjs/server'\n```\n\n----------------------------------------\n\nTITLE: Updating requireAuth Usage - Express & Clerk - TypeScript\nDESCRIPTION: This code example illustrates the migration from wrapping handlers with requireAuth (as in the Node SDK) to inserting requireAuth as Express middleware (as in Clerk's Express SDK). The major change is the use of requireAuth() before the handler, enabling redirecting unauthorized users to the sign-in page. The snippet is written in TypeScript and uses @clerk/express and Express as dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { requireAuth } from '@clerk/clerk-sdk-node'\nimport { requireAuth } from '@clerk/express'\n\napp.get('/', requireAuth(handler))\napp.get('/', requireAuth(), handler)\n```\n\n----------------------------------------\n\nTITLE: Maintenance Mode API Error Response in JSON\nDESCRIPTION: This JSON snippet shows the standard error response returned by Clerk APIs during Maintenance Mode. It includes a 503 StatusServiceUnavailable status code with a detailed error message explaining the maintenance state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/maintenance-mode.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n// 503 StatusServiceUnavailable\n{\n  \"shortMessage\": \"System under maintenance\",\n  \"longMessage\": \"We are currently undergoing maintenance and only essential operations are permitted. We will be back shortly.\",\n  \"code\": \"maintenance_mode\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Keys for Multi-Tenant Clerk Middleware in Next.js (TypeScript)\nDESCRIPTION: Demonstrates configuring `clerkMiddleware` for a multi-tenant application by dynamically providing `publishableKey` and `secretKey` based on the incoming request. The example shows resolving the tenant from the request and returning the corresponding keys, likely fetched from an external store or environment variables. This requires setting the `CLERK_ENCRYPTION_KEY` environment variable.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_12\n\nLANGUAGE: ts\nCODE:\n```\n```ts {{ filename: 'middleware.ts' }}\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\n// You would typically fetch these keys from a external store or environment variables.\nconst tenantKeys = {\n  tenant1: { publishableKey: 'pk_tenant1...', secretKey: 'sk_tenant1...' },\n  tenant2: { publishableKey: 'pk_tenant2...', secretKey: 'sk_tenant2...' },\n}\n\nexport default clerkMiddleware(\n  (auth, req) => {\n    // Add your middleware checks\n  },\n  (req) => {\n    // Resolve tenant based on the request\n    const tenant = getTenant(req)\n    return tenantKeys[tenant]\n  },\n)\n```\n```\n\n----------------------------------------\n\nTITLE: Filtering Organizations by Query in TypeScript\nDESCRIPTION: Example of using getOrganizationList with the 'query' parameter to filter organizations that have 'test' in their name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// returns organizations that have 'test' in their name\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationList({ query: 'test' })\n```\n\n----------------------------------------\n\nTITLE: Loading Clerk SDK via Script Tag (HTML)\nDESCRIPTION: Demonstrates how to include the Clerk JavaScript SDK directly in an HTML file using a `<script>` tag. The script loads asynchronously from the Clerk CDN (`{{fapi_url}}`). It requires setting the `data-clerk-publishable-key` attribute with your actual Publishable Key (`{{pub_key}}`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_8\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html' }}\n<!-- Rest of your HTML file -->\n\n<script\n  async\n  crossorigin=\"anonymous\"\n  data-clerk-publishable-key=\"{{pub_key}}\"\n  src=\"https://{{fapi_url}}/npm/@clerk/clerk-js@5/dist/clerk.browser.js\"\n  type=\"text/javascript\"\n></script>\n```\n```\n\n----------------------------------------\n\nTITLE: Rendering Loading and FieldState UI Components - Clerk Elements - JavaScript/JSX\nDESCRIPTION: This snippet references the <Loading> and <FieldState> Clerk Elements components, which are used for advanced customization and dynamic UI feedback. These components help provide loading indicators and detailed field state management within authentication flows. They require Clerk Elements as a dependency and are configurable within element-based forms for rich user interface feedback during authentication or data entry.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: JavaScript\nCODE:\n```\n<Loading />\n<FieldState />\n```\n\n----------------------------------------\n\nTITLE: Implementing UserProfile Component in React\nDESCRIPTION: Demonstrates how to use the <UserProfile /> component in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { UserProfile } from '@clerk/clerk-react'\n\nconst UserProfilePage = () => <UserProfile />\n\nexport default UserProfilePage\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkApp Options for Redirects (TypeScript)\nDESCRIPTION: Demonstrates setting up ClerkApp configuration options directly in TypeScript, specifying redirect URLs for sign-in and sign-up flows as component properties. This approach is used in single-page application (SPA) mode within Remix. Dependencies include the ClerkApp function, your main App component, and a valid PUBLISHABLE_KEY. Parameters such as signInUrl, signInFallbackRedirectUrl, and signUpFallbackRedirectUrl are required for matching authentication routes. Outputs the wrapped ClerkApp component with custom redirect behavior.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default ClerkApp(App, {\n  publishableKey: PUBLISHABLE_KEY,\n  signInUrl: '/sign-in',\n  signInFallbackRedirectUrl: '/',\n  signUpFallbackRedirectUrl: '/',\n})\n```\n\n----------------------------------------\n\nTITLE: Creating External Accounts in ClerkJS\nDESCRIPTION: Adds an external account for the user, creating a new ExternalAccount associated with the user. This allows a signed-in user to connect their account with external providers like Facebook or GitHub.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createExternalAccount(params: CreateExternalAccountParams): Promise<ExternalAccount>\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getOrganizationList Return Type in JavaScript\nDESCRIPTION: Shows how the return type of Organization.getOrganizationList has changed. Instead of returning an array directly, it now returns an object with data array and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\n\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk SignIn Component in TanStack Router Route (TSX)\nDESCRIPTION: This TSX code snippet demonstrates how to create a dedicated sign-in/sign-up page in a TanStack React Start application. It utilizes `createFileRoute` from TanStack Router to define a catch-all route (`/sign-in/$`) and renders the `SignIn` component provided by `@clerk/tanstack-react-start` within that route's component. This setup allows users to both sign in and sign up through the same component flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes/sign-in.$.tsx' }}\nimport { SignIn } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-in/$')({\n  component: Page,\n})\n\nfunction Page() {\n  return <SignIn />\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Handling Reverification for Route Handler with Clerk in Next.js (TypeScript)\nDESCRIPTION: This example shows how to set up client-side reverification for a POST request in a Next.js page using the useReverification hook from @clerk/nextjs. The transferMoney function wraps a fetch call to a custom API endpoint; if reverification is required, Clerk handles the modal UI and retries the request after successful verification. The component expects an amount_in_cents prop. Dependencies: @clerk/nextjs, custom reverification API route. Inputs: amount_in_cents prop; Outputs: reverified POST request on button click.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { useReverification } from '@clerk/nextjs'\\n\\nexport default function Page({ amount_in_cents }: { amount_in_cents: number }) {\\n  const transferMoney = useReverification(\\n    async () =>\\n      await fetch('/api/reverification-example', {\\n        method: 'POST',\\n        body: JSON.stringify({ amount_in_cents }),\\n      }),\\n  )\\n\\n  return <button onClick={transferMoney}>Transfer</button>\\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring OrganizationSwitcher for Slug-based Navigation - Clerk - TypeScript\nDESCRIPTION: Demonstrates the integration of Clerk's OrganizationSwitcher React component to handle organization slugs in the application URL, allowing customization of organization slugs, inclusion of personal accounts, and specifying redirect URLs after actions such as creating or selecting an organization. Requires Next.js, Clerk's Next.js SDK, and support for React components. Key props include hideSlug, hidePersonal, afterCreateOrganizationUrl, afterSelectOrganizationUrl, and afterSelectPersonalUrl. The component expects the presence of the Clerk provider and user session context; outputs navigation/redirection based on user interaction.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { OrganizationSwitcher } from '@clerk/nextjs'\n\nexport default function Header() {\n  return (\n    <OrganizationSwitcher\n      hideSlug={false} // Allow users to customize the org's URL slug\n      hidePersonal={false} // Allow users to select their personal account\n      afterCreateOrganizationUrl=\"/orgs/:slug\" // Navigate to the org's slug after creating an org\n      afterSelectOrganizationUrl=\"/orgs/:slug\" // Navigate to the org's slug after selecting  it\n      afterSelectPersonalUrl=\"/me\" // Navigate to the personal account after selecting it\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing ClerkProvider in Root Layout (TypeScript/TSX)\nDESCRIPTION: Wraps the application's root component (`Slot` from `expo-router`) with the `ClerkProvider` component from `@clerk/clerk-expo`. This initializes Clerk within the application, making authentication context available throughout the component tree. Requires the Clerk Publishable Key to be set as an environment variable.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/clerk-expo'\nimport { Slot } from 'expo-router'\n\nexport default function RootLayout() {\n  return (\n    <ClerkProvider>\n      <Slot />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Combining clerkMiddleware() with Other Middlewares in Next.js\nDESCRIPTION: This snippet illustrates how to combine clerkMiddleware() with other middlewares, specifically next-intl for internationalization. It shows how to call other middlewares inside clerkMiddleware(), providing more direct control over the execution order.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport createMiddleware from 'next-intl/middleware'\n\nconst intlMiddleware = createMiddleware({\n  locales: ['en', 'de'],\n  defaultLocale: 'en',\n})\n\nconst isDashboardRoute = createRouteMatcher(['/dashboard(.*)'])\n\nexport default clerkMiddleware(async (auth, request) => {\n  if (isDashboardRoute(request)) await auth.protect()\n\n  return intlMiddleware(request)\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Remix\nDESCRIPTION: This snippet shows how to customize a specific SignIn component instance in a Remix application by directly setting appearance variables only for that component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/remix'\n\nexport default function SignInPage() {\n  return (\n    <div style={{ border: '2px solid blue', padding: '2rem' }}>\n      <h1>Sign In route</h1>\n      <SignIn\n        appearance={{\n          variables: {\n            colorPrimary: 'blue',\n            colorText: 'black',\n          },\n        }}\n      />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Wrapping the Application with ClerkProvider in TypeScript\nDESCRIPTION: This TypeScript code snippet shows how to wrap the root React component (`App`) with the `ClerkProvider` component from `@clerk/clerk-react` in `src/main.tsx`. The `publishableKey` prop is required and is set using the imported environment variable. The `afterSignOutUrl` prop redirects the user to the homepage after signing out.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY} afterSignOutUrl=\"/\">\n      <App />\n    </ClerkProvider>\n  </React.StrictMode>,\n)\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in Organization.getRoles\nDESCRIPTION: Demonstration of pagination argument changes in Organization.getRoles method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Using rootAuthLoader() with a Callback for Custom Data Loading (TSX)\nDESCRIPTION: Illustrates how to pass a callback function to `rootAuthLoader()`. This allows developers to perform custom data fetching logic within the route loader while having access to the Clerk authentication context (like `sessionId`, `userId`, `getToken`) provided via the callback's arguments.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/root-auth-loader.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/root.tsx' }}\nimport { rootAuthLoader } from '@clerk/react-router/ssr.server'\nimport type { Route } from './+types/root'\n\nexport async function loader(args: Route.LoaderArgs) {\n  return rootAuthLoader(args, ({ req, context, params }) => {\n    const { sessionId, userId, getToken } = req.auth\n    // Add logic to fetch data\n    return { yourData: 'here' }\n  })\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Reloading User Data - Clerk TypeScript\nDESCRIPTION: Defines the reload method which refreshes the user's data from the Clerk API, returning a promise resolved to the user instance (this). Optionally accepts ClerkResourceReloadParams, such as a rotatingTokenNonce for advanced token flow scenarios.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_24\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction reload(p?: ClerkResourceReloadParams): Promise<this>\n```\n\n----------------------------------------\n\nTITLE: Configuring Convex Authentication with Clerk Issuer Domain\nDESCRIPTION: Creates a Convex authentication configuration file that specifies Clerk as the authentication provider. The domain should be replaced with your specific Clerk issuer URL copied from the JWT template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/convex.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  providers: [\n    {\n      domain: 'https://your-issuer-url.clerk.accounts.dev/',\n      applicationID: 'convex',\n    },\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing JwtPayload Claims with getAuth in Next.js and @clerk/ssr.server - TypeScript\nDESCRIPTION: These TypeScript snippets illustrate how to use the getAuth function from @clerk/nextjs/server and @clerk/ssr.server to retrieve sessionClaims from an authenticated request. This is relevant to the removal of the 'orgs' claim in JWTs in Core 2; claims now expose only the current org_id, org_slug, and org_role. Dependencies: Next.js, Clerk SDK, TypeScript. Key parameter: request object. Expected input: HTTP request. Output: JwtPayload object containing session claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Clerk `ApplicationAlreadyBelongsToUser` Error (JSON)\nDESCRIPTION: Represents the JSON error response when an attempt is made to associate an application with a user it already belongs to. This prevents redundant association operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already belongs to user\",\n  \"longMessage\": \"Application already belongs to the given user.\",\n  \"code\": \"application_already_belongs_to_user_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Organization Information Client-Side in Next.js\nDESCRIPTION: This TypeScript React component shows how to access organization information on the client-side using the useOrganization hook from Clerk. It verifies the organization slug and displays either a welcome message or an organization list.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { OrganizationList, useOrganization } from '@clerk/nextjs'\n\nexport default function Home({ params }: { params: { slug: string } }) {\n  const { organization } = useOrganization()\n\n  if (!organization || organization.slug != params.slug) {\n    return (\n      <>\n        <p>Sorry, organization {params.slug} is not valid.</p>\n        <OrganizationList\n          hidePersonal={false}\n          hideSlug={false}\n          afterCreateOrganizationUrl=\"/orgs/:slug\"\n          afterSelectOrganizationUrl=\"/orgs/:slug\"\n          afterSelectPersonalUrl=\"/me\"\n        />\n      </>\n    )\n  }\n\n  // Access the organization name from the organization object\n  return <div>{organization && `Welcome to organization ${organization.name}`}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Chrome Extension SDK using yarn\nDESCRIPTION: Installs the latest version of the `@clerk/chrome-extension` SDK using the yarn package manager to upgrade to Core 2 (version 1+).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/chrome-extension\n```\n\n----------------------------------------\n\nTITLE: Setting Chrome Extension Public Key for Published Extension\nDESCRIPTION: Creates an environment file to store the Chrome Extension public key for extensions already published to the Chrome Developer Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/configure-consistent-crx-id.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nCRX_PUBLIC_KEY=<YOUR_PUBLIC_KEY>\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Astro Config\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in an Astro configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_5\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\nimport { dark } from '@clerk/themes'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        baseTheme: dark,\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Clerk `ApplicationAlreadyBelongsToOrganization` Error (JSON)\nDESCRIPTION: Represents the JSON error response when an attempt is made to move an application to an organization it already belongs to. This prevents redundant association operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already belongs to organization\",\n  \"longMessage\": \"Application already belongs to the selected organization.\",\n  \"code\": \"application_already_belongs_to_organization_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Next.js SSO Callback Page Implementation\nDESCRIPTION: Callback page implementation for handling SSO redirect flow using Clerk's AuthenticateWithRedirectCallback component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/enterprise-connections.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { AuthenticateWithRedirectCallback } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <AuthenticateWithRedirectCallback />\n}\n```\n\n----------------------------------------\n\nTITLE: Unmounting UserProfile Component with JavaScript\nDESCRIPTION: Shows how to unmount the <UserProfile /> component using Clerk's JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-profile\"></div>\n`\n\nconst userProfileDiv = document.getElementById('user-profile')\n\nclerk.mountUserProfile(userProfileDiv)\n\n// ...\n\nclerk.unmountUserProfile(userProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Attempting Phone Verification - TypeScript Declaration\nDESCRIPTION: Method signature for verifying a phone number using the one-time code sent via SMS.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptVerification(params: AttemptPhoneNumberVerificationParams): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: DeletedObject Type Definition in TypeScript\nDESCRIPTION: Type definition showing the structure of the DeletedObject class with its core properties including object type, ID, slug, and deletion status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/deleted-object.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface DeletedObject {\n  object: string;\n  id: string | null;\n  slug: string | null;\n  deleted: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining InvalidProxyConfiguration Error (JSON)\nDESCRIPTION: JSON representation of the 'InvalidProxyConfiguration' error. This error indicates that the Clerk Frontend API is inaccessible through the configured proxy URL, suggesting an issue with the proxy setup or configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"longMessage\": \"Clerk Frontend API cannot be accessed through the proxy URL. Make sure your proxy is configured correctly.\",\n  \"code\": \"invalid_proxy_configuration_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Organization by ID Example\nDESCRIPTION: Example showing how to retrieve an organization using its ID with the Clerk Backend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst response = await clerkClient.organizations.getOrganization({ organizationId })\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Middleware Handshake Support in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates creating middleware for a fullstack Clerk SDK. It uses `clerkClient.authenticateRequest` to authenticate incoming requests and retrieve the `requestState`. The code specifically handles the Clerk handshake process by checking for headers in `requestState`, applying them to the outgoing response (`context.res.headers`), and managing redirects based on the `location` header. If the status is 'handshake' without a redirect, an error is thrown. Finally, it injects the authentication state (`clerkAuth`) and the Clerk client instance into the request context for downstream use.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/fullstack.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nimport { clerkClient as defaultClerkClient } from './client.ts'\n\nconst clerkMiddleware = (options) => {\n  return async (context, next) => {\n    const clerkClient = options.clerkClient || defaultClerkClient\n\n    const requestState = await clerkClient.authenticateRequest(context.req, {\n      authorizedParties: ['https://example.com'],\n    })\n\n    if (requestState.headers) {\n      // This adds observability headers to the res\n      requestState.headers.forEach((value, key) => context.res.headers.append(key, value))\n\n      const locationHeader = requestState.headers.get('location')\n\n      if (locationHeader) {\n        return context.redirect(locationHeader, 307)\n      } else if (requestState.status === 'handshake') {\n        throw new Error('Clerk: unexpected handshake without redirect')\n      }\n    }\n\n    context.set('clerkAuth', requestState.toAuth())\n    context.set('clerk', clerkClient)\n\n    await next()\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Vue App\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a Vue application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_6\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\nimport { dark } from '@clerk/themes'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    baseTheme: dark,\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Initializing InstantDB with Schema Definition\nDESCRIPTION: TypeScript code for initializing InstantDB with an app ID and defining a todo list schema. This establishes the connection to InstantDB and sets up the data model.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { i, init } from '@instantdb/react'\n\nconst APP_ID = process.env.NEXT_PUBLIC_INSTANTDB_APP_ID\n\nif (!APP_ID) {\n  throw new Error('Missing NEXT_PUBLIC_INSTANTDB_APP_ID in your .env file')\n}\n\n// Optional: Declare your schema\nexport const schema = i.schema({\n  entities: {\n    todos: i.entity({\n      text: i.string(),\n      done: i.boolean(),\n      createdAt: i.number(),\n    }),\n  },\n})\n\nexport const db = init({ appId: APP_ID, schema })\n```\n\n----------------------------------------\n\nTITLE: Mounting Clerk Authentication Components in JavaScript\nDESCRIPTION: This code checks the user's authentication status and mounts either a Clerk user button for authenticated users or a sign-in component for unauthenticated users. It uses Clerk's JavaScript SDK to interact with authentication components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nClerk.mountUserButton(userButtonDiv)\n```\n\nLANGUAGE: javascript\nCODE:\n```\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-in\"></div>\n`\n\nconst signInDiv = document.getElementById('sign-in')\n\nClerk.mountSignIn(signInDiv)\n```\n\n----------------------------------------\n\nTITLE: Using <OrganizationList /> with Tanstack React Start\nDESCRIPTION: Example of implementing the <OrganizationList /> component in a Tanstack React Start application. It shows how to create a route and set up the component with callback functions for URL generation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { OrganizationList } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/organizations')({\n  component: OrganizationList,\n})\n\nfunction OrganizationList() {\n  return (\n    <OrganizationList\n      afterCreateOrganizationUrl={(org) => `/organization/${org.slug}`}\n      afterSelectPersonalUrl={(user) => `/user/${user.id}`}\n      afterSelectOrganizationUrl={(org) => `/organization/${org.slug}`}\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification in Hono Framework\nDESCRIPTION: This example demonstrates how to implement reverification in a Hono API route using the `reverificationError` utility. It returns a JSON response with the reverification error for a POST request route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Hono } from 'hono'\n\nconst app = new Hono()\n\n// POST request route\napp.post('/api/hello', async (c) => {\n  return c.json(reverificationError('strict'))\n})\n```\n\n----------------------------------------\n\nTITLE: Astro `<SignedIn>` component usage example\nDESCRIPTION: Provides an example of conditional rendering for authenticated users within an Astro framework, importing `<SignedIn>` from `@clerk/astro/components` and wrapping content to show only when a user is signed in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-in.mdx#_snippet_5\n\nLANGUAGE: TypeScript\nCODE:\n```\n---\nimport { SignedIn } from '@clerk/astro/components'\n---\n\n<SignedIn>\n  <div>You are signed in</div>\n</SignedIn>\n<p>This content is always visible.</p>\n\n```\n\n----------------------------------------\n\nTITLE: Using Path Routing for Clerk UI Components (JSX)\nDESCRIPTION: Demonstrates the required usage of the `path` prop for Clerk UI components (`SignIn`, `SignUp`, `UserProfile`, `CreateOrganization`, `OrganizationProfile`) in Core 2. Path routing (`routing='path'`) is now the default, so the component's mount path must be specified via the `path` prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\n```jsx {{ prettier: false }}\n<SignIn path=\"/sign-in\" />\n<SignUp path=\"/sign-up\" />\n<UserProfile path=\"/user-profile\" />\n<CreateOrganization path=\"/create-org\" />\n<OrganizationProfile path=\"/org-profile\" />\n```\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using pnpm - Bash\nDESCRIPTION: Adds or updates react and react-dom to their latest versions using pnpm to comply with Clerk SDK minimum requirements. This command is intended for projects using pnpm as a package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk UI Localization Strings in JavaScript/JSON\nDESCRIPTION: A comprehensive configuration object containing localization strings for Clerk's authentication UI. It includes text for sign-up flows, sign-in processes, user profile management, multi-factor authentication, organization switching, and organization management interfaces.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/component-redesign.mdx#2025-04-23_snippet_3\n\nLANGUAGE: JavaScript\nCODE:\n```\n{\n        continue: {\n          subtitle: 'Please fill in the remaining details to continue.',\n          actionText: 'Already have an account?',\n        },\n      },\n      signIn: {\n        start: {\n          title: 'Sign in to {{applicationName}}',\n          subtitle: 'Welcome back! Please sign in to continue',\n          actionText: 'Don't have an account?',\n        },\n        password: {\n          subtitle: 'Enter the password associated with your account',\n        },\n        forgotPasswordAlternativeMethods: {\n          label__alternativeMethods: 'Or, sign in with another method',\n        },\n        resetPassword: {\n          title: 'Set new password',\n        },\n        phoneCodeMfa: {\n          subtitle: 'To continue, please enter the verification code sent to your phone',\n        },\n        totpMfa: {\n          subtitle:\n            'To continue, please enter the verification code generated by your authenticator app',\n        },\n        backupCodeMfa: {\n          subtitle: 'Your backup code is the one you got when setting up two-step authentication.',\n        },\n      },\n      userProfile: {\n        start: {\n          headerTitle__account: 'Profile details',\n          emailAddressesSection: {\n            primaryButton: 'Add email address',\n            detailsAction__unverified: 'Verify',\n            destructiveAction: 'Remove email',\n          },\n          phoneNumbersSection: {\n            primaryButton: 'Add phone number',\n          },\n          mfaSection: {\n            phoneCode: {\n              destructiveActionLabel: 'Remove',\n            },\n            backupCodes: {\n              actionLabel__regenerate: 'Regenerate',\n            },\n          },\n          dangerSection: {\n            title: 'Delete account',\n            deleteAccountButton: 'Delete account',\n          },\n        },\n        profilePage: {\n          imageFormSubtitle: 'Upload',\n          imageFormDestructiveActionSubtitle: 'Remove',\n          fileDropAreaHint: 'Recommended size 1:1, up to 10MB.',\n        },\n        phoneNumberPage: {\n          infoText:\n            'A text message containing a verification code will be sent to this phone number. Message and data rates may apply.',\n        },\n        connectedAccountPage: {\n          socialButtonsBlockButton: '{{provider|titleize}}',\n        },\n        mfaPhoneCodePage: {\n          primaryButton__addPhoneNumber: 'Add phone number',\n          subtitle__availablePhoneNumbers:\n            'Select an existing phone number to register for SMS code two-step verification or add a new one.',\n          subtitle__unavailablePhoneNumbers:\n            'There are no available phone numbers to register for SMS code two-step verification, please add a new one.',\n        },\n        deletePage: {\n          actionDescription: \"Type 'Delete account' below to continue.\",\n        },\n      },\n      organizationSwitcher: {\n        action__createOrganization: 'Create organization',\n        action__manageOrganization: 'Manage',\n      },\n      organizationProfile: {\n        profilePage: {\n          title: 'Update Profile',\n          dangerSection: {\n            leaveOrganization: {\n              actionDescription: \"Type '{{organizationName}}' below to continue.\",\n            },\n            deleteOrganization: {\n              actionDescription: \"Type '{{organizationName}}' below to continue.\",\n            },\n          },\n        },\n        invitePage: {\n          title: 'Invite new members',\n          subtitle: 'Enter or paste one or more email addresses, separated by spaces or commas.',\n        },\n      },\n      createOrganization: {\n        title: 'Create organization',\n      },\n      organizationList: {\n        title: 'Choose an account',\n        titleWithoutPersonal: 'Choose an organization',\n      },\n    }\n```\n\n----------------------------------------\n\nTITLE: Updating Session Management in JavaScript\nDESCRIPTION: This snippet demonstrates the replacement of setSession with setActive. The new function takes an object with session, organization, and beforeEmit properties, allowing for more flexible session and organization management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nawait setSession('sessionID', () => void)\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setSession(sessionObj)\nawait setActive({ session: sessionObj })\n\nawait setSession(sessionObj, () => void)\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\n\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk after CDN Load (HTML/JavaScript)\nDESCRIPTION: Shows how to ensure Clerk is initialized after the SDK script has loaded from the CDN. An event listener waits for the `window 'load'` event, then asynchronously calls `Clerk.load()` to complete the initialization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_9\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html' }}\n<!-- Rest of your HTML file -->\n\n<script>\n  window.addEventListener('load', async function () {\n    await Clerk.load()\n\n    console.log('ClerkJS is loaded')\n  })\n</script>\n```\n```\n\n----------------------------------------\n\nTITLE: Signing Out All Sessions in React with Clerk\nDESCRIPTION: This React snippet demonstrates how to sign out all active sessions using the useClerk hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-react'\n\nconst { signOut, session } = useClerk()\n\n// Use signOut to sign-out all active sessions.\nawait signOut()\n```\n\n----------------------------------------\n\nTITLE: Using unbanUser Function Example\nDESCRIPTION: Example showing how to use the unbanUser method with the Clerk client to unban a specific user using their ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/unban-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.unbanUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Organization Membership Private Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing private metadata for organization memberships with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationMembershipPrivateMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying TOTP Setup - Clerk JavaScript\nDESCRIPTION: Illustrates verifying a user's TOTP authenticator app by providing a code to the verifyTOTP method in JavaScript. Successful validation returns a TOTPResource object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_35\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.verifyTOTP({ code: '123456' })\n```\n\n----------------------------------------\n\nTITLE: Using UserButton Component in JSX\nDESCRIPTION: Example of how to use the <UserButton /> component in a React application. This snippet demonstrates the basic usage of the component without any custom properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Implementing UserProfile Component in Vue\nDESCRIPTION: Shows how to use the <UserProfile /> component in a Vue application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { UserProfile } from '@clerk/vue'\n</script>\n\n<template>\n  <UserProfile />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Navigating with ClerkJS - JavaScript Usage Example\nDESCRIPTION: Shows how to programmatically navigate to a specific path in JavaScript using Clerk's `navigate` method. The example, `await clerk.navigate('/dashboard')`, demonstrates routing to `/dashboard` and awaiting navigation completion for smoother flows. Requires Clerk's navigation helpers to be available and properly configured.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.navigate('/dashboard')\n```\n\n----------------------------------------\n\nTITLE: Renaming User Passkeys with Clerk API in React\nDESCRIPTION: This code snippet demonstrates how to rename a user's passkey using the Clerk API. It uses the useUser hook to access the user's passkeys and calls the update method on the selected passkey object to change its name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/passkeys.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nexport function RenamePasskeyUI() {\n  const { user } = useUser()\n  const { passkeys } = user\n\n  const passkeyToUpdateId = useRef<HTMLInputElement>(null)\n  const newPasskeyName = useRef<HTMLInputElement>(null)\n  const [success, setSuccess] = useState(false)\n\n  const renamePasskey = async () => {\n    try {\n      const passkeyToUpdate = passkeys?.find(\n        (pk: PasskeyResource) => pk.id === passkeyToUpdateId.current?.value,\n      )\n\n      await passkeyToUpdate?.update({\n        name: newPasskeyName.current?.value,\n      })\n\n      setSuccess(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n      setSuccess(false)\n    }\n  }\n\n  return (\n    <>\n      <p>Passkeys:</p>\n      <ul>\n        {passkeys?.map((pk: PasskeyResource) => {\n          return (\n            <li key={pk.id}>\n              Name: {pk.name} | ID: {pk.id}\n            </li>\n          )\n        })}\n      </ul>\n      <input ref={passkeyToUpdateId} type=\"text\" placeholder=\"Enter the passkey ID\" />\n      <input type=\"text\" placeholder=\"Enter the passkey's new name\" ref={newPasskeyName} />\n      <button onClick={renamePasskey}>Rename passkey</button>\n      <p>Passkey updated: {success ? 'Yes' : 'No'}</p>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Theme Variables in Next.js Root Layout\nDESCRIPTION: Demonstrates how to customize theme variables globally and for specific components using ClerkProvider in Next.js root layout.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_23\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { dark, neobrutalism, shadesOfPurple } from '@clerk/themes'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: [dark, neobrutalism],\n        variables: { colorPrimary: 'blue' },\n        signIn: {\n          baseTheme: [shadesOfPurple],\n          variables: { colorPrimary: 'green' },\n        },\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting First Factor Verification in JavaScript\nDESCRIPTION: This JavaScript code demonstrates how to use the attemptFirstFactorVerification method of the Session object to verify the first authentication factor using an email code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.attemptFirstFactorVerification({\n  strategy: 'email_code',\n  code: '123456',\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Email Addresses in ClerkJS\nDESCRIPTION: Adds a new email address for the user, creating a new EmailAddress object associated with the user. Email address must be enabled as an identifier in the app's settings in the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailAddress(params: CreateEmailAddressParams): Promise<EmailAddress>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.createEmailAddress({ email: 'test@test.com' })\n```\n\n----------------------------------------\n\nTITLE: Handling Unauthenticated State with ClerkJS - TypeScript\nDESCRIPTION: Defines a TypeScript function, `handleUnauthenticated`, for addressing 401 responses by refreshing the Clerk client/session as needed. Accepts an optional `opts` object with a `broadcast` boolean parameter to control session communication. Returns a Promise that resolves after handling the unauthenticated state. Useful for maintaining valid authentication in client apps leveraging ClerkJS. Depends on the Clerk frontend SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction handleUnauthenticated(opts?: { broadcast: boolean }): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Middleware-based Session Verification in Go using Clerk\nDESCRIPTION: Demonstrates using Clerk middleware to protect HTTP routes by verifying session tokens. Uses WithHeaderAuthorization middleware to authenticate requests and access session claims from the context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/verifying-sessions.mdx#2025-04-23_snippet_0\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n  \"fmt\"\n  \"net/http\"\n\n  \"github.com/clerk/clerk-sdk-go/v2\"\n  clerkhttp \"github.com/clerk/clerk-sdk-go/v2/http\"\n  \"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\nfunc main() {\n  clerk.SetKey(\"{{secret}}\")\n\n  mux := http.NewServeMux()\n  mux.HandleFunc(\"/\", publicRoute)\n  protectedHandler := http.HandlerFunc(protectedRoute)\n  mux.Handle(\n    \"/protected\",\n    clerkhttp.WithHeaderAuthorization()(protectedHandler),\n  )\n\n  http.ListenAndServe(\":3000\", mux)\n}\n\nfunc publicRoute(w http.ResponseWriter, r *http.Request) {\n  w.Write([]byte(`{\"access\": \"public\"}`))}\n\nfunc protectedRoute(w http.ResponseWriter, r *http.Request) {\n  claims, ok := clerk.SessionClaimsFromContext(r.Context())\n  if !ok {\n    w.WriteHeader(http.StatusUnauthorized)\n    w.Write([]byte(`{\"access\": \"unauthorized\"}`))    return\n  }\n\n  usr, err := user.Get(r.Context(), claims.Subject)\n  if err != nil {\n    // handle the error\n  }\n  fmt.Fprintf(w, `{\"user_id\": \"%s\", \"user_banned\": \"%t\"}`, usr.ID, usr.Banned)\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Link to UserButton in Astro\nDESCRIPTION: This Astro snippet demonstrates how to add a 'Create organization' link to the UserButton component. It includes an SVG icon and directs users to a specific organization creation page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_8\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.MenuItems>\n      <UserButton.Link label=\"Create organization\" href=\"/create-organization\">\n        <svg\n          slot=\"label-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 512 512\"\n          fill=\"currentColor\"\n        >\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </UserButton.Link>\n    </UserButton.MenuItems>\n  </UserButton>\n</header>\n```\n\n----------------------------------------\n\nTITLE: Custom Data Loading with rootAuthLoader Callback - Clerk Remix TypeScript\nDESCRIPTION: This example demonstrates passing a callback to rootAuthLoader to perform custom data loading alongside authentication retrieval in a Remix loader. The callback receives an object with 'req', which contains authentication properties such as sessionId, userId, and getToken. The function can then implement additional logic and return custom data alongside auth state. Dependencies are Clerk for Remix and optionally other databases or APIs as used in the callback. Inputs include standard loader args and the callback function; outputs are the JSON data structure returned by the callback.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/root-auth-loader.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n// Your imports\n\nexport const loader: LoaderFunction = (args) => {\n  return rootAuthLoader(args, ({ req }) => {\n    const { sessionId, userId, getToken } = req.auth\n    // Add logic to fetch data\n    return { yourData: 'here' }\n  })\n}\n\n// The rest of your code\n```\n\n----------------------------------------\n\nTITLE: Initiating MetaMask Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithMetamask` function signature. This asynchronous function initiates an authentication flow using the MetaMask browser extension. It prompts the user to connect their Ethereum wallet and sign a message to verify ownership, returning a Promise that resolves to a SignUpResource. It accepts optional parameters of type `SignUpAuthenticateWithWeb3Params`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithMetamask(\n  params?: SignUpAuthenticateWithWeb3Params,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Protecting Routes Based on Authorization with auth().has()\nDESCRIPTION: Shows authorization-based route protection using auth().has() method. This approach provides more control over handling users without the required permissions, allowing custom logic execution before redirecting them.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isProtectedRoute = createRouteMatcher(['/admin(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { has, redirectToSignIn } = await auth()\n  // Restrict admin routes to users with specific permissions\n  if (\n    (isProtectedRoute(req) && !has({ permission: 'org:admin:example1' })) ||\n    !has({ permission: 'org:admin:example2' })\n  ) {\n    // Add logic to run if the user does not have the required permissions\n\n    return redirectToSignIn()\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getUserList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Users.getUserList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Updating Sessions.getSessionList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Sessions.getSessionList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Implementing Simple Pagination with useOrganization in React\nDESCRIPTION: Example of how to implement traditional pagination for organization memberships in React using the useOrganization hook with fetchPrevious and fetchNext helper functions to navigate between pages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useOrganization } from '@clerk/clerk-react'\n\nexport default function MemberList() {\n  const { memberships } = useOrganization({\n    memberships: {\n      keepPreviousData: true, // Persist the cached data until the new data has been fetched\n    },\n  })\n\n  if (!memberships) {\n    // Handle loading state\n    return null\n  }\n\n  return (\n    <div>\n      <h2>Organization members</h2>\n      <ul>\n        {memberships.data?.map((membership) => (\n          <li key={membership.id}>\n            {membership.publicUserData.firstName} {membership.publicUserData.lastName} &lt;\n            {membership.publicUserData.identifier}&gt; :: {membership.role}\n          </li>\n        ))}\n      </ul>\n\n      <button disabled={!memberships.hasPreviousPage} onClick={memberships.fetchPrevious}>\n        Previous page\n      </button>\n\n      <button disabled={!memberships.hasNextPage} onClick={memberships.fetchNext}>\n        Next page\n      </button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoading in React\nDESCRIPTION: Implementation of ClerkLoading component in a standard React application using @clerk/clerk-react package. Demonstrates basic loading state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loading.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded, ClerkLoading } from '@clerk/clerk-react'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Example() {\n  return (\n    <>\n      <ClerkLoading>\n        <p>Clerk is loading</p>\n      </ClerkLoading>\n      <ClerkLoaded>\n        <p>Clerk has loaded</p>\n      </ClerkLoaded>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Field Error Messages with Clerk.FieldError in TypeScript/React\nDESCRIPTION: Shows how to place <Clerk.FieldError /> inside a <Clerk.Field> context to render error messages for validation in TypeScript/React. Dependencies include an active Clerk.Field parent for correct contextual error display. No props are needed unless rendering outside a field; the message is shown inside an unstyled <span>.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">\n  <Clerk.FieldError />\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Sign-in with Clerk in React\nDESCRIPTION: Example showing how to create a sign-in page that initiates OAuth authentication flow using the useSignIn hook. The component includes a button that triggers the authentication redirect.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/custom-flows/sso-connections.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useSignIn } from \"@clerk/nextjs\";\n\nexport default function SignInPage() {\n  const { signIn, isLoaded } = useSignIn();\n  \n  if (!isLoaded) {\n    return null;\n  }\n  \n  return (\n    <button\n      onClick={() => {\n        signIn.authenticateWithRedirect({\n          strategy: \"oauth_google\",\n          redirectUrl: \"/sso-callback\",\n          redirectUrlComplete: \"/\"\n        })\n      }}\n    >\n      Sign in with Google\n    </button>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoading in Next.js App Router\nDESCRIPTION: Example of using ClerkLoading and ClerkLoaded components in Next.js App Router to handle loading states. The code shows how to display different content based on Clerk's loading status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loading.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded, ClerkLoading } from '@clerk/nextjs'\n\ndeclare global {\n  interface Window {\n    Clerk: any\n  }\n}\n\nexport default function Page() {\n  return (\n    <>\n      <ClerkLoading>\n        <p>Clerk is loading...</p>\n      </ClerkLoading>\n      <ClerkLoaded>\n        <p>Clerk has loaded</p>\n      </ClerkLoaded>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Clerk Middleware in Nuxt Server - TypeScript\nDESCRIPTION: This snippet demonstrates how to export the clerkMiddleware for use in a Nuxt application's server-side middleware stack. This setup is necessary when manual configuration is selected, after disabling automatic injection. Requires '@clerk/nuxt/server' as a dependency. No input parameters or logic; exports the middleware directly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/clerk-middleware.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nuxt/server'\\nexport default clerkMiddleware()\n```\n\n----------------------------------------\n\nTITLE: Using OTP Input Component with Auto-Submit\nDESCRIPTION: Shows how to implement a one-time passcode input field that automatically submits when all 6 digits are entered.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"code\">\n  <Clerk.Input type=\"otp\" autoSubmit />\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Redirecting to User Profile in Clerk SDK\nDESCRIPTION: Function to redirect the user to their profile page. It returns a promise that can be awaited.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_32\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectToUserProfile(): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom JWT Claims in TypeScript\nDESCRIPTION: This snippet shows how to create a custom JWT claims interface by defining it globally in a types file. It adds custom fields like firstName, primaryEmail, and metadata to the JWT session claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/custom-types.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface CustomJwtSessionClaims {\n    firstName?: string\n    primaryEmail?: string\n    metadata: {\n      onboardingComplete?: boolean\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Middleware for Satellite Domain\nDESCRIPTION: Configuration of Next.js middleware for handling authentication in a satellite application. Includes route protection and domain settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/'])\n\nconst options = {\n  isSatellite: true,\n  signInUrl: 'https://primary.dev/sign-in',\n  signUpUrl: 'https://primary.dev/sign-up',\n  domain: 'https://satellite.dev',\n}\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isPublicRoute(req)) return\n  await auth.protect()\n}, options)\n\nexport const config = {\n  matcher: [\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Variables in Nuxt App - TypeScript\nDESCRIPTION: Customizes Clerk components in a Nuxt application by adding a `clerk` property with a nested `appearance`/`variables` block to the exported configuration file. Requires the `@clerk/nuxt` Nuxt module. Variable customizations (colorPrimary, colorText) are applied globally to all Clerk UI through module configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_6\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      variables: {\n        colorPrimary: 'blue',\n        colorText: 'black',\n      },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing <OrganizationList /> in Remix\nDESCRIPTION: Example of using the <OrganizationList /> component in a Remix application. It demonstrates setting up the component with callback functions for generating URLs after various actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationList } from '@clerk/remix'\n\nexport default function OrganizationListPage() {\n  return (\n    <OrganizationList\n      afterCreateOrganizationUrl={(org) => `/organization/${org.slug}`}\n      afterSelectPersonalUrl={(user) => `/user/${user.id}`}\n      afterSelectOrganizationUrl={(org) => `/organization/${org.slug}`}\n    />\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Server-side Authentication in Astro Component\nDESCRIPTION: Shows how to validate authentication and access user data on the server side within an Astro component using auth() and currentUser() helpers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/read-session-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: astro\nCODE:\n```\n---\nif (!Astro.locals.auth().userId) {\n  return Astro.redirect('/login')\n}\n\nconst user = await Astro.locals.currentUser()\n---\n\n<div>{JSON.stringify(user)}</div>\n```\n\n----------------------------------------\n\nTITLE: Skipping Results with getSamlConnectionList in TypeScript\nDESCRIPTION: Example of using getSamlConnectionList with an offset parameter to skip a certain number of results. This skips the first 10 SAML connections in the list.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.samlConnections.getSamlConnectionList({\n  // skips the first 10 results\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Proxy in JavaScript Application\nDESCRIPTION: JavaScript configuration for setting up Clerk proxy using the Clerk class and load method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey, {\n  proxyUrl: 'https://app.dev/__clerk',\n})\n\nawait clerk.load()\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of getOrganizationInvitationList in TypeScript\nDESCRIPTION: Demonstrates the basic usage of getOrganizationInvitationList function to retrieve organization invitations. It requires an organizationId parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst response = await clerkClient.organizations.getOrganizationInvitationList({ organizationId })\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Satellite Domains (General)\nDESCRIPTION: Specifies general environment variables `CLERK_DOMAIN` and `CLERK_IS_SATELLITE` used for setting up satellite domains. This configuration is required to enable session sharing across multiple related domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_DOMAIN` | Sets your satellite application's domain. Required to share sessions across multiple domains. |\n| `CLERK_IS_SATELLITE` | Indicates whether or not the application is a satellite application. |\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Chrome Extension SDK using bun\nDESCRIPTION: Installs the latest version of the `@clerk/chrome-extension` SDK using the bun package manager to upgrade to Core 2 (version 1+).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/chrome-extension\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getOrganizationList Usage Pattern in JavaScript\nDESCRIPTION: Example demonstrating how to adapt code for the updated return type of Organization.getOrganizationList, changing from accessing the array directly to accessing it through the data property in the useOrganization hook context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Using authenticateWithMetamask in JavaScript\nDESCRIPTION: Demonstrates how to call the `authenticateWithMetamask` method on the `clerk.signUp` object. This starts the MetaMask authentication flow, and the resolved `SignUpResource` is stored in the `signUp` variable.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst signUp = await clerk.signUp.authenticateWithMetamask()\n```\n\n----------------------------------------\n\nTITLE: Retrieving Private Metadata with Clerk Express SDK (TypeScript)\nDESCRIPTION: This Express.js handler retrieves a Clerk user's private metadata from a POST request containing the userId. Uses Clerk's Express SDK's 'getUser' method and returns the private metadata in the JSON response. Requires '@clerk/express' and a valid user session. Intended for backend use only.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/updateStripe', async (req, res) => {\n  const { userId } = req.body\n\n  const user = await clerkClient.users.getUser(userId)\n\n  res.status(200).json(user.privateMetadata)\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering Properties Component in MDX\nDESCRIPTION: Illustrates the usage of the Properties component to display a list of properties with their names, types, and descriptions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_14\n\nLANGUAGE: mdx\nCODE:\n```\n<Properties>\n\n- `name`\n\ndescription\n\n---\n\n- `name`\n- `type`\n\ndescription\n\ndescription continued…\n\n</Properties>\n```\n\n----------------------------------------\n\nTITLE: Example of Prefilling Username in Sign-in URL\nDESCRIPTION: This example shows how to use a query parameter to prefill the username field when linking directly to a sign-in page. It demonstrates the structure of the URL with the prefill parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/direct-links.mdx#2025-04-23_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://accounts.example.com/sign-in?username=nick\n```\n\n----------------------------------------\n\nTITLE: Hiding Personal Accounts in Clerk OrganizationSwitcher - TypeScript\nDESCRIPTION: This snippet demonstrates how to hide a user's personal account in the <OrganizationSwitcher /> UI component by using the hidePersonal prop. The component will not display the personal account option if hidePersonal={true}. Requires @clerk/nextjs integration and organizations enabled for the Clerk instance. Input: none, Output: <OrganizationSwitcher /> component with personal accounts excluded.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TSX\nCODE:\n```\nexport default function Page() {\n  return (\n    <OrganizationSwitcher\n      // prettier-ignore\n      hidePersonal={true}\n    />\n  )\n}\n\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: SAMLAccountExists (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when attempting to create or link a SAML account that already exists for another user. It includes a short message, a long message stating the conflict, and uses the same error code as `external_account_exists_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_17\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already exists\",\n  \"longMessage\": \"This SAML account already exists.\",\n  \"code\": \"external_account_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Chrome Extension ID to Clerk's Allowed Origins\nDESCRIPTION: This bash command shows how to add the Chrome Extension's ID to the allowed_origins list in Clerk's API. It uses a cURL request to update the instance settings with the extension's ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/deploy-chrome-extension.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X PATCH https://api.clerk.com/v1/instance \\\n  -H \"Authorization: Bearer {{secret}}\" \\\n  -H \"Content-type: application/json\" \\\n  -d '{\"allowed_origins\": [\"chrome-extension://<CHROME_EXTENSION_KEY>\"]}'\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using bun\nDESCRIPTION: Installs the latest versions of `react` and `react-dom` using the bun package manager. This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization.getDomains in JavaScript\nDESCRIPTION: The pagination arguments for Organization.getDomains have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-Out in Vanilla JavaScript with Clerk\nDESCRIPTION: HTML and JavaScript implementation of a sign-out flow using Clerk's JavaScript SDK. Includes the HTML structure and JavaScript code for initializing Clerk and handling sign-out functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/sign-out.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/clerk.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n\n  <body>\n    <div id=\"app\"></div>\n    <button id=\"sign-out\">Sign out</button>\n    <script type=\"module\" src=\"main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  document.getElementById('sign-out').addEventListener('click', async () => {\n    await clerk.signOut()\n    window.location.reload()\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Session Store in React\nDESCRIPTION: Example showing how to use $sessionStore in a React component to display the last active session time. Includes handling for loading and unauthenticated states.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $sessionStore } from '@clerk/astro/client'\n\nexport default function Session() {\n  const session = useStore($sessionStore)\n\n  if (session === undefined) {\n    // Add logic to handle loading state\n    return null\n  }\n\n  if (session === null) {\n    // Add logic to handle not signed in state\n    return null\n  }\n\n  return (\n    <div>\n      <p>This session has been active since {session.lastActiveAt.toLocaleString()}</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getDomains Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for Organization.getDomains have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Using authenticateWithOKXWallet in JavaScript\nDESCRIPTION: Shows an example of invoking the `authenticateWithOKXWallet` method via `clerk.signUp`. This triggers the OKX Wallet authentication sequence and stores the resulting `SignUpResource` in the `signUp` constant.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nconst signUp = await clerk.signUp.authenticateWithOKXWallet()\n```\n\n----------------------------------------\n\nTITLE: Creating a Container View to Toggle Between Sign-Up and Sign-In in SwiftUI (Swift)\nDESCRIPTION: This snippet defines a `SignUpOrSignInView` in SwiftUI. It acts as a container that conditionally displays either the `SignUpView` or `SignInView` based on the `isSignUp` state variable. A button allows the user to toggle between the two views, providing a seamless way to switch between sign-up and sign-in flows within the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_4\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'SignUpOrSignInView.swift' }}\nimport SwiftUI\n\nstruct SignUpOrSignInView: View {\n  @State private var isSignUp = true\n\n  var body: some View {\n    ScrollView {\n      if isSignUp {\n        SignUpView()\n      } else {\n        SignInView()\n      }\n\n      Button {\n        isSignUp.toggle()\n      } label: {\n        if isSignUp {\n          Text(\"Already have an account? Sign in\")\n        } else {\n          Text(\"Don't have an account? Sign up\")\n        }\n      }\n      .padding()\n    }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: SAML Connection Retrieval Example\nDESCRIPTION: Example showing how to retrieve a SAML connection using the clerkClient.samlConnections API with a specific SAML connection ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst samlConnectionId = 'samlc_123'\n\nconst response = await clerkClient.samlConnections.getSamlConnection(samlConnectionId)\n```\n\n----------------------------------------\n\nTITLE: Importing Clerk Publishable Key in Vite (JavaScript)\nDESCRIPTION: Demonstrates how to import the Clerk Publishable Key from environment variables within a Vite project's `main.js` file using the `import.meta.env` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_3\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'main.js' }}\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n```\n```\n\n----------------------------------------\n\nTITLE: Updating getSessionList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getSessionList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: SignedOut (JSON)\nDESCRIPTION: This JSON object represents the state or error returned when an operation requires an authenticated user, but the user is currently signed out. It includes a short message, a long message confirming the signed-out state, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Signed out\",\n  \"longMessage\": \"You are signed out\",\n  \"code\": \"signed_out_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Active Session and User in iOS with Clerk\nDESCRIPTION: This Swift code demonstrates how to access the active session and user using the Clerk shared instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_2\n\nLANGUAGE: swift\nCODE:\n```\n// Get the active session\nvar activeSession: Session? { Clerk.shared.session }\n\n// Get the active user\nvar user: User? { Clerk.shared.user }\n```\n\n----------------------------------------\n\nTITLE: Using Captcha Component in Clerk Elements Sign-up Flow\nDESCRIPTION: This snippet demonstrates how to use the Captcha component within the start step of a sign-up flow. It shows both default usage and usage with the asChild prop for custom rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"start\">\n  <SignUp.Captcha />\n\n  <SignUp.Action submit>Sign up</SignUp.Action>\n</SignUp.Step>\n```\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"start\">\n  <SignUp.Captcha asChild>\n    <aside />\n  </SignUp.Captcha>\n\n  <SignUp.Action submit>Sign up</SignUp.Action>\n</SignUp.Step>\n```\n\n----------------------------------------\n\nTITLE: Creating getAuth Helper in TypeScript\nDESCRIPTION: Implements a utility function that retrieves the stored authentication state ('clerkAuth') from the request context. Designed for use within route handlers for easy access to Clerk's Auth object. Expects context.get to retrieve values; returns the current Auth object or undefined. Requires that clerkMiddleware was previously invoked for the request context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/backend-only.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport const getAuth = (context) => context.get('clerkAuth')\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign in with Apple Button and Authentication in SwiftUI\nDESCRIPTION: This code snippet demonstrates how to create a SwiftUI view that incorporates Apple's built-in Sign in with Apple button, handles the authentication process, and integrates with Clerk for user sign-in. It includes setting up the request, handling the credential response, and authenticating with Clerk using the obtained ID token.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ios/sign-in-with-apple.mdx#2025-04-23_snippet_0\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\nimport AuthenticationServices\n\nstruct SignInWithAppleView: View {\n  var body: some View {\n    // Use Apple's built-in SignInWithAppleButton\n    SignInWithAppleButton { request in\n      request.requestedScopes = [.email, .fullName]\n      request.nonce = UUID().uuidString // Setting the nonce is mandatory\n    } onCompletion: { result in\n      Task {\n        // Access the Apple ID Credential\n        guard let credential = try result.get().credential as? ASAuthorizationAppleIDCredential else {\n          dump(\"Unable to get credential of type ASAuthorizationAppleIDCredential\")\n          return\n        }\n\n        // Access the necessary identity token on the Apple ID Credential\n        guard let idToken = credential.identityToken.flatMap({ String(data: $0, encoding: .utf8) }) else {\n          dump(\"Unable to get ID token from Apple ID Credential.\")\n          return\n        }\n\n        // Authenticate with Clerk\n        let authResult = try await SignIn.authenticateWithIdToken(provider: .apple, idToken: idToken)\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Root Auth Loader in Remix\nDESCRIPTION: Configuration of the root authentication loader in the Remix application's root file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\nimport { Links, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\n// Import `rootAuthLoader()`\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => [\n  {\n    charset: 'utf-8',\n    title: 'New Remix App',\n    viewport: 'width=device-width,initial-scale=1',\n  },\n]\n\n// Export `rootAuthLoader()` as the root route `loader`\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nexport function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        {children}\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>\n  )\n}\n\nexport default function App() {\n  return <Outlet />\n}\n```\n\n----------------------------------------\n\nTITLE: Loading Stored Auth State in a Test File - TypeScript\nDESCRIPTION: Shows how to authenticate a Playwright test by loading the saved Clerk authentication state directly within the test file. Relies on the presence of 'playwright/.clerk/user.json', which should be generated by global setup. Useful for targeted tests that require authenticated contexts. Requires Playwright and access permissions to the auth state file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-authenticated-flows.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { test } from '@playwright/test'\\n\\n// Use prepared Clerk auth state\\ntest.use({ storageState: 'playwright/.clerk/user.json' })\\n\\ntest('user test', async ({ page }) => {\\n  // page is authenticated\\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Verifications Step in Sign-up Flow with Clerk Elements\nDESCRIPTION: This code snippet shows the 'verifications' step of a sign-up flow, which verifies certain fields provided during sign-up. It includes an email code verification strategy with an input field and submit action.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"verifications\">\n  <SignUp.Strategy name=\"email_code\">\n    <Clerk.Field name=\"code\">\n      <Clerk.Label>Email code</Clerk.Label>\n      <Clerk.Input />\n      <Clerk.FieldError />\n    </Clerk.Field>\n\n    <SignUp.Action submit>Verify email</SignUp.Action>\n  </SignUp.Strategy>\n</SignUp.Step>\n```\n\n----------------------------------------\n\nTITLE: Implementing Apollo Client with Clerk Authentication for Hasura\nDESCRIPTION: React component that sets up Apollo Client with authentication middleware using Clerk. The component obtains a JWT from Clerk and includes it in the Authorization header for GraphQL requests to Hasura.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/hasura.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ApolloProvider, ApolloClient, HttpLink, from, InMemoryCache } from '@apollo/client'\nimport { setContext } from '@apollo/client/link/context'\nimport { useAuth } from '@clerk/nextjs'\n\nexport const ApolloProviderWrapper = ({ children }) => {\n  const { getToken } = useAuth()\n  const apolloClient = useMemo(() => {\n    const authMiddleware = setContext(async (req, { headers }) => {\n      const token = await getToken({ template: 'template' })\n      return {\n        headers: {\n          ...headers,\n          authorization: `Bearer ${token}`,\n        },\n      }\n    })\n\n    const httpLink = new HttpLink({\n      uri: process.env.GRAPHQL_URI,\n    })\n\n    return new ApolloClient({\n      link: from([authMiddleware, httpLink]),\n      cache: new InMemoryCache(),\n    })\n  }, [getToken])\n\n  return <ApolloProvider client={apolloClient}>{children}</ApolloProvider>\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Mounting of Clerk Components Based on Authentication State in JavaScript\nDESCRIPTION: This snippet demonstrates conditional DOM updates and Clerk SDK UI component mounting, showing how to present different UI for active organization, no organization, or no user. It uses vanilla JavaScript to dynamically inject HTML and mount Clerk's OrganizationSwitcher or SignIn component into appropriate containers depending on state. Clerk's JavaScript SDK must be initialized and elements with ids 'app', 'org-switcher', or 'sign-in' must be present for proper operation. Inputs are presence or absence of active user or organization; outputs are mounted Clerk UI and updated page HTML.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-roles.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\n// If there is no active organization,\n// mount Clerk's <OrganizationSwitcher />\n// to allow the user to set an organization as active\ndocument.getElementById('app').innerHTML = `\n  <h2>Select an organization to set it as active</h2>\n  <div id=\"org-switcher\"></div>\n`\n\nconst orgSwitcherDiv = document.getElementById('org-switcher')\n\nclerk.mountOrganizationSwitcher(orgSwitcherDiv)\n\n```\n\nLANGUAGE: javascript\nCODE:\n```\n// If there is no active user, mount Clerk's <SignIn />\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-in\"></div>\n`\n\nconst signInDiv = document.getElementById('sign-in')\n\nclerk.mountSignIn(signInDiv)\n\n```\n\n----------------------------------------\n\nTITLE: Updating Organization List Iteration with useOrganization Hook in JavaScript\nDESCRIPTION: Shows the change in iterating over organization list data when using the useOrganization hook. The new structure includes a 'data' property that needs to be accessed for iteration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Protecting All Routes Except Public Ones in Next.js\nDESCRIPTION: Shows how to protect all routes in a Next.js application except specifically defined public routes. This middleware inverts the condition to allow access to sign-in and sign-up routes while protecting everything else.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_7\n\nLANGUAGE: jsx\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (!isPublicRoute(req)) {\n    await auth.protect()\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing withUser Higher Order Function in Clerk\nDESCRIPTION: Example code showing how to recreate the removed withUser higher order function using Clerk's custom hooks. This function wraps a component and injects the user object as a prop, handling the null state when no user exists.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_55\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withUser(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const clerk = useUserContext()\n\n    if (!user) return null\n\n    return <Component {...props} user={user} />\n  }\n\n  HOC.displayName = `withUser(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from signOutCallback to redirectUrl in SignOutButton Component\nDESCRIPTION: Example showing how to migrate from the removed signOutCallback prop to the redirectUrl prop in the SignOutButton component. This demonstrates the correct way to handle redirects after sign out in Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_56\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport const Signout = () => {\n  return (\n    <SignOutButton\n      signOutCallback={() => {\n        window.location.href = '/your-path'\n      }}\n      redirectUrl=\"/your-path\"\n    >\n      <button>Sign Out</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using Label with asChild Prop\nDESCRIPTION: Demonstrates how to use the asChild prop to render a custom label element while maintaining the association with the input.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">\n  <Clerk.Label asChild>\n    <label className=\"my-custom-label\">Label</label>\n  </Clerk.Label>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with Ruby\nDESCRIPTION: This example shows how to update a user's metadata using Clerk's Ruby SDK. It initializes the Clerk client with an API key and updates a user's birthday in the unsafeMetadata field.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_19\n\nLANGUAGE: ruby\nCODE:\n```\nrequire 'clerk'\nrequire 'json'\n\nunsafeMetadata = {\n  \"birthday\": \"04-20-1969\"\n}\n\nclerk = Clerk::SDK.new(api_key: \"your_clerk_secret_key\")\nclerk.users.updateMetadata(\"user_123\", unsafe_metadata: unsafeMetadata)\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for Organization.getMemberships in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the Organization.getMemberships method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Strict Automatic CSP Middleware (TypeScript)\nDESCRIPTION: Activates the strict automatic CSP configuration via Clerk's Next.js middleware, enabling nonce-based security. This mode automatically generates nonces per request and makes them available via the `x-nonce` header. It requires the `dynamic` prop on `<ClerkProvider>`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport default clerkMiddleware(\n  async (auth, request) => {\n    if (!isPublicRoute(request)) {\n      await auth.protect()\n    }\n  },\n  {\n    contentSecurityPolicy: {\n      strict: true,\n    },\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Limiting Invitation Results\nDESCRIPTION: Example demonstrating how to limit the number of returned invitations using the limit parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/get-invitation-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList({\n  status: 'revoked',\n  // returns the first 10 results\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Displaying Images with Dark Mode Variants in MDX\nDESCRIPTION: Demonstrates the MDX syntax used in Clerk docs for rendering an image with a specific dark mode version. The path `/docs/images/logo.png` is used by default, and `/docs/images/logo-dark.png` is used when dark mode is active, specified via the `dark` prop within the curly braces. Image paths are relative to the `public/` directory but prefixed with `/docs`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_20\n\nLANGUAGE: mdx\nCODE:\n```\n![Logo](/docs/images/logo.png){{ dark: '/docs/images/logo-dark.png' }}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignIn Component in React Router\nDESCRIPTION: This snippet demonstrates how to create a dedicated sign-in page in a React Router application using the SignIn component from @clerk/react-router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/react-router'\n\nexport default function SignInPage() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Defining SetActiveParams Interface for Clerk's setActive() Method\nDESCRIPTION: This interface defines the parameter structure for Clerk's setActive() method. It allows specifying a session, organization, redirect URL, and a deprecated beforeEmit callback function to control user session and organization state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/set-active-params.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  session: Session | string | null;\n  organization: Organization | string | null;\n  beforeEmit?: (session?: Session | null) => void | Promise<any>; // deprecated\n  redirectUrl?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Revoking Organization Invitations Example\nDESCRIPTION: Complete example showing how to load Clerk, check for active organization, fetch invitations, and revoke the first invitation in the list. Includes organization switcher and sign-in fallback implementations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    // Get list of organization invitations\n    const { totalCount, data } = await clerk.organization.getInvitations()\n\n    const invitations = data\n    console.log(`Invitations:`, invitations)\n\n    if (invitations.length === 0) {\n      console.log('No invitations to revoke.')\n    }\n\n    // Revoke the first invitation in the list\n    invitations[0]\n      .revoke()\n      .then((res) => console.log(res))\n      .catch((error) => console.log(error.errors))\n  } else {\n    // If there is no active organization,\n    // mount Clerk's <OrganizationSwitcher />\n    // to allow the user to set an organization as active\n    document.getElementById('app').innerHTML = `\n      <h2>Select an organization to set it as active</h2>\n      <div id=\\\"org-switcher\\\"></div>\n    `\n\n    const orgSwitcherDiv = document.getElementById('org-switcher')\n\n    clerk.mountOrganizationSwitcher(orgSwitcherDiv)\n  }\n} else {\n  document.getElementById('app').innerHTML = `\n    <div id=\\\"sign-in\\\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Role Interface Definition\nDESCRIPTION: TypeScript interface definition for supporting legacy organization roles through interface merging.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_52\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ClerkAuthorization {\n  permission: ''\n  role: 'admin' | 'basic_member' | 'guest_member'\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Proxy with Hono and Cloudflare Workers\nDESCRIPTION: Example implementation of a proxy server using Hono framework and Cloudflare Workers to handle custom OAuth provider integration. The proxy makes additional API calls and transforms the response format to match Clerk's requirements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/custom-provider.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Hono } from 'hono'\n\nconst app = new Hono()\n\napp.get('/', async (c) => {\n  const authorization = c.req.header('authorization')\n\n  const userRes = await fetch('https://api.com/user', {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: authorization,\n      'api-key': 'some-api-key',\n    },\n  })\n\n  const user = await userRes.json()\n\n  return c.json({\n    uuid: user.uuid,\n    avatar_url: user.avatar,\n    name: user.name,\n    username: user.username,\n    slug: user.id.slug,\n  })\n})\n\nexport default app\n```\n\n----------------------------------------\n\nTITLE: Installing shadcn/ui Components with NPX\nDESCRIPTION: Command to install the Button, Card, Input, and Label components from shadcn/ui using npx. These components are required for building custom sign-in and sign-up flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpx shadcn@latest add button card input label\n```\n\n----------------------------------------\n\nTITLE: Implementing Passkey Strategy in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows how to implement the passkey strategy in a sign-in flow. It includes a single action button to continue with passkey authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Strategy name=\"passkey\">\n  <SignIn.Action submit>Continue with Passkey</SignIn.Action>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances - React - TypeScript/TSX\nDESCRIPTION: Applies the Dark theme globally and the Neobrutalism theme to all SignIn Clerk components in a React project using @clerk/clerk-react. Requires REACT_APP_CLERK_PUBLISHABLE_KEY, @clerk/clerk-react, and @clerk/themes. The configuration ensures consistent theming across the application, with component-level overrides.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { dark } from '@clerk/themes'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n        signIn: { baseTheme: neobrutalism },\n      }}\n      publishableKey={clerkPubKey}\n    >\n      <div>Hello from clerk</div>\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Organization Attributes (JavaScript Example)\nDESCRIPTION: This snippet demonstrates updating an organization's attributes, specifically the name, using the `clerk.organization.update` method. It accepts an object with the attributes to update (e.g., `name`, `slug`, `maxAllowedMemberships`, `publicMetadata`, `privateMetadata`) and returns a Promise resolving to the updated `Organization` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait clerk.organization.update({ name: 'New Name' })\n```\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `SignInNotFound` in JSON\nDESCRIPTION: This JSON object defines the structure for the `SignInNotFound` error in Clerk. This error indicates that a specific sign-in attempt, identified by a unique ID (represented by `<signInID>`), could not be found. It includes a `shortMessage`, `longMessage` with the placeholder ID, and the `code` 'resource_not_found'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"not found\",\n  \"longMessage\": \"No sign in was found with id <signInID>\",\n  \"code\": \"resource_not_found\"\n}\n```\n\n----------------------------------------\n\nTITLE: Reordering UserButton Menu Items in Astro\nDESCRIPTION: Shows how to customize UserButton menu items order in Astro, including the implementation of a custom organization creation link with an icon.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_12\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.MenuItems>\n      <UserButton.Action label=\"signOut\" />\n      <UserButton.Link label=\"Create organization\" open=\"/create-organization\">\n        <svg\n          slot=\"label-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 512 512\"\n          fill=\"currentColor\"\n        >\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </UserButton.Link>\n      <UserButton.Action label=\"manageAccount\" />\n    </UserButton.MenuItems>\n  </UserButton>\n</header>\n```\n\n----------------------------------------\n\nTITLE: Rendering a Social Connection Icon with Clerk.Icon in TypeScript/React\nDESCRIPTION: Shows how to use <Clerk.Icon /> to render a social connection logo (such as Google's) as an image inside a <Clerk.Connection> component within a sign-in flow in TypeScript/React. <Clerk.Icon> must be a direct child of <Clerk.Connection>; it has limited customization for branding consistency.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <SignIn.Step name=\"start\">\n    <Clerk.Connection name=\"google\">\n      <Clerk.Icon />\n      Sign in with Google\n    </Clerk.Connection>\n  </SignIn.Step>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Getting a Session Token in JavaScript\nDESCRIPTION: This JavaScript code shows how to use the getToken method of the Session object to retrieve a custom JWT token using a specified template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.getToken({ template: 'Test' })\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with waitlistUrl in Next.js\nDESCRIPTION: Configuration for ClerkProvider in the root layout of a Next.js application, specifying the waitlist URL for the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport './globals.css'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider waitlistUrl=\"/\">\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Redirect URL List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getRedirectUrlList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Handling Phone Verification Flow with Clerk in React - TypeScript\nDESCRIPTION: Defines the phone number verification flow in a React function component using Clerk APIs and TypeScript. The snippet captures user input for phone numbers and OTP codes, performs async verification by invoking Clerk's verification methods, and renders different forms or success messages based on state. Dependencies include React (useState, event types), Clerk's authentication methods, and JSX rendering. Parameters include phone (user input), code (OTP), and event handlers for form submission. Expects user input for a phone number, an OTP sent to the device, and handles errors through JavaScript console logging. Limitations: relies on the availability of Clerk's objects/methods in scope, and correct wiring of state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-sms-based-mfa.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\n// Handle the submission of the verification form\nconst verifyCode = async (e: React.FormEvent) => {\n  e.preventDefault()\n  try {\n    // Verify that the provided code matches the code sent to the user\n    const phoneVerifyAttempt = await phoneObj?.attemptVerification({ code })\n\n    if (phoneVerifyAttempt?.verification.status === 'verified') {\n      setSuccessful(true)\n    } else {\n      // If the status is not complete, check why. User may need to\n      // complete further steps.\n      console.error(JSON.stringify(phoneVerifyAttempt, null, 2))\n    }\n  } catch (err) {\n    console.error(JSON.stringify(err, null, 2))\n  }\n}\n\n// Display a success message if the phone number was added successfully\nif (successful) {\n  return (\n    <>\n      <h1>Phone added</h1>\n    </>\n  )\n}\n\n// Display the verification form to capture the OTP code\nif (isVerifying) {\n  return (\n    <>\n      <h1>Verify phone</h1>\n      <div>\n        <form onSubmit={(e) => verifyCode(e)}>\n          <div>\n            <label htmlFor=\"code\">Enter code</label>\n            <input\n              onChange={(e) => setCode(e.target.value)}\n              id=\"code\"\n              name=\"code\"\n              type=\"text\"\n              value={code}\n            />\n          </div>\n          <div>\n            <button type=\"submit\">Verify</button>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n\n// Display the initial form to capture the phone number\nreturn (\n  <>\n    <h1>Add phone</h1>\n    <div>\n      <form onSubmit={(e) => handleSubmit(e)}>\n        <div>\n          <label htmlFor=\"phone\">Enter phone number</label>\n          <input\n            onChange={(e) => setPhone(e.target.value)}\n            id=\"phone\"\n            name=\"phone\"\n            type=\"phone\"\n            value={phone}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">Continue</button>\n        </div>\n      </form>\n    </div>\n  </>\n)\n\n```\n\n----------------------------------------\n\nTITLE: Implementing MultisessionAppSupport Component in React\nDESCRIPTION: This component ensures proper re-rendering when switching between user sessions by using a React Fragment with a key based on the current session ID, forcing the component tree to recreate when the session changes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/session-options.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nfunction MultisessionAppSupport({ children }: { children: React.ReactNode }) {\n  const { session } = useSession()\n\n  return <React.Fragment key={session ? session.id : 'no-users'}>{children}</React.Fragment>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Username/Password Sign-in with Clerk Elements in React\nDESCRIPTION: A React component implementing a username/password sign-in flow using Clerk Elements. Features form fields for username and password input, error handling, and navigation to sign-up. Includes custom styling with Tailwind CSS.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as Clerk from '@clerk/elements/common'\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <div className=\"grid w-full flex-grow items-center bg-zinc-100 px-4 sm:justify-center\">\n      <SignIn.Root>\n        <SignIn.Step\n          name=\"start\"\n          className=\"w-full space-y-6 rounded-2xl bg-white px-4 py-10 shadow-md ring-1 ring-black/5 sm:w-96 sm:px-8\"\n        >\n          <header className=\"text-center\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 40 40\"\n              className=\"mx-auto size-10 text-zinc-950\"\n              aria-hidden\n            >\n              <mask id=\"a\" width=\"40\" height=\"40\" x=\"0\" y=\"0\" maskUnits=\"userSpaceOnUse\">\n                <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#D9D9D9\" />\n              </mask>\n              <g fill=\"currentColor\" mask=\"url(#a)\">\n                <path d=\"M43.5 3a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V2ZM43.5 8a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46V7ZM43.5 13a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 18a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 23a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 28a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 33a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1ZM43.5 38a.5.5 0 0 0 0-1v1Zm0-1h-46v1h46v-1Z\" />\n                <path d=\"M27 3.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 8.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM23 13.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM21.5 18.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM20.5 23.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM22.5 28.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM25 33.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2ZM27 38.5a1 1 0 1 0 0-2v2Zm0-2h-46v2h46v-2Z\" />\n              </g>\n            </svg>\n            <h1 className=\"mt-4 text-xl font-medium tracking-tight text-zinc-950\">\n              Sign in to Clover\n            </h1>\n          </header>\n          <Clerk.GlobalError className=\"block text-sm text-red-400\" />\n          <div className=\"space-y-4\">\n            <Clerk.Field name=\"identifier\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm font-medium text-zinc-950\">Username</Clerk.Label>\n              <Clerk.Input\n                type=\"text\"\n                required\n                className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n            <Clerk.Field name=\"password\" className=\"space-y-2\">\n              <Clerk.Label className=\"text-sm  font-medium text-zinc-950\">Password</Clerk.Label>\n              <Clerk.Input\n                type=\"password\"\n                required\n                className=\"w-full rounded-md bg-white px-3.5 py-2 text-sm outline-none ring-1 ring-inset ring-zinc-300 hover:ring-zinc-400 focus:ring-[1.5px] focus:ring-zinc-950 data-[invalid]:ring-red-400\"\n              />\n              <Clerk.FieldError className=\"block text-sm text-red-400\" />\n            </Clerk.Field>\n          </div>\n          <SignIn.Action\n            submit\n            className=\"w-full rounded-md bg-zinc-950 px-3.5 py-1.5 text-center text-sm font-medium text-white shadow outline-none ring-1 ring-inset ring-zinc-950 hover:bg-zinc-800 focus-visible:outline-[1.5px] focus-visible:outline-offset-2 focus-visible:outline-zinc-950 active:text-white/70\"\n          >\n            Sign In\n          </SignIn.Action>\n          <p className=\"text-center text-sm text-zinc-500\">\n            No account?{' '}\n            <Clerk.Link\n              navigate=\"sign-up\"\n              className=\"font-medium text-zinc-950 decoration-zinc-950/20 underline-offset-4 outline-none hover:text-zinc-700 hover:underline focus-visible:underline\"\n            >\n              Create an account\n            </Clerk.Link>\n          </p>\n        </SignIn.Step>\n      </SignIn.Root>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Users.getOrganizationMembershipList Return Signature in JavaScript\nDESCRIPTION: Shows how the return signature of Users.getOrganizationMembershipList has changed. Instead of returning data directly, it now returns an object with data and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Creating TypeScript Definitions for Roles\nDESCRIPTION: Global TypeScript definitions that define the role types and extend the session claims interface. This provides type safety and autocompletion when working with user roles.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\n// Create a type for the roles\nexport type Roles = 'admin' | 'moderator'\n\ndeclare global {\n  interface CustomJwtSessionClaims {\n    metadata: {\n      role?: Roles\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Next.js App Router\nDESCRIPTION: Example of using SignedOut component in Next.js App Router layout component. Shows how to wrap content that should only be visible to signed-out users while maintaining always-visible content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { ClerkProvider, SignedOut } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <header>\n            <SignedOut>\n              <p>You are signed out.</p>\n            </SignedOut>\n            <p>This content is always visible.</p>\n          </header>\n          {children}\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Building Authenticated URL with Clerk JS SDK (JavaScript)\nDESCRIPTION: Demonstrates how to use the `clerk.buildUrlWithAuth` method to create a URL pointing to a specified route within the application, automatically appending necessary authentication information (like the development browser JWT as a query parameter, controlled by the `useQueryParam` option). This is useful for navigating within a Clerk-protected application while maintaining the authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nawait clerk.buildUrlWithAuth('/dashboard')\n```\n\n----------------------------------------\n\nTITLE: Implementing Animated OTP Input with Clerk and Framer Motion\nDESCRIPTION: Creates a custom OTP (One-Time Password) input field using Clerk.Input primitive with Framer Motion animations. The component features individual input boxes with dynamic visual feedback, including focus states and number animations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/primitives.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Input\n  type=\"otp\"\n  required\n  className=\"flex justify-center gap-1\"\n  render={({ value, status }) => (\n    <div\n      data-status={status}\n      className=\"relative h-9 w-8 rounded-md bg-white ring-1 ring-inset ring-zinc-300 data-[status=selected]:bg-sky-400/10 data-[status=selected]:shadow-[0_0_8px_2px_theme(colors.sky.400/30%)] data-[status=selected]:ring-sky-400\"\n    >\n      <AnimatePresence>\n        {value && (\n          <motion.span\n            initial={{ opacity: 0, scale: 0.75 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.75 }}\n            className=\"absolute inset-0 flex items-center justify-center text-zinc-950\"\n          >\n            {value}\n          </motion.span>\n        )}\n        {value}\n      </AnimatePresence>\n      {status === 'cursor' && (\n        <motion.div\n          layoutId=\"otp-input-focus\"\n          transition={{ ease: [0.2, 0.4, 0, 1], duration: 0.2 }}\n          className=\"absolute inset-0 z-10 rounded-[inherit] border border-sky-400 bg-sky-400/10 shadow-[0_0_8px_2px_theme(colors.sky.400/30%)]\"\n        />\n      )}\n    </div>\n  )}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationMembershipList Usage Pattern in JavaScript\nDESCRIPTION: Example showing how to adapt code for the updated return type of User.getOrganizationMembershipList, changing from accessing the array directly to accessing it through the data property in the useUser hook context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Protecting routes and retrieving user authentication with getAuth() in Fastify\nDESCRIPTION: Demonstrates how to use Clerk’s `getAuth()` helper within Fastify route handlers to access the current user's authentication state from the request object. This is essential for route protection and user-specific logic.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/fastify.mdx#_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\n\nfastify.get('/protected', async (request, reply) => {\n  const auth = getAuth(request)\n  if (!auth.isSignedIn) {\n    reply.code(401).send({ error: 'Unauthorized' })\n    return\n  }\n  // Proceed with authenticated user logic\n  return { message: `Hello, ${auth.user?.username}` }\n})\n```\n\n----------------------------------------\n\nTITLE: Customizing CAPTCHA Widget with HTML Attributes\nDESCRIPTION: Example of how to customize the CAPTCHA widget appearance using data attributes for theme, size, and language settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/bot-sign-up-protection.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"clerk-captcha\" data-cl-theme=\"dark\" data-cl-size=\"flexible\" data-cl-language=\"es-ES\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing SSO Callback Handler with Clerk in React\nDESCRIPTION: Example demonstrating the implementation of an SSO callback page that handles the OAuth redirect and completes the authentication flow using the AuthenticateWithRedirectCallback component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/custom-flows/sso-connections.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { AuthenticateWithRedirectCallback } from \"@clerk/nextjs\";\n\nexport default function SSOCallback() {\n  return <AuthenticateWithRedirectCallback />;\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Sign-Up State with Clerk useSignUp Composable in Vue\nDESCRIPTION: Illustrates how to import and utilize the useSignUp composable from @clerk/vue to monitor the sign-up attempt status in a Vue component. The code demonstrates extracting isLoaded and signUp from the composable and conditionally rendering the UI based on Clerk's loading state. Requires @clerk/vue dependency and must be used within a Vue 3 component using script setup syntax. Expects no input parameters; outputs sign-up status and manages loading state via template branching.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useSignUp } from '@clerk/vue'\n\nconst { isLoaded, signUp } = useSignUp()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Handle loading state -->\n  </div>\n\n  <div v-else>The current sign-up attempt status is {{ signUp?.status }}.</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining CSS Module Styles for Clerk SignIn Button (CSS)\nDESCRIPTION: Creates a CSS module file (`styles/SignIn.module.css`) defining a class `primaryColor` to customize the background and text color for an element, intended here for the Clerk SignIn component's primary button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n```css {{ filename: 'styles/SignIn.module.css' }}\n.primaryColor {\n  background-color: bisque;\n  color: black;\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing User Session Management with React and Clerk\nDESCRIPTION: React component that creates a user button interface using Clerk's $sessionListStore. The component displays the current user's email and provides functionality to switch between active sessions or sign out completely.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-list-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { $sessionListStore, $clerkStore } from '@clerk/astro/client'\n\nexport default function UserButton() {\n  const sessions = useStore($sessionListStore)\n  const { session, setActive, signOut } = useStore($clerkStore)\n\n  if (sessions === undefined) {\n    // Handle loading state\n    return <div>Loading sessions...</div>\n  }\n\n  return (\n    <div>\n      <div>{session.user.primaryEmailAddress}</div>\n      <div role=\"menu\">\n        {sessions.map((sess) => (\n          <button role=\"menuitem\" onClick={() => setActive({ session: sess.id })} key={sess.id}>\n            {sess.user.primaryEmailAddress}\n          </button>\n        ))}\n        <button role=\"menuitem\" onClick={() => signOut()}>\n          Sign out of all accounts\n        </button>\n      </div>\n    </div>\n  )\n```\n\n----------------------------------------\n\nTITLE: Customizing Session Token Claims for MFA in Clerk\nDESCRIPTION: A JSON example showing how to add a custom claim to the Clerk session token to track a user's MFA status. This adds the user's 'two_factor_enabled' property to the session claims under the key 'isMfa'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/force-mfa.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"isMfa\": \"{{user.two_factor_enabled}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in Next.js\nDESCRIPTION: Basic implementation of the GoogleOneTap component in a Next.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { GoogleOneTap } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <GoogleOneTap />\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Action and Page to UserButton in Next.js\nDESCRIPTION: This snippet demonstrates how to add a custom 'Help' action and page to the UserButton component in Next.js. It includes a custom icon and renders a custom help page within the UserProfile modal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        <UserButton.MenuItems>\n          <UserButton.Action label=\"Help\" labelIcon={<DotIcon />} open=\"help\" />\n        </UserButton.MenuItems>\n\n        <UserButton.UserProfilePage label=\"Help\" labelIcon={<DotIcon />} url=\"help\">\n          <div>\n            <h1>Help Page</h1>\n            <p>This is the custom help page</p>\n          </div>\n        </UserButton.UserProfilePage>\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Clerk Next.js Authentication URL Variables\nDESCRIPTION: Configuration variables for Next.js-specific Clerk authentication URLs, prefixed with NEXT_PUBLIC. These variables control the authentication flow and redirect behavior in a Next.js application using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/environment-variables.mdx#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description | Example |\n| - | - | - |\n| `NEXT_PUBLIC_CLERK_SIGN_IN_URL` | The full URL or path to your sign-in page. Needs to point to your primary application on the client-side. **Required for a satellite application in a development instance.** | `/sign-in` |\n| `NEXT_PUBLIC_CLERK_SIGN_UP_URL` | The full URL or path to your sign-up page. Needs to point to your primary application on the client-side. **Required for a satellite application in a development instance.** | `/sign-up` |\n| `NEXT_PUBLIC_CLERK_SIGN_IN_FORCE_REDIRECT_URL` | If provided, this URL will always be redirected to after the user signs in. | `/dashboard` |\n| `NEXT_PUBLIC_CLERK_SIGN_UP_FORCE_REDIRECT_URL` | If provided, this URL will always be redirected to after the user signs up. | `/dashboard` |\n| `NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` | The fallback URL to redirect to after the user signs in, if there's no `redirect_url` in the path already. Defaults to `/`. | `/dashboard` |\n| `NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` | The fallback URL to redirect to after the user signs up, if there's no `redirect_url` in the path already. Defaults to `/`. | `/dashboard` |\n```\n\n----------------------------------------\n\nTITLE: Implementing Network Error Handling\nDESCRIPTION: Example of handling network errors in a sign-in flow using Clerk's error handling utilities and custom error handling logic.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/offline-support.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useSignIn, isClerkRuntimeError } from '@clerk/clerk-expo'\nimport { Link, useRouter } from 'expo-router'\nimport { Text, TextInput, Button, View } from 'react-native'\nimport React from 'react'\n\nexport default function SignInPage() {\n  const { signIn, setActive, isLoaded } = useSignIn()\n  const router = useRouter()\n\n  const [emailAddress, setEmailAddress] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  const onSignInPress = React.useCallback(async () => {\n    if (!isLoaded) return\n    try {\n      const signInAttempt = await signIn.create({\n        identifier: emailAddress,\n        password,\n      })\n\n      // The rest of your custom flow logic\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      if (isClerkRuntimeError(err) && err.code === 'network_error') {\n        console.error('Network error occurred!')\n      }\n\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [isLoaded, emailAddress, password])\n\n  return (\n    <View>\n      <Button title=\"Sign in\" onPress={onSignInPress} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in Vue\nDESCRIPTION: Illustrates the implementation of SignInButton in a Vue.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignInButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignInButton />\n</template>\n```\n\n----------------------------------------\n\nTITLE: getSession Usage Example\nDESCRIPTION: Example demonstrating how to retrieve a session using the Clerk client with a session ID. Shows practical implementation of the getSession method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst sessionId = 'sess_123'\n\nconst response = await clerkClient.sessions.getSession(sessionId)\n```\n\n----------------------------------------\n\nTITLE: Deleting Allowlist Identifier Example Usage\nDESCRIPTION: Example showing how to delete an allowlist identifier using the Clerk Client SDK. Demonstrates passing the allowlist identifier ID and awaiting the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/delete-allowlist-identifier.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst allowlistIdentifierId = 'alid_123'\n\nconst response =\n  await clerkClient.allowlistIdentifiers.deleteAllowlistIdentifier(allowlistIdentifierId)\n```\n\n----------------------------------------\n\nTITLE: Adding Clerk Ruby SDK to Gemfile\nDESCRIPTION: This snippet shows how to add the Clerk Ruby SDK to your application's Gemfile. The 'require: \"clerk\"' option ensures that the gem is automatically loaded when your application starts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/ruby/installation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\ngem 'clerk-sdk-ruby', require: \"clerk\"\n```\n\n----------------------------------------\n\nTITLE: Including Help Section Partial (Markdown/MDX)\nDESCRIPTION: Uses the custom `<Include>` component, specific to the documentation rendering engine, to embed content from the `_partials/help` file into the current page. This component likely renders a standard help or support section common across multiple documentation pages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/overview.mdx#2025-04-23_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n<Include src=\"_partials/help\" />\n```\n\n----------------------------------------\n\nTITLE: Defining getInvitationList Function Signature\nDESCRIPTION: TypeScript function signature for retrieving paginated invitation lists. Returns a Promise containing PaginatedResourceResponse with an array of Invitation objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/get-invitation-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getInvitationList(\n  params: GetInvitationListParams,\n): Promise<PaginatedResourceResponse<Invitation[]>>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Express SDK Using Package Managers - Shell\nDESCRIPTION: These shell commands install the Clerk Express SDK (@clerk/express) into your Node.js project, enabling new authentication features tailored for the Express framework. Choose the command that matches your package manager (npm, yarn, pnpm, bun). These should be executed from your project's root directory after uninstalling the old SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @clerk/express\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add @clerk/express\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm add @clerk/express\n```\n\nLANGUAGE: sh\nCODE:\n```\nbun add @clerk/express\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk and Node Adapter in Astro Config - TypeScript\nDESCRIPTION: This TypeScript code exports a configuration object for an Astro project, integrating the Clerk SDK and setting up the Node.js SSR adapter. It marks key lines for adding the Clerk integration, specifying the adapter, and enforcing SSR mode. Required dependencies are '@clerk/astro' and '@astrojs/node'. The function enables authentication and sets Astro for server-side rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'astro/config'\nimport node from '@astrojs/node'\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [clerk()],\n  adapter: node({ mode: 'standalone' }),\n  output: 'server',\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Session Store in Svelte\nDESCRIPTION: Example showing $sessionStore implementation in Svelte, using conditional blocks for different session states and handling Svelte's reactivity prefix conventions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $sessionStore as session } from '@clerk/astro/client'\n</script>\n\n{#if $session === undefined}\n  <!-- Add logic to handle loading state -->\n{:else if $session === null}\n  <!-- Add logic to handle not signed in state -->\n{:else}\n  <div>\n    <p>This session has been active since {$session.lastActiveAt.toLocaleString()}</p>\n  </div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Configuring Package.json for Published Chrome Extension\nDESCRIPTION: Updates the package.json manifest configuration for published extensions to include the public key, permissions, and host permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/configure-consistent-crx-id.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"manifest\": {\n      \"key\": \"$CRX_PUBLIC_KEY\",\n      \"permissions\": [\"cookies\", \"storage\"],\n      \"host_permissions\": [\"http://localhost/*\", \"$CLERK_FRONTEND_API/*\"]\n    }\n  }\n```\n\n----------------------------------------\n\nTITLE: Image Optimization with Next.js Server Components and Clerk\nDESCRIPTION: This snippet demonstrates how to optimize user profile images in Next.js by adding query parameters to the user's imageUrl. It shows how to set height, width, quality, and fit parameters to improve image loading performance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/image-optimization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { currentUser } from '@clerk/nextjs/server'\n\nexport default async function ImageOptimization() {\n  const user = await currentUser()\n  if (!user) return <p>No Image URL found</p>\n\n  const { imageUrl } = user\n  const params = new URLSearchParams()\n\n  params.set('height', '200')\n  params.set('width', '200')\n  params.set('quality', '100')\n  params.set('fit', 'crop')\n\n  const imageSrc = `${imageUrl}?${params.toString()}`\n\n  return (\n    <div>\n      <h1>Image source:</h1>\n      <p>{imageSrc}</p>\n      <h2>Image:</h2>\n      <img src={imageSrc} alt=\"User image\" />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using redirectToUserProfile in Clerk SDK\nDESCRIPTION: Example usage of the redirectToUserProfile method from the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectToUserProfile()\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `AlreadySignedIn` in JSON\nDESCRIPTION: This JSON object defines the structure for the `AlreadySignedIn` error in Clerk. This error occurs when a user attempts a sign-in related action but is already signed in. It includes a `shortMessage`, the error `code` 'identifier_already_signed_in', and `meta` containing the existing `SessionID`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"You're already signed in\",\n  \"code\": \"identifier_already_signed_in\",\n  \"meta\": {\n    \"SessionID\": \"<session ID>\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating getInvitationList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getInvitationList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Sign-In Page in Clerk SDK\nDESCRIPTION: Function to redirect the user to the sign-in URL configured in the application's instance settings. It accepts optional SignInRedirectOptions and returns a promise.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_28\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectToSignIn(options?: SignInRedirectOptions): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in React\nDESCRIPTION: Shows the implementation of SignInButton in a standard React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/clerk-react'\n\nconst SignInPage = () => <SignInButton />\n\nexport default SignInPage\n```\n\n----------------------------------------\n\nTITLE: Defining EnterpriseSSOStrategy Type in TypeScript\nDESCRIPTION: Specifies EnterpriseSSOStrategy as a TypeScript literal type restricted to 'enterprise_sso' for use with enterprise SSO integration. Serves as a unique marker type for applying special handling or logic specific to enterprise SSO authentication flows. No dependencies or dynamic values; the input must exactly match the string 'enterprise_sso'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sso.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\ntype EnterpriseSSOStrategy = `enterprise_sso`\n```\n\n----------------------------------------\n\nTITLE: DeleteRedirectUrl Function Signature\nDESCRIPTION: TypeScript function signature for deleting a redirect URL. Takes a redirectUrlId string parameter and returns a Promise that resolves to a RedirectUrl object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/delete-redirect-url.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteRedirectUrl(redirectUrlId: string): Promise<RedirectUrl>\n```\n\n----------------------------------------\n\nTITLE: Using Clerk SDK with a Client in Go\nDESCRIPTION: Sample code illustrating how to instantiate a Client with a specific API key, enabling multiple API operations through that client. Supports creating, retrieving, listing, and deleting users, suitable for managing multiple Clerk instances or facilitating testing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/overview.mdx#_snippet_3\n\nLANGUAGE: Go\nCODE:\n```\nimport (\n  \"github.com/clerk/clerk-sdk-go/v2\"\n  \"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\n// Each operation requires a context.Context as the first argument.\nctx := context.Background()\n\n// Initialize a client with an API key\nconfig := &clerk.ClientConfig{}\nconfig.Key = \"sk_live_xxx\"\nclient := user.NewClient(config)\n\n// Create a new user\nnewUser, err := client.Create(ctx, &user.CreateParams{})\nif err != nil {\n    // Handle error\n}\n\n// Get user details\nuserDetails, err := client.Get(ctx, \"user_id\")\nif err != nil {\n    // Handle error\n}\n\n// List users\nuserList, err := client.List(ctx, &user.ListParams{})\nif err != nil {\n    // Handle error\n}\nfor _, u := range userList.Users {\n    // Process each user\n}\n\n// Delete user\ndeletedResource, err := client.Delete(ctx, \"user_id\")\nif err != nil {\n    // Handle error\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing WithClerk HOC with React Hooks in Clerk\nDESCRIPTION: Example code showing how to recreate the removed WithClerk higher order component using Clerk's custom hooks. It uses the useClerk hook to provide the Clerk instance to child components through a render prop pattern.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_51\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithClerk = ({ children }) => {\n  const clerk = useClerk()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(clerk)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Dedicated UserProfile Page with Custom Link in Astro\nDESCRIPTION: Example of creating a dedicated UserProfile page with a custom link in Astro. The code shows how to use the UserProfile component with a custom link to the homepage using slot-based icon insertion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_7\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserProfile } from '@clerk/astro/components'\n---\n\n<UserProfile>\n  <UserProfile.Link label=\"Homepage\" url=\"/\">\n    <svg\n      slot=\"label-icon\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 512 512\"\n      fill=\"currentColor\"\n    >\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n    </svg>\n  </UserProfile.Link>\n</UserProfile>\n```\n\n----------------------------------------\n\nTITLE: Configuring Production Environment Variables for Clerk Chrome Extension\nDESCRIPTION: This snippet shows how to set up the necessary environment variables in the .env.production file for a Chrome Extension using Clerk authentication. It includes the Publishable Key, Frontend API URL, and optional Sync Host URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/deploy-chrome-extension.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nPLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_FRONTEND_API={{fapi_url}}\nPLASMO_PUBLIC_CLERK_SYNC_HOST=https://yourdomain.com\n```\n\n----------------------------------------\n\nTITLE: Defining updateOrganizationMembership Function in TypeScript\nDESCRIPTION: Function signature for updating an organization membership. It takes UpdateOrganizationMembershipParams as input and returns a Promise resolving to OrganizationMembership.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-membership.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateOrganizationMembership(\n  params: UpdateOrganizationMembershipParams,\n): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Using UserProfile Component in Astro\nDESCRIPTION: Shows how to integrate the <UserProfile /> component in an Astro page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserProfile } from '@clerk/astro/components'\n---\n\n<UserProfile />\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims with `@clerk/backend` in TypeScript\nDESCRIPTION: Illustrates using the core `createClerkClient` from `@clerk/backend` to manually authenticate an incoming request. After successful authentication using `authenticateRequest`, the JWT session claims (`JwtPayload`) can be accessed via the `sessionClaims` property on the object returned by `requestState.toAuth()`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Delete User Implementation Example\nDESCRIPTION: Example showing how to use the deleteUser method from clerkClient to remove a user account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/delete-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.deleteUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Handling Sign-in Tokens in Next.js (Pages Router)\nDESCRIPTION: This React component for Next.js Pages Router handles sign-in tokens. It uses getServerSideProps to extract the token from query params, then uses Clerk to authenticate the user. It manages loading states and displays the user ID after successful sign-in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/embedded-email-links.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { InferGetServerSidePropsType, GetServerSideProps } from 'next'\nimport { useUser, useSignIn } from '@clerk/nextjs'\nimport { useEffect, useState } from 'react'\n\n// Get the token from the query param server-side, and pass through props\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  return {\n    props: { signInToken: context.query.token ? context.query.token : null },\n  }\n}\n\nexport default function AcceptTokenPage({\n  signInToken,\n}: InferGetServerSidePropsType<typeof getServerSideProps>) {\n  const [loading, setLoading] = useState<boolean>(false)\n  const { signIn, setActive } = useSignIn()\n  const { user } = useUser()\n\n  useEffect(() => {\n    if (!signIn || !setActive || !signInToken || user || loading) {\n      return\n    }\n\n    const createSignIn = async () => {\n      setLoading(true)\n      try {\n        // Create the `SignIn` with the token\n        const signInAttempt = await signIn.create({\n          strategy: 'ticket',\n          ticket: signInToken as string,\n        })\n\n        // If the sign-in was successful, set the session to active\n        if (signInAttempt.status === 'complete') {\n          setActive({\n            session: signInAttempt.createdSessionId,\n          })\n        } else {\n          // If the sign-in attempt is not complete, check why.\n          // User may need to complete further steps.\n          console.error(JSON.stringify(signInAttempt, null, 2))\n        }\n      } catch (err) {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error('Error:', JSON.stringify(err, null, 2))\n        setLoading(true)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    createSignIn()\n  }, [signIn, setActive, signInToken, user, loading])\n\n  if (!signInToken) {\n    return <div>No token provided.</div>\n  }\n\n  if (loading) {\n    return <div>Loading...</div>\n  }\n\n  if (!user) {\n    return null\n  }\n\n  return <div>Signed in as {user.id}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Sign-in Tokens in Next.js (App Router)\nDESCRIPTION: This React component for Next.js App Router detects a sign-in token from URL query params and uses it to authenticate the user with Clerk. It handles loading states and displays the user ID upon successful sign-in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/embedded-email-links.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useUser, useSignIn } from '@clerk/nextjs'\nimport { useEffect, useState } from 'react'\nimport { useSearchParams } from 'next/navigation'\n\nexport default function Page() {\n  const [loading, setLoading] = useState<boolean>(false)\n  const { signIn, setActive } = useSignIn()\n  const { user } = useUser()\n\n  // Get the token from the query params\n  const signInToken = useSearchParams().get('token')\n\n  useEffect(() => {\n    if (!signIn || !setActive || !signInToken || user || loading) {\n      return\n    }\n\n    const createSignIn = async () => {\n      setLoading(true)\n      try {\n        // Create the `SignIn` with the token\n        const signInAttempt = await signIn.create({\n          strategy: 'ticket',\n          ticket: signInToken as string,\n        })\n\n        // If the sign-in was successful, set the session to active\n        if (signInAttempt.status === 'complete') {\n          setActive({\n            session: signInAttempt.createdSessionId,\n          })\n        } else {\n          // If the sign-in attempt is not complete, check why.\n          // User may need to complete further steps.\n          console.error(JSON.stringify(signInAttempt, null, 2))\n        }\n      } catch (err) {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error('Error:', JSON.stringify(err, null, 2))\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    createSignIn()\n  }, [signIn, setActive, signInToken, user, loading])\n\n  if (!signInToken) {\n    return <div>No token provided.</div>\n  }\n\n  if (!user) {\n    return null\n  }\n\n  if (loading) {\n    return <div>Signing you in...</div>\n  }\n\n  return <div>Signed in as {user.id}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/clerk-react using yarn - Bash\nDESCRIPTION: Adds the most recent version of @clerk/clerk-react to the project using yarn. Ensures the application is configured to use Clerk React SDK Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Error Handling with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of handling ClerkAPIResponseError using try/catch block in TypeScript. Shows basic error handling pattern for backend API calls.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntry {\n  const res = await someBackendApiCall()\n} catch (error) {\n  // Error handling\n}\n```\n\n----------------------------------------\n\nTITLE: Adding UserProfileLink to UserButton in Next.js\nDESCRIPTION: Example of adding a custom link to the UserButton component that navigates to the homepage in Next.js. The code demonstrates how to create a DotIcon component and use it with UserButton.UserProfileLink.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        <UserButton.UserProfileLink label=\"Homepage\" url=\"/\" labelIcon={<DotIcon />} />\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Reauthorizing External Account in TypeScript\nDESCRIPTION: Method to initiate a re-authorization flow for an existing external account with support for additional scopes and redirect configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/external-account.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction reauthorize(params: ReauthorizeExternalAccountParams): Promise<ExternalAccount>\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in Remix\nDESCRIPTION: Basic implementation of the GoogleOneTap component in a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { GoogleOneTap } from '@clerk/remix'\n\nexport default function Page() {\n  return <GoogleOneTap />\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring Testing Token Function in TypeScript\nDESCRIPTION: Function signature for creating a testing token that returns a Promise of TestingToken type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/testing-tokens/create-testing-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createTestingToken(): Promise<TestingToken>\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkProvider in an Expo Application\nDESCRIPTION: This code shows how to wrap the root layout with ClerkProvider in an Expo application. It provides authentication context to the entire app using expo-router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/clerk-provider.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/clerk-expo'\nimport { Slot } from 'expo-router'\n\nexport default function Layout() {\n  return (\n    <ClerkProvider>\n      <Slot />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up HTML Structure for Organization List in JavaScript\nDESCRIPTION: This HTML code defines the basic structure for displaying organization memberships. It includes a table with a `tbody` element (`id=\"memberships-table-body\"`) intended to be populated dynamically by JavaScript. It also contains a hidden form (`id=\"create-organization-container\"`) for creating organizations and includes a script tag to load the main JavaScript file (`main.js`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html', collapsible: true }}\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h2>Joined organizations</h2>\n    <table>\n      <thead>\n        <tr>\n          <th>Identifier</th>\n          <th>Organization</th>\n          <th>Joined</th>\n          <th>Role</th>\n          <th>Set as active org</th>\n        </tr>\n      </thead>\n      <tbody id=\"memberships-table-body\"></tbody>\n    </table>\n\n    <div id=\"create-organization-container\" hidden>\n      <h1>Create an organization</h1>\n      <form id=\"create-organization\">\n        <label for=\"name\">Name</label>\n        <input id=\"name\" name=\"name\" />\n        <button>Create organization</button>\n      </form>\n    </div>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n```\n\n----------------------------------------\n\nTITLE: Accessing Account Portal URLs in Production\nDESCRIPTION: Standard URL patterns for accessing different Clerk Account Portal pages in production environments. These URLs are automatically generated based on your domain name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/getting-started.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nhttps://accounts.<your-domain>.com/sign-in\nhttps://accounts.<your-domain>.com/sign-up\nhttps://accounts.<your-domain>.com/user\nhttps://accounts.<your-domain>.com/unauthorized-sign-in\nhttps://accounts.<your-domain>.com/organization\nhttps://accounts.<your-domain>.com/create-organization\n```\n\n----------------------------------------\n\nTITLE: Defining Organization Deletion Method in TypeScript\nDESCRIPTION: Type definition for the deleteOrganization method that takes an organization ID and returns a Promise of DeletedObject.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteOrganization(organizationId: string): Promise<DeletedObject>\n```\n\n----------------------------------------\n\nTITLE: Setting Routing Strategy for UserProfile Component\nDESCRIPTION: Example of how to set the routing strategy for the UserProfile component to 'hash' instead of the new default 'path' routing in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_10\n\nLANGUAGE: jsx\nCODE:\n```\n<UserProfile routing=\"hash\" />\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances - Nuxt - TypeScript\nDESCRIPTION: Sets up Nuxt to use the Dark theme globally and the Neobrutalism theme for the SignIn component via clerk options in nuxt.config.ts. Depends on @clerk/nuxt and @clerk/themes. Placement in Nuxt config ensures all Clerk components inherit from the specified appearance settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_21\n\nLANGUAGE: ts\nCODE:\n```\nimport { dark, neobrutalism } from '@clerk/themes'\n\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      baseTheme: dark,\n      signIn: { baseTheme: neobrutalism },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in User.getOrganizationInvitations\nDESCRIPTION: Shows the changes to pagination parameters in User.getOrganizationInvitations method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating Users.getOrganizationInvitationList Return Signature in JavaScript\nDESCRIPTION: Shows how the return signature of Users.getOrganizationInvitationList has changed. Instead of returning data directly, it now returns an object with data and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: TypeScript Function Signature for getClient()\nDESCRIPTION: TypeScript type definition showing the function signature for retrieving a single client. Takes a clientId string parameter and returns a Promise resolving to a Client object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/client/get-client.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getClient(clientId: string): Promise<Client>\n```\n\n----------------------------------------\n\nTITLE: Installing expo-checkbox Dependency using yarn\nDESCRIPTION: Adds the `expo-checkbox` package using the yarn package manager. This package provides a checkbox component needed for the React Native/Expo MFA flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nyarn add expo-checkbox\n```\n\n----------------------------------------\n\nTITLE: Replacing navigate Prop with routerPush and routerReplace - React/JSX\nDESCRIPTION: Illustrates the migration from the singular navigate prop to the new routerPush and routerReplace props in ClerkProvider. Passing the same callback to both new props preserves pre-existing navigation behavior during the upgrade. Input: JSX invocation of ClerkProvider; Output: equivalent upgraded JSX structure with enhanced navigation control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_14\n\nLANGUAGE: jsx\nCODE:\n```\n<ClerkProvider navigate={(x) => x} />\n<ClerkProvider routerPush={(x) => x} routerReplace={(x) => x} />\n```\n\n----------------------------------------\n\nTITLE: Initializing Loaded ClerkJS Instance via load() in TypeScript\nDESCRIPTION: Shows the step within `createClerkInstanceInternal` where the `load()` method of the `clerkJSInstance` (obtained either directly from `window.Clerk` or after loading the script) is called. This asynchronous operation initializes Clerk with the provided options, making its functionalities available. Assumes `clerkJSInstance` is a valid ClerkJS object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/frontend-only.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { loadClerkJSScript } from '@clerk/shared/loadClerkJSScript'\nimport { runOnce } from './utils'\nimport { $clerk, $state } from './stores'\n\nexport const createClerkInstance = runOnce(createClerkInstanceInternal)\n\nasync function createClerkInstanceInternal(options) {\n  let clerkJSInstance = window.Clerk\n\n  if (!clerkJSInstance) {\n    // loadClerkJSScript() codepath\n  }\n\n  if (!$clerk.get()) {\n    $clerk.set(clerkJSInstance)\n  }\n\n  await clerkJSInstance.load(options)\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Layout Prop in Next.js\nDESCRIPTION: Example of setting up the ClerkProvider with custom layout options in a Next.js application. This snippet demonstrates how to configure social button placement, variant, and terms page URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/layout.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs';\n\n<ClerkProvider\n  appearance={{\n    layout: {\n      socialButtonsPlacement: 'bottom',\n      socialButtonsVariant: 'iconButton',\n      termsPageUrl: 'https://clerk.com/terms'\n    }\n  }}\n>\n  {/* ... */}\n</ClerkProvider>;\n```\n\n----------------------------------------\n\nTITLE: Implementing Continue Step in Sign-up Flow with Clerk Elements\nDESCRIPTION: This snippet demonstrates the 'continue' step of a sign-up flow, which collects additional required fields from the user. It includes a username input field and a submit action.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp.Step name=\"continue\">\n  <Clerk.Field name=\"username\">\n    <Clerk.Label>Username</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n\n  <SignUp.Action submit>Sign up</SignUp.Action>\n</SignUp.Step>\n```\n\n----------------------------------------\n\nTITLE: Creating Storage Directory for Auth State - Shell Script\nDESCRIPTION: Initializes a directory for storing Playwright's Clerk authentication state and adds it to .gitignore to avoid committing sensitive test session info. Requires basic shell utilities and permissions to modify .gitignore. Target directory is 'playwright/.clerk'. No input parameters required; outputs an updated directory and .gitignore file. Useful as a prerequisite setup step before running authentication-dependent tests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-authenticated-flows.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nmkdir -p playwright/.clerk\\necho $'\\nplaywright/.clerk' >> .gitignore\n```\n\n----------------------------------------\n\nTITLE: Implementing SSO Connection Management with Clerk and Next.js\nDESCRIPTION: A React component that provides a complete interface for managing external SSO connections. It uses Clerk's hooks and APIs to handle adding new connections, removing existing ones, and reverifying accounts. The component includes status handling, error display, and dynamic UI updates based on connected accounts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-sso-connections.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { CreateExternalAccountParams, ExternalAccountResource, OAuthStrategy } from '@clerk/types'\nimport { useRouter } from 'next/navigation'\n\nconst capitalize = (provider: string) => {\n  return `${provider.slice(0, 1).toUpperCase()}${provider.slice(1)}`\n}\n\nconst normalizeProvider = (provider: string) => {\n  return provider.split('_')[1]\n}\n\nexport default function AddAccount() {\n  const router = useRouter()\n  const { isLoaded, user } = useUser()\n  const createExternalAccount = useReverification((params: CreateExternalAccountParams) =>\n    user?.createExternalAccount(params),\n  )\n  const accountDestroy = useReverification((account: ExternalAccountResource) => account.destroy())\n\n  const options: OAuthStrategy[] = ['oauth_discord', 'oauth_google', 'oauth_github']\n\n  const addSSO = async (strategy: OAuthStrategy) => {\n    await createExternalAccount({\n      strategy,\n      redirectUrl: '/account/manage-external-accounts',\n    })\n      .then((res) => {\n        if (res?.verification?.externalVerificationRedirectURL) {\n          router.push(res.verification.externalVerificationRedirectURL.href)\n        }\n      })\n      .catch((err) => {\n        console.log('ERROR', err)\n      })\n      .finally(() => {\n        console.log('Redirected user to oauth provider')\n      })\n  }\n\n  if (!isLoaded) return <p>Loading...</p>\n\n  const unconnectedOptions = options.filter(\n    (option) =>\n      !user?.externalAccounts.some((account) => account.provider === normalizeProvider(option)),\n  )\n\n  return (\n    <>\n      <div>\n        <p>Connected accounts</p>\n        {user?.externalAccounts.map((account) => {\n          return (\n            <ul key={account.id}>\n              <li>Provider: {capitalize(account.provider)}</li>\n              <li>Scopes: {account.approvedScopes}</li>\n              <li>\n                Status:{' '}\n                {account.verification?.status === 'verified'\n                  ? capitalize(account.verification?.status)\n                  : account.verification?.error?.longMessage}\n              </li>\n              {account.verification?.status !== 'verified' &&\n                account.verification?.externalVerificationRedirectURL && (\n                  <li>\n                    <a href={account.verification?.externalVerificationRedirectURL?.href}>\n                      Reverify {capitalize(account.provider)}\n                    </a>\n                  </li>\n                )}\n              <li>\n                <button onClick={() => accountDestroy(account)}>\n                  Remove {capitalize(account.provider)}\n                </button>\n              </li>\n            </ul>\n          )\n        })}\n      </div>\n      {unconnectedOptions.length > 0 && (\n        <div>\n          <p>Add a new external account</p>\n          <ul>\n            {unconnectedOptions.map((strategy) => {\n              return (\n                <li key={strategy}>\n                  <button onClick={() => addSSO(strategy)}>\n                    Add {capitalize(normalizeProvider(strategy))}\n                  </button>\n                </li>\n              )\n            })}\\n          </ul>\n        </div>\n      )}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Destroying External Account in TypeScript\nDESCRIPTION: Method to delete an external account from the system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/external-account.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Client-Side Route Protection\nDESCRIPTION: Implementation of client-side route protection using Clerk's control components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport {\n  SignInButton,\n  SignOutButton,\n  SignUpButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <h1>Index Route</h1>\n      <SignedIn>\n        <p>You are signed in!</p>\n\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <p>You are signed out</p>\n\n        <SignInButton />\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Client via createClerkClient Options in Core 2\nDESCRIPTION: Demonstrates the breaking change where setter methods (`setClerkApiKey`, `setClerkApiVersion`, `setClerkHttpOptions`, `setClerkServerApiUrl`) are removed in Core 2. Configuration, such as the secret key and API version, should now be passed directly as options to the `createClerkClient` function upon initialization. The example contrasts the old method using setters (marked with `del`) with the new method using constructor options (marked with `ins`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n  clerkClient,\n  setClerkApiKey,\n  setClerkApiVersion,\n  setClerkHttpOptions,\n  setClerkServerApiUrl,\n} from '@clerk/clerk-sdk-node'\n\nsetClerkApiKey('...')\nsetClerkApiVersion('...')\nsetClerkHttpOptions('...')\nsetClerkServerApiUrl('...')\n\nconst clerkClient = createClerkClient({\n  secretKey: '...',\n  apiVersion: '...',\n  httpOptions: '...',\n  serverApiUrl: '...',\n})\n\nawait clerkClient.users.getUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Installing Passkeys Package\nDESCRIPTION: Commands for installing the @clerk/expo-passkeys package using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/passkeys.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/expo-passkeys\n```\n\n----------------------------------------\n\nTITLE: Defining Organization Creation Function (TypeScript)\nDESCRIPTION: Provides the TypeScript signature for the `createOrganization` method. This function allows programmatic creation of a new Clerk organization, requiring the organization's `name` and optionally a `slug`. It returns a Promise that resolves with the newly created `Organization` object. For React applications, using the `<CreateOrganization />` component is often preferred.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createOrganization({ name, slug }: CreateOrganizationParams): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Organization Profile Link - Clerk Vue - Vue\nDESCRIPTION: This code sample illustrates how to insert a custom navigation link with an icon into Clerk's OrganizationSwitcher component in a Vue application. The example showcases the usage of Vue templates and slots to render the navigation item with a DotIcon SVG. Requires installation of '@clerk/vue'. Parameters include the label, URL, and slot for the label icon. The output is a header section with an extended organization selector navigation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\\\"ts\\\">\\nimport { OrganizationSwitcher } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <header>\\n    <OrganizationSwitcher>\\n      <OrganizationSwitcher.OrganizationProfileLink label=\\\"Homepage\\\" url=\\\"/\\\">\\n        <template #labelIcon>\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n            <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n          </svg>\\n        </template>\\n      </OrganizationSwitcher.OrganizationProfileLink>\\n    </OrganizationSwitcher>\\n  </header>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Authorization-based Route Protection\nDESCRIPTION: Implementation of route protection based on user authorization status and permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-middleware.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/astro/server'\n\nconst isProtectedRoute = createRouteMatcher(['/admin(.*)'])\n\nexport const onRequest = clerkMiddleware((auth, context) => {\n  const { has, redirectToSignIn } = auth()\n\n  // Restrict admin routes to users with specific permissions\n  if (\n    (isProtectedRoute(context.request) && !has({ permission: 'org:admin:example1' })) ||\n    !has({ permission: 'org:admin:example2' })\n  ) {\n    // Add logic to run if the user does not have the required permissions; for example, redirecting to the sign-in page\n    return redirectToSignIn()\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Fastify server setup with Clerk plugin registration in TypeScript\nDESCRIPTION: Examples of initializing a Fastify server instance and registering the `clerkPlugin()`, which integrates Clerk's authentication middleware into the Fastify app. Ensures environment variables are loaded prior to plugin registration by importing `dotenv/config`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/fastify.mdx#_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport 'dotenv/config'\nimport Fastify from 'fastify'\nimport { clerkPlugin } from '@clerk/fastify'\n\nconst fastify = Fastify({ logger: true })\n\nfastify.register(clerkPlugin)\n\nconst start = async () => {\n  try {\n    await fastify.listen({ port: 8080 })\n  } catch (error) {\n    fastify.log.error(error)\n    process.exit(1)\n  }\n}\n\nstart()\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Publishable Key for Environment Variables - Env\nDESCRIPTION: This snippet shows how to set your Clerk Publishable Key in a '.env' file for client-side use in a React application with Vite. The environment variable 'VITE_CLERK_PUBLISHABLE_KEY' must be set to your actual Clerk Publishable Key. This enables your app to access Clerk services on the frontend without exposing sensitive credentials. The value should be copied from your Clerk dashboard and pasted in place of '{{pub_key}}'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/library-mode.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\\n\n```\n\n----------------------------------------\n\nTITLE: Main MFA Screen Component\nDESCRIPTION: Main component that manages the MFA setup flow with different steps using state management. Handles navigation between different stages of MFA setup.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport default function AddMfaScreen() {\n  const [step, setStep] = React.useState<AddTotpSteps>('add')\n\n  return (\n    <>\n      {step === 'add' && <AddTOTPMfa setStep={setStep} />}\n      {step === 'verify' && <VerifyMFA setStep={setStep} />}\n      {step === 'backupcodes' && <BackupCodes setStep={setStep} />}\n      {step === 'success' && <Success />}\n\n      <Link href=\"/account\">\n        <Text>Manage MFA</Text>\n      </Link>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Database Connection with Neon and Drizzle\nDESCRIPTION: Configuration of the database connection using Neon's serverless client and Drizzle ORM. This establishes the connection to the Neon Postgres database using the connection string from environment variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { loadEnvConfig } from '@next/env'\nimport { neon } from '@neondatabase/serverless'\nimport { drizzle } from 'drizzle-orm/neon-http'\nimport { UserMessages } from './schema'\n\nloadEnvConfig(process.cwd())\n\nif (!process.env.DATABASE_URL) {\n  throw new Error('DATABASE_URL must be a Neon postgres connection string')\n}\n\nconst sql = neon(process.env.DATABASE_URL)\nexport const db = drizzle(sql, {\n  schema: { UserMessages },\n})\n```\n\n----------------------------------------\n\nTITLE: Conditionally Rendering UI Based on Authentication State in SwiftUI (Swift)\nDESCRIPTION: This `ContentView` snippet shows how to conditionally render UI elements based on the user's authentication status using the Clerk SDK in SwiftUI. It accesses the shared `Clerk` instance injected via the environment and checks if `clerk.user` exists. If a user object is present, it displays a personalized greeting; otherwise, it shows a message indicating the user is signed out.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_1\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'ContentView.swift', mark: [2, 5, [8, 14]] }}\nimport SwiftUI\nimport Clerk\n\nstruct ContentView: View {\n  @Environment(Clerk.self) private var clerk\n\n  var body: some View {\n    VStack {\n      if let user = clerk.user {\n        Text(\"Hello, \\(user.id)\")\n      } else {\n        Text(\"You are signed out\")\n      }\n    }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Switching Between Sessions in React with Clerk\nDESCRIPTION: This React code snippet shows how to get available sessions and switch between them using the useClerk hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-react'\n\nconst { client, setActive } = useClerk()\n\n// You can get all the available sessions through the client\nconst availableSessions = client.sessions\n\n// Use setActive to set the active session.\nsetActive({ session: availableSessions[0].id })\n```\n\n----------------------------------------\n\nTITLE: Exporting User Data as JSON for Clerk Migration Script\nDESCRIPTION: This JSON snippet shows the required format for importing user accounts into Clerk using the migration script. The array contains objects for each user with fields including userId, email, optional firstName, lastName, password, and the passwordHasher to specify the algorithm. This file must be named users.json and present in the root directory of the migration script project. All user export data must match the schema and only supported hashers are accepted; missing required attributes or invalid formats will result in import failure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n[\n  {\n    \"userId\": \"string\",\n    \"email\": \"email\",\n    \"firstName\": \"string (optional)\",\n    \"lastName\": \"string (optional)\",\n    \"password\": \"string (optional)\",\n    \"passwordHasher\": \"argon2 | argon | bcrypt | md5 | pbkdf2_sha256 | pbkdf2_sha256_django | pbkdf2_sha1 | scrypt_firebase\"\n  }\n]\n```\n\n----------------------------------------\n\nTITLE: Client-side Auth Store Usage\nDESCRIPTION: Shows how to use the $authStore to access authentication information like userId and sessionId on the client side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/read-session-data.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $authStore } from '@clerk/astro/client'\n\nexport default function Example() {\n  const { userId, sessionId } = useStore($authStore)\n\n  // In case the user signs out while on the page.\n  if (!userId) {\n    return null\n  }\n\n  return (\n    <div>\n      Hello, {userId} your current active session is {sessionId}\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Actions to UserButton in Astro\nDESCRIPTION: This Astro example shows how to add multiple custom actions to the UserButton component. It uses a custom event listener to handle clicks on menu items, as Astro components convert props to strings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_1\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.MenuItems>\n      <UserButton.Action label=\"Open chat\" clickIdentifier=\"open_chat\">\n        <svg\n          slot=\"label-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 512 512\"\n          fill=\"currentColor\"\n        >\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </UserButton.Action>\n      <UserButton.Action label=\"Open cart\" clickIdentifier=\"open_cart\">\n        <svg\n          slot=\"label-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 512 512\"\n          fill=\"currentColor\"\n        >\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </UserButton.Action>\n    </UserButton.MenuItems>\n  </UserButton>\n</header>\n\n<script>\n  document.addEventListener('clerk:menu-item-click', (e) => {\n    if (e.detail === 'open_chat') {\n      console.log('init chat')\n    }\n    if (e.detail === 'open_cart') {\n      console.log('init cart')\n    }\n  })\n</script>\n```\n\n----------------------------------------\n\nTITLE: Configuring Primary Domain ClerkProvider for Pages Router\nDESCRIPTION: React component setup for ClerkProvider in the primary domain using Next.js Pages Router configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport Head from 'next/head'\n\nexport default function App({ Component, pageProps }) {\n  const primarySignInUrl = '/sign-in'\n  const primarySignUpUrl = '/sign-up'\n  const satelliteUrl = 'https://satellite.dev'\n\n  return (\n    <ClerkProvider\n      signInUrl={primarySignInUrl}\n      signUpUrl={primarySignUpUrl}\n      allowedRedirectOrigins={[satelliteUrl]}\n      {...pageProps}\n    >\n      <Head>\n        <title>Satellite Next.js app</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      </Head>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Initiating an Email Link Sign-In with Clerk in JavaScript\nDESCRIPTION: This JavaScript example demonstrates how to use the `clerk.signIn.create` method to initiate a sign-in flow using the 'email_link' strategy. It specifies the user's email address as the identifier. The method returns a Promise that resolves with the updated SignIn object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.signIn.create({\n  strategy: 'email_link',\n  identifier: 'test@example.com',\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Custom JWT Session Claims in TypeScript\nDESCRIPTION: TypeScript type declaration for custom JWT session claims to get auto-complete and prevent TypeScript errors when working with custom session claims. This defines the onboardingComplete property in the user's metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface CustomJwtSessionClaims {\n    metadata: {\n      onboardingComplete?: boolean\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Components in Astro Layout\nDESCRIPTION: Example of using Clerk authentication components in an Astro layout file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/react.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignedIn, SignedOut, UserButton, SignInButton } from '@clerk/astro/react'\n---\n\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\" />\n    <meta name=\"generator\" content={Astro.generator} />\n  </head>\n  <body>\n    <header>\n      <nav>\n        <SignedOut client:load>\n          <SignInButton client:load mode=\"modal\" />\n        </SignedOut>\n        <SignedIn client:load>\n          <UserButton client:load />\n        </SignedIn>\n      </nav>\n    </header>\n    <article>\n      <slot />\n    </article>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Mounting Clerk SignIn Component in JavaScript\nDESCRIPTION: Code that renders Clerk's SignIn component when no active user is detected. It creates a container div and uses clerk.mountSignIn to initialize the authentication UI.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/organization-switcher.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-in\"></div>\n`\n\nconst signInDiv = document.getElementById('sign-in')\n\nclerk.mountSignIn(signInDiv)\n```\n\n----------------------------------------\n\nTITLE: Coinbase Wallet Authentication - TypeScript\nDESCRIPTION: Function implementation for authenticating users with Coinbase Wallet.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithCoinbaseWallet({\n  redirectUrl,\n  signUpContinueUrl,\n  customNavigate,\n}?: AuthenticateWithCoinbaseWalletParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Using getOrganizationInvitation in Clerk's Backend SDK\nDESCRIPTION: Example of using getOrganizationInvitation function to retrieve an organization invitation. It demonstrates setting organizationId and invitationId, then calling the function through clerkClient.organizations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst invitationId = 'orginv_123'\n\nconst response = await clerkClient.organizations.getOrganizationInvitation({\n  organizationId,\n  invitationId,\n})\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenRevoked Error\nDESCRIPTION: This JSON object represents the error returned when an attempt is made to use an actor token that has already been revoked. It includes a short message, a detailed long message explaining the issue, and a unique error code `actor_token_revoked_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"actor token has been revoked\",\n  \"longMessage\": \"This actor token has been revoked and cannot be used anymore.\",\n  \"code\": \"actor_token_revoked_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Astro\nDESCRIPTION: This snippet demonstrates how to customize a single SignIn component in an Astro application by directly passing appearance settings to that specific component instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_18\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignIn } from '@clerk/astro/components'\n---\n\n<SignIn\n  appearance={{\n    colorPrimary: 'blue',\n    colorText: 'black',\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring Group-Based Authentication in Grafbase Schema\nDESCRIPTION: GraphQL schema configuration for Grafbase that sets up authentication with Clerk as an OIDC provider and group-based access rules.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_3\n\nLANGUAGE: graphql\nCODE:\n```\nschema\n  @auth(\n    providers: [{ type: oidc, issuer: \"{{ process.env.NEXT_PUBLIC_CLERK_FRONTEND_API_URL }}\" }]\n    rules: [{ allow: groups, groups: [\"backend\", \"admin\"] }]\n  ) {\n  query: Query\n}\n```\n\n----------------------------------------\n\nTITLE: Updating isMetamaskError Import Path in JavaScript\nDESCRIPTION: Example showing the change in import path for isMetamaskError. The import path has changed from @clerk/react to @clerk/react/errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_49\n\nLANGUAGE: javascript\nCODE:\n```\nimport { isMetamaskError } from '@clerk/react'\nimport { isMetamaskError } from '@clerk/react/errors'\n```\n\n----------------------------------------\n\nTITLE: Prefilling Sign-in and Sign-up Fields with Query Parameters\nDESCRIPTION: This snippet lists the query parameters that can be used to prefill sign-in and sign-up fields when using direct links to Account Portal pages. It includes parameters for email, phone, username, and name fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/direct-links.mdx#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nemail_address\nphone_number\nusername\nfirst_name\nlast_name\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Publishable Key (Environment Variable)\nDESCRIPTION: Defines the Clerk Publishable Key as an environment variable within a `.env` file. This key is required by the Clerk SDK to identify your application and connect to the Clerk API. The key should be prefixed with `EXPO_PUBLIC_` to be accessible in the Expo client-side code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nEXPO_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n\n----------------------------------------\n\nTITLE: Representing InvalidSubscriptionPlanSwitch Error in JSON (Clerk)\nDESCRIPTION: This JSON object represents the `InvalidSubscriptionPlanSwitch` error in Clerk's billing context. It occurs when attempting to switch to a new subscription plan that does not support features currently used by the application. The messages advise staying with the current plan to prevent breaking changes, identified by the code `invalid_subscription_plan_switch_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Unsupported plan features\",\n  \"longMessage\": \"Some application features are not supported in your new plan. Stay with your current plan to avoid breaking changes.\",\n  \"code\": \"invalid_subscription_plan_switch_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing WithSession HOC with React Hooks\nDESCRIPTION: Example of recreating the WithSession higher order component using Clerk's custom hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_48\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithSession = ({ children }) => {\n  const session = useSession()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(session)\n}\n```\n\n----------------------------------------\n\nTITLE: Link Component with Custom Render Function\nDESCRIPTION: Demonstrates how to use the Link component with a render function to customize the navigation link using your own components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_20\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <SignIn.Step name=\"start\">\n    <Clerk.Link navigate=\"sign-up\">{({ url }) => <Link href={url}>Sign up</Link>}</Clerk.Link>\n  </SignIn.Step>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Defining SamlConnection Object Properties in TypeScript\nDESCRIPTION: This code snippet defines the properties of the SamlConnection object, including various identifiers, configuration settings, and user-related information for SAML connections.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/saml-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SamlConnection {\n  id: string;\n  acsUrl: string;\n  active: boolean;\n  allowIdpInitiated: boolean;\n  allowSubdomains: boolean;\n  attributeMapping: {\n    userId: string;\n    emailAddress: string;\n    firstName: string;\n    lastName: string;\n  };\n  createdAt: number;\n  domain: string;\n  idpEntityId: string;\n  idpSsoUrl: string;\n  idpCertificate: string;\n  idpMetadataUrl: string;\n  idpMetadata: string;\n  name: string;\n  spEntityId: string;\n  spMetadataUrl: string;\n  provider: string;\n  syncUserAttributes: boolean;\n  updatedAt: number;\n  userCount: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining OrganizationSuggestion accept() Method in TypeScript\nDESCRIPTION: Method to accept an organization suggestion. When called, it returns a Promise that resolves to an OrganizationSuggestionResource representing the accepted suggestion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-suggestion.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction accept(): Promise<OrganizationSuggestionResource>\n```\n\n----------------------------------------\n\nTITLE: Updating ClerkExpressRequireAuth Parameter from frontendApi to publishableKey (JavaScript)\nDESCRIPTION: Demonstrates the change from using 'frontendApi' to 'publishableKey' as a parameter in the ClerkExpressRequireAuth function. Both the key and value need to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\n\nClerkExpressRequireAuth({ frontendApi: '...' })\nClerkExpressRequireAuth({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updating and Returning User Data with Clerk getAuth in a Remix Action (TypeScript)\nDESCRIPTION: This snippet shows how to use Clerk’s `getAuth` helper in a Remix action function to validate authentication and retrieve the full Clerk user object. If no user is authenticated, the function redirects to the sign-in route, passing along the current URL for post-login redirection. The Backend SDK (using the Clerk secret key) fetches the updated user object, serializes it, and returns it in the action response. Dependencies include Remix’s action utilities and Clerk’s server-side packages. Requires the `CLERK_SECRET_KEY` environment variable to be set.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { ActionFunction, redirect } from '@remix-run/node'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { createClerkClient } from '@clerk/remix/api.server'\n\nexport const action: ActionFunction = async (args) => {\n  // Use `getAuth()` to retrieve the user's ID\n  const { userId } = await getAuth(args)\n\n  // If there is no userId, then redirect to sign-in route\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  // Initialize the Backend SDK and get the user's full `Backend User` object\n  const updatedUser = await createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n  }).users.getUser(userId)\n\n  // Return the retrieved user data\n  return { serialisedUser: JSON.stringify(updatedUser) }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Creating Organizations with Clerk API in Next.js\nDESCRIPTION: This snippet demonstrates how to use the useOrganizationList() hook to create a new organization in a Next.js application. It includes a form for submitting the organization name and handles the creation process using Clerk's API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/create-organizations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganizationList } from '@clerk/nextjs'\nimport { FormEventHandler, useState } from 'react'\n\nexport default function CreateOrganization() {\n  const { isLoaded, createOrganization } = useOrganizationList()\n  const [organizationName, setOrganizationName] = useState('')\n\n  if (!isLoaded) return null\n\n  const handleSubmit: FormEventHandler<HTMLFormElement> = async (e) => {\n    e.preventDefault()\n    createOrganization({ name: organizationName })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err) => {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2))\n      })\n    setOrganizationName('')\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        name=\"organizationName\"\n        value={organizationName}\n        onChange={(e) => setOrganizationName(e.currentTarget.value)}\n      />\n      <button type=\"submit\">Create organization</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Global Route Protection with Public Exceptions\nDESCRIPTION: Implementation of protecting all routes except specifically defined public routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-middleware.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/astro/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport const onRequest = clerkMiddleware((auth, context) => {\n  const { redirectToSignIn, userId } = auth()\n\n  if (!isPublicRoute(context.request) && !userId) {\n    return redirectToSignIn()\n  }\n})\n```\n\n----------------------------------------\n\nTITLE: Organization Invitation Method Type Definition\nDESCRIPTION: TypeScript type definition for the revoke() method that returns a Promise of OrganizationInvitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction revoke(): Promise<OrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: Implementing Server Actions for Database Operations\nDESCRIPTION: Server Actions implementation that handles user message creation and deletion. These functions use Clerk's auth() helper to get the authenticated user's ID and then perform database operations with Drizzle ORM.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n'use server'\n\nimport { auth } from '@clerk/nextjs/server'\nimport { UserMessages } from './db/schema'\nimport { db } from './db'\nimport { eq } from 'drizzle-orm'\n\nexport async function createUserMessage(formData: FormData) {\n  const { userId } = await auth()\n  if (!userId) throw new Error('User not found')\n\n  const message = formData.get('message') as string\n  await db.insert(UserMessages).values({\n    user_id: userId,\n    message,\n  })\n}\n\nexport async function deleteUserMessage() {\n  const { userId } = await auth()\n  if (!userId) throw new Error('User not found')\n\n  await db.delete(UserMessages).where(eq(UserMessages.user_id, userId))\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Publishable and Secret Keys (General)\nDESCRIPTION: Defines the general environment variables `CLERK_PUBLISHABLE_KEY` for frontend use and `CLERK_SECRET_KEY` for backend use. These keys are essential for authenticating your application with Clerk and are found on the Clerk Dashboard API keys page. The secret key must not be exposed publicly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_PUBLISHABLE_KEY` | Your Clerk app's Publishable Key. It will be prefixed with `pk_test_` in development instances and `pk_live_` in production instances. |\n| `CLERK_SECRET_KEY` | Your Clerk app's Secret Key, which you can find in the Clerk Dashboard. It will be prefixed with `sk_test_` in development instances and `sk_live_` in production instances. **Do not expose this on the frontend with a public environment variable**. |\n```\n\n----------------------------------------\n\nTITLE: Revoking a Clerk Organization Invitation using cURL (Bash)\nDESCRIPTION: This cURL command revokes an existing organization invitation server-side using the Clerk Backend API. It requires the Organization ID and the Invitation ID in the URL path. A POST request is sent to the revoke endpoint with a JSON payload containing the `requesting_user_id` (the ID of the user performing the revocation). Authentication uses the Clerk Secret Key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/invitations.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/organizations/{org_123}/invitations/{inv_123}/revoke' \\\n  -X POST \\\n  -H 'Authorization: Bearer {{secret}}' \\\n  -H 'Content-Type: application/json' \\\n  -d '{ \"requesting_user_id\": \"user_123\" }'\n```\n\n----------------------------------------\n\nTITLE: Success Component Implementation\nDESCRIPTION: Simple success component that displays confirmation message after MFA setup completion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nfunction Success() {\n  return (\n    <>\n      <Text>Success</Text>\n      <Text>You successfully added TOTP MFA via an authentication application</Text>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk SignUp Component with Verification Code and Loading States in React\nDESCRIPTION: This code snippet shows the implementation of a Clerk SignUp component with verification code input, resend action with countdown timer, and submit button with loading state. It uses Card components for layout and custom Button components with various states.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\n<Clerk.FieldError className=\"block text-center text-sm text-destructive\" />\n                          </Clerk.Field>\n                          <SignUp.Action\n                            asChild\n                            resend\n                            className=\"text-muted-foreground\"\n                            fallback={({ resendableAfter }) => (\n                              <Button variant=\"link\" size=\"sm\" disabled>\n                                Didn&apos;t receive a code? Resend (\n                                <span className=\"tabular-nums\">{resendableAfter}</span>)\n                              </Button>\n                            )}\n                          >\n                            <Button type=\"button\" variant=\"link\" size=\"sm\">\n                              Didn&apos;t receive a code? Resend\n                            </Button>\n                          </SignUp.Action>\n                        </div>\n                      </CardContent>\n                      <CardFooter>\n                        <div className=\"grid w-full gap-y-4\">\n                          <SignUp.Action submit asChild>\n                            <Button disabled={isGlobalLoading}>\n                              <Clerk.Loading>\n                                {(isLoading) => {\n                                  return isLoading ? (\n                                    <Icons.spinner className=\"size-4 animate-spin\" />\n                                  ) : (\n                                    'Continue'\n                                  )\n                                }}\n                              </Clerk.Loading>\n                            </Button>\n                          </SignUp.Action>\n                        </div>\n                      </CardFooter>\n                    </Card>\n                  </SignUp.Strategy>\n                </SignUp.Step>\n              </>\n            )}\n          </Clerk.Loading>\n        </SignUp.Root>\n      </div>\n    )\n```\n\n----------------------------------------\n\nTITLE: Destroying Phone Number - TypeScript Declaration\nDESCRIPTION: Method signature for deleting a phone number.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Accessing User Data with useUser Hook in Expo\nDESCRIPTION: Shows how to use the useUser() hook to access the current user's data. The component handles loading states, checks authentication status, and displays the user's first name when signed in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/read-session-user-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useUser } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function Example() {\n  const { isSignedIn, user, isLoaded } = useUser()\n\n  if (!isLoaded) {\n    return <Text>Loading...</Text>\n  }\n\n  if (!isSignedIn) {\n    return <Text>Sign in to view this page</Text>\n  }\n\n  return <Text>Hello {user.firstName}!</Text>\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organizations.getOrganizationInvitationList Usage Pattern in JavaScript\nDESCRIPTION: Example demonstrating how to adapt code for the updated return type of Organizations.getOrganizationInvitationList, changing from accessing the array directly to accessing it through the data property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Getting the Web3Wallet Address String (TypeScript)\nDESCRIPTION: Defines the `toString` method signature for the `Web3Wallet` object. This synchronous function returns the hexadecimal string representation of the `web3Wallet` property associated with the instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/web3-wallet.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction toString(): string\n```\n\n----------------------------------------\n\nTITLE: Defining deleteUserProfileImage Function in TypeScript\nDESCRIPTION: TypeScript function signature for the deleteUserProfileImage method. It takes a userId as a string parameter and returns a Promise that resolves to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/delete-user-profile-image.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteUserProfileImage(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Using updateOrganizationMembershipMetadata in TypeScript/React\nDESCRIPTION: This example demonstrates how to use the updateOrganizationMembershipMetadata function from the Clerk Backend SDK. It updates the public metadata of an organization membership with a new 'example' value.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-membership-metadata.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst userId = 'user_123'\n\nconst response = await clerkClient.organizations.updateOrganizationMembershipMetadata({\n  organizationId,\n  userId,\n  publicMetadata: {\n    example: 'this value is updated!',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Importing and Validating Clerk Publishable Key in TypeScript\nDESCRIPTION: This TypeScript code snippet demonstrates importing the Clerk Publishable Key from environment variables (`import.meta.env.VITE_CLERK_PUBLISHABLE_KEY`) within the `src/main.tsx` file. It includes a check to ensure the key exists, throwing an error if it's missing, which prevents the application from running without proper configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './index.css'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)\n```\n\n----------------------------------------\n\nTITLE: Handling Email Link Verification in Next.js\nDESCRIPTION: This code snippet shows how to handle email link verification in a Next.js application. It uses Clerk's useClerk hook to access the handleEmailLinkVerification method for verifying the email address when the user clicks the link in their email.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-links.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useClerk } from '@clerk/nextjs'\nimport { EmailLinkErrorCodeStatus, isEmailLinkError } from '@clerk/nextjs/errors'\nimport Link from 'next/link'\n\nexport default function VerifyEmailLink() {\n  const [verificationStatus, setVerificationStatus] = React.useState('loading')\n\n  const { handleEmailLinkVerification, loaded } = useClerk()\n\n  async function verify() {\n    try {\n      // Dynamically set the host domain for dev and prod\n      // You could instead use an environment variable or other source for the host domain\n      const protocol = window.location.protocol\n      const host = window.location.host\n\n      await handleEmailLinkVerification({\n        // URL to navigate to if sign-up flow needs more requirements, such as MFA\n        redirectUrl: `${protocol}//${host}/sign-up`,\n      })\n\n```\n\n----------------------------------------\n\nTITLE: Updating Session List Retrieval in JavaScript\nDESCRIPTION: This snippet demonstrates the change in response payload for the getSessionList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Registering Clerk Plugin for All Routes in Fastify\nDESCRIPTION: This example demonstrates how to register the clerkPlugin for all routes in a Fastify application. It imports dotenv for environment variables, sets up a Fastify server, and registers the Clerk plugin globally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/fastify/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// dotenv must be imported before @clerk/fastify\nimport 'dotenv/config'\nimport Fastify from 'fastify'\nimport { clerkPlugin } from '@clerk/fastify'\n\nconst fastify = Fastify({ logger: true })\n\nfastify.register(clerkPlugin)\n\nconst start = async () => {\n  try {\n    await fastify.listen({ port: 8080 })\n  } catch (error) {\n    fastify.log.error(error)\n    process.exit(1)\n  }\n}\n\nstart()\n```\n\n----------------------------------------\n\nTITLE: Adding Sign-Out Functionality to ContentView in SwiftUI (Swift)\nDESCRIPTION: This final `ContentView` snippet adds a sign-out capability for authenticated users. When `clerk.user` is not nil, it displays a 'Sign Out' button alongside the user greeting. Tapping this button triggers an asynchronous task that calls the `clerk.signOut()` method from the Clerk SDK to end the user's current session.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/ios.mdx#2025-04-23_snippet_6\n\nLANGUAGE: swift\nCODE:\n```\n```swift {{ filename: 'ContentView.swift', mark: [[11, 13]] }}\nimport SwiftUI\nimport Clerk\n\nstruct ContentView: View {\n  @Environment(Clerk.self) private var clerk\n\n  var body: some View {\n    VStack {\n      if let user = clerk.user {\n        Text(\"Hello, \\(user.id)\")\n        Button(\"Sign Out\") {\n          Task { try? await clerk.signOut() }\n        }\n      } else {\n        SignUpOrSignInView()\n      }\n    }\n  }\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Nuxt\nDESCRIPTION: This snippet demonstrates how to customize a specific SignIn component in a Nuxt application by passing appearance properties directly to the component through Vue template binding.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_20\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\n// Components are automatically imported\n</script>\n\n<template>\n  <SignIn :appearance=\"{ colorPrimary: 'blue', colorText: 'black' }\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Querying Users for Export from Database using SQL\nDESCRIPTION: This SQL snippet selects user IDs, emails, and names from a users table and aliases them to match Clerk's required format for the migration script. It requires a relational database with a users table containing id, email, and name columns. The query outputs results for downstream transformation into JSON for import. Key parameters are the selected columns and table name; adjustments may be required to map database fields to match Clerk's schema.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_14\n\nLANGUAGE: sql\nCODE:\n```\nSELECT id as userId, email, name FROM users\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInButton in Remix\nDESCRIPTION: Illustrates how to create a custom sign-in button using SignInButton in a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_8\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/remix'\n\nexport default function Home() {\n  return (\n    <SignInButton>\n      <button>Custom sign in button</button>\n    </SignInButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Chrome Extension ID to Clerk's allowed_origins\nDESCRIPTION: Use a cURL command to add the Chrome Extension's ID to your web app's allowed_origins in the Clerk Dashboard. This allows the extension to sync with your web app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X PATCH https://api.clerk.com/v1/instance \\\n  -H \"Authorization: Bearer {{secret}}\" \\\n  -H \"Content-type: application/json\" \\\n  -d '{\"allowed_origins\": [\"chrome-extension://<CHROME_EXTENSION_ID>\"]}'\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Plugin\nDESCRIPTION: Adding the Clerk plugin to the Vue application with the required Publishable Key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/vue.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createApp } from 'vue'\nimport './style.css'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nconst app = createApp(App)\napp.use(clerkPlugin, { publishableKey: PUBLISHABLE_KEY })\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Starting the Expo Development Server\nDESCRIPTION: Commands for starting the Expo development server using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nnpm start\nyarn start\npnpm start\nbun start\n```\n\n----------------------------------------\n\nTITLE: Fetching a Long-Lived Clerk JWT Token via Browser Console (JavaScript)\nDESCRIPTION: This JavaScript code snippet, intended for use in the browser's developer console, retrieves a long-lived JWT token from the current Clerk user session. It requires the Clerk frontend SDK to be available (`window.Clerk`), an active user session, and the name of a pre-configured JWT template created in the Clerk Dashboard. Replace `<the template name you chose above>` with your actual template name. The command returns a Promise that resolves with the JWT string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/postman-or-insomnia.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nawait window.Clerk.session.getToken({ template: '<the template name you chose above>' })\n```\n\n----------------------------------------\n\nTITLE: Updating AllowlistIdentifiers.getAllowlistIdentifierList Return Signature in Clerk API\nDESCRIPTION: The return signature of AllowlistIdentifiers.getAllowlistIdentifierList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk Elements Sign-In Components in React\nDESCRIPTION: This snippet demonstrates the basic structure of a sign-in page using Clerk Elements components. It imports all sign-in components under the SignIn namespace and sets up the Root component with various Step components for different stages of the sign-in process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as SignIn from '@clerk/elements/sign-in'\n\nexport default function SignInPage() {\n  return (\n    <SignIn.Root>\n      <SignIn.Step name=\"start\" />\n      <SignIn.Step name=\"verifications\" />\n      <SignIn.Step name=\"choose-strategy\" />\n      <SignIn.Step name=\"forgot-password\" />\n      <SignIn.Step name=\"reset-password\" />\n    </SignIn.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Auth Object Without Active Organization (Version 2)\nDESCRIPTION: Example of Clerk's version 2 Auth object structure without an active organization. This shows the core token claims including azp, email, exp, iat, iss, jti, nbf, role, sid, sub, and v fields, but notably without an 'o' claim for organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  azp: 'http://localhost:3000',\n  email: 'email@example.com',\n  exp: 1744735488,\n  fva: [ 9, -1 ],\n  iat: 1744735428,\n  iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n  jti: 'aee4d4a5071bdd66e21b',\n  nbf: 1744735418,\n  role: 'authenticated',\n  sid: 'sess_123',\n  sub: 'user_123',\n  v: 2\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing First Factor Verification in JavaScript\nDESCRIPTION: This JavaScript code demonstrates how to use the prepareFirstFactorVerification method of the Session object to initiate the first factor verification process using an email code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.prepareFirstFactorVerification({\n  strategy: 'email_code',\n  emailAddressId: 'email_address_123',\n})\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/nextjs with pnpm\nDESCRIPTION: Command to install the Clerk Next.js SDK using pnpm package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Defining FormIdentifierNotFoundCode Error in JSON\nDESCRIPTION: This JSON object signifies an error when a required identifier (like email or username) provided by the user cannot be found in the system during sign-in or password reset flows. It includes a `shortMessage` indicating the account wasn't found and a specific `code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/forms.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Couldn't find your account.\",\n  \"code\": \"form_identifier_not_found\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI Tool using Package Managers (Bash)\nDESCRIPTION: Executes the `@clerk/upgrade` CLI tool using various package managers (npx, yarn dlx, pnpm dlx, bun dlx) to scan the codebase and identify changes required for upgrading from Core 1 to Core 2. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpx @clerk/upgrade --from=core-1\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dlx @clerk/upgrade --from=core-1\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dlx @clerk/upgrade --from=core-1\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dlx @clerk/upgrade --from=core-1\n```\n```\n\n----------------------------------------\n\nTITLE: Defining verifyPassword Function Type in TypeScript\nDESCRIPTION: TypeScript function signature for the verifyPassword method that checks if a user's password matches the supplied input. Takes VerifyPasswordParams and returns a Promise with verification status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/verify-password.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifyPassword(params: VerifyPasswordParams): Promise<{ verified: true }>\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Middleware and Accessing Auth Object in Node/Express (TypeScript)\nDESCRIPTION: Demonstrates integrating Clerk authentication into a Node.js Express application using the `expressRequireAuth` middleware from `@clerk/clerk-sdk-node`. Once the middleware runs, authentication details, including JWT claims, are available on the request object, typically accessed via `req.auth`. The example shows returning this auth object in a route handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_19\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing SupportedStrategy Component in Clerk Elements Sign-In Flow\nDESCRIPTION: This snippet demonstrates the usage of the SupportedStrategy component within the 'choose-strategy' step. It provides a button to switch to password-based sign-in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"choose-strategy\">\n  <SignIn.SupportedStrategy name=\"password\">Sign in with password</SignIn.SupportedStrategy>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk API Keys for Development (env)\nDESCRIPTION: Sets the required Clerk API keys as environment variables in the `.env.development` file for use during development. `PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY` is the Clerk Publishable Key, and `CLERK_FRONTEND_API` is the Clerk Frontend API URL, both obtained from the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nPLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_FRONTEND_API=https://{{fapi_url}}\n```\n\n----------------------------------------\n\nTITLE: Create Email Address Method Declaration\nDESCRIPTION: Method signature for creating a new email address for the current user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Migrating Synchronous to Asynchronous auth() in Clerk - Diff\nDESCRIPTION: This code diff shows the change from a synchronous to asynchronous invocation of the auth() function from @clerk/nextjs/server. The migration requires updating the handler to async, using await with auth(), and updating the return to handle the async data. Key parameters include the now-async userId property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_1\n\nLANGUAGE: diff\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server';\n\n- export function GET() {\n-  const { userId } = auth();\n+ export async function GET() {\n+  const { userId } = await auth();\n\n  return new Response(JSON.stringify({ userId }));\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Satellite Domain Environment Variables for Clerk\nDESCRIPTION: Environment variable configuration for satellite domains, including satellite-specific settings and authentication redirect URLs for both production and development environments.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\nNEXT_PUBLIC_CLERK_IS_SATELLITE=true\n# Production example:\nNEXT_PUBLIC_CLERK_DOMAIN=satellite.dev\nNEXT_PUBLIC_CLERK_SIGN_IN_URL=https://primary.dev/sign-in\nNEXT_PUBLIC_CLERK_SIGN_UP_URL=https://primary.dev/sign-up\n\n# Development example:\n# NEXT_PUBLIC_CLERK_DOMAIN=http://localhost:3001\n# NEXT_PUBLIC_CLERK_SIGN_IN_URL=http://localhost:3000/sign-in\n# NEXT_PUBLIC_CLERK_SIGN_UP_URL=http://localhost:3000/sign-up\n```\n\nLANGUAGE: env\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\nCLERK_IS_SATELLITE=true\n# Production example:\nCLERK_DOMAIN=satellite.dev\nCLERK_SIGN_IN_URL=https://primary.dev/sign-in\nCLERK_SIGN_UP_URL=https://primary.dev/sign-up\n\n# Development example:\n# CLERK_DOMAIN=http://localhost:3001\n# CLERK_SIGN_IN_URL=http://localhost:3000/sign-in\n# CLERK_SIGN_UP_URL=http://localhost:3000/sign-up\n```\n\n----------------------------------------\n\nTITLE: Example Usage of UpdatePhoneNumber\nDESCRIPTION: Practical example showing how to update a phone number's verification status using the Clerk Backend SDK. Demonstrates creating params object and calling the updatePhoneNumber method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/update-phone-number.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst phoneNumberId = 'idn_123'\n\nconst params = { verified: false }\n\nconst response = await clerkClient.phoneNumbers.updatePhoneNumber(phoneNumberId, params)\n```\n\n----------------------------------------\n\nTITLE: Using Clerk with Other SDKs in TypeScript\nDESCRIPTION: Example of using Clerk's authenticateRequest function with other Clerk SDKs, such as Next.js. It shows how to use the clerkClient that infers the publishableKey from environment variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/authenticate-request.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkClient } from '@clerk/nextjs/server'\n\nconst client = await clerkClient()\n\nexport async function GET(req: Request) {\n  const { isSignedIn } = await client.authenticateRequest(req, {\n    authorizedParties: ['https://example.com'],\n  })\n\n  if (!isSignedIn) {\n    return Response.json({ status: 401 })\n  }\n\n  // Perform protected actions\n  // Add logic to perform protected actions\n\n  return Response.json({ message: 'This is a reply' })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing WithUser HOC with React Hooks\nDESCRIPTION: Example of recreating the WithUser higher order component using Clerk's custom hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_50\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithUser = ({ children }) => {\n  const user = useUser()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(user)\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing an Email Link Flow with Clerk in JavaScript\nDESCRIPTION: This JavaScript example shows how to call the `clerk.signIn.createEmailLinkFlow` method. It destructures the returned object to get access to the `startEmailLinkFlow` and `cancelEmailLinkFlow` functions, which can then be used to manage the email link authentication process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nconst { startEmailLinkFlow, cancelEmailLinkFlow } = clerk.signIn.createEmailLinkFlow()\n```\n\n----------------------------------------\n\nTITLE: Verifying TOTP Setup - Clerk TypeScript\nDESCRIPTION: Defines the verifyTOTP function for validating the setup of an authenticator app. Expects a six-digit TOTP code as input and returns a promise resolving to a TOTPResource. MFA feature must be enabled for this operation to succeed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_34\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction verifyTOTP(params: VerifyTOTPParams): Promise<TOTPResource>\n```\n\n----------------------------------------\n\nTITLE: Defining ClerkAuthorization Interface with Default Roles in TypeScript\nDESCRIPTION: This snippet shows how to define a global ClerkAuthorization interface with Clerk's default organization roles. The interface is declared in a global scope to enhance typesafety throughout the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface ClerkAuthorization {\n    permission: ''\n    role: 'org:admin' | 'org:member'\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInButton in React\nDESCRIPTION: Shows how to create a custom sign-in button using SignInButton in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_7\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/clerk-react'\n\nexport default function Example() {\n  return (\n    <SignInButton>\n      <button>Custom sign in button</button>\n    </SignInButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Limited and Ordered User List\nDESCRIPTION: Example of retrieving a user list with a limit on the number of results and ordered by creation date in descending order.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.users.getUserList({\n  orderBy: '-created_at',\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Example Usage of deleteEmailAddress with Clerk Client\nDESCRIPTION: Demonstrates how to use the deleteEmailAddress method with the Clerk client to remove an email address using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/delete-email-address.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailAddressId = 'idn_123'\n\nconst response = await clerkClient.emailAddresses.deleteEmailAddress(emailAddressId)\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Redirect Environment Variables\nDESCRIPTION: This `.env` file configuration sets environment variables required by Clerk to manage redirects related to the custom sign-up page. `CLERK_SIGN_UP_URL` tells Clerk the path where the `<SignUp />` component is hosted. `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` defines the redirect destination after a successful sign-up if the user landed directly on the sign-up page. `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` specifies where to redirect if the user clicks the 'Sign in' link within the `<SignUp />` component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\n```env {{ filename: '.env' }}\nCLERK_SIGN_UP_URL=/sign-up\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\n```\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in Next.js Pages Router\nDESCRIPTION: This snippet shows how to customize a specific SignIn component instance in a Next.js Pages Router application by directly configuring the appearance for that particular component instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/nextjs'\n\nconst SignInPage = () => (\n  <SignIn\n    appearance={{\n      variables: {\n        colorPrimary: 'blue',\n        colorText: 'black',\n      },\n    }}\n  />\n)\n\nexport default SignInPage\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to a Single Instance in React\nDESCRIPTION: This snippet demonstrates how to style a specific SignIn component instance in a React application by directly passing appearance variables to that component instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/clerk-react'\n\nconst SignInPage = () => (\n  <SignIn\n    appearance={{\n      variables: {\n        colorPrimary: 'blue',\n        colorText: 'black',\n      },\n    }}\n  />\n)\n\nexport default SignInPage\n```\n\n----------------------------------------\n\nTITLE: Configuring Astro with Clerk and React\nDESCRIPTION: Configuration setup for integrating Clerk and React in astro.config.mjs file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/react.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'astro/config'\nimport node from '@astrojs/node'\nimport react from '@astrojs/react'\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [clerk(), react()],\n  output: 'server',\n  adapter: node({ mode: 'standalone' }),\n})\n```\n\n----------------------------------------\n\nTITLE: Attempting Second Factor Authentication with Phone Code in Clerk\nDESCRIPTION: Example of using the attemptSecondFactor method with a phone code strategy to complete multi-factor authentication. This method requires the strategy type and verification code as parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.attemptSecondFactor({\n  strategy: 'phone_code',\n  code: '123456',\n})\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/themes Package\nDESCRIPTION: Commands for installing the @clerk/themes package using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/themes\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/themes\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/themes\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/themes\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInButton in Next.js\nDESCRIPTION: Demonstrates how to create a custom sign-in button using SignInButton in Next.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return (\n    <SignInButton>\n      <button>Custom sign in button</button>\n    </SignInButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Sign-Up Link in Clerk Sign-In Flow (JSX)\nDESCRIPTION: This JSX snippet shows how to add a link to the sign-up page within the Clerk sign-in component. It uses a standard paragraph tag for surrounding text and Clerk's `Clerk.Link` component with the `navigate` prop set to \"sign-up\" to handle navigation. Tailwind CSS classes are used for styling the link.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\n<p className=\"text-center text-sm text-neutral-500\">\n  Don&apos;t have an account?{' '}\n  <Clerk.Link\n    navigate=\"sign-up\"\n    className=\"rounded px-1 py-0.5 text-neutral-700 outline-none hover:bg-neutral-100 focus-visible:bg-neutral-100\"\n  >\n    Sign up\n  </Clerk.Link>\n</p>\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Navigation Using Dedicated UserProfile Page in Clerk for Vue (Vue Single File Component)\nDESCRIPTION: Shows how to use Clerk's UserProfile in a dedicated Vue page component, inserting custom menu items before the standard 'account' and 'security' entries. Uses slot templates for custom label icons and content, and illustrates dependencies on '@clerk/vue'. Can be used in 'pages/user-profile.vue' to provide a dedicated user profile view with fully custom navigation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_15\n\nLANGUAGE: Vue\nCODE:\n```\n<script setup lang=\"ts\">\\nimport { UserProfile } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <UserProfile>\\n    <UserProfile.Page label=\"Custom Page\" url=\"custom\">\\n      <template #labelIcon>\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n        </svg>\\n      </template>\\n      <div>\\n        <h1>Custom page</h1>\\n        <p>This is the content of the custom page.</p>\\n      </div>\\n    </UserProfile.Page>\\n    <UserProfile.Link label=\"Homepage\" url=\"/\">\\n      <template #labelIcon>\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n        </svg>\\n      </template>\\n    </UserProfile.Link>\\n    <UserProfile.Page label=\"account\" />\\n    <UserProfile.Page label=\"security\" />\\n  </UserProfile>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Roles and Permissions for Clerk Authorization\nDESCRIPTION: This example demonstrates how to override the ClerkAuthorization interface to define custom roles and permissions. It replaces default roles with custom ones and adds application-specific permissions for a quiz-based system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/custom-types.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface ClerkAuthorization {\n    permission: 'org:quiz:create' | 'org:quiz:grade' | 'org:quiz:read' | 'org:quiz:fill'\n    role: 'org:super_admin' | 'org:teacher' | 'org:student'\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Limiting Results in getOrganizationInvitationList in TypeScript\nDESCRIPTION: Demonstrates how to limit the number of results returned by getOrganizationInvitationList. This example limits the response to 10 invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId,\n  // returns the first 10 results\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Sign-In URL Environment Variable for Clerk\nDESCRIPTION: Environment variable configuration to set the custom sign-in URL for a Clerk-powered Next.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_9\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_SIGN_IN_URL=\"/sign-in\"\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Fastify (Core 1 Context)\nDESCRIPTION: Shows how the `JwtPayload` (which included the `orgs` claim in Core 1) was accessed in Fastify applications using `getAuth` from `@clerk/fastify`. This example helps understand the impact of the `orgs` claim removal in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Defining updateOrganizationLogo Function in TypeScript\nDESCRIPTION: Function signature for updating an organization's logo using Clerk's Backend SDK. It takes an organization ID and update parameters, and returns a Promise resolving to an Organization object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-logo.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateOrganizationLogo(\n  organizationId: string,\n  params: UpdateLogoParams,\n): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Example Usage of getRedirectUrlList() with Clerk Backend SDK\nDESCRIPTION: This example demonstrates how to use the getRedirectUrlList() function from the Clerk Backend SDK to retrieve the list of redirect URLs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/get-redirect-url-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst response = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Astro SDK via yarn - Bash\nDESCRIPTION: This snippet installs the Clerk Astro SDK using yarn in an Astro project. Ensure yarn is already installed in your development environment. Running this in your project root adds Clerk to the dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/astro\n```\n\n----------------------------------------\n\nTITLE: Installing Tagged Previous Clerk Next.js SDK via npm (Bash)\nDESCRIPTION: This command uses npm to install a specific tagged version of the `@clerk/nextjs` SDK. The tag `latest-v4` points to the latest version within the v4 major release line, corresponding to the previous 'Core 1' release features as per the example. This allows users to install or roll back to the previous major version after a new 'Core' release. Requires having npm installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/sdk-versioning.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @clerk/nextjs@latest-v4\n```\n\n----------------------------------------\n\nTITLE: Getting Current User Data with useUser() in Vue\nDESCRIPTION: This Vue component demonstrates how to use the `useUser()` composable from `@clerk/vue` to access the current user's information. It utilizes the `isLoaded`, `isSignedIn`, and `user` reactive properties to conditionally render content based on the authentication and loading status, displaying the user's full name when signed in.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useUser } from '@clerk/vue'\n\nconst { isSignedIn, user, isLoaded } = useUser()\n</script>\n\n<template>\n  <div v-if=\"!isLoaded\">\n    <!-- Handle loading state -->\n  </div>\n\n  <div v-else-if=\"isSignedIn\">Hello {{ user?.fullName }}!</div>\n\n  <div v-else>Not signed in</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Configuring Vite for Ngrok in Nuxt\nDESCRIPTION: Configuration setup for Vite in Nuxt.js to allow ngrok host during development for webhook testing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineNuxtConfig({\n  // ... other config\n  vite: {\n    server: {\n      // Replace with your ngrok host\n      allowedHosts: ['fawn-two-nominally.ngrok-free.app'],\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes - Remix - TypeScript/TSX\nDESCRIPTION: Integrates multiple themes for Clerk using Remix and the ClerkApp HOC from @clerk/remix. dark and neobrutalism are imported from @clerk/themes and passed as an array in the appearance option. Also demonstrates standard Remix boilerplate. Requires @clerk/remix, @clerk/themes, and Remix dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport { dark, neobrutalism } from '@clerk/themes'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    baseTheme: [dark, neobrutalism],\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Destroy Email Address Method Declaration\nDESCRIPTION: Method signature for deleting an email address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Updating SignOutButton Component Props in Clerk React\nDESCRIPTION: Migration example for the SignOutButton component, which no longer accepts the signOutCallback prop. Instead, developers should use the redirectUrl prop to specify where users should be redirected after signing out.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_19\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport const Signout = () => {\n  return (\n    <SignOutButton\n      signOutCallback={() => {\n        window.location.href = '/your-path'\n      }}\n      redirectUrl=\"/your-path\"\n    >\n      <button>Sign Out</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: TypeScript SSO Flow Function Signature\nDESCRIPTION: Function signature for the startSSOFlow method returned by useSSO() hook. The method initiates an SSO authentication flow and accepts StartSSOFlowParams as input, returning a Promise with authentication results.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/use-sso.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction startSSOFlow(startSSOFlowParams: StartSSOFlowParams): Promise<StartSSOFlowReturnType>\n```\n\n----------------------------------------\n\nTITLE: Defining MFA Disable Function Signature in TypeScript\nDESCRIPTION: TypeScript function signature for disabling MFA. Takes a userId string parameter and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/disable-user-mfa.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction disableUserMFA(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Defining New Localization Keys - Clerk Components - JavaScript\nDESCRIPTION: This snippet defines an object containing new localization keys and their default English values for updated Clerk components. Use this as a fallback or template when customizing localization to ensure all necessary keys are defined, otherwise the defaults will be used. The object structure is hierarchical and covers form button texts, organization and user profile sections, account switching, and error messages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/component-redesign.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst newValues = {\n  formButtonPrimary__verify: 'Verify',\n  formFieldInputPlaceholder__confirmDeletionUserAccount: 'Delete account',\n  organizationProfile: {\n    invitePage: {\n      selectDropdown__role: 'Select role',\n    },\n    navbar: {\n      description: 'Manage your organization.',\n      general: 'General',\n      members: 'Members',\n      title: 'Organization',\n    },\n    profilePage: {\n      domainSection: {\n        menuAction__manage: 'Manage',\n        menuAction__remove: 'Delete',\n        menuAction__verify: 'Verify',\n      },\n    },\n    start: {\n      headerTitle__general: 'General',\n      profileSection: {\n        primaryButton: 'Edit profile',\n        title: 'Organization Profile',\n        uploadAction__title: 'Logo',\n      },\n    },\n    verifiedDomainPage: {\n      title: 'Update {{domain}}',\n    },\n  },\n  signIn: {\n    accountSwitcher: {\n      action__addAccount: 'Add account',\n      action__signOutAll: 'Sign out of all accounts',\n      subtitle: 'Select the account with which you wish to continue.',\n      title: 'Choose an account',\n    },\n    alternativeMethods: {\n      actionText: 'Don’t have any of these?',\n      subtitle: 'Facing issues? You can use any of these methods to sign in.',\n    },\n    forgotPassword: {\n      subtitle_email: 'First, enter the code sent to your email ID',\n      subtitle_phone: 'First, enter the code sent to your phone',\n      title: 'Reset password',\n    },\n  },\n  unstable__errors: {\n    form_param_format_invalid__phone_number: 'Phone number must be in a valid international format',\n  },\n  userProfile: {\n    emailAddressPage: {\n      verifyTitle: 'Verify email address',\n    },\n    formButtonPrimary__add: 'Add',\n    formButtonPrimary__remove: 'Remove',\n    formButtonPrimary__save: 'Save',\n    mfaPhoneCodePage: {\n      backButton: 'Use existing number',\n      successMessage1:\n        'When signing in, you will need to enter a verification code sent to this phone number as an additional step.',\n      successMessage2:\n        'Save these backup codes and store them somewhere safe. If you lose access to your authentication device, you can use backup codes to sign in.',\n      successTitle: 'SMS code verification enabled',\n    },\n    navbar: {\n      account: 'Profile',\n      description: 'Manage your account info.',\n      security: 'Security',\n      title: 'Account',\n    },\n    phoneNumberPage: {\n      verifySubtitle: 'Enter the verification code sent to {{identifier}}',\n      verifyTitle: 'Verify phone number',\n    },\n    start: {\n      profileSection: {\n        primaryButton: 'Edit profile',\n      },\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Defining CustomMenuItem Interface for UserButton in TypeScript\nDESCRIPTION: This code snippet defines the CustomMenuItem interface with its attributes for adding custom menu items to the UserButton component. It includes properties for label, navigation, click handling, icon mounting/unmounting, and content mounting/unmounting.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/custom-menu-item.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CustomMenuItem {\n  label: string;\n  href?: string;\n  onClick?: () => void;\n  open?: string;\n  mountIcon?: (el: HTMLDivElement) => void;\n  unmountIcon?: (el?: HTMLDivElement) => void;\n  mount?: (el: HTMLDivElement) => void;\n  unmount?: (el?: HTMLDivElement) => void;\n}\n```\n\n----------------------------------------\n\nTITLE: Home Route Component with Tab Creation\nDESCRIPTION: Component that adds a button to the extension's home page for opening the background worker demo in a new tab.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/create-clerk-client.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nexport const Home = () => {\n  return (\n    <>\n      <h1>Clerk + Chrome Extension</h1>\n      <button\n        onClick={() => {\n          chrome.tabs.create({\n            url: './tabs/background-worker-demo.html',\n          })\n        }}\n      >\n        Open background worker demo in a new tab\n      </button>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Provider for Strict CSP (TSX)\nDESCRIPTION: Shows how to set up the `<ClerkProvider>` component in your Next.js layout file when using Clerk's strict automatic CSP middleware. The `dynamic` prop is essential to ensure the provider correctly receives and utilizes the server-generated nonce.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_2\n\nLANGUAGE: TSX\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function Layout({ children }) {\n  return (\n    // When using clerkMiddleware with `strict` configuration,\n    // the nonce is automatically provided.\n    // No need to manually set the `nonce` prop on `<ClerkProvider>`\n    <ClerkProvider dynamic>\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in User.getOrganizationMemberships\nDESCRIPTION: Demonstration of pagination argument changes in User.getOrganizationMemberships method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_18\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Example of Direct Link to Sign-in Page with Redirect\nDESCRIPTION: This example demonstrates a direct link to a sign-in Account Portal page with a specified redirect URL. It shows how to structure the URL for a specific domain and redirect destination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/direct-links.mdx#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://accounts.myapp.com/sign-in?redirect_url=https://myapp.com/dashboard\n```\n\n----------------------------------------\n\nTITLE: Formatting Direct Links to Account Portal Pages\nDESCRIPTION: This snippet shows the format for creating direct links to Account Portal pages with a redirect URL. It ensures users can be redirected back to your application after completing their Account Portal flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/account-portal/direct-links.mdx#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://accounts.<your-domain.com>/<account-portal-page>?redirect_url=<your-redirect-url>\n```\n\n----------------------------------------\n\nTITLE: Using getPhoneNumber Function with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of how to use the getPhoneNumber function from the Clerk Backend SDK. It demonstrates retrieving a phone number using its ID and awaiting the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/get-phone-number.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst phoneNumberId = 'idn_123'\n\nconst response = await clerkClient.phoneNumbers.getPhoneNumber(phoneNumberId)\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk Class with Options (TypeScript)\nDESCRIPTION: Displays the TypeScript signature for the `Clerk` class constructor, used when importing `Clerk` directly from `@clerk/clerk-js`. It requires the Clerk Publishable Key and accepts optional `options` (DomainOrProxyUrl) to configure the connection endpoint (either `domain` or `proxyUrl`). This method is not available when using the window script.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nclass Clerk {\n  constructor(key: string, options?: DomainOrProxyUrl)\n}\n```\n\n----------------------------------------\n\nTITLE: Using currentUser() with Form Submission in Astro\nDESCRIPTION: Example demonstrating how to access current user data during form submission using Astro.locals.currentUser(). Includes user validation and data enrichment with user details.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/locals.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nif (Astro.request.method === 'POST') {\n  const user = await Astro.locals.currentUser()\n\n  if (!user) {\n    throw new Error('You must be signed in to use this feature')\n  }\n\n  const data = await Astro.request.formData()\n  const serverData = {\n    usersHobby: data.get('hobby'),\n    userId: user.id,\n    profileImage: user.imageUrl,\n  }\n\n  console.log('add item action completed with user details ', serverData)\n}\n---\n\n<form method=\"POST\">\n  <input value=\"soccer\" type=\"text\" name=\"hobby\" />\n  <button type=\"submit\">Submit your hobby</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using deletePhoneNumber Function with Clerk Backend SDK\nDESCRIPTION: Example of how to use the deletePhoneNumber function with the Clerk Backend SDK. It demonstrates deleting a phone number using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/delete-phone-number.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst phoneNumberId = 'idn_123'\n\nconst response = await clerkClient.phoneNumbers.deletePhoneNumber(phoneNumberId)\n```\n\n----------------------------------------\n\nTITLE: Using deleteUserProfileImage Function in TypeScript React\nDESCRIPTION: Example of how to use the deleteUserProfileImage function from the Clerk Backend SDK. It demonstrates deleting a user's profile image using their user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/delete-user-profile-image.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.deleteUserProfileImage(userId)\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes - Astro - JavaScript\nDESCRIPTION: Configures Clerk for Astro with stacked themes by passing dark and neobrutalism from @clerk/themes to the baseTheme property of the clerk integration, using integrations in defineConfig. Requires @clerk/astro and @clerk/themes packages. Clerk's configuration is placed inside the Astro config file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\nimport { dark, neobrutalism } from '@clerk/themes'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        baseTheme: [dark, neobrutalism],\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing TOTP MFA Management Page in Next.js\nDESCRIPTION: This code snippet defines a React component for managing TOTP-based multi-factor authentication settings. It includes functionality to enable/disable TOTP and generate backup codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport Link from 'next/link'\nimport { BackupCodeResource } from '@clerk/types'\n\n// If TOTP is enabled, provide the option to disable it\nconst TotpEnabled = () => {\n  const { user } = useUser()\n  const disableTOTP = useReverification(() => user?.disableTOTP())\n\n  return (\n    <div>\n      <p>\n        TOTP via authentication app enabled - <button onClick={() => disableTOTP()}>Remove</button>\n      </p>\n    </div>\n  )\n}\n\n// If TOTP is disabled, provide the option to enable it\nconst TotpDisabled = () => {\n  return (\n    <div>\n      <p>\n        Add TOTP via authentication app -{' '}\n        <Link href=\"/account/manage-mfa/add\">\n          <button>Add</button>\n        </Link>\n      </p>\n    </div>\n  )\n}\n\n// Generate and display backup codes\nexport function GenerateBackupCodes() {\n  const { user } = useUser()\n  const [backupCodes, setBackupCodes] = React.useState<BackupCodeResource | undefined>(undefined)\n  const createBackupCode = useReverification(() => user?.createBackupCode())\n\n  const [loading, setLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    if (backupCodes) {\n      return\n    }\n\n    setLoading(true)\n    void createBackupCode()\n      .then((backupCode: BackupCodeResource | undefined) => {\n        setBackupCodes(backupCode)\n        setLoading(false)\n      })\n      .catch((err) => {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2))\n        setLoading(false)\n      })\n  }, [])\n\n  if (loading) {\n    return <p>Loading...</p>\n  }\n\n  if (!backupCodes) {\n    return <p>There was a problem generating backup codes</p>\n  }\n\n  return (\n    <ol>\n      {backupCodes.codes.map((code, index) => (\n        <li key={index}>{code}</li>\n      ))}\n    </ol>\n  )\n}\n\nexport default function ManageMFA() {\n  const { isLoaded, user } = useUser()\n  const [showNewCodes, setShowNewCodes] = React.useState(false)\n\n  if (!isLoaded) return null\n\n  if (!user) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  return (\n    <>\n      <h1>User MFA Settings</h1>\n\n      {/* Manage TOTP MFA */}\n      {user.totpEnabled ? <TotpEnabled /> : <TotpDisabled />}\n\n      {/* Manage backup codes */}\n      {user.backupCodeEnabled && user.twoFactorEnabled && (\n        <div>\n          <p>\n            Generate new backup codes? -{' '}\n            <button onClick={() => setShowNewCodes(true)}>Generate</button>\n          </p>\n        </div>\n      )}\n      {showNewCodes && (\n        <>\n          <GenerateBackupCodes />\n          <button onClick={() => setShowNewCodes(false)}>Done</button>\n        </>\n      )}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Masked User Identifier in Clerk SignIn Component\nDESCRIPTION: Demonstrates how to use the SafeIdentifier component within a SignIn.Strategy to display a masked email address during the email code verification step. The component renders the user's email in a masked format for security purposes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_12\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Strategy name=\"email_code\">\n  <h1>Check your email</h1>\n  <p>\n    We sent a code to <SignIn.SafeIdentifier />.\n  </p>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Revoking a Clerk Invitation using cURL\nDESCRIPTION: This cURL command demonstrates how to revoke an existing Clerk invitation by sending a POST request to the specific invitation's revoke endpoint (`/v1/invitations/<invitation_id>/revoke`). It requires specifying the `invitation_id` in the URL path and providing the Clerk Secret Key in the Authorization header for authentication. The Content-Type header is also required.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/invitations.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://api.clerk.com/v1/invitations/<invitation_id>/revoke -X POST -H \"Authorization:Bearer {{secret}}\" -H 'Content-Type:application/json'\n```\n\n----------------------------------------\n\nTITLE: Defining VerificationCodeTooManyRequests Error Payload in Clerk (JSON)\nDESCRIPTION: This snippet specifies the JSON structure for an error when users have made too many verification code requests in a short period. It includes relevant short and long messages and an error code, instructing the client to enforce a cooldown (typically 30 seconds) before allowing another request. Use this as a template for error handling when rate-limiting verification workflows in Clerk integrations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/rate-limits.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Too many verification code requests\\\",\\n  \\\"longMessage\\\": \\\"Too many verification code requests. Please wait at least 30 seconds to receive your code before trying again.\\\",\\n  \\\"code\\\": \\\"verification_code_too_many_requests\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Start Step in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows how to implement the 'start' step of a sign-in flow using Clerk Elements. It includes an identifier field for email input and a submit action button.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"start\">\n  <Clerk.Field name=\"identifier\">\n    <Clerk.Label>Email</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n  <SignIn.Action submit>Sign In with Email</SignIn.Action>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Defining OrganizationCustomRoleKey Type for Organization Roles\nDESCRIPTION: A type definition that represents user roles in an organization. By default, it accepts string values like 'org:admin' and 'org:member', but can be customized through ClerkAuthorization to support custom role types.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-custom-role-key.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype OrganizationCustomRoleKey = string\n```\n\n----------------------------------------\n\nTITLE: Defining deleteOrganizationLogo Function in TypeScript\nDESCRIPTION: Function signature for deleteOrganizationLogo. It takes an organizationId as a string parameter and returns a Promise that resolves to an Organization object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization-logo.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteOrganizationLogo(organizationId: string): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Manual Session Token Verification in Go using Clerk\nDESCRIPTION: Shows how to manually verify session tokens without middleware, useful for non-HTTP contexts. Handles token extraction, verification, and user data retrieval directly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/verifying-sessions.mdx#2025-04-23_snippet_1\n\nLANGUAGE: go\nCODE:\n```\npackage main\n\nimport (\n\t\"fmt\"\n\t\"net/http\"\n\t\"strings\"\n\n\t\"github.com/clerk/clerk-sdk-go/v2\"\n\t\"github.com/clerk/clerk-sdk-go/v2/jwt\"\n\t\"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\nfunc main() {\n  clerk.SetKey(\"{{secret}}\")\n\n\tmux := http.NewServeMux()\n\tmux.HandleFunc(\"/\", publicRoute)\n\tmux.HandleFunc(\"/protected\", protectedRoute)\n\n\thttp.ListenAndServe(\":3000\", mux)\n}\n\nfunc publicRoute(w http.ResponseWriter, r *http.Request) {\n\tw.Write([]byte(`{\"access\": \"public\"}`))}\n\nfunc protectedRoute(w http.ResponseWriter, r *http.Request) {\n\tsessionToken := strings.TrimPrefix(r.Header.Get(\"Authorization\"), \"Bearer \")\n\n\tclaims, err := jwt.Verify(r.Context(), &jwt.VerifyParams{\n\t\tToken: sessionToken,\n\t})\n\tif err != nil {\n\t\tw.WriteHeader(http.StatusUnauthorized)\n\t\tw.Write([]byte(`{\"access\": \"unauthorized\"}`))    return\n\t}\n\n\tusr, err := user.Get(r.Context(), claims.Subject)\n\tif err != nil {\n\t\t// handle the error\n\t}\n\tfmt.Fprintf(w, `{\"user_id\": \"%s\", \"user_banned\": \"%t\"}`, usr.ID, usr.Banned)\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Deleted Localization Keys - Clerk Components - JavaScript\nDESCRIPTION: This snippet provides an array of localization key strings that have been removed from Clerk's updated component designs. Developers are advised to remove these keys from their custom localization objects as they are no longer referenced in the codebase. This list acts as a source for automating the removal of unused keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/component-redesign.mdx#2025-04-23_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst deletedKeys = [\n  'formFieldLabel__emailAddress_phoneNumber',\n  'formFieldLabel__phoneNumber_username',\n  'formFieldLabel__emailAddress_phoneNumber_username',\n  'formFieldInputPlaceholder__emailAddress_phoneNumber',\n  'formFieldInputPlaceholder__phoneNumber_username',\n  'formFieldInputPlaceholder__emailAddress_phoneNumber_username',\n  'signIn.forgotPassword.title_email',\n  'signIn.forgotPassword.title_phone',\n  'signIn.forgotPassword.formSubtitle_email',\n  'signIn.forgotPassword.formSubtitle_phone',\n  'signIn.emailCode.formSubtitle',\n  'signIn.phoneCode.formSubtitle',\n  'signIn.phoneCodeMfa.formSubtitle',\n  'signIn.totpMfa.formSubtitle',\n  'signIn.backupCodeMfa.formTitle',\n  'signIn.backupCodeMfa.formSubtitle',\n  'userProfile.start.headerSubtitle__account',\n  'userProfile.start.headerSubtitle__security',\n  'userProfile.start.emailAddressesSection.detailsTitle__primary',\n  'userProfile.start.emailAddressesSection.detailsSubtitle__primary',\n  'userProfile.start.emailAddressesSection.detailsTitle__nonPrimary',\n  'userProfile.start.emailAddressesSection.detailsSubtitle__nonPrimary',\n  'userProfile.start.emailAddressesSection.detailsTitle__unverified',\n  'userProfile.start.emailAddressesSection.detailsSubtitle__unverified',\n  'userProfile.start.emailAddressesSection.destructiveActionTitle',\n  'userProfile.start.emailAddressesSection.destructiveActionSubtitle',\n  'userProfile.start.phoneNumbersSection.detailsTitle__primary',\n  'userProfile.start.phoneNumbersSection.detailsSubtitle__primary',\n  'userProfile.start.phoneNumbersSection.detailsTitle__nonPrimary',\n  'userProfile.start.phoneNumbersSection.detailsSubtitle__nonPrimary',\n  'userProfile.start.phoneNumbersSection.detailsTitle__unverified',\n  'userProfile.start.phoneNumbersSection.detailsSubtitle__unverified',\n  'userProfile.start.phoneNumbersSection.destructiveActionTitle',\n  'userProfile.start.phoneNumbersSection.destructiveActionSubtitle',\n  'userProfile.start.connectedAccountsSection.title__connectionFailed',\n  'userProfile.start.connectedAccountsSection.title__connectionFailed',\n  'userProfile.start.connectedAccountsSection.title__reauthorize',\n  'userProfile.start.connectedAccountsSection.actionLabel__connectionFailed',\n  'userProfile.start.connectedAccountsSection.destructiveActionSubtitle',\n  'userProfile.start.connectedAccountsSection.destructiveActionAccordionSubtitle',\n  'userProfile.start.mfaSection.phoneCode.destructiveActionTitle',\n  'userProfile.start.mfaSection.phoneCode.destructiveActionSubtitle',\n  'userProfile.start.mfaSection.phoneCode.title__default',\n  'userProfile.start.mfaSection.phoneCode.title__setDefault',\n  'userProfile.start.mfaSection.phoneCode.subtitle__default',\n  'userProfile.start.mfaSection.phoneCode.subtitle__setDefault',\n  'userProfile.start.mfaSection.totp.title',\n  'userProfile.start.mfaSection.totp.subtitle',\n  'userProfile.start.mfaSection.totp.destructiveActionSubtitle',\n  'userProfile.start.mfaSection.totp.destructiveActionLabel',\n  'userProfile.start.activeDevicesSection.primaryButton',\n  'userProfile.start.activeDevicesSection.detailsTitle',\n  'userProfile.start.activeDevicesSection.detailsSubtitle',\n  'userProfile.start.activeDevicesSection.destructiveActionTitle',\n  'userProfile.start.activeDevicesSection.destructiveActionSubtitle',\n  'userProfile.start.web3WalletsSection.destructiveActionTitle',\n  'userProfile.start.web3WalletsSection.destructiveActionSubtitle',\n  'userProfile.start.dangerSection.deleteAccountTitle',\n  'userProfile.start.dangerSection.deleteAccountDescription',\n  'userProfile.profilePage.fileDropAreaTitle',\n  'userProfile.profilePage.fileDropAreaAction',\n  'userProfile.phoneNumberPage.infoText__secondary',\n  'userProfile.mfaPhoneCodePage.successMessage',\n  'organizationProfile.start.headerTitle__settings',\n  'organizationProfile.start.headerSubtitle__members',\n  'organizationProfile.start.headerSubtitle__settings',\n  'organizationProfile.profilePage.subtitle',\n  'organizationProfile.profilePage.domainSection.unverifiedDomain_menuAction__verify',\n  'organizationProfile.profilePage.domainSection.unverifiedDomain_menuAction__remove',\n  'organizationProfile.membersPage.start.headerTitle__active',\n  'organizationProfile.membersPage.start.headerTitle__invited',\n  'organizationProfile.membersPage.invitationsTab.manualInvitations.headerTitle',\n  'organizationProfile.membersPage.invitationsTab.manualInvitations.headerSubtitle',\n  'organizationProfile.membersPage.requestsTab.requests.headerTitle',\n  'organizationProfile.membersPage.requestsTab.requests.headerSubtitle',\n  'createOrganization.subtitle',\n]\n```\n\n----------------------------------------\n\nTITLE: Defining Backend Quickstart Cards using Custom Components (Markdown/MDX)\nDESCRIPTION: Utilizes the custom `<Cards>` component to present a grid layout featuring links, descriptions, and icons for Clerk's backend framework quickstart guides (Express, Fastify). Each card includes an icon embedded via the `<Include>` component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n<Cards>\n  - [Express](/docs/quickstarts/express)\n  - Easily add secure, beautiful, and fast authentication to your Express application with Clerk.\n  - {<Include src=\"_partials/icons/express\" />}\n\n  ---\n\n  - [Fastify](/docs/quickstarts/fastify)\n  - Easily add secure, beautiful, and fast authentication to your Fastify application with Clerk.\n  - {<Include src=\"_partials/icons/fastify\" />}\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Basic Invitation List Retrieval\nDESCRIPTION: Simple example of retrieving all non-revoked invitations using the default parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/get-invitation-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Updating Session List Retrieval in JavaScript\nDESCRIPTION: Shows the change in the return structure of getSessionList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_38\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Updated return signature for Users.getOrganizationMembershipList\nDESCRIPTION: The return signature of Users.getOrganizationMembershipList has changed from directly returning data to returning an object with data and totalCount properties, aligning with Backend API responses for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_19\n\nLANGUAGE: js\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Deleting Organization Domain - TypeScript Method Definition\nDESCRIPTION: Method signature for deleting an organization domain and removing it from the organization. Returns a Promise that resolves to void.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-domain.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction delete(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Running the Clerk Upgrade CLI Helper\nDESCRIPTION: Demonstrates how to execute the `@clerk/upgrade` CLI tool using various package runners (npx, yarn dlx, pnpm dlx, bun dlx) to automatically scan the codebase and identify necessary changes for the Core 2 upgrade. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with Dynamic Rendering in Next.js Layout\nDESCRIPTION: This snippet shows how to set up a Next.js layout with a dynamic ClerkProvider wrapped in a Suspense boundary. This configuration allows child components to access authentication data while supporting Partial Prerendering (PPR).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/rendering-modes.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { Suspense } from 'react'\n\nexport default function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <Suspense fallback={<Skeleton />}>\n      <ClerkProvider dynamic>{children}</ClerkProvider>\n    </Suspense>\n  )\n}\n\nfunction Skeleton() {\n  return <div>Loading...</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Sign-in Token with cURL\nDESCRIPTION: This snippet shows how to create a sign-in token using a cURL request to the Clerk API. It requires the user ID and returns a URL that can be used as an email link for authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/embedded-email-links.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/sign_in_tokens' \\\n  -X POST \\\n  -H 'Authorization: Bearer {{secret}}' \\\n  -H 'Content-Type: application/json' \\\n  -d '{ \"user_id\": \"user_123\" }'\n```\n\n----------------------------------------\n\nTITLE: Retrieving Domains for an Organization in JavaScript\nDESCRIPTION: This snippet demonstrates how to retrieve the list of domains for the currently active organization using the getDomains() method. It returns a paginated response of OrganizationDomain objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getDomains(params?: GetDomainsParams): Promise<ClerkPaginatedResponse<OrganizationDomain>>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.getDomains()\n```\n\n----------------------------------------\n\nTITLE: Updating Redirect URL List Retrieval in JavaScript\nDESCRIPTION: This snippet demonstrates the change in response payload for the getRedirectUrlList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Using getEmailAddress with Clerk Client\nDESCRIPTION: Example showing how to use the getEmailAddress method with clerkClient to retrieve email address data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/get-email-address.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst emailAddressId = 'idn_123'\n\nconst response = await clerkClient.emailAddresses.getEmailAddress(emailAddressId)\n```\n\n----------------------------------------\n\nTITLE: Function Definition - getOrganizationMembershipList\nDESCRIPTION: TypeScript function signature for retrieving organization memberships. Returns a PaginatedResourceResponse containing an array of OrganizationMembership objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-organization-membership-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationMembershipList(\n  params: GetOrganizationMembershipListParams,\n): Promise<PaginatedResourceResponse<OrganizationMembership[]>>\n```\n\n----------------------------------------\n\nTITLE: Adding Phone Number for MFA in Next.js with Clerk\nDESCRIPTION: This code snippet defines a React component for adding a new phone number to be used for multi-factor authentication. It handles the process of adding an unverified phone number, sending a verification code, and verifying the phone number.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-sms-based-mfa.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport { PhoneNumberResource } from '@clerk/types'\n\nexport default function Page() {\n  const { isLoaded, user } = useUser()\n  const [phone, setPhone] = React.useState('')\n  const [code, setCode] = React.useState('')\n  const [isVerifying, setIsVerifying] = React.useState(false)\n  const [successful, setSuccessful] = React.useState(false)\n  const [phoneObj, setPhoneObj] = React.useState<PhoneNumberResource | undefined>()\n  const createPhoneNumber = useReverification((phone: string) =>\n    user?.createPhoneNumber({ phoneNumber: phone }),\n  )\n\n  if (!isLoaded) return null\n\n  if (!user) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  // Handle addition of the phone number\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    try {\n      // Add unverified phone number to user\n      const res = await createPhoneNumber(phone)\n      // Reload user to get updated User object\n      await user.reload()\n\n      // Create a reference to the new phone number to use related methods\n      const phoneNumber = user.phoneNumbers.find((a) => a.id === res.id)\n      setPhoneObj(phoneNumber)\n\n      // Send the user an SMS with the verification code\n      phoneNumber?.prepareVerification()\n\n      // Set to true to display second form\n      // and capture the OTP code\n      setIsVerifying(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToUserProfile in Next.js\nDESCRIPTION: Example of using the RedirectToUserProfile component within a Next.js application's _app.tsx file. Shows how to wrap the component with ClerkProvider and SignedIn/SignedOut components for conditional rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-userprofile.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToUserProfile } from '@clerk/nextjs'\nimport { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignedIn>\n        <RedirectToUserProfile />\n      </SignedIn>\n      <SignedOut>\n        <p>You need to sign in to view your user profile.</p>\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Neon and Clerk\nDESCRIPTION: Configuration of environment variables needed for the application, including the Neon database connection string and Clerk authentication keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nDATABASE_URL=NEON_DB_CONNECTION_STRING\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Defining deleteOrganizationMembership Function in TypeScript\nDESCRIPTION: Function signature for `deleteOrganizationMembership()`. It takes `DeleteOrganizationMembershipParams` as input and returns a Promise resolving to an `OrganizationMembership` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization-membership.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteOrganizationMembership(\n  params: DeleteOrganizationMembershipParams,\n): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Applying Tailwind Classes to Clerk Components in Next.js Pages Router\nDESCRIPTION: Example of using the appearance prop to apply Tailwind CSS classes to a Clerk SignIn component in a Next.js app using the Pages Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ pageProps }: AppProps) {\n  return (\n    <ClerkProvider {...pageProps}>\n      <SignIn\n        appearance={{\n          elements: {\n            formButtonPrimary: 'bg-slate-500 hover:bg-slate-400 text-sm',\n          },\n        }}\n      />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Implementing Segmented OTP Input with Custom Rendering\nDESCRIPTION: Demonstrates how to create a segmented OTP input where each digit appears in its own visual container with status-based styling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"code\">\n  <Clerk.Input\n    type=\"otp\"\n    passwordManagerOffset={40}\n    render={({ value, status }) => <span data-status={status}>{value}</span>}\n  />\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Sign-Out Command in Cypress Tests - TypeScript\nDESCRIPTION: This snippet demonstrates signing a user out during a Cypress test using the cy.clerkSignOut custom command. The test signs in a user, navigates to a protected page (establishing session), and then signs out, ensuring the user's session is terminated. The sign-out command accepts an optional signOutOptions object for specifying sessionId and redirectUrl. Ensure that Clerk commands are initialized in your Cypress support file. The test ensures test independence and can be used in scenarios requiring user state reset between actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/custom-commands.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nit('sign out', () => {\n  cy.visit(`/`)\n  cy.clerkSignIn({ strategy: 'phone_code', identifier: '+15555550100' })\n  cy.visit('/protected')\n  cy.clerkSignOut()\n  // user is signed out from here on\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Invitation Sign-up Logic in JavaScript\nDESCRIPTION: This JavaScript file handles the custom sign-up flow for application invitations using Clerk. It extracts the invitation token from the URL, initializes Clerk, and manages the sign-up process including form submission and error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/application-invitations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  // Mount user button component\n  document.getElementById('signed-in').innerHTML = `\n    <div id=\"user-button\"></div>\n  `\n\n  const userbuttonDiv = document.getElementById('user-button')\n\n  clerk.mountUserButton(userbuttonDiv)\n} else {\n  // Get the token from the query parameter\n  const param = '__clerk_ticket'\n  const token = new URL(window.location.href).searchParams.get(param)\n\n  // Handle the sign-up form\n  document.getElementById('sign-up-form').addEventListener('submit', async (e) => {\n    e.preventDefault()\n\n    const formData = new FormData(e.target)\n    const firstName = formData.get('firstName')\n    const lastName = formData.get('lastName')\n    const password = formData.get('password')\n\n    try {\n      // Start the sign-up process using the ticket method\n      const signUpAttempt = await clerk.client.signUp.create({\n        strategy: 'ticket',\n        ticket: token,\n        firstName,\n        lastName,\n        password,\n      })\n\n      // If sign-up was successful, set the session to active\n      if (signUpAttempt.status === 'complete') {\n        await clerk.setActive({ session: signUpAttempt.createdSessionId })\n      } else {\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        console.error(JSON.stringify(signUpAttempt, null, 2))\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Astro\nDESCRIPTION: This code shows how to use Clerk's UserButton component in an Astro application. It demonstrates the usage of SignedIn and SignedOut components for conditional rendering based on authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_5\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignedIn, UserButton, SignInButton, SignedOut } from '@clerk/astro/components'\n---\n\n<SignedIn>\n  <UserButton />\n</SignedIn>\n<SignedOut>\n  <SignInButton />\n</SignedOut>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Proxy in Next.js Application\nDESCRIPTION: Next.js configuration for setting up Clerk proxy using the ClerkProvider component in the root layout file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider proxyUrl=\"https://app.dev/__clerk\">\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Field and Input Usage in Clerk\nDESCRIPTION: Demonstrates how to use Clerk's Field and Input components together to create a form field for collecting email inputs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"identifier\">\n  <Clerk.Label>Email</Clerk.Label>\n  <Clerk.Input type=\"email\" />\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Token Retrieval Method Definition in Swift\nDESCRIPTION: Function signature for getToken() method that retrieves user session tokens or JWT templates. Takes optional GetTokenOptions parameter and returns a TokenResource.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ios/get-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: swift\nCODE:\n```\nfunc getToken(\n  _ options: GetTokenOptions = .init()\n) async throws -> TokenResource?\n```\n\n----------------------------------------\n\nTITLE: Implementing Auth Store in React\nDESCRIPTION: Example of using $authStore in a React component to handle authentication states including loading, signed out, and signed in conditions. Uses useStore hook from nanostores/react.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/auth-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $authStore } from '@clerk/astro/client'\n\nexport default function ExternalData() {\n  const { userId } = useStore($authStore)\n\n  if (userId === undefined) {\n    // Handle loading state however you like\n    return <div>Loading...</div>\n  }\n\n  if (userId === null) {\n    // Handle signed out state however you like\n    return <div>Sign in to view this page</div>\n  }\n\n  return <div>...</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Opt-Out for Next.js via Environment Variable - Clerk SDK - env\nDESCRIPTION: Set the NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED environment variable in your Next.js project's .env file to disable Clerk telemetry collection. This applies telemetry opt-out specifically to Next.js applications using Clerk. No dependencies, but must be deployed with appropriate environment loading. Inputs: none. Outputs: disables Clerk SDK telemetry.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_3\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_TELEMETRY_DISABLED=1\n```\n\n----------------------------------------\n\nTITLE: Defining getUserList Function in TypeScript\nDESCRIPTION: Function signature for getUserList, which takes UserListParams and returns a Promise with PaginatedResourceResponse containing an array of User objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getUserList(): (params: UserListParams) => Promise<PaginatedResourceResponse<User[]>>\n```\n\n----------------------------------------\n\nTITLE: Warning Notice for X/Twitter Email Limitation\nDESCRIPTION: Important notice about X/Twitter v2's limitation regarding email addresses, requiring manual email entry from users after authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/x-twitter.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n> [!WARNING]\\n> X/Twitter v2 doesn't currently provide users' email addresses. Users must manually enter their email address when they return to your application after authenticating with X/Twitter.\n```\n\n----------------------------------------\n\nTITLE: Rendering Vue.js Logo with SVG Paths\nDESCRIPTION: SVG markup that creates the Vue.js logo using two path elements. The outer path creates the full V shape in Vue's primary green color (#42b883), while the inner path creates a smaller V shape in dark gray (#35495e) to complete the logo design.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/vue.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 196.32 170.02\">\n  <path fill=\"#42b883\" d=\"M120.83 0L98.16 39.26 75.49 0H0l98.16 170.02L196.32 0h-75.49z\" />\n\n  <path fill=\"#35495e\" d=\"M120.83 0L98.16 39.26 75.49 0H39.26l58.9 102.01L157.06 0h-36.23z\" />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Running Clerk CLI Upgrade Tool using npx - Bash\nDESCRIPTION: Runs the Clerk-provided CLI upgrade helper via npx to analyze and list breaking changes required for Core 2. This command scans your code and outputs necessary migration steps, reducing manual review.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Updating ClerkProvider Prop from tokenCache to storageCache in JSX\nDESCRIPTION: Illustrates the breaking change required when upgrading to Core 2: replacing the `tokenCache` prop on the `<ClerkProvider>` component with the new `storageCache` prop. The implementation passed to the prop must now conform to the `StorageCache` interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_13\n\nLANGUAGE: jsx\nCODE:\n```\n<ClerkProvider tokenCache={/* ... */}>\n<ClerkProvider storageCache={/* ... */}>\n```\n\n----------------------------------------\n\nTITLE: Handling User Lockout Error Response\nDESCRIPTION: Example of Clerk's user lockout error response structure showing the format of error messages and metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/error-handling.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"errors\": [\n    {\n      \"message\": \"Account locked\",\n      \"long_message\": \"Your account is locked. You will be able to try again in 30 minutes. For more information, contact support.\",\n      \"code\": \"user_locked\",\n      \"meta\": {\n        \"lockout_expires_in_seconds\": 1800\n      }\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: User Organization Invitation Public Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing public metadata for user organization invitations with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ninterface UserOrganizationInvitationPublicMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Updating a Clerk Organization Member's Role (JavaScript Example)\nDESCRIPTION: This snippet shows how to update a member's role within an organization using the `organization.updateMember` method. It requires an object containing the `userId` of the member and the new `role` to assign. The function returns a Promise resolving to the updated `OrganizationMembership` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait organization.updateMember({ userId: 'user_123', role: 'org:admin' })\n```\n```\n\n----------------------------------------\n\nTITLE: Setting Tracking Cookie via HTTP Response\nDESCRIPTION: Illustrates how a server (in this case, Facebook) might set a tracking cookie with SameSite=none, allowing it to be sent with both cross-site and same-site requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/cookies.mdx#2025-04-23_snippet_2\n\nLANGUAGE: http\nCODE:\n```\nHTTP/2 200\nSet-Cookie: fb_tracker=user123; SameSite=none\n\n...the content of the image\n```\n\n----------------------------------------\n\nTITLE: Creating an Organization with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example usage of the createOrganization function. It demonstrates how to create an organization by providing a name and the ID of the user creating it.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst name = 'test-org'\n\nconst createdBy = 'user_123'\n\nconst response = await clerkClient.organizations.createOrganization({ name, createdBy })\n```\n\n----------------------------------------\n\nTITLE: Theme Configuration in Astro Config\nDESCRIPTION: Shows how to configure Clerk themes and variables in an Astro configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nimport clerk from '@clerk/astro'\nimport { dark, neobrutalism, shadesOfPurple } from '@clerk/themes'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        baseTheme: [dark, neobrutalism],\n        variables: { colorPrimary: 'blue' },\n        signIn: {\n          baseTheme: [shadesOfPurple],\n          variables: { colorPrimary: 'blue' },\n        },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using npx (Bash)\nDESCRIPTION: Executes the Clerk upgrade helper tool using npx to scan the codebase and identify necessary changes for upgrading from Core 1 to Core 2. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Organization Profile Link in Dedicated Page - Clerk Next.js - TypeScript\nDESCRIPTION: This snippet showcases usage of the <OrganizationProfile /> component within a dedicated Next.js page, adding a custom homepage link with an SVG icon via OrganizationProfile.Link. The DotIcon function component provides the custom icon. The file must be a client component with '@clerk/nextjs' imported. Inputs are the label, icon, and URL; output is a profile page containing custom navigation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { OrganizationProfile } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n      <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\" />\\n    </svg>\\n  )\\n}\\n\\nconst OrganizationProfilePage = () => (\\n  <OrganizationProfile path=\\\"/organization-profile\\\" routing=\\\"path\\\">\\n    <OrganizationProfile.Link label=\\\"Homepage\\\" labelIcon={<DotIcon />} url=\\\"/\\\" />\\n  </OrganizationProfile>\\n)\\n\\nexport default OrganizationProfilePage\n```\n\n----------------------------------------\n\nTITLE: Mounting Clerk Components with CDN Method (HTML/JavaScript)\nDESCRIPTION: Example HTML structure demonstrating the CDN approach. It includes the Clerk SDK script tag, an event listener to call `Clerk.load()`, and logic within the listener to conditionally mount either the `<UserButton>` or `<SignIn>` component based on `Clerk.user` state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_10\n\nLANGUAGE: html\nCODE:\n```\n```html {{ filename: 'index.html' }}\n<div id=\"app\"></div>\n\n<!-- Initialize Clerk with your\nClerk Publishable Key and Frontend API URL -->\n<script\n  async\n  crossorigin=\"anonymous\"\n  data-clerk-publishable-key=\"{{pub_key}}\"\n  src=\"https://{{fapi_url}}/npm/@clerk/clerk-js@latest/dist/clerk.browser.js\"\n  type=\"text/javascript\"\n></script>\n\n<script>\n  window.addEventListener('load', async function () {\n    await Clerk.load()\n\n    if (Clerk.user) {\n      document.getElementById('app').innerHTML = `\n        <div id=\"user-button\"></div>\n      `\n\n      const userButtonDiv = document.getElementById('user-button')\n\n      // Note: The original snippet seems incomplete here.\n      // Assuming it should be: clerk.mountUserButton(userButtonDiv)\n      // But sticking to the provided text:\n    }\n\n    // Missing else block from original snippet logic\n  })\n</script>\n```\n*Note: The provided code snippet for this section appears incomplete in the original text.*\n```\n\n----------------------------------------\n\nTITLE: Configuring Authentication Layout in Expo Router with Clerk\nDESCRIPTION: This TSX snippet defines a layout component for an Expo Router authentication group (`(auth)`). It uses the `useAuth` hook from `@clerk/clerk-expo` to check the user's sign-in status. If the user is already signed in, it redirects them to the home page (`/`); otherwise, it renders the nested routes within the authentication group using `<Stack />`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Redirect, Stack } from 'expo-router'\nimport { useAuth } from '@clerk/clerk-expo'\n\nexport default function AuthenticatedLayout() {\n  const { isSignedIn } = useAuth()\n\n  if (isSignedIn) {\n    return <Redirect href={'/'} />\n  }\n\n  return <Stack />\n}\n```\n\n----------------------------------------\n\nTITLE: Using deleteOrganizationLogo Function in TypeScript\nDESCRIPTION: Example usage of the deleteOrganizationLogo function. It demonstrates how to call the function with an organization ID and log the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization-logo.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst response = await clerkClient.organizations.deleteOrganizationLogo(organizationId)\n\nconsole.log(response)\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Invitation with Redirect URL using cURL\nDESCRIPTION: This cURL command sends a POST request to create a Clerk invitation, specifying both the user's email address and a `redirect_url`. When the invited user clicks the invitation link, they will be redirected to the specified URL instead of the default Account Portal sign-up page. Authentication is done via the Authorization header using the Clerk Secret Key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/invitations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://api.clerk.com/v1/invitations -X POST -d '{\"email_address\": \"email@example.com\", \"redirect_url\": \"https://www.example.com/accept-invitation\"}' -H \"Authorization:Bearer {{secret}}\" -H 'Content-Type:application/json'\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Sign-In in Next.js\nDESCRIPTION: This snippet demonstrates how to create a custom OAuth sign-in flow using Clerk in a Next.js application. It uses the useSignIn hook to authenticate with a redirect strategy and handles both successful and error cases.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/oauth-connections.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport * as React from 'react'\nimport { OAuthStrategy } from '@clerk/types'\nimport { useSignIn } from '@clerk/nextjs'\n\nexport default function OauthSignIn() {\n  const { signIn } = useSignIn()\n\n  if (!signIn) return null\n\n  const signInWith = (strategy: OAuthStrategy) => {\n    return signIn\n      .authenticateWithRedirect({\n        strategy,\n        redirectUrl: '/sign-up/sso-callback',\n        redirectUrlComplete: '/',\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err: any) => {\n        // See https://clerk.com/docs/custom-flows/error-handling\n        // for more info on error handling\n        console.log(err.errors)\n        console.error(err, null, 2)\n      })\n  }\n\n  // Render a button for each supported OAuth provider\n  // you want to add to your app. This example uses only Google.\n  return (\n    <div>\n      <button onClick={() => signInWith('oauth_google')}>Sign in with Google</button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Invitations for an Organization in TypeScript\nDESCRIPTION: This snippet shows how to retrieve the list of invitations for the currently active organization using the getInvitations() method. It returns a paginated response of OrganizationInvitation objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getInvitations(\n  params?: GetInvitationsParams,\n): Promise<ClerkPaginatedResponse<OrganizationInvitation>>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.getInvitations()\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js Package\nDESCRIPTION: Terminal command for installing the Clerk Next.js package using npm.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_8\n\nLANGUAGE: sh\nCODE:\n```\nnpm i @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Adding a Custom Organization Profile Link in Dedicated Page - Clerk Vue - Vue\nDESCRIPTION: This Vue snippet demonstrates how to configure a dedicated organization profile page using Clerk's OrganizationProfile and add a custom link with an SVG icon via slots. '@clerk/vue' must be installed as a dependency. Developers provide the label, URL, and icon slot; output is a profile page with custom sidebar link navigation. This code uses Vue’s script setup and template syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_6\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\\\"ts\\\">\\nimport { OrganizationProfile } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <OrganizationProfile>\\n    <OrganizationProfile.Link label=\\\"Homepage\\\" url=\\\"/\\\">\\n      <template #labelIcon>\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n          <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n        </svg>\\n      </template>\\n    </OrganizationProfile.Link>\\n  </OrganizationProfile>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Prebuilding Expo Project\nDESCRIPTION: Command to prebuild the Expo project for native code integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/passkeys.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpx expo prebuild\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies and Creating a Branch for Clerk Documentation\nDESCRIPTION: Commands for setting up the Clerk documentation project locally, including forking/cloning the repo, installing dependencies, and creating a branch for pull requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ngit remote add upstream https://github.com/clerk/clerk-docs.git\ngit fetch upstream\ngit branch --set-upstream-to=upstream/main main\n```\n\n----------------------------------------\n\nTITLE: Defining Feature Not Implemented Error Object in JSON\nDESCRIPTION: Defines a JSON error object for representing cases when a feature is not yet implemented within Clerk. The object uses placeholders (e.g., <feature>) for feature names, and fields include shortMessage, longMessage, and code. This structure is intended to standardize API error output regarding feature availability for clients and integrators.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/features.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"not implemented\\\",\\n  \\\"longMessage\\\": \\\"Feature `<feature>` is not available yet\\\",\\n  \\\"code\\\": \\\"feature_not_implemented_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Fauna library with yarn\nDESCRIPTION: Command to install the Fauna JavaScript client library using yarn package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nyarn add fauna\n```\n\n----------------------------------------\n\nTITLE: Implementing Complex SVG Path Icon\nDESCRIPTION: Defines an SVG icon with a 32x32 viewport containing a single complex path element. The path uses a brick-red fill color (#BF4722) and implements a detailed geometric shape through multiple path commands.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/redwood.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" fill=\"none\">\n  <path\n    fill=\"#BF4722\"\n    d=\"m9.317 4.627 6.214 4.241c.14.094.304.144.472.148a.845.845 0 0 0 .472-.148l6.218-4.256a.85.85 0 0 0-.118-1.449L16.36.087a.853.853 0 0 0-.746 0L9.42 3.163a.848.848 0 0 0-.104 1.464Zm8.796 5.572a.86.86 0 0 0 .368.704l4.982 3.404a.837.837 0 0 0 1.034-.067l4.179-3.737a.849.849 0 0 0-.037-1.297l-3.99-3.191a.847.847 0 0 0-1.001-.039L18.483 9.51a.859.859 0 0 0-.37.689ZM5.725 14.831a.853.853 0 0 1 .148 1.092.834.834 0 0 1-.29.272L2.61 17.978a.84.84 0 0 1-.957-.066.853.853 0 0 1-.28-.924l1.1-3.461a.84.84 0 0 1 1.364-.375l1.89 1.679Zm16.134.361-5.378-3.68a.845.845 0 0 0-.944 0l-5.377 3.68a.861.861 0 0 0-.368.647.885.885 0 0 0 .283.695l5.373 4.806a.847.847 0 0 0 1.123 0l5.373-4.806a.861.861 0 0 0-.085-1.342Zm-14.344-.95L3.34 10.504a.864.864 0 0 1-.284-.67.835.835 0 0 1 .316-.642l3.99-3.209a.855.855 0 0 1 1.005-.039l5.16 3.534a.852.852 0 0 1 0 1.426l-4.976 3.404a.844.844 0 0 1-1.037-.066Zm21.43 5.368-4.25-2.544a.837.837 0 0 0-.991.094l-5.193 4.636a.858.858 0 0 0-.097 1.172c.09.113.208.2.342.255l7.205 2.92a.846.846 0 0 0 1.087-.443l2.233-5.002a.854.854 0 0 0-.336-1.088Zm.59-6.082 1.1 3.462h-.01a.847.847 0 0 1-1.236.989l-2.978-1.783a.831.831 0 0 1-.407-.646.842.842 0 0 1 .279-.718l1.888-1.682a.841.841 0 0 1 1.364.378Zm-15.76 9.048a.849.849 0 0 0-.27-.78L8.312 17.16a.836.836 0 0 0-.992-.094L3.07 19.61a.864.864 0 0 0-.34 1.084l2.238 5.002a.843.843 0 0 0 1.085.443l7.2-2.92a.849.849 0 0 0 .522-.643Zm2.549 1.427 5.779 2.34a.85.85 0 0 1 .509.695.847.847 0 0 1-.359.794L16.47 31.85A.833.833 0 0 1 16 32a.853.853 0 0 1-.472-.152l-5.779-4.017a.847.847 0 0 1 .165-1.49l5.779-2.34c.203-.08.43-.08.632.002Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updating Organization List Retrieval in JavaScript\nDESCRIPTION: This snippet demonstrates the change in return type for the organization list retrieval function. The new format includes a 'data' property for the items and a 'totalCount' property for pagination purposes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Preparing Email Address Verification for Clerk Sign-Up in TypeScript\nDESCRIPTION: Defines the `prepareEmailAddressVerification` function signature in TypeScript. This function initiates the email verification step for a sign-up attempt, typically by sending a code. It acts as a wrapper for `SignUp.prepareVerification({ strategy: 'email_code' })` but can be customized via `PrepareEmailAddressVerificationParams` to use alternative strategies like `'email_link'`. It returns a Promise resolving to the updated `SignUpResource`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareEmailAddressVerification(\n  params?: PrepareEmailAddressVerificationParams,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Updating User Data with $userStore\nDESCRIPTION: Demonstrates how to update the current user's data using the update() method across different frameworks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/user-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $userStore } from '@clerk/astro/client'\n\nexport default function User() {\n  const user = useStore($userStore)\n\n  if (user === undefined) {\n    // Handle loading state however you like\n    return null\n  }\n\n  if (user === null) return null\n\n  const updateUser = async () => {\n    await user.update({\n      firstName: 'John',\n      lastName: 'Doe',\n    })\n  }\n\n  return (\n    <>\n      <button onClick={updateUser}>Click me to update your name</button>\n      <p>user.firstName: {user?.firstName}</p>\n      <p>user.lastName: {user?.lastName}</p>\n    </>\n  )\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $userStore } from '@clerk/astro/client'\n\nconst user = useStore($userStore)\n\nconst updateUser = async () => {\n  await user.value.update({\n    firstName: 'John',\n    lastName: 'Doe',\n  })\n}\n</script>\n\n<template>\n  <div v-if=\"user === undefined\">\n    <!-- Handle loading state however you like -->\n  </div>\n\n  <div v-else-if=\"user !== null\">\n    <button @click=\"updateUser\">Click me to update your name</button>\n    <p>user.firstName: {{ user.firstName }}</p>\n    <p>user.lastName: {{ user.lastName }}</p>\n  </div>\n</template>\n```\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $userStore as user } from '@clerk/astro/client'\n\n  const updateUser = async () => {\n    await $user.update({\n      firstName: 'John',\n      lastName: 'Doe',\n    })\n  }\n</script>\n\n{#if $user === undefined}\n  <!-- Handle loading state however you like -->\n{:else if $user !== null}\n  <button on:click={updateUser}>Click me to update your name</button>\n  <p>user.firstName: {$user.firstName}</p>\n  <p>user.lastName: {$user.lastName}</p>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Backend API Rate Limits\nDESCRIPTION: Rate limits for backend API endpoints identified by Secret Key. Includes user creation, JWKS retrieval, and general endpoint limits.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/rate-limits.mdx#2025-04-23_snippet_1\n\nLANGUAGE: http\nCODE:\n```\nPOST /v1/users     # 20 requests per 10 seconds\nGET /v1/jwks       # No rate limit\n*    # 100 requests per 10 seconds\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Backend SDK Standalone in TypeScript\nDESCRIPTION: Example of using the Clerk Backend SDK on its own to authenticate a request. It demonstrates creating a Clerk client with environment variables and using it to authenticate an incoming request.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/authenticate-request.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nexport async function GET(req: Request) {\n  const clerkClient = createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n    publishableKey: process.env.CLERK_PUBLISHABLE_KEY,\n  })\n\n  const { isSignedIn } = await clerkClient.authenticateRequest(req, {\n    authorizedParties: ['https://example.com'],\n  })\n\n  if (!isSignedIn) {\n    return Response.json({ status: 401 })\n  }\n\n  // Add logic to perform protected actions\n\n  return Response.json({ message: 'This is a reply' })\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in User.getOrganizationSuggestions\nDESCRIPTION: Shows the changes to pagination parameters in User.getOrganizationSuggestions method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing WithClerk HOC with React Hooks\nDESCRIPTION: Example of recreating the WithClerk higher order component using Clerk's custom hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_49\n\nLANGUAGE: javascript\nCODE:\n```\nexport const WithClerk = ({ children }) => {\n  const clerk = useClerk()\n  if (typeof children !== 'function') throw new Error()\n\n  return children(clerk)\n}\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkExpressWithAuth Parameter from frontendApi to publishableKey (JavaScript)\nDESCRIPTION: Shows the change from using 'frontendApi' to 'publishableKey' as a parameter in the createClerkExpressWithAuth function. Both the key and value need to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkExpressWithAuth } from '@clerk/clerk-sdk-node'\n\ncreateClerkExpressWithAuth({ frontendApi: '...' })\ncreateClerkExpressWithAuth({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Configuring Alternative Routing Strategies for Clerk Components in JSX\nDESCRIPTION: Shows how to use hash or virtual routing strategies for Clerk authentication components as alternatives to the new default path routing in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_20\n\nLANGUAGE: jsx\nCODE:\n```\n<UserProfile routing=\"hash\" />\n<OrganizationProfile routing=\"virtual\" />\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to Clerk OrganizationProfile in Vue\nDESCRIPTION: Shows how to add custom pages to the Clerk `<OrganizationProfile />` component within a Vue application. Examples cover using `OrganizationSwitcher.OrganizationProfilePage` (for the modal context initiated by `<OrganizationSwitcher />`) and `OrganizationProfile.Page` (for a dedicated page context). Both components use props like `label` and `url`, and slots like `#labelIcon` (for the icon) and the default slot (for page content). Requires the `@clerk/vue` package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: vue\nCODE:\n```\n```vue {{ filename: 'App.vue' }}\n<script setup lang=\"ts\">\nimport { OrganizationSwitcher } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <OrganizationSwitcher>\n      <OrganizationSwitcher.OrganizationProfilePage label=\"Custom Page\" url=\"custom\">\n        <template #labelIcon>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n            <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n          </svg>\n        </template>\n        <div>\n          <h1>Custom page</h1>\n          <p>This is the content of the custom page.</p>\n        </div>\n      </OrganizationSwitcher.OrganizationProfilePage>\n    </OrganizationSwitcher>\n  </header>\n</template>\n```\n```\n\nLANGUAGE: vue\nCODE:\n```\n```vue {{ filename: 'pages/organization-profile.vue' }}\n<script setup lang=\"ts\">\nimport { OrganizationProfile } from '@clerk/vue'\n</script>\n\n<template>\n  <OrganizationProfile>\n    <OrganizationProfile.Page label=\"Custom Page\" url=\"custom\">\n      <template #labelIcon>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </template>\n      <div>\n        <h1>Custom page</h1>\n        <p>This is the content of the custom page.</p>\n      </div>\n    </OrganizationProfile.Page>\n  </OrganizationProfile>\n</template>\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Authentication Header\nDESCRIPTION: Creating a header component with Clerk's authentication components for handling signed-in and signed-out states.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/vue.mdx#2025-04-23_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <SignedOut>\n      <SignInButton />\n    </SignedOut>\n    <SignedIn>\n      <UserButton />\n    </SignedIn>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignUp in Remix\nDESCRIPTION: Example showing how to use RedirectToSignUp component in a Remix route with SignedIn/SignedOut flow control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signup.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, RedirectToSignUp, UserButton } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignUp />\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Second Factor Authentication with Clerk (JavaScript)\nDESCRIPTION: Begins the second factor (multi-factor authentication) process for a user using Clerk's `prepareSecondFactor` method. Only the 'phone_code' strategy is supported, requiring the user's `phoneNumberId` to send a one-time authentication code via SMS. Returns a `SignIn` object whose `secondFactorVerification` attribute contains the verification status. Dependencies: Clerk SDK must be initialized and user must have a phone number on file. Inputs: strategy ('phone_code'), phoneNumberId. Output: Promise resolving to a `SignIn` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.prepareSecondFactor({\n  strategy: 'phone_code',\n  phoneNumberId: '123',\n})\n```\n\n----------------------------------------\n\nTITLE: Authenticating with GoogleOneTap\nDESCRIPTION: Example showing how to authenticate users with GoogleOneTap and handle callbacks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\n// Optionally, you can set redirect URLs.\nconst customUrls = {\n  signInUrl: '/sign-in',\n  signUpUrl: '/sign-up',\n}\n// Initiate the authentication flow.\nconst signInOrUp = await clerk.authenticateWithGoogleOneTap({ token: 'xxxx' })\n// Set the session as active, and handle any navigation or redirects\nawait clerk.handleGoogleOneTapCallback(signInOrUp, customUrls)\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in Nuxt with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in a Nuxt application using Clerk. This snippet demonstrates how to customize the theme, size, and language of the CAPTCHA widget in the Nuxt configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_4\n\nLANGUAGE: ts\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      captcha: {\n        theme: 'dark',\n        size: 'flexible',\n        language: 'es-ES',\n      },\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering the Clerk <SignIn /> Component in a Remix Route (TypeScript)\nDESCRIPTION: Renders Clerk's <SignIn /> authentication component in a dedicated Remix route, allowing users to either sign in or sign up in one user flow. Requires the Clerk Remix package and import of the SignIn component. The exported Page function returns the <SignIn /> UI, and the file should be placed under a Remix route such as app/routes/sign-in.$.tsx. Input and output are managed by Remix and Clerk—the component handles authentication UI and events internally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { SignIn } from '@clerk/remix'\n\nexport default function Page() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: DeleteRedirectUrl Usage Example\nDESCRIPTION: Example showing how to delete a redirect URL using the Clerk client. Demonstrates passing a redirect URL ID and handling the async response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/delete-redirect-url.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst redirectUrlId = 'ru_123'\n\nconst response = await clerkClient.redirectUrls.deleteRedirectUrl(redirectUrlId)\n```\n\n----------------------------------------\n\nTITLE: Installing the dotenv Package using Package Managers (Bash)\nDESCRIPTION: Commands to install the `dotenv` package using various JavaScript package managers (npm, yarn, pnpm, bun). This package is used to load environment variables, such as Clerk API keys, from a `.env` file into the Node.js `process.env` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm install dotenv\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add dotenv\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add dotenv\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add dotenv\n```\n\n----------------------------------------\n\nTITLE: Using Offset in getOrganizationMembershipList with TypeScript\nDESCRIPTION: Demonstrates how to use the 'offset' parameter with getOrganizationMembershipList to skip a certain number of results. This example skips the first 10 memberships for pagination purposes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-membership-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationMembershipList({\n  organizationId,\n  // skips the first 10 memberships\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic Authentication in Grafbase Schema\nDESCRIPTION: GraphQL schema configuration for Grafbase that sets up authentication with Clerk as an OIDC provider and private access rules.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\nschema\n  @auth(\n    providers: [{ type: oidc, issuer: \"{{ process.env.NEXT_PUBLIC_CLERK_FRONTEND_API_URL }}\" }]\n    rules: [{ allow: private }]\n  ) {\n  query: Query\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Clerk Middleware to Rack Application - Ruby\nDESCRIPTION: This snippet demonstrates how to require and include the Clerk middleware in a Rack application by updating the config.ru file. It requires necessary dependencies (rack, clerk/rack, and the application itself) and registers Clerk::Rack::Middleware so Clerk authentication information is accessible in the request environment. This setup is mandatory for Clerk to function in any Rack-based Ruby app; dependencies are the 'clerk-sdk-ruby' gem and your own Rack app file (e.g., app.rb). Expects correctly installed gems and a defined App class.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rack.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"rack\"\nrequire \"clerk/rack\"\n\nrequire_relative \"app\"\n\nuse Clerk::Rack::Middleware\nrun App.new\n\n```\n\n----------------------------------------\n\nTITLE: Type Inference Example for Webhooks\nDESCRIPTION: Example showing how to narrow webhook event types for better type inference and autocompletion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nif (evt.type === 'user.created') {\n  console.log('userId:', evt.data.id)\n}\n```\n\n----------------------------------------\n\nTITLE: Managing MFA Settings in React Native with Clerk\nDESCRIPTION: A React Native component for managing TOTP MFA settings. It displays current MFA status, allows enabling/disabling TOTP authentication, and manages backup codes using Clerk's user object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { useUser } from '@clerk/clerk-expo'\nimport { useRouter } from 'expo-router'\nimport { View, Text, Button, FlatList } from 'react-native'\nimport { BackupCodeResource } from '@clerk/types'\n\nexport default function ManageTOTPMfa() {\n  const router = useRouter()\n  const [backupCodes, setBackupCodes] = React.useState<BackupCodeResource | undefined>(undefined)\n  const [loading, setLoading] = React.useState(false)\n\n  const { isLoaded, user } = useUser()\n\n  if (!isLoaded || !user) return null\n\n  const generateBackupCodes = () => {\n    setLoading(true)\n    void user\n      ?.createBackupCode()\n      .then((backupCodes: BackupCodeResource) => {\n        setBackupCodes(backupCodes)\n        setLoading(false)\n      })\n      .catch((error) => {\n        console.log('Error:', error)\n        setLoading(false)\n      })\n  }\n\n  const disableTOTP = async () => {\n    await user.disableTOTP()\n  }\n\n  const MFAEnabled = () => {\n    return (\n      <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n        <Text>TOTP via authentication app enabled - </Text>\n        <Button onPress={() => disableTOTP()} title=\"Remove\" />\n      </View>\n    )\n  }\n\n  const MFADisabled = () => {\n    return (\n      <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n        <Text>Add TOTP via authentication app - </Text>\n        <Button onPress={() => router.push('/add-mfa')} title=\"Add\" />\n      </View>\n    )\n  }\n\n  return (\n    <>\n      <Text>Current MFA Settings</Text>\n\n      <Text>Authenticator App</Text>\n\n      {user.totpEnabled ? <MFAEnabled /> : <MFADisabled />}\n\n      {user.backupCodeEnabled && (\n        <View>\n          <Text>Backup Codes</Text>\n          {loading && <Text>Loading...</Text>}\n          {backupCodes && !loading && (\n            <FlatList\n              data={backupCodes.codes}\n              renderItem={(code) => <Text>{code.item}</Text>}\n              keyExtractor={(item) => item}\n            />\n          )}\n          <Button onPress={() => generateBackupCodes()} title=\"Regenerate Codes\" />\n        </View>\n      )}\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Protected Server Actions with Client Components - Server Action\nDESCRIPTION: This snippet shows how to create a server action file that uses Clerk auth() to protect functionality. It demonstrates the server-side portion of implementing protected actions that will be used in client components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n'use server'\nimport { auth } from '@clerk/nextjs/server'\n\nexport async function addItem(formData: FormData) {\n  const { userId } = await auth()\n\n  if (!userId) {\n    throw new Error('You must be signed in to add an item to your cart')\n  }\n\n  console.log('add item server action', formData)\n}\n```\n\n----------------------------------------\n\nTITLE: Complete JWT Example in Plaintext\nDESCRIPTION: Shows a full example of an encoded JWT including all three components - header, payload, and signature.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/tokens-and-signatures.mdx#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\neyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.Eci61G6w4zh_u9oOCk_v1M_sKcgk0svOmW4ZsL-rt4ojGUH2QY110bQTYNwbEVlowW7phCg7vluX_MCKVwJkxJT6tMk2Ij3Plad96Jf2G2mMsKbxkC-prvjvQkBFYWrYnKWClPBRCyIcG0dVfBvqZ8Mro3t5bX59IKwQ3WZ7AtGBYz5BSiBlrKkp6J1UmP_bFV3eEzIHEFgzRa3pbr4ol4TK6SnAoF88rLr2NhEz9vpdHglUMlOBQiqcZwqrI-Z4XDyDzvnrpujIToiepq9bCimPgVkP54VoZzy-mMSGbthYpLqsL_4MQXaI1Uf_wKFAUuAtzVn4-ebgsKOpvKNzVA\n```\n\n----------------------------------------\n\nTITLE: Required Clerk Permission: Manage Members\nDESCRIPTION: Specifies the Clerk system permission identifier (`org:sys_memberships:manage`) required for a role to manage organization memberships (add, remove, update roles). This is one of the minimum requirements for a role to be designated as the Creator role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/creator-role.mdx#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\norg:sys_memberships:manage\n```\n\n----------------------------------------\n\nTITLE: Securing Edge Middleware with withEdgeMiddlewareAuth (React/Next.js)\nDESCRIPTION: This snippet shows how to secure Next.js edge middleware using the withEdgeMiddlewareAuth helper, which injects the Clerk authentication context into middleware requests. The middleware function can access user/session data and getToken for additional logic. This approach parallels client-side useAuth and requires @clerk/nextjs/edge-middleware and Next.js edge functions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { withEdgeMiddlewareAuth } from '@clerk/nextjs/edge-middleware'\n\nexport const middleware = withEdgeMiddlewareAuth((req, ev) => {\n  const { userId, sessionId, getToken } = req.auth\n  // Your middleware\n})\n```\n\n----------------------------------------\n\nTITLE: Querying User List with Partial Matching\nDESCRIPTION: Shows how to use the query parameter to perform a broader search across multiple user attributes like userId, emailAddress, phoneNumber, username, web3Wallet, firstName, and lastName.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// Matches users with the string `test` matched in multiple user attributes.\nconst { data, totalCount } = await clerkClient.users.getUserList({\n  query: 'test',\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing Clerk Session in Rails ApplicationController (Ruby)\nDESCRIPTION: Includes the `Clerk::Authenticatable` concern in `ApplicationController` to make the `clerk` helper available in controllers and views. Defines a private `require_clerk_session!` method that checks for an active Clerk session (`clerk.session`) and redirects to the Clerk sign-in URL (configured via `CLERK_SIGN_IN_URL` environment variable or `sign_in_url` method) if no session exists. This method serves as a reusable authentication check.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rails.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\n```ruby {{ filename: 'app/controllers/application_controller.rb' }}\nclass ApplicationController < ActionController::Base\n  include Clerk::Authenticatable\n\n  private\n\n  # If the user is not authenticated, redirect to the sign-in page\n  def require_clerk_session!\n    # The `CLERK_SIGN_IN_URL` env var must be set or the `sign_in_url` method will fail\n    redirect_to clerk.sign_in_url unless clerk.session\n  end\nend\n```\n```\n\n----------------------------------------\n\nTITLE: Rendering InstantDB Platform Logo SVG – SVG\nDESCRIPTION: This code displays InstantDB's logo as a white rectangle on black, using SVG markup. Can be embedded in any place where SVG is supported for clear brand identification, without additional logic or parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_6\n\nLANGUAGE: SVG\nCODE:\n```\n<svg width=\"112\" height=\"112\" viewBox=\"0 0 112 112\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> <g clip-path=\"url(#clip0_95_2)\"> <path d=\"M112 0H0V112H112V0Z\" fill=\"black\"/> <path d=\"M51.865 19.9785H21.24V92.166H51.865V19.9785Z\" fill=\"white\"/> </g> <defs> <clipPath id=\"clip0_95_2\"> <rect width=\"112\" height=\"112\" fill=\"white\"/> </clipPath></defs></svg>\n```\n\n----------------------------------------\n\nTITLE: Implementing Authorization in Next.js Server Actions\nDESCRIPTION: This snippet demonstrates how to use the `has()` function to check user permissions in a Next.js Server Action. It checks if the user has the 'org:team_settings:manage' permission and returns a 403 error if not authorized.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function ExampleServerComponent() {\n  async function myServerAction(formData: FormData) {\n    'use server'\n    const { has } = await auth()\n\n    // Check if the user is authorized\n    const canManage = has({ permission: 'org:team_settings:manage' })\n\n    // If has() returns false, the user does not have the correct permissions\n    // You can choose how your app responds. This example returns a 403 error.\n    if (!canManage)\n      return Response.json({ error: 'User does not have the correct permissions' }, { status: 403 })\n\n    // If the user is both authenticated and authorized, move forward with your logic\n    return users.getTeams(userId)\n  }\n\n  return (\n    <form action={myServerAction}>\n      {/* Add UI for managing team settings */}\n      <button type=\"submit\">Submit</button>\n    </form>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating useOrganization Hook Parameters in JavaScript\nDESCRIPTION: Shows the changes in the useOrganization hook parameters. The 'invitationList' param has been replaced by 'invitations' with a different structure. Also notes that useOrganizations is deprecated in favor of useOrganization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_44\n\nLANGUAGE: javascript\nCODE:\n```\n// before\nconst { invitationList } = useOrganization({\n  invitationList: { limit: 10, offset: 1 },\n})\n\n// after\nconst { invitations } = useOrganization({\n  invitations: {\n    initialPage: 1,\n    pageSize: 10,\n  },\n})\n\n// you can also simply return all invitations\nconst { invitations } = useOrganization({ invitations: true })\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Remix SDK using pnpm\nDESCRIPTION: This command utilizes the pnpm package manager to install the `@clerk/remix` SDK. Installing this package enables the use of Clerk's authentication functionalities within a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for User.getOrganizationInvitations in JavaScript\nDESCRIPTION: The pagination arguments for User.getOrganizationInvitations have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Navigating with ClerkJS Custom Router Method - TypeScript\nDESCRIPTION: Defines the TypeScript signature for `navigate`, a helper function that triggers custom navigation logic. Accepts a destination path or URL (`to: string | undefined`) and returns a Promise. Can be tied to your app's custom router via function props. When awaited, the returned Promise resolves after navigation is complete, but the exact resolved value is framework-dependent.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_22\n\nLANGUAGE: typescript\nCODE:\n```\nfunction navigate(to: string | undefined): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Defining OrganizationMembershipPublicUserData Properties in TypeScript\nDESCRIPTION: This snippet defines the properties of the OrganizationMembershipPublicUserData object, which contains public information about the user associated with the membership, including identifiers and profile details.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-organization-membership.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationMembershipPublicUserData {\n  identifier: string;\n  firstName: string;\n  lastName: string;\n  imageUrl: string;\n  hasImage: boolean;\n  userId: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Basic User Count Example\nDESCRIPTION: Simple example showing how to get the total count of all users using the Clerk client.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-count.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.users.getCount()\n```\n\n----------------------------------------\n\nTITLE: Reordering Default and Custom Organization Profile Navigation - Clerk Next.js - TypeScript\nDESCRIPTION: This example shows advanced navigation customization in Clerk's OrganizationSwitcher for Next.js, including adding custom pages and links and reordering default items ('members', 'general') by using the 'label' prop. It features both a custom page component and the DotIcon SVG. Requires '@clerk/nextjs', must be used on the client. Inputs include label, URL, icon, and component slots; output is a fully customized organization switcher navigation. The first item must not be a custom link per Clerk's constraints.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\\n\\nimport { OrganizationSwitcher } from '@clerk/nextjs'\\n\\nconst DotIcon = () => {\\n  return (\\n    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n      <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\" />\\n    </svg>\\n  )\\n}\\n\\nconst CustomPage = () => {\\n  return (\\n    <div>\\n      <h1>Custom page</h1>\\n      <p>This is the content of the custom page.</p>\\n    </div>\\n  )\\n}\\n\\nconst Header = () => (\\n  <header>\\n    <OrganizationSwitcher>\\n      <OrganizationSwitcher.OrganizationProfilePage\\n        label=\\\"Custom Page\\\"\\n        url=\\\"custom\\\"\\n        labelIcon={<DotIcon />}\\n      >\\n        <CustomPage />\\n      </OrganizationSwitcher.OrganizationProfilePage>\\n      <OrganizationSwitcher.OrganizationProfileLink\\n        label=\\\"Homepage\\\"\\n        url=\\\"/\\\"\\n        labelIcon={<DotIcon />}\\n      />\\n      <OrganizationSwitcher.OrganizationProfilePage label=\\\"members\\\" />\\n      <OrganizationSwitcher.OrganizationProfilePage label=\\\"general\\\" />\\n    </OrganizationSwitcher>\\n  </header>\\n)\\n\\nexport default Header\n```\n\n----------------------------------------\n\nTITLE: Using Clerk Components in React Header\nDESCRIPTION: Example of implementing Clerk authentication components in a React header component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/react.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignInButton, SignedIn, SignedOut, UserButton } from '@clerk/astro/react'\n\nexport default function Header() {\n  return (\n    <>\n      <p>My App</p>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting First Factor Verification in JavaScript\nDESCRIPTION: This example shows how to use the attemptFirstFactor method of the SignIn object in JavaScript. It attempts to verify the first factor using an email code strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.attemptFirstFactor({\n  strategy: 'email_code',\n  code: '123456',\n})\n```\n\n----------------------------------------\n\nTITLE: Mounting SignUp Component with JavaScript\nDESCRIPTION: This snippet shows how to mount the SignUp component using JavaScript. It initializes Clerk, creates a div element, and uses the mountSignUp method to render the component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-up\"></div>\n`\n\nconst signUpDiv = document.getElementById('sign-up')\n\nclerk.mountSignUp(signUpDiv)\n```\n\n----------------------------------------\n\nTITLE: Handling Invalid Organization Slug with OrganizationList - Clerk - TypeScript\nDESCRIPTION: Provides a server-side page implementation for Next.js that detects mismatches between the URL organization slug and the active session's organization. If slugs differ, it renders an error message and an OrganizationList for recovery. This relies on Clerk's auth server helper, OrganizationList component, and expects params from a dynamic route. Outputs an error and selectable organizations on failure, or a welcome message on match. Requires Clerk Next.js SDK and proper server-side environment setup.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\nimport { OrganizationList } from '@clerk/nextjs'\n\nexport default async function Home({ params }: { params: { slug: string } }) {\n  const { orgSlug } = await auth()\n\n  // Check if the organization slug from the URL params doesn't match\n  // the active organization slug from the user's session.\n  // If they don't match, show an error message and the list of valid organizations.\n  if (params.slug != orgSlug) {\n    return (\n      <>\n        <p>Sorry, organization {params.slug} is not valid.</p>\n        <OrganizationList\n          hideSlug={false}\n          hidePersonal={false}\n          afterCreateOrganizationUrl=\"/orgs/:slug\"\n          afterSelectOrganizationUrl=\"/orgs/:slug\"\n          afterSelectPersonalUrl=\"/me\"\n        />\n      </>\n    )\n  }\n\n  return <div>Welcome to organization {orgSlug}</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using pnpm dlx\nDESCRIPTION: Executes the `@clerk/upgrade` CLI tool via pnpm dlx to scan the codebase and identify necessary changes for upgrading from Core 1. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Updating Return Type for User.getOrganizationMembershipList in JavaScript\nDESCRIPTION: This snippet shows the change in return type for the User.getOrganizationMembershipList method. The new return type includes both 'data' and 'totalCount' properties, requiring an adjustment in how the returned data is accessed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Initiating a Clerk Sign-Up Process in TypeScript\nDESCRIPTION: Defines the `create` function signature in TypeScript. This function initiates a new sign-up process by returning a `SignUp` object based on the provided `params`. It requires `SignUpCreateParams` which vary based on enabled Clerk sign-up options. The function returns a Promise that resolves to a `SignUpResource`, representing the state of the sign-up attempt.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(params: SignUpCreateParams): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Updated Auth Object Type Definition\nDESCRIPTION: Shows the changes in the middleware Auth object type definition, including new properties for organization-related data and permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_29\n\nLANGUAGE: typescript\nCODE:\n```\ntype LegacyAuthObject = {\ntype AuthObject = {\n  sessionId: string | null\n  actor: ActClaim | undefined | null\n  userId: string | null\n  getToken: ServerGetToken | null\n  debug: AuthObjectDebug | null\n  claims: JwtPayload | null\n  sessionClaims: JwtPayload | null\n  orgId: string | undefined | null\n  orgRole: OrganizationCustomRoleKey | undefined | null\n  orgSlug: string | undefined | null\n  orgPermissions: OrganizationCustomPermissionKey[] | undefined | null\n  has: CheckAuthorizationWithCustomPermissions | null\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for Biometric Sign-In in Expo\nDESCRIPTION: Install the required peer dependencies expo-local-authentication and expo-secure-store for enabling biometric authentication and secure credential storage in an Expo app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/local-credentials.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install expo-local-authentication expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add expo-local-authentication expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add expo-local-authentication expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add expo-local-authentication expo-secure-store\n```\n\n----------------------------------------\n\nTITLE: Upgrading UserButton Usage to Core 2 - React JSX\nDESCRIPTION: This JSX snippet demonstrates the recommended change to the <UserButton> component when upgrading to Core 2. Previously, a redirect URL was explicitly set via afterSignOutUrl; now, with '/' as the default, this is unnecessary, and the prop can be removed. Dependency: @clerk/clerk-js v5, React. Key parameter: afterSignOutUrl (deprecated unless non-default). Input: React component usage. Output: UserButton behaves as before. The second line shows the new, simpler syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton afterSignOutUrl=\"/\" />\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Reordering UserButton Menu Items in Next.js\nDESCRIPTION: Demonstrates how to reorder default menu items and add custom items in the UserButton component using Next.js. Shows implementation of sign out at the top, custom organization creation link in the middle, and manage account at the bottom.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_11\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { UserButton } from '@clerk/nextjs'\n\nconst DotIcon = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\" />\n    </svg>\n  )\n}\n\nexport default function Home() {\n  return (\n    <header>\n      <UserButton>\n        <UserButton.MenuItems>\n          <UserButton.Action label=\"signOut\" />\n          <UserButton.Link\n            label=\"Create organization\"\n            labelIcon={<DotIcon />}\n            href=\"/create-organization\"\n          />\n          <UserButton.Action label=\"manageAccount\" />\n        </UserButton.MenuItems>\n      </UserButton>\n    </header>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with JavaScript\nDESCRIPTION: This snippet demonstrates how to update a user's metadata using Clerk's JavaScript SDK. It initializes the Clerk client, checks if a user is logged in, and updates the user's birthday in unsafeMetadata or displays a sign-in form if no user is authenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\nif (clerk.user) {\n  await clerk.user\n    .update({\n      unsafeMetadata: {\n        birthday: '01-01-2000',\n      },\n    })\n    .then((res) => console.log(res))\n    .catch((error) => console.log('An error occurred:', error.errors))\n} else {\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Session Claims with @clerk/backend (Core 1) (TypeScript)\nDESCRIPTION: Illustrates accessing session claims (JwtPayload) using the `createClerkClient` and `authenticateRequest` methods from the `@clerk/backend` package in Core 1. This example shows retrieving claims before the `orgs` claim was removed in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Required Clerk Permission: Read Members\nDESCRIPTION: Specifies the Clerk system permission identifier (`org:sys_memberships:read`) required for a role to read organization membership information. This is one of the minimum requirements for a role to be designated as the Creator role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/creator-role.mdx#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\norg:sys_memberships:read\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getMembershipRequests Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for Organization.getMembershipRequests have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Rejecting Organization Membership Request in TypeScript\nDESCRIPTION: Method to reject a pending request from a user to join an organization. Returns a Promise that resolves to the updated OrganizationMembershipRequest object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-membership-request.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction reject(): Promise<OrganizationMembershipRequest>\n```\n\n----------------------------------------\n\nTITLE: Defining a Custom signUp Localization Object in JavaScript\nDESCRIPTION: This code block illustrates a JavaScript object for customizing Clerk's signUp component localization. It's a direct extract of the internal localization structure, providing new strings for various sign-up stages (start, emailLink, emailCode, phoneCode, continue). Dependencies: follows Clerk's localization key conventions. Inputs: translation keys and string values. Output: Object suitable for passing into ClerkProvider's localization prop. Designed for users to override multiple, nested translation strings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nsignUp: {\n  start: {\n    title: 'Create your account',\n    subtitle: 'to continue to {{applicationName}}',\n    actionText: 'Have an account?',\n    actionLink: 'Sign in',\n  },\n  emailLink: {\n    title: 'Verify your email',\n    subtitle: 'to continue to {{applicationName}}',\n    formTitle: 'Verification link',\n    formSubtitle: 'Use the verification link sent to your email address',\n    resendButton: \"Didn't receive a link? Resend\",\n    verified: {\n      title: 'Successfully signed up',\n    },\n    loading: {\n      title: 'Signing up...',\n    },\n    verifiedSwitchTab: {\n      title: 'Successfully verified email',\n      subtitle: 'Return to the newly opened tab to continue',\n      subtitleNewTab: 'Return to previous tab to continue',\n    },\n  },\n  emailCode: {\n    title: 'Verify your email',\n    subtitle: 'to continue to {{applicationName}}',\n    formTitle: 'Verification code',\n    formSubtitle: 'Enter the verification code sent to your email address',\n    resendButton: \"Didn't receive a code? Resend\",\n  },\n  phoneCode: {\n    title: 'Verify your phone',\n    subtitle: 'to continue to {{applicationName}}',\n    formTitle: 'Verification code',\n    formSubtitle: 'Enter the verification code sent to your phone number',\n    resendButton: \"Didn't receive a code? Resend\",\n  },\n  continue: {\n    title: 'Fill in missing fields',\n    subtitle: 'to continue to {{applicationName}}',\n    actionText: 'Have an account?',\n    actionLink: 'Sign in',\n  },\n},\n```\n\n----------------------------------------\n\nTITLE: Remix Action Function Implementation\nDESCRIPTION: Example of using Clerk client within a Remix action function for user data updates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ActionFunction, redirect } from '@remix-run/node'\nimport { getAuth } from '@clerk/remix/ssr.server'\nimport { createClerkClient } from '@clerk/remix/api.server'\n\nexport const action: ActionFunction = async (args) => {\n  const { userId } = await getAuth(args)\n\n  if (!userId) {\n    return redirect('/sign-in?redirect_url=' + args.request.url)\n  }\n\n  const params = { firstName: 'John', lastName: 'Wicker' }\n\n  const updatedUser = await createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n  }).users.updateUser(userId, params)\n\n  return { serialisedUser: JSON.stringify(updatedUser) }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering a Social Connection Button with Clerk in TypeScript/React\nDESCRIPTION: Shows how to render a social OAuth connection sign-in button using Clerk's <Connection> component within a <SignIn.Root> flow in TypeScript/React. The example passes \"google\" as the name prop, letting users sign in with Google. Key dependencies include Clerk Elements and an enabled social connection in the Clerk dashboard. The component accepts a className and displays as an unstyled button by default.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <SignIn.Step name=\"start\">\n    <Clerk.Connection name=\"google\">Sign in with Google</Clerk.Connection>\n  </SignIn.Step>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server using yarn (bash)\nDESCRIPTION: This command starts the TanStack React Start development server using the Yarn package manager. It executes the `dev` script, usually defined in the `package.json`, to initiate the local development environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dev\n```\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server using pnpm (bash)\nDESCRIPTION: This command starts the TanStack React Start development server using the pnpm package manager. It runs the `dev` script specified in the `package.json` file, launching the application in development mode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dev\n```\n```\n\n----------------------------------------\n\nTITLE: Declaring Get Organization Memberships Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Defines the getOrganizationMemberships function for retrieving a paginated list of the user's organization memberships. Optional input includes initialPage and pageSize for controlling pagination. Returns a Promise of ClerkPaginatedResponse with OrganizationMembershipResource objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationMemberships(\\n  params?: GetUserOrganizationMembershipParams,\\n): Promise<ClerkPaginatedResponse<OrganizationMembershipResource>>\n```\n\n----------------------------------------\n\nTITLE: Unmounting SignUp Component with JavaScript\nDESCRIPTION: This snippet demonstrates how to unmount the SignUp component using JavaScript. It uses the unmountSignUp method to remove the component and clean up resources.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-up\"></div>\n`\n\nconst signUpDiv = document.getElementById('sign-up')\n\nclerk.mountSignUp(signUpDiv)\n\n// ...\n\nclerk.unmountSignUp(signUpDiv)\n```\n\n----------------------------------------\n\nTITLE: OKX Wallet Authentication - TypeScript\nDESCRIPTION: Function implementation for authenticating users with OKX Wallet using Web3 wallet address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithOKXWallet(props?: AuthenticateWithOKXWalletParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Defining Fallback Redirect URL Props in Clerk Components (JSX)\nDESCRIPTION: Demonstrates the names of props used to set fallback redirect URLs in Clerk components. These URLs are used only if no `redirect_url` query parameter is present, typically when a user navigates directly to the sign-in/sign-up page. Includes general (`fallbackRedirectUrl`) and specific props for sign-in (`signInFallbackRedirectUrl`) and sign-up (`signUpFallbackRedirectUrl`) links.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/custom-redirects.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nfallbackRedirectUrl\nsignInFallbackRedirectUrl\nsignUpFallbackRedirectUrl\n```\n\n----------------------------------------\n\nTITLE: Defining Feature Not Enabled Error Object in JSON\nDESCRIPTION: Defines a standardized JSON object to represent errors when a specific feature is not enabled in a Clerk instance. No external dependencies are required; the error object contains fields: shortMessage (brief error), longMessage (detailed explanation), and code (unique identifier). It is intended to be used in API responses to communicate feature availability constraints to clients.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/features.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"not enabled\\\",\\n  \\\"longMessage\\\": \\\"This feature is not enabled on this instance\\\",\\n  \\\"code\\\": \\\"feature_not_enabled_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using pnpm\nDESCRIPTION: Installs the latest versions of `react` and `react-dom` using the pnpm package manager. This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in Remix\nDESCRIPTION: Demonstrates the implementation of SignInButton in a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInButton } from '@clerk/remix'\n\nexport default function SignInPage() {\n  return <SignInButton />\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Organization List Response Structure\nDESCRIPTION: Demonstrates the change in accessing organization list data with the new response structure that includes data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Rendering Social Account Connection UI - Clerk JavaScript - HTML\nDESCRIPTION: Sets up a simple HTML page with a UI for connecting a Notion account via Clerk and displays the verification status. Dependencies include the Clerk JavaScript SDK, which is loaded in the accompanying script. Inputs involve user interaction with the 'Add Notion as a social connection' button. Output is dynamically updated HTML based on the authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\\n<html lang=\\\"en\\\">\\n  <head>\\n    <meta charset=\\\"UTF-8\\\" />\\n    <link rel=\\\"icon\\\" type=\\\"image/svg+xml\\\" href=\\\"/vite.svg\\\" />\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\" />\\n    <title>Clerk + JavaScript App</title>\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\"></div>\\n\\n    <p>\\n      Notion verification status:\\n      <span id=\\\"notion-status\\\"></span>\\n    </p>\\n    <button id=\\\"add-notion\\\">Add Notion as a social connection</button>\\n\\n    <script type=\\\"module\\\" src=\\\"/main.js\\\"></script>\\n  </body>\\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-in with React and Clerk Store\nDESCRIPTION: Example of using $clerkStore in a React component to implement a sign-in button. Uses the useStore hook from nanostores/react to access Clerk functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $clerkStore } from '@clerk/astro/client'\n\nexport default function SignIn() {\n  const clerk = useStore($clerkStore)\n\n  return <button onClick={() => clerk.openSignIn()}>Sign in</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Environment Variables for Custom Sign-up Page\nDESCRIPTION: This snippet shows the necessary environment variables to configure Clerk's redirect behavior for a custom sign-up page. `CLERK_SIGN_UP_URL` tells Clerk the path to the custom sign-up page. `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` specifies where to redirect authenticated users who try to access the sign-up page directly. `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` defines the redirect URL when a user clicks the 'Sign in' link from the sign-up component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\n```env {{ filename: '.env' }}\nCLERK_SIGN_UP_URL=/sign-up\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\n```\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Layout Prop in Astro\nDESCRIPTION: Example of configuring Clerk layout options in an Astro application. This snippet shows how to set up social button placement, variant, and terms page URL in the Astro configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/layout.mdx#2025-04-23_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        layout: {\n          socialButtonsPlacement: 'bottom',\n          socialButtonsVariant: 'iconButton',\n          termsPageUrl: 'https://clerk.com/terms',\n        },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Infinite Pagination with useOrganization in Next.js\nDESCRIPTION: Next.js implementation of infinite pagination for organization memberships using the useOrganization hook, which allows loading and appending additional member data to an existing list.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-organization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganization } from '@clerk/nextjs'\n\nexport default function MemberListPage() {\n  const { memberships } = useOrganization({\n    memberships: {\n      infinite: true, // Append new data to the existing list\n      keepPreviousData: true, // Persist the cached data until the new data has been fetched\n    },\n  })\n\n  if (!memberships) {\n    // Handle loading state\n    return null\n  }\n\n  return (\n    <div>\n      <h2>Organization members</h2>\n      <ul>\n        {memberships.data?.map((membership) => (\n          <li key={membership.id}>\n            {membership.publicUserData.firstName} {membership.publicUserData.lastName} &lt;\n            {membership.publicUserData.identifier}&gt; :: {membership.role}\n          </li>\n        ))}\n      </ul>\n\n      <button\n        disabled={!memberships.hasNextPage} // Disable the button if there are no more available pages to be fetched\n        onClick={memberships.fetchNext}\n      >\n        Load more\n      </button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Firebase Projects - Bash\nDESCRIPTION: Lists all Firebase projects associated with the authenticated account using the Firebase CLI. This helps identify the correct project ID needed for subsequent user export. Requires prior authentication with Firebase CLI.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nfirebase projects:list\n\n```\n\n----------------------------------------\n\nTITLE: Updating `TokenVerificationErrorReason` Import Path in JavaScript\nDESCRIPTION: Shows how to update the import for `TokenVerificationErrorReason`. Reflecting organizational changes, it should now be imported from `@clerk/backend/errors` rather than the top-level `@clerk/backend` module.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_14\n\nLANGUAGE: js\nCODE:\n```\n    import { TokenVerificationErrorReason } from '@clerk/backend'\n    import { TokenVerificationErrorReason } from '@clerk/backend/errors'\n```\n\n----------------------------------------\n\nTITLE: Updating getUserOauthAccessToken Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getUserOauthAccessToken. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_44\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Setting up Clerk environment variables\nDESCRIPTION: Configuration of environment variables in a .env file to set up Clerk API URLs needed for the Fauna integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_FRONTEND_API_URL={{fapi_url}}\nNEXT_PUBLIC_CLERK_JWKS_URL={{jwks_url}}\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in Organization.getMemberships\nDESCRIPTION: Demonstration of pagination argument changes in Organization.getMemberships method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Next.js Pages Router\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a Next.js app using the Pages Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { dark } from '@clerk/themes'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n      }}\n    >\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Redirecting with Authentication in Clerk SDK\nDESCRIPTION: Function to redirect to a provided URL after appending authentication credentials. It handles both development and production instances differently.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_34\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectWithAuth(to: string): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationMembershipList Return Signature in Clerk API\nDESCRIPTION: The return signature of Users.getOrganizationMembershipList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Declaring Pagination Data Property Type in TypeScript\nDESCRIPTION: Definition of the data property that contains fetched items as a generic array type T[].\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ndata: T[]\n```\n\n----------------------------------------\n\nTITLE: Updating Client List Retrieval in JavaScript\nDESCRIPTION: This snippet shows the change in response payload for the getClientList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Implementing withClerk Higher Order Function\nDESCRIPTION: Example showing how to recreate the withClerk higher order function using Clerk's hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_51\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withClerk(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const clerk = useIsomorphicClerkContext()\n\n    if (!clerk.loaded) return null\n\n    return <Component {...props} clerk={clerk} />\n  }\n\n  HOC.displayName = `withClerk(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Authentication in a GET Request Handler (TypeScript)\nDESCRIPTION: This snippet demonstrates how to create a Clerk client, authenticate a request, and handle the authentication result in a GET request handler. It uses environment variables for Clerk credentials and includes logic for both authenticated and unauthenticated requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/authenticate-req.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nexport async function GET(req: Request) {\n  const clerkClient = createClerkClient({\n    secretKey: process.env.CLERK_SECRET_KEY,\n    publishableKey: process.env.CLERK_PUBLISHABLE_KEY,\n  })\n\n  const { isSignedIn } = await clerkClient.authenticateRequest(req, {\n    jwtKey: process.env.CLERK_JWT_KEY,\n    authorizedParties: ['https://example.com'],\n  })\n\n  if (!isSignedIn) {\n    return Response.json({ status: 401 })\n  }\n\n  // Add logic to perform protected actions\n\n  return Response.json({ message: 'This is a reply' })\n}\n```\n\n----------------------------------------\n\nTITLE: Next.js Server Action for Actor Token Generation\nDESCRIPTION: Server-side action that generates actor tokens using Clerk's Backend API with permission verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\n'use server'\n\nimport { auth } from '@clerk/nextjs/server'\n\nexport async function generateActorToken(actorId: string, userId: string) {\n  if (!auth().has({ permission: 'org:admin:impersonate' })) {\n    return {\n      ok: false,\n      message: 'You do not have permission to access this page.',\n    }\n  }\n\n  const params = JSON.stringify({\n    user_id: userId,\n    actor: {\n      sub: actorId,\n    },\n  })\n\n  const res = await fetch('https://api.clerk.com/v1/actor_tokens', {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${process.env.CLERK_SECRET_KEY}`,\n      'Content-type': 'application/json',\n    },\n    body: params,\n  })\n\n  if (!res.ok) {\n    return { ok: false, message: 'Failed to generate actor token' }\n  }\n  const data = await res.json()\n\n  return { ok: true, token: data.token }\n}\n```\n\n----------------------------------------\n\nTITLE: Unmounting UserButton with JavaScript\nDESCRIPTION: This snippet shows how to unmount the UserButton component using vanilla JavaScript and the Clerk SDK. It demonstrates the process of mounting the UserButton and then unmounting it, which is useful for cleanup or dynamic UI changes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-button\"></div>\n`\n\nconst userButtonDiv = document.getElementById('user-button')\n\nclerk.mountUserButton(userButtonDiv)\n\n// ...\n\nclerk.unmountUserButton(userButtonDiv)\n```\n\n----------------------------------------\n\nTITLE: Defining CustomPage Interface in TypeScript for Clerk Profiles\nDESCRIPTION: This code snippet defines the CustomPage interface with its attributes for creating custom pages in Clerk's UserProfile and OrganizationProfile components. It includes properties for labeling, URL handling, and lifecycle methods for mounting and unmounting icons and content.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/custom-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface CustomPage {\n  label: string;\n  url?: string;\n  mountIcon?: (el: HTMLDivElement) => void;\n  unmountIcon?: (el?: HTMLDivElement) => void;\n  mount?: (el: HTMLDivElement) => void;\n  unmount?: (el?: HTMLDivElement) => void;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Passkeys for Users with Clerk API in React\nDESCRIPTION: This code snippet demonstrates how to create a passkey for a user using the Clerk API. It uses the useUser hook to access the current user and calls the createPasskey method on the user object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/passkeys.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nexport function CreatePasskeyButton() {\n  const { user } = useUser()\n\n  const createClerkPasskey = async () => {\n    if (!user) return\n\n    try {\n      await user?.createPasskey()\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n    }\n  }\n\n  return <button onClick={createClerkPasskey}>Create a passkey</button>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in React\nDESCRIPTION: Basic implementation of the GoogleOneTap component in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { GoogleOneTap } from '@clerk/clerk-react'\n\nconst SignInPage = () => <GoogleOneTap />\n\nexport default SignInPage\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Method Access in JavaScript\nDESCRIPTION: Code example showing how to access organization list data after the core 2 update. The response structure has changed from a direct array to an object with data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp Component in Expo Web\nDESCRIPTION: Basic implementation of the SignUp component from @clerk/clerk-expo/web package in an Expo Router page component. This code creates a dedicated sign-up page for web platform.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/web-support/custom-sign-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { SignUp } from '@clerk/clerk-expo/web'\n\nexport default function Page() {\n  return <SignUp />\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Next.js (TypeScript)\nDESCRIPTION: Shows examples of how JWT session claims (`JwtPayload`), which previously contained the `orgs` claim, could be accessed in a Next.js application using `getAuth` from `@clerk/nextjs/server` or `@clerk/ssr.server`. This pattern is relevant for understanding where the removed `orgs` claim might have been used.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript {{ filename: 'Next.js' }}\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n```\n\n----------------------------------------\n\nTITLE: Running a Next.js Project in Development Mode\nDESCRIPTION: Commands to start a Next.js development server using different package managers (npm, yarn, pnpm, or bun).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Using SignIn Component in Astro\nDESCRIPTION: This example shows how to implement the SignIn component in an Astro application. It imports the SignIn component from @clerk/astro/components and renders it on a dedicated sign-in page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignIn } from '@clerk/astro/components'\n---\n\n<SignIn />\n```\n\n----------------------------------------\n\nTITLE: Running Astro Project in Development Mode via bun - Bash\nDESCRIPTION: This bun command starts the Astro development server, assuming bun is installed and a compatible dev script is configured in package.json. Use this to launch a local version of your app for Clerk authentication testing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Creation in JavaScript\nDESCRIPTION: This snippet shows the change in the Organization.create method. Instead of passing a string directly, an object with a 'name' property is now required.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create('...')\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Using SignIn Component in Vue\nDESCRIPTION: This example shows how to implement the SignIn component in a Vue application. It imports the SignIn component from @clerk/vue and renders it in the template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_8\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignIn } from '@clerk/vue'\n</script>\n\n<template>\n  <SignIn />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Authenticating Requests with Clerk Backend SDK in TypeScript\nDESCRIPTION: Function signature for authenticateRequest, which verifies a token passed from the frontend. It can be networkless if a jwtKey is provided, otherwise it makes a network call to retrieve JWKS.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/authenticate-request.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateRequest(\n  request: Request,\n  options: AuthenticateRequestOptions,\n): Promise<RequestState>\n```\n\n----------------------------------------\n\nTITLE: Implementing Phone Number-based Password Reset in Next.js with Clerk\nDESCRIPTION: This snippet shows a full implementation of a password reset flow using phone numbers with Clerk authentication in a Next.js application. It includes sending a reset code, verifying the code, and setting a new password. The component also handles error states and potential two-factor authentication requirements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/forgot-password.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport React, { useState, useEffect } from 'react'\nimport { useAuth, useSignIn } from '@clerk/nextjs'\nimport type { NextPage } from 'next'\nimport { useRouter } from 'next/navigation'\n\nconst ForgotPasswordPage: NextPage = () => {\n  const [phoneNumber, setPhoneNumber] = useState('')\n  const [password, setPassword] = useState('')\n  const [code, setCode] = useState('')\n  const [successfulCreation, setSuccessfulCreation] = useState(false)\n  const [secondFactor, setSecondFactor] = useState(false)\n  const [error, setError] = useState('')\n\n  const router = useRouter()\n  const { isSignedIn } = useAuth()\n  const { isLoaded, signIn, setActive } = useSignIn()\n\n  useEffect(() => {\n    if (isSignedIn) {\n      router.push('/')\n    }\n  }, [isSignedIn, router])\n\n  if (!isLoaded) {\n    return null\n  }\n\n  // Send the password reset code to the user's email\n  async function create(e: React.FormEvent) {\n    e.preventDefault()\n    await signIn\n      ?.create({\n        strategy: 'reset_password_phone_code',\n        identifier: phoneNumber,\n      })\n      .then((_) => {\n        setSuccessfulCreation(true)\n        setError('')\n      })\n      .catch((err) => {\n        console.error('error', err.errors[0].longMessage)\n        setError(err.errors[0].longMessage)\n      })\n  }\n\n  // Reset the user's password.\n  // Upon successful reset, the user will be\n  // signed in and redirected to the home page\n  async function reset(e: React.FormEvent) {\n    e.preventDefault()\n    await signIn\n      ?.attemptFirstFactor({\n        strategy: 'reset_password_phone_code',\n        code,\n        password,\n      })\n      .then((result) => {\n        // Check if 2FA is required\n        if (result.status === 'needs_second_factor') {\n          setSecondFactor(true)\n          setError('')\n        } else if (result.status === 'complete') {\n          // Set the active session to\n          // the newly created session (user is now signed in)\n          setActive({ session: result.createdSessionId })\n          setError('')\n        } else {\n          console.log(result)\n        }\n      })\n      .catch((err) => {\n        console.error('error', err.errors[0].longMessage)\n        setError(err.errors[0].longMessage)\n      })\n  }\n\n  return (\n    <div>\n      <h1>Forgot Password?</h1>\n      <form onSubmit={!successfulCreation ? create : reset}>\n        {!successfulCreation && (\n          <>\n            <label htmlFor=\"phoneNumber\">Provide your phone number</label>\n            <input\n              type=\"tel\"\n              placeholder=\"e.g +1234567890\"\n              value={phoneNumber}\n              onChange={(e) => setPhoneNumber(e.target.value)}\n            />\n\n            <button>Send password reset code</button>\n            {error && <p>{error}</p>}\n          </>\n        )}\n\n        {successfulCreation && (\n          <>\n            <label htmlFor=\"password\">Enter your new password</label>\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\n\n            <label htmlFor=\"code\">\n              Enter the password reset code that was sent to your phone number\n            </label>\n            <input type=\"text\" value={code} onChange={(e) => setCode(e.target.value)} />\n\n            <button>Reset</button>\n            {error && <p>{error}</p>}\n          </>\n        )}\n\n        {secondFactor && <p>2FA is required, but this UI does not handle that</p>}\n      </form>\n    </div>\n  )\n}\n\nexport default ForgotPasswordPage\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationInvitations pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for User.getOrganizationInvitations where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Using redirectToSignUp with Options in Clerk SDK\nDESCRIPTION: Example of using the redirectToSignUp method with custom redirect URLs for sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectToSignUp({\n  signUpForceRedirectUrl: '/dashboard',\n  signUpFallbackRedirectUrl: '/dashboard',\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of getOrganizationList in TypeScript\nDESCRIPTION: Simple example of calling getOrganizationList without any parameters to retrieve the default list of organizations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.organizations.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Declaring Get Organization Invitations Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Defines getOrganizationInvitations for retrieving paginated lists of organization invitations for the signed-in user. Inputs can include optional parameters: initialPage, pageSize, and status. Outputs a Promise of ClerkPaginatedResponse containing UserOrganizationInvitation objects. Typed and suitable for further customization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationInvitations(\\n  params?: GetUserOrganizationInvitationsParams,\\n): Promise<ClerkPaginatedResponse<UserOrganizationInvitation>>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Directives to Clerk Strict CSP (TypeScript)\nDESCRIPTION: Extends the strict automatic CSP configuration by providing additional custom directives. A `directives` object is merged with Clerk's default strict rules, allowing you to specify extra allowed sources for specific resource types like `connect-src` or `img-src`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_4\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport default clerkMiddleware(\n  async (auth, request) => {\n    if (!isPublicRoute(request)) {\n      await auth.protect()\n    }\n  },\n  {\n    contentSecurityPolicy: {\n      strict: true,\n      directives: {\n        'connect-src': ['api.example.com', 'analytics.example.com'],\n        'img-src': ['images.example.com'],\n      },\n    },\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Using has() Method for Permission Checking in Clerk\nDESCRIPTION: This snippet references the has() method used for permission checking in Clerk, with a warning that it only works with custom permissions on the server-side. System permissions are not included in session token claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/has-warning.mdx#2025-04-23_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nhas()\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Ruby SDK v4\nDESCRIPTION: Demonstrates the configuration update required for Clerk Ruby SDK v4. The configuration block now uses `secret_key` instead of the previous `api_key` to authenticate with the Clerk API. This change is essential for applications upgrading to v4.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/v4-upgrade-guide.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\n```ruby {{ del: [4], ins: [5] }}\nrequire 'clerk'\n\nClerk.configure do |c|\n  c.api_key = `{{secret}}`\n  c.secret_key = `{{secret}}`\nend\n```\n```\n\n----------------------------------------\n\nTITLE: Running TanStack React Start Development Server (npm)\nDESCRIPTION: This command uses npm (Node Package Manager) to start the development server for the TanStack React Start application. Running `npm run dev` executes the script defined under 'dev' in the `package.json` file, typically launching the application in development mode with features like hot reloading.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm run dev\n```\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Invitation with Metadata using cURL\nDESCRIPTION: This example shows how to create a Clerk invitation using cURL while embedding public metadata within the request payload using the `public_metadata` key. This metadata will be associated with the user's profile (in `public_metadata`) once they sign up using the invitation link. The request requires the target email address and authentication via the Clerk Secret Key in the Authorization header.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/invitations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl https://api.clerk.com/v1/invitations -X POST -d '{\"email_address\": \"email@example.com\", \"public_metadata\": {\"age\": \"21\"}}' -H \"Authorization:Bearer {{secret}}\" -H 'Content-Type:application/json'\n```\n\n----------------------------------------\n\nTITLE: JWT Claims Access in Fastify\nDESCRIPTION: Accessing JWT session claims in Fastify applications using Clerk authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Users.getOrganizationList from directly returning data to returning an object with data and totalCount properties. This helps with handling paginated API responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Defining Outdated Verification Error Response in Clerk (JSON)\nDESCRIPTION: This snippet details the JSON response for the 'SignUpOutdatedVerification' error, which signals that an attempt was made to verify a sign-up when a newer verification is pending. It provides both short and long messages and a code to instruct applications to guide users to retry verification. This error should be handled to ensure users follow the latest verification process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Outdated verification\\\",\\n  \\\"longMessage\\\": \\\"There is a more recent verification pending for this signup. Try attempting the verification again.\\\",\\n  \\\"code\\\": \\\"sign_up_outdated_verification\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Basic SignUpButton Implementation\nDESCRIPTION: Basic implementation examples showing how to use the SignUpButton component across different frameworks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-up-button.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignUpButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return <SignUpButton />\n}\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignUpButton } from '@clerk/astro/components'\n---\n\n<SignUpButton />\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignUpButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignUpButton />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Enumerating OAuthProvider Values with TypeScript Union\nDESCRIPTION: Declares OAuthProvider as a TypeScript union type representing all supported OAuth identity providers. Covers well-known third-party providers (e.g., Google, GitHub, Apple), as well as a generic pattern for custom providers (custom_<string>). No external dependencies required. Meant to be used in conjunction with OAuthStrategy to enforce valid providers for authentication. Accepts string literals and custom providers to ensure extensibility; inputs are constrained to the listed values or a custom provider string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sso.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\ntype OAuthProvider =\n  | 'facebook'\n  | 'google'\n  | 'hubspot'\n  | 'github'\n  | 'tiktok'\n  | 'gitlab'\n  | 'discord'\n  | 'twitter'\n  | 'twitch'\n  | 'linkedin'\n  | 'linkedin_oidc'\n  | 'dropbox'\n  | 'atlassian'\n  | 'bitbucket'\n  | 'microsoft'\n  | 'notion'\n  | 'apple'\n  | 'line'\n  | 'instagram'\n  | 'coinbase'\n  | 'spotify'\n  | 'xero'\n  | 'box'\n  | 'slack'\n  | 'linear'\n  | 'x'\n  | 'huggingface'\n  | `custom_${string}`\n```\n\n----------------------------------------\n\nTITLE: Auth Object Without MFA Method Registered (Version 2)\nDESCRIPTION: Example of Clerk's version 2 Auth object for a user without an MFA method registered. The 'fva' claim value [0,-1] indicates the first factor is verified but no second factor is registered (-1).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  azp: 'http://localhost:3000',\n  email: 'email@example.com',\n  exp: 1744735488,\n  fva: [ 0,-1 ],\n  iat: 1744735428,\n  iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n  jti: 'aee4d4a5071bdd66e21b',\n  nbf: 1744735418,\n  role: 'authenticated',\n  sid: 'sess_123',\n  sub: 'user_123',\n  v: 2\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Server-Side Rendering with Dynamic SignedIn Component in Astro\nDESCRIPTION: Example demonstrating how to opt-out of pre-rendering and use server-side SignedIn component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/hybrid-rendering.mdx#2025-04-23_snippet_1\n\nLANGUAGE: astro\nCODE:\n```\n---\nexport const prerender = false\n---\n\n<SignedIn isStatic={false}> You are signed in! </SignedIn>\n```\n\n----------------------------------------\n\nTITLE: Defining SessionStatus Type in TypeScript\nDESCRIPTION: Type definition for SessionStatus, which represents the possible states of a session. It includes values such as 'abandoned', 'active', 'ended', 'expired', 'removed', 'replaced', and 'revoked'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\ntype SessionStatus =\n  | 'abandoned'\n  | 'active'\n  | 'ended'\n  | 'expired'\n  | 'removed'\n  | 'replaced'\n  | 'revoked'\n```\n\n----------------------------------------\n\nTITLE: Creating TOTP Secret for User - Clerk JavaScript - JavaScript\nDESCRIPTION: Generates a new TOTP secret for the signed-in user using Clerk's createTOTP method to support authenticator-based MFA. Requires the authenticator app strategy enabled in the Clerk app. Input is none, and the output is a TOTPResource object. Calling creates or replaces the TOTP secret until verified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.createTOTP()\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Sessions - Clerk TypeScript\nDESCRIPTION: Defines the getSessions function that returns a promise resolving to an array of SessionWithActivities objects for the current user in Clerk. The method uses caching to minimize network requests and returns only active sessions. No parameters are required.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_20\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction getSessions(): Promise<SessionWithActivities[]>\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in Vue\nDESCRIPTION: Basic implementation of the GoogleOneTap component in a Vue application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { GoogleOneTap } from '@clerk/vue'\n</script>\n\n<template>\n  <GoogleOneTap />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Sessions - Clerk JavaScript\nDESCRIPTION: Shows the usage of the getSessions method to fetch all active sessions for the user. This asynchronous JavaScript example retrieves session data using the Clerk user object and expects an array of session objects as output.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_21\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.getSessions()\n```\n\n----------------------------------------\n\nTITLE: Attempting Web3 Wallet Verification in Clerk SignUp\nDESCRIPTION: This method attempts to verify a Web3 wallet address by validating the cryptographic signature generated by the wallet. It wraps the attemptVerification method with Web3 wallet strategies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptWeb3WalletVerification(params: AttemptWeb3WalletVerificationParams): Promise<SignUp>\n```\n\n----------------------------------------\n\nTITLE: Displaying Session Visit Count Using Clerk useSessionList in Vue\nDESCRIPTION: This Vue single-file component example imports the useSessionList composable from @clerk/vue, destructures isLoaded and sessions from its return value, and displays either a loading state or the number of previous visits based on the sessions array. The example demonstrates how to check initialization status and use the computed sessions property in a template. Dependency: @clerk/vue must be installed and Clerk must be configured in the Vue project. The filename provided is SessionList.vue. It expects the user to be authenticated and Clerk fully initialized; sessions is a reactive array of Session objects, and isLoaded a boolean.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/use-session-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\\nimport { useSessionList } from '@clerk/vue'\\n\\nconst { isLoaded, sessions } = useSessionList()\\n<\\/script>\\n\\n<template>\\n  <div v-if=\\\"!isLoaded\\\">\\n    <!-- Handle loading state -->\\n  <\\/div>\\n\\n  <div v-else>\\n    <p>Welcome back. You've been here {{ sessions.length }} times before.<\\/p>\\n  <\\/div>\\n<\\/template>\n```\n\n----------------------------------------\n\nTITLE: Handling Unauthenticated State with ClerkJS - JavaScript Usage Example\nDESCRIPTION: Illustrates how to invoke Clerk's `handleUnauthenticated` function in JavaScript to manage unauthenticated (401) states. The example demonstrates awaiting the promise returned from `clerk.handleUnauthenticated()` within an async context. Requires the Clerk object to be available and loaded.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.handleUnauthenticated()\n```\n\n----------------------------------------\n\nTITLE: Defining BlocklistIdentifierNotFound Error Object in JSON\nDESCRIPTION: Defines the Clerk error payload when a requested blocklist identifier cannot be found. The snippet relies on the Clerk error formatting system and includes fields for 'shortMessage', 'longMessage', and 'code', with '<identifierID>' representing the sought identifier's ID. Passing a non-existent identifier ID triggers this response. The output is a JSON error; consumers should replace the placeholder with an actual value when rendering messages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/blocklist-identifiers.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Identifier not found\\\",\\n  \\\"longMessage\\\": \\\"No identifier was found with id <identifierID>\\\",\\n  \\\"code\\\": \\\"resource_not_found_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Session Verification Component in React with Clerk\nDESCRIPTION: A React component that handles session verification using Clerk's authentication system. It manages email code verification as a first factor, including sending verification codes and validating user input. The component uses React hooks and Clerk's session management utilities to handle the verification flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useEffect, useRef, useState } from 'react'\nimport { useSession } from '@clerk/clerk-react'\nimport {\n  EmailCodeFactor,\n  SessionVerificationLevel,\n  SessionVerificationResource,\n} from '@clerk/types'\n\nexport function VerificationComponent({\n  level = 'first_factor',\n  onComplete,\n  onCancel,\n}: {\n  level: SessionVerificationLevel | undefined\n  onComplete: () => void\n  onCancel: () => void\n}) {\n  const { session } = useSession()\n  const [code, setCode] = useState<string>('')\n  const reverificationRef = useRef<SessionVerificationResource | undefined>(undefined)\n  const [determinedStartingFirstFactor, setDeterminedStartingFirstFactor] = useState<\n    EmailCodeFactor | undefined\n  >()\n\n  useEffect(() => {\n    if (reverificationRef.current) {\n      return\n    }\n\n    session?.startVerification({ level }).then(async (response) => {\n      reverificationRef.current = response\n      await prepareEmailVerification(response)\n    })\n  }, [])\n\n  const prepareEmailVerification = async (verificationResource: SessionVerificationResource) => {\n    // To simplify the example we will only handle the first factor verification\n    if (verificationResource.status === 'needs_first_factor') {\n      // Determine the starting first factor from the supported first factors\n      const determinedStartingFirstFactor = verificationResource.supportedFirstFactors?.filter(\n        (factor) => factor.strategy === 'email_code',\n      )[0]\n\n      if (determinedStartingFirstFactor) {\n        setDeterminedStartingFirstFactor(determinedStartingFirstFactor)\n        // Prepare the first factor verification with the determined starting first factor\n        await session?.prepareFirstFactorVerification({\n          strategy: determinedStartingFirstFactor.strategy,\n          emailAddressId: determinedStartingFirstFactor?.emailAddressId,\n        })\n      }\n    }\n  }\n\n  const handleVerificationAttempt = async () => {\n    try {\n      // Attempt to verify the session with the provided code\n      await session?.attemptFirstFactorVerification({\n        strategy: 'email_code',\n        code,\n      })\n      onComplete()\n    } catch (e) {\n      // Any error from the attempt to verify the session can be handled here\n      console.error('Error verifying session', e)\n    }\n  }\n\n  if (!determinedStartingFirstFactor) {\n    return null\n  }\n\n  return (\n    <div>\n      <p>Enter verification code sent to {determinedStartingFirstFactor.safeIdentifier || ''}</p>\n      <input type=\"number\" name=\"code\" onChange={(e) => setCode(e.target.value)} />\n      <button onClick={async () => handleVerificationAttempt()}>Complete</button>\n      <button onClick={() => onCancel()}>Cancel</button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Create Email Address Usage Example\nDESCRIPTION: Example showing how to create an email address for a user using the Clerk Backend SDK. Demonstrates setting primary and verified status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/create-email-address.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.emailAddresses.createEmailAddress({\n  userId: 'user_123',\n  emailAddress: 'testclerk123@gmail.com',\n  primary: true,\n  verified: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Illustrating a CSRF Attack Vector using HTML\nDESCRIPTION: This HTML snippet demonstrates a potential CSRF attack. An `<img>` tag's `src` attribute is set to a URL on a target domain (`example.com`) containing malicious parameters (`action=delete&id=123`). If a user logged into `example.com` views this on an attacker's site, and `example.com` improperly handles GET requests and cookies are sent cross-site, the unintended action might occur.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/csrf-protection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<img src=\"https://www.example.com/?action=delete&id=123\" />\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in Vue\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in a Vue application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_5\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { OrganizationProfile } from '@clerk/vue'\n</script>\n\n<template>\n  <OrganizationProfile />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Updating `@clerk/remix` Dependency using Package Managers\nDESCRIPTION: Shows how to install the latest version of the `@clerk/remix` SDK using different package managers (npm, yarn, pnpm, bun). This step upgrades the project to use Clerk Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Implementing Organization Invitation Management in Next.js\nDESCRIPTION: This TypeScript code for Next.js App Router implements components for inviting new members to an organization and listing pending invitations. It uses Clerk's useOrganization hook and methods like inviteMember() and revoke() to manage invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-organization-invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { useOrganization } from '@clerk/nextjs'\nimport { OrganizationCustomRoleKey } from '@clerk/types'\nimport { ChangeEventHandler, useEffect, useRef, useState } from 'react'\n\nexport const OrgMembersParams = {\n  memberships: {\n    pageSize: 5,\n    keepPreviousData: true,\n  },\n}\n\nexport const OrgInvitationsParams = {\n  invitations: {\n    pageSize: 5,\n    keepPreviousData: true,\n  },\n}\n\n// Form to invite a new member to the organization.\nexport const InviteMember = () => {\n  const { isLoaded, organization, invitations } = useOrganization(OrgInvitationsParams)\n  const [emailAddress, setEmailAddress] = useState('')\n  const [disabled, setDisabled] = useState(false)\n\n  if (!isLoaded || !organization) {\n    return <>Loading</>\n  }\n\n  const onSubmit = async (e: React.ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault()\n\n    const submittedData = Object.fromEntries(new FormData(e.currentTarget).entries()) as {\n      email: string | undefined\n      role: OrganizationCustomRoleKey | undefined\n    }\n\n    if (!submittedData.email || !submittedData.role) {\n      return\n    }\n\n    setDisabled(true)\n    await organization.inviteMember({\n      emailAddress: submittedData.email,\n      role: submittedData.role,\n    })\n    await invitations?.revalidate?.()\n    setEmailAddress('')\n    setDisabled(false)\n  }\n\n  return (\n    <form onSubmit={onSubmit}>\n      <input\n        name=\"email\"\n        type=\"text\"\n        placeholder=\"Email address\"\n        value={emailAddress}\n        onChange={(e) => setEmailAddress(e.target.value)}\n      />\n      <label>Role</label>\n      <SelectRole fieldName={'role'} />\n      <button type=\"submit\" disabled={disabled}>\n        Invite\n      </button>\n    </form>\n  )\n}\n\ntype SelectRoleProps = {\n  fieldName?: string\n  isDisabled?: boolean\n  onChange?: ChangeEventHandler<HTMLSelectElement>\n  defaultRole?: string\n}\n\nconst SelectRole = (props: SelectRoleProps) => {\n  const { fieldName, isDisabled = false, onChange, defaultRole } = props\n  const { organization } = useOrganization()\n  const [fetchedRoles, setRoles] = useState<OrganizationCustomRoleKey[]>([])\n  const isPopulated = useRef(false)\n\n  useEffect(() => {\n    if (isPopulated.current) return\n    organization\n      ?.getRoles({\n        pageSize: 20,\n        initialPage: 1,\n      })\n      .then((res) => {\n        isPopulated.current = true\n        setRoles(res.data.map((roles) => roles.key as OrganizationCustomRoleKey))\n      })\n  }, [organization?.id])\n\n  if (fetchedRoles.length === 0) return null\n\n  return (\n    <select\n      name={fieldName}\n      disabled={isDisabled}\n      aria-disabled={isDisabled}\n      onChange={onChange}\n      defaultValue={defaultRole}\n    >\n      {fetchedRoles?.map((roleKey) => (\n        <option key={roleKey} value={roleKey}>\n          {roleKey}\n        </option>\n      ))}\n    </select>\n  )\n}\n\n// List of pending invitations to an organization.\nexport const InvitationList = () => {\n  const { isLoaded, invitations, memberships } = useOrganization({\n    ...OrgInvitationsParams,\n    ...OrgMembersParams,\n  })\n\n  if (!isLoaded) {\n    return <>Loading</>\n  }\n\n  return (\n    <>\n      <table>\n        <thead>\n          <tr>\n            <th>User</th>\n            <th>Invited</th>\n            <th>Role</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {invitations?.data?.map((inv) => (\n            <tr key={inv.id}>\n              <td>{inv.emailAddress}</td>\n              <td>{inv.createdAt.toLocaleDateString()}</td>\n              <td>{inv.role}</td>\n              <td>\n                <button\n                  onClick={async () => {\n                    await inv.revoke()\n                    await Promise.all([memberships?.revalidate, invitations?.revalidate])\n                  }}\n                >\n                  Revoke\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div>\n        <button\n          disabled={!invitations?.hasPreviousPage || invitations?.isFetching}\n          onClick={() => invitations?.fetchPrevious?.()}\n        >\n          Previous\n        </button>\n\n        <button\n          disabled={!invitations?.hasNextPage || invitations?.isFetching}\n          onClick={() => invitations?.fetchNext?.()}\n        >\n          Next\n        </button>\n      </div>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing ClerkLoaded in Expo\nDESCRIPTION: This snippet shows how to use the ClerkLoaded component in an Expo application. It uses React Native components and ensures Clerk is loaded before rendering the text.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loaded.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded } from '@clerk/clerk-expo'\nimport { Text, View } from 'react-native'\n\nexport default function Screen() {\n  return (\n    <View>\n      <ClerkLoaded>\n        <Text>Clerk has loaded</Text>\n      </ClerkLoaded>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Organization Invitations - Clerk JavaScript - JavaScript\nDESCRIPTION: Calls clerk.user.getOrganizationInvitations to fetch all organization invitations for the current user. Input parameters are optional for paging/status filtering. Output is a paginated response containing invitations with status and metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.getOrganizationInvitations()\n```\n\n----------------------------------------\n\nTITLE: Making Authenticated API Requests with Axios in Expo\nDESCRIPTION: Shows how to make authenticated API requests using Axios with Clerk session tokens. Includes an axios interceptor to automatically add the authentication token to all requests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/access-clerk-outside-components.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport axios from 'axios'\nimport { getClerkInstance } from '@clerk/clerk-expo'\n\nexport async function fetchFoo() {\n  try {\n    const data = await axios.get('/api/foo')\n    return data\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.response) {\n      throw new Error(`API Error: ${error.response.status} ${error.response.statusText}`)\n    }\n\n    throw new Error('Unknown error')\n  }\n}\n\n// Intercept requests and modify them to include the current session token\naxios.interceptors.request.use(async (config) => {\n  const clerkInstance = getClerkInstance()\n  // Use `getToken()` to get the current session token\n  const token = await clerkInstance.session?.getToken()\n\n  if (token) {\n    // Include the session token as a Bearer token in the Authorization header\n    config.headers.Authorization = `Bearer ${token}`\n  }\n\n  return config\n})\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenCanBeUsedOnlyInSignIn Error\nDESCRIPTION: This JSON object represents the error returned when an actor token is used outside the context of a sign-in process, where its use is restricted. It includes short and long messages clarifying this limitation and the error code `actor_token_not_in_sign_in_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"not in sign in\",\n  \"longMessage\": \"Actor tokens can only be used during sign in.\",\n  \"code\": \"actor_token_not_in_sign_in_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Clerk Node SDK Using Package Managers - Shell\nDESCRIPTION: These shell snippets provide commands to uninstall the legacy @clerk/clerk-sdk-node package from your Node.js project using npm, yarn, pnpm, or bun. Uninstallation ensures the older SDK is removed before moving to Clerk's Express SDK. The commands require the respective package manager to be installed and should be run in the project root directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm uninstall @clerk/clerk-sdk-node\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn remove @clerk/clerk-sdk-node\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm remove @clerk/clerk-sdk-node\n```\n\nLANGUAGE: sh\nCODE:\n```\nbun remove @clerk/clerk-sdk-node\n```\n\n----------------------------------------\n\nTITLE: Defining BackupCodeResource Interface in TypeScript\nDESCRIPTION: This snippet defines the BackupCodeResource interface with properties for id, codes, creation date, and update date. It's used to structure backup code data in the Clerk authentication system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/backup-code.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface BackupCodeResource {\n  id: string;\n  codes: string[];\n  createdAt: Date;\n  updatedAt: Date;\n}\n```\n\n----------------------------------------\n\nTITLE: Filtered User Count Example\nDESCRIPTION: Example demonstrating how to get a filtered count of users matching a specific query string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-count.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.users.getCount({ query: 'test' })\n```\n\n----------------------------------------\n\nTITLE: Using Alternative Routing Strategies with Clerk Components in JSX\nDESCRIPTION: Examples of using hash or virtual routing strategies with Clerk components. While path routing is the new default, you can still use alternative routing by explicitly setting the routing prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_9\n\nLANGUAGE: jsx\nCODE:\n```\n<UserProfile routing=\"hash\" />\n<OrganizationProfile routing=\"virtual\" />\n```\n\n----------------------------------------\n\nTITLE: Creating New Clerk Client Instance\nDESCRIPTION: Illustrates the correct way to update Clerk client options by creating a new instance instead of using __unstable_options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_50\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: 'old' })\n\nclerkClient.__unstable_options.secretKey = 'new'\nconst newClerkClient = createClerkClient({ secretKey: 'new' })\n```\n\n----------------------------------------\n\nTITLE: User Unsafe Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing unsafe metadata for users with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\ninterface UserUnsafeMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Declaring User Delete Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Defines the delete function to permanently delete the signed-in user in Clerk. Returns a Promise resolving when deletion is complete. No parameters are required. Use with caution as user data removal is irreversible.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nfunction delete(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Membership in TypeScript\nDESCRIPTION: Method to update a member's role in an organization. Takes updateParams containing the new role and returns a Promise resolving to the updated OrganizationMembership object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-membership.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction update(updateParams: UpdateOrganizationMembershipParams): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Checking Primary Identification - Clerk TypeScript\nDESCRIPTION: Defines the isPrimaryIdentification function, which checks if the provided identification resource (email address, phone number, or web3 wallet) is the user's primary identifier. Takes a resource object as input and returns a boolean value. Useful for validating which user field is set as primary.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_22\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction isPrimaryIdentification(\n  ident: EmailAddressResource | PhoneNumberResource | Web3WalletResource,\n): boolean\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInWithMetamaskButton in Remix\nDESCRIPTION: Demonstrates how to use a custom button with the SignInWithMetamaskButton component in Remix. This example shows wrapping a custom button and using the 'modal' mode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/remix'\n\nexport default function Home() {\n  return (\n    <SignInWithMetamaskButton mode=\"modal\">\n      <button>Custom sign in button</button>\n    </SignInWithMetamaskButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in Remix with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in a Remix application using Clerk. This snippet shows how to customize the theme, size, and language of the CAPTCHA widget when wrapping the App component with ClerkApp.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    captcha: {\n      theme: 'dark',\n      size: 'flexible',\n      language: 'es-ES',\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Sign-In/Sign-Up in Expo\nDESCRIPTION: This example demonstrates how to implement a combined sign-in and sign-up flow using OAuth in an Expo application. It utilizes the useSSO hook from Clerk and handles the authentication process, including successful authentication and potential missing requirements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/oauth-connections.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React, { useCallback, useEffect } from 'react'\nimport * as WebBrowser from 'expo-web-browser'\nimport * as AuthSession from 'expo-auth-session'\nimport { useSSO } from '@clerk/clerk-expo'\nimport { View, Button } from 'react-native'\n\nexport const useWarmUpBrowser = () => {\n  useEffect(() => {\n    // Preloads the browser for Android devices to reduce authentication load time\n    // See: https://docs.expo.dev/guides/authentication/#improving-user-experience\n    void WebBrowser.warmUpAsync()\n    return () => {\n      // Cleanup: closes browser when component unmounts\n      void WebBrowser.coolDownAsync()\n    }\n  }, [])\n}\n\n// Handle any pending authentication sessions\nWebBrowser.maybeCompleteAuthSession()\n\nexport default function Page() {\n  useWarmUpBrowser()\n\n  // Use the `useSSO()` hook to access the `startSSOFlow()` method\n  const { startSSOFlow } = useSSO()\n\n  const onPress = useCallback(async () => {\n    try {\n      // Start the authentication process by calling `startSSOFlow()`\n      const { createdSessionId, setActive, signIn, signUp } = await startSSOFlow({\n        strategy: 'oauth_google',\n        // For web, defaults to current path\n        // For native, you must pass a scheme, like AuthSession.makeRedirectUri({ scheme, path })\n        // For more info, see https://docs.expo.dev/versions/latest/sdk/auth-session/#authsessionmakeredirecturioptions\n        redirectUrl: AuthSession.makeRedirectUri(),\n      })\n\n      // If sign in was successful, set the active session\n      if (createdSessionId) {\n        setActive!({ session: createdSessionId })\n      } else {\n        // If there is no `createdSessionId`,\n        // there are missing requirements, such as MFA\n        // Use the `signIn` or `signUp` returned from `startSSOFlow`\n        // to handle next steps\n      }\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [])\n\n  return (\n    <View>\n      <Button title=\"Sign in with Google\" onPress={onPress} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying Clerk Webhooks in Astro API Route Using TypeScript\nDESCRIPTION: This snippet shows an Astro API route handler for POST requests to '/api/webhooks', using Clerk's `verifyWebhook` to verify the signature using a signing secret read from an environment variable. After successful verification, it logs the webhook event's ID, type, and full payload for debugging or data sync purposes. Returns HTTP 200 for a valid webhook and 400 for verification failures. Required dependencies: '@clerk/astro/webhooks', Astro 2+.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyWebhook } from '@clerk/astro/webhooks'\\nimport type { APIRoute } from 'astro'\\n\\nexport const POST: APIRoute = async ({ request }) => {\\n  try {\\n    const evt = await verifyWebhook(request, {\\n      signingSecret: import.meta.env.CLERK_WEBHOOK_SIGNING_SECRET,\\n    })\\n\\n    // Do something with payload\\n    // For this guide, log payload to console\\n    const { id } = evt.data\\n    const eventType = evt.type\\n    console.log(`Received webhook with ID ${id} and event type of ${eventType}`)\\n    console.log('Webhook payload:', evt.data)\\n\\n    return new Response('Webhook received', { status: 200 })\\n  } catch (err) {\\n    console.error('Error verifying webhook:', err)\\n    return new Response('Error verifying webhook', { status: 400 })\\n  }\\n}\\n\n```\n\n----------------------------------------\n\nTITLE: Manually Verifying Session Token in TypeScript\nDESCRIPTION: This code snippet demonstrates how to manually verify a Clerk-generated session token (JWT) in a TypeScript environment. It retrieves the token from either a cookie or header, verifies its signature using a public key, and validates its expiration, not-before time, and authorized party claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/manual-jwt.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport Cookies from 'cookies'\nimport jwt from 'jsonwebtoken'\n\nexport default async function (req: Request, res: Response) {\n  // Your public key should be set as an environment variable\n  const publicKey = process.env.CLERK_PEM_PUBLIC_KEY\n  // Retrieve session token from either `__session` cookie for a same-origin request\n  // or from the `Authorization` header for cross-origin requests\n  const cookies = new Cookies(req, res)\n  const tokenSameOrigin = cookies.get('__session')\n  const tokenCrossOrigin = req.headers.authorization\n\n  if (!tokenSameOrigin && !tokenCrossOrigin) {\n    res.status(401).json({ error: 'Not signed in' })\n    return\n  }\n\n  try {\n    let decoded\n    const options = { algorithms: ['RS256'] } // The algorithm used to sign the token. Optional.\n    const permittedOrigins = ['http://localhost:3000', 'https://example.com'] // Replace with your permitted origins\n\n    if (tokenSameOrigin) {\n      decoded = jwt.verify(tokenSameOrigin, publicKey, options)\n    } else {\n      decoded = jwt.verify(tokenCrossOrigin, publicKey, options)\n    }\n\n    // Validate the token's expiration (exp) and not before (nbf) claims\n    const currentTime = Math.floor(Date.now() / 1000)\n    if (decoded.exp < currentTime || decoded.nbf > currentTime) {\n      throw new Error('Token is expired or not yet valid')\n    }\n\n    // Validate the token's authorized party (azp) claim\n    if (decoded.azp && !permittedOrigins.includes(decoded.azp)) {\n      throw new Error(\"Invalid 'azp' claim\")\n    }\n\n    res.status(200).json({ sessionToken: decoded })\n  } catch (error) {\n    res.status(400).json({\n      error: error.message,\n    })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Expo SDK using Package Managers in Bash\nDESCRIPTION: These commands demonstrate how to update the `@clerk/clerk-expo` package to its latest version using different package managers (npm, yarn, pnpm, bun). This is a necessary step when upgrading your application to use Clerk Expo SDK v2, which requires Expo SDK version 50 or later.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/expo/v2.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @clerk/clerk-expo@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-expo@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-expo@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/clerk-expo@latest\n```\n\n----------------------------------------\n\nTITLE: Configuring JWT Secret for Hasura with JWKS URL\nDESCRIPTION: JSON configuration for setting the Hasura GraphQL JWT secret using Clerk's JWKS endpoint. This configuration is used to verify JWTs issued by Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/hasura.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{ \"jwk_url\": \"https://{{fapi}}/.well-known/jwks.json\" }\n```\n\n----------------------------------------\n\nTITLE: Disabling User MFA Implementation Example\nDESCRIPTION: Example showing how to use the disableUserMFA method from clerkClient to disable MFA for a specific user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/disable-user-mfa.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.disableUserMFA(userId)\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToUserProfile in React\nDESCRIPTION: Example of using the RedirectToUserProfile component in a React application with environment variable configuration for the Clerk publishable key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-userprofile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, RedirectToUserProfile } from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nfunction PrivatePage() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <SignedIn>\n        <RedirectToUserProfile />\n      </SignedIn>\n      <SignedOut>\n        <p>You need to sign in to view your user profile.</p>\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing UserProfile Component in Remix\nDESCRIPTION: Example of using the <UserProfile /> component in a Remix route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { UserProfile } from '@clerk/remix'\n\nexport default function UserProfilePage() {\n  return <UserProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Organization Suggestions - Clerk JavaScript\nDESCRIPTION: Demonstrates how to retrieve organization suggestions for a user using the Clerk SDK. This call uses the getOrganizationSuggestions method which may accept parameters such as initialPage, pageSize, and status to filter results. The returned value is a list of organization suggestions relevant to the authenticated user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_19\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.getOrganizationSuggestions()\n```\n\n----------------------------------------\n\nTITLE: Authorization in Remix Loaders\nDESCRIPTION: This snippet demonstrates how to use the `has()` helper in a Remix loader to check user permissions. If the user doesn't have the 'org:team_settings:manage' permission, it redirects to a '/request-access' route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader: LoaderFunction = async (args) => {\n  const { has } = await getAuth(args)\n\n  if (has({ permission: 'org:team_settings:manage' }) === false) {\n    return redirect('/request-access')\n  }\n\n  return {}\n}\n\nexport default function Settings() {\n  return (\n    <div>\n      <h1>Settings Page</h1>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Fauna Access Provider with FSL schema\nDESCRIPTION: FSL (Fauna Security Language) code snippet for configuring an access provider in Fauna with a user-defined role to work with Clerk JWT authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_1\n\nLANGUAGE: fsl\nCODE:\n```\naccess provider Clerk {\n  // Don't change the values of the issuer or jwks_uri fields.\n  issuer \"...\"\n  jwks_uri \"...\"\n\n  // Adds a user-defined role to Clerk JWTs.\n  role <YOUR_ROLE>\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting a Sign-Up Request with Testing Token - Clerk API - Shell\nDESCRIPTION: This shell HTTP request demonstrates how to make a sign-up API call to Clerk using a Testing Token in the query string. Such tokens are used in automated testing to bypass bot detection mechanisms. The request is a POST to the /client/sign_ups endpoint, with the __clerk_testing_token query parameter included to ensure the API recognizes the request as part of a test suite. Replace the example domain and token value with your specific testing environment and valid token string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nPOST https://happy-hippo-1.clerk.accounts.dev/v1/client/sign_ups?__clerk_testing_token=1713877200-c_2J2MvPu9PnXcuhbPZNao0LOXqK9A7YrnBn0HmIWxy\n```\n\n----------------------------------------\n\nTITLE: Adding Reverification Middleware to Rack Application - Ruby\nDESCRIPTION: This snippet configures the Clerk::Rack::Reverification middleware in your config.ru file to enforce reverification for all routes. It demonstrates how to set a reverification preset (LAX) and specify protected routes using the routes argument. Required dependencies are the 'clerk-sdk-ruby' gem and the application source file, and the Clerk::StepUp::Preset::LAX constant must be available. Applies to security-sensitive applications needing additional verification steps for certain endpoints.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rack.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"rack\"\nrequire \"clerk/rack\"\n\nrequire_relative \"app\"\n\nuse Clerk::Rack::Middleware\n# Reverification preset is set to `LAX`\nuse Clerk::Rack::Reverification,\n  preset: Clerk::StepUp::Preset::LAX,\n  routes: [\"/*\"]\n\nrun App.new\n\n```\n\n----------------------------------------\n\nTITLE: Updating `createIsomorphicRequest` Import Path to Internal in JavaScript (1)\nDESCRIPTION: Illustrates changing the import path for `createIsomorphicRequest` from `@clerk/backend` to `@clerk/backend/internal`. This function is now considered internal, meaning it's not intended for general use and falls outside semantic versioning guarantees. Use with caution.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\n    import { createIsomorphicRequest } from '@clerk/backend'\n    import { createIsomorphicRequest } from '@clerk/backend/internal'\n```\n\n----------------------------------------\n\nTITLE: Using deleteOrganizationMembership in Clerk Backend SDK\nDESCRIPTION: Example of how to use the `deleteOrganizationMembership()` function. It demonstrates removing a user from an organization by providing the organization ID and user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization-membership.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst userId = 'user_123'\n\nconst response = await clerkClient.organizations.deleteOrganizationMembership({\n  organizationId,\n  userId,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with cURL\nDESCRIPTION: This snippet demonstrates how to update a user's metadata directly using the Clerk API with a cURL command. It sends a PATCH request with the birthday data to be stored in the user's unsafe_metadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_20\n\nLANGUAGE: bash\nCODE:\n```\ncurl -XPATCH -H 'Authorization: Bearer CLERK_SECRET_KEY' -H \"Content-type: application/json\" -d '{\n  \"unsafe_metadata\": {\n    \"birthday\": \"11-30-1969\"\n  }\n}' 'https://api.clerk.com/v1/users/{user_id}/metadata'\n```\n\n----------------------------------------\n\nTITLE: App Router Layout with Organization Access Control\nDESCRIPTION: Layout component that checks for active organization membership and conditionally renders either the protected content or organization selection interface. Implements server-side authentication check using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { OrganizationList } from '@clerk/nextjs'\nimport { auth } from '@clerk/nextjs/server'\nimport { PropsWithChildren } from 'react'\n\nexport default async function RequiredActiveOrgLayout(props: PropsWithChildren) {\n  // Get the organization ID from the session\n  const { orgId } = await auth()\n\n  // If the user has an active organization, render the children\n  if (orgId) {\n    return props.children\n  }\n\n  // If the user does not have an active organization, render the organization selection page\n  return (\n    <section>\n      <h1>Welcome to the Organization Selection page.</h1>\n      <p>\n        This part of the application requires the user to select an organization in order to\n        proceed. If you are not part of an organization, you can accept an invitation or create your\n        own organization.\n      </p>\n      <OrganizationList hidePersonal={true} />\n    </section>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Menu Items with JavaScript SDK\nDESCRIPTION: This JavaScript example shows how to add custom menu items to the UserButton using the Clerk JavaScript SDK. It demonstrates mounting a user button with a custom 'User page' menu item and icon.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-button\"></div>\n`\n\nconst userButtonDiv = document.getElementById('user-button')\n\nclerk.mountUserButton(userButtonDiv, {\n  customMenuItems: [\n    {\n      label: 'User page',\n      href: '/user',\n      mountIcon: (el) => {\n        el.innerHTML = '👤'\n      },\n      unmountIcon: (el) => {},\n    },\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Proxy in Remix Application\nDESCRIPTION: Remix configuration for setting up Clerk proxy using the ClerkApp wrapper and rootAuthLoader function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader = (args) => {\n  return rootAuthLoader(\n    args,\n    ({ req }) => {\n      const { userId, sessionId, getToken } = req.auth\n      return json({\n        message: `Hello from the root loader :)`,\n        ENV: getBrowserEnvironment(),\n      })\n    },\n    {\n      loadUser: true,\n      proxyUrl: 'https://app.dev/__clerk',\n    } as const,\n  )\n}\n\nexport default ClerkApp(App, {\n  proxyUrl: 'https://app.dev/__clerk',\n})\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk SDK in JavaScript (JavaScript)\nDESCRIPTION: Shows the basic initialization of the Clerk JavaScript SDK. It involves importing the `Clerk` class, creating an instance with the Publishable Key, and calling the asynchronous `load()` method to initialize Clerk and fetch necessary resources.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/javascript.mdx#2025-04-23_snippet_4\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'main.js' }}\nimport { Clerk } from '@clerk/clerk-js'\n\nconst publishableKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(publishableKey)\nawait clerk.load({\n  // Set load options here\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Making clerkClient Asynchronous in Middleware Handler - Diff\nDESCRIPTION: This code diff illustrates updating usages of clerkClient() to be asynchronous. The middleware function is made async and the clerkClient() function is awaited. The client.users?.getCount() usage is also awaited as the API now returns Promises. This requires updating usage in custom middleware or business logic.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_3\n\nLANGUAGE: diff\nCODE:\n```\nimport { clerkClient, clerkMiddleware } from '@clerk/nextjs/server';\nimport { NextResponse } from 'next/server';\n\n- export default clerkMiddleware((auth, request) => {\n-  const client = clerkClient();\n+ export default clerkMiddleware(async (auth, request) => {\n+  const client = await clerkClient();\n\n  const count = await client.users?.getCount();\n\n  if (count) {\n    return NextResponse.redirect(new URL('/new-url', request.url));\n  }\n});\n\nexport const config = {\n  matcher: [...],\n};\n```\n\n----------------------------------------\n\nTITLE: Custom SignOutButton in React\nDESCRIPTION: Shows how to create a custom sign-out button by wrapping custom content within the SignOutButton component in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-out-button.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport default function Example() {\n  return (\n    <SignOutButton>\n      <button>Custom sign out button</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Combining Clerk Middleware with `next-intl` Middleware in Next.js (JavaScript)\nDESCRIPTION: Illustrates how to combine Clerk's middleware with another middleware, specifically `next-intl` for internationalization, in a Next.js application using JavaScript. The `clerkMiddleware` function returns the `intlMiddleware` after performing its authentication checks, including protecting routes matched by `createRouteMatcher`. This pattern allows multiple middleware functionalities to coexist.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\n```js {{ filename: 'middleware.ts' }}\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport createMiddleware from 'next-intl/middleware'\n\nimport { AppConfig } from './utils/AppConfig'\n\nconst intlMiddleware = createMiddleware({\n  locales: AppConfig.locales,\n  localePrefix: AppConfig.localePrefix,\n  defaultLocale: AppConfig.defaultLocale,\n})\n\nconst isProtectedRoute = createRouteMatcher(['dashboard/(.*)'])\n\nexport default clerkMiddleware(async (auth, req) => {\n  if (isProtectedRoute(req)) await auth.protect()\n\n  return intlMiddleware(req)\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n```\n\n----------------------------------------\n\nTITLE: JWT Claims with Node SDK\nDESCRIPTION: Accessing JWT session claims using the Clerk Node SDK in Express applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Joining the Waitlist with ClerkJS - JavaScript Usage Example\nDESCRIPTION: Demonstrates in JavaScript how to call the `joinWaitlist` method to add an email address to the Clerk waitlist. The example asynchronously awaits the result of `clerk.joinWaitlist({ emailAddress: 'user@example.com' })`. Requires client context and prior configuration of waitlist sign-up mode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.joinWaitlist({ emailAddress: 'user@example.com' })\n```\n\n----------------------------------------\n\nTITLE: Accepting Organization Membership Request in TypeScript\nDESCRIPTION: Method to accept a pending request from a user to join an organization. Returns a Promise that resolves to the updated OrganizationMembershipRequest object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-membership-request.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction accept(): Promise<OrganizationMembershipRequest>\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Expo\nDESCRIPTION: React Native Expo implementation of SignedOut component with native components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedOut } from '@clerk/clerk-expo'\nimport { Text, View } from 'react-native'\n\nexport default function Screen() {\n  return (\n    <View>\n      <SignedOut>\n        <Text>You are signed out</Text>\n      </SignedOut>\n      <Text>This content is always visible.</Text>\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: iOS Swift Implementation of SMS OTP Auth\nDESCRIPTION: SwiftUI view implementation for SMS OTP authentication using Clerk, showing the basic structure for phone number and verification code handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_3\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct SMSOTPSignUpView: View {\n  @State private var phoneNumber = \"\"\n  @State private var code = \"\"\n  @State private var isVerifying = false\n\n  var body: some View {\n    if isVerifying {\n      TextField(\"Enter your verification code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verify(code: code) }\n      }\n    } else {\n      TextField(\"Enter phone number\", text: $phoneNumber)\n\n```\n\n----------------------------------------\n\nTITLE: GetToken Implementation in Express\nDESCRIPTION: Example of using getToken in an Express API route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\napp.get('/api/get-token', async (req, res) => {\n  const getToken = req.auth.getToken\n\n  const template = 'test'\n\n  const token = await getToken({ template })\n\n  res.json({ token })\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider Redirects for Chrome Extension (TSX)\nDESCRIPTION: Updates the `<ClerkProvider>` configuration to handle redirects correctly within the Chrome Extension environment. It uses `chrome.runtime.getURL('.')` to get the extension's base URL and sets the `afterSignOutUrl`, `signInFallbackRedirectUrl`, and `signUpFallbackRedirectUrl` props to point to the `popup.html` file within the extension, ensuring proper navigation after sign-in, sign-up, and sign-out actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignInButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/chrome-extension'\n\nimport { CountButton } from '~features/count-button'\n\nimport '~style.css'\n\nconst PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\nconst EXTENSION_URL = chrome.runtime.getURL('.')\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')\n}\n\nfunction IndexPopup() {\n  return (\n    <ClerkProvider\n      publishableKey={PUBLISHABLE_KEY}\n      afterSignOutUrl={`${EXTENSION_URL}/popup.html`}\n      signInFallbackRedirectUrl={`${EXTENSION_URL}/popup.html`}\n      signUpFallbackRedirectUrl={`${EXTENSION_URL}/popup.html`}\n    >\n      <div className=\"plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-[600px] plasmo-w-[800px] plasmo-flex-col\">\n        <header className=\"plasmo-w-full\">\n          <SignedOut>\n            <SignInButton mode=\"modal\" />\n          </SignedOut>\n          <SignedIn>\n            <UserButton />\n          </SignedIn>\n        </header>\n        <main className=\"plasmo-grow\">\n          <CountButton />\n        </main>\n      </div>\n    </ClerkProvider>\n  )\n}\n\nexport default IndexPopup\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims with @clerk/backend\nDESCRIPTION: Demonstration of how to access JWT claims using the @clerk/backend package. This example shows how to create a Clerk client and authenticate a request to retrieve session claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Astro SDK via npm - Bash\nDESCRIPTION: This snippet installs the Clerk Astro SDK using npm, providing the required authentication and user management tools for Astro projects. No prerequisites beyond Node.js and npm are needed. Run from the root of an initialized Astro app; outputs a local SDK installation as a project dependency.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/astro\n```\n\n----------------------------------------\n\nTITLE: createSignInToken Function Signature\nDESCRIPTION: TypeScript function signature for creating a sign-in token. The function accepts CreateSignInTokensParams and returns a Promise resolving to SignInToken.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sign-in-tokens/create-sign-in-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createSignInToken(params: CreateSignInTokensParams): Promise<SignInToken>\n```\n\n----------------------------------------\n\nTITLE: Converting clerkMiddleware Handler for Async auth() - Diff\nDESCRIPTION: This code diff demonstrates how to refactor a custom Clerk middleware handler to handle the async nature of the new auth() method. Both the middleware callback and calls to auth are now async, and usages like resolvedAuth.users.getCount() leverage await. Dependencies include @clerk/nextjs/server and next/server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_2\n\nLANGUAGE: diff\nCODE:\n```\nimport { clerkClient, clerkMiddleware } from '@clerk/nextjs/server';\nimport { NextResponse } from 'next/server';\n\n- export default clerkMiddleware((auth, request) => {\n-  const resolvedAuth = auth();\n+ export default clerkMiddleware(async (auth, request) => {\n+  const resolvedAuth = await auth();\n\n  const count = await resolvedAuth.users.getCount();\n\n  if (count) {\n    return NextResponse.redirect(new URL('/new-url', request.url));\n  }\n});\n\nexport const config = {\n  matcher: [...],\n};\n```\n\n----------------------------------------\n\nTITLE: Creating Backup Codes in ClerkJS\nDESCRIPTION: Creates a new set of backup codes for a user, replacing any previously generated codes. Returns a BackupCodeResource object. This method can only be used if the user has another multi-factor authentication method enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createBackupCode(): Promise<BackupCodeResource>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.createBackupCode()\n```\n\n----------------------------------------\n\nTITLE: Managing User Organization Invitations with Vanilla JavaScript\nDESCRIPTION: This example demonstrates how to use the Clerk JavaScript SDK to fetch and display user organization invitations. It creates a table dynamically and provides 'Accept' buttons for pending invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-user-org-invitations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  const { data } = await clerk.user.getOrganizationInvitations()\n  const invitations = data\n\n  invitations.map((invitation) => {\n    const tableBody = document.getElementById('invitations-table-body')\n    const row = tableBody.insertRow()\n    row.insertCell().textContent = invitation.emailAddress\n    row.insertCell().textContent = invitation.publicOrganizationData.name\n    row.insertCell().textContent = invitation.role\n    row.insertCell().textContent = invitation.status\n\n    // Show accept button for pending invitations\n    if (invitation.status === 'pending') {\n      const acceptBtn = document.createElement('button')\n      acceptBtn.textContent = 'Accept'\n      acceptBtn.addEventListener('click', async function (e) {\n        e.preventDefault()\n        await invitation.accept()\n      })\n      row.insertCell().appendChild(acceptBtn)\n    }\n  })\n} else {\n  // If there is no active user, mount Clerk's <SignIn />\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Clerk Go SDK using Go Modules\nDESCRIPTION: Example showing how to import the clerk-sdk-go package in a Go project using Go Modules for dependency management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/overview.mdx#_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\nimport (\n  \"github.com/clerk/clerk-sdk-go/v2\"\n)\n```\n\n----------------------------------------\n\nTITLE: Defining the TOTPFactor Type in TypeScript\nDESCRIPTION: Defines the Time-based One-Time Password (TOTP) factor type. This represents the second factor verification strategy using TOTP authenticator apps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-second-factor.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype TOTPFactor = {\n  strategy: TOTPStrategy\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Vue App with Vite\nDESCRIPTION: Commands to create and initialize a new Vue 3 application using Vite with TypeScript template.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/vue.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm create vite@latest clerk-vue -- --template vue-ts\ncd clerk-vue\nnpm install\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Removing `ClerkErrorBoundary` in Remix TypeScript Code\nDESCRIPTION: Illustrates the removal of the `ClerkErrorBoundary` import and its usage in a Remix route file (likely `root.tsx`). This component is no longer necessary in Core 2 for error handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\nimport {\n  ClerkApp,\n  // prettier-ignore\n  ClerkErrorBoundary,\n} from '@clerk/remix'\n\nexport const loader = (args: DataFunctionArgs) => {\n  return rootAuthLoader(args)\n}\n\nexport default ClerkApp(App)\n\nexport const ErrorBoundary = ClerkErrorBoundary()\n```\n\n----------------------------------------\n\nTITLE: Creating Phone Number Type Definition\nDESCRIPTION: TypeScript function signature for creating a phone number, defining the return type as a Promise resolving to a PhoneNumber object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/create-phone-number.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createPhoneNumber(params: CreatePhoneNumberParams): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Image Optimization with Clerk React Client Components\nDESCRIPTION: This snippet shows how to optimize user profile images in a React client component using Clerk. It demonstrates retrieving the current user and applying image optimization parameters to their imageUrl.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/image-optimization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useClerk } from '@clerk/clerk-react'\nimport React from 'react'\n\nexport default function ImageOptimization() {\n  const clerk = useClerk()\n  const { user } = clerk\n  if (!user) return <p>No Image URL found</p>\n\n  const { imageUrl } = user\n  const params = new URLSearchParams()\n\n  params.set('height', '200')\n  params.set('width', '200')\n  params.set('quality', '100')\n  params.set('fit', 'crop')\n\n  const imageSrc = `${imageUrl}?${params.toString()}`\n\n  return (\n    <div>\n      <h1>Image source:</h1>\n      <p>{imageSrc}</p>\n      <h2>Image:</h2>\n      <img src={imageSrc} alt=\"User image\" />\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Installing/Updating @clerk/backend using Package Managers\nDESCRIPTION: Demonstrates how to install or update the `@clerk/backend` package to the latest version (which includes Core 2) using different JavaScript package managers. This step is necessary to begin the upgrade process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/backend\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/backend\n```\n\n----------------------------------------\n\nTITLE: Updating useClerk Composable for Clerk Vue SDK - Vue\nDESCRIPTION: This Vue component snippet demonstrates converting the useClerk composable usage from the vue-clerk SDK to the official @clerk/vue SDK. It shows the updated import path and highlights that useClerk now returns a Vue ref, making clerk.value necessary to access SDK methods. Prerequisites include a properly configured Clerk account and the @clerk/vue SDK installed. The signIn method illustrates the change from direct method invocation to value-based invocation, while component rendering remains unchanged.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/migrating-from-vue-community-sdk.mdx#2025-04-23_snippet_4\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\\nimport { useClerk } from 'vue-clerk'\\nimport { useClerk } from '@clerk/vue'\\nconst clerk = useClerk()\\nfunction signIn() {\\n  clerk.openSignIn()\\n  clerk.value.openSignIn()\\n}\\n</script>\\n<template>\\n  <button @click=\\\"signIn\\\">Sign in</button>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Declaring Disable TOTP Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Declares the disableTOTP function for removing the user's existing TOTP secret, deactivating TOTP MFA. Returns a Promise of a DeletedObject representing the deletion, with no inputs. Authenticator strategy must be enabled in Clerk dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nfunction disableTOTP(): Promise<DeletedObject>\n```\n\n----------------------------------------\n\nTITLE: Declaring Get Organization Suggestions Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Declares the getOrganizationSuggestions method for retrieving suggested organizations for the signed-in Clerk user. Accepts optional paging and returns a Promise of ClerkPaginatedResponse of OrganizationSuggestion objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationSuggestions(\\n  params?: GetUserOrganizationSuggestionsParams,\\n): Promise<ClerkPaginatedResponse<OrganizationSuggestion>>\n```\n\n----------------------------------------\n\nTITLE: Deleting a Web3Wallet Instance (TypeScript)\nDESCRIPTION: Defines the `destroy` method signature for the `Web3Wallet` object. This asynchronous function deletes the associated Web3 wallet. It returns a Promise that resolves with no value (`void`) upon successful deletion.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/web3-wallet.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Rendering Call-to-Action Cards with SVG Icons in React\nDESCRIPTION: This code renders two call-to-action cards using a Cards component with variant 'cta'. Each card contains a link, descriptive text, and an SVG icon - one for Discord and one for support channels.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/help.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JSX\nCODE:\n```\n<Cards variant=\"cta\" level={2}>\n  - [Join our Discord](https://clerk.com/discord 'Join Discord')\n  - Join our official Discord server to chat with us directly and become a part of the Clerk community.\n  - {<svg viewBox=\"0 0 32 32\" fill=\"none\"><path fill=\"#5865F2\" d=\"M27.09 5.826a26.387 26.387 0 0 0-6.514-2.02.099.099 0 0 0-.105.05c-.281.5-.593 1.153-.81 1.666a24.359 24.359 0 0 0-7.317 0 16.853 16.853 0 0 0-.823-1.666.103.103 0 0 0-.105-.05 26.315 26.315 0 0 0-6.513 2.02.093.093 0 0 0-.043.037C.71 12.061-.425 18.107.132 24.077a.11.11 0 0 0 .042.075 26.534 26.534 0 0 0 7.99 4.04.104.104 0 0 0 .113-.038 18.986 18.986 0 0 0 1.634-2.659.1.1 0 0 0-.055-.14c-.87-.33-1.7-.733-2.496-1.19a.104.104 0 0 1-.05-.083.102.102 0 0 1 .04-.088c.167-.125.335-.256.495-.388a.099.099 0 0 1 .104-.014c5.237 2.39 10.906 2.39 16.081 0a.098.098 0 0 1 .105.013c.16.131.328.264.497.39a.102.102 0 0 1-.009.17c-.797.465-1.632.863-2.497 1.188a.1.1 0 0 0-.059.06.102.102 0 0 0 .005.082c.48.931 1.03 1.817 1.633 2.658a.1.1 0 0 0 .113.038 26.453 26.453 0 0 0 8.002-4.04.104.104 0 0 0 .042-.073c.668-6.902-1.117-12.898-4.731-18.214a.08.08 0 0 0-.042-.038ZM10.692 20.442c-1.576 0-2.876-1.448-2.876-3.226 0-1.777 1.274-3.225 2.877-3.225 1.614 0 2.9 1.46 2.875 3.225 0 1.778-1.274 3.226-2.876 3.226Zm10.633 0c-1.576 0-2.875-1.448-2.875-3.226 0-1.777 1.273-3.225 2.875-3.225 1.615 0 2.901 1.46 2.876 3.225 0 1.778-1.261 3.226-2.876 3.226Z\"/></svg>}\n\n  ---\n\n  - [Need help?](/support 'Get help')\n  - Contact us through Discord, Twitter, or email to receive answers to your questions and learn more about Clerk.\n  - {<svg viewBox=\"0 0 32 32\" fill=\"none\"><path stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M22 30.603c-5.109 0-9.25-3.773-9.25-8.427 0-4.653 4.141-8.426 9.25-8.426s9.25 3.773 9.25 8.426c0 1.864-.664 3.587-1.789 4.982.28 1.476.996 3.488 1.789 4.092 0 0-2.735-.379-4.79-1.69A9.923 9.923 0 0 1 22 30.604Z\"/><path fill=\"currentColor\" fillOpacity=\".15\" fillRule=\"evenodd\" d=\"M14.55 27.172c-1.131-1.398-1.8-3.125-1.8-4.996 0-4.653 4.141-8.426 9.25-8.426 3.67 0 6.84 1.947 8.335 4.768.592-1.412.915-2.937.915-4.527C31.25 6.678 24.422.75 16 .75S.75 6.678.75 13.99c0 2.93 1.095 5.636 2.95 7.829-.462 2.319-1.643 5.481-2.95 6.43 0 0 4.511-.595 7.9-2.654a16.853 16.853 0 0 0 5.9 1.577Z\" clipRule=\"evenodd\"/><path fill=\"currentColor\" d=\"m14.55 27.172-.06.748a.75.75 0 0 0 .643-1.22l-.582.472Zm15.785-8.654-.663.351a.75.75 0 0 0 1.355-.06l-.692-.29ZM3.7 21.818l.736.147a.75.75 0 0 0-.163-.63l-.573.484ZM.75 28.25l-.44-.607a.75.75 0 0 0 .538 1.35L.75 28.25Zm7.9-2.655.323-.677a.75.75 0 0 0-.713.036l.39.64Zm6.483 1.106c-1.031-1.275-1.633-2.838-1.633-4.525H12c0 2.055.736 3.947 1.967 5.468l1.166-.943ZM13.5 22.176c0-4.175 3.738-7.676 8.5-7.676V13c-5.456 0-10 4.044-10 9.176h1.5ZM22 14.5c3.408 0 6.315 1.807 7.672 4.37l1.326-.703C29.366 15.087 25.93 13 22 13v1.5Zm9.027 4.308A12.42 12.42 0 0 0 32 13.991h-1.5a10.92 10.92 0 0 1-.857 4.237l1.384.58ZM32 13.991C32 6.168 24.734 0 16 0v1.5c8.111 0 14.5 5.688 14.5 12.49H32ZM16 0C7.266 0 0 6.168 0 13.99h1.5C1.5 7.189 7.889 1.5 16 1.5V0ZM0 13.99c0 3.123 1.169 5.998 3.127 8.313l1.145-.969c-1.75-2.07-2.772-4.608-2.772-7.343H0Zm2.964 7.682a18.779 18.779 0 0 1-1.111 3.58C1.34 26.438.785 27.296.309 27.641l.882 1.215c.831-.604 1.519-1.802 2.04-3.013.538-1.25.963-2.671 1.204-3.879l-1.471-.293ZM.75 28.25l.098.743h.006l.011-.002a21.578 21.578 0 0 0 .201-.03 27.929 27.929 0 0 0 2.553-.541c1.584-.415 3.637-1.101 5.42-2.185l-.78-1.281c-1.605.976-3.501 1.617-5.02 2.015a26.447 26.447 0 0 1-2.404.51 11.662 11.662 0 0 1-.174.026l-.008.001H.652l.098.744Zm7.576-1.979a17.604 17.604 0 0 0 6.163 1.649l.123-1.495a16.104 16.104 0 0 1-5.639-1.507l-.647 1.353Z\"/></svg>}\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Google One Tap Authentication in Next.js\nDESCRIPTION: This TypeScript React component creates a custom Google One Tap authentication flow for use in a Clerk application. It initializes the Google Sign-In client, handles the authentication response, and integrates with Clerk's API for user authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/google-one-tap.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useClerk } from '@clerk/nextjs'\nimport { useRouter } from 'next/navigation'\nimport Script from 'next/script'\nimport { useEffect } from 'react'\n\n// Add clerk to Window to avoid type errors\ndeclare global {\n  interface Window {\n    google: any\n  }\n}\n\nexport function CustomGoogleOneTap({ children }: { children: React.ReactNode }) {\n  const clerk = useClerk()\n  const router = useRouter()\n\n  useEffect(() => {\n    // Will show the One Tap UI after two seconds\n    const timeout = setTimeout(() => oneTap(), 2000)\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [])\n\n  const oneTap = () => {\n    const { google } = window\n    if (google) {\n      google.accounts.id.initialize({\n        // Add your Google Client ID here.\n        client_id: 'xxx-xxx-xxx',\n        callback: async (response: any) => {\n          // Here we call our provider with the token provided by Google\n          call(response.credential)\n        },\n      })\n\n      // Uncomment below to show the One Tap UI without\n      // logging any notifications.\n      // return google.accounts.id.prompt() // without listening to notification\n\n      // Display the One Tap UI, and log any errors that occur.\n      return google.accounts.id.prompt((notification: any) => {\n        console.log('Notification ::', notification)\n        if (notification.isNotDisplayed()) {\n          console.log('getNotDisplayedReason ::', notification.getNotDisplayedReason())\n        } else if (notification.isSkippedMoment()) {\n          console.log('getSkippedReason  ::', notification.getSkippedReason())\n        } else if (notification.isDismissedMoment()) {\n          console.log('getDismissedReason ::', notification.getDismissedReason())\n        }\n      })\n    }\n  }\n\n  const call = async (token: any) => {\n    try {\n      const res = await clerk.authenticateWithGoogleOneTap({\n        token,\n      })\n\n      await clerk.handleGoogleOneTapCallback(res, {\n        signInFallbackRedirectUrl: '/example-fallback-path',\n      })\n    } catch (error) {\n      router.push('/sign-in')\n    }\n  }\n\n  return (\n    <>\n      <Script src=\"https://accounts.google.com/gsi/client\" strategy=\"beforeInteractive\">\n        {children}\n      </Script>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Express Routes with requireAuth (TypeScript)\nDESCRIPTION: Illustrates how to secure an Express route using the `requireAuth()` middleware from `@clerk/express`. This middleware ensures that only authenticated users can access the specified route (`/protected` in this example); unauthenticated users are typically redirected (e.g., to a sign-in page or homepage). The example also shows how to retrieve the authenticated user's ID using `getAuth(req)` and fetch the full user object using `clerkClient.users.getUser(userId)`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport 'dotenv/config'\nimport express from 'express'\nimport { clerkClient, requireAuth, getAuth } from '@clerk/express'\n\nconst app = express()\nconst PORT = 3000\n\n// Use requireAuth() to protect this route\n// If user isn't authenticated, requireAuth() will redirect back to the homepage\napp.get('/protected', requireAuth(), async (req, res) => {\n  // Use `getAuth()` to get the user's `userId`\n  const { userId } = getAuth(req)\n\n  // Use Clerk's JavaScript Backend SDK to get the user's User object\n  const user = await clerkClient.users.getUser(userId)\n\n  return res.json({ user })\n})\n\n// Start the server and listen on the specified port\napp.listen(PORT, () => {\n  console.log(`Example app listening at http://localhost:${PORT}`)\n})\n```\n\n----------------------------------------\n\nTITLE: Installing Official Clerk Astro SDK\nDESCRIPTION: Package installation commands for different package managers to remove the community SDK and install the official Clerk Astro SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/migrating-from-astro-community-sdk.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm uninstall astro-clerk-auth\nnpm install @clerk/astro\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn remove astro-clerk-auth\nyarn add @clerk/astro\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm remove astro-clerk-auth\npnpm add @clerk/astro\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun remove astro-clerk-auth\nbun add @clerk/astro\n```\n\n----------------------------------------\n\nTITLE: Deleting a User Account - Clerk JavaScript - JavaScript\nDESCRIPTION: Permanently deletes the current Clerk user using the user.delete method. Input is none and output is a fulfilled Promise when deletion completes. Irreversible and should only be called with explicit user consent.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.delete()\n```\n\n----------------------------------------\n\nTITLE: Updating Allowlist Identifier List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getAllowlistIdentifierList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Types Package with Package Managers\nDESCRIPTION: Commands for installing the @clerk/types package using different package managers (npm, yarn, pnpm, and bun). This package provides type definitions for adding type-safety to applications using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/types\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/types\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/types\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/types\n```\n\n----------------------------------------\n\nTITLE: Defining createOrganizationInvitation Function in TypeScript\nDESCRIPTION: Function signature for creating an organization invitation. It takes CreateOrganizationInvitationParams as input and returns a Promise resolving to an OrganizationInvitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createOrganizationInvitation(\n  params: CreateOrganizationInvitationParams,\n): Promise<OrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: Applying Tailwind Classes to Clerk Components in Next.js App Router\nDESCRIPTION: Example of using the appearance prop to apply Tailwind CSS classes to a Clerk SignIn component in a Next.js app using the App Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <SignIn\n            appearance={{\n              elements: {\n                formButtonPrimary: 'bg-slate-500 hover:bg-slate-400 text-sm',\n              },\n            }}\n          />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Protecting Rails Controller Actions with Clerk Authentication (Ruby)\nDESCRIPTION: Demonstrates protecting all actions in the `AdminController` by adding a `before_action` filter that invokes the `require_clerk_session!` method. This ensures only authenticated users with a valid Clerk session can access the controller's actions. Assumes `AdminController` inherits from `ApplicationController` where `require_clerk_session!` is defined.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rails.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ruby\nCODE:\n```\n```ruby\nclass AdminController < ApplicationController\n  # Protect routes with the `require_clerk_session!` method\n  before_action :require_clerk_session!\n\n  def index\n    # ...\n  end\nend\n```\n```\n\n----------------------------------------\n\nTITLE: Defining deletePhoneNumber Function in TypeScript\nDESCRIPTION: Function signature for deletePhoneNumber, which takes a phoneNumberId as a string parameter and returns a Promise resolving to a PhoneNumber object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/delete-phone-number.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deletePhoneNumber(phoneNumberId: string): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Updating Email Address Function Declaration\nDESCRIPTION: TypeScript function signature for updating an email address. Takes an email address ID and update parameters, returns a Promise containing the updated EmailAddress object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/update-email-address.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateEmailAddress(\n  emailAddressId: string,\n  params: UpdateEmailAddressParams,\n): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Private Metadata with Clerk Ruby SDK (Ruby)\nDESCRIPTION: This Ruby example illustrates retrieving a user's metadata using Clerk's Ruby SDK. Initializes the SDK with an API key and calls 'getUser' on a user ID, returning the full user object (including private metadata). Requires the 'clerk' gem and correct permissions. Intended for backend systems.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_8\n\nLANGUAGE: ruby\nCODE:\n```\n# ruby json example with a private metadata and stripe id\nrequire 'clerk'\nclerk = Clerk::SDK.new(api_key: \"your_clerk_secret_key\")\nclerk.users.getUser(\"user_xyz\")\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in React\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in a React application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationProfile } from '@clerk/clerk-react'\n\nexport default function OrganizationProfilePage() {\n  return <OrganizationProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Organization Membership Public Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing public metadata for organization memberships with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationMembershipPublicMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getInvitations pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for Organization.getInvitations where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Authenticating Grafbase Requests with Clerk and Apollo Client\nDESCRIPTION: React component that sets up an Apollo Client provider with authentication middleware for Grafbase. It uses Clerk's session token as a Bearer token in the authorization header for all GraphQL operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nexport const ApolloProviderWrapper = ({ children }: PropsWithChildren) => {\n  // Use Clerk's `useAuth()` hook to access the `getToken()` method\n  const { getToken } = useAuth()\n\n  const client = useMemo(() => {\n    const authMiddleware = setContext(async (operation, { headers }) => {\n      // Retrieve Clerk's session token using the template you created in the Clerk Dashboard\n      const token = await getToken({ template: 'grafbase' })\n\n      return {\n        headers: {\n          ...headers,\n          authorization: `Bearer ${token}`, // Send the session token as a Bearer token in the `Authorization` header\n        },\n      }\n    })\n\n    return new ApolloClient({\n      link: from([authMiddleware, httpLink]),\n      cache: new InMemoryCache(),\n    })\n  }, [getToken])\n\n  return <ApolloProvider client={client}>{children}</ApolloProvider>\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Latest @clerk/clerk-react using pnpm - Bash\nDESCRIPTION: Installs the updated @clerk/clerk-react package with pnpm, meeting requirements for Core 2 features and updates. This should be executed in your project directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-react\n```\n\n----------------------------------------\n\nTITLE: Removing User Password - Clerk TypeScript\nDESCRIPTION: Defines the removePassword function that accepts parameters for the current password and removes the user's password from Clerk. Returns a promise resolving to the updated User object. Requires the 'currentPassword' parameter in the input object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_26\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction removePassword(params: RemoveUserPasswordParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Using SafeIdentifier with Transformation for Localization\nDESCRIPTION: Shows how to use the SafeIdentifier component with a transform property to integrate with localization. The transform function allows modifying the identifier string before rendering, making it useful for interpolating the identifier into translated text.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_13\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Strategy name=\"email_code\">\n  <h1>{t('checkEmail')}</h1>\n  <p>\n    <SignIn.SafeIdentifier transform={(identifier) => t('sentCodeTo', { identifier })} />\n  </p>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk SDK Configuration in Ruby\nDESCRIPTION: Example showing how to configure the Clerk SDK with a secret key and custom logger. The secret key can be provided directly or through environment variables, while logging is optional and defaults to none if not specified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/ruby/configuration.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\nClerk.configure do |c|\n  c.secret_key = `{{secret}}` # if omitted: ENV[\"CLERK_SECRET_KEY\"] - API calls will fail if unset\n  c.logger = Logger.new(STDOUT) # if omitted, no logging\nend\n```\n\n----------------------------------------\n\nTITLE: Retrieving Membership Requests for an Organization in TypeScript\nDESCRIPTION: This snippet shows how to retrieve the list of membership requests for the currently active organization using the getMembershipRequests() method. It requires Organizations, Verified domains, and Automatic suggestion to be enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getMembershipRequests(\n  params?: GetMembershipRequestParams,\n): Promise<ClerkPaginatedResponse<OrganizationMembershipRequestResource>>\n```\n\n----------------------------------------\n\nTITLE: Mounting UserProfile Component with JavaScript\nDESCRIPTION: Demonstrates how to mount the <UserProfile /> component using Clerk's JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-profile\"></div>\n`\n\nconst userProfileDiv = document.getElementById('user-profile')\n\nclerk.mountUserProfile(userProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Next.js using TypeScript\nDESCRIPTION: Provides examples of retrieving JWT session claims (`JwtPayload`) in a Next.js application using `getAuth` from both `@clerk/nextjs/server` (for App Router or Pages Router API routes/getServerSideProps) and `@clerk/ssr.server` (likely older or different contexts). This shows where to access JWT details like the active organization ID/slug/role after the removal of the `orgs` claim.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Implementing OAuth Sign-In/Sign-Up in iOS (Swift)\nDESCRIPTION: This Swift code demonstrates how to implement OAuth authentication in an iOS app using Clerk. It includes a button for Google sign-in and handles both sign-in and sign-up scenarios, including potential additional steps required in the authentication process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/oauth-connections.mdx#2025-04-23_snippet_3\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct OAuthView: View {\n  var body: some View {\n    // Render a button for each supported OAuth provider\n    // you want to add to your app. This example uses only Google.\n    Button(\"Sign In with Google\") {\n      Task { await signInWithOAuth(provider: .google) }\n    }\n  }\n}\n\nextension OAuthView {\n\n  func signInWithOAuth(provider: OAuthProvider) async {\n    do {\n      // Start the sign-in process using the selected OAuth provider.\n      let result = try await SignIn.authenticateWithRedirect(strategy: .oauth(provider: provider))\n\n      // It is common for users who are authenticating with OAuth to use\n      // a sign-in button when they mean to sign-up, and vice versa.\n      // Clerk will handle this transfer for you if possible.\n      // Therefore, a TransferFlowResult can be either a SignIn or SignUp.\n\n      switch result {\n      case .signIn(let signIn):\n        switch signIn.status {\n        case .complete:\n          // If sign-in process is complete, navigate the user as needed.\n          dump(Clerk.shared.session)\n        default:\n          // If the status is not complete, check why. User may need to\n          // complete further steps.\n          dump(signIn.status)\n        }\n      case .signUp(let signUp):\n        switch signUp.status {\n        case .complete:\n          // If sign-up process is complete, navigate the user as needed.\n          dump(Clerk.shared.session)\n        default:\n          // If the status is not complete, check why. User may need to\n          // complete further steps.\n          dump(signUp.status)\n        }\n      }\n\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling.\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining verifyToken Function Signature in TypeScript\nDESCRIPTION: This snippet shows the TypeScript function signature for the verifyToken method, including its parameters and return type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/verify-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifyToken(\n  token: string,\n  options: VerifyTokenOptions,\n): Promise<JwtReturnType<JwtPayload, TokenVerificationError>>\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationInvitationList Return Signature in Clerk API\nDESCRIPTION: The return signature of Users.getOrganizationInvitationList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Basic rootAuthLoader() Integration in React Router Loader (TSX)\nDESCRIPTION: Demonstrates the simplest way to use `rootAuthLoader()` within a React Router `loader()` function in `app/root.tsx`. This setup returns the basic authentication state provided by Clerk without any custom data loading.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/root-auth-loader.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/root.tsx' }}\nimport { rootAuthLoader } from '@clerk/react-router/ssr.server'\nimport type { Route } from './+types/root'\n\nexport async function loader(args: Route.LoaderArgs) {\n  return rootAuthLoader(args)\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Organization Invitations Method Update\nDESCRIPTION: Shows the replacement of getPendingInvitations with getInvitations method and new parameter format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getPendingInvitations()\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Running Next.js Development Server\nDESCRIPTION: Commands to start the Next.js development server using different package managers (npm, yarn, pnpm, or bun). This allows developers to view and test the custom sign-up page locally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Offset Results Example\nDESCRIPTION: Example showing how to skip a certain number of results using the offset parameter for pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-organization-membership-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList({\n  userId,\n  // skips the first 10 memberships\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Defining deleteDomain Function Signature in TypeScript\nDESCRIPTION: Function signature for `deleteDomain()` which takes a domain ID as a string parameter and returns a Promise resolving to a DeletedObject.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/domains/delete-domain.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteDomain(id: string): Promise<DeletedObject>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Proxy Environment Variables\nDESCRIPTION: Environment variable configurations for setting up Clerk proxy in Next.js, Remix, and JavaScript applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n\nNEXT_PUBLIC_CLERK_PROXY_URL=https://app.dev/__clerk\n```\n\nLANGUAGE: env\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n\nCLERK_PROXY_URL=https://app.dev/__clerk\n```\n\nLANGUAGE: env\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n\nCLERK_PROXY_URL=https://app.dev/__clerk\n```\n\n----------------------------------------\n\nTITLE: Adding UserProfileLink to UserButton in Vue\nDESCRIPTION: Example of implementing UserButton with a custom link in Vue. The code demonstrates the Vue-specific slot-based approach for adding a custom icon to the UserButton.UserProfileLink component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_8\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { UserButton } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <UserButton>\n      <UserButton.UserProfileLink label=\"Homepage\" url=\"/\">\n        <template #labelIcon>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" fill=\"currentColor\">\n            <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n          </svg>\n        </template>\n      </UserButton.UserProfileLink>\n    </UserButton>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Organization Invitation Private Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing private metadata for organization invitations with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationInvitationPrivateMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization.getMemberships in JavaScript\nDESCRIPTION: The pagination arguments for Organization.getMemberships have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI Tool - Bash\nDESCRIPTION: These commands demonstrate how to run the @clerk/upgrade CLI tool for automating the upgrade process from Core 1 to Core 2. They use npx, yarn dlx, pnpm dlx, and bun dlx to invoke the tool, which scans the codebase and suggests changes. Dependencies: Node.js, the specified package manager, and access to npx/yarn/pnpm/bun. The '--from=core-1' parameter instructs the tool about the migration origin. Outputs are upgrade recommendations printed in the terminal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Membership with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of using the updateOrganizationMembership function to update a user's role within an organization. It demonstrates setting the organizationId, userId, and new role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-membership.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst userId = 'user_123'\n\nconst role = 'org:admin'\n\nconst response = await clerkClient.organizations.updateOrganizationMembership({\n  organizationId,\n  userId,\n  role,\n})\n```\n\n----------------------------------------\n\nTITLE: Documenting SDK Usage and Setup in Markdown\nDESCRIPTION: This Markdown snippet provides a template for structuring README files in Clerk SDK projects. It outlines required sections such as overview, getting started, prerequisites (including Clerk application setup steps), installation, usage instructions for environment keys, and license information. It serves as a reusable guideline for documentation, ensuring users have all critical onboarding information. No dependencies are required, and sections can be customized to the SDK's specifics.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/conventions.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# clerk-sdk-name\n\n<!-- Give an overview. Explain what the SDK does and what one can use it for. Link out to clerk.com when mentioning Clerk -->\n\n## Getting started\n\n### Prerequisites\n\n- If you haven't already, [sign up for an account](https://dashboard.clerk.com/sign-up) and create a new application. Go to the [**API keys**](https://dashboard.clerk.com/last-active?path=api-keys) page to retrieve your Publishable Key and/or Secret Key.\n\n<!-- Mention any other necessary steps a user has to perform before continuing. Mention any hard requirements e.g. like minimum supported Node.js version. -->\n\n### Installation\n\n```shell\n# Install command for SDK\n```\n\n## Usage\n\n<!-- Explain how to use the Publishable Key and/or Secret Key, e.g. by placing them into an .env file -->\n\n<!-- Explain how to use your SDK! -->\n\n## License\n\n<!-- State which license your library falls under, Clerk recommends MIT -->\n```\n\n----------------------------------------\n\nTITLE: Defining Organization Retrieval Function (TypeScript)\nDESCRIPTION: Provides the TypeScript signature for the `getOrganization` method. This function retrieves the details of a specific organization based on its `organizationId`. It returns a Promise that resolves with the `Organization` object if found, or `undefined` otherwise.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganization(organizationId: string): Promise<Organization | undefined>\n```\n\n----------------------------------------\n\nTITLE: Running Remix App in Development Mode - Bash\nDESCRIPTION: Provides shell commands used to start the Remix development server using npm, yarn, pnpm, or bun. Each command must be run in the project root, and the project should have its dependencies installed. These commands start the local instance for testing the custom sign-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n\n```\n\n----------------------------------------\n\nTITLE: Applying Localization in Remix using ClerkApp (TSX)\nDESCRIPTION: Shows how to configure localization in a Remix application. Import the desired locale object (e.g., `frFR` for French) from `@clerk/localizations` and pass it within the options object to the `ClerkApp` higher-order component in the `app/root.tsx` file. This applies the specified language strings to Clerk components within the Remix app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/root.tsx', mark: [[6, 7], [39, 41]] }}\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\nimport { Links, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nexport const meta: MetaFunction = () => [\n  {\n    charset: 'utf-8',\n    title: 'New Remix App',\n    viewport: 'width=device-width,initial-scale=1',\n  },\n]\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nexport function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        {children}\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>\n  )\n}\n\nfunction App() {\n  return <Outlet />\n}\n\nexport default ClerkApp(App, {\n  localization: frFR,\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Generating a Secure Encryption Key using OpenSSL\nDESCRIPTION: Provides a shell command using `openssl` to generate a cryptographically secure 32-byte (256-bit) pseudorandom key in hexadecimal format. This key is recommended for the `CLERK_ENCRYPTION_KEY` environment variable when using dynamic secret keys with Clerk middleware.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\n```sh {{ filename: 'terminal' }}\nopenssl rand --hex 32\n```\n```\n\n----------------------------------------\n\nTITLE: Creating an Authenticated Layout in Expo Router\nDESCRIPTION: This Expo Router layout component checks if a user is signed in with the Clerk useAuth hook. It redirects unauthenticated users to the sign-in page and renders a Stack navigator for authenticated users.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Redirect, Stack } from 'expo-router'\nimport { useAuth } from '@clerk/clerk-expo'\n\nexport default function AuthenticatedLayout() {\n  const { isSignedIn } = useAuth()\n\n  if (!isSignedIn) {\n    return <Redirect href={'/sign-in'} />\n  }\n\n  return <Stack />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Password Verification with Clerk Client\nDESCRIPTION: Example implementation of password verification using the Clerk Backend SDK. Shows how to verify a user's password by providing the userId and password to the verifyPassword method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/verify-password.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst password = 'testpassword123'\n\nconst response = await clerkClient.users.verifyPassword({\n  userId,\n  password,\n})\n```\n\n----------------------------------------\n\nTITLE: Defining createOrganization Function in TypeScript\nDESCRIPTION: Function signature for creating an Organization using Clerk's Backend SDK. It takes CreateParams as input and returns a Promise resolving to an Organization object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createOrganization(params: CreateParams): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Layout Prop in Vue\nDESCRIPTION: Example of setting up Clerk layout options in a Vue application. This snippet demonstrates how to configure the clerkPlugin with custom layout settings in the main Vue application file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/layout.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    layout: {\n      socialButtonsPlacement: 'bottom',\n      socialButtonsVariant: 'iconButton',\n      termsPageUrl: 'https://clerk.com/terms',\n    },\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Replacing getPendingInvitations with getInvitations in Clerk SDK (JavaScript)\nDESCRIPTION: This snippet demonstrates how to replace the deprecated getPendingInvitations method with the new getInvitations method in the Clerk SDK. The new method accepts an object with a status parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Limiting Results with getOrganizationList in TypeScript\nDESCRIPTION: Example of using getOrganizationList with the 'limit' parameter to restrict the number of results returned to 10.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationList({\n  // returns the first 10 results\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/clerk-sdk-node v5 using Package Managers\nDESCRIPTION: Demonstrates how to install the latest version (v5+) of the `@clerk/clerk-sdk-node` package using npm, yarn, pnpm, or bun package managers as part of the upgrade process to Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-sdk-node\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-sdk-node\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-sdk-node\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/clerk-sdk-node\n```\n\n----------------------------------------\n\nTITLE: Illustrating Internal `buildRequest` Change (httpOptions Removal) in JavaScript\nDESCRIPTION: Demonstrates an internal change within the Clerk SDK where the `httpOptions` parameter was removed from the `buildRequest` function. The previous usage (deleted line) passed options directly, while the new approach (inserted lines) involves calling the function returned by `buildRequest` with parameters like `headerParams`. This internal change may affect public APIs that previously exposed `httpOptions`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_15\n\nLANGUAGE: js\nCODE:\n```\nconst r = buildRequest({ httpOptions: { headers: {} } })\nconst request = buildRequest()\nrequest({ headerParams: {} })\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Organization.getRoles\nDESCRIPTION: Shows the changes to pagination parameters in Organization.getRoles method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Organization.getMemberships\nDESCRIPTION: Shows the changes to pagination parameters in Organization.getMemberships method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Rendering AuthenticateWithRedirectCallback Component in JSX\nDESCRIPTION: This snippet demonstrates how to use the <AuthenticateWithRedirectCallback /> component in a React application. It's typically rendered on the route specified as the redirectUrl in the authenticateWithRedirect() call.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/authenticate-with-callback.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<AuthenticateWithRedirectCallback />\n```\n\n----------------------------------------\n\nTITLE: Sample JSON Response for Verified Token\nDESCRIPTION: This JSON snippet illustrates the structure of a successful response from the verifyToken function, containing the decoded and verified token payload.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/verify-token.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"verifiedToken\": {\n    \"azp\": \"http://localhost:3000\",\n    \"exp\": 1687906422,\n    \"iat\": 1687906362,\n    \"iss\": \"https://magical-marmoset-51.clerk.accounts.dev\",\n    \"nbf\": 1687906352,\n    \"sid\": \"sess_2Ro7e2IxrffdqBboq8KfB6eGbIy\",\n    \"sub\": \"user_2RfWKJREkjKbHZy0Wqa5qrHeAnb\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in Organization.getInvitations\nDESCRIPTION: Demonstration of pagination argument changes in Organization.getInvitations method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_14\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Expo Dashboard Layout Implementation\nDESCRIPTION: Protected dashboard layout component for Expo using Clerk authentication and permission checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Redirect, Stack } from 'expo-router'\nimport { Protect, useAuth } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function GuestLayout() {\n  const { isSignedIn } = useAuth()\n\n  if (!isSignedIn) {\n    return <Redirect href={'/'} />\n  }\n\n  return (\n    <Protect\n      permission=\"org:dashboard:access\"\n      fallback={<Text>You don't have the permissions to access the dashboard.</Text>}\n    >\n      <Stack />\n    </Protect>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a User via Clerk API using cURL (Bash)\nDESCRIPTION: This Bash snippet demonstrates how to create a user by making a direct POST request to the Clerk Backend API endpoint (`/v1/users`) using cURL. It requires passing a valid Clerk Secret Key in the Authorization header and providing the user's email address and password in the JSON request body.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/creating-users.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/users' -X POST -H 'Authorization:Bearer {{secret}}' -H 'Content-Type:application/json' -d '{\n  \"email_address\": [\"test@example.com\"],\n  \"password\": \"my-secure-password\"\n}'\n```\n\n----------------------------------------\n\nTITLE: Implementing withClerk Higher Order Function in Clerk\nDESCRIPTION: Example code showing how to recreate the removed withClerk higher order function using Clerk's custom hooks. This function wraps a component and injects the clerk instance as a prop, preserving component display names for debugging.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_53\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withClerk(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const clerk = useIsomorphicClerkContext()\n\n    if (!clerk.loaded) return null\n\n    return <Component {...props} clerk={clerk} />\n  }\n\n  HOC.displayName = `withClerk(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: Using ClerkLoaded in Next.js Pages Router\nDESCRIPTION: This example shows how to implement the ClerkLoaded component in a Next.js application using the Pages Router. It ensures Clerk is loaded before rendering child components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/clerk-loaded.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkLoaded } from '@clerk/nextjs'\n\nexport default function Page() {\n  return (\n    <ClerkLoaded>\n      <p>Clerk has loaded</p>\n      <MyCustomSignInFlow />\n    </ClerkLoaded>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in User.getOrganizationMemberships\nDESCRIPTION: Shows the changes to pagination parameters in User.getOrganizationMemberships method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Enabling Dynamic Rendering in ClerkProvider - Diff\nDESCRIPTION: This diff shows how to opt into dynamic rendering for the ClerkProvider React component by adding the dynamic prop. This affects rendering mode of the root provider in Next.js when integrating Clerk. RootLayout now explicitly passes dynamic, enabling the application-wide dynamic rendering (though use of auth() is still recommended for most use cases).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_5\n\nLANGUAGE: diff\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }) {\n  return (\n-   <ClerkProvider>\n+   <ClerkProvider dynamic>\n      <html>\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to Clerk OrganizationProfile using JavaScript SDK\nDESCRIPTION: Illustrates adding custom pages dynamically using the core Clerk JavaScript SDK (`@clerk/clerk-js`). It configures pages via the `customPages` array passed as an option to `clerk.openOrganizationProfile()`. Each object in the array defines a page with `url`, `label`, and lifecycle methods (`mountIcon`, `unmountIcon`, `mount`, `unmount`) to control icon and content rendering within the specified DOM element.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n```js {{ filename: 'main.js' }}\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(pubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-profile\"></div>\n`\n\nconst orgProfileDiv = document.getElementById('organization-profile')\n\nclerk.openOrganizationProfile(orgProfileDiv, {\n  customPages: [\n    {\n      url: 'custom-page',\n      label: 'Custom Page',\n      mountIcon: (el) => {\n        el.innerHTML = '👋'\n      },\n      unmountIcon: (el) => {\n        el.innerHTML = ''\n      },\n      mount: (el) => {\n        el.innerHTML = `\n          <h1><b>Custom Page</b></h1>\n          <p>This is the content of the custom page.</p>\n          `\n      },\n      unmount: (el) => {\n        el.innerHTML = ''\n      },\n    },\n    {\n      url: '/other-page',\n      label: 'Other Page',\n      mountIcon: (el) => {\n        el.innerHTML = '🌐'\n      },\n      unmountIcon: (el) => {\n        el.innerHTML = ''\n      },\n    },\n  ],\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification in Astro Framework\nDESCRIPTION: This example shows how to implement reverification in an Astro API route using the `reverificationErrorResponse` utility. It checks if the user has verified their credentials within 10 minutes using the 'strict' configuration and returns the appropriate response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { APIRoute } from 'astro'\nimport { reverificationErrorResponse } from '@clerk/shared/authorization-errors'\n\nexport const GET: APIRoute = async ({ locals }) => {\n  const { has } = locals.auth()\n\n  // Check if the user has *not* verified their credentials within the past 10 minutes\n  const shouldUserRevalidate = !has({ reverification: 'strict' })\n\n  // If the user hasn't reverified, return an error with the matching configuration (e.g. `strict`)\n  if (shouldUserRevalidate) {\n    return reverificationErrorResponse('strict')\n  }\n\n  return new Response('success', { status: 200 })\n}\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient Parameter from frontendApi to publishableKey (JavaScript)\nDESCRIPTION: Illustrates the change from using 'frontendApi' to 'publishableKey' as a parameter in the createClerkClient function. Note that both the key and value need to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_14\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/clerk-sdk-node'\n\ncreateClerkClient({ frontendApi: '...' })\ncreateClerkClient({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp State Check in Vue\nDESCRIPTION: Vue component that uses the $signUpStore nanostore to access and display the current sign-up status. Uses the useStore hook from @nanostores/vue for state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-up-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $signUpStore } from '@clerk/astro/client'\n\nconst signUp = useStore($signUpStore)\n</script>\n\n<template>\n  <div v-if=\"signUp === undefined\">\n    <!-- Add logic to handle loading state -->\n  </div>\n  <div v-else>\n    <div>The current sign-up attempt status is {{ signUp.status }}.</div>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Uninstalling and Installing Clerk Vue SDK via npm - Bash\nDESCRIPTION: These bash commands detail how to uninstall the old vue-clerk community package with npm and install the new official @clerk/vue SDK. Requires npm installed and access to your project's directory. No input parameters are needed; outputs are changes to your project's node_modules and package.json. Ensure no script errors halt execution.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/migrating-from-vue-community-sdk.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm uninstall vue-clerk\\nnpm install @clerk/vue\n```\n\n----------------------------------------\n\nTITLE: Defining getSessionList Function Signature in TypeScript\nDESCRIPTION: Function signature for getSessionList, which retrieves a list of sessions. It takes SessionListParams as an argument and returns a Promise resolving to a PaginatedResourceResponse containing an array of Session objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getSessionList(\n  queryParams: SessionListParams,\n): Promise<PaginatedResourceResponse<Session[]>>\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-in with Vue and Clerk Store\nDESCRIPTION: Example of using $clerkStore in a Vue component to implement a sign-in button. Uses the useStore hook from nanostores/vue and implements the sign-in functionality through a method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $clerkStore } from '@clerk/astro/client'\n\nconst clerk = useStore($clerkStore)\n\nconst openSignIn = () => clerk.value.openSignIn()\n</script>\n\n<template>\n  <button @click=\"openSignIn\">Sign in</button>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToSignUp in React\nDESCRIPTION: Example showing how to use RedirectToSignUp component in a React private page with ClerkProvider and environment variable configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-signup.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignedIn,\n  SignedOut,\n  RedirectToSignUp,\n  UserButton,\n} from '@clerk/clerk-react'\n\n// Import your Publishable Key\nconst PUBLISHABLE_KEY = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Add your Clerk Publishable Key to the .env file')\n}\n\nfunction PrivatePage() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n      <SignedOut>\n        <RedirectToSignUp />\n      </SignedOut>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Skipping Results with getOrganizationList in TypeScript\nDESCRIPTION: Example of using getOrganizationList with the 'offset' parameter to skip the first 10 results, useful for pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-list.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationList({\n  // skips the first 10 results\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Mounting OrganizationProfile with JavaScript\nDESCRIPTION: Example of how to mount the <OrganizationProfile /> component using the Clerk JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-profile\"></div>\n`\n\nconst orgProfileDiv = document.getElementById('organization-profile')\n\nclerk.mountOrganizationProfile(orgProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk API and SDK Behavior (Next.js)\nDESCRIPTION: Lists Next.js specific environment variables for Clerk API/SDK configuration. Public variables prefixed with `NEXT_PUBLIC_` configure frontend settings like JS URLs/versions, API URLs/versions, FAPI, and proxy URLs. Backend variables include `CLERK_ENCRYPTION_KEY` for secure key propagation and `CLERK_JWT_KEY` for networkless JWT verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `NEXT_PUBLIC_CLERK_JS_URL` | Sets the URL that `@clerk/clerk-react` should hot-load `@clerk/clerk-js` from. `NEXT_PUBLIC_CLERK_JS` does the same but is deprecated. |\n| `NEXT_PUBLIC_CLERK_JS_VERSION` | Sets the npm version for `@clerk/clerk-js`. |\n| `NEXT_PUBLIC_CLERK_API_URL` | Sets the Clerk API URL for debugging. Defaults to `\"https://api.clerk.com\"` |\n| `NEXT_PUBLIC_CLERK_API_VERSION` | Sets the version of the Clerk API to use. Defaults to `\"v1\"` |\n| `NEXT_PUBLIC_CLERK_FAPI` | Sets the URL to your Clerk app's Frontend API. |\n| `NEXT_PUBLIC_CLERK_PROXY_URL` | Sets the URL for your proxy. |\n| `CLERK_ENCRYPTION_KEY` | Sets the encryption key to securely propagate `clerkMiddleware` dynamic keys during request time. A 128-bit, pseudorandom value should be used. See [Dynamic keys](/docs/references/nextjs/clerk-middleware#dynamic-keys) to learn more. |\n| `CLERK_JWT_KEY` | Sets the JWT verification key that Clerk will use to provide networkless JWT session token verification. Refer to [Manual JWT verification](/docs/backend-requests/manual-jwt). |\n```\n\n----------------------------------------\n\nTITLE: Applying Localization in Next.js using ClerkProvider (TSX)\nDESCRIPTION: Demonstrates how to apply a predefined localization (e.g., French - `frFR`) in a Next.js application. It involves importing the specific locale object from `@clerk/localizations` and passing it to the `localization` prop of the `<ClerkProvider>` component in either `app/layout.tsx` (App Router) or `_app.tsx` (Pages Router). This overrides the default English strings in Clerk components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/layout.tsx', mark: [3, 4, 8] }}\nimport { ClerkProvider } from '@clerk/nextjs'\nimport './globals.css'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider localization={frFR}>\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n```\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: '_app.tsx', mark: [3, 4, 9] }}\nimport { ClerkProvider } from '@clerk/nextjs'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    // Add the localization prop to the ClerkProvider\n    <ClerkProvider localization={frFR} {...pageProps}>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n```\n\n----------------------------------------\n\nTITLE: Customizing Clerk Session Token with Organization Name\nDESCRIPTION: This JSON snippet shows how to add a custom claim for the organization name to the Clerk session token. This allows access to additional organization information on the server-side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/org-slugs-in-urls.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"org_name\": \"{{org.name}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating User with Clerk Backend SDK in TypeScript\nDESCRIPTION: Function signature for creating a new User object using Clerk's Backend SDK. The function takes CreateUserParams as input and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/create-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createUser(params: CreateUserParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Rendering React Logo SVG with Dynamic Styling\nDESCRIPTION: This SVG component creates the React logo using paths and groups. It utilizes inline styles with CSS variables to dynamically set colors for light and dark themes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/react.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 22 20\" fill=\"none\">\n  <path style={{ fill: 'var(--light, #087EA4) var(--dark, #58C4DC)' }} d=\"M11 11.91a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z\" />\n\n  <g style={{ stroke: 'var(--light, #087EA4) var(--dark, #58C4DC)' }}>\n    <path d=\"M11 14.41c5.523 0 10-2.014 10-4.5 0-2.485-4.477-4.5-10-4.5S1 7.425 1 9.91c0 2.486 4.477 4.5 10 4.5Z\" />\n\n    <path\n      d=\"M7.102 12.16c2.762 4.783 6.745 7.653 8.897 6.41 2.153-1.242 1.659-6.127-1.103-10.91C12.136 2.877 8.152.007 6 1.25 3.847 2.493 4.341 7.377 7.102 12.16Z\"\n    />\n\n    <path\n      d=\"M7.102 7.66C4.341 12.443 3.847 17.328 6 18.57c2.153 1.243 6.136-1.627 8.898-6.41 2.76-4.783 3.255-9.667 1.102-10.91C13.847.007 9.864 2.877 7.102 7.66Z\"\n    />\n  </g>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using yarn dlx (Bash)\nDESCRIPTION: Executes the Clerk upgrade helper tool using Yarn's `dlx` command (similar to npx) to analyze the project for required modifications when upgrading from Core 1.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Basic Label Component Usage\nDESCRIPTION: Shows how to use the Label component within a Field to associate a label with an input element.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_15\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">\n  <Clerk.Label>Label</Clerk.Label>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Applying Site Layout with Clerk Integration to Homepage - Astro\nDESCRIPTION: This Astro snippet sets up the index page of the site to use the custom SiteLayout. It imports SiteLayout and passes a title prop, then adds a welcome message inviting users to sign in. No external dependencies are required except the existence of the SiteLayout component defined earlier.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_8\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport SiteLayout from '../layouts/SiteLayout.astro'\n---\n\n<SiteLayout title=\"Clerk + Astro\">\n  <p>Sign in to try Clerk out!</p>\n</SiteLayout>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Type Definitions for Clerk Documentation Navigation\nDESCRIPTION: TypeScript types that define the structure of the navigation manifest for Clerk's documentation, including NavGroup, NavItem, LinkItem, and SubNavItem types with their properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport type Nav = Array<NavGroup>\n\n/**\n * Nav groups are separated by horizontal rules\n */\ntype NavGroup = Array<NavItem>\n\n/**\n * A nav item is either a link, or a sub-list with nested `items`\n */\ntype NavItem = LinkItem | SubNavItem\n\n/**\n * A link to an internal or external page\n */\ntype LinkItem = {\n  /**\n   * The visible item text. May contain backticks (`) to render `<code>`\n   *\n   * @example 'Next.js Quickstart'\n   * @example '`<SignIn>` and `<SignUp>`'\n   */\n  title: string\n  /**\n   * The item link. Internal links should be relative\n   *\n   * @example '/docs/quickstarts/nextjs'\n   * @example 'https://example.com'\n   */\n  href: string\n  /**\n   * Muted text to display next to the item text\n   *\n   * @example 'Community'\n   * @example 'Beta'\n   */\n  tag?: string\n  /**\n   * Icon to display next to the item text\n   *\n   * @example 'globe'\n   * @see [Available icons]{@link https://github.com/clerk/clerk/blob/main/src/app/(website)/docs/icons.tsx}\n   */\n  icon?: string\n  /**\n   * Whether to enable text wrapping for the item text\n   *\n   * @default true\n   */\n  wrap?: boolean\n  /**\n   * Set to \"_blank\" to open link in a new tab\n   */\n  target?: '_blank'\n}\ntype SubNavItem = {\n  /**\n   * The visible item text. May contain backticks (`) to render `<code>`\n   *\n   * @example 'Next.js Quickstart'\n   * @example '`<SignIn>` and `<SignUp>`'\n   */\n  title: string\n  /**\n   * The nested sub-items\n   */\n  items: Nav\n  /**\n   * Muted text to display next to the item text\n   *\n   * @example 'Community'\n   * @example 'Beta'\n   */\n  tag?: string\n  /**\n   * Icon to display next to the item text\n   *\n   * @example 'globe'\n   * @see [Available icons]{@link https://github.com/clerk/clerk/blob/main/src/app/(website)/docs/icons.tsx}\n   */\n  icon?: string\n  /**\n   * Whether to enable text wrapping for the item text\n   *\n   * @default true\n   */\n  wrap?: boolean\n  /**\n   * Whether to collapse the sub-nav\n   *\n   * @default false\n   */\n  collapse?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pending Invitations Retrieval in JavaScript\nDESCRIPTION: This snippet demonstrates the replacement of getPendingInvitations with getInvitations. The new method allows for filtering invitations by status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getPendingInvitations()\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Reloading User Data - Clerk JavaScript\nDESCRIPTION: Provides a JavaScript example of refreshing the Clerk user's data by invoking the reload method. This ensures the user object reflects the latest persisted information after a mutation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_25\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.reload()\n```\n\n----------------------------------------\n\nTITLE: Updating `createAuthenticateRequest` Import Path to Internal in JavaScript\nDESCRIPTION: Shows the required update for importing `createAuthenticateRequest`, moving it from `@clerk/backend` to the `@clerk/backend/internal` path. This function is intended for internal Clerk purposes, is not covered by semver, and should be used cautiously, if at all, in external applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_8\n\nLANGUAGE: js\nCODE:\n```\n    import { createAuthenticateRequest } from '@clerk/backend'\n    import { createAuthenticateRequest } from '@clerk/backend/internal'\n```\n\n----------------------------------------\n\nTITLE: Running Clerk CLI Upgrade Tool using pnpm dlx - Bash\nDESCRIPTION: Invokes the Clerk CLI migration tool using pnpm dlx for analysis and actionable upgrade instructions towards Core 2 compatibility. Designed for pnpm-managed environments.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Inspecting Clerk Component HTML Classes\nDESCRIPTION: Example of HTML classes found when inspecting a Clerk component element, showing safe classes to target for styling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\ncl-formButtonPrimary cl-button 🔒️ cl-internal-1ta0xpz\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Fastify\nDESCRIPTION: Example of accessing session claims in a Fastify application using the @clerk/fastify package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Allowlist Identifiers Response Format\nDESCRIPTION: Shows the updated response format for getAllowlistIdentifierList including totalCount.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Protecting a Single Route Path with clerkMiddleware()\nDESCRIPTION: This example demonstrates how to migrate from authMiddleware() to clerkMiddleware() when protecting a specific route path (in this case, '/dashboard'). It shows how to use createRouteMatcher to define protected routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isDashboardRoute = createRouteMatcher(['/dashboard(.*)'])\n\nexport default clerkMiddleware(async (auth, request) => {\n  if (isDashboardRoute(request)) await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Authentication Data on Client-Side with Clerk Hooks\nDESCRIPTION: Using Clerk's useAuth() and useUser() hooks to access user authentication data in client components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\nimport { useAuth, useUser } from '@clerk/nextjs'\n\nexport default function Home() {\n  const { userId, sessionId } = useAuth()\n  const { isSignedIn, user } = useUser()\n  console.log(userId, sessionId, isSignedIn, user)\n\n  return <p>Home Page</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Responsive User Icon SVG with Theme Support\nDESCRIPTION: This SVG creates a user profile icon with a circular head and body silhouette. It uses CSS variables to implement theme-based coloring, with different fill values for light and dark modes. The icon consists of two paths with unique styles that create a visually appealing user representation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/backend-sdk.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 32 32\">\n  <path\n    style={{ fill: 'var(--light, #6C47FF) var(--dark, #9785FF)' }}\n    d=\"M16 21a5 5 0 1 0 0-10 5 5 0 0 0 0 10ZM25.01 27.838c.425.426.382 1.13-.118 1.465A15.925 15.925 0 0 1 16 32c-3.29 0-6.35-.994-8.893-2.697-.5-.335-.542-1.04-.117-1.465l3.654-3.654c.33-.33.843-.382 1.258-.17A8.96 8.96 0 0 0 16 25a8.961 8.961 0 0 0 4.098-.985c.416-.213.928-.161 1.258.17l3.654 3.653Z\"\n  />\n\n  <path\n    style={{ fill: 'var(--light, #BAB1FF) var(--dark, rgb(151 133 255 / 0.6))' }}\n    d=\"M24.893 2.697c.5.335.542 1.04.117 1.464l-3.654 3.654c-.33.33-.843.383-1.258.17A9 9 0 0 0 7.985 20.098c.213.416.16.928-.17 1.258L4.161 25.01c-.425.425-1.13.383-1.464-.117A15.926 15.926 0 0 1 0 16C0 7.163 7.163 0 16 0c3.29 0 6.35.994 8.893 2.697Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: OAuth Access Token Response Format\nDESCRIPTION: Illustrates the new response format for getUserOauthAccessToken with totalCount.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Updating Return Type for User.getOrganizationMembershipList in JavaScript\nDESCRIPTION: The return type for User.getOrganizationMembershipList has changed from an array of items to an object containing data array and totalCount, making it easier to work with paginated API responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Astro\nDESCRIPTION: This snippet shows how to customize all SignIn components in an Astro application by configuring the clerk integration in the astro.config.mjs file with appearance variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        signIn: {\n          variables: {\n            colorPrimary: 'blue',\n            colorText: 'black',\n          },\n        },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Invitation List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getInvitationList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in User.getOrganizationInvitations\nDESCRIPTION: Demonstration of pagination argument changes in User.getOrganizationInvitations method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_16\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating API Routes with clerkClient\nDESCRIPTION: Updates to the clerkClient usage in API routes, changing from a variable to a function that accepts Astro context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/migrating-from-astro-community-sdk.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { APIRoute } from 'astro'\nimport { clerkClient } from '@clerk/astro/server'\n\nexport const GET: APIRoute = async (context) => {\n  clerkClient(context).users.getUser(/* ... */)\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Updated User Organization Methods Pagination\nDESCRIPTION: Demonstrates the pagination parameter changes in user-organization related methods including getOrganizationInvitations, getOrganizationSuggestions, and getOrganizationMemberships.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating ClerkExpressWithAuth Parameter from frontendApi to publishableKey (JavaScript)\nDESCRIPTION: Illustrates the change from using 'frontendApi' to 'publishableKey' as a parameter in the ClerkExpressWithAuth function. Both the key and value need to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_18\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ClerkExpressWithAuth } from '@clerk/clerk-sdk-node'\n\nClerkExpressWithAuth({ frontendApi: '...' })\nClerkExpressWithAuth({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Creating Allowlist Identifier Type Definition\nDESCRIPTION: TypeScript function signature for creating an allowlist identifier, specifying the parameter types and return value.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/create-allowlist-identifier.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createAllowlistIdentifier(\n  params: AllowlistIdentifierCreateParams,\n): Promise<AllowlistIdentifier>\n```\n\n----------------------------------------\n\nTITLE: Using verifyClient Function in React/TypeScript\nDESCRIPTION: This example demonstrates how to use the verifyClient function from the Clerk Backend SDK. It shows initializing a token variable and then calling the function with that token, awaiting the response.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/client/verify-client.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst token = 'my-session-token'\n\nconst response = await clerkClient.clients.verifyClient(token)\n```\n\n----------------------------------------\n\nTITLE: Signing Out Active Session in iOS with Clerk\nDESCRIPTION: This Swift code shows how to sign out a specific session using the Clerk shared instance and the session ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_11\n\nLANGUAGE: swift\nCODE:\n```\n// Use signOut to sign-out a specific session\ntry await Clerk.shared.signOut(sessionId: session.id)\n```\n\n----------------------------------------\n\nTITLE: Migrating User.getOrganizationInvitations Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for User.getOrganizationInvitations have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Next.js\nDESCRIPTION: Examples of accessing session claims in Next.js using both @clerk/nextjs/server and @clerk/ssr.server packages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInWithMetamaskButton in Vue\nDESCRIPTION: Demonstrates how to import and use the SignInWithMetamaskButton component in a Vue application. This example shows the basic implementation in a Vue component using the composition API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_3\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignInWithMetamaskButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignInWithMetamaskButton />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Authenticating with MetaMask in Clerk\nDESCRIPTION: Method signature for initiating authentication using the MetaMask browser extension. This prompts users to connect their Ethereum wallet and sign a message to verify ownership of the wallet address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithMetamask(): Promise<SignInResource>\n```\n\n----------------------------------------\n\nTITLE: Executing Clerk Backend API Operations with Go SDK\nDESCRIPTION: This Go code snippet showcases how to utilize the Clerk Go SDK for several backend API tasks, including creating and updating an organization, fetching organization memberships, and retrieving user details linked to a membership. The snippet requires importing Clerk SDK modules (organization, organizationmembership, user) and setting a valid Clerk Secret Key, typically retrieved from the Clerk Dashboard. Key parameters include the API context, organization name and slug, and membership/user identifiers. The code demonstrates robust error handling specific to Clerk errors. This snippet expects valid Clerk credentials and does not include input validation or advanced pagination handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/other-examples.mdx#2025-04-23_snippet_0\n\nLANGUAGE: Go\nCODE:\n```\nimport (\n    \"github.com/clerk/clerk-sdk-go/v2\"\n    \"github.com/clerk/clerk-sdk-go/v2/organization\"\n    \"github.com/clerk/clerk-sdk-go/v2/organizationmembership\"\n    \"github.com/clerk/clerk-sdk-go/v2/user\"\n)\n\nfunc main() {\n  // Each API operation requires a context.Context as the first argument.\n  ctx := context.Background()\n\n  // Set the API key\n  clerk.SetKey(\"{{secret}}\")\n\n  // Create an organization\n  org, err := organization.Create(ctx, &organization.CreateParams{\n      Name: clerk.String(\"Clerk Inc\"),\n  })\n  if err != nil {\n    // You can get additional information on the error, if it can\n    // be type-cast to clerk.APIErrorResponse.\n    if apiErr, ok := err.(*clerk.APIErrorResponse); ok {\n      apiErr.TraceID\n      apiErr.Error()\n      apiErr.Response.RawJSON\n    }\n    // handle the error\n    panic(err)\n  }\n\n  // Update the organization\n  org, err = organization.Update(ctx, org.ID, &organization.UpdateParams{\n      Slug: clerk.String(\"clerk\"),\n  })\n  if err != nil {\n    // handle the error\n    panic(err)\n  }\n\n  // List organization memberships\n  listParams := organizationmembership.ListParams{}\n  listParams.Limit = clerk.Int64(10)\n  memberships, err := organizationmembership.List(ctx, params)\n  if err != nil {\n    // handle the error\n    panic(err)\n  }\n  if memberships.TotalCount < 0 {\n      return\n  }\n  membership := memberships[0]\n\n  // Get a user\n  usr, err := user.Get(ctx, membership.UserID)\n  if err != nil {\n    // handle the error\n    panic(err)\n  }\n}\n\n```\n\n----------------------------------------\n\nTITLE: Creating a Sign-Up Page in Next.js with Clerk\nDESCRIPTION: This code creates a dedicated sign-up page using Clerk's SignUp component with Next.js optional catch-all routing. The page will render Clerk's pre-built sign-up UI.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignUp } from '@clerk/nextjs'\n\nexport default function Page() {\n  return <SignUp />\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Hasura Platform Logo SVG – SVG\nDESCRIPTION: This SVG code block provides the official Hasura logo for integration documentation. Requires SVG support; can be used for branding and illustration purposes, without dynamic behavior or dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_5\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" fill=\"none\"><path fill=\"#3970FD\" d=\"M30.575 11.01C31.467 8.201 30.93 2.6 29.2.531a.519.519 0 0 0-.837.067l-2.13 3.378a1.629 1.629 0 0 1-2.19.36A14.527 14.527 0 0 0 16 1.92a14.527 14.527 0 0 0-8.043 2.417 1.634 1.634 0 0 1-2.19-.36L3.637.599A.52.52 0 0 0 2.8.53C1.07 2.603.533 8.205 1.426 11.008c.296.935.377 1.92.203 2.88-.175.95-.35 2.099-.35 2.899 0 8.212 6.592 14.867 14.718 14.867 8.13 0 14.717-6.659 14.717-14.867 0-.8-.174-1.949-.348-2.9a6.022 6.022 0 0 1 .209-2.878ZM15.997 28.333c-6.284 0-11.394-5.164-11.394-11.512a11.518 11.518 0 0 1 6.525-10.399A11.181 11.181 0 0 1 16 5.316c1.744 0 3.394.394 4.872 1.11a11.522 11.522 0 0 1 6.526 10.4c-.004 6.344-5.117 11.508-11.401 11.508Z\"/><path fill=\"#3970FD\" d=\"m20.935 21.255-2.912-5.104-2.497-4.251a.326.326 0 0 0-.284-.163h-2.385a.33.33 0 0 0-.282.5l2.39 4.056-3.206 4.94a.336.336 0 0 0-.014.337.327.327 0 0 0 .29.173h2.402a.324.324 0 0 0 .276-.152l1.734-2.734 1.555 2.723a.328.328 0 0 0 .282.167h2.368a.32.32 0 0 0 .283-.167.327.327 0 0 0 0-.327v.002Z\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using bun dlx\nDESCRIPTION: Executes the `@clerk/upgrade` CLI tool via bun dlx to scan the codebase and identify necessary changes for upgrading from Core 1. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Accessing SignIn State in Svelte\nDESCRIPTION: Demonstrates how to use $signInStore in Svelte, with special consideration for Svelte's reactivity system requiring aliasing of the store import.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-in-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $signInStore as signIn } from '@clerk/astro/client'\n</script>\n\n{#if $signIn === undefined}\n  <!-- Add logic to handle loading state -->\n{:else}\n  <div>The current sign in attempt status is {$signIn.status}.</div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Updating OAuth Access Token Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getUserOauthAccessToken method, transitioning from directly returning data to returning an object with data and totalCount properties for pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Using redirectToOrganizationProfile in Clerk SDK\nDESCRIPTION: Example usage of the redirectToOrganizationProfile method from the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.redirectToOrganizationProfile()\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware for Authentication\nDESCRIPTION: Implementation of Clerk middleware to protect all application routes by requiring authentication. The middleware uses Clerk's auth.protect() method to ensure only authenticated users can access the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(async (auth) => {\n  await auth.protect()\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Tasks Table with Clerk User ID\nDESCRIPTION: SQL query to create a 'tasks' table with a user_id column that maps to a Clerk user ID and enables Row Level Security (RLS) on the table.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\n-- Create a \"tasks\" table with a user_id column that maps to a Clerk user ID\ncreate table tasks(\n  id serial primary key,\n  name text not null,\n  user_id text not null default auth.jwt()->>'sub'\n);\n\n-- Enable RLS on the table\nalter table \"tasks\" enable row level security;\n```\n\n----------------------------------------\n\nTITLE: Updating clerkPlugin with publishableKey in JavaScript\nDESCRIPTION: Shows the change from using 'frontendApi' to 'publishableKey' as a parameter when registering the clerkPlugin with Fastify. This update requires changing both the key name and its value.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nimport { clerkPlugin } from '@clerk/fastify'\n\nfastify.register(clerkPlugin, { frontendApi: '...' })\nfastify.register(clerkPlugin, { publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getMembershipRequests pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for Organization.getMembershipRequests where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Unmounting OrganizationSwitcher with JavaScript\nDESCRIPTION: Example of how to unmount the OrganizationSwitcher component using JavaScript. This code shows the process of mounting and then unmounting the OrganizationSwitcher component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-switcher\"></div>\n`\n\nconst orgSwitcherDiv = document.getElementById('organization-switcher')\n\nclerk.mountOrganizationSwitcher(orgSwitcherDiv)\n\n// ...\n\nclerk.unmountOrganizationSwitcher(orgSwitcherDiv)\n```\n\n----------------------------------------\n\nTITLE: Authenticating Requests and Accessing JwtPayload with @clerk/backend - TypeScript\nDESCRIPTION: This snippet demonstrates creation of a Clerk client instance, authenticating a request, and accessing its JWT claims using @clerk/backend. It highlights how to retrieve the sessionClaims from requestState.toAuth(), with parameters for Clerk keys specified as arguments. Dependencies: @clerk/backend, TypeScript. Key parameters: secretKey, publishableKey, request. Output: JwtPayload with current org-related claims. Intended for back-end service usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Remix App\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport { dark } from '@clerk/themes'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    baseTheme: dark,\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Return Type for Organizations.getOrganizationInvitationList in JavaScript\nDESCRIPTION: This snippet illustrates the change in return type for the Organizations.getOrganizationInvitationList method. The new return type includes both 'data' and 'totalCount' properties, requiring an adjustment in how the returned data is accessed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Rendering Google One Tap Component in JSX\nDESCRIPTION: This code snippet demonstrates how to use the prebuilt GoogleOneTap component to render the Google One Tap UI in a Clerk application. This component enables users to sign up or sign in with a single button press.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/google.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<GoogleOneTap />\n```\n\n----------------------------------------\n\nTITLE: OAuth Method Signature in TypeScript\nDESCRIPTION: TypeScript definition for the startOAuthFlow method returned by useOAuth() hook, showing its parameters and return type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/use-oauth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nconst startOAuthFlow: (\n  startOAuthFlowParams?: StartOAuthFlowParams,\n) => Promise<StartOAuthFlowReturnType>\n```\n\n----------------------------------------\n\nTITLE: Docker Whale Icon SVG Implementation\nDESCRIPTION: A complete SVG implementation of the Docker whale mascot icon. The SVG uses multiple path elements with various fill colors, opacities, and stroke attributes to create the whale character with facial features and stylized appearance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/go.mdx#_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" fill=\"none\">\n  <path\n    fill=\"#384E54\"\n    d=\"M24.93 7.577c-.972-1.721-.27-3.958 1.567-4.995 1.837-1.038 4.115-.484 5.087 1.238.972 1.721.27 3.958-1.567 4.995-1.838 1.038-4.115.483-5.087-1.238ZM7.164 7.577c.972-1.721.27-3.958-1.567-4.995C3.759 1.544 1.482 2.098.51 3.82-.462 5.54.24 7.778 2.077 8.815c1.838 1.038 4.115.483 5.087-1.238Z\"\n  />\n\n  <path\n    fill=\"#384E54\"\n    d=\"M16.092 1.002c-1.106.01-2.21.049-3.316.09C6.842 1.312 2 6.032 2 12v20h28V12c0-5.968-4.667-10.491-10.59-10.908a42.248 42.248 0 0 0-3.318-.09Z\"\n  />\n\n  <path\n    fill=\"#76E1FE\"\n    d=\"M4.608 4.683c.46.26 1.818 1.202 1.981 1.649.183.503.16 1.065-.115 1.55-.346.614-1.005.95-1.696.937-.34-.01-1.72-.637-2.043-.82-.977-.551-1.35-1.74-.833-2.657.517-.916 1.728-1.21 2.706-.659Z\"\n  />\n\n  <path\n    fill=\"#000\"\n    fillOpacity=\".329\"\n    d=\"M16.869 15.321H15.03a.624.624 0 0 0-.625.625v2.282c0 .345.28.625.624.625h1.839c.344 0 .624-.28.624-.625v-2.282a.624.624 0 0 0-.624-.625Z\"\n  />\n\n  <path fill=\"#76E1FE\" d=\"M16 3C7 3 4 6.715 4 12v20h24c-.049-7.356 0-18 0-20 0-5.285-3-9-12-9Z\" />\n\n  <path\n    fill=\"#76E1FE\"\n    d=\"M27.074 4.683c-.46.26-1.819 1.202-1.981 1.649a1.848 1.848 0 0 0 .114 1.55c.347.614 1.006.95 1.697.937.34-.01 1.72-.637 2.042-.82.978-.551 1.351-1.74.834-2.657-.517-.916-1.729-1.21-2.706-.659Z\"\n  />\n\n  <path\n    fill=\"#fff\"\n    d=\"M21.176 14.645a4.654 4.654 0 1 0 0-9.307 4.654 4.654 0 0 0 0 9.307ZM10.34 14.823a4.832 4.832 0 1 0 0-9.663 4.832 4.832 0 0 0 0 9.663Z\"\n  />\n\n  <path\n    fill=\"#000\"\n    fillOpacity=\".329\"\n    d=\"M17.058 15.555h-2.216c-.4 0-.726.325-.726.726v2.654c0 .401.325.726.726.726h2.216c.4 0 .726-.325.726-.726v-2.654c0-.401-.325-.726-.726-.726Z\"\n  />\n\n  <path\n    fill=\"#FFFCFB\"\n    d=\"M17.058 14.862h-2.216c-.4 0-.726.325-.726.726v2.655c0 .4.325.726.726.726h2.216c.4 0 .726-.325.726-.726v-2.655c0-.4-.325-.726-.726-.726Z\"\n  />\n\n  <path\n    fill=\"#000\"\n    fillOpacity=\".329\"\n    d=\"M20 16.166c0 .838-.872 1.268-2.145 1.166-.024 0-.048-.6-.255-.583-.503.042-1.095-.02-1.686-.02-.612 0-1.206.183-1.685.017-.11-.038-.178.584-.261.582-1.244-.034-2.08-.339-2.08-1.162 0-1.212 1.816-2.194 4.056-2.194s4.055.982 4.055 2.194Z\"\n  />\n\n  <path\n    fill=\"#C38C74\"\n    d=\"M19.977 15.338c0 .568-.433.855-1.138 1-.292.06-.63.096-1.004.116-.564.032-1.207.031-1.89.031-.674 0-1.308 0-1.866-.029a8.216 8.216 0 0 1-.843-.084c-.814-.131-1.325-.417-1.325-1.034 0-1.16 1.806-2.1 4.033-2.1 2.228 0 4.033.94 4.033 2.1Z\"\n  />\n\n  <path\n    fill=\"#23201F\"\n    d=\"M15.944 14.831c1.15 0 2.08-.602 2.08-1.344 0-.742-.93-1.343-2.08-1.343-1.148 0-2.08.601-2.08 1.343s.932 1.344 2.08 1.344Z\"\n  />\n\n  <path\n    fill=\"#171311\"\n    d=\"M12.414 11.954a1.963 1.963 0 1 0 0-3.926 1.963 1.963 0 0 0 0 3.926ZM23.11 11.954a1.963 1.963 0 1 0 0-3.926 1.963 1.963 0 0 0 0 3.926Z\"\n  />\n\n  <path stroke=\"#384E54\" strokeLinecap=\"round\" strokeWidth=\".397\" d=\"M5.006 6.91c-1.17-1.084-2.027-.772-2.044-.747\" />\n\n  <path\n    stroke=\"#384E54\"\n    strokeLinecap=\"round\"\n    strokeWidth=\".397\"\n    d=\"M4.385 6.553c-1.159.036-1.347.63-1.339.652M26.63 6.81c1.171-1.083 2.028-.772 2.045-.746\"\n  />\n\n  <path stroke=\"#384E54\" strokeLinecap=\"round\" strokeWidth=\".397\" d=\"M27.322 6.31c1.159.037 1.347.63 1.34.653\" />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Defining Full Stack Quickstart Cards using Custom Components (Markdown/MDX)\nDESCRIPTION: Uses a custom `<Cards>` component, likely specific to the documentation framework (e.g., MDX), to display a grid layout. Each item represents a full-stack framework quickstart guide (Next.js, Astro, Nuxt, React Router, Remix, TanStack React Start), including a link, description, and an icon embedded using the `<Include>` component referencing a partial file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<Cards>\n  - [Next.js](/docs/quickstarts/nextjs)\n  - Easily add secure, beautiful, and fast authentication to your Next.js application with Clerk.\n  - {<Include src=\"_partials/icons/nextjs\" />}\n\n  ---\n\n  - [Astro](/docs/quickstarts/astro)\n  - Easily add secure and SSR-friendly authentication to your Astro application with Clerk.\n  - {<Include src=\"_partials/icons/astro\" />}\n\n  ---\n\n  - [Nuxt](/docs/quickstarts/nuxt)\n  - Easily add secure, beautiful, and fast authentication to Nuxt with Clerk.\n  - {<Include src=\"_partials/icons/nuxt\" />}\n\n  ---\n\n  - [React Router (Beta)](/docs/quickstarts/react-router)\n  - The Clerk React Router SDK provides prebuilt components, hooks, and stores to make it easy to integrate authentication and user management in your React Router app.\n  - {<Include src=\"_partials/icons/react-router\" />}\n\n  ---\n\n  - [Remix](/docs/quickstarts/remix)\n  - Easily add secure, edge- and SSR-friendly authentication to your Remix application with Clerk.\n  - {<Include src=\"_partials/icons/remix\" />}\n\n  ---\n\n  - [TanStack React Start (beta)](/docs/quickstarts/tanstack-react-start)\n  - Easily add secure and SSR-friendly authentication to your TanStack React Start application with Clerk.\n  - {<Include src=\"_partials/icons/tanstack-start\" />}\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Implementing Verifications Step in Clerk Elements Sign-In Flow\nDESCRIPTION: This snippet demonstrates the 'verifications' step of a sign-in flow. It includes a password input field, a submit action, and an option to navigate to choose another strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"verifications\">\n  <SignIn.Strategy name=\"password\">\n    <Clerk.Field name=\"password\">\n      <Clerk.Label>password</Clerk.Label>\n      <Clerk.Input />\n      <Clerk.FieldError />\n    </Clerk.Field>\n    <SignIn.Action submit>Sign In</SignIn.Action>\n  </SignIn.Strategy>\n  <SignIn.Action navigate=\"choose-strategy\">Use another method</SignIn.Action>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using bun dlx (Bash)\nDESCRIPTION: Executes the Clerk upgrade helper tool using Bun's `dlx` command to assist in identifying necessary code adjustments for the Core 1 to Core 2 upgrade.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Implementing User Session Management with Vue and Clerk\nDESCRIPTION: Vue component that creates a user button interface using Clerk's $sessionListStore. The component handles session loading states and provides session switching and sign-out functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-list-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $sessionListStore, $clerkStore } from '@clerk/astro/client'\n\nconst sessions = useStore($sessionListStore)\nconst clerk = useStore($clerkStore)\n</script>\n\n<template>\n  <div v-if=\"sessions === undefined\">Loading sessions...</div>\n  <div v-else>\n    <div>{{ clerk.session.user.primaryEmailAddress }}</div>\n    <div role=\"menu\">\n      <button\n        v-for=\"sess in sessions\"\n        :key=\"sess.id\"\n        role=\"menuitem\"\n        @click=\"clerk.setActive({ session: sess.id })\"\n      >\n        {{ sess.user.primaryEmailAddress }}\n      </button>\n      <button role=\"menuitem\" @click=\"clerk.signOut\">Sign out of all accounts</button>\n    </div>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Required Clerk Permission: Delete Organization\nDESCRIPTION: Specifies the Clerk system permission identifier (`org:sys_profile:delete`) required for a role to delete the entire organization. This is one of the minimum requirements for a role to be designated as the Creator role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/creator-role.mdx#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\norg:sys_profile:delete\n```\n\n----------------------------------------\n\nTITLE: Creating Next.js Project with Required Dependencies\nDESCRIPTION: Commands to create a new Next.js project with TypeScript, ESLint, and Tailwind CSS, then install Neon Postgres and Drizzle ORM dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpx create-next-app clerk-neon-example --typescript --eslint --tailwind --use-npm --no-src-dir --app --import-alias \"@/*\"\n```\n\nLANGUAGE: sh\nCODE:\n```\ncd clerk-neon-example\nnpm install @neondatabase/serverless\nnpm install drizzle-orm --legacy-peer-deps\nnpm install -D drizzle-kit\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims using @clerk/backend\nDESCRIPTION: Shows how to use the generic `@clerk/backend` package to authenticate a request and access the resulting `JwtPayload` via `requestState.toAuth().sessionClaims`. This highlights another context affected by the removal of the `orgs` claim in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Setting Second Factor Reservation - TypeScript Declaration\nDESCRIPTION: Method signature for marking a phone number as reserved for 2FA.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nfunction setReservedForSecondFactor(params: SetReservedForSecondFactorParams): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Tanstack React CreateOrganization Implementation\nDESCRIPTION: Implementation of the CreateOrganization component using Tanstack React Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { CreateOrganization } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/create-organization')({\n  component: CreateOrganization,\n})\n\nfunction CreateOrganization() {\n  return <CreateOrganization />\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in Astro\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in an Astro application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { OrganizationProfile } from '@clerk/astro/components'\n---\n\n<OrganizationProfile />\n```\n\n----------------------------------------\n\nTITLE: Todo List Component\nDESCRIPTION: React component that renders the list of todos. Includes checkbox for completion status and delete button for each todo item.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_10\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction TodoList({ todos }: { todos: Todo[] }) {\n  return (\n    <div className=\"divide-y divide-gray-300\">\n      {todos.map((todo) => (\n        <div key={todo.id} className=\"flex items-center h-10\">\n          <div className=\"h-full px-2 flex items-center justify-center\">\n            <div className=\"w-5 h-5 flex items-center justify-center\">\n              <input\n                type=\"checkbox\"\n                className=\"cursor-pointer\"\n                checked={todo.done}\n                onChange={() => toggleDone(todo)}\n              />\n            </div>\n          </div>\n          <div className=\"flex-1 px-2 overflow-hidden flex items-center\">\n            {todo.done ? (\n              <span className=\"line-through\">{todo.text}</span>\n            ) : (\n              <span>{todo.text}</span>\n            )}\n          </div>\n          <button\n            className=\"h-full px-2 flex items-center justify-center text-gray-300 hover:text-gray-500\"\n            onClick={() => deleteTodo(todo)}\n          >\n            X\n          </button>\n        </div>\n      ))}\n    </div>\n  )\n```\n\n----------------------------------------\n\nTITLE: Defining updateUserMetadata Function in TypeScript\nDESCRIPTION: Function signature for updateUserMetadata, which takes a userId and UpdateUserMetadataParams to update a user's metadata. It returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user-metadata.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateUserMetadata(userId: string, params: UpdateUserMetadataParams): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Updating User Password with New Method\nDESCRIPTION: Demonstration of the new method for updating a user's password, which now requires the current password for improved security.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating authenticateRequest Function Signature in JavaScript\nDESCRIPTION: Illustrates the breaking change in the `authenticateRequest` function signature within the `@clerk/backend` SDK. Previously, the `request` was part of the options object; in Core 2, it's passed as the first separate argument, followed by the options object. The code shows the required modification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_2\n\nLANGUAGE: js\nCODE:\n```\nclerkClient.authenticateRequest({ ...opts, request })\nclerkClient.authenticateRequest(request, { ...opts })\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp State Check in React\nDESCRIPTION: React component that uses the $signUpStore nanostore to access and display the current sign-up status. Uses the useStore hook from @nanostores/react to handle state management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-up-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $signUpStore } from '@clerk/astro/client'\n\nexport default function SignUpStep() {\n  const signUp = useStore($signUpStore)\n\n  if (signUp === undefined) {\n    // Add logic to handle loading state\n    return null\n  }\n\n  return <div>The current sign-up attempt status is {signUp.status}.</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Reordering Default and Custom Organization Profile Navigation - Clerk Vue - Vue\nDESCRIPTION: This Vue sample demonstrates how to insert custom pages and re-order the default organization profile navigation links using Clerk's OrganizationSwitcher component. Custom SVG icons are used for both custom page and link. '@clerk/vue' is required. The first slot is a custom page, followed by a homepage link, and finally the built-in 'members' and 'general' navigation items. Includes explicit ordering and custom icon usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/organization-profile.mdx#2025-04-23_snippet_8\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\\\"ts\\\">\\nimport { OrganizationSwitcher } from '@clerk/vue'\\n</script>\\n\\n<template>\\n  <header>\\n    <OrganizationSwitcher>\\n      <OrganizationSwitcher.OrganizationProfilePage label=\\\"Custom Page\\\" url=\\\"custom\\\">\\n        <template #labelIcon>\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n            <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n          </svg>\\n        </template>\\n        <div>\\n          <h1>Custom page</h1>\\n          <p>This is the content of the custom page.</p>\\n        </div>\\n      </OrganizationSwitcher.OrganizationProfilePage>\\n      <OrganizationSwitcher.OrganizationProfileLink label=\\\"Homepage\\\" url=\\\"/\\\">\\n        <template #labelIcon>\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\" fill=\\\"currentColor\\\">\\n            <path d=\\\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\\\"></path>\\n          </svg>\\n        </template>\\n      </OrganizationSwitcher.OrganizationProfileLink>\\n      <OrganizationSwitcher.OrganizationProfilePage label=\\\"members\\\" />\\n      <OrganizationSwitcher.OrganizationProfilePage label=\\\"general\\\" />\\n    </OrganizationSwitcher>\\n  </header>\\n</template>\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk Handler for TanStack React Start Server (TSX)\nDESCRIPTION: This snippet demonstrates the basic usage of `createClerkHandler` to configure Clerk authentication within a TanStack React Start application's server-side entry point (`ssr.tsx`). It wraps the standard `createStartHandler` from TanStack React Start, injecting Clerk's authentication capabilities. Dependencies include `@tanstack/react-start/server`, `@tanstack/react-start/router-manifest`, the application's router (`./router`), and `@clerk/tanstack-react-start/server`. The `createClerkHandler` takes the TanStack handler configuration as input and returns a new handler function, which is then invoked with `defaultStreamHandler`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/create-clerk-handler.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createStartHandler, defaultStreamHandler } from '@tanstack/react-start/server'\nimport { getRouterManifest } from '@tanstack/react-start/router-manifest'\nimport { createRouter } from './router'\nimport { createClerkHandler } from '@clerk/tanstack-react-start/server'\n\nexport default createClerkHandler(\n  createStartHandler({\n    createRouter,\n    getRouterManifest,\n  }),\n)(defaultStreamHandler)\n```\n\n----------------------------------------\n\nTITLE: Removing a Session in JavaScript\nDESCRIPTION: This JavaScript code demonstrates how to use the remove method of the Session object to invalidate the current session.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.remove()\n```\n\n----------------------------------------\n\nTITLE: Adding ClerkJS Event Listener for State Synchronization in TypeScript\nDESCRIPTION: Demonstrates adding an event listener to the initialized `clerkJSInstance` using `addListener`. The listener callback receives Clerk resources (client, session, user, organization) and updates the SDK's internal state (`$state`) accordingly, ensuring the SDK's state reflects the latest data from ClerkJS. Relies on the SDK's internal state management (`$state` store).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/frontend-only.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { loadClerkJSScript } from '@clerk/shared/loadClerkJSScript'\nimport { runOnce } from './utils'\nimport { $clerk, $state } from './stores'\n\nexport const createClerkInstance = runOnce(createClerkInstanceInternal)\n\nasync function createClerkInstanceInternal(options) {\n  let clerkJSInstance = window.Clerk\n\n  if (!clerkJSInstance) {\n    // loadClerkJSScript() codepath\n  }\n\n  await clerkJSInstance.load(options)\n\n  if (!$clerk.get()) {\n    $clerk.set(clerkJSInstance)\n  }\n\n  clerkJSInstance.addListener((resources) => {\n    $state.setKey('client', resources.client)\n    $state.setKey('session', resources.session)\n    $state.setKey('user', resources.user)\n    $state.setKey('organization', resources.organization)\n  })\n}\n```\n\n----------------------------------------\n\nTITLE: Creating SAML Connection Function Definition\nDESCRIPTION: TypeScript function signature for creating a SAML connection. Returns a Promise that resolves to a SamlConnection object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/create-saml-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createSamlConnection(params: CreateSamlConnectionParams): Promise<SamlConnection>\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using yarn\nDESCRIPTION: Installs the latest versions of `react` and `react-dom` using the yarn package manager. This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Implementing User Session Management with Svelte and Clerk\nDESCRIPTION: Svelte component that implements session management using Clerk's $sessionListStore. The component handles aliased store imports to avoid conflicts with Svelte's reactivity system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-list-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $sessionListStore as sessions, $clerkStore as clerk } from '@clerk/astro/client'\n</script>\n\n{#if $sessions === undefined}\n  <div>Loading sessions...</div>\n{:else}\n  <div>\n    <div>{$clerk.session.user.primaryEmailAddress}</div>\n    <div role=\"menu\">\n      {#each $sessions as sess (sess.id)}\n        <button role=\"menuitem\" on:click={() => $clerk.setActive({ session: sess.id })}>\n          {sess.user.primaryEmailAddress}\n        </button>\n      {/each}\n      <button role=\"menuitem\" on:click={() => $clerk.signOut()}> Sign out of all accounts </button>\n    </div>\n  </div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Creating a Todo App HomePage with InstantDB\nDESCRIPTION: Client-side Next.js page component that implements a todo application using InstantDB for data storage and real-time updates. It showcases querying data and performing CRUD operations with InstantDB.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { id, InstaQLEntity } from '@instantdb/react'\nimport { db, schema } from '@/db/instant'\n\ntype Todo = InstaQLEntity<typeof schema, 'todos'>\n\nfunction App() {\n  // Use Instant's `useQuery()` hook to get the todos\n  const { isLoading, error, data } = db.useQuery({ todos: {} })\n\n  if (isLoading) {\n    return (\n      <div className=\"-mt-16 font-mono min-h-screen flex justify-center items-center flex-col space-y-4\">\n        Loading...\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-red-500 p-4 -mt-16 font-mono min-h-screen flex justify-center items-center flex-col space-y-4\">\n        Error: {error.message}\n      </div>\n    )\n  }\n\n  const { todos } = data\n\n  return (\n    <div className=\"-mt-16 font-mono min-h-screen flex justify-center items-center flex-col space-y-4\">\n      <h2 className=\"tracking-wide text-5xl text-gray-300\">todos</h2>\n      <div className=\"border border-gray-300 max-w-xs w-full\">\n        <TodoForm todos={todos} />\n        <TodoList todos={todos} />\n        <ActionBar todos={todos} />\n      </div>\n      <div className=\"text-xs text-center\">Open another tab to see todos update in realtime!</div>\n    </div>\n  )\n}\n\n// Write Data\n// ---------\nfunction addTodo(text: string) {\n  db.transact(\n    db.tx.todos[id()].update({\n      text,\n      done: false,\n      createdAt: Date.now(),\n    }),\n  )\n}\n\nfunction deleteTodo(todo: Todo) {\n  db.transact(db.tx.todos[todo.id].delete())\n}\n\nfunction toggleDone(todo: Todo) {\n  db.transact(db.tx.todos[todo.id].update({ done: !todo.done }))\n}\n\nfunction deleteCompleted(todos: Todo[]) {\n  const completed = todos.filter((todo) => todo.done)\n  const txs = completed.map((todo) => db.tx.todos[todo.id].delete())\n  db.transact(txs)\n}\n\nfunction toggleAll(todos: Todo[]) {\n\n```\n\n----------------------------------------\n\nTITLE: Creating a React App with Vite using Shell Commands\nDESCRIPTION: These commands use various package managers (npm, yarn, pnpm, bun) to scaffold a new React project with TypeScript using Vite. They then navigate into the project directory, install dependencies, and start the development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm create vite@latest clerk-react -- --template react-ts\ncd clerk-react\nnpm install\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn create vite clerk-react --template react-ts\ncd clerk-react\nyarn install\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm create vite clerk-react --template react-ts\ncd clerk-react\npnpm install\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun create vite clerk-react --template react-ts\ncd clerk-react\nbun install\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Defining Web3SignatureFactor Interface for Web3 Authentication\nDESCRIPTION: Specifies the type definition for Web3 signature verification factor with properties for strategy, Web3 wallet ID, and primary status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\ntype Web3SignatureFactor = {\n  strategy: Web3Strategy\n  web3WalletId: string\n  primary?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: SAML Connection Creation Example\nDESCRIPTION: Example of creating a SAML connection with Okta as the provider. Demonstrates setting up basic configuration including name, provider, domain, metadata URL, and attribute mapping.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/create-saml-connection.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.samlConnections.createSamlConnection({\n  name: 'test-okta',\n  provider: 'saml_okta',\n  domain: 'clerk.dev',\n  idpMetadataUrl: 'https://trial-000000.okta.com/app/exk...',\n  attributeMapping: {\n    emailAddress: 'user.email',\n    firstName: 'user.firstName',\n    lastName: 'user.lastName',\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Updating SAML Connection Example in TypeScript\nDESCRIPTION: This example demonstrates how to use the updateSamlConnection() function from the Clerk Backend SDK. It updates a SAML connection with a new name using the connection's ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/update-saml-connection.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst samlConnectionId = 'samlc_123'\n\nconst response = await clerkClient.samlConnections.updateSamlConnection(samlConnectionId, {\n  name: 'Updated SAML Connection',\n})\n```\n\n----------------------------------------\n\nTITLE: Initiating Redirect-Based SSO Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithRedirect` function signature. This asynchronous function handles signing up a user via redirect-based Single Sign On (SSO) like OAuth or SAML. It takes `AuthenticateWithRedirectParams` (including `redirectUrl`, `redirectUrlComplete`, `strategy`, `identifier`, `emailAddress`, `continueSignUp`, `legalAccepted`) and redirects the user to the identity provider, returning a Promise that resolves to void.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithRedirect(params: AuthenticateWithRedirectParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI Tool with Multiple Package Managers - Bash\nDESCRIPTION: Commands for launching the @clerk/upgrade CLI to aid Core 2 migration using npx, yarn dlx, pnpm dlx, or bun dlx. These should be run in the root directory of your Clerk-integrated project. Outputs a list of recommended codebase changes for upgrade. Package manager and internet access are required; all usages upgrade 'from=core-1'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: JWT Header Structure in JSON\nDESCRIPTION: Shows the decoded JWT header structure specifying the algorithm (RS256) and token type.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/tokens-and-signatures.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"alg\": \"RS256\",\n  \"typ\": \"JWT\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating User List Retrieval in JavaScript\nDESCRIPTION: This snippet shows the change in response payload for the getUserList function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: PublicUserData TypeScript Interface Properties\nDESCRIPTION: Type definitions for public user data properties including name fields, profile image information, and user identifiers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/public-user-data.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PublicUserData {\n  firstName: string | null;\n  lastName: string | null;\n  imageUrl: string;\n  hasImage: boolean;\n  identifier: string;\n  userId?: string | null;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Clerk SDK Node\nDESCRIPTION: Example of using @clerk/clerk-sdk-node package to implement authentication middleware in an Express router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Environment Variables for Sign-In Page\nDESCRIPTION: These environment variables configure Clerk's redirect behavior, specifying the location of the sign-in component and fallback redirect URLs for various scenarios.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in\nNEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\nNEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Next.js (Core 1 Context)\nDESCRIPTION: Provides examples of how the `JwtPayload` containing session claims (including the `orgs` claim removed in Core 2) was accessed in Next.js applications using `getAuth` from both `@clerk/nextjs/server` and `@clerk/ssr.server` in Core 1. This context is relevant for understanding the `orgs` claim removal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Configuring Tailwind CSS for Custom Animations\nDESCRIPTION: JavaScript configuration for Tailwind CSS to add custom keyframes and animations. This snippet adds a caret-blink animation that can be used in the authentication UI.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/examples/shadcn-ui.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  theme: {\n    extend: {\n      keyframes: {\n        'caret-blink': {\n          '0%,70%,100%': { opacity: '1' },\n          '20%,50%': { opacity: '0' },\n        },\n      },\n      animation: {\n        'caret-blink': 'caret-blink 1.25s ease-out infinite',\n      },\n    },\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Chrome Extension SDK (Bash)\nDESCRIPTION: Adds the Clerk SDK specifically designed for Chrome Extensions (`@clerk/chrome-extension`) to the project dependencies using `pnpm`. This SDK provides necessary components, hooks, and helpers for integrating Clerk authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/chrome-extension\n```\n\n----------------------------------------\n\nTITLE: Enforcing Reverification in Rack Application Logic - Ruby\nDESCRIPTION: This code shows application-level enforcement of session reverification using the Clerk SDK inside your app.rb logic. It checks if the user needs to reverify their session (with an optional preset), returns Clerk's reverification Rack response if required, and otherwise proceeds to standard authentication as in the basic example. Relies on 'clerk-sdk-ruby', a mounted Clerk middleware, and a constant for the preset. Inputs and outputs are the Rack 'env' hash and a Rack response tuple, respectively.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/rack.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"erb\"\nrequire \"clerk\"\n\nSTEP_UP_PRESET = Clerk::StepUp::Preset::LAX\n\nclass App\n  def call(env)\n    clerk = env[\"clerk\"]\n\n    # Check if the user needs to reverify their session\n    if clerk.user_needs_reverification?(STEP_UP_PRESET)\n      # Get the response\n      return clerk.user_reverification_rack_response(STEP_UP_PRESET)\n    end\n\n    # Check if the user is authenticated\n    user = clerk.user\n    user ?\n      [200, {\"Content-Type\" => \"text/plain\"}, [\"Authenticated User: #{user.first_name} (#{user.id})\"]]:\n      [401, {\"Content-Type\" => \"text/plain\"}, [\"Not Authenticated\"]]\n  end\nend\n\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Default Automatic CSP Middleware (TypeScript)\nDESCRIPTION: Enables the default automatic Content Security Policy configuration using Clerk's Next.js middleware. This mode applies a predefined set of CSP directives suitable for most Clerk integrations. It's configured by including an empty `contentSecurityPolicy` object in the middleware options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\n\nconst isPublicRoute = createRouteMatcher(['/sign-in(.*)', '/sign-up(.*)'])\n\nexport default clerkMiddleware(\n  async (auth, request) => {\n    if (!isPublicRoute(request)) {\n      await auth.protect()\n    }\n  },\n  {\n    contentSecurityPolicy: {},\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Creating Organization Invitation with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of using the createOrganizationInvitation function to create an invitation. It demonstrates setting the required parameters including organizationId, inviterUserId, emailAddress, and role.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst inviterUserId = 'user_123'\n\nconst emailAddress = 'testclerk123@clerk.dev'\n\nconst role = 'org:member'\n\nconst response = await clerkClient.organizations.createOrganizationInvitation({\n  organizationId,\n  inviterUserId,\n  emailAddress,\n  role,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing SignedOut in Remix\nDESCRIPTION: Remix-specific implementation of the SignedOut component within a route component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/signed-out.mdx#2025-04-23_snippet_6\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedOut } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedOut>\n        <p>You are signed out.</p>\n      </SignedOut>\n      <p>This content is always visible.</p>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Session Store in Vue\nDESCRIPTION: Example demonstrating $sessionStore usage in a Vue component with v-if directives for conditional rendering based on session state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/session-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $sessionStore } from '@clerk/astro/client'\n\nconst session = useStore($sessionStore)\n</script>\n\n<template>\n  <div v-if=\"session === undefined\">\n    <!-- Add logic to handle loading state -->\n  </div>\n  <div v-else-if=\"session === null\">\n    <!-- Add logic to handle not signed in state -->\n  </div>\n  <div v-else>\n    <p>This session has been active since {{ session.lastActiveAt.toLocaleString() }}</p>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Dynamically Setting Clerk Middleware Options in Next.js (TypeScript)\nDESCRIPTION: Shows how to dynamically configure `clerkMiddleware` options based on the incoming request object (`req`) in a Next.js TypeScript application. This example demonstrates setting the `domain` option using the `req.nextUrl.host`, allowing for request-specific configurations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\n```ts {{ filename: 'middleware.ts' }}\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(\n  (auth, req) => {\n    // Add your middleware checks\n  },\n  (req) => ({\n    // Provide `domain` based on the request host\n    domain: req.nextUrl.host,\n  }),\n)\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Astro Configuration Integration\nDESCRIPTION: Changes required in the Astro configuration file to use the official Clerk SDK integration instead of the community SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/migrating-from-astro-community-sdk.mdx#2025-04-23_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nimport { defineConfig } from 'astro/config'\nimport node from '@astrojs/node'\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [clerk()],\n  adapter: node({ mode: 'standalone' }),\n  output: 'server',\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Protected Route Matcher\nDESCRIPTION: Example of using createRouteMatcher() to define protected routes for dashboard and forum sections.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/clerk-middleware.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Logo with Clerk Backend SDK in TypeScript\nDESCRIPTION: Example of using the updateOrganizationLogo function to update an organization's logo. It demonstrates creating a File object and calling the function with the necessary parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-logo.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\nconst uploaderUserId = 'user_123'\n\nconst fileBits = ['logo-pic-content']\nconst fileName = 'logo.png'\nconst file = new File(fileBits, fileName, { type: 'image/png' })\n\nconst params = {\n  file,\n  uploaderUserId,\n}\n\nconst response = await clerkClient.organizations.updateOrganizationLogo(organizationId, params)\n```\n\n----------------------------------------\n\nTITLE: Updating User Profile Image with Clerk Backend SDK in TypeScript\nDESCRIPTION: This example demonstrates how to use the updateUserProfileImage function from the Clerk Backend SDK. It creates a File object from a blob and passes it to the function along with a user ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user-profile-image.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\nconst fileBits = ['profile-pic-content']\nconst fileName = 'profile-pic.png'\nconst file = new File(fileBits, fileName, { type: 'image/png' })\n\nconst params = {\n  file,\n}\n\nconst response = await clerkClient.users.updateUserProfileImage(userId, params)\n```\n\n----------------------------------------\n\nTITLE: Updating React and React-DOM Dependencies using Package Managers\nDESCRIPTION: Provides commands for various package managers (npm, yarn, pnpm, bun) to update the `react` and `react-dom` packages to their latest versions. This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Client List Response Format Change\nDESCRIPTION: Demonstrates the new response format for getClientList including totalCount property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Variables in Remix App - TypeScript\nDESCRIPTION: Illustrates how to use Clerk's `appearance` configuration with a Remix application by wrapping the main app component using the `ClerkApp` higher-order function and supplying a `variables` object with custom color values. Assumes `@clerk/remix` and Remix dependencies are installed; expects the developer to supply correct configuration and context for Clerk. The theme variables specified cascade to all Clerk-controlled UI within the app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_3\n\nLANGUAGE: TypeScript\nCODE:\n```\n// Import ClerkApp\nimport { ClerkApp } from '@clerk/remix'\nimport type { MetaFunction, LoaderFunction } from '@remix-run/node'\n\nimport { Links, LiveReload, Meta, Outlet, Scripts, ScrollRestoration } from '@remix-run/react'\n\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const meta: MetaFunction = () => ({\n  charset: 'utf-8',\n  title: 'New Remix App',\n  viewport: 'width=device-width,initial-scale=1',\n})\n\nexport const loader: LoaderFunction = (args) => rootAuthLoader(args)\n\nfunction App() {\n  return (\n    <html lang=\"en\">\n      <head>\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Outlet />\n        <ScrollRestoration />\n        <Scripts />\n        <LiveReload />\n      </body>\n    </html>\n  )\n}\n\nexport default ClerkApp(App, {\n  appearance: {\n    variables: {\n      colorPrimary: 'blue',\n      colorText: 'black',\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in Vue with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in a Vue application using Clerk. This snippet shows how to customize the theme, size, and language of the CAPTCHA widget when using the clerkPlugin.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    captcha: {\n      theme: 'dark',\n      size: 'flexible',\n      language: 'es-ES',\n    },\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances - Astro - JavaScript\nDESCRIPTION: Configures the Astro Clerk integration to use the Dark theme globally and set the Neobrutalism theme on all SignIn instances, using the appearance property in clerk integration. Requires @clerk/astro and @clerk/themes. This setup allows for distinct theming across authentication UI instances.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_19\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\nimport { dark } from '@clerk/themes'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        baseTheme: dark,\n        signIn: { baseTheme: neobrutalism },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Defining getPhoneNumber Function in TypeScript\nDESCRIPTION: Function signature for retrieving a single PhoneNumber object using its ID. It takes a phoneNumberId as a string parameter and returns a Promise resolving to a PhoneNumber object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/get-phone-number.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getPhoneNumber(phoneNumberId: string): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Using closeGoogleOneTap with ClerkJS\nDESCRIPTION: Example showing how to close the GoogleOneTap component programmatically using ClerkJS.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nconst params = {\n  cancelOnTapOutside: false,\n  itpSupport: false,\n  fedCmSupport: false,\n}\nclerk.openGoogleOneTap(params)\n\n// Do something else\n\nclerk.closeGoogleOneTap()\n```\n\n----------------------------------------\n\nTITLE: Closing UserProfile Component Overlay with JavaScript\nDESCRIPTION: Shows how to close the <UserProfile /> component overlay using Clerk's JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"user-profile\"></div>\n`\n\nconst userProfileDiv = document.getElementById('user-profile')\n\nclerk.closeUserProfile(userProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom React Hook `useUsers` to Fetch Users (TypeScript)\nDESCRIPTION: This snippet defines a custom React hook `useUsers` in TypeScript using `useEffect` and `useState`. It fetches a list of users from the `/getUsers` API endpoint upon component mount, manages `isLoading` and `error` states, and returns an object containing the user list (`UserJSON[]`), loading status, and any potential error. It depends on React and `@clerk/types`, and assumes a backend API endpoint `/getUsers` exists.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { UserJSON } from '@clerk/types'\nimport { useEffect, useState } from 'react'\n\ntype UseUsersReturn = {\n  users: UserJSON[] | null\n  isLoading: boolean\n  error: Error | null\n}\n\n/**\n * Returns a list of users for the application.\n *\n * Until the users are fetched, `isLoading` will be set to `true`.\n *\n * @example\n *\n * import { useUsers } from '@/app/hooks/useUsers';\n *\n * function Hello() {\n *   const { users, isLoading, error } = useUsers();\n *   if(isLoading) {\n *     return <div>Loading...</div>;\n *   }\n *   return <div>Users: {users?.map((user) => user.firstName).join(', ')}</div>\n * }\n */\nexport default function useUsers(): UseUsersReturn {\n  const [users, setUsers] = useState<UserJSON[] | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  useEffect(() => {\n    const getUsers = async () => {\n      try {\n        const res = await fetch('/getUsers')\n        if (!res.ok) {\n          throw new Error('Failed to fetch users')\n        }\n        const data = await res.json()\n        setUsers(data)\n      } catch (err) {\n        setError(err instanceof Error ? err : new Error('Unknown error'))\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    getUsers()\n  }, []) // Remove users from dependency array to prevent infinite loop\n\n  return { users, isLoading, error }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Auth Store in Vue\nDESCRIPTION: Vue implementation of $authStore usage demonstrating authentication state handling with template conditionals. Uses useStore hook from nanostores/vue.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/auth-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $authStore } from '@clerk/astro/client'\n\nconst auth = useStore($authStore)\n</script>\n\n<template>\n  <div v-if=\"auth.userId === undefined\">Loading...</div>\n  <div v-else-if=\"auth.userId === null\">Sign in to view this page</div>\n  <div v-else>...</div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Configuring nginx for Clerk App Proxy\nDESCRIPTION: This nginx configuration snippet shows how to forward the X-Forwarded-Host and X-Forwarded-Proto headers to the application behind the proxy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/deploy-behind-a-proxy.mdx#2025-04-23_snippet_0\n\nLANGUAGE: nginx\nCODE:\n```\nproxy_set_header X-Forwarded-Host $host;\nproxy_set_header X-Forwarded-Proto https;\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Domain for an Organization in TypeScript\nDESCRIPTION: This snippet shows how to retrieve a domain for an organization based on the given domain ID using the getDomain() method. It requires the Verified domains feature to be enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getDomain(params: GetDomainParams): Promise<OrganizationDomain>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.getDomain({ domainId: 'domain_123' })\n```\n\n----------------------------------------\n\nTITLE: Getting Account Identifier in TypeScript\nDESCRIPTION: Method to retrieve the primary identifier of the account, returning username, email address, or label in order of preference.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/external-account.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction accountIdentifier(): string\n```\n\n----------------------------------------\n\nTITLE: Limiting Results with getSamlConnectionList in TypeScript\nDESCRIPTION: Example of using getSamlConnectionList with a limit parameter to restrict the number of results returned. This retrieves only the first 10 SAML connections.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.samlConnections.getSamlConnectionList({\n  // returns the first 10 results\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Applying Clerk Variables in React App - TypeScript\nDESCRIPTION: Configures a standard React application to customize Clerk UI by passing a `variables` object (defining colors) to the `appearance` prop of the `ClerkProvider` component. Before initializing, the code ensures the required publishable key is available via an environment variable. Requires installing `@clerk/clerk-react` and environment configuration for Clerk. Outputs a wrapped app UI with Clerk's global styles adjusted as specified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        variables: {\n          colorPrimary: 'blue',\n          colorText: 'black',\n        },\n      }}\n      publishableKey={clerkPubKey}\n    >\n      <div>Hello from clerk</div>\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Satellite Domains (Next.js)\nDESCRIPTION: Specifies Next.js public environment variables `NEXT_PUBLIC_CLERK_DOMAIN` and `NEXT_PUBLIC_CLERK_IS_SATELLITE`. These are required when implementing satellite domains within a Next.js application to allow session sharing across domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `NEXT_PUBLIC_CLERK_DOMAIN` | Sets your satellite application's domain. Required to share sessions across multiple domains. |\n| `NEXT_PUBLIC_CLERK_IS_SATELLITE` | Indicates whether or not the application is a satellite application. |\n```\n\n----------------------------------------\n\nTITLE: Applying Inline CSS Styles to Clerk SignIn in Next.js App Router (TSX)\nDESCRIPTION: Illustrates how to apply inline CSS styles directly to the `formButtonPrimary` element of the Clerk `<SignIn>` component using a JavaScript object passed to the `appearance.elements` prop. This example customizes font size, text transformation, background color, and hover/focus/active states within the root layout (`app/layout.tsx`) of a Next.js App Router application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/overview.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/layout.tsx', mark: [[9, 22]] }}\nimport styles from '../styles/SignIn.module.css' // Note: styles import is present but not used in this specific inline example logic.\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider>\n      <html lang=\"en\">\n        <body>\n          <SignIn\n            appearance={{\n              elements: {\n                formButtonPrimary: {\n                  fontSize: 14,\n                  textTransform: 'none',\n                  backgroundColor: '#611BBD',\n                  '&:hover, &:focus, &:active': {\n                    backgroundColor: '#49247A',\n                  },\n                },\n              },\n            }}\n          />\n        </body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Defining OperationNotAllowedOnSatelliteDomain Error (JSON)\nDESCRIPTION: JSON representation of the 'OperationNotAllowedOnSatelliteDomain' error. This error indicates that the requested operation cannot be performed on a satellite domain. The operation should be retried using the instance's primary domain.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"operation not allowed\",\n  \"longMessage\": \"This operation is not allowed on a satellite domain. Try again using the primary domain of your instance.\",\n  \"code\": \"operation_not_allowed_on_satellite_domain_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Custom Google One Tap Component in Next.js Page\nDESCRIPTION: This Next.js page component demonstrates how to use the CustomGoogleOneTap component in a page. It imports the custom component and renders it with a title.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/google-one-tap.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { CustomGoogleOneTap } from '@/app/components/CustomGoogleOneTap'\n\nexport default function CustomOneTapPage({ children }: { children: React.ReactNode }) {\n  return (\n    <CustomGoogleOneTap>\n      <h1>Google One Tap Example</h1>\n    </CustomGoogleOneTap>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Chevron Down Icon SVG Component\nDESCRIPTION: React component that renders a chevron-down icon using SVG. Uses currentColor for stroke color inheritance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_8\n\nLANGUAGE: JSX\nCODE:\n```\nfunction ChevronDownIcon() {\n  return (\n    <svg viewBox=\"0 0 20 20\">\n      <path d=\"M5 8 L10 13 L15 8\" stroke=\"currentColor\" fill=\"none\" strokeWidth=\"2\" />\n    </svg>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for Organization Role Management\nDESCRIPTION: Basic HTML structure for displaying organization memberships with headers for user information and administrative actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-roles.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h1>Memberships List</h1>\n    <table>\n      <thead>\n        <tr>\n          <th>User ID</th>\n          <th>User identifier</th>\n          <th>Joined</th>\n          <th>Role</th>\n          <th id=\"update-role-head\" hidden>Update role</th>\n          <th id=\"remove-member-head\" hidden>Remove member</th>\n        </tr>\n      </thead>\n      <tbody id=\"memberships-table-body\"></tbody>\n    </table>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Migrating from setSession to setActive in Clerk SDK\nDESCRIPTION: Examples showing how to migrate from the deprecated setSession method to the new setActive method. The new method takes an object with named parameters instead of positional parameters, and also supports setting an active organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\nawait setSession('sessionID', () => void)\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setSession(sessionObj)\nawait setActive({ session: sessionObj })\n\nawait setSession(sessionObj, () => void)\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\n\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for Organization.getMembershipRequests in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the Organization.getMembershipRequests method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_14\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Root Layout Component\nDESCRIPTION: Root layout component implementing Clerk authentication provider and navigation structure with conditional rendering based on auth state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Link, Outlet, useNavigate } from 'react-router'\nimport { ClerkProvider, SignedIn, SignedOut, UserButton } from '@clerk/chrome-extension'\n\nconst PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')\n}\n\nexport const RootLayout = () => {\n  const navigate = useNavigate()\n\n  return (\n    <ClerkProvider\n      routerPush={(to) => navigate(to)}\n      routerReplace={(to) => navigate(to, { replace: true })}\n      publishableKey={PUBLISHABLE_KEY}\n      afterSignOutUrl=\"/\"\n    >\n      <div className=\"plasmo-w-[785px] plasmo-h-[600px]\">\n        <main>\n          <Outlet />\n        </main>\n        <footer>\n          <SignedIn>\n            <Link to=\"/settings\">Settings</Link>\n            <UserButton />\n          </SignedIn>\n          <SignedOut>\n            <Link to=\"/\">Home</Link>\n            <Link to=\"/sign-in\">Sign In</Link>\n            <Link to=\"/sign-up\">Sign Up</Link>\n          </SignedOut>\n        </footer>\n      </div>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Passkey in TypeScript\nDESCRIPTION: Method to delete the associated passkey for the signed-in user. Returns a Promise that resolves to a DeletedObject.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/passkey-resource.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction delete(): Promise<DeletedObject>\n```\n\n----------------------------------------\n\nTITLE: Limiting Results in getOrganizationMembershipList with TypeScript\nDESCRIPTION: Shows how to use the 'limit' parameter with getOrganizationMembershipList to restrict the number of results returned. This example retrieves the first 10 memberships for a given organization.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-membership-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationMembershipList({\n  organizationId,\n  // returns the first 10 memberships\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Registering Clerk Sinatra Extension in Ruby\nDESCRIPTION: This snippet demonstrates how to register the `Sinatra::Clerk` extension in a basic Sinatra application (`app.rb`). Registering the extension makes the `clerk` helper object available within route handlers, allowing access to user information like `clerk.user`. Requires the `clerk/sinatra` and `sinatra/base` gems.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/ruby/sinatra.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ruby\nCODE:\n```\nrequire \"clerk/sinatra\"\nrequire \"sinatra/base\"\n\nclass App < Sinatra::Base\n  register Sinatra::Clerk\n\n  # Access the user's `User` object\n  get \"/\" do\n    @user = clerk.user\n    erb :index, format: :html5\n  end\n\n  run! if app_file == $0\nend\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Sign-Up Page in Clerk SDK\nDESCRIPTION: Function to redirect the user to the sign-up URL configured in the application's instance settings. It accepts optional SignUpRedirectOptions and returns a promise.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_30\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectToSignUp(options?: SignUpRedirectOptions): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Setting or Replacing a Clerk Organization's Logo (JavaScript Example)\nDESCRIPTION: This snippet shows how to set or replace an organization's logo using the `clerk.organization.setLogo` method. It requires a `file` object (File or Blob, max 10MB) passed within the parameters object. Passing `null` for the file deletes the current logo. The method returns a Promise resolving to the updated `Organization` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_16\n\nLANGUAGE: javascript\nCODE:\n```\n```js\nawait clerk.organization.setLogo({ file })\n```\n```\n\n----------------------------------------\n\nTITLE: HTML Output of Static Control Component\nDESCRIPTION: Shows the rendered HTML structure of a static control component with custom element wrapper.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/hybrid-rendering.mdx#2025-04-23_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<div className=\"flex items-center\">\n  <clerk-signed-in>\n    <span>You are signed in!</span>\n  </clerk-signed-in>\n  <span>This content is always visible.</span>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Membership Requests JavaScript Implementation\nDESCRIPTION: Vanilla JavaScript implementation for handling organization membership requests using the Clerk API. Includes user authentication and organization switching functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-membership-requests.mdx#2025-04-23_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\nconst pubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nif (!pubKey) {\n  throw new Error('Add your VITE_CLERK_PUBLISHABLE_KEY to .env file')\n}\n\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\nif (clerk.user) {\n  // Check for an active organization\n  if (clerk.organization) {\n    const requestsTable = document.getElementById('requests-table-body')\n    const { data } = await clerk.organization\n      .getMembershipRequests()\n      .then((res) => console.log(`Membership requests:`, data).catch((err) => console.error(err)))\n    const requests = data\n\n    requests.map((request) => {\n      const row = requestsTable.insertRow()\n      row.insertCell().textContent = request.publicUserData.identifier\n      row.insertCell().textContent = request.createdAt.toLocaleDateString()\n\n      // Accept request\n      const acceptBtn = document.createElement('button')\n      acceptBtn.textContent = 'Accept'\n      acceptBtn.addEventListener('click', async function (e) {\n        e.preventDefault()\n        await request.accept()\n      })\n      row.insertCell().appendChild(acceptBtn)\n\n      // Reject request\n      const rejectBtn = document.createElement('button')\n      rejectBtn.textContent = 'Reject'\n      rejectBtn.addEventListener('click', async function (e) {\n        e.preventDefault()\n        await request.reject()\n      })\n      row.insertCell().appendChild(rejectBtn)\n    })\n  } else {\n    // If there is no active organization,\n    // mount Clerk's <OrganizationSwitcher />\n    // to allow the user to set an organization as active\n    document.getElementById('app').innerHTML = `\n      <h2>Select an organization to set it as active</h2>\n      <div id=\"org-switcher\"></div>\n    `\n\n    const orgSwitcherDiv = document.getElementById('org-switcher')\n\n    clerk.mountOrganizationSwitcher(orgSwitcherDiv)\n  }\n} else {\n  // If there is no active user, mount Clerk's <SignIn />\n  document.getElementById('app').innerHTML = `\n    <div id=\"sign-in\"></div>\n  `\n\n  const signInDiv = document.getElementById('sign-in')\n\n  clerk.mountSignIn(signInDiv)\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Row Level Security Policies for Tasks\nDESCRIPTION: SQL query to create two RLS policies that restrict access to the tasks table based on the requesting user's Clerk ID, allowing users to only view and create their own tasks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\ncreate policy \"User can view their own tasks\"\non \"public\".\"tasks\"\nfor select\nto authenticated\nusing (\n((select auth.jwt()->>'sub') = (user_id)::text)\n);\n\ncreate policy \"Users must insert their own tasks\"\non \"public\".\"tasks\"\nas permissive\nfor insert\nto authenticated\nwith check (\n((select auth.jwt()->>'sub') = (user_id)::text)\n);\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using npm\nDESCRIPTION: Installs the latest versions of `react` and `react-dom` using the npm package manager. This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Instantiating Custom clerkClient with Backend SDK - Clerk - TypeScript\nDESCRIPTION: This code illustrates the change required to instantiate a custom clerkClient using createClerkClient, now imported from @clerk/backend instead of the Node SDK. This enables passing custom configuration like publishableKey, apiUrl, and secretKey for advanced authentication scenarios. Follows best practice for modular import and custom client instantiation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_11\n\nLANGUAGE: ts\nCODE:\n```\nimport { createClerkClient } from '@clerk/clerk-sdk-node'\nimport { createClerkClient } from '@clerk/backend'\n```\n\n----------------------------------------\n\nTITLE: Setting PLASMO_PUBLIC_CLERK_SYNC_HOST in Development Environment\nDESCRIPTION: Add the PLASMO_PUBLIC_CLERK_SYNC_HOST environment variable to the .env.development file for local development. This variable defines the host that the Chrome Extension will sync with.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nPLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_FRONTEND_API=https://{{fapi_url}}\nPLASMO_PUBLIC_CLERK_SYNC_HOST=http://localhost\n```\n\n----------------------------------------\n\nTITLE: Setting PLASMO_PUBLIC_CLERK_SYNC_HOST in Production Environment\nDESCRIPTION: Add the PLASMO_PUBLIC_CLERK_SYNC_HOST environment variable to the .env.production file for production deployment. The value should be the domain your web app's production server runs on.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nPLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_123\nCLERK_FRONTEND_API=https://yourdomain.com\nPLASMO_PUBLIC_CLERK_SYNC_HOST=https://yourdomain.com\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInWithMetamaskButton in Next.js\nDESCRIPTION: Shows how to use a custom button with the SignInWithMetamaskButton component in Next.js. This example demonstrates wrapping a custom button and using the 'modal' mode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/nextjs'\n\nexport default function Home() {\n  return (\n    <SignInWithMetamaskButton mode=\"modal\">\n      <button>Custom sign in button</button>\n    </SignInWithMetamaskButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Test Route Handler for Webhook Endpoints - Next.js - TypeScript\nDESCRIPTION: This TypeScript snippet provides a basic example of a route handler in a Next.js application for testing webhook endpoint functionality. Placed inside the 'app/webhooks/test/route.ts' file, it defines a 'POST' handler that returns a simple JSON response indicating the route is operational. No external libraries are required; this leverages built-in Next.js API route capabilities. This endpoint expects POST requests and responds with a JSON object including a message; useful for verifying connectivity and correct routing before implementing actual webhook logic.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/debug-your-webhooks.mdx#2025-04-23_snippet_1\n\nLANGUAGE: TypeScript\nCODE:\n```\nexport async function POST() {\\n  return Response.json({ message: 'The route is working' })\\n}\\n\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for UseReverificationOptions Interface\nDESCRIPTION: This defines the UseReverificationOptions interface that specifies the optional parameters for the useReverification() hook, including the onNeedsReverification handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  onNeedsReverification?: (\\{ complete, cancel, level }: [NeedsReverificationParameters](#needs-reverification-parameters)) => void\n}\n```\n\n----------------------------------------\n\nTITLE: Reordering UserProfile Routes Using UserButton in Clerk for Astro (Astro Component)\nDESCRIPTION: Uses Clerk's UserButton component in an Astro page to organize the navigation routes by specifying both custom and default profile menu items. Custom content is inserted before the default 'account' and 'security' pages, showing how to include labeled icons and custom markup using slots. Requires '@clerk/astro/components' and placement in a page such as 'pages/index.astro'; all UI structure is declaratively provided in Astro syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_12\n\nLANGUAGE: Astro\nCODE:\n```\n---\\nimport { UserButton } from '@clerk/astro/components'\\n---\\n\\n<header>\\n  <UserButton>\\n    <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\">\\n      <svg\\n        slot=\"label-icon\"\\n        xmlns=\"http://www.w3.org/2000/svg\"\\n        viewBox=\"0 0 512 512\"\\n        fill=\"currentColor\"\\n      >\\n        <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n      </svg>\\n      <div>\\n        <h1>Custom page</h1>\\n        <p>This is the content of the custom page.</p>\\n      </div>\\n    </UserButton.UserProfilePage>\\n    <UserButton.UserProfileLink label=\"Homepage\" url=\"/\">\\n      <svg\\n        slot=\"label-icon\"\\n        xmlns=\"http://www.w3.org/2000/svg\"\\n        viewBox=\"0 0 512 512\"\\n        fill=\"currentColor\"\\n      >\\n        <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\\n      </svg>\\n    </UserButton.UserProfileLink>\\n    <UserButton.UserProfilePage label=\"account\" />\\n    <UserButton.UserProfilePage label=\"security\" />\\n  </UserButton>\\n</header>\n```\n\n----------------------------------------\n\nTITLE: Implementing Protected Routes with Clerk in Fastify\nDESCRIPTION: A complete example that shows how to integrate Clerk with Fastify to create a protected route. It demonstrates importing dependencies, registering the Clerk plugin, creating a protected endpoint that retrieves user data, and starting the Fastify server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/fastify/get-auth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\n// dotenv must be imported before @clerk/fastify\nimport 'dotenv/config'\nimport Fastify from 'fastify'\nimport { clerkClient, clerkPlugin, getAuth } from '@clerk/fastify'\n\nconst fastify = Fastify({ logger: true })\n\nfastify.register(clerkPlugin)\n\n// Use `getAuth()` to protect this route\nfastify.get('/protected', async (request, reply) => {\n  try {\n    // Use `getAuth()` to get the user's ID\n    const { userId } = getAuth(request)\n\n    // If user isn't authenticated, return a 401 error\n    if (!userId) {\n      return reply.code(401).send({ error: 'User not authenticated' })\n    }\n\n    // Use `clerkClient` to access Clerk's Backend SDK methods\n    // and get the user's User object\n    const user = userId ? await clerkClient.users.getUser(userId) : null\n\n    return reply.send({\n      message: 'User retrieved successfully',\n      user,\n    })\n  } catch (error) {\n    fastify.log.error(error)\n    return reply.code(500).send({ error: 'Failed to retrieve user' })\n  }\n})\n\nconst start = async () => {\n  try {\n    await fastify.listen({ port: 8080 })\n  } catch (error) {\n    fastify.log.error(error)\n    process.exit(1)\n  }\n}\n\nstart()\n```\n\n----------------------------------------\n\nTITLE: Implementing the verifiedFromTheSameClient Method in TypeScript\nDESCRIPTION: A method that returns a boolean indicating whether the verification was verified from the same client as the parent sign-in or sign-up attempt. This is useful for ensuring security by checking if authentication steps were completed on the same device or browser.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/verification.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifiedFromTheSameClient(): boolean\n```\n\n----------------------------------------\n\nTITLE: Opting Out via Environment Variable - Clerk SDK - env\nDESCRIPTION: Set the CLERK_TELEMETRY_DISABLED environment variable in your .env file to disable telemetry collection across Clerk-related SDKs. This configuration is framework-independent unless otherwise noted; ensure your deployment setup and framework support environment variables. Inputs: none, applied at runtime. Outputs: disables telemetry event transmission. No dependencies but requires write access to your .env file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nCLERK_TELEMETRY_DISABLED=1\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `InvalidClientStateForAction` in JSON\nDESCRIPTION: This JSON object defines the structure for the `InvalidClientStateForAction` error in Clerk. It's a general error indicating that the client's current state prevents the requested action from being completed. The `longMessage` includes placeholders (`%s`) for specific details about the action and reason. It has the `code` 'client_state_invalid'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid action\",\n  \"longMessage\": \"We were unable to complete %s for this Client. %s\",\n  \"code\": \"client_state_invalid\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PermissionResource Interface in TypeScript\nDESCRIPTION: TypeScript interface definition for a permission resource that includes identifier, key, name, type classification, and timestamp tracking properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/permission.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PermissionResource {\n  id: string;\n  key: string;\n  name: string;\n  type: 'system' | 'user';\n  createdAt: Date;\n  updatedAt: Date;\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting an Organization in JavaScript\nDESCRIPTION: This snippet demonstrates how to delete an organization using the destroy() method. This action is irreversible and can only be performed by administrators.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<void>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.destroy()\n```\n\n----------------------------------------\n\nTITLE: GetToken Implementation in Tanstack React Start\nDESCRIPTION: Example of using getToken in a Tanstack React Start API route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/tanstack-react-start/server'\nimport { json } from '@tanstack/react-start'\nimport { createAPIFileRoute } from '@tanstack/react-start/api'\n\nexport const Route = createAPIFileRoute('/api/example')({\n  GET: async ({ req, params }) => {\n    const { userId, getToken } = await getAuth(req)\n\n    if (!userId) {\n      return json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const token = await getToken({ template: 'supabase' })\n\n    return json({\n      // ...\n    })\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring environment variables for Clerk API keys\nDESCRIPTION: Guides the user to add Clerk's publishable and secret API keys into a `.env` file, referencing the Clerk Dashboard for retrieval. These keys are essential for authenticating requests to Clerk services.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/fastify.mdx#_snippet_1\n\nLANGUAGE: YAML\nCODE:\n```\nCLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Installing expo-checkbox Dependency using pnpm\nDESCRIPTION: Adds the `expo-checkbox` package using the pnpm package manager. This dependency is utilized in the React Native/Expo example to include a checkbox UI element.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\npnpm add expo-checkbox\n```\n\n----------------------------------------\n\nTITLE: Adding JWT Claims for Group-Based Access Control in Clerk\nDESCRIPTION: JSON example showing how to include additional claims for group-based access control in Clerk JWT templates, which can be used with Grafbase authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"groups\": [\"org:admin\", \"org:member\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for Organization.getRoles in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the Organization.getRoles method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Localization in Vue.js using Clerk Plugin (TypeScript)\nDESCRIPTION: Shows how to set up Clerk localization in a Vue.js application using the `@clerk/vue` plugin. Import the desired locale object (e.g., `frFR` for French) in your main entry file (`src/main.ts`) and pass it as the `localization` option when registering the `clerkPlugin` with the Vue app instance using `app.use()`. This configures the localization for all Clerk components used within the Vue app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/localization.mdx#2025-04-23_snippet_5\n\nLANGUAGE: ts\nCODE:\n```\n```ts {{ filename: 'src/main.ts', mark: [4, 5, 9] }}\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\n// fr-FR locale is imported as frFR\nimport { frFR } from '@clerk/localizations'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  localization: frFR,\n})\napp.mount('#app')\n```\n```\n\n----------------------------------------\n\nTITLE: Declaring a Form Field with Clerk.Field in TypeScript/React\nDESCRIPTION: Illustrates the use of <Field> to wrap and associate child elements such as <Input>, <FieldError>, or <Label> for a form field named \"unique-name\" in a Clerk-powered TypeScript/React application. This sets up the field context for error management and accessibility, and takes a name property used to associate underlying field components. Additional properties can be passed to customize rendering.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">{/* Your content */}</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Filtering Organization Invitations by Status in TypeScript\nDESCRIPTION: Example of using getOrganizationInvitationList to retrieve organization invitations filtered by status. In this case, it fetches only pending invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId,\n  // returns a list of invitations that have not yet been accepted\n  status: ['pending'],\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Playwright Global Setup with Clerk in TypeScript\nDESCRIPTION: This TypeScript snippet demonstrates how to configure Playwright's global setup by calling 'clerkSetup' from the '@clerk/testing/playwright' package. It ensures a Testing Token is generated and shared at the start of test execution, optimizing test performance and preventing race conditions. Playwright's 'describe' is configured for serial execution, as required for global setup logic. Dependencies: '@clerk/testing/playwright', '@playwright/test'. Key parameter: none. Outputs: prepares Clerk for authentication in all tests.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkSetup } from '@clerk/testing/playwright'\nimport { test as setup } from '@playwright/test'\n\n// Setup must be run serially, this is necessary if Playwright is configured to run fully parallel: https://playwright.dev/docs/test-parallel\nsetup.describe.configure({ mode: 'serial' })\n\nsetup('global setup', async ({}) => {\n  await clerkSetup()\n})\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Redirect URLs in Environment Variables (env)\nDESCRIPTION: This `.env` file snippet shows the necessary environment variables to configure Clerk's redirect behavior for a custom sign-in/sign-up page. `CLERK_SIGN_IN_URL` specifies the route where the `<SignIn>` component is hosted (`/sign-in`). `CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` and `CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` define the fallback destination (root `/`) if users navigate directly to the sign-in route or click the sign-up link within the component, respectively.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\n```env {{ filename: '.env' }}\nCLERK_SIGN_IN_URL=/sign-in\nCLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\nCLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\n```\n```\n\n----------------------------------------\n\nTITLE: Defining PhoneCodeFactor Interface for Phone Code Authentication\nDESCRIPTION: Specifies the type definition for phone code verification factor with properties for strategy, phone number ID, safe identifier, primary status flag, and default status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\ntype PhoneCodeFactor = {\n  strategy: PhoneCodeStrategy\n  phoneNumberId: string\n  safeIdentifier: string\n  primary?: boolean\n  default?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Cookies via HTTP Response Header\nDESCRIPTION: Demonstrates how a server sets a cookie using the Set-Cookie HTTP header. The example sets a session_id cookie with the value sess123.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/cookies.mdx#2025-04-23_snippet_0\n\nLANGUAGE: http\nCODE:\n```\nHTTP/2 200\nContent-Type: text/html\nSet-Cookie: session_id=sess123\n\n<html>\n  <body>\n    <p>Hello, world!</p>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Retrieving OAuth Access Token Function Signature in TypeScript\nDESCRIPTION: This code snippet shows the function signature for getUserOauthAccessToken(). It takes a userId and provider as parameters and returns a Promise of OauthAccessToken array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user-oauth-access-token.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getUserOauthAccessToken(\n  userId: string,\n  provider: `${OAuthProvider}`,\n): Promise<OauthAccessToken[]>\n```\n\n----------------------------------------\n\nTITLE: Firebase Configuration Object Structure\nDESCRIPTION: Example of the Firebase configuration object needed to initialize Firebase in your application. This contains connection details such as API keys, project ID, and other Firebase-specific identifiers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/firebase.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nconst firebaseConfig = {\n  apiKey: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n  authDomain: 'clerk-example-xxxxx.firebaseapp.com',\n  databaseURL: 'https://clerk-example-xxxxx-default-xxxx.firebaseio.com',\n  projectId: 'clerk-test-xxxx',\n  storageBucket: 'clerk-test-xxxx.appspot.com',\n  messagingSenderId: '012345678910',\n  appId: '1:012345678:web:abcdef123456hijklm',\n  measurementId: 'G-ABC123DEF',\n}\n```\n\n----------------------------------------\n\nTITLE: Example Telemetry Event Structure - Clerk SDK - JavaScript\nDESCRIPTION: This snippet provides a sample JavaScript object representing the structure of a telemetry event sent by Clerk SDKs. It highlights key fields like event type, Clerk SDK version, publishable key, and the event payload, which may include component and prop usage data. No dependencies are required to read this format; actual collection and sending are handled by Clerk SDK internals. Inputs are internal event triggers; outputs are structured event objects. This is for reference and debugging, especially when using the CLERK_TELEMETRY_DEBUG environment variable.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\n{\n  event: 'COMPONENT_MOUNTED',\n  cv: '4.62.1',\n  sdk: '@clerk/nextjs',\n  sdkv: '4.25.6',\n  pk: 'pk_test_YmFsYW5jZWQtY293YmlyZC0xNi5jbGVyay5hY2NvdW50cy5kDXyk',\n  payload: { component: 'SignIn', appearanceProp: false },\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Email and Password Sign-Up Flow in iOS (Swift)\nDESCRIPTION: This code creates a sign-up flow in an iOS app using SwiftUI and Clerk's SDK. It handles email and password input, email verification, and manages the sign-up process using Clerk's SignUp API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password.mdx#2025-04-23_snippet_5\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct EmailPasswordSignUpView: View {\n  @State private var email = \"\"\n  @State private var password = \"\"\n  @State private var code = \"\"\n  @State private var isVerifying = false\n\n  var body: some View {\n    if isVerifying {\n      // Display the verification form to capture the OTP code\n      TextField(\"Enter your verification code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verify(code: code) }\n      }\n    } else {\n      // Display the initial sign-up form to capture the email and password\n      TextField(\"Enter email address\", text: $email)\n      SecureField(\"Enter password\", text: $password)\n      Button(\"Next\") {\n        Task { await submit(email: email, password: password) }\n      }\n    }\n  }\n}\n\nextension EmailPasswordSignUpView {\n\n  func submit(email: String, password: String) async {\n    do {\n      // Start the sign-up process using the email and password provided\n      let signUp = try await SignUp.create(strategy: .standard(emailAddress: email, password: password))\n\n      // Send the user an email with the verification code\n      try await signUp.prepareVerification(strategy: .emailCode)\n\n      // Set 'isVerifying' true to display second form\n      // and capture the OTP code\n      isVerifying = true\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n\n  func verify(code: String) async {\n    do {\n      // Access the in progress sign up stored on the client\n      guard let inProgressSignUp = Clerk.shared.client?.signUp else { return }\n\n      // Use the code the user provided to attempt verification\n      let signUp = try await inProgressSignUp.attemptVerification(strategy: .emailCode(code: code))\n\n      switch signUp.status {\n      case .complete:\n        // If verification was completed, navigate the user as needed.\n        dump(Clerk.shared.session)\n      default:\n        // If the status is not complete, check why. User may need to\n        // complete further steps.\n        dump(signUp.status)\n      }\n    } catch {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating ClerkExpressWithAuth Parameter in Clerk SDK (JavaScript)\nDESCRIPTION: Illustrates the change from using 'apiKey' to 'secretKey' as a parameter in the ClerkExpressWithAuth function from the Clerk SDK for Node.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ClerkExpressWithAuth } from '@clerk/clerk-sdk-node'\n\nClerkExpressWithAuth({ apiKey: '...' })\nClerkExpressWithAuth({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Opening SignIn Component Overlay with JavaScript\nDESCRIPTION: This snippet demonstrates how to use the openSignIn method to open the SignIn component as an overlay at the root of the HTML body element in a JavaScript application using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nclerk.openSignIn()\n```\n\n----------------------------------------\n\nTITLE: Path Routing Component Implementation\nDESCRIPTION: Examples of implementing Clerk components with the new default path routing strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_19\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn path=\"/sign-in\" />\n<SignUp path=\"/sign-up\" />\n<UserProfile path=\"/user-profile\" />\n<CreateOrganization path=\"/create-org\" />\n<OrganizationProfile path=\"/org-profile\" />\n```\n\n----------------------------------------\n\nTITLE: Updated Allowlist Identifier List Response\nDESCRIPTION: Demonstrates the updated response structure for getAllowlistIdentifierList including data and totalCount.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Protecting Forms with Clerk Auth in Astro\nDESCRIPTION: Example of protecting a form submission by validating user authentication. Throws an error if user is not signed in when attempting to submit.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/locals.mdx#2025-04-23_snippet_1\n\nLANGUAGE: astro\nCODE:\n```\n---\nif (Astro.request.method === 'POST') {\n  if (!Astro.locals.auth().userId) {\n    throw new Error('You must be signed in to add an item to your cart')\n  }\n\n  const data = await Astro.request.formData()\n  console.log('add item action', data)\n}\n---\n\n<form method=\"POST\">\n  <input value=\"test\" type=\"text\" name=\"name\" />\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining EmailCodeFactor Interface for Email Code Authentication\nDESCRIPTION: Specifies the type definition for email code verification factor with properties for strategy, email address ID, safe identifier, and primary status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\ntype EmailCodeFactor = {\n  strategy: EmailCodeStrategy\n  emailAddressId: string\n  safeIdentifier: string\n  primary?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Backend Session Object Type Definition\nDESCRIPTION: Type definition showing all properties of the Backend Session object including session identifiers, timestamps, and user activity data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface BackendSession {\n  id: string;\n  clientId: string;\n  userId: string;\n  status: string;\n  lastActiveAt: number;\n  lastActiveOrganizationId?: string;\n  actor: ActJWTClaim | null;\n  latestActivity: SessionActivity;\n  expireAt: number;\n  abandonAt: number;\n  createdAt: number;\n  updatedAt: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Fauna library with pnpm\nDESCRIPTION: Command to install the Fauna JavaScript client library using pnpm package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\npnpm add fauna\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Middleware for Organization-based Route Protection\nDESCRIPTION: Middleware configuration that redirects users without active organizations to an organization selection page when attempting to access protected dashboard routes. Includes path matching configuration for Next.js routing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware(async (auth, req) => {\n  const { userId, orgId } = await auth()\n\n  // Redirect signed in users to organization selection page if they are not active in an organization\n  if (\n    userId &&\n    !orgId &&\n    req.nextUrl.pathname.startsWith('/dashboard') &&\n    req.nextUrl.pathname !== '/dashboard/org-selection'\n  ) {\n    const searchParams = new URLSearchParams({ redirectUrl: req.url })\n\n    const orgSelection = new URL(`/dashboard/org-selection?${searchParams.toString()}`, req.url)\n\n    return NextResponse.redirect(orgSelection)\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization Methods in JavaScript\nDESCRIPTION: This snippet demonstrates the changes in pagination arguments for various Organization methods. The 'limit' parameter has been renamed to 'pageSize', and 'offset' has been renamed to 'initialPage' to improve clarity in pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating Organizations.getOrganizationInvitationList Return Type in JavaScript\nDESCRIPTION: Shows how the return type of Organizations.getOrganizationInvitationList has changed. Instead of returning an array directly, it now returns an object with data array and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider in Next.js Root Layout\nDESCRIPTION: Implementation of ClerkProvider in a Next.js satellite application's root layout component. Sets up authentication with satellite configuration and routing to primary domain.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<html lang=\"en\">\n  <body>\n    <ClerkProvider\n      isSatellite\n      domain={(url) => url.host}\n      signInUrl={primarySignInUrl}\n      signUpUrl={primarySignUpUrl}\n    >\n      <title>Satellite Next.js app</title>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      {children}\n    </ClerkProvider>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Defining the BackupCodeFactor Type in TypeScript\nDESCRIPTION: Defines the BackupCodeFactor type, representing verification using backup codes as a second factor authentication method.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-second-factor.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype BackupCodeFactor = {\n  strategy: BackupCodeStrategy\n}\n```\n\n----------------------------------------\n\nTITLE: Facebook OAuth Configuration Tutorial Structure in Markdown\nDESCRIPTION: Documentation structure for setting up Facebook OAuth with Clerk, including development and production configuration steps, Facebook app creation process, and testing instructions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/facebook.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Add Facebook as a social connection\ndescription: Learn how to allow users to sign up and sign in to your Clerk app with their Facebook account using OAuth.\n---\n\n<TutorialHero\n  beforeYouStart={[\n  {\n    title: \"A Clerk app is required.\",\n    link: \"/docs/quickstarts/setup-clerk\",\n    icon: \"clerk\",\n  },\n  {\n    title: \"A Meta Developer account is required.\",\n    link: \"https://developers.facebook.com/docs/development/register\",\n    icon: \"user-circle\",\n  }\n]}\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in Next.js with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in a Next.js application using Clerk. This snippet demonstrates how to customize the theme, size, and language of the CAPTCHA widget.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs';\n\n<ClerkProvider\n  appearance={{\n    captcha: {\n      theme: 'dark',\n      size: 'flexible',\n      language: 'es-ES',\n    }\n  }}\n>\n  {/* ... */}\n</ClerkProvider>;\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Organization Invitation with a Redirect URL using cURL (Bash)\nDESCRIPTION: This cURL command creates an organization invitation similar to the basic creation, but includes a `redirect_url` parameter in the JSON payload. When the invited user clicks the invitation link, Clerk will redirect them to this specified URL after the initial sign-in/sign-up process. This requires handling the subsequent authentication flow on the target page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/invitations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/organizations/{org_123}/invitations' \\\n  -X POST \\\n  -H 'Authorization: Bearer {{secret}}' \\\n  -H 'Content-Type: application/json' \\\n  -d '{ \"inviter_user_id\": \"user_123\", \"email_address\": \"email@example.com\", \"role\": \"org:member\", \"redirect_url\": \"https://www.example.com/accept-invitation\" }'\n```\n\n----------------------------------------\n\nTITLE: Managing Clerk Telemetry Collection (General)\nDESCRIPTION: Provides general environment variables `CLERK_TELEMETRY_DISABLED` and `CLERK_TELEMETRY_DEBUG` to control Clerk's telemetry data collection. Setting the former to `1` disables collection, while setting the latter to `1` logs data to the console instead of sending it.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_7\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `CLERK_TELEMETRY_DISABLED` | Set this to `1` to disable Clerk's telemetry data collection. |\n| `CLERK_TELEMETRY_DEBUG` | Set this to `1` to prevent telemetry data from being sent to Clerk. It will be logged to the console instead. |\n```\n\n----------------------------------------\n\nTITLE: Example: Creating an Organization with Clerk JS SDK (JavaScript)\nDESCRIPTION: Demonstrates a basic call to the `clerk.createOrganization` method to create a new organization named 'test'. Requires an initialized Clerk instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nawait clerk.createOrganization({ name: 'test' })\n```\n\n----------------------------------------\n\nTITLE: Setting User Profile Image - Clerk TypeScript\nDESCRIPTION: Defines the setProfileImage method, which uploads or replaces a user's profile image in Clerk. Accepts a params object containing the file (Blob, File, string, or null). Returns a promise resolving to an ImageResource containing image details like id, name, and publicUrl.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_28\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction setProfileImage(params: SetProfileImageParams): Promise<ImageResource>\n```\n\n----------------------------------------\n\nTITLE: Defining getOrganizationInvitation Function in TypeScript\nDESCRIPTION: Function signature for getOrganizationInvitation, which takes GetOrganizationInvitationParams and returns a Promise of OrganizationInvitation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationInvitation(\n  params: GetOrganizationInvitationParams,\n): Promise<OrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for JavaScript MFA Implementation\nDESCRIPTION: HTML template for implementing MFA sign-in with Clerk in a vanilla JavaScript application. Includes forms for both initial sign-in and MFA verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-password-mfa.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-in\">\n      <h2>Sign in</h2>\n      <form id=\"sign-in-form\">\n        <label for=\"email\">Enter email address</label>\n        <input name=\"email\" id=\"sign-in-email\" />\n        <label for=\"password\">Enter password</label>\n        <input name=\"password\" id=\"sign-in-password\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <form id=\"verifying\" hidden>\n      <h2>Verify your account</h2>\n      <label for=\"totp\">Enter your code</label>\n      <input id=\"totp\" name=\"code\" />\n      <label for=\"backupCode\">This code is a backup code</label>\n      <input type=\"checkbox\" id=\"backupCode\" name=\"backupCode\" />\n      <button type=\"submit\" id=\"verify-button\">Verify</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Importing createClerkClient Instead of Default Clerk Import\nDESCRIPTION: Example of the updated import statement for createClerkClient, which replaces the previous default Clerk import.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_15\n\nLANGUAGE: js\nCODE:\n```\nimport { createClerkClient } from '@clerk/remix'\n```\n\n----------------------------------------\n\nTITLE: Updating getAllowlistIdentifierList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getAllowlistIdentifierList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_41\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Updating Allowlist Identifier List Retrieval in JavaScript\nDESCRIPTION: Shows the change in the return structure of getAllowlistIdentifierList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Reloading User Data with $userStore\nDESCRIPTION: Shows how to reload the current user's data after external updates, including error handling and API interactions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/user-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $userStore } from '@clerk/astro/client'\n\nexport default function User() {\n  const user = useStore($userStore)\n\n  if (user === undefined) {\n    // Handle loading state however you like\n    return null\n  }\n\n  if (user === null) return null\n\n  const updateUser = async () => {\n    // Update data via an API endpoint\n    const updateMetadata = await fetch('/api/updateMetadata')\n\n    // Check if the update was successful\n    if (updateMetadata.message !== 'success') {\n      throw new Error('Error updating')\n    }\n\n    // If the update was successful, reload the user data\n    await user.reload()\n  }\n\n  return (\n    <>\n      <button onClick={updateUser}>Click me to update your metadata</button>\n      <p>user role: {user?.publicMetadata.role}</p>\n    </>\n  )\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $userStore } from '@clerk/astro/client'\n\nconst user = useStore($userStore)\n\nconst updateUser = async () => {\n  // Update data via an API endpoint\n  const updateMetadata = await fetch('/api/updateMetadata')\n\n  // Check if the update was successful\n  if (updateMetadata.message !== 'success') {\n    throw new Error('Error updating')\n  }\n\n  // If the update was successful, reload the user data\n  await user.value.reload()\n}\n</script>\n\n<template>\n  <div v-if=\"user === undefined\">\n    <!-- Handle loading state however you like -->\n  </div>\n\n  <div v-else-if=\"user !== null\">\n    <button @click=\"updateUser\">Click me to update your metadata</button>\n    <p>user role: {{ user?.publicMetadata.role }}</p>\n  </div>\n</template>\n```\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { useStore } from '@nanostores/svelte'\n  import { $userStore as userStore } from '@clerk/astro/client'\n\n  const user = useStore(userStore)\n\n  const updateUser = async () => {\n    if ($user) {\n      try {\n        // Update data via an API endpoint\n        const response = await fetch('/api/updateMetadata')\n        const updateMetadata = await response.json()\n\n        // Check if the update was successful\n        if (updateMetadata.message !== 'success') {\n          throw new Error('Error updating')\n        }\n\n        // If the update was successful, reload the user data\n        await $user.reload()\n      } catch (error) {\n        console.error('Failed to update metadata:', error)\n        // Handle the error appropriately\n      }\n    }\n  }\n</script>\n\n{#if $user === undefined}\n  <!-- Handle loading state however you like -->\n{:else if $user !== null}\n  <button on:click={updateUser}>Click me to update your metadata</button>\n  <p>user role: {$user.publicMetadata?.role}</p>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Defining the accept() Method for UserOrganizationInvitation - Clerk TypeScript\nDESCRIPTION: This type signature defines the asynchronous accept() method for the UserOrganizationInvitation object in the Clerk SDK. The method enables a user to accept an invitation to join an organization, returning a Promise that resolves to an updated UserOrganizationInvitation object upon success. Dependencies include TypeScript, Clerk's UserOrganizationInvitation type, and prerequisite invitation state; invocation requires no parameters and returns the modified invitation instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/user-organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction accept(): Promise<UserOrganizationInvitation>\n```\n\n----------------------------------------\n\nTITLE: Creating Invitation Example in React/TypeScript\nDESCRIPTION: Example showing how to create an invitation using clerkClient, including email address, redirect URL, and public metadata configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/create-invitation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.invitations.createInvitation({\n  emailAddress: 'invite@example.com',\n  redirectUrl: 'https://www.example.com/my-sign-up',\n  publicMetadata: {\n    example: 'metadata',\n    example_nested: {\n      nested: 'metadata',\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Create Organization with ClerkJS - TypeScript\nDESCRIPTION: Presents the TypeScript signature for `redirectToCreateOrganization`, a ClerkJS helper function that navigates to the configured Create Organization component using the underlying `navigate` method. Returns a Promise that can be awaited. Suitable for integrating organization feature entry points in custom flows. Requires prior configuration of the Create Organization route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_24\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectToCreateOrganization(): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Configuring rootAuthLoader and Root-Level App Structure (TypeScript/TSX)\nDESCRIPTION: This code snippet shows how to set up authentication state management in a React Router app using the rootAuthLoader from '@clerk/react-router/ssr.server'. The loader function provides authentication data to all routes, and the code includes definitions for links, layout, error boundary, and app outlet. Prerequisites: TypeScript support, React Router, and Clerk's React Router SDK installed. Inputs: route arguments, environment variables; Outputs: SSR loader data and structured HTML layout. Limitations: relies on Clerk and app-specific routes/types.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react-router.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { rootAuthLoader } from '@clerk/react-router/ssr.server'\\nimport { isRouteErrorResponse, Links, Meta, Outlet, Scripts, ScrollRestoration } from 'react-router'\\nimport type { Route } from './+types/root'\\nimport stylesheet from './app.css?url'\\n\\nexport async function loader(args: Route.LoaderArgs) {\\n  return rootAuthLoader(args)\\n}\\n\\nexport const links: Route.LinksFunction = () => [\\n  { rel: 'preconnect', href: 'https://fonts.googleapis.com' },\\n  {\\n    rel: 'preconnect',\\n    href: 'https://fonts.gstatic.com',\\n    crossOrigin: 'anonymous',\\n  },\\n  {\\n    rel: 'stylesheet',\\n    href: 'https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap',\\n  },\\n  { rel: 'stylesheet', href: stylesheet },\\n]\\n\\nexport function Layout({ children }: { children: React.ReactNode }) {\\n  return (\\n    <html lang=\\\"en\\\">\\n      <head>\\n        <meta charSet=\\\"utf-8\\\" />\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n        <Meta />\\n        <Links />\\n      </head>\\n      <body>\\n        {children}\\n        <ScrollRestoration />\\n        <Scripts />\\n      </body>\\n    </html>\\n  )\\n}\\n\\nexport default function App() {\\n  return <Outlet />\\n}\\n\\nexport function ErrorBoundary({ error }: Route.ErrorBoundaryProps) {\\n  let message = 'Oops!'\\n  let details = 'An unexpected error occurred.'\\n  let stack: string | undefined\\n\\n  if (isRouteErrorResponse(error)) {\\n    message = error.status === 404 ? '404' : 'Error'\\n    details =\\n      error.status === 404 ? 'The requested page could not be found.' : error.statusText || details\\n  } else if (import.meta.env.DEV && error && error instanceof Error) {\\n    details = error.message\\n    stack = error.stack\\n  }\\n\\n  return (\\n    <main className=\\\"pt-16 p-4 container mx-auto\\\">\\n      <h1>{message}</h1>\\n      <p>{details}</p>\\n      {stack && (\\n        <pre className=\\\"w-full p-4 overflow-x-auto\\\">\\n          <code>{stack}</code>\\n        </pre>\\n      )}\\n    </main>\\n  )\\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Private Metadata with Clerk Express SDK (TypeScript)\nDESCRIPTION: This TypeScript/Express snippet shows how to update private metadata for a user using Clerk's Express SDK in an Express.js route. Expects 'stripeId' and 'userId' in the request body, and updates the user's privateMetadata field. Requires '@clerk/express' package and proper Clerk API client setup. Sends a JSON response indicating success.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/express'\n\napp.post('/updateStripe', async (req, res) => {\n  const { stripeId, userId } = req.body\n\n  await clerkClient.users.updateUserMetadata(userId, {\n    privateMetadata: {\n      stripeId: stripeId,\n    },\n  })\n\n  res.status(200).json({ success: true })\n})\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in Organization.getDomains\nDESCRIPTION: Demonstration of pagination argument changes in Organization.getDomains method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_13\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Checking Client Status in TypeScript\nDESCRIPTION: Method to check if the client is newly created and hasn't been saved to the Frontend API yet.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/client.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction isNew(): boolean\n```\n\n----------------------------------------\n\nTITLE: Updating Passkey Name in TypeScript\nDESCRIPTION: Method to update the name of an associated passkey for the signed-in user. Returns a Promise that resolves to a PasskeyResource object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/passkey-resource.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction update(params: { name: string }): Promise<PasskeyResource>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js SDK using pnpm (Bash)\nDESCRIPTION: Command to install the Clerk Next.js SDK (`@clerk/nextjs`) using the pnpm package manager. This provides another alternative for project dependency management.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Upgrading Clerk SDK Dependency for React or Redwood (Shell)\nDESCRIPTION: This shell command upgrades the Clerk React SDK to the latest version using npm. This is required for projects using React or Redwood to use Clerk v3 features and updated APIs. Make sure the project is configured to use Clerk; execute in the project root.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @clerk/clerk-react@latest\n```\n\n----------------------------------------\n\nTITLE: Using Clerk `auth.protect()` for Server-Side Authorization in Next.js Page (TypeScript)\nDESCRIPTION: Shows how to use `auth.protect()` from `@clerk/nextjs/server` within a Next.js React Server Component Page (`page.tsx`). This function enforces both authentication (redirecting if needed) and authorization based on the `org:team_settings:read` permission (throwing a 404 if unauthorized). It returns user details upon successful authorization. Note: This is specific to App Router and server-side execution.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { userId } = await auth.protect({ permission: 'org:team_settings:read' })\n\n  return <p>{userId} is authorized to access this page.</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Token Verification in Next.js API Route\nDESCRIPTION: This example demonstrates how to use the verifyToken function in a Next.js API route. It retrieves the session token from either a cookie or the Authorization header, verifies it using the JWKS Public Key, and checks against authorized parties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/verify-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { verifyToken } from '@clerk/backend'\nimport { cookies } from 'next/headers'\n\nexport async function GET(request: Request) {\n  const cookieStore = cookies()\n  const sessToken = cookieStore.get('__session')?.value\n  const bearerToken = request.headers.get('Authorization')?.replace('Bearer ', '')\n  const token = sessToken || bearerToken\n\n  if (!token) {\n    return Response.json({ error: 'Token not found. User must sign in.' }, { status: 401 })\n  }\n\n  try {\n    const verifiedToken = await verifyToken(token, {\n      jwtKey: process.env.CLERK_JWT_KEY,\n      authorizedParties: ['http://localhost:3001', 'api.example.com'], // Replace with your authorized parties\n    })\n\n    return Response.json({ verifiedToken })\n  } catch (error) {\n    return Response.json({ error: 'Token not verified.' }, { status: 401 })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Reset Password Step in Clerk Elements Sign-In Flow\nDESCRIPTION: This code snippet shows the implementation of the 'reset-password' step. It includes fields for entering a new password and confirming it, along with a submit action to update the password.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Step name=\"reset-password\">\n  <Clerk.Field name=\"password\">\n    <Clerk.Label>New password</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n  <Clerk.Field name=\"confirmPassword\">\n    <Clerk.Label>Confirm password</Clerk.Label>\n    <Clerk.Input />\n    <Clerk.FieldError />\n  </Clerk.Field>\n  <SignIn.Action submit>Update password</SignIn.Action>\n</SignIn.Step>\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using npm\nDESCRIPTION: This command starts the local development server for the application after cloning a template and installing dependencies using npm. It executes the 'dev' script defined in the project's package.json file, typically making the web application accessible on http://localhost:3000 for testing and debugging. Requires Node.js and npm to be installed, and assumes a 'dev' script exists in package.json.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/troubleshooting/create-a-minimal-reproduction.mdx#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Revoking a Clerk Actor Token using Backend API (Bash)\nDESCRIPTION: Shows how to revoke an existing actor token using its ID via a cURL POST request to the Clerk Backend API revoke endpoint. This invalidates the token immediately, preventing its further use for sign-in, even if its expiration time has not been reached. Requires authentication with the Clerk Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X POST https://api.clerk.com/v1/actor_tokens/act_2EL6mQKzeUtoRwGuLZsznyfkIsH/revoke\n```\n\n----------------------------------------\n\nTITLE: Detecting Active Organization on Server Side with Clerk Auth - TypeScript\nDESCRIPTION: This code detects if a signed-in user has an active organization by extracting orgId from Clerk's auth object in a server-side context. It uses the auth() helper from @clerk/nextjs/server, returning hasActiveOrg as a boolean based on the existence of orgId. Requires Next.js with Clerk's server SDK. Inputs: user session context, Outputs: Boolean indication (hasActiveOrg) of user's active organization membership.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/force-organizations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TSX\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Layout() {\n  const { orgId } = await auth()\n\n  const hasActiveOrg = !!orgId\n  // ...\n}\n\n```\n\n----------------------------------------\n\nTITLE: Getting Provider Slug in TypeScript\nDESCRIPTION: Getter method to retrieve the provider attribute of the external account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/external-account.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction providerSlug(): string\n```\n\n----------------------------------------\n\nTITLE: Accessing Custom Claims in Next.js Pages Router\nDESCRIPTION: Example of accessing custom session token claims (fullName and primaryEmail) using the getAuth() helper in Next.js Pages Router.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/custom-session-token.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  const { sessionClaims } = getAuth(req)\n\n  const fullName = sessionClaims.fullName\n\n  const primaryEmail = sessionClaims.primaryEmail\n\n  return res.status(200).json({ fullName, primaryEmail })\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Fauna library with npm\nDESCRIPTION: Command to install the Fauna JavaScript client library using npm package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm i fauna\n```\n\n----------------------------------------\n\nTITLE: Creating Redirect URL Function Signature\nDESCRIPTION: TypeScript function signature for creating a RedirectUrl object. The function takes CreateRedirectUrlParams and returns a Promise of RedirectUrl.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/create-redirect-url.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createRedirectUrl(params: CreateRedirectUrlParams): Promise<RedirectUrl>\n```\n\n----------------------------------------\n\nTITLE: Upgrading Clerk SDK Dependency for Next.js (Shell)\nDESCRIPTION: This shell command upgrades the Clerk Next.js SDK to the latest version using npm. Running this command ensures all recent bug fixes and features from version 3 are installed in your Next.js project. Prerequisite: existing Clerk integration in a JavaScript project; run from the project's root directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/upgrading-from-v2-to-v3.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @clerk/nextjs@latest\n```\n\n----------------------------------------\n\nTITLE: Implementing Waitlist Component in Tanstack React Start\nDESCRIPTION: Implementation of the Waitlist component in a Tanstack React Start application with routing configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Waitlist } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/waitlist')({\n  component: Waitlist,\n})\n\nfunction WaitlistPage() {\n  return <Waitlist />\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: MissingRequestHeaders (Standard Browsers) (JSON)\nDESCRIPTION: This JSON object represents the error payload returned for standard browser requests that are missing mandatory headers, specifically the HTTP Origin header required for security. It includes a short message, a detailed long message explaining the requirement and potential causes, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid request headers\",\n  \"longMessage\": \"Your Clerk Frontend API is accessible from browsers and native applications. To protect against standard web attacks, the HTTP Origin header is required in browser requests. If you see this error, you probably accessed Clerk Frontend API directly from the address bar or a browser extension is intercepting your browser requests, removing the HTTP Origin header. For more information refer to https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin.\",\n  \"code\": \"request_header_missing_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: MissingRequestHeaders (Non-Standard Browsers/Native) (JSON)\nDESCRIPTION: This JSON object represents the error payload returned for non-standard browser or native application requests missing mandatory headers, specifically the HTTP Authorization header. It includes a short message, a detailed long message explaining the requirement for a Clerk client JWT or an empty string initially, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid request headers\",\n  \"longMessage\": \"Your Clerk Frontend API is accessible from browsers and native applications. To protect against common web attacks, we require the HTTP Authorization header to be present in native application requests. Make sure the HTTP Authorization header is set a valid Clerk client JWT or set it to an empty string for your first Frontend API request that will return your Clerk client JWT.\",\n  \"code\": \"request_header_missing_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk React Router SDK with Multiple Package Managers - Bash\nDESCRIPTION: These commands are used to install the '@clerk/react-router' npm package, which provides components and helpers for integrating Clerk authentication into a React Router-based application. You can use your preferred Node.js package manager (npm, yarn, pnpm, or bun). Ensure Node.js and the selected package manager are installed before running the appropriate command. No arguments are required except the name of the package to install.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/library-mode.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/react-router\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/react-router\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/react-router\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/react-router\\n\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Organization Invitation using cURL (Bash)\nDESCRIPTION: This cURL command demonstrates how to create an organization invitation server-side by making a POST request to the Clerk Backend API. It requires the Organization ID in the URL path and a JSON payload containing the inviter's user ID, the invitee's email address, and the role to assign. Authentication is done via a Bearer token using the Clerk Secret Key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/invitations.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl 'https://api.clerk.com/v1/organizations/{org_123}/invitations' \\\n-X POST \\\n-H 'Authorization: Bearer {{secret}}' \\\n-H 'Content-Type: application/json' \\\n-d '{ \"inviter_user_id\": \"user_123\", \"email_address\": \"email@example.com\", \"role\": \"org:member\" }'\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using yarn dlx\nDESCRIPTION: Executes the `@clerk/upgrade` CLI tool via yarn dlx to scan the codebase and identify necessary changes for upgrading from Core 1. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Implementing Waitlist Component in Next.js\nDESCRIPTION: Basic implementation of the Waitlist component in a Next.js application using the @clerk/nextjs package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { Waitlist } from '@clerk/nextjs'\n\nexport default function WaitlistPage() {\n  return <Waitlist />\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances - Vue - TypeScript\nDESCRIPTION: Uses the clerkPlugin in a Vue application to globally apply the Dark theme and override the SignIn component with Neobrutalism. Requires dependency on @clerk/vue and @clerk/themes. The appearance config on app.use ensures theme granularity at the component level.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_20\n\nLANGUAGE: ts\nCODE:\n```\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport { clerkPlugin } from '@clerk/vue'\nimport { dark, neobrutalism } from '@clerk/themes'\n\nconst app = createApp(App)\napp.use(clerkPlugin, {\n  appearance: {\n    baseTheme: dark,\n    signIn: { baseTheme: neobrutalism },\n  },\n})\napp.mount('#app')\n```\n\n----------------------------------------\n\nTITLE: Defining getRedirectUrl Function Type\nDESCRIPTION: TypeScript function signature for the getRedirectUrl method that takes a redirect URL ID and returns a Promise containing the RedirectUrl object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/get-redirect-url.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getRedirectUrl(redirectUrlId: string): Promise<RedirectUrl>\n```\n\n----------------------------------------\n\nTITLE: Defining Billing Account Without Customer ID Error in Clerk - JSON\nDESCRIPTION: This JSON snippet details the error response when a billing account is missing an associated Stripe Customer ID. The 'longMessage' identifies the problematic billing account (<baID>) and is designed for diagnostic output. No dependencies are required; the snippet illustrates error response structure for 'billing_account_without_customer_id_code' occurrences. All keys are static except for the placeholder values that will be populated at runtime.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing-accounts.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Billing account without customer ID\\\",\\n  \\\"longMessage\\\": \\\"Billing account <baID> does not have a Stripe Customer ID\\\",\\n  \\\"code\\\": \\\"billing_account_without_customer_id_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Using Fetch API with SWR and Clerk Authentication for Hasura\nDESCRIPTION: React component that demonstrates using the Fetch API with SWR hook to make authenticated GraphQL requests to Hasura. The component obtains a JWT from Clerk and includes it in the Authorization header.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/hasura.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useAuth } from '@clerk/nextjs'\nimport useSWR from 'swr'\n\n// This component needs to be a child of <ClerkProvider> and <SignedIn>\n// in order to access the authenticated session object\nconst Main = () => {\n  const { getToken } = useAuth()\n  const endpoint = process.env.NEXT_PUBLIC_HASURA_GRAPHQL_API\n  const query = `query { __schema { types { name } } }`\n  const fetcher = async (...args) =>\n    fetch(...args, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${await getToken({ template: 'hasura' })}`,\n      },\n      body: JSON.stringify({ query }),\n    }).then((res) => res.json())\n\n  const { data } = useSWR(endpoint, fetcher)\n\n  return <p>GraphQL schema has {data?.data?.__schema.types.length} types</p>\n}\n\nexport default Main\n```\n\n----------------------------------------\n\nTITLE: Defining SVG Logo with Theme-Aware Styling\nDESCRIPTION: SVG definition for a logo that includes conditional styling. The first path uses a fixed color (#F44250), while the second path employs CSS variables to change appearance based on light or dark mode themes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/react-router.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 32 32\">\n  <path\n    fill=\"#F44250\"\n    d=\"M25.6 15.568a3.196 3.196 0 0 1-3.2 3.19 3.193 3.193 0 0 0-3.2 3.189 3.196 3.196 0 0 1-3.2 3.19 3.193 3.193 0 0 1-2.263-.935 3.172 3.172 0 0 1-.937-2.255 3.193 3.193 0 0 1 3.2-3.19 3.196 3.196 0 0 0 3.2-3.189 3.194 3.194 0 0 0-3.2-3.19 3.193 3.193 0 0 1-3.2-3.189A3.193 3.193 0 0 1 16 6c1.767.001 3.2 1.429 3.2 3.19a3.193 3.193 0 0 0 3.2 3.19c1.768 0 3.2 1.427 3.2 3.19Z\"\n  />\n\n  <path\n    style={{ fill: 'var(--light, #121212) var(--dark, #fff)' }}\n    d=\"M12.8 15.568a3.195 3.195 0 0 0-3.2-3.19 3.195 3.195 0 0 0-3.2 3.19 3.195 3.195 0 0 0 3.2 3.19c1.767 0 3.2-1.428 3.2-3.19ZM6.4 21.947a3.195 3.195 0 0 0-3.2-3.19 3.195 3.195 0 0 0-3.2 3.19 3.195 3.195 0 0 0 3.2 3.19c1.767 0 3.2-1.429 3.2-3.19ZM32 21.947a3.195 3.195 0 0 0-3.2-3.19 3.195 3.195 0 0 0-3.2 3.19 3.195 3.195 0 0 0 3.2 3.19c1.767 0 3.2-1.429 3.2-3.19Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Implementing Background Service Worker with Clerk\nDESCRIPTION: Creates a background service worker that handles token management using createClerkClient(). The worker listens for messages from content scripts and refreshes session tokens when needed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/create-clerk-client.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/chrome-extension/background'\n\nconst publishableKey = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\n\nif (!publishableKey) {\n  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')\n}\n\nasync function getToken() {\n  const clerk = await createClerkClient({\n    publishableKey,\n  })\n\n  if (!clerk.session) {\n    return null\n  }\n\n  return await clerk.session?.getToken()\n}\n\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  getToken()\n    .then((token) => sendResponse({ token }))\n    .catch((error) => {\n      console.error('[Background service worker] Error:', JSON.stringify(error))\n      sendResponse({ token: null })\n    })\n  return true\n})\n```\n\n----------------------------------------\n\nTITLE: SAML Configuration Email Template\nDESCRIPTION: A detailed HTML email template containing step-by-step instructions for configuring SAML SSO in Microsoft Entra ID. Includes steps for creating an enterprise application, assigning users, configuring SAML settings, and verifying attribute mappings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/enterprise-connections/saml/azure.mdx#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\nHere are the instructions for setting up SAML SSO with Microsoft Entra ID:\\n\\n**Step 1: Create a new enterprise application in Microsoft**\\n\\n1. Navigate to the [Microsoft Azure portal](https://azure.microsoft.com/en-us/get-started/azure-portal) and sign in.\\n1. Under the **Azure Services** section, find and select **Enterprise applications**. You may have to go to the [**All services**](https://portal.azure.com/#allservices) page and then scroll down to the **Identity** section to find it.\\n1. Select **New application**. You'll be redirected to the **Browse Microsoft Entra Gallery** page.\\n1. Select **Create your own application**.\\n1. In the modal that opens:\\n   - **Name** of your application (likely [YOUR_APPLICATION_NAME]).\\n   - Select **Integrate any other application you don't find in the gallery (Non-gallery)**.\\n   - Select **Create**.\\n\\n[...rest of template...]\n```\n\n----------------------------------------\n\nTITLE: Initiating Generic Web3 Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithWeb3` function signature. This asynchronous function initiates a generic Web3 authentication flow by verifying wallet ownership via a cryptographic signature. It requires `AuthenticateWithWeb3Params` containing the user's Web3 `identifier` and a `generateSignature` function. Optional parameters include `strategy` and `legalAccepted`. It returns a Promise resolving to a SignUpResource.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithWeb3(params: AuthenticateWithWeb3Params): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Vue Theme Configuration\nDESCRIPTION: Demonstrates how to configure Clerk themes in a Vue application using the clerkPlugin.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_25\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { SignIn } from '@clerk/vue'\nimport { dark } from '@clerk/themes'\n</script>\n\n<template>\n  <SignIn :appearance=\"{ baseTheme: dark }\" />\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining SessionVerifyAttemptFirstFactorParams Type in TypeScript\nDESCRIPTION: This TypeScript code defines the possible parameter types for the attemptFirstFactorVerification method, including email code, phone code, and password attempts.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SessionVerifyAttemptFirstFactorParams = EmailCodeAttempt | PhoneCodeAttempt | PasswordAttempt\n\ntype EmailCodeAttempt = {\n  strategy: 'email_code'\n  code: string\n}\n\ntype PhoneCodeAttempt = {\n  strategy: 'phone_code'\n  code: string\n}\n\ntype PasswordAttempt = {\n  strategy: 'password'\n  password: string\n}\n```\n\n----------------------------------------\n\nTITLE: Uninstalling and Installing Clerk Vue SDK via Yarn - Bash\nDESCRIPTION: These yarn commands demonstrate how to remove the vue-clerk package and add the @clerk/vue official SDK using Yarn. Prerequisite: Yarn installed in your environment. Inputs are commands entered in your shell; it modifies project dependencies accordingly. Run these commands from your project root.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/migrating-from-vue-community-sdk.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn remove vue-clerk\\nyarn add @clerk/vue\n```\n\n----------------------------------------\n\nTITLE: Implementing SignUp State Check in Svelte\nDESCRIPTION: Svelte component that uses the $signUpStore nanostore to access and display the current sign-up status. Note the aliasing of the import to avoid conflicts with Svelte's reactivity system.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-up-store.mdx#2025-04-23_snippet_2\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $signUpStore as signUp } from '@clerk/astro/client'\n</script>\n\n{#if $signUp === undefined}\n  <!-- Add logic to handle loading state -->\n{:else}\n  <div>The current sign-up attempt status is {$signUp.status}.</div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Creating a Web3Wallet Instance (TypeScript)\nDESCRIPTION: Defines the `create` method signature for the `Web3Wallet` object. This asynchronous function is used to create a new Web3 wallet instance. It returns a Promise that resolves with the newly created `Web3Wallet` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/web3-wallet.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(): Promise<Web3Wallet>\n```\n\n----------------------------------------\n\nTITLE: Running the React Router App Locally (Bash)\nDESCRIPTION: These commands start the development server for your project using the selected package manager (npm, yarn, pnpm, or bun). Prerequisites: the project must have the appropriate dev script configured and all dependencies installed. Input: none; Output: local development server (usually at http://localhost:5173) for authentication testing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react-router.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in Astro with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in an Astro application using Clerk. This snippet shows how to customize the theme, size, and language of the CAPTCHA widget in the Astro configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_1\n\nLANGUAGE: js\nCODE:\n```\nimport clerk from '@clerk/astro'\n\nexport default defineConfig({\n  integrations: [\n    clerk({\n      appearance: {\n        captcha: {\n          theme: 'dark',\n          size: 'flexible',\n          language: 'es-ES',\n        },\n      },\n    }),\n  ],\n})\n```\n\n----------------------------------------\n\nTITLE: Disabling User TOTP - Clerk JavaScript - JavaScript\nDESCRIPTION: Invokes Clerk's user.disableTOTP method to remove the signed-in user's TOTP secret, disabling authenticator-app-based MFA. Input is none, output is a DeletedObject. The authenticator strategy must be configured in app settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.user.disableTOTP()\n```\n\n----------------------------------------\n\nTITLE: Setting Hasura Environment Variables in Docker Compose\nDESCRIPTION: YAML configuration for setting the Hasura GraphQL admin secret and JWT secret in a docker-compose.yml file. This setup enables JWT authentication with Clerk when running Hasura locally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/hasura.mdx#2025-04-23_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nHASURA_GRAPHQL_ADMIN_SECRET: myadminsecretkey\nHASURA_GRAPHQL_JWT_SECRET: '{\"jwk_url\":\"https://{{fapi}}/.well-known/jwks.json\"}'\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Session Token for InstantDB Integration\nDESCRIPTION: JSON configuration for adding the email claim to the Clerk session token, which is required for InstantDB authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"email\": \"{{user.primary_email_address}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-In-Or-Up Component in Expo Web\nDESCRIPTION: Creates a page component that renders Clerk's SignIn component to handle both sign-in and sign-up flows. This component is specifically for the web platform using Expo Router's platform-specific extensions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/web-support/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nimport { SignIn } from '@clerk/clerk-expo/web'\n\nexport default function Page() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk React Router SDK with NPM/Yarn/PNPM/Bun (Bash)\nDESCRIPTION: These snippets show how to install the @clerk/react-router library using popular JavaScript package managers (npm, yarn, pnpm, bun). This package provides the SDK necessary for integrating Clerk authentication into React Router apps. The only requirement is a React Router application; each command adds the dependency to your project. Inputs: none; Output: the package is added to your node_modules and package.json.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react-router.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/react-router\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/react-router\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/react-router\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/react-router\n```\n\n----------------------------------------\n\nTITLE: Using openGoogleOneTap with ClerkJS\nDESCRIPTION: Example showing how to open the GoogleOneTap component programmatically using ClerkJS.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nconst params = {\n  cancelOnTapOutside: false,\n  itpSupport: false,\n  fedCmSupport: false,\n}\nclerk.openGoogleOneTap(params)\n```\n\n----------------------------------------\n\nTITLE: Closing SignUp Component Overlay with JavaScript\nDESCRIPTION: This snippet demonstrates how to close the SignUp component overlay using JavaScript. It uses the closeSignUp method to remove the overlay from the screen.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\nclerk.openSignUp()\n\n// ...\n\nclerk.closeSignUp()\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for JavaScript Sign-in Implementation\nDESCRIPTION: HTML template for implementing Clerk sign-in functionality with error display section.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/error-handling.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-in\">\n      <h2>Sign in</h2>\n      <form id=\"sign-in-form\">\n        <label for=\"email\">Enter email address</label>\n        <input name=\"email\" id=\"sign-in-email\" />\n        <label for=\"password\">Enter password</label>\n        <input name=\"password\" id=\"sign-in-password\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <p id=\"error\"></p>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Initializing Clerk Custom Commands in Cypress - TypeScript\nDESCRIPTION: This snippet demonstrates how to import and register Clerk custom commands in a Cypress support file using the @clerk/testing/cypress package. Before running custom Clerk commands (such as sign-in or sign-out) in your tests, you must add these commands globally by calling addClerkCommands with the Cypress and cy objects. Ensure that @clerk/testing is installed in your Cypress project. The snippet only requires modification of your Cypress support file (e.g., cypress/support/e2e.ts) and does not produce any output.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/custom-commands.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\n/// <reference types=\\\"cypress\\\" />\nimport { addClerkCommands } from '@clerk/testing/cypress'\naddClerkCommands({ Cypress, cy })\n\nexport {}\n```\n\n----------------------------------------\n\nTITLE: Custom Rendering of Field Error Using Function Children in Clerk.FieldError (TypeScript/React)\nDESCRIPTION: Demonstrates customizing the rendering of error messages and codes by passing a function as children to <Clerk.FieldError> within <Clerk.Field> in a TypeScript/React application. The provided function receives the error message and code for advanced formatting or localization. Requires placement under Clerk.Field and optionally responds to specific error codes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Field name=\"unique-name\">\n  <Clerk.FieldError>\n    {({ message, code }) => (\n      <span>\n        {message} ({code})\n      </span>\n    )}\n  </Clerk.FieldError>\n</Clerk.Field>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Ruby SDK with Bundler\nDESCRIPTION: This command installs the Clerk Ruby SDK and its dependencies using Bundler, which reads the Gemfile and installs all required gems for the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/ruby/installation.mdx#2025-04-23_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\n$ bundle install\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims via @clerk/backend (Core 1 Context)\nDESCRIPTION: Illustrates how `JwtPayload` (containing the `orgs` claim in Core 1) could be obtained using the generic `@clerk/backend` package by calling `clerkClient.authenticateRequest` and accessing `requestState.toAuth().sessionClaims`. This highlights another way the removed `orgs` claim might have been used.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: '' })\nconst requestState = await clerkClient.authenticateRequest(request, { publishableKey: '' })\nconst claims: JwtPayload = requestState.toAuth().sessionClaims\n```\n\n----------------------------------------\n\nTITLE: SignUp Component Property Types\nDESCRIPTION: TypeScript interface showing the available properties for the SignUp component. Includes options for appearance customization, routing configuration, redirect URLs, and metadata handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface SignUpProps {\n  appearance?: Appearance;\n  fallback?: ReactNode;\n  fallbackRedirectUrl?: string;\n  forceRedirectUrl?: string;\n  initialValues?: SignUpInitialValues;\n  oauthFlow?: 'redirect' | 'popup' | 'auto';\n  path?: string;\n  routing?: 'hash' | 'path';\n  signInFallbackRedirectUrl?: string;\n  signInForceRedirectUrl?: string;\n  signInUrl?: string;\n  unsafeMetadata?: SignUpUnsafeMetadata;\n}\n```\n\n----------------------------------------\n\nTITLE: Importing Clerk Common Components in TypeScript/React\nDESCRIPTION: Demonstrates how to import all common Clerk Elements components under the Clerk namespace using TypeScript/React. This practice simplifies component discovery and avoids naming conflicts when integrating Clerk UI components into your application. The dependency is '@clerk/elements/common', and no user input/output is expected.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as Clerk from '@clerk/elements/common'\n```\n\n----------------------------------------\n\nTITLE: Paginating Invitation Results\nDESCRIPTION: Example showing how to implement pagination by skipping results using the offset parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/invitations/get-invitation-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList({\n  status: 'revoked',\n  // skips the first 10 results\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Using deleteDomain Function in TypeScript React\nDESCRIPTION: Example usage of the `deleteDomain()` function from the Clerk Backend SDK to delete a satellite domain. It demonstrates how to call the function with a domain ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/domains/delete-domain.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst id = 'test_123'\n\nconst response = await clerkClient.users.deleteDomain(id)\n```\n\n----------------------------------------\n\nTITLE: Using Data Attributes for State-Based Styling in React\nDESCRIPTION: Demonstrates how to apply the CSS classes that use data attributes for state-based styling in a React component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/styling.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\n<Clerk.Input className=\"input\" />\n```\n\n----------------------------------------\n\nTITLE: Attempting Second Factor Verification in JavaScript\nDESCRIPTION: This JavaScript code demonstrates how to use the attemptSecondFactorVerification method of the Session object to verify the second authentication factor using a phone code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.attemptSecondFactorVerification({\n  strategy: 'phone_code',\n  code: '123456',\n})\n```\n\n----------------------------------------\n\nTITLE: Protecting Content Using the `role` Prop with Clerk `<Protect>`\nDESCRIPTION: Shows how to use the `role` prop of the `<Protect>` component for authorization based on the user's role (e.g., `org:billing`). While using `permission` is recommended, this demonstrates the `role` prop usage. Fallback content is provided. Examples for Next.js, React, Astro, Vue, and Expo (note: the Expo example uses the `permission` prop in the source code for role-based logic).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/protect.mdx#_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/nextjs'\n\nexport default function ProtectPage() {\n  return (\n    <Protect\n      role=\"org:billing\"\n      fallback={<p>Only a member of the Billing department can access this content.</p>}\n    >\n      {children}\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/clerk-react'\n\nexport default function ProtectPage() {\n  return (\n    <Protect\n      role=\"org:billing\"\n      fallback={<p>Only a member of the Billing department can access this content.</p>}\n    >\n      {children}\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { Protect } from '@clerk/astro/components'\n---\n\n<Protect role=\"org:billing\">\n  <p slot=\"fallback\">Only a member of the Billing department can access this content.</p>\n  <slot />\n</Protect>\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { Protect } from '@clerk/vue'\n</script>\n\n<template>\n  <Protect role=\"org:billing\">\n    <template #fallback>\n      <p>Only a member of the Billing department can access this content.</p>\n    </template>\n    <slot />\n  </Protect>\n</template>\n```\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function Screen() {\n  return (\n    <Protect\n      permission=\"org:billing\" // Note: Uses 'permission' prop here in source example for role logic\n      fallback={<Text>Only a member of the Billing department can access this content.</Text>}\n    >\n      <Text>Users with role org:billing can see this.</Text>\n    </Protect>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Documentation Steps for SAML Integration Setup\nDESCRIPTION: Markdown documentation outlining the complete process of setting up a SAML SSO connection in Clerk, including configuration steps for both the Identity Provider and Service Provider settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/enterprise-connections/saml/custom-provider.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<Steps>\n  ## Set up an enterprise connection in Clerk\n\n  To create a SAML connection in Clerk:\n\n  1. In the Clerk Dashboard, navigate to the [**SSO connections**](https://dashboard.clerk.com/last-active?path=user-authentication/sso-connections) page.\n  1. Select **Add connection** and select **For specific domains or organizations**.\n  1. Under **SAML**, select **Custom SAML Provider**.\n  1. Add the **Domain** for which you want to enable this connection. This is the domain of the users you wish to allow to sign in to your application. Optionally, select an **Organization**.\n  1. Enter the **Name**. This will be displayed on the sign-in form.\n  1. Select **Add connection**. You'll be redirected to the connection's configuration page.\n\n  ## Create a new enterprise application in your IdP\n\n  Create a new application in your IdP. In the next steps, you'll configure your IdP with the settings provided by your Service Provider (Clerk), and configure Clerk with the settings provided by your IdP. Keep both the IdP and Clerk Dashboard open.\n</Steps>\n```\n\n----------------------------------------\n\nTITLE: Creating a Clerk Actor Token using Backend API (Bash)\nDESCRIPTION: Demonstrates how to create an actor token using a cURL POST request to the Clerk Backend API. This token allows a specified actor (`user_id` in the `actor` object) to sign in as another user (`user_id` at the top level) for a defined duration (`expires_in_seconds`). Requires authentication with the Clerk Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X POST https://api.clerk.com/v1/actor_tokens -d '{ \\\n  \"user_id\": \"user_1o4qfak5AdI2qlXSXENGL05iei6\", \\\n  \"expires_in_seconds\": 600 \\\n  \"actor\": { \\\n    \"sub\": \"user_21Ufcy98STcA11s3QckIwtwHIES\", \\\n  } \\\n}'\n```\n\n----------------------------------------\n\nTITLE: Defining Sign-up Not Found Error Response in Clerk (JSON)\nDESCRIPTION: This snippet defines the JSON structure for the 'SignUpNotFound' error returned by the Clerk API when a sign-up resource with a given ID cannot be found. It includes both a concise short message and a formatted long message for descriptive error handling, along with a specific error code. This error should be handled by client applications to notify users that the requested sign-up does not exist.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Sign up not found\\\",\\n  \\\"longMessage\\\": \\\"No sign up was found with id %s\\\",\\n  \\\"code\\\": \\\"resource_not_found\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Action and Page to UserButton in Astro\nDESCRIPTION: This snippet shows how to add a custom 'Help' action and page to the UserButton component in Astro. It configures a help action that opens a custom user profile page when selected.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-button.mdx#2025-04-23_snippet_5\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.MenuItems>\n      <UserButton.Action label=\"Help\" open=\"help\">\n        <svg\n          slot=\"label-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 512 512\"\n          fill=\"currentColor\"\n        >\n          <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n        </svg>\n      </UserButton.Action>\n    </UserButton.MenuItems>\n\n    <UserButton.UserProfilePage label=\"Help\" url=\"help\">\n      <svg\n        slot=\"label-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        fill=\"currentColor\"\n      >\n        <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n      </svg>\n      <div>\n        <h1>Help Page</h1>\n        <p>This is the custom help page</p>\n      </div>\n    </UserButton.UserProfilePage>\n  </UserButton>\n</header>\n```\n\n----------------------------------------\n\nTITLE: Configuring Route Protection Middleware with Clerk in Nuxt (TypeScript)\nDESCRIPTION: This TypeScript snippet defines a global Nuxt middleware named auth.global.ts to protect specific routes using Clerk's createRouteMatcher and useAuth utilities. The middleware checks if a user is authenticated via useAuth and determines if the current route matches protected patterns. If the user is not signed in and attempts to access a protected route, they are redirected to the sign-in page. Dependencies include Clerk for authentication, Nuxt's defineNuxtRouteMiddleware, and Nuxt navigation functions. The protected route patterns are specified in the createRouteMatcher argument, and the main parameters are the Nuxt route object (to) and the userId from useAuth.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nuxt/protect-pages.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\\n\\nexport default defineNuxtRouteMiddleware((to) => {\\n  const { userId } = useAuth()\\n\\n  // If the user is not signed in, they aren't allowed to access\\n  // the protected route and are redirected to the sign-in page\\n  if (!userId.value && isProtectedRoute(to)) {\\n    return navigateTo('/sign-in')\\n  }\\n})\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Remix SDK using yarn\nDESCRIPTION: This command uses the Yarn package manager to install the `@clerk/remix` SDK. This package is essential for adding Clerk authentication features, including prebuilt UI components and helper functions, to a Remix project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Testing Package using npm, yarn, pnpm (Shell)\nDESCRIPTION: These terminal commands install the '@clerk/testing' package as a development dependency using npm, yarn, or pnpm. The package provides integration helpers for testing frameworks such as Playwright. Select the command that matches your preferred package manager. Prerequisite: Node.js project environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm i @clerk/testing --save-dev\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add -D @clerk/testing\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm add @clerk/testing -D\n```\n\n----------------------------------------\n\nTITLE: Removed Clerk NextJS API Imports\nDESCRIPTION: Demonstrates imports that have been removed from @clerk/nextjs/api package. These types and functions should now be imported from @clerk/clerk-sdk-node instead.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\n// These have been removed\nimport {\n  ClerkMiddleware,\n  ClerkMiddlewareOptions,\n  LooseAuthProp,\n  RequireAuthProp,\n  StrictAuthProp,\n  WithAuthProp,\n} from '@clerk/nextjs/api'\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk SDK via Shell Command\nDESCRIPTION: This shell snippet represents a placeholder for the specific installation command required to add a Clerk SDK to a user's project. The actual command should be replaced with the officially recommended package manager command (e.g., npm install, yarn add, pnpm add, etc.). This snippet is intended to be copied directly into a terminal, and assumes standard Node.js/npm/Yarn environment; no additional dependencies are implied.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/conventions.mdx#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n# Install command for SDK\n```\n\n----------------------------------------\n\nTITLE: Using Fetch API with Clerk Authentication for Nhost GraphQL\nDESCRIPTION: React component that uses the Fetch API with SWR for GraphQL requests to Nhost. This example demonstrates how to add the Clerk JWT to requests using the Fetch API directly, querying GraphQL schema information.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/nhost.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { useAuth } from '@clerk/nextjs'\nimport useSWR from 'swr'\n\nexport default function Home() {\n  const { getToken } = useAuth()\n  const subdomain = process.env.NEXT_PUBLIC_NHOST_SUBDOMAIN\n  const endpoint = `https://${subdomain}.nhost.run/v1/graphql`\n  const query = `query { __schema { types { name } } }`\n  const fetcher = async (...args) =>\n    fetch(...args, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `Bearer ${await getToken({ template: 'nhost' })}`,\n      },\n      body: JSON.stringify({ query }),\n    }).then((res) => res.json())\n\n  const { data } = useSWR(endpoint, fetcher)\n\n  return <p>GraphQL schema has {data?.data?.__schema.types.length} types</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Supported Strategies for Password Reset - Clerk Elements - JavaScript/JSX\nDESCRIPTION: This snippet demonstrates rendering the <SignIn.SupportedStrategy> component as part of the password reset workflow. It is responsible for initiating the process by sending a verification code (usually by email) to the user. Dependencies include Clerk Elements and proper configuration of authentication strategies in the Clerk dashboard. It accepts configuration for the supported strategies, and outputs the interface for strategy selection and verification. If unsupported, a runtime warning is logged.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/guides/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\n<SignIn.SupportedStrategy />\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk SignInTokenCannotBeUsed Error - JSON\nDESCRIPTION: Demonstrates the JSON object for the 'SignInTokenCannotBeUsed' error, which tells clients that a token is invalid for current use and prompts users to request a new token. No dependencies are needed; this is a standardized error schema. Fields include short and detailed messages and a code, used for error handling middleware or client feedback.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in-tokens.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"sign in token cannot be used\\\",\\n  \\\"longMessage\\\": \\\"This sign in token cannot be used anymore. Please request a new one.\\\",\\n  \\\"code\\\": \\\"sign_in_token_cannot_be_used_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Private Metadata with Clerk Go SDK (Go)\nDESCRIPTION: This Go excerpt demonstrates loading a user's private metadata from Clerk via the Go SDK. The function makes a call to 'Users().Read' with the user ID, retrieving the full user object which includes private metadata. Proper error handling is necessary. Intended for application backend usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_7\n\nLANGUAGE: go\nCODE:\n```\nvar client clerk.Client\n\nfunc GetUserMetadata(user *clerk.User, stripeCustomerID string) error {\n  user, err := s.clerkClient.Users().Read(sess.UserID)\n\n  if err != nil {\n    panic(err)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Variables to All Instances in Next.js App Router\nDESCRIPTION: This snippet shows how to customize all instances of the SignIn component by setting appearance variables in the ClerkProvider within a Next.js App Router layout file. It sets the primary color to blue and text color to black.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/variables.mdx#2025-04-23_snippet_7\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <ClerkProvider\n      appearance={{\n        signIn: {\n          variables: {\n            colorPrimary: 'blue',\n            colorText: 'black',\n          },\n        },\n      }}\n    >\n      <html lang=\"en\">\n        <body>{children}</body>\n      </html>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInWithMetamaskButton in React\nDESCRIPTION: Illustrates how to use a custom button with the SignInWithMetamaskButton component in React. This snippet shows wrapping a custom button and using the 'modal' mode.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignInWithMetamaskButton } from '@clerk/clerk-react'\n\nexport default function Example() {\n  return (\n    <SignInWithMetamaskButton mode=\"modal\">\n      <button>Custom sign in button</button>\n    </SignInWithMetamaskButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting Verification in Clerk SignUp\nDESCRIPTION: This method attempts to complete a pending verification process for the specified verification strategy. It must be called after initiating verification via prepareVerification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptVerification(params: AttemptVerificationParams): Promise<SignUp>\n```\n\n----------------------------------------\n\nTITLE: Using Typedoc Component in MDX\nDESCRIPTION: Shows how to use the Typedoc component to inject the contents of an MDX file from the generated-typedoc repository, which contains automatically generated documentation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_16\n\nLANGUAGE: mdx\nCODE:\n```\n<Typedoc src=\"clerk-react/use-auth\" />\n```\n\n----------------------------------------\n\nTITLE: Implementing Reverification in Ruby on Rails\nDESCRIPTION: This example demonstrates how to implement reverification in a Ruby on Rails controller. It uses the `clerk_user_needs_reverification` helper with the 'moderate' preset (1 hour timeframe) and renders a reverification response that triggers the reverification flow on the client-side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ruby\nCODE:\n```\nclass HomeController < ApplicationController\n  before_action :require_reverification, only: :foo\n\n  def foo\n    render json: { success: \"true\" }\n  end\n\n  private\n\n  # will halt the request and respond with a JSON that Clerk.js\n  # will read and kickstart a reverification flow\n  def require_reverification\n    clerk_render_reverification(Clerk::StepUp::PRESETS[:moderate]) if clerk_user_needs_reverification?(Clerk::StepUp::PRESETS[:moderate])\n  end\nend\n```\n\n----------------------------------------\n\nTITLE: Delete User Function Signature in TypeScript\nDESCRIPTION: Type definition for the deleteUser function that takes a user ID and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/delete-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: RedirectOptions Interface Definition in TypeScript\nDESCRIPTION: Interface defining optional properties for configuring redirect URLs after sign in and sign up actions. Includes force redirect URLs and fallback redirect URLs for both authentication flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/redirect-options.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface RedirectOptions {\n  signInForceRedirectUrl?: string;\n  signUpForceRedirectUrl?: string;\n  signInFallbackRedirectUrl?: string;\n  signUpFallbackRedirectUrl?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Global Error Messages with Clerk.GlobalError in TypeScript/React\nDESCRIPTION: Shows how to include <Clerk.GlobalError /> inside a <SignIn.Root> flow to render non-field-specific API errors in TypeScript/React. The component must be a child of components like <SignIn.Root> or <SignUp> to access submission state and returns error messages in a <div> wrapper by default.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <Clerk.GlobalError />\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Defining Force Redirect URL Props in Clerk Components (JSX)\nDESCRIPTION: Demonstrates the names of props used to enforce specific redirect URLs in Clerk components, overriding any existing `redirect_url` query parameter or default behavior. These ensure users are always sent to the specified URL after sign-in/sign-up. Includes general (`forceRedirectUrl`) and specific props for sign-in (`signInForceRedirectUrl`) and sign-up (`signUpForceRedirectUrl`) links.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/custom-redirects.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nforceRedirectUrl\nsignInForceRedirectUrl\nsignUpForceRedirectUrl\n```\n\n----------------------------------------\n\nTITLE: Signing in a User with Clerk in Playwright Tests using TypeScript\nDESCRIPTION: This snippet demonstrates how to sign in a user programmatically within a Playwright test using `clerk.signIn()` from `@clerk/testing/playwright`. It requires navigating to an unprotected page where Clerk is loaded before calling `signIn`. The example uses the 'phone_code' strategy. Dependencies include `@clerk/testing` and `playwright`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/playwright/test-helpers.mdx#2025-04-23_snippet_0\n\nLANGUAGE: ts\nCODE:\n```\nimport { clerk } from '@clerk/testing/playwright'\n\ntest('sign in', async ({ page }) => {\n  // Navigate to an unprotected page that loads Clerk\n  await page.goto('/')\n\n  await clerk.signIn({\n    page,\n    signInParams: { strategy: 'phone_code', identifier: '+15555550100' },\n  })\n\n  // Navigate to a protected page\n  await page.goto('/protected')\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Legacy ClerkExpressRequireAuth Behavior (Error Emission) - Express & Clerk - TypeScript\nDESCRIPTION: This snippet replicates the legacy error-emitting behavior when a route is accessed by an unauthenticated user, as provided by ClerkExpressRequireAuth middleware. It is a custom Express middleware that sends an error to the next middleware if user authentication fails. This behavior can be integrated as a drop-in replacement while migrating away from the Node SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nconst legacyRequireAuth = (req, res, next) => {\n  if (!req.auth.userId) {\n    return next(new Error('Unauthenticated'))\n  }\n  next()\n}\napp.get('/', legacyRequireAuth, handler)\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `SignInIdentificationOrUserDeleted` in JSON\nDESCRIPTION: This JSON object defines the structure for the `SignInIdentificationOrUserDeleted` error in Clerk. It occurs during the sign-in flow if either the user account itself or the specific identification method selected (e.g., email address that was verified) has been deleted since the process began. It includes `shortMessage`, `longMessage`, and the `code` 'sign_in_identification_or_user_deleted'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"identification or user deleted\",\n  \"longMessage\": \"Either the user or the selected identification were deleted. Please start over.\",\n  \"code\": \"sign_in_identification_or_user_deleted\"\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk SignUp Component in Remix - TypeScript\nDESCRIPTION: This snippet shows how to create a dedicated sign-up route in a Remix app by rendering the <SignUp /> component from @clerk/remix. No external setup is needed beyond having Clerk and Remix dependencies installed. The route will automatically display Clerk's sign-up UI when accessed. Intended to be used in app/routes/sign-up.$.tsx.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/custom-sign-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: TypeScript\nCODE:\n```\nimport { SignUp } from '@clerk/remix'\n\nexport default function Page() {\n  return <SignUp />\n}\n\n```\n\n----------------------------------------\n\nTITLE: Representing InvalidRotatingToken Error in Clerk (JSON)\nDESCRIPTION: This JSON object exemplifies the structure for an `InvalidRotatingToken` error in Clerk. It indicates that the client's rotating token doesn't match the provided one, including placeholders for a dynamic short message (`<invalidCookieMessage>`) and the specific mismatched token (`<token>`) in the long message, along with the error code `cookie_invalid_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/cookie.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"<invalidCookieMessage>\",\n  \"longMessage\": \"The client's rotating key does not match the given one <token>\",\n  \"code\": \"cookie_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Representing UpdateSecondFactorUnverified Error in Clerk JSON\nDESCRIPTION: JSON object representing the 'UpdateSecondFactorUnverified' error in Clerk. This error occurs when attempting to modify second-factor authentication attributes for an identification (like enabling it as a 2FA method) that has not yet been verified by the user. Verification is a prerequisite for using an identification for 2FA. It includes a short message ('Update failed'), a long message stating the reason, and the specific error code 'identification_update_second_factor_unverified'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/identifications.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Update failed\",\n  \"longMessage\": \"Cannot update second factor attributes for unverified identification\",\n  \"code\": \"identification_update_second_factor_unverified\"\n}\n```\n\n----------------------------------------\n\nTITLE: Initiating Generic Sign-Up Verification in Clerk using TypeScript\nDESCRIPTION: This function initiates the verification process for a sign-up attempt using a specified strategy. It takes a `PrepareVerificationParams` object detailing the strategy (`'phone_code'`, `'email_code'`, `'email_link'`, `'oauth_<provider>'`, `'saml'`, `'enterprise_sso'`, `'web3_metamask_signature'`, etc.) and potentially other parameters like `redirectUrl`, `actionCompleteRedirectUrl`, `oidcPrompt`, or `oidcLoginHint` depending on the strategy. It returns a Promise resolving to the updated `SignUpResource`. This function is central to handling various verification flows during sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareVerification(params: PrepareVerificationParams): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Setting Public Metadata with Clerk Ruby SDK (Ruby)\nDESCRIPTION: This Ruby script demonstrates setting public metadata (for example, assigning a 'role') for a user using the Clerk Ruby SDK. Requires initialization of the SDK with your Clerk secret key, and builds a 'publicMetadata' hash. Metadata can be read by frontend clients but must be set on backend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_13\n\nLANGUAGE: ruby\nCODE:\n```\n# ruby json example with a private metadata and stripe id\nrequire 'clerk'\nrequire 'json'\n\npublicMetadata = {\n  \"role\": \"awesome-user\",\n}\n\nclerk = Clerk::SDK.new(api_key: \"your_clerk_secret_key\")\nclerk.users.updateMetadata(\"user_xyz\", public_metadata: publicMetadata)\n```\n\n----------------------------------------\n\nTITLE: Defining the SignIn create Method Signature in TypeScript\nDESCRIPTION: This TypeScript function signature defines the `create` method for the Clerk `SignIn` object. It accepts a `SignInCreateParams` object and returns a `Promise` that resolves with a `SignIn` instance. This method initiates the sign-in process, and its behavior depends on the parameters passed, particularly the chosen authentication strategy.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nfunction create(params: SignInCreateParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Detecting Clerk Impersonated Sessions in React using useAuth (JSX)\nDESCRIPTION: Uses the `useAuth` hook from Clerk's React-based SDKs to access the authentication context. It checks for the presence and content of the `actor` object within the hook's return value to determine if the current session is an impersonated one and displays the actor's and subject's user IDs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/user-impersonation.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\nconst { userId, actor } = useAuth()\n\nreturn (\n  <div>\n    Server-side info:\n    <p>\n      {actor && (\n        <span>\n          User {actor.sub} has signed in as user {userId}\n        </span>\n      )}\n    </p>\n  </div>\n)\n```\n\n----------------------------------------\n\nTITLE: Running the React Development Server using Shell Commands\nDESCRIPTION: These commands start the development server for the React application using various package managers (npm, yarn, pnpm, bun). This allows developers to view and interact with the application locally, typically on `http://localhost:5173` for Vite projects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/react.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Creating a User Search Component for Admin Dashboard\nDESCRIPTION: A client-side component that enables admins to search for users. It updates the URL query parameters which can then be used to filter users on the server side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { usePathname, useRouter } from 'next/navigation'\n\nexport const SearchUsers = () => {\n  const router = useRouter()\n  const pathname = usePathname()\n\n  return (\n    <div>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault()\n          const form = e.currentTarget\n          const formData = new FormData(form)\n          const queryTerm = formData.get('search') as string\n          router.push(pathname + '?search=' + queryTerm)\n        }}\n      >\n        <label htmlFor=\"search\">Search for users</label>\n        <input id=\"search\" name=\"search\" type=\"text\" />\n        <button type=\"submit\">Submit</button>\n      </form>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Google Analytics Logo SVG – SVG\nDESCRIPTION: This snippet includes SVG markup for the Google Analytics logo. Suitable for embedding in documentation or dashboards. All colors and size scaling are handled internally with no external dependencies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_3\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 152 176\" fill=\"none\"><path fill=\"#F9AB00\" d=\"M110 21v132c0 14.77 10.19 23 21 23 10 0 21-7 21-23V22c0-13.54-10-22-21-22s-21 9.33-21 21Z\"/><path fill=\"#E37400\" d=\"M55 88v65c0 14.77 10.19 23 21 23 10 0 21-7 21-23V89c0-13.54-10-22-21-22s-21 9.33-21 21ZM21 176c11.598 0 21-9.402 21-21s-9.402-21-21-21-21 9.402-21 21 9.402 21 21 21Z\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with syncHost in Chrome Extension\nDESCRIPTION: Update the Chrome Extension's ClerkProvider component to include the syncHost prop. This tells the ClerkProvider which host to sync with for authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignedIn, SignedOut, UserButton } from '@clerk/chrome-extension'\nimport { Link, Outlet, useNavigate } from 'react-router-dom'\n\nconst PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\nconst SYNC_HOST = process.env.PLASMO_PUBLIC_CLERK_SYNC_HOST\n\nif (!PUBLISHABLE_KEY || !SYNC_HOST) {\n  throw new Error(\n    'Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY and PLASMO_PUBLIC_CLERK_SYNC_HOST to the .env.development file',\n  )\n}\n\nexport const RootLayout = () => {\n  const navigate = useNavigate()\n\n  return (\n    <ClerkProvider\n      routerPush={(to) => navigate(to)}\n      routerReplace={(to) => navigate(to, { replace: true })}\n      publishableKey={PUBLISHABLE_KEY}\n      afterSignOutUrl=\"/\"\n      syncHost={SYNC_HOST}\n    >\n      <div className=\"plasmo-w-[785px] plasmo-h-[600px]\">\n        <main>\n          <Outlet />\n        </main>\n        <footer>\n          <SignedIn>\n            <Link to=\"/settings\">Settings</Link>\n            <UserButton />\n          </SignedIn>\n          <SignedOut>\n            <Link to=\"/\">Home</Link>\n            <Link to=\"/sign-in\">Sign In</Link>\n            <Link to=\"/sign-up\">Sign Up</Link>\n          </SignedOut>\n        </footer>\n      </div>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring host_permissions in Chrome Extension Manifest\nDESCRIPTION: Update the host_permissions array in the package.json file to specify which hosts will have permission to sync auth state with your app.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"manifest\": {\n    \"key\": \"$CRX_PUBLIC_KEY\",\n    \"permissions\": [\"cookies\", \"storage\"],\n    \"host_permissions\": [\"$PLASMO_PUBLIC_CLERK_SYNC_HOST/*\", \"$CLERK_FRONTEND_API/*\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Framework Auth Object Access Methods\nDESCRIPTION: A reference table showing how to access the Auth object in different frameworks. The Auth object is accessible through framework-specific helper functions or directly from the request object depending on the framework being used.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/auth-object-table.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Framework | How to access the `Auth` object |\n| - | - |\n| Next.js App Router | [`auth()`](/docs/references/nextjs/auth) |\n| Next.js Pages Router | [`getAuth()`](/docs/references/nextjs/get-auth) |\n| Astro | [`locals.auth()`](/docs/references/astro/locals#locals-auth) |\n| Express | [`req.auth`](/docs/references/express/overview) |\n| React Router | [`getAuth()`](/docs/references/react-router/get-auth) |\n| Remix | [`getAuth()`](/docs/references/remix/read-session-data#get-auth) |\n| Tanstack React Start | [`getAuth()`](/docs/references/tanstack-react-start/get-auth) |\n| Other | `request.auth` |\n```\n\n----------------------------------------\n\nTITLE: Accessing Organization Data with $organizationStore\nDESCRIPTION: Demonstrates how to use $organizationStore to access and display the current organization's information with proper handling of loading and null states.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/organization-store.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $organizationStore } from '@clerk/astro/client'\n\nexport default function Home() {\n  const organization = useStore($organizationStore)\n\n  if (organization === undefined) {\n    // Add logic to handle loading state\n    return null\n  }\n\n  if (organization === null) {\n    // Add logic to handle no active organization state\n    return null\n  }\n\n  return (\n    <div>\n      <p>This current organization is {organization.name}</p>\n    </div>\n  )\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $organizationStore } from '@clerk/astro/client'\n\nconst organization = useStore($organizationStore)\n</script>\n\n<template>\n  <div v-if=\"organization === undefined\">\n    <!-- Add logic to handle loading state -->\n  </div>\n  <div v-else-if=\"organization === null\">\n    <!-- Add logic to handle no active organization state -->\n  </div>\n  <div v-else>\n    <p>This current organization is {{ organization.name }}</p>\n  </div>\n</template>\n```\n\nLANGUAGE: svelte\nCODE:\n```\n<script>\n  // The $ prefix is reserved in Svelte for its own reactivity system.\n  // Alias the imports to avoid conflicts.\n  import { $organizationStore as organization } from '@clerk/astro/client'\n</script>\n\n{#if $organization === undefined}\n  <!-- Add logic to handle loading state -->\n{:else if $organization === null}\n  <!-- Add logic to handle no active organization state -->\n{:else}\n  <div>\n    <p>This current organization is {$organization.name}</p>\n  </div>\n{/if}\n```\n\n----------------------------------------\n\nTITLE: Configuring Drizzle Kit for Schema Migrations\nDESCRIPTION: Configuration for Drizzle Kit that specifies the connection to the Neon Postgres database and the location of the schema file. This enables schema migrations using Drizzle Kit's CLI tools.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from 'drizzle-kit'\nimport { loadEnvConfig } from '@next/env'\n\nloadEnvConfig(process.cwd())\n\nif (!process.env.DATABASE_URL) {\n  throw new Error('DATABASE_URL must be a Neon postgres connection string')\n}\n\nexport default defineConfig({\n  dialect: 'postgresql',\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n  schema: './app/db/schema.ts',\n})\n```\n\n----------------------------------------\n\nTITLE: Alternative Routing Strategies\nDESCRIPTION: Examples of using hash and virtual routing strategies with Clerk components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_20\n\nLANGUAGE: jsx\nCODE:\n```\n<UserProfile routing=\"hash\" />\n<OrganizationProfile routing=\"virtual\" />\n```\n\n----------------------------------------\n\nTITLE: Using getRedirectUrl Method\nDESCRIPTION: Example showing how to use the getRedirectUrl method with the Clerk client to retrieve a specific redirect URL using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/get-redirect-url.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst redirectUrlId = 'ru_123'\n\nconst response = await clerkClient.redirectUrls.getRedirectUrl(redirectUrlId)\n```\n\n----------------------------------------\n\nTITLE: Web3 Authentication - TypeScript\nDESCRIPTION: Generic Web3 authentication function supporting multiple strategies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithWeb3({\n  redirectUrl,\n  signUpContinueUrl,\n  customNavigate,\n  strategy,\n}: ClerkAuthenticateWithWeb3Params): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in Tanstack React Start\nDESCRIPTION: Basic implementation of the GoogleOneTap component in a Tanstack React Start application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { GoogleOneTap } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/sign-in')({\n  component: SignIn,\n})\n\nfunction SignIn() {\n  return <GoogleOneTap />\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Proxy in Cloudflare Workers\nDESCRIPTION: Cloudflare Workers configuration for proxying requests to Clerk's Frontend API. It includes the main handler function, Wrangler configuration, environment variables, and TypeScript type definitions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nexport default {\n  async fetch(req: Request, env: Env, _ctx: ExecutionContext): Promise<Response> {\n    const url = req.url.replace(env.CLERK_PROXY_URL, env.CLERK_FAPI)\n    const proxyReq = new Request(req, {\n      redirect: 'manual',\n    })\n\n    proxyReq.headers.set('Clerk-Proxy-Url', env.CLERK_PROXY_URL)\n    proxyReq.headers.set('Clerk-Secret-Key', env.CLERK_SECRET_KEY)\n    proxyReq.headers.set('X-Forwarded-For', req.headers.get('CF-Connecting-IP') || '')\n\n    return fetch(url, proxyReq)\n  },\n}\n```\n\nLANGUAGE: toml\nCODE:\n```\nname = \"cloudflare-proxy\"\nmain = \"src/index.ts\"\ncompatibility_date = \"2023-10-02\"\n\n[vars]\nCLERK_FAPI=\"https://frontend-api.clerk.dev\"\n```\n\nLANGUAGE: env\nCODE:\n```\n# Do not commit this file to source control\nCLERK_PROXY_URL=\"https://app.dev/__clerk\"\nCLERK_SECRET_KEY=\"sk_live_xxxxx\"\n```\n\nLANGUAGE: typescript\nCODE:\n```\ninterface Env {\n  CLERK_FAPI: string\n  CLERK_PROXY_URL: string\n  CLERK_SECRET_KEY: string\n}\n```\n\n----------------------------------------\n\nTITLE: Updating from useOrganizations to useOrganizationList or useOrganization in JavaScript\nDESCRIPTION: Shows the changes required when switching from the deprecated useOrganizations hook to either useOrganizationList or useOrganization. The return signature has changed significantly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_46\n\nLANGUAGE: javascript\nCODE:\n```\n// before: useOrganizations return values\n{\n  isLoaded: boolean,\n  createOrganization: clerk.createOrganization,\n  getOrganizationMemberships: clerk.getOrganizationMemberships,\n  getOrganization: clerk.getOrganization,\n}\n\n// after: useOrganizationList return values\n{\n  isLoaded: boolean,\n  createOrganization: clerk.createOrganization,\n  userMemberships: PaginatedResourcesWithDefault<...> | PaginatedResources<...>,\n  userInvitations: PaginatedResourcesWithDefault<...> | PaginatedResources<...>,\n\n```\n\n----------------------------------------\n\nTITLE: Expo API Route for Actor Token Generation\nDESCRIPTION: API endpoint in Expo for generating actor tokens using Clerk's Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/user-impersonation.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function POST(req: Request) {\n  const { actorId, userId } = await req.json()\n\n  try {\n    const res = await fetch('https://api.clerk.com/v1/actor_tokens', {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${process.env.CLERK_SECRET_KEY}`,\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        user_id: userId,\n        actor: {\n          sub: actorId,\n        },\n      }),\n    })\n\n    const data = await res.json()\n\n    return Response.json(data)\n  } catch (err) {\n    return Response.json({ error: 'Failed to generate actor token' }, { status: 500 })\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Firebase CLI using npm - Bash\nDESCRIPTION: Installs the Firebase CLI globally using npm, which is required to interact with Firebase projects via the command line. Ensure that Node.js and npm are installed on your system. This prepares the system for further Firebase operations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install -g firebase-tools\n\n```\n\n----------------------------------------\n\nTITLE: Hiding Unsupported Authentication Methods in SignUp Component\nDESCRIPTION: Use the appearance prop in the SignUp component to hide unsupported authentication methods in the Chrome Extension environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/sync-host.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\n<SignUp\n  appearance={{\n    elements: {\n      socialButtonsRoot: 'plasmo-hidden',\n      dividerRow: 'plasmo-hidden',\n    },\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Initiating Coinbase Wallet Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithCoinbaseWallet` function signature within the Clerk SDK. This asynchronous function initiates an authentication flow using the Coinbase Wallet browser extension. It prompts the user to connect their wallet and sign a message, returning a Promise resolving to a SignUpResource upon successful authentication. It accepts optional parameters defined by `SignUpAuthenticateWithWeb3Params`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithCoinbaseWallet(\n  params?: SignUpAuthenticateWithWeb3Params,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: TypeScript Interface for Clerk Paginated Response\nDESCRIPTION: Interface definition for handling paginated API responses in Clerk SDK. Contains data array of generic type T and totalCount for pagination tracking. Returns as Promise<ClerkPaginatedResponse<T>> and handles errors through ClerkAPIResponseError.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/clerk-paginated-response.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ClerkPaginatedResponse<T> {\n  data: T[];\n  totalCount: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/testing Package\nDESCRIPTION: Commands to install the Clerk testing package (`@clerk/testing`) as a development dependency using npm, yarn, or pnpm. This package provides necessary helpers for integrating Clerk authentication with testing frameworks like Cypress.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/cypress/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnpm install @clerk/testing --save-dev\n```\n\nLANGUAGE: sh\nCODE:\n```\nyarn add -D @clerk/testing\n```\n\nLANGUAGE: sh\nCODE:\n```\npnpm add @clerk/testing -D\n```\n\n----------------------------------------\n\nTITLE: Organization Role Type Usage\nDESCRIPTION: Shows how to use the organization role type with the useAuth hook.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_51\n\nLANGUAGE: javascript\nCODE:\n```\nimport { useAuth } from '@clerk/clerk-react'\n\nconst { orgRole } = useAuth()\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes using Pages Router - Next.js - TypeScript/TSX\nDESCRIPTION: Shows how to apply multiple Clerk themes in a Next.js app using the Pages Router. @clerk/nextjs and @clerk/themes are required. The ClerkProvider is configured with stacked baseTheme values, allowing easy theme overrides. Accepts standard Next.js AppProps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport { dark, neobrutalism } from '@clerk/themes'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: [dark, neobrutalism],\n      }}\n    >\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Example of Web3 Authentication in Clerk\nDESCRIPTION: Example of using the authenticateWithWeb3 method by providing a wallet identifier. This initiates authentication using a Web3 wallet address to verify user identity through cryptographic signatures.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.authenticateWithWeb3({\n  identifier: '0x1234567890123456789012345678901234567890',\n})\n```\n\n----------------------------------------\n\nTITLE: Using Clerk's redirectWithAuth Helper for Custom Anchor Tags in JSX\nDESCRIPTION: This JSX code snippet demonstrates how to use the `clerk.redirectWithAuth` helper function within an `onClick` event handler for a custom HTML anchor (`<a>`) tag. This approach is required when URL-based session syncing is enabled to ensure proper handling of authentication state during navigation to a specified `your_destination_url`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/url-based-session-syncing.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<a onClick={() => clerk.redirectWithAuth('your_destination_url')}>My link</a>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: DevBrowserUnauthenticated (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when a development browser attempting to access a development instance cannot be authenticated. It suggests checking Clerk cookies and contacting support if the issue persists. It includes a short message, a long message with troubleshooting steps, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Browser unauthenticated\",\n  \"longMessage\": \"Unable to authenticate this browser for your development instance. Check your Clerk cookies and try again. If the issue persists reach out to support@clerk.com.\",\n  \"code\": \"dev_browser_unauthenticated_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Reverification Error JSON Response Structure\nDESCRIPTION: This JSON snippet shows the structure of a custom reverification error response that can be used in non-JavaScript/TypeScript frameworks. It should be returned with a 403 Forbidden status code to trigger the reverification flow.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/reverification.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"clerk_error\": {\n    \"type\": \"forbidden\",\n    \"reason\": \"reverification-error\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Second Factor Verification in JavaScript\nDESCRIPTION: This JavaScript code shows how to use the prepareSecondFactorVerification method of the Session object to initiate the second factor verification process using a phone code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/session.mdx#2025-04-23_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.session.prepareSecondFactorVerification({\n  strategy: 'phone_code',\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing a Framework-Specific SignIn Component Wrapper in TSX\nDESCRIPTION: Provides a pseudo-code example (likely for a framework like Vue or React using refs) of a `SignInComponent`. It uses lifecycle hooks (`onMount`, `onUnMount`) or equivalent framework mechanisms to call `mountSignIn` and `unmountSignIn` methods from the Clerk instance (`$clerk`) on a target DOM element (`el`), effectively rendering and managing the Clerk Sign In component within the framework. Requires a framework-specific `ref` mechanism and access to the Clerk instance via `$clerk`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/frontend-only.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { $clerk } from './stores'\n\nconst SignInComponent = (props: SignInProps) => {\n  const el = ref()\n\n  function onMount() {\n    $clerk.mountSignIn(el, props)\n  }\n\n  function onUnMount() {\n    $clerk.unmountSignIn(el)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining LocalCredentials Interface in TypeScript\nDESCRIPTION: This code snippet defines the LocalCredentials interface, which specifies the structure for storing user credentials locally. It includes an optional identifier field for the user's username, email, or phone number, and a required password field.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/use-local-credentials.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface LocalCredentials {\n  identifier?: string;\n  password: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider and TRPCProvider in Next.js Layout\nDESCRIPTION: Sets up the root layout component with ClerkProvider wrapped around TRPCProvider to ensure tRPC has access to Clerk's authentication context. This configuration enables authentication throughout the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n// ...Imports and other code...\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode\n}>) {\n  return (\n    <ClerkProvider>\n      <TRPCProvider>\n        <html lang=\"en\">\n          <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>\n            <header className=\"flex justify-end items-center p-4 gap-4 h-16\">\n              <SignedOut>\n                <SignInButton />\n                <SignUpButton />\n              </SignedOut>\n              <SignedIn>\n                <Link href=\"/\">Home</Link>\n                <UserButton />\n              </SignedIn>\n            </header>\n            {children}\n          </body>\n        </html>\n      </TRPCProvider>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Using the useAuth hook for authentication state and session management in React\nDESCRIPTION: This example demonstrates how to implement authentication checks using the useAuth hook. It shows how to handle loading states, check if a user is signed in, and access user data like userId and sessionId for protected routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/use-auth.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function Example() {\n  const { isLoaded, isSignedIn, userId, sessionId, getToken } = useAuth()\n\n  if (!isLoaded) {\n    return <div>Loading...</div>\n  }\n\n  if (!isSignedIn) {\n    // You could also add a redirect to the sign-in page here\n    return <div>Sign in to view this page</div>\n  }\n\n  return (\n    <div>\n      Hello, {userId}! Your current active session is {sessionId}.\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing RedirectToOrganizationProfile in Remix\nDESCRIPTION: Example showing how to use RedirectToOrganizationProfile component in a Remix application route. Demonstrates integration with Clerk's authentication components in a Remix context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-organizationprofile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, RedirectToOrganizationProfile } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <RedirectToOrganizationProfile />\n      </SignedIn>\n      <SignedOut>\n        <p>You need to sign in to view your organization profile.</p>\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `NoSecondFactorsForStrategy` in JSON\nDESCRIPTION: This JSON object defines the structure for the `NoSecondFactorsForStrategy` error in Clerk. This error occurs during multi-factor authentication when no second-factor methods (like TOTP or SMS codes) are available or configured for the specified authentication strategy (`<strategy>`). It includes `shortMessage`, `longMessage` with the strategy placeholder, and the `code` 'no_second_factors'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"no second factors\",\n  \"longMessage\": \"No second factors were found for strategy <strategy>.\",\n  \"code\": \"no_second_factors\"\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Clerk JWT Session Token for Migration\nDESCRIPTION: This JSON snippet shows how to customize the Clerk session token via the Clerk Dashboard. It configures the 'userId' claim within the JWT to prioritize a user's 'external_id' (presumably from a legacy system) if it exists, otherwise falling back to Clerk's native 'user.id'. This is useful during migration to maintain references to previous user identifiers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"userId\": \"{{user.external_id || user.id}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `SignInNoIdentificationForUser` in JSON\nDESCRIPTION: This JSON object defines the structure for the `SignInNoIdentificationForUser` error in Clerk. This error indicates that a token used in the sign-in process does not have an associated identification (like email or phone) linked to the user who initiated the sign-in. It includes `shortMessage`, `longMessage`, and the `code` 'sign_in_no_identification_for_user'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"no identification for user\",\n  \"longMessage\": \"The given token doesn't have an associated identification for the user who created it.\",\n  \"code\": \"sign_in_no_identification_for_user\"\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Email Address Function Definition in TypeScript\nDESCRIPTION: Function signature for deleting an email address, which takes an emailAddressId string parameter and returns a Promise containing the EmailAddress object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/delete-email-address.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteEmailAddress(emailAddressId: string): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Applying next/image Optimization Props to Images in MDX\nDESCRIPTION: Shows the MDX syntax for applying `next/image` optimization properties to an image within Clerk docs. The `quality` prop is set to 90, and the `priority` prop is set to `true`, passed within the curly braces following the standard Markdown image syntax. Image paths are relative to the `public/` directory but prefixed with `/docs`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_21\n\nLANGUAGE: mdx\nCODE:\n```\n![Image](/docs/images/my-image.png){{ quality: 90, priority: true }}\n```\n\n----------------------------------------\n\nTITLE: Development Server Launch Command\nDESCRIPTION: Command to start the development server for testing the Chrome Extension.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/create-clerk-client.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Managing Clerk Telemetry Collection (Next.js)\nDESCRIPTION: Provides Next.js public environment variables `NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED` and `NEXT_PUBLIC_CLERK_TELEMETRY_DEBUG`. These allow control over Clerk's telemetry data collection within a Next.js application, similar to the general variables but accessible on the frontend.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_8\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED` | Set this to `1` to disable Clerk's telemetry data collection. |\n| `NEXT_PUBLIC_CLERK_TELEMETRY_DEBUG` | Set this to `1` to prevent telemetry data from being sent to Clerk. It will be logged to the console instead. |\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk Logo SVG\nDESCRIPTION: SVG code for rendering the Clerk logo. This vector graphic uses paths and gradients to create the Clerk emblem.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/community-sdks.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 166 155.3\"><path d=\"M163 35S110-4 69 5l-3 1c-6 2-11 5-14 9l-2 3-15 26 26 5c11 7 25 10 38 7l46 9 18-30z\" fill=\"#76b3e1\"/><linearGradient id=\"solid-logo-a\" gradientUnits=\"userSpaceOnUse\" x1=\"27.5\" y1=\"3\" x2=\"152\" y2=\"63.5\"><stop offset=\".1\" stopColor=\"#76b3e1\"/><stop offset=\".3\" stopColor=\"#dcf2fd\"/><stop offset=\"1\" stopColor=\"#76b3e1\"/></linearGradient><path d=\"M163 35S110-4 69 5l-3 1c-6 2-11 5-14 9l-2 3-15 26 26 5c11 7 25 10 38 7l46 9 18-30z\" opacity=\".3\" fill=\"url(#solid-logo-a)\"/><path d=\"M52 35l-4 1c-17 5-22 21-13 35 10 13 31 20 48 15l62-21S92 26 52 35z\" fill=\"#518ac8\"/><linearGradient id=\"solid-logo-b\" gradientUnits=\"userSpaceOnUse\" x1=\"95.8\" y1=\"32.6\" x2=\"74\" y2=\"105.2\"><stop offset=\"0\" stopColor=\"#76b3e1\"/><stop offset=\".5\" stopColor=\"#4377bb\"/><stop offset=\"1\" stopColor=\"#1f3b77\"/></linearGradient><path d=\"M52 35l-4 1c-17 5-22 21-13 35 10 13 31 20 48 15l62-21S92 26 52 35z\" opacity=\".3\" fill=\"url(#solid-logo-b)\"/><linearGradient id=\"solid-logo-c\" gradientUnits=\"userSpaceOnUse\" x1=\"18.4\" y1=\"64.2\" x2=\"144.3\" y2=\"149.8\"><stop offset=\"0\" stopColor=\"#315aa9\"/><stop offset=\".5\" stopColor=\"#518ac8\"/><stop offset=\"1\" stopColor=\"#315aa9\"/></linearGradient><path d=\"M134 80a45 45 0 00-48-15L24 85 4 120l112 19 20-36c4-7 3-15-2-23z\" fill=\"url(#solid-logo-c)\"/><linearGradient id=\"solid-logo-d\" gradientUnits=\"userSpaceOnUse\" x1=\"75.2\" y1=\"74.5\" x2=\"24.4\" y2=\"260.8\"><stop offset=\"0\" stopColor=\"#4377bb\"/><stop offset=\".5\" stopColor=\"#1a336b\"/><stop offset=\"1\" stopColor=\"#1a336b\"/></linearGradient><path d=\"M114 115a45 45 0 00-48-15L4 120s53 40 94 30l3-1c17-5 23-21 13-34z\" fill=\"url(#solid-logo-d)\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Defining ResetPasswordEmailCodeFactor Interface\nDESCRIPTION: Specifies the type definition for resetting password via email code with properties for strategy, email address ID, safe identifier, and primary status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\ntype ResetPasswordEmailCodeFactor = {\n  strategy: ResetPasswordEmailCodeStrategy\n  emailAddressId: string\n  safeIdentifier: string\n  primary?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Organization Invitation Public Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing public metadata for organization invitations with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationInvitationPublicMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Defining unlockUser Function in TypeScript\nDESCRIPTION: Function signature for unlockUser, which takes a userId as a string parameter and returns a Promise resolving to a User object. This function removes a sign-in lock from the specified user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/unlock-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction unlockUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Loading Component with Different Scopes\nDESCRIPTION: Shows how to use the Loading component to conditionally render content based on loading states at global, provider, and step levels.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_17\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <Clerk.Loading>\n    {(isGlobalLoading) => (isGlobalLoading ? 'Global Loading...' : 'Global')}\n  </Clerk.Loading>\n  <SignIn.Step name=\"start\">\n    <Clerk.Connection name=\"google\">\n      <Clerk.Loading scope=\"provider:google\">\n        {(isLoading) => (isLoading ? 'Loading...' : 'Continue with Google')}\n      </Clerk.Loading>\n    </Clerk.Connection>\n    <SignIn.Action submit>\n      <Clerk.Loading>{(isLoading) => (isLoading ? 'Loading...' : 'Submit')}</Clerk.Loading>\n    </SignIn.Action>\n  </SignIn.Step>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Deleting User Passkeys with Clerk API in React\nDESCRIPTION: This code snippet shows how to delete a user's passkey using the Clerk API. It uses the useUser hook to access the user's passkeys and calls the delete method on the selected passkey object to remove it.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/passkeys.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nexport function DeletePasskeyUI() {\n  const { user } = useUser()\n  const { passkeys } = user\n\n  const passkeyToDeleteId = useRef<HTMLInputElement>(null)\n  const [success, setSuccess] = useState(false)\n\n  const deletePasskey = async () => {\n    const passkeyToDelete = passkeys?.find((pk: any) => pk.id === passkeyToDeleteId.current?.value)\n    try {\n      await passkeyToDelete?.delete()\n\n      setSuccess(true)\n    } catch (err) {\n      // See https://clerk.com/docs/custom-flows/error-handling\n      // for more info on error handling\n      console.error('Error:', JSON.stringify(err, null, 2))\n      setSuccess(false)\n    }\n  }\n\n  return (\n    <>\n      <p>Passkeys:</p>\n      <ul>\n        {passkeys?.map((pk: any) => {\n          return (\n            <li key={pk.id}>\n              Name: {pk.name} | ID: {pk.id}\n            </li>\n          )\n        })}\n      </ul>\n      <input ref={passkeyToDeleteId} type=\"text\" placeholder=\"Enter the passkey ID\" />\n      <button onClick={deletePasskey}>Delete passkey</button>\n      <p>Passkey deleted: {success ? 'Yes' : 'No'}</p>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Todo Form Component\nDESCRIPTION: React component for todo input form with toggle all button. Handles form submission and includes styling using Tailwind CSS classes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_9\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction TodoForm({ todos }: { todos: Todo[] }) {\n  return (\n    <div className=\"flex items-center h-10 border-b border-gray-300\">\n      <button\n        className=\"h-full px-2 border-r border-gray-300 flex items-center justify-center\"\n        onClick={() => toggleAll(todos)}\n      >\n        <div className=\"w-5 h-5\">\n          <ChevronDownIcon />\n        </div>\n      </button>\n      <form\n        className=\"flex-1 h-full\"\n        onSubmit={(e) => {\n          e.preventDefault()\n          const input = e.currentTarget.input as HTMLInputElement\n          addTodo(input.value)\n          input.value = ''\n        }}\n      >\n        <input\n          className=\"w-full h-full px-2 outline-none bg-transparent\"\n          autoFocus\n          placeholder=\"What needs to be done?\"\n          type=\"text\"\n          name=\"input\"\n        />\n      </form>\n    </div>\n  )\n```\n\n----------------------------------------\n\nTITLE: Configuring Next.js App Component with ClerkProvider\nDESCRIPTION: Setup of ClerkProvider in Next.js _app.tsx file for satellite application. Includes configuration for authentication routes and domain handling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_6\n\nLANGUAGE: jsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\nimport Head from 'next/head'\n\nexport default function App({ Component, pageProps }) {\n  const primarySignInUrl = 'https://primary.dev/sign-in'\n  const primarySignUpUrl = 'https://primary.dev/sign-up'\n  // Or, in development:\n  // const primarySignInUrl = 'http:localhost:3000/sign-in';\n  // const primarySignUpUrl = 'http:localhost:3000/sign-up';\n\n  return (\n    <ClerkProvider\n      isSatellite\n      domain={(url) => url.host}\n      signInUrl={primarySignInUrl}\n      signUpUrl={primarySignUpUrl}\n      {...pageProps}\n    >\n      <Head>\n        <title>Satellite Next.js app</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      </Head>\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating the Sign-Up Page Component using Clerk in TypeScript\nDESCRIPTION: This TypeScript React component (`SignUpPage`) defines the dedicated sign-up page. It imports the `SignUp` component from `@clerk/react-router` and renders it within a simple `div` structure. This component leverages Clerk's prebuilt UI for handling user sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n```tsx {{ filename: 'app/routes/sign-up.tsx' }}\nimport { SignUp } from '@clerk/react-router'\n\nexport default function SignUpPage() {\n  return (\n    <div>\n      <h1>Sign up route</h1>\n      <SignUp />\n    </div>\n  )\n}\n```\n```\n\n----------------------------------------\n\nTITLE: Protecting Content Using the `permission` Prop with Clerk `<Protect>`\nDESCRIPTION: Demonstrates using the `permission` prop of the `<Protect>` component to render child elements only if the current user has the specified permission (e.g., `org:invoices:create`). Fallback content is shown otherwise. Examples provided for Next.js, React, Astro, Expo, and Vue.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/protect.mdx#_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/nextjs'\n\nexport default function ProtectPage() {\n  return (\n    <Protect\n      permission=\"org:invoices:create\"\n      fallback={<p>You do not have the permissions to create an invoice.</p>}\n    >\n      {children}\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/clerk-react'\n\nexport default function ProtectPage() {\n  return (\n    <Protect\n      permission=\"org:invoices:create\"\n      fallback={<p>You do not have the permissions to create an invoice.</p>}\n    >\n      {children}\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { Protect } from '@clerk/astro/components'\n---\n\n<Protect permission=\"org:invoices:create\">\n  <p slot=\"fallback\">You do not have the permissions to create an invoice.</p>\n  <slot />\n</Protect>\n```\n\nLANGUAGE: jsx\nCODE:\n```\nimport { Protect } from '@clerk/clerk-expo'\nimport { Text } from 'react-native'\n\nexport default function Screen() {\n  return (\n    <Protect\n      permission=\"org:invoices:create\"\n      fallback={<Text>You do not have the permissions to create an invoice.</Text>}\n    >\n      <Text>Users with permission org:invoices:create can see this.</Text>\n    </Protect>\n  )\n}\n```\n\nLANGUAGE: vue\nCODE:\n```\n<script setup lang=\"ts\">\nimport { Protect } from '@clerk/vue'\n</script>\n\n<template>\n  <Protect permission=\"org:invoices:create\">\n    <template #fallback>\n      <p>You do not have the permissions to create an invoice.</p>\n    </template>\n    <slot />\n  </Protect>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: IdentifierNotAllowedAccess (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when a user attempts to sign in or sign up with an identifier (like email) that is explicitly disallowed access to the application, often due to allowlist/blocklist settings. It includes a short message, a long message, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_18\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Access not allowed.\",\n  \"longMessage\": \"You are not allowed to access this application.\",\n  \"code\": \"identifier_not_allowed_access_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining EmailLinkFactor Interface for Email Link Authentication\nDESCRIPTION: Specifies the type definition for email link verification factor with properties for strategy, email address ID, safe identifier, and primary status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\ntype EmailLinkFactor = {\n  strategy: EmailLinkStrategy\n  emailAddressId: string\n  safeIdentifier: string\n  primary?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Metamask Authentication Integration - TypeScript\nDESCRIPTION: Function signature for authenticating users with Metamask, including redirect and navigation parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithMetamask({\n  redirectUrl,\n  signUpContinueUrl,\n  customNavigate,\n}?: AuthenticateWithMetamaskParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Handlebars Variable Interpolation\nDESCRIPTION: Examples of using Handlebars templating syntax to interpolate variables in email and SMS templates. Shows both basic variable usage and unescaped variable usage for special characters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/email-sms-templates.mdx#2025-04-23_snippet_0\n\nLANGUAGE: handlebars\nCODE:\n```\n{{app.name}}\n```\n\nLANGUAGE: handlebars\nCODE:\n```\n{{{app.name}}}\n```\n\nLANGUAGE: handlebars\nCODE:\n```\n{{user.metadata.foo.bar}}\n```\n\n----------------------------------------\n\nTITLE: Tutorial Hero Component Declaration\nDESCRIPTION: React component declaration for the tutorial prerequisites section, listing required Clerk application and X/Twitter developer account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/x-twitter.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\n<TutorialHero\\n  beforeYouStart={[\\n    {\\n      title: 'A Clerk application is required',\\n      link: 'https://clerk.com/docs/quickstarts/setup-clerk',\\n      icon: 'clerk',\\n    },\\n    {\\n      title: 'An X/Twitter developer account is required',\\n      link: 'https://developer.twitter.com/en/docs/apps/overview',\\n      icon: 'x',\\n    },\\n  ]}\\n/>\n```\n\n----------------------------------------\n\nTITLE: Configuring package.json for CRX ID and Permissions (JSON)\nDESCRIPTION: Updates the `manifest` object within the project's `package.json` file. It sets the `key` property using the `$CRX_PUBLIC_KEY` environment variable for a consistent CRX ID. It also defines necessary `permissions` (`cookies`, `storage`) and `host_permissions` (including `localhost` and the Clerk Frontend API URL) required for the extension to function correctly with Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  // The rest of your package.json file\n  \"manifest\": {\n    \"key\": \"$CRX_PUBLIC_KEY\",\n    \"permissions\": [\"cookies\", \"storage\"],\n    \"host_permissions\": [\"http://localhost/*\", \"$CLERK_FRONTEND_API/*\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Clerk Logo SVG with Dynamic Color Fill\nDESCRIPTION: An SVG implementation of the Clerk logo that uses CSS variables to change colors based on light/dark mode. The path uses inline styling with a fill that switches between black (light mode) and white (dark mode).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/fastify.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 32 32\">\n  <path\n    style={{ fill: 'var(--light, black) var(--dark, white)' }}\n    d=\"M30.056 8.841 31 6.298l-.04-.157L21.617 8.7c.994-1.498.653-2.7.653-2.7s-2.983 1.98-5.24 1.929c-2.256-.052-2.982-.678-6.442.469s-4.438 4.667-5.44 5.421C4.146 14.575 1 17.04 1 17.04l.007.044 2.836-.94s-.777.763-2.43 3.079l-.077-.074.002.016s1.329 2.111 2.633 1.72c.152-.049.3-.113.441-.19.525.303 1.21.602 1.967.685a12.63 12.63 0 0 1-.94-1.323l.354-.24-.055.042 1.08.412-.12-1.057.01-.007 1.06.404-.132-.96c.135-.073.27-.142.403-.207l1.109-4.35 4.575-3.245-.364.951c-.928 2.373-2.67 2.931-2.67 2.931l-.727.287c-.54.665-.768.828-.954 3.059.436-.114.852-.14 1.23-.037 1.955.548 2.632 2.998 2.106 3.675-.132.17-.446.46-.842.8h-.793l-.01.668-.082.066H9.81l-.01.652c-.071.057-.142.112-.213.166-.759.017-1.719-.67-1.719-.67 0 .624.501 1.589.501 1.589l.09-.045-.077.058s2.03 1.408 3.309.886c1.138-.461 4.08-2.872 6.621-4.014L26 19.764l1.014-2.73-5.859 1.604v-2.453l6.873-1.883 1.014-2.732-7.887 2.161v-2.452l8.9-2.438ZM16.103 14.04l1.824-.5.024.096-.57 1.533-1.89.518.612-1.647Zm.63 3.281-1.891.519.61-1.647 1.824-.5.024.096-.567 1.532Zm2.463-.55-1.89.518.61-1.647 1.825-.5.024.095-.569 1.533Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Create Email Address Function Signature\nDESCRIPTION: TypeScript function signature for creating an email address, showing the return type and required parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/email-addresses/create-email-address.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailAddress(params: CreateEmailAddressParams): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkExpressRequireAuth Parameter in Clerk SDK (JavaScript)\nDESCRIPTION: Demonstrates the change from using 'apiKey' to 'secretKey' as a parameter in the createClerkExpressRequireAuth function from the Clerk SDK for Node.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\n\ncreateClerkExpressRequireAuth({ apiKey: '...' })\ncreateClerkExpressRequireAuth({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: ReverificationConfig Type Definition in TypeScript\nDESCRIPTION: Defines the TypeScript type for reverification configuration options, including strict MFA, strict, moderate and lax verification levels.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype ReverificationConfig =\n  | SessionVerificationTypes\n  | {\n      level: SessionVerificationLevel\n      afterMinutes: SessionVerificationAfterMinutes\n    }\n\ntype SessionVerificationTypes = 'strict_mfa' | 'strict' | 'moderate' | 'lax'\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Environment Variables\nDESCRIPTION: Setting up the Clerk Publishable Key in the environment configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/vue.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n\n----------------------------------------\n\nTITLE: Opting Out via Environment Variable - Expo/Tanstack React Start - env\nDESCRIPTION: Set the VITE_CLERK_TELEMETRY_DISABLED environment variable in your .env file to disable telemetry collection for Expo and Tanstack React Start projects using Clerk. Inputs: none. Outputs: disables Clerk telemetry events. Make sure your environment loading mechanism supports VITE_ prefix variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_6\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_TELEMETRY_DISABLED=1\n```\n\n----------------------------------------\n\nTITLE: Initializing ClerkProvider in Popup (TSX)\nDESCRIPTION: Wraps the main application component (`IndexPopup`) with the `<ClerkProvider>` from `@clerk/chrome-extension`. This initializes Clerk within the React application, making authentication context available. It retrieves the publishable key from environment variables and includes an error check to ensure the key is set.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/chrome-extension'\n\nimport { CountButton } from '~features/count-button'\n\nimport '~style.css'\n\nconst PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY\n\nif (!PUBLISHABLE_KEY) {\n  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')\n}\n\nfunction IndexPopup() {\n  return (\n    <ClerkProvider publishableKey={PUBLISHABLE_KEY}>\n      <div className=\"plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-16 plasmo-w-40\">\n        <CountButton />\n      </div>\n    </ClerkProvider>\n  )\n}\n\nexport default IndexPopup\n```\n\n----------------------------------------\n\nTITLE: Configuring CAPTCHA Appearance in React with Clerk\nDESCRIPTION: Example of setting up the CAPTCHA appearance in a React application using Clerk. This snippet demonstrates how to customize the theme, size, and language of the CAPTCHA widget within the ClerkProvider component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/captcha.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport './App.css'\nimport { ClerkProvider } from '@clerk/clerk-react'\n\nif (!process.env.REACT_APP_CLERK_PUBLISHABLE_KEY) {\n  throw new Error('Missing Publishable Key')\n}\nconst clerkPubKey = process.env.REACT_APP_CLERK_PUBLISHABLE_KEY\n\nfunction App() {\n  return (\n    <ClerkProvider\n      appearance={{\n        captcha: {\n          theme: 'dark',\n          size: 'flexible',\n          language: 'es-ES',\n        },\n      }}\n      publishableKey={clerkPubKey}\n    >\n      {/* ... */}\n    </ClerkProvider>\n  )\n}\n\nexport default App\n```\n\n----------------------------------------\n\nTITLE: Updating `createIsomorphicRequest` Import Path to Internal in JavaScript (2)\nDESCRIPTION: Shows the import path update for `createIsomorphicRequest` to `@clerk/backend/internal`. This function is specifically noted as intended for those building custom Clerk integrations for frameworks and reflects its internal status, placing it outside semver bounds. Use cautiously.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\n    import { createIsomorphicRequest } from '@clerk/backend'\n    import { createIsomorphicRequest } from '@clerk/backend/internal'\n```\n\n----------------------------------------\n\nTITLE: Defining AllowlistIdentifierNotFound Error (JSON)\nDESCRIPTION: This JSON object defines the structure of the `AllowlistIdentifierNotFound` error in Clerk. It is returned when an attempt is made to access or manipulate an allowlist identifier that does not exist, specifying the ID that was not found. It includes short/long messages and a specific error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/allowlist-identifiers.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Identifier not found\",\n  \"longMessage\": \"No identifier was found with id <identifierID>\",\n  \"code\": \"resource_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering RedwoodJS Logo SVG\nDESCRIPTION: SVG code for rendering the RedwoodJS logo. This vector graphic uses a single path to create the RedwoodJS emblem.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/community-sdks.mdx#2025-04-23_snippet_2\n\nLANGUAGE: SVG\nCODE:\n```\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"67\" height=\"73\" viewBox=\"0 0 67 73\" fill=\"none\"><path d=\"M19.8009 12.9072L32.545 21.6062C32.8326 21.7978 33.1686 21.9027 33.5134 21.9086C33.8587 21.906 34.1956 21.8009 34.4818 21.6062L47.2355 12.878C47.731 12.5232 48.0043 11.9317 47.9547 11.3215C47.9049 10.7111 47.5397 10.1724 46.9934 9.90358L34.2494 3.59389C33.7659 3.35933 33.2027 3.35933 32.7193 3.59389L20.014 9.90358C19.4579 10.1738 19.0878 10.723 19.0438 11.3433C18.9998 11.9636 19.2886 12.5601 19.8009 12.9072ZM37.8421 24.3368C37.8431 24.9137 38.1255 25.4533 38.5974 25.7801L48.814 32.7628C49.468 33.2137 50.3431 33.1573 50.9347 32.6263L59.505 24.961C59.887 24.6197 60.099 24.1256 60.0841 23.6116C60.0692 23.0976 59.8286 22.6168 59.4275 22.2987L51.2446 15.7549C50.6498 15.2824 49.8201 15.2509 49.1916 15.6769L38.5974 22.9228C38.1338 23.2438 37.8525 23.7703 37.8421 24.3368ZM12.4315 33.8355C12.8444 34.2064 13.0567 34.7535 13.0029 35.3081C12.9492 35.8659 12.6271 36.3616 12.141 36.6344L6.04013 40.2915C5.42168 40.6611 4.64086 40.6078 4.07758 40.1575C3.51437 39.7072 3.28569 38.9534 3.50295 38.263L5.75928 31.1634C5.93628 30.6009 6.38498 30.1674 6.95038 30.0126C7.51544 29.8482 8.12473 29.9923 8.55797 30.393L12.4315 33.8355ZM45.5215 34.5766L34.4915 27.0285C33.9053 26.6341 33.1409 26.6341 32.5547 27.0285L21.5247 34.5766C21.086 34.8803 20.8081 35.3683 20.7694 35.903C20.7408 36.4414 20.9542 36.9642 21.3504 37.3268L32.3707 47.1863C32.6885 47.4697 33.0985 47.6259 33.523 47.6251C33.9475 47.6251 34.3572 47.469 34.6754 47.1863L45.6957 37.3268C46.0931 36.9657 46.3039 36.4408 46.2671 35.903C46.2363 35.3683 45.9609 34.8784 45.5215 34.5766ZM16.1017 32.6263L7.54114 24.961C7.15596 24.6111 6.94341 24.1081 6.96009 23.586C6.96938 23.0713 7.20758 22.5881 7.60889 22.2694L15.7918 15.6866C16.3908 15.2155 17.2222 15.184 17.8545 15.6086L28.439 22.8545C28.9302 23.1766 29.2265 23.727 29.2265 24.3174C29.2265 24.9077 28.9302 25.458 28.439 25.7801L18.2322 32.7628C17.5741 33.2117 16.6979 33.1556 16.1017 32.6263ZM60.057 43.6365L51.3414 38.419C50.6942 38.029 49.8703 38.108 49.3078 38.6141L38.6555 48.1225C38.2062 48.5238 37.9952 49.1307 38.0978 49.7266C38.2003 50.3226 38.6018 50.8225 39.1591 51.0481L53.9367 57.036C54.1394 57.1202 54.3567 57.1633 54.5759 57.1628C55.2618 57.165 55.8843 56.7597 56.1641 56.1291L60.7446 45.8697C61.1174 45.0579 60.8205 44.0935 60.057 43.6365ZM61.2675 31.1634L63.5238 38.263H63.5045C63.6713 38.794 63.5765 39.3734 63.2493 39.8225C62.922 40.2715 62.4016 40.5363 61.8485 40.5353C61.5382 40.5363 61.2335 40.452 60.9673 40.2915L54.8567 36.6344C54.3806 36.3558 54.0696 35.8607 54.0239 35.3081C53.9668 34.7531 54.1796 34.2045 54.5953 33.8355L58.4688 30.3832C58.9064 29.991 59.5111 29.8479 60.0763 30.0029C60.6414 30.1643 61.0886 30.6 61.2675 31.1634ZM28.9426 49.7219C29.0467 49.1284 28.8378 48.523 28.3906 48.1225L17.7383 38.6141C17.1758 38.108 16.3519 38.029 15.7047 38.419L6.98914 43.6365C6.2345 44.0956 5.93594 45.0477 6.29193 45.86L10.8821 56.1193C11.2624 56.9747 12.2456 57.3751 13.1094 57.0263L27.8773 51.0384C28.4347 50.8148 28.8377 50.3168 28.9426 49.7219ZM34.1719 52.6475L46.025 57.4456C46.6045 57.6937 47.005 58.2388 47.0709 58.8694C47.1459 59.508 46.8623 60.1356 46.3349 60.498L34.4721 68.739C34.1878 68.9386 33.8503 69.0473 33.5037 69.0507C33.1574 69.0453 32.8204 68.9366 32.5353 68.739L20.6822 60.498C20.1529 60.1365 19.8658 59.5096 19.9365 58.8694C20.0157 58.2321 20.4305 57.6877 21.0212 57.4456L32.8742 52.6475C33.2911 52.4813 33.7551 52.4813 34.1719 52.6475Z\" fill=\"#BF4722\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Defining DuplicateAllowlistIdentifier Error (JSON)\nDESCRIPTION: This JSON object defines the structure of the `DuplicateAllowlistIdentifier` error in Clerk. It is returned when attempting to create an allowlist identifier that already exists, indicating the specific identifier causing the conflict. It includes short/long messages and a specific error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/allowlist-identifiers.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"duplicate allowlist identifier\",\n  \"longMessage\": \"the identifier <identifier> already exists\",\n  \"code\": \"duplicate_record_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation for Clerk Astro SDK\nDESCRIPTION: Comprehensive documentation outlining the available client-side stores and server-side helpers for integrating Clerk authentication in Astro applications. Includes references to authentication stores, middleware, and locals object usage.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Clerk Astro SDK\ndescription: The Clerk Astro SDK gives you access to prebuilt components, React hooks, and helpers to make user authentication easier.\n---\n\nThe Clerk Astro SDK gives you access to prebuilt components, React hooks, and helpers to make user authentication easier. Refer to the [quickstart guide](/docs/quickstarts/astro) to get started.\n\n## Client-side helpers\n\nThe Astro SDK provides [stores](https://github.com/nanostores/nanostores) that give you access to the [`Clerk`](/docs/references/javascript/clerk) object and helper methods for authentication flows.\n\n- [`$authStore`](/docs/references/astro/auth-store)\n- [`$clerkStore`](/docs/references/astro/clerk-store)\n- [`$userStore`](/docs/references/astro/user-store)\n- [`$signInStore`](/docs/references/astro/sign-in-store)\n- [`$signUpStore`](/docs/references/astro/sign-up-store)\n- [`$sessionStore`](/docs/references/astro/session-store)\n- [`$sessionListStore`](/docs/references/astro/session-list-store)\n- [`$organizationStore`](/docs/references/astro/organization-store)\n\n## Server-side helpers\n\nThe following references show how to integrate Clerk features into your Astro app on the server-side.\n\n### Locals\n\nThe Astro SDK provides access to Clerk's authentication data through Astro's [`locals`](https://docs.astro.build/en/guides/middleware/#storing-data-in-contextlocals) object. The following references show how to access authentication data in server-side code:\n\n- [`Auth`](/docs/references/astro/locals#locals-auth)\n- [`CurrentUser`](/docs/references/astro/locals#locals-current-user)\n\n### `clerkMiddleware()`\n\nThe `clerkMiddleware()` helper integrates Clerk authentication and authorization into your Astro application through middleware. You can learn more [here](/docs/references/astro/clerk-middleware).\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of getSamlConnectionList in TypeScript\nDESCRIPTION: Basic example of using the getSamlConnectionList function to retrieve SAML connections. This uses the default parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.samlConnections.getSamlConnectionList()\n```\n\n----------------------------------------\n\nTITLE: Configuring authorizedParties with clerkMiddleware - Clerk (TypeScript)\nDESCRIPTION: This TypeScript snippet demonstrates how to configure the 'authorizedParties' option in Clerk's clerkMiddleware to explicitly allow only specified origins (such as 'https://example.com') to authorize requests. This setting is essential for preventing subdomain cookie leaking and CSRF attacks. The code requires the Clerk library and should be placed where middleware is configured for incoming requests, with 'authorizedParties' receiving an array of allowed domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nclerkMiddleware({\n  authorizedParties: ['https://example.com'],\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Organizations.getOrganizationInvitationList return type in JavaScript\nDESCRIPTION: This snippet demonstrates the change in return type for Organizations.getOrganizationInvitationList from an array of items to an object with 'data' and 'totalCount' properties, requiring updates to how you access the data in your code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Running TanStack React Start Development Server (pnpm)\nDESCRIPTION: This command uses pnpm, a fast, disk space-efficient package manager, to start the development server for the TanStack React Start application. The `pnpm dev` command runs the 'dev' script specified in the `package.json` file, launching the application locally for development.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dev\n```\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenAlreadyUsed Error\nDESCRIPTION: This JSON object defines the error returned when an actor token, which is designed for single use, is attempted to be used more than once. It contains short and long messages explaining the single-use constraint and the error code `actor_token_already_used_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"actor token has already been used\",\n  \"longMessage\": \"This actor token has already been used. Each token can only be used once.\",\n  \"code\": \"actor_token_already_used_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Remix SDK\nDESCRIPTION: Commands to install the Clerk Remix SDK using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/remix.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/remix\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Defining getOrganizationInvitationList Function in TypeScript\nDESCRIPTION: Function signature for getOrganizationInvitationList, which retrieves a list of organization invitations. It takes GetOrganizationInvitationListParams as input and returns a Promise resolving to a PaginatedResourceResponse containing an array of OrganizationInvitation objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getOrganizationInvitationList(\n  params: GetOrganizationInvitationListParams,\n): Promise<PaginatedResourceResponse<OrganizationInvitation[]>>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Expo SDK (Bash)\nDESCRIPTION: Installs the `@clerk/clerk-expo` package using various package managers (npm, yarn, pnpm, bun). This SDK provides necessary components, hooks, and helpers for integrating Clerk authentication into an Expo application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/expo.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/clerk-expo\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/clerk-expo\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/clerk-expo\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/clerk-expo\n```\n\n----------------------------------------\n\nTITLE: Creating Clerk Client for Chrome Extension Content Scripts\nDESCRIPTION: The createClerkClient() helper initializes a new Clerk instance on demand and refreshes the session token for a valid, signed-in user. It's recommended for Chrome Extensions that need to interact with Clerk in a content script or background service worker.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n```javascript\ncreateClerkClient()\n```\n```\n\n----------------------------------------\n\nTITLE: Server-side Authentication in API Route\nDESCRIPTION: Demonstrates how to implement authentication checks and access user data in an Astro API route handler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/read-session-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport async function GET({ locals }) {\n  if (!locals.auth().userId) {\n    return new Response('Unauthorized', { status: 401 })\n  }\n\n  const currentUser = await locals.currentUser()\n\n  return new Response(JSON.stringify(currentUser))\n}\n```\n\n----------------------------------------\n\nTITLE: Python Logo SVG Implementation with Gradient Definitions\nDESCRIPTION: Complete SVG markup for the Python programming language logo. The implementation includes two path elements for the blue and yellow parts of the snake and defines two linear gradients for the color transitions. The SVG viewport is set to 112x114 units.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/python.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 112 114\" height=\"114\" fill=\"none\">\n  <path\n    fill=\"url(#python-logo-gradient-1)\"\n    d=\"M55.333 0c-4.618.022-9.029.416-12.91 1.103-11.43 2.02-13.507 6.247-13.507 14.043V25.44h27.015v3.432H18.778c-7.851 0-14.726 4.72-16.876 13.697-2.48 10.29-2.59 16.71 0 27.455 1.92 7.998 6.506 13.696 14.357 13.696h9.288V71.38c0-8.917 7.715-16.782 16.877-16.782h26.983c7.511 0 13.508-6.184 13.508-13.728V15.146c0-7.322-6.177-12.821-13.508-14.043C64.767.33 59.951-.021 55.333 0Zm-14.61 8.282c2.791 0 5.07 2.316 5.07 5.163 0 2.838-2.279 5.133-5.07 5.133-2.8 0-5.069-2.295-5.069-5.133 0-2.847 2.27-5.163 5.07-5.163Z\"\n  />\n\n  <path\n    fill=\"url(#python-logo-gradient-2)\"\n    d=\"M86.284 28.873V40.87c0 9.3-7.885 17.128-16.876 17.128H42.424c-7.39 0-13.507 6.326-13.507 13.728v25.723c0 7.322 6.366 11.628 13.507 13.728 8.552 2.515 16.752 2.969 26.984 0 6.8-1.969 13.507-5.932 13.507-13.728V87.154H55.932v-3.432h40.49c7.852 0 10.777-5.477 13.508-13.697 2.82-8.462 2.7-16.6 0-27.455-1.941-7.816-5.646-13.697-13.508-13.697H86.284ZM71.108 94.018c2.8 0 5.07 2.294 5.07 5.132 0 2.847-2.27 5.163-5.07 5.163-2.79 0-5.07-2.316-5.07-5.163 0-2.838 2.28-5.133 5.07-5.133Z\"\n  />\n\n  <defs>\n    <linearGradient\n      id=\"python-logo-gradient-1\"\n      x1=\"0\"\n      x2=\"62.293\"\n      y1=\"0\"\n      y2=\"53.082\"\n      gradientUnits=\"userSpaceOnUse\"\n    >\n      <stop stopColor=\"#5A9FD4\" />\n\n      <stop offset=\"1\" stopColor=\"#306998\" />\n    </linearGradient>\n\n    <linearGradient\n      id=\"python-logo-gradient-2\"\n      x1=\"70.459\"\n      x2=\"48.11\"\n      y1=\"98.284\"\n      y2=\"66.967\"\n      gradientUnits=\"userSpaceOnUse\"\n    >\n      <stop stopColor=\"#FFD43B\" />\n\n      <stop offset=\"1\" stopColor=\"#FFE873\" />\n    </linearGradient>\n  </defs>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Example of Coinbase Wallet Authentication in Clerk\nDESCRIPTION: Example of using the authenticateWithCoinbaseWallet method to initiate authentication via a Coinbase Wallet. This method prompts the user to connect their wallet and verify ownership.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst signIn = await clerk.signIn.authenticateWithCoinbaseWallet()\n```\n\n----------------------------------------\n\nTITLE: Auth Object With Valid Factor Age (Version 2)\nDESCRIPTION: Example of Clerk's version 2 Auth object structure with valid factor age. The 'fva' claim with value [0,0] indicates that both the first and second factors have been verified within the past minute.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_12\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  azp: 'http://localhost:3000',\n  email: 'email@example.com',\n  exp: 1744735488,\n  fva: [ 0,0 ],\n  iat: 1744735428,\n  iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n  jti: 'aee4d4a5071bdd66e21b',\n  nbf: 1744735418,\n  role: 'authenticated',\n  sid: 'sess_123',\n  sub: 'user_123',\n  v: 2\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Expressions in JWT Templates\nDESCRIPTION: Example showing how to use conditional expressions with fallback values in JWT templates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/jwt-templates.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"has_verified_contact_info\": \"{{user.email_verified || user.phone_number_verified}}\",\n  \"full_name\": \"{{user.full_name || 'Awesome User'}}\",\n  \"age\": \"{{user.public_metadata.age || user.unsafe_metadata.age || 30 }}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidAuthorizationHeaderFormat (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when the Authorization header in a request does not follow the expected 'Bearer <YOUR_API_KEY>' format. It includes a short message, a long message specifying the correct format, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid Authorization header format\",\n  \"longMessage\": \"Invalid Authorization header format. Must be 'Bearer <YOUR_API_KEY>'\",\n  \"code\": \"authorization_header_format_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining User Profile URL Retrieval Function (TypeScript)\nDESCRIPTION: Provides the TypeScript signature for the `buildUserProfileUrl` method. This function is used to retrieve the URL where the Clerk `<UserProfile />` component is mounted or where a custom user profile page is rendered within the application. It takes no parameters and returns the profile page URL as a string.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nfunction buildUserProfileUrl(): string\n```\n\n----------------------------------------\n\nTITLE: Defining the `setLogo` Function Signature in TypeScript\nDESCRIPTION: This TypeScript signature defines the `setLogo` function for an organization. It accepts a `SetOrganizationLogoParams` object containing the image `file` (as File, Blob, or null to delete) and returns a Promise that resolves to the updated `Organization` object. The file size cannot exceed 10MB.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_15\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\nfunction setLogo(params: SetOrganizationLogoParams): Promise<Organization>\n```\n```\n\n----------------------------------------\n\nTITLE: Removing User Password - Clerk JavaScript\nDESCRIPTION: Shows how to call removePassword in JavaScript to eliminate the user's password using the Clerk user API. Requires providing the current password in the parameter object, and returns the updated user.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_27\n\nLANGUAGE: JavaScript\nCODE:\n```\nawait clerk.user.removePassword({ currentPassword: 'current-password' })\n```\n\n----------------------------------------\n\nTITLE: User Password Update Implementation\nDESCRIPTION: Example showing the old and new way to update a user's password using Clerk's User methods.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nuser.update({ password: 'foo' })\n\nuser.updatePassword({\n  currentPassword: 'bar',\n  newPassword: 'foo',\n  signOutOfOtherSessions: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating RedirectUrls.getRedirectUrlList Return Signature in Clerk API\nDESCRIPTION: The return signature of RedirectUrls.getRedirectUrlList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_29\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Configuring Host Permissions in package.json for Clerk Chrome Extension\nDESCRIPTION: This JSON snippet demonstrates how to configure the host_permissions array in the package.json file for a Chrome Extension using Clerk. It includes permissions for the production domain and Clerk's Frontend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/deploy-chrome-extension.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  // The rest of your package.json file\n  \"manifest\": {\n    \"key\": \"$CRX_PUBLIC_KEY\",\n    \"permissions\": [\"cookies\", \"storage\"],\n    \"host_permissions\": [\"https://<yourdomain>/*\", \"$CLERK_FRONTEND_API/*\"]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getRoles pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for Organization.getRoles where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Clerk `NotAuthorizedToDeleteSystemApplication` Error (JSON)\nDESCRIPTION: Represents the JSON error response returned when a user attempts to delete a system application but lacks the necessary permissions. The `longMessage` specifies the application ID (`applicationID`) that the user is unauthorized to delete.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Unauthorized request\",\n  \"longMessage\": \"You are not authorized to delete system application <applicationID>\",\n  \"code\": \"authorization_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidOriginHeader (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when the HTTP Origin header of an incoming request does not match or is not a subdomain of the requesting URL. It includes a short message, a long message explaining the validation rule, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid HTTP Origin header\",\n  \"longMessage\": \"The Request HTTP Origin header must be equal to or a subdomain of the requesting URL.\",\n  \"code\": \"origin_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk TanStack React Start SDK\nDESCRIPTION: Commands for installing the Clerk TanStack React Start SDK using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/tanstack-react-start\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/tanstack-react-start\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/tanstack-react-start\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/tanstack-react-start\n```\n\n----------------------------------------\n\nTITLE: Closing OrganizationProfile with JavaScript\nDESCRIPTION: Example of how to close the <OrganizationProfile /> component overlay using the Clerk JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_9\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-profile\"></div>\n`\n\nconst orgProfileDiv = document.getElementById('organization-profile')\n\nclerk.closeOrganizationProfile(orgProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Creating a Domain for an Organization in TypeScript\nDESCRIPTION: This snippet shows how to create a new domain for the currently active organization using the createDomain() method. It requires the Verified domains feature to be enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createDomain(domainName: string): Promise<OrganizationDomainResource>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.organization.createDomain('test-domain.com')\n```\n\n----------------------------------------\n\nTITLE: Implementing GoogleOneTap in Astro\nDESCRIPTION: Basic implementation of the GoogleOneTap component in an Astro application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/google-one-tap.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { GoogleOneTap } from '@clerk/astro/components'\n---\n\n<GoogleOneTap />\n```\n\n----------------------------------------\n\nTITLE: Upgrading Clerk Next.js SDK via CLI - Bash\nDESCRIPTION: These bash commands invoke the @clerk/upgrade tool using different package managers (npm, yarn, pnpm, bun) to walk the user through all upgrade steps. Ensure the respective package manager is installed in your environment. The command applies all needed changes to modernize the Clerk SDK usage without manual migration steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/nextjs/v6.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-session Support in Next.js App Router\nDESCRIPTION: A complete example showing how to implement multi-session support in Next.js App Router using a client-side MultisessionAppSupport component while keeping the root layout as a server component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/session-options.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport React from 'react'\nimport { ClerkProvider } from '@clerk/nextjs'\nimport { MultisessionAppSupport } from './components/MultisessionAppSupport'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <ClerkProvider afterMultiSessionSingleSignOutUrl=\"/\">\n        <MultisessionAppSupport>\n          <body>{children}</body>\n        </MultisessionAppSupport>\n      </ClerkProvider>\n    </html>\n  )\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport React from 'react'\nimport { useSession } from '@clerk/nextjs'\n\nexport default function MultisessionAppSupport({ children }: { children: React.ReactNode }) {\n  const { session } = useSession()\n\n  return <React.Fragment key={session ? session.id : 'no-users'}>{children}</React.Fragment>\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation for Slack OAuth Setup\nDESCRIPTION: Structured markdown content explaining how to set up Slack OAuth integration with Clerk, including steps for both development and production environments. Includes prerequisites and detailed configuration steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/slack.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Add Slack as a social connection\ndescription: Learn how to allow users to sign up and sign in to your Clerk app with their Slack account using OAuth.\n---\n\n<TutorialHero\n  beforeYouStart={[\n    {\n      title: \"A Clerk app is required.\",\n      link: \"/docs/quickstarts/setup-clerk\",\n      icon: \"clerk\",\n    },\n    {\n      title: \"A Slack account is required.\",\n      link: \"https://slack.com/get-started#/createnew\",\n      icon: \"user-circle\",\n    },\n  ]}\n/>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: UsernameExists (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when attempting to create or set a username that already exists for another user. It includes a short message, a long message stating the conflict, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_16\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already exists\",\n  \"longMessage\": \"This username already exists.\",\n  \"code\": \"username_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Stacking Clerk Themes - Nuxt - TypeScript\nDESCRIPTION: Configures Clerk in a Nuxt application by specifying the stacked appearance.baseTheme property in the clerk module options within nuxt.config.ts. Requires @clerk/nuxt and @clerk/themes. Integrates Clerk during Nuxt's configuration phase for site-wide authentication UI theming.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_14\n\nLANGUAGE: ts\nCODE:\n```\nimport { dark, neobrutalism } from '@clerk/themes'\n\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      baseTheme: [dark, neobrutalism],\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Role-based Authorization with auth.protect() in Next.js\nDESCRIPTION: This example uses auth.protect() for role-based authorization in a Next.js React Server Component. It checks if the user has either the 'org:admin' or 'org:billing_manager' role, throwing a 404 error if unauthorized.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/organizations/verify-user-permissions.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport default async function Page() {\n  const { userId } = await auth.protect(\n    (has) => has({ role: 'org:admin' }) || has({ role: 'org:billing_manager' }),\n  )\n\n  return <p>{userId} is authorized to access this page.</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring webpack in Next.js to support Clerk\nDESCRIPTION: Modifies the Next.js webpack configuration to ignore modules that are not used in older Next.js versions. This prevents import errors for Next.js 13+ features like navigation and headers APIs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/usage-with-older-versions.mdx#2025-04-23_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nconst webpack = require('webpack')\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  webpack(config) {\n    config.plugins.push(\n      new webpack.IgnorePlugin({\n        resourceRegExp: /^next\\/(navigation|headers|compat\\/router)$/,\n      }),\n    )\n    return config\n  },\n}\n\nmodule.exports = nextConfig\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using pnpm\nDESCRIPTION: This shell command utilizes the pnpm package manager's `dev` script to launch the application's development server. This allows developers to interact with and test the application, including the custom sign-up page, in a local environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dev\n```\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk SignInTokenAlreadyUsed Error - JSON\nDESCRIPTION: Outlines the JSON response object representing the 'SignInTokenAlreadyUsed' error, which is triggered when a token reuse is attempted. The structure follows Clerk's error response format with short and long messages alongside an error code. This serves as a template for applications and middleware handling token reuse validation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in-tokens.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"sign in token has already been used\\\",\\n  \\\"longMessage\\\": \\\"This sign in token has already been used. Each token can only be used once.\\\",\\n  \\\"code\\\": \\\"sign_in_token_already_used_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Template for Background Worker Demo\nDESCRIPTION: Basic HTML template that serves as the container for the React component demonstrating background worker functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/create-clerk-client.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n  <head>\n    <title>Clerk Background Worker Demo</title>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  </head>\n\n  <body></body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Create Email Link Flow Method Declaration\nDESCRIPTION: Method signature for setting up an email verification flow with email link, returning flow control functions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createEmailLinkFlow(): {\n  startEmailLinkFlow: (params: StartEmailLinkFlowParams) => Promise<EmailAddress>\n  cancelEmailLinkFlow: () => void\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Clerk Auth in tRPC Procedures\nDESCRIPTION: Demonstrates how to access the user's authentication data within a tRPC procedure. The example shows a public procedure that returns a personalized greeting based on the user's authentication status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_3\n\nLANGUAGE: ts\nCODE:\n```\nimport { router, publicProcedure } from '../trpc'\n\nexport const exampleRouter = router({\n  hello: publicProcedure.query(({ ctx }) => {\n    const { userId } = ctx.auth\n\n    if (!userId) {\n      return {\n        greeting: 'Hello! You are not signed in.',\n      }\n    }\n\n    return {\n      greeting: `Hello ${userId}!`,\n    }\n  }),\n})\n\nexport type exampleRouter = typeof exampleRouter\n```\n\n----------------------------------------\n\nTITLE: Implementing UserButton in Vue\nDESCRIPTION: This snippet illustrates how to use Clerk's UserButton component in a Vue application. It shows the implementation of a header component with conditional rendering for signed-in and signed-out states using Vue's template syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-button.mdx#2025-04-23_snippet_8\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignedIn, UserButton, SignInButton, SignedOut } from '@clerk/vue'\n</script>\n\n<template>\n  <header>\n    <SignedIn>\n      <UserButton />\n    </SignedIn>\n    <SignedOut>\n      <SignInButton />\n    </SignedOut>\n  </header>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Applying Theme to All SignIn Instances using Pages Router - Next.js - TypeScript/TSX\nDESCRIPTION: Configures the ClerkProvider to use the Dark theme by default and applies the Neobrutalism theme to all instances of the SignIn Clerk component in a Next.js Pages Router project. Uses @clerk/nextjs and @clerk/themes. The appearance prop is set with both global and component-specific theme overrides.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_16\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider, SignIn } from '@clerk/nextjs'\nimport { dark } from '@clerk/themes'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ClerkProvider\n      appearance={{\n        baseTheme: dark,\n        signIn: { baseTheme: neobrutalism },\n      }}\n    >\n      <Component {...pageProps} />\n    </ClerkProvider>\n  )\n}\n\nexport default MyApp\n```\n\n----------------------------------------\n\nTITLE: Running TanStack React Start Development Server (yarn)\nDESCRIPTION: This command uses Yarn, an alternative JavaScript package manager, to start the development server for the TanStack React Start application. The `yarn dev` command executes the 'dev' script specified in the `package.json`, initiating the local development environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dev\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getDomains pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for Organization.getDomains where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/fastify using pnpm (Bash)\nDESCRIPTION: This command uses the pnpm package manager to add or update the `@clerk/fastify` package to its latest version, ensuring the project uses Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/fastify\n```\n\n----------------------------------------\n\nTITLE: Programmatic Telemetry Control - Clerk SDK - JavaScript\nDESCRIPTION: Instantiate a Clerk instance and programmatically load it with telemetry collection disabled by passing { telemetry: false } to the load method. Requires Clerk SDK as a dependency. The publishableKey is needed to initialize the instance. Input: disables telemetry collection for this runtime instance. Output: Clerk SDK operates without sending telemetry events.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_4\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst clerk = new Clerk(publishableKey)\nc.load({ telemetry: false })\n```\n\n----------------------------------------\n\nTITLE: Clerk `InvalidPlanForResource` Error (JSON)\nDESCRIPTION: Represents the JSON error response returned when an attempt is made to assign an invalid subscription plan (`planID`) to a specific Clerk resource (`resourceType`, `resourceID`). This ensures only valid plans are associated with resources.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid plan\",\n  \"longMessage\": \"Plan <planID> can't be selected for <resourceType> <resourceID>\",\n  \"code\": \"invalid_plan\"\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Email Code Sign-In with Clerk in React/TSX\nDESCRIPTION: This asynchronous function demonstrates testing the email code sign-in flow using Clerk's `useSignIn` hook in a React/TSX environment. It utilizes a test email address (`john+clerk_test@example.com`) to create a sign-in attempt, prepares the email code verification factor, and then attempts the verification using the standard test code `424242`. The function logs 'success' if the sign-in attempt is completed successfully, otherwise 'error'. Requires Clerk's test mode to be enabled.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/testing/test-emails-and-phones.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst testSignInWithEmailCode = async () => {\n  const { signIn } = useSignIn()\n\n  const emailAddress = 'john+clerk_test@example.com'\n  const signInResp = await signIn.create({ identifier: emailAddress })\n  const { emailAddressId } = signInResp.supportedFirstFactors.find(\n    (ff) => ff.strategy === 'email_code' && ff.safeIdentifier === emailAddress,\n  )! as EmailCodeFactor\n\n  await signIn.prepareFirstFactor({\n    strategy: 'email_code',\n    emailAddressId: emailAddressId,\n  })\n\n  const attemptResponse = await signIn.attemptFirstFactor({\n    strategy: 'email_code',\n    code: '424242',\n  })\n\n  if (attemptResponse.status == 'complete') {\n    console.log('success')\n  } else {\n    console.log('error')\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Representing ClientNotFoundInRequest Error in JSON\nDESCRIPTION: This JSON object defines the structure of a 'ClientNotFoundInRequest' error in Clerk. This error signifies that an incoming request expected a client context but did not find one. The structure contains a concise 'shortMessage', an explanatory 'longMessage', and the specific error code 'client_not_found_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/clients.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"No client found\",\n  \"longMessage\": \"This request is expecting a client and did not find one\",\n  \"code\": \"client_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Second Factor - TypeScript Declaration\nDESCRIPTION: Method signature for marking a phone number as the default second factor for 2FA.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/phone-number.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nfunction makeDefaultSecondFactor(): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Updated return type for User.getOrganizationMembershipList\nDESCRIPTION: The return type has changed from an array of items to an object with data array and totalCount properties, requiring updated access patterns in client code for pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_22\n\nLANGUAGE: js\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Updating RedirectUrls.getRedirectUrlList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for RedirectUrls.getRedirectUrlList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_41\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: PhoneNumberExists (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when attempting to create or add a phone number that already exists for another user. It includes a short message, a long message stating the conflict, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_15\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already exists\",\n  \"longMessage\": \"This phone number already exists.\",\n  \"code\": \"phone_number_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Feature Requires PSU Error Object in JSON\nDESCRIPTION: Defines a JSON object which indicates that a feature is restricted to Clerk instances that have migrated to Progressive Sign Up. The object includes a detailed longMessage with a documentation link, as well as shortMessage and code fields. This standard error structure should be returned when APIs are accessed on incompatible instances, informing users of prerequisites and upgrade paths.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/features.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"not a Progressive Sign Up instance\\\",\\n  \\\"longMessage\\\": \\\"<feature> can only be used in instances that migrated to Progressive Sign Up (https://clerk.com/docs/upgrade-guides/progressive-sign-up)\\\",\\n  \\\"code\\\": \\\"feature_requires_psu_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of SignInButton in Astro\nDESCRIPTION: Illustrates how to use the SignInButton component in an Astro project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignInButton } from '@clerk/astro/components'\n---\n\n<SignInButton />\n```\n\n----------------------------------------\n\nTITLE: Initializing Sign-up Components in React with Clerk Elements\nDESCRIPTION: This snippet demonstrates the basic structure of a sign-up page using Clerk Elements. It imports all sign-up components under the SignUp namespace and sets up a root component with multiple steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-up.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as SignUp from '@clerk/elements/sign-up'\n\nexport default function SignUpPage() {\n  return (\n    <SignUp.Root>\n      <SignUp.Step name=\"start\" />\n      <SignUp.Step name=\"continue\" />\n      <SignUp.Step name=\"verifications\" />\n    </SignUp.Root>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing User Identity in Convex Queries\nDESCRIPTION: Example of retrieving authenticated user information in a Convex query function. This code uses ctx.auth.getUserIdentity() to get the parsed JWT information, returning null if the client isn't authenticated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/convex.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport type { UserIdentity } from 'convex/server'\nimport { query } from './_generated/server'\n\nexport default query(async (ctx) => {\n  const user = await ctx.auth.getUserIdentity()\n\n  if (user === null) {\n    return null\n  }\n\n  return user.tokenIdentifier\n})\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using bun - Bash\nDESCRIPTION: Installs or updates react and react-dom to the most recent versions via bun, aligning the project with Clerk's React 18+ mandate. This is suitable for environments managing dependencies with bun.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Updating Organizations.getOrganizationInvitationList Return Type in Clerk API\nDESCRIPTION: The return type of Organizations.getOrganizationInvitationList has changed from an array to an object with data and totalCount properties. This requires updating how you access the returned data in your code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Conditionally Rendering Content for a Single SDK using <If /> in MDX\nDESCRIPTION: Demonstrates using the `<If />` component in MDX to display content conditionally. The `sdk` prop is set to `\"nextjs\"`, meaning the enclosed text will only be rendered if the currently selected SDK in the documentation navigation is Next.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_17\n\nLANGUAGE: mdx\nCODE:\n```\n<If sdk=\"nextjs\">This content will only be rendered if the active SDK is Next.js</If>\n```\n\n----------------------------------------\n\nTITLE: Updating User List Retrieval in JavaScript\nDESCRIPTION: Demonstrates the change in the return structure of getUserList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_39\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Configuring clerkMiddleware TypeScript Interface\nDESCRIPTION: Type definition showing all available options for the clerkMiddleware() function configuration, including authentication settings, domain configuration, security options, and organization synchronization parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/clerk-middleware-options.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface ClerkMiddlewareOptions {\n  audience?: string | string[];\n  authorizedParties?: string[];\n  clockSkewInMs?: number;\n  domain?: string;\n  isSatellite?: boolean;\n  jwtKey: string;\n  organizationSyncOptions?: OrganizationSyncOptions;\n  proxyUrl?: string;\n  signInUrl: string;\n  signUpUrl: string;\n  publishableKey: string;\n  secretKey?: string;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Email Link Verification Handler Function (TypeScript)\nDESCRIPTION: Provides the TypeScript signature for the `handleEmailLinkVerification` method. This function processes the callback when a user returns to the application after clicking an email verification link. It parses specific query parameters (`__clerk_status`, `__clerk_created_session`) set by Clerk to determine the verification outcome and handles redirects based on the provided `params` (redirect URLs, callback for cross-device verification). An optional `customNavigate` function can override default navigation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_14\n\nLANGUAGE: typescript\nCODE:\n```\nfunction handleEmailLinkVerification(\n  params: handleEmailLinkVerificationParams,\n  customNavigate?: ((to: string) => Promise<unknown>) | undefined,\n): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Private Metadata via Clerk Backend REST API (cURL)\nDESCRIPTION: This cURL request retrieves a user's full metadata object using Clerk's REST API. Passes the Clerk secret key in the Authorization header and expects a JSON response with all user metadata. Only backend systems should use secret keys in API calls and parse the resulting metadata fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\ncurl -XGET -H 'Authorization: CLERK_SECRET_KEY' -H \"Content-type: application/json\" 'https://api.clerk.com/v1/users/{user_id}'\n```\n\n----------------------------------------\n\nTITLE: Updating Organization List Retrieval in JavaScript\nDESCRIPTION: Demonstrates the change in the return structure of getOrganizationList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getUserList Return Signature in Clerk API\nDESCRIPTION: The return signature of Users.getUserList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Updating `TokenVerificationError` Import Path in JavaScript\nDESCRIPTION: Shows the required import path change for `TokenVerificationError`. It has been relocated from the general `@clerk/backend` package to the more specific `@clerk/backend/errors` path as part of error handling refactoring.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\n    import { TokenVerificationError } from '@clerk/backend'\n    import { TokenVerificationError } from '@clerk/backend/errors'\n```\n\n----------------------------------------\n\nTITLE: Rendering TutorialHero Component in MDX\nDESCRIPTION: Demonstrates how to use the TutorialHero component at the beginning of a tutorial-type content page, including setting beforeYouStart and exampleRepo properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_12\n\nLANGUAGE: mdx\nCODE:\n```\n<TutorialHero\n  beforeYouStart={[\n    {\n      title: 'Set up a Clerk application',\n      link: '/docs/quickstarts/setup-clerk',\n      icon: 'clerk',\n    },\n    {\n      title: 'Create a Next.js application',\n      link: 'https://nextjs.org/docs/getting-started/installation',\n      icon: 'nextjs',\n    },\n  ]}\n  exampleRepo={[\n    {\n      title: 'Clerk + Next.js App Router Quickstart',\n      link: 'https://github.com/clerk/clerk-nextjs-app-quickstart',\n    },\n  ]}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating `SignJWTError` Import Path in JavaScript\nDESCRIPTION: Demonstrates moving the `SignJWTError` import from `@clerk/backend` to the dedicated `@clerk/backend/errors` path. This change groups error-related types together for better code organization within the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_11\n\nLANGUAGE: js\nCODE:\n```\n    import { SignJWTError } from '@clerk/backend'\n    import { SignJWTError } from '@clerk/backend/errors'\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using npm\nDESCRIPTION: This shell command uses the Node Package Manager (npm) script `dev` to start the application's development server. Executing this command allows developers to test the application locally, including accessing the newly created custom sign-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm run dev\n```\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Next.js\nDESCRIPTION: Examples of how to access JWT claims in Next.js using both server-side and client-side methods. This demonstrates the updated way to retrieve session claims after the removal of the 'orgs' claim.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Configuring iOS Associated Domains in Expo\nDESCRIPTION: Configuration for iOS app.json to enable passkey support by setting up associated domains and deployment target. Requires iOS 16+ and proper Frontend API URL configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/passkeys.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"expo\": {\n    \"plugins\": [\n      [\n        \"expo-build-properties\",\n        {\n          \"ios\": {\n            \"deploymentTarget\": \"16.0\"\n          }\n        }\n      ]\n    ],\n    \"ios\": {\n      \"associatedDomains\": [\n        \"applinks:<YOUR_FRONTEND_API_URL>\",\n        \"webcredentials:<YOUR_FRONTEND_API_URL>\"\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing SignIn State in Vue\nDESCRIPTION: Shows how to implement sign-in state checking using $signInStore in Vue. Uses the useStore composable from nanostores/vue to handle store state reactively.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/sign-in-store.mdx#2025-04-23_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { useStore } from '@nanostores/vue'\nimport { $signInStore } from '@clerk/astro/client'\n\nconst signIn = useStore($signInStore)\n</script>\n\n<template>\n  <div v-if=\"signIn === undefined\">\n    <!-- Add logic to handle loading state -->\n  </div>\n  <div v-else>\n    <div>The current sign in attempt status is {{ signIn.status }}.</div>\n  </div>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Defining DomainUpdateForbidden Error (JSON)\nDESCRIPTION: JSON representation of the 'DomainUpdateForbidden' error. This error occurs when an attempt is made to update a domain belonging to an instance that is not designated as a production instance. Domain updates are restricted to production instances only.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Domain update was forbidden\",\n  \"longMessage\": \"Domain can be only updated for production instances\",\n  \"code\": \"domain_update_forbidden_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using npm (Bash)\nDESCRIPTION: This command uses the Node Package Manager (npm) to execute the `dev` script defined in the project's `package.json` file, typically starting the development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm run dev\n```\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using Package Managers (Bash)\nDESCRIPTION: Installs the latest versions of `react` and `react-dom` using various package managers (npm, yarn, pnpm, bun). This is a prerequisite for upgrading Clerk SDKs to Core 2, which requires React 18 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm install react@latest react-dom@latest\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn add react@latest react-dom@latest\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm add react@latest react-dom@latest\n```\n```\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun add react@latest react-dom@latest\n```\n```\n\n----------------------------------------\n\nTITLE: Responsive Clerk Logo SVG Implementation\nDESCRIPTION: SVG vector graphic definition for the Clerk logo with dynamic fill colors that respond to light/dark theme settings via CSS variables. The logo consists of two paths that form the distinctive Clerk brand mark.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/remix.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" style={{ fill: 'var(--light, #121212) var(--dark, white)' }}>\n  <path\n    fillRule=\"evenodd\"\n    d=\"M27.267 24.297c.26 3.4.26 4.994.26 6.734h-7.744c0-.379.007-.726.013-1.077.021-1.093.043-2.233-.131-4.534-.23-3.37-1.659-4.118-4.285-4.118H3.2v-6.13h12.55c3.317 0 4.976-1.026 4.976-3.74 0-2.387-1.66-3.833-4.976-3.833H3.199V1.6h13.932c7.51 0 11.242 3.603 11.242 9.36 0 4.305-2.626 7.113-6.174 7.58 2.995.609 4.746 2.34 5.068 5.757Z\"\n    clipRule=\"evenodd\"\n  />\n\n  <path d=\"M3.2 31.031v-4.57h8.188c1.368 0 1.665 1.03 1.665 1.645v2.925H3.199Z\" />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updated Organization Membership List Response Format in Clerk Backend\nDESCRIPTION: Shows the change in response format for retrieving organization memberships. The response now includes both data and totalCount properties to support pagination, consistent with Backend API standards.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_44\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Updated return signature for Users.getOrganizationList\nDESCRIPTION: The return signature of Users.getOrganizationList has changed from directly returning data to returning an object with data and totalCount properties, aligning with Backend API responses for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_23\n\nLANGUAGE: js\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Configuring DMARC TXT Record for Email Authentication\nDESCRIPTION: Provides an example DNS TXT record for setting up DMARC (Domain-based Message Authentication, Reporting & Conformance). This specific configuration instructs receiving email servers to reject emails that fail SPF or DKIM checks (`p=reject`) for the domain `<.example.com>` and send aggregate (`rua`) and failure (`ruf`) reports to `you@example.com`. Replace `<.example.com>` and `you@example.com` with your actual domain and reporting email addresses. This record should be added to your domain's DNS settings.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/troubleshooting/email-deliverability.mdx#2025-04-23_snippet_0\n\nLANGUAGE: txt\nCODE:\n```\nTXT Record\n\nname:\n_dmarc<.example.com>\n\ncontent:\nv=DMARC1; p=reject; pct=100; rua=mailto:you@example.com; ruf=mailto:you@example.com;\n```\n\n----------------------------------------\n\nTITLE: Deleting Allowlist Identifier Function Signature\nDESCRIPTION: TypeScript function signature for deleting an allowlist identifier. Returns a Promise that resolves to an AllowlistIdentifier object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/delete-allowlist-identifier.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction deleteAllowlistIdentifier(allowlistIdentifierId: string): Promise<AllowlistIdentifier>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk in Remix Satellite Domain\nDESCRIPTION: Setup of Clerk authentication in a Remix satellite application using ClerkApp wrapper with satellite-specific configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader = (args) => {\n  return rootAuthLoader(\n    args,\n    ({ req }) => {\n      const { userId, sessionId, getToken } = req.auth\n      return json({\n        message: `Hello from the root loader :)`,\n        ENV: getBrowserEnvironment(),\n      })\n    },\n    {\n      loadUser: true,\n      signInUrl: 'https://primary.dev/sign-in',\n      signUpUrl: 'https://primary.dev/sign-up',\n      isSatellite: true,\n      domain: (url) => url.host,\n    } as const,\n  )\n}\n\nexport default ClerkApp(App, {\n  isSatellite: true,\n  domain: (url) => url.host,\n  signInUrl: 'https://primary.dev/sign-in',\n  signUpUrl: 'https://primary.dev/sign-up',\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: URLBasedSessionSyncingDisabled (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when a request attempts URL-based session syncing on an instance configured to use third-party cookies instead. It includes a short message, a long message explaining the configuration mismatch and linking to upgrade guides, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"URL-based session syncing is disabled for this instance\",\n  \"longMessage\": \"This is a development instance operating with legacy, third-party cookies. To enable URL-based session syncing refer to https://clerk.com/docs/upgrade-guides/url-based-session-syncing.\",\n  \"code\": \"url_based_session_syncing_disabled_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clients.getClientList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Clients.getClientList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_40\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationSuggestions pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for User.getOrganizationSuggestions where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Automating Localization Key Removal With Lodash - Clerk Components - JavaScript\nDESCRIPTION: This snippet demonstrates how to use Lodash's omit function to automatically remove obsolete localization keys from a localization object. By passing your existing localization object and the deletedKeys array, you obtain a new object that excludes all deprecated keys. Requires lodash-es to be installed and imported.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/component-redesign.mdx#2025-04-23_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\nimport { omit } from 'lodash-es'\n\nconst localization = omit(yourOldObject, deletedKeys)\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenSubjectNotFound Error\nDESCRIPTION: This JSON object describes the error returned when the user (subject) associated with the actor token no longer exists in the system. It advises requesting a new token and provides the error code `actor_token_subject_not_found_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"user not found\",\n  \"longMessage\": \"The user of the actor token no longer exists. Please request a new one.\",\n  \"code\": \"actor_token_subject_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Hasura JWT Secret with Custom Signing Key\nDESCRIPTION: YAML configuration for setting the Hasura GraphQL JWT secret using a custom HS256 signing key instead of the JWKS URL. Used when you provide your own signing key in Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/hasura.mdx#2025-04-23_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nHASURA_GRAPHQL_JWT_SECRET: '{\"type\": \"HS256\", \"key\": \"<YOUR_SIGNING_KEY>\" }'\n```\n\n----------------------------------------\n\nTITLE: Implementing Pre-rendered Page with Static SignedIn Component in Astro\nDESCRIPTION: Example showing how to configure a pre-rendered page with a static SignedIn control component using isStatic prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/hybrid-rendering.mdx#2025-04-23_snippet_0\n\nLANGUAGE: astro\nCODE:\n```\n---\nexport const prerender = true\n---\n\n<SignedIn isStatic={true}> You are signed in! </SignedIn>\n```\n\n----------------------------------------\n\nTITLE: Updating authMiddleware Parameters in JavaScript\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the authMiddleware function. This update aligns with the new naming convention for Clerk's API keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nimport { authMiddleware } from '@clerk/nextjs/server'\n\nauthMiddleware({ apiKey: '...' })\nauthMiddleware({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Correct Clerk Dashboard Navigation Instruction (Example 1)\nDESCRIPTION: Example of a clear and correct instruction for navigating the Clerk Dashboard. It follows the style guide by including the 'In the Clerk Dashboard' prefix and a direct link using the standard URL syntax.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\nIn the Clerk Dashboard, navigate to the [**User & Authentication**](https://dashboard.clerk.com/last-active?path=user-authentication) page.\n```\n\n----------------------------------------\n\nTITLE: Accessing Current User in Client Components - Page Component\nDESCRIPTION: This snippet shows how to connect a client component with a server action that accesses user data. It demonstrates the page-level integration for current user access in client components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/server-actions.mdx#2025-04-23_snippet_8\n\nLANGUAGE: tsx\nCODE:\n```\nimport AddHobby from './components/AddHobby'\nimport { addHobby } from './actions'\nexport default function Hobby() {\n  return <AddHobby addHobby={addHobby} />\n}\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server using bun (bash)\nDESCRIPTION: This command starts the TanStack React Start development server using the Bun runtime and package manager. It executes the `dev` script from the `package.json`, setting up the local development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Clerk `NotAuthorizedToMoveApplicationToOrganization` Error (JSON)\nDESCRIPTION: Represents the JSON error response when a user tries to transfer an application (`AppID`) to an organization (`OrgID`) they are not a member of. Authorization fails because membership in the target organization is required.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"unauthorized request\",\n  \"longMessage\": \"You need to be a member of organization <OrgID>, in order to move application <AppID>.\",\n  \"code\": \"authorization_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Firestore Security Rules for Clerk Authentication\nDESCRIPTION: Security rules for Firestore database that allow access only to authenticated users. This configuration permits read and write operations when the request includes valid authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/firebase.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /{document=**} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-session SignOutButton in Next.js\nDESCRIPTION: Illustrates how to use the SignOutButton for multi-session functionality in Next.js. It uses the useAuth hook to get the sessionId and conditionally renders SignInButton or SignOutButton based on the session state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-out-button.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\n'use client'\n\nimport { SignInButton, SignOutButton, useAuth } from '@clerk/nextjs'\n\nexport default function Home() {\n  const { sessionId } = useAuth()\n\n  if (!sessionId) {\n    return <SignInButton />\n  }\n\n  return <SignOutButton signOutOptions={{ sessionId }} />\n}\n```\n\n----------------------------------------\n\nTITLE: Complete JWT Template Example\nDESCRIPTION: Comprehensive example showing all JWT template capabilities including static values, dynamic values, and default claims.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/jwt-templates.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"aud\": \"https://my-site.com\",\n  \"version\": 1,\n  \"foo\": { \"bar\": [1, 2, 3] },\n  \"user_id\": \"{{user.id}}\",\n  \"avatar\": \"{{user.image_url}}\",\n  \"full_name\": \"{{user.last_name}} {{user.first_name}} \",\n  \"email\": \"{{user.primary_email_address}}\",\n  \"phone\": \"{{user.primary_phone_address}}\",\n  \"registration_date\": \"{{user.created_at}}\",\n  \"likes_to_do\": \"{{user.public_metadata.profile.interests}}\",\n  \"unsafe_meta\": \"{{user.unsafe_metadata}}\",\n  \"invalid_shortcode\": \"{{user.i_dont_exist}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up tRPC Route Handler with Auth Context\nDESCRIPTION: Configures the tRPC API route handler to use the Clerk authentication context. This connects the tRPC request handler with the auth context created in the previous step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/trpc.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\nimport { fetchRequestHandler } from '@trpc/server/adapters/fetch'\nimport { appRouter } from '@/app/server/routers/posts'\nimport { createContext } from '@/app/server/context'\n\nconst handler = (req: Request) =>\n  fetchRequestHandler({\n    endpoint: '/api/trpc',\n    req,\n    router: appRouter,\n    createContext,\n  })\n\nexport { handler as GET, handler as POST }\n```\n\n----------------------------------------\n\nTITLE: iOS Swift Email Verification Implementation\nDESCRIPTION: SwiftUI view for handling email addition and verification using Clerk SDK. Implements email creation and verification using async/await pattern and handles both the initial email entry and verification code flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/add-email.mdx#2025-04-23_snippet_1\n\nLANGUAGE: swift\nCODE:\n```\nimport SwiftUI\nimport Clerk\n\nstruct AddEmailView: View {\n  @State private var email = \"\"\n  @State private var code = \"\"\n  @State private var isVerifying = false\n  @State private var newEmailAddress: EmailAddress?\n\n  var body: some View {\n    if newEmailAddress?.verification?.status == .verified {\n      Text(\"Email added!\")\n    }\n\n    if isVerifying {\n      TextField(\"Enter code\", text: $code)\n      Button(\"Verify\") {\n        Task { await verifyCode(code) }\n      }\n    } else {\n      TextField(\"Enter email address\", text: $email)\n      Button(\"Continue\") {\n        Task { await createEmail(email) }\n      }\n    }\n  }\n}\n\nextension AddEmailView {\n\n  func createEmail(_ email: String) async {\n    do {\n      guard let user = Clerk.shared.user else { return }\n\n      self.newEmailAddress = try await user\n        .createEmailAddress(email)\n        .prepareVerification(strategy: .emailCode)\n\n      isVerifying = true\n    } catch {\n      dump(error)\n    }\n  }\n\n  func verifyCode(_ code: String) async {\n    do {\n      guard let newEmailAddress else { return }\n\n      self.newEmailAddress = try await newEmailAddress.attemptVerification(strategy: .emailCode(code: code))\n\n      dump(self.newEmailAddress?.verification?.status)\n    } catch {\n      dump(error)\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing C# Logo with SVG and Gradient Effects\nDESCRIPTION: Complete SVG code that renders the C# programming language logo. The implementation includes a diamond-shaped background with a purple gradient and white C# symbol in the foreground. The SVG uses paths for shape definitions and a linear gradient for the background coloring.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/c-sharp.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 160 178\" fill=\"none\">\n  <path\n    fill=\"url(#c-sharp-logo-gradient)\"\n    d=\"M0 55.847v65.985a22.844 22.844 0 0 0 11.429 19.791l57.143 32.997a22.848 22.848 0 0 0 22.857 0l57.143-32.997A22.854 22.854 0 0 0 160 121.831V55.847a22.848 22.848 0 0 0-11.428-19.794L91.429 3.065a22.842 22.842 0 0 0-22.857 0L11.429 36.053A22.856 22.856 0 0 0 0 55.847Z\"\n  />\n\n  <path\n    fill=\"#fff\"\n    d=\"M40.552 78.02v22.774a5.68 5.68 0 0 0 3.514 5.263 5.684 5.684 0 0 0 2.18.431 5.7 5.7 0 0 0 4.028-1.667 5.694 5.694 0 0 0 1.667-4.027 5.693 5.693 0 1 1 11.385 0 17.08 17.08 0 0 1-34.159 0v-22.77a17.08 17.08 0 1 1 34.159 0 5.693 5.693 0 0 1-11.385 0 5.693 5.693 0 0 0-11.386 0l-.003-.004Zm91.088 22.774a5.68 5.68 0 0 1-3.514 5.262 5.681 5.681 0 0 1-2.18.432h-5.694v5.691a5.68 5.68 0 0 1-1.668 4.026 5.683 5.683 0 0 1-6.204 1.238 5.707 5.707 0 0 1-3.513-5.264v-5.691H97.481v5.691a5.682 5.682 0 0 1-5.694 5.694 5.682 5.682 0 0 1-5.69-5.694v-5.691h-5.698a5.695 5.695 0 0 1-5.693-5.693 5.693 5.693 0 0 1 5.693-5.692h5.694V83.718h-5.694a5.693 5.693 0 0 1 0-11.386h5.694v-5.694a5.693 5.693 0 1 1 11.385 0v5.691h11.385v-5.69a5.691 5.691 0 0 1 9.718-4.026 5.691 5.691 0 0 1 1.668 4.025v5.691h5.694c1.508 0 2.957.598 4.023 1.668a5.68 5.68 0 0 1 0 8.05 5.692 5.692 0 0 1-4.023 1.67h-5.694v11.386h5.694a5.71 5.71 0 0 1 5.697 5.691Zm-22.773-17.076H97.481v11.385h11.386V83.718Z\"\n  />\n\n  <defs>\n    <linearGradient\n      id=\"c-sharp-logo-gradient\"\n      x1=\"15.713\"\n      x2=\"92.858\"\n      y1=\"38.841\"\n      y2=\"173.129\"\n      gradientUnits=\"userSpaceOnUse\"\n    >\n      <stop stopColor=\"#927BE5\" />\n\n      <stop offset=\"1\" stopColor=\"#512BD4\" />\n    </linearGradient>\n  </defs>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Remix SDK using npm\nDESCRIPTION: This command uses the Node Package Manager (npm) to install the `@clerk/remix` SDK. This package provides the necessary components, hooks, and helpers for integrating Clerk authentication into a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Implementing withUser Higher Order Function\nDESCRIPTION: Example showing how to recreate the withUser higher order function using Clerk's hooks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_53\n\nLANGUAGE: javascript\nCODE:\n```\nfunction withUser(Component, displayName) {\n  displayName = displayName || Component.displayName || Component.name || 'Component'\n  Component.displayName = displayName\n  const HOC = (props) => {\n    const clerk = useUserContext()\n\n    if (!user) return null\n\n    return <Component {...props} user={user} />\n  }\n\n  HOC.displayName = `withUser(${displayName})`\n  return HOC\n}\n```\n\n----------------------------------------\n\nTITLE: Updating getClientList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getClientList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_42\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Conditional Rendering with Clerk Auth Components\nDESCRIPTION: Using Clerk's SignedIn and SignedOut components to conditionally render UI elements based on the user's authentication state.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_5\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut } from '@clerk/nextjs'\n\nexport default function Home() {\n  return (\n    <div>\n      <SignedOut>\n        <p>This content is public. Only signed out users can see this.</p>\n      </SignedOut>\n      <SignedIn>\n        <p>This content is private. Only signed in users can see this.</p>\n      </SignedIn>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Session Claims in Fastify (Core 1) (TypeScript)\nDESCRIPTION: Shows the method for retrieving session claims (JwtPayload) in a Fastify application using `getAuth` from `@clerk/fastify` before the Core 2 update, which removed the `orgs` claim.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Initializing an npm Project - Bash\nDESCRIPTION: Initializes a new npm project with default settings in the working directory. This creates a 'package.json' necessary for managing dependencies such as 'node-fetch'. No parameters required.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm init -y\n\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for User.getOrganizationSuggestions in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the User.getOrganizationSuggestions method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_16\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Adding Additional OAuth Scopes to UserProfile Component in React\nDESCRIPTION: This snippet demonstrates how to add additional OAuth scopes to the UserProfile component in a React application using Clerk. It specifies extra scopes for Google and GitHub providers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/overview.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\n<UserProfile\n  additionalOAuthScopes={{\n    google: ['foo', 'bar'],\n    github: ['qux'],\n  }}\n/>\n```\n\n----------------------------------------\n\nTITLE: Updating Return Signature for Users.getOrganizationList in JavaScript\nDESCRIPTION: This snippet demonstrates the change in return signature for the Users.getOrganizationList method. The new signature returns an object with 'data' and 'totalCount' properties, allowing easier access to the total number of items in paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Importing React Component for Tutorial Hero\nDESCRIPTION: A React component that displays prerequisite information for the tutorial including Clerk app and Hugging Face account requirements.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/huggingface.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<TutorialHero\n  beforeYouStart={[\n    {\n      title: \"A Clerk app is required.\",\n      link: \"/docs/quickstarts/setup-clerk\",\n      icon: \"clerk\",\n    },\n    {\n      title: \"A Hugging Face account is required.\",\n      link: \"https://huggingface.co/join\",\n      icon: \"user-circle\",\n    }\n  ]}\n/>\n```\n\n----------------------------------------\n\nTITLE: Incorrect Clerk Dashboard Navigation Instruction (Example 1)\nDESCRIPTION: Example of an unclear instruction for navigating the Clerk Dashboard. It lacks the standard introductory phrase ('In the Clerk Dashboard') and a direct, correctly formatted link, violating the style guide.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\nGo to **User & Authentication** in your dashboard.\n```\n\n----------------------------------------\n\nTITLE: Rendering Ruby Logo SVG\nDESCRIPTION: SVG path definition that creates the distinctive Ruby programming language logo using a single path element with fill color #CC342D.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/ruby.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" fill=\"none\">\n  <path\n    fill=\"#CC342D\"\n    d=\"M25.164 2.611c3.407.59 4.374 2.92 4.302 5.36l.017-.035-1.534 20.098L8.012 29.4h.018c-1.655-.07-5.344-.221-5.512-5.378l1.848-3.371 3.167 7.4.565 1.317 3.152-10.274-.034.008.018-.034 10.399 3.321-1.569-6.102-1.112-4.382 9.91-.639-.692-.573-7.114-5.8L25.167 2.6l-.003.011ZM8.28 8.218c4.001-3.97 9.165-6.316 11.148-4.315 1.98 1.997-.118 6.86-4.127 10.827-4.003 3.968-9.104 6.442-11.082 4.446-1.984-1.997.05-6.985 4.058-10.955l.003-.003Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationMembershipList Return Type in Clerk API\nDESCRIPTION: The return type of User.getOrganizationMembershipList has changed from an array to an object with data and totalCount properties. This requires updating how you access the returned data in your code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Creating a New Next.js Application using Bash\nDESCRIPTION: Provides commands to initialize a new Next.js project using different package managers (npm, yarn, pnpm, bun). These commands scaffold a basic Next.js application structure. Requires Node.js and the respective package manager to be installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm create next-app@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn create next-app\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm create next-app\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun create next-app\n```\n\n----------------------------------------\n\nTITLE: Declaring Passkey Creation Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Declares the createPasskey function for registering a passkey tied to the currently signed-in Clerk user in a multi-domain app. Input is no parameters, and output is a Promise resolving to a PasskeyResource. Must be called from the primary domain and requires the user to be signed in. Provides type safety and definition for future implementation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createPasskey(): Promise<PasskeyResource>\n```\n\n----------------------------------------\n\nTITLE: Defining OrganizationMembership Properties in TypeScript\nDESCRIPTION: This snippet outlines the properties of the Backend OrganizationMembership object, including unique identifiers, roles, metadata, timestamps, and associated organization and user data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-organization-membership.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface OrganizationMembership {\n  id: string;\n  role: OrganizationMembershipRole;\n  publicMetadata: OrganizationMembershipPublicMetadata;\n  privateMetadata: OrganizationMembershipPrivateMetadata;\n  createdAt: number;\n  updatedAt: number;\n  organization: Organization;\n  publicUserData?: OrganizationMembershipPublicUserData;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk in Remix Primary Domain\nDESCRIPTION: Implementation of Clerk authentication in a Remix application's primary domain using ClerkApp wrapper and rootAuthLoader.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport const loader = (args) => {\n  return rootAuthLoader(\n    args,\n    ({ req }) => {\n      const { userId, sessionId, getToken } = req.auth\n      return json({\n        message: `Hello from the root loader :)`,\n        ENV: getBrowserEnvironment(),\n      })\n    },\n    {\n      loadUser: true,\n      signInUrl: '/sign-in',\n      signUpUrl: '/sign-up',\n      allowedRedirectOrigins: ['https://satellite.dev'],\n    } as const,\n  )\n}\n\nexport default ClerkApp(App, {\n  signInUrl: '/sign-in',\n  signUpUrl: '/sign-up',\n})\n```\n\n----------------------------------------\n\nTITLE: Updated return type for Organizations.getOrganizationInvitationList\nDESCRIPTION: The return type has changed from an array of items to an object with data array and totalCount properties, requiring updated access patterns in client code for pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_21\n\nLANGUAGE: js\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Organization Update HTML Structure\nDESCRIPTION: HTML template for the vanilla JavaScript implementation of organization updates. It defines the basic structure and form elements needed for the update functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/update-organizations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h1>Update the current organization</h1>\n    <form id=\"update-organization\">\n      <label for=\"name\">Name</label>\n      <input id=\"name\" name=\"name\" />\n      <button>Update</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Organization.getDomains\nDESCRIPTION: Shows the changes to pagination parameters in Organization.getDomains method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Event Listener - TypeScript\nDESCRIPTION: Function signature for adding event listeners to Clerk resources like Client, Session, User and Organization changes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction addListener(listener: (emission: Resources) => void): UnsubscribeCallback\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Redirect URLs in Environment Variables\nDESCRIPTION: Environment variables configuration for Clerk redirect URLs. These define where users are redirected after sign-in when no URL is specified, and where users are always redirected after sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_4\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/dashboard\nNEXT_PUBLIC_CLERK_SIGN_UP_FORCE_REDIRECT_URL=/onboarding\n```\n\n----------------------------------------\n\nTITLE: Updated return signature for Users.getOrganizationInvitationList\nDESCRIPTION: The return signature of Users.getOrganizationInvitationList has changed from directly returning data to returning an object with data and totalCount properties, aligning with Backend API responses for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_20\n\nLANGUAGE: js\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Listing Clerk React Hooks in Markdown\nDESCRIPTION: A markdown list of links to documentation for various Clerk React hooks. Each hook is presented as a link to its respective documentation page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/hook-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- [`useUser()`](/docs/hooks/use-user)\n- [`useClerk()`](/docs/hooks/use-clerk)\n- [`useAuth()`](/docs/hooks/use-auth)\n- [`useSignIn()`](/docs/hooks/use-sign-in)\n- [`useSignUp()`](/docs/hooks/use-sign-up)\n- [`useSession()`](/docs/hooks/use-session)\n- [`useSessionList()`](/docs/hooks/use-session-list)\n- [`useOrganization()`](/docs/hooks/use-organization)\n- [`useOrganizationList()`](/docs/hooks/use-organization-list)\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with Allowed Redirect Origins\nDESCRIPTION: React component setup for ClerkProvider in the primary domain application, configuring allowed redirect origins for both development and production environments.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/satellite-domains.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <ClerkProvider allowedRedirectOrigins={['http://localhost:3001']}>{children}</ClerkProvider>\n      </body>\n    </html>\n  )\n}\n```\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/nextjs'\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <ClerkProvider allowedRedirectOrigins={['https://satellite.dev']}>{children}</ClerkProvider>\n      </body>\n    </html>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Client List using Clerk API\nDESCRIPTION: Demonstrates how to fetch a list of clients using the deprecated getClientList() method from the Clerk client API. This method is accessed through the clerkClient.clients namespace and returns a promise containing the client list.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/client/get-client-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst clients = await clerkClient.clients.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationList Return Signature in Clerk API\nDESCRIPTION: The return signature of Users.getOrganizationList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG Path Logo\nDESCRIPTION: Defines an SVG viewBox with dimensions 300x300 containing a complex geometric path shape with a mint green fill color (#00DC82). The path data describes a custom shape using absolute and relative movement commands.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/nuxt.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 300 300\">\n  <path\n    fill=\"#00DC82\"\n    d=\"M168 250h111c3.542 0 6.932-1.244 10-3 3.068-1.756 6.23-3.959 8-7 1.77-3.041 3.002-6.49 3-10.001-.002-3.511-1.227-6.959-3-9.998L222 91c-1.77-3.04-3.933-5.245-7-7s-7.458-3-11-3-6.933 1.245-10 3-5.23 3.96-7 7l-19 33-38-64.002c-1.772-3.04-3.932-6.243-7-7.998s-6.458-2-10-2-6.932.245-10 2c-3.068 1.755-6.228 4.958-8 7.998L2 220c-1.773 3.039-1.998 6.487-2 9.998-.002 3.511.23 6.96 2 10.001 1.77 3.04 4.932 5.244 8 7 3.068 1.756 6.458 3 10 3h70c27.737 0 47.925-12.442 62-36l34-59 18-31 55 94h-73l-18 32Zm-79-32H40l73-126 37 63-24.509 42.725C116.144 213.01 105.488 218 89 218Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Domain with Proxy URL via Backend API\nDESCRIPTION: cURL command to update the Clerk domain with a proxy URL using the Backend API. This request triggers checks to validate the proxy URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/advanced-usage/using-proxies.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X PATCH https://api.clerk.com/v1/domains/{{DOMAIN ID}} \\\n    -H \"Authorization: Bearer {{SECRET KEY}}\" \\\n    -H \"Content-Type: application/json\" \\\n    -d '{\"proxy_url\": \"https://app.dev/__clerk\"}}'\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Middleware for Route Protection\nDESCRIPTION: Configuration of Clerk's middleware to handle authentication state across the application, specifying which routes to protect.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nextjs/server'\n\nexport default clerkMiddleware()\n\nexport const config = {\n  matcher: [\n    '/((?!.*\\\\..*|_next).*)', // Don't run middleware on static files\n    '/', // Run middleware on index page\n    '/(api|trpc)(.*)', // Run middleware on API routes\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Updating React Component Usage in Astro\nDESCRIPTION: Changes to React component imports and usage within Astro files, demonstrating the new import paths and client-side loading.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/migrating-from-astro-community-sdk.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport {\n  SignInButton,\n  SignedIn,\n  SignedOut,\n  UserButton,\n} from '@clerk/astro/react'\n\nexport default function Header() {\n  return (\n    <>\n      <p>My App</p>\n      <SignedOut>\n        <SignInButton />\n      </SignedOut>\n      <SignedIn>\n        <UserButton />\n      </SignedIn>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Cards Component in MDX\nDESCRIPTION: Shows how to use the Cards component to display a grid of cards with various styles, including default, plain, image, and CTA variants.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_13\n\nLANGUAGE: mdx\nCODE:\n```\n<Cards>\n\n- [title](href)\n- description\n\n---\n\n- [title](href)\n- description\n- ![alt text](/image.png)\n\n---\n\n- [title](href)\n- description\n- {<svg viewBox=\"0 0 32 32\">{/* icon */}</svg>}\n\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Representing InvalidCookie Error in Clerk (JSON)\nDESCRIPTION: This JSON object illustrates the format of an `InvalidCookie` error response from Clerk. It contains a static short message indicating the cookie is invalid and the error code `cookie_invalid_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/cookie.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"The provided cookie is invalid.\",\n  \"code\": \"cookie_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Incorrect Clerk Dashboard Navigation Instruction (Example 2)\nDESCRIPTION: Another example of an incorrect instruction for Clerk Dashboard navigation. It is missing the standard 'In the Clerk Dashboard' prefix and the direct link format required by the style guide.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\nFind fallback redirects in the Redirect tab on the Account Portal in the Clerk Dashboard.\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Claims to Session Token in Clerk Dashboard\nDESCRIPTION: JSON configuration for adding a custom claim to the Clerk session token that allows access to user's public metadata in Middleware. This is configured in the Clerk Dashboard under the Sessions page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/add-onboarding-flow.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"metadata\": \"{{user.public_metadata}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring clerkPlugin with custom hookName option\nDESCRIPTION: This example shows how to configure the clerkPlugin by passing options, specifically setting the hookName to determine which of Fastify's Request/Reply hooks Clerk should run.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/fastify/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfastify.register(clerkPlugin, {\n  hookName: 'preHandler',\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Client List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getClientList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Initiating OKX Wallet Authentication in TypeScript\nDESCRIPTION: Defines the `authenticateWithOKXWallet` function signature. This asynchronous function initiates an authentication flow using the OKX Wallet browser extension. It prompts the user to connect their wallet and sign a message, returning a Promise resolving to a SignUpResource. It accepts optional `SignUpAuthenticateWithWeb3Params`, which can include `unsafeMetadata` for storing custom user information during sign-up.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-up.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithOKXWallet(\n  params?: SignUpAuthenticateWithWeb3Params,\n): Promise<SignUpResource>\n```\n\n----------------------------------------\n\nTITLE: Installing svix for Webhook Delivery and Verification via Multiple Package Managers (Bash)\nDESCRIPTION: These bash snippets show how to install the 'svix' package using various package managers: npm, yarn, pnpm, and bun. The svix package is required for secure verification of Clerk webhook payloads in backend code. The choice of package manager should match your project's existing package management. No parameters are needed; simply run the appropriate command in your project directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install svix\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add svix\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add svix\\n\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add svix\\n\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getOrganizationList Return Type in Clerk API\nDESCRIPTION: The return type of Organization.getOrganizationList has changed from an array to an object with data and totalCount properties. This requires updating how you access the returned data in your code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst { organization } = useOrganization()\nconst orgList = organization.getOrganizationList()\n\norgList.forEach(() => {})\norgList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Correct Phrasing for Top Dashboard Navigation (Example)\nDESCRIPTION: Example demonstrating the preferred phrasing ('At the top...') when referring to the top section of the Clerk Dashboard, according to the style guide.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_10\n\nLANGUAGE: markdown\nCODE:\n```\nAt the top of the Clerk Dashboard, select [**Users**](https://dashboard.clerk.com/last-active?path=users).\n```\n\n----------------------------------------\n\nTITLE: Configuring ClerkProvider with Passkeys\nDESCRIPTION: Implementation of ClerkProvider component with passkeys configuration in the root layout file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/passkeys.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { ClerkProvider } from '@clerk/clerk-expo'\nimport { Slot } from 'expo-router'\nimport { tokenCache } from '@clerk/clerk-expo/token-cache'\nimport { passkeys } from '@clerk/clerk-expo/passkeys'\n\nexport default function RootLayout() {\n  return (\n    <ClerkProvider\n      tokenCache={tokenCache}\n      publishableKey={publishableKey}\n      __experimental_passkeys={passkeys}\n    >\n      <Slot />\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Client-side User Store Usage\nDESCRIPTION: Demonstrates how to use the $userStore to access user information like firstName on the client side.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/read-session-data.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { useStore } from '@nanostores/react'\nimport { $userStore } from '@clerk/astro/client'\n\nexport default function Example() {\n  const user = useStore($userStore)\n\n  if (!user) {\n    return null\n  }\n\n  return <div>Hello, {user.firstName} welcome to Clerk</div>\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Phone Number Example Implementation\nDESCRIPTION: Example showing how to create a phone number for a user using the Clerk client, including setting it as primary and verified.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/create-phone-number.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.phoneNumbers.createPhoneNumber({\n  userId: 'user_123',\n  phoneNumber: '15551234567',\n  primary: true,\n  verified: true,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.create Method in Clerk SDK (JavaScript)\nDESCRIPTION: This snippet shows how to update the Organization.create method call in the Clerk SDK. Instead of passing a string directly, the new version requires an object with a name property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Skipping Results in getOrganizationInvitationList in TypeScript\nDESCRIPTION: Shows how to use the offset parameter in getOrganizationInvitationList to skip a certain number of results. This example skips the first 10 invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-invitation-list.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst { data, totalCount } = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId,\n  // skips the first 10 results\n  offset: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Uninstalling and Installing Clerk Vue SDK via Bun - Bash\nDESCRIPTION: These commands use Bun to remove the vue-clerk library and add @clerk/vue, preparing your environment for the new SDK. Prerequisite: Bun installed. Running these will update your project's dependencies without requiring any additional parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/vue/migrating-from-vue-community-sdk.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun remove vue-clerk\\nbun add @clerk/vue\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Fastify (TypeScript)\nDESCRIPTION: Shows an example of how JWT session claims (`JwtPayload`), which previously contained the `orgs` claim, could be accessed in a Fastify application using `getAuth` from `@clerk/fastify`. This pattern helps identify code potentially affected by the removal of the `orgs` claim.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript {{ filename: 'Fastify' }}\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n```\n\n----------------------------------------\n\nTITLE: Running the Clerk Upgrade CLI Helper\nDESCRIPTION: Shows how to use the `@clerk/upgrade` CLI tool via npx, yarn dlx, pnpm dlx, or bun dlx to automatically scan the codebase and identify necessary changes for upgrading from Core 1 to Core 2. The `--from=core-1` flag specifies the starting version.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Configuring Root Auth Loader with Updated Parameters\nDESCRIPTION: Examples of configuring the rootAuthLoader with updated parameter names for secret key and publishable key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_13\n\nLANGUAGE: js\nCODE:\n```\nimport { rootAuthLoader } from '@clerk/remix/ssr.server'\n\nexport const loader = (args) => rootAuthLoader(args, { secretKey: '...' })\nexport const loader = (args) => rootAuthLoader(args, { publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updating `<UserButton>` `afterSignOutUrl` Prop in JSX\nDESCRIPTION: Shows how the explicit `afterSignOutUrl=\"/\"` prop on the `<UserButton>` component can be removed in Core 2, as `/` is now the default redirect URL after sign-out.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton afterSignOutUrl=\"/\" />\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Defining PaginatedResourceResponse Interface in TypeScript\nDESCRIPTION: This snippet defines the PaginatedResourceResponse interface with two properties: data (an array of generic type T) and totalCount (a number). It represents the structure of paginated API responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/paginated-resource-response.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface PaginatedResourceResponse<T> {\n  data: T[];\n  totalCount: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Attempting Second Factor Verification in TypeScript\nDESCRIPTION: This snippet shows the TypeScript function signature for the attemptSecondFactor method of the SignIn object. It takes AttemptSecondFactorParams as input and returns a Promise resolving to a SignIn object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptSecondFactor(params: AttemptSecondFactorParams): Promise<SignIn>\n```\n\n----------------------------------------\n\nTITLE: Correct Flex Styling for Static Control Components\nDESCRIPTION: Example showing the proper way to apply flex styling to static control components using class prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/hybrid-rendering.mdx#2025-04-23_snippet_4\n\nLANGUAGE: jsx\nCODE:\n```\n<div class=\"flex items-center\">\n  <SignedIn isStatic={true} class=\"flex items-center\">\n    <span>User</span>\n  </SignedIn>\n  <span>Always visible</span>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Go SDK via go get command\nDESCRIPTION: Command-line example demonstrating how to fetch and install the Clerk SDK package explicitly using the go get command, ensuring the latest version is acquired.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/go/overview.mdx#_snippet_1\n\nLANGUAGE: terminal\nCODE:\n```\ngo get -u github.com/clerk/clerk-sdk-go/v2\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of getOrganizationMembershipList in TypeScript\nDESCRIPTION: Demonstrates the basic usage of getOrganizationMembershipList function to retrieve organization memberships using the Clerk Backend SDK. It requires an organization ID as a parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/get-organization-membership-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_2ZUtbk2yvnFGItdeze1ivCh3uqh'\n\nconst response = await clerkClient.organizations.getOrganizationMembershipList({ organizationId })\n```\n\n----------------------------------------\n\nTITLE: Defining ClerkAPIError Meta Object Structure in TypeScript\nDESCRIPTION: This code snippet defines the structure of the meta object within the ClerkAPIError interface. It includes optional properties such as paramName, sessionId, emailAddresses, identifiers, zxcvbn suggestions, and permissions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/clerk-api-error.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nmeta?: {\n  paramName?: string\n  sessionId?: string\n  emailAddresses?: string[]\n  identifiers?: string[]\n  zxcvbn?: {\n    suggestions: {\n      code: string\n      message: string\n    }[]\n  }\n  permissions?: string[]\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Migration Script with Node.js - Bash\nDESCRIPTION: Executes the previously created Node.js script for migrating users to Clerk. Requires that all prior setup and the 'migrate-to-clerk.js' script exist in the same directory. Outputs log messages on user migration success or errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nnode migrate-to-clerk.js\n\n```\n\n----------------------------------------\n\nTITLE: Replacing getPendingInvitations with getInvitations in JavaScript\nDESCRIPTION: Migration example showing how to replace the removed getPendingInvitations method with getInvitations. The new method requires a status filter to get pending invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_48\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getPendingInvitations()\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Running Development Server with Package Managers in Bash\nDESCRIPTION: Commands to start the development server using different package managers (npm, yarn, pnpm, bun). These commands initiate the development environment for the project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/nextjs/create-first-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dev\n```\n\n----------------------------------------\n\nTITLE: Defining updateOrganization Function Signature in TypeScript\nDESCRIPTION: Function signature for updateOrganization, which takes UpdateOrganizationParams and returns a Promise resolving to an Organization object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateOrganization(params: UpdateOrganizationParams): Promise<Organization>\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkExpressRequireAuth Parameter from frontendApi to publishableKey (JavaScript)\nDESCRIPTION: Shows the change from using 'frontendApi' to 'publishableKey' as a parameter in the createClerkExpressRequireAuth function. Both the key and value need to be updated.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_15\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\n\ncreateClerkExpressRequireAuth({ frontendApi: '...' })\ncreateClerkExpressRequireAuth({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/nextjs with yarn\nDESCRIPTION: Command to install the Clerk Next.js SDK using yarn package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: JavaScript Waitlist Component Mounting\nDESCRIPTION: Example of mounting the Waitlist component using JavaScript with the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"waitlist\"></div>\n`\n\nconst waitlistDiv = document.getElementById('waitlist')\n\nclerk.mountWaitlist(waitlistDiv)\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidAuthorization (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when an authenticated request is not authorized to perform the requested operation. It includes a short message, a long message stating the lack of authorization, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Unauthorized request\",\n  \"longMessage\": \"You are not authorized to perform this request\",\n  \"code\": \"authorization_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Mounting OrganizationSwitcher with JavaScript\nDESCRIPTION: Example of how to mount the OrganizationSwitcher component using JavaScript. This code initializes Clerk, creates a div element, and mounts the OrganizationSwitcher to it.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-switcher\"></div>\n`\n\nconst orgSwitcherDiv = document.getElementById('organization-switcher')\n\nclerk.mountOrganizationSwitcher(orgSwitcherDiv)\n```\n\n----------------------------------------\n\nTITLE: Declaring TOTP Creation Function - Clerk JavaScript - TypeScript\nDESCRIPTION: Defines the createTOTP function for generating a TOTP secret for multi-factor authentication through the user's authenticator app. Returns a Promise of TOTPResource. The authenticator app strategy must be enabled in Clerk dashboard settings. Calling again while unverified replaces the previous secret.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/user.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createTOTP(): Promise<TOTPResource>\n```\n\n----------------------------------------\n\nTITLE: Defining the `update` Function Signature for Organizations in TypeScript\nDESCRIPTION: This TypeScript signature defines the `update` function for modifying organization attributes. It accepts an `UpdateOrganizationParams` object containing optional fields like `name`, `slug`, `maxAllowedMemberships`, `publicMetadata`, and `privateMetadata`. It returns a Promise resolving to the updated `Organization` object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_17\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\nfunction update(params: UpdateOrganizationParams): Promise<Organization>\n```\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Pages to UserProfile in Astro\nDESCRIPTION: Demonstrates how to add custom pages to the UserProfile component in Astro. It shows implementations for both UserButton and dedicated page use cases.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/user-profile.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserButton } from '@clerk/astro/components'\n---\n\n<header>\n  <UserButton>\n    <UserButton.UserProfilePage label=\"Custom Page\" url=\"custom\">\n      <svg\n        slot=\"label-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 512 512\"\n        fill=\"currentColor\"\n      >\n        <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n      </svg>\n      <div>\n        <h1>Custom page</h1>\n        <p>This is the content of the custom page.</p>\n      </div>\n    </UserButton.UserProfilePage>\n  </UserButton>\n</header>\n```\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { UserProfile } from '@clerk/astro/components'\n---\n\n<UserProfile>\n  <UserProfile.Page label=\"Custom Page\" url=\"custom-page\">\n    <svg\n      slot=\"label-icon\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 512 512\"\n      fill=\"currentColor\"\n    >\n      <path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\"></path>\n    </svg>\n    <div>\n      <h1>Custom page</h1>\n      <p>This is the content of the custom page.</p>\n    </div>\n  </UserProfile.Page>\n</UserProfile>\n```\n\n----------------------------------------\n\nTITLE: Dynamically Loading ClerkJS Script in TypeScript\nDESCRIPTION: Extends the `createClerkInstanceInternal` function to dynamically load the ClerkJS library using `loadClerkJSScript` from `@clerk/shared` if `window.Clerk` is not found. It handles potential loading errors and sets the loaded `clerkJSInstance` into the `$clerk` state store if it's not already set. Depends on `@clerk/shared` package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/sdk/frontend-only.mdx#2025-04-23_snippet_1\n\nLANGUAGE: ts\nCODE:\n```\nimport { loadClerkJSScript } from '@clerk/shared/loadClerkJSScript'\nimport { runOnce } from './utils'\nimport { $clerk, $state } from './stores'\n\nexport const createClerkInstance = runOnce(createClerkInstanceInternal)\n\nasync function createClerkInstanceInternal(options) {\n  let clerkJSInstance = window.Clerk\n\n  if (!clerkJSInstance) {\n    await loadClerkJSScript(options)\n\n    if (!window.Clerk) {\n      throw new Error('Failed to download latest ClerkJS.')\n    }\n    clerkJSInstance = window.Clerk\n  }\n\n  if (!$clerk.get()) {\n    $clerk.set(clerkJSInstance)\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Google Chrome Logo with SVG\nDESCRIPTION: Complete SVG implementation of the Google Chrome logo including viewport definition, linear gradients for the red, green, yellow, and blue segments, and path elements that define the logo's shape and appearance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/chrome-extension.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 63 63\" fill=\"none\">\n  <linearGradient id=\"chrome-logo-a\" x1=\"34.909\" x2=\"7.632\" y1=\"61.029\" y2=\"13.785\" gradientUnits=\"userSpaceOnUse\">\n    <stop offset=\"0\" stopColor=\"#1e8e3e\" />\n\n    <stop offset=\"1\" stopColor=\"#34a853\" />\n  </linearGradient>\n\n  <linearGradient id=\"chrome-logo-b\" x1=\"26.904\" x2=\"54.181\" y1=\"63.079\" y2=\"15.835\" gradientUnits=\"userSpaceOnUse\">\n    <stop offset=\"0\" stopColor=\"#fcc934\" />\n\n    <stop offset=\"1\" stopColor=\"#fbbc04\" />\n  </linearGradient>\n\n  <linearGradient id=\"chrome-logo-c\" x1=\"4.221\" x2=\"58.775\" y1=\"19.688\" y2=\"19.688\" gradientUnits=\"userSpaceOnUse\">\n    <stop offset=\"0\" stopColor=\"#d93025\" />\n\n    <stop offset=\"1\" stopColor=\"#ea4335\" />\n  </linearGradient>\n\n  <path\n    fill=\"#fff\"\n    d=\"M31.499 47.247c8.698 0 15.75-7.052 15.75-15.75s-7.052-15.75-15.75-15.75-15.75 7.051-15.75 15.75 7.051 15.75 15.75 15.75z\"\n  />\n\n  <path\n    fill=\"url(#chrome-logo-a)\"\n    d=\"M17.86 39.375 4.22 15.754a31.492 31.492 0 0 0 27.28 47.242l13.638-23.62v-.005a15.746 15.746 0 0 1-27.28.004z\"\n  />\n\n  <path\n    fill=\"url(#chrome-logo-b)\"\n    d=\"M45.138 39.374 31.5 62.995A31.491 31.491 0 0 0 58.773 15.75H31.498l-.003.002a15.747 15.747 0 0 1 13.643 23.623z\"\n  />\n\n  <path\n    fill=\"#1a73e8\"\n    d=\"M31.499 43.969c6.886 0 12.469-5.583 12.469-12.469s-5.583-12.469-12.469-12.469S19.03 24.614 19.03 31.5 24.613 43.969 31.5 43.969z\"\n  />\n\n  <path\n    fill=\"url(#chrome-logo-c)\"\n    d=\"M31.5 15.75h27.274a31.493 31.493 0 0 0-54.553.004L17.86 39.375l.004.002A15.747 15.747 0 0 1 31.499 15.75z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Running the Clerk Upgrade CLI Helper\nDESCRIPTION: Shows how to execute the `@clerk/upgrade` CLI tool using various package runners (npx, yarn dlx, pnpm dlx, bun dlx). This tool analyzes the codebase and suggests changes required for upgrading from Core 1 to Core 2. It requires specifying the source version (`--from=core-1`).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm dlx @clerk/upgrade --from=core-1\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun dlx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInWithMetamaskButton in Vue\nDESCRIPTION: Shows how to use a custom button with the SignInWithMetamaskButton component in Vue. This snippet demonstrates wrapping a custom button and using the 'modal' mode in a Vue component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-with-metamask.mdx#2025-04-23_snippet_7\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignInWithMetamaskButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignInWithMetamaskButton mode=\"modal\">\n    <button>Custom sign in button</button>\n  </SignInWithMetamaskButton>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Organization Profile in Clerk SDK\nDESCRIPTION: Function to redirect the user to the configured URL where the OrganizationProfile component is mounted. It returns a promise that can be awaited.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_26\n\nLANGUAGE: typescript\nCODE:\n```\nfunction redirectToOrganizationProfile(): Promise<unknown>\n```\n\n----------------------------------------\n\nTITLE: Configuring Android Intent Filters in Expo\nDESCRIPTION: Configuration for Android app.json to set up intent filters for passkey support. Includes auto-verification and proper URL scheme configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/passkeys.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"expo\": {\n    \"plugins\": [[\"expo-build-properties\"]],\n    \"android\": {\n      \"intentFilters\": [\n        {\n          \"action\": \"VIEW\",\n          \"autoVerify\": true,\n          \"data\": [\n            {\n              \"scheme\": \"https\",\n              \"host\": \"<YOUR_FRONTEND_API_URL>\"\n            }\n          ],\n          \"category\": [\"BROWSABLE\", \"DEFAULT\"]\n        }\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Listing Clerk Components Accepting Redirect URL Props in JSX\nDESCRIPTION: Lists various Clerk UI and control components (like `<SignIn>`, `<SignUpButton>`, `<ClerkProvider>`) that accept specific props for customizing redirect URLs after sign-in or sign-up actions. Refer to individual component documentation for specific prop availability.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/guides/custom-redirects.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<RedirectToSignIn />\n<RedirectToSignUp />\n<ClerkProvider>\n<SignInButton>\n<SignUpButton>\n<SignIn>\n<SignUp>\n```\n\n----------------------------------------\n\nTITLE: Authenticating with OKX Wallet in Clerk\nDESCRIPTION: Method signature for initiating Web3 authentication using the OKX Wallet browser extension. This prompts users to connect their wallet and sign a message to verify ownership of the wallet address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithOKXWallet(): Promise<SignInResource>\n```\n\n----------------------------------------\n\nTITLE: Authenticating with Coinbase Wallet in Clerk\nDESCRIPTION: Method signature for initiating Web3 authentication using the Coinbase Wallet browser extension. This prompts users to connect their wallet and sign a message to verify ownership of the wallet address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithCoinbaseWallet(): Promise<SignInResource>\n```\n\n----------------------------------------\n\nTITLE: Updated Invitation List Response Format\nDESCRIPTION: Demonstrates the new response format for getInvitationList that includes both data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Environment Variables\nDESCRIPTION: Environment variable configuration for Clerk in a Vite-based React application. The publishable key should be retrieved from the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/convex.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\n```\n\n----------------------------------------\n\nTITLE: Updating SignOutButton Component in React\nDESCRIPTION: This snippet shows the removal of the signOutCallback prop from the SignOutButton component. Instead, the redirectUrl prop is now used for specifying the post-signout redirect location.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_35\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport const Signout = () => {\n  return (\n    <SignOutButton\n      signOutCallback={() => {\n        window.location.href = '/your-path'\n      }}\n      redirectUrl=\"/your-path\"\n    >\n      <button>Sign Out</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating getOrganizationList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getOrganizationList. The function now returns an object with data and totalCount properties instead of just the data array, helping with pagination tracking.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationList()\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Claims in Fastify\nDESCRIPTION: Example of how to access JWT claims in a Fastify application using the Clerk SDK. This shows the updated method for retrieving session claims after the 'orgs' claim removal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Implementing SignIn Component in Expo Web\nDESCRIPTION: This snippet demonstrates how to create a dedicated sign-in page in an Expo Web application using the SignIn component from @clerk/clerk-expo/web.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/clerk-expo/web'\n\nexport default function SignInPage() {\n  return <SignIn />\n}\n```\n\n----------------------------------------\n\nTITLE: Preferred Phrasing: 'open' (Documentation Example)\nDESCRIPTION: Example of preferred phrasing ('A modal will open.') according to the Clerk style guide, replacing the discouraged term 'appears'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_8\n\nLANGUAGE: plaintext\nCODE:\n```\nA modal will open.\n```\n\n----------------------------------------\n\nTITLE: Getting Active Session and User in JavaScript with Clerk\nDESCRIPTION: This code shows how to get the active session and user using the Clerk object in vanilla JavaScript.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_1\n\nLANGUAGE: js\nCODE:\n```\n// Get the active session\nconst activeSession = window.Clerk.session\n\n// Get the active user\nconst activeUser = window.Clerk.user\n```\n\n----------------------------------------\n\nTITLE: Opening OrganizationProfile with JavaScript\nDESCRIPTION: Example of how to open the <OrganizationProfile /> component as an overlay using the Clerk JavaScript SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_8\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-profile\"></div>\n`\n\nconst orgProfileDiv = document.getElementById('organization-profile')\n\nclerk.openOrganizationProfile(orgProfileDiv)\n```\n\n----------------------------------------\n\nTITLE: Configuring Vite for Ngrok in React Router\nDESCRIPTION: Configuration setup for Vite to allow ngrok host in React Router applications during development.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nexport default defineConfig({\n  // ... other config\n  server: {\n    // Replace with your ngrok host\n    allowedHosts: ['fawn-two-nominally.ngrok-free.app'],\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Basic Link Component Usage\nDESCRIPTION: Shows how to use the Link component to navigate between sign-in and sign-up flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_19\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <SignIn.Step name=\"start\">\n    <Clerk.Link navigate=\"sign-up\">Sign up</Clerk.Link>\n  </SignIn.Step>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Using createRouteMatcher for Route Protection\nDESCRIPTION: Demonstrates how to use createRouteMatcher() to define protected routes. This snippet shows how to create a function that checks if a user is accessing protected dashboard or forum routes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/clerk-middleware.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/forum(.*)'])\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Handler for TanStack\nDESCRIPTION: Server-side setup of Clerk authentication handler for TanStack routes integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { createStartHandler, defaultStreamHandler } from '@tanstack/react-start/server'\nimport { getRouterManifest } from '@tanstack/react-start/router-manifest'\nimport { createRouter } from './router'\nimport { createClerkHandler } from '@clerk/tanstack-react-start/server'\n\nexport default createClerkHandler(\n  createStartHandler({\n    createRouter,\n    getRouterManifest,\n  }),\n)(defaultStreamHandler)\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidCSRFToken (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when a request is missing a CSRF token or the provided token is invalid, indicating a potential CSRF attack attempt. It includes a short message, a long message explaining the need for a valid CSRF token, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid or missing CSRF token\",\n  \"longMessage\": \"To protect against CSRF attacks, the given request must include a valid CSRF token.\",\n  \"code\": \"invalid_csrf_token_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Basic JWT Template Example with Static and Dynamic Values\nDESCRIPTION: Example of a JWT template showing both static values and shortcodes for dynamic values like user information.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/jwt-templates.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"aud\": \"https://example.com\",\n  \"interests\": [\"hiking\", \"knitting\"],\n  \"name\": \"{{user.first_name}}\",\n  \"surname\": \"{{user.last_name}}\",\n  \"email\": \"{{user.primary_email_address}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Signing Out All Sessions in iOS with Clerk\nDESCRIPTION: This Swift code demonstrates how to sign out all active sessions using the Clerk shared instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_8\n\nLANGUAGE: swift\nCODE:\n```\n// Use signOut to sign-out all active sessions.\ntry await Clerk.shared.signOut()\n```\n\n----------------------------------------\n\nTITLE: Updating Users.getOrganizationMembershipList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Users.getOrganizationMembershipList from directly returning data to returning an object with data and totalCount properties. This accommodates pagination in the Clerk Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient Parameters in JavaScript\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the createClerkClient function. This update aligns with the new naming convention for Clerk's API keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/nextjs/server'\n\ncreateClerkClient({ apiKey: '...' })\ncreateClerkClient({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Defining verifyClient Function in TypeScript\nDESCRIPTION: This snippet shows the function signature for the verifyClient method. It takes a session token as a string parameter and returns a Promise that resolves to a Client object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/client/verify-client.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifyClient(token: string): Promise<Client>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk with Next.js 12 using npm\nDESCRIPTION: Installs version 4.x of the @clerk/nextjs package which is compatible with Next.js 12 and older versions. This command specifies the caret range to ensure compatibility.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/usage-with-older-versions.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs@^4.0.0\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Clerk Integration\nDESCRIPTION: Configuration for the .env file to set up Clerk's public and secret keys for authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Rendering Apple Logo SVG with Dynamic Fill\nDESCRIPTION: SVG vector graphic of the Apple logo using a viewBox for scaling and a path element for the shape. Includes dynamic fill coloring that responds to light/dark mode through CSS variables.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/ios.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"-73 0 960 1000\">\n  <path\n    d=\"M788.1 340.9c-5.8 4.5-108.2 62.2-108.2 190.5 0 148.4 130.3 200.9 134.2 202.2-.6 3.2-20.7 71.9-68.7 141.9-42.8 61.6-87.5 123.1-155.5 123.1s-85.5-39.5-164-39.5c-76.5 0-103.7 40.8-165.9 40.8s-105.6-57-155.5-127C46.7 790.7 0 663 0 541.8c0-194.4 126.4-297.5 250.8-297.5 66.1 0 121.2 43.4 162.7 43.4 39.5 0 101.1-46 176.3-46 28.5 0 130.9 2.6 198.3 99.2zm-234-181.5c31.1-36.9 53.1-88.1 53.1-139.3 0-7.1-.6-14.3-1.9-20.1-50.6 1.9-110.8 33.7-147.1 75.8-28.5 32.4-55.1 83.6-55.1 135.5 0 7.8 1.3 15.6 1.9 18.1 3.2.6 8.4 1.3 13.6 1.3 45.4 0 102.5-30.4 135.5-71.3z\"\n    style={{ fill: 'var(--light, black) var(--dark, white)' }}\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updating Return Signature for Users.getOrganizationMembershipList in JavaScript\nDESCRIPTION: The return signature of Users.getOrganizationMembershipList has changed to include a totalCount property, making it easier to determine the total number of items in paginated responses from the Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Updating ClerkExpressRequireAuth Parameter in Clerk SDK (JavaScript)\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the ClerkExpressRequireAuth function from the Clerk SDK for Node.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\nimport { ClerkExpressRequireAuth } from '@clerk/clerk-sdk-node'\n\nClerkExpressRequireAuth({ apiKey: '...' })\nClerkExpressRequireAuth({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Organization.getInvitations\nDESCRIPTION: Shows the changes to pagination parameters in Organization.getInvitations method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Admin Role in User's publicMetadata\nDESCRIPTION: JSON configuration to manually assign the admin role to a user through the Clerk Dashboard. This is added to the user's publicMetadata.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"role\": \"admin\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk with Next.js 12 using yarn\nDESCRIPTION: Installs version 4.x of the @clerk/nextjs package using Yarn package manager. This ensures compatibility with Next.js 12 and older versions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/usage-with-older-versions.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs@^4.0.0\n```\n\n----------------------------------------\n\nTITLE: Using Include Component in MDX\nDESCRIPTION: Demonstrates how to use the Include component to inject the contents of another MDX file, useful for including partial files in multiple pages.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_15\n\nLANGUAGE: mdx\nCODE:\n```\n<Include src=\"_partials/code-example\" />\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Chrome Extension SDK using pnpm\nDESCRIPTION: Installs the latest version of the `@clerk/chrome-extension` SDK using the pnpm package manager to upgrade to Core 2 (version 1+).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/chrome-extension\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInButton in Astro\nDESCRIPTION: Demonstrates how to create a custom sign-in button using SignInButton in an Astro project, with the required 'asChild' prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_9\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { SignInButton } from '@clerk/astro/components'\n---\n\n<SignInButton asChild>\n  <button>Custom sign in button</button>\n</SignInButton>\n```\n\n----------------------------------------\n\nTITLE: Replacing `afterSignInUrl` with `signInFallbackRedirectUrl` in JSX\nDESCRIPTION: Demonstrates replacing the deprecated `afterSignInUrl` prop with the `signInFallbackRedirectUrl` prop on the `<SignIn>` component. This maintains the previous behavior of redirecting only if no `redirect_url` query parameter is present.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_5\n\nLANGUAGE: jsx\nCODE:\n```\n<SignIn afterSignInUrl=\"/foo\" />\n<SignIn signInFallbackRedirectUrl=\"/foo\" />\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationSwitcher in Remix\nDESCRIPTION: Example of how to use the OrganizationSwitcher component in a Remix application. This code creates a page that renders the OrganizationSwitcher component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-switcher.mdx#2025-04-23_snippet_3\n\nLANGUAGE: jsx\nCODE:\n```\nimport { OrganizationSwitcher } from '@clerk/remix'\n\nexport default function OrganizationSwitcherPage() {\n  return <OrganizationSwitcher />\n}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Waitlist Component Unmounting\nDESCRIPTION: Example of unmounting the Waitlist component using JavaScript with the Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerk = new Clerk('{{pub_key}}')\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"waitlist\"></div>\n`\n\nconst waitlistDiv = document.getElementById('waitlist')\n\nclerk.mountWaitlist(waitlistDiv)\n\n// ...\n\nclerk.unmountWaitlist(waitlistDiv)\n```\n\n----------------------------------------\n\nTITLE: Adding SDK Migration Example in TypeScript\nDESCRIPTION: Example showing how to update SDK keys and handle migrations in the SDK.tsx file\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nconst sdks = {\n-  'javascript': {\n+  'js': {\n       ...\n     }\n}\n\nconst sdkKeyMigrations = {\n+  'javascript': 'js',\n}\n```\n\n----------------------------------------\n\nTITLE: GetToken Implementation in Next.js Pages Router\nDESCRIPTION: Example of using getToken in a Next.js Pages Router API route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nimport type { NextApiRequest, NextApiResponse } from 'next'\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  const { getToken } = getAuth(req)\n\n  const template = 'test'\n\n  const token = await getToken({ template })\n\n  return res.json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Using UserProfile Component in Tanstack React Start\nDESCRIPTION: Demonstrates how to implement the <UserProfile /> component in a Tanstack React Start application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/user/user-profile.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { UserProfile } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/user-profile')({\n  component: UserProfile,\n})\n\nfunction UserProfile() {\n  return <UserProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Running Expo Web Project\nDESCRIPTION: Commands to start the Expo web project using different package managers. These commands will launch the web version of the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/web-support/custom-sign-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm run web\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn web\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm web\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun web\n```\n\n----------------------------------------\n\nTITLE: Defining Page Navigation Function Type in TypeScript\nDESCRIPTION: Type declaration for the fetchPage function that triggers loading a specific page by its number.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfetchPage: (page: number) => void\n```\n\n----------------------------------------\n\nTITLE: Organization Creation Parameter Update\nDESCRIPTION: Shows the change in Organization.create method parameter format from string to object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_35\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create('...')\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Installing the Clerk Express SDK using Package Managers (Bash)\nDESCRIPTION: Commands to install the `@clerk/express` package using various JavaScript package managers (npm, yarn, pnpm, bun). This SDK provides backend utilities required for integrating Clerk authentication and user management into an Express application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/express.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/express\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/express\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/express\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/express\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Cognito Migration (Shell)\nDESCRIPTION: Defines the structure and required variables for the `.env` file. This file stores necessary credentials and identifiers for both AWS (Access Key ID, Secret Access Key, Region) and Clerk (Secret Key), as well as Cognito details (User Pool ID, Client ID). It's crucial that the `CLERK_SECRET_KEY` points to the correct Clerk instance (dev/prod) and `COGNITO_CLIENT_ID` refers to the public client created during pre-flight checks.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-cognito.mdx#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nAWS_ACCESS_KEY_ID=\nAWS_SECRET_ACCESS_KEY=\nAWS_REGION=\n\nCOGNITO_USER_POOL_ID=\nCOGNITO_CLIENT_ID=\n\nCLERK_SECRET_KEY=\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/nextjs with npm\nDESCRIPTION: Command to install the Clerk Next.js SDK using npm package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Making a Domain Change via Clerk Backend API - Bash\nDESCRIPTION: This Bash snippet demonstrates how to use curl to send a POST request to the Clerk Backend API's change_domain endpoint to update the production domain of your Clerk instance. This requires your Clerk Secret Key for authentication, which must be passed in the Authorization header, and the new domain as the home_url parameter in JSON format. Replace YOUR_PROD_URL with your desired production domain. The response will confirm the domain change or provide error details. Make sure to update your DNS, SSL certificates, and Publishable Key after successfully changing your domain.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/changing-domains.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -XPOST -H 'Authorization: {{secret}}' -H \"Content-type: application/json\" -d '{\n\"home_url\": \"YOUR_PROD_URL\"\n}' 'https://api.clerk.com/v1/instance/change_domain'\n```\n\n----------------------------------------\n\nTITLE: Updating getOrganizationMemberships Method in Clerk SDK (JavaScript)\nDESCRIPTION: This snippet shows how to update the getOrganizationMemberships method call in the Clerk SDK. The method is now called on a user instance instead of the Clerk class.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nuser.getOrganizationMemberships()\n```\n\n----------------------------------------\n\nTITLE: Implementing Sign-in Route Component\nDESCRIPTION: React component for the sign-in route using Clerk's SignIn component with virtual routing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignIn } from '@clerk/chrome-extension'\n\nexport const SignInPage = () => {\n  return (\n    <>\n      <p>Sign In</p>\n      <SignIn routing=\"virtual\" />\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating SignOutButton Component Props\nDESCRIPTION: Example showing the replacement of signOutCallback prop with redirectUrl in SignOutButton component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_55\n\nLANGUAGE: jsx\nCODE:\n```\nimport { SignOutButton } from '@clerk/clerk-react'\n\nexport const Signout = () => {\n  return (\n    <SignOutButton\n      signOutCallback={() => {\n        window.location.href = '/your-path'\n      }}\n      redirectUrl=\"/your-path\"\n    >\n      <button>Sign Out</button>\n    </SignOutButton>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updating UserButton Props in React\nDESCRIPTION: Shows the change from userProfile to userProfileProps prop in the UserButton component.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_47\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton userProfile={} />\n<UserButton userProfileProps={} />\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidClerkSecretKey (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when the provided Clerk Secret Key is invalid. It includes a short message, a long message explaining the issue, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"The provided Clerk Secret Key is invalid. Make sure that your Clerk Secret Key is correct.\",\n  \"code\": \"clerk_key_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Organization List Iteration in JavaScript\nDESCRIPTION: Shows the change in iterating over organization list data after the core 2 release. The new structure includes a 'data' property that needs to be accessed for iteration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Migrating User.getOrganizationSuggestions Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for User.getOrganizationSuggestions have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await user.getOrganizationSuggestions({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating pagination parameters in Organization.getMembershipRequests\nDESCRIPTION: Demonstration of pagination argument changes in Organization.getMembershipRequests method where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' for clearer pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_15\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Redirect URL List Retrieval in JavaScript\nDESCRIPTION: Shows the change in the return structure of getRedirectUrlList method. The new version returns an object with 'data' and 'totalCount' properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_42\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Updated Return Signatures for List Methods\nDESCRIPTION: Shows the changes in return signatures for various list methods, changing from direct data return to an object containing both data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationMembershipList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Updating getRedirectUrlList Response Structure in JavaScript\nDESCRIPTION: Migration example showing the change in response structure for getRedirectUrlList. The function now returns an object with data and totalCount properties instead of just the data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_43\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.redirectUrls.getRedirectUrlList()\nconst { data, totalCount } = await clerkClient.redirectUrls.getRedirectUrlList()\n```\n\n----------------------------------------\n\nTITLE: Updating Biometric Credentials in Expo React Native\nDESCRIPTION: This code snippet demonstrates how to update stored biometric credentials for the logged-in user in an Expo React Native app using the useLocalCredentials() hook, particularly when changing the user's password.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/local-credentials.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nimport { useUser, useClerk } from '@clerk/clerk-expo'\nimport { useLocalCredentials } from '@clerk/clerk-expo/local-credentials'\n\nexport default function Page() {\n  const { user } = useUser()\n  const [currentPassword, setCurrentPassword] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  const { userOwnsCredentials, setCredentials } = useLocalCredentials()\n\n  const changePassword = React.useCallback(async () => {\n    try {\n      await user?.updatePassword({\n        currentPassword: currentPassword,\n        newPassword: password,\n      })\n\n      if (userOwnsCredentials) {\n        await setCredentials({\n          password,\n        })\n      }\n    } catch (err: any) {\n      console.error(JSON.stringify(err, null, 2))\n    }\n  }, [currentPassword, password])\n\n  return (\n    <View>\n      <TextInput\n        autoCapitalize=\"none\"\n        value={currentPassword}\n        placeholder=\"Current password...\"\n        secureTextEntry={true}\n        onChangeText={(currentPassword) => setCurrentPassword(currentPassword)}\n      />\n      <TextInput\n        value={password}\n        placeholder=\"Password...\"\n        secureTextEntry={true}\n        onChangeText={(password) => setPassword(password)}\n      />\n      <Button title=\"Update password\" onPress={changePassword} />\n    </View>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for Organization.getInvitations in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the Organization.getInvitations method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_13\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Get Count Function Definition\nDESCRIPTION: TypeScript function signature for retrieving the total number of users with optional filtering parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-count.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getCount(params: UserCountParams): Promise<number>\n```\n\n----------------------------------------\n\nTITLE: Applying Dark Theme in Nuxt Config\nDESCRIPTION: Example of applying the Dark theme to all Clerk components in a Nuxt configuration file.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/themes.mdx#2025-04-23_snippet_7\n\nLANGUAGE: ts\nCODE:\n```\nimport { dark } from '@clerk/themes'\n\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    appearance: {\n      baseTheme: dark,\n    },\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: Defining Revalidation Function Type in TypeScript\nDESCRIPTION: Type declaration for the revalidate function that triggers a data refresh for the current page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nrevalidate: () => void\n```\n\n----------------------------------------\n\nTITLE: Installing Expo Secure Store Dependencies\nDESCRIPTION: Commands for installing the required expo-secure-store package using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/offline-support.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add expo-secure-store\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add expo-secure-store\n```\n\n----------------------------------------\n\nTITLE: Deleting an Organization Example\nDESCRIPTION: Example of how to use the clerkClient.organizations.deleteOrganization method to delete an organization using its ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/delete-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst response = await clerkClient.organizations.deleteOrganization(organizationId)\n```\n\n----------------------------------------\n\nTITLE: Initializing Standalone Clerk Client\nDESCRIPTION: Creating a standalone Clerk client instance using createClerkClient with a secret key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nimport { createClerkClient } from '@clerk/backend'\n\nconst clerkClient = createClerkClient({ secretKey: process.env.CLERK_SECRET_KEY })\n```\n\n----------------------------------------\n\nTITLE: Rendering OrganizationProfile in Tanstack React Start\nDESCRIPTION: Example of how to use the <OrganizationProfile /> component in a Tanstack React Start application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-profile.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { OrganizationProfile } from '@clerk/tanstack-react-start'\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/organization-profile')({\n  component: OrganizationProfile,\n})\n\nfunction OrganizationProfile() {\n  return <OrganizationProfile />\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Chrome Extension Public Key Environment Variable\nDESCRIPTION: Creates an environment file to store the Chrome Extension public key for maintaining a consistent CRX ID.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/configure-consistent-crx-id.mdx#2025-04-23_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nCRX_PUBLIC_KEY=\"<PUBLIC KEY>\"\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/nextjs with bun\nDESCRIPTION: Command to install the Clerk Next.js SDK using bun package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/waitlist.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Running Clerk Upgrade CLI using npx\nDESCRIPTION: Executes the `@clerk/upgrade` CLI tool via npx to scan the codebase and identify necessary changes for upgrading from Core 1. The `--from=core-1` flag specifies the version being upgraded from.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nnpx @clerk/upgrade --from=core-1\n```\n\n----------------------------------------\n\nTITLE: Metadata Access in JWT Templates\nDESCRIPTION: Example demonstrating how to access nested metadata fields using dot notation in JWT templates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/jwt-templates.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"likes_to_do\": \"{{user.public_metadata.interests}}\",\n  \"shipping_address\": \"{{user.public_metadata.addresses.Home}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Usage of SignInButton in Vue\nDESCRIPTION: Shows how to create a custom sign-in button using SignInButton in a Vue.js application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/unstyled/sign-in-button.mdx#2025-04-23_snippet_10\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nimport { SignInButton } from '@clerk/vue'\n</script>\n\n<template>\n  <SignInButton>\n    <button>Custom sign in button</button>\n  </SignInButton>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk Environment Variables\nDESCRIPTION: Environment variable configuration for Clerk API keys in the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/tanstack-react-start.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nVITE_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Defining Global TypeScript Types for Custom Session Claims\nDESCRIPTION: Example of setting up global TypeScript types for custom session claims by creating a CustomJwtSessionClaims interface.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/custom-session-token.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nexport {}\n\ndeclare global {\n  interface CustomJwtSessionClaims {\n    fullName?: string\n    primaryEmail?: string\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PasswordFactor Interface for Password Authentication\nDESCRIPTION: Specifies the type definition for password verification factor with a strategy property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\ntype PasswordFactor = {\n  strategy: PasswordStrategy\n}\n```\n\n----------------------------------------\n\nTITLE: Page Metadata Configuration in MDX\nDESCRIPTION: Example of required frontmatter fields for documentation pages including title and description\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_4\n\nLANGUAGE: mdx\nCODE:\n```\n---\ntitle: Page title\ndescription: Some brief, but effective description of the page's content.\n---\n```\n\n----------------------------------------\n\nTITLE: GetToken Implementation in Next.js App Router\nDESCRIPTION: Example of using getToken in a Next.js App Router API route.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport { auth } from '@clerk/nextjs/server'\n\nexport async function GET() {\n  const { getToken } = await auth()\n\n  const template = 'supabase'\n\n  const token = await getToken({ template })\n\n  return Response.json({ token })\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Previous Page Function Type in TypeScript\nDESCRIPTION: Type declaration for the fetchPrevious function that loads the previous page in the pagination sequence.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfetchPrevious: () => void\n```\n\n----------------------------------------\n\nTITLE: Configuring MDX Heading ID Override\nDESCRIPTION: Shows how to override the auto-generated heading ID with a custom one using the id prop in MDX.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_6\n\nLANGUAGE: mdx\nCODE:\n```\n## Lorem ipsum {{ id: 'lipsum' }}\n```\n\n----------------------------------------\n\nTITLE: Defining Next Page Function Type in TypeScript\nDESCRIPTION: Type declaration for the fetchNext function that loads the next page in the pagination sequence.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfetchNext: () => void\n```\n\n----------------------------------------\n\nTITLE: Implementing MFA Enforcement Middleware in Nuxt\nDESCRIPTION: A Nuxt custom middleware implementation that enforces MFA by checking if users have enabled it and throwing errors when they haven't. It handles different routes and validates the custom 'isMfa' claim.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/force-mfa.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { clerkMiddleware } from '@clerk/nuxt/server'\n\nexport default clerkMiddleware(async (event) => {\n  const isMFARoute = event.path.startsWith('/account/manage-mfa/add')\n  const isSignInRoute = event.path.startsWith('/sign-in')\n\n  const { userId, sessionClaims } = event.context.auth()\n\n  // Redirect to homepage if the user is signed in and on the sign-in page\n  if (userId !== null && isSignInRoute) {\n    throw createError({\n      statusMessage: 'You are already signed in.',\n    })\n  }\n\n  // Redirect to MFA setup page if MFA is not enabled\n  if (userId !== null && !isMFARoute) {\n    if (sessionClaims.isMfa === undefined) {\n      throw createError({\n        statusMessage: 'You need to add the `isMfa` claim to your session token.',\n      })\n    }\n    if (sessionClaims.isMfa === false) {\n      throw createError({\n        statusMessage: 'You need to enable MFA for your account.',\n      })\n    }\n  }\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n}\n```\n\n----------------------------------------\n\nTITLE: Defining the EnterpriseAccountConnection Interface in TypeScript\nDESCRIPTION: This TypeScript interface defines the structure of an enterprise account connection, including properties for configuration, authentication protocols, and metadata. It specifies various boolean flags for connection behavior, identification details, and timestamp information.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/enterprise-account-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface EnterpriseAccountConnection {\n  active: boolean;\n  allow_idp_initiated: boolean;\n  allow_subdomains: boolean;\n  disable_additional_identifications: boolean;\n  domain: string;\n  id: string;\n  logo_public_url: string | null;\n  name: string;\n  protocol: 'saml' | 'oauth';\n  provider: \"saml_okta\" | \"saml_google\" | \"saml_microsoft\" | \"saml_custom\" | \"oauth_${OAuthProvider}\";\n  sync_user_attributes: boolean;\n  created_at: number;\n  updated_at: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Home Route Component\nDESCRIPTION: Basic React component implementation for the home route displaying a welcome message.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nexport const Home = () => {\n  return (\n    <>\n      <h1>Clerk + Chrome Extension + React Router</h1>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Session Management API Updates\nDESCRIPTION: Shows the transition from setSession to setActive with new parameter format and organization support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nawait setSession('sessionID', () => void)\nawait setActive({ session: 'sessionID', beforeEmit: () => void })\n\nawait setSession(sessionObj)\nawait setActive({ session: sessionObj })\n\nawait setSession(sessionObj, () => void)\nawait setActive({ session: sessionObj, beforeEmit: () => void })\n\nawait setActive({\n  session: 'sessionID',\n  organization: 'orgID',\n  beforeEmit: () => void,\n})\nawait setActive({\n  session: sessionObj,\n  organization: orgObj,\n  beforeEmit: () => void,\n})\n```\n\n----------------------------------------\n\nTITLE: Accessing JWT Session Claims in Fastify\nDESCRIPTION: Illustrates how to retrieve the `JwtPayload` containing session claims within a Fastify application using `getAuth` from the `@clerk/fastify` package. This demonstrates where the removed `orgs` claim (in Core 2) would previously have been accessed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_16\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/fastify'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Implementing TypeScript Addition Function\nDESCRIPTION: Example of a basic TypeScript function with type annotations for adding two numbers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\nfunction add(a: number, b: number) {\n  return a + b\n}\n```\n\n----------------------------------------\n\nTITLE: Destroying Organization Membership in TypeScript\nDESCRIPTION: Method to delete a membership from an organization. Returns a Promise resolving to the deleted OrganizationMembership object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-membership.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction destroy(): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Environment Variables Configuration\nDESCRIPTION: Example of setting up Clerk environment variables with placeholders for API keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_11\n\nLANGUAGE: sh\nCODE:\n```\nNEXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nCLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Paginated Results Example\nDESCRIPTION: Example demonstrating how to limit the number of results returned using the limit parameter.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-organization-membership-list.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst { data, totalCount } = await clerkClient.users.getOrganizationMembershipList({\n  userId,\n  // returns the first 10 memberships\n  limit: 10,\n})\n```\n\n----------------------------------------\n\nTITLE: Installing Astro React Integration\nDESCRIPTION: Commands to add the Astro React integration using different package managers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/react.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpx astro add react\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn astro add react\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm astro add react\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun astro add react\n```\n\n----------------------------------------\n\nTITLE: Implementing Waitlist Component in Astro\nDESCRIPTION: Basic implementation of the Waitlist component in an Astro application using the @clerk/astro package.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/waitlist.mdx#2025-04-23_snippet_2\n\nLANGUAGE: astro\nCODE:\n```\n---\nimport { Waitlist as WaitlistAstro } from '@clerk/astro/components'\n---\n\n<WaitlistAstro />\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.create Method Parameters in Clerk SDK\nDESCRIPTION: Migration example for the Organization.create method, which now requires an object with a name property instead of accepting a string directly.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/remix.mdx#2025-04-23_snippet_17\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create('...')\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Deprecated Clerk Redirect Variables (Next.js)\nDESCRIPTION: Lists deprecated Next.js public environment variables `NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL` and `NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL`. These were used for post-authentication redirects but are superseded by the `NEXT_PUBLIC_CLERK_..._FALLBACK_REDIRECT_URL` and `NEXT_PUBLIC_CLERK_..._FORCE_REDIRECT_URL` variables, which offer more control and should be used in new projects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/clerk-environment-variables.mdx#2025-04-23_snippet_10\n\nLANGUAGE: markdown\nCODE:\n```\n| Variable | Description |\n| - | - |\n| `NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL` | Full URL or path to navigate to after successful sign up. Defaults to `/`. `NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL` and `NEXT_PUBLIC_CLERK_SIGN_UP_FORCE_REDIRECT_URL` have priority and should be used instead. |\n| `NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL` | Full URL or path to navigate to after successful sign in. Defaults to `/`. `NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL` and `NEXT_PUBLIC_CLERK_SIGN_IN_FORCE_REDIRECT_URL` have priority and should be used instead. |\n```\n\n----------------------------------------\n\nTITLE: React Component Example with Highlighting\nDESCRIPTION: Example showing React components with line highlighting functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_9\n\nLANGUAGE: tsx\nCODE:\n```\nexport function Page() {\n  return null\n}\n\nexport function Layout() {\n  return null\n}\n```\n\n----------------------------------------\n\nTITLE: Exporting Firebase Users to JSON with CLI - Bash\nDESCRIPTION: Exports all users from a specified Firebase project to a JSON file using the Firebase CLI. Requires an authenticated session and the correct project ID. Produces a file, 'firebase-users.json', containing user account hashes and identifiers for migration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nfirebase auth:export firebase-users.json --format=json --project <YOUR_PROJECT_ID>\n\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Structure for Custom Invitation Sign-up in JavaScript\nDESCRIPTION: This HTML file sets up the structure for a custom sign-up page using Clerk with JavaScript. It includes a form for user input and placeholders for signed-in user components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/application-invitations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-up\">\n      <h2>Sign up</h2>\n      <form id=\"sign-up-form\">\n        <label for=\"firstName\">Enter first name</label>\n        <input name=\"firstName\" id=\"firstName\" />\n        <label for=\"lastName\">Enter last name</label>\n        <input name=\"lastName\" id=\"lastName\" />\n        <label for=\"password\">Enter password</label>\n        <input name=\"password\" id=\"password\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Authenticating with Popup in Clerk\nDESCRIPTION: Method signature for initiating authentication via a popup window for OAuth or SAML providers. This allows users to authenticate with external accounts without navigating away from the current page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithPopup(params: AuthenticateWithPopupParams): Promise<void>\n```\n\n----------------------------------------\n\nTITLE: Configuring Memory Router Setup\nDESCRIPTION: Main application entry point configuring routes using React Router's createMemoryRouter and setting up the root layout structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_6\n\nLANGUAGE: typescript\nCODE:\n```\nimport React from 'react'\n\nimport '../style.css'\n\nimport { createMemoryRouter, RouterProvider } from 'react-router'\n\nimport { RootLayout } from './layouts/root-layout'\nimport { Home } from './routes/home'\nimport { Settings } from './routes/settings'\nimport { SignInPage } from './routes/sign-in'\nimport { SignUpPage } from './routes/sign-up'\n\nconst router = createMemoryRouter([\n  {\n    element: <RootLayout />,\n    children: [\n      { path: '/', element: <Home /> },\n      { path: '/sign-in', element: <SignInPage /> },\n      { path: '/sign-up', element: <SignUpPage /> },\n      { path: '/settings', element: <Settings /> },\n    ],\n  },\n])\n\nexport default function PopupIndex() {\n  return <RouterProvider router={router} />\n}\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for User.getOrganizationMemberships in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the User.getOrganizationMemberships method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_17\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: OrganizationInvitation Type Definition\nDESCRIPTION: Type definition for the Backend OrganizationInvitation object showing all available properties and their types. The object includes basic identification fields, invitation details, timestamps, and both public and private metadata fields.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-organization-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype OrganizationInvitation = {\n  id: string;\n  emailAddress: string;\n  role: string;\n  organizationId: string;\n  createdAt: number;\n  updatedAt: number;\n  status?: 'pending' | 'accepted' | 'revoked';\n  publicMetadata: OrganizationInvitationPublicMetadata;\n  privateMetadata: OrganizationInvitationPrivateMetadata;\n}\n```\n\n----------------------------------------\n\nTITLE: Nested Loading States for Disabling Components\nDESCRIPTION: Demonstrates how to use nested Loading components to disable UI elements based on different loading states in the application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/common.mdx#2025-04-23_snippet_18\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Root>\n  <Clerk.Loading>\n    {(isGlobalLoading) => (\n      <SignIn.Step name=\"start\">\n        <Clerk.Connection name=\"google\" disabled={isGlobalLoading}>\n          <Clerk.Loading scope=\"provider:google\">\n            {(isLoading) => (isLoading ? 'Loading...' : 'Continue with Google')}\n          </Clerk.Loading>\n        </Clerk.Connection>\n        <SignIn.Action submit disabled={isGlobalLoading}>\n          <Clerk.Loading>{(isLoading) => (isLoading ? 'Loading...' : 'Submit')}</Clerk.Loading>\n        </SignIn.Action>\n      </SignIn.Step>\n    )}\n  </Clerk.Loading>\n</SignIn.Root>\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Import Pattern for Fastify\nDESCRIPTION: Example showing the change in import pattern for Clerk in Fastify integration, moving from a default import to a named import of createClerkClient.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_37\n\nLANGUAGE: javascript\nCODE:\n```\nimport Clerk from '@clerk/fastify'\nimport { createClerkClient } from '@clerk/fastify'\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Clients.getClientList\nDESCRIPTION: Shows the changes to pagination parameters in Clients.getClientList method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await clients.getClientList({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Return Signature for Users.getOrganizationInvitationList in JavaScript\nDESCRIPTION: The return signature of Users.getOrganizationInvitationList has changed to include a totalCount property, making it easier to determine the total number of items in paginated responses from the Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getOrganizationInvitationList()\nconst { data, totalCount } = await clerkClient.users.getOrganizationInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Updated Organization List Return Types\nDESCRIPTION: Demonstrates the change in return types for organization-related list methods, adding totalCount to the response structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_25\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...'\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters in Organization Methods\nDESCRIPTION: Shows the migration from limit/offset to pageSize/initialPage pagination parameters in various organization methods. The change affects getRoles, getMemberships, getDomains, getInvitations, and getMembershipRequests methods.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_22\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.getMemberships pagination parameters in JavaScript\nDESCRIPTION: This snippet shows the change in pagination parameters for Organization.getMemberships where 'limit' has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage' to make pagination control clearer and simpler.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMemberships({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Running Expo Web Application\nDESCRIPTION: Commands for different package managers to start the Expo web application for testing the sign-in-or-up page implementation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/expo/web-support/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm run web\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn web\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm web\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun web\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: EmailAddressExists (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when attempting to create or add an email address that already exists for another user. It includes a short message, a long message stating the conflict, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already exists\",\n  \"longMessage\": \"This email address already exists.\",\n  \"code\": \"email_address_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using Bun\nDESCRIPTION: This shell command employs the Bun toolkit's `dev` script to start the application's development server. Executing this command facilitates local development and testing, allowing access to features like the custom sign-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using Yarn\nDESCRIPTION: This shell command uses the Yarn package manager's `dev` script to start the application's development server. Running this command enables local testing and viewing of the application, including the custom sign-up page.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-up-page.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dev\n```\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Parameters in Organization.getMembershipRequests\nDESCRIPTION: Shows the changes to pagination parameters in Organization.getMembershipRequests method where 'limit' is renamed to 'pageSize' and 'offset' is renamed to 'initialPage'. This modification aims to make pagination control more intuitive.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating Error Exports in Clerk\nDESCRIPTION: Moving error-related exports to dedicated @clerk/nextjs/errors module.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport {\n  isClerkAPIResponseError,\n  isEmailLinkError,\n  isKnownError,\n  isMetamaskError,\n  EmailLinkErrorCode,\n} from '@clerk/nextjs/errors'\n```\n\n----------------------------------------\n\nTITLE: Installing Latest Clerk Next.js SDK via npm (Bash)\nDESCRIPTION: This command uses npm (Node Package Manager) to install the latest available version of the `@clerk/nextjs` SDK. In the context provided, following a 'Core 2' release where the Next.js SDK moved to v5, this command would install v5. It requires having npm installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/sdk-versioning.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Updated Response Format for Users.getUserOauthAccessToken in JavaScript\nDESCRIPTION: The getUserOauthAccessToken method now returns an object with data and totalCount properties instead of directly returning data. This change aligns with the Backend API's paginated response format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Migrating Organization.getInvitations Pagination Arguments in JavaScript\nDESCRIPTION: Shows how the pagination arguments for Organization.getInvitations have changed. The 'limit' parameter is now 'pageSize', and 'offset' is now 'initialPage' to make pagination control clearer.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_19\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Next.js CreateOrganization Implementation\nDESCRIPTION: Basic implementation of the CreateOrganization component in Next.js framework.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\nimport { CreateOrganization } from '@clerk/nextjs'\n\nexport default function CreateOrganizationPage() {\n  return <CreateOrganization />\n}\n```\n\n----------------------------------------\n\nTITLE: Using Salutation Component in Clerk SignIn Flow\nDESCRIPTION: Demonstrates how to use the Salutation component to display a personalized greeting within a password strategy. The component attempts to resolve the user's first name, last name, or identifier in that order to create a personalized welcome message.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/customization/elements/reference/sign-in.mdx#2025-04-23_snippet_14\n\nLANGUAGE: tsx\nCODE:\n```\n<SignIn.Strategy name=\"password\">\n  <p>\n    Welcome back <SignIn.Salutation />!\n  </p>\n</SignIn.Strategy>\n```\n\n----------------------------------------\n\nTITLE: Configuring Clerk-Okta SAML Attribute Mapping\nDESCRIPTION: Table showing the mapping between Clerk attributes and Okta claims for SAML integration. Maps essential user data fields like email, first name, and last name.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/enterprise-connections/saml/okta.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Clerk attribute | Okta claim |\n| - | - |\n| `mail` | `user.email` |\n| `firstName` | `user.firstName` |\n| `lastName` | `user.lastName` |\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for Organization.getDomains in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the Organization.getDomains method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_12\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await organization.getDomains({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Creating Organization Membership Example with Clerk Backend SDK\nDESCRIPTION: Example of using createOrganizationMembership() to add a user to an organization with the 'org:member' role. It demonstrates setting the organizationId, userId, and role parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization-membership.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst organizationId = 'org_123'\n\nconst userId = 'user_123'\n\nconst role = 'org:member'\n\nconst response = await clerkClient.organizations.createOrganizationMembership({\n  organizationId,\n  userId,\n  role,\n})\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization.getMembershipRequests in JavaScript\nDESCRIPTION: The pagination arguments for Organization.getMembershipRequests have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getMembershipRequests({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Migrating User.getOrganizationMembershipList Return Type in JavaScript\nDESCRIPTION: Shows how the return type of User.getOrganizationMembershipList has changed. Instead of returning an array directly, it now returns an object with data array and totalCount properties to provide information about pagination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n\nmembershipList.forEach(() => {})\nmembershipList.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Updating User OAuth Access Token Retrieval in JavaScript\nDESCRIPTION: This snippet shows the change in response payload for the getUserOauthAccessToken function. The new format returns an object with 'data' and 'totalCount' properties, aligning with the Backend API's paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Configuring Nuxt to Skip Default Clerk Middleware\nDESCRIPTION: A Nuxt configuration snippet that disables the default Clerk middleware to allow for custom middleware implementation. Sets the 'skipServerMiddleware' option to true in the clerk configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/configuration/force-mfa.mdx#2025-04-23_snippet_3\n\nLANGUAGE: tsx\nCODE:\n```\nexport default defineNuxtConfig({\n  modules: ['@clerk/nuxt'],\n  clerk: {\n    skipServerMiddleware: true,\n  },\n})\n```\n\n----------------------------------------\n\nTITLE: URL Building Examples - JavaScript\nDESCRIPTION: Examples of using Clerk's URL building methods for navigation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nawait clerk.buildHomeUrl()\n\nawait clerk.buildSignInUrl({\n  signInForceRedirectUrl: '/dashboard',\n  signUpForceRedirectUrl: '/dashboard',\n})\n\nawait clerk.buildSignUpUrl({\n  signInForceRedirectUrl: '/dashboard',\n  signUpForceRedirectUrl: '/dashboard',\n})\n```\n\n----------------------------------------\n\nTITLE: User Private Metadata Interface Definition in TypeScript\nDESCRIPTION: Interface definition for storing private metadata for users with flexible key-value pairs.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/metadata.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ninterface UserPrivateMetadata {\n  [k: string]: unknown\n}\n```\n\n----------------------------------------\n\nTITLE: Example Usage of lockUser Function\nDESCRIPTION: Example showing how to use the lockUser method with the Clerk client to lock a specific user account.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/lock-user.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst userId = 'user_123'\n\nconst response = await clerkClient.users.lockUser(userId)\n```\n\n----------------------------------------\n\nTITLE: Updating Organization.create Parameters in JavaScript\nDESCRIPTION: Example showing the change in Organization.create method parameters. Instead of accepting a string directly, it now requires an object with a name property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_47\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.create('...')\nOrganization.create({ name: '...' })\n```\n\n----------------------------------------\n\nTITLE: Clerk `CannotTransferToAccountWithoutPaymentMethod` Error (JSON)\nDESCRIPTION: Represents the JSON error response when a user tries to transfer a paid application to an account (workspace or organization) that has billing information set up but lacks an associated payment method. A valid payment method is required for accounts owning paid apps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"cannot transfer paid application, missing payment method\",\n  \"longMessage\": \"The selected account doesn't have any payment methods associated with it.\",\n  \"code\": \"transfer_paid_app_to_account_with_no_payment_method_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Return Type for Organizations.getOrganizationInvitationList in JavaScript\nDESCRIPTION: The return type for Organizations.getOrganizationInvitationList has changed from an array of items to an object containing data array and totalCount, making it easier to work with paginated API responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_34\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.organizations.getOrganizationInvitationList({\n  organizationId: '...',\n})\n\ndata.forEach(() => {})\ndata.data.forEach(() => {})\n```\n\n----------------------------------------\n\nTITLE: Defining Sign-up Forbidden Access Error Response in Clerk (JSON)\nDESCRIPTION: This snippet represents the JSON error response for 'SignUpForbiddenAccess', which occurs when access to a specific sign-up is restricted. It features short and long error messages along with a code indicating forbidden access. Applications should use this response to inform users when their access is denied due to permission restrictions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Sign up forbidden\\\",\\n  \\\"longMessage\\\": \\\"Access to this sign up is forbidden\\\",\\n  \\\"code\\\": \\\"resource_forbidden\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Manual CSP Configuration in Next.js (JavaScript)\nDESCRIPTION: Demonstrates how to manually define and apply a Content Security Policy header in a Next.js `next.config.js` file. It includes the minimum required directives for Clerk and typical application assets, applied globally using the `async headers()` function. This method requires manually managing all directives.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/security/clerk-csp.mdx#_snippet_5\n\nLANGUAGE: JavaScript\nCODE:\n```\nconst cspHeader = `\n  default-src 'self';\n  script-src 'self' 'unsafe-inline' 'unsafe-eval' https://{{fapi_url}} https://challenges.cloudflare.com;\n  connect-src 'self' https://{{fapi_url}};\n  img-src 'self' https://img.clerk.com;\n  worker-src 'self' blob:;\n  style-src 'self' 'unsafe-inline';\n  frame-src 'self' https://challenges.cloudflare.com;\n  form-action 'self';\n`\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  async headers() {\n    return [\n      {\n        source: '/(.*)',\n        headers: [\n          {\n            key: 'Content-Security-Policy',\n            value: cspHeader.replace(/\\n/g, ''),\n          },\n        ],\n      },\n    ]\n  },\n}\n\nmodule.exports = nextConfig\n```\n\n----------------------------------------\n\nTITLE: Attempt Email Verification Method Declaration\nDESCRIPTION: Method signature for verifying an email address using a one-time code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_4\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptVerification(params: AttemptEmailAddressVerificationParams): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Defining Invalid CAPTCHA Token Error Response in Clerk (JSON)\nDESCRIPTION: This snippet defines the Clerk error response returned as 'CaptchaInvalid', indicating that the provided CAPTCHA token is not valid. The response contains only a short message and error code, with no long message included. Use this error to request the user retry the CAPTCHA verification step.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-up.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Invalid token\\\",\\n  \\\"code\\\": \\\"captcha_invalid\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Nesting <If /> Components for Granular Conditional Rendering in MDX\nDESCRIPTION: Illustrates nesting `<If />` components in MDX. The outer `<If>` renders content if the active SDK is Next.js or Remix. The inner `<If>` further restricts its specific content to only render when the active SDK is Next.js, within the broader Next.js/Remix context.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_19\n\nLANGUAGE: mdx\nCODE:\n```\n<If sdk={['nextjs', 'remix']}>\n  This content will only be rendered if the active SDK is Next.js or Remix.\n  <If sdk=\"nextjs\">This content will only be rendered if the active SDK is Next.js</If>\n</If>\n```\n\n----------------------------------------\n\nTITLE: Logging in to Firebase via CLI - Bash\nDESCRIPTION: Logs the user into Firebase through the CLI, which is required for permissioned access to Firebase projects and resources. This step must occur before running export commands or any administrative tasks. Requires that the Firebase CLI is installed.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nfirebase login\n\n```\n\n----------------------------------------\n\nTITLE: getSession Function Signature in TypeScript\nDESCRIPTION: Function signature for retrieving a single session by its ID. Returns a Promise that resolves to a Session object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/get-session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getSession(sessionId: string): Promise<Session>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js SDK using yarn (Bash)\nDESCRIPTION: Command to install the Clerk Next.js SDK (`@clerk/nextjs`) using the yarn package manager. This serves as an alternative installation method to npm.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `InvalidStrategyForUser` in JSON\nDESCRIPTION: This JSON object defines the structure for the `InvalidStrategyForUser` error in Clerk. This error occurs when a verification strategy used during sign-in (e.g., password, OTP) is not valid or enabled for the specific user account. It includes `shortMessage`, `longMessage`, and the `code` 'strategy_for_user_invalid'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid verification strategy\",\n  \"longMessage\": \"The verification strategy is not valid for this account\",\n  \"code\": \"strategy_for_user_invalid\"\n}\n```\n\n----------------------------------------\n\nTITLE: Preparing Domain Verification - TypeScript Method Definition\nDESCRIPTION: Method signature for initiating the domain verification process. Takes PrepareAffiliationVerificationParams and returns a Promise resolving to an OrganizationDomain object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-domain.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareAffiliationVerification(\n  params: PrepareAffiliationVerificationParams,\n): Promise<OrganizationDomain>\n```\n\n----------------------------------------\n\nTITLE: Defining updateOrganizationMembershipMetadata Function in TypeScript\nDESCRIPTION: This snippet defines the function signature for updateOrganizationMembershipMetadata. It takes UpdateOrganizationMembershipMetadataParams as input and returns a Promise resolving to an OrganizationMembership object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/update-organization-membership-metadata.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateOrganizationMembershipMetadata(\n  params: UpdateOrganizationMembershipMetadataParams,\n): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Attempting Domain Verification - TypeScript Method Definition\nDESCRIPTION: Method signature for completing the domain verification process using a one-time code. Takes AttemptAffiliationVerificationParams and returns a Promise resolving to an OrganizationDomain object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/organization-domain.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction attemptAffiliationVerification(\n  params: AttemptAffiliationVerificationParams,\n): Promise<OrganizationDomain>\n```\n\n----------------------------------------\n\nTITLE: Defining FormIdentifierExistsCode Error in JSON\nDESCRIPTION: This JSON object represents the error returned during sign-up when the chosen identifier (like email or username, represented by `%s`) already exists for another account. It includes a `shortMessage` prompting the user to try a different identifier and a unique `code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/forms.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"That %s is taken. Please try another.\",\n  \"code\": \"form_identifier_exists\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Organization Membership Function Signature in TypeScript\nDESCRIPTION: Function signature for createOrganizationMembership(), which takes CreateOrganizationMembershipParams and returns a Promise resolving to an OrganizationMembership object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/organization/create-organization-membership.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction createOrganizationMembership(\n  params: CreateOrganizationMembershipParams,\n): Promise<OrganizationMembership>\n```\n\n----------------------------------------\n\nTITLE: Switching Between Sessions in iOS with Clerk\nDESCRIPTION: This Swift code shows how to get available sessions and switch between them using the Clerk shared instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/multi-session-applications.mdx#2025-04-23_snippet_5\n\nLANGUAGE: swift\nCODE:\n```\n// You can get all the available sessions through the client\nvar availableSessions: [Session] { Clerk.shared.client?.sessions ?? [] }\n\n// Use setActive to set the active session.\ntry await Clerk.shared.setActive(sessionId: session.id)\n```\n\n----------------------------------------\n\nTITLE: Updated MultiSessionAppSupport Import Path\nDESCRIPTION: Shows the change in import path for MultiSessionAppSupport from @clerk/nextjs to @clerk/nextjs/internal. This is an internal import and not covered by semver guarantees.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_23\n\nLANGUAGE: javascript\nCODE:\n```\nimport { MultiSessionAppSupport } from '@clerk/nextjs'\nimport { MultiSessionAppSupport } from '@clerk/nextjs/internal'\n```\n\n----------------------------------------\n\nTITLE: Updating `redirect` Import Path to Internal in JavaScript\nDESCRIPTION: Demonstrates updating the import path for the `redirect` function to `@clerk/backend/internal`. Moving this function to the `/internal` path indicates it's primarily for internal Clerk usage and is not subject to standard semantic versioning rules. External usage is discouraged.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\n    import { redirect } from '@clerk/backend'\n    import { redirect } from '@clerk/backend/internal'\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using Bun (Bash)\nDESCRIPTION: This command uses the Bun runtime and package manager to execute the `dev` script defined in the project's `package.json` file, typically starting the development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nbun dev\n```\n```\n\n----------------------------------------\n\nTITLE: Creating Allowlist Identifier Example Usage\nDESCRIPTION: Example showing how to create an allowlist identifier for an email address with notifications disabled using the clerkClient.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/create-allowlist-identifier.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.allowlistIdentifiers.createAllowlistIdentifier({\n  identifier: 'test@example.com',\n  notify: false,\n})\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk Frontend API URL in Environment Variables\nDESCRIPTION: Environment variable configuration for storing the Clerk issuer URL, which will be used in the Grafbase schema configuration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/grafbase.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_FRONTEND_API_URL={{fapi_url}}\n```\n\n----------------------------------------\n\nTITLE: Defining Billing Account Not Found Error in Clerk - JSON\nDESCRIPTION: This snippet describes the standard JSON error response when a requested billing account cannot be found by its ID. No external dependencies are required, as this is a static JSON object for documentation. Inputs include the billing account ID (represented by <baID> in the longMessage), and outputs are a JSON object with specified keys: shortMessage, longMessage, and code. This snippet is intended for consumer reference to handle 'resource_not_found_code' errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing-accounts.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Billing account not found\\\",\\n  \\\"longMessage\\\": \\\"No billing account was found with ID <baID>\\\",\\n  \\\"code\\\": \\\"resource_not_found_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Defining SignUp InitialValues Type for Clerk Forms - TypeScript\nDESCRIPTION: This snippet defines a TypeScript type called SignUpInitialValues, specifying optional properties such as emailAddress, username, phoneNumber, firstName, and lastName—all strings or undefined. Intended for use as the type annotation on the initialValues prop of Clerk's sign-up form, this ensures that developers pass the right structure and enables type-checking and auto-completion in editors. Dependencies include a TypeScript-compatible project using Clerk, with the type enabling pre-population of form fields for a smoother user experience.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-up-initial-values.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ntype SignUpInitialValues = {\n  emailAddress?: string;\n  username?: string;\n  phoneNumber?: string; // in E.164 format\n  firstName?: string;\n  lastName?: string;\n};\n```\n\n----------------------------------------\n\nTITLE: Simplifying UserButton Implementation\nDESCRIPTION: Removal of explicit afterSignOutUrl prop as '/' becomes the default redirect URL.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_11\n\nLANGUAGE: jsx\nCODE:\n```\n<UserButton />\n```\n\n----------------------------------------\n\nTITLE: Setting up the Cognito to Clerk Migration Project (Shell)\nDESCRIPTION: Shell commands to create a new project directory (`cognito_to_clerk`), initialize an npm project, install the necessary AWS SDK for Cognito and the Clerk Backend SDK dependencies, and create placeholder files for environment variables (`.env`) and the migration script (`main.ts`). This setup requires Node.js version 20 or higher.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-cognito.mdx#2025-04-23_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nuser@~: $ mkdir cognito_to_clerk\nuser@~: $ cd cognito_to_clerk\n\nuser@~/cognito_to_clerk: $ npm init -y\nuser@~/cognito_to_clerk: $ npm i -E @aws-sdk/client-cognito-identity-provider@3.614.0\nuser@~/cognito_to_clerk: $ npm i -E @clerk/backend@1.4.3\n\nuser@~/cognito_to_clerk: $ touch .env\nuser@~/cognito_to_clerk: $ touch main.ts\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Clerk Sign-Up in Next.js\nDESCRIPTION: These environment variables configure Clerk's redirect behavior for the sign-up process. They specify the sign-up URL path and fallback redirect URLs for both sign-up and sign-in actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/custom-sign-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nNEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up\nNEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/\nNEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/\n```\n\n----------------------------------------\n\nTITLE: Updating getAuth Parameters in JavaScript\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the getAuth function. This update aligns with the new naming convention for Clerk's API keys.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_21\n\nLANGUAGE: javascript\nCODE:\n```\ngetAuth({ apiKey: '...' })\ngetAuth({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Prepare Email Verification Method Declaration\nDESCRIPTION: Method signature for initiating the email address verification process with support for different strategies.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction prepareVerification(params: PrepareEmailAddressVerificationParams): Promise<EmailAddress>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Allowlist Identifiers - TypeScript Function Signature\nDESCRIPTION: Function signature for getAllowlistIdentifierList() that returns a Promise containing a paginated response of allowlist identifiers. The response includes an array of AllowlistIdentifier objects and a total count.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/get-allowlist-identifier-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getAllowlistIdentifierList(): Promise<PaginatedResourceResponse<AllowlistIdentifier[]>>\n```\n\n----------------------------------------\n\nTITLE: UpdatePhoneNumber Function Definition in TypeScript\nDESCRIPTION: Function signature for updating a phone number with type definitions for parameters and return value. Takes a phoneNumberId string and UpdatePhoneNumberParams object, returns a Promise of PhoneNumber.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/phone-numbers/update-phone-number.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updatePhoneNumber(\n  phoneNumberId: string,\n  params: UpdatePhoneNumberParams,\n): Promise<PhoneNumber>\n```\n\n----------------------------------------\n\nTITLE: Opting Out via telemetry Prop - ClerkProvider Component - TypeScript\nDESCRIPTION: Pass telemetry={false} to the ClerkProvider React component to locally disable telemetry collection when using @clerk/clerk-react or SDKs where environment variables are not supported. No external dependencies beyond ClerkProvider and React are needed. Input: sets the telemetry prop to false. Output: disables telemetry transmission for that component tree. Ensure your package and framework accept this prop.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/telemetry.mdx#2025-04-23_snippet_2\n\nLANGUAGE: TypeScript\nCODE:\n```\n<ClerkProvider telemetry={false} />\n```\n\n----------------------------------------\n\nTITLE: CodeBlock Props Type Definition\nDESCRIPTION: TypeScript type definitions for code block properties including filename and line marking options.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_10\n\nLANGUAGE: tsx\nCODE:\n```\ntype LineNumber = number\ntype Mark = LineNumber | [start: LineNumber, end: LineNumber]\n\ninterface CodeBlockProps {\n  filename?: string\n  mark?: Array<Mark>\n  ins?: Array<Mark>\n  del?: Array<Mark>\n}\n```\n\n----------------------------------------\n\nTITLE: Executing the Cognito to Clerk Migration Script (Shell)\nDESCRIPTION: Shell command to execute the TypeScript migration script (`main.ts`) using `npx tsx`. The `--env-file=.env` flag ensures that the script loads the necessary credentials and configuration from the `.env` file created earlier. This command triggers the batch upload process from Cognito to Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-cognito.mdx#2025-04-23_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\nuser@~/cognito_to_clerk: $ npx tsx --env-file=.env main.ts\n```\n\n----------------------------------------\n\nTITLE: Updating Invitations.getInvitationList Return Signature in JavaScript\nDESCRIPTION: Example showing the change in return signature for Invitations.getInvitationList from directly returning data to returning an object with data and totalCount properties to better handle paginated responses.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_36\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.invitations.getInvitationList()\nconst { data, totalCount } = await clerkClient.invitations.getInvitationList()\n```\n\n----------------------------------------\n\nTITLE: Specifying Hash or Virtual Routing for Clerk UI Components (JSX)\nDESCRIPTION: Shows how to explicitly set the routing strategy to `hash` or `virtual` using the `routing` prop on Clerk UI components like `<UserProfile />` and `<OrganizationProfile />`. This is necessary if the default path routing behavior introduced in Core 2 is not desired.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_9\n\nLANGUAGE: jsx\nCODE:\n```\n```jsx {{ prettier: false }}\n<UserProfile routing=\"hash\" />\n<OrganizationProfile routing=\"virtual\" />\n```\n```\n\n----------------------------------------\n\nTITLE: Creating React MFA Dashboard Component with State Management\nDESCRIPTION: This component manages the multi-factor authentication flow with different states for adding TOTP, verification, backup codes, and success. It uses React hooks to manage state and the Clerk useUser hook for authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function AddMFaScreen() {\n  const [step, setStep] = React.useState<AddTotpSteps>('add')\n  const { isLoaded, user } = useUser()\n\n  if (!isLoaded) return null\n\n  if (!user) {\n    return <p>You must be logged in to access this page</p>\n  }\n\n  return (\n    <>\n      {step === 'add' && <AddTotpScreen setStep={setStep} />}\n      {step === 'verify' && <VerifyTotpScreen setStep={setStep} />}\n      {step === 'backupcodes' && <BackupCodeScreen setStep={setStep} />}\n      {step === 'success' && <SuccessScreen />}\n      <Link href=\"/account/manage-mfa\">Manage MFA</Link>\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Storing CRX Public Key for Consistent ID (env)\nDESCRIPTION: Defines the Chrome Extension's public key in the `.env.chrome` file. This key, obtained from Plasmo Itero's tool, is used by Plasmo during the build process to ensure the extension has a consistent CRX ID across development and production builds, which is crucial for Clerk integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_6\n\nLANGUAGE: env\nCODE:\n```\nCRX_PUBLIC_KEY=<YOUR_PUBLIC_KEY>\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Invitation Query Method\nDESCRIPTION: Shows the replacement of getPendingInvitations with getInvitations method for organization invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_58\n\nLANGUAGE: javascript\nCODE:\n```\nOrganization.getPendingInvitations()\nOrganization.getInvitations({ status: 'pending' })\n```\n\n----------------------------------------\n\nTITLE: Updating User.getOrganizationMembershipList usage in JavaScript\nDESCRIPTION: This snippet shows how to use the updated User.getOrganizationMembershipList method which now returns an object with 'data' and 'totalCount' properties instead of directly returning an array of items.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_33\n\nLANGUAGE: javascript\nCODE:\n```\nconst { user } = useUser()\nconst membershipList = user.getOrganizationMembershipList()\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation for Coinbase OAuth Setup\nDESCRIPTION: Structured markdown documentation detailing the process of configuring Coinbase as a social connection provider in Clerk, including both development and production environment setups.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/coinbase.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: Add Coinbase as a social connection\ndescription: Learn how to allow users to sign up and sign in to your Clerk app with their Coinbase account using OAuth.\n---\n```\n\n----------------------------------------\n\nTITLE: Configuring Vite for Ngrok in TanStack\nDESCRIPTION: Configuration setup for Vite in TanStack applications to allow ngrok host during development.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/sync-data.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { defineConfig } from '@tanstack/react-start/config'\nimport tsConfigPaths from 'vite-tsconfig-paths'\nimport type { InlineConfig } from 'vite'\n\nconst vite: InlineConfig = {\n  server: {\n    // Replace with your ngrok host\n    allowedHosts: ['fawn-two-nominally.ngrok-free.app'],\n  },\n  plugins: [\n    tsConfigPaths({\n      projects: ['./tsconfig.json'],\n    }),\n  ],\n}\n\nexport default defineConfig({\n  vite,\n})\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server for Chrome Extension with Plasmo\nDESCRIPTION: This command starts the development environment, creates the build in 'build/chrome-mv3-dev', and rebuilds when changes are made to the extension. It uses pnpm as the package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/chrome-extension.mdx#2025-04-23_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Defining the StorageCache Interface in TypeScript\nDESCRIPTION: Defines the TypeScript interface `StorageCache` which is required for the `storageCache` prop in `<ClerkProvider>` in Core 2. This interface replaces the previous `tokenCache` prop and includes methods for creating cache keys (`createKey`), retrieving (`get`), removing (`remove`), and storing (`set`) cache values asynchronously.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_12\n\nLANGUAGE: typescript\nCODE:\n```\ntype StorageCache = {\n  createKey: (...keys: string[]) => string\n  get: <T = any>(key: string) => Promise<T>\n  remove: (key: string) => Promise<void>\n  set: (key: string, value: string) => Promise<void>\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Session Claims in Next.js (Core 1) (TypeScript)\nDESCRIPTION: Demonstrates how session claims (JwtPayload), including the now-removed `orgs` claim, were accessed in Next.js applications using `getAuth` from `@clerk/nextjs/server` or `@clerk/ssr.server` prior to the Core 2 upgrade.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_8\n\nLANGUAGE: typescript\nCODE:\n```\nimport { getAuth } from '@clerk/nextjs/server'\nconst claims: JwtPayload = getAuth(request).sessionClaims\n\nimport { getAuth } from '@clerk/ssr.server'\nconst claims: JwtPayload = (await getAuth(request)).sessionClaims\n```\n\n----------------------------------------\n\nTITLE: Sending a Test POST Request Using Curl - Shell Script - Bash\nDESCRIPTION: This Bash command demonstrates how to manually test a locally running webhook endpoint using 'curl'. It sends a POST request with the 'Content-Type: application/json' header to 'http://localhost:3000/api/webhooks/test' and outputs the response. The snippet assumes the server is running at the specified port and route. The key parameter is the endpoint URL; this is useful for verifying that the test handler responds with the expected JSON payload.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/debug-your-webhooks.mdx#2025-04-23_snippet_2\n\nLANGUAGE: Bash\nCODE:\n```\ncurl -H 'Content-Type: application/json' \\\\\\n    -X POST http://localhost:3000/api/webhooks/test\\n\n```\n\n----------------------------------------\n\nTITLE: Organization Members Count Property Update\nDESCRIPTION: Shows the property name change from members_count to membersCount on the Organization resource.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_53\n\nLANGUAGE: javascript\nCODE:\n```\norganization.members_count\norganization.membersCount\n```\n\n----------------------------------------\n\nTITLE: Updating User Metadata with React\nDESCRIPTION: This example shows how to update a user's metadata from a React component using Clerk's useUser hook. It provides a form input for the birthday and a button that triggers the update method on the user object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/users/metadata.mdx#2025-04-23_snippet_21\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function Page() {\n  const { user } = useUser()\n  const [birthday, setBirthday] = useState('')\n\n  return (\n    <div>\n      <input type=\"text\" value={birthday} onChange={(e) => setBirthday(e.target.value)} />\n\n      <button\n        onClick={() => {\n          user?.update({\n            unsafeMetadata: { birthday },\n          })\n        }}\n      >\n        Update birthday\n      </button>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Redirect URL Example\nDESCRIPTION: Example usage of the createRedirectUrl method using clerkClient. Demonstrates creating a redirect URL with a specific destination.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/redirect-urls/create-redirect-url.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.redirectUrls.createRedirectUrl({\n  url: 'https://example.com',\n})\n```\n\n----------------------------------------\n\nTITLE: React Component for Background Worker Demo\nDESCRIPTION: React component that demonstrates interaction with the background service worker. Includes a button to trigger token retrieval and display the result.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/create-clerk-client.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport * as React from 'react'\n\nexport default function NewTab() {\n  const [token, setToken] = React.useState<string | null>(null)\n\n  const getToken = async (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault()\n\n    chrome.runtime.sendMessage({ greeting: 'get-token' }, (response) => {\n      setToken(response.token)\n    })\n  }\n\n  return (\n    <div>\n      <p>Clerk Background Worker Demo</p>\n      <div className=\"App\">\n        <p>\n          This new tab simulates a content page where you might want to access user information, or\n          make a request to your backend server and include a user token in the request.\n        </p>\n        <p>Make sure that you are signed into the extension. You can have the popup closed.</p>\n        <button type=\"button\" onClick={getToken} className=\"button invert\">\n          Get token from service worker\n        </button>\n        {token && <p>Token: {token}</p>}\n      </div>\n    </div>\n  )\n```\n\n----------------------------------------\n\nTITLE: Retrieving Allowlist Identifiers - Usage Example\nDESCRIPTION: Example showing how to call getAllowlistIdentifierList() using the clerkClient instance to retrieve allowlist identifiers.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/allowlist/get-allowlist-identifier-list.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nconst response = await clerkClient.allowlistIdentifiers.getAllowlistIdentifierList()\n```\n\n----------------------------------------\n\nTITLE: Creating CustomOAuthStrategy Type Pattern in TypeScript\nDESCRIPTION: Defines CustomOAuthStrategy as a TypeScript template literal type for representing custom OAuth authentication methods. Utilizes the pattern `oauth_custom_<string>` allowing extensibility for user-defined OAuth integrations. Used when integrating non-standard OAuth providers with authentication flows, ensuring a consistent pattern in custom strategy naming. Offers flexibility; requires implementers to specify a unique custom strategy suffix.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sso.mdx#2025-04-23_snippet_2\n\nLANGUAGE: ts\nCODE:\n```\ntype CustomOAuthStrategy = `oauth_custom_${string}`\n```\n\n----------------------------------------\n\nTITLE: Joining the Waitlist with ClerkJS - TypeScript\nDESCRIPTION: Declares a TypeScript function, `joinWaitlist`, which programmatically adds users to the Clerk waitlist by accepting an object with an `emailAddress` property. Returns a Promise resolving to a Waitlist object. Requires app's sign-up mode to be configured as Waitlist in the Clerk Dashboard. Depends on correct configuration and import of Clerk SDK.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/clerk.mdx#2025-04-23_snippet_18\n\nLANGUAGE: typescript\nCODE:\n```\nfunction joinWaitlist({ emailAddress }: JoinWaitlistParams): Promise<Waitlist>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk SignInTokenCanBeUsedOnlyInSignIn Error - JSON\nDESCRIPTION: Details the Clerk error object indicating that a sign in token is being used outside the allowed context ('OnlyInSignIn'), adhering to the Clerk error JSON format. It includes clear, specific messaging for troubleshooting and a unique error code, supporting both frontend and backend error handling flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in-tokens.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"not in sign in\\\",\\n  \\\"longMessage\\\": \\\"Sign in tokens can only be used during sign in.\\\",\\n  \\\"code\\\": \\\"sign_in_token_not_in_sign_in_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for Clerk SMS OTP Auth\nDESCRIPTION: HTML template for implementing SMS OTP authentication using Clerk, including forms for sign-up and verification steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/email-sms-otp.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"signed-in\"></div>\n\n    <div id=\"sign-up\">\n      <h2>Sign up</h2>\n      <form id=\"sign-up-form\">\n        <label for=\"phone\">Enter phone number</label>\n        <input type=\"tel\" name=\"phone\" id=\"sign-up-phone\" />\n        <button type=\"submit\">Continue</button>\n      </form>\n    </div>\n\n    <form id=\"verifying\" hidden>\n      <h2>Verify your phone number</h2>\n      <label for=\"code\">Enter your verification code</label>\n      <input id=\"code\" name=\"code\" />\n      <button type=\"submit\" id=\"verify-button\">Verify</button>\n    </form>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `SingleModeSessionExists` in JSON\nDESCRIPTION: This JSON object defines the structure for the `SingleModeSessionExists` error in Clerk. It indicates that a user attempted to sign in while already having an active session in single-session mode. It includes a `shortMessage`, a more descriptive `longMessage`, and the specific error `code` 'session_exists'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Session already exists\",\n  \"longMessage\": \"You're currently in single session mode. You can only be signed into one account at a time.\",\n  \"code\": \"session_exists\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining SamlFactor Interface for SAML Authentication\nDESCRIPTION: Specifies the type definition for SAML verification factor with a strategy property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_9\n\nLANGUAGE: typescript\nCODE:\n```\ntype SamlFactor = {\n  strategy: SamlStrategy\n}\n```\n\n----------------------------------------\n\nTITLE: Running Linting for Clerk Documentation\nDESCRIPTION: Command to run all linting checks for the Clerk documentation which validate changes by checking for broken links, proper formatting, and quickstart modifications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\nnpm run lint\n```\n\n----------------------------------------\n\nTITLE: Declaring getSamlConnectionList Function in TypeScript\nDESCRIPTION: Function signature for getSamlConnectionList, which retrieves a list of SAML connections. It accepts optional SamlConnectionListParams and returns a Promise resolving to an array of SamlConnection objects.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection-list.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getSamlConnectionList(params: SamlConnectionListParams = {}): Promise<SamlConnection[]>\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Session Token for External User IDs\nDESCRIPTION: JSON configuration for customizing the session token to include the external user ID as the userId claim when migrating from Auth.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/authjs-migration.mdx#2025-04-23_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"userId\": \"{{user.external_id || user.id}}\"\n}\n```\n\n----------------------------------------\n\nTITLE: HTML Structure for Organization Invitations Table\nDESCRIPTION: This HTML file provides the structure for displaying organization invitations. It includes a table with headers for email, organization name, role, status, and actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-user-org-invitations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h1>Organization invitations</h1>\n    <table>\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Organization name</th>\n          <th>Role</th>\n          <th>Status</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n\n      <tbody id=\"invitations-table-body\"></tbody>\n    </table>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Running Astro Project in Development Mode via pnpm - Bash\nDESCRIPTION: This command runs the Astro development server using pnpm. Prerequisite: project must be set up with pnpm, with a 'dev' script present. It compiles and serves the app locally for testing authentication flows.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\npnpm dev\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: RequestInvalidForInstance (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when an incoming request is invalid for the specific Clerk instance due to its `auth_config` settings. It suggests modifying instance settings. It includes a short message, a long message explaining the cause, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_11\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid request for instance\",\n  \"longMessage\": \"This request is not valid for your instance. Modify your instance settings to use this request.\",\n  \"code\": \"request_invalid_for_instance_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidHost (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when the host of an incoming request is invalid, meaning Clerk cannot attribute the request to a running instance. It suggests checking the Clerk Publishable Key. It includes a short message, a long message explaining the issue, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid host\",\n  \"longMessage\": \"We were unable to attribute this request to an instance running on Clerk. Make sure that your Clerk Publishable Key is correct.\",\n  \"code\": \"host_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: ExternalAccountExists (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when attempting to create or link an external account (like OAuth) that already exists for another user. It includes a short message, a long message stating the conflict, and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_13\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"already exists\",\n  \"longMessage\": \"This external account already exists.\",\n  \"code\": \"external_account_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Settings Route Component\nDESCRIPTION: React component for the settings route using Clerk's UserProfile component with virtual routing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nimport { UserProfile } from '@clerk/chrome-extension'\n\nexport const Settings = () => {\n  return (\n    <>\n      <h1>Settings</h1>\n      <UserProfile routing=\"virtual\" />\n    </>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Frontend Quickstart Cards using Custom Components (Markdown/MDX)\nDESCRIPTION: Uses the custom `<Cards>` component to display a grid of links, descriptions, and icons for Clerk's frontend framework/platform quickstart guides (React, Chrome Extension, Expo, iOS, JavaScript, Vue). Icons are embedded using the `<Include>` component referencing specific partial files.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<Cards>\n  - [React](/docs/quickstarts/react)\n  - Easily add secure, beautiful, and fast authentication to your React application with Clerk.\n  - {<Include src=\"_partials/icons/react\" />}\n\n  ---\n\n  - [Chrome Extension](/docs/quickstarts/chrome-extension)\n  - Use the Chrome Extension SDK to authenticate users in your Chrome extension.\n  - {<Include src=\"_partials/icons/chrome-extension\" />}\n\n  ---\n\n  - [Expo](/docs/quickstarts/expo)\n  - Use Clerk with Expo to authenticate users in your React Native application.\n  - {<Include src=\"_partials/icons/expo\" />}\n\n  ---\n\n  - [iOS](/docs/quickstarts/ios)\n  - Use the Clerk iOS SDK to authenticate users in your native Apple applications.\n  - {<Include src=\"_partials/icons/ios\" />}\n\n  ---\n\n  - [JavaScript](/docs/quickstarts/javascript)\n  - Easily add secure, beautiful, and fast authentication to your JavaScript application with Clerk.\n  - {<Include src=\"_partials/icons/javascript\" />}\n\n  ---\n\n  - [Vue](/docs/quickstarts/vue)\n  - Easily add secure, beautiful, and fast authentication to your Vue application with Clerk.\n  - {<Include src=\"_partials/icons/vue\" />}\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Styling Static Control Components with Flex Layout\nDESCRIPTION: Example of incorrect flex styling implementation for static control components that shows potential alignment issues.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/astro/hybrid-rendering.mdx#2025-04-23_snippet_2\n\nLANGUAGE: jsx\nCODE:\n```\n<div className=\"flex items-center\">\n  <SignedIn isStatic={true}>\n    <span>You are signed in!</span>\n  </SignedIn>\n  <span>This content is always visible.</span>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient with secretKey in JavaScript\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter when calling createClerkClient. This update is part of Clerk's API key renaming process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/fastify'\n\ncreateClerkClient({ apiKey: '...' })\ncreateClerkClient({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Representing CheckoutSessionMismatch Billing Error in JSON (Clerk)\nDESCRIPTION: This JSON object structure defines the `CheckoutSessionMismatch` error within Clerk's billing system. It signals that the provided checkout session ID does not correspond to the specified application ID. The JSON includes placeholders `<APPID>` and `<SESSID>` in the long message and the unique error code `checkout_session_mismatch_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Checkout session ID mismatch\",\n  \"longMessage\": \"Application ID <APPID> has no matching checkout session ID <SESSID>\",\n  \"code\": \"checkout_session_mismatch_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Authenticating with Passkey in Clerk\nDESCRIPTION: Method signature for initiating passkey-based authentication flow. This enables users to authenticate using a previously registered passkey, with optional flow parameter to specify the authentication process.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/sign-in.mdx#2025-04-23_snippet_10\n\nLANGUAGE: typescript\nCODE:\n```\nfunction authenticateWithPasskey(params?: AuthenticateWithPasskeyParams): Promise<SignInResource>\n```\n\n----------------------------------------\n\nTITLE: React CreateOrganization Implementation\nDESCRIPTION: Basic implementation of the CreateOrganization component in React.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/create-organization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: jsx\nCODE:\n```\nimport { CreateOrganization } from '@clerk/clerk-react'\n\nexport default function CreateOrganizationPage() {\n  return <CreateOrganization />\n}\n```\n\n----------------------------------------\n\nTITLE: Unmounting SignIn Component with JavaScript\nDESCRIPTION: This example shows how to use the unmountSignIn method to unmount and clean up an existing SignIn component instance in a JavaScript application using Clerk.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/authentication/sign-in.mdx#2025-04-23_snippet_10\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"sign-in\"></div>\n`\n\nconst signInDiv = document.getElementById('sign-in')\n\nclerk.mountSignIn(signInDiv)\n\n// ...\n\nclerk.unmountSignIn(signInDiv)\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkClient Frontend API Parameter in JavaScript\nDESCRIPTION: Demonstrates the change from using 'frontendApi' to 'publishableKey' as a parameter in the createClerkClient function. This update reflects the new naming convention for Clerk's frontend API key.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_20\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkClient } from '@clerk/nextjs/server'\n\ncreateClerkClient({ frontendApi: '...' })\ncreateClerkClient({ publishableKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: TypeScript getSamlConnection Function Definition\nDESCRIPTION: Function signature for retrieving a SAML connection by ID, returning a Promise that resolves to a SamlConnection object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/saml-connections/get-saml-connection.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getSamlConnection(samlConnectionId: string): Promise<SamlConnection>\n```\n\n----------------------------------------\n\nTITLE: Creating a Multi-Step Inngest Function for Delayed Emails in TypeScript\nDESCRIPTION: This TypeScript example demonstrates creating a more complex, multi-step Inngest function triggered by 'clerk/user.created'. It uses the `step` object provided in the function handler. `step.run` is used to encapsulate the logic for sending an initial welcome email, allowing for automatic retries on failure. `step.sleep` pauses the function execution for three days. Finally, another `step.run` sends a follow-up trial offer email. This showcases building delayed workflows like onboarding email sequences.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/inngest.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nconst sendOnboardingEmails = inngest.createFunction(\n  { id: 'onboarding-emails' },\n  { event: 'clerk/user.created' },\n  async ({ event, step }) => {\n    // ← step is available in the handler's arguments\n    const user = event.data\n    const { first_name } = user\n    const email = user.email_addresses.find(\n      (e) => e.id === user.primary_email_address_id,\n    ).email_address\n\n    await step.run('welcome-email', async () => {\n      // `emails` is a placeholder for the function in your codebase to send email\n      await emails.sendWelcomeEmail({ email, first_name })\n    })\n\n    // wait 3 days before second email\n    await step.sleep('wait-3-days', '3 days')\n\n    await step.run('trial-offer-email', async () => {\n      await emails.sendTrialOfferEmail({ email, first_name })\n    })\n  },\n)\n```\n\n----------------------------------------\n\nTITLE: Updating Pagination Arguments for Organization.getRoles in JavaScript\nDESCRIPTION: The pagination arguments for Organization.getRoles have been renamed from 'limit' to 'pageSize' and 'offset' to 'initialPage' to improve clarity and simplify pagination control.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_24\n\nLANGUAGE: javascript\nCODE:\n```\nconst { data } = await organization.getRoles({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Backend User Object Type Definition - TypeScript\nDESCRIPTION: Type definition showing all properties of the Backend User object including primitive types, metadata objects, and arrays of related entities.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface BackendUser {\n  id: string;\n  passwordEnabled: boolean;\n  totpEnabled: boolean;\n  backupCodeEnabled: boolean;\n  twoFactorEnabled: boolean;\n  banned: boolean;\n  createdAt: number;\n  updatedAt: number;\n  imageUrl: string;\n  hasImage: boolean;\n  primaryEmailAddressId: string;\n  primaryPhoneNumberId: string;\n  primaryWeb3WalletId: string;\n  lastSignInAt: number;\n  externalId: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  publicMetadata: UserPublicMetadata;\n  privateMetadata: UserPrivateMetadata;\n  unsafeMetadata: UserUnsafeMetadata;\n  emailAddresses: EmailAddress[];\n  phoneNumbers: PhoneNumber[];\n  hasVerifiedPhoneNumber: boolean;\n  web3Wallets: Web3Wallet[];\n  externalAccounts: ExternalAccount[];\n  lastActiveAt: number;\n  createOrganizationEnabled: boolean;\n  createOrganizationsLimit?: number;\n  legalAcceptedAt?: number | null;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining verifyTOTP Function Signature in TypeScript\nDESCRIPTION: Function signature for verifyTOTP, which takes VerifyTOTPParams and returns a Promise with verification result.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/verify-totp.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifyTOTP(params: VerifyTOTPParams): Promise<{ verified: true; code_type: 'totp' }>\n```\n\n----------------------------------------\n\nTITLE: Setting Clerk API Keys in .env File (Env)\nDESCRIPTION: Defines the necessary Clerk API keys as environment variables within a `.env` file. The `NUXT_PUBLIC_CLERK_PUBLISHABLE_KEY` (frontend) and `NUXT_CLERK_SECRET_KEY` (backend) are required for the Clerk Nuxt SDK to authenticate requests and interact with the Clerk API. These keys must be obtained from the Clerk Dashboard.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nuxt.mdx#2025-04-23_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nNUXT_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}\nNUXT_CLERK_SECRET_KEY={{secret}}\n```\n\n----------------------------------------\n\nTITLE: Defining Backend Invitation Object Properties in TypeScript\nDESCRIPTION: TypeScript interface showing the structure of the Backend Invitation object with its properties and their types.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-invitation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface Invitation {\n  id: string;\n  emailAddress: string;\n  publicMetadata: UserPublicMetadata;\n  createdAt: number;\n  updatedAt: number;\n  status: 'pending' | 'accepted' | 'revoked';\n  revoked?: boolean;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Clerk Chrome Extension SDK using npm\nDESCRIPTION: Installs the latest version of the `@clerk/chrome-extension` SDK using the npm package manager to upgrade to Core 2 (version 1+).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/chrome-extension\n```\n\n----------------------------------------\n\nTITLE: TypeScript Definition for NeedsReverificationParameters Interface\nDESCRIPTION: This defines the NeedsReverificationParameters interface that specifies the parameters passed to the onNeedsReverification handler, including complete and cancel functions and verification level.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/hooks/use-reverification.mdx#2025-04-23_snippet_1\n\nLANGUAGE: typescript\nCODE:\n```\n{\n  complete: () => void\n  cancel: () => void\n  level: \"first_factor\" | \"second_factor\" | \"multi_factor\" | undefined\n}\n```\n\n----------------------------------------\n\nTITLE: Defining the `removeMember` Function Signature in TypeScript\nDESCRIPTION: This TypeScript signature defines the `removeMember` function. It accepts a single `userId` string parameter and returns a Promise that resolves to an `OrganizationMembership` object representing the removed member's previous status.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/organization.mdx#2025-04-23_snippet_13\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript\nfunction removeMember(userId: string): Promise<OrganizationMembership>\n```\n```\n\n----------------------------------------\n\nTITLE: Defining getUser Function in TypeScript\nDESCRIPTION: Function signature for getUser, which takes a user ID as a string parameter and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/get-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction getUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Defining updateUserProfileImage Function in TypeScript\nDESCRIPTION: This snippet defines the function signature for updating a user's profile image. It takes a userId and params object containing a file, and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/update-user-profile-image.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction updateUserProfileImage(userId: string, params: { file: Blob | File }): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Defining ResetPasswordPhoneCodeFactor Interface\nDESCRIPTION: Specifies the type definition for resetting password via phone code with properties for strategy, phone number ID, safe identifier, and primary status flag.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/sign-in-first-factor.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\ntype ResetPasswordPhoneCodeFactor = {\n  strategy: ResetPasswordPhoneCodeStrategy\n  phoneNumberId: string\n  safeIdentifier: string\n  primary?: boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Signing Key for Nhost JWT Secret\nDESCRIPTION: JSON configuration for using a custom signing key with Nhost instead of the JWKS URL. This specifies the algorithm type (HS256) and the signing key for JWT verification.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/nhost.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{ \"type\": \"HS256\", \"key\": \"<YOUR_SIGNING_KEY>\" }\n```\n\n----------------------------------------\n\nTITLE: Rendering Svelte Logo SVG\nDESCRIPTION: SVG code for rendering the Svelte logo. This vector graphic uses paths and clip paths to create the Svelte emblem.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/community-sdks.mdx#2025-04-23_snippet_1\n\nLANGUAGE: SVG\nCODE:\n```\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"49\" height=\"59\" viewBox=\"0 0 49 59\" fill=\"none\"><g clipPath=\"url(#clip0_530_7513)\"><path d=\"M45.7478 7.77362C40.3155 -0.0508779 29.5007 -2.3434 21.7261 2.59051L8.02075 11.3619C4.28294 13.7043 1.69138 17.5418 0.943822 21.8776C0.295934 25.5158 0.844147 29.2536 2.58846 32.493C1.39236 34.2872 0.594959 36.2807 0.246096 38.3739C-0.551304 42.8094 0.495284 47.3945 3.08684 51.0326C8.56897 58.8571 19.3339 61.1496 27.1085 56.2157L40.8139 47.4941C44.5517 45.1518 47.1432 41.3143 47.8908 36.9784C48.5387 33.3403 47.9905 29.6025 46.2461 26.363C47.4422 24.5689 48.2396 22.5754 48.5885 20.4822C49.4357 15.9968 48.3892 11.4118 45.7478 7.77362Z\" fill=\"#FF3E00\"/><path d=\"M20.3791 51.7801C15.9436 52.9264 11.3087 51.182 8.71711 47.4442C7.1223 45.2514 6.52425 42.5103 6.97279 39.8191C7.07247 39.3705 7.17214 38.9719 7.27182 38.5233L7.52101 37.7259L8.21873 38.2243C9.86337 39.4204 11.6575 40.3175 13.6012 40.9155L14.0996 41.065L14.0497 41.5634C13.9999 42.2611 14.1992 43.0087 14.5979 43.6067C15.3953 44.753 16.7908 45.3012 18.1364 44.9524C18.4354 44.8527 18.7345 44.753 18.9836 44.6035L32.6391 35.8819C33.3368 35.4334 33.7854 34.7855 33.9349 33.9881C34.0844 33.1907 33.8851 32.3435 33.4365 31.6956C32.6391 30.5493 31.2437 30.0509 29.8981 30.3998C29.599 30.4995 29.3 30.5991 29.0508 30.7487L23.8179 34.0878C22.9706 34.636 22.0237 35.0347 21.027 35.2839C16.5914 36.4301 11.9565 34.6858 9.36499 30.948C7.82003 28.7552 7.17214 26.0141 7.67052 23.3229C8.11906 20.7313 9.71386 18.3889 11.9565 16.9935L25.6619 8.27192C26.5091 7.72371 27.456 7.32501 28.4528 7.02599C32.8883 5.87972 37.5232 7.62404 40.1148 11.3619C41.7096 13.5547 42.3076 16.2958 41.8591 18.987C41.7594 19.4355 41.6597 19.8342 41.5102 20.2828L41.261 21.0802L40.5633 20.5818C38.9187 19.3857 37.1245 18.4886 35.1808 17.8906L34.6825 17.7411L34.7323 17.2427C34.7821 16.545 34.5828 15.7974 34.1841 15.1993C33.3867 14.0531 31.9912 13.5547 30.6456 13.9036C30.3466 14.0032 30.0476 14.1029 29.7984 14.2524L16.1429 22.974C15.4452 23.4225 14.9966 24.0704 14.8471 24.8678C14.6976 25.6652 14.897 26.5125 15.3455 27.1604C16.1429 28.3066 17.5384 28.805 18.884 28.4561C19.183 28.3565 19.482 28.2568 19.7312 28.1073L24.9641 24.7682C25.8114 24.2199 26.7583 23.8212 27.755 23.5222C32.1906 22.3759 36.8255 24.1203 39.417 27.8581C41.0118 30.0509 41.6099 32.792 41.1613 35.4832C40.7128 38.0748 39.118 40.4171 36.8753 41.8126L23.17 50.5342C22.3228 51.0824 21.3758 51.4811 20.3791 51.7801Z\" fill=\"white\"/></g><defs><clipPath id=\"clip0_530_7513\"><rect width=\"48.8906\" height=\"58.8083\" fill=\"white\"/></clipPath></defs></svg>\n```\n\n----------------------------------------\n\nTITLE: Implementing Clerk Documentation Icon with SVG and JSX\nDESCRIPTION: Defines an SVG icon with a 20x20 viewport containing custom paths and styling for light/dark mode theming. The icon includes multiple path elements that form a complete design with conditional fill colors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/express.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 20 20\" style={{ fill: 'var(--light, black) var(--dark, white)' }}>\n  <path d=\"M6.504 7.181c1.47 0 1.812 1.29 1.812 2.108H4.5c.103-.906.683-2.108 2.004-2.108Z\" />\n\n  <path\n    fillRule=\"evenodd\"\n    d=\"M10 20a10 10 0 1 0 0-20 10 10 0 0 0 0 20Zm-3.05-7.291c-1.321 0-2.438-.728-2.464-2.492l5.032.013c.04-.2.062-.405.058-.61 0-1.32-.621-3.37-2.955-3.37-2.109 0-3.385 1.737-3.385 3.875 0 2.137 1.328 3.625 3.535 3.625a5.738 5.738 0 0 0 2.39-.475l-.223-.938a4.65 4.65 0 0 1-1.988.372Zm5.833-4.78L11.759 6.4h-1.455l2.437 3.505-2.555 3.666h1.439l1.04-1.604a26.7 26.7 0 0 1 .261-.425c.171-.274.336-.538.494-.837h.031l.023.037c.245.413.479.807.75 1.225l1.067 1.604h1.471L14.238 9.86l2.45-3.46h-1.425l-.995 1.514c-.096.157-.194.312-.293.47-.146.231-.294.465-.435.704h-.03l-.165-.273c-.176-.291-.35-.58-.563-.887Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Running Drizzle Schema Migration Command\nDESCRIPTION: Command to push the database schema to the Neon Postgres database using Drizzle Kit's CLI tool.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/neon.mdx#2025-04-23_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nnpx drizzle-kit push\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for React Native MFA Implementation\nDESCRIPTION: Command line instructions for installing the required dependencies for MFA implementation in React Native: expo-checkbox for UI components and react-native-qr-svg for QR code generation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-totp-based-mfa.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nnpm install expo-checkbox react-native-qr-svg\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add expo-checkbox react-native-qr-svg\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add expo-checkbox react-native-qr-svg\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add expo-checkbox react-native-qr-svg\n```\n\n----------------------------------------\n\nTITLE: Defining verifyWebhook Function Signature in TypeScript\nDESCRIPTION: Declares the function signature for verifyWebhook, which takes a Request object and optional VerifyWebhookOptions, returning a Promise that resolves to a WebhookEvent.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/verify-webhook.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction verifyWebhook(request: Request, options?: VerifyWebhookOptions): Promise<WebhookEvent>\n```\n\n----------------------------------------\n\nTITLE: Defining FormInvalidPasswordLengthTooLong Error in JSON\nDESCRIPTION: This JSON object defines the error details for when a user provides a password that exceeds the maximum allowed length. It includes a `shortMessage` template indicating the maximum character limit (`%d`) and a unique `code` identifying this specific error.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/forms.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Passwords must be less than %d characters.\",\n  \"code\": \"form_password_length_too_long\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining DomainNotFound Error (JSON)\nDESCRIPTION: JSON representation of the 'DomainNotFound' error. This error signifies that an operation attempted to use a domain ID that does not correspond to any existing domain within the Clerk instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Domain not found\",\n  \"longMessage\": \"No domain was found with <id>\",\n  \"code\": \"resource_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Remix SDK using bun\nDESCRIPTION: This command uses the Bun toolkit's package manager to install the `@clerk/remix` SDK. This package is required to integrate Clerk's authentication system, components, and utilities into a Remix application.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/remix/spa-mode.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/remix\n```\n\n----------------------------------------\n\nTITLE: Updating User List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getUserList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_32\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Updating Session List Response Format in Clerk SDK\nDESCRIPTION: Example showing the change in response format for the getSessionList method, transitioning from directly returning data to returning an object with data and totalCount properties for better pagination support.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_31\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Updating createClerkExpressWithAuth Parameter in Clerk SDK (JavaScript)\nDESCRIPTION: Shows the change from using 'apiKey' to 'secretKey' as a parameter in the createClerkExpressWithAuth function from the Clerk SDK for Node.js.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\nimport { createClerkExpressWithAuth } from '@clerk/clerk-sdk-node'\n\ncreateClerkExpressWithAuth({ apiKey: '...' })\ncreateClerkExpressWithAuth({ secretKey: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updated Clerk Client Import\nDESCRIPTION: Shows the change from default import to named import for creating a Clerk client instance.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_30\n\nLANGUAGE: javascript\nCODE:\n```\nimport Clerk from '@clerk/clerk-sdk-node'\nimport { createClerkClient } from '@clerk/clerk-sdk-node'\n```\n\n----------------------------------------\n\nTITLE: Updated User List Response Structure\nDESCRIPTION: Shows the new response structure for getUserList with data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_27\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserList()\nconst { data, totalCount } = await clerkClient.users.getUserList()\n```\n\n----------------------------------------\n\nTITLE: Updated Pagination Parameters for User.getOrganizationInvitations in JavaScript\nDESCRIPTION: Example showing the changes to pagination parameters in the User.getOrganizationInvitations method. The 'limit' parameter has been renamed to 'pageSize' and 'offset' has been renamed to 'initialPage'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_15\n\nLANGUAGE: js\nCODE:\n```\nconst { data } = await user.getOrganizationInvitations({\n  limit: 10,\n  pageSize: 10,\n  offset: 10,\n  initialPage: 2,\n})\n```\n\n----------------------------------------\n\nTITLE: Defining unbanUser Function Signature in TypeScript\nDESCRIPTION: Function signature for the unbanUser method that takes a user ID and returns a Promise resolving to a User object.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/user/unban-user.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\nfunction unbanUser(userId: string): Promise<User>\n```\n\n----------------------------------------\n\nTITLE: Updating `constants` Import Path to Internal in JavaScript\nDESCRIPTION: Shows the change in import path for `constants` from `@clerk/backend` to `@clerk/backend/internal`. This change signifies that `constants` are now considered internal implementation details, are not intended for public consumption, and are exempt from semantic versioning guarantees. Use with caution.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_6\n\nLANGUAGE: js\nCODE:\n```\n    import { constants } from '@clerk/backend'\n    import { constants } from '@clerk/backend/internal'\n```\n\n----------------------------------------\n\nTITLE: Updating Interstitial Loading Parameters\nDESCRIPTION: Shows the parameter change from pkgVersion to clerkJSVersion in the loadInterstitialFromLocal function.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_49\n\nLANGUAGE: javascript\nCODE:\n```\nloadInterstitialFromLocal({ pkgVersion: '...' })\nloadInterstitialFromLocal({ clerkJSVersion: '...' })\n```\n\n----------------------------------------\n\nTITLE: Updated Session List Response Structure\nDESCRIPTION: Illustrates the change in getSessionList response structure to include both data and totalCount properties.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/node.mdx#2025-04-23_snippet_26\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Updating Clients.getClientList Return Signature in Clerk API\nDESCRIPTION: The return signature of Clients.getClientList has changed from directly returning data to returning an object with data and totalCount properties. This change helps with pagination and aligns with the Backend API structure.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/javascript.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.clients.getClientList()\nconst { data, totalCount } = await clerkClient.allowlistIdentifiers.getClientList()\n```\n\n----------------------------------------\n\nTITLE: Updated OAuth Access Token Response Format in Clerk Backend\nDESCRIPTION: Demonstrates the change in response format when retrieving OAuth access tokens. The response now includes both data and totalCount properties to support pagination, aligning with Backend API's return format.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/backend.mdx#2025-04-23_snippet_43\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.users.getUserOauthAccessToken()\nconst { data, totalCount } = await clerkClient.users.getUserOauthAccessToken()\n```\n\n----------------------------------------\n\nTITLE: Session List Response Format Change\nDESCRIPTION: Shows the updated response format for getSessionList including totalCount property.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/chrome-extension.mdx#2025-04-23_snippet_28\n\nLANGUAGE: javascript\nCODE:\n```\nconst data = await clerkClient.sessions.getSessionList()\nconst { data, totalCount } = await clerkClient.sessions.getSessionList()\n```\n\n----------------------------------------\n\nTITLE: Installing InstantDB React Library with Package Managers\nDESCRIPTION: Command line instructions for installing the InstantDB React library using various package managers (npm, yarn, pnpm, or bun).\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @instantdb/react\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @instantdb/react\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @instantdb/react\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @instantdb/react\n```\n\n----------------------------------------\n\nTITLE: ToString Email Address Method Declaration\nDESCRIPTION: Method signature for converting email address to string representation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/email-address.mdx#2025-04-23_snippet_2\n\nLANGUAGE: typescript\nCODE:\n```\nfunction toString(): string\n```\n\n----------------------------------------\n\nTITLE: Setting up HTML Structure for Organization Invitation Management\nDESCRIPTION: This HTML code sets up the basic structure for the organization invitation management interface, including placeholders for the invitation list and a form for sending new invitations.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-organization-invitations.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h2>Invitations List</h2>\n    <ul id=\"invitations_list\"></ul>\n\n    <h2>Send a new invitation</h2>\n    <form id=\"new_invitation\">\n      <div>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk Next.js SDK using bun (Bash)\nDESCRIPTION: Command to install the Clerk Next.js SDK (`@clerk/nextjs`) using the bun package manager, a newer alternative JavaScript runtime and package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/nextjs-pages-router.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using Yarn (Bash)\nDESCRIPTION: This command uses the Yarn package manager to execute the `dev` script defined in the project's `package.json` file, typically starting the development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nyarn dev\n```\n```\n\n----------------------------------------\n\nTITLE: Unmounting <OrganizationList /> in JavaScript\nDESCRIPTION: Example of unmounting the <OrganizationList /> component in a JavaScript application using Clerk. It shows how to mount the component and then unmount it later.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/organization/organization-list.mdx#2025-04-23_snippet_7\n\nLANGUAGE: js\nCODE:\n```\nimport { Clerk } from '@clerk/clerk-js'\n\n// Initialize Clerk with your Clerk Publishable Key\nconst clerkPubKey = import.meta.env.VITE_CLERK_PUBLISHABLE_KEY\n\nconst clerk = new Clerk(clerkPubKey)\nawait clerk.load()\n\ndocument.getElementById('app').innerHTML = `\n  <div id=\"organization-list\"></div>\n`\n\nconst orgListDiv = document.getElementById('organization-list')\n\nclerk.mountOrganizationList(orgListDiv)\n\n// ...\n\nclerk.unmountOrganizationList(orgListDiv)\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk with Next.js 12 using pnpm\nDESCRIPTION: Installs version 4.x of the @clerk/nextjs package using pnpm package manager for Next.js 12 compatibility.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/usage-with-older-versions.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @clerk/nextjs@^4.0.0\n```\n\n----------------------------------------\n\nTITLE: Clerk `ApplicationNotFound` Error (JSON)\nDESCRIPTION: Represents the JSON error response returned when a request references an application ID (`appID`) that does not exist in the Clerk system. The `longMessage` includes the specific `appID` that was not found.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/application.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Application not found\",\n  \"longMessage\": \"No application was found with id <appID>\",\n  \"code\": \"resource_not_found_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Using RedirectToCreateOrganization in React\nDESCRIPTION: This example shows how to implement the RedirectToCreateOrganization component in a React application. It uses ClerkProvider with a publishable key and controls access with SignedIn and SignedOut components.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-createorganization.mdx#2025-04-23_snippet_1\n\nLANGUAGE: tsx\nCODE:\n```\nimport {\n  ClerkProvider,\n  SignedIn,\n  SignedOut,\n  RedirectToCreateOrganization,\n} from '@clerk/clerk-react'\n\nfunction PrivatePage() {\n  return (\n    <ClerkProvider publishableKey={`{{pub_key}}`}>\n      <SignedIn>\n        <RedirectToCreateOrganization />\n      </SignedIn>\n      <SignedOut>You need to sign in to create an organization.</SignedOut>\n    </ClerkProvider>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Representing LastIdentificationDeletionFailed Error in Clerk JSON\nDESCRIPTION: JSON object representing the 'LastIdentificationDeletionFailed' error in Clerk. This error occurs when attempting to delete the user's only remaining identification. Clerk requires users to maintain at least one identification at all times. It includes a short message ('Deletion failed'), a long message explaining the constraint, and the specific error code 'identification_deletion_failed_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/identifications.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Deletion failed\",\n  \"longMessage\": \"You cannot delete your last identification.\",\n  \"code\": \"identification_deletion_failed_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing React Router Dependencies\nDESCRIPTION: Command to install React Router package using pnpm package manager in a Plasmo-based Chrome Extension project.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/chrome-extension/add-react-router.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\npnpm add react-router\n```\n\n----------------------------------------\n\nTITLE: Viewing Clerk BAPIEndpointDeprecated Error Structure in JSON\nDESCRIPTION: This JSON object illustrates the structure of the `BAPIEndpointDeprecated` error returned by the Clerk API. It includes a short message indicating deprecation, a placeholder for a longer message (`<DeprecationMessage>`), and a specific error code (`api_operation_deprecated_code`) signifying that an API operation is deprecated and pending removal.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/deprecation.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"endpoint is deprecated and pending removal\",\n  \"longMessage\": \"<DeprecationMessage>\",\n  \"code\": \"api_operation_deprecated_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Backend Client Object Properties in TypeScript\nDESCRIPTION: This snippet outlines the properties of the Backend Client object, including identifiers, session information, and timestamps. It's used to represent client data in Clerk's Backend API.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-client.mdx#2025-04-23_snippet_0\n\nLANGUAGE: typescript\nCODE:\n```\ninterface BackendClient {\n  id: string;\n  sessionIds: string[];\n  sessions: Session[];\n  signInId: string;\n  signUpId: string;\n  lastActiveSessionId: string;\n  createdAt: number;\n  updatedAt: number;\n}\n```\n\n----------------------------------------\n\nTITLE: Running Astro Project in Development Mode via yarn - Bash\nDESCRIPTION: This snippet starts the Astro dev server using yarn. Requires Astro to be added as a dependency and a 'dev' script configured in package.json. Outputs a running development server for local testing.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nyarn dev\n```\n\n----------------------------------------\n\nTITLE: Defining Data Setter Function Type in TypeScript\nDESCRIPTION: Type declaration for the setData function that allows manual setting of the paginated data array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/hooks/paginated-resources.mdx#2025-04-23_snippet_5\n\nLANGUAGE: typescript\nCODE:\n```\nsetData: (data: any[]) => void\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Admin Dashboard Page\nDESCRIPTION: A simple Next.js page component that serves as the admin dashboard. This placeholder will be expanded with role-based protection in subsequent steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/basic-rbac.mdx#2025-04-23_snippet_4\n\nLANGUAGE: tsx\nCODE:\n```\nexport default function AdminDashboard() {\n  return <p>This is the protected admin dashboard restricted to users with the `admin` role.</p>\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Provider Title in TypeScript\nDESCRIPTION: Method to get the formatted title of the provider with 'Account' appended.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/javascript/types/external-account.mdx#2025-04-23_snippet_3\n\nLANGUAGE: typescript\nCODE:\n```\nfunction providerTitle(): string\n```\n\n----------------------------------------\n\nTITLE: Accessing Auth Object in @clerk/clerk-sdk-node (Core 1) (TypeScript)\nDESCRIPTION: Example using `@clerk/clerk-sdk-node` (often with Express) showing how authentication data, including claims, was accessed via `req.auth` after applying the `clerkClient.expressRequireAuth()` middleware in Core 1. This context is relevant before the `orgs` claim removal in Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_11\n\nLANGUAGE: typescript\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n\n----------------------------------------\n\nTITLE: Tutorial Hero Component Implementation\nDESCRIPTION: React component that displays prerequisite information for setting up Twitch OAuth with Clerk, including required accounts and setup links.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/social-connections/twitch.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<TutorialHero\n  beforeYouStart={[\n  {\n    title: \"A Clerk app is required.\",\n    link: \"/docs/quickstarts/setup-clerk\",\n    icon: \"clerk\",\n  },\n  {\n    title: \"A Twitch account is required.\",\n    link: \"https://www.twitch.tv/signup\",\n    icon: \"user-circle\",\n  }\n]}\n/>\n```\n\n----------------------------------------\n\nTITLE: Accessing Auth Object in Express with @clerk/clerk-sdk-node (TypeScript)\nDESCRIPTION: Shows how authentication data, including claims (previously containing `orgs`), was accessed via `req.auth` in an Express application using the older `@clerk/clerk-sdk-node` middleware `clerkClient.expressRequireAuth()`. This helps identify usage patterns affected by the JWT claim changes.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/expo.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n```typescript {{ filename: '@clerk/clerk-sdk-node' }}\nimport { clerkClient } from '@clerk/clerk-sdk-node'\n\nrouter.use((...args) => clerkClient.expressRequireAuth()(...args))\nrouter.get('/me', async (req, reply: Response) => {\n  return reply.json({ auth: req.auth })\n})\n```\n```\n\n----------------------------------------\n\nTITLE: Defining OperationNotAllowedOnPrimaryDomain Error (JSON)\nDESCRIPTION: JSON representation of the 'OperationNotAllowedOnPrimaryDomain' error. This signifies that the attempted operation is specifically disallowed on the primary domain and should instead be performed using one of the instance's satellite domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"operation not allowed\",\n  \"longMessage\": \"This operation is not allowed on a primary domain. Try again with a satellite domain of the instance.\",\n  \"code\": \"operation_not_allowed_on_primary_domain_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Billing Account Not Accessible Error in Clerk - JSON\nDESCRIPTION: This snippet documents the JSON format for an error indicating that a given user does not have access to a specific billing account. It lists both the relevant billing account ID (<baID>) and user ID (<userID>) in the longMessage for debugging. The object is used as a reference for handling 'billing_account_not_accessible_code' error responses from the Clerk API. No runtime dependencies are required, and parameters are injected at runtime by the server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing-accounts.mdx#2025-04-23_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"Billing account not accessible\\\",\\n  \\\"longMessage\\\": \\\"Billing account <baID> is not accessible by user <userID>\\\",\\n  \\\"code\\\": \\\"billing_account_not_accessible_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: Using RedirectToCreateOrganization in Remix\nDESCRIPTION: This code snippet illustrates the usage of RedirectToCreateOrganization in a Remix application. It uses SignedIn and SignedOut components to control access to the redirect functionality.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/components/control/redirect-to-createorganization.mdx#2025-04-23_snippet_2\n\nLANGUAGE: tsx\nCODE:\n```\nimport { SignedIn, SignedOut, RedirectToCreateOrganization } from '@clerk/remix'\n\nexport default function Index() {\n  return (\n    <div>\n      <SignedIn>\n        <RedirectToCreateOrganization />\n      </SignedIn>\n      <SignedOut>\n        <p>You need to sign in to create an organization.</p>\n      </SignedOut>\n    </div>\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Defining DuplicateBlocklistIdentifier Error Object in JSON\nDESCRIPTION: Represents the error response for cases where a blocklist identifier already exists. Dependencies include the Clerk system which utilizes this JSON format for error reporting. The object includes the keys 'shortMessage', 'longMessage', and 'code', where '<identifier>' is a placeholder for the actual blocklist identifier. The primary input is the identifier attempted for insertion, and the output is a structured error as shown. Ensure the identifier value is replaced when generating runtime errors.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/blocklist-identifiers.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\\n  \\\"shortMessage\\\": \\\"duplicate blocklist identifier\\\",\\n  \\\"longMessage\\\": \\\"the identifier <identifier> already exists\\\",\\n  \\\"code\\\": \\\"duplicate_record_code\\\"\\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Structure for ActorTokenCannotBeUsed Error\nDESCRIPTION: This JSON object illustrates the error returned when an actor token cannot be used for reasons other than being revoked or already used (e.g., expired). It prompts the user to request a new token and includes the error code `actor_token_cannot_be_used_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/actor-tokens.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"actor token cannot be used\",\n  \"longMessage\": \"This actor token cannot be used anymore. Please request a new one.\",\n  \"code\": \"actor_token_cannot_be_used_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Creating SVG Logo with Gradient and Paths\nDESCRIPTION: Defines an SVG graphic with two path elements - one using a gradient fill and another with dynamic light/dark theme support. Includes a linear gradient definition with red to pink color stops.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/astro.mdx#2025-04-23_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg viewBox=\"0 0 95 107\">\n  <path\n    fill=\"url(#d59103f7)\"\n    d=\"M32.589 91.136c-4.834-4.418-6.245-13.703-4.231-20.429 3.492 4.24 8.33 5.584 13.342 6.343 7.737 1.17 15.335.732 22.523-2.804.822-.405 1.582-.944 2.48-1.489.675 1.957.85 3.932.615 5.942-.573 4.897-3.01 8.679-6.885 11.546-1.55 1.146-3.19 2.171-4.79 3.253-4.917 3.323-6.248 7.22-4.4 12.888.044.139.083.277.183.614-2.51-1.124-4.345-2.76-5.742-4.911-1.476-2.27-2.178-4.781-2.215-7.498-.018-1.323-.018-2.657-.196-3.96-.434-3.178-1.926-4.602-4.737-4.683-2.885-.085-5.166 1.699-5.772 4.507-.046.216-.113.428-.18.679l.005.002Z\"\n  />\n\n  <path\n    style={{ fill: 'var(--light, #17191E) var(--dark, white)' }}\n    d=\"M5 69.587s14.314-6.973 28.668-6.973L44.49 29.12c.405-1.62 1.588-2.72 2.924-2.72 1.335 0 2.518 1.1 2.924 2.72L61.16 62.614c17 0 28.668 6.973 28.668 6.973S65.514 3.352 65.467 3.219C64.769 1.261 63.591 0 62.003 0H32.827c-1.588 0-2.718 1.261-3.464 3.22C29.311 3.35 5 69.586 5 69.586Z\"\n  />\n\n  <defs>\n    <linearGradient id=\"d59103f7\" x1=\"27.47\" x2=\"74.145\" y1=\"107\" y2=\"84.947\" gradientUnits=\"userSpaceOnUse\">\n      <stop stopColor=\"#D83333\" />\n\n      <stop offset=\"1\" stopColor=\"#F041FF\" />\n    </linearGradient>\n  </defs>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Representing MissingClaims Error in Clerk (JSON)\nDESCRIPTION: This JSON object details the structure returned by Clerk when a token is missing required claims. It includes placeholders for a dynamic short message (`<invalidCookieMessage>`) and the specific missing claims (`<claims>`) in the long message, along with the error code `cookie_invalid_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/cookie.mdx#2025-04-23_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"<invalidCookieMessage>\",\n  \"longMessage\": \"The token is missing the following claims: <claims>\",\n  \"code\": \"cookie_invalid_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: JWT Structure Example in Plaintext\nDESCRIPTION: Demonstrates the basic structure of a JWT with three base64-encoded parts separated by dots: header, payload, and signature.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/tokens-and-signatures.mdx#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n<Header>.<Payload>.<Signature>\n```\n\n----------------------------------------\n\nTITLE: Frontend API Rate Limits\nDESCRIPTION: Rate limits for frontend API endpoints including sign-in and sign-up operations. Limits are enforced per user and identified by IP address.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/rate-limits.mdx#2025-04-23_snippet_0\n\nLANGUAGE: http\nCODE:\n```\nPOST /v1/sign_ins           # 5 requests per 10 seconds\nPOST /v1/sign_ups           # 5 requests per 10 seconds\nPOST /v1/sign_ins/attempt_*  # 3 requests per 10 seconds\nPOST /v1/sign_ups/attempt_verification # 3 requests per 10 seconds\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG Logo with React JSX Styling\nDESCRIPTION: This SVG definition renders what appears to be the Clerk logo. It uses React JSX inline styling with CSS variables to handle color changes between light and dark modes, ensuring proper visibility regardless of theme.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/expo.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<svg viewBox=\"0 0 32 32\" style={{ fill: 'var(--light, #000020) var(--dark, white)' }}>\n  <path\n    d=\"M0 26.778c.057.707.307 1.417.957 2.37.774 1.133 2.102 1.754 3.071.757.653-.674 7.725-13.035 11.133-17.72a1.016 1.016 0 0 1 1.664 0c3.408 4.685 10.48 17.046 11.134 17.72.969.997 2.297.376 3.07-.756.76-1.114.971-1.894.971-2.728 0-.568-11.013-21.064-12.123-22.77-1.066-1.64-1.392-1.998-3.196-2.057h-1.376c-1.804.059-2.129.415-3.197 2.056C11.023 5.32.44 25.01 0 26.36v.418Z\"\n  />\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error `AccountTransferInvalid` in JSON\nDESCRIPTION: This JSON object defines the structure for the `AccountTransferInvalid` error in Clerk. It signifies an error during an account transfer process, specifically when there is no account available to transfer. It contains a `shortMessage`, `longMessage`, and the `code` 'account_transfer_invalid'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/sign-in.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid account transfer\",\n  \"longMessage\": \"There is no account to transfer\",\n  \"code\": \"account_transfer_invalid\"\n}\n```\n\n----------------------------------------\n\nTITLE: Verifying Session with Clerk Backend SDK in TypeScript\nDESCRIPTION: This snippet demonstrates how to use the deprecated `verifySession()` method from Clerk's Backend SDK to verify a session. It requires a session ID and a session token as input parameters.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/sessions/verify-session.mdx#2025-04-23_snippet_0\n\nLANGUAGE: tsx\nCODE:\n```\nconst sessionId = 'my-session-id'\n\nconst token = 'my-session-token'\n\nconst session = await clerkClient.sessions.verifySession(sessionId, token)\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/fastify using npm (Bash)\nDESCRIPTION: This command uses the Node Package Manager (npm) to install or update the `@clerk/fastify` package to the latest version, which includes Core 2 starting from v5.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install @clerk/fastify\n```\n\n----------------------------------------\n\nTITLE: Auth Object Without Active Organization (Version 1)\nDESCRIPTION: Example of Clerk's deprecated version 1 Auth object structure without an active organization. Shows fields like sessionId, userId, with null organization-related fields, along with functions and claims containing token data.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_9\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  sessionId: 'sess_123',\n  userId: 'user_123',\n  orgId: null,\n  orgRole: null,\n  orgSlug: null,\n  orgPermissions: null,\n  has: [Function (anonymous)],\n  getToken: [AsyncFunction (anonymous)],\n  claims: {\n    azp: 'http://localhost:3000',\n    exp: 1666622607,\n    iat: 1666622547,\n    iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n    nbf: 1666622537,\n    sid: 'sess_123',\n    sub: 'user_123',\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Running Astro Project in Development Mode via npm - Bash\nDESCRIPTION: This bash command starts the Astro development server using the 'npm run dev' command. The project must have been initialized with npm and include a dev script in package.json. After running, access the local site at the default port to test authentication.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/quickstarts/astro.mdx#2025-04-23_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nnpm run dev\n```\n\n----------------------------------------\n\nTITLE: Implementing Cards Navigation Component in JSX\nDESCRIPTION: JSX component rendering documentation navigation cards with links to various Clerk implementation guides and references for Next.js applications.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/nextjs/next-steps.mdx#2025-04-23_snippet_0\n\nLANGUAGE: jsx\nCODE:\n```\n<Cards>\n  - [Create a custom sign-in or sign-up page](/docs/references/nextjs/custom-sign-in-or-up-page)\n  - This tutorial gets you started with Clerk's `<SignInButton />` component, which uses the Account Portal. If you don't want to use the Account Portal, read this guide about creating a custom authentication page.\n\n  ---\n\n  - [Add custom onboarding to your authentication flow](/docs/references/nextjs/add-onboarding-flow)\n  - If you need to collect additional information about users that Clerk's Account Portal or prebuilt components don't collect, read this guide about adding a custom onboarding flow to your authentication flow.\n\n  ---\n\n  - [Protect specific routes](/docs/references/nextjs/clerk-middleware)\n  - This tutorial taught you that by default, `clerkMiddleware()` will not protect any routes. Read this reference doc to learn how to protect specific routes from unauthenticated users.\n\n  ---\n\n  - [Read user and session data](/docs/references/nextjs/read-session-data)\n  - Learn how to use Clerk's hooks and helpers to access the active session and user data in your Next.js app.\n\n  ---\n\n  - [Next.js SDK Reference](/docs/references/nextjs/overview)\n  - Learn more about the Clerk Next.js SDK and how to use it.\n\n  ---\n\n  - [Deploy to Production](/docs/deployments/overview)\n  - Learn how to deploy your Clerk app to production.\n</Cards>\n```\n\n----------------------------------------\n\nTITLE: Running the Development Server using pnpm (Bash)\nDESCRIPTION: This command uses the pnpm package manager to execute the `dev` script defined in the project's `package.json` file, typically starting the development server.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/react-router/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\npnpm dev\n```\n```\n\n----------------------------------------\n\nTITLE: Auth Object With Active Organization (Version 1)\nDESCRIPTION: Example of Clerk's deprecated version 1 Auth object structure with an active organization. Shows organization-related properties populated with values including orgId, orgRole, and orgPermissions which contains custom permissions array.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  sessionId: 'sess_123',\n  userId: 'user_123',\n  orgId: 'org_123',\n  orgRole: 'org:admin',\n  orgSlug: undefined,\n  orgPermissions: ['org:example-feature:example-perm'], // Custom permissions\n  has: [Function (anonymous)],\n  getToken: [AsyncFunction (anonymous)],\n  claims: {\n    azp: 'http://localhost:3000',\n    exp: 1666622607,\n    iat: 1666622547,\n    iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n    nbf: 1666622537,\n    sid: 'sess_123',\n    sub: 'user_123',\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Defining PrimaryDomainAlreadyExists Error (JSON)\nDESCRIPTION: JSON representation of the 'PrimaryDomainAlreadyExists' error. This error occurs when attempting to designate a newly added domain as the primary domain for an instance that already has a primary domain configured. Clerk instances currently support only one primary domain; subsequent domains must be satellite domains.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"primary domain already exists\",\n  \"longMessage\": \"Currently, only a single primary domain is supported and the current instance already has one. All new domains need to be set a satellites.\",\n  \"code\": \"primary_domain_already_exists_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Membership Requests HTML Structure\nDESCRIPTION: HTML template for displaying organization membership requests in a vanilla JavaScript implementation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-membership-requests.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Clerk + JavaScript App</title>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n\n    <h1>Membership Requests</h1>\n    <table>\n      <thead>\n        <tr>\n          <th>User</th>\n          <th>Date requested</th>\n          <th>Accept</th>\n          <th>Reject</th>\n        </tr>\n      </thead>\n      <tbody id=\"requests-table-body\"></tbody>\n    </table>\n\n    <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Representing LastRequiredIdentificationDeletionFailed Error in Clerk JSON\nDESCRIPTION: JSON object representing the 'LastRequiredIdentificationDeletionFailed' error in Clerk. This error occurs when attempting to delete the user's last identification of a type marked as required (e.g., email or phone number, indicated by `<sanitizedIdentType>`). Users must retain at least one identification of this required type. It includes a short message specifying the identification type, a long message explaining the requirement, and the specific error code 'last_required_identification_deletion_failed_code'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/identifications.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Deleting your last <sanitizedIdentType> is prohibited\",\n  \"longMessage\": \"You are required to maintain at least one <sanitizedIdentType> in your account at all times\",\n  \"code\": \"last_required_identification_deletion_failed_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Clerk Error: InvalidRequestForEnvironment (JSON)\nDESCRIPTION: This JSON object represents the error payload returned when an incoming request is not valid for the type of Clerk instance environment (e.g., development vs. production). It includes a short message, a long message indicating the valid environment types (placeholder `<envTypesAsString>`), and a unique error code.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/authentication.mdx#2025-04-23_snippet_10\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Invalid request for environment\",\n  \"longMessage\": \"Request only valid for <envTypesAsString> instances.\",\n  \"code\": \"request_invalid_for_environment_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Supabase Client Library\nDESCRIPTION: Commands to install the Supabase client library using different package managers including npm, yarn, pnpm, and bun.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm i @supabase/supabase-js\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add @supabase/supabase-js\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add @supabase/supabase-js\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add @supabase/supabase-js\n```\n\n----------------------------------------\n\nTITLE: Installing Fauna library with bun\nDESCRIPTION: Command to install the Fauna JavaScript client library using bun package manager.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/fauna.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nbun add fauna\n```\n\n----------------------------------------\n\nTITLE: Defining Properties of Backend AllowlistIdentifier Object in Markdown\nDESCRIPTION: This code snippet defines the properties of the Backend AllowlistIdentifier object using a custom Properties component in Markdown. It lists five properties: id, identifier, createdAt, updatedAt, and invitationId, along with their types and descriptions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/backend-allowlist-identifier.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<Properties>\n  - `id`\n  - `string`\n\n  A unique ID for the allowlist identifier.\n\n  ---\n\n  - `identifier`\n  - `string`\n\n  The [identifier](/docs/authentication/configuration/sign-up-sign-in-options#identifiers) that was added to the allowlist.\n\n  ---\n\n  - `createdAt`\n  - `number`\n\n  The date when the allowlist identifier was first created.\n\n  ---\n\n  - `updatedAt`\n  - `number`\n\n  The date when the allowlist identifier was last updated.\n\n  ---\n\n  - `invitationId?`\n  - `string`\n\n  The ID of the invitation sent to the identifier.\n</Properties>\n```\n\n----------------------------------------\n\nTITLE: Installing Clerk with Next.js 12 using bun\nDESCRIPTION: Installs version 4.x of the @clerk/nextjs package using Bun package manager for Next.js 12 compatibility.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/nextjs/usage-with-older-versions.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/nextjs@^4.0.0\n```\n\n----------------------------------------\n\nTITLE: Defining SyncNonceAlreadyConsumed Error (JSON)\nDESCRIPTION: JSON representation of the 'SyncNonceAlreadyConsumed' error. This error is returned during a domain synchronization flow if the provided nonce (a one-time token) has already been used in a previous sync attempt and cannot be reused.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/domains.mdx#2025-04-23_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"sync nonce already consumed\",\n  \"longMessage\": \"The given sync nonce has already been consumed and cannot be re-used.\",\n  \"code\": \"sync_nonce_already_consumed_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Representing UnsupportedSubscriptionPlanFeatures Error in JSON (Clerk)\nDESCRIPTION: This JSON object details the `UnsupportedSubscriptionPlanFeatures` error in Clerk. It is returned when attempting to use features not included in the current subscription plan. The messages prompt the user to upgrade their plan, and the error is identified by the code `unsupported_subscription_plan_features_code`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/errors/billing.mdx#2025-04-23_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"shortMessage\": \"Unsupported plan features\",\n  \"longMessage\": \"Some features are not supported in your current plan. Upgrade your subscription to unlock them.\",\n  \"code\": \"unsupported_subscription_plan_features_code\"\n}\n```\n\n----------------------------------------\n\nTITLE: Hotlinking Image in HTML with Privacy Implications\nDESCRIPTION: Shows an HTML example of hotlinking an image from Facebook, which could potentially be used for tracking user behavior across websites.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/backend-requests/resources/cookies.mdx#2025-04-23_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html>\n  <body>\n    <p>Check out this cool picture of me on vacation that I posted on FB</p>\n    <img src='http://facebook.com/images/h0e208whe8r0.jpg alt='Me on vacation' />\n  <body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Starting Inngest Dev Server\nDESCRIPTION: Command to start the Inngest Dev Server for local development and testing of webhook events.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/webhooks/inngest.mdx#2025-04-23_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nnpx inngest-cli@latest dev\n```\n\n----------------------------------------\n\nTITLE: Installing Latest React with Multiple Package Managers - Bash\nDESCRIPTION: Provides shell commands for installing or updating React and React DOM to the latest versions using npm, yarn, pnpm, and bun. Requires package manager installed and appropriate project context. Commands should be run from the project root to update the react-related dependencies; outputs are the updated node_modules and package.json. These commands are specifically for upgrading React as a prerequisite for using Clerk Core 2.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/nextjs.mdx#2025-04-23_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nyarn add react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\npnpm add react@latest react-dom@latest\n```\n\nLANGUAGE: bash\nCODE:\n```\nbun add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Displaying Clerk Account Portal URL for Sign-in\nDESCRIPTION: These URLs show the format for accessing the Clerk Account Portal sign-in page in both development and production environments.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/authentication/web3/coinbase-wallet.mdx#2025-04-23_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- **For development** – `https://your-domain.accounts.dev/sign-in`\n- **For production** – `https://accounts.your-domain.com/sign-in`\n```\n\n----------------------------------------\n\nTITLE: Auth Object With Valid Factor Age (Version 1)\nDESCRIPTION: Example of Clerk's deprecated version 1 Auth object structure with valid factor age. The factorVerificationAge property with value [0,0] indicates both the first and second factors were verified within the past minute.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/backend/types/auth-object.mdx#2025-04-23_snippet_13\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  sessionId: 'sess_123',\n  userId: 'user_123',\n  orgId: null,\n  orgRole: null,\n  orgSlug: null,\n  orgPermissions: null,\n  factorVerificationAge: [0,0],\n  has: [Function (anonymous)],\n  getToken: [AsyncFunction (anonymous)],\n  claims: {\n    azp: 'http://localhost:3000',\n    exp: 1666622607,\n    iat: 1666622547,\n    iss: 'https://renewing-bobcat-00.clerk.accounts.dev',\n    nbf: 1666622537,\n    sid: 'sess_123',\n    sub: 'user_123',\n  },\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Firebase Platform Logo SVG – SVG\nDESCRIPTION: This SVG code snippet generates Firebase's logo to provide a consistent visual reference within Clerk's integration guide. Use in UIs supporting SVG display. There are no required inputs; the SVG produces a recognizable Firebase image asset.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_2\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 157 196\" fill=\"none\"><path fill=\"#FF9100\" d=\"M49.227 190.109a77.714 77.714 0 0 0 26.359 5.568 77.468 77.468 0 0 0 35.304-7.116 109.954 109.954 0 0 1-34.417-21.609c-6.438 10.308-15.96 18.449-27.245 23.157Z\"/><path fill=\"#FFC400\" d=\"M76.471 166.955c-22.67-20.967-36.423-51.314-35.261-84.6.038-1.08.095-2.16.161-3.24a58.722 58.722 0 0 0-30.66.32A77.424 77.424 0 0 0 .552 115.228c-1.174 33.624 19.173 63.003 48.674 74.884a58.878 58.878 0 0 0 27.245-23.157Z\"/><path fill=\"#FF9100\" d=\"M76.472 166.954c5.27-8.435 8.467-18.324 8.839-28.978.978-28.026-17.863-52.135-43.939-58.862-.066 1.08-.123 2.16-.161 3.24-1.163 33.286 12.59 63.633 35.26 84.6Z\"/><path fill=\"#DD2C00\" d=\"M82.395.335C67.543 12.233 55.815 27.921 48.72 45.994a109.67 109.67 0 0 0-7.36 33.127c26.076 6.727 44.916 30.836 43.938 58.862a58.48 58.48 0 0 1-8.839 28.978 109.788 109.788 0 0 0 34.417 21.609c25.79-11.921 44.088-37.574 45.148-67.916.686-19.659-6.867-37.18-17.54-51.969-11.271-15.64-56.09-68.35-56.09-68.35Z\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Clerk Dashboard Linking URL Syntax\nDESCRIPTION: Defines the standard URL structure required for creating direct links to specific pages within the Clerk Dashboard, using the 'last-active' endpoint and a 'path' parameter replacing 'PAGE'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nhttps://dashboard.clerk.com/last-active?path=PAGE\n```\n\n----------------------------------------\n\nTITLE: Correct Terminology for Components and Functions (Documentation Example)\nDESCRIPTION: Example demonstrating the correct use of 'property' for component inputs (`<SignUp />`) and 'parameter' for function inputs (`buildUrlWithAuth()`), as per Clerk's style guide.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nPass the `signUpProps` property to `<SignUp />`. `buildUrlWithAuth()` accepts a `string` for the `to` parameter.\n```\n\n----------------------------------------\n\nTITLE: Conditionally Rendering Content for Multiple SDKs using <If /> in MDX\nDESCRIPTION: Shows how to use the `<If />` component in MDX for conditional rendering based on multiple SDKs. The `sdk` prop accepts an array of strings `['astro', 'react']`, causing the content to be displayed if the active SDK is either Astro or React.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_18\n\nLANGUAGE: mdx\nCODE:\n```\n<If sdk={['astro', 'react']}>This content will only be rendered if the active SDK is Astro or React</If>\n```\n\n----------------------------------------\n\nTITLE: Search Configuration Examples in MDX\nDESCRIPTION: Examples showing different ways to configure search behavior using frontmatter including exclusion, ranking and keywords\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/CONTRIBUTING.md#2025-04-23_snippet_5\n\nLANGUAGE: mdx\nCODE:\n```\n---\ntitle: Example\n+ search: false\n---\n\n---\ntitle: Example\n+ search:\n+   rank: 1\n---\n\n---\ntitle: Example\n+ search:\n+   keywords:\n+     - supercalifragilisticexpialidocious\n---\n```\n\n----------------------------------------\n\nTITLE: Action Bar Component\nDESCRIPTION: React component for displaying remaining todos count and delete completed todos button. Uses Tailwind CSS for styling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/instantdb.mdx#2025-04-23_snippet_11\n\nLANGUAGE: TypeScript\nCODE:\n```\nfunction ActionBar({ todos }: { todos: Todo[] }) {\n  return (\n    <div className=\"flex justify-between items-center h-10 px-2 text-xs border-t border-gray-300\">\n      <div>Remaining todos: {todos.filter((todo) => !todo.done).length}</div>\n      <button className=\" text-gray-300 hover:text-gray-500\" onClick={() => deleteCompleted(todos)}>\n        Delete Completed\n      </button>\n    </div>\n  )\n```\n\n----------------------------------------\n\nTITLE: Rendering Fauna Platform Logo SVG – SVG\nDESCRIPTION: This SVG code renders the Fauna database logo, used for branding and quick visual recognition in documentation pages. Requires SVG rendering ability. The image is purely decorative and does not accept dynamic input.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_1\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 32 37\" fill=\"none\"><path fill=\"#3A1AB6\" d=\"M24.736 8.029c-2.187.745-3.24 2.08-3.957 4.162-.185.556-.648 1.171-1.168 1.585l1.793 1.963-5.692-4.068L0 .46s1.134 7.521 1.527 10.288c.278 1.952.752 2.827 2.256 3.714l.602.33 2.592 1.396-1.54-.816 7.105 3.962-.047.107-7.647-3.62c.405 1.42 1.191 4.152 1.527 5.358.359 1.3.764 1.774 2.002 2.235l2.279.851 1.411-.567-1.793 1.218L1.307 36.54c5.959-5.653 11.003-7.663 14.694-9.307 4.709-2.082 7.543-3.418 9.395-8.22 1.319-3.37 2.348-7.686 3.656-9.354l2.788-3.642s-5.773 1.561-7.104 2.01Z\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Incorrect Terminology for Components and Functions (Documentation Example)\nDESCRIPTION: Example demonstrating the incorrect use of 'parameter' when referring to a component's input (`<SignUp />`) and 'property' when referring to a function's input (`buildUrlWithAuth()`), according to Clerk's style guide.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nThe `<SignUp />` component accepts the `signUpProps` parameter. The `buildUrlWithAuth()` function accepts the `to` property.\n```\n\n----------------------------------------\n\nTITLE: Structuring the HTML Page for Clerk Invitation Management\nDESCRIPTION: This HTML snippet sets up the basic structure for a web page designed to manage organization invitations. It includes a main container (`<div id=\"app\">`), a list element (`<ul id=\"invitations_list\">`) to display invitations, and a form (`<form id=\"new_invitation\">`) for administrators to invite new members via email. It also includes a script tag to load the accompanying JavaScript logic from `main.js`.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/custom-flows/manage-organization-invitations.mdx#2025-04-23_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/vite.svg\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id=\"app\">\n      <ul id=\"invitations_list\"></ul>\n\n      <form id=\"new_invitation\">\n        <div>\n          <label>Email address</label>\n\n          <input type=\"email\" id=\"email_address\" name=\"email_address\" />\n        </div>\n        <button>Invite</button>\n      </form>\n\n      <script type=\"module\" src=\"/src/main.js\" async crossorigin=\"anonymous\"></script>\n    </div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Displaying TanStack Logo with Base64 WebP Image\nDESCRIPTION: HTML image tag configured to display a 32x32 pixel TanStack logo using base64 encoded WebP image data. The image includes alt text for accessibility.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/tanstack-start.mdx#2025-04-23_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<img\n  width=\"32\"\n  height=\"32\"\n  alt=\"tanstack start logo\"\n  src=\"data:image/webp;base64,UklGRu4JAABXRUJQVlA4TOEJAAAvP8APEM8Hu9r2tM0n/1KSMjNze8UzdNWu0duOwMzMlfXTGnBt204b3SczDjPU0+Vr5j+nnZ6Zp2dm0vjJ0oUc2bZqZZ1z3rX/cXcdQphEQgoWB0TgMHOHa3JEASCA6mXbtl1bY02NHcC+gJtq6gS2j+Aa/Sf7/8nY7ADw+MR//od0UAdVqEIUojCFeOEKdZ2TC6d7an1+DTIlHUShDur0v2kPEIX1/ZF5rZCuYct/87xXJc3Jdcw4BHhRxdJqF9PdrdRpi51GGXWq0NbpSINW7nVWUXczcgDDExNiEfXqZnAy7g9PvOkcndL6ndA2FYTZ0e8waiGBcsekHQvyZJbM2C5dIKjFQE9hqRgZowLYZ5RSB00iBaNgKQx8DtQvIjlPAAWYEBECKCAEwEeBpigqfJvUv+k1pq4ajyduRLjbAe2/hCJ8eA5ejtzrLD3L+S1LJiwHtfy3qRsMF6O5Zs3w+OdGQFuYDmjCTUfIq2jCRruMVca0QtDGxEN73TM9m9mVTwTQlWqXKebbnReuFRAsKaMztr8sBDF4XQiCZf2gyhm+evx475T/bMXkJ/P/bH7sn4/fpvxg5xfdVOv/C1DP+5nOBtpF8V51yL7Hp19nN/1fWo2BdPkhPBQTrqPW+58ZI04aj9D8dcriIDYfPs2PeQKY0xtmlRvzW5u3wjVx+VkW8V3c9Bcz/d68ppcUT7NN5BwXMtrfxltpLS6TnfpxZ65i9Jva4/F09xKHDn33UUc9g2Lsa8dmfGDtesPbS7Q+O2PMJOiThnjBUOGBPkhPBomjsrRXRWakM5V5K+byF0kO8uIPPOcl/mupUf4X+Q+g+66zmdB050bbJVvZst3+2OJJd7s3ax939pabr/0Tagr9c9w69ufp30Cs+xcogWqHv6AEedBreClwp6kGmkJSOyjPr6vh72iOy4jMPEacH9WAtuOxwWx1qDE9nwH2MhCgNB9uLeTdml/ZZaWrxv9MWjrSMfjLmHJTb50zARERTEvbtrVt5K0IDGF0mDkb6FLaMDPYwxBmzuBRmSF84GFmxkj25WOBISv4v++T/j+i/w7ctnGk0FOwe8XvoKz9f2KnO/V25pQexx1WfZ5zGTjUXY7U3ff4yh32haU7VwF/vYjCtrJNMplMryD55Zckov8O3LaNpCiDFTqX926/4ElBrkDDz3//8+8P//OfGOfufyB+tjW6CgJR/PyL+yNLgruEZqMrucV//eF7w3cAQEAE1gbEyP01jijSv/3Gv2XfGFgyv//B+Lc/ijQvAtH9/esUfXtzaDDyx7d4/TCdCLz/w1dp+OP2PH69dgMO3k81AvHpl19A6swHADs3AFJ9KBAffJGW2wYhzAHYSyUC8eHn6fjs9tAg9t51jekAgv3kEYiP7qXpjutCcjsdZEvS88GTZJ65eeGBlzCh4vVteLLaQV2dln0v4SHw6bOkCqcHNJb3nCewMBRZPOfUsdtlc5ggAu8/fyEgscIBSVX080RFRLDMrHax02GZXk7X3090PT6yOS8qFHRE57rq55oeBsgWF0cWL4BOVstAdOz2EhmL6CDRsxOr82x9gLFozkV+LCDrpDkO9bNw0dEJceK8OjK4ekTLRmzsj+KnljkqGuhXfRy4CAOXomAhc43lW2qdRZaA86PTnS5r+qgnbj1LmU2BpgRcvw+0qOPoIKk+4LLkAyNmqyDnfHX59Mzp4sbNZP6gwHjxmQ0rDutS1HHIccghcjQ1gwdc7teLmdkKoHZwGRis7hoXU3fcI4zzLAgIAAiYP6MTWUIagaQ5ks8fyMi8RLMUQs3Q4hmUrYJY2d7t6OKduGUeJUGbsqwBDXSIEtGUI5MGROCE2LTUz4IW5Y1BxMh2EM+wfNVQVpLrwY0yu5wBVdZIlzSASUGcy6BwKbxWDmtQZhFEgc2D1cHyZUBERCE2PFgKAAIAxFpUVTQOQEAwNQ6aD7jE/f3ZZQazmtXgkhArfasClpkAKPVgBQBUAwDkxHySynVFBseY0dmYP+AzHvfPW2ox29QygKUIAOtbAQaVuFHFbEKXPsUvayoRl6bGJt7M7g9kuH7uDVfb1TCryFI5w8FFxljVxmaNzfqMP+CqUcUncZ80Ozbxek228GZkci7mMak6RKyNLFYj4uZWrRXOSYEM7/SM4pOBzbwxOgaNNfOhmHHxf4y1KWkk01Z9nRXNaZl+fT7k9cmBy9DCKIyL2jp3/mNNuZypS0d9A1q5c3IgOoezXp/qxt5EY94y2+DC3MchB9PQ0NZk1TgX1eewKeTN4P7pBecTGPvQVgiddGBba7PNnO40ue7HxsTecJo/HBv9xL0SrS127XNCCPeNy8zA9EJL82tjI6PXWq7E+RDc85Ny89mZ8+7F7Zvw5AzuBmcvhNCtT9+9YC2SuvUUbXQunj13yYVw7+oL55wl5f5TNIGLyLleFUL/83tKKXWx69ZNp+TFS5d7FERMX/9lPrIbtNZadt10N2496ZeP/5f9OhJ9r6+E0YIUptxHjfhFP+7HCLS8ftUiBnY5Y8x/rdaihqEWi4hWkFfrbVKIdqZuPW6xHZ++wOiQbR8wLUL52tZjvZrQQdFcHtNyT3TH56+a9M9f8i8YYFKFxOyNQd8gYuc3SicSOphQbJmPPU+s1mTXwJD9+QuMaTeDITH7YrD+YwN/L68AKIP4g6YhNfD45gd8p5Qf9wD+MR+6Oj6rTmMGyLEhMddjkF9b5bLyW30bHAD5PJ1giFP8BuV96BmAwW8/zAo/5Vo+5uDP8tLC/NyshCWnFB3YePlPMmWtTZDr1RMUWvQUmJcbdGRZLTkm5sKS+hPLO9geHpGlotYoZWFybml1ZSubTslkvKGuprrKVZoK42Sd56PCnZXVpbnJAifm8HaMPkzNzrO4mYmC2mpOp5QkVotYA9V0oIIg633Pvd0qjE/McGJOsROH7cUFHg+zGZ1OeA2q3tUZRqqYw7WW3hsFD7gRF7cD85bpmUmKMXPzD7LGpMlNUEzq7BvVPD83E4g5HZw4uXKRUsLC/Zy16WQC4wJSSQV80oUSMjHLvGnf9gTLndw+myFXEJDqgEj/jdccCEnPgeAQUw/3AWQzaRVFKhynmTFOjxXHC4/2IykjInXGBD8CRlofHxbGi2OxMHTJHNhPOmdtNsMXjxXOhwgTfuJRKXTLA5Tv7GcaSAclEZR6nlTWJ/x7ZaGJ/7EDxvCFDoqJ9BN7BBceRw6pEEkLCzYJL3yOHhKWuPV5guJLNwfvD4eLFvgQNXLWbYKDB4OyT+yAhjd0NOK69UgkedvEzHQBosphjoR8DBuJQX531u3vjx0+yBcy0Nj0Ps/aLjQT7v3RI+RQt3+f2yuPHbHv6T4nsgEA\"\n/>\n```\n\n----------------------------------------\n\nTITLE: Rendering Inngest Image – WebP\nDESCRIPTION: This snippet embeds an Inngest logo or icon using a base64-encoded WebP image. To render the image, use an HTML <img> or Markdown image tag with the data URI as the source. No additional dependencies are required except image decoding support in the host environment.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_7\n\nLANGUAGE: WebP\nCODE:\n```\ndata:image/webp;base64,UklGRh4EAABXRUJQVlA4WAoAAAAQAAAAPwAAPwAAQUxQSCsBAAABgGPbttrmrd+p+6VqlV5/GqHKy2WwM7ZsV2G1nkmYORpBmJmZGV5I8J8pVETEBIBcT9/9veFhkKFMGPilITKD69dorvMM8K6g5XUvNdGHtg1BiSfRyfukSoV5V9DhdS8N0YoS+4Q8JY1y79OqJPcpSl/3yBDdSNIQDjGunyLRa111xD2BhNc9zJY2gcQNYY1FkP5lklmJYEZ6LainmXGvmNVghnrNajMl+e2T+D+sJlPKzZTnzNjjZuDLjBBYZOGjDAgxKwDaCLUhFWyXzVGaLQMned0lvtI4TXFw2NVBo1UDiWXL8raLQC5vvpSkM5DMQOuQ0aIByfI1pxaqGRBVw47cpDgQ1jrstWhAvHza2kI10FfqLNykFMhI19BXfS7IVFbUd3PTVwRyAQBWUDggzAIAAFAPAJ0BKkAAQAA+bSyQRb+ioZgLBn34BsS2NhOjmcG42OcWxB5zzRbd/dPwjyhVt/Ej6ZfmA/Yb9gPeH6QD+8ei56lfoAeWZ+tfwVfuR+2HtMtEDSBM1kzDpLxf/u+uW/v4piORnc5jdBlHICkQIbU3Q9Rw1Zv+uCAbrW6IG1df/8EAAP7qGh/9l4pVVBFh+rUY1hy2oGoQV6VGbRHBB2iO0tH/tfH1yRzR3C0HtWw52pZ0QY3Z/vV9q0pqPxK/4/lkfqd2FNP7c15rLCwA8JOvCrqUwq06o83BkZP1MFUdnpr2V8QfIhwktF8gJKTzekh0l7+/J3/8Yi1u5rwesYJlTUDJaZxeZ0/QyaSj7PbEmRwoKia7uNMXgW9sCo+LA7cRYi69D1+QB3yCR8SxVeuahEJAN3IAVOiUwzBeniXMzc5T8B9e5IRgPrynbpSBzCUDWb473yJev7dzLbFtmzFn/234VUeDew/CTEy7fXMomgYBxRubyPU2Os+UNxy8j9+kG1qXNRuPnoCCFf7eempoK9f64lDFekVGNfaP0FMN0yI9fXJBMR6LzLIQ284yBv9SZqJR9yHk9vnwcr+2bcZY+fYRnwm7ed7tJWvWNG/aOZm4ixfPARv8bEWp8DBlrSSNM0fP8eK9AS6LrhQR4cIVsezbBjAAlJ0xwriFeai5RHah1NpMj1I1V6MvEtL8cyoBRz1k492Yo9Nkejreud7UO/yuLM4D1p4btGlGKDTRLgeZPVj9+RDUFTMl8CYLf9V/Wz/4xh/8jFCrLaD3wHlLZ+Wb8PD58Tmzvmvw1gSFiLOt6tdsX0DR5Nov5r6abhM8je+r0W5wX2KGXS/q+a6XpKSVE+mm49uS4cjDWPste4EBGZhmVfnH62FO6za+oovV0UW4rF8TTGp60bC3uj7wnfm6xh7FRW+BBTpGQRbGJMgbchuEdsEhgAAA\n```\n\n----------------------------------------\n\nTITLE: Updating React Dependencies using yarn - Bash\nDESCRIPTION: Updates the project to the latest versions of react and react-dom using the yarn package manager. Ensures the project matches the required React 18+ version prerequisite for Clerk. Run this command in a terminal within your project directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/react.mdx#2025-04-23_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nyarn add react@latest react-dom@latest\n```\n\n----------------------------------------\n\nTITLE: Correct Clerk Dashboard Navigation Instruction (Example 2)\nDESCRIPTION: Example demonstrating the correct way to guide users to a specific tab within a Clerk Dashboard page. It adheres to the style guide's requirements for prefix ('In the Clerk Dashboard'), direct link format, and clear steps.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_6\n\nLANGUAGE: markdown\nCODE:\n```\nTo specify the fallback redirects, in the Clerk Dashboard, go to the **[Account Portal](https://dashboard.clerk.com/last-active?path=account-portal)** page and open the **Redirects** tab.\n```\n\n----------------------------------------\n\nTITLE: Defining JavaScript Logo SVG\nDESCRIPTION: This SVG code defines the JavaScript logo with a yellow background and black JS lettering. It uses a mask to create the shape and paths to define the colors and text.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/icons/javascript.mdx#2025-04-23_snippet_0\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 50 50\" fill=\"none\">\n  <mask\n    id=\"mask0_65_1635\"\n    width=\"50\"\n    height=\"50\"\n    x=\"0\"\n    y=\"0\"\n    maskUnits=\"userSpaceOnUse\"\n    style={{maskType:'luminance'}}\n  >\n    <path fill=\"#fff\" d=\"M50 0H0v50h50V0Z\" />\n  </mask>\n\n  <g mask=\"url(#mask0_65_1635)\">\n    <path fill=\"#F7DF1E\" d=\"M50 0H0v50h50V0Z\" />\n\n    <path\n      fill=\"#000\"\n      d=\"M33.586 39.063c1.008 1.644 2.318 2.853 4.635 2.853 1.947 0 3.19-.973 3.19-2.318 0-1.61-1.277-2.181-3.42-3.119l-1.175-.504c-3.39-1.444-5.642-3.254-5.642-7.079 0-3.524 2.684-6.206 6.88-6.206 2.988 0 5.136 1.04 6.683 3.762L41.078 28.8c-.805-1.445-1.674-2.014-3.023-2.014-1.377 0-2.249.873-2.249 2.014 0 1.41.873 1.98 2.889 2.853l1.175.503c3.992 1.712 6.246 3.457 6.246 7.381 0 4.23-3.323 6.548-7.786 6.548-4.363 0-7.183-2.08-8.562-4.805l3.818-2.218Zm-16.597.407c.738 1.31 1.41 2.416 3.023 2.416 1.544 0 2.518-.604 2.518-2.952V22.958h4.698v16.04c0 4.865-2.852 7.079-7.016 7.079-3.761 0-5.94-1.947-7.048-4.292l3.825-2.315Z\"\n    />\n  </g>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Updating clerkClient Import Path - Clerk - TypeScript\nDESCRIPTION: This short snippet highlights the change in the import path for clerkClient when moving from the Node SDK to the Express SDK. Instead of importing from @clerk/clerk-sdk-node, clerkClient should now be imported from @clerk/express for Express-based applications. Ensures proper Clerk API connectivity and integration.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/node-to-express.mdx#2025-04-23_snippet_10\n\nLANGUAGE: ts\nCODE:\n```\nimport { clerkClient } from '@clerk/clerk-sdk-node'\nimport { clerkClient } from '@clerk/express'\n```\n\n----------------------------------------\n\nTITLE: Defining an SVG Icon in SVG\nDESCRIPTION: This snippet defines a specific SVG icon with a complex path shape and a distinct fill color (`#FF7043`). It sets the dimensions (`width`, `height`) and `viewBox` for proper scaling and display within an HTML or JSX environment, likely as part of a `<Cards>` component in the documentation.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/_partials/community-sdks.mdx#2025-04-23_snippet_3\n\nLANGUAGE: svg\nCODE:\n```\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"76\" height=\"76\" viewBox=\"0 0 76 76\" fill=\"none\"><path d=\"M36.4141 11.8743C36.4141 10.5627 37.4774 9.49935 38.7891 9.49935C40.1007 9.49935 41.1641 10.5627 41.1641 11.8743C41.1641 13.186 40.1007 14.2493 38.7891 14.2493C37.4774 14.2493 36.4141 13.186 36.4141 11.8743ZM11.0807 30.8743C11.0807 29.5627 12.1441 28.4993 13.4557 28.4993C14.7674 28.4993 15.8307 29.5627 15.8307 30.8743C15.8307 32.186 14.7674 33.2493 13.4557 33.2493C12.1441 33.2493 11.0807 32.186 11.0807 30.8743ZM60.1641 30.8743C60.1641 29.5627 61.2274 28.4993 62.5391 28.4993C63.8507 28.4993 64.9141 29.5627 64.9141 30.8743C64.9141 32.186 63.8507 33.2493 62.5391 33.2493C61.2274 33.2493 60.1641 32.186 60.1641 30.8743ZM17.0799 33.3886C17.9926 32.9362 18.4049 31.742 17.9996 30.721L17.1194 28.4993H20.5807V45.916H13.5975C12.7355 42.5361 12.467 39.002 12.8067 35.5083L17.0799 33.3886ZM33.2474 33.2493V28.4993H42.5289C43.0083 28.4993 45.9141 29.0076 45.9141 31.0006C45.9141 32.6554 43.6853 33.2487 41.8526 33.2487L33.2474 33.2493ZM20.5807 59.3743C20.5807 58.0627 21.6441 56.9993 22.9557 56.9993C24.2674 56.9993 25.3307 58.0627 25.3307 59.3743C25.3307 60.686 24.2674 61.7493 22.9557 61.7493C21.6441 61.7493 20.5807 60.686 20.5807 59.3743ZM50.6641 59.3743C50.6641 58.0627 51.7274 56.9993 53.0391 56.9993C54.3507 56.9993 55.4141 58.0627 55.4141 59.3743C55.4141 60.686 54.3507 61.7493 53.0391 61.7493C51.7274 61.7493 50.6641 60.686 50.6641 59.3743ZM51.8225 54.4489C50.7998 54.2224 49.7937 54.8948 49.5746 55.9537L48.5325 60.9793C41.7511 64.1536 33.9674 64.1151 27.2158 60.8736L26.1744 55.8481C25.9552 54.7906 24.9492 54.1168 23.9272 54.3439L19.6339 55.2965C18.8362 54.4476 18.0946 53.5443 17.4141 52.5926H38.3041C38.5405 52.5926 38.6982 52.5484 38.6982 52.3261V44.6896C38.6982 44.4674 38.5405 44.4232 38.3041 44.4232H32.1946V39.5827H38.8025C39.4057 39.5827 42.0276 39.7608 42.866 43.2241C43.1285 44.2893 43.705 47.754 44.0992 48.8633C44.4919 50.1073 46.0911 52.5924 47.7953 52.5924H58.5807C57.8574 53.5929 57.0662 54.5392 56.2133 55.4241L51.8225 54.4489ZM63.206 35.9273C63.3518 37.4459 63.3698 38.9749 63.2598 40.4968H60.6532C60.3923 40.4968 60.2874 40.6742 60.2874 40.9391V42.1793C60.2874 45.0986 58.6985 45.7335 57.3062 45.8952C55.9804 46.0499 54.5104 45.3201 54.3291 44.4795C53.547 39.9217 52.2437 38.9484 50.1855 37.2664C52.7397 35.5859 55.3975 33.1069 55.3975 29.7885C55.3975 26.2054 53.0265 23.9485 51.4105 22.8419C49.1431 21.2935 46.6327 20.9833 45.9555 20.9833H18.9974C22.7241 16.6687 27.7199 13.7475 33.2111 12.6722L36.3888 16.126C37.1072 16.9053 38.297 16.9342 39.0486 16.1893L42.604 12.666C49.9395 14.0897 56.2998 18.7829 59.9964 25.4997L57.5624 31.1953C57.1421 32.1809 57.571 33.3338 58.5198 33.7706L63.206 35.9273ZM69.4589 35.3325L69.3756 34.4797L71.8913 32.1332C72.4029 31.6562 72.2117 30.6961 71.5575 30.4523L68.3415 29.2497L68.0897 28.4195L70.0957 25.6333C70.5048 25.067 70.129 24.1629 69.4401 24.0496L66.049 23.498L65.6412 22.7365L67.0663 19.6085C67.3581 18.9715 66.8158 18.1567 66.1149 18.1834L62.6732 18.3033L62.1295 17.6438L62.9204 14.2912C63.0803 13.6103 62.3894 12.9188 61.7085 13.0787L58.3567 13.8688L57.6958 13.3252L57.8164 9.88336C57.8431 9.18647 57.0276 8.64214 56.392 8.93128L53.2646 10.3571L52.5031 9.94865L51.9502 6.5568C51.8382 5.86926 50.9335 5.49349 50.3672 5.90124L47.579 7.90727L46.7502 7.65609L45.5476 4.43948C45.3038 3.78393 44.3431 3.59537 43.8674 4.10436L41.5209 6.6221L40.6681 6.53882L38.856 3.61072C38.4895 3.01778 37.5082 3.01778 37.1431 3.61072L35.3309 6.53882L34.4774 6.6221L32.1303 4.10436C31.6546 3.59536 30.6939 3.7839 30.4501 4.43948L29.2475 7.65609L28.4181 7.90727L25.6305 5.90124C25.0642 5.49217 24.1588 5.86926 24.0468 6.5568L23.4939 9.94865L22.7324 10.3571L19.605 8.93128C18.9694 8.6408 18.154 9.18645 18.1806 9.88336L18.3005 13.3252L17.6396 13.8688L14.2878 13.0787C13.6069 12.9201 12.9154 13.6103 13.0753 14.2912L13.8648 17.6438L13.3225 18.3033L9.88069 18.1834C9.18648 18.1634 8.63948 18.9716 8.92862 19.6085L10.3544 22.7365L9.94598 23.498L6.55485 24.0496C5.86599 24.1615 5.49289 25.067 5.8993 25.6333L7.90531 28.4195L7.65348 29.2497L4.43689 30.4523C3.78396 30.6961 3.59279 31.6561 4.10311 32.1332L6.61949 34.4797L6.5362 35.3325L3.60876 37.1447C3.01583 37.5111 3.01583 38.4925 3.60876 38.8576L6.5362 40.6698L6.61949 41.5226L4.10311 43.8697C3.59277 44.3454 3.78398 45.3048 4.43689 45.55L7.65348 46.7525L7.90531 47.5827L5.8993 50.3696C5.49156 50.9372 5.86666 51.842 6.55555 51.9525L9.94603 52.5042L10.3544 53.267L8.92868 56.3937C8.6382 57.0293 9.18651 57.8468 9.88075 57.8188L13.3212 57.6982L13.8648 58.3591L13.0753 61.7123C12.9154 62.3918 13.607 63.082 14.2879 62.9221L17.6397 62.1326L18.3006 62.6749L18.1807 66.1174C18.154 66.8143 18.9695 67.3593 19.6051 67.0688L22.7324 65.6438L23.4939 66.0522L24.0469 69.442C24.1588 70.1322 25.0642 70.5053 25.6306 70.0989L28.4168 68.0916L29.2469 68.3441L30.4495 71.5593C30.6933 72.2123 31.654 72.4048 32.1297 71.8931L34.4768 69.3767L35.3303 69.462L37.1425 72.3895C37.5076 72.9797 38.4889 72.9811 38.8554 72.3895L40.6676 69.462L41.5203 69.3767L43.8668 71.8931C44.3425 72.4048 45.3032 72.2122 45.5471 71.5593L46.7496 68.3441L47.5798 68.0916L50.3666 70.0989C50.9329 70.5053 51.8377 70.131 51.9496 69.442L52.5026 66.0522L53.264 65.6438L56.3914 67.0688C57.027 67.3593 57.8411 66.8156 57.8158 66.1174L57.6959 62.6749L58.3561 62.1326L61.7079 62.9221C62.3888 63.082 63.0797 62.3918 62.9199 61.7123L62.1303 58.3591L62.6727 57.6982L66.1144 57.8188C66.8086 57.8468 67.3576 57.0292 67.0658 56.3937L65.6407 53.267L66.0484 52.5042L69.4396 51.9525C70.1298 51.8419 70.5042 50.9372 70.0951 50.3696L68.0891 47.5827L68.3409 46.7525L71.5569 45.55C72.2111 45.3048 72.4023 44.3454 71.8907 43.8697L69.375 41.5226L69.4583 40.6698L72.3857 38.8576C72.9786 38.4925 72.9793 37.5111 72.3862 37.1447L69.4589 35.3325Z\" fill=\"#FF7043\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: Discouraged Phrasing: 'appears' (Documentation Example)\nDESCRIPTION: Example of phrasing ('A modal will appear.') that is discouraged by the Clerk style guide. The preferred alternative is 'open'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_7\n\nLANGUAGE: plaintext\nCODE:\n```\nA modal will appear.\n```\n\n----------------------------------------\n\nTITLE: Incorrect Phrasing for Top Dashboard Navigation (Example)\nDESCRIPTION: Example showing incorrect phrasing ('In the top navigation bar...') for referring to the top section of the Clerk Dashboard. The style guide prefers 'At the top...'.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/styleguides/STYLEGUIDE.md#2025-04-23_snippet_9\n\nLANGUAGE: markdown\nCODE:\n```\nIn the top navigation bar of the Clerk Dashboard, select [**Users**](https://dashboard.clerk.com/last-active?path=users).\n```\n\n----------------------------------------\n\nTITLE: Installing @clerk/fastify using bun (Bash)\nDESCRIPTION: This command uses the Bun package manager to add or update the `@clerk/fastify` package to its latest version, bringing in the Core 2 updates.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/upgrade-guides/core-2/fastify.mdx#2025-04-23_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nbun add @clerk/fastify\n```\n\n----------------------------------------\n\nTITLE: Installing 'node-fetch' Dependency - Bash\nDESCRIPTION: Installs version 2 of the 'node-fetch' package, which is used for making HTTP requests in Node.js. This dependency is used by the migration script to POST new users to Clerk. 'package.json' must be present in the directory.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/deployments/migrate-from-firebase.mdx#2025-04-23_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nnpm i node-fetch@2\n\n```\n\n----------------------------------------\n\nTITLE: Starting Development Server using npm (bash)\nDESCRIPTION: This command starts the TanStack React Start development server using the Node Package Manager (npm). It executes the `dev` script typically configured in the project's `package.json` file to build and serve the application locally.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/references/tanstack-react-start/custom-sign-in-or-up-page.mdx#2025-04-23_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n```bash {{ filename: 'terminal' }}\nnpm run dev\n```\n```\n\n----------------------------------------\n\nTITLE: Rendering Grafbase Platform Logo SVG – SVG\nDESCRIPTION: Renders the Grafbase backend logo as an SVG, intended for graphical display within documentation or application UIs. This code block is self-contained, does not require external resources, and outputs the Grafbase vector image with proper scaling.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/overview.mdx#2025-04-23_snippet_4\n\nLANGUAGE: SVG\nCODE:\n```\n<svg viewBox=\"0 0 20 20\" style={{ fill:'var(--light, black) var(--dark, white)' }}><path fillRule=\"evenodd\" d=\"M10.745.46a.833.833 0 0 1-.372 1.119L2.697 5.417 10 9.068l7.232-3.615-2.649-1.204-4.238 1.926a.833.833 0 1 1-.69-1.517l4.584-2.083c.219-.1.47-.1.69 0l4.583 2.083a.833.833 0 0 1 .027 1.504l-9.166 4.583a.833.833 0 0 1-.746 0L.461 6.162a.833.833 0 0 1 0-1.49L9.627.087a.833.833 0 0 1 1.118.373ZM.088 9.628a.833.833 0 0 1 1.118-.372L10 13.652l8.794-4.397a.833.833 0 0 1 .745 1.49l-9.166 4.584a.833.833 0 0 1-.746 0L.461 10.745a.833.833 0 0 1-.373-1.118Zm0 4.584a.833.833 0 0 1 1.118-.373L10 18.235l8.794-4.397a.833.833 0 0 1 .745 1.49l-9.166 4.584a.833.833 0 0 1-.746 0L.461 15.329a.833.833 0 0 1-.373-1.118Z\" clipRule=\"evenodd\"/></svg>\n```\n\n----------------------------------------\n\nTITLE: React Form Component for Task Creation\nDESCRIPTION: Client-side React component that provides a form interface for adding new tasks. Implements form state management and handles task submission through server actions.\nSOURCE: https://github.com/clerk/clerk-docs/blob/main/docs/integrations/databases/supabase.mdx#2025-04-23_snippet_7\n\nLANGUAGE: typescript\nCODE:\n```\n'use client'\nimport React, { useState } from 'react'\nimport { addTask } from './actions'\nimport { useRouter } from 'next/navigation'\n\nfunction AddTaskForm() {\n  const [taskName, setTaskName] = useState('')\n  const router = useRouter()\n\n  async function onSubmit() {\n    await addTask(taskName)\n    setTaskName('')\n    router.refresh()\n  }\n\n  return (\n    <form action={onSubmit}>\n      <input\n        autoFocus\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Enter new task\"\n        onChange={(e) => setTaskName(e.target.value)}\n        value={taskName}\n      />\n      <button type=\"submit\">Add</button>\n    </form>\n  )\n}\nexport default AddTaskForm\n```"
  }
]
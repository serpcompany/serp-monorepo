[
  {
    "owner": "craftcms",
    "repo": "docs",
    "content": "TITLE: Eager-Loading Image Transforms on Eager-Loaded Assets in Twig\nDESCRIPTION: This example shows how to eager-load image transforms on assets that are also being eager-loaded. This creates a chain of optimizations for nested asset relationships.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .with([\n    ['assetsField', {\n      withTransforms: ['heroImage']\n    }]\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Basic Element Query with Twig and PHP\nDESCRIPTION: Demonstrates the three-step process for creating, configuring, and executing an element query to fetch news entries, using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an entry query and set some parameters on it #}\n{% set postsQuery = craft.entries()\n  .section('news')\n  .orderBy('postDate DESC')\n  .limit(10) %}\n\n{# Execute the query and get the results #}\n{% set posts = postsQuery.all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n// Create an entry query and set some parameters on it\n$postsQuery = Entry::find()\n    ->section('news')\n    ->orderBy('postDate DESC')\n    ->limit(10);\n\n// Execute the query and get the results\n$posts = $postsQuery->all();\n```\n\n----------------------------------------\n\nTITLE: Displaying Pagination Summary in Twig\nDESCRIPTION: This snippet shows how to display a summary of the current page using pageInfo properties in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\nShowing {{ pageInfo.first }}–{{ pageInfo.last }} of {{ pageInfo.total }} results.\n```\n\n----------------------------------------\n\nTITLE: Creating User Queries in Twig and PHP\nDESCRIPTION: This dual-language snippet shows how to initialize a user query in both Twig and PHP. It demonstrates the syntax for creating a new query that can be further refined with parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new user query #}\n{% set myUserQuery = craft.users() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new user query\n$myUserQuery = \\craft\\elements\\User::find();\n```\n\n----------------------------------------\n\nTITLE: Full Payment Checkout Form\nDESCRIPTION: Complete checkout form template for processing full payments, including CSRF protection, redirect handling, and gateway-specific payment form fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# @var cart craft\\commerce\\elements\\Order #}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('commerce/customer/order?number={number}') }}\n  {{ hiddenInput('cancelUrl', 'commerce/checkout/payment'|hash) }}\n\n  {% namespace cart.gateway.handle|commercePaymentFormNamespace %}\n    {{ cart.gateway.getPaymentFormHtml({})|raw }}\n  {% endnamespace %}\n\n  <button>Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Applying Craft CMS Migrations and Project Config Changes\nDESCRIPTION: This command applies database migrations and project config changes in a single step, with interactive mode disabled. It should be run as the final step in a deployment process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft up --interactive=0\n```\n\n----------------------------------------\n\nTITLE: Registering a Twig Extension in PHP\nDESCRIPTION: This code shows how to register a custom Twig extension in a plugin's init() method. The extension is instantiated and registered with Craft's View component, with an optional check to only register it for site requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/extending-twig.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    if (Craft::$app->getRequest()->getIsSiteRequest()) {\n        // Instantiate + register the extension:\n        $extension = new mynamespace\\myplugin\\twig\\Extension();\n        Craft::$app->getView()->registerTwigExtension($extension);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Entries Fields in Twig\nDESCRIPTION: This snippet demonstrates how to fetch artwork entries that are related to an artist using an Entries field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set works = craft.entries()\n  .section('artwork')\n  .myFieldHandle(artist)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Recent Blog Entries in Twig\nDESCRIPTION: Demonstrates how to query and display the 10 most recent entries from a blog section, including setting query parameters and looping through results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an entry query with the 'section' and 'limit' parameters #}\n{% set myEntryQuery = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{# Fetch the entries #}\n{% set entries = myEntryQuery.all() %}\n\n{# Display the entries #}\n{% for entry in entries %}\n  <article>\n    <h1><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h1>\n    {{ entry.summary }}\n    <a href=\"{{ entry.url }}\">Continue reading</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Simple Git-based Deployment for Craft CMS\nDESCRIPTION: A basic deployment script for updating a Craft CMS project using Git. It pulls new code, installs dependencies, runs migrations, and builds front-end assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/deploy.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Fetch new code:\ngit pull\n\n# Install dependencies:\ncomposer install --no-interaction\n\n# Run migrations and apply project config:\nphp craft up --interactive=0\n\n# Build front-end artifacts (less urgent / lower priority):\nnpm install && npm run build\n```\n\n----------------------------------------\n\nTITLE: Applying Coupon Code in Craft Commerce Cart (Twig)\nDESCRIPTION: This snippet demonstrates how to create a form for applying a coupon code to a Craft Commerce cart. It includes a custom success message for when the coupon is applied successfully.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ successMessageInput('Coupon code applied!') }}\n\n  <label>\n    <span>Coupon Code</span>\n    <input\n      type=\"text\"\n      name=\"couponCode\"\n      value=\"{{ cart.couponCode }}\" />\n  </label>\n\n  <button>Buy</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Element Change Tracking Service in PHP\nDESCRIPTION: A service class example that watches for changes to elements by attaching an event handler to individual element instances. This demonstrates instance-level event handling with data capture using the event's data property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\services;\n\nuse craft\\base\\Element;\nuse craft\\events\\ModelEvent;\nuse yii\\base\\Component;\n\nclass TrackChanges extends Component\n{\n    public function watch(Element $element): void\n    {\n        $element->on(\n            Element::EVENT_AFTER_SAVE,\n            function(ModelEvent $e) {\n                $originalAttributes = $e->data->originalAttributes;\n\n                // Perform some comparison of new/old attributes...\n            },\n            [\n                'originalAttributes' => $element->getAttributes(),\n            ],\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS Policies in Craft CMS\nDESCRIPTION: Shows how to implement Cross-Origin Resource Sharing (CORS) policies using Craft's CORS filter. The configuration includes setting allowed origins, methods, headers, and credentials, with specific overrides for the GraphQL API endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Attach the CORS filter to the application:\n    'as corsFilter' => [\n        'class' => \\craft\\filters\\Cors::class,\n\n        // Scope to specific sites (optional):\n        'site' => ['siteA', 'siteB'],\n\n        // CORS defaults for all non-CP requests:\n        'cors' => [\n            'Origin' => [\n                'https://my-project.ddev.site',\n                'https://es.my-project.ddev.site',\n            ],\n            'Access-Control-Request-Method' => ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'],\n            'Access-Control-Request-Headers' => ['*'],\n            'Access-Control-Allow-Credentials' => true,\n            'Access-Control-Max-Age' => 86400,\n            'Access-Control-Expose-Headers' => [],\n        ],\n\n        // Controller/action-specific overrides (optional):\n        'actions' => [\n            'graphql/api' => [\n                'Origin' => ['*'],\n                'Access-Control-Allow-Credentials' => false,\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing Product Type Model with Field Layout Behavior in PHP\nDESCRIPTION: Demonstrates how to create a ProductType model that supports multiple field layouts for different product variations, using FieldLayoutBehavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_55\n\nLANGUAGE: php\nCODE:\n```\nnamespace myplugin\\models;\n\nuse craft\\base\\Model;\nuse craft\\behaviors\\FieldLayoutBehavior;\n\nuse myplugin\\elements\\Product;\n\nclass ProductType extends Model\n{\n    public ?int $id = null;\n    public ?string $name = null;\n    public ?int $fieldLayoutId = null;\n\n    protected function defineBehaviors(): array\n    {\n        return [\n            'fieldLayout' => [\n                'class' => FieldLayoutBehavior::class,\n                'elementType' => Product::class,\n            ],\n        ];\n    }\n\n    public function getConfig(): array\n    {\n        // Define base component configuration:\n        $config = [\n            'name' => $this->name,\n        ];\n\n        // Add a field layout, if one is defined:\n        $fieldLayout = $this->getFieldLayout();\n\n        if ($fieldLayoutConfig = $fieldLayout->getConfig()) {\n            // Store the field layout, keyed by its UID:\n            $config['fieldLayout'] = [\n                $fieldLayout->uid => $fieldLayoutConfig,\n            ];\n        }\n\n        return $config;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Base HTML5 Template with Twig\nDESCRIPTION: A base HTML5 template that defines the fundamental structure with blocks for head and body content. It allows child templates to set the document title and body attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"{{ currentSite.language }}\">\n<head>\n  {% block head %}\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta charset=\"utf-8\">\n    <title>{{ docTitle ?? siteName }}</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  {% endblock %}\n</head>\n<body {{ attr(bodyAttributes ?? {}) }}>\n  {% block body %}\n  {% endblock %}\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Multi-Environment Configuration in PHP for Craft CMS\nDESCRIPTION: Demonstrates how to set up a multi-environment configuration file in Craft CMS. It defines base settings for all environments and overrides specific settings for development and production environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// -- config/general.php --\nreturn [\n    '*' => [\n        // Applies to all environments:\n        'defaultWeekStartDay' => 1,\n        'omitScriptNameInUrls' => true,\n        'allowAdminChanges' => false,\n    ],\n\n    'dev' => [\n        // Only applies to development environments, overriding anything in `*`:\n        'allowAdminChanges' => true,\n        'devMode' => true,\n    ],\n\n    'production' => [\n        // Only applies to the production environment, overriding anything in `*`:\n        'cpTrigger' => 'secret-word',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Caching Data with Craft's Cache Component in PHP\nDESCRIPTION: Demonstrates how to use Craft's cache component to store and retrieve temporary data. It generates a cache key based on parameters and uses the getOrSet method to either fetch cached data or execute a function to fetch and cache new data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/topics.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\n\n$params = [\n    'productId' => 1234,\n];\n\n$key = 'my-plugin:' . md5(json_encode($params));\n\n$value = Craft::$app->getCache()->getOrSet($key, function() {\n    // Fetch remote data...\n\n    return $data;\n}, $duration);\n```\n\n----------------------------------------\n\nTITLE: Handling Undefined Values in Twig Templates\nDESCRIPTION: Demonstrates how to check if a variable is defined before using it to set class names, preventing undefined variable errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% if style is defined %}\n  {% set classNames = \"tip tip--#{style}\" %}\n{% else %}\n  {% set classNames = \"tip tip--plain\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: PHP Control Flow - Happy Path Example\nDESCRIPTION: Demonstration of the 'happy path' pattern in PHP control flow. This shows how to structure conditionals for cleaner and more readable code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nif (!$condition) {\n    return false;\n}\n\n// Do stuff\n\nreturn true;\n```\n\n----------------------------------------\n\nTITLE: Implementing PHP Type Declaration\nDESCRIPTION: Shows how to implement phpType() to declare the runtime type of field values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\npublic static function phpType(): string\n{\n    // The field's value can be `null` or any class that implements a special `CurrencyInterface` interface:\n    return sprintf('\\\\%s|null', CurrencyInterface::class);\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Query Condition Implementation in PHP\nDESCRIPTION: Implementation of queryCondition() method to provide advanced query capabilities for custom field types, handling various query scenarios including nested values and type-specific conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\npublic static function queryCondition(\n    array $instances,\n    mixed $value,\n    array &$params,\n): array|string|ExpressionInterface|false|null {\n    if (is_array($value)) {\n        $conditions = [];\n\n        // Build COALESCE() \"column\" names to properly extract nested values from\n        // all possible uses of a field across eligible field layouts:\n        if (isset($value['type'])) {\n            $valueSql = static::valueSql($instances, 'symbol');\n\n            $conditions[] = match ($value['type']) {\n                'currency' => new Expression(\"CHAR_LENGTH($valueSql) = 3\"),\n                'security' => new Expression(\"CHAR_LENGTH($valueSql) = 12\"),\n            };\n        }\n\n        if (isset($value['amount'])) {\n            $valueSql = static::valueSql($instances, 'amount');\n            $conditions[] = Db::parseNumericParam($valueSql, $value['amount']);\n        }\n\n        if (isset($value['symbol'])) {\n            $valueSql = static::valueSql($instances, 'symbol');\n            $conditions[] = Db::parseParam($valueSql, $value['symbol']);\n        }\n\n        // Did we come up with anything?\n        if (!empty($conditions)) {\n            return $conditions;\n        }\n    }\n\n    // Everything else can be handled by the default behavior:\n    return parent::queryCondition($instances, $value, $params);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Field Validation Rules in PHP\nDESCRIPTION: Example of implementing getElementValidationRules() to add validation rules for a custom field type. Shows how to define string length and value range constraints.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function getElementValidationRules(): array\n{\n    return [\n        [\n            'string',\n            'length' => 3,\n        ],\n        [\n            'in',\n            'range' => $this->getSupportedCurrencySymbols(),\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Search in Twig\nDESCRIPTION: This snippet shows how to implement search functionality using the search param in a Twig element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% set q = craft.app.request.getQueryParam('search') %}\n\n{% set results = craft.entries\n  .section('news')\n  .search(q)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements by Custom Field Value in Twig\nDESCRIPTION: Example demonstrating how to filter entries based on a lightswitch field value using Craft's element query system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Filter by the value of a lightswitch field: #}\n{% set featuredPosts = craft.entries()\n  .isFeatured(true)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Search Results Page with Auto-escaping\nDESCRIPTION: Demonstrates a complete search results template with auto-escaping to prevent XSS vulnerabilities when displaying user search queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.app.request.getQueryParam('q') %}\n\n{% set entries = craft.entries()\n  .section('blog')\n  .search(query)\n  .all() %}\n\n{% if entries %}\n  <h3>Search Results</h3>\n  <ul>\n    {% for entry in entries %}\n      <li>{{ entry.getLink() }}</li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>Sorry, no results for <strong>{{ query }}</strong> were found.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pagination with Paginate Tag\nDESCRIPTION: Demonstrates how to implement pagination for query results using the paginate tag. Shows how to display results and create navigation controls.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n{% for entry in pageEntries %}\n  <article>\n    <h1>{{ entry.title }}</h1>\n    {{ entry.body }}\n  </article>\n{% endfor %}\n\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Full Payment Form in Twig\nDESCRIPTION: Example of a basic payment form template that renders gateway-specific payment fields and posts to the commerce/payments/pay controller action. Uses the gateway's getPaymentFormHtml() method to render required form fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/making-payments.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# @var cart craft\\commerce\\elements\\Order #}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('commerce/customer/order?number={number}') }}\n  {{ hiddenInput('cancelUrl', 'commerce/checkout/payment'|hash) }}\n\n  {% namespace cart.gateway.handle|commercePaymentFormNamespace %}\n    {{ cart.gateway.getPaymentFormHtml({})|raw }}\n  {% endnamespace %}\n\n  <button>Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining URL Rules in config/routes.php\nDESCRIPTION: PHP configuration for advanced routing rules. Shows how to route requests to controller actions or templates with named parameters, and how to create site-specific URL rules for multi-site installations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  // Route blog/archive/YYYY to a controller action\n  'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n\n  // Route blog/archive/YYYY to a template\n  'blog/archive/<year:\\d{4}>' => ['template' => 'blog/_archive'],\n];\n```\n\n----------------------------------------\n\nTITLE: Using the requireLogin Tag in Twig Templates\nDESCRIPTION: An example of the simple requireLogin tag in Craft CMS, which restricts page access to logged-in users only. This tag requires no parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# A user must be logged in to visit this page #}\n{% requireLogin %}\n```\n\n----------------------------------------\n\nTITLE: Element Saving Implementation in PHP\nDESCRIPTION: Example of custom element saving logic including validation and response handling\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_46\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product element (or look it up by ID):\n$product = new Product();\n\n// Set the main properties from POST data\n$request = Craft::$app->getRequest();\n\n$product->price = $request->getBodyParam('price');\n$product->currency = $request->getBodyParam('currency');\n$product->enabled = (bool)$request->getBodyParam('enabled');\n\n// Set custom field values from POST data in a `fields` namespace\n$product->setFieldValuesFromRequest('fields');\n\n// Save the product\nif (!Craft::$app->getElements()->saveElement($product)) {\n    // Return errors, if necessary:\n    return $this->asModelFailure(\n        $product,\n        Craft::t('my-plugin', 'Product could not be saved.'),\n        'product',\n    );\n}\n\n// Done! Return a success message and redirect:\nreturn $this->asModelSuccess(\n    $product,\n    Craft::t('my-plugin', 'Product saved.'),\n    'product',\n    'products/{id}',\n);\n```\n\n----------------------------------------\n\nTITLE: Attaching an Event Handler to the Application Instance in PHP\nDESCRIPTION: Example of attaching an event handler to Craft's application instance using the EVENT_AFTER_REQUEST event. This demonstrates how to hook into application lifecycle events using the singleton Craft::$app instance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse yii\\base\\Application;\n\nCraft::$app->on(\n    Application::EVENT_AFTER_REQUEST,\n    function(Event $e) {\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using Macros for Reusable Template Functions in Twig\nDESCRIPTION: This example demonstrates defining and using a macro to avoid repetitive HTML. The macro accepts parameters and generates consistent markup for navigation items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% macro navItem(label, path) %}\n  <li class=\"nav-item\"><a href=\"{{ url(path) }}\">{{ label }}</a></li>\n{% endmacro %}\n\n<nav class=\"global-nav\">\n  <ul>\n    {{ _self.navItem('About', 'about') }}\n    {{ _self.navItem('Blog', 'blog') }}\n    {{ _self.navItem('Contact', 'contact') }}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Defining and Using Variables in Twig Templates\nDESCRIPTION: Example showing how to set custom variables in Twig using the set tag and then reference those variables in different parts of the HTML document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set title = \"About Us\" %}\n{% set docTitle = title ~ \" | ACME, Inc.\" %}\n\n<html>\n  <head>\n    <title>{{ docTitle }}</title>\n  </head>\n  <body>\n    <h1>{{ title }}</h1>\n    <!-- ... -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Using collect() Method with Collection Operations\nDESCRIPTION: Shows how to use the collect() method to retrieve entries and then perform collection operations like pluck(), collapse(), and join() to generate a list of category titles from related entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with(['category'])\n  .limit(10)\n  .collect() %}\n\n{% set categoriesDescription = entries\n  .pluck('category')\n  .collapse()\n  .pluck('title')\n  .join(', ', ' and ') %}\nPosted in: {{ categoriesDescription }}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->with(['category'])\n    ->limit(10)\n    ->collect();\n\n$categoriesDescription = $entries\n    // Collate all the attached categories:\n    ->pluck('category')\n    // Flatten those into a single array:\n    ->collapse()\n    // Grab just the titles:\n    ->pluck('title')\n    // Turn them into a comma-separated list:\n    ->join(', ', ' and ');\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Plugin File Structure in Craft CMS\nDESCRIPTION: Demonstrates the standard directory structure for a Craft CMS plugin, showing where to place essential files like the changelog, license, readme, composer.json configuration, and the main Plugin.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\n~/dev/\n├── my-project/\n│   └── ...\n└── my-plugin/\n    ├── CHANGELOG.md\n    ├── LICENSE.md\n    ├── README.md\n    ├── composer.json\n    └── src/\n        └── Plugin.php\n```\n\n----------------------------------------\n\nTITLE: Rendering Twig Template in Craft CMS Controller Action\nDESCRIPTION: This code demonstrates how to render a Twig template from a Craft CMS controller action. It uses the renderTemplate method to render a plugin's template with variables and specifies the template mode.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\nuse craft\\web\\View;\n\npublic function actionFoo(): Response\n{\n    $variables = [\n        'bar' => 'baz',\n    ];\n\n    // Render and return the plugin's `foo.twig` template\n    return $this->renderTemplate(\n        'plugin-handle/foo',\n        $variables,\n        View::TEMPLATE_MODE_CP,\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Using column() Method for Single Column Data\nDESCRIPTION: Shows how to retrieve a single column of data using select() and column() methods in both Twig and PHP. Returns an array of entry titles from the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .select(['title'])\n  .column() %}\n\n{# -> ['Post A', 'Post B', 'Post C'] #}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->select(['title'])\n    ->column();\n\n// -> ['Post A', 'Post B', 'Post C']\n```\n\n----------------------------------------\n\nTITLE: Functional Test for Welcome Message Page in PHP\nDESCRIPTION: This snippet shows a functional test using Codeception to verify the welcome message on a specific page. It includes logging in as a user, navigating to the page, and checking for expected content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse FunctionalTester;\n\nclass FunctionalTest\n{\n    public function testWelcomeMessage(FunctionalTester $I)\n    {\n        $I->amLoggedInAs($userWithFirstNameBob);\n        $I->amOnPage('/pages/bob');\n        $I->see('Hi Bob,');\n        $I->see('Welcome to this app!');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Migration for Product Elements\nDESCRIPTION: Database migration code to create the products table with necessary columns and foreign key relationship to the elements table.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Create the Products table:\n$this->createTable('{{%plugin_products}}', [\n    'id' => $this->primaryKey(),\n    'price' => $this->integer()->notNull(),\n    'currency' => $this->char(3)->notNull(),\n    'dateCreated' => $this->dateTime()->notNull(),\n    'dateUpdated' => $this->dateTime()->notNull(),\n    'uid' => $this->uid(),\n]);\n\n// Give it a foreign key to the elements table:\n$this->addForeignKey(\n    null,\n    '{{%plugin_products}}',\n    'id',\n    '{{%elements}}',\n    'id',\n    'CASCADE',\n    null\n);\n```\n\n----------------------------------------\n\nTITLE: Working with Relational Fields in Twig\nDESCRIPTION: Demonstrates how relational fields automatically return fresh element queries that can be further filtered, and shows the difference between auto-cloning and manual variable assignment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedDocuments = entry.attachments.type('document').all() %}\n{% set relatedArticles = entry.attachments.type('article').all() %}\n{% set recentAttachments = entry.attachments\n  .dateCreated(\">= #{now|date_modify('-1 week')}\")\n  .orderBy('dateCreated DESC')\n  .limit(5)\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set attachmentsQuery = entry.attachments %}\n{% set relatedDocuments = attachmentsQuery.type('document').all() %}\n{% set relatedArticles = attachmentsQuery.type('article').all() %}\n{% set recentAttachments = attachmentsQuery\n  .dateCreated(\">= #{now|date_modify('-1 week')}\")\n  .orderBy('dateCreated DESC')\n  .limit(5)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating an Element Index Template in Craft CMS\nDESCRIPTION: This Twig template code extends the element index layout to create a dedicated index page for a custom element type (Products).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/elementindex.twig' %}\n{% set title = 'Products'|t('my-plugin') %}\n{% set elementType = 'ns\\\\prefix\\\\elements\\\\Product' %}\n```\n\n----------------------------------------\n\nTITLE: Using Class Method as an Event Handler in PHP\nDESCRIPTION: Example showing how to use a class method as an event handler instead of a closure. This approach separates the handler logic from the event registration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nEvent::on(\n    Users::class,\n    Users::EVENT_AFTER_ACTIVATE_USER,\n    [MyService::class, 'handleUserActivation']\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Custom Field Value Expressions in Twig and PHP\nDESCRIPTION: Demonstrates how to use fieldValueSql() function in Twig and getValueSql() method in PHP to create custom field value expressions for advanced queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{% set valueSql = fieldValueSql(entryType('post'), 'sourceMedia') %}\n\n{% set entriesFromPhysicalMedia = craft.entries()\n  .section('news')\n  .andWhere([\n    'or like',\n    valueSql,\n    ['print', 'paper', 'press']\n  ])\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$entryType = Craft::$app->getEntries()->getEntryTypeByHandle('post');\n$fieldLayout = $entryType->getFieldLayout();\n$fieldInstance = $fieldLayout->getFieldByHandle('sourceMedia');\n\n$entriesFromPhysicalMedia = Entry::find()\n    ->section('news')\n    ->andWhere([\n      'or like',\n      $fieldInstance->getValueSql(),\n      ['print', 'paper', 'press'],\n    ])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating Database Table for Custom Element in Craft CMS Migration\nDESCRIPTION: SQL commands to create a new database table for storing custom element data, including foreign key relationship to the elements table.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Create the Products table:\n$this->createTable('{{%plugin_products}}', [\n    'id' => $this->primaryKey(),\n    'price' => $this->integer()->notNull(),\n    'currency' => $this->char(3)->notNull(),\n    'dateCreated' => $this->dateTime()->notNull(),\n    'dateUpdated' => $this->dateTime()->notNull(),\n    'uid' => $this->uid(),\n]);\n\n// Give it a foreign key to the elements table:\n$this->addForeignKey(\n    null,\n    '{{%plugin_products}}',\n    'id',\n    '{{%elements}}',\n    'id',\n    'CASCADE',\n    null\n);\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Model in PHP for Craft Plugin\nDESCRIPTION: Creates a settings model class that extends craft\\base\\Model to store and validate plugin settings. The model defines default values and validation rules for the settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace\\models;\n\nuse craft\\base\\Model;\n\nclass Settings extends Model\n{\n    public $foo = 'defaultFooValue';\n    public $bar = 'defaultBarValue';\n\n    public function defineRules(): array\n    {\n        return [\n            [['foo', 'bar'], 'required'],\n            // ...\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Plugin Directory Structure\nDESCRIPTION: Shows the recommended directory structure for a new Craft CMS plugin, including essential files like composer.json, README, and the main Plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n~/dev/\n├── my-project/\n│   └── ...\n└── my-plugin/\n    ├── CHANGELOG.md\n    ├── LICENSE.md\n    ├── README.md\n    ├── composer.json\n    └── src/\n        └── Plugin.php\n```\n\n----------------------------------------\n\nTITLE: Searching for Users by Email Domain in Craft CMS (Twig, GraphQL, PHP)\nDESCRIPTION: Demonstrates how to search for users with email addresses ending in '@craftcms.com' using Twig, GraphQL, and PHP. This showcases element-specific attribute searching for Users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set users = craft.users()\n  .search('email:@craftcms.com')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  users(search: \"email:@craftcms.com\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\User::find()\n    ->search('email:@craftcms.com')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Executing Query with all() Method\nDESCRIPTION: Demonstrates executing an element query with the all() method in both Twig and PHP. This returns an array of populated element models for entries in the 'news' section with a limit of 10.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .limit(10)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->limit(10)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Events in a Newsletter Service for Craft CMS\nDESCRIPTION: This snippet demonstrates the implementation of custom events in a newsletter service, including pre-subscribe and post-subscribe events, along with API interaction.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\services;\n\nuse craft\\helpers\\Json as JsonHelper;\nuse mynamespace\\newsletter\\events\\ApiResponseEvent;\nuse mynamespace\\newsletter\\events\\SubscribeEvent;\nuse mynamespace\\newsletter\\models\\Contact;\nuse yii\\base\\Component;\n\nclass MailingList extends Component\n{\n    /**\n     * @var string Event emitted before a contact is added to the mailing list.\n     */\n    public const EVENT_BEFORE_SUBSCRIBE = 'beforeSubscribe';\n\n    /**\n     * @var string Event emitted after a contact has been added to the mailing list.\n     */\n    public const EVENT_AFTER_SUBSCRIBE = 'afterSubscribe';\n\n    /**\n     * Subscribes a contact to the mailing list.\n     *\n     * @param Contact $contact\n     * @return bool\n     */\n    public function subscribe(Contact $contact): bool\n    {\n        // Create an HTTP client:\n        $client = Craft::createGuzzleClient([\n            'base_uri' => 'https://api.mycrm.com/',\n        ]);\n\n        // We're ready! Emit an event:\n        $subscribeEvent = new SubscribeEvent([\n            'contact' => $contact,\n        ]);\n\n        $this->trigger(self::EVENT_BEFORE_SUBSCRIBE, $subscribeEvent);\n\n        // Check if a handler canceled it:\n        if (!$subscribeEvent->isValid) {\n            return false;\n        }\n\n        // Ok, we're good to go!\n        $response = $client->post('org/1234/lists/5678', [\n            'form_params' => [\n                'name' => $contact->name,\n                'email' => $contact->email,\n            ],\n        ]);\n\n        // Did we upset the API?\n        if ($response->getStatusCode() !== 200) {\n            return false;\n        }\n\n        // Unpack the response:\n        $data = JsonHelper::decode($response->getBody()->getContents());\n\n        // Give plugins a chance to react to this, regardless of success state:\n        $this->trigger(self::EVENT_AFTER_SUBSCRIBE, new ApiResponseEvent([\n            'contact' => $contact,\n            'response' => $response,\n        ]));\n\n        // Make sure it actually contained the expected \"success\" flag:\n        if ($data['success'] !== true) {\n            return false;\n        }\n\n        return true;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Chained Element Query in Twig and PHP\nDESCRIPTION: Shows how to create and execute an element query in a single statement by chaining the execution method at the end, in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('news')\n  .orderBy('postDate DESC')\n  .limit(10)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$posts = Entry::find()\n    ->section('news')\n    ->orderBy('postDate DESC')\n    ->limit(10)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating Nearby Page Links with Pagination in Twig\nDESCRIPTION: Demonstrates how to create pagination with nearby page links, showing a limited number of page links before and after the current page. Uses craft.entries() to query content and the paginate tag to handle pagination.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n<a href=\"{{ pageInfo.firstUrl }}\">First Page</a>\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n\n{% for page, url in pageInfo.getPrevUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n<span class=\"current\">{{ pageInfo.currentPage }}</span>\n\n{% for page, url in pageInfo.getNextUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n<a href=\"{{ pageInfo.lastUrl }}\">Last Page</a>\n```\n\n----------------------------------------\n\nTITLE: Default Value Handling in Twig\nDESCRIPTION: Demonstrates two methods for providing default values using the default filter and null coalesce operator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = \"tip tip--#{style|default('plain')}\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = \"tip tip--#{style ?? 'plain'}\" %}\n```\n\n----------------------------------------\n\nTITLE: Form Template for Controller Action\nDESCRIPTION: Twig template with a form that posts to a controller action. It includes CSRF protection, action input, hidden post ID value, and a comment textarea field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('my-module/blog/comment') }}\n  {{ hiddenInput('postId', entry.id) }}\n\n  <textarea name=\"comment\"></textarea>\n\n  <button>Post Comment</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Validation Rules to Craft Entries\nDESCRIPTION: This code snippet demonstrates how to add custom validation rules to Entry elements using the EVENT_DEFINE_RULES event. It applies array size validation to multiple custom fields in a 'News' section, limiting them to 5 items when entries are being published.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineRulesEvent;\nuse craft\\validators\\ArrayValidator;\nuse yii\\base\\Event;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $event) {\n        /** @var Entry $entry */\n        $entry = $event->sender;\n\n        // Only worry about entries in the News section\n        if ($entry->section->handle !== 'news') {\n            return;\n        }\n\n        $event->rules[] = ['field:myTagsField', ArrayValidator::class, 'max' => 5, 'on' => Entry::SCENARIO_LIVE];\n        $event->rules[] = ['field:myCheckboxesField', ArrayValidator::class, 'max' => 5, 'on' => Entry::SCENARIO_LIVE];\n        $event->rules[] = ['field:myTableField', ArrayValidator::class, 'max' => 5, 'on' => Entry::SCENARIO_LIVE];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Template Hooks in Twig\nDESCRIPTION: This snippet demonstrates how to create a custom hook point in a Twig template. The hook tag allows plugins and modules to inject content or modify the template context at this specific point.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/template-hooks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Give plugins a chance to make changes here #}\n{% hook 'my-custom-hook-name' %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Flash Messages in Twig Layout\nDESCRIPTION: This Twig layout template shows how to retrieve and display flash messages, which are temporary messages stored in the session.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"{{ currentSite.language }}\">\n  <head>\n      <meta charset=\"UTF-8\">\n      <title>{{ siteName }}</title>\n  </head>\n  <body>\n    {% set flashes = craft.app.session.getAllFlashes(true) %}\n\n    {% if flashes | length %}\n      {% for level, flash in flashes %}\n        <p class=\"{{ level }}\" role=\"alert\">{{ flash }}</p>\n      {% endfor %}\n    {% endif %}\n\n    {% block content null %}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Using Twig Markdown Filter\nDESCRIPTION: Shows how to convert Markdown-formatted text into HTML using the markdown filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set text = \"I **really** love Tom Petty.\" %}\n{{ text|markdown }}\n{# Output: <p>I <strong>really</strong> love Tom Petty.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Atomic Deployment Script for Craft CMS\nDESCRIPTION: An advanced deployment script for Craft CMS that implements atomic deployments. It clones the project, installs dependencies, builds artifacts, and updates symlinks for a seamless deployment process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/deploy.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# Get a timestamp to identify this release:\nDATE=\"$(date +'%Y-%m-%d--%H%M%S')\" # -> 2023-01-01--123456\n\n# Define paths we'll be working with:\nWORKING=\"/var/www\"                 # Root deploy directory\nRELEASE=\"$WORKING/releases/$DATE\"  # New release directory\nCURRENT=\"$WORKING/current\"         # Live release \"link\"\n\n# Shallow-clone a fresh copy of the latest project files into our release directory:\ngit clone --depth=1 git@github.com/organization/repo $RELEASE\n\n# Move into the release directory:\npushd $RELEASE\n\n# Install Composer packages:\ncomposer install --no-interaction\n\n# Build other artifacts:\nnpm install\nnpm run build\n\n# Move back out to the main directory:\npopd\n\n# Create a symbolic link to the new release:\nln -sf $RELEASE $CURRENT\n```\n\n----------------------------------------\n\nTITLE: Creating Next and Previous Navigation Links in Twig\nDESCRIPTION: This code demonstrates how to create simple next and previous navigation links using pageInfo methods in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n<nav role=\"navigation\" aria-label=\"Search result pagination\">\n  {% if pageInfo.getPrevUrl() %}\n    <a href=\"{{ pageInfo.getPrevUrl() }}\">Previous Page</a>\n  {% endif %}\n  {% if pageInfo.getNextUrl() %}\n    <a href=\"{{ pageInfo.getNextUrl() }}\">Next Page</a>\n  {% endif %}\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Implementing an Interface-Oriented Service Method in Craft CMS\nDESCRIPTION: Complete example of an interface-oriented service method that handles saving a model implementing an interface, with validation, model callbacks, transaction handling, and events.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function saveIngredient(IngredientInterface $ingredient, $runValidation = true)\n{\n    /** @var Ingredient $ingredient */\n    \n    $isNewIngredient = !$ingredient->id;\n\n    // Fire a 'beforeSaveIngredient' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    if (!$ingredient->beforeSave()) {\n        return false;\n    }\n\n    if ($runValidation && !$ingredient->validate()) {\n        \\Craft::info('Ingredient not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    $transaction = \\Craft::$app->getDb()->beginTransaction();\n    try {\n        // ... Save the ingredient here ...\n\n        $ingredient->afterSave();\n\n        $transaction->commit();\n    } catch (\\Exception $e) {\n        $transaction->rollBack();\n        throw $e;\n    }\n\n    // Fire an 'afterSaveIngredient' event\n    $this->trigger(self::EVENT_AFTER_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Defining ProductType Model with FieldLayoutBehavior in PHP\nDESCRIPTION: This snippet demonstrates how to create a ProductType model that supports multiple field layouts using FieldLayoutBehavior. It includes methods for defining behaviors and generating configuration for project config storage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_42\n\nLANGUAGE: php\nCODE:\n```\nnamespace myplugin\\models;\n\nuse craft\\base\\Model;\nuse craft\\behaviors\\FieldLayoutBehavior;\n\nuse myplugin\\elements\\Product;\n\nclass ProductType extends Model\n{\n    public ?int $id = null;\n    public ?string $name = null;\n    public ?int $fieldLayoutId = null;\n\n    protected function defineBehaviors(): array\n    {\n        return [\n            'fieldLayout' => [\n                'class' => FieldLayoutBehavior::class,\n                'elementType' => Product::class,\n            ],\n        ];\n    }\n\n    public function getConfig(): array\n    {\n        // Define base component configuration:\n        $config = [\n            'name' => $this->name,\n        ];\n\n        // Add a field layout, if one is defined:\n        $fieldLayout = $this->getFieldLayout();\n\n        if ($fieldLayoutConfig = $fieldLayout->getConfig()) {\n            // Store the field layout, keyed by its UID:\n            $config['fieldLayout'] = [\n                $fieldLayout->uid => $fieldLayoutConfig,\n            ];\n        }\n\n        return $config;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Table Attributes for Element Index in PHP\nDESCRIPTION: Implements the defineTableAttributes() method to customize columns available in the Table view of element indexes. It also shows how to set default attributes and customize attribute HTML output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineTableAttributes(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n        'currency' => \\Craft::t('plugin-handle', 'Currency'),\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineDefaultTableAttributes(string $source): array\n{\n    return ['title', 'price', 'currency'];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected function attributeHtml(string $attribute): string\n{\n    switch ($attribute) {\n        case 'price':\n            return \\Craft::$app->formatter->asCurrency($this->price, $this->currency);\n\n        case 'currency':\n            return strtoupper($this->currency);\n    }\n\n    return parent::attributeHtml($attribute);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating the Main Plugin Class for a Craft CMS Plugin\nDESCRIPTION: This PHP code defines the main Plugin class for a Craft CMS plugin. It extends the base Plugin class and includes an init() method for plugin initialization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Exporters and Actions for Element Index in PHP\nDESCRIPTION: Implements methods to define exporters and actions for the element index page, including the Restore action for soft-deleted elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineExporters(string $source): array\n{\n    $exporters = parent::defineExporters($source);\n    $exporters[] = MyExporter::class;\n    return $exporters;\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineActions(string $source = null): array\n{\n    return [\n        FooAction::class,\n        BarAction::class,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Loops in Twig\nDESCRIPTION: Demonstrates different ways to loop through collections in Twig, including arrays and hashes, with access to item values, keys, and the loop variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% set todoList = [\n  'Finish design',\n  'Build HTML & CSS',\n  'Manage content with Craft'\n] %}\n\n<ol class=\"todo\">\n  {% for item in todoList %}\n    <li>{{ item }}</li>\n  {% endfor %}\n</ol>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set colors = {\n  red: '#F00',\n  green: '#0F0',\n  blue: '#00F',\n} %}\n\n{% for name, hex in colors %}\n  <span style=\"color: {{ hex }}\">{{ name|title }}</span>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Mutation for Saving a New Entry in Craft CMS\nDESCRIPTION: Example of a GraphQL mutation to create a new entry in Craft CMS. This mutation saves a new article entry with a title and slug, and returns the created entry's details.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_3\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry($title: String, $slug: String) {\n  save_news_article_Entry(title: $title, slug: $slug) {\n    title\n    slug\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n  }\n}\n\n# query variables:\n{\n  \"title\": \"Craft 3.5 Supports GraphQL Mutations\",\n  \"slug\": \"craft-graphql-mutations\"\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"save_news_article_Entry\": {\n      \"title\": \"Craft 3.5 Supports GraphQL Mutations\",\n      \"slug\": \"craft-graphql-mutations\",\n      \"dateCreated\": \"2020-04-18\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a New Craft CMS Site with Nitro CLI\nDESCRIPTION: Shows the process of creating a new Craft CMS project and setting it up as a Nitro site using the 'create' command. This includes downloading the project, setting up the hostname, PHP version, and database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/usage.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro create tutorial\nDownloading https://github.com/craftcms/craft/archive/HEAD.zip ...\n  … setting up project ✓\nNew site downloaded 🤓\nEnter the hostname [tutorial.nitro]:\n  ✓ setting hostname to tutorial.nitro\n  ✓ adding site ~/dev/tutorial\nEnter the web root for the site [web]:\n  ✓ using web root web\nChoose a PHP version:\n  1. 8.0\n  2. 7.4\n  3. 7.3\n  4. 7.2\n  5. 7.1\n  6. 7.0\nEnter your selection: 1\n  ✓ setting PHP version 8.0\nAdd a database for the site [Y/n]\nSelect the database engine:\n  1. mysql-8.0-3306.database.nitro\n  2. postgres-13-5432.database.nitro\nEnter your selection: 2\nEnter the new database name: tutorial\n  … creating database tutorial ✓\nDatabase added 💪\nShould we update the env file? [Y/n] y\n.env updated!\n  … checking /Users/oli/dev/tutorial/composer.json ✓\nNo lock file found. Updating dependencies instead of installing from lock file. Use composer update over composer install if you do not have a lock file.\nLoading composer repositories with package information\nUpdating dependencies\nLock file operations: 87 installs, 0 updates, 0 removals\n# removed for brevity\n```\n\n----------------------------------------\n\nTITLE: Creating Logout Link in Twig\nDESCRIPTION: Demonstrates how to create a logout link using actionUrl helper in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ actionUrl('users/logout') }}\">Log Out</a>\n\n<a href=\"{{ logoutUrl }}\">Log Out</a>\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Model in PHP for Craft CMS Plugin\nDESCRIPTION: Defines a Settings model class that extends craft\\base\\Model. It sets default values for settings and defines validation rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace\\models;\n\nuse craft\\base\\Model;\n\nclass Settings extends Model\n{\n    public $foo = 'defaultFooValue';\n    public $bar = 'defaultBarValue';\n\n    public function defineRules(): array\n    {\n        return [\n            [['foo', 'bar'], 'required'],\n            // ...\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Save Action with Validation Handling in PHP\nDESCRIPTION: A controller action that processes form submissions for saving widgets, handling both new and existing records. The method includes validation logic and implements success/failure responses with appropriate redirects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\npublic function actionSave()\n{\n    $this->requirePostRequest();\n\n    $request = Craft::$app->getRequest();\n    $widgets = MyPlugin::getInstance()->getWidgets();\n\n    // Is the user trying to edit an existing widget?\n    $id = $request->getBodyParam('id');\n\n    if ($id) {\n        // Ok, we've got an ID—let's look it up.\n        $widget = $widgets->getWidgetById($id);\n\n        // Uh oh, it doesn't exist!\n        // (Or maybe you decide they don't have permission to edit it...)\n        if (!$widget) {\n            throw new BadRequestHttpException('Invalid widget ID.');\n        }\n    } else {\n        // Ok, no ID was passed—looks like they want to create a new one:\n        $widget = new Widget();\n    }\n\n    // ...assign, update, and validate properties...\n\n    if (!$widgets->saveWidget($widget)) {\n        // Hand the model back to the original route:\n        return $this->asModelFailure(\n            $widget, // Model, passed back under the key, below...\n            Craft::t('my-plugin', 'Something went wrong!'), // Flash message\n            'widget', // Route param key\n        );\n    }\n\n    return $this->asModelSuccess(\n        $widget, // Model (included in JSON responses)\n        Craft::t('my-plugin', 'Widget saved.'), // Flash message\n        'widget', // Key the model will be under (in JSON responses)\n        'my-plugin/widgets/{id}', // Redirect \"object template\"\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Payment Processing Endpoints\nDESCRIPTION: Endpoints for processing payments and handling off-site payment completion. Details parameters and response handling for different scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n### POST payments/pay\n### GET payments/complete-payment\n\nParams:\n- commerceTransactionHash: Transaction verification hash\n- gatewayId: Payment gateway identifier\n- paymentAmount: Optional partial payment amount\n```\n\n----------------------------------------\n\nTITLE: Saving Addresses on Order Completion in Craft Commerce Twig Template\nDESCRIPTION: This snippet demonstrates how to allow customers to save their billing and shipping addresses to their address book when completing an order. It includes checks for existing addresses and user authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {# ... #}\n\n  {% if currentUser %}\n    {% if cart.billingAddressId and not cart.sourceBillingAddressId %} \n      {{ input('checkbox', 'saveBillingAddressOnOrderComplete', 1, { checked: cart.saveBillingAddressOnOrderComplete }) }}\n    {% endif %}\n\n    {% if cart.shippingAddressId and not cart.sourceShippingAddressId %} \n      {{ input('checkbox', 'saveShippingAddressOnOrderComplete', 1, { checked: cart.saveShippingAddressOnOrderComplete }) }}\n    {% endif %}\n  {% endif %}\n\n  <button>Save Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining Template Paths in Craft CMS\nDESCRIPTION: Examples of valid template paths in Craft CMS, demonstrating how to reference templates relative to the templates/ folder. Includes variations for index templates and file extensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nrecipes/entry\nrecipes/entry.twig\n\n// For index templates:\nrecipes/ingredients\nrecipes/ingredients/index\nrecipes/ingredients/index.twig\n```\n\n----------------------------------------\n\nTITLE: Following the Happy Path in Control Flow\nDESCRIPTION: Comparison of control flow patterns demonstrating the happy path principle. Early returns for error conditions help maintain clean and readable code structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\nif ($condition) {\n    // Do stuff\n\n    return true;\n}\n\nreturn false;\n\n// Better:\nif (!$condition) {\n    return false;\n}\n\n// Do stuff\n\nreturn true;\n```\n\n----------------------------------------\n\nTITLE: Setting Up Garbage Collection for Custom Elements in PHP\nDESCRIPTION: Shows how to implement garbage collection for custom elements by hooking into the Gc::EVENT_RUN event and using Gc::deletePartialElements() to clean up orphaned data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_52\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\elements\\Product;\nuse craft\\db\\Table;\nuse craft\\services\\Event;\nuse craft\\services\\Gc;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gc::class,\n    Gc::EVENT_RUN,\n    function(Event $event) {\n        // Delete `elements` table rows without peers in our custom products table\n        Craft::$app->getGc()->deletePartialElements(\n            Product::class,\n            'plugin_products',\n            'id',\n        );\n\n        // Delete `elements` table rows without corresponding `content` table rows for the custom element\n        Craft::$app->getGc()->deletePartialElements(\n            Product::class,\n            Table::CONTENT,\n            'elementId',\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Settings in Craft CMS\nDESCRIPTION: Demonstrates how to access plugin settings from within the plugin class or from elsewhere in the application using either the getSettings() method or the $settings magic property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// From your main plugin class:\n$foo = $this->getSettings()->foo;\n\n// From elsewhere:\n$foo = \\mynamespace\\Plugin::getInstance()->getSettings()->foo;\n```\n\n----------------------------------------\n\nTITLE: Implementing Project Config Rebuild Event Handler\nDESCRIPTION: Listens for project config rebuild events to aid Craft in reconstructing project config from database data. This ensures plugin data is included when the project config is rebuilt.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RebuildConfigEvent;\nuse craft\\services\\ProjectConfig;\nuse yii\\base\\Event;\n\nEvent::on(\n    ProjectConfig::class,\n    ProjectConfig::EVENT_REBUILD,\n    function(RebuildConfigEvent $e) {\n        // Add plugin's project config data...\n        $productTypes = MyPlugin::getInstance()->getProductTypes()->getAllProductTypes();\n\n        $config = [];\n\n        foreach ($productTypes as $productType) {\n            $config[$productType->uid] = $productType->getConfig();\n        }\n\n        $e->config['myPlugin']['productTypes'] = $config;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Applying Named Transforms to Images with getUrl() in Twig\nDESCRIPTION: Example of how to apply a named transform to an image asset using the getUrl(), getWidth(), and getHeight() methods in a Twig template. This approach references a predefined transform by its handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl('thumb') }}\"\n  width=\"{{ asset.getWidth('thumb') }}\"\n  height=\"{{ asset.getHeight('thumb') }}\">\n```\n\n----------------------------------------\n\nTITLE: Implementing Search in PHP\nDESCRIPTION: This code demonstrates how to implement search functionality using the search() method in a PHP element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\n$q = Craft::$app->getRequest()->getQueryParam('search');\n\n$results = Entry::find()\n    ->section('news')\n    ->search($q)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Executing GraphQL Queries in Twig with gql()\nDESCRIPTION: Demonstrates how to use the gql() function to execute a GraphQL query and render the results in a template. This example fetches news entries with their images and displays them in a list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% set result = gql('{\n  entries (section: \"news\", limit: 2, orderBy: \"dateCreated DESC\") {\n    postDate @formatDateTime (format: \"Y-m-d\")\n    title\n    url\n    ... on news_article_Entry {\n      shortDescription\n      featuredImage {\n        url @transform (width: 300)\n        altText\n      }\n    }\n  }\n}') %}\n\n{% for entry in result.data %}\n  <h3><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h3>\n  <p class=\"timestamp\">{{ entry.postDate }}</p>\n\n  {% set image = entry.featuredImage[0] %}\n  <img class=\"thumb\" src=\"{{ image.url }}\" alt=\"{{ image.altText }}\">\n\n  {{ entry.shortDescription|markdown }}\n  <p><a href=\"{{ entry.url }}\">Continue reading…</a></p>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using Permission Check Functions in Twig\nDESCRIPTION: Examples of using various permission check functions to verify user capabilities for element operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if canCreateDrafts(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canDelete(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Queue Job in PHP for Craft CMS\nDESCRIPTION: This example demonstrates a basic queue job class that extends Craft's BaseJob to send an email. It implements the required execute() method and provides a default description for the queue task.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/queue-jobs.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace modules\\jobs;\n\nuse Craft;\nuse craft\\mail\\Message;\n\nclass MyJob extends \\craft\\queue\\BaseJob\n{\n    public function execute($queue): void\n    {\n        $message = new Message();\n\n        $message->setTo('to@domain.tld');\n        $message->setSubject('Craft Queue Test');\n        $message->setTextBody('Hello from the Craft queue worker! 👋');\n\n        Craft::$app->getMailer()->send($message);\n    }\n\n    protected function defaultDescription(): string\n    {\n        return Craft::t('app', 'Sending a test email');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Switch Statements in Craft CMS Templates\nDESCRIPTION: This example demonstrates the use of {% switch %} tag in Craft CMS templates to create cleaner conditionals when comparing a variable against multiple possible values. It shows how to handle different Matrix block types efficiently.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% switch matrixBlock.type %}\n  {% case \"text\" %}\n    {{ matrixBlock.textField|markdown }}\n  {% case \"image\" %}\n    {{ matrixBlock.image[0].getImg() }}\n  {% default %}\n    <p>A font walks into a bar.</p>\n    <p>The bartender says, \"Hey, we don't serve your type in here!\"</p>\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Creating Advanced Pagination Links in Twig\nDESCRIPTION: This code demonstrates how to create more advanced pagination links using getDynamicRangeUrls() method in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n<nav role=\"navigation\" aria-label=\"Search result pagination\">\n  <ul>\n    {% for p, url in pageInfo.getDynamicRangeUrls(5) %}\n      <li>\n        {{ tag('a', {\n          text: p,\n          href: url,\n          aria: {\n            label: \"Go to page #{p} of #{pageInfo.totalPages}\",\n          },\n        }) }}\n      </li>\n    {% endfor %}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Implementing Multi-Context GraphQL Type Generator in PHP for Craft CMS\nDESCRIPTION: A PHP implementation of a GraphQL type generator that handles multiple contexts or 'flavors' of widgets. This class generates different GraphQL types based on widget variations, similar to how Craft handles entry types with different field layouts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\Plugin;\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\helpers\\Gql as MyGqlHelper;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Fetch all our pretend widget types to be used as contexts\n        $widgetTypes = Plugin::getInstance()->getAllWidgetTypes();\n        $gqlTypes = [];\n\n        foreach ($widgetTypes as $widgetType) {\n            // Get relevant scopes that may limit schema access\n            $requiredContexts = WidgetElement::gqlScopesByContext($widgetType);\n\n            // Ignore this widget variation if the schema doesn't include it\n            if (!MyGqlHelper::isSchemaAwareOf($requiredContexts)) {\n                continue;\n            }\n\n            // Generate a GQL type for this widget type\n            $type = static::generateType($widgetType);\n            $gqlTypes[$type->name] = $type;\n        }\n\n        return $gqlTypes;\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        // Get the intended GQL type name as determined by the element type\n        $typeName = WidgetElement::gqlTypeNameByContext($context);\n\n        // Get element's user-defined content fields and\n        $contentFieldGqlTypes = self::getContentFields($context);\n\n        // Merge in GQL types for the widget element's own custom fields\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            array_merge(\n                WidgetInterface::getFieldDefinitions(),\n                $contentFieldGqlTypes\n            ),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using translate/t Filter for Internationalization in Twig\nDESCRIPTION: Demonstrates how to use the translate (or t) filter to translate messages using Craft's internationalization system, with optional category specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|t('myCategory') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|t }}\n```\n\n----------------------------------------\n\nTITLE: Implementing a GraphQL Mutation Class in PHP for Craft CMS\nDESCRIPTION: Example class that extends Craft's base Mutation class to provide widget mutations. It implements getMutations() to return available mutations with appropriate permission checks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\mutations;\n\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\Widget;\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutationResolver;\nuse craft\\gql\\base\\Mutation;\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends Mutation\n{\n    public static function getMutations(): array\n    {\n        // Make sure we should be able to mutate widgets\n        if (!GqlHelper::canMutateWidgets()) {\n            return [];\n        }\n\n        $mutations = [];\n\n        // Create an instance of our mutation resolver\n        $resolver = Craft::createObject(WidgetMutationResolver::class);\n\n        if (GqlHelper::canSchema('widget', 'edit')) {\n            // Create a new widget\n            $mutations['createWidget'] = [\n                'name' => 'createWidget',\n                'args' => [\n                    'title' => Type::nonNull(Type::string())\n                ],\n                'resolve' => [$resolver, 'saveWidget'],\n                'description' => 'Saves a new widget.',\n                'type' => Widget::getType(),\n            ];\n        }\n\n        if (GqlHelper::canSchema('widget', 'save')) {\n            // Save an existing widget\n            // ...\n        }\n\n        if (GqlHelper::canSchema('widget', 'delete')) {\n            // Delete a widget\n            // ...\n        }\n\n        return $mutations;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Attaching Behaviors via Event Handler\nDESCRIPTION: Shows how to attach a behavior to Entry elements by handling the EVENT_DEFINE_BEHAVIORS event and conditionally applying the behavior based on section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/behaviors.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineBehaviorsEvent;\nuse mynamespace\\myplugin\\behaviors\\Post;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_BEHAVIORS,\n    function(DefineBehaviorsEvent $e) {\n        $section = $e->sender->getSection();\n\n        // Is it relevant to this entry?\n        if ($section->handle !== 'blog') {\n            return;\n        }\n\n        $e->behaviors['post'] = Post::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Matrix Fields using Twig and PHP\nDESCRIPTION: Examples of how to query for elements that have specific Matrix field content. Shows filtering for elements with any Matrix blocks or with specific Matrix block IDs in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a Matrix block #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a Matrix block\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Saving Multiple Custom Field Values in PHP\nDESCRIPTION: Shows how to save multiple custom field values using direct assignment or bulk method in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n// Direct assignment:\n$product->myCustomField = 'foo';\n$product->myOtherCustomField = 'bar';\n\n// Via bulk method:\n$product->setFieldValues([\n    'myCustomField' => 'foo',\n    'myOtherCustomField' => 'bar',\n]);\n\n\\Craft::$app->getElements()->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Creating and Executing a Basic Element Query in Twig\nDESCRIPTION: This snippet demonstrates how to create an entry query, set parameters, and execute it to fetch news entries in Twig. It creates a query for the 'news' section, orders by post date, limits to 10 results, and retrieves all matching entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an entry query and set some parameters on it #}\n{% set entryQuery = craft.entries()\n  .section('news')\n  .orderBy('postDate DESC')\n  .limit(10) %}\n\n{# Execute the query and get the results #}\n{% set entries = entryQuery.all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Element Actions via Event Handler in PHP\nDESCRIPTION: Example of registering custom element actions for existing element types using Craft's event system. Shows plugin initialization with event registration for Entry elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\base\\Element;\nuse craft\\elements\\Entry;\nuse craft\\events\\RegisterElementActionsEvent;\nuse mynamespace\\elements\\actions\\MyAction;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Entry::class,\n            Element::EVENT_REGISTER_ACTIONS,\n            function(RegisterElementActionsEvent $event) {\n                $event->actions[] = MyAction::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Field Types with Craft CMS in PHP\nDESCRIPTION: This code shows how to register a custom field type with Craft's Fields service using the Event::on() method in a plugin class. The field is added to the types array in the RegisterComponentTypesEvent.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Fields;\nuse yii\\base\\Event;\nuse mynamespace\\fields\\MyField;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Fields::class,\n            Fields::EVENT_REGISTER_FIELD_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyField::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using Conditionals in Twig\nDESCRIPTION: Demonstrates the use of 'if', 'else', and 'elseif' tags for conditional logic in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <p>Hello, {{ currentUser.friendlyName }}</p>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"/logout\">Logout</a>\n{% else %}\n  <a href=\"/login\">Login</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set hour = now|date('G') %}\n\n{% if hour < 12 %}\n  <p>Good morning, {{ currentUser.friendlyName }}</p>\n{% elseif hour < 17 %}\n  <p>Good afternoon, {{ currentUser.friendlyName }}</p>\n{% else %}\n  <p>Good evening, {{ currentUser.friendlyName }}</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Control Panel Screen Response in Craft CMS\nDESCRIPTION: This snippet demonstrates how to create a control panel screen response in Craft CMS. It uses the asCpScreen method to set up various properties of the response, such as action, title, and edit URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$response = $this->asCpScreen()\n    ->action('my-plugin/widgets/save')\n    ->docTitle(\"Edit {$widget->name}\")\n    ->title($widget->name)\n    ->editUrl(UrlHelper::cpUrl(\"widgets/edit/{$widget->id}\");\n\n// ...\n\nreturn $response;\n```\n\n----------------------------------------\n\nTITLE: Using Twig Purify Filter for Content Security\nDESCRIPTION: Demonstrates how to sanitize user content using HTML Purifier before processing it as Markdown.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Purify the content in the Body field, then format as Markdown #}\n{{ entry.body|purify|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries by Status in Twig\nDESCRIPTION: Demonstrates how to query entries with different statuses using Craft's ElementQuery. It shows examples for querying current, upcoming, and past deals based on their status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentDeals = craft.entries()\n  .section('deals')\n  .status('live')\n  .order('postDate DESC')\n  .all() %}\n\n{% set upcomingDeals = craft.entries()\n  .section('deals')\n  .status('pending')\n  .order('postDate ASC')\n  .all() %}\n\n{% set pastDeals = craft.entries()\n  .section('deals')\n  .status('expired')\n  .order('expiryDate DESC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Module Class Template\nDESCRIPTION: This PHP code provides a template for the main Module class in a Craft CMS module. It includes basic initialization logic, setting up aliases, and configuring the controller namespace based on the request type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/module-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace foo;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace\n        Craft::setAlias('@foo', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'foo\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'foo\\\\controllers';\n        }\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Eager Loading with 'with' Parameter\nDESCRIPTION: Optimized version using eager loading to reduce database queries by preloading related assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with(['assetsField'])\n  .all() %}\n\n{% for entry in entries %}\n  {# Get the eager-loaded asset, if there is one #}\n  {% set image = entry.assetsField[0] ?? null %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Element Actions for Craft CMS Element Indexes\nDESCRIPTION: This method determines which action types are available for an element type on its index page. It returns an array of action class names that will be instantiated when needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_33\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineActions(string $source = null): array\n{\n    return [\n        FooAction::class,\n        BarAction::class,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Map Structure Example in PHP\nDESCRIPTION: Example of the data structure returned by eagerLoadingMap(). This shows how to format the mapping between source element IDs (products) and target element IDs (users) for Craft's eager-loading system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\n[\n    'elementType' => User::class,\n    'map' => [\n        // Source: Product ID; Target: User ID\n        ['source' => 8735, 'target' => 385],\n        ['source' => 7319, 'target' => 1388],\n        ['source' => 6684, 'target' => 139],\n        ['source' => 6693, 'target' => 139],\n        // ...\n    ]\n]\n```\n\n----------------------------------------\n\nTITLE: Creating Plugin and Content Migrations in Craft CMS\nDESCRIPTION: Commands for generating new migration files for either plugins or content in a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create my_migration_name --plugin=my-plugin-handle\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create my_migration_name\n```\n\n----------------------------------------\n\nTITLE: Implementing Reference Tags in PHP\nDESCRIPTION: Example of implementing reference tag support for custom elements\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_50\n\nLANGUAGE: php\nCODE:\n```\npublic static function refHandle(): ?string\n{\n    return 'product';\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-Context Widget Type Generator in PHP\nDESCRIPTION: Advanced implementation of a GraphQL type generator supporting multiple widget contexts/flavors with custom field layouts and scope awareness.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\Plugin;\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\helpers\\Gql as MyGqlHelper;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Fetch all our pretend widget types to be used as contexts\n        $widgetTypes = Plugin::getInstance()->getAllWidgetTypes();\n        $gqlTypes = [];\n\n        foreach ($widgetTypes as $widgetType) {\n            // Get relevant scopes that may limit schema access\n            $requiredContexts = WidgetElement::gqlScopesByContext($widgetType);\n\n            // Ignore this widget variation if the schema doesn't include it\n            if (!MyGqlHelper::isSchemaAwareOf($requiredContexts)) {\n                continue;\n            }\n\n            // Generate a GQL type for this widget type\n            $type = static::generateType($widgetType);\n            $gqlTypes[$type->name] = $type;\n        }\n\n        return $gqlTypes;\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        // Get the intended GQL type name as determined by the element type\n        $typeName = WidgetElement::gqlTypeNameByContext($context);\n\n        // Get element's user-defined content fields and\n        $contentFieldGqlTypes = self::getContentFields($context);\n\n        // Merge in GQL types for the widget element's own custom fields\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            array_merge(\n                WidgetInterface::getFieldDefinitions(),\n                $contentFieldGqlTypes\n            ),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a GraphQL Mutation Resolver in PHP for Craft CMS\nDESCRIPTION: Example mutation resolver class that extends ElementMutationResolver. This class handles the saveWidget method which validates permissions, creates a new widget element, and returns the result.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\mutations;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse craft\\gql\\base\\ElementMutationResolver;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\nuse GraphQL\\Error\\UserError;\nuse Craft;\n\nclass Widget extends ElementMutationResolver\n{\n    protected $immutableAttributes = ['id', 'uid'];\n\n    public function saveWidget($source, array $arguments, $context, ResolveInfo $resolveInfo)\n    {\n        $this->requireSchemaAction('widget', 'edit');\n\n        $elementService = Craft::$app->getElements();\n        $widget = $elementService->createElement(WidgetElement::class);\n        // Have Craft populate the element's content\n        $widget = $this->populateElementWithData($widget, $arguments);\n        // Always set our custom approved field to false for mutations\n        $widget->approved = false;\n        // Save the new element\n        $widget = $this->saveElement($widget);\n\n        if ($widget->hasErrors()) {\n            $validationErrors = [];\n\n            foreach ($widget->getFirstErrors() as $attribute => $errorMessage) {\n                $validationErrors[] = $errorMessage;\n            }\n            \n            // Throw a UserError with validation messages if we can't save\n            throw new UserError(implode(\"\\n\", $validationErrors));\n        }\n\n        // Return the newly-saved element\n        return $elementService->getElementById($widget->id, WidgetElement::class);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Service Class in PHP for Craft CMS Plugins\nDESCRIPTION: Template for creating a new service class that extends Yii's Component class. This is the foundation for any service in a Craft CMS plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\services;\n\nuse yii\\base\\Component;\n\nclass Foo extends Component\n{\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Custom Element Class in PHP\nDESCRIPTION: Creates a basic Product element class extending Craft's base Element class. Implements required display name methods and defines custom properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements;\n\nuse craft\\base\\Element;\n\nclass Product extends Element\n{\n    public static function displayName(): string\n    {\n        return 'Product';\n    }\n\n    public static function pluralDisplayName(): string\n    {\n        return 'Products';\n    }\n\n    public int $price = 0;\n    public ?string $currency = null;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Element Resolver in PHP for Craft CMS GraphQL\nDESCRIPTION: Example implementation of a custom element resolver class that extends Craft's ElementResolver base class. The resolver handles Widget element queries and implements the prepareQuery method to process GraphQL arguments and return appropriate element queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\elements;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\helpers\\Gql as GqlHelper;\n\nclass Widget extends \\craft\\gql\\base\\ElementResolver\n{\n    public static function prepareQuery($source, array $arguments, $fieldName = null): mixed\n    {\n        if ($source === null) {\n            // If this is the beginning of a resolver chain, start fresh\n            $query = WidgetElement::find();\n        } else {\n            // If not, get the prepared element query\n            $query = $source->$fieldName;\n        }\n\n        // Return the query if it's preloaded\n        if (is_array($query)) {\n            return $query;\n        }\n\n        foreach ($arguments as $key => $value) {\n            if (method_exists($query, $key)) {\n                $query->$key($value);\n            } elseif (property_exists($query, $key)) {\n                $query->$key = $value;\n            } else {\n                // Catch custom field queries\n                $query->$key($value);\n            }\n        }\n\n        // Don't return anything that's not allowed\n        if (!GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        return $query;\n    }\n```\n\n----------------------------------------\n\nTITLE: Color Field Method Examples\nDESCRIPTION: Demonstrates all available color manipulation and format methods for ColorData objects, including RGB, HSL, and individual color component access.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/color.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myColorField %}\n  {{ entry.myColorField }}                 {# output: #e5422b #}\n  {{ entry.myColorField.getHex() }}        {# output: #e5422b #}\n  {{ entry.myColorField.getRgb() }}        {# output: rgb(229,66,43) #}\n  {{ entry.myColorField.getHsl() }}        {# output: hsl(7,81%,90%) #}\n  {{ entry.myColorField.getLuma() }}       {# output: 0.38820862745098 #}\n  {{ entry.myColorField.getHue() }}        {# output: 7 #}\n  {{ entry.myColorField.getLightness() }}  {# output: 90 #}\n  {{ entry.myColorField.getSaturation() }} {# output: 81 #}\n  {{ entry.myColorField.getRed() }}        {# output: 229 #}\n  {{ entry.myColorField.getGreen() }}      {# output: 66 #}\n  {{ entry.myColorField.getBlue() }}       {# output: 43 #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myColorField) {\n    echo $entry->myColorField;                  // output: #e5422b\n    echo $entry->myColorField->getHex();        // output: #e5422b\n    echo $entry->myColorField->getRgb();        // output: rgb(229,66,43)\n    echo $entry->myColorField->getHsl();        // output: hsl(7,81%,90%)\n    echo $entry->myColorField->getLuma();       // output: 0.38820862745098\n    echo $entry->myColorField->getHue();        // output: 7\n    echo $entry->myColorField->getLightness();  // output: 90\n    echo $entry->myColorField->getSaturation(); // output: 81\n    echo $entry->myColorField->getRed();        // output: 229\n    echo $entry->myColorField->getGreen();      // output: 66\n    echo $entry->myColorField->getBlue();       // output: 43\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering HTML Element with Dynamic Content using Tag Template Tag in Twig\nDESCRIPTION: Demonstrates how to use the '{% tag %}' template tag to render an HTML paragraph element with a dynamic class attribute and content. The tag contents are populated using a variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'p' with {\n  class: 'welcome',\n} %}\n  Hello, {{ currentUser.friendlyName }}\n{% endtag %}\n{# Output: <p class=\"welcome\">Hello, Tim</p> #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Guzzle HTTP Client Settings in PHP\nDESCRIPTION: Configuration file for customizing Guzzle HTTP client settings in Craft CMS. Sets custom headers, query parameters, authentication, and proxy settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'headers' => ['Foo' => 'Bar'],\n    'query' => ['testing' => '123'],\n    'auth' => ['username', 'password'],\n    'proxy' => 'https://myproxy:1234',\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Assets Field Data in PHP\nDESCRIPTION: Demonstrates how to access and work with Assets field data using PHP in Craft CMS. This includes querying related assets, looping through them, and accessing asset properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n\n$relatedAssets = $entry->myFieldHandle->all();\n\nif (count($relatedAssets)) {\n    foreach ($relatedAssets as $rel) {\n        // do something with $rel->url and $rel->filename\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Primary Plugin Class in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates the implementation of a primary plugin class for a Craft CMS plugin. It includes basic methods for plugin name, version, developer information, and URL. This class extends BasePlugin and is essential for plugin functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/setting-things-up.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesPlugin extends BasePlugin\n{\n    function getName()\n    {\n         return Craft::t('Cocktail Recipes');\n    }\n\n    function getVersion()\n    {\n        return '1.0';\n    }\n\n    function getDeveloper()\n    {\n        return 'Pixel & Tonic';\n    }\n\n    function getDeveloperUrl()\n    {\n        return 'http://pixelandtonic.com';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Controller Edit Action for New/Existing Records in PHP\nDESCRIPTION: An action method that handles both new and existing Widget records, supporting both initial rendering and post-validation error displays. This pattern enables a single action to handle multiple route patterns and validation scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\npublic function actionEdit(?int $id = null, ?Widget $widget = null)\n{\n    $widgets = MyPlugin::getInstance()->getWidgets();\n\n    // Do we have an incoming Widget ID from the route?\n    if ($id !== null) {\n        // Was a Widget model passed back via route params? It should take priority:\n        if ($widget === null) {\n            // Nope, let's look it up:\n            $widget = $widgets->getWidgetById($id);\n\n            if (!$widget) {\n                // Uh oh, they're trying to edit something that doesn't exist!\n                throw new NotFoundHttpException('The requested widget does not exist.');\n            }\n        }\n    } else {\n        // Ok, so we're dealing with a \"new\" Widget… was one passed back via route params?\n        if ($widget === null) {\n            // Still no—let's instantiate a fresh one so we have something to pass to the template:\n            $widget = new Widget();\n        }\n    }\n\n    return $this->renderTemplate('my-plugin/_widgets/edit', [\n        'widget' => $widget,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Delta Save Support in Craft CMS Field\nDESCRIPTION: Shows how to implement delta save support in a custom field by checking if the field content has changed before processing in afterElementSave().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/field-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function afterElementSave(ElementInterface $element, bool $isNew): void\n{\n    if ($element->isFieldDirty()) {\n        // logic for handling saved element\n    }\n\n    parent::afterElementSave($element, $isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Base Plugin Class\nDESCRIPTION: Basic implementation of the main Plugin class that extends craft\\base\\Plugin and provides initialization logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Twig Extension in PHP\nDESCRIPTION: This code shows the structure of a custom Twig extension class that adds filters, functions, and tests to Twig. It follows the Twig extension pattern by extending AbstractExtension and implementing methods that return collections of Twig constructs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/extending-twig.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\twig;\n\nuse Craft;\nuse Twig\\Extension\\AbstractExtension;\nuse Twig\\TwigFilter;\nuse Twig\\TwigFunction;\nuse Twig\\TwigTest;\n\nclass Extension extends AbstractExtension\n{\n    public function getFilters(): array\n    {\n        return [\n            // First argument is the filter name; second is a callable:\n            new TwigFilter('total', 'array_sum'),\n        ];\n    }\n\n    public function getFunctions(): array\n    {\n        return [\n            // First argument is the function name; second is a callable:\n            new TwigFunction('log', [Craft::class, 'info']),\n        ];\n    }\n\n    public function getTests(): array\n    {\n        return [\n            // First argument is the test name; second is a callable:\n            new TwigTest('infinite', 'is_infinite'),\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Cart Update Parameters Table\nDESCRIPTION: Lists all supported parameters for the cart/update-cart POST endpoint, including options for managing addresses, line items, currencies and other cart attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nParam | Description\n----- | -----------\nbillingAddress[] | Billing address attributes.\nbillingAddressId | ID of an existing address to use as the billing address.\nbillingAddressSameAsShipping | Set to `true` to use shipping address for billing address.\nclearNotices | When passed, clears all cart notices.\nclearLineItems | When passed, empties all line items from cart.\ncouponCode | Coupon code for a discount that should be applied to the cart.\nemail | Email address to be associated with the cart.\n```\n\n----------------------------------------\n\nTITLE: Bootstrap Configuration for Craft CMS Testing\nDESCRIPTION: The PHP bootstrap file that sets up constants and configures Craft for testing. This file defines important paths for Craft's components and loads environment variables from the .env file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\test\\TestSetup;\n\nini_set('date.timezone', 'UTC');\n\n// Use the current installation of Craft\ndefine('CRAFT_TESTS_PATH', __DIR__);\ndefine('CRAFT_STORAGE_PATH', __DIR__ . '/_craft/storage');\ndefine('CRAFT_TEMPLATES_PATH', __DIR__ . '/_craft/templates');\ndefine('CRAFT_CONFIG_PATH', __DIR__ . '/_craft/config');\ndefine('CRAFT_MIGRATIONS_PATH', __DIR__ . '/_craft/migrations');\ndefine('CRAFT_TRANSLATIONS_PATH', __DIR__ . '/_craft/translations');\ndefine('CRAFT_VENDOR_PATH', dirname(__DIR__).'/vendor');\n\n// Load dotenv?\nif (class_exists(Dotenv\\Dotenv::class)) {\n    // By default, this will allow .env file values to override environment variables\n    // with matching names. Use `createUnsafeImmutable` to disable this.\n    Dotenv\\Dotenv::createUnsafeMutable(CRAFT_TESTS_PATH)->load();\n}\n\nTestSetup::configureCraft();\n```\n\n----------------------------------------\n\nTITLE: Implementing GlobalsInterface for Twig Extensions in PHP\nDESCRIPTION: This code demonstrates how to implement the GlobalsInterface to inject global variables into Twig templates. The example sets a global 'myPlugin' variable to the plugin's singleton instance, making all plugin services available in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/extending-twig.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\twig;\n\nuse Craft;\nuse Twig\\Extension\\AbstractExtension;\nuse Twig\\Extension\\GlobalsInterface;\nuse mynamespace\\myplugin\\MyPlugin;\n\nclass Extension extends AbstractExtension implements GlobalsInterface\n{\n    // ...\n\n    public function getGlobals(): array\n    {\n        // Keys are variable names!\n        return [\n            'myPlugin' => MyPlugin::getInstance(),\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Edition-Based Feature Toggles\nDESCRIPTION: Examples showing how to check for specific plugin editions to enable/disable features in both PHP and Twig templates. Uses the is() method with the edition constant to determine if the feature should be available.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-editions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif (Plugin::getInstance()->is(Plugin::EDITION_PRO) {\n    // Pro edition-only code goes here...\n}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if plugin('plugin-handle').is('pro') %}\n  {# Pro edition-only code goes here... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Working with Hashes in Twig\nDESCRIPTION: Demonstrates how to define and use hash/object data structures in Twig templates, including dynamic keys, iterating through key-value pairs, and accessing specific values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% set specs = {\n  length: '108cm',\n  width: '68.6cm',\n  height: '53.3cm',\n  weight: '90kg'\n} %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set myKey = 'weight' %}\n{% set myValue = '90kg' %}\n\n{% set specs = {\n  (myKey): myValue\n} %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<dl class=\"specs\">\n  {% for key, value in specs %}\n    <dt>{{ key }}</dt>\n    <dd>{{ value }}</dd>\n  {% endfor %}\n</dl>\n```\n\nLANGUAGE: twig\nCODE:\n```\n<dl class=\"specs\">\n  <dt>Dimensions</dt>\n  <dd>{{ specs.length }} × {{ specs.width }} × {{ specs.height }}</dd>\n\n  <dt>Weight</dt>\n  <dd>{{ specs['weight'] }}</dd>\n</dl>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Searchable Attributes in Craft CMS PHP\nDESCRIPTION: Demonstrates how to add custom searchable attributes and define keywords for entries using Craft CMS event listeners. Shows implementation of EVENT_REGISTER_SEARCHABLE_ATTRIBUTES and EVENT_DEFINE_KEYWORDS events.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineAttributeKeywordsEvent;\nuse craft\\events\\RegisterElementSearchableAttributesEvent;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_REGISTER_SEARCHABLE_ATTRIBUTES,\n    function(RegisterElementSearchableAttributesEvent $e) {\n      // Add a new `author` search attribute:\n      $e->attributes[] = 'author';\n    }\n);\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_KEYWORDS,\n    function (DefineAttributeKeywordsEvent $e) {\n        if ($e->attribute === 'author') {\n            // Let Craft know that we've been able to set custom keywords:\n            $e->handled = true;\n\n            // You can set almost anything as keywords, and let Craft figure out how to normalize it...\n            $e->keywords = $e->sender->getAuthor();\n\n            // ...or do something more explicit:\n            if ($author = $e->sender->getAuthor()) {\n                $e->keywords = $author->getFullName();\n            }\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Assets by Kind in Twig\nDESCRIPTION: A Twig example demonstrating how to filter related assets to return only images by applying the kind parameter to the query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedAssets = entry.myFieldHandle\n  .kind('image')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Validation Errors in Twig Template\nDESCRIPTION: This Twig template demonstrates how to display validation errors for a user profile form, including handling CSRF tokens and form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{% block content %}\n  <h1>Hello, {{ currentUser.fullName }}</h1>\n\n  {% set user = user ?? currentUser %}\n\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('users/save-user') }}\n    {{ hiddenInput('userId', user.id) }}\n\n    <label for=\"fullName\">Full Name</label>\n\n    {{ input('text', 'fullName', user.fullName, {\n      id: 'fullName',\n      aria: {\n        invalid: user.hasErrors('fullName'),\n        errormessage: user.hasErrors('fullName') ? 'fullName-errors' : null,\n      },\n    }) }}\n\n    {% if user.hasErrors('fullName') %}\n      <ul id=\"fullName-errors\">\n        {% for error in user.getErrors('fullName') %}\n          <li>{{ error }}</li>\n        {% endfor %}\n      </ul>\n    {% endif %}\n\n    <button>Save</button>\n  </form>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Lazy Eager-Loading in Twig using .eagerly()\nDESCRIPTION: This example demonstrates how to use lazy eager-loading with the .eagerly() method for optimizing nested queries of topics and their thumbnails.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('news')\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    <ul>\n      {% for topic in post.topics.eagerly().all() %}\n        {% set icon = topic.thumbnail.eagerly().one() %}\n\n        {# ... #}\n      {% endfor %}\n    </ul>\n  </article>\n```\n\n----------------------------------------\n\nTITLE: Submitting Custom Field Data in Twig\nDESCRIPTION: This snippet demonstrates how to submit custom field data in a form, including an example of re-keying the field data using the fieldsLocation parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n  {{ hiddenInput('fieldsLocation', 'f')}}\n\n  {# Don't forget to update all your input names! #}\n  {{ input('text', 'f[myCustomFieldHandle]') }}\n\n  <button>Save Entry</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing a Class-Oriented Service Method in Craft CMS\nDESCRIPTION: Example of a class-oriented service method for saving a recipe. It includes event triggering, validation, and the basic structure for saving an object of a specific class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/services.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function saveRecipe(Recipe $recipe, $runValidation = true)\n{\n    $isNewRecipe = !$recipe->id;\n    \n    // Fire a 'beforeSaveRecipe' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    if ($runValidation && !$recipe->validate()) {\n        \\Craft::info('Recipe not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    // ... Save the recipe here ...\n\n    // Fire an 'afterSaveRecipe' event\n    $this->trigger(self::EVENT_AFTER_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Building Category Navigation in Twig\nDESCRIPTION: Example of creating a hierarchical navigation menu from categories using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a category query with the 'group' parameter #}\n{% set myCategoryQuery = craft.categories()\n  .group('topics') %}\n\n{# Fetch the categories #}\n{% set categories = myCategoryQuery.all() %}\n\n{# Display the navigation #}\n<ul>\n  {% nav category in categories %}\n    <li>\n      <a href=\"{{ category.url }}\">{{ category.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating Password Reset Form in Twig\nDESCRIPTION: Example of creating a password reset form with CSRF protection and proper action input using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/send-password-reset-email') }}\n\n  <label for=\"loginName\">Username or email</label>\n  {{ input('text', 'loginName', null, {\n    id: 'loginName',\n  }) }}\n\n  <button>Reset Password</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Handling Form Submission with CSRF Token in Twig Template\nDESCRIPTION: This Twig template shows how to create a form with a CSRF token and handle form submission, including displaying validation errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<button\n  id=\"update-name\"\n  data-user-id=\"{{ currentUser.id }}\"\n  data-csrf-token-value=\"{{ craft.app.request.getCsrfToken() }}\"\n  data-csrf-token-name=\"{{ craft.app.config.general.csrfTokenName }}\">Edit Name</button>\n\n<script>\n  const $button = document.getElementById('update-name');\n\n  $button.addEventListener('click', function(e) {\n    const params = new FormData();\n\n    params.append('userId', $button.dataset.userId);\n    params.append($button.dataset.csrfTokenName, $button.dataset.csrfTokenValue);\n    params.append('fullName', prompt('New name:'));\n\n    fetch('/actions/users/save-user', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: params,\n    })\n    .then(response => response.json())\n    .then(result => console.log(result));\n  });\n</script>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Element Resolver for GraphQL in Craft CMS (PHP)\nDESCRIPTION: This code snippet demonstrates how to create a custom ElementResolver class for a 'Widget' element type in Craft CMS. It extends the base ElementResolver and implements the prepareQuery() method to return an element query. The resolver handles different scenarios based on the source and applies query arguments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\elements;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\helpers\\Gql as GqlHelper;\n\nclass Widget extends \\craft\\gql\\base\\ElementResolver\n{\n    public static function prepareQuery($source, array $arguments, $fieldName = null): mixed\n    {\n        if ($source === null) {\n            // If this is the beginning of a resolver chain, start fresh\n            $query = WidgetElement::find();\n        } else {\n            // If not, get the prepared element query\n            $query = $source->$fieldName;\n        }\n\n        // Return the query if it's preloaded\n        if (is_array($query)) {\n            return $query;\n        }\n\n        foreach ($arguments as $key => $value) {\n            if (method_exists($query, $key)) {\n                $query->$key($value);\n            } elseif (property_exists($query, $key)) {\n                $query->$key = $value;\n            } else {\n                // Catch custom field queries\n                $query->$key($value);\n            }\n        }\n\n        // Don't return anything that's not allowed\n        if (!GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        return $query;\n    }\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Widget Element Type in PHP\nDESCRIPTION: Creates a custom Widget element type class that extends Craft's base Element type and implements a Widget interface. The class sets up the configuration and interfaces for the GraphQL type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\elements;\n\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nclass Widget extends \\craft\\gql\\types\\elements\\Element\n{\n    public function __construct(array $config)\n    {\n        $config['interfaces'] = [\n            WidgetInterface::getType(),\n        ];\n\n        parent::__construct($config);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Base HTML5 Template in Twig\nDESCRIPTION: Defines a base HTML5 template with customizable blocks for head and body content, and dynamic title and body attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"{{ currentSite.language }}\">\n<head>\n  {% block head %}\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta charset=\"utf-8\">\n    <title>{{ docTitle ?? siteName }}</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  {% endblock %}\n</head>\n<body {{ attr(bodyAttributes ?? {}) }}>\n  {% block body %}\n  {% endblock %}\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Accessing the Cart in Twig\nDESCRIPTION: Demonstrates how to access the customer's cart using the Commerce carts service in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n```\n\n----------------------------------------\n\nTITLE: Creating a GraphQL Argument Handler in Craft CMS\nDESCRIPTION: Example class that extends RelationArgumentHandler to handle a custom GraphQL query argument. This processes the relatedToWidgets argument by converting it to element IDs for the query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\argumenthandlers;\n\nuse mynamespace\\elements\\Widget;\nuse craft\\gql\\base\\RelationArgumentHandler;\n\nclass RelatedWidgets extends RelationArgumentHandler\n{\n    protected $argumentName = 'relatedToWidgets';\n\n    protected function handleArgument($argumentValue)\n    {\n        $argumentValue = parent::handleArgument($argumentValue);\n        return $this->getIds(Widget::class, $argumentValue);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Array Manipulation with Twig Filters in Craft CMS\nDESCRIPTION: Twig filters for array operations in Craft CMS, including filtering, grouping, and finding differences between arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = ['foo', 'bar'] %}\n{% set arr2 = ['bar', 'baz'] %}\n{% set arr3 = arr1|diff(arr2) %}\n{# Result: ['foo'] #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = ['foo', '', 'bar', '', 'baz'] %}\n{% set filteredArray = array|filter %}\n{# Result: ['foo', 'bar', 'baz'] #}\n\n{% set array = ['foo', 'bar', 'baz'] %}\n{% set filteredArray = array|filter(v => v[0] == 'b') %}\n{# Result: ['bar', 'baz'] #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set allEntries = craft.entries().section('blog').all() %}\n{% set allEntriesByYear = allEntries|group(e => e.postDate|date('Y')) %}\n\n{% for year, entriesInYear in allEntriesByYear %}\n  <h2>{{ year }}</h2>\n\n  <ul>\n    {% for entry in entriesInYear %}\n      <li><a href=\"{{ entry.url }}\">{{ entry.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Fetching and Displaying Global Set Content in Twig\nDESCRIPTION: Demonstrates creating a global set query, setting parameters, fetching the global set, and outputting its content in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/globals.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a global set query with the 'handle' and 'siteId' parameters #}\n{% set myGlobalSetQuery = craft.globalSets()\n  .handle('footerCopy')\n  .siteId(1) %}\n\n{# Fetch the global set #}\n{% set globalSet = myGlobalSetQuery.one() %}\n\n{# Display the content #}\n<p>{{ globalSet.copyrightInfo }}</p>\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Entry with one() in Twig\nDESCRIPTION: This snippet demonstrates how to use the one() method to fetch a single entry matching specific criteria in Twig. It queries for an entry in the 'news' section with a specific slug.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries()\n  .section('news')\n  .slug('hello-world')\n  .one() %}\n```\n\n----------------------------------------\n\nTITLE: Returning Responses in Controller Actions (PHP)\nDESCRIPTION: Demonstrates the correct way to return responses from controller actions in Craft CMS. Actions should return either a string or a Response object to complete the request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$this->asJson($obj);\n$this->renderTemplate($template, $variables);\n\n// Better:\nreturn $this->asJson($obj);\nreturn $this->renderTemplate($template, $variables);\n```\n\n----------------------------------------\n\nTITLE: Deferring Plugin Initialization in Craft CMS\nDESCRIPTION: This PHP code demonstrates how to defer certain plugin initialization tasks until Craft is fully initialized, using the onInit event of the Craft application.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse Craft;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init(): void\n    {\n        // ...\n\n        // Defer some setup tasks until Craft is fully initialized:\n        Craft::$app->onInit(function() {\n            // ...\n        });\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Global Set Content in Twig\nDESCRIPTION: Provides a complete example of creating a global set query, setting parameters, fetching the global set, and outputting its content in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/globals.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a global set query with the 'handle' and 'siteId' parameters #}\n{% set myGlobalSetQuery = craft.globalSets()\n  .handle('footerCopy')\n  .siteId(1) %}\n\n{# Fetch the global set #}\n{% set globalSet = myGlobalSetQuery.one() %}\n\n{# Display the content #}\n<p>{{ globalSet.copyrightInfo }}</p>\n```\n\n----------------------------------------\n\nTITLE: Querying with Custom Fields in Twig\nDESCRIPTION: Shows how to use custom field parameters in element queries to filter results based on custom field values, with examples for both single and multiple constraints.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set silverCars = craft.entries()\n  .section('cars')\n  .paintColor('silver')\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set silverCars = craft.entries()\n  .section('cars')\n  .paintColor(['silver', 'gold'])\n  .modelYear('>= 1990', '<= 2000')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Assets Field Data in Twig\nDESCRIPTION: Illustrates how to access and work with Assets field data in Twig templates. This includes querying related assets, looping through them, and displaying asset information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n\n{% set relatedAssets = entry.myFieldHandle.all() %}\n{% if relatedAssets|length %}\n  <ul>\n    {% for rel in relatedAssets %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.filename }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Custom Database Configuration in PHP\nDESCRIPTION: PHP configuration file for custom database settings in Craft CMS, demonstrating how to use custom environment variables and set PDO attributes for the connection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/db.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'driver' => App::env('MY_DB_DRIVER'),\n    'server' => App::env('MY_DB_SERVER'),\n    'port' => App::env('MY_DB_PORT'),\n    'database' => App::env('MY_DB_DATABASE'),\n    'user' => App::env('MY_DB_USER'),\n    'password' => App::env('MY_DB_PASSWORD'),\n    'schema' => App::env('MY_DB_SCHEMA'),\n    'tablePrefix' => App::env('MY_DB_TABLE_PREFIX'),\n    'attributes' => [\n        PDO::MYSQL_ATTR_SSL_CA => '/path/to/my.crt.pem'\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Ordering by Nested Field Values in Twig\nDESCRIPTION: Example showing how to sort by sub-properties of complex fields. This query sorts representative entries by the type of their primary contact field and then by hire date in descending order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set reps = craft.entries()\n  .section('reps')\n  .orderBy('primaryContact.type ASC, dateHired DESC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Performing Basic Search in Craft CMS (Twig, GraphQL, PHP)\nDESCRIPTION: Demonstrates how to perform a basic search query for entries using the keyword 'foo' in Twig, GraphQL, and PHP. The search method is used to filter elements based on the given search query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Complex GraphQL Query for Blog Entry Content\nDESCRIPTION: Comprehensive GraphQL query demonstrating how to fetch a blog entry with all its related content including images, categories, and formatted dates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_3\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entry(slug: \"my-trip-to-bend\") {\n    title\n    postDate @formatDateTime(format: \"d M Y\")\n    postDateAlt: postDate @formatDateTime(format: \"Y-m-d\")\n    url\n    ... on post_Entry {\n      featureImage {\n        title\n        url\n        sized: url @transform(width: 900, height: 600, quality: 90)\n      }\n      postContent {\n        ... on text_Entry {\n          typeHandle\n          text\n        }\n        ... on image_Entry {\n          typeHandle\n          image {\n            title\n            url\n          }\n        }\n      }\n      postCategories {\n        title\n        url\n      }\n    }\n  }\n  globalSet(handle: [\"siteInfo\"]) {\n    ... on siteInfo_GlobalSet {\n      description @markdown\n    }\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"entry\": {\n      \"title\": \"My Trip to Bend\",\n      \"postDate\": \"15 Oct 2024\",\n      \"postDateAlt\": \"2024-10-15\",\n      \"url\": \"https://tutorial.ddev.site/blog/my-trip-to-bend\",\n      \"featureImage\": [\n        {\n          \"title\": \"Highway 26\",\n          \"url\": \"https://tutorial.ddev.site/uploads/images/highway-26.JPG\",\n          \"sized\": \"https://tutorial.ddev.site/uploads/_900x600_crop_center-center_90_none/5/highway-26.jpg\"\n        }\n      ],\n      \"postContent\": [\n        {\n          \"typeHandle\": \"text\",\n          \"text\": \"Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Curabitur blandit tempus porttitor. Maecenas sed diam eget risus varius blandit sit amet non magna. Maecenas sed diam eget risus varius blandit sit amet non magna. Nullam quis risus eget urna mollis ornare vel eu leo.\"\n        },\n        {\n          \"typeHandle\": \"image\",\n          \"image\": [\n            {\n              \"title\": \"Warm Springs\",\n              \"url\": \"https://tutorial.ddev.site/uploads/images/warm-springs.JPG\"\n            }\n          ]\n        },\n        {\n          \"typeHandle\": \"text\",\n          \"text\": \"Vestibulum id ligula porta felis euismod semper. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Nullam quis risus eget urna mollis ornare vel eu leo.\\n\\nCras mattis consectetur purus sit amet fermentum. Vestibulum id ligula porta felis euismod semper. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.\"\n        }\n      ],\n      \"postCategories\": [\n        {\n          \"title\": \"Trips\",\n          \"url\": \"https://tutorial.ddev.site/blog/topic/trips\"\n        },\n        {\n          \"title\": \"Oregon\",\n          \"url\": \"https://tutorial.ddev.site/blog/topic/oregon\"\n        }\n      ]\n    },\n    \"globalSet\": {\n      \"description\": \"<p>Photos and stories from around the Pacific Northwest.</p>\\n\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Templates in Craft Controller\nDESCRIPTION: Demonstrates how to render and return Twig templates from a controller action with variables and template mode specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\nuse craft\\web\\View;\n\npublic function actionFoo(): Response\n{\n    $variables = [\n        'bar' => 'baz',\n    ];\n\n    // Render and return the plugin's `foo.twig` template\n    return $this->renderTemplate(\n        'plugin-handle/foo',\n        $variables,\n        View::TEMPLATE_MODE_CP,\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Database with Site Relationships from Project Config in Craft CMS Plugin\nDESCRIPTION: Demonstrates how to update the database with site relationships using UIDs from project config. This ensures consistency when applying project config changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// (Some context omitted!)\n\n$siteId = Db::idByUid('{{%sites}}', $event->newValue['site']);\n\nDb::update('{{%plugin_producttypes}}', [\n    'name' => $event->newValue['name'],\n    'siteId' => $siteId,\n    // ...\n], ['id' => $id]);\n```\n\n----------------------------------------\n\nTITLE: Debugging with Dump-and-Die in Twig\nDESCRIPTION: The dd tag is used for debugging purposes. It dumps a variable to the browser and ends the request, similar to PHP's var_dump() and die() functions combined.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n{% dd entry %}\n```\n\n----------------------------------------\n\nTITLE: Generating Action URLs in Twig\nDESCRIPTION: Shows the usage of the actionUrl() function to generate controller action URLs. Includes information on the function's arguments for specifying the path, query parameters, and URL scheme.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Configuring Plugin composer.json\nDESCRIPTION: Template for the composer.json configuration file that defines plugin metadata, dependencies, autoloading, and Craft-specific settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"package/name\",\n  \"description\": \"Your plugin's package description\",\n  \"type\": \"craft-plugin\",\n  \"keywords\": [\"some\", \"keywords\", \"here\"],\n  \"license\": \"MIT\",\n  \"authors\": [\n    {\n      \"name\": \"Developer Name\",\n      \"homepage\": \"https://developer-website.tld\"\n    }\n  ],\n  \"support\": {\n    \"email\": \"email@developer-website.tld\",\n    \"issues\": \"https://github.com/developer/repo/issues?state=open\",\n    \"source\": \"https://github.com/developer/repo\",\n    \"docs\": \"https://github.com/developer/repo/blob/master/README.md\"\n  },\n  \"require\": {\n    \"craftcms/cms\": \"^5.3.0\"\n  },\n  \"autoload\": {\n    \"psr-4\": {\n      \"namespace\\\\prefix\\\\\": \"src/\"\n    }\n  },\n  \"extra\": {\n    \"name\": \"Plugin Name\",\n    \"handle\": \"my-plugin-handle\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Search Results Page with Auto-Escaping Security in Twig\nDESCRIPTION: A complex example showing how to implement a search results page with Twig. This demonstrates querying entries, looping through results, and securely displaying user input with auto-escaping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.app.request.getQueryParam('q') %}\n\n{% set entries = craft.entries()\n  .section('blog')\n  .search(query)\n  .all() %}\n\n{% if entries %}\n  <h3>Search Results</h3>\n  <ul>\n    {% for entry in entries %}\n      <li>{{ entry.getLink() }}</li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>Sorry, no results for <strong>{{ query }}</strong> were found.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Controller Action with Route Parameters in PHP\nDESCRIPTION: Shows how to create a controller action that accepts a parameter from the URL route or query string, with optional type hinting and default value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\controllers;\n\nuse craft\\web\\Controller;\n\nclass WidgetsController extends Controller\n{\n    public function actionEdit(?int $id = null)\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Twig Negative Tests for Error Handling\nDESCRIPTION: Shows how to use the negative form of a test with 'is not' syntax to handle cases where a condition is not met.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry is not defined %}\n  {% exit 404 %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Custom Field Input Form in Twig\nDESCRIPTION: Example form for submitting custom field data using the default fields location parameter. Demonstrates basic form structure with CSRF protection and custom field input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {{ input('text', 'fields[myCustomFieldHandle]') }}\n\n  <button>Save Entry</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Plugin Install Migration Template in Craft CMS\nDESCRIPTION: Template for a plugin Install migration class in Craft CMS that handles both installation (safeUp) and uninstallation (safeDown) processes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\migrations;\n\nuse craft\\db\\Migration;\n\nclass Install extends Migration\n{\n    public function safeUp()\n    {\n        // ...\n    }\n\n    public function safeDown()\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Relational Fields in Twig\nDESCRIPTION: This example shows how to eager-load a relational field using its handle. In this case, 'manufacturer' is an entries field attached to each car entry that's being eager-loaded.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set carsWithManufacturers = craft.entries()\n  .section('cars')\n  .with([\n    ['manufacturer'],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Preview Placeholder HTML\nDESCRIPTION: Shows how to implement previewPlaceholderHtml() to provide sample content for field layout designer interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\npublic function previewPlaceholderHtml(mixed $value, ?ElementInterface $element): string\n{\n    return Html::tag('code', 'XX-123456789');\n}\n```\n\n----------------------------------------\n\nTITLE: Supporting Inline Editing for Custom Field Types\nDESCRIPTION: Example of implementing inline editing support for custom fields by checking the $inline parameter in the inputHtml() method and providing a simplified UI when needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Html;\n\n// ...\n\npublic function inputHtml(mixed $value, ?ElementInterface $element, bool $inline): string\n{\n    if ($inline) {\n        // Return a simplified UI element, or a static representation\n    }\n\n    // Return the normal UI\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Edit Form Template in Twig for Craft CMS\nDESCRIPTION: This Twig template creates a form page for editing an event in the Craft CMS control panel. It includes form fields for event name, start date, and end date, with proper validation and error handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-edit-pages.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/cp.twig' %}\n{% import '_includes/forms.twig' as forms %}\n\n{% set title = 'Edit Event'|t('my-plugin') %}\n{% set fullPageForm = true %}\n\n{% block content %}\n  {{ actionInput('my-plugin/events/save') }}\n  \n  {{ redirectInput('my-plugin/events') }}\n\n  {{ forms.textField({\n    label: 'Event Name'|t('plugin-handle'),\n    instructions: 'The name of the event'|t('plugin-handle'),\n    id: 'name',\n    name: 'name',\n    value: event.name,\n    required: true,\n    errors: event.getErrors('name'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'Start Date'|t('plugin-handle'),\n    instructions: 'The start date of the event.'|t('plugin-handle'),\n    id: 'start-date',\n    name: 'startDate',\n    value: event.startDate,\n    required: true,\n    errors: event.getErrors('startDate'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'End Date'|t('plugin-handle'),\n    instructions: 'The end date of the event.'|t('plugin-handle'),\n    id: 'end-date',\n    name: 'endDate',\n    value: event.endDate,\n    required: true,\n    errors: event.getErrors('endDate'),\n  }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Single Gateway Payment Form\nDESCRIPTION: Complete payment form implementation for a single gateway scenario, using Stripe as an example. Includes necessary CSRF protection and gateway ID handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set gateway = craft.commerce.gateways.getGatewayByHandle('stripe') %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ hiddenInput('gatewayId', gateway.id) }}\n\n  {{ gateway.getPaymentFormHtml({}) }}\n\n  <button>Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Find Method\nDESCRIPTION: Implements the find() method in the Product element class to return the custom query class instance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse mynamespace\\elements\\db\\ProductQuery;\n\n// ...\n\nclass Product extends Element\n{\n    public static function find(): ProductQuery\n    {\n        return new ProductQuery(static::class);\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Sending JSON Payload in Ajax Request to Craft CMS\nDESCRIPTION: This JavaScript snippet demonstrates how to send a JSON payload in the body of an Ajax request to Craft CMS, including the necessary headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst params = {\n  userId: $button.dataset.userId,\n  fullName: prompt('New name:'),\n};\n\nfetch('/actions/users/save-user', {\n  method: 'POST',\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-CSRF-Token': $button.dataset.csrfTokenValue,\n    'X-Requested-With': 'XMLHttpRequest',\n  },\n  body: JSON.stringify(params),\n})\n.then(response => response.json())\n.then(result => console.log(result));\n```\n\n----------------------------------------\n\nTITLE: Performing LEFT JOIN in Craft CMS Element Query with PHP\nDESCRIPTION: Example of using leftJoin() in a Craft element query to join the users table with entries, grouping results by author ID, and returning the data as an array. This query counts entries per author and retrieves their names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\n$popularAuthors = craft\\elements\\Entry::find()\n  ->select([\n    'users.fullName as name',\n    'COUNT(*) as postCount',\n  ])\n  ->groupBy('entries.authorId')\n  ->leftJoin('{{%users}}', '[[entries.authorId]] = [[users.id]]')\n  ->asArray()\n  ->all();\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Requirement with Twig in Craft CMS\nDESCRIPTION: Uses the requireLogin tag to enforce user authentication. If a user is not logged in, they will be redirected to the login page specified in the loginPath config setting, and then returned to the original page after successful authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/requirelogin.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n```\n\n----------------------------------------\n\nTITLE: Including a Partial Template with Variables in Twig\nDESCRIPTION: Demonstrates how to include a partial template and pass variables to it using the 'with' keyword.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{% include '_tip.twig' with {\n  tipText: 'I'm a helpful tip!'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Contents with Craft Commerce in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve and display the current user's cart contents using Craft Commerce. It checks if the cart has any items, and if so, displays them in a table with product description, SKU, quantity, and sale price. The cart total is shown at the bottom of the table.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/display-cart-items.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<h1>Here's what's in your cart</h1>\n\n{% if cart.lineItems|length == 0 %}\n  <p>There aren't any items in your cart.</p>\n{% else %}\n  <table>\n    <thead>\n      <tr>\n        <th>Product</th>\n        <th>Qty</th>\n        <th>Price</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in cart.lineItems %}\n        <tr>\n          <td>{{ item.description }} <small>({{ item.sku }})</small></td>\n          <td>{{ item.qty }}</td>\n          <td>{{ item.salePriceAsCurrency }}</td>\n        </tr>\n      {% endfor %}\n      <tr>\n        <td colspan=\"3\">\n          Cart Total: {{ cart.totalPriceAsCurrency }}\n        </td>\n      </tr>\n    </tbody>\n  </table>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing GraphQL Mutation Class in PHP\nDESCRIPTION: Creates a Widget mutation class that defines available GraphQL mutations based on permissions. Includes functionality for creating, saving, and deleting widgets with appropriate schema validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\mutations;\n\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\Widget;\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutationResolver;\nuse craft\\gql\\base\\Mutation;\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends Mutation\n{\n    public static function getMutations(): array\n    {\n        // Make sure we should be able to mutate widgets\n        if (!GqlHelper::canMutateWidgets()) {\n            return [];\n        }\n\n        $mutations = [];\n\n        // Create an instance of our mutation resolver\n        $resolver = Craft::createObject(WidgetMutationResolver::class);\n\n        if (GqlHelper::canSchema('widget', 'edit')) {\n            // Create a new widget\n            $mutations['createWidget'] = [\n                'name' => 'createWidget',\n                'args' => [\n                    'title' => Type::nonNull(Type::string())\n                ],\n                'resolve' => [$resolver, 'saveWidget'],\n                'description' => 'Saves a new widget.',\n                'type' => Widget::getType(),\n            ];\n        }\n\n        if (GqlHelper::canSchema('widget', 'save')) {\n            // Save an existing widget\n            // ...\n        }\n\n        if (GqlHelper::canSchema('widget', 'delete')) {\n            // Delete a widget\n            // ...\n        }\n\n        return $mutations;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Making HTTP Requests with Guzzle in Craft CMS\nDESCRIPTION: Shows how to create a Guzzle HTTP client using Craft's createGuzzleClient method. This ensures that project-specific settings and global HTTP proxy configurations are applied to all outgoing requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/topics.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\n\n$client = Craft::createGuzzleClient([\n    'base_uri' => 'https://api.acme.com/v1',\n]);\n\n$response = $client->post('/widgets', [\n    'json' => [\n        'style' => 'fancy',\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Checking Element Permissions in Twig\nDESCRIPTION: Shows examples of using various permission-checking functions like canCreateDrafts(), canDelete(), canDeleteForSite(), canDuplicate(), canSave(), and canView() to conditionally display edit links based on user permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if canCreateDrafts(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canDelete(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canDeleteForSite(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canDuplicate(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canSave(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if canView(entry) %}\n  <a href=\"{{ entry.getCpEditUrl() }}\">Edit</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Attaching an Event Handler to the Application Instance in PHP\nDESCRIPTION: Example of attaching an event handler directly to the Craft application singleton instance. This demonstrates how to listen for the Application::EVENT_AFTER_REQUEST event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse yii\\base\\Application;\n\nCraft::$app->on(\n    Application::EVENT_AFTER_REQUEST,\n    function(Event $e) {\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Craft CMS Database\nDESCRIPTION: Environment variables required for setting up a database connection in Craft CMS 4. Includes both required system variables and database-specific configuration options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/db.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Required variables:\nCRAFT_APP_ID=\nCRAFT_ENVIRONMENT=dev\nCRAFT_SECURITY_KEY=\n\n# Database-specific variables:\nCRAFT_DB_DRIVER=mysql\nCRAFT_DB_SERVER=127.0.0.1\nCRAFT_DB_PORT=3306\nCRAFT_DB_DATABASE=\nCRAFT_DB_USER=root\nCRAFT_DB_PASSWORD=\nCRAFT_DB_SCHEMA=public\nCRAFT_DB_TABLE_PREFIX=\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules for Controllers in PHP\nDESCRIPTION: Shows how to register control panel URL routes that map user-friendly URLs to controller actions, including a route with a named parameter that will be passed to the action method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\web\\UrlManager;\nuse craft\\events\\RegisterUrlRulesEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['widgets/new'] = 'my-plugin/widgets/edit';\n        $event->rules['widgets/edit/<id:\\d+>'] = 'my-plugin/widgets/edit';\n\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating an Entry Form with Dynamic Redirect in Twig\nDESCRIPTION: This code shows how to implement an entry creation form with a dynamic redirect that uses object templates. The redirect will use the entry's UID to send users to the newly created entry's public page after submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {# Redirect the user to the public page: #}\n  {{ redirectInput('community-posts/{uid}') }}\n\n  {# ...entry options... #}\n\n  {{ input('text', 'title') }}\n\n  <button>Post + View</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Plugin Class with Service Property Documentation\nDESCRIPTION: Example of a plugin class with proper service property documentation and getter methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse craft\\base\\Plugin;\nuse mynamespace\\services\\Foo;\n\n/**\n * My Plugin Class\n * \n * @property Foo $foo\n */\nclass MyPlugin extends BasePlugin\n{\n    public function init()\n    {\n        // ...\n\n        $this->setComponents([\n            'foo' => Foo::class,\n        ]);\n    }\n\n    public function getFoo(): Foo\n    {\n        return $this->get('foo');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Element Query Parameters in Twig\nDESCRIPTION: Demonstrates different ways to set parameters on an element query in Twig, including chaining methods, using the object syntax, and setting parameters conditionally.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set images = craft.assets()\n  .kind('image')\n  .all() %}\n\n{# ...or... #}\n\n{% set images = craft.assets({\n    kind: 'image',\n  })\n  .all() %}\n\n{# ...or if you're fancy, set some parameters conditionally: #}\n\n{% set assetsQuery = craft.assets() %}\n\n{% if craft.app.request.getParam('onlyImages') %}\n  {# Effectively the same as chaining query methods: #}\n  {% do assetsQuery.kind('image') %}\n{% endif %}\n\n{% set images = assetsQuery.all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Event Listener for GraphQL Query Modification Before Execution\nDESCRIPTION: This PHP code shows how to modify a GraphQL query before it's executed using Craft's EVENT_BEFORE_EXECUTE_GQL_QUERY event. This allows for implementing caching or other pre-execution modifications to queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_BEFORE_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Set the result from cache\n        $event->result = ...;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Replacing String Parts with replace Filter in Twig\nDESCRIPTION: Demonstrates various uses of the replace filter for string replacements, including using mapping arrays, regular expressions, and literal string replacements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n{% set str = 'Hello, FIRST LAST' %}\n\n{{ str|replace({\n  FIRST: currentUser.firstName,\n  LAST:  currentUser.lastName\n}) }}\n\n{% set str = 'Hello, NAME' %}\n\n{{ str|replace('NAME', currentUser.name) }}\n\n{{ tag.title|lower|replace('/[^\\\\w]+/', '-') }}\n\n{{ tag.title|lower|replace({\n  '/^the\\\\s/': '',\n  '/[^\\\\w]+/': '-',\n}) }}\n\n{{ tag.title|lower|replace({\n  '/you/i': 'y\\'all',\n  '/-_-/': '(^_^)',\n}, regex=false) }}\n```\n\n----------------------------------------\n\nTITLE: Displaying Search Results in Craft CMS with Twig\nDESCRIPTION: This snippet demonstrates how to retrieve search results in Craft CMS. It gets the search query from the request parameters, queries entries using the search parameter, and displays the results in a list or shows a message when no results are found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/search-form.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Search Results</h1>\n\n{% set query = craft.request.getParam('q') %}\n{% set entries = craft.entries.search(query).order('score') %}\n\n{% if entries|length %}\n  <p>{{ entries|length }} results:</p>\n\n  <ul>\n    {% for entry in entries %}\n      <li><a href=\"{{ entry.url }}\">{{ entry.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>Your search for \"{{ query }}\" didn't return any results.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring CSRF Validation in Craft Controller\nDESCRIPTION: Example of disabling CSRF validation for specific controller actions like webhooks, with a safety warning about requiring alternative authentication methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function beforeAction($action): bool\n{\n    // Don't require a CSRF token for incoming webhooks:\n    if ($action->id === 'receive-webhook') {\n        $this->enableCsrfValidation = false;\n    }\n\n    return parent::beforeAction($action);\n}\n```\n\n----------------------------------------\n\nTITLE: Building an Image Thumbnail Gallery with Asset Queries in Twig\nDESCRIPTION: Example of creating a thumbnail gallery by querying image assets from a specific volume, filtering by kind, and displaying the results in a list with thumbnails.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an asset query with the 'volume' and 'kind' parameters #}\n{% set myAssetQuery = craft.assets()\n  .volume('photos')\n  .kind('image') %}\n\n{# Fetch the assets #}\n{% set images = myAssetQuery.all() %}\n\n{# Display the thumbnail list #}\n<ul>\n  {% for image in images %}\n    <li><img src=\"{{ image.getUrl('thumb') }}\" alt=\"{{ image.alt }}\"></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Validation Rules in PHP for Craft CMS\nDESCRIPTION: This snippet demonstrates how to register custom GraphQL validation rules in Craft CMS. It uses an event listener to add a new validation rule that permanently disables introspection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineGqlValidationRulesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Validator\\Rules\\DisableIntrospection;\n\nEvent::on(\n    Gql::class,\n    Gql::::EVENT_DEFINE_GQL_VALIDATION_RULES,\n    function (DefineGqlValidationRulesEvent $event) {\n        // Permanently disable introspection\n        $event->validationRules[DisableIntrospection::class] = new DisableIntrospection();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Sending a Password Reset Request Form in Twig\nDESCRIPTION: This snippet demonstrates how to create a form in Twig that sends a password reset request. It includes CSRF protection and the action input for routing the request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/send-password-reset-email') }}\n\n  <label for=\"loginName\">Username or email</label>\n  {{ input('text', 'loginName', null, {\n    id: 'loginName',\n  }) }}\n\n  <button>Reset Password</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating and Managing Custom Bulk Operations in PHP\nDESCRIPTION: Example demonstrating how to explicitly start and end a bulk operation on elements. This pattern allows plugins to group multiple element saves into a single bulk operation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$key = Craft::$app->getElements()->beginBulkOp();\n\n// ... save or delete elements ...\n\nCraft::$app->getElements()->endBulkOp($key);\n```\n\n----------------------------------------\n\nTITLE: Example GraphQL Mutation Query for Creating a Widget\nDESCRIPTION: A GraphQL mutation query example that demonstrates how to create a widget using a custom createWidget mutation. The query includes variables and shows how to return specific fields from the newly created element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_19\n\nLANGUAGE: graphql\nCODE:\n```\nmutation NewWidget($title: String) {\n  createWidget(title: $title) {\n    id\n    title\n  }\n}\n\n# query variables:\n# {\n#  \"title\": \"My Glorious Mutated Widget\",\n# }\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Settings Using Magic Property in PHP\nDESCRIPTION: Shows an alternative way to access plugin settings using the $settings magic property, both from within the main plugin class and from elsewhere in the codebase.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// From your main plugin class:\n$foo = $this->settings->foo;\n\n// From elsewhere:\n$foo = \\mynamespace\\Plugin::getInstance()->settings->foo;\n```\n\n----------------------------------------\n\nTITLE: Creating Product Queries in Multiple Languages\nDESCRIPTION: Shows how to create a new product query in Twig, PHP, and GraphQL for fetching product data from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new product query #}\n{% set myProductQuery = craft.products() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product query\n$myProductQuery = \\craft\\commerce\\elements\\Product::find();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Create a new product query\n{\n  products {\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Sort Options with Advanced Configuration in Craft CMS\nDESCRIPTION: This code snippet shows how to define a sort option with custom configuration including a label, orderBy clause, attribute name, and default direction.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_31\n\nLANGUAGE: php\nCODE:\n```\n[\n    'label' => Craft::t('app', 'Date Updated'),\n    'orderBy' => 'elements.dateUpdated',\n    'attribute' => 'dateUpdated',\n    'defaultDir' => 'desc',\n],\n```\n\n----------------------------------------\n\nTITLE: Formatting Time with time Filter in Twig\nDESCRIPTION: Shows various ways to use the time filter for formatting times, including locale-specific formats and timezone options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time }}\n{# Output: 3:14:07 AM #}\n\n{{ entry.postDate|time('short') }}\n{# Output: 3:14 AM #}\n\n{{ entry.postDate|time('short', locale='en-GB') }}\n{# Output: 17:00 #}\n\n{{ entry.postDate|time('short', timezone='UTC') }}\n{# Output: 12:00 AM #}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Element Query Class in PHP\nDESCRIPTION: Example of extending ElementQuery to create a product-specific query class with custom parameters like price and currency. Demonstrates joining tables, selecting columns, and applying conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements\\db;\n\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\helpers\\Db;\n\nclass ProductQuery extends ElementQuery\n{\n    public $price;\n    public $currency;\n\n    public function price($value): self\n    {\n        $this->price = $value;\n\n        return $this;\n    }\n\n    public function currency($value): self\n    {\n        $this->currency = $value;\n\n        return $this;\n    }\n\n    protected function beforePrepare(): bool\n    {\n        // JOIN our `products` table:\n        $this->joinElementTable('products');\n\n        // SELECT the `price` and `currency` columns:\n        $this->query->select([\n            'products.price',\n            'products.currency',\n        ]);\n\n        if ($this->price) {\n            $this->subQuery->andWhere(Db::parseParam('products.price', $this->price));\n        }\n\n        if ($this->currency) {\n            $this->subQuery->andWhere(Db::parseParam('products.currency', $this->currency));\n        }\n\n        return parent::beforePrepare();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Search Query in Craft CMS (Twig and PHP)\nDESCRIPTION: Shows how to perform a search using a dynamic query string parameter in both Twig and PHP. This is useful for implementing user-defined search functionality in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the user's search query from the 'q' query string param #}\n{% set searchQuery = craft.app.request.getQueryParam('q') %}\n\n{# Fetch entries that match the search query #}\n{% set results = craft.entries()\n  .search(searchQuery)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get the user's search query from the 'q' query string param\n$searchQuery = Craft::$app->getRequest()->getParam('q');\n\n// Fetch entries that match the search query\n$results = \\craft\\elements\\Entry::find()\n    ->search($searchQuery)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Accessing Named Parameters in Twig Templates for Craft CMS\nDESCRIPTION: Demonstrates how to access named parameters passed from URL rules in Twig templates within Craft CMS. Includes examples of using year and wildcard parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/routing.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Blog Entries from {{ year }}</h1>\n```\n\nLANGUAGE: twig\nCODE:\n```\nIt seems you're looking for `{{ any }}`.\n{# output: It seems you're looking for `some-slug`. #}\n```\n\n----------------------------------------\n\nTITLE: Custom Tax Engine Interface Implementation\nDESCRIPTION: A TaxJar plugin example showing how to implement TaxEngineInterface for integration with external tax systems. The implementation controls tax UI visibility, sync functionality, and custom tax adjustments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/tax-engines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function viewTaxCategories(): bool\n{\n    return true;\n}\n\npublic function createTaxCategories(): bool\n{\n    return false;\n}\n\npublic function editTaxCategories(): bool\n{\n    return true;\n}\n\npublic function taxCategoryActionHtml(): string\n{\n    return '<button>Sync TaxJar Categories</button>';\n}\n\npublic function cpTaxNavSubItems(): array\n{\n    return [];\n}\n```\n\n----------------------------------------\n\nTITLE: Using configure to Modify Model Attributes in Twig\nDESCRIPTION: The configure function can modify a model or element's attributes directly in the template, though this approach is generally not recommended.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% do configure(entry, { title: 'New Title' }) %}\n{% do craft.app.elements.saveElement(entry) %}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Matrix Blocks in Twig and PHP\nDESCRIPTION: Examples of fetching all Matrix blocks from a field and looping through them to render content. The code checks if blocks exist and then iterates through each one.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.myFieldHandle.all() %}\n{% if blocks|length %}\n  <ul>\n    {% for block in blocks %}\n      {# ... #}\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$blocks = $entry->myFieldHandle->all();\nif (count($blocks)) {\n    foreach ($blocks as $block) {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: PHP App Component Getter Implementation\nDESCRIPTION: Demonstrates proper implementation of app component getters with return type declarations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Entries;\n\n// ...\n\npublic function getEntries(): Entries\n{\n    return $this->get('entries');\n}\n```\n\n----------------------------------------\n\nTITLE: Debugging Variables with dd Tag in Twig\nDESCRIPTION: The dd tag outputs a variable to the browser and ends the request, useful for debugging. It's shorthand for 'Dump-and-Die'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n{% dd entry %}\n```\n\n----------------------------------------\n\nTITLE: Sending File Response in Craft CMS Controller Action\nDESCRIPTION: This code shows how to send a file as a response in a Craft CMS controller action. It demonstrates two methods: sending an existing file and sending content as a file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nreturn $this->response->sendFile(Craft::getAlias('@storage/path/to/temp-file.pdf'), 'Your Invoice.pdf', );\n\n// ...or...\n\nreturn $this->response->sendContentAsFile($csv, 'report.csv');\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Model in PHP for Craft CMS Plugins\nDESCRIPTION: Defines a settings model class that extends craft\\base\\Model to store and validate plugin setting values. The model includes default values and validation rules for the settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace\\models;\n\nuse craft\\base\\Model;\n\nclass Settings extends Model\n{\n    public $foo = 'defaultFooValue';\n    public $bar = 'defaultBarValue';\n\n    public function rules()\n    {\n        return [\n            [['foo', 'bar'], 'required'],\n            // ...\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Hierarchical Navigation with Nav Tag\nDESCRIPTION: Shows how to create a hierarchical navigation menu using the nav tag for Structure section entries or Category Groups. Includes proper ordering and child element handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('pages')\n  .orderBy('lft ASC')\n  .all() %}\n\n<ul id=\"nav\">\n  {% nav entry in entries %}\n    <li>\n      <a href=\"{{ entry.url }}\">{{ entry.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating and Executing Entry Queries in Craft CMS\nDESCRIPTION: Examples of creating entry queries in both Twig and PHP, and executing them to fetch entries. Demonstrates setting query parameters and looping through results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new entry query #}\n{% set myEntryQuery = craft.entries() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new entry query\n$myEntryQuery = \\craft\\elements\\Entry::find();\n```\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an entry query with the 'section' and 'limit' parameters #}\n{% set myEntryQuery = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{# Fetch the entries #}\n{% set entries = myEntryQuery.all() %}\n\n{# Display the entries #}\n{% for entry in entries %}\n  <article>\n    <h1><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h1>\n    {{ entry.summary }}\n    <a href=\"{{ entry.url }}\">Continue reading</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing afterSave Method for Custom Elements in Craft CMS\nDESCRIPTION: Adds an afterSave method to handle updating the custom element table when elements are saved. Uses Db::upsert to efficiently insert or update records based on the element ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Db;\n\n// ...\n\npublic function afterSave(bool $isNew)\n{\n    if (!$this->propagating) {\n        Db::upsert('{{%products}}', [\n            'id' => $this->id,\n        ], [\n            'price' => $this->price,\n            'currency' => $this->currency,\n        ]);\n    }\n\n    parent::afterSave($isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Pagination with the paginate Tag\nDESCRIPTION: Demonstrates how to implement pagination using the paginate Twig tag. The example sets up a query for news entries ordered by post date, and then paginates the results with access to both the page information and the entries for the current page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{# Prepare your query, but don't execute it: #}\n{% set newsQuery = craft.entries()\n  .section('news')\n  .orderBy('postDate DESC') %}\n\n{# Paginate the query into a `posts` variable: #}\n{% paginate newsQuery as pageInfo, posts %}\n\n{# Use the `posts` variable just like you would any other result set: #}\n{% for post in posts %}\n  <article>\n    <h2>{{ post.title }}</h2>\n    {# ... #}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Expiration for Custom Elements in PHP\nDESCRIPTION: Demonstrates how to implement the ExpirableElementInterface for custom elements with a lifespan, defining a getExpiryDate() method to calculate maximum cache duration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_51\n\nLANGUAGE: php\nCODE:\n```\npublic function getExpiryDate(): ?DateTime\n{\n    return $this->getNextSaleEndDate();\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Event Listener for GraphQL Query Modification After Execution\nDESCRIPTION: This PHP code demonstrates how to use Craft's EVENT_AFTER_EXECUTE_GQL_QUERY event to modify GraphQL query results after execution. This is useful for caching results or performing post-processing on the data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_AFTER_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Cache results from $event->result or just tweak them\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Making Ajax Requests to Craft CMS with JavaScript Fetch API\nDESCRIPTION: This snippet demonstrates how to make an Ajax request to Craft CMS using the Fetch API, including fetching a CSRF token and sending form data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst getSessionInfo = function() {\n  return fetch('/actions/users/session-info', {\n    headers: {\n      'Accept': 'application/json',\n    },\n  })\n  .then(response => response.json());\n};\n\ngetSessionInfo()\n  .then(session => {\n    const params = new FormData();\n\n    params.append('userId', session.id);\n    params.append('fullName', 'Tony Tiger');\n\n    return fetch('/actions/users/save-user', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'X-CSRF-Token': session.csrfTokenValue,\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: params,\n    })\n    .then(response => response.json())\n    .then(result => console.log(result));\n  });\n```\n\n----------------------------------------\n\nTITLE: Caching Element Queries in Twig\nDESCRIPTION: This snippet shows how to cache element query results using the cache() method in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .limit(10)\n  .cache()\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Supported Sites for Elements in PHP\nDESCRIPTION: Shows how to specify which sites an element should be stored in using getSupportedSites() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\npublic function getSupportedSites(): array\n{\n    return [\n        1,\n        2,\n        ['siteId' => 3, 'enabledByDefault' => false],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Widget Query Implementation\nDESCRIPTION: Example implementation of a custom Query class for a Widget element type, defining the query schema and resolver.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\queries;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\gql\\arguments\\elements\\Widget as WidgetArguments;\nuse mynamespace\\gql\\resolvers\\elements\\Widget as WidgetResolver;\n\nclass Widget extends \\craft\\gql\\base\\Query\n{\n    public static function getQueries($checkToken = true): array\n    {\n        // Make sure the current token's schema allows querying widgets\n        if ($checkToken && !GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        // Provide one or more query definitions\n        return [\n            'widgets' => [\n                'type' => Type::listOf(WidgetInterface::getType()),\n                'args' => WidgetArguments::getArguments(),\n                'resolve' => WidgetResolver::class . '::resolve',\n                'description' => 'This query is used to query for custom widgets.'\n            ],\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Plain Text Field Content with Markdown in Twig and PHP\nDESCRIPTION: Example showing how to access and render Plain Text field content with markdown formatting in both Twig templates and PHP code. The code checks if the field has content before rendering it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plain-text-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <h3>Article</h3>\n  {{ entry.myFieldHandle|markdown }}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    // \\yii\\helpers\\Markdown::process($entry->myFieldHandle);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating New Craft Project with Composer\nDESCRIPTION: Command to create a new Craft CMS project using Composer. This installs Craft 3 into a specified directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer create-project \"craftcms/craft:^3\" path/to/my/project\n```\n\n----------------------------------------\n\nTITLE: Querying Related Recipes Through Matrix Field in Craft CMS Twig\nDESCRIPTION: This snippet demonstrates how to find recipes related to an ingredient through a Matrix field. It uses the field parameter to specify the Matrix field handle, ensuring relationships are defined through the intended field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedRecipes = craft.entries()\n    .section('recipes')\n    .relatedTo({\n        targetElement: ingredient,\n        field: 'ingredients'\n    })\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Category Navigation in Craft CMS Templates\nDESCRIPTION: Twig code for creating and displaying a hierarchical category navigation in Craft CMS templates, including querying categories and using the nav tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/categories.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a category query with the 'group' parameter #}\n{% set myCategoryQuery = craft.categories()\n  .group('flavors') %}\n\n{# Fetch the categories #}\n{% set categories = myCategoryQuery.all() %}\n\n{# Display the navigation #}\n<ul>\n  {% nav category in categories %}\n    <li>\n      <a href=\"{{ category.url }}\">{{ category.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Rendering CSRF Input with csrfInput Function\nDESCRIPTION: Demonstrates how to use the csrfInput function to render a CSRF token input element for use in HTML forms, with an option to set additional attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput() }}\n```\n\nLANGUAGE: html\nCODE:\n```\n<input type=\"hidden\" name=\"CRAFT_CSRF_TOKEN\" value=\"MfVs9Nyp33VKpXH7S0eUZZxy74Dw25VUYHGti-(...)\">\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput({\n  id: 'my-csrf-input',\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Schema Components in PHP for Craft CMS\nDESCRIPTION: This code snippet shows how to register custom GraphQL schema components by listening to the registerGqlSchemaComponents event and adding new components to the queries array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlSchemaComponentsEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_SCHEMA_COMPONENTS,\n    function(RegisterGqlSchemaComponentsEvent $event) {\n        $event->queries = array_merge($event->queries, [\n            // \"Widgets\" group\n            'Widgets' => [\n                // widget component with read action, labelled \"View Widgets\" in UI\n                'widget:read' => ['label' => 'View Widgets']\n            ],\n        ]);\n\n        // Same format applies for $event->mutations\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Assets Fields in Twig\nDESCRIPTION: Demonstrates how to fetch entries with related assets using Twig in Craft CMS. This snippet shows various filtering options for the Assets field query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Service Methods from External Code\nDESCRIPTION: Example showing how to call a service method from anywhere in the codebase using the plugin's getInstance() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nMyPlugin::getInstance()->foo->bar()\n```\n\n----------------------------------------\n\nTITLE: Implementing a Class-Oriented Service Method in Craft CMS\nDESCRIPTION: Complete example of a class-oriented service method that handles saving a model with validation, events, and appropriate return values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function saveRecipe(Recipe $recipe, $runValidation = true)\n{\n    $isNewRecipe = !$recipe->id;\n\n    // Fire a 'beforeSaveRecipe' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    if ($runValidation && !$recipe->validate()) {\n        \\Craft::info('Recipe not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    // ... Save the recipe here ...\n\n    // Fire an 'afterSaveRecipe' event\n    $this->trigger(self::EVENT_AFTER_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Element Index Template in Twig\nDESCRIPTION: Basic template setup for element index page in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{# This template is provided by Craft: #}\n{% extends '_layouts/elementindex.twig' %}\n\n{# Set a page title: #}\n{% set title = 'Products'|t('my-plugin') %}\n\n{# Let Craft know what element type the index is for: #}\n{% set elementType = 'mynamespace\\\\elements\\\\Product' %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Element URLs in PHP\nDESCRIPTION: Demonstrates how to implement methods for generating element URLs and routing requests to element pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\npublic function getUriFormat(): ?string\n{\n    return $this->getType()->uriFormat;\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected function route(): array|string|null\n{\n    return [\n        'templates/render', [\n            // Again, assuming a `ProductType` model makes this configurable:\n            'template' => $this->getType()->template,\n            'variables' => [\n                'product' => $this,\n            ]\n        ]\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Related Assets in Twig using .with()\nDESCRIPTION: This snippet shows how to use the .with() query param to eager-load related assets for news entries, optimizing the query performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with(['assetsField'])\n  .all() %}\n\n{% for entry in entries %}\n  {% set image = entry.assetsField.one() %}\n\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Saving Customer Address in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed customer address saving responses, including success status, address model, and error details.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"address\": {} // Address model\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\",\n  \"errors\": [] // Validation errors\n}\n```\n\n----------------------------------------\n\nTITLE: Writing Temporary Files in Craft CMS\nDESCRIPTION: Demonstrates how to generate a temporary file using Craft's FileHelper. It creates a unique filename in the temporary directory and writes content to it. This approach ensures that temporary files are managed alongside other runtime data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/topics.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\FileHelper;\n\n$content = '# Todo List';\n\n$filename = 'todos.md';\n$tempDir = Craft::$app->getPath()->getTempPath();\n\n$path = $tempDir . DIRECTORY_SEPARATOR . uniqid() . $filename;\n\nFileHelper::writeToFile($path, $content);\n\n// Pass $path back to another part of the application...\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Validation Rules to Entry Elements in PHP\nDESCRIPTION: Example of adding validation rules to Entry elements by listening to the EVENT_DEFINE_RULES event. This shows how to implement a rule that disallows year-like values in slugs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $e) {\n        // Disallow strings of digits that look like years:\n        $e->rules[] = [\n            ['slug'],\n            'match',\n            'pattern' => '/[0-9]{4}/',\n            'not' => true,\n            'message' => Craft::t('my-plugin', 'Slugs should not contain year-like values.'),\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Updating Progress in a Craft CMS Queue Job\nDESCRIPTION: This snippet shows how to update the progress of a queue job while it's executing. It demonstrates sending emails to multiple users and reporting the job's progress using setProgress method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/queue-jobs.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function execute($queue): void\n{\n    $users = \\craft\\elements\\User::findAll();\n    $totalUsers = count($users);\n\n    foreach ($users as $i => $user) {\n        $this->setProgress(\n            $queue,\n            $i / $totalUsers,\n            Craft::t('app', '{step, number} of {total, number}', [\n                'step' => $i + 1,\n                'total' => $totalUsers,\n            ])\n        );\n\n        $message = new Message();\n\n        $message->setTo($user->email);\n        $message->setSubject('Oh Hai');\n        $message->setTextBody('Hello from the queue system! 👋');\n\n        // Swallow exceptions from the mailer:\n        try {\n            Craft::$app->getMailer()->send($message);\n        } catch (\\Throwable $e) {\n            Craft::warning(\"Something went wrong: {$e->getMessage()}\", __METHOD__);\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-Environment Configuration in Craft CMS\nDESCRIPTION: Example of a multi-environment configuration setup that defines different settings for development and production environments using the traditional map style.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// -- config/general.php --\nreturn [\n    '*' => [\n        // Applies to all environments:\n        'defaultWeekStartDay' => 1,\n        'omitScriptNameInUrls' => true,\n        'allowAdminChanges' => false,\n    ],\n\n    'dev' => [\n        // Only applies to development environments, overriding anything in `*`:\n        'allowAdminChanges' => true,\n        'devMode' => true,\n    ],\n\n    'production' => [\n        // Only applies to the production environment, overriding anything in `*`:\n        'cpTrigger' => 'secret-word',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Applying Parameters to Nested Eager-Loaded Elements in Twig\nDESCRIPTION: This example shows how to apply parameters at different levels of an eager-loading path for nested relationships. Parameters can be applied to each level of the relationship chain.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    ['featureImage', { dateUploaded: \">= #{now|date_modify('-1 month')}\" }],\n    ['authors', { group: 'staff' }],\n    ['topic.thumbnail', { kind: 'image' }],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Users from a Specific Group in Twig\nDESCRIPTION: This snippet demonstrates a complete workflow for querying and displaying users from a specific group. It creates a query filtered by group, fetches the users, and loops through them to create a formatted list with names and join dates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a user query with the 'group' parameter #}\n{% set myUserQuery = craft.users()\n  .group('members') %}\n\n{# Fetch the users #}\n{% set members = myUserQuery.all() %}\n\n{# Display the list #}\n<ul>\n  {% for user in members %}\n    <li>{{ user.fullName }} (Member since {{ user.dateCreated|date }})</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Attaching Event Behavior to ElementQuery for Cloneable Handlers in PHP\nDESCRIPTION: Using the EventBehavior class to attach event handlers that survive when an object is cloned. This pattern is useful for query modifications that need to persist through Craft's internal object handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\behaviors\\EventBehavior;\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\elements\\Entry;\nuse craft\\events\\CancelableEvent;\n\n$query = Entry::find();\n\n$query->attachBehavior('myBehavior', new EventBehavior([\n    ElementQuery::EVENT_AFTER_PREPARE => function(CancelableEvent $event, ElementQuery $query) {\n        // ...\n    },\n], true));\n```\n\n----------------------------------------\n\nTITLE: Enabling Content Support for Elements\nDESCRIPTION: Implementation of the hasContent() method to give elements their own rows in the content table, required for titles and custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasContent(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Collections in Twig and PHP\nDESCRIPTION: Demonstrates how to create a Collection object with an array of colors using both Twig and PHP syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/collections.md#2025-04-22_snippet_0\n\nLANGUAGE: Twig\nCODE:\n```\n{% set list = collect(['Green', 'Teal', 'Blue']) %}\n```\n\nLANGUAGE: PHP\nCODE:\n```\nuse Illuminate\\Support\\Collection;\n\n$colors = Collection::make(['Green', 'Teal', 'Blue']);\n```\n\n----------------------------------------\n\nTITLE: Executing Plugin and Content Migrations in Craft CMS\nDESCRIPTION: Terminal commands for applying newly created migrations for plugins or content in a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/up --plugin=my-plugin-handle\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/up\n```\n\n----------------------------------------\n\nTITLE: Creating a Reusable Post Feed Template in Twig\nDESCRIPTION: This snippet demonstrates how to create a reusable template for displaying a feed of blog posts. It iterates over a collection of posts, displaying each post's feature image, title, date, summary, and a link to the full post.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for post in posts %}\n  {% set image = post.featureImage.one() %}\n\n  <article>\n    {% if image %}\n      <div class=\"thumbnail\">\n        {{ image.getImg() }}\n      </div>\n    {% endif %}\n\n    <h2>{{ post.title }}</h2>\n\n    <time datetime=\"{{ post.postDate | atom }}\">{{ post.postDate | date }}</time>\n\n    {{ post.summary | md }}\n\n    <a href=\"{{ post.url }}\">Continue Reading</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Matrix Blocks in Twig\nDESCRIPTION: Demonstrates how to create a Matrix block query with parameters, fetch the blocks, and loop through them to display their contents in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-blocks.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a Matrix block query with the 'owner', 'fieldId', and 'type' parameters #}\n{% set myMatrixBlockQuery = craft.matrixBlocks()\n  .owner(myEntry)\n  .fieldId(10)\n  .type('text') %}\n\n{# Fetch the Matrix blocks #}\n{% set matrixBlocks = myMatrixBlockQuery.all() %}\n\n{# Display their contents #}\n{% for block in matrixBlocks %}\n  <p>{{ block.text }}</p>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Disabling CSRF Validation for Specific Action in PHP\nDESCRIPTION: This snippet shows how to disable CSRF validation for a specific action in a Craft CMS controller. It overrides the beforeAction method to disable CSRF validation for a 'receive-webhook' action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic function beforeAction($action): bool\n{\n    // Don't require a CSRF token for incoming webhooks:\n    if ($action->id === 'receive-webhook') {\n        $this->enableCsrfValidation = false;\n    }\n\n    return parent::beforeAction($action);\n}\n```\n\n----------------------------------------\n\nTITLE: Image Transform Index Eager Loading\nDESCRIPTION: Shows how to eager load image transform indexes to optimize performance when working with asset transforms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsField\n  .withTransforms([\n    'heroImage',\n    { width: 100, height: 100 }\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Related Ingredients Using sourceElement in Craft CMS Twig\nDESCRIPTION: This snippet demonstrates how to query related ingredients for a recipe using the sourceElement parameter in a relatedTo query. It's equivalent to using the field handle directly on the recipe object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries()\n  .section('ingredients')\n  .relatedTo({\n    sourceElement: recipe,\n  })\n  .all() %}\n{# -> Equivalent to `recipe.ingredients.all()`, from our very first example! #}\n```\n\n----------------------------------------\n\nTITLE: Implementing Component Getters for IDE Support\nDESCRIPTION: Example of how to implement phpDocumentor property tags and getter methods to improve IDE auto-completion and type hinting for plugin services.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse craft\\base\\Plugin;\nuse mynamespace\\services\\Foo;\n\n/**\n * My Plugin Class\n * \n * @property Foo $foo\n */\nclass MyPlugin extends BasePlugin\n{\n    public function init()\n    {\n        // ...\n\n        $this->setComponents([\n            'foo' => Foo::class,\n        ]);\n    }\n\n    public function getFoo(): Foo\n    {\n        return $this->get('foo');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining an Event Class for Post-API Operations in PHP\nDESCRIPTION: Creates an ApiResponseEvent class that extends the base Event class, which will be triggered after a contact has been subscribed to a newsletter. This event carries both the contact information and the API response data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\events;\n\nuse mynamespace\\newsletter\\models\\Contact;\nuse yii\\base\\Event;\n\nclass ApiResponseEvent extends Event\n{\n    public Contact $contact;\n    public array $response;\n}\n```\n\n----------------------------------------\n\nTITLE: Extending the CraftVariable with Behaviors and Services in PHP\nDESCRIPTION: This code snippet demonstrates how to extend Craft's global 'craft' variable by attaching behaviors or services from a plugin's init() method. It shows registering an event handler for CraftVariable::EVENT_INIT to either attach a behavior directly to the variable or register a custom service with a service ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-twig.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\web\\twig\\variables\\CraftVariable;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        CraftVariable::class,\n        CraftVariable::EVENT_INIT,\n        function(Event $e) {\n            /** @var CraftVariable $variable */\n            $variable = $e->sender;\n\n            // Attach a behavior:\n            $variable->attachBehaviors([\n                MyBehavior::class,\n            ]);\n\n            // Attach a service:\n            $variable->set('serviceId', MyService::class);\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Working with Numbers in Twig\nDESCRIPTION: Shows how to define and use numbers in Twig templates, including outputting numbers and combining them with strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set answer = 42 %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<p>The answer is {{ answer }}</p>\n```\n\n----------------------------------------\n\nTITLE: Atomic Deployment Process for Craft CMS\nDESCRIPTION: This snippet outlines an atomic deployment process for Craft CMS. It creates a new release directory, clones the latest project files, installs dependencies, builds artifacts, and updates a symbolic link to the new release.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# Get a timestamp to identify this release:\nDATE=\"$(date +'%Y-%m-%d--%H%M%S')\" # -> 2023-01-01--123456\n\n# Define paths we'll be working with:\nWORKING=\"/var/www\"                 # Root deploy directory\nRELEASE=\"$WORKING/releases/$DATE\"  # New release directory\nCURRENT=\"$WORKING/current\"         # Live release \"link\"\n\n# Shallow-clone a fresh copy of the latest project files into our release directory:\ngit clone --depth=1 git@github.com/organization/repo $RELEASE\n\n# Move into the release directory:\npushd $RELEASE\n\n# Install Composer packages:\ncomposer install --no-interaction\n\n# Build other artifacts:\nnpm install\nnpm run build\n\n# Move back out to the main directory:\npopd\n\n# Create a symbolic link to the new release:\nln -sf $RELEASE $CURRENT\n```\n\n----------------------------------------\n\nTITLE: Adding a Job to the Craft CMS Queue\nDESCRIPTION: This example shows how to push a custom job to the Craft queue system using the Queue helper. This is typically done in a controller action or service where work needs to be processed asynchronously.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/queue-jobs.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Queue;\nuse mynamespace\\queue\\jobs\\MyJob;\n\nQueue::push(new MyJob());\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Query Class for Widget Elements\nDESCRIPTION: This PHP class extends Craft's base Query class to provide a new 'widgets' GraphQL query. It defines the return type, arguments, resolver, and includes permission checking to ensure the current token can query widgets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\queries;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\gql\\arguments\\elements\\Widget as WidgetArguments;\nuse mynamespace\\gql\\resolvers\\elements\\Widget as WidgetResolver;\n\nclass Widget extends \\craft\\gql\\base\\Query\n{\n    public static function getQueries($checkToken = true): array\n    {\n        // Make sure the current token's schema allows querying widgets\n        if ($checkToken && !GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        // Provide one or more query definitions\n        return [\n            'widgets' => [\n                'type' => Type::listOf(WidgetInterface::getType()),\n                'args' => WidgetArguments::getArguments(),\n                'resolve' => WidgetResolver::class . '::resolve',\n                'description' => 'This query is used to query for custom widgets.'\n            ],\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Including Partial Template with Variables in Twig\nDESCRIPTION: This snippet shows how to include a partial template and pass variables to it using the 'with' keyword.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% include '_tip.twig' with {\n  tipText: 'I'm a helpful tip!'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Proper Return Statements in PHP Controllers\nDESCRIPTION: Illustrates the correct way to return responses from controller actions to complete the request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nreturn $this->asJson($obj);\nreturn $this->renderTemplate($template, $variables);\n```\n\n----------------------------------------\n\nTITLE: Creating Global Set Queries in Twig and PHP\nDESCRIPTION: Illustrates how to create global set queries in both Twig templates and PHP code. These queries can be used to fetch global sets programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/globals.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new global set query #}\n{% set myGlobalSetQuery = craft.globalSets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new global set query\n$myGlobalSetQuery = \\craft\\elements\\GlobalSet::find();\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Twig Extension Class\nDESCRIPTION: Implementation of a custom Twig extension class that adds new filters, functions and tests to the Twig environment. Shows how to define and register custom Twig features.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/extending-twig.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\twig;\n\nuse Craft;\nuse Twig\\Extension\\AbstractExtension;\nuse Twig\\TwigFilter;\nuse Twig\\TwigFunction;\nuse Twig\\TwigTest;\n\nclass Extension extends AbstractExtension\n{\n    public function getFilters(): array\n    {\n        return [\n            // First argument is the filter name; second is a callable:\n            new TwigFilter('total', 'array_sum'),\n        ];\n    }\n\n    public function getFunctions(): array\n    {\n        return [\n            // First argument is the function name; second is a callable:\n            new TwigFunction('log', [Craft::class, 'info']),\n        ];\n    }\n\n    public function getTests(): array\n    {\n        return [\n            // First argument is the test name; second is a callable:\n            new TwigTest('infinite', 'is_infinite'),\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Dates for RSS with rss Filter in Twig\nDESCRIPTION: Shows how to use the rss filter to format dates for RSS feeds, including an option to specify the timezone.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|rss }}\n{# Expires: Wed, 31 May 2023 12:23:09 -0700 #}\n\n{% header 'Expires: ' ~ expiry|httpdate('CET') %}\n{# Expires: Thu, 08 Apr 2021 21:00:00 +0000 #}\n```\n\n----------------------------------------\n\nTITLE: Asset Query Implementation in GraphQL\nDESCRIPTION: The assets query is used to fetch assets with various filtering options. It supports pagination, site selection, relationship filtering, and asset-specific criteria like volume, folder, and file properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_7\n\nLANGUAGE: graphql\nCODE:\n```\nquery assets(\n  $id: [QueryArgument]\n  $uid: [String]\n  $status: [String]\n  $archived: Boolean\n  $trashed: Boolean\n  $site: [String]\n  $siteId: [QueryArgument]\n  # ... additional arguments\n)\n```\n\n----------------------------------------\n\nTITLE: Querying Blog Entries in Twig\nDESCRIPTION: This snippet demonstrates how to create an entry query in Twig to fetch and display the 10 most recent entries from a 'Blog' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an entry query with the 'section' and 'limit' parameters #}\n{% set myEntryQuery = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{# Fetch the entries #}\n{% set entries = myEntryQuery.all() %}\n\n{# Display the entries #}\n{% for entry in entries %}\n  <article>\n    <h1><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h1>\n    {{ entry.summary }}\n    <a href=\"{{ entry.url }}\">Continue reading</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using Data URL for Images in PDF Templates with Twig\nDESCRIPTION: This Twig code snippet demonstrates how to use a data URL for including images in PDF templates when pdfAllowRemoteImages is set to false. It uses the dataUrl function to encode an SVG image.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pdfs.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<img width=\"75\" height=\"75\" src=\"{{ dataUrl('@webroot/images/store-logo.svg') }}\" alt=\"Store logo\"/>\n```\n\n----------------------------------------\n\nTITLE: Creating Control Panel Screen Response in Craft\nDESCRIPTION: Shows how to construct a control panel screen response using asCpScreen() with various configuration options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$response = $this->asCpScreen()\n    ->action('my-plugin/widgets/save')\n    ->docTitle(\"Edit {$widget->name}\")\n    ->title($widget->name)\n    ->editUrl(UrlHelper::cpUrl(\"widgets/edit/{$widget->id}\");\n\n// ...\n\nreturn $response;\n```\n\n----------------------------------------\n\nTITLE: Accessing Request Parameters in Craft CMS Twig\nDESCRIPTION: Demonstrates how to get the value of an 'email' query parameter or post field using the craft.app.request service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.app.request.getParam('email') %}\n```\n\n----------------------------------------\n\nTITLE: Requiring User Login in Twig Templates\nDESCRIPTION: Shows how to ensure a user is logged in before accessing template content. Non-logged in users are redirected to the login page and returned after successful login.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n```\n\n----------------------------------------\n\nTITLE: Defining Searchable Attributes for Craft CMS Elements\nDESCRIPTION: This method specifies which additional attributes should be indexed for search. It returns an array of attribute names that will be included in the element's search keywords.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_40\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSearchableAttributes(): array\n{\n    return [\n        'price',\n        'sku',\n        'vendor',\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom GraphQL Interface in Craft CMS\nDESCRIPTION: This snippet shows how to implement a custom GraphQL interface for a Widget element in Craft CMS. It extends the base Element interface and adds a custom 'approved' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\gql\\interfaces\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Type\\Definition\\InterfaceType;\nuse craft\\gql\\GqlEntityRegistry;\n\nclass Widget extends \\craft\\gql\\interfaces\\Element\n{\n    public static function getName(): string\n    {\n        return 'WidgetInterface';\n    }\n\n    public static function getType($fields = null): Type\n    {\n        // Return the type if it's already been created\n        if ($type = GqlEntityRegistry::getEntity(self::getName())) {\n            return $type;\n        }\n\n        // Otherwise create the type via the entity registry, which handles prefixing\n        return GqlEntityRegistry::createEntity(self::getName(), new InterfaceType([\n            'name' => static::getName(),\n            'fields' => self::class . '::getFieldDefinitions',\n            'description' => 'This is the interface implemented by all widgets.',\n            'resolveType' => self::class . '::resolveElementTypeName',\n        ]));\n    }\n\n    public static function getFieldDefinitions(): array\n    {\n        // Add our custom widget's field to common ones for all elements\n        return TypeManager::prepareFieldDefinitions(array_merge(\n            parent::getFieldDefinitions(),\n            [\n                'approved' => [\n                    'name' => 'approved',\n                    'type' => Type::boolean(),\n                    'description' => 'Whether the widget is approved.'\n                ],\n            ]\n        ), self::getName());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Queries\nDESCRIPTION: This PHP code shows how to register custom queries with Craft's GraphQL system using the EVENT_REGISTER_GQL_QUERIES event. It merges the custom Widget queries with existing queries in the event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlQueriesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\queries\\Widget;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_QUERIES,\n    function(RegisterGqlQueriesEvent $event) {\n        $event->queries = array_merge(\n            $event->queries,\n            Widget::getQueries()\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using Nested 'with' Directives for Complex Eager-Loading in Twig\nDESCRIPTION: This snippet shows how to use nested 'with' directives for more complex eager-loading scenarios. This approach allows for cleaner organization of multi-level eager-loading relationships.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    ['topic', {\n      with: [\n        ['thumbnail', { kind: image }],\n        ['descendants'],\n        ['sectionEditor'],\n      ]\n    }]\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Purifier in JSON\nDESCRIPTION: HTML Purifier configuration example showing how to restrict allowed HTML elements in content filtering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_19\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"HTML.AllowedElements\": \"p, a\",\n}\n```\n\n----------------------------------------\n\nTITLE: Creating New Matrix Blocks in Front-End Forms with Twig\nDESCRIPTION: This snippet demonstrates how to add a new Matrix block in a front-end form using a temporary ID. It shows the proper way to structure inputs for new blocks, including the sort order and block type specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle][sortOrder][]', 'new:1') }}\n\n{# Prefix the block's input names with `fields[myFieldHandle][blocks][new:1]` #}\n{% namespace \"fields[myFieldHandle][blocks][new:1]\" %}\n  {{ hiddenInput('type', 'text') }}\n  <textarea name=\"fields[myTextFieldHandle]\"></textarea>\n{% endnamespace %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Matrix Field Data in Twig and PHP\nDESCRIPTION: Shows how to access Matrix field data from an element using the field handle, which returns a Matrix block query ready to be executed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Accessing Current Site Information in Twig\nDESCRIPTION: This snippet demonstrates how to access and display various attributes of the current site and its group in a Twig template. It includes site ID, handle, name, language, primary status, base URL, and site group name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# @var currentSite craft\\models\\Site #}\nSite ID:          {{ currentSite.id }}\nSite Handle:      {{ currentSite.handle }}\nSite Name:        {{ currentSite.name }}\nSite Language:    {{ currentSite.language }}\nIs Primary Site?: {{ currentSite.primary }}\nBase URL:         {{ currentSite.baseUrl }}\n\n{# @var siteGroup craft\\models\\SiteGroup #}\n{% set siteGroup = currentSite.group %}\nSite Group Name:  {{ siteGroup.name }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Save Logic\nDESCRIPTION: Implements afterSave() method to handle persisting custom element attributes to the database after an element is saved.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Db;\n\n// ...\n\npublic function afterSave(bool $isNew)\n{\n    if (!$this->propagating) {\n        Db::upsert('{{%plugin_products}}', [\n            'id' => $this->id,\n        ], [\n            'price' => $this->price,\n            'currency' => $this->currency,\n        ]);\n    }\n\n    parent::afterSave($isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Element Queries with Custom Fields in Craft CMS 5\nDESCRIPTION: Shows how to use custom fields in advanced 'where()' conditions for element queries in Craft CMS 5, demonstrating both Twig and PHP implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set entriesFromPhysicalMedia = craft.entries()\n  .section('news')\n  .andWhere([\n    'or like',\n    fieldValueSql(entryType('post'), 'sourceMedia'),\n    ['print', 'paper', 'press']\n  ])\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\elements\\Entry;\n\n$entryType = Craft::$app->getEntries()->getEntryTypeByHandle('post');\n$fieldLayout = $entryType->getFieldLayout();\n$sourceField = $fieldLayout->getFieldByHandle('sourceMedia');\n\n$entriesFromPhysicalMedia = Entry::find()\n  ->section('news')\n  ->andWhere([\n    'or like',\n    $sourceField->getValueSql(),\n    ['print', 'paper', 'press'],\n  ])\n  ->all();\n```\n\n----------------------------------------\n\nTITLE: Debugging Template Values with dump() in Twig\nDESCRIPTION: Example of using the dump() function to debug variables in Twig templates when encountering errors or working with complex data types. Shows how to inspect a DateTime object and access its methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{{ now }} {# -> Error! #}\n{{ dump(now) }} {# ->  object(DateTime) ...  #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ now.format('Y') }} {# -> 2022 #}\n```\n\n----------------------------------------\n\nTITLE: Comparing Slow and Optimized Twig Queries for Donor Entries\nDESCRIPTION: Demonstrates the difference between loading full donor entries and using lean selections with pairs() method to reduce memory usage when displaying donor names and gift amounts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{# Load all donor entries with complete native + custom field data: #}\n{% set donors = craft.entries()\n  .section('donors')\n  .all() %}\n\n<ul>\n  {% for donor in donors %}\n    <li>{{ donor.title }} — {{ donor.lifetimeGiftAmount|money }}</li>\n  {% endfor %}\n</ul>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{# Load only donor names and gift amounts: #}\n{% set donors = craft.entries()\n  .section('donors')\n  .select([\n    'title',\n    'lifetimeGiftAmount'\n  ])\n  .pairs() %}\n\n<ul>\n  {% for name, amount in donors %}\n    <li>{{ name }} — {{ amount|money }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Items with Twig in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to retrieve the current cart, check if it contains any items, and display those items in a table. It shows the product description, SKU, quantity, sale price for each item, and the cart total. The snippet uses the craft.commerce.carts.cart variable to access the current cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/display-cart-items.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<h1>Here's what's in your cart</h1>\n\n{% if cart.lineItems|length == 0 %}\n  <p>There aren't any items in your cart.</p>\n{% else %}\n  <table>\n    <thead>\n      <tr>\n        <th>Product</th>\n        <th>Qty</th>\n        <th>Price</th>\n      </tr>\n    </thead>\n    <tbody>\n      {% for item in cart.lineItems %}\n        <tr>\n          <td>{{ item.description }} <small>({{ item.sku }})</small></td>\n          <td>{{ item.qty }}</td>\n          <td>{{ item.salePriceAsCurrency }}</td>\n        </tr>\n      {% endfor %}\n      <tr>\n        <td colspan=\"3\">\n          Cart Total: {{ cart.totalPriceAsCurrency }}\n        </td>\n      </tr>\n    </tbody>\n  </table>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining Searchable Attributes and Keywords for Elements in PHP\nDESCRIPTION: Shows how to define searchable attributes for elements and customize the generation of search keywords for specific attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSearchableAttributes(): array\n{\n    return [\n        'price',\n        'sku',\n        'vendor',\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected function searchKeywords(string $attribute): string\n{\n    // Add the currency to search terms:\n    if ($attribute === 'price') {\n        return join(' ', [\n            $this->$attribute,\n            $this->currency,\n        ]);\n    }\n\n    return parent::searchKeywords($attribute);\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Changes in PHP\nDESCRIPTION: Implementation of handlers for project config changes, including methods for handling product type updates and deletions. Includes database operations and event triggering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\db\\Query;\nuse craft\\events\\ConfigEvent;\nuse craft\\helpers\\Db;\nuse craft\\commerce\\events\\ProductTypeEvent;\n\n// ...\n\npublic function handleChangedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path\n    $uid = $event->tokenMatches[0];\n\n    // Does this product type exist?\n    $id = Db::idByUid('{{%plugin_producttypes}}', $uid);\n    $isNew = empty($id);\n\n    // Insert or update its row, accordingly:\n    if ($isNew) {\n        Db::insert('{{%plugin_producttypes}}', [\n            'name' => $event->newValue['name'],\n            // ...\n            'uid' => $uid,\n        ]);\n    } else {\n        Db::update('{{%plugin_producttypes}}', [\n            'name' => $event->newValue['name'],\n            // ...\n        ], ['id' => $id]);\n    }\n\n    // Fire an 'afterSaveProductType' event?\n    if ($this->hasEventHandlers('afterSaveProductType')) {\n        // Load the product type so we can emit the event with a fully-hydrated model:\n        $productType = $this->getProductTypeByUid($uid);\n\n        $this->trigger('afterSaveProductType', new ProductTypeEvent([\n            'productType' => $productType,\n            'isNew' => $isNew,\n        ]));\n    }\n}\n\npublic function handleDeletedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path:\n    $uid = $event->tokenMatches[0];\n\n    // Look up the product type by its UID:\n    $productType = $this->getProductTypeByUid($uid);\n\n    // If that came back empty, we're done—must have already been deleted!\n    if (!$productType) {\n        return;\n    }\n\n    // Fire a 'beforeApplyProductTypeDelete' event:\n    if ($this->hasEventHandlers('beforeApplyProductTypeDelete')) {\n        $this->trigger('beforeApplyProductTypeDelete', new ProductTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n\n    // Delete its row:\n    Db::delete('{{%plugin_producttypes}}', ['id' => $productType->id]);\n\n    // Fire an 'afterDeleteProductType' event?\n    if ($this->hasEventHandlers('afterDeleteProductType')) {\n        $this->trigger('afterDeleteProductType', new ProductTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Module Class in PHP\nDESCRIPTION: Template for the main Module class that serves as the module's entry point. Contains initialization logic, sets up aliases, and configures controller namespaces based on request type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/module-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace foo;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace\n        Craft::setAlias('@foo', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'foo\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'foo\\\\controllers';\n        }\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Interface-Oriented Service Method Implementation\nDESCRIPTION: Example of implementing an interface-oriented service method with transaction handling and lifecycle events.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function saveIngredient(IngredientInterface $ingredient, $runValidation = true)\n{\n    /** @var Ingredient $ingredient */\n    \n    $isNewIngredient = !$ingredient->id;\n\n    // Fire a 'beforeSaveIngredient' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    if (!$ingredient->beforeSave()) {\n        return false;\n    }\n\n    if ($runValidation && !$ingredient->validate()) {\n        \\Craft::info('Ingredient not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    $transaction = \\Craft::$app->getDb()->beginTransaction();\n    try {\n        // ... Save the ingredient here ...\n\n        $ingredient->afterSave();\n\n        $transaction->commit();\n    } catch (\\Exception $e) {\n        $transaction->rollBack();\n        throw $e;\n    }\n\n    // Fire an 'afterSaveIngredient' event\n    $this->trigger(self::EVENT_AFTER_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing afterSave() Method for Custom Element in Craft CMS\nDESCRIPTION: Defines the afterSave() method to persist custom element data to the database after an element is saved.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Db;\n\n// ...\n\npublic function afterSave(bool $isNew)\n{\n    if (!$this->propagating) {\n        Db::upsert('{{%plugin_products}}', [\n            'id' => $this->id,\n        ], [\n            'price' => $this->price,\n            'currency' => $this->currency,\n        ]);\n    }\n\n    parent::afterSave($isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Craft CMS Aliases Configuration in PHP\nDESCRIPTION: Example showing how to define custom aliases in Craft CMS config using environment variables and recursive alias resolution. Demonstrates setting up URL and file path aliases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'aliases' => [\n        '@primaryUrl' => App::env('PRIMARY_SITE_URL'),\n        '@shared' => App::env('SHARED_PATH'),\n        '@uploads' => '@shared/web/uploads',\n        '@assets' => '@primaryUrl/uploads',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Element Sources in Craft CMS\nDESCRIPTION: This method implementation defines sources for an element index, including grouping, criteria, and default sort options. Sources determine how elements are filtered and organized in the admin interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSources(string $context = null): array\n{\n    return [\n        [\n            'key' => '*',\n            'label' => 'All Products',\n            'criteria' => []\n        ],\n        [\n            // Optional: Divide your source list into groups!\n            'heading' => Craft::t('plugin-handle', 'Currencies'),\n        ],\n        [\n            'key' => 'cad',\n            'label' => 'CAD',\n            'criteria' => [\n                'currency' => 'cad',\n            ]\n        ],\n        [\n            'key' => 'usd',\n            'label' => 'USD',\n            'criteria' => [\n                'currency' => 'usd',\n            ],\n            // Define a default sort attribute and direction:\n            'defaultSort' => ['price', 'desc'],\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Searching for Entries in Craft CMS\nDESCRIPTION: Examples of how to search for entries using keywords in Twig, GraphQL, and PHP. The search query 'foo' is used to filter entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Changes in Craft CMS Plugin\nDESCRIPTION: Implements handler methods that respond to project config changes by updating the database. Shows how to handle both creating/updating records and deleting them based on project config events, including firing appropriate event hooks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/project-config.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\db\\Query;\nuse craft\\events\\ConfigEvent;\n\npublic function handleChangedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path\n    $uid = $event->tokenMatches[0];\n\n    // Does this product type exist?\n    $id = (new Query())\n        ->select(['id'])\n        ->from('{{%producttypes}}')\n        ->where(['uid' => $uid])\n        ->scalar();\n\n    $isNew = empty($id);\n\n    // Insert or update its row\n    if ($isNew) {\n        Craft::$app->db->createCommand()\n            ->insert('{{%producttypes}}', [\n                'name' => $event->newValue['name'],\n                // ...\n            ])\n            ->execute();\n    } else {\n        Craft::$app->db->createCommand()\n            ->update('{{%producttypes}}', [\n                'name' => $event->newValue['name'],\n                // ...\n            ], ['id' => $id])\n            ->execute();\n    }\n\n    // Fire an 'afterSaveProductType' event?\n    if ($this->hasEventHandlers('afterSaveProductType')) {\n        $productType = $this->getProductTypeByUid($uid);\n        $this->trigger('afterSaveProductType', new ProducTypeEvent([\n            'productType' => $productType,\n            'isNew' => $isNew,\n        ]));\n    }\n}\n\npublic function handleDeletedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path\n    $uid = $event->tokenMatches[0];\n\n    // Get the product type\n    $productType = $this->getProductTypeByUid($uid);\n\n    // If that came back empty, we're done!\n    if (!$productType) {\n        return;\n    }\n\n    // Fire a 'beforeApplyProductTypeDelete' event?\n    if ($this->hasEventHandlers('beforeApplyProductTypeDelete')) {\n        $this->trigger('beforeApplyProductTypeDelete', new ProducTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n\n    // Delete its row\n    Craft::$app->db->createCommand()\n        ->delete('{{%producttypes}}', ['id' => $productType->id])\n        ->execute();\n\n    // Fire an 'afterDeleteProductType' event?\n    if ($this->hasEventHandlers('afterDeleteProductType')) {\n        $this->trigger('afterDeleteProductType', new ProducTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Date Field Output in Twig and PHP\nDESCRIPTION: Shows how to format and output a Date field's value in Twig and PHP, including a check for null values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myDateField %}\n  Selected date: {{ entry.myDateField|datetime('short') }}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myDateField) {\n    $selectedDate = \\Craft::$app->getFormatter()->asDatetime(\n        $entry->myDateField,\n        'short'\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Status Conditions for Craft CMS Element Queries\nDESCRIPTION: This method defines query conditions for each status when filtering elements. It translates status strings into database query conditions specific to the element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_39\n\nLANGUAGE: php\nCODE:\n```\nprotected function statusCondition(string $status): mixed\n{\n    switch ($status) {\n        case 'foo':\n            return ['foo' => true];\n        case 'bar':\n            return ['bar' => true];\n        default:\n            // Call the base method to handle `enabled` or `disabled`:\n            return parent::statusCondition($status);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Configuration Values in Twig and PHP\nDESCRIPTION: Examples showing how to access custom configuration values in Twig templates and PHP code, demonstrating practical usage with JavaScript integration and API requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set publishableKey = craft.app.config.custom.servicePublishableKey %}\n\n{% js \"https://cdn.service.com/client.js?key=#{publishableKey}\" %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$privateKey = Craft::$app->config->custom->servicePrivateKey;\n\n$client = Craft::createGuzzleClient([\n    'base_uri' => Craft::$app->config->custom->serviceBaseUrl,\n]);\n\n$client->post('/donations', [\n    'auth' => ['apiuser', $privateKey],\n    'json' => [\n        'amount' => 1000,\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Checking for Defined Values in Twig\nDESCRIPTION: Demonstrates how to use the 'defined' test in Twig to check if a variable exists before using it. This helps prevent errors when dealing with potentially undefined values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{% if style is defined %}\n  {% set classNames = \"tip tip--#{style}\" %}\n{% else %}\n  {% set classNames = \"tip tip--plain\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Schema Components in Craft CMS\nDESCRIPTION: Event handler that registers custom GraphQL schema components, allowing them to appear in the control panel's schema builder. This defines permissions for viewing widgets in the GraphQL API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlSchemaComponentsEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_SCHEMA_COMPONENTS,\n    function(RegisterGqlSchemaComponentsEvent $event) {\n        $event->queries = array_merge($event->queries, [\n            // \"Widgets\" group\n            'Widgets' => [\n                // widget component with read action, labelled \"View Widgets\" in UI\n                'widget:read' => ['label' => 'View Widgets']\n            ],\n        ]);\n\n        // Same format applies for $event->mutations\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Ordering Search Results by Score in Craft CMS\nDESCRIPTION: Examples of ordering search results by relevance score in Twig, GraphQL, and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .orderBy('score')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\", orderBy: \"score\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->orderBy('score')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Negation and Emptiness Checks in Twig\nDESCRIPTION: Shows how to use the 'not' operator and 'empty' test in Twig to check for non-empty values, including handling cases where a variable might not be defined.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% if var is not empty %}\n  {# There's a value! #}\n{% endif %}\n\n{% if var is defined and var is not empty %}\n  {# The value is definitely useful! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Rendering a Form with Redirect Input in Twig\nDESCRIPTION: This snippet demonstrates how to create a form in Twig that includes CSRF protection, action input, and a redirect input. It shows both the use of the redirectInput() function and a manual method of creating a hashed redirect input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/send-password-reset-email') }}\n\n  {# Redirect to a page with further instructions: #}\n  {{ redirectInput('help/account-recovery') }}\n\n  {# The above is equivalent to: #}\n  <input\n    type=\"hidden\"\n    name=\"redirect\"\n    value=\"{{ 'help/account-recovery' | hash }}\">\n\n  {{ input('email', 'loginName', null, {\n    required: true,\n  }) }}\n\n  <button>Reset Password</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Cache in Craft CMS with PHP\nDESCRIPTION: Configuration to use Redis for cache storage in Craft CMS. This example sets up the Redis Cache class with connection details and default settings from environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\redis\\Cache::class,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n\n                // Full Redis connection details:\n                'redis' => [\n                    'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                    'port' => 6379,\n                    'password' => App::env('REDIS_PASSWORD') ?: null,\n                ],\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Defining a Custom GraphQL Interface for Craft CMS Elements\nDESCRIPTION: This example shows how to create a custom GraphQL interface for a Widget element, extending Craft's base Element interface and adding a custom 'approved' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\gql\\interfaces\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Type\\Definition\\InterfaceType;\nuse craft\\gql\\GqlEntityRegistry;\n\nclass Widget extends \\craft\\gql\\interfaces\\Element\n{\n    public static function getName(): string\n    {\n        return 'WidgetInterface';\n    }\n\n    public static function getType($fields = null): Type\n    {\n        // Return the type if it's already been created\n        if ($type = GqlEntityRegistry::getEntity(self::getName())) {\n            return $type;\n        }\n\n        // Otherwise create the type via the entity registry, which handles prefixing\n        return GqlEntityRegistry::createEntity(self::getName(), new InterfaceType([\n            'name' => static::getName(),\n            'fields' => self::class . '::getFieldDefinitions',\n            'description' => 'This is the interface implemented by all widgets.',\n            'resolveType' => self::class . '::resolveElementTypeName',\n        ]));\n    }\n\n    public static function getFieldDefinitions(): array\n    {\n        // Add our custom widget's field to common ones for all elements\n        return TypeManager::prepareFieldDefinitions(array_merge(\n            parent::getFieldDefinitions(),\n            [\n                'approved' => [\n                    'name' => 'approved',\n                    'type' => Type::boolean(),\n                    'description' => 'Whether the widget is approved.'\n                ],\n            ]\n        ), self::getName());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Debugging Element Queries with getRawSql() in Twig\nDESCRIPTION: Example of using the getRawSql() method in a Twig template to debug a Craft element query by outputting the raw SQL that will be executed. This helps developers understand and modify complex queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n{{ dump(query.getRawSql()) }}\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin Services in Project Configuration\nDESCRIPTION: Example of how to customize a plugin's service configuration from the project's config/app.php file. This allows for project-level overrides of plugin service properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'plugins' => [\n            'pluginConfigs' => [\n                'my-plugin' => [\n                    'components' => [\n                        'foo' => [\n                            'myProperty' => 'bar',\n                        ],\n                    ],\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Adding Reference Tag Support to Custom Elements in PHP\nDESCRIPTION: Implementation of the refHandle() method to enable reference tags for custom elements. This method should return a unique handle that will be used in reference tags like {product:100}.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_35\n\nLANGUAGE: php\nCODE:\n```\npublic static function refHandle(): ?string\n{\n    return 'product';\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Product Queries in Multiple Languages\nDESCRIPTION: Examples of creating a new product query in Twig, PHP, and GraphQL, which is the first step to retrieving products from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new product query #}\n{% set myProductQuery = craft.products() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product query\n$myProductQuery = \\craft\\commerce\\elements\\Product::find();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Create a new product query\n{\n  products {\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Feature Toggle Implementation\nDESCRIPTION: Examples of implementing feature toggles in both PHP and Twig templates using the is() method to check current plugin edition.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-editions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif (Plugin::getInstance()->is(Plugin::EDITION_PRO) {\n    // Pro edition-only code goes here...\n}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if plugin('plugin-handle').is('pro') %}\n  {# Pro edition-only code goes here... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Processing Field Layout POST Data in PHP\nDESCRIPTION: Code to collect and save a field layout from POST data in a controller or service. Sets the layout type to the custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n$fieldLayout->type = Product::class;\n```\n\n----------------------------------------\n\nTITLE: Console Action with Arguments in PHP\nDESCRIPTION: Example of a console action implementation with typed arguments and conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function actionDeveloper(string $emotion, ?int $days = null): int\n{\n    $who = $this->who ?? 'world';\n\n    if ($days >= 500) {\n        $this->stderr(\"Sorry, I don't remember you, {$who}!\", Console::FG_YELLOW);\n\n        return ExitCode::TEMPFAIL;\n    }\n\n    $this->stdout(\"Hello, {$who}! I am {$emotion} to see you!\", Console::FG_GREEN);\n\n    return ExitCode::OK;\n}\n```\n\n----------------------------------------\n\nTITLE: Craft Variable Behavior Implementation for Template Access\nDESCRIPTION: Implementation of a CraftVariable behavior to expose element queries in templates via craft.products(). Shows proper setup of query factory methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\variables;\n\nuse mynamespace\\elements\\Product;\nuse mynamespace\\elements\\db\\ProductQuery;\nuse Craft;\nuse yii\\base\\Behavior;\n\nclass CraftVariableBehavior extends Behavior\n{\n    public function products(array $criteria = []): ProductQuery\n    {\n        return Craft::configure(Product::find(), $criteria);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing File Upload for Assets Field in Twig\nDESCRIPTION: This snippet demonstrates how to create a file input for uploading multiple assets to an Assets field in Craft CMS. It uses the input Twig function with the 'file' type and allows multiple file selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Settings in Craft CMS\nDESCRIPTION: Demonstrates how to access plugin settings from within the plugin class and from external code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// From your main plugin class:\n$foo = $this->getSettings()->foo;\n\n// From elsewhere:\n$foo = \\mynamespace\\Plugin::getInstance()->getSettings()->foo;\n```\n\n----------------------------------------\n\nTITLE: Implementing Pagination with Craft CMS Entries\nDESCRIPTION: This snippet demonstrates how to use the {% paginate %} tag to paginate through Craft CMS entries and display them in a loop. It shows the basic structure for paginating and displaying blog entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% paginate craft.entries().section('blog').limit(10) as pageEntries %}\n\n{% for entry in pageEntries %}\n  <article>\n    <h1>{{ entry.title }}</h1>\n    {{ entry.body }}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Handling Matrix Validation Errors in Twig Templates\nDESCRIPTION: This code demonstrates how to properly handle Matrix blocks when validation errors occur. It uses the null-coalescing operator to try different approaches to access the blocks, ensuring they contain the most recent form data rather than the last-persisted state.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.myFieldHandle.all() ?? entry.myFieldHandle ?? [] %}\n```\n\n----------------------------------------\n\nTITLE: Using Macros for Reusable HTML Components in Twig\nDESCRIPTION: Demonstrates how to create and use a macro to generate repeating HTML elements with dynamic content, reducing code duplication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n{% macro navItem(label, path) %}\n  <li class=\"nav-item\"><a href=\"{{ url(path) }}\">{{ label }}</a></li>\n{% endmacro %}\n\n<nav class=\"global-nav\">\n  <ul>\n    {{ _self.navItem('About', 'about') }}\n    {{ _self.navItem('Blog', 'blog') }}\n    {{ _self.navItem('Contact', 'contact') }}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Creating a Configuration Method for Craft CMS Project Config\nDESCRIPTION: This code snippet demonstrates how to create a getConfig() method in a Craft CMS model. It ensures that raw, unparsed values are used when serializing the object for project config, maintaining the integrity of environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\n\nclass Webhook extends Model\n{\n    // ...\n\n    public function getConfig(): array\n    {\n        return [\n            'targetUrl' => $this->targetUrl,\n            'secret' => $this->getSecret(false),\n            'secretParam' => $this->secretParam,\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CORS in Craft CMS\nDESCRIPTION: Implementation of CORS policies using the Cors filter. Includes configuration for origins, methods, headers, and credentials with site-specific and action-specific settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Attach the CORS filter to the application:\n    'as corsFilter' => [\n        'class' => \\craft\\filters\\Cors::class,\n\n        // Scope to specific sites (optional):\n        'site' => ['siteA', 'siteB'],\n\n        // CORS defaults for all non-CP requests:\n        'cors' => [\n            'Origin' => [\n                'https://my-project.ddev.site',\n                'https://es.my-project.ddev.site',\n            ],\n            'Access-Control-Request-Method' => ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'],\n            'Access-Control-Request-Headers' => ['*'],\n            'Access-Control-Allow-Credentials' => true,\n            'Access-Control-Max-Age' => 86400,\n            'Access-Control-Expose-Headers' => [],\n        ],\n\n        // Controller/action-specific overrides (optional):\n        'actions' => [\n            'graphql/api' => [\n                'Origin' => ['*'],\n                'Access-Control-Allow-Credentials' => false,\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Method in Craft Commerce with PHP Event Handler\nDESCRIPTION: This code demonstrates how to register a custom shipping method in Craft Commerce. It subscribes to the RegisterAvailableShippingMethodsEvent and adds an instance of a custom shipping method class to the available shipping methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/shipping-methods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RegisterAvailableShippingMethodsEvent;\nuse craft\\commerce\\services\\ShippingMethods;\nuse yii\\base\\Event;\n\nEvent::on(\n    ShippingMethods::class,\n    ShippingMethods::EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS,\n    function(RegisterAvailableShippingMethodsEvent $event) {\n        $event->shippingMethods[] = new MyShippingMethod();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Entries and Displaying Type Names with Aliases in Craft CMS (Twig)\nDESCRIPTION: This code shows how to query entries by type and then display their potentially aliased type names. When accessing an entry's type name through the template, the aliased name is automatically applied based on the entry's context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set announcements = craft.entries()\n  .type('announcement')\n  .all() %}\n\n{% for announcement in announcements %}\n  <article>\n    <h2>{{ announcement.title }}</h2>\n    <span class=\"type\">{{ announcement.type.name }}</span>\n    {{ announcement.body|md }}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Categories Fields\nDESCRIPTION: Examples of querying elements that have Categories fields, demonstrating how to filter results based on category relations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related category #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related category\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Database Operations in Craft CMS Migrations\nDESCRIPTION: Demonstrates the preferred way to perform database operations in Craft migrations. Shows the migration helper methods that should be used instead of direct database commands for better readability and status reporting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$this->db->createCommand()\n    ->insert('{{%mytablename}}', $rows)\n    ->execute();\n\n// Good:\n$this->insert('{{%mytablename}}', $rows);\n```\n\n----------------------------------------\n\nTITLE: Avoiding Redundant Else Blocks After Return Statements\nDESCRIPTION: Example showing how to avoid unnecessary else blocks when the if block already returns a value. This improves code readability by reducing nesting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\nif (!$condition) {\n    return $foo;\n} else {\n    return $bar;\n}\n\n// Better:\nif (!$condition) {\n    return $foo;\n}\n\nreturn $bar;\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Widget Types in Craft CMS Plugin\nDESCRIPTION: This code snippet demonstrates how to register a custom widget type with the Craft CMS Dashboard service. It uses an event listener to add the custom widget class to the list of available widget types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/widget-types.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Dashboard;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Dashboard::class,\n            Dashboard::EVENT_REGISTER_WIDGET_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyWidget::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Set Fields in Twig\nDESCRIPTION: Demonstrates how to access fields from a global set named 'companyInfo' in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/globals.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ companyInfo.yearEstablished }}\n```\n\n----------------------------------------\n\nTITLE: Overriding Named Transform Format with getUrl() in Twig\nDESCRIPTION: Example of overriding just the format of a named transform to generate a WebP version of an image using the getUrl() method in a picture element source.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<source type=\"image/webp\" srcset=\"{{ asset.getUrl({\n  transform: 'thumb',\n  format: 'webp',\n}) }}\">\n```\n\n----------------------------------------\n\nTITLE: Implementing Environmental Settings in a PHP Model Class\nDESCRIPTION: This snippet shows how to create a model class with a property that may reference an environment variable, along with a getter method that parses the value at runtime using App::parseEnv().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/environmental-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\helpers\\App;\n\nclass MyModel extends Model\n{\n    /**\n     * @var string the raw secret key (e.g. '$ENV_NAME')\n     */\n    public $secretKey;\n\n    /**\n     * @return string the parsed secret key (e.g. 'XXXXXXXXXXX')\n     */\n    public function getSecretKey(): string\n    {\n        return App::parseEnv($this->secretKey);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Field Type in Craft CMS Plugin\nDESCRIPTION: Example showing how to register a custom field type with Craft's Fields service using an event listener in the plugin's init method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/field-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Fields;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Fields::class,\n            Fields::EVENT_REGISTER_FIELD_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyField::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Plugin Class for Craft CMS\nDESCRIPTION: Template for the main Plugin.php file that serves as the entry point for a Craft plugin. This class extends Craft's base Plugin class and provides an init() method for initialization code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Queue Job Class in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates how to create a queue job class in PHP for Craft CMS. It extends the BaseJob class and implements the execute() method to send an email. The class also includes a defaultDescription() method for providing a fallback description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/queue-jobs.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace modules\\jobs;\n\nuse craft\\mail\\Message;\n\nclass MyJob extends \\craft\\queue\\BaseJob\n{\n    /**\n     * @inheritdoc\n     */\n    public function execute($queue): void\n    {\n        $message = new Message();\n\n        $message->setTo('me@domain.tld');\n        $message->setSubject('Oh Hai');\n        $message->setTextBody('Hello from the queue system! 👋');\n\n        try {\n            \\Craft::$app->getMailer()->send($message);\n        } catch (\\Throwable $e) {\n            // Don't let an exception block the queue\n            \\Craft::warning(\"Something went wrong: {$e->getMessage()}\", __METHOD__);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected function defaultDescription(): string\n    {\n        return \\Craft::t('app', 'Sending a worthless email');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Payment Form with Validation in Twig\nDESCRIPTION: Complete example of a payment form implementation using the payment form model. The form includes fields for credit card details with validation handling, dynamic year/month selectors, and proper CSRF protection. It populates form values from either existing payment form data or cart billing address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/payment-form-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" class=\"form-horizontal\">\n<input type=\"hidden\" name=\"action\" value=\"commerce/payments/pay\"/>\n<input type=\"hidden\" name=\"redirect\" value=\"/commerce/customer/order?number={number}\"/>\n<input type=\"hidden\" name=\"cancelUrl\" value=\"/commerce/checkout/payment\"/>\n{{ getCsrfInput() }}\n\n{% set formValues = {\n  firstName: paymentForm is defined ? paymentForm.firstName : (cart.billingAddress ? cart.billingAddress.firstName : ''),\n  lastName: paymentForm is defined ? paymentForm.lastName : (cart.billingAddress ? cart.billingAddress.lastName : ''),\n  number: paymentForm is defined ? paymentForm.number : '',\n  cvv: paymentForm is defined ? paymentForm.cvv : '',\n  month: paymentForm is defined ? paymentForm.month : 1,\n  year: paymentForm is defined ? paymentForm.year : currentYear,\n} %}\n\n<input type=\"text\" name=\"firstName\" value=\"{{ formValues.firstName }}\">\n{% if paymentForm is defined %}{{ paymentForm.getError('firstName') }}{% endif %}\n\n<input type=\"text\" name=\"lastName\" value=\"{{ formValues.lastName }}\">\n{% if paymentForm is defined %}{{ paymentForm.getError('lastName') }}{% endif %}\n\n<input type=\"text\" name=\"number\" placeholder=\"Card Number\" value=\"{{ formValues.number }}\">\n{% if paymentForm is defined %}{{ paymentForm.getError('number') }}{% endif %}\n\n<select name=\"month\">\n  {% for month in 1..12 %}\n    <option value=\"{{ month }}\" {% if formValues.month == month %}selected{% endif %}>{{ month }}</option>\n  {% endfor %}\n</select>\n{% if paymentForm is defined %}{{ paymentForm.getError('month') }}{% endif %}\n\n<select class=\"required form-control\" name=\"year\">\n  {% for year in currentYear-1..(currentYear + 12) %}\n    <option value=\"{{ year }}\"{% if formValues.year == year %}selected{% endif %}>{{ year }}</option>\n  {% endfor %}\n</select>\n{% if paymentForm is defined %}{{ paymentForm.getError('year') }}{% endif %}\n\n<input type=\"text\" name=\"cvv\" placeholder=\"CVV\" maxlength=\"4\" value=\"{{ formValues.cvv }}\">\n{% if paymentForm is defined %}{{ paymentForm.getError(cvv) }}{% endif %}\n\n<button class=\"button button-primary\" type=\"submit\">Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating User Registration Form with Twig in Craft CMS\nDESCRIPTION: This Twig template creates a user registration form for Craft CMS. It includes fields for username, email, and password, along with CSRF protection and error handling. The form submits to the 'users/saveUser' action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/user-registration-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" accept-charset=\"UTF-8\">\n    {{ getCsrfInput() }}\n    <input type=\"hidden\" name=\"action\" value=\"users/saveUser\">\n    <input type=\"hidden\" name=\"redirect\" value=\"\">\n\n    {% macro errorList(errors) %}\n        {% if errors %}\n            <ul class=\"errors\">\n                {% for error in errors %}\n                    <li>{{ error }}</li>\n                {% endfor %}\n            </ul>\n        {% endif %}\n    {% endmacro %}\n\n    {% from _self import errorList %}\n\n    <h3><label for=\"username\">Username</label></h3>\n    <input id=\"username\" type=\"text\" name=\"username\"\n        {%- if account is defined %} value=\"{{ account.username }}\"{% endif -%}>\n\n    {% if account is defined %}\n        {{ errorList(account.getErrors('username')) }}\n    {% endif %}\n\n    <h3><label for=\"email\">Email</label></h3>\n    <input id=\"email\" type=\"text\" name=\"email\"\n        {%- if account is defined %} value=\"{{ account.email }}\"{% endif %}>\n\n    {% if account is defined %}\n        {{ errorList(account.getErrors('email')) }}\n    {% endif %}\n\n    <h3><label for=\"password\">Password</label></h3>\n    <input id=\"password\" type=\"password\" name=\"password\">\n\n    {% if account is defined %}\n        {{ errorList(account.getErrors('password')) }}\n    {% endif %}\n\n    <input type=\"submit\" value=\"Register\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Breadcrumbs for Element Types in PHP\nDESCRIPTION: Example of implementing the crumbs() method to provide custom breadcrumbs for full-screen control panel views of an element type. The code creates a navigation structure with a disclosure menu for related element types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function crumbs(): array\n{\n    $crumbs = [];\n    $type = $this->getWidgetType();\n\n    // Add root widgets source:\n    $crumbs[] = [\n      'label' => Craft::t('my-plugin', 'Widgets'),\n      'url' => 'widgets',\n    ];\n\n    // Gather other widget types and generate a disclosure-menu-compatible list:\n    $allTypes = Collection::make(Craft::$app->getEntries()->getEditableSections());\n    $typeOptions = $allTypes->map(fn(WidgetType $wt) => [\n        'label' => Craft::t('site', $wt->name),\n        'url' => \"entries/$wt->handle\",\n        // Is this the current type?\n        'selected' => $wt->id === $type->id,\n    ]);\n\n    // Add this widget type's source, with a switcher for other widget type indexes:\n    $crumbs[] = [\n        // Note that we don't need a top-level label or URL—Craft uses the `selected` menu item!\n        'menu' => [\n          'label' => Craft::t('my-plugin', 'Select widget type'),\n          'items' => $typeOptions,\n        ],\n    ];\n\n    return $crumbs;\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a GraphQL Directive in PHP for Craft CMS\nDESCRIPTION: PHP code that demonstrates how to register a custom GraphQL directive in Craft CMS using the registerGqlDirectives event. This is required to make the directive available in the GraphQL API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\directives\\BarTheFoo;\nuse craft\\events\\RegisterGqlDirectivesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_DIRECTIVES,\n    function(RegisterGqlDirectivesEvent $event) {\n        $event->directives[] = BarTheFoo::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Generator - PHP\nDESCRIPTION: Code to register a custom generator class with the Generator system by listening to the RegisterComponentTypesEvent and adding the generator class to the types array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/generator.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\generator\\Command;\nuse mynamespace\\myplugin\\generators\\MyGenerator;\nuse yii\\base\\Event;\n\nEvent::on(\n    Command::class,\n    Command::EVENT_REGISTER_GENERATOR_TYPES,\n    function(RegisterComponentTypesEvent $e) {\n        $e->types[] = MyGenerator::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Read/Write Splitting in Craft CMS (PHP)\nDESCRIPTION: This snippet demonstrates how to set up read/write splitting for the database connection in Craft CMS. It defines read replicas and configures the database component with custom settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'db' => function() {\n            // Get the default component config (using values in `db.php`):\n            $config = App::dbConfig();\n\n            // Define the default config for replica connections:\n            $config['replicaConfig'] = [\n                'username' => App::env('DB_REPLICA_USER'),\n                'password' => App::env('DB_REPLICA_PASSWORD'),\n                'tablePrefix' => App::env('CRAFT_DB_TABLE_PREFIX'),\n                'attributes' => [\n                    // Use a smaller connection timeout\n                    PDO::ATTR_TIMEOUT => 10,\n                ],\n                'charset' => 'utf8',\n            ];\n\n            // Define the replica connections, with unique DSNs:\n            $config['replicas'] = [\n                ['dsn' => App::env('DB_REPLICA_DSN_1')],\n                ['dsn' => App::env('DB_REPLICA_DSN_2')],\n                ['dsn' => App::env('DB_REPLICA_DSN_3')],\n                ['dsn' => App::env('DB_REPLICA_DSN_4')],\n            ];\n\n            // Instantiate and return the configuration object:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Accessible Previous Page Link in Twig\nDESCRIPTION: This snippet shows how to create an accessible previous page link with specific page numbers in the label using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set prevLinkSummary = \"#{pageInfo.currentPage - 1} of #{pageInfo.totalPages}\" %}\n\n{{ tag('a', {\n  text: 'Previous Page',\n  href: pageInfo.getPrevUrl(),\n  aria: {\n    label: \"Previous page (#{prevLinkSummary})\"\n  }\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Redirecting with Flash Messages in Twig\nDESCRIPTION: Shows how to redirect users with a notice message that will be displayed on the next page. This example checks if a user belongs to a members group and redirects with a message if not.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser.isInGroup('members') %}\n  {% redirect \"pricing\" 301 with notice \"You have to be a member to access that!\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Validation Rules to User Elements in PHP\nDESCRIPTION: Example showing how to add additional validation rules to User elements by listening to the EVENT_DEFINE_RULES event. This demonstrates adding a password length requirement.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\User;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    User::class,\n    User::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $e) {\n        // Enforce password minimum length:\n        $e->rules[] = [['newPassword'], 'string', 'min' => 16];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Persisting Cart in Twig\nDESCRIPTION: Demonstrates how to force Commerce to persist a cart for every visitor by passing true to the carts service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart(true) %}\n```\n\n----------------------------------------\n\nTITLE: Expecting Events in Craft CMS Testing (PHP)\nDESCRIPTION: The expectEvent method is used for testing event dispatching in Craft CMS. It allows developers to assert that specific events are triggered during test execution.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nexpectEvent()\n```\n\n----------------------------------------\n\nTITLE: Validating Request in Craft CMS Controller Action\nDESCRIPTION: Example of using a request validation method in a Craft CMS controller action to ensure the request is made from the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/controllers.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\npublic function actionFoo()\n{\n    // This action should only be available to the control panel\n    $this->requireCpRequest();\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Image Transforms in Twig\nDESCRIPTION: This snippet demonstrates how to solve N+1 query problems with image transforms by eager-loading them using the withTransforms parameter. Transform definitions can be either a string handle or a properties hash.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsField\n  .withTransforms([\n    'heroImage',\n    { width: 100, height: 100 }\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Progress Reporting in a Craft CMS Queue Job\nDESCRIPTION: This code snippet shows how to implement progress reporting in a queue job's execute() method. It sends emails to multiple users and updates the job's progress as it goes, with error handling to prevent premature failures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/queue-jobs.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function execute($queue): void\n{\n    $users = \\craft\\elements\\User::find()\n        ->admin(false)\n        ->all();\n    $totalUsers = count($users);\n\n    foreach ($users as $i => $user) {\n        $this->setProgress(\n            $queue,\n            $i / $totalUsers,\n            Craft::t('app', '{step, number} of {total, number}', [\n                'step' => $i + 1,\n                'total' => $totalUsers,\n            ])\n        );\n\n        $message = new Message();\n\n        $message->setTo($user->email);\n        $message->setSubject('Craft Queue Test');\n        $message->setTextBody('Hello from the Craft queue worker! 👋');\n\n        // Swallow exceptions from the mailer:\n        try {\n            Craft::$app->getMailer()->send($message);\n        } catch (\\Throwable $e) {\n            Craft::warning(\"Something went wrong: {$e->getMessage()}\", __METHOD__);\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Nested Sets of Elements in Twig\nDESCRIPTION: This snippet shows how to eager-load nested sets of elements, specifically topics and their thumbnails for news entries, using dot notation in the .with() param.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('news')\n  .with([\n    'topics.thumbnail',\n  ])\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    <h2>{{ post.title }}</h2>\n\n    <ul>\n      {% for topic in post.topics %}\n        {% set icon = topic.thumbnail.one() %}\n\n        <li>\n          <a href=\"{{ topic.url }}\">\n            {% if icon %}\n              {{ icon.getImg() }}\n            {% endif %}\n            <span>{{ topic.title }}</span>\n          </a>\n        </li>\n      {% endfor %}\n    </ul>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Keywords for Custom Searchable Attributes in Craft CMS\nDESCRIPTION: This snippet shows how to handle the EVENT_DEFINE_KEYWORDS event to provide the actual searchable content for a custom attribute 'billingCountry' in Commerce orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\commerce\\elements\\Order;\nuse craft\\events\\DefineAttributeKeywordsEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Order::class,\n    Element::EVENT_DEFINE_KEYWORDS,\n    function(DefineAttributeKeywordsEvent $event) {\n        if ($event->attribute !== 'billingCountry') {\n            return;\n        }\n\n        $billingAddress = $event->sender->getBillingAddress();\n        $country = Craft::$app->getAddresses()\n            ->getCountryRepository()\n            ->get($billingAddress->countryCode);\n\n        $event->keywords = $country->name;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Element Class in PHP for Craft CMS\nDESCRIPTION: Creates a custom 'Product' element type by extending Craft's base Element class. Implements required display name methods and defines custom properties for price and currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements;\n\nuse craft\\base\\Element;\n\nclass Product extends Element\n{\n    /**\n     * @inheritdoc\n     */\n    public static function displayName(): string\n    {\n        return 'Product';\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public static function pluralDisplayName(): string\n    {\n        return 'Products';\n    }\n\n    /**\n     * @var int Price\n     */\n    public $price = 0;\n\n    /**\n     * @var string Currency code\n     */\n    public $currency;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding a Template with Block Overrides in Twig\nDESCRIPTION: Demonstrates how to embed a template and override its content block, providing more flexibility than basic includes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n{% embed '_tip.twig' %}\n  {% block content %}\n    <p>I'm a helpful tip!</p>\n  {% endblock %}\n{% endembed %}\n```\n\n----------------------------------------\n\nTITLE: Basic Related Elements Query in Twig\nDESCRIPTION: Example of querying and displaying related ingredients for a drink recipe using a basic relationship field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/relations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = entry.ingredients.all() %}\n{% if ingredients|length %}\n  <h3>Ingredients</h3>\n\n  <ul>\n      {% for ingredient in ingredients %}\n          <li>{{ ingredient.title }}</li>\n      {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Radio Buttons Field Data in Twig\nDESCRIPTION: Demonstrates how to access and work with radio buttons field data in Twig templates, including checking for selected values and iterating through options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myRadioFieldHandle %}\n\n{{ entry.myRadioFieldHandle }} or {{ entry.myRadioFieldHandle.value }}\n\n{% if entry.myRadioFieldHandle.value %}\n  {# Yep, a value was selected! #}\n{% endif %}\n\n{{ entry.myRadioFieldHandle.label }}\n\n{% for option in entry.myRadioFieldHandle.options %}\n  Label: {{ option.label }}\n  Value: <code>{{ option.value }}</code>\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Legacy Database Connection in Craft CMS\nDESCRIPTION: Example of configuring a secondary database connection for accessing legacy data, including both the component configuration and a sample query using the connection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'legacydb' => [\n            'server' => App::env('LEGACY_DB_SERVER'),\n            // ...\n        ],\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\db\\Query;\n\n$connection = Craft::$app->get('legacydb');\n\n$legacyPosts = (new Query)\n    ->select(['title', 'body', 'post_date'])\n    ->from(['posts'])\n    ->all($connection);\n```\n\n----------------------------------------\n\nTITLE: Querying Entries and Related Assets with Eager-Loading in Twig\nDESCRIPTION: This snippet shows how to use the 'with' parameter to eager-load related assets, significantly reducing the number of queries executed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with(['assetsField'])\n  .all() %}\n\n{% for entry in entries %}\n  {# Get the eager-loaded asset, if there is one #}\n  {% set image = entry.assetsField[0] ?? null %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Unit Test Implementation in Codeception\nDESCRIPTION: Example of a unit test class using Codeception to test the SalaryChecker class methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Codeception\\Test\\Unit;\n\nclass MyTest extends Unit\n{\n    public $salaryChecker;\n\n    /**\n     * This `_before()` hook is run before *every* test. We use it here\n     * to create a new `SalaryChecker()` instance each test can call.\n     */\n    public function _before()\n    {\n        parent::_before();\n\n        $this->salaryChecker = new SalaryChecker();\n    }\n\n    /**\n     * Each `test*` function is executed, and within it we write a test\n     * that calls one of SalaryChecker's methods to make an assertion\n     * about the result that should be returned.\n     *\n     * In this test, `multiply()` should multiply the parameters and\n     * return the result, so we provide `2` and `2` and know the result\n     * should be `4`.\n     */\n    public function testMultiply()\n    {\n        $this->assertSame(\n            4,\n            $this->salaryChecker->multiply(2, 2)\n        );\n    }\n\n    /**\n     * SalaryChecker's `add()` method should add the parameters, so we\n     * can safely assert that `2` and `1` should return `3`.\n     */\n    public function testAdd()\n    {\n        $this->assertSame(\n            3,\n            $this->salaryChecker->add(2, 1)\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Search Index Keywords in PHP\nDESCRIPTION: PHP code snippet demonstrating how to modify search keywords before they are indexed. This example shows how to replace or remove specific words and prevent indexing of certain content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\services\\Search;\nuse craft\\events\\IndexKeywordsEvent;\nuse craft\\helpers\\StringHelper;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_BEFORE_INDEX_KEYWORDS,\n    function(IndexKeywordsEvent $e) {\n        // Element being indexed:\n        $element = $e->element;\n\n        // Current attribute name:\n        $attribute = $e->attribute;\n\n        // Field ID, if indexing a custom field:\n        $fieldId = $e->fieldId;\n\n        // Keywords that will be indexed:\n        $keywords = $e->keywords;\n\n        // Overwrite the keywords (say, to remove common typos)...\n        $e->keywords = StringHelper::replaceAll($e->keywords, ['speling', 'wirds', 'typox'], '', false);\n\n        // ...or outright prevent something from being added to the index:\n        if (StringHelper::contains($e->keywords, 'naughty words', false)) {\n            $e->isValid = false;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Date and Time Formatting Filters\nDESCRIPTION: Comprehensive date and time formatting filters supporting custom formats, locales, and timezone handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date }}\n{{ now|date('n/d/Y') }}\n{{ entry.postDate|datetime }}\n{{ entry.postDate|datetime('short', locale='en-GB') }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft CMS Using Map and Closure in PHP\nDESCRIPTION: Example of configuring Craft CMS using both map and closure styles in separate PHP files for general and console-specific settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// general.php\nreturn [\n    'aliases' => [\n        '@webroot' => dirname(__DIR__) . '/web',\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n// general.console.php\nreturn function(array $config) {\n    $config['aliases']['@web'] = App::env('CLI_WEB_URL');\n\n    return $config;\n};\n```\n\n----------------------------------------\n\nTITLE: Adding a find Method to Custom Element Class in Craft CMS\nDESCRIPTION: Implements the static find method on the element class to return the appropriate element query instance. This enables querying for elements of this custom type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\db\\ElementQueryInterface;\nuse mynamespace\\elements\\db\\ProductQuery;\n\n// ...\n\nclass Product\n{\n    public static function find(): ElementQueryInterface\n    {\n        return new ProductQuery(static::class);\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules in PHP\nDESCRIPTION: Code to register URL rules for a custom edit page in the Craft CMS control panel, using the UrlManager::EVENT_REGISTER_CP_URL_RULES event. This establishes routes for both creating new items and editing existing ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-edit-pages.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['my-plugin/events/new'] = 'my-plugin/events/edit';\n        $event->rules['my-plugin/events/<eventId:\\d+>'] = 'my-plugin/events/edit';\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Matrix Field Content in Twig for Craft CMS\nDESCRIPTION: Shows how to load and display content from a Matrix field in a Craft CMS blog post, handling different block types like text and images.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set topics = entry.postCategories.all() %}\n\n{# Load content blocks: #}\n{% set postContent = entry.postContent.all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"post-content\">\n  {% for contentBlock in postContent %}\n    {# Memoize the block type's handle so we can use it later: #}\n    {% set blockType = contentBlock.type.handle %}\n\n    {# Switch what is displayed based on the `type`: #}\n    {% if blockType == 'text' %}\n      <div class=\"content-block text\">\n        {{ contentBlock.text | md }}\n      </div>\n    {% elseif blockType == 'image' %}\n      {% set image = contentBlock.image.one() %}\n\n      <div class=\"content-block image\">\n        {{ image.getImg() }}\n      </div>\n    {% else %}\n      <div class=\"content-block unsupported\">\n        <p>Unsupported block type: <code>{{ blockType }}</code></p>\n      </div>\n    {% endif %}\n  {% else %}\n    {# `for` tags also support an `else` block for when there's no content! #}\n\n    <div class=\"content-block empty\">\n      <p>This post has no content!</p>\n    </div>\n  {% endfor %}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Relation Field in PHP\nDESCRIPTION: Implementation of a custom relation field type by extending BaseRelationField with required method overrides.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\fields;\n\nuse craft\\fields\\BaseRelationField;\nuse mynamespace\\elements\\Product;\n\nclass Products extends BaseRelationField\n{\n    public static function displayName(): string\n    {\n        return \\Craft::t('plugin-handle', 'Products');\n    }\n\n    public static function elementType(): string\n    {\n        return Product::class;\n    }\n\n    public static function defaultSelectionLabel(): string\n    {\n        return \\Craft::t('plugin-handle', 'Add a product');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Selectize Field with Environmental Values in Twig\nDESCRIPTION: This Twig code demonstrates how to create a selectize field that includes environment variables as options. It's useful for settings with a limited number of valid values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.selectizeField({\n  label: 'Region'|t('my-plugin'),\n  instructions: 'The region this resource is located in.'|t('my-plugin'),\n  id: 'region',\n  name: 'region',\n  options: [\n    { label: 'Asia Pacific (Hong Kong)', value: 'ap-east-1' },\n    { label: 'Europe (Milan)', value: 'eu-south-1' },\n    { label: 'US West (N. California)', value: 'us-west-1' },\n  ],\n  includeEnvVars: true,\n  value: model.region,\n  errors: model.getErrors('region')\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Related Elements in Partial\nDESCRIPTION: Example of using the .eagerly() method to eager-load related elements within an element partial for performance optimization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set headerImage = entry.headerImage.eagerly().one() %}\n\n{% if headerImage %}\n  {{ headerImage.getImg() }}\n{% endif %}\n\n<h3>{{ entry.title }}</h3>\n\n{# ... #}\n```\n\n----------------------------------------\n\nTITLE: Adding Donation to Cart with Custom Amount in Twig\nDESCRIPTION: This snippet demonstrates how to create a form that adds a donation purchasable to the cart with a custom donation amount. The form retrieves the donation element, checks if it's available, and submits the donation amount as a line item option parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/donations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set donation = craft.commerce.donation %}\n{% if donation and donation.isAvailable %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/cart/update-cart') }}\n    {{ redirectInput('shop/cart') }}\n    {{ hiddenInput('purchasableId', donation.id) }}\n    <input type=\"text\"\n      name=\"options[donationAmount]\"\n      value=\"\"\n      placeholder=\"Donation\"\n    >\n    <button type=\"submit\">Donate Now</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Redirecting in Craft CMS Controller Action\nDESCRIPTION: This code shows how to perform a redirect in a Craft CMS controller action. It uses the redirect method to redirect the request to a specified URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    return $this->redirect('bar');\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Statuses for Elements in PHP\nDESCRIPTION: Demonstrates how to implement custom statuses for elements, including defining statuses, getting current status, and handling status conditions in element queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasStatuses(): bool\n{\n    return true;\n}\n```\n\nLANGUAGE: php\nCODE:\n```\npublic static function statuses(): array\n{\n    return [\n        'foo' => ['label' => \\Craft::t('plugin-handle', 'Foo'), 'color' => '27AE60'],\n        'bar' => ['label' => \\Craft::t('plugin-handle', 'Bar'), 'color' => 'F2842D'],\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\npublic function getStatus(): ?string\n{\n    if ($this->fooIsTrue) {\n        return 'foo';\n    }\n\n    return 'bar';\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected function statusCondition(string $status): mixed\n{\n    switch ($status) {\n        case 'foo':\n            return ['foo' => true];\n        case 'bar':\n            return ['bar' => true];\n        default:\n            // Call the base method to handle `enabled` or `disabled`:\n            return parent::statusCondition($status);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using 'and' Operator with relatedTo in Twig\nDESCRIPTION: This snippet shows how to use the 'and' operator in a relatedTo query to find entries related to all specified elements. It retrieves recipes that use all the same proteins as the current recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set proteins = entry.ingredients.foodGroup('protein').all() %}\n\n{% set moreRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(['and'] | merge(proteins))\n  .all() %}\n{# -> Recipes that also use all this recipe's proteins. #}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Login Form Template in Twig\nDESCRIPTION: This snippet demonstrates how to create a custom login form template in Twig for Craft CMS. It includes CSRF protection, action input, and fields for username/email and password.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/login') }}\n\n  <label for=\"login-name\">Username/Email</label>\n  <input type=\"text\" name=\"loginName\" id=\"login-name\">\n\n  <label for=\"password\">Password</label>\n  <input type=\"password\" name=\"password\" id=\"password\">\n\n  <button>Sign in</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Eager Loading for Custom Elements\nDESCRIPTION: Demonstrates how to implement eager loading support for elements with hard-coded relations to other elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\nuse craft\\elements\\User;\nuse craft\\helpers\\ArrayHelper;\n\n// ...\n\npublic static function eagerLoadingMap(array $sourceElements, string $handle)\n{\n    if ($handle === 'author') {\n        // get the source element IDs\n        $sourceElementIds = ArrayHelper::getColumn($sourceElements, 'id');\n\n        $map = (new Query())\n            ->select(['id as source', 'authorId as target'])\n            ->from(['{{%entries}}'])\n            ->where(['and', ['id' => $sourceElementIds], ['not', ['authorId' => null]]])\n            ->all();\n\n        return [\n            'elementType' => User::class,\n            'map' => $map\n        ];\n    }\n\n    return parent::eagerLoadingMap($sourceElements, $handle);\n}\n```\n\n----------------------------------------\n\nTITLE: Lazy Eager Loading Image Transforms in Craft CMS Twig\nDESCRIPTION: This snippet illustrates how to implement lazy eager loading for image transforms within a loop. It applies a custom transform to each post's featured image and uses the 'eagerly()' method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% for post in posts %}\n  {% set image = post.featureImage\n    .withTransforms([\n      { mode: 'fit', width: 1200 },\n    ])\n    .eagerly()\n    .one() %}\n\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Field Type Class in PHP\nDESCRIPTION: Shows the structure of a basic field type class that extends BaseFieldType with essential methods for displaying the field name and input HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    public function getName()\n    {\n        return Craft::t('Ingredient List');\n    }\n\n    public function getInputHtml($name, $value)\n    {\n        return craft()->templates->render(\n            'cocktailrecipes/ingredientlist/input',\n            array(\n                'name' => $name,\n                'value' => $value\n            )\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Saving Single Custom Field Value in PHP\nDESCRIPTION: Demonstrates how to save a single custom field value using direct assignment or helper method in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n// Direct assignment:\n$product->myCustomField = 'foo';\n\n// Via helper method:\n$product->setFieldValue('myCustomField', 'foo');\n\n\\Craft::$app->getElements()->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Service Class in PHP\nDESCRIPTION: Template for creating a new service class that extends Yii's Component class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\services;\n\nuse yii\\base\\Component;\n\nclass Foo extends Component\n{\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Table Field Data in Twig\nDESCRIPTION: Demonstrates how to iterate over rows in a Table field and access column values using their handles in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/table-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>Whiskeys</h3>\n<ul>\n  {% for row in entry.myFieldHandle %}\n    <li>{{ row.whiskey }}: {{ row.description }} ({{ row.proof }} proof, {{ row.proof / 2 }}%)</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Instance in PHP using the Singleton Pattern\nDESCRIPTION: Demonstrates how to get a reference to your main plugin class using the static getInstance() method, which returns the same singleton instance each time, preserving any memoized properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\Plugin as MyPlugin;\n\n$pluginInstance = MyPlugin::getInstance();\n```\n\n----------------------------------------\n\nTITLE: Fetching Element IDs with ids() in Twig\nDESCRIPTION: This snippet demonstrates how to use the ids() method to get a list of element IDs matching the specified criteria in Twig. It retrieves the IDs of entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set entryIds = craft.entries()\n  .section('news')\n  .ids() %}\n```\n\n----------------------------------------\n\nTITLE: Using relatedTo Parameter for Simple Relationships\nDESCRIPTION: This example shows how to use the relatedTo parameter to find recipes related to a specific ingredient (protein).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set protein = entry.ingredients.foodGroup('protein').one() %}\n\n{% set similarRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(protein)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating User Profile Edit Form with Twig in Craft CMS\nDESCRIPTION: HTML form template for editing user profile data including location and bio fields. Uses Craft CMS's users/saveUser action for processing and includes CSRF protection. The form pre-populates with current user data and redirects to the user's profile page after submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/user-profile-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" accept-charset=\"UTF-8\">\n    {{ getCsrfInput() }}\n    <input type=\"hidden\" name=\"action\" value=\"users/saveUser\">\n    <input type=\"hidden\" name=\"redirect\" value=\"users/{{ currentUser.username }}\">\n    <input type=\"hidden\" name=\"userId\" value=\"{{ currentUser.id }}\">\n\n    <label for=\"location\">Location</label>\n    <input type=\"text\" id=\"location\" name=\"fields[location]\" value=\"{{ currentUser.location }}\">\n\n    <label for=\"bio\">Bio</label>\n    <textarea id=\"bio\" name=\"fields[bio]\">{{ currentUser.bio }}</textarea>\n\n    <input type=\"submit\" value=\"Save Profile\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Running Migrations in Atomic Deployment for Craft CMS\nDESCRIPTION: A snippet showing how to run migrations and apply project config changes as part of an atomic deployment process for Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/deploy.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n# ...\n\n# Run migrations and apply project config:\nphp $RELEASE/craft up --interactive=0\n```\n\n----------------------------------------\n\nTITLE: Configuring General Settings in Craft CMS (PHP)\nDESCRIPTION: This code snippet demonstrates how to set up general configuration options for Craft CMS using the GeneralConfig class. It shows how to set default week start day, omit script name in URLs, enable dev mode, allow admin changes, and disallow robots based on environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/general.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\nuse craft\\helpers\\App;\n\nreturn GeneralConfig::create()\n    ->defaultWeekStartDay(1)\n    ->omitScriptNameInUrls()\n    ->devMode(App::env('DEV_MODE') ?? false)\n    ->allowAdminChanges(App::env('ALLOW_ADMIN_CHANGES') ?? false)\n    ->disallowRobots(App::env('DISALLOW_ROBOTS') ?? false)\n```\n\n----------------------------------------\n\nTITLE: Greet Console Controller Implementation in PHP\nDESCRIPTION: Example console controller implementation with custom actions and option handling for a greeting command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace modules\\console\\controllers;\n\nuse craft\\console\\Controller;\nuse craft\\helpers\\Console;\nuse yii\\console\\ExitCode;\n\n/**\n * Greet Controller\n */\nclass GreetController extends Controller\n{\n    public $defaultAction = 'developer';\n\n    /**\n     * @var string|null The name used when referring to the runner.\n     */\n    public ?string $who = null;\n\n    public function options($actionID): array\n    {\n        $options = parent::options($actionID);\n\n        // Always allow a --who flag:\n        $options[] = 'who';\n\n        switch ($actionID) {\n            case 'developer':\n                // Action-specific arguments:\n                // $options[] = '...';\n                break;\n        }\n\n        return $options;\n    }\n\n    /**\n     * Issues a greeting to new Craft developers.\n     */\n    public function actionDeveloper(): int\n    {\n        $who = $this->who ?? 'world';\n\n        $this->stdout(\"Hello, {$who}!\", Console::FG_GREEN);\n\n        return ExitCode::OK;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Attaching a Behavior to Entry Elements in PHP\nDESCRIPTION: Demonstrates how to attach the Post behavior to Entry elements in a plugin's init() method. It uses Yii's Event class to listen for the EVENT_DEFINE_BEHAVIORS event on Entry elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/behaviors.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineBehaviorsEvent;\nuse mynamespace\\myplugin\\behaviors\\Post;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_BEHAVIORS,\n    function(DefineBehaviorsEvent $e) {\n        $section = $e->sender->getSection();\n\n        // Is it relevant to this entry?\n        if ($section->handle !== 'blog') {\n            return;\n        }\n\n        $e->behaviors['post'] = Post::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using EventBehavior to Attach Handlers that Survive Cloning in PHP\nDESCRIPTION: Example of using Craft's EventBehavior to attach event handlers that will survive when an object is cloned. This pattern is useful for ensuring event handlers remain active on cloned objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\behaviors\\EventBehavior;\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\elements\\Entry;\nuse craft\\events\\CancelableEvent;\n\n$query = Entry::find();\n\n$query->attachBehavior('myBehavior', new EventBehavior([\n    ElementQuery::EVENT_AFTER_PREPARE => function(CancelableEvent $event, ElementQuery $query) {\n        // ...\n    },\n], true));\n```\n\n----------------------------------------\n\nTITLE: Using configure() Function in Twig for Object Modification\nDESCRIPTION: The configure() function passes through the behavior of Craft::configure() to modify existing objects rather than creating new instances. It can be used to modify query objects, merge data, or even update model attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Modify an `EntryQuery` object set up by a relational field: #}\n{% set myRelatedEntries = configure(entry.myEntriesField, {\n  section: 'blog'\n}).all() %}\n```\n\n----------------------------------------\n\nTITLE: Content Pagination with Paginate Tag\nDESCRIPTION: Demonstrates how to implement pagination for query results using the paginate tag. Shows basic usage with navigation controls and accessing pagination information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n{% for entry in pageEntries %}\n  <article>\n    <h1>{{ entry.title }}</h1>\n    {{ entry.body }}\n  </article>\n{% endfor %}\n\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Session Info Ajax Request in JavaScript\nDESCRIPTION: Example of making an Ajax request to fetch session information using the Fetch API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfetch('/actions/users/session-info', {\n  headers: {\n    'Accept': 'application/json',\n  },\n})\n.then(response => response.json())\n.then(result => console.log(result));\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Craft CMS Utility Class\nDESCRIPTION: A foundational example of a Craft CMS utility class that implements the required methods. The class defines display name, ID, icon path, and content HTML rendering for a custom utility that will appear in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/utilities.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse Craft;\nuse craft\\base\\Utility;\n\nclass MyUtility extends Utility\n{\n    public static function displayName(): string\n    {\n        return Craft::t('my-plugin', 'My Utility');\n    }\n\n    public static function id(): string\n    {\n        return 'my-utility';\n    }\n\n    public static function iconPath(): ?string\n    {\n        return Craft::getAlias('@my-plugin/icon.svg');\n    }\n\n    public static function contentHtml(): string\n    {\n        $view = Craft::$app->getView();\n\n        // Gather data to pass to the template...\n        $params = [\n            'myOptions' => [\n                // ...\n            ],\n        ];\n\n        return $view->renderTemplate('_my-plugin/utilities/my-utility.twig', $params);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Caching Element Query Results in Twig\nDESCRIPTION: This snippet demonstrates how to cache element query results using the cache() method in Twig. It caches the results of a query for 10 entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .limit(10)\n  .cache()\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Cart Cookie Configuration in Craft CMS\nDESCRIPTION: Shows how to modify cart cookie settings by customizing the cartCookie component in the config/app.php file. The example includes setting custom cookie parameters and changing the cart expiry time to one month.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/configuration.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'plugins' => [\n            'pluginConfigs' => [\n                'commerce' => [\n                    'components' => [\n                        'carts' => [\n                            'cartCookie' => [\n                                // Add custom key-value cookie params\n                            ],\n                            // Set the cart expiry to one month\n                            'cartCookieDuration' => 2629800,\n                        ],\n                    ],\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Searching for Assets by Kind in Craft CMS\nDESCRIPTION: Examples of searching for image assets using the 'kind:image' search query in Twig, GraphQL, and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set images = craft.assets()\n  .search('kind:image')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  images: assets(search: \"kind:image\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\Asset::find()\n    ->search('kind:image')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Ordering Entries by Multiple Criteria in Twig\nDESCRIPTION: Demonstrates sorting entries using multiple criteria - first by primaryFlavorGroup in ascending order, then by flavorIntensity in descending order. This allows for grouping entries by flavor category with most intense flavors first in each group.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set bigFlavors = craft.entries()\n  .section('tasteTests')\n  .orderBy('primaryFlavorGroup ASC, flavorIntensity DESC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Validation for Environmental Settings with PHP\nDESCRIPTION: This snippet shows how to implement validation for environmental settings. It uses EnvAttributeParserBehavior to ensure that validators check the parsed values rather than the raw environment variable references.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\behaviors\\EnvAttributeParserBehavior;\n\nclass MyModel extends Model\n{\n    public function behaviors(): array\n    {\n        return [\n            'parser' => [\n                'class' => EnvAttributeParserBehavior::class,\n                'attributes' => ['secretKey'],\n            ],\n        ];\n    }\n\n    public function rules(): array\n    {\n        return [\n            ['secretKey', 'required'],\n            ['secretKey', 'string', 'length' => 50],\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Services in Twig Templates\nDESCRIPTION: This Twig code example shows how to access plugin services through a global variable registered via the GlobalsInterface. This pattern allows templates to directly call service methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/extending-twig.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ myPlugin.myServiceName.myServiceMethod() }}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin with Composer in Craft CMS\nDESCRIPTION: Command to require a plugin package using Composer. This is the standard way to install a plugin in a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n# require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Creating a Template Function for Custom Elements in Craft CMS\nDESCRIPTION: Adds a craft.products() function to Twig templates by creating a behavior for the CraftVariable. This allows for querying custom elements directly from templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse mynamespace\\elements\\Product;\nuse mynamespace\\elements\\db\\ProductQuery;\nuse Craft;\nuse yii\\base\\Behavior;\n\n/**\n * Adds a `craft.products()` function to the templates (like `craft.entries()`)\n */\nclass CraftVariableBehavior extends Behavior\n{\n    public function products($criteria = null): ProductQuery\n    {\n        $query = Product::find();\n        if ($criteria) {\n            Craft::configure($query, $criteria);\n        }\n        return $query;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Order Number in Twig\nDESCRIPTION: Demonstrates how to output the full 32-character alphanumeric order number hash in a Twig template. This unique identifier is generated when the cart is first created and remains unchanged throughout the order's lifecycle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.number }}\n{# -> 706ffb9c4fa439977908f6a4ad0287af #}\n```\n\n----------------------------------------\n\nTITLE: Implementing Controller Actions for Edit and Save Operations\nDESCRIPTION: PHP controller actions for handling edit page display and form submissions. Includes permission checking, model loading/creation, form data processing, validation handling, and appropriate responses for both normal and AJAX requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-edit-pages.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\models\\Event;\nuse Craft;\nuse craft\\helpers\\DateTimeHelper;\nuse yii\\web\\BadRequestHttpException;\nuse yii\\web\\Response;\n\npublic function actionEdit(?int $eventId = null, ?Event $event = null): Response\n{\n    // Ensure the user has permission to save events\n    $this->requirePermission('edit-events');\n\n    if (!$event) {\n        // Are we editing an existing event?\n        if ($eventId) {\n            $event = MyPlugin::getInstance()->events->getEventById($eventId);\n            if (!$event) {\n                throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n            }\n        } else {\n            // We're creating a new event\n            $event = new Event();\n        }\n    }\n    \n    return $this->renderTemplate('plugin-handle/events/_edit', [\n        'event' => $event,\n    ]);\n}\n\npublic function actionSave(): ?Response\n{\n    // Ensure the user has permission to save events\n    $this->requirePermission('edit-events');\n\n    $eventId = $this->request->getBodyParam('eventId');\n\n    if ($eventId) {\n        $event = MyPlugin::getInstance()->events->getEventById($eventId);\n        if (!$event) {\n            throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n        }\n    } else {\n        $event = new Event();\n    }\n\n    // Populate the event with the form data\n    $event->name = $this->request->getBodyParam('name');\n    $event->startDate = DateTimeHelper::toDateTime($this->request->getBodyParam('startDate'));\n    $event->endDate = DateTimeHelper::toDateTime($this->request->getBodyParam('endDate'));\n\n    // Try to save it\n    if (!MyPlugin::getInstance()->events->saveEvent($event)) {\n        if ($this->request->acceptsJson) {\n            return $this->asJson(['errors' => $event->getErrors()]);\n        }\n\n        $this->setFailFlash(Craft::t('plugin-handle', 'Couldn't save event.'));\n        \n        // Send the event back to the edit action\n        Craft::$app->urlManager->setRouteParams([\n            'event' => $event,\n        ]);\n        return null;\n    }\n\n    if ($this->request->acceptsJson) {\n        return $this->asJson(['success' => true]);\n    }\n\n    $this->setSuccessFlash(Craft::t('plugin-handle', 'Event saved.'));\n    $this->redirectToPostedUrl($event);\n}\n```\n\n----------------------------------------\n\nTITLE: Ordering Entries by Date in Twig\nDESCRIPTION: Example of ordering entries by review date in descending order with a limit of 5 results. The query targets the 'tasteTests' section and returns the most recent taste test entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set latestTastes = craft.entries()\n  .section('tasteTests')\n  .orderBy('reviewDate DESC')\n  .limit(5)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Extending Base Template in Twig\nDESCRIPTION: Demonstrates how to extend a base template, override blocks, and set custom variables for the parent template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_html5.twig\" %}\n\n{% set docTitle = 'Hello World' %}\n\n{% set bodyAttributes = {\n  class: 'hello-world'\n} %}\n\n{% block head %}\n  {{ parent() }}\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/styles.css\">\n{% endblock %}\n\n{% block body %}\n  <h1>Hello world!</h1>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Previous/Next Page Links in Craft CMS\nDESCRIPTION: This code snippet shows how to create simple Previous and Next page links using the pageInfo variable in Craft CMS. It includes conditionals to handle cases where there may not be a previous or next page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Behavior Class for Commerce Products\nDESCRIPTION: This snippet defines a custom Yii behavior class called FinanceableProductBehavior that adds product financing functionality to Commerce products. It includes methods to check if a product is eligible for financing and calculate monthly payment amounts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace\\mypluginhandle\\behaviors;\n\nuse craft\\commerce\\elements\\Product;\nuse yii\\base\\Behavior;\n\nclass FinanceableProductBehavior extends Behavior\n{\n    /** @var Product */\n    public $owner;\n\n    const FINANCE_MINIMUM_ELIGIBLE_PRICE = 500;\n    const FINANCE_MINIMUM_DEPOSIT_PERCENTAGE = 10;\n    const FINANCE_MAXIMUM_DURATION_MONTHS = 24;\n\n    public function isFinanceable()\n    {\n        return $this->owner->defaultPrice >= self::FINANCE_MINIMUM_ELIGIBLE_PRICE;\n    }\n\n\n    public function getFinancePriceFrom()\n    {\n        $price = $this->owner->defaultPrice;\n\n        // take off the deposit\n        $price = $price - ($price / self::FINANCE_MINIMUM_DEPOSIT_PERCENTAGE);\n\n        // split what's left over the remaining months\n        $price = $price / self::FINANCE_MAXIMUM_DURATION_MONTHS;\n\n        return $price;\n    }\n\n    // ...\n\n}\n```\n\n----------------------------------------\n\nTITLE: Saving ProductType and Updating Project Config in PHP\nDESCRIPTION: This snippet shows how to save a ProductType model and update the project config. It handles both new and existing product types, assembles the field layout, and generates a unique identifier for project config storage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_43\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Db;\nuse craft\\web\\Controller;\n\nuse mynamespace\\models\\Product;\nuse mynamespace\\models\\ProductType;\n\nclass SettingsController extends Controller\n{\n    public function actionSaveProductType()\n    {\n        // Load or instantiate a `ProductType` model and apply incoming params...\n\n        if ($isNew) {\n            // Ensure we have a UID for use when updating project config:\n            $productType->uid = StringHelper::UUID();\n        }\n\n        // Gather the incoming field layout:\n        $fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n        $fieldLayout->type = Product::class;\n\n        $productType->setFieldLayout($fieldLayout);\n\n        // (In the process of building the field layout, it gives itself a UID!)\n\n        // From above, let the model generate its own config:\n        $config = $productType->getConfig();\n\n        Craft::$app->getProjectConfig()->set(\"myplugin.productTypes.{$productType->uid}\", $config, \"Updated \\\"{$productType->name}\\\" product type definition.\");\n\n        // Was this the first time we saved this model?\n        if (!$productType->id) {\n            $productType->id = Db::idByUid('{{%plugin_producttypes}}', $productType->uid);\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Field Settings Serialization for Project Config\nDESCRIPTION: Methods to customize how field settings are serialized to project config, including settingsAttributes() to specify which properties should be preserved and getSettings() to control the serialization process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n/**\n * Return a list of properties that include settings that should be preserved in project config:\n */\npublic function settingsAttributes(): array\n\n    // Let Craft determine most, automatically:\n    $names = parent::settingsAttributes();\n\n    // Add an attribute...\n    $names[] = 'someVirtualProperty';\n\n    // ...or remove one:\n    $names = ArrayHelper::withoutValue('someEphemeralProperty');\n\n    return $names;\n}\n\n/**\n * Directly return the array that will be packed into project config:\n */\npublic function getSettings(): array\n{\n    $settings = parent::getSettings();\n\n    // Sections should be stored as UUIDs, not models:\n    $settings['restrictCurrenciesBySectionUsage'] = array_map(fn(Section $s) => $s->uid, $this->_sections);\n\n    return $settings;\n}\n```\n\n----------------------------------------\n\nTITLE: Caching Element Queries in PHP\nDESCRIPTION: This code demonstrates how to cache element query results using the cache() method in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->limit(10)\n    ->cache()\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Migrating registerEmailMessages Hook to Craft 3 PHP\nDESCRIPTION: Demonstrates how to migrate the registerEmailMessages plugin hook from Craft 2 to an event listener in Craft 3 for registering custom email messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterEmailMessagesEvent;\nuse craft\\services\\SystemMessages;\nuse yii\\base\\Event;\n\nEvent::on(\n    SystemMessages::class,\n    SystemMessages::EVENT_REGISTER_MESSAGES,\n    function(RegisterEmailMessagesEvent $event) {\n        $event->messages[] = [\n            'key' => 'my_message_key',\n            'heading' => Craft::t('plugin-handle', 'Email Heading'),\n            'subject' => Craft::t('plugin-handle', 'Email Subject'),\n            'body' => Craft::t('plugin-handle', 'The plain text email body...'),\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Complex Element Fixtures with Custom Fields in Craft CMS\nDESCRIPTION: Example of an advanced fixture data file that creates an entry with custom fields including Matrix fields. It demonstrates how to set field values, specify a field layout, and build complex Matrix block structures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    [\n        // Standard `craft\\elements\\Entry` fields.\n        'authorId' => '1',\n        'sectionId' => '1000',\n        'typeId' => '1000',\n        'title' => 'Theories of matrix',\n\n        // Set a field layout\n        'fieldLayoutType' => 'field_layout_with_matrix_and_normal_fields',\n\n        // Set custom field values\n        'field:myPlainTextFieldHandle' => 'value of text field',\n        'field:myOtherPlainTextFieldHandle' => 'another value',\n\n        // Set custom Matrix field values\n        'field:matrixFirst' => [\n            'new1' => [\n                'type' => 'myBlockType',\n                'fields:mySubfield' => 'Some text'\n            ],\n            'new2' => [\n                'type' => 'myBlockType',\n                'fields:mySubfield' => 'Some text'\n            ],\n        ],\n    ]\n];\n```\n\n----------------------------------------\n\nTITLE: Setting Default Project Config Data in Craft CMS Install Migrations\nDESCRIPTION: Demonstrates how to safely add project config data during plugin installation, ensuring changes aren't duplicated during project config syncs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp()\n{\n    // ...\n\n    // Don't make the same config changes twice\n    if (Craft::$app->projectConfig->get('plugins.my-plugin-handle', true) === null) {\n        // Make the config changes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: CSRF Protection Form Example in Twig\nDESCRIPTION: Demonstrates how to implement CSRF protection in a form for saving entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {# ... #}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating an In-Memory Eager-Loading Map in PHP\nDESCRIPTION: Optimized approach to create an eager-loading map without additional database queries. This example shows how to generate the map directly from already-loaded element data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_33\n\nLANGUAGE: php\nCODE:\n```\n$map = array_map(function($src) {\n    return [\n        'source' => $src->id,\n        'target' => $src->vendorId,\n    ];\n}, $sourceElements);\n```\n\n----------------------------------------\n\nTITLE: Using Twig Tests for Conditional Logic\nDESCRIPTION: Demonstrates how to use the defined test to check if a property exists before displaying it in a definition list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if specs.weight is defined %}\n  <dt>Weight</dt>\n  <dd>{{ specs.weight }}</dd>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining a Custom Post Behavior Class\nDESCRIPTION: Creates a behavior class that adds an author URL method to Entry elements. Extends Yii's base Behavior class and adds a getAuthorUrl() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/behaviors.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\behaviors;\n\nuse craft\\helpers\\UrlHelper;\nuse yii\\base\\Behavior;\n\nclass Post extends Behavior\n{\n    public function getAuthorUrl(): ?string\n    {\n        $author = $this->owner->getAuthor();\n\n        if (!$author) {\n            return null;\n        }\n\n        return UrlHelper::siteUrl(\"authors/{$author->id}\");\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Navigation Menu Creation with Nav Tag\nDESCRIPTION: Shows how to create a hierarchical navigation menu using the nav tag for Structure section entries or Category Groups. Includes support for nested children elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries().section('pages').all() %}\n\n<ul id=\"nav\">\n  {% nav entry in entries %}\n    <li>\n      <a href=\"{{ entry.url }}\">{{ entry.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Using truncate Filter for String Truncation in Twig\nDESCRIPTION: Shows how to use the truncate filter to cut a string to a given length while preserving word boundaries, with options for custom ellipsis and single word handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(10) }}\n{# Output: Hello… #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(10, '...') }}\n{# Output: Hello... #}\n\n{{ 'Hello world'|truncate(10, '') }}\n{# Output: Hello #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(2) }}\n{# Output: H… #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(2, splitSingleWord=false) }}\n{# Output: … #}\n```\n\n----------------------------------------\n\nTITLE: Adding Coupon Code to Cart Form in Twig\nDESCRIPTION: This snippet demonstrates how to create a form for adding a coupon code to the cart using the commerce/cart/update-cart action. It includes CSRF protection, success message, and redirection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/coupon-codes.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Eager Loading in Twig\nDESCRIPTION: This snippet demonstrates how to implement eager loading in Twig templates to reduce the number of database queries. It shows how to eager load related assets for a collection of blog posts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('blog')\n  .with([\n    'featureImage',\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin Control Panel Navigation Item\nDESCRIPTION: Example of customizing a plugin's control panel navigation item by overriding the getCpNavItem() method to add badge counts and subnav items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function getCpNavItem(): ?array\n{\n    $item = parent::getCpNavItem();\n    $item['badgeCount'] = 5;\n    $item['subnav'] = [\n        'foo' => ['label' => 'Foo', 'url' => 'plugin-handle/foo'],\n        'bar' => ['label' => 'Bar', 'url' => 'plugin-handle/bar'],\n        'baz' => ['label' => 'Baz', 'url' => 'plugin-handle/baz'],\n    ];\n    return $item;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Thumbnail URL Generation for Craft CMS Elements\nDESCRIPTION: This method returns the URL to the current element's thumbnail image. It accepts a size parameter and constructs a resource URL based on the element's ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_35\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\UrlHelper;\n\n// ...\n\npublic function getThumbUrl(int $size): ?string\n{\n    return UrlHelper::resourceUrl(\"product-images/{$this->id}/{$size}\");\n}\n```\n\n----------------------------------------\n\nTITLE: Sending JSON Payload in Ajax Request with JavaScript\nDESCRIPTION: This snippet demonstrates how to send a JSON payload in the body of an Ajax request. It includes the necessary Content-Type header and shows how to properly stringify the JSON data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_7\n\nLANGUAGE: javascript\nCODE:\n```\nconst params = {\n  userId: $button.dataset.userId,\n  fullName: prompt('New name:'),\n};\n\nfetch('/actions/users/save-user', {\n  method: 'POST',\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'X-CSRF-Token': $button.dataset.csrfTokenValue,\n    'X-Requested-With': 'XMLHttpRequest',\n  },\n  body: JSON.stringify(params),\n})\n.then(response => response.json())\n.then(result => console.log(result));\n```\n\n----------------------------------------\n\nTITLE: Creating Entry Queries in Twig and PHP\nDESCRIPTION: This snippet shows how to create a new entry query in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new entry query #}\n{% set myEntryQuery = craft.entries() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new entry query\n$myEntryQuery = \\craft\\elements\\Entry::find();\n```\n\n----------------------------------------\n\nTITLE: Returning JSON Response in Craft CMS Controller Action\nDESCRIPTION: This snippet illustrates how to return a JSON response from a Craft CMS controller action. It uses the asJson method to convert an array into a JSON response.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    return $this->asJson([\n        'foo' => true,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Variables with getenv()\nDESCRIPTION: Shows how to retrieve environment variables in Twig templates using the getenv() function. This example accesses a Maps API key from environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{{ getenv('MAPS_API_KEY') }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Cache in PHP\nDESCRIPTION: Example of configuring Craft to use Redis for caching by setting up the cache component with Redis Cache.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\redis\\Cache::class,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n\n                // Full Redis connection details:\n                'redis' => [\n                    'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                    'port' => 6379,\n                    'password' => App::env('REDIS_PASSWORD') ?: null,\n                ],\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Using relatedTo Parameter with 'and' Operator\nDESCRIPTION: This example shows how to use the relatedTo parameter with the 'and' operator to find recipes that use all specified proteins.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set proteins = entry.ingredients.foodGroup('protein').all() %}\n\n{% set moreRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(['and'] | merge(proteins))\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using Behavior Methods in PHP and Twig\nDESCRIPTION: Demonstrates how to use behavior methods in both PHP and Twig templates after attachment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/behaviors.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$url = $entry->getAuthorUrl();\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.getAuthorUrl() }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin with Control Panel Section in PHP\nDESCRIPTION: Example of a plugin class that defines a control panel section by setting the $hasCpSection property, avoiding the need to use the EVENT_REGISTER_CP_NAV_ITEMS event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public bool $hasCpSection = true;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Array and String Manipulation Filters\nDESCRIPTION: Collection of filters for manipulating arrays and strings including camel case conversion, column extraction, and array comparison.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|camel }}\n{% set entryIds = entries|column('id') %}\n{% set authorNames = entries|column(e => e.author.fullName) %}\n```\n\n----------------------------------------\n\nTITLE: Registering a Service Component in a Plugin's init() Method\nDESCRIPTION: Code to register a service as a component of a plugin using the setComponents() method in the plugin's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    $this->setComponents([\n        'foo' => \\mynamespace\\services\\Foo::class,\n    ]);\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing an Interface-Oriented Service Method in Craft CMS\nDESCRIPTION: Example of an interface-oriented service method for saving an ingredient. It includes event triggering, validation, database transaction handling, and calls to the model's beforeSave() and afterSave() methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/services.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function saveIngredient(IngredientInterface $ingredient, $runValidation = true)\n{\n    /** @var Ingredient $ingredient */\n    \n    $isNewIngredient = !$ingredient->id;\n\n    // Fire a 'beforeSaveIngredient' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    if (!$ingredient->beforeSave()) {\n        return false;\n    }\n\n    if ($runValidation && !$ingredient->validate()) {\n        \\Craft::info('Ingredient not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    $transaction = \\Craft::$app->getDb()->beginTransaction();\n    try {\n        // ... Save the ingredient here ...\n\n        $ingredient->afterSave();\n\n        $transaction->commit();\n    } catch (\\Exception $e) {\n        $transaction->rollBack();\n        throw $e;\n    }\n\n    // Fire an 'afterSaveIngredient' event\n    $this->trigger(self::EVENT_AFTER_SAVE_INGREDIENT, new IngredientEvent([\n        'ingredient' => $ingredient,\n        'isNew' => $isNewIngredient,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Reverse Relationships in Twig\nDESCRIPTION: This snippet demonstrates how to handle reverse relationships that cannot be eager-loaded directly. It shows a two-query approach to load poets and their poems, then group the results for display.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{# We can't load these poets *and* their poems in one query: #}\n{% set poets = craft.users()\n  .group('poets')\n  .all() %}\n\n{# This second query takes the list of poets and loads all their poems: #}\n{% set poems = craft.entries()\n  .section('poems')\n  .authorId(poets|column('id'))\n  .all() %}\n\n{# Then, we can group those poems by their author's ID: #}\n{% set poemsByAuthorId = poems|group('authorId') %}\n\n{% for poet in poets %}\n  <article>\n    <h2>Poems by: {{ poet.fullName }}</h2>\n    <ul>\n      {% for poem in poemsByAuthorId[poet.id] ?? [] %}\n        <li>{{ poem.title }}</li>\n      {% endfor %}\n    </ul>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Modifying GraphQL Type Fields in Craft CMS\nDESCRIPTION: This code shows how to modify GraphQL type fields using the TypeManager's defineGqlTypeFields event. It removes 'id' fields and adds an 'authorEmail' field to the EntryInterface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\events\\DefineGqlTypeFields;\nuse craft\\gql\\TypeManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    TypeManager::class,\n    TypeManager::EVENT_DEFINE_GQL_TYPE_FIELDS,\n    function(DefineGqlTypeFieldsEvent $event) {\n        // Remove all ids to enforce use of uids\n        unset($event->fields['id']);\n\n        // Add author email to all entries\n        if ($event->typeName == 'EntryInterface') {\n            $event->fields['authorEmail'] = [\n                'name' => 'authorEmail',\n                'type' => Type::string(),\n                'resolve' => function($source, $arguments, $context, $resolveInfo) {\n                    // Illustrative only; a query per entry would perform poorly\n                    return $source->getAuthor()->email;\n                }\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Entries and Related Assets without Eager-Loading in Twig\nDESCRIPTION: This snippet demonstrates a Twig template that queries news entries and their related feature images without eager-loading, resulting in the N+1 query problem.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('news')\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    {% set image = post.featureImage.one() %}\n\n    {% if image %}\n      {{ image.getImg() }}\n    {% endif %}\n\n    {# ... #}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Controller Action in PHP\nDESCRIPTION: Example of a custom controller action that handles creating a comment for a blog post. It demonstrates how to access the named parameter from the URL and retrieve form data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nnamespace modules\\controllers;\n\nuse craft\\elements\\Entry;\nuse craft\\web\\Controller;\n\nclass BlogController extends Controller\n{\n  /**\n   * Create a comment for the specified blog post ID.\n   * \n   * @param int $postId Blog Post ID defined by route parameters.\n   */\n  public function actionComment(int $postId)\n  {\n    $this->requirePostRequest();\n\n    // Use the ID to look up the entry...\n    $entry = Entry::find()\n      ->section('posts')\n      ->id($postId)\n      ->one();\n\n    // ...and grab the comment content from the request:\n    $comment = Craft::$app->getRequest()->getBodyParam('comment');\n\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database and Cache Components in PHP\nDESCRIPTION: Example of adjusting database configuration based on environment and completely redefining the cache component using closure-based configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    // ...\n    'components' => [\n        // Adjust parts of a component based on the environment:\n        'db' => function() {\n            $config = craft\\helpers\\App::dbConfig();\n\n            if (App::env('HIGH_AVAILABILITY')) {\n                $config['replicaConfig'] = [\n                    // ... Base replica DB configuration\n                ];\n\n                $config['replicas'] = [\n                    // ... unique config for each replica, like hosts or DSNs.\n                ];\n            }\n\n            return Craft::createObject($config);\n        },\n\n        // Completely re-define a component without letting defaults leak in:\n        'cache' => function() {\n            $config = [\n                'class' => yii\\redis\\Cache::class,\n                'redis' => [\n                    // ... Redis connection configuration\n                ],\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Customizing Table Attribute HTML Output in Craft CMS Elements\nDESCRIPTION: This method allows customization of how table attributes are displayed in the element index. It handles specific attributes like price and currency, falling back to parent implementation for others.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\nprotected function tableAttributeHtml(string $attribute): string\n{\n    switch ($attribute) {\n        case 'price':\n            return \\Craft::$app->formatter->asCurrency($this->price, $this->currency);\n\n        case 'currency':\n            return strtoupper($this->currency);\n    }\n\n    return parent::tableAttributeHtml($attribute);\n}\n```\n\n----------------------------------------\n\nTITLE: Nested Environment Variables in .env\nDESCRIPTION: Demonstrates how to use variable interpolation in .env files to reference other environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nBASE_HOSTNAME=\"acmelabs.com\"\nPRIMARY_SITE_URL=\"https://${BASE_HOSTNAME}\"\nGLOBAL_SITE_URL=\"https://global.${BASE_HOSTNAME}\"\n```\n\n----------------------------------------\n\nTITLE: Querying Related Entries via Link Field in Craft CMS using Twig\nDESCRIPTION: This Twig code snippet demonstrates how to query for entries that are related to a given post through a specific link field. It utilizes Craft's relatedTo parameter to find connected entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set backlinks = craft.entries()\n  .relatedTo({\n    targetElement: post,\n    field: 'myLinkField',\n  })\n  .all() %}\n\n{# -> Returns other entries connected to the given `post` via a specific link field. #}\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Entries Query in PHP\nDESCRIPTION: Shows how to add parameters to the related entries query to filter results in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$relatedEntries = $entry->myFieldHandle\n    ->section('news')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Registering Element Type with Craft Events System\nDESCRIPTION: Demonstrates how to register a custom element type using Craft's event system within a plugin or module's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\elements\\Product;\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Elements;\nuse yii\\base\\Event;\n\nEvent::on(\n    Elements::class,\n    Elements::EVENT_REGISTER_ELEMENT_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = Product::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Element Query Class\nDESCRIPTION: Defines a custom element query class for Products with criteria parameters and query building logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements\\db;\n\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\helpers\\Db;\n\nclass ProductQuery extends ElementQuery\n{\n    public $price;\n    public $currency;\n\n    public function price($value): self\n    {\n        $this->price = $value;\n\n        return $this;\n    }\n\n    public function currency($value): self\n    {\n        $this->currency = $value;\n\n        return $this;\n    }\n\n    protected function beforePrepare(): bool\n    {\n        // JOIN our `products` table:\n        $this->joinElementTable('products');\n\n        // SELECT the `price` and `currency` columns:\n        $this->query->select([\n            'products.price',\n            'products.currency',\n        ]);\n\n        if ($this->price) {\n            $this->subQuery->andWhere(Db::parseParam('products.price', $this->price));\n        }\n\n        if ($this->currency) {\n            $this->subQuery->andWhere(Db::parseParam('products.currency', $this->currency));\n        }\n\n        return parent::beforePrepare();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Types in Craft CMS\nDESCRIPTION: This code snippet shows how to register custom GraphQL types in Craft CMS using the registerGqlTypes event. It adds a custom Widget interface to the list of GraphQL types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\events\\RegisterGqlTypesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_TYPES,\n    function(RegisterGqlTypesEvent $event) {\n        $event->types[] = WidgetInterface::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Saving Field Layouts to Project Config in PHP\nDESCRIPTION: Controller code for saving field layouts to project config instead of directly to the database. This enables field layouts to be tracked in version control and deployed across environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_39\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\ArrayHelper;\nuse craft\\helpers\\StringHelper;\nuse craft\\web\\Controller;\nuse mynamespace\\elements\\Product;\n\n$fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n$fieldLayout->type = Product::class;\n\n$key = 'myplugin.productFieldLayout';\n\nCraft::$app->getProjectConfig()->set($key, $layout->getConfig());\n\nreturn $this->asSuccess(Craft::t('plugin-handle', 'Field layout saved.'), $layout);\n```\n\n----------------------------------------\n\nTITLE: Saving Lightswitch Fields in Twig Forms\nDESCRIPTION: Provides a template for creating a form input to save a Lightswitch field value. The example includes a hidden input for proper field updating and a checkbox input for the Lightswitch.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myLightswitchField]', '') }}\n\n{{ tag('input', {\n  type: 'checkbox',\n  name: 'fields[myLightswitchField]',\n  value: '1',\n  checked: (entry.myLightswitchField ?? false) ? true : false,\n  id: 'my-checkbox-input',\n}) }}\n\n<label for=\"my-checkbox-input\">Opt In</label>\n```\n\n----------------------------------------\n\nTITLE: Accessing Nested JSON Keys in Twig\nDESCRIPTION: Demonstrates how to access nested keys in a JSON field and handle potential missing values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myJsonField.appId ?? null }}\n```\n\n----------------------------------------\n\nTITLE: Creating a Craft CMS Project Directory in Bash\nDESCRIPTION: Commands to create and navigate to a new project directory for a Craft CMS installation. This is the first step in setting up a local Craft development environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir my-craft-project\ncd my-craft-project/\n```\n\n----------------------------------------\n\nTITLE: Custom HTML Email Template with Body Integration in Craft CMS\nDESCRIPTION: A complete HTML email template that serves as a wrapper for email content. This template includes custom styling, logo, header, footer, and demonstrates how to incorporate the processed email body content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/mail.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <style>\n      /* Custom styles! */\n    </style>\n  </head>\n  <body>\n    <div class=\"email-wrapper\">\n      <div class=\"email-header\">\n        <img\n          class=\"email-logo\"\n          src=\"{{ siteUrl('assets/images/email/logo.png') }}\"\n          width=\"140\"\n          alt=\"{{ siteName }}\">\n      </div>\n      <div class=\"email-body\">\n        {{ body }}\n      </div>\n      <div class=\"email-footer\">\n        ©{{ now.format('Y') }}, <a href=\"{{ siteUrl }}\">{{ siteName }}</a>\n      </div>\n    </div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Thumbnail Support for Field Layout Elements in PHP\nDESCRIPTION: Allows a field layout element to be used as an element thumbnail. The thumbHtml method generates the HTML representation of the element data as a thumbnail.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\npublic function thumbable(): bool\n{\n    return true;\n}\n\npublic function thumbHtml(ElementInterface $element, int $size): ?string\n{\n    $value = $element->{$this->attribute()};\n\n    return Html::tag('div', Cp::fallbackIconSvg($value), ['class' => 'cp-icon']);\n}\n```\n\n----------------------------------------\n\nTITLE: Example GraphQL Query with __typename Introspection\nDESCRIPTION: A GraphQL query example that uses the introspection field __typename to determine the type of various objects in the schema, including a custom Widget type. The corresponding JSON response shows the type names returned.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_8\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  __typename\n  entry {\n    __typename\n  }\n  user {\n    __typename\n  }\n  widget {\n    __typename\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Project Config Data during Plugin Installation\nDESCRIPTION: Code for safely adding data to the project config during plugin installation, avoiding overwriting incoming project config changes during a sync operation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp(): bool\n{\n    // ...\n\n    // Don't make the same config changes twice\n    if (Craft::$app->projectConfig->get('plugins.my-plugin-handle', true) === null) {\n        // Make the config changes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Methods in Craft Commerce\nDESCRIPTION: This snippet shows how to register custom shipping methods using the registerAvailableShippingMethods event. It adds a custom MyShippingMethod class to the list of available shipping methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_52\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\ShippingMethods;\nuse yii\\base\\Event;\n\nEvent::on(ShippingMethods::class, ShippingMethods::EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS, function(RegisterComponentTypesEvent $e) {\n    $e->shippingMethods[] = MyShippingMethod::class;\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Input HTML for Custom Field Type\nDESCRIPTION: Implementation of the inputHtml() method to create UI components for field input. This example creates a dropdown for currency selection and a number input for amount.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Cp;\n\nprotected function inputHtml(mixed $value, ?ElementInterface $element, bool $inline): string\n{\n    $id = $this->getInputId();\n\n    $components = [\n        Cp::selectizeHtml([\n            'id' => \"$id-currency\",\n            'describedBy' => $this->describedBy,\n            'name' => \"$this->handle[currency]\",\n            'value' => $value->currency ?? null,\n            'options' => $this->getCurrencyOptions(),\n            'disabled' => $static,\n        ]),\n        Cp::textHtml([\n            'id' => \"$id-amount\",\n            'name' => \"$this->handle[amount]\",\n            'value' => $value->amount ?? null,\n            'type' => 'number',\n            'size' => 10,\n        ]),\n    ];\n\n    return join('', $components);\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Non-Nested Entries with Section Wildcard in Twig\nDESCRIPTION: Example of querying for non-nested entries using the special section wildcard '*' in Twig. This allows searching across all sections without maintaining a specific list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .section('*')\n  .search(terms)\n  .orderBy('score')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Checking Element Existence with exists() Method\nDESCRIPTION: Demonstrates checking if any entries exist that match specified criteria using the exists() method in both Twig and PHP. Returns a boolean value indicating existence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set exists = craft.entries()\n  .section('news')\n  .slug('hello-world')\n  .exists() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$exists = Entry::find()\n    ->section('news')\n    ->slug('hello-world')\n    ->exists();\n```\n\n----------------------------------------\n\nTITLE: Retrieving and Displaying Available Payment Gateways in Twig\nDESCRIPTION: This snippet demonstrates how to fetch all payment gateways enabled for customers, check if any are available, and create a form with a select element for the customer to choose a payment method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/payment-gateways.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set gateways = craft.commerce.gateways.getAllCustomerEnabledGateways %}\n\n{% if not gateways|length %}\n<p>No payment methods available.</p>\n{% endif %}\n\n{% if gateways|length %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('commerce/checkout/payment') }}\n\n  <label for=\"gatewayId\">Payment Method</label>\n  <select name=\"gatewayId\" id=\"gatewayId\">\n    {% for id,name in gateways %}\n      <option value=\"{{ id }}\"{% if id == cart.gatewayId %} selected{% endif %}>\n        {{- name -}}\n      </option>\n    {% endfor %}\n  </select>\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Search in Twig\nDESCRIPTION: Example of querying entries with search terms and ordering by score in Twig. This snippet demonstrates how to search for entries in specific sections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .section(['news', 'resources'])\n  .search(terms)\n  .orderBy('score')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using andRelatedTo Parameter for Compound Criteria\nDESCRIPTION: This example shows how to use the andRelatedTo parameter to achieve the same result as the compound criteria query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set regionalDishes = craft.entries()\n  .section('recipes')\n  .relatedTo(origin)\n  .andRelatedTo(proteins)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying News Entries with GraphQL in Craft CMS\nDESCRIPTION: Example GraphQL query for retrieving news entries with formatted date and custom image transformation. Demonstrates querying multiple entries, child entries, and custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_0\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries (section: \"news\", limit: 2, orderBy: \"dateCreated DESC\") {\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n    title\n    children {\n      title\n    }\n    ... on news_article_Entry {\n      shortDescription\n      featuredImage {\n        url @transform (width: 300, immediately: true)\n      }\n    }\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"entries\": [\n      {\n        \"dateCreated\": \"2019-08-21\",\n        \"title\": \"An important news item\",\n        \"children\": [],\n        \"shortDescription\": \"<p>This is how we roll these days.</p>\",\n        \"featuredImage\": [\n          {\n            \"url\": \"/assets/site/_300xAUTO_crop_center-center_none/glasses.jpg\"\n          }\n        ]\n      },\n      {\n        \"dateCreated\": \"2019-07-02\",\n        \"title\": \"Dolorem ea eveniet alias\",\n        \"children\": [\n          {\n            \"title\": \"Child entry\"\n          },\n          {\n            \"title\": \"This is also a child entry\"\n          }\n        ],\n        \"shortDescription\": \"Et omnis explicabo iusto eum nobis. Consequatur debitis architecto est exercitationem vitae velit repellendus. Aut consequatur maiores error ducimus ea et. Rem ipsa asperiores eius quas et omnis. Veniam quasi qui repellendus dignissimos et necessitatibus. Aut a illo tempora.\",\n        \"featuredImage\": []\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating srcset Attribute with getImg() Method in Twig\nDESCRIPTION: This snippet shows a more concise way to generate an img element with a srcset attribute using the getImg() method. It applies a transform and generates multiple image variations in a single line of code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getImg({ width: 300, height: 300 }, ['1.5x', '2x', '3x']) }}\n```\n\n----------------------------------------\n\nTITLE: Initializing Project Config Event Listeners in PHP\nDESCRIPTION: Sets up event listeners in a plugin's init() method to handle product type changes in the project config. Registers handlers for add, update, and remove events using dot notation paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->getProjectConfig()\n        ->onAdd('myplugin.productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onUpdate('myplugin.productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onRemove('myplugin.productTypes.{uid}', [$this->productTypes, 'handleDeletedProductType']);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Element Type for GraphQL in Craft CMS\nDESCRIPTION: This code defines a custom Widget element type for GraphQL, extending Craft's base Element type and implementing a custom interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\gql\\types\\elements;\n\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nclass Widget extends \\craft\\gql\\types\\elements\\Element\n{\n    public function __construct(array $config)\n    {\n        $config['interfaces'] = [\n            WidgetInterface::getType(),\n        ];\n\n        parent::__construct($config);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Native Fields in Craft CMS\nDESCRIPTION: Demonstrates how to register native fields using the EVENT_DEFINE_NATIVE_FIELDS event, including a check for a specific element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineFieldLayoutElementsEvent;\nuse craft\\models\\FieldLayout;\nuse yii\\base\\Event;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_NATIVE_FIELDS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        /** @var FieldLayout $layout */\n        $layout = $event->sender;\n\n        if ($layout->type === MyElementType::class) {\n            $event->fields[] = MyNativeField::class;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Basic Element Search in Craft CMS\nDESCRIPTION: Demonstrates basic search functionality across Twig, GraphQL and PHP implementations to find elements containing 'foo'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment Variables for Craft CMS Database\nDESCRIPTION: Environment variables required for setting up database connections in Craft CMS 5, including driver type, connection details, and security settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/db.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Required variables:\nCRAFT_APP_ID=\nCRAFT_ENVIRONMENT=dev\nCRAFT_SECURITY_KEY=\n\n# Database-specific variables:\nCRAFT_DB_DRIVER=mysql\nCRAFT_DB_SERVER=127.0.0.1\nCRAFT_DB_PORT=3306\nCRAFT_DB_DATABASE=\nCRAFT_DB_USER=root\nCRAFT_DB_PASSWORD=\nCRAFT_DB_SCHEMA=public\nCRAFT_DB_TABLE_PREFIX=\n```\n\n----------------------------------------\n\nTITLE: Handling Widget Edit Action in PHP for Craft CMS\nDESCRIPTION: This PHP function handles both new and existing widget edits. It processes route parameters, retrieves or creates widget instances, and renders the edit template. The function accounts for various scenarios including validation failures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\npublic function actionEdit(?int $id = null, ?Widget $widget = null)\n{\n    $widgets = MyPlugin::getInstance()->getWidgets();\n\n    // Do we have an incoming Widget ID from the route?\n    if ($id !== null) {\n        // Was a Widget model passed back via route params? It should take priority:\n        if ($widget === null) {\n            // Nope, let's look it up:\n            $widget = $widgets->getWidgetById($id);\n\n            if (!$widget) {\n                // Uh oh, they're trying to edit something that doesn't exist!\n                throw new NotFoundHttpException('The requested widget does not exist.');\n            }\n        }\n    } else {\n        // Ok, so we're dealing with a \"new\" Widget… was one passed back via route params?\n        if ($widget === null) {\n            // Still no—let's instantiate a fresh one so we have something to pass to the template:\n            $widget = new Widget();\n        }\n    }\n\n    return $this->renderTemplate('my-plugin/_widgets/edit', [\n        'widget' => $widget,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Multiple Element Sets in Twig (Craft CMS)\nDESCRIPTION: This example demonstrates how to eager-load multiple sets of related elements (assets and matrix blocks) in a single query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'news',\n  with: [\n    'assetsField',\n    'matrixField'\n  ]\n}) %}\n\n{% for entry in entries %}\n  {# Get the eager-loaded asset, if there is one #}\n  {% set image = entry.assetsField[0] ?? null %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n\n  {# Loop through any eager-loaded Matrix blocks #}\n  {% for block in entry.matrixField %}\n    {{ block.textField }}\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Updating Queue Job Progress in PHP for Craft CMS\nDESCRIPTION: This code snippet shows how to update the progress of a queue job in Craft CMS. It uses the setProgress() method to report the job's progress while sending emails to multiple users. The progress is updated with a percentage and a human-friendly label.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/queue-jobs.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function execute($queue): void\n{\n    $users = \\craft\\elements\\User::findAll();\n    $totalUsers = count($users);\n\n    foreach ($users as $i => $user) {\n        $this->setProgress(\n            $queue,\n            $i / $totalUsers,\n            \\Craft::t('app', '{step, number} of {total, number}', [\n                'step' => $i + 1,\n                'total' => $totalUsers,\n            ])\n        );\n\n        $message = new Message();\n\n        $message->setTo($user->email);\n        $message->setSubject('Oh Hai');\n        $message->setTextBody('Hello from the queue system! 👋');\n\n        try {\n            \\Craft::$app->getMailer()->send($message);\n        } catch (\\Throwable $e) {\n            // Don't let an exception block the queue\n            \\Craft::warning(\"Something went wrong: {$e->getMessage()}\", __METHOD__);\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Email Address in Twig Template for Craft CMS\nDESCRIPTION: This snippet demonstrates how to check if a user has an email address and display it as a clickable mailto link in a Craft CMS Twig template. It uses conditional rendering to ensure the email section only appears if an email is present.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/email.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.email %}\n  <h3>Email</h3>\n  <a href=\"mailto:{{ user.email }}\">{{ user.email }}</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Percentages with the percentage Filter in Twig\nDESCRIPTION: Shows how to format decimal values as percentages according to locale preferences.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{{ 0.85|percentage }}\n{# Output: 85% #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'oh hai'|percentage }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Editions in PHP\nDESCRIPTION: Example of how to define multiple editions for a Craft CMS plugin by overriding the editions() method. This establishes the available editions in ascending order using class constants.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-editions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass Plugin extends \\craft\\base\\Plugin;\n{\n    const EDITION_LITE = 'lite';\n    const EDITION_PRO = 'pro';\n\n    public static function editions(): array\n    {\n        return [\n            self::EDITION_LITE,\n            self::EDITION_PRO,\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using QueryBatcher for Batched Jobs in Craft CMS\nDESCRIPTION: This snippet demonstrates how to implement the loadData() method for a batched job by wrapping an Asset element query with QueryBatcher. The explicit ordering by ID helps maintain consistency across batches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/queue-jobs.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\QueryBatcher;\nuse craft\\elements\\Asset;\n\n$query = Asset::find()\n    ->volume('whitepapers')\n    ->orderBy('id ASC');\n\nreturn new QueryBatcher($query);\n```\n\n----------------------------------------\n\nTITLE: Updating and Removing Line Items in Craft Commerce Cart (Twig)\nDESCRIPTION: This snippet demonstrates how to create a form for updating and removing line items from a Craft Commerce cart. It includes fields for quantity, notes, and a checkbox for item removal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n    <input type=\"checkbox\" name=\"lineItems[{{ item.id }}][remove]\" value=\"1\"> Remove item<br>\n  {% endfor %}\n\n  <button>Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Field Layout Changes in PHP\nDESCRIPTION: Implementation of methods to handle project config field layout changes. These methods create, update, or delete field layouts in the database when the corresponding project config changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_41\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\nuse craft\\db\\Table;\nuse craft\\events\\ConfigEvent;\nuse craft\\models\\FieldLayout;\nuse mynamespace\\elements\\Product;\n\npublic function handleChangedProductLayout(ConfigEvent $event)\n{\n    $layout = FieldLayout::createFromConfig($event->newValue);\n\n    // The `type` is not stored in project config:\n    $layout->type = Product::class;\n\n    // Look up and assign the database ID, if it exists:\n    $id = (new Query())\n        ->select(['id'])\n        ->from([Table::FIELDLAYOUTS])\n        ->where(['type' => Product::class])\n        ->scalar();\n\n    // This might be null, but that's OK—just means it's new!\n    $layout->id = $id;\n\n    // Save without validating (validation happened before updating project config)\n    Craft::$app->getFields()->saveLayout($layout, false);\n}\n\npublic function handleDeletedProductLayout(ConfigEvent $event)\n{\n    // There's only one thing to do here—clear any layouts for the element type:\n    Craft::$app->getFields()->deleteLayoutsByType(Product::class);\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching and Displaying a Specific Order in Twig\nDESCRIPTION: Demonstrates how to fetch an order by its number and display information about it, including error handling for non-existent orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested order number from the query string #}\n{% set orderNumber = craft.app.request.getQueryParam('number') %}\n\n{# Create an order query with the 'number' parameter #}\n{% set myOrderQuery = craft.orders()\n  .number(orderNumber) %}\n\n{# Fetch the order #}\n{% set order = myOrderQuery.one() %}\n\n{# Make sure it exists #}\n{% if not order %}\n  {% exit 404 %}\n{% endif %}\n\n{# Display the order #}\n<h1>Order {{ order.getShortNumber() }}</h1>\n<!-- ... ->\n```\n\n----------------------------------------\n\nTITLE: Searching for Image Assets in Craft CMS (Twig, GraphQL, PHP)\nDESCRIPTION: Shows how to search specifically for image assets using the 'kind:image' search query in Twig, GraphQL, and PHP. This demonstrates element-specific attribute searching for Assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set images = craft.assets()\n  .search('kind:image')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  images: assets(search: \"kind:image\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\Asset::find()\n    ->search('kind:image')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Implementing Advanced Query Parameters\nDESCRIPTION: Advanced example of normalizing and implementing a derived query parameter (isAvailable) that doesn't directly map to a database column but creates conditions based on stock values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nclass ProductQuery extends ElementQuery\n{\n    public $stock;\n    public bool $isAvailable;\n\n    // ...\n\n    public function isAvailable(null|bool $value): self\n    {\n        $this->isAvailable = $value;\n\n        return $this;\n    }\n\n    public function beforePrepare(): bool\n    {\n        // ...\n\n        if ($this->isAvailable !== null) {\n            if ($this->isAvailable) {\n                $this->subQuery->andWhere(Db::parseParam('products.stock', '>', 0));\n            } else {\n                $this->subQuery->andWhere(Db::parseParam('products.stock', '<=', 0));\n            }\n        }\n\n        return parent::beforePrepare();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Line Items in Twig\nDESCRIPTION: Demonstrates how to loop through and display information about each line item in the cart, including description, SKU, price, quantity, and subtotal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for item in cart.lineItems %}\n    <li>\n      <h4>{{ item.description }} (<code>{{ item.sku }}</code>)</h4>\n      <p>{{ item.price|commerceCurrency }} &times; {{ item.qty }} &rarr; {{ item.subtotal|commerceCurrency }}</p>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Conditional Field Validation Rules in PHP\nDESCRIPTION: Demonstrates implementing conditional validation rules based on field configuration settings, showing how to handle different validation scenarios for securities vs currencies.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function getElementValidationRules(): array\n{\n    // Set up some default rules that apply to all instances:\n    $rules = [\n        // ...\n    ];\n\n    // Fields that allow allows ISIN (ISO6166) codes for stocks and other securities require special validation:\n    if ($this->useSecurities) {\n        $rules[] = ['validateSymbol'];\n    }\n\n    // Otherwise, just make sure the provided value is among a known list of currencies:\n    if (!$this->useSecurities) {\n        $rules[] = [\n            'in',\n            'range' => $this->getSupportedCurrencySymbols(),\n        ];\n    }\n\n    // Return the final list:\n    return $rules;\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Purchasable Restoration with Unique SKU Validation in PHP\nDESCRIPTION: This code demonstrates how to override the beforeRestore() method to ensure a restored purchasable has a unique SKU. It checks for existing non-trashed purchasables with the same SKU and modifies the SKU if needed to maintain uniqueness across all database tables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/purchasable-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nif (!parent::beforeDelete()) {\n    return false;\n}\n\n$found = (new Query())->select(['[[p.sku]]', '[[e.id]]'])\n    ->from('{{%commerce_purchasables}} p')\n    ->leftJoin(Table::ELEMENTS . ' e', '[[p.id]]=[[e.id]]')\n    ->where(['[[e.dateDeleted]]' => null, '[[p.sku]]' => $this->getSku()])\n    ->andWhere(['not', ['[[e.id]]' => $this->getId()]])\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Database Migration for Soft Delete Support\nDESCRIPTION: Shows how to add a dateDeleted column to new and existing database tables to enable soft delete functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// New table migration\n$this->createTable('{{%mytablename}}', [\n    // other columns...\n    'dateDeleted' => $this->dateTime()->null(),\n]);\n\n// Existing table migration\n$this->addColumn(\n    '{{%mytablename}}',\n    'dateDeleted',\n    $this->dateTime()->null()->after('dateUpdated')\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Parameters on Eager-Loaded Elements in Twig\nDESCRIPTION: This snippet demonstrates how to apply custom parameters to elements being eager-loaded by using an array with the handle and parameter hash. This allows filtering of related elements during the eager-loading process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    ['assetsField', { kind: 'image' }],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Entry with one() Method\nDESCRIPTION: Shows how to retrieve a single entry using the one() method in both Twig and PHP. This is used to fetch a specific entry by its slug from the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries()\n  .section('news')\n  .slug('hello-world')\n  .one() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entry = Entry::find()\n    ->section('news')\n    ->slug('hello-world')\n    ->one();\n```\n\n----------------------------------------\n\nTITLE: Site-Specific URL Rules for Multi-Site Setup\nDESCRIPTION: PHP configuration showing how to create site-specific URL rules by organizing them in subarrays keyed by site handle. Craft automatically determines the site's base URL from the handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  'siteHandle' => [\n    'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n  ],\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Transform Parameters in Twig Templates\nDESCRIPTION: Creating a custom transform by defining a hash with specific parameters in a Twig template. This approach allows for one-off transforms without needing to define them in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set thumb = {\n  mode: 'crop',\n  width: 100,\n  height: 100,\n  quality: 75,\n  position: 'top-center'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Front-end Form with Radio Buttons Field in Twig\nDESCRIPTION: Provides a Twig template fragment for creating a front-end form with a radio buttons field, including support for custom values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myRadioFieldHandle') %}\n{% set currentValue = entry.myRadioFieldHandle.value ?? null %}\n{% set hasCustomValue = currentValue and currentValue not in (field.options|map(o => o.value)) %}\n\n<ul>\n  {% for option in field.options %}\n    {% set selected = currentValue == option.value or not currentValue and option.default %}\n\n    <li>\n      <label>\n        {{ input('radio', 'fields[myRadioFieldHandle]', option.value, {\n          checked: selected,\n        }) }}\n        {{ option.label }}\n      </label>\n    </li>\n  {% endfor %}\n\n  <li>\n    <label>\n      {{ input('radio', 'fields[myRadioFieldHandle]', '', {\n        id: 'myRadioFieldHandleOther',\n        checked: hasCustomValue,\n      }) }}\n      Other:\n      {{ input('text', 'fields[myRadioFieldHandle]', hasCustomValue ? currentValue : null, {\n        disabled: not hasCustomValue,\n        id: 'myRadioFieldHandleCustom',\n      }) }}\n    </label>\n  </li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Registering Project Config Event Listeners in PHP\nDESCRIPTION: Code to register event listeners for project config changes related to field layouts. These listeners will be notified when the field layout configuration changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_40\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getProjectConfig()\n    ->onAdd('myplugin.productFieldLayout', [$this, 'handleChangedProductLayout'])\n    ->onUpdate('myplugin.productFieldLayout', [$this, 'handleChangedProductLayout'])\n    ->onRemove('myplugin.productFieldLayout', [$this, 'handleDeletedProductLayout']);\n```\n\n----------------------------------------\n\nTITLE: Building Console Command Test with Fluid Interface in PHP\nDESCRIPTION: Demonstrates a complete console command test using the fluid interface to specify expected outputs, prompts, and exit code before running the test.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function testSomething()\n{\n    $this->consoleCommand('test-controller/test-action')\n        ->stdOut('This output must be given')\n        ->stdOut('Followed by this one')\n        ->prompt('The user must then input something', 'This will be returned in the controller action (your console command)', 'the $default value')\n        ->exitCode(ExitCode::OK)\n        ->run();\n}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Argument Handlers in PHP for Craft CMS\nDESCRIPTION: This code snippet shows how to register custom GraphQL argument handlers by listening to the defineGqlArgumentHandlers event and adding new handlers to the event's handlers array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\argumenthandlers\\RelatedWidgets;\nuse craft\\gql\\ArgumentManager;\nuse craft\\events\\RegisterGqlArgumentHandlersEvent;\n\nEvent::on(\n    ArgumentManager::class,\n    ArgumentManager::EVENT_DEFINE_GQL_ARGUMENT_HANDLERS,\n    function(RegisterGqlArgumentHandlersEvent $event) {\n        $event->handlers[\"argumentName\"] = RelatedWidgets::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Entry with one() in PHP\nDESCRIPTION: This snippet shows how to use the one() method to fetch a single entry matching specific criteria in PHP. It queries for an entry in the 'news' section with a specific slug.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entry = Entry::find()\n    ->section('news')\n    ->slug('hello-world')\n    ->one();\n```\n\n----------------------------------------\n\nTITLE: Applying Filters and Functions in Twig\nDESCRIPTION: This snippet demonstrates the use of Twig filters and functions. It creates a numbered list from 1 to 10, applying the 'cycle' function to alternate between 'odd' and 'even' classes for list items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/twig-primer.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<h3>Watch me count to ten!</h3>\n<ul>\n  {% for num in range(1, 10) %}\n    <li class=\"{{ cycle(['odd', 'even'], loop.index0) }}\">\n      {{ num }}\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Basic Element Query Without Eager Loading\nDESCRIPTION: Example showing a standard element query that leads to the N+1 query problem when loading related assets for each entry.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .all() %}\n\n{% for entry in entries %}\n  {# Get the related asset, if there is one #}\n  {% set image = entry.assetsField.one() %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Caching Element Query Results in PHP\nDESCRIPTION: This snippet shows how to cache element query results using the cache() method in PHP. It caches the results of a query for 10 entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->limit(10)\n    ->cache()\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Registering URL Rules for Edit Pages in Craft CMS\nDESCRIPTION: This PHP code snippet demonstrates how to register URL rules for new and existing edit pages using Craft's UrlManager event. It sets up routes for creating new events and editing existing ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-edit-pages.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['my-plugin/events/new'] = 'my-plugin/events/edit';\n        $event->rules['my-plugin/events/<eventId:\\d+>'] = 'my-plugin/events/edit';\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Saving Logic in PHP\nDESCRIPTION: Example of saving an element programmatically, including property setting, validation, and response handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\n$product = new Product();\n\n$request = Craft::$app->getRequest();\n\n$product->price = $request->getBodyParam('price');\n$product->currency = $request->getBodyParam('currency');\n$product->enabled = (bool)$request->getBodyParam('enabled');\n\n$product->setFieldValuesFromRequest('fields');\n\nif (!Craft::$app->getElements()->saveElement($product)) {\n    return $this->asModelFailure(\n        $product,\n        Craft::t('my-plugin', 'Product could not be saved.'),\n        'product',\n    );\n}\n\nreturn $this->asModelSuccess(\n    $product,\n    Craft::t('my-plugin', 'Product saved.'),\n    'product',\n    'products/{id}',\n);\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Entries Query in Twig\nDESCRIPTION: Demonstrates how to add parameters to the related entries query to filter results in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedEntries = entry.myFieldHandle\n  .section('news')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database and Cache Components in Craft CMS with PHP\nDESCRIPTION: Example of using closures to modify component configurations. The snippet demonstrates adjusting a database component based on environment settings and completely replacing a cache component with a Redis implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    // ...\n    'components' => [\n        // Adjust parts of a component based on the environment:\n        'db' => function() {\n            $config = craft\\helpers\\App::dbConfig();\n\n            if (App::env('HIGH_AVAILABILITY')) {\n                $config['replicaConfig'] = [\n                    // ... Base replica DB configuration\n                ];\n\n                $config['replicas'] = [\n                    // ... unique config for each replica, like hosts or DSNs.\n                ];\n            }\n\n            return Craft::createObject($config);\n        },\n\n        // Completely re-define a component without letting defaults leak in:\n        'cache' => function() {\n            $config = [\n                'class' => yii\\redis\\Cache::class,\n                'redis' => [\n                    // ... Redis connection configuration\n                ],\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing GraphQL Mutation Resolver in PHP\nDESCRIPTION: Mutation resolver class that handles the actual saving of widget data, including validation and error handling. Extends ElementMutationResolver to handle element-specific operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\mutations;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse craft\\gql\\base\\ElementMutationResolver;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\nuse GraphQL\\Error\\UserError;\nuse Craft;\n\nclass Widget extends ElementMutationResolver\n{\n    protected $immutableAttributes = ['id', 'uid'];\n\n    public function saveWidget($source, array $arguments, $context, ResolveInfo $resolveInfo)\n    {\n        $this->requireSchemaAction('widget', 'edit');\n\n        $elementService = Craft::$app->getElements();\n        $widget = $elementService->createElement(WidgetElement::class);\n        // Have Craft populate the element's content\n        $widget = $this->populateElementWithData($widget, $arguments);\n        // Always set our custom approved field to false for mutations\n        $widget->approved = false;\n        // Save the new element\n        $widget = $this->saveElement($widget);\n\n        if ($widget->hasErrors()) {\n            $validationErrors = [];\n\n            foreach ($widget->getFirstErrors() as $attribute => $errorMessage) {\n                $validationErrors[] = $errorMessage;\n            }\n            \n            // Throw a UserError with validation messages if we can't save\n            throw new UserError(implode(\"\\n\", $validationErrors));\n        }\n\n        // Return the newly-saved element\n        return $elementService->getElementById($widget->id, WidgetElement::class);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing App Component Getters (PHP)\nDESCRIPTION: Shows the correct way to implement app component getter methods in Craft CMS, using the component class as the return type and calling the get() method directly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Entries;\n\n// ...\n\npublic function getEntries(): Entries\n{\n    return $this->get('entries');\n}\n```\n\n----------------------------------------\n\nTITLE: Querying a Private GraphQL Schema in Craft CMS\nDESCRIPTION: Example of sending a GraphQL request to a private schema using cURL. This demonstrates how to include an Authorization header with an Access Token for authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ncurl \\\n  -H \"Authorization: Bearer xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\" \\\n  -H \"Content-Type: application/graphql\" \\\n  -d '{entries{id}}' \\\n  http://my-project.tld/api\n```\n\n----------------------------------------\n\nTITLE: Implementing Payment Source Saving Option in Twig for Craft Commerce\nDESCRIPTION: This code snippet demonstrates how to add a checkbox to a payment form in Craft Commerce, allowing users to save their payment source for future purchases. It checks if the selected gateway supports payment sources before rendering the option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/saving-payment-sources.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.gateway.supportsPaymentSources() %}\n<div class=\"checkbox\">\n  <label>\n    <input type=\"checkbox\" name=\"savePaymentSource\" value=\"1\" />\n    {{ \"Save card for future purchases\"|t }}\n  </label>\n</div>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Control Panel Routes in PHP\nDESCRIPTION: Code that demonstrates how to register custom control panel routes for a plugin using the EVENT_REGISTER_CP_URL_RULES event, allowing redirection of requests to specific controller actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    Event::on(\n        UrlManager::class,\n        UrlManager::EVENT_REGISTER_CP_URL_RULES,\n        function(RegisterUrlRulesEvent $event) {\n            $event->rules['plugin-handle'] = 'plugin-handle/foo/bar';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Compound Relational Criteria Query\nDESCRIPTION: This snippet demonstrates how to combine multiple relational criteria to find recipes from the same region that share at least one protein.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set origin = entry.origin.one() %}\n{% set proteins = entry.ingredients.foodGroup('proteins').all() %}\n\n{% set regionalDishes = craft.entries()\n  .section('recipes')\n  .relatedTo([\n    'and',\n    origin,\n    proteins,\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating User Queries in Twig and PHP\nDESCRIPTION: Example of creating a new user query object in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/users.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new user query #}\n{% set myUserQuery = craft.users() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new user query\n$myUserQuery = \\craft\\elements\\User::find();\n```\n\n----------------------------------------\n\nTITLE: Customizing Product Snapshot Fields in Craft Commerce\nDESCRIPTION: This event handler customizes which fields are included when capturing a product's snapshot data. It shows how to include all custom fields in the product snapshot, though this is not recommended due to the large amount of data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Variant;\nuse craft\\commerce\\events\\CustomizeProductSnapshotFieldsEvent;\n\nEvent::on(Variant::class, Variant::EVENT_BEFORE_CAPTURE_PRODUCT_SNAPSHOT, function(CustomizeProductSnapshotFieldsEvent $e) {\n    $product = $e->product;\n    $fields = $e->fields;\n\n    // Add every custom field to the snapshot (huge amount of data and will increase your DB size) Don't recommend.\n    if (($fieldLayout = $product->getFieldLayout()) !== null) {\n        foreach ($fieldLayout->getFields() as $field) {\n            $fields[] = $field->handle;\n        }\n    }\n\n    $e->fields = $fields;\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Front-end Form with Country Selection in Twig\nDESCRIPTION: Provides an example of a front-end form for saving an entry with a country field, including a dropdown for country selection using the address repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.app.addresses.getCountryRepository().getAll() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n  {{ hiddenInput('canonicalId', entry.id) }}\n\n  {{ input('text', 'title', entry.title) }}\n\n  <select name=\"fields[toCountry]\">\n    {% for country in countries %}\n      {{ tag('option', {\n        text: country.name,\n        value: country.countryCode,\n        selected: country.countryCode == entry.toCountry,\n      }) }}\n    {% endfor %}\n  </select>\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Converting Background Tasks to Jobs in Craft CMS\nDESCRIPTION: Shows how to convert a Craft 2 BaseTask to a Craft 3 BaseJob, illustrating the differences in structure and execution flow between the task system and job queue.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nclass MyTask extends BaseTask\n{\n    public function getDescription()\n    {\n        return 'Default description';\n    }\n\n    public function getTotalSteps()\n    {\n        return 5;\n    }\n\n    public function runStep($step)\n    {\n        // do something...\n        return true;\n    }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\queue\\BaseJob;\n\nclass MyJob extends BaseJob\n{\n    public function execute($queue)\n    {\n        $totalSteps = 5;\n        for ($step = 0; $step < $totalSteps; $step++)\n        {\n            $this->setProgress($queue, $step / $totalSteps);\n            // do something...\n        }\n    }\n\n    protected function defaultDescription()\n    {\n        return 'Default description';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Template Hook in Twig\nDESCRIPTION: This snippet demonstrates how to add a custom hook point in a Twig template, allowing plugins to inject content or modify context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/template-hooks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Give plugins a chance to make changes here #}\n{% hook 'my-custom-hook-name' %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Year Token in Template for Archive Page\nDESCRIPTION: Twig template that fetches posts for a specific year using the dynamic 'year' token from a route. It creates a date range query and displays a list of posts with title, description, and a 'Read More' link.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch posts in the specified `year`: #}\n{% set posts = craft.entries()\n  .section('posts')\n  .postDate([\n    'and',\n    \">= #{year}\",\n    \"< #{year + 1}\",\n  ])\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    <h2>{{ post.title }}</h2>\n    {{ post.description | md }}\n    <a href=\"{{ post.url }}\">{{ 'Read More' | t }}</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Logging Custom Events in Craft CMS\nDESCRIPTION: Examples of logging custom events in a Craft CMS plugin or module. Shows how to use Craft's logging helper methods with custom categories and explicitly passing log levels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// Short form, using a helper function for the `info` level:\nCraft::info('My first log message!', 'custom-module');\n\n// The equivalent call, with an explicit level:\nCraft::getLogger()->log('My first log message!', Logger::LEVEL_INFO, 'custom-module');\n```\n\n----------------------------------------\n\nTITLE: Creating an Asset Thumbnail Gallery in Twig\nDESCRIPTION: Demonstrates how to create a thumbnail gallery of images from a specific volume. This example shows how to query assets from a 'photos' volume, filter by image kind, fetch the results, and then loop through them to create HTML thumbnail list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an asset query with the 'volume' and 'kind' parameters #}\n{% set myAssetQuery = craft.assets()\n  .volume('photos')\n  .kind('image') %}\n\n{# Fetch the assets #}\n{% set images = myAssetQuery.all() %}\n\n{# Display the thumbnail list #}\n<ul>\n  {% for image in images %}\n    <li><img src=\"{{ image.getUrl('thumb') }}\" alt=\"{{ image.title }}\"></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Matrix Block Eager Loading\nDESCRIPTION: Example of eager loading elements related to Matrix blocks using the proper syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.matrixField\n  .with(['blockType:assetsField'])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using Twig Functions in Templates\nDESCRIPTION: Demonstrates the use of Craft's hiddenInput function to generate HTML for a hidden form input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', 100) }}\n{# Output: <input type=\"hidden\" name=\"entryId\" value=\"100\"> #}\n```\n\n----------------------------------------\n\nTITLE: Control Panel Breadcrumb Navigation Implementation\nDESCRIPTION: Example showing how to define breadcrumb navigation for a control panel page using a crumbs array with labels and URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set crumbs = [\n  {\n    label: 'Plugin Name'|t('plugin-handle'),\n    url: url('plugin-handle'),\n  },\n  {\n    label: 'Products'|t('plugin-handle'),\n    url: url('plugin-handle/products'),\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Defining Multiple Column Content Types in Craft CMS Field\nDESCRIPTION: Example of implementing getContentColumnType() for a field that requires multiple database columns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/field-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function getContentColumnType(): array|string\n{\n    return [\n        'comment' => \\yii\\db\\Schema::TYPE_STRING,\n        'date' => \\yii\\db\\Schema::TYPE_DATE,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Using Wildcard Token in Template\nDESCRIPTION: Example showing how a wildcard token (*) in a route is automatically available as a named parameter called 'any' in the template, which can be accessed using the standard Twig variable syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\nIt seems you're looking for `{{ any }}`.\n{# output: It seems you're looking for `some-slug`. #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Connection in config/db.php for Craft CMS\nDESCRIPTION: PHP code snippet demonstrating how to use environment variables to set up database connection settings in the config/db.php file for a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/db-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'driver' => getenv('DB_DRIVER'),\n    'server' => getenv('DB_SERVER'),\n    'port' => getenv('DB_PORT'),\n    'database' => getenv('DB_DATABASE'),\n    'user' => getenv('DB_USER'),\n    'password' => getenv('DB_PASSWORD'),\n    'schema' => getenv('DB_SCHEMA'),\n    'tablePrefix' => getenv('DB_TABLE_PREFIX'),\n];\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript in Twig\nDESCRIPTION: The js tag registers a JavaScript file or code block. It can be used to include external scripts or inline JavaScript code at different positions in the document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a JS file: #}\n{% js \"/assets/js/script.js\" %}\n\n{# Register a JS code block: #}\n{% js %}\n  _gaq.push([\n    \"_trackEvent\",\n    \"Search\",\n    \"{{ searchTerm|e('js') }}\"\n  ]);\n{% endjs %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set myJsFile = \"/assets/js/script.js\" %}\n{% do view.registerJsFile(myJsFile) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.all() %}\n  {% switch block.type %}\n    {% case 'text' %}\n      {{ block.text|md }}\n    {% case 'slideshow' %}\n      {# 1. Include carousel library: #}\n      {% js 'https://cdn.jsdelivr.net/npm/package/file' %}\n\n      {# 2. Initialize this carousel instance: #}\n      {% js %}\n        Carousel.init('#carousel-{{ block.uid | e('js') }}')\n      {% endjs %}\n\n      {# 3. Output carousel markup: #}\n      <div id=\"carousel-{{ block.uid }}\">\n        {% for image in block.images.all() %}\n          {{ image.getImg() }}\n        {% endfor %}\n      </div>\n    {% default %}\n      <p>Unknown block type!</p>\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% js at head %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% js \"/assets/js/script.js\" with {\n  defer: true\n} %}\n```\n\n----------------------------------------\n\nTITLE: Boosting Specific Element Search Scores in Craft CMS\nDESCRIPTION: Example showing how to boost a specific element's search score by directly modifying the scores array in the SearchEvent. This increases a particular element's ranking in search results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Boost a specific element's score by overwriting its value in $e->scores:\n        if (isset($e->scores[12345])) {\n          $e->scores[12345] = $e->scores[12345] + 10000;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Requiring User Permissions in Craft CMS Controllers (PHP)\nDESCRIPTION: This snippet shows how to require a specific user permission in a controller action using the requirePermission() method. If the user doesn't have the required permission, a 403 error will be returned.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/user-permissions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function actionStayUpLate()\n{\n    // Require the `stayUpLate` permission\n    $this->requirePermission('stayUpLate');\n}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin via Composer CLI\nDESCRIPTION: Shows how to install a Craft CMS plugin via Packagist using Composer's require command. This is the standard way for developers to install plugins in their projects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Reactivating Canceled Subscriptions in Craft CMS Commerce\nDESCRIPTION: This Twig template creates a form for reactivating a canceled subscription. It checks if the subscription can be reactivated, assumes the subscription variable is set to an instance of craft\\commerce\\elements\\Subscription, and posts to the commerce/subscriptions/reactivate action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/subscription-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if subscription.canReactivate() %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/reactivate') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n\n    <button class=\"button link\">Reactivate</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Restoring Soft-Deleted Records with Query Command in PHP\nDESCRIPTION: Shows how to restore soft-deleted records using a database command. This uses the restore() method of craft\\db\\Command to directly update records in the database without using Active Record.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->db->createCommand()\n    ->restore('{{%mytablename}}', ['id' => $id])\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Defining a Basic Service Class in PHP\nDESCRIPTION: Template for creating a new service class for a Craft CMS plugin. It defines the namespace, imports the necessary Yii component, and sets up the basic class structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/services.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\services;\n\nuse yii\\base\\Component;\n\nclass Foo extends Component\n{\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Redirects in Craft Controller\nDESCRIPTION: Examples of implementing different types of redirects in controller actions, including basic redirects and handling posted URL parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    return $this->redirect('bar');\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    // Redirect the request based on a 'redirect' param\n    return $this->redirectToPostedUrl();\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    // ...\n\n    // Redirect the request based on a POSTed 'redirect' param,\n    // which can contain entry attribute tokens, such as {id}:\n    return $this->redirectToPostedUrl($entry);\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Data in Craft CMS Migrations\nDESCRIPTION: Example of how to query data in a migration using Yii's Query Builder since craft\\db\\Migration doesn't include a select method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\n\n$result = (new Query())\n    // ...\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Queue Job in PHP for Craft CMS\nDESCRIPTION: This snippet demonstrates how to create a basic queue job class that extends Craft's BaseJob to send an email. It includes the execute method and a default description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/queue-jobs.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace modules\\jobs;\n\nuse Craft;\nuse craft\\mail\\Message;\n\nclass MyJob extends \\craft\\queue\\BaseJob\n{\n    public function execute($queue): void\n    {\n        $message = new Message();\n\n        $message->setTo('to@domain.tld');\n        $message->setSubject('Oh Hai');\n        $message->setTextBody('Hello from the queue system! 👋');\n\n        Craft::$app->getMailer()->send($message);\n    }\n\n    protected function defaultDescription(): string\n    {\n        return Craft::t('app', 'Sending a worthless email');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Hash Maps in Twig\nDESCRIPTION: Demonstrates hash map definition, dynamic key creation, and different ways to access and iterate over hash values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set specs = {\n  length: '108cm',\n  width: '68.6cm',\n  height: '53.3cm',\n  weight: '90kg'\n} %}\n\n{% set myKey = 'weight' %}\n{% set myValue = '90kg' %}\n\n{% set specs = {\n  (myKey): myValue\n} %}\n```\n\n----------------------------------------\n\nTITLE: Counting Elements with count() Method\nDESCRIPTION: Shows how to count elements matching query criteria using the count() method in both Twig and PHP. Returns the total number of entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set count = craft.entries()\n  .section('news')\n  .count() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$count = Entry::find()\n    ->section('news')\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Editing Existing Addresses in Twig\nDESCRIPTION: This snippet demonstrates how to edit an existing address. It includes resolving the address from the URL parameter and rendering the form for editing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{# 1. Resolve the address: #}\n{% set address = address ?? craft.addresses\n  .owner(currentUser)\n  .uid(addressUid)\n  .one() %}\n\n{# 2. Make sure we got something: #}\n{% if not address %}\n  {% exit 404 %}\n{% endif %}\n\n{% block content %}\n  <h1>Edit Address: {{ address.title }}</h1>\n\n  {# 3. Render form: #}\n  {{ include('_account/address-form', {\n    address: address,\n  }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Table Attribute HTML for Element Indexes in PHP\nDESCRIPTION: Illustrates how to override the cell HTML for specific attributes in the Table view by implementing the tableAttributeHtml() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nprotected function tableAttributeHtml(string $attribute): string\n{\n    switch ($attribute) {\n        case 'price':\n            return \\Craft::$app->formatter->asCurrency($this->price, $this->currency);\n\n        case 'currency':\n            return strtoupper($this->currency);\n    }\n\n    return parent::tableAttributeHtml($attribute);\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Settings Response with Template Rendering in Craft CMS\nDESCRIPTION: Overrides the getSettingsResponse() method to render a custom template for the plugin's settings page, giving more control over the layout compared to the default implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse()\n{\n    return \\Craft::$app\n        ->controller\n        ->renderTemplate('my-plugin-handle/settings/template');\n}\n```\n\n----------------------------------------\n\nTITLE: Setting and Using Twig Variables\nDESCRIPTION: Shows how to define variables using the set tag and reference them throughout a template for consistent content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set title = \"About Us\" %}\n{% set docTitle = title ~ \" | ACME, Inc.\" %}\n\n<html>\n  <head>\n    <title>{{ docTitle }}</title>\n  </head>\n  <body>\n    <h1>{{ title }}</h1>\n    <!-- ... -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Adding Validation to Environmental Settings Model in PHP\nDESCRIPTION: This code shows how to add validation rules to an environmental settings model. It uses the EnvAttributeParserBehavior to ensure validators check parsed values instead of raw values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\behaviors\\EnvAttributeParserBehavior;\n\nclass MyModel extends Model\n{\n    public function behaviors(): array\n    {\n        return [\n            'parser' => [\n                'class' => EnvAttributeParserBehavior::class,\n                'attributes' => ['secretKey'],\n            ],\n        ];\n    }\n\n    public function rules(): array\n    {\n        return [\n            ['secretKey', 'required'],\n            ['secretKey', 'string', 'length' => 50],\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring composer.json for a Craft CMS Plugin\nDESCRIPTION: This JSON configuration sets up the basic structure and metadata for a Craft CMS plugin package. It includes package information, dependencies, autoloading, and Craft-specific extras.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"package/name\",\n  \"description\": \"Your plugin's package description\",\n  \"type\": \"craft-plugin\",\n  \"keywords\": [\"some\", \"keywords\", \"here\"],\n  \"license\": \"MIT\",\n  \"authors\": [\n    {\n      \"name\": \"Developer Name\",\n      \"homepage\": \"https://developer-website.tld\"\n    }\n  ],\n  \"support\": {\n    \"email\": \"email@developer-website.tld\",\n    \"issues\": \"https://github.com/developer/repo/issues?state=open\",\n    \"source\": \"https://github.com/developer/repo\",\n    \"docs\": \"https://github.com/developer/repo/blob/master/README.md\"\n  },\n  \"require\": {\n    \"craftcms/cms\": \"^4.11.0\"\n  },\n  \"autoload\": {\n    \"psr-4\": {\n      \"namespace\\\\prefix\\\\\": \"src/\"\n    }\n  },\n  \"extra\": {\n    \"name\": \"Plugin Name\",\n    \"handle\": \"my-plugin-handle\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Element Resolver in PHP for Craft CMS\nDESCRIPTION: Example implementation of a custom ElementResolver class that extends Craft's base resolver. The class handles query preparation for Widget elements, including support for field arguments and permission checking.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\elements;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\helpers\\Gql as GqlHelper;\n\nclass Widget extends \\craft\\gql\\base\\ElementResolver\n{\n    public static function prepareQuery($source, array $arguments, $fieldName = null)\n    {\n        if ($source === null) {\n            // If this is the beginning of a resolver chain, start fresh\n            $query = WidgetElement::find();\n        } else {\n            // If not, get the prepared element query\n            $query = $source->$fieldName;\n        }\n\n        // Return the query if it's preloaded\n        if (is_array($query)) {\n            return $query;\n        }\n\n        foreach ($arguments as $key => $value) {\n            if (method_exists($query, $key)) {\n                $query->$key($value);\n            } elseif (property_exists($query, $key)) {\n                $query->$key = $value;\n            } else {\n                // Catch custom field queries\n                $query->$key($value);\n            }\n        }\n\n        // Don't return anything that's not allowed\n        if (!GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        return $query;\n    }\n```\n\n----------------------------------------\n\nTITLE: Implementing Happy Path in PHP Control Flow\nDESCRIPTION: Shows how to structure code to follow the happy path principle, improving readability and reducing nesting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nif (!$condition) {\n    return false;\n}\n\n// Do stuff\n\nreturn true;\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Categories via Field Handle in Twig and PHP\nDESCRIPTION: Shows how to access related categories using the field handle, returning a category query ready for further refinement.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: String Concatenation and Interpolation in Twig\nDESCRIPTION: Demonstrates two methods for combining strings in Twig: concatenation using the tilde operator and interpolation within double-quoted strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{# Concatenation #}\n{% set greeting = \"Hello, \" ~ currentUser.friendlyName %}\n\n{# Interpolation #}\n{% set greeting = \"Hello, #{currentUser.friendlyName}\" %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Widget Save Action in PHP for Craft CMS\nDESCRIPTION: This PHP function handles saving both new and existing widgets. It processes POST requests, validates widget data, and handles success and failure scenarios. The function uses Craft's model success and failure methods for consistent responses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\npublic function actionSave()\n{\n    $this->requirePostRequest();\n\n    $request = Craft::$app->getRequest();\n    $widgets = MyPlugin::getInstance()->getWidgets();\n\n    // Is the user trying to edit an existing widget?\n    $id = $request->getBodyParam('id');\n\n    if ($id) {\n        // Ok, we've got an ID—let's look it up.\n        $widget = $widgets->getWidgetById($id);\n\n        // Uh oh, it doesn't exist!\n        // (Or maybe you decide they don't have permission to edit it...)\n        if (!$widget) {\n            throw new BadRequestHttpException('Invalid widget ID.');\n        }\n    } else {\n        // Ok, no ID was passed—looks like they want to create a new one:\n        $widget = new Widget();\n    }\n\n    // ...assign, update, and validate properties...\n\n    if (!$widgets->saveWidget($widget)) {\n        // Hand the model back to the original route:\n        return $this->asModelFailure(\n            $widget, // Model, passed back under the key, below...\n            Craft::t('my-plugin', 'Something went wrong!'), // Flash message\n            'widget', // Route param key\n        );\n    }\n\n    return $this->asModelSuccess(\n        $widget, // Model (included in JSON responses)\n        Craft::t('my-plugin', 'Widget saved.'), // Flash message\n        'widget', // Key the model will be under (in JSON responses)\n        'my-plugin/widgets/{id}', // Redirect \"object template\"\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Matrix Blocks by Type in Twig and PHP\nDESCRIPTION: Examples of querying only Matrix blocks of a specific type by using the type parameter on the Matrix block query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.myFieldHandle\n  .type('text')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$blocks = $entry->myFieldHandle\n    ->type('text')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating Subnavigation for Control Panel Sections in PHP\nDESCRIPTION: Example of how to define subnav items for a control panel section. Each subnav item requires a URL and label, with an optional badgeCount for displaying notification badges.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'subnav' => [\n    'foo' => ['label' => 'Foo', 'url' => 'section-url/foo'],\n    'bar' => ['label' => 'Bar', 'url' => 'section-url/bar'],\n\n    // Display a subnav badge count by adding the optional `badgeCount` key:\n    'baz' => ['label' => 'Baz', 'url' => 'section-url/baz', 'badgeCount' => 5],\n],\n```\n\n----------------------------------------\n\nTITLE: Rendering Custom Asset Partial in Twig\nDESCRIPTION: Example of a custom Twig template for rendering an asset element, including conditional logic based on the uploader's permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<figure>\n  {{ asset.getImg() }}\n\n  <figcaption>\n    {{ asset.title }}\n\n    {% if asset.uploader.can('accessCp') %}\n      <a href=\"{{ asset.getCpEditUrl() }}\">Edit</a>\n    {% endif %}\n  </figcaption>\n</figure>\n```\n\n----------------------------------------\n\nTITLE: Manually Loading Global Sets in Twig and PHP\nDESCRIPTION: Shows how to manually load a global set by handle in both Twig and PHP, useful for special situations like email templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/globals.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set companyInfo = craft.app.globals().getSetByHandle('companyInfo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$companyInfo = \\Craft::$app->getGlobals()->getSetByHandle('companyInfo');\n```\n\n----------------------------------------\n\nTITLE: Creating New Addresses in Twig\nDESCRIPTION: This snippet shows how to create a form for adding new addresses. It includes a reusable form partial that can be used for both new and existing addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{% block content %}\n  <h1>New Address</h1>\n\n  {# 1. Render the form #}\n  {{ include('_account/address-form', {\n    address: address ?? create('craft\\\\elements\\\\Address'),\n  }) }}\n{% endblock %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n\n  {# 2. Set the controller action: #}\n  {{ actionInput('users/save-address') }}\n\n  {# 3. Special cases for existing addresses: #}\n  {% if address.id %}\n    {{ hiddenInput('addressId', address.id) }}\n  {% endif %}\n\n  {# 4. Redirection: #}\n  {{ redirectInput('account/addresses/{uid}') }}\n\n  {# 5. Address Fields: #}\n\n  <label for=\"title\">Title</label>\n  <input\n    type=\"text\"\n    name=\"title\"\n    id=\"title\"\n    value=\"{{ address.title }}\">\n\n  <label for=\"addressLine1\">Address Line 1</label>\n  <input\n    type=\"text\"\n    name=\"addressLine1\"\n    id=\"addressLine1\"\n    value=\"{{ address.addressLine1 }}\">\n\n  <label for=\"addressLine2\">Address Line 2</label>\n  <input\n    type=\"text\"\n    name=\"addressLine2\"\n    id=\"addressLine2\"\n    value=\"{{ address.addressLine2 }}\">\n\n  <label for=\"countryCode\">Country</label>\n  <select name=\"countryCode\" id=\"countryCode\">\n    {% for country in craft.app.getAddresses().getCountryRepository().getAll() %}\n      {{ tag('option', {\n        value: country.countryCode,\n        selected: country.countryCode == address.countryCode,\n        text: country.name,\n      }) }}\n    {% endfor %}\n  </select>\n\n  {# ... #}\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating an Embeddable Template with Blocks in Twig\nDESCRIPTION: An enhanced tip component template that uses a content block to allow for more customization when embedded.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  {% block content %}\n    <p>{{ tipText }}</p>\n  {% endblock %}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Caching Template Output in Twig\nDESCRIPTION: The cache tag allows caching a portion of a template to improve performance. It supports parameters for global caching, custom keys, expiration, and conditional caching.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% cache %}\n  {% for block in entry.myMatrixField.all() %}\n    <p>{{ block.text }}</p>\n  {% endfor %}\n{% endcache %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Payment Form for Outstanding Balance in Twig\nDESCRIPTION: This code snippet shows how to create a payment form for paying an outstanding balance on an order. It includes order number, email, and gateway handling, demonstrating the use of the commerce/payments/pay controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set number = '12345' %}\n{% set email = 'email@address.foo' %}\n{% set cart = craft.orders().number(number).one() ?? null %}\n{% set cancelUrl = craft.app.request.getUrl()|hash %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('/shop/customer/order?number={number}&success=true') }}\n  {{ hiddenInput('cancelUrl', cancelUrl) }}\n  {{ hiddenInput('email', email) }}\n  {{ hiddenInput('orderNumber', cart.number) }}\n\n  {% namespace cart.gateway.handle|commercePaymentFormNamespace %}\n    {{ cart.gateway.getPaymentFormHtml({})|raw }}\n  {% endnamespace %}\n\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Payment Form Model Attributes Table\nDESCRIPTION: Markdown table defining the attributes, validation rules, and descriptions for credit card payment form models. Includes details about token handling, customer information, card details, and security features.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/payment-form-models.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Attribute      | Validation                                                     | Description                                                                                                                                                                                                                                                                                                |\n| -------------- | -------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `token`        | not validated                                                  | If a token is found on the payment form, no validation of other fields is performed and the data is ignored.<br><br>The token represents a pre-validated credit card and is provided by a gateway's client-side JavaScript library. One example of this is [Stripe.js](https://stripe.com/docs/stripe-js). |\n| `firstName`    | required                                                       | The first name on the customer's credit card.                                                                                                                                                                                                                                                              |\n| `lastName`     | required                                                       | The last name of the customer's credit card.                                                                                                                                                                                                                                                               |\n| `month`        | required, min: `1`, max: `12`                                  | Integer representing the month of credit card expiry.                                                                                                                                                                                                                                                      |\n| `year`         | required, min: current year, max: current year + 12            | Integer representing the year of credit card expiry.                                                                                                                                                                                                                                                       |\n| `CVV`          | minLength: 3, maxLength: 4                                     | Integer found on the back of the card for security.                                                                                                                                                                                                                                                        |\n| `number`       | [Luhn algorithm](https://en.wikipedia.org/wiki/Luhn_algorithm) | The credit card number itself.                                                                                                                                                                                                                                                                             |\n| `threeDSecure` | not validated                                                  | A flag indicating whether 3D Secure authentication is being performed for the transaction.                                                                                                                                                                                                                 |\n```\n\n----------------------------------------\n\nTITLE: Managing Project Config during Plugin Uninstallation\nDESCRIPTION: Example of how to safely make project config changes when a plugin is being uninstalled, avoiding duplicate changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp(): bool\n{\n    // ...\n}\n\npublic function safeDown(): bool\n{\n    // ...\n\n    // Don't make the same config changes twice\n    if (Craft::$app->projectConfig->get('plugins.my-plugin-handle', true) !== null) {\n        // Make the config changes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom User Permissions in Craft CMS with PHP\nDESCRIPTION: Shows how to register new user permissions in Craft CMS by listening to the EVENT_REGISTER_PERMISSIONS event. This code defines a permission group with associated permissions that will be added to the system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUserPermissionsEvent;\nuse craft\\services\\UserPermissions;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        UserPermissions::class,\n        UserPermissions::EVENT_REGISTER_PERMISSIONS,\n        function(RegisterUserPermissionsEvent $event) {\n            $event->permissions[] = [\n                'heading' => 'Permission Group Name',\n                'permissions' => [\n                    'permissionName' => [\n                        'label' => 'Permission Label',\n                    ],\n                ],\n            ];\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing createSettingsModel Method in Craft Plugin Class\nDESCRIPTION: Adds the createSettingsModel() method to the main plugin class, which returns a new instance of the plugin's settings model. This connects the plugin to its settings model.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    protected function createSettingsModel(): ?Model\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Proper Condition Syntax in PHP for Craft CMS\nDESCRIPTION: This snippet shows the correct way to write conditions in Craft CMS using Yii's declarative condition syntax. It demonstrates how to properly quote table/column names and handle null values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$query->where('foo.thing is null');\n$query->innerJoin('{{%bar}} bar', 'bar.fooId = foo.id');\n\n// Better:\n$query->where(['foo.thing' => null]);\n$query->innerJoin('{{%bar}} bar', '[[bar.fooId]] = [[foo.id]]');\n```\n\n----------------------------------------\n\nTITLE: Class-Oriented Service Method Implementation\nDESCRIPTION: Example of implementing a class-oriented service method with proper event handling and validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic function saveRecipe(Recipe $recipe, $runValidation = true)\n{\n    $isNewRecipe = !$recipe->id;\n\n    // Fire a 'beforeSaveRecipe' event\n    $this->trigger(self::EVENT_BEFORE_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    if ($runValidation && !$recipe->validate()) {\n        \\Craft::info('Recipe not saved due to validation error.', __METHOD__);\n        return false;\n    }\n\n    // ... Save the recipe here ...\n\n    // Fire an 'afterSaveRecipe' event\n    $this->trigger(self::EVENT_AFTER_SAVE_RECIPE, new RecipeEvent([\n        'recipe' => $recipe,\n        'isNew' => $isNewRecipe,\n    ]));\n\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Module in Craft's Application Configuration in PHP\nDESCRIPTION: Configuration code for adding a module to Craft's application configuration. The module is registered in the modules array and bootstrapped for automatic loading on every request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/module-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'modules' => [\n        'foo' => foo\\Module::class,\n    ],\n    'bootstrap' => [\n        'foo',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Form for Controller Action in Twig\nDESCRIPTION: Example of a Twig template that creates a form to submit a comment. It uses the actionInput() function to specify the controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('my-module/blog/comment') }}\n  {{ hiddenInput('postId', entry.id) }}\n\n  <textarea name=\"comment\"></textarea>\n\n  <button>Post Comment</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Radio Button Options\nDESCRIPTION: Examples of looping through all available radio button options to display their properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/radio-buttons-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:    {{ option.label }}\n  Value:    {{ option }} or {{ option.value }}\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // Label:    $option->label\n    // Value:    $option or $option->value\n    // Selected: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Making a Restored Purchasable's SKU Unique in PHP\nDESCRIPTION: Code snippet for updating a purchasable's SKU to be unique during restoration, by appending a suffix and updating all relevant database tables. This ensures SKU uniqueness across all non-trashed purchasables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/purchasable-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif ($found) {\n\n    $this->sku = $this->getSku() . '-1'; // make unique\n\n    // Update variant table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_variants}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n\n    if ($this->isDefault) {\n        Craft::$app->getDb()->createCommand()->update('{{%commerce_products}}',\n            ['defaultSku' => $this->sku],\n            ['id' => $this->productId]\n        )->execute();\n    }\n\n    // Update purchasable table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_purchasables}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Matrix Block in Twig and PHP\nDESCRIPTION: Examples of fetching only the first Matrix block from a field using the one() method and checking if a block was returned before using it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set block = entry.myFieldHandle.one() %}\n{% if block %}\n  {# ... #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$block = $entry->myFieldHandle->one();\nif ($block) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Garbage Collection for Soft Deletes\nDESCRIPTION: Shows how to set up garbage collection for soft-deleted records using Craft's GC service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Gc;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Gc::class,\n        Gc::EVENT_RUN,\n        function() {\n            Craft::$app->gc->hardDelete('{{%mytablename}}');\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Condition Builder HTML\nDESCRIPTION: Example of condition builder HTML generation options showing the available configuration parameters for the getBuilderHtml() method\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/conditions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$condition->getBuilderHtml([\n    'mainTag' => 'form',\n    'id' => 'condition-builder',\n    'sortable' => true,\n    'singleUseTypes' => false,\n    'projectConfigTypes' => false\n])\n```\n\n----------------------------------------\n\nTITLE: Basic Entry Mutation with DateTime Formatting\nDESCRIPTION: Example of a basic mutation for saving a news article entry with title and slug, demonstrating date formatting with the @formatDateTime directive.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_24\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry($title: String, $slug: String) {\n  save_news_article_Entry(title: $title, slug: $slug) {\n    title\n    slug\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"save_news_article_Entry\": {\n      \"title\": \"Craft 3.5 Supports GraphQL Mutations\",\n      \"slug\": \"craft-graphql-mutations\",\n      \"dateCreated\": \"2020-04-18\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multi-instance Support for Field Layout Elements in PHP\nDESCRIPTION: This method determines whether a field layout element can be added to a layout multiple times. UI elements typically support this, while native fields representing element properties typically don't.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function isMultiInstance(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Posts for a Specific Year in Twig\nDESCRIPTION: Example of using a 'year' parameter from a dynamic route to fetch and display posts from a specific year in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('posts')\n  .postDate([\n    'and',\n    \">= #{year}\",\n    \"< #{year + 1}\",\n  ])\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    <h2>{{ post.title }}</h2>\n    {{ post.description | md }}\n    <a href=\"{{ post.url }}\">{{ 'Read More' | t }}</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Modifying HTML Tag Attributes with attr Filter in Twig\nDESCRIPTION: The 'attr' filter modifies HTML tag attributes, allowing addition, modification, and removal of attributes. It handles special cases for 'class' and 'style' attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div>' %}\n{{ tag|attr({\n  class: 'foo'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set svg %}\n  <?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <svg>...</svg>\n{% endset %}\n{{ svg|attr({\n  class: 'icon'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\" disabled>' %}\n{{ tag|attr({\n    disabled: false\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div class=\"foo\" style=\"color: black;\">' %}\n{{ tag|attr({\n  class: 'bar',\n  style: {background: 'red'}\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\">' %}\n{{ tag|attr({\n  type: 'email'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div class=\"foo\">' %}\n{{ tag|attr({class: false})|attr({class: 'bar'}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\">' %}\n{{ tag|attr({\n  type: 'submit',\n  value: 'Register & Subscribe →'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Adding Complexity Values to GraphQL Field Definitions in PHP\nDESCRIPTION: This snippet demonstrates how to add a complexity value to a GraphQL field definition using the Gql::relatedArgumentComplexity() helper method. The example shows how to assign complexity to a 'children' field that will perform eager loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\n// ...\n'children' => [\n    'name' => 'children',\n    'args' => WidgetArguments::getArguments(),\n    'type' => Type::listOf(WidgetInterface::getType()),\n    'description' => 'Widget's children. Accepts same arguments as `widgets` query.',\n    'complexity' => Gql::relatedArgumentComplexity(\n        GqlService::GRAPHQL_COMPLEXITY_EAGER_LOAD\n    ),\n],\n// ...\n```\n\n----------------------------------------\n\nTITLE: Pushing Configuration Changes to Craft CMS Project Config\nDESCRIPTION: This PHP snippet shows how to push configuration changes to the Craft CMS project config. It uses the getConfig() method to ensure that raw, unparsed values are used when updating the project config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$path = \"myPlugin.webhooks.{$webhook->uid}\";\n\nCraft::$app->getProjectConfig()->set($path, $webhook->getConfig());\n```\n\n----------------------------------------\n\nTITLE: Accessing Service Methods in Craft CMS\nDESCRIPTION: Demonstrates how to call a service method from anywhere in the codebase using the plugin instance. It also shows how to call a service method from within the primary plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/services.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nMyPlugin::getInstance()->foo->bar()\n```\n\nLANGUAGE: php\nCODE:\n```\n$this->foo->bar()\n```\n\n----------------------------------------\n\nTITLE: Displaying Recent Products with Twig\nDESCRIPTION: Complete example of creating a product query to fetch recent products of a specific type, limiting the results, and displaying them in a template with title, summary, and links.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a product query with the 'type' and 'limit' parameters #}\n{% set myProductQuery = craft.products()\n  .type('clothing')\n  .limit(10) %}\n\n{# Fetch the products #}\n{% set products = myProductQuery.all() %}\n\n{# Display the products #}\n{% for product in products %}\n  <h2><a href=\"{{ product.url }}\">{{ product.title }}</a></h2>\n  {{ product.summary }}\n  <a href=\"{{ product.url }}\">Learn more</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using the 'object' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'object' test to check if a variable is an object using PHP's is_object() method. Shows examples with an entry object and a string property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry is object ? 'true' : 'false' }}\n{# result: true #}\n\n{{ entry.url is object ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Checkbox Field Values in Craft CMS\nDESCRIPTION: Examples of querying elements based on Checkboxes field values using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option checked #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option checked\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Defining Element Query Conditions in PHP\nDESCRIPTION: This snippet shows how element types can provide custom condition classes by extending ElementCondition and overriding the conditionRuleTypes() method. It also mentions the need for a static createCondition() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/conditions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nclass EntryCondition extends ElementCondition\n{\n    protected function conditionRuleTypes(): array\n    {\n        // Return array of condition rule types\n    }\n}\n\nclass EntryElement extends Element\n{\n    public static function createCondition(): EntryCondition\n    {\n        return new EntryCondition();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Filesystem Type in Craft CMS\nDESCRIPTION: This snippet demonstrates how to register a custom filesystem type with Craft's Fs service. It uses an event listener to add the custom filesystem class to the list of available filesystem types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/filesystem-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Fs;\nuse mynamespace\\fs\\MyFs;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Fs::class,\n            Fs::EVENT_REGISTER_FILESYSTEM_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyFs::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Filesystem Type in Craft CMS\nDESCRIPTION: This snippet demonstrates how to register a custom filesystem type with Craft's Fs service. It uses an event listener on the EVENT_REGISTER_FILESYSTEM_TYPES event to add a custom filesystem class to the list of available types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/filesystem-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Fs;\nuse mynamespace\\fs\\MyFs;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Fs::class,\n            Fs::EVENT_REGISTER_FILESYSTEM_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyFs::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Data URLs from Assets or Files\nDESCRIPTION: The dataUrl() function outputs an asset or file as a base64-encoded data URL, accepting either an Asset object or a file path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{# Asset object `myLogoAsset` #}\n<img src=\"{{ dataUrl(myLogoAsset) }}\" />\n\n{# File path, optionally using an alias #}\n<img src=\"{{ dataUrl('@webroot/images/my-logo-asset.svg') }}\" />\n\n{# Output: <img src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMCIgdmd(...)\" /> #}\n```\n\n----------------------------------------\n\nTITLE: Using relatedTo with Multiple Elements in Twig\nDESCRIPTION: This snippet demonstrates how to find entries related to any of a collection of elements. It finds recipes that share at least one protein ingredient with the current recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Note the use of `.all()`, this time: #}\n{% set proteins = entry.ingredients.foodGroup('protein').all() %}\n\n{% set moreRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(proteins)\n  .all() %}\n{# -> Recipes that share one or more proteins with the current one. #}\n```\n\n----------------------------------------\n\nTITLE: Creating a Form with Action Input in Craft CMS Twig Template\nDESCRIPTION: Example of an HTML form using the actionInput() Twig function to specify the controller action to be called on form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_3\n\nLANGUAGE: Twig\nCODE:\n```\n<form method=\"POST\">\n  {{ csrfInput() }}\n  {{ actionInput('my-plugin/widgets/save') }}\n\n  {# ... #}\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Replacing asErrorJson() with asFailure() in PHP for Craft 4\nDESCRIPTION: Shows how to replace the deprecated asErrorJson() method with the new asFailure() method in Craft 4 controller actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\nreturn $this->asErrorJson('Thing not found.');\n\n// Craft 4\nreturn $this->asFailure('Thing not found.');\n```\n\n----------------------------------------\n\nTITLE: CSRF Input Generation in Twig\nDESCRIPTION: Generates a hidden CSRF token input field required for forms using POST method. Supports optional additional attributes via options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput() }}\n\n{{ csrfInput({\n  id: 'csrf-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Outputting Complete Link Tag via the link Property\nDESCRIPTION: Demonstrates how to render a complete anchor tag using the link property or getLink() method of a link field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# You can access it a property... #}\n{{ entry.myLinkFieldHandle.link }}\n\n{# ... or call the method, directly: }\n{{ entry.myLinkFieldHandle.getLink() }}\n```\n\n----------------------------------------\n\nTITLE: Eager Loading with Custom Parameters\nDESCRIPTION: Shows how to apply custom criteria parameters when eager loading elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    ['assetsField', { kind: 'image' }]\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Numbers with the number Filter in Twig\nDESCRIPTION: Demonstrates number formatting according to the user's preferred language with the 'number' filter, including options for decimal places and formatter options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number }}\n{# Output: 1,000,000 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number(2) }}\n{# Output: 1,000,000.00 #}\n\n{{ 1000000|number(null, { (constant('NumberFormatter::GROUPING_SIZE')): 4 }) }}\n{# Output: 100,0000 #}\n\n{{ (-5)|number(null, {}, { (constant('NumberFormatter::NEGATIVE_PREFIX')): '☹' }) }}\n{# Output: ☹5 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'oh hai'|number }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules\nDESCRIPTION: Shows how to register custom control panel URL rules for plugin routes using the EVENT_REGISTER_CP_URL_RULES event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    Event::on(\n        UrlManager::class,\n        UrlManager::EVENT_REGISTER_CP_URL_RULES,\n        function(RegisterUrlRulesEvent $event) {\n            $event->rules['plugin-handle'] = 'plugin-handle/foo/bar';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Component Map for Service Mocking in PHP\nDESCRIPTION: Example of implementing a component map array that defines how services should be mocked in a testing environment. The map specifies the service class and its access methods/properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/full-mock.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    [Elements::class, ['getElements', 'elements']],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Field Layout Forms in PHP and Twig\nDESCRIPTION: Demonstrates how to generate tab menus and field contents from an element's field layout using both PHP and Twig syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\n$fieldLayout = $myElement->getFieldLayout();\n$form = $fieldLayout->createForm($myElement);\n$tabs = $form->getTabMenu();\n$fieldsHtml = $form->render();\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set fieldLayout = myElement.getFieldLayout() %}\n{% set form = fieldLayout.createForm(myElement) %}\n{% set tabs = form.getTabMenu() %}\n{% set fieldsHtml = form.render() %}\n```\n\n----------------------------------------\n\nTITLE: Adding CSRF Protection to a Form in Twig\nDESCRIPTION: This snippet demonstrates how to add CSRF protection to a form in Twig using the csrfInput() helper function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {# ... #}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining URL Rules in PHP Configuration\nDESCRIPTION: Example of defining URL rules in the config/routes.php file. It shows how to route requests to controller actions or templates, including the use of named parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  // Route blog/archive/YYYY to a controller action\n  'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n\n  // Route blog/archive/YYYY to a template\n  'blog/archive/<year:\\d{4}>' => ['template' => 'blog/_archive'],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Queries with Event Listener\nDESCRIPTION: A PHP event listener that registers custom GraphQL queries by hooking into Craft's registerGqlQueries event. This code merges the custom Widget queries into the existing queries array, making them available in the GraphQL API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlQueriesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\queries\\Widget;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_QUERIES,\n    function(RegisterGqlQueriesEvent $event) {\n        $event->queries = array_merge(\n            $event->queries,\n            Widget::getQueries()\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Module for Console Commands in PHP\nDESCRIPTION: This snippet shows how to set up a custom module class to handle console commands. It defines the root controller namespace for console requests and sets a custom alias.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/commands.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace bar;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace\n        Craft::setAlias('@bar', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'bar\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'bar\\\\controllers';\n        }\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Config in Twig Templates\nDESCRIPTION: Example of accessing custom configuration values in Twig templates and including JavaScript resources.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set publishableKey = craft.app.config.custom.servicePublishableKey %}\n\n{% js \"https://cdn.service.com/client.js?key=#{publishableKey}\" %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Specific Matrix Block IDs in Twig and PHP\nDESCRIPTION: Examples of fetching entries that contain Matrix blocks with specific IDs (100 or 200) using both Twig and PHP approaches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with Matrix block ID 100 or 200 #}\n{% set entries = craft.entries()\n  .myFieldHandle([100, 200])\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a Matrix block\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle([100, 200])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Implementing Project Config Change Handlers in PHP\nDESCRIPTION: Implements handlers for project config changes, including methods to process product type updates and deletions. Handles database operations and fires appropriate events based on config changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\db\\Query;\nuse craft\\events\\ConfigEvent;\nuse craft\\helpers\\Db;\nuse craft\\commerce\\events\\ProductTypeEvent;\n\n// ...\n\npublic function handleChangedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path\n    $uid = $event->tokenMatches[0];\n\n    // Does this product type exist?\n    $id = Db::idByUid('{{%plugin_producttypes}}', $uid);\n    $isNew = empty($id);\n\n    // Insert or update its row, accordingly:\n    if ($isNew) {\n        Db::insert('{{%plugin_producttypes}}', [\n            'name' => $event->newValue['name'],\n            // ...\n            'uid' => $uid,\n        ]);\n    } else {\n        Db::update('{{%plugin_producttypes}}', [\n            'name' => $event->newValue['name'],\n            // ...\n        ], ['id' => $id]);\n    }\n\n    // Fire an 'afterSaveProductType' event?\n    if ($this->hasEventHandlers('afterSaveProductType')) {\n        // Load the product type so we can emit the event with a fully-hydrated model:\n        $productType = $this->getProductTypeByUid($uid);\n\n        $this->trigger('afterSaveProductType', new ProductTypeEvent([\n            'productType' => $productType,\n            'isNew' => $isNew,\n        ]));\n    }\n}\n\npublic function handleDeletedProductType(ConfigEvent $event)\n{\n    // Get the UID that was matched in the config path:\n    $uid = $event->tokenMatches[0];\n\n    // Look up the product type by its UID:\n    $productType = $this->getProductTypeByUid($uid);\n\n    // If that came back empty, we're done—must have already been deleted!\n    if (!$productType) {\n        return;\n    }\n\n    // Fire a 'beforeApplyProductTypeDelete' event:\n    if ($this->hasEventHandlers('beforeApplyProductTypeDelete')) {\n        $this->trigger('beforeApplyProductTypeDelete', new ProductTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n\n    // Delete its row:\n    Db::delete('{{%plugin_producttypes}}', ['id' => $productType->id]);\n\n    // Fire an 'afterDeleteProductType' event?\n    if ($this->hasEventHandlers('afterDeleteProductType')) {\n        $this->trigger('afterDeleteProductType', new ProductTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Environmental Settings in a Model Class with PHP\nDESCRIPTION: This snippet demonstrates how to create a model with an environmental setting property that can reference environment variables. It includes a getter method that parses the raw value using App::parseEnv() at runtime.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\helpers\\App;\n\nclass MyModel extends Model\n{\n    /**\n     * @var string the raw secret key (e.g. '$ENV_NAME')\n     */\n    public $secretKey;\n\n    /**\n     * @return string the parsed secret key (e.g. 'XXXXXXXXXXX')\n     */\n    public function getSecretKey(): string\n    {\n        return App::parseEnv($this->secretKey);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Chaining Multiple Twig Filters\nDESCRIPTION: Demonstrates how to apply multiple filters in sequence to transform content through several processes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set text = \"I **really** love Tom Petty.\" %}\n{{ text|markdown|striptags|upper }}\n{# Output: I REALLY LOVE TOM PETTY. #}\n```\n\n----------------------------------------\n\nTITLE: Creating a Service that Attaches Event Handlers to Element Instances in PHP\nDESCRIPTION: Example of a service class that attaches event handlers to specific element instances. This pattern is used when you need to monitor specific objects as they pass through your extension.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\services;\n\nuse craft\\base\\Element;\nuse craft\\events\\ModelEvent;\nuse yii\\base\\Component;\n\nclass TrackChanges extends Component\n{\n    public function watch(Element $element): void\n    {\n        $element->on(\n            Element::EVENT_AFTER_SAVE,\n            function(ModelEvent $e) {\n                $originalAttributes = $e->data->originalAttributes;\n\n                // Perform some comparison of new/old attributes...\n            },\n            [\n                'originalAttributes' => $element->getAttributes(),\n            ],\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling JSON Responses in Controller Actions (PHP)\nDESCRIPTION: Shows how to properly handle JSON responses in controller actions. Actions should check if the request accepts JSON, not if it's an Ajax request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\nif (\\Craft::$app->getRequest()->getIsAjax()) {\n    return $this->asJson([...]);\n}\n\n// Better:\nif (\\Craft::$app->getRequest()->getAcceptsJson()) {\n    return $this->asJson([...]);\n}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Parameter Translation Usage\nDESCRIPTION: Examples showing how to use dynamic parameter values in translations in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"/contact\">{{ 'Welcome back, {name}'|t(params = {\n  name: currentUser.friendlyName,\n}) }}</a>\n```\n\nLANGUAGE: php\nCODE:\n```\necho Craft::t('site', 'Welcome back, {name}', [\n    'name' => Craft::$app->getUser()->getIdentity()->friendlyName,\n]);\n```\n\n----------------------------------------\n\nTITLE: Fetching Session Info with JavaScript\nDESCRIPTION: This JavaScript snippet shows how to make an Ajax request to fetch session information, including CSRF token, using the Fetch API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nfetch('/actions/users/session-info', {\n  headers: {\n    'Accept': 'application/json',\n  },\n})\n.then(response => response.json())\n.then(result => console.log(result));\n// -> { isGuest: true, timeout: 0, csrfTokenValue: '...' }\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Credit Card Payment Form in Twig\nDESCRIPTION: This snippet demonstrates a more detailed, custom credit card payment form. It includes fields for cardholder name, card number, expiry date, and CVV. The form uses Craft's form macros for consistent styling and error handling. It assumes the existence of a paymentForm variable for managing form data and errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/making-payments.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% import \"_includes/forms\" as forms %}\n<form method=\"post\" class=\"form-horizontal\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/payments/pay\"/>\n  <input type=\"hidden\" name=\"redirect\" value=\"/commerce/customer/order?number={number}\"/>\n  <input type=\"hidden\" name=\"cancelUrl\" value=\"{{ '/commerce/checkout/payment'|hash }}\"/>\n\n  {{ csrfInput() }}\n\n  <fieldset class=\"card-holder\">\n    <legend>{{ 'Card Holder'|t('commerce') }}</legend>\n\n    <div class=\"grid\" data-cols=\"2\">\n      {# Card Holder Name #}\n      <div class=\"item\" data-colspan=\"1\">\n        {{ forms.text({\n          name: 'firstName',\n          maxlength: 70,\n          placeholder: \"First Name\"|t('commerce'),\n          autocomplete: false,\n          class: 'card-holder-first-name'~(paymentForm.getErrors('firstName') ? ' error'),\n          value: paymentForm.firstName,\n          required: true,\n        }) }}\n      </div>\n\n      <div class=\"item\" data-colspan=\"1\">\n        {{ forms.text({\n          name: 'lastName',\n          maxlength: 70,\n          placeholder: \"Last Name\"|t('commerce'),\n          autocomplete: false,\n          class: 'card-holder-last-name'~(paymentForm.getErrors('lastName') ? ' error'),\n          value: paymentForm.lastName,\n          required: true,\n        }) }}\n      </div>\n    </div>\n\n    {% set errors = [] %}\n    {% for attributeKey in ['firstName', 'lastName'] %}\n      {% set errors = errors|merge(paymentForm.getErrors(attributeKey)) %}\n    {% endfor %}\n\n    {{ forms.errorList(errors) }}\n  </fieldset>\n\n  <!-- Card Number -->\n  <fieldset class=\"card-data\">\n    <legend>{{ 'Card'|t('commerce') }}</legend>\n\n    <div class=\"multitext\">\n      <div class=\"multitextrow\">\n        {{ forms.text({\n          name: 'number',\n          maxlength: 19,\n          placeholder: \"Card Number\"|t('commerce'),\n          autocomplete: false,\n          class: 'card-number'~(paymentForm.getErrors('number') ? ' error'),\n          value: paymentForm.number\n        }) }}\n      </div>\n\n      <div class=\"multitextrow\">\n        {{ forms.text({\n          class: 'card-expiry'~(paymentForm.getErrors('month') or paymentForm.getErrors('year') ? ' error'),\n          type: 'tel',\n          name: 'expiry',\n          placeholder: \"MM\"|t('commerce')~' / '~\"YYYY\"|t('commerce'),\n          value: paymentForm.expiry\n        }) }}\n\n        {{ forms.text({\n          type: 'tel',\n          name: 'cvv',\n          placeholder: \"CVV\"|t('commerce'),\n          class: 'card-cvc'~(paymentForm.getErrors('cvv') ? ' error'),\n          value: paymentForm.cvv\n        }) }}\n      </div>\n    </div>\n\n    {% set errors = [] %}\n    {% for attributeKey in ['number', 'month', 'year', 'cvv'] %}\n      {% set errors = errors|merge(paymentForm.getErrors(attributeKey)) %}\n    {% endfor %}\n\n    {{ forms.errorList(errors) }}\n  </fieldset>\n\n  <button class=\"button button-primary\" type=\"submit\">Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using PSR-3 Compatible Logging in Craft CMS\nDESCRIPTION: Example showing how to use PSR-3 compatible logging in Craft CMS with message substitutions and context. This demonstrates both traditional Yii2 logging and the newer PSR-3 approach using the PsrMessage class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse samdark\\log\\PsrMessage;\n\n// Traditional Yii2 Logging:\nCraft::error('Some error…', 'Some category (logged as context.category)');\n\n// PSR-3 Logging, with context and message substitutions:\nCraft::error(new PsrMessage(\n    'Some error, {psr3Replacement}',\n    [\n        'some' => 'context',\n        'to' => ['be', 'serialized'],\n        'psr3Replacement' => 'https://www.php-fig.org/psr/psr-3/'\n    ],\n));\n```\n\n----------------------------------------\n\nTITLE: Querying Transformed Asset Properties via GraphQL\nDESCRIPTION: This GraphQL query demonstrates how to request individual transformed properties of assets using the @transform directive. It retrieves the title, alt text, transformed URL, and original dimensions of assets in the 'images' volume.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_9\n\nLANGUAGE: graphql\nCODE:\n```\nquery Thumbnails {\n  assets(volume: \"images\") {\n    title\n    alt\n    url @transform(width: 640, mode: \"fit\")\n    width\n    height\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Hierarchical URIs for Structure Entries in Twig\nDESCRIPTION: This Twig snippet demonstrates how to create hierarchical URIs for entries in a structure section. It uses the parent entry's URI if available, or defaults to a base path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{parent.uri ?? 'earth'}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-Specific Commerce Configuration in PHP\nDESCRIPTION: Example of how to set up environment-specific Commerce configuration in a commerce.php file. This shows how to override the purgeInactiveCartsDuration setting for development environments while maintaining different configurations for staging and production.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Global settings\n    '*' => [\n        // ...\n    ],\n\n    // Dev environment settings\n    'dev' => [\n        'purgeInactiveCartsDuration' => P1D,\n        // ...\n    ],\n\n    // Staging environment settings\n    'staging' => [\n        // ...\n    ],\n\n    // Production environment settings\n    'production' => [\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Installing a Public Plugin from Packagist\nDESCRIPTION: Commands to install a publicly released plugin from Packagist. Once a plugin is registered on Packagist, it can be installed using standard Composer commands.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Saving Addresses at Checkout in Craft Commerce - Twig Implementation\nDESCRIPTION: Shows how to implement address saving functionality during checkout, allowing customers to save billing and shipping addresses to their address book. Includes checks for existing addresses and user authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {# ... #}\n\n  {% if currentUser %}\n    {% if cart.billingAddressId and not cart.sourceBillingAddressId %} \n      {{ input('checkbox', 'saveBillingAddressOnOrderComplete', 1, { checked: cart.saveBillingAddressOnOrderComplete }) }}\n    {% endif %}\n\n    {% if cart.shippingAddressId and not cart.sourceShippingAddressId %} \n      {{ input('checkbox', 'saveShippingAddressOnOrderComplete', 1, { checked: cart.saveShippingAddressOnOrderComplete }) }}\n    {% endif %}\n  {% endif %}\n\n  <button>Save Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Optimizing Count Queries in Twig\nDESCRIPTION: This snippet compares a slow and optimized way of counting active users in Twig, demonstrating the use of the count() method for better performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{# Slow #}\n{% set totalUsers = craft.users().status('active').all()|length %}\n\n{# Optimized #}\n{% set totalUsers = craft.users().status('active').count() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Login Route in PHP\nDESCRIPTION: This PHP snippet demonstrates how to configure a custom route for the login page in Craft CMS. It maps the login path to a specific template, allowing for decoupling of the route from the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Assuming your `general.php` config sets `loginPath` to `account/sign-in`...\n    'account/sign-in' => ['template' => '_accounts/login'],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Eager Loading Fields in PHP\nDESCRIPTION: Example of registering fields for eager loading in GraphQL queries. Shows how to specify field context and universal field access.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\fields\\Widgets;\nuse craft\\gql\\ElementQueryConditionBuilder;\nuse craft\\events\\RegisterGqlEagerLoadableFields;\nuse yii\\base\\Event;\n\nEvent::on(\n    ElementQueryConditionBuilder::class,\n    ElementQueryConditionBuilder::EVENT_REGISTER_GQL_EAGERLOADABLE_FIELDS,\n    function(RegisterGqlEagerLoadableFields $event) {\n        $event->fieldList['widgets'] = [Widgets::class];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Element Actions for Custom Element Types in PHP\nDESCRIPTION: Method implementation showing how to define custom actions for an element type by returning an array of action classes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineActions(string $source): array\n{\n    return [\n        MyAction::class,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Bulk Operations on Elements with Batched Processing in PHP\nDESCRIPTION: Example showing how to respond to bulk element operations by listening to the Elements::EVENT_AFTER_BULK_OP event. This demonstrates processing affected entries in memory-efficient batches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\nuse craft\\events\\BulkOpEvent;\nuse craft\\helpers\\Db;\nuse craft\\services\\Elements;\nuse yii\\base\\Event;\n\nEvent::on(Elements::class, Elements::EVENT_AFTER_BULK_OP, function(BulkOpEvent $event) {\n    // Fetch the affected entries in batches:\n    $entries = Entry::find()\n        ->inBulkOp($event->key)\n        ->status(null);\n\n    foreach (Db::each($entries) as $entry) {\n        // ...\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Creating Element Collections in Twig\nDESCRIPTION: Shows two equivalent ways to create Element Collections from entry queries in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/collections.md#2025-04-22_snippet_3\n\nLANGUAGE: Twig\nCODE:\n```\n{# These produce the same results: #}\n{% set posts = craft.entries().section('news').collect() %}\n{% set posts = collect(craft.entries().section('news').all()) %}\n```\n\n----------------------------------------\n\nTITLE: Changing Order Status in PHP for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to programmatically change the status of an order in Craft Commerce. It retrieves an order by ID, sets a new status ID and message, then saves the element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/custom-order-statuses.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$order = \\craft\\commerce\\Plugin::getInstance()\n    ->getOrders()\n    ->getOrderById(ID);\n$order->orderStatusId = $orderStatus->id; // new status ID\n$order->message = $message; // new message\n$result = Craft::$app->getElements()->saveElement($order);\n```\n\n----------------------------------------\n\nTITLE: Basic Add to Cart Form Implementation in Twig\nDESCRIPTION: Basic form implementation for adding a product's default variant to the cart. Uses the commerce/cart/update-cart action with basic product information and quantity.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adding-to-and-updating-the-cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products.one() %}\n{% set variant = product.defaultVariant %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Added {{ product.title }} to the cart.\">\n  {{ redirectInput('shop/cart') }}\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n  <input type=\"hidden\" name=\"purchasableId\" value=\"{{ variant.id }}\">\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Rendering User Registration Checkbox in Twig for Craft Commerce Cart Update\nDESCRIPTION: This snippet demonstrates how to create a form in Twig that allows a customer to opt for user registration upon order completion. It includes CSRF protection, action input for cart update, and a checkbox for user registration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/customers.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('checbox', 'registerUserOnOrderComplete', 1, {checked: cart.registerUserOnOrderComplete}) }}\n\n  {# ... #}\n\n  <button>Save cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Iterating Over JSON Objects and Arrays in Twig\nDESCRIPTION: Shows how to iterate over JSON objects and arrays, displaying key-value pairs in a table format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<table>\n  <thead>\n    <tr>\n      <th>Key</th>\n      <th>Value</th>\n    </tr>\n  </thead>\n  <tbody>\n    {% for key, val in entry.myJsonField %}\n        <tr>\n          <td>{{ key }}</td>\n          <td>\n            <pre>{{ val is scalar ? val : val|json_encode }}</pre>\n          </td>\n        </tr>\n    {% endfor %}\n  </tbody>\n</table>\n```\n\n----------------------------------------\n\nTITLE: Running Craft CMS Database Migration and Project Config Update\nDESCRIPTION: Command to apply database migrations and project config changes in a single operation during deployment. The --interactive=0 flag ensures the command runs non-interactively, making it suitable for automated deployment scripts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/deploy.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft up --interactive=0\n```\n\n----------------------------------------\n\nTITLE: Updating Database from Project Config Changes Using UIDs\nDESCRIPTION: Demonstrates converting UIDs back to database IDs when handling project config changes. This ensures consistent relations when synchronizing configurations between environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// (Some context omitted!)\n\n$siteId = Db::idByUid('{{%sites}}', $event->newValue['site']);\n\nDb::update('{{%plugin_producttypes}}', [\n    'name' => $event->newValue['name'],\n    'siteId' => $siteId,\n    // ...\n], ['id' => $id]);\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Controller in Craft CMS with PHP\nDESCRIPTION: Demonstrates how to create a simple controller that extends Craft's base Controller class with an action that returns a JSON response. The controller allows anonymous access to its actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\controllers;\n\nuse craft\\web\\Controller;\n\nclass WidgetsController extends Controller\n{\n    protected array|bool|int $allowAnonymous = true;\n\n    public function actionEcho()\n    {\n        return $this->asJson(['ping' => 'Pong!']);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Additional Database Connection in Craft CMS (PHP)\nDESCRIPTION: This example shows how to set up an additional database connection for connecting to a legacy database in Craft CMS. It defines a new 'legacydb' component with its own connection settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'legacydb' => [\n            'server' => App::env('LEGACY_DB_SERVER'),\n            // ...\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Targeting a Specific Relational Field in a Matrix Block (Twig)\nDESCRIPTION: Demonstrates how to target a specific relational field within a Matrix block by using dot notation with the Matrix field handle and the block's relational field handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedRecipes = craft.entries()\n    .section('recipes')\n    .relatedTo({\n        targetElement: ingredient,\n        field: 'steps.ingredient'\n    })\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Settings in PHP\nDESCRIPTION: Demonstrates how to access plugin settings both from within the main plugin class and from elsewhere in the codebase using either the getSettings() method or the settings magic property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// From your main plugin class:\n$foo = $this->getSettings()->foo;\n\n// From elsewhere:\n$foo = \\mynamespace\\Plugin::getInstance()->getSettings()->foo;\n```\n\n----------------------------------------\n\nTITLE: Associating Elements with Field Layouts in PHP\nDESCRIPTION: This snippet demonstrates how to associate an element (in this case, a product) with its corresponding field layout by setting the fieldLayoutId property during the element saving process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_44\n\nLANGUAGE: php\nCODE:\n```\n// ...\n$product->fieldLayoutId = $productType->fieldLayoutId;\nCraft::$app->getElements()->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Categories as a Flat List in Twig and PHP\nDESCRIPTION: Shows how to fetch and display all related categories as a flat list in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% for rel in relatedCategories %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedCategories = $entry->myFieldHandle->all();\nif (count($relatedCategories)) {\n    foreach ($relatedCategories as $rel) {\n        // do something with $rel->url and $rel->title\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating HTML Tags with tag() Function in Craft CMS\nDESCRIPTION: Creates a complete HTML tag with specified attributes. The function automatically handles attribute rendering and HTML encoding.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_50\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  class: 'foo'\n}) }}\n{# Output: <div class=\"foo\"></div> #}\n```\n\n----------------------------------------\n\nTITLE: Modifying GraphQL Type Fields in Craft CMS\nDESCRIPTION: Shows how to modify GraphQL type fields using the DefineGqlTypeFieldsEvent. Example includes removing ID fields and adding a custom authorEmail field to the EntryInterface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineGqlTypeFieldsEvent;\nuse craft\\gql\\TypeManager;\nuse GraphQL\\Type\\Definition\\Type;\nuse yii\\base\\Event;\n\nEvent::on(\n    TypeManager::class,\n    TypeManager::EVENT_DEFINE_GQL_TYPE_FIELDS,\n    function(DefineGqlTypeFieldsEvent $event) {\n        // Remove all ids to enforce use of uids\n        unset($event->fields['id']);\n\n        // Add author email to all entries\n        if ($event->typeName == 'EntryInterface') {\n            $event->fields['authorEmail'] = [\n                'name' => 'authorEmail',\n                'type' => Type::string(),\n                'resolve' => function($source, $arguments, $context, $resolveInfo) {\n                    // Illustrative only; a query per entry would perform poorly\n                    return $source->getAuthor()->email;\n                }\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Template in Craft CMS Controller Action\nDESCRIPTION: Example of rendering and returning a Twig template from a Craft CMS controller action using the renderTemplate method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/controllers.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nuse yii\\web\\Response;\nuse craft\\web\\View;\n\npublic function actionFoo(): Response\n{\n    // Render and return the plugin's `foo.twig` template\n    return $this->renderTemplate(\n        'plugin-handle/foo.twig',\n        $variables,\n        View::TEMPLATE_MODE_CP\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Eager Loadable Fields in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates how to register custom GraphQL eager loadable fields by listening to the registerGqlEagerLoadableFields event and adding new fields to the fieldList array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\fields\\Widgets;\nuse craft\\gql\\ElementQueryConditionBuilder;\nuse craft\\events\\RegisterGqlEagerLoadableFields;\nuse yii\\base\\Event;\n\nEvent::on(\n    ElementQueryConditionBuilder::class,\n    ElementQueryConditionBuilder::EVENT_REGISTER_GQL_EAGERLOADABLE_FIELDS,\n    function(RegisterGqlEagerLoadableFields $event) {\n        $event->fieldList['widgets'] = [Widgets::class];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Administrative Areas for Countries (Twig and PHP)\nDESCRIPTION: Shows how to retrieve all states/administrative areas for one or more specified countries. Returns a key-value array with state codes as keys and state names as values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set states = craft.app.getAddresses().subdivisionRepository.getList(['US']) %}\n<select name=\"myState\">\n  {% for code, name in states %}\n    <option value=\"{{ code }}\">{{ name }}</option>\n  {% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$states = Craft::$app->getAddresses()->subdivisionRepository->getList(['US']);\n\nforeach ($states as $code => $name) {\n  // $code\n  // $name\n}\n```\n\n----------------------------------------\n\nTITLE: Using relatedTo Parameter with Multiple Elements\nDESCRIPTION: This snippet demonstrates how to use the relatedTo parameter to find recipes related to multiple elements (proteins).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set proteins = entry.ingredients.foodGroup('protein').all() %}\n\n{% set moreRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(proteins)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Sorting Arrays with multisort Filter in Twig\nDESCRIPTION: Demonstrates sorting arrays by one or more properties using the 'multisort' filter, with examples for simple sorting, multi-property sorting, custom sort directions, and sort flags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('title') %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort(['postDate', 'title']) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort(e => e.author.fullName) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('title', direction=SORT_DESC) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('id', sortFlag=SORT_NUMERIC) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort([\n  'postDate',\n  'title',\n], sortFlag=[SORT_NATURAL, SORT_FLAG_CASE]) %}\n```\n\n----------------------------------------\n\nTITLE: Defining Controller Action Route with Parameter\nDESCRIPTION: PHP configuration for routing to a custom controller action with a post ID parameter, captured by a numeric regex pattern.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n'comment/<postId:\\d+>' => 'my-module/blog/comment',\n```\n\n----------------------------------------\n\nTITLE: Displaying Available Payment Gateways in Twig\nDESCRIPTION: Twig template code for retrieving and displaying all payment gateways available to the customer. This creates a form with a dropdown selector for available payment methods and handles updating the cart with the selected gateway.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/payment-gateways.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set gateways = craft.commerce.gateways.getAllCustomerEnabledGateways %}\n\n{% if not gateways|length %}\n<p>No payment methods available.</p>\n{% endif %}\n\n{% if gateways|length %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/cart/update-cart') }}\n  {{ hiddenInput('redirect', 'commerce/checkout/payment') }}\n\n  <label for=\"gatewayId\">Payment Method</label>\n  <select name=\"gatewayId\" id=\"gatewayId\">\n    {% for id,name in gateways %}\n      <option value=\"{{ id }}\"{% if id == cart.gatewayId %} selected{% endif %}>\n        {{- name -}}\n      </option>\n    {% endfor %}\n  </select>\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Store Address in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve the store's location address through the Commerce Store service, showing both Twig and PHP implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set storeAddress = craft.commerce\n  .getStore()\n  .getStore()\n  .getLocationAddress() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$storeAddress = \\craft\\commerce\\Plugin::getInstance()\n    ->getStore()\n    ->getStore()\n    ->getLocationAddress();\n```\n\n----------------------------------------\n\nTITLE: Basic Search Event Handling in Craft CMS\nDESCRIPTION: Shows basic setup for handling the AFTER_SEARCH event in Craft CMS, providing access to element queries, search queries, site IDs, results and scores.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Original ElementQuery instance:\n        $elementQuery = $e->elementQuery;\n\n        // SearchQuery instance, with parsed tokens:\n        $query = $e->query;\n\n        // Site(s) the search was performed in:\n        $siteId = $e->siteId;\n\n        // Raw index matches (there may be multiple rows per element):\n        $results = $e->results;\n\n        // Corresponding element score totals, indexed by element ID:\n        $scores = $e->scores;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Data with Soft Delete Support in PHP\nDESCRIPTION: Example of a database query that respects soft deletion by adding a condition to filter out rows with a dateDeleted value, ensuring only active records are returned.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$results = (new \\craft\\db\\Query())\n    ->select(['...'])\n    ->from(['{{%mytablename}}'])\n    ->where(['dateDeleted' => null])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Twig Template Example in Craft CMS\nDESCRIPTION: Illustrates various Twig features including comments, variable output, dynamic values, loops, and filters in a Craft CMS context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/twig.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# This is a comment in Twig! It won't appear in the HTML output. #}\n\n{# Here's some text, dynamically inserted into an HTML tag: #}\n<h1>{{ siteName }}</h1>\n\n{# What about a dynamic value? #}\n<p>Today is {{ now | date }}!</p>\n\n{# This is a variable, and it's being set to a list (or \"array\") of colors: #}\n{% set colors = ['red', 'green', 'blue'] %}\n\n{# How many colors are in the list? #}\n<p>The following list contains {{ colors | length }} color(s).</p>\n\n{# This is a loop that outputs those items, sorted alphabetically: #}\n<ul>\n  {% for color in colors | sort %}\n    {# Let's stylize each item using some inline CSS: #}\n    <li style=\"color: {{ color }}\">\n      {# The color is capitalized for display: #}\n      {{ color | title }}\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Implementing Full Pagination Navigation in Craft CMS\nDESCRIPTION: This example demonstrates a more comprehensive pagination navigation setup in Craft CMS, including First/Last page links and nearby page links. It uses various properties and methods of the pageInfo variable to create a flexible pagination structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n<a href=\"{{ pageInfo.firstUrl }}\">First Page</a>\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n\n{% for page, url in pageInfo.getPrevUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n<span class=\"current\">{{ pageInfo.currentPage }}</span>\n\n{% for page, url in pageInfo.getNextUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n<a href=\"{{ pageInfo.lastUrl }}\">Last Page</a>\n```\n\n----------------------------------------\n\nTITLE: Setting an Asset Transform with setTransform() in Twig\nDESCRIPTION: Alternative approach to applying a named transform by using setTransform() to modify the asset's properties. This makes the asset's default url, width, and height properties reflect the transformed values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform('thumb') %}\n<img src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Read Replicas in Craft CMS\nDESCRIPTION: Example of setting up database read/write splitting by configuring read replicas. Uses environment variables to define replica connections while inheriting base configuration from db.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'db' => function() {\n            // Get the default component config (using values in `db.php`):\n            $config = App::dbConfig();\n\n            // Define the default config for replica connections:\n            $config['replicaConfig'] = [\n                'username' => App::env('DB_REPLICA_USER'),\n                'password' => App::env('DB_REPLICA_PASSWORD'),\n                'tablePrefix' => App::env('CRAFT_DB_TABLE_PREFIX'),\n                'attributes' => [\n                    // Use a smaller connection timeout\n                    PDO::ATTR_TIMEOUT => 10,\n                ],\n                'charset' => 'utf8',\n            ];\n\n            // Define the replica connections, with unique DSNs:\n            $config['replicas'] = [\n                ['dsn' => App::env('DB_REPLICA_DSN_1')],\n                ['dsn' => App::env('DB_REPLICA_DSN_2')],\n                ['dsn' => App::env('DB_REPLICA_DSN_3')],\n                ['dsn' => App::env('DB_REPLICA_DSN_4')],\n            ];\n\n            // Instantiate and return the configuration object:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Re-Rendering Matrix Blocks After Validation Errors\nDESCRIPTION: This snippet shows how to handle re-rendering Matrix blocks after validation errors, including regenerating temporary IDs for new blocks. It demonstrates creating hidden inputs for sort order and block type while maintaining the block data from the previous submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in blocks %}\n  {% set id = block.id ?? \"new:#{loop.index}\" %}\n  {{ hiddenInput('sortOrder[]', id) }}\n  {{ hiddenInput(\"blocks[#{id}][type]\", block.type.handle) }}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Subscription Form Template in Twig\nDESCRIPTION: Template code for creating subscription forms for available plans. Handles payment source collection and plan selection, posting to commerce/subscriptions/subscribe action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscription-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set plans = craft.commerce.getPlans().getAllPlans() %}\n\n{% for plan in plans %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/subscribe') }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    <h4>{{ plan.name }}</h4>\n\n    {% set paymentSources = craft.commerce.\n      getPaymentSources().\n      getAllGatewayPaymentSourcesByCustomerId(\n        plan.getGateway().id,\n        currentUser.id ?? null\n      )\n    %}\n\n    {# If we don't have a saved payment soruce, collect details for the gateway #}\n    {% if not paymentSources|length %}\n      <div class=\"paymentForm\">\n        {% namespace plan.getGateway().handle|commercePaymentFormNamespace %}\n          {{ plan.getGateway().getPaymentFormHtml({})|raw }}\n        {% endnamespace %}\n      </div>\n    {% endif %}\n\n    <button>{{ \"Subscribe\"|t }}</button>\n  </form>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Formatting Directives\nDESCRIPTION: Built-in directives for formatting and transforming data in GraphQL responses, including datetime formatting, asset transformation, and Markdown parsing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_22\n\nLANGUAGE: graphql\nCODE:\n```\n@formatDateTime(format: String, timezone: String, locale: String)\n@transform(handle: String, width: Int, height: Int, mode: String)\n@markdown(flavor: String, inlineOnly: Boolean)\n@parseRefs\n```\n\n----------------------------------------\n\nTITLE: Defining URL Rule for Controller Action in PHP\nDESCRIPTION: Example of defining a URL rule that maps a route with a numeric ID parameter to a controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n'comment/<postId:\\d+>' => 'my-module/blog/comment',\n```\n\n----------------------------------------\n\nTITLE: Adding Tabs to a Control Panel Page in Twig\nDESCRIPTION: This example demonstrates how to add tabs to a Craft CMS control panel page by defining a 'tabs' variable with a hash of tab objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set tabs = {\n  content: {\n    label: 'Content'|t('plugin-handle'),\n    url: '#content',\n  },\n  settings: {\n    label: 'Settings'|t('plugin-handle'),\n    url: '#settings',\n  },\n} %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Country Name in Twig\nDESCRIPTION: Shows how to access and display the full name of a selected country using the Country object in Craft CMS 5.3.0 and later.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Mail from {{ entry.country.name }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Schema Components in PHP\nDESCRIPTION: Shows how to register custom schema components with actions and labels. Includes example of registering both simple and complex component structures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlSchemaComponentsEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_SCHEMA_COMPONENTS,\n    function(RegisterGqlSchemaComponentsEvent $event) {\n        $event->queries = array_merge($event->queries, [\n            // \"Widgets\" group\n            'Widgets' => [\n                // widget component with read action, labelled \"View Widgets\" in UI\n                'widget:read' => ['label' => 'View Widgets']\n            ],\n        ]);\n\n        // Same format applies for $event->mutations\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Donation to Cart Form in Twig\nDESCRIPTION: This snippet demonstrates how to create a form for adding a donation to the cart in Craft Commerce. It includes checks for donation availability and uses line item options to specify the donation amount.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/donations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set donation = craft.commerce.donation %}\n{% if donation and donation.isAvailable %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/cart/update-cart') }}\n    {{ redirectInput('shop/cart') }}\n    {{ hiddenInput('purchasableId', donation.id) }}\n    <input type=\"text\"\n      name=\"options[donationAmount]\"\n      value=\"\"\n      placeholder=\"Donation\"\n    >\n    <button>Donate Now</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving All Customer Addresses in Twig for Craft Commerce\nDESCRIPTION: Code to fetch all addresses belonging to the current customer and iterate through them. This snippet demonstrates how to access the address collection and display address fields in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/customer-address-management.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set addresses = craft.commerce.customer.addresses %}\n{% for address in addresses %}\n  {{ address.firstName }}<br/>\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying Users with GraphQL in Craft CMS\nDESCRIPTION: The 'users' query is used to retrieve user data from Craft CMS. It supports various arguments for filtering, sorting, and pagination of results. Key arguments include ID, status, site, and user-specific fields like email and username.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_15\n\nLANGUAGE: GraphQL\nCODE:\n```\nquery {\n  users(\n    id: [1, 2, 3],\n    status: [\"active\"],\n    site: \"default\",\n    email: [\"user@example.com\"],\n    groupId: [1]\n  ) {\n    id\n    username\n    email\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Matrix Content Blocks with Aliased Types in Craft CMS (Twig)\nDESCRIPTION: This snippet demonstrates how to loop through Matrix field blocks and handle different types of content, including those with aliased handles. It uses a switch statement to render different content based on the block type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for contentBlock in entry.myMatrixField %}\n  <div class=\"content-block content-block--type-{{ contentBlock.type.handle }}\">\n    {% switch contentBlock.type.handle %}\n      {% case 'carousel'}\n        {# ... #}\n      {% case 'recommended'}\n        {# ... #}\n      {% case 'banner' %}\n        {# Perhaps \"Banner\" made more sense than \"Announcement\" in this context, when designing! #}\n        <h3>{{ contentBlock.title }}</h3>\n        {{ contentBlock.message|md }}\n      {% default %}\n        {{ contentBlock.render() }}\n    {% endswitch %}\n  </div>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Craft CMS Controller in PHP\nDESCRIPTION: Example of a simple controller class extending craft\\web\\Controller with an action method and anonymous access allowed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\controllers;\n\nuse craft\\web\\Controller;\n\nclass WidgetsController extends Controller\n{\n    protected array|bool|int $allowAnonymous = true;\n\n    public function actionEcho()\n    {\n        return $this->asJson(['ping' => 'Pong!']);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Cache-busting Asset URLs in Twig\nDESCRIPTION: Shows how to implement cache-busting for asset URLs by appending a version parameter with the asset's last modified timestamp. This helps ensure that updated assets are properly loaded by browsers instead of using cached versions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ url(image.getUrl('thumb'), {v: image.dateModified.timestamp}) }}\">\n{# <img src=\"https://my-project.tld/images/_thumb/bar.jpg?v=1614374621\"> #}\n```\n\n----------------------------------------\n\nTITLE: Tags Query Schema in GraphQL\nDESCRIPTION: GraphQL query schema for retrieving tags with filtering capabilities including element properties, relationships, and tag-specific criteria like group membership.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_18\n\nLANGUAGE: graphql\nCODE:\n```\ntype Query {\n  tags(\n    id: [QueryArgument]\n    uid: [String]\n    status: [String]\n    archived: Boolean\n    trashed: Boolean\n    site: [String]\n    siteId: [QueryArgument]\n    unique: Boolean\n    preferSites: [QueryArgument]\n    enabledForSite: Boolean\n    title: [String]\n    slug: [String]\n    uri: [String]\n    search: String\n    relatedTo: [QueryArgument]\n    relatedToAssets: [AssetCriteriaInput]\n    relatedToEntries: [EntryCriteriaInput]\n    relatedToUsers: [UserCriteriaInput]\n    relatedToCategories: [CategoryCriteriaInput]\n    relatedToTags: [TagCriteriaInput]\n    relatedToAll: [QueryArgument]\n    ref: [String]\n    fixedOrder: Boolean\n    inReverse: Boolean\n    dateCreated: [String]\n    dateUpdated: [String]\n    offset: Int\n    limit: Int\n    orderBy: String\n    siteSettingsId: [QueryArgument]\n    group: [String]\n    groupId: [QueryArgument]\n  ): [Tag]\n}\n```\n\n----------------------------------------\n\nTITLE: Restoring Soft-Deleted Records with Active Record in PHP\nDESCRIPTION: Demonstrates how to restore soft-deleted records using the Active Record class. This involves finding the trashed record and calling its restore() method to clear the dateDeleted value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$record = MyRecord::findTrashed()\n    ->where(['id' => $id])\n    ->one();\n\n$record->restore();\n```\n\n----------------------------------------\n\nTITLE: Compound Relational Criteria with 'and' Operator in Twig\nDESCRIPTION: This snippet demonstrates how to combine multiple relational criteria in a single query. It finds recipes from the same region that share at least one protein with the current recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# A new relational field for recipes, tracking their origins: #}\n{% set origin = entry.origin.one() %}\n{% set proteins = entry.ingredients.foodGroup('proteins').all() %}\n\n{% set regionalDishes = craft.entries()\n  .section('recipes')\n  .relatedTo([\n    'and',\n    origin,\n    proteins,\n  ])\n  .all() %}\n{# -> Recipes from the same region that share at least one protein. #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Entries in Twig\nDESCRIPTION: This Twig snippet demonstrates how to access and loop through related entries from an Entries field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedEntries = entry.myFieldHandle.all() %}\n{% if relatedEntries|length %}\n  <ul>\n    {% for rel in relatedEntries %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Line Items with Twig\nDESCRIPTION: Form implementation for updating quantities and notes for cart line items using the commerce/cart/update-cart endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n  {% endfor %}\n  <button>Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Setting Environment-Specific Configuration in Craft CMS\nDESCRIPTION: This code demonstrates how to configure different settings for various environments in Craft CMS using the config/general.php file. The example specifically shows how to enable updates in development environments while disabling them in staging and production for security.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/config-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Global settings\n    '*' => [\n        'allowUpdates' => false,\n        // ...\n    ],\n\n    // Dev environment settings\n    'dev' => [\n        'allowUpdates' => true,\n        // ...\n    ],\n\n    // Staging environment settings\n    'staging' => [\n        // ...\n    ],\n\n    // Production environment settings\n    'production' => [\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Iterating through Available Shipping Methods in Twig\nDESCRIPTION: A Twig template example that loops through available shipping method options for the current cart, displaying each as a radio button option with name and price. It automatically checks the currently selected shipping method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/shipping.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for handle, method in cart.availableShippingMethodOptions %}\n  {% set isCurrentSelection = handle == cart.shippingMethodHandle %}\n  {% set formattedPrice = method.priceForOrder(cart)|currency(cart.currency) %}\n  <label>\n    <input type=\"radio\"\n      name=\"shippingMethodHandle\"\n      value=\"{{ handle }}\"\n      {{ isCurrentSelection ? ' checked' : '' }}\n    />\n    <strong>{{ method.name }}</strong> {{ formattedPrice }}\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Submitting New Shipping Address in Twig Form\nDESCRIPTION: Shows how to create a form for customers to enter a new shipping address, including a country select dropdown populated with available countries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('text', 'shippingAddress[fullName]', shippingAddress.fullName) }}\n\n  <select name=\"shippingAddress[countryCode]\">\n    {% for code, name in craft.commerce.getStore().getStore().getCountriesList() %}\n      {{ tag('option', {\n        value: code,\n        text: name,\n        selected: code == shippingAddress.countryCode,\n      }) }}\n    {% endfor %}\n  </select>\n\n  {# ... #}\n\n  <button>Save Shipping Address</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Registering Service Component via init()\nDESCRIPTION: Example of registering a service component using setComponents() in the plugin's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    $this->setComponents([\n        'foo' => \\mynamespace\\services\\Foo::class,\n    ]);\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Twig Extension in PHP\nDESCRIPTION: This snippet shows how to register a custom Twig extension with Craft's View component. It demonstrates checking for a site request before instantiating and registering a custom Twig extension class that can add new variables, functions, filters, tags, operators, or tests to the Twig environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-twig.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    if (Craft::$app->request->getIsSiteRequest()) {\n        // Add in our Twig extension\n        $extension = new MyTwigExtension();\n        Craft::$app->view->registerTwigExtension($extension);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Custom GraphQL Directive Implementation in PHP\nDESCRIPTION: Example of a custom GraphQL directive that replaces 'foo' with 'bar' in field values, including directive registration and application logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\directives;\n\nuse craft\\gql\\base\\Directive;\nuse craft\\gql\\GqlEntityRegistry;\nuse GraphQL\\Language\\DirectiveLocation;\nuse GraphQL\\Type\\Definition\\Directive as GqlDirective;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\n\nclass BarTheFoo extends Directive\n{\n\n    public static function create(): GqlDirective\n    {\n        if ($type = GqlEntityRegistry::getEntity(self::name())) {\n            return $type;\n        }\n\n        $type = GqlEntityRegistry::createEntity(static::name(), new self([\n            'name' => static::name(),\n            'locations' => [\n                DirectiveLocation::FIELD,\n            ],\n            'description' => 'Replace `foo` with `bar`.',\n            'args' => [],\n        ]));\n\n        return $type;\n    }\n\n    public static function name(): string\n    {\n        return 'fooTheBar';\n    }\n\n    public static function apply($source, $value, array $arguments, ResolveInfo $resolveInfo): mixed\n    {\n        return str_replace('foo', 'bar', (string)$value);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Selectize Field with Environment Variable Support in Twig\nDESCRIPTION: This snippet demonstrates how to create a dropdown selection field that includes environment variable options. This approach is useful when a setting has a limited number of valid values but still needs to support environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.selectizeField({\n  label: 'Region'|t('my-plugin'),\n  instructions: 'The region this resource is located in.'|t('my-plugin'),\n  id: 'region',\n  name: 'region',\n  options: [\n    { label: 'Asia Pacific (Hong Kong)', value: 'ap-east-1' },\n    { label: 'Europe (Milan)', value: 'eu-south-1' },\n    { label: 'US West (N. California)', value: 'us-west-1' },\n  ],\n  includeEnvVars: true,\n  value: model.region,\n  errors: model.getErrors('region')\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Generating URIs for Nested Entries in Twig\nDESCRIPTION: This Twig snippet shows how to create URIs for nested entries within Matrix fields. It uses the owner entry's URI as a base and appends the nested entry's slug.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{owner.uri}/steps/{slug}\n```\n\n----------------------------------------\n\nTITLE: Implementing Field Condition Rules in PHP\nDESCRIPTION: This snippet outlines how field types can provide a rule type by implementing FieldConditionRuleInterface and using FieldConditionRuleTrait.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/conditions.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nclass MyFieldConditionRule implements FieldConditionRuleInterface\n{\n    use FieldConditionRuleTrait;\n\n    // Implement required methods\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Entries in Twig\nDESCRIPTION: Demonstrates how to access related entries from an Entries field in a Twig template, including looping through results and checking for existence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n\n{% set relatedEntries = entry.myFieldHandle.all() %}\n{% if relatedEntries|length %}\n  <ul>\n    {% for rel in relatedEntries %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ rel.url }}\">{{ rel.title }}</a></p>\n{% endif %}\n\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related entries!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Requiring User Permissions in Craft CMS Templates\nDESCRIPTION: This example shows how to restrict access to an entire template based on user permissions. The requirePermission tag will throw an exception if the current user doesn't have the specified permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/user-management.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'accessCp' %}\n```\n\n----------------------------------------\n\nTITLE: Basic System Message Template using Twig in Craft CMS\nDESCRIPTION: A default system message template showing how to use Twig variables to personalize emails. This template includes user name, system name, and activation link variables with proper escaping for user-provided values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/mail.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nHey {{user.friendlyName|e}},\n\nThanks for creating an account with {{systemName}}! To activate your account, click the following link:\n\n<{{link}}>\n\nIf you were not expecting this email, just ignore it.\n```\n\n----------------------------------------\n\nTITLE: Displaying Category Navigation in Twig\nDESCRIPTION: Shows how to create a navigation menu for categories in a specific group using Twig. It demonstrates creating a query, setting parameters, fetching results, and generating HTML with nested categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a category query with the 'group' parameter #}\n{% set myCategoryQuery = craft.categories()\n  .group('topics') %}\n\n{# Fetch the categories #}\n{% set categories = myCategoryQuery.all() %}\n\n{# Display the navigation #}\n<ul>\n  {% nav category in categories %}\n    <li>\n      <a href=\"{{ category.url }}\">{{ category.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Applying Project Config Changes via CLI in Craft CMS\nDESCRIPTION: Command to apply pending Project Config changes from YAML files to the database. This is used when deploying changes to a target environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/apply\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Site Template Roots in Craft CMS using PHP\nDESCRIPTION: This code demonstrates how to register a custom template root directory for front-end templates in Craft CMS. It uses the EVENT_REGISTER_SITE_TEMPLATE_ROOTS event to make templates accessible from a predefined path prefix (_utils in this example).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/template-roots.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterTemplateRootsEvent;\nuse craft\\web\\View;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        View::class,\n        View::EVENT_REGISTER_SITE_TEMPLATE_ROOTS,\n        function(RegisterTemplateRootsEvent $event) {\n            $event->roots['_utils'] = __DIR__ . '/template-utils';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Custom Behavior Class in PHP\nDESCRIPTION: Creates a Post behavior class that adds a getAuthorUrl() method to Entry elements. It extends Yii's base Behavior class and uses Craft's UrlHelper.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/behaviors.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\behaviors;\n\nuse craft\\helpers\\UrlHelper;\nuse yii\\base\\Behavior;\n\nclass Post extends Behavior\n{\n    public function getAuthorUrl(): ?string\n    {\n        $author = $this->owner->getAuthor();\n\n        if (!$author) {\n            return null;\n        }\n\n        return UrlHelper::siteUrl(\"authors/{$author->id}\");\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Example GraphQL Query for Widgets with Filtering\nDESCRIPTION: A GraphQL query example that requests widgets with an 'approved' filter argument set to true. This demonstrates how custom arguments can be used to filter element queries in GraphQL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_7\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  widgets(approved: true) {\n    title\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Related Elements with Additional Constraints\nDESCRIPTION: This example shows how to query related elements (vegetables) with additional constraints using a relational field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set veggies = entry.ingredients.foodGroup('vegetable').all() %}\n\n<h3>Vegetables</h3>\n\n{% if veggies|length %}\n  <ul>\n    {% for veggie in veggies %}\n      <li>{{ veggie.title }}</li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>This recipe has no vegetables!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Handling File Uploads for Assets Fields in Twig\nDESCRIPTION: This snippet shows how to create a file input for uploading new assets to an Assets field in Craft CMS. It includes an example of a multiple file upload input and a tip about setting the correct form enctype.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Creating a Boolean Menu Field with Environment Variable Support in Twig\nDESCRIPTION: This snippet shows how to create a boolean menu field that allows environment variables. This is useful for boolean settings that need to be configurable through environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.booleanMenuField({\n  label: \"Use authentication\"|t('my-plugin'),\n  id: 'useAuthentication',\n  name: 'useAuthentication',\n  includeEnvVars: true,\n  value: model.useAuthentication,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Querying Blog Entries Related to Multiple Categories in Craft CMS\nDESCRIPTION: This GraphQL query shows how to fetch blog entries related to multiple categories by passing an array of category IDs to the relatedTo parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_7\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(section: \"blog\", relatedTo: [30, 40]) {\n    title\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Element Statuses in Craft CMS\nDESCRIPTION: This method defines custom statuses for an element type. It returns an associative array of status keys mapped to configurations including label and color.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_37\n\nLANGUAGE: php\nCODE:\n```\npublic static function statuses(): array\n{\n    return [\n        'foo' => ['label' => \\Craft::t('plugin-handle', 'Foo'), 'color' => '27AE60'],\n        'bar' => ['label' => \\Craft::t('plugin-handle', 'Bar'), 'color' => 'F2842D'],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Enabling Headless Mode Configuration in Craft CMS\nDESCRIPTION: PHP configuration code to enable headless mode in Craft CMS by modifying the general config file. This optimizes the installation for API-only use.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse craft\\config\\GeneralConfig;\n\nreturn GeneralConfig::create()\n    // ...\n    ->headlessMode(true)\n;\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Console Command in Craft CMS\nDESCRIPTION: This snippet shows how to register a custom console command on Craft's ResaveController. It uses an event listener to add a new 'products' action with custom options and functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/commands.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineConsoleActionsEvent;\nuse craft\\console\\Controller;\nuse craft\\console\\controllers\\ResaveController;\nuse yii\\base\\Event;\n\nEvent::on(ResaveController::class,\n    Controller::EVENT_DEFINE_ACTIONS,\n    function(DefineConsoleActionsEvent $event) {\n        $event->actions['products'] = [\n            'options' => ['type'],\n            'helpSummary' => 'Re-saves products.',\n            'action' => function($params): int {\n                // @var ResaveController $controller\n                $controller = Craft::$app->controller;\n                $query = Product::find();\n                if ($controller->type) {\n                    $query->type(explode(',', $controller->type));\n                }\n                return $controller->saveElements($query);\n            }\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Multiple Sets of Elements in Twig\nDESCRIPTION: This example demonstrates how to eager-load multiple sets of related elements (topics and feature images) for news entries using the .with() param.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries\n  .section('news')\n  .with([\n    'topics',\n    'featureImage',\n  ])\n  .all() %}\n\n{% for post in posts %}\n  <article>\n    {% for topic in post.topics %}\n      {{ topic.getLink() }}\n    {% endfor %}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Generating Srcset Attribute with getImg() Method in Twig\nDESCRIPTION: This snippet shows a more concise way to generate an img tag with srcset attribute using the 'getImg()' method, which combines transform and srcset generation in a single call.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getImg({ width: 300, height: 300 }, ['1.5x', '2x', '3x']) }}\n```\n\n----------------------------------------\n\nTITLE: Adding Soft Delete Support to Active Record Class in PHP\nDESCRIPTION: Example of how to add soft delete support to an Active Record class by importing the SoftDeleteTrait. This provides methods for finding, soft-deleting, and restoring records with dateDeleted columns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\ActiveRecord;\nuse craft\\db\\SoftDeleteTrait;\n\nclass MyRecord extends ActiveRecord\n{\n    use SoftDeleteTrait;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Saving Product Type to Project Config in Craft CMS Plugin\nDESCRIPTION: Illustrates how to save a product type to the project config store using ProjectConfig::set(). It includes handling new and existing product types, validation, and updating the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Db;\nuse craft\\helpers\\StringHelper;\nuse craft\\commerce\\models\\ProductType;\n\npublic function saveProductType(ProductType $productType)\n{\n    $isNew = empty($productType->id);\n\n    // Ensure the product type has a UID:\n    if ($isNew) {\n        $productType->uid = StringHelper::UUID();\n    } else if (!$productType->uid) {\n        $productType->uid = Db::uidById('{{%plugin_producttypes}}', $productType->id);\n    }\n\n    // Make sure it validates:\n    if (!$productType->validate()) {\n        return false;\n    }\n\n    // Save it to the project config:\n    $path = \"myPlugin.productTypes.{$productType->uid}\";\n\n    Craft::$app->getProjectConfig()->set($path, [\n        'name' => $productType->name,\n        // ...\n    ]);\n\n    // Now set the ID on the product type in case the caller expects it to exist after being saved:\n    if ($isNew) {\n        $productType->id = Db::idByUid('{{%plugin_producttypes}}', $productType->uid);\n    }\n\n    return true;\n}\n\npublic function deleteProductType(ProductType $productType)\n{\n    $path = \"myPlugin.productTypes.{$productType->uid}\";\n\n    Craft::$app->getProjectConfig()->remove($path);\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Logic in Twig\nDESCRIPTION: Shows how to implement conditional logic in templates using if/else statements to display different content based on user authentication status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"/logout\">Logout</a>\n{% else %}\n  <a href=\"/login\">Login</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Error Information in Twig Templates\nDESCRIPTION: In custom error templates, Craft CMS provides several variables containing information about the error. These include the error message, code, file, line, and HTTP status code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ message }} // error message\n{{ code }} // exception code\n{{ file }} // file that threw the exception\n{{ line }} // line in which the exception occurred\n{{ statusCode }} // error's HTTP status code\n```\n\n----------------------------------------\n\nTITLE: Accessing Element Properties in Twig\nDESCRIPTION: Demonstrates how to access element properties using both method calls and magic getters in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.getLink() }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.link }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Deferred Payment Form in Twig\nDESCRIPTION: Template for implementing checkout without immediate payment, using the commerce/cart/complete controller action. Requires allowCheckoutWithoutPayment setting to be enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/making-payments.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/complete') }}\n  {{ redirectInput('/shop/customer/order?number={number}&success=true') }}\n\n  <button>Buy Now + Pay Later</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Setting Dynamic Email Recipient with Order Data\nDESCRIPTION: Example showing how to set the email recipient dynamically using the customer's email from the order object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/emails.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.email }}\n```\n\n----------------------------------------\n\nTITLE: Advanced Pagination Navigation with First/Last Links\nDESCRIPTION: Shows how to implement pagination navigation with first, previous, next, and last page links.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/paginate.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% paginate craft.entries.section('blog').limit(10) as pageInfo, pageEntries %}\n\n<a href=\"{{ pageInfo.firstUrl }}\">First Page</a>\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n<a href=\"{{ pageInfo.lastUrl }}\">Last Page</a>\n```\n\n----------------------------------------\n\nTITLE: Registering Class-Level Event Handler in PHP\nDESCRIPTION: Example showing how to register a class-level event handler for user activation in Craft CMS. The handler sends a custom welcome email after a user is activated. Demonstrates proper event handler registration using Yii's Event::on() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nuse Craft;\nuse yii\\base\\Event;\nuse craft\\services\\Users;\nuse craft\\events\\UserEvent;\n\nEvent::on(\n    Users::class,\n    Users::EVENT_AFTER_ACTIVATE_USER,\n    function(UserEvent $e) {\n        $message = Craft::$app->getMailer()\n            ->composeFromKey('custom.welcome')\n            ->setTo($e->user);\n\n        // ...\n\n        $message->send();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Checking Element Existence with exists() in Twig\nDESCRIPTION: This snippet demonstrates how to use the exists() method to check if any elements match the specified criteria in Twig. It checks for the existence of an entry in the 'news' section with a specific slug.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set exists = craft.entries()\n  .section('news')\n  .slug('hello-world')\n  .exists() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel Navigation Items with Event Listener in PHP\nDESCRIPTION: Code snippet demonstrating how to use the EVENT_REGISTER_CP_NAV_ITEMS event to add a new section to the Craft CMS control panel. It shows how to set up an event listener and define a navigation item with URL, label, and icon.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCpNavItemsEvent;\nuse craft\\web\\twig\\variables\\Cp;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Cp::class,\n        Cp::EVENT_REGISTER_CP_NAV_ITEMS,\n        function(RegisterCpNavItemsEvent $event) {\n            $event->navItems[] = [\n                'url' => 'section-url',\n                'label' => 'Section Label',\n                'icon' => '@mynamespace/path/to/icon.svg',\n            ];\n        }\n    );\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using Switch Statements for Conditional Logic in Twig\nDESCRIPTION: Demonstrates how to use switch statements to compare a variable against multiple possible values. This example checks Matrix block types and renders different content based on the type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% switch matrixBlock.type %}\n  {% case \"text\" %}\n    {{ matrixBlock.textField|markdown }}\n  {% case \"image\" %}\n    {{ matrixBlock.image[0].getImg() }}\n  {% default %}\n    <p>A font walks into a bar.</p>\n    <p>The bartender says, \"Hey, we don't serve your type in here!\"</p>\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions for Specific Users in Craft CMS\nDESCRIPTION: This snippet demonstrates how to check if a specific user object has a particular permission using the can() method of the User element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/user-permissions.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n/** @var \\craft\\elements\\User $user */\nif ($user->can('stayUpLate')) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Manually Loading Global Sets\nDESCRIPTION: Demonstrates how to manually load global sets in both Twig and PHP, useful for special situations like email templates\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/globals.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set companyInfo = craft.app.globals().getSetByHandle('companyInfo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$companyInfo = \\Craft::$app->getGlobals()->getSetByHandle('companyInfo');\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Settings via Magic Property in Craft CMS\nDESCRIPTION: Shows how to access plugin settings using the $settings magic property from within the plugin class or from elsewhere in the application.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// From your main plugin class:\n$foo = $this->settings->foo;\n\n// From elsewhere:\n$foo = \\mynamespace\\Plugin::getInstance()->settings->foo;\n```\n\n----------------------------------------\n\nTITLE: Adding Soft Delete Support to Active Record Classes in PHP\nDESCRIPTION: Implementation of the SoftDeleteTrait in an Active Record class to enable soft deletion functionality, including find methods that respect soft-deleted status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\ActiveRecord;\nuse craft\\db\\SoftDeleteTrait;\n\nclass MyRecord extends ActiveRecord\n{\n    use SoftDeleteTrait;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Embeddable Template with Customizable Blocks in Twig\nDESCRIPTION: This example demonstrates how to create a template that can be embedded and have its content blocks overridden by the embedding template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  {% block content %}\n    <p>{{ tipText }}</p>\n  {% endblock %}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Saving Multiple Custom Field Values in Craft CMS\nDESCRIPTION: This example shows how to set multiple custom field values on an element using both direct property assignment and the bulk setFieldValues() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n// Direct assignment:\n$product->myCustomField = 'foo';\n$product->myOtherCustomField = 'bar';\n\n// Via bulk method:\n$product->setFieldValues([\n    'myCustomField' => 'foo',\n    'myOtherCustomField' => 'bar',\n]);\n\n\\Craft::$app->getElements()->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Registering Discount Adjuster in Craft Commerce\nDESCRIPTION: Example showing how to register a custom discount adjuster class using the registerDiscountAdjusters event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/adjusters.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_DISCOUNT_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating a Checkboxes Field in an Element Form with Twig\nDESCRIPTION: A complete template for generating a Checkboxes field in an element form, including proper handling of default values and preserving selected values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{# Include a hidden input first so Craft knows to update the\n   existing value, if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n<ul>\n  {% for option in field.options %}\n    {% set checked = entry is defined\n      ? entry.myFieldHandle.contains(option.value)\n      : option.default %}\n\n    <li><label>\n      <input type=\"checkbox\"\n        name=\"fields[myFieldHandle][]\"\n        value=\"{{ option.value }}\"\n        {% if checked %}checked{% endif %}>\n      {{ option.label }}\n    </label></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Updating Line Items in Cart\nDESCRIPTION: Demonstrates how to update quantity, notes, and options for existing line items in a cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n  {% endfor %}\n\n  <button>Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Multiple Plain Text Field Values in Twig\nDESCRIPTION: Shows how to query entries based on multiple possible values of a plain text field using comma-separated values or an array in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set sunrisePalette = craft.entries()\n  .section('swatches')\n  .colorGroupCode('PINK, RED, YELLOW, ORANGE')\n  .all() %}\n\n{% set sunrisePalette = craft.entries()\n  .section('swatches')\n  .colorGroupCode(['PINK', 'RED', 'YELLOW', 'ORANGE'])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Estimated Shipping Address Implementation - Twig Template\nDESCRIPTION: Demonstrates how to implement estimated shipping address functionality for preliminary shipping calculations. Includes country/state selection and postal code input with shipping method options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n{% set store = craft.commerce.getStore().getStore() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('estimatedBillingAddressSameAsShipping', '1') }}\n\n  {% if not cart.estimatedShippingAddressId %}\n    <select name=\"estimatedShippingAddress[countryCode]\">\n      {% for code, option in store.getCountriesList() %}\n        <option value=\"{{ code }}\">{{ option }}</option>\n      {% endfor %}\n    </select>\n\n    <select name=\"estimatedShippingAddress[administrativeArea]\">\n      {% for states in store.getAdministrativeAreasListByCountryCode() %}\n        {% for key, option in states %}\n          <option value=\"{{ key }}\">{{ option }}</option>\n        {% endfor %}\n      {% endfor %}\n    </select>\n\n    <input type=\"text\" name=\"estimatedShippingAddress[postalCode]\" value=\"\">\n  {% endif %}\n\n  {% if cart.availableShippingMethodOptions|length and cart.estimatedShippingAddressId %}\n    {% for handle, method in cart.availableShippingMethodOptions %}\n      {% set price = method.priceForOrder(cart)|commerceCurrency(cart.currency) %}\n      <label>\n        <input type=\"radio\"\n          name=\"shippingMethodHandle\"\n          value=\"{{ handle }}\"\n          {% if handle == cart.shippingMethodHandle %}checked{% endif %}\n        />\n        {{ method.name }} - {{ price }}\n      </label>\n    {% endfor %}\n  {% endif %}\n\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using Arrow Functions in Twig\nDESCRIPTION: Examples of arrow functions in Twig, which are compact, single-statement functions used inline. Shows usage with the group filter and Collections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set groceryList = [\n  {name: 'Eggs', category: 'Dairy'},\n  {name: 'Pancake Mix', category: 'Breakfast'},\n  {name: 'Milk', category: 'Dairy'},\n  {name: 'Onions', category: 'Produce'}\n] %}\n\n{# output the list by category #}\n{% set itemsByCategory = groceryList|group(item => item.category) %}\n{% for category, items in itemsByCategory %}\n  <h3>{{ category }}</h3>\n  <ul>\n    {% for item in items %}\n      <li>{{ item.name }}</li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set vendorsByRating = craft.entries()\n  .section('vendors')\n  .with('reviews')\n  .collect()\n  .sortBy((v) => v.reviews.pluck('score').avg()) %}\n\n{# -> Vendor entries sorted by highest average rating score #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Money Fields using Craft CMS\nDESCRIPTION: Examples of query parameters for filtering elements based on Money field values. Shows how to filter for empty/non-empty values, greater than/less than comparisons, and compound conditions with AND/OR operators.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/money-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n':empty:'\n```\n\nLANGUAGE: twig\nCODE:\n```\n':notempty:'\n```\n\nLANGUAGE: twig\nCODE:\n```\n'>= 123.45'\n```\n\nLANGUAGE: twig\nCODE:\n```\n'< 123.45'\n```\n\nLANGUAGE: twig\nCODE:\n```\n['and', '>= 50.00', '< 75.00']\n```\n\nLANGUAGE: twig\nCODE:\n```\n['or', '< -100.00', '> 100.00']\n```\n\n----------------------------------------\n\nTITLE: Implementing Content Migration for Single Field Layout Elements in PHP\nDESCRIPTION: Example of implementing a content migration for a custom element type that uses a single field layout. The migration extends 'BaseContentRefactorMigration' and calls updateElements() with a query to fetch the relevant elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$this->updateElements(\n    (new Query())->from('{{%widgets}}'),\n    Craft::$app->getFields()->getLayoutByType(Widget::class),\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Variant Prices for Specific Customer in Twig\nDESCRIPTION: This snippet demonstrates how to query a variant's price for a specific customer using the .forCustomer() param in a Twig template. It shows the original price and the promotional price.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pricing-rules.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set user = craft.users()\n  .username('oli')\n  .one() %}\n\n{% set myVariant = craft.variants()\n  .id(1234)\n  .forCustomer(user.id)\n  .one() %}\n\n{{ user.fullName }} would pay <del>{{ myVariant.price|commerceCurrency }}</del> {{ myVariant.promotionalPrice|commerceCurrency }}\n```\n\n----------------------------------------\n\nTITLE: Setting up Composer Autoloading for a Module in JSON\nDESCRIPTION: Configuration for the composer.json file to enable autoloading of module classes using PSR-4 standards. This maps the module's namespace to its directory location in the project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/module-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  // ...\n  \"autoload\": {\n    \"psr-4\": {\n      \"foo\\\\\": \"modules/foo/\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Event Testing in Craft CMS with Property Validation\nDESCRIPTION: Comprehensive example of testing events with property validation using Craft's createEventItems helper. This demonstrates how to verify both the event class and specific property values on the event object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\test\\EventItem;\n\n$this->tester->expectEvent(SomeComponent::class, SomeComponent::SOME_EVENT, function() {\n\n        // Code that should trigger an event goes here.\n\n    }, Event::class,\n    $this->tester->createEventItems([\n        [\n            // The $event->sender prop is a \\stdClass where the $key property is set to 'value'\n            'eventPropName' => 'sender',\n            'type' => EventItem::TYPE_CLASS,\n            'desiredClass' => \\stdClass::class,\n            'desiredValue' => [\n                'key' => 'value'\n            ],\n        ],\n        [\n            // The $event->name prop string set to 'someEvent'.\n            'eventPropName' => 'name',\n            'type' => EventItem::TYPE_OTHERVALUE,\n            'desiredValue' => 'someEvent'\n        ]\n    ]\n));\n```\n\n----------------------------------------\n\nTITLE: Using Class Reference for Event Handler in PHP 8.1\nDESCRIPTION: Example of using PHP 8.1's callable syntax to reference a service method as an event handler instead of a closure. This approach is more maintainable for complex handler logic that should be separated from the registration code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nEvent::on(\n    Users::class,\n    Users::EVENT_AFTER_ACTIVATE_USER,\n    [MyService::class, 'handleUserActivation']\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Deferred Initialization in a Module in PHP\nDESCRIPTION: Module initialization pattern that uses Craft's onInit method to defer setup tasks until Craft is fully initialized, preventing race conditions and incomplete initialization issues.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/module-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace foo;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // ...\n\n        // Defer some setup tasks until Craft is fully initialized:\n        Craft::$app->onInit(function() {\n            // ...\n        });\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Inline Ajax Request with CSRF Token in Twig and JavaScript\nDESCRIPTION: This snippet shows how to embed a CSRF token in a Twig template and use it in an inline JavaScript Ajax request. It demonstrates a more efficient approach for hybrid front-end applications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<button\n  id=\"update-name\"\n  data-user-id=\"{{ currentUser.id }}\"\n  data-csrf-token-value=\"{{ craft.app.request.getCsrfToken() }}\"\n  data-csrf-token-name=\"{{ craft.app.config.general.csrfTokenName }}\">Edit Name</button>\n\n<script>\n  const $button = document.getElementById('update-name');\n\n  $button.addEventListener('click', function(e) {\n    const params = new FormData();\n\n    params.append('userId', $button.dataset.userId);\n    params.append($button.dataset.csrfTokenName, $button.dataset.csrfTokenValue);\n    params.append('fullName', prompt('New name:'));\n\n    fetch('/actions/users/save-user', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: params,\n    })\n    .then(response => response.json())\n    .then(result => console.log(result));\n  });\n</script>\n```\n\n----------------------------------------\n\nTITLE: Database Session Configuration in Craft CMS\nDESCRIPTION: Sets up database-based session storage by configuring the session component to use database tables for storing PHP sessions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config\n            $config = craft\\helpers\\App::sessionConfig();\n\n            // Override the class to use DB session class\n            $config['class'] = yii\\web\\DbSession::class;\n\n            // Set the session table name\n            $config['sessionTable'] = craft\\db\\Table::PHPSESSIONS;\n\n            // Instantiate and return it\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating a Form Page Template in Twig for Craft CMS Edit Pages\nDESCRIPTION: This Twig template creates a form page for editing custom events in the Craft control panel. It extends the CP layout, uses Craft's form macros, and includes various form fields with validation support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-edit-pages.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/cp' %}\n{% import '_includes/forms' as forms %}\n\n{% set title = 'Edit Event'|t('my-plugin') %}\n{% set fullPageForm = true %}\n\n{% block content %}\n  {# Have the form submit to a my-plugin/events/save controller action #}\n  {{ actionInput('my-plugin/events/save') }}\n  \n  {# Have the save action redirect to /my-plugin/events afterward #}\n  {{ redirectInput('my-plugin/events') }}\n\n  {{ forms.textField({\n    label: 'Event Name'|t('plugin-handle'),\n    instructions: 'The name of the event'|t('plugin-handle'),\n    id: 'name',\n    name: 'name',\n    value: event.name,\n    required: true,\n    errors: event.getErrors('name'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'Start Date'|t('plugin-handle'),\n    instructions: 'The start date of the event.'|t('plugin-handle'),\n    id: 'start-date',\n    name: 'startDate',\n    value: event.startDate,\n    required: true,\n    errors: event.getErrors('startDate'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'End Date'|t('plugin-handle'),\n    instructions: 'The end date of the event.'|t('plugin-handle'),\n    id: 'end-date',\n    name: 'endDate',\n    value: event.endDate,\n    required: true,\n    errors: event.getErrors('endDate'),\n  }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Entry Query in Twig and PHP\nDESCRIPTION: Shows how to initialize a new entry query in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new entry query #}\n{% set myEntryQuery = craft.entries() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new entry query\n$myEntryQuery = \\craft\\elements\\Entry::find();\n```\n\n----------------------------------------\n\nTITLE: Configuring Codeception for Craft CMS in YAML\nDESCRIPTION: This snippet shows recommended Codeception configuration options for Craft CMS testing. It sets 'cleanup' and 'transaction' to true in the codeception.yml file to maintain database integrity during tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nCraft:\n  cleanup: true\n  transaction: true\n```\n\n----------------------------------------\n\nTITLE: Implementing GraphQL Field Complexity in Craft CMS\nDESCRIPTION: Example of defining complexity value for a GraphQL field definition using Craft's GQL service. The snippet shows how to set complexity for a 'children' field using the relatedArgumentComplexity helper method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\n// ...\n'children' => [\n    'name' => 'children',\n    'args' => WidgetArguments::getArguments(),\n    'type' => Type::listOf(WidgetInterface::getType()),\n    'description' => 'Widget's children. Accepts same arguments as `widgets` query.',\n    'complexity' => Gql::relatedArgumentComplexity(\n        GqlService::GRAPHQL_COMPLEXITY_EAGER_LOAD\n    ),\n],\n// ...\n```\n\n----------------------------------------\n\nTITLE: Boosting Specific Element Scores in Craft CMS Search\nDESCRIPTION: Example showing how to boost the search score of a specific element by modifying the scores array in the AFTER_SEARCH event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Boost a specific element's score by overwriting its value in $e->scores:\n        if (isset($e->scores[12345])) {\n          $e->scores[12345] = $e->scores[12345] + 10000;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Exporters for Craft CMS Element Types\nDESCRIPTION: This method defines which exporter types an element supports on its index page. It extends the parent's exporters and adds a custom exporter class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineExporters(string $source): array\n{\n    $exporters = parent::defineExporters($source);\n    $exporters[] = MyExporter::class;\n    return $exporters;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Class-Level Event Handlers in Craft 3 PHP\nDESCRIPTION: Shows how to use class-level event handlers in Craft 3 as a replacement for craft()->on() in Craft 2. This example listens for the beforeSaveElement event on the Elements service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Elements;\nuse yii\\base\\Event;\n\nEvent::on(Elements::class, Elements::EVENT_BEFORE_SAVE_ELEMENT, $callback);\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Elements using exists()\nDESCRIPTION: This snippet demonstrates how to check for the existence of related elements (meat or poultry) in a recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set hasMeat = entry.ingredients.foodGroup(['meat', 'poultry']).exists() %}\n\n{% if not hasMeat %}\n  <span class=\"badge\">Vegetarian</span>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Type System Query with Typename Introspection\nDESCRIPTION: This GraphQL query demonstrates introspection by requesting the __typename property for various parts of the API. The response shows the unique type names assigned to each part of the schema in Craft's GraphQL implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_8\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  __typename\n  entry {\n    __typename\n  }\n  user {\n    __typename\n  }\n  widget {\n    __typename\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"__typename\": \"Query\",\n    \"entry\": {\n      \"__typename\": \"blog_blog_Entry\"\n    },\n    \"user\": {\n      \"__typename\": \"User\"\n    },\n    \"widget\": {\n      \"__typename\": \"Widget\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Gateway Selection Form in Twig\nDESCRIPTION: Form for allowing customers to select between available payment gateways. Uses Commerce's gateway service to fetch enabled gateways and displays them in a dropdown menu.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set gateways = craft.commerce.gateways.getAllCustomerEnabledGateways() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('checkout/payment') }}\n\n  <select name=\"gatewayId\">\n    {% for gateway in gateways %}\n      <option value=\"{{ gateway.id }}\">{{ gateway.name }}</option>\n    {% endfor %}\n  </select>\n\n  <button>Continue to Payment</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Saving Field Layout with Fields Service\nDESCRIPTION: Basic example of saving a field layout using Craft's Fields service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->fields->saveLayout($fieldLayout);\n```\n\n----------------------------------------\n\nTITLE: Form Input Implementation Example\nDESCRIPTION: Examples of implementing form inputs using Craft's form macros, showing both simple input and full field implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.date({\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Email with commerce/cart/update-cart Action in Twig\nDESCRIPTION: This snippet demonstrates how to create a form to update a cart's email address using the commerce/cart/update-cart action. The form includes CSRF protection, redirect input, and error handling for the email field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/update-cart-customer.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\"\n    name=\"email\"\n    class=\"{% if cart.getFirstError('email') %}has-error{% endif %}\"\n    value=\"{{ cart.email }}\"\n    placeholder=\"{{ \"your@email.com\"|t }}\"\n  >\n\n  <button type=\"submit\">Update Cart Email</button>\n<form>\n```\n\n----------------------------------------\n\nTITLE: Displaying Order History in Twig Templates\nDESCRIPTION: Shows how to display an order's status history to customers using Twig templates. Iterates through order history records to show status changes, dates, and messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/custom-order-statuses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for history in order.histories %}\n    {% set newStatus = history.newStatus %}\n\n    <li>{{ newStatus.name }} ({{ history.dateCreated | date('short') }}): {{ history.message }}</li>\n\n    {# `newStatus.color` and `newStatus.handle` are also available, if you want to distinguish (visually or functionally) between history records! #}\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Rendering Different Matrix Block Types in Twig\nDESCRIPTION: A comprehensive example of rendering different types of Matrix blocks in a template. It uses conditional logic to check the block type and renders appropriate HTML for each type (Heading, Text, Image, and Quote).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myFieldHandle.all() %}\n  {% if block.type == \"heading\" %}\n    <h3>{{ block.heading }}</h3>\n  {% elseif block.type == \"text\" %}\n    {{ block.text|markdown }}\n  {% elseif block.type == \"image\" %}\n    {% set image = block.image.one() %}\n    {% if image %}\n        <img src=\"{{ image.getUrl('thumb') }}\" \n          width=\"{{ image.getWidth('thumb') }}\" \n          height=\"{{ image.getHeight('thumb') }}\" \n          alt=\"{{ image.title }}\"\n        >\n    {% endif %}\n  {% elseif block.type == \"quote\" %}\n    <blockquote>\n      <p>{{ block.quote }}</p>\n      <cite>– {{ block.cite }}</cite>\n    </blockquote>\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing beforeExecuteGqlQuery Event Listener in Craft CMS\nDESCRIPTION: A PHP code example showing how to listen for the beforeExecuteGqlQuery event, which allows for modifying or setting GraphQL query results before execution. This can be useful for implementing caching or pre-processing logic for GraphQL queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_BEFORE_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Set the result from cache\n        $event->result = ...;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Outputting Form Fields for Existing Matrix Blocks in Craft CMS\nDESCRIPTION: This snippet shows how to create form fields for existing Matrix blocks with two different block types (text and image). It uses namespace tags to properly scope input names and creates type-specific fields based on each block's type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry is defined %}\n  {% for block in entry.myFieldHandle.all() %}\n    {# Prefix the block's input names with `fields[myFieldHandle][blocks][<BlockID>]` #}\n    {% namespace \"fields[myFieldHandle][blocks][#{block.id}]\" %}\n      {{ hiddenInput('type', block.type) }}\n\n      {% switch block.type %}\n        {% case 'text' %}\n          <textarea name=\"fields[myTextFieldHandle]\">\n            {{- block.myTextFieldHandle|raw -}}\n          </textarea>\n        {% case 'image' %}\n          {% set images = block.myAssetFieldHandle.all() %}\n          {% if images|length %}\n            <ul>\n              {% for image in block.myAssetFieldHandle.all() %}\n                <li>\n                  {{ image.getImg({ width: 100, height: 100 }) }}\n                  {{ hiddenInput('fields[myAssetFieldHandle][]', image.id) }}\n                </li>\n              {% endfor %}\n            </ul>\n          {% endif %}\n      {% endswitch %}\n    {% endnamespace %}\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Twig Extension in PHP for Craft CMS Testing\nDESCRIPTION: TwigExtension class extends Twig\\Extension\\AbstractExtension, providing a mock Twig extension for testing Twig-related functionality in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\TwigExtension\n```\n\n----------------------------------------\n\nTITLE: Implementing Controller Actions for Craft CMS Edit Pages in PHP\nDESCRIPTION: This PHP code defines two controller actions: one for displaying an edit page and another for processing form submissions. It includes permission checks, model handling, validation, and a fallback mechanism for handling validation errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-edit-pages.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\models\\Event;\nuse Craft;\nuse craft\\helpers\\DateTimeHelper;\nuse yii\\web\\BadRequestHttpException;\nuse yii\\web\\Response;\n\npublic function actionEdit(?int $eventId = null, ?Event $event = null): Response\n{\n    // Ensure the user has permission to save events\n    $this->requirePermission('edit-events');\n\n    if (!$event) {\n        // Are we editing an existing event?\n        if ($eventId) {\n            $event = MyPlugin::getInstance()->events->getEventById($eventId);\n            if (!$event) {\n                throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n            }\n        } else {\n            // We're creating a new event\n            $event = new Event();\n        }\n    }\n    \n    return $this->renderTemplate('plugin-handle/events/_edit', [\n        'event' => $event,\n    ]);\n}\n\npublic function actionSave(): ?Response\n{\n    // Ensure the user has permission to save events\n    $this->requirePermission('edit-events');\n\n    $eventId = $this->request->getBodyParam('eventId');\n    \n    if ($eventId) {\n        $event = MyPlugin::getInstance()->events->getEventById($eventId);\n        if (!$event) {\n            throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n        }\n    } else {\n        $event = new Event();\n    }\n    \n    // Populate the event with the form data\n    $event->name = $this->request->getBodyParam('name');\n    $event->startDate = DateTimeHelper::toDateTime($this->request->getBodyParam('startDate'));\n    $event->endDate = DateTimeHelper::toDateTime($this->request->getBodyParam('endDate'));\n    \n    // Try to save it\n    if (!MyPlugin::getInstance()->events->saveEvent($event)) {\n        if ($this->request->acceptsJson) {\n            return $this->asJson(['errors' => $event->getErrors()]);\n        }\n\n        $this->setFailFlash(Craft::t('plugin-handle', 'Couldn't save event.'));\n        \n        // Send the event back to the edit action\n        Craft::$app->urlManager->setRouteParams([\n            'event' => $event,\n        ]);\n        return null;\n    }\n    \n    if ($this->request->acceptsJson) {\n        return $this->asJson(['success' => true]);\n    }\n    \n    $this->setSuccessFlash(Craft::t('plugin-handle', 'Event saved.'));\n    $this->redirectToPostedUrl($event);\n}\n```\n\n----------------------------------------\n\nTITLE: Debugging Values with dump() Function in Twig\nDESCRIPTION: Demonstrates how to debug variable values using the dump() function and accessing DateTime object properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ now }} {# -> Error! #}\n{{ dump(now) }} {# ->  object(DateTime) ...  #}\n{{ now.format('Y') }} {# -> 2022 #}\n```\n\n----------------------------------------\n\nTITLE: Creating Product Queries in Twig, PHP, and GraphQL\nDESCRIPTION: Demonstrates how to create a new product query using Twig, PHP, and GraphQL in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new product query #}\n{% set myProductQuery = craft.products() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product query\n$myProductQuery = \\craft\\commerce\\elements\\Product::find();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Create a new product query\n{\n  products {\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Form for Saving Entries Fields\nDESCRIPTION: This Twig snippet demonstrates how to create a form with checkboxes for saving an Entries field, including handling existing relations and allowing selection from possible entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleEntries = craft.entries()\n  .section('galleries')\n  .orderBy('title ASC')\n  .all() %}\n\n{% set relatedEntryIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleEntry in possibleEntries %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleEntry.id,\n          { checked: possibleEntry.id in relatedEntryIds }\n        ) }}\n        {{ possibleEntry.title }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Composer for Local Plugin Development in Craft CMS\nDESCRIPTION: This JSON configuration sets up Composer to use a local path repository for plugin development in a Craft CMS project. It includes settings for minimum stability and repository configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"minimum-stability\": \"dev\",\n  \"prefer-stable\": true,\n  \"repositories\": [\n    {\n      \"type\": \"path\",\n      \"url\": \"../my-plugin\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Available Payment Gateways in Twig\nDESCRIPTION: Template code for displaying and selecting available payment gateways in the checkout process. Uses craft.commerce.gateways.getAllCustomerEnabledGateways() to fetch enabled gateways and creates a form for gateway selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/gateways.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set gateways = craft.commerce.gateways.getAllCustomerEnabledGateways %}\n\n{% if not gateways|length %}\n<p>No payment methods available.</p>\n{% endif %}\n\n{% if gateways|length %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('commerce/checkout/payment') }}\n\n  <label for=\"gatewayId\">Payment Method</label>\n  <select name=\"gatewayId\" id=\"gatewayId\">\n    {% for id,name in gateways %}\n      <option value=\"{{ id }}\"{% if id == cart.gatewayId %} selected{% endif %}>\n        {{- name -}}\n      </option>\n    {% endfor %}\n  </select>\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Register Asset Bundle in Controller\nDESCRIPTION: Example of registering the asset bundle from a controller action before rendering a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/asset-bundles.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\FooBundle;\n\npublic function actionFoo()\n{\n    $this->view->registerAssetBundle(FooBundle::class);\n\n    return $this->renderTemplate('plugin-handle/foo');\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering a Password Reset Form with Redirect in Twig\nDESCRIPTION: This snippet demonstrates how to create a password reset form in Twig with CSRF protection, action input, and a redirect to a specific page after submission. It includes both the shorthand redirectInput() function and the equivalent manual input method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/send-password-reset-email') }}\n\n  {# Redirect to a page with further instructions: #}\n  {{ redirectInput('help/account-recovery') }}\n\n  {# The above is equivalent to: #}\n  <input\n    type=\"hidden\"\n    name=\"redirect\"\n    value=\"{{ 'help/account-recovery' | hash }}\">\n\n  {{ input('email', 'loginName', null, {\n    required: true,\n  }) }}\n\n  <button>Reset Password</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Custom Field Data in Twig\nDESCRIPTION: Example showing how to display content from a plain text field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"summary\">\n  {# Display a plain text field: #}\n  <p>{{ entry.summaryShort }}</p>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Custom Fields on User Elements in Twig\nDESCRIPTION: This snippet shows how to eager-load a custom field ('featuredPoems') attached to user elements. Unlike reverse relationships, this approach works because the relationship is defined on the poet user element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set poets = craft.users()\n  .group('poets')\n  .with([\n    ['featuredPoems'],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Cache Busting Asset URLs with Timestamp\nDESCRIPTION: Shows how to implement cache busting for asset URLs by appending a last-modified timestamp using Craft's url() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ url(image.getUrl('thumb'), {v: image.dateModified.timestamp}) }}\">\n{# <img src=\"https://my-project.tld/images/_thumb/bar.jpg?v=1614374621\"> #}\n```\n\n----------------------------------------\n\nTITLE: Fetching Complete List of Countries (Twig and PHP)\nDESCRIPTION: Demonstrates retrieving a list of all available countries from Craft's address repository. Returns a key-value array with country ISO codes as keys and country names as values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.app.getAddresses().countryRepository.getList() %}\n<select name=\"myCountry\">\n  {% for code, name in countries %}\n    <option value=\"{{ code }}\">{{ name }}</option>\n  {% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$countries = Craft::$app->getAddresses()->countryRepository->getList();\nforeach ($countries as $code => $name) {\n    // $code\n    // $name\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Payment Form with Gateway Integration in Twig\nDESCRIPTION: A simple payment form implementation that uses the gateway's payment form HTML generator and posts to the commerce/payments/pay controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/making-payments.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# @var cart craft\\commerce\\elements\\Order #}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('/commerce/customer/order?number={number}') }}\n  {{ hiddenInput('cancelUrl', '/commerce/checkout/payment'|hash) }}\n\n  {{ cart.gateway.getPaymentFormHtml({})|raw }}\n\n  <button type=\"submit\">Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Reinstalling a Plugin to Update Composer Configuration\nDESCRIPTION: Commands to remove and reinstall a plugin when working with path-based repositories. This is necessary when making changes to composer.json that might be ignored during a standard update.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# remove the plugin package\ncomposer remove package/name\n\n# re-require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG Images with the svg Function in Twig\nDESCRIPTION: The svg function outputs an SVG document. It can accept an SVG file path, an Asset object, or raw SVG markup. The function includes options for sanitization and namespacing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_40\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = entry.myAssetsField.one() %}\n{% if image and image.extension == 'svg' %}\n  {{ svg(image) }}\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = include('_includes/icons/lemon.svg') %}\n{{ svg(image) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg(image, sanitize=false, namespace=false) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg')|attr({ class: 'lemon-icon' }) }}\n```\n\n----------------------------------------\n\nTITLE: Overriding Transform Format for WebP Generation\nDESCRIPTION: This snippet shows how to override the format of a named transform to generate a WebP version of an image, typically used with the <source> element for responsive images.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<source type=\"image/webp\" srcset=\"{{ asset.getUrl({\n  transform: 'thumb',\n  format: 'webp',\n}) }}\">\n```\n\n----------------------------------------\n\nTITLE: Writing an Upgrade Migration for Craft CMS Plugins\nDESCRIPTION: Provides an example implementation of an Install migration that handles upgrading from Craft 2 to Craft 3, including preserving plugin settings and handling plugin handle changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\migrations;\n\nuse craft\\db\\Migration;\n\nclass Install extends Migration\n{\n    public function safeUp()\n    {\n        if ($this->_upgradeFromCraft2()) {\n            return;\n        }\n\n        // Fresh install code goes here...\n    }\n\n    private function _upgradeFromCraft2(): bool\n    {\n        // Fetch the old plugin row, if it was installed\n        $row = (new \\craft\\db\\Query())\n            ->select(['id', 'handle', 'settings'])\n            ->from(['{{%plugins}}'])\n            ->where(['in', 'handle', ['<old-handle>', '<oldhandle>']])\n            ->one();\n\n        if (!$row) {\n            return false;\n        }\n\n        // Update this one's settings to old values\n        $projectConfig = \\Craft::$app->projectConfig;\n        $oldKey = \"plugins.{$row['handle']}\";\n        $newKey = 'plugins.<new-handle>';\n        $projectConfig->set($newKey, $projectConfig->get($oldKey));\n\n        // Delete the old plugin row and project config data\n        $this->delete('{{%plugins}}', ['id' => $row['id']]);\n        $projectConfig->remove($oldKey);\n\n        // Any additional upgrade code goes here...\n\n        return true;\n    }\n\n    public function safeDown()\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Garbage Collection for Soft-Deleted Rows in PHP\nDESCRIPTION: Event handler code that integrates with Craft's garbage collection system to hard-delete rows that have been soft-deleted for longer than the configured duration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Gc;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Gc::class,\n        Gc::EVENT_RUN,\n        function() {\n            Craft::$app->gc->hardDelete('{{%mytablename}}');\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Products by Type in Twig\nDESCRIPTION: Example of fetching products of a specific type using a Twig template. This shows how to reference a product type by handle to obtain all products of that type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothes = craft.products()\n  .type('clothes')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Closure-based Configuration in PHP for Craft CMS\nDESCRIPTION: Shows how to use a closure to define configuration in Craft CMS. This method allows for more complex logic and is available since version 5.3.0. It demonstrates setting aliases using the GeneralConfig object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// config/general.php\n\nuse craft\\config\\GeneralConfig;\n\nreturn function(GeneralConfig $config) {\n    return $config\n        ->aliases([\n            '@webroot' => dirname(__DIR__) . '/web',\n        ])\n        // ...\n    ;\n};\n```\n\n----------------------------------------\n\nTITLE: Looking Up Field IDs by Handle in Twig Templates\nDESCRIPTION: This snippet demonstrates the proper way to reference Craft CMS resources by their handles rather than IDs in templates. It shows how to load a Matrix field by its handle and then use the field's ID in a Matrix block query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Load the field definition via the fields API: #}\n{% set matrixField = craft.app.fields.getFieldByHandle('myMatrixFieldHandle') %}\n\n{# Use the loaded ID: #}\n{% set myMatrixBlockQuery = craft.matrixBlocks()\n  .owner(featuredPost)\n  .fieldId(matrixField.id)\n  .type('text')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Order Adjuster in Craft Commerce PHP\nDESCRIPTION: Demonstrates how to register a custom order adjuster class using the registerOrderAdjusters event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/adjusters.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Single Entry (About Page) with GraphQL in Craft CMS\nDESCRIPTION: This GraphQL query fetches content for a Single entry (About page) including custom fields like profileImage and bio. It demonstrates querying a specific section and using inline fragments for type-specific fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_8\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entry(section: \"about\") {\n    ... on about_Entry {\n      profileImage {\n        title\n        url\n      }\n      bio\n    }\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"entry\": {\n      \"title\": null,\n      \"profileImage\": [\n        {\n          \"title\": \"Lake Billy Chinook\",\n          \"url\": \"https://tutorial-five.ddev.site/uploads/images/lake-billy-chinook.jpeg\"\n        }\n      ],\n      \"bio\": \"Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Aenean lacinia bibendum nulla sed consectetur. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\n\\nCurabitur blandit tempus porttitor. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum id ligula porta felis euismod semper. Etiam porta sem malesuada magna mollis euismod.\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Matrix Field Carousel Implementation\nDESCRIPTION: Complex example showing how to implement a carousel with conditional JavaScript loading in a Matrix field\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.all() %}\n  {% switch block.type %}\n    {% case 'text' %}\n      {{ block.text|md }}\n    {% case 'slideshow' %}\n      {# 1. Include carousel library: #}\n      {% js 'https://cdn.jsdelivr.net/npm/package/file' %}\n\n      {# 2. Initialize this carousel instance: #}\n      {% js %}\n        Carousel.init('#carousel-{{ block.uid | e('js') }}')\n      {% endjs %}\n\n      {# 3. Output carousel markup: #}\n      <div id=\"carousel-{{ block.uid }}\">\n        {% for image in block.images.all() %}\n          {{ image.getImg() }}\n        {% endfor %}\n      </div>\n    {% default %}\n      <p>Unknown block type!</p>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Checking User Group Membership in Twig\nDESCRIPTION: Demonstrates how to check if the current user belongs to a specific group using the 'isInGroup' method in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n\n{% if currentUser.isInGroup('members') %}\n  <div class=\"banner\">Thanks for your support!</div>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Line Item Population Event Handlers in PHP\nDESCRIPTION: Multiple examples of commerce_lineItems.onPopulateLineItem event handlers that modify line item prices based on different conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_lineItems.onPopulateLineItem', function($event) {\n    $purchasable = $event->params['purchasable'];\n    $lineItem = $event->params['lineItem'];\n\n    if ($purchasable->getPurchasableId() == 1461) {\n        $lineItem->price = 3;\n        $lineItem->saleAmount = 0;\n    }\n});\n```\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_lineItems.onPopulateLineItem', function($event) {\n    $purchasable = $event->params['purchasable'];\n    $lineItem = $event->params['lineItem'];\n\n    if ($lineItem->options['giftWrapped']) {\n        $lineItem->price = $lineItem->price + 1;\n        $lineItem->saleAmount = 0;\n    }\n});\n```\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_lineItems.onPopulateLineItem', function($event)\n{\n    $lineItem = $event->params['lineItem'];\n    $options = $lineItem->options;\n\n    if (isset($options['customWidth']) && $options['customWidth']) {\n        $lineItem->price = $lineItem->price * (int) $options['customWidth'];\n        $lineItem->saleAmount = 0;\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules in Craft CMS\nDESCRIPTION: Example of registering custom control panel URL rules for a plugin in the init() method using the RegisterUrlRulesEvent.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\web\\UrlManager;\nuse craft\\events\\RegisterUrlRulesEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['widgets/new'] = 'my-plugin/widgets/edit';\n        $event->rules['widgets/edit/<id:\\d+>'] = 'my-plugin/widgets/edit';\n\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Config Values in PHP\nDESCRIPTION: Example showing how to access configuration values and set debug headers in PHP using the Config service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n// Add `DevMode` header when active:\nif (Craft::$app->config->general->devMode) {\n  Craft::$app->request->headers->set('DevMode', 'On');\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom User Permissions in Craft CMS (PHP)\nDESCRIPTION: This snippet demonstrates how to register custom user permissions for a plugin or module using the EVENT_REGISTER_PERMISSIONS event. It includes an example of adding a permission group with a single permission and shows how to add nested permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/user-permissions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUserPermissionsEvent;\nuse craft\\services\\UserPermissions;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        UserPermissions::class,\n        UserPermissions::EVENT_REGISTER_PERMISSIONS,\n        function(RegisterUserPermissionsEvent $event) {\n            $event->permissions[] = [\n                'heading' => 'Permission Group Name',\n                'permissions' => [\n                    'permissionName' => [\n                        'label' => 'Permission Label',\n                    ],\n                ],\n            ];\n        }\n    );\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n'permissionName' => [\n    'label' => 'Permission Label',\n    'nested' => [\n        'nestedPermissionName' => [\n            'label' => 'Nested Permission Label',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Argument Handlers in Craft CMS\nDESCRIPTION: Event handler that registers custom GraphQL argument handlers. This maps argument names to handler classes to process those arguments in GraphQL queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\argumenthandlers\\RelatedWidgets;\nuse craft\\gql\\ArgumentManager;\nuse craft\\events\\RegisterGqlArgumentHandlersEvent;\n\nEvent::on(\n    ArgumentManager::class,\n    ArgumentManager::EVENT_DEFINE_GQL_ARGUMENT_HANDLERS,\n    function(RegisterGqlArgumentHandlersEvent $event) {\n        $event->handlers[\"argumentName\"] = RelatedWidgets::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Cache in PHP\nDESCRIPTION: Example of configuring Craft to use database caching by setting up the cache component with DbCache.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => craft\\cache\\DbCache::class,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Autosuggest Input for Environmental Settings in Twig\nDESCRIPTION: This Twig snippet demonstrates how to create an autosuggest input field for environmental settings in the Craft CMS control panel. It includes options for suggesting environment variables and aliases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.autosuggestField({\n  label: 'Secret Key'|t('plugin-handle'),\n  id: 'secret-key',\n  name: 'secretKey',\n  value: myModel.secretKey,\n  suggestEnvVars: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Declaring Method Types in PHP\nDESCRIPTION: Example of declaring argument and return types for a PHP method. This demonstrates the use of strict typing for better code quality and readability.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function synchronize(Entry $entry, array $data): bool\n```\n\n----------------------------------------\n\nTITLE: Creating Nearby Page Links with Pagination in Craft CMS Twig Templates\nDESCRIPTION: Demonstrates how to create pagination links with nearby page numbers surrounding the current page. The snippet shows how to navigate to first, previous, next, and last pages while also displaying a specific number of page links on either side of the current page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n<a href=\"{{ pageInfo.firstUrl }}\">First Page</a>\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n\n{% for page, url in pageInfo.getPrevUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n<span class=\"current\">{{ pageInfo.currentPage }}</span>\n\n{% for page, url in pageInfo.getNextUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n<a href=\"{{ pageInfo.lastUrl }}\">Last Page</a>\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic URL Redirects in PHP\nDESCRIPTION: Example of configuring simple URL redirects using a redirects.php config file. It shows both basic key-value syntax and expanded array syntax with additional options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'old/path' => 'new/path',\n    [\n        'from' => 'old/path',\n        'to' => 'new/path',\n        'caseSensitive' => true,\n        // Defaults to 302 (\"Temporary\")\n        'statusCode' => 301, // \"Permanent\"\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Retrieving Previous Carts for Logged-in User in Craft Commerce (Twig and PHP)\nDESCRIPTION: This snippet demonstrates how to retrieve previous incomplete carts for a logged-in user in Craft Commerce. It excludes the currently loaded cart from the results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  {% set currentCart = craft.commerce.carts.cart %}\n\n  {% set oldCartsQuery = craft.orders()\n    .isCompleted(false)\n    .storeId(currentStore.id)\n    .customer(currentUser) %}\n\n  {% if currentCart.id %}\n    {% do oldCartsQuery.id(['not', currentCart.id]) %}\n  {% endif %}\n\n  {% set oldCarts = oldCartsQuery.all() %}\n\n  {# ... #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\nuse craft\\commerce\\elements\\Order;\n\n$currentUser = Craft::$app->getUser()->getIdentity();\n\nif ($currentUser) {\n    $currentCart = Commerce::getInstance()->getCarts()->getCart();\n\n    $oldCartsQuery = Order::find()\n        ->storeId(Commerce::getInstance()->getStores()->getCurrentStore())\n        ->isCompleted(false)\n        ->user($currentUser);\n\n    if ($currentCart->id) {\n        $oldCartsQuery->id('not '.$currentCart->id);\n    }\n\n    $oldCarts = $oldCartsQuery->all();\n}\n```\n\n----------------------------------------\n\nTITLE: Variable Definition and Configuration in Twig\nDESCRIPTION: Shows how to define variables and create configuration objects in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set duration = 500 %}\n{% set config = {\n  delay: 100,\n} %}\n```\n\n----------------------------------------\n\nTITLE: Translating Messages with translate or t Filter in Twig\nDESCRIPTION: Shows how to use the translate (or t) filter for translating messages in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_40\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|t('myCategory') }}\n\n{{ 'Hello world'|t }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Configuration Settings in PHP\nDESCRIPTION: Example of custom configuration settings in Craft CMS, including service URLs and API keys with environment variable integration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'serviceBaseUrl' => 'https://api.service.com/v1',\n    'servicePublishableKey' => App::env('SERVICE_PUBLISHABLE_KEY'),\n    'servicePrivateKey' => App::env('SERVICE_PRIVATE_KEY'),\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Native Fields for Custom Element\nDESCRIPTION: Implementation of mandatory title and text fields for a custom element type using EVENT_DEFINE_NATIVE_FIELDS event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineFieldLayoutFieldsEvent;\nuse craft\\fieldlayoutelements\\TextField;\nuse craft\\fieldlayoutelements\\TitleField;\nuse craft\\models\\FieldLayout;\nuse yii\\base\\Event;\nuse mynamespace\\elements\\MyElement;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_NATIVE_FIELDS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        /** @var FieldLayout $fieldLayout */\n        $fieldLayout = $event->sender;\n\n        if ($fieldLayout->type === MyElement::class) {\n            $event->fields[] = new TitleField([\n                'label' => 'My Title',\n                'mandatory' => true,\n                'instructions' => 'Enter a title.',\n            ]);\n            $event->fields[] = new TextField([\n                'label' => 'My Description'\n                'attribute' => 'description',\n                'mandatory' => true,\n                'instructions' => 'Enter a description.',\n            ]);\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing User Addresses in Twig Templates\nDESCRIPTION: This snippet shows how to iterate through a user's addresses and display them in a list. It accesses the addresses property of a user object and applies the address filter to format each address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h2>Address Book</h2>\n\n<ul>\n  {% for address in user.addresses %}\n    <li>{{ address|address }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Using attr Function for HTML Attributes in Twig\nDESCRIPTION: The attr function generates HTML attributes from a hash, handling proper encoding and formatting of nested values like classes, data attributes, and inline styles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAttributes = {\n  class: ['one', 'two'],\n  disabled: true,\n  readonly: false,\n  data: {\n    baz: 'Escape this \"',\n    qux: {\n      some: ['data', '\"quoted\"']\n    }\n  },\n  style: {\n    'background-color': 'red',\n    'font-size': '20px'\n  },\n} %}\n\n<div {{ attr(myAttributes) }}></div>\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags with parseRefs Filter in Twig\nDESCRIPTION: Shows how to use the parseRefs filter to parse reference tags in a string. The filter processes the tags and returns the parsed content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  {entry:blog/hello-world:link} was my first blog post. Pretty geeky, huh?\n{% endset %}\n\n{{ content|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Listing User Addresses in Twig\nDESCRIPTION: This snippet demonstrates how to display the current user's address book on their account dashboard. It includes loading addresses, building edit URLs, and handling address deletion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{# 1. Load Addresses: #}\n{% set addresses = currentUser.getAddresses() %}\n\n{% block content %}\n  <h1>Hello, {{ currentUser.fullName }}!</h1>\n\n  {% if addresses | length %}\n    <ul>\n      {% for address in addresses %}\n        <li>\n          {{ address.title }}<br>\n          {{ address|address }}<br>\n\n          {# 2. Build an edit URL: #}\n          <a href=\"{{ url(\"account/addresses/#{address.uid}\") }}\">Edit</a>\n\n          {# 3. Use a form to delete Addresses: #}\n          <form method=\"post\">\n            {{ csrfInput() }}\n            {{ actionInput('users/delete-address') }}\n            {{ hiddenInput('addressId', address.id) }}\n\n            <button>Delete</button>\n          </form>\n        </li>\n      {% endfor $}\n    </ul>\n  {% else %}\n    <p>You haven't added any addresses, yet!</p>\n  {% endif %}\n\n  {# 4. Link to \"new\" route: #}\n  <p><a href=\"{{ url('account/addresses/new') }}\">New Address</a></p>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Displaying User Photos in Twig Templates with Predefined Image Transform\nDESCRIPTION: This snippet demonstrates how to access and display a user's photo in a Twig template. It gets the photo asset from the user object, checks if it exists, and uses the getImg method with a predefined image transform to display it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set photo = user.photo %}\n\n<div class=\"profile\">\n  {% if photo %}\n    <div class=\"photo\">\n      {{ photo.getImg('thumbnail') }}\n    </div>\n  {% endif %}\n\n  <h3>{{ user.fullName }}</h3>\n\n  <code>{{ user.email }}</code>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Eager-Loadable Fields in Craft CMS\nDESCRIPTION: Event handler that registers custom fields for GraphQL eager loading. This is necessary for any custom relational fields to support GraphQL's eager loading capabilities.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\fields\\Widgets;\nuse craft\\gql\\ElementQueryConditionBuilder;\nuse craft\\events\\RegisterGqlEagerLoadableFields;\nuse yii\\base\\Event;\n\nEvent::on(\n    ElementQueryConditionBuilder::class,\n    ElementQueryConditionBuilder::EVENT_REGISTER_GQL_EAGERLOADABLE_FIELDS,\n    function(RegisterGqlEagerLoadableFields $event) {\n        $event->fieldList['widgets'] = [Widgets::class];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Custom Database Configuration in PHP\nDESCRIPTION: PHP configuration file example showing how to set up custom database connection settings using environment variables and PDO attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/db.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'driver' => App::env('MY_DB_DRIVER'),\n    'server' => App::env('MY_DB_SERVER'),\n    'port' => App::env('MY_DB_PORT'),\n    'database' => App::env('MY_DB_DATABASE'),\n    'user' => App::env('MY_DB_USER'),\n    'password' => App::env('MY_DB_PASSWORD'),\n    'schema' => App::env('MY_DB_SCHEMA'),\n    'tablePrefix' => App::env('MY_DB_TABLE_PREFIX'),\n    'attributes' => [\n        PDO::MYSQL_ATTR_SSL_CA => '/path/to/my.crt.pem'\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Asset Bundle Class Implementation in PHP\nDESCRIPTION: Template for creating an asset bundle class that defines source paths, dependencies, and JavaScript/CSS files to be registered.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\web\\AssetBundle;\nuse craft\\web\\assets\\cp\\CpAsset;\n\nclass MyPluginAsset extends AssetBundle\n{\n    public function init()\n    {\n        // define the path that your publishable resources live\n        $this->sourcePath = '@mynamespace/resources';\n\n        // define the dependencies\n        $this->depends = [\n            CpAsset::class,\n        ];\n\n        // define the relative path to CSS/JS files that should be registered with the page\n        // when this asset bundle is registered\n        $this->js = [\n            'script.js',\n        ];\n\n        $this->css = [\n            'styles.css',\n        ];\n\n        parent::init();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Address Field Values in Twig\nDESCRIPTION: Example showing how to access individual field values from an address element, including both native fields and custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  <li>Name: {{ myAddress.title }}</li>\n  <li>Postal Code: {{ myAddress.postalCode }}</li>\n  <li>Custom Label Color: {{ myAddress.myCustomColorFieldHandle }}</li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Payment Method Settings in PHP\nDESCRIPTION: Example of storing payment gateway configuration settings outside the database using a commerce.php config file. Shows how to override payment method settings using environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/payment-gateways.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'paymentMethodSettings' => [\n        '2' => [\n            'apiKey' => getenv('STRIPE_API_KEY'),\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Generating srcset Attribute with Asset Transforms in Twig\nDESCRIPTION: This snippet demonstrates how to use the getSrcSet() method to generate a srcset attribute with multiple image variations based on a single transform. It uses the tag template function to render an img element with the generated srcset.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({ width: 300, height: 300 }) %}\n{{ tag('img', {\n  src: asset.url,\n  width: asset.width,\n  height: asset.height,\n  srcset: asset.getSrcset(['1.5x', '2x', '3x']),\n  alt: asset.title,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Feature Toggles Based on Plugin Edition\nDESCRIPTION: Examples showing how to check the current plugin edition in both PHP and Twig to conditionally execute code based on the active edition. Uses the is() method to compare editions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-editions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif (Plugin::getInstance()->is(Plugin::EDITION_PRO) {\n    // Pro edition-only code goes here...\n}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if plugin('plugin-handle').is('pro') %}\n  {# Pro edition-only code goes here... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Element IDs with ids() Method\nDESCRIPTION: Demonstrates retrieving just the IDs of matching elements using the ids() method in both Twig and PHP. Returns an array of entry IDs from the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set entryIds = craft.entries()\n  .section('news')\n  .ids() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entryIds = Entry::find()\n    ->section('news')\n    ->ids();\n```\n\n----------------------------------------\n\nTITLE: Querying Table Field Data with GraphQL in Craft CMS\nDESCRIPTION: This GraphQL query demonstrates how to retrieve data from a Table field in Craft CMS. It specifies the field name and the column handles to be returned in the query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/table-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  # (...) query for relevant entry\n  myFieldHandle {\n    whiskey\n    description\n    proof\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Products by Type in Twig\nDESCRIPTION: Demonstrates how to query for products of a specific type using Craft's product query builder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothes = craft.products()\n  .type('clothes')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tags Field Data in Twig\nDESCRIPTION: Examples of how to access and work with Tags field data in Twig templates, including looping through related tags and checking for their existence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n\n{% set relatedTags = entry.myFieldHandle.all() %}\n{% if relatedTags|length %}\n  <ul>\n    {% for rel in relatedTags %}\n      <li><a href=\"{{ url('tags/'~rel.slug) }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ url('tags/'~rel.slug) }}\">{{ rel.title }}</a></p>\n{% endif %}\n\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related tags!</p>\n{% endif %}\n\n{% set relatedTags = entry.myFieldHandle\n  .group('blogEntryTags')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Methods in Craft Commerce Plugin (PHP)\nDESCRIPTION: This snippet demonstrates how to register custom shipping methods in a Craft Commerce plugin. It returns an array of shipping method instances that implement the required interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/shipping-methods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_registerShippingMethods()\n{\n    return [new CustomShipper_CourierDeliveryMethod()];\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Table Field Data in PHP\nDESCRIPTION: Shows how to loop through Table field rows and access column values using their handles in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/table-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $row) {\n    // Each row is a plain array, not an object:\n    $row['whiskey'];\n    $row['description'];\n    $row['proof'];\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Password Reset Form in Twig for Craft CMS\nDESCRIPTION: This Twig template creates a form that allows users to set a new password after requesting a password reset. It includes CSRF protection, hidden fields for the action, verification code, and user ID, plus a field for the new password and error handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/set-password-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" accept-charset=\"UTF-8\">\n    {{ getCsrfInput() }}\n    <input type=\"hidden\" name=\"action\" value=\"users/setPassword\">\n    <input type=\"hidden\" name=\"code\" value=\"{{ code }}\">\n    <input type=\"hidden\" name=\"id\" value=\"{{ id }}\">\n\n    <h3><label for=\"newPassword\">New Password</label></h3>\n    <input id=\"newPassword\" type=\"password\" name=\"newPassword\">\n    {% if errors is defined %}\n        <ul class=\"errors\">\n            {% for error in errors %}\n                <li>{{ error }}</li>\n            {% endfor %}\n        </ul>\n    {% endif %}\n\n    <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Variant by ID in Twig\nDESCRIPTION: Example showing how to fetch and display a specific variant by its ID using Twig. Includes error handling for non-existent variants and basic HTML output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/variant-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested variant ID from the query string #}\n{% set variantId = craft.app.request.getQueryParam('id') %}\n\n{# Create a variant query with the 'id' parameter #}\n{% set myVariantQuery = craft.variants()\n  .id(variantId) %}\n\n{# Fetch the variant #}\n{% set variant = myVariantQuery.one() %}\n\n{# Make sure it exists #}\n{% if not variant %}\n  {% exit 404 %}\n{% endif %}\n\n{# Display the variant #}\n<h1>{{ variant.title }}</h1>\n<!-- ... -->\n```\n\n----------------------------------------\n\nTITLE: Displaying Variant Stock Availability in Twig\nDESCRIPTION: This snippet demonstrates how to create a select menu for product variants, disabling options that have no stock available. It uses the hasStock() method to check inventory availability.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/inventory.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Assuming we're on a product page... #}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      {{ tag('option', {\n        text: variant.title,\n        value: variant.id,\n        disabled: not variant.hasStock(),\n      }) }}\n    {% endfor %}\n  </select>\n\n  <button>Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Preview in Nuxt with GraphQL\nDESCRIPTION: Example of implementing preview functionality in a Nuxt.js application using GraphQL and token-based authentication. The code demonstrates how to fetch entry data while respecting preview tokens for draft/revision content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_6\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nconst route = useRoute();\n\n// Construct a GraphQL fragment using the route param:\nconst query = `{\n  entry(slug: \"${route.params.slug}\") {\n    title\n    description\n  }\n}`;\n\n// Fetch the incoming token:\nconst token = route.query.token;\n\n// Build the URL, with `query` and `token` params:\nconst { data: gql } = await useFetch('https://my-project.ddev.site/api', {\n  params: { query, token },\n});\n</script>\n\n<template>\n  <article>\n    <h1>{{ gql.data.entry.title }}</h1>\n    <code>{{ gql.data.entry.uid }}</code>\n  </article>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Creating Matrix Block Queries in Twig and PHP\nDESCRIPTION: Shows how to create a new Matrix block query in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-blocks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new Matrix block query #}\n{% set myMatrixBlockQuery = craft.matrixBlocks() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new Matrix block query\n$myMatrixBlockQuery = \\craft\\elements\\MatrixBlock::find();\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Retrieving Customer Addresses in Craft Commerce\nDESCRIPTION: Defines the JSON structure for the response when retrieving customer addresses, including a success status and an array of address objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"addresses\": [] // Array of address objects\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Plugin License Key via Environment Variable in PHP\nDESCRIPTION: Example of how to set a plugin license key using PHP constants or environment variables with the $MY_PLUGIN_KEY syntax. This allows moving license keys out of the database and project config for additional security or deployment flexibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$MY_PLUGIN_KEY\n```\n\n----------------------------------------\n\nTITLE: Creating User Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of a User fixture data file in PHP for Craft CMS. It shows how to set up a user with a username and email.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'username' => 'User',\n        'email' => 'me@domain.tld',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Mutations in PHP\nDESCRIPTION: Example of registering custom GraphQL mutations using Craft's event system. Demonstrates how to merge custom mutations with existing ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutations;\nuse craft\\events\\RegisterGqlMutationsEvent;\nuse craft\\services\\Gql;\nuse GraphQL\\Type\\Definition\\Type;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_MUTATIONS,\n    function(RegisterGqlMutationsEvent $event) {\n        $event->mutations = array_merge(\n            $event->mutations,\n            WidgetMutations::getMutations(),\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Merging Arrays with the merge Filter in Twig\nDESCRIPTION: Shows how to merge arrays using the 'merge' filter, which has similar behavior to PHP's array_merge() function. Simple examples demonstrate merging arrays of values and hashes with keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set values = [1, 2] %}\n{% set values = values|merge(['Lucille', 'Buster']) %}\n{# Result: [1, 2, 'Lucille', 'Buster'] #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = { 'Buster': 'Bluth', 'Lindsay': 'Bluth' } %}\n{% set items = items|merge({ 'Tobias': 'Fünke', 'Lindsay': 'Fünke' }) %}\n{# Result: { 'Buster': 'Bluth', 'Tobias': 'Fünke', 'Lindsay': 'Fünke' } #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = { 'Buster': 'Bluth', 'Lindsay': 'Bluth' } %}\n{% set items = { 'Tobias': 'Fünke', 'Lindsay': 'Fünke' }|merge(items) %}\n{# Result: { 'Tobias': 'Fünke', 'Lindsay': 'Bluth', 'Buster': 'Bluth' } #}\n```\n\n----------------------------------------\n\nTITLE: Managing Customer Addresses in Twig\nDESCRIPTION: Forms for adding, updating, and deleting customer addresses, including proper CSRF protection and redirect handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/customer-addresses/save') }}\n  {{ redirectInput('commerce/customer/addresses') }}\n  <input type=\"text\" name=\"address[firstName]\" value=\"{{ address is defined ? address.firstName : '' }}\">\n  <input type=\"text\" name=\"address[lastName]\" value=\"{{ address is defined ? address.lastName : '' }}\">\n  {# ... #}\n  <button type=\"submit\">Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Users Field Form Implementation\nDESCRIPTION: Example of implementing a Users field in an element form with checkboxes for user selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Include a hidden input first so Craft knows to update the existing value\n   if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{# Get all of the possible user options #}\n{% set possibleUsers = craft.users()\n  .group('authors')\n  .orderBy('username ASC')\n  .all() %}\n\n{# Get the currently related user IDs #}\n{% set relatedUserIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleUser in possibleUsers %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleUser.id,\n          { checked: possibleUser.id in relatedUserIds }\n        ) }}\n        {{ possibleUser.friendlyName }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Attaching Custom Behaviors to Commerce Products\nDESCRIPTION: This code shows how to attach a custom behavior to Commerce products using the EVENT_DEFINE_BEHAVIORS event. When initialized, this event listener adds the FinanceableProductBehavior to all Product elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\mypluginhandle\\behaviors\\FinanceableProductBehavior;\n\nuse craft\\commerce\\elements\\Product;\nuse craft\\events\\DefineBehaviorsEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Product::class,\n    Product::EVENT_DEFINE_BEHAVIORS,\n    function(DefineBehaviorsEvent $event) {\n        $event->sender->attachBehaviors([\n            FinancableProductBehavior::class,\n            // ... any other behaviors\n        ]);\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using Craft App Services in Twig Templates\nDESCRIPTION: Examples of accessing various Craft application services and their common uses in Twig templates, including request, session, user, and configuration data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# get the value of an `email` query parameter or post field #}\n{% set address = craft.app.request.getParam('email') %}\n\n{# get the value of the `notice` flash message #}\n{% set message = craft.app.session.getFlash('notice') %}\n\n{# get the current user's email address #}\n{% set email = craft.app.user.email %}\n\n{# is `devMode` enabled? #}\n{% set isDevMode = craft.app.config.general.devMode %}\n\n{# get a custom field by its `body` handle #}\n{% set field = craft.app.fields.getFieldByHandle('body') %}\n\n{# get all the sections for the current site #}\n{% set sections = craft.app.sections.getAllSections() %}\n\n{# get all the sites for the current Craft installation #}\n{% set sites = craft.app.sites.allSites() %}\n```\n\n----------------------------------------\n\nTITLE: Running Database Character Set Conversion\nDESCRIPTION: Optional command to convert your MySQL database character set for optimal performance with Craft 4.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nphp craft db/convert-charset\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Multiple Sets of Elements in Twig\nDESCRIPTION: This example demonstrates how to eager-load multiple sets of elements (assets and Matrix blocks) in a single query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries\n  .section('news')\n  .with([\n    'assetsField',\n    'matrixField'\n  ])\n  .all() %}\n\n{% for entry in entries %}\n  {# Get the eager-loaded asset, if there is one #}\n  {% set image = entry.assetsField[0] ?? null %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n\n  {# Loop through any eager-loaded Matrix blocks #}\n  {% for block in entry.matrixField %}\n    {{ block.textField }}\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Removing Cart Items with Twig\nDESCRIPTION: Form implementation that includes a checkbox for removing items from the cart alongside quantity and note updates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n    <input type=\"checkbox\" name=\"lineItems[{{ item.id }}][remove]\" value=\"1\"> Remove item<br>\n  {% endfor %}\n  <button>Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Calculating Average Review Scores with Collections\nDESCRIPTION: Example of chaining collection methods to fetch recent reviews and calculate their average rating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/collections.md#2025-04-22_snippet_2\n\nLANGUAGE: Twig\nCODE:\n```\n{% set recentReviews = craft.entries()\n  .section('reviews')\n  .relatedTo({\n    targetElement: product,\n  })\n  .postDate(\">= #{now|date_modify('-1 month')}\")\n  .collect() %}\n\n{{ recentReviews.pluck('rating').average() }}\n```\n\n----------------------------------------\n\nTITLE: Adding Control Panel Navigation Items with Event Handler in PHP\nDESCRIPTION: Shows how to register new control panel navigation items using the EVENT_REGISTER_CP_NAV_ITEMS event. The code demonstrates setting up event handling to add custom navigation items with URLs, labels, and icons.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCpNavItemsEvent;\nuse craft\\web\\twig\\variables\\Cp;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Cp::class,\n        Cp::EVENT_REGISTER_CP_NAV_ITEMS,\n        function(RegisterCpNavItemsEvent $event) {\n            $event->navItems[] = [\n                'url' => 'section-url',\n                'label' => 'Section Label',\n                'icon' => '@mynamespace/path/to/icon.svg',\n            ];\n        }\n    );\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Example Log Message Format in Craft CMS\nDESCRIPTION: Demonstrates the standard format of a log message in Craft CMS, showing timestamp, target, level, category, message and context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n2022-07-15 00:00:04 [web.INFO] [yii\\db\\Connection::open] Opening DB connection: mysql:host=ddev-starter-blog-db;dbname=db;port=3306 {\"memory\":913536}\n```\n\n----------------------------------------\n\nTITLE: Suggesting Environment Variables and Aliases for URL/Path Settings with Twig\nDESCRIPTION: This snippet shows how to enable suggestions for both environment variables and aliases in an autosuggest input, which is useful for settings that represent URLs or file system paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.autosuggestField({\n  // ...\n  suggestEnvVars: true,\n  suggestAliases: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Registering User Permissions in Craft CMS\nDESCRIPTION: This snippet demonstrates how to register new user permissions using the EVENT_REGISTER_PERMISSIONS event. It shows the basic structure for adding a permission group with a single permission, and includes an example of nested permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/user-permissions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUserPermissionsEvent;\nuse craft\\services\\UserPermissions;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        UserPermissions::class,\n        UserPermissions::EVENT_REGISTER_PERMISSIONS,\n        function(RegisterUserPermissionsEvent $event) {\n            $event->permissions['Permission Group Name'] = [\n                'permissionName' => [\n                    'label' => 'Permission Label',\n                ],\n            ];\n        }\n    );\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n'permissionName' => [\n    'label' => 'Permission Label',\n    'nested' => [\n        'nestedPermissionName' => [\n            'label' => 'Nested Permission Label',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Submitting Base64-Encoded File Data for Assets in Twig\nDESCRIPTION: This code shows how to submit base64-encoded file data as an alternative to file uploads for an Assets field. It uses hidden inputs to provide both the encoded data and the filename.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput(\n  'fields[myFieldHandle][data][]',\n  'data:image/jpeg;base64,my-base64-data'\n) }}\n{{ hiddenInput('fields[myFieldHandle][filename][]', 'myFile.ext') }}\n```\n\n----------------------------------------\n\nTITLE: Requiring Permissions in Controllers\nDESCRIPTION: Shows how to restrict access to controller actions by requiring specific permissions. The requirePermission() method will return a 403 error if the user lacks the specified permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function actionStayUpLate()\n{\n    // Require the `stayUpLate` permission\n    $this->requirePermission('stayUpLate');\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing the find() Method in Element Class\nDESCRIPTION: Adding the find() method to a custom element class that returns a new instance of the element query class. This enables the element to be queried using the fluent query interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse mynamespace\\elements\\db\\ProductQuery;\n\n// ...\n\nclass Product extends Element\n{\n    public static function find(): ProductQuery\n    {\n        return new ProductQuery(static::class);\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating File Upload Input for Assets Field in Twig\nDESCRIPTION: This snippet demonstrates how to create a file input for uploading new assets to an Assets field. It uses the 'input' function with the 'file' type and allows multiple file uploads.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Conditional Logic Using If/Elseif in Twig\nDESCRIPTION: This example demonstrates how to use traditional if/elseif conditionals to check a Matrix block's type and render different content accordingly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/switch.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if matrixBlock.type == \"text\" %}\n\n    {{ matrixBlock.textField|markdown }}\n\n{% elseif matrixBlock.type == \"image\" %}\n\n    {{ matrixBlock.image[0].getImg() }}\n\n{% else %}\n\n    <p>A font walks into a bar.</p>\n    <p>The bartender says, \"Hey, we don't serve your type in here!\"</p>\n\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Custom Queue Configuration\nDESCRIPTION: PHP configuration for setting up additional custom queues via application configuration. Demonstrates creating a separate queue component.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'bootstrap' => [\n        'sluggishQueue',\n    ],\n    'components' => [\n        'sluggishQueue' => [\n            'class' => craft\\queue\\Queue::class,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Formatting Strings and Arrays with Twig Filters in Craft CMS\nDESCRIPTION: Various Twig filters for string and array manipulation in Craft CMS, including camelCase formatting, column extraction, and array containment checking.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|camel }}\n{# Output: fooBar #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entryIds = entries|column('id') %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set authorNames = entries|column(e => e.author.fullName) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set works = craft.entries()\n  .section('artwork')\n  .all() %}\n\n{% if works|contains('rating', 'm') %}\n  <p class=\"mature\">Some of this artwork is meant for mature viewers.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Interface Reference for Tax Engine Implementation\nDESCRIPTION: Key interface methods that must be implemented when creating a custom tax engine, including view control and UI customization methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/tax-engines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nviewTaxCategories() // Returns boolean to control tax category visibility\ncreateTaxCategories() // Returns boolean to control tax category creation\neditTaxCategories() // Returns boolean to control tax category editing\ntaxCategoryActionHtml() // Returns HTML for additional tax category actions\ncpTaxNavSubItems() // Returns navigation items for the tax section\n```\n\n----------------------------------------\n\nTITLE: Using Twig Escape Filter for Content Security\nDESCRIPTION: Shows how to explicitly escape HTML in user-supplied content before processing it as Markdown.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Escape any HTML in the Body field, then format as Markdown #}\n{{ entry.body|escape|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Creating a Multi-select Field Form in Twig\nDESCRIPTION: Provides a template for creating an HTML form with a Multi-select field in Twig. Includes hidden input to handle empty selections and dynamically generates options based on field configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{# Include a hidden input first so Craft knows to update the\n   existing value, if no options are selected. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n<select multiple name=\"fields[myFieldHandle][]\">\n  {% for option in field.options %}\n      {% set selected = entry is defined\n        ? entry.myFieldHandle.contains(option.value)\n        : option.default %}\n\n      <option value=\"{{ option.value }}\"\n        {% if selected %} selected{% endif %}\n      >\n        {{ option.label }}\n      </option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Implementing Coupon Code Form in Twig\nDESCRIPTION: Basic form implementation for submitting a coupon code to a cart. Includes CSRF protection and redirect handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/coupon-codes.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Basic Control Panel Page Template in Twig\nDESCRIPTION: Minimal template example for creating a new control panel page, extending the base CP layout with a title and content block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_layouts/cp.twig\" %}\n{% set title = \"Page Title\"|t('plugin-handle') %}\n\n{% block content %}\n  <p>Page content goes here</p>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Applying Project Config Changes in Craft CMS via CLI\nDESCRIPTION: Command to apply pending Project Config changes using Craft's CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/apply\n```\n\n----------------------------------------\n\nTITLE: Setting and Getting Global Collection Values in Twig\nDESCRIPTION: Demonstrates how to use the _globals collection to store and retrieve values globally in Twig templates. Shows both single and multiple value assignment patterns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% do _globals.set('theme', 'dark') %}\n{% do _globals.set({\n  red: '#F00',\n  green: '#0F0',\n  blue: '#00F',\n}) %}\n\n{{ _globals.get('theme') }}\n{# -> 'dark' #}\n\n{{ _globals.get('red') }}\n{# -> '#F00' #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Mailer Component in Craft CMS (PHP)\nDESCRIPTION: This example shows how to override the mailer component configuration in Craft CMS. It demonstrates setting up a different mail transport for development mode using Mailpit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'mailer' => function() {\n            // Get the default component config:\n            $config = App::mailerConfig();\n\n            // Use Mailpit in dev mode:\n            if (Craft::$app->getConfig()->getGeneral()->devMode) {\n                $adapter = craft\\helpers\\MailerHelper::createTransportAdapter(\n                    craft\\mail\\transportadapters\\Smtp::class,\n                    [\n                        'host' => App::env('MAILPIT_SMTP_HOSTNAME'),\n                        'port' => App::env('MAILPIT_SMTP_PORT'),\n                    ]\n                );\n\n                // Override the transport:\n                $config['transport'] = $adapter->defineTransport();\n            }\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Nested Sets of Elements in Twig\nDESCRIPTION: This snippet shows how to eager-load nested sets of elements, such as assets related to entries that are related to the main entries being queried.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    'entriesField.assetsField'\n  ])\n  .all() %}\n\n{% for entry in entries %}\n  {# Loop through any eager-loaded sub-entries #}\n  {% for relatedEntry in entry.entriesField %}\n    {# Get the eager-loaded asset, if there is one #}\n    {% set image = relatedEntry.assetsField[0] ?? null %}\n    {% if image %}\n      <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n    {% endif %}\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Garbage Collection for Soft-Deleted Records in PHP\nDESCRIPTION: Shows how to register a garbage collection event handler to automatically hard-delete soft-deleted records that have expired based on the softDeleteDuration config setting. This code would be placed in a module or plugin's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\services\\Gc;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Gc::class,\n        Gc::EVENT_RUN,\n        function() {\n            Craft::$app->gc->hardDelete('{{%mytablename}}');\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Asset Bundle class in PHP for Craft CMS\nDESCRIPTION: Template for creating an asset bundle class in a Craft CMS plugin. This class extends Craft's AssetBundle class and defines source paths, dependencies, and JavaScript/CSS files to be registered.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\web\\AssetBundle;\nuse craft\\web\\assets\\cp\\CpAsset;\n\nclass FooBundle extends AssetBundle\n{\n    public function init()\n    {\n        // define the path that your publishable resources live\n        $this->sourcePath = '@mynamespace/resources';\n\n        // define the dependencies\n        $this->depends = [\n            CpAsset::class,\n        ];\n\n        // define the relative path to CSS/JS files that should be registered with the page\n        // when this asset bundle is registered\n        $this->js = [\n            'script.js',\n        ];\n\n        $this->css = [\n            'styles.css',\n        ];\n\n        parent::init();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying GraphQL Type Fields in Craft CMS\nDESCRIPTION: This example demonstrates how to modify GraphQL type fields in Craft CMS. It removes 'id' fields and adds an 'authorEmail' field to the EntryInterface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\events\\DefineGqlTypeFieldsEvent;\nuse craft\\gql\\TypeManager;\nuse GraphQL\\Type\\Definition\\Type;\nuse yii\\base\\Event;\n\nEvent::on(\n    TypeManager::class,\n    TypeManager::EVENT_DEFINE_GQL_TYPE_FIELDS,\n    function(DefineGqlTypeFieldsEvent $event) {\n        // Remove all ids to enforce use of uids\n        unset($event->fields['id']);\n\n        // Add author email to all entries\n        if ($event->typeName == 'EntryInterface') {\n            $event->fields['authorEmail'] = [\n                'name' => 'authorEmail',\n                'type' => Type::string(),\n                'resolve' => function($source, $arguments, $context, $resolveInfo) {\n                    // Illustrative only; a query per entry would perform poorly\n                    return $source->getAuthor()->email;\n                }\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Sort Options for Element Index in PHP\nDESCRIPTION: Defines sort options for the element index by implementing the defineSortOptions() method. It also shows how to customize the behavior of a sort attribute.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSortOptions(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n[\n    'label' => Craft::t('app', 'Date Updated'),\n    'orderBy' => 'elements.dateUpdated',\n    'attribute' => 'dateUpdated',\n    'defaultDir' => 'desc',\n],\n```\n\n----------------------------------------\n\nTITLE: Enabling Content Support for Custom Elements in Craft CMS\nDESCRIPTION: Adds the hasContent method to enable content support for custom elements. This allows elements to have entries in the content table, which is required for titles and custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasContent(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Auto-filling Addresses from Address Book in Craft Commerce Twig Template\nDESCRIPTION: This snippet demonstrates how to allow customers to populate their cart addresses with previously saved ones from their address book. It includes a radio button selection for each saved address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n{% set customerAddresses = currentUser ? currentUser.addresses : [] %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% if customerAddresses | length %}\n    <div class=\"shipping-address\">\n      {% for address in customerAddresses %}\n        <label>\n          {{ input('radio', 'shippingAddressId', address.id, {\n            checked: cart.sourceShippingAddressId == address.id,\n          }) }}\n          {{ address|address }}\n        </label>\n      {% endfor %}\n    </div>\n\n    {# ... same process for `billingAddressId` ... #}\n  {% else %}\n    {# No existing addresses! See examples above to learn about sending a new address. #}\n  {% endif %}\n\n  <button>Save Addresses</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Notices in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve various types of order notices using getNotices() and getFirstNotice() methods in both Twig and PHP. Examples include getting all notices, notices for specific attributes, and notices of specific types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{# @var order craft\\commerce\\elements\\Order #}\n\n{# Get a multi-dimensional array of notices by attribute key #}\n{% set notices = order.getNotices() %}\n\n{# Get an array of notice models for the `couponCode` attribute only #}\n{% set couponCodeNotices = order.getNotices(null, 'couponCode') %}\n\n{# Get the first notice only for the `couponCode` attribute #}\n{% set firstCouponCodeNotice = order.getFirstNotice(null, 'couponCode') %}\n\n{# Get an array of notice models for changed line item prices #}\n{% set priceChangeNotices = order.getNotices('lineItemSalePriceChanged') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// @var craft\\commerce\\elements\\Order $order\n\n// Get a multi-dimensional array of notices by attribute key\n$notices = $order->getNotices();\n\n// Get an array of notice models for the `couponCode` attribute only\n$couponCodeNotices = $order->getNotices(null, 'couponCode');\n\n// Get the first notice only for the `couponCode` attribute\n$firstCouponCodeNotice = $order->getFirstNotice(null, 'couponCode');\n\n// Get an array of notice models for changed line item prices\n$priceChangeNotices = $order->getNotices('lineItemSalePriceChanged');\n```\n\n----------------------------------------\n\nTITLE: Resetting Commerce Data via CLI\nDESCRIPTION: This command cleanses Commerce data without uninstalling the plugin or removing store configuration. It deletes all orders, subscriptions, payment sources, customers, addresses and resets discount usages, which is useful for removing test data after initial development.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/console-commands.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/reset-data\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying User Addresses in Twig\nDESCRIPTION: Shows how to query addresses owned by the current user and display them using the address filter in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n\n{% set addresses = craft.addresses()\n  .owner(currentUser)\n  .all() %}\n\n{% for addr in addresses %}\n  <address>{{ addr|address }}</address>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Optimizing Arithmetic Operations in Twig\nDESCRIPTION: This code compares slow and optimized ways of finding minimum and maximum values for a given field in Twig, demonstrating the use of select() and orderBy() methods for better performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{# Slow #}\n{% set races = craft.entries()\n  .section('races')\n  .all() %}\n{% set fastestTime = min(races|column('winningTime')) %}\n{% set slowestTime = max(races|column('winningTime')) %}\n\n{# Optimized #}\n{% set raceQuery = craft.entries()\n  .section('races')\n  .select('winningTime') %}\n\n{% set fastestTime = clone(raceQuery)\n  .orderBy('winningTime ASC')\n  .scalar() %}\n{% set slowestTime = clone(raceQuery)\n  .orderBy('winningTime DESC')\n  .scalar() %}\n```\n\n----------------------------------------\n\nTITLE: WebP Format Transform Override\nDESCRIPTION: Demonstrates how to override the image format of a named transform to generate WebP files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<source type=\"image/webp\" srcset=\"{{ asset.getUrl({\n  transform: 'thumb',\n  format: 'webp',\n}) }}\">\n```\n\n----------------------------------------\n\nTITLE: Updating Purchasable Tables After SKU Modification in PHP\nDESCRIPTION: This code shows how to update multiple database tables when a purchasable's SKU needs to be modified during restoration. It updates the variant table, product table (if the variant is default), and commerce_purchasables table to maintain data consistency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/purchasable-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif ($found) {\n\n    $this->sku = $this->getSku() . '-1'; // make unique\n\n    // Update variant table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_variants}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n\n    if ($this->isDefault) {\n        Craft::$app->getDb()->createCommand()->update('{{%commerce_products}}',\n            ['defaultSku' => $this->sku],\n            ['id' => $this->productId]\n        )->execute();\n    }\n\n    // Update purchasable table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_purchasables}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Purchasable Sale Matches in Commerce\nDESCRIPTION: This event fires when a purchasable matches a sale rule and allows for validation or prevention of the sale match. The event handler can set isValid to false to prevent the application of the matched sale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SaleMatchEvent;\nuse craft\\commerce\\services\\Sales;\nuse yii\\base\\Event;\n\nEvent::on(Sales::class, Sales::EVENT_BEFORE_MATCH_PURCHASABLE_SALE, function(SaleMatchEvent $e) {\n     // Perhaps prevent the purchasable match with sale based on some business logic.\n});\n```\n\n----------------------------------------\n\nTITLE: Using Twig Print Statement for User Display\nDESCRIPTION: Shows how to output dynamic user data using Twig print statements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<p>Hi, {{ currentUser.name }}</p>\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Adjuster Class in Craft Commerce PHP\nDESCRIPTION: Demonstrates how to create a custom adjuster class that applies a $2 discount to each line item in an order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/adjusters.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\base\\Component;\nuse craft\\commerce\\base\\AdjusterInterface;\nuse craft\\commerce\\elements\\Order;\nuse craft\\commerce\\models\\OrderAdjustment;\n\nclass MyAdjuster extends Component implements AdjusterInterface\n{\n    public function adjust(Order $order): array\n    {\n        $adjustments = [];\n\n        foreach ($order->getLineItems() as $item) {\n            $adjustment = new OrderAdjustment;\n            $adjustment->type = 'discount';\n            $adjustment->name = '$2 off';\n            $adjustment->description = '$2 off everything in the store';\n            // `sourceSnapshot` can contain information to explain the adjustment\n            $adjustment->sourceSnapshot = [ 'data' => 'value' ];\n            $adjustment->amount = -2;\n            $adjustment->setOrder($order);\n            $adjustment->setLineItem($item);\n\n            $adjustments[] = $adjustment;\n        }\n\n        return $adjustments;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Caching Data with Craft's Cache Component in PHP\nDESCRIPTION: Demonstrates how to use Craft's cache component to store and retrieve temporary data efficiently. It shows setting a cache key based on parameters and using getOrSet() to fetch or generate cached data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/topics.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\n\n$params = [\n    'productId' => 1234,\n];\n\n$key = 'my-plugin:' . md5(json_encode($params));\n\n$value = Craft::$app->getCache()->getOrSet($key, function() {\n    // Fetch remote data...\n\n    return $data;\n}, $duration);\n```\n\n----------------------------------------\n\nTITLE: HTML Tag Generation in Twig\nDESCRIPTION: Shows usage of the tag() function for generating HTML elements with various attributes and content options. Includes examples of text content, HTML content, and attribute handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  class: 'foo'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  text: 'Hello'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  html: 'Hello<br>world'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('input', {\n  id: 'foo',\n  name: 'bar',\n  required: true\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('input', {\n  name: 'bar',\n  value: 'Foobar & Baz',\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Service via Plugin config()\nDESCRIPTION: Example of making a service extensible using the plugin's config() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic static function config(): array\n{\n    return [\n        'components' => [\n            'foo' => ['class' => \\mynamespace\\services\\Foo::class],\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Addresses in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve addresses from an Addresses field and display them in a list. It uses the field's handle to access the addresses and the 'address' filter to format each address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set addresses = entry.contacts.all() %}\n\n<h2>Contacts</h2>\n\n<ul>\n  {% for address in addresses %}\n    <li>{{ address|address }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating an Address Query in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new address query using both Twig and PHP in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAddressQuery = craft.addresses() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$myAddressQuery = \\craft\\elements\\Address::find();\n```\n\n----------------------------------------\n\nTITLE: Fetching Country Repository Data in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve country data from the address repository using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.app.getAddresses().getCountryRepository().getAll() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$countries = Craft::$app->getAddresses()->getCountryRepository()->getAll();\n```\n\n----------------------------------------\n\nTITLE: Reusing Queries with clone() in Twig\nDESCRIPTION: Shows how to create a base query and then clone it to create multiple similar queries with additional parameters, avoiding redundant code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Assuming we're on a page for a specific branch: #}\n{% set upcomingEvents = craft.entries()\n  .section('events')\n  .dateStart(\">= #{now|atom}\")\n  .branch(entry) %}\n\n{% set weekEvents = clone(upcomingEvents)\n  .dateEnd(\"< #{now|modify('+1 week')|atom}\") %}\nEvents in the next week: {{ weekEvents.count() }}\n\n{% set monthEvents = clone(upcomingEvents)\n  .dateEnd(\"< #{now|modify('+1 month')|atom}\") %}\nEvents in the next month: {{ monthEvents.count() }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Composer Autoloading for Craft CMS Module\nDESCRIPTION: This JSON snippet shows how to set up Composer's autoload configuration for a Craft CMS module. It defines a PSR-4 autoloading rule that maps the module's namespace to its directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/module-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"autoload\": {\n    \"psr-4\": {\n      \"foo\\\\\": \"modules/foo/\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Database Manipulation in Craft CMS Migrations\nDESCRIPTION: Examples showing the recommended approach for manipulating database data in migrations using Craft's migration methods instead of direct database commands.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$this->db->createCommand()\n    ->insert('{{%mytablename}}', $rows)\n    ->execute();\n\n// Good:\n$this->insert('{{%mytablename}}', $rows);\n```\n\n----------------------------------------\n\nTITLE: Creating Variant Queries in Twig, PHP, and GraphQL\nDESCRIPTION: Shows how to create a new variant query using Twig, PHP, and GraphQL in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new variant query #}\n{% set myVariantQuery = craft.variants() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new variant query\n$myVariantQuery = \\craft\\commerce\\elements\\Variant::find();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Create a new variant query\n{\n  variants {\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a DbCommand Query in Craft CMS PHP\nDESCRIPTION: Demonstrates how to create a database query command in Craft CMS, which returns a DbCommand object extending Yii's CDbCommand with enhancements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$query = craft()->db->createCommand();\n```\n\n----------------------------------------\n\nTITLE: Generating Data URLs with dataUrl Function\nDESCRIPTION: Shows how to use the dataUrl function to output an asset or file as a base64-encoded data URL, with examples for both asset objects and file paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{# Asset object `myLogoAsset` #}\n<img src=\"{{ dataUrl(myLogoAsset) }}\" />\n\n{# File path, optionally using an alias #}\n<img src=\"{{ dataUrl('@webroot/images/my-logo-asset.svg') }}\" />\n\n{# Output: <img src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwMCIgdmd(...)\" /> #}\n```\n\n----------------------------------------\n\nTITLE: Including a Partial Template in Twig\nDESCRIPTION: Shows how to include a partial template and pass variables to it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% include '_tip.twig' with {\n  tipText: 'I'm a helpful tip!'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Extracting Column Values from Arrays with column Filter in Twig\nDESCRIPTION: The 'column' filter returns values from a single property or key in the input array, supporting both direct property access and arrow functions for complex cases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set entryIds = entries|column('id') %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set authorNames = entries|column(e => e.author.fullName) %}\n```\n\n----------------------------------------\n\nTITLE: Capturing Search Event Data in Craft CMS\nDESCRIPTION: Basic example of listening to the Search::EVENT_AFTER_SEARCH event to access search-related data including the element query, search query, site ID, raw results, and element scores.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Original ElementQuery instance:\n        $elementQuery = $e->elementQuery;\n\n        // SearchQuery instance, with parsed tokens:\n        $query = $e->query;\n\n        // Site(s) the search was performed in:\n        $siteId = $e->siteId;\n\n        // Raw index matches (there may be multiple rows per element):\n        $results = $e->results;\n\n        // Corresponding element score totals, indexed by element ID:\n        $scores = $e->scores;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Partial Payment Options in Twig\nDESCRIPTION: This snippet demonstrates how to create a dropdown menu for partial payment options. It calculates and hashes half and full payment amounts, allowing customers to choose between 50% or 100% payment at checkout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set halfAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance * 0.5,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n{% set fullAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n<select name=\"paymentAmount\">\n  <option value=\"{{ halfAmount|hash }}\">\n    50% ({{ halfAmount|commerceCurrency(cart.paymentCurrency) }})\n  </option>\n  <option value=\"{{ fullAmount|hash }}\">\n    100% ({{ fullAmount|commerceCurrency(cart.paymentCurrency) }})\n  </option>\n</select>\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Instance with Twig in Craft CMS\nDESCRIPTION: Retrieves a plugin instance by its handle and accesses its properties. Returns null if the plugin is not installed or enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n{{ plugin('commerce').version }}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Elements Related to Matrix Blocks in Twig\nDESCRIPTION: This snippet shows the syntax for eager-loading relations from Matrix blocks, which requires prefixing the relational field's handle with the block type's handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.matrixField\n  .with(['blockType:assetsField'])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Assets by Kind in PHP\nDESCRIPTION: A PHP example demonstrating how to filter related assets to return only images by applying the kind parameter to the query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$relatedAssets = $entry->myFieldHandle\n    ->kind('image')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Registering a Template Hook Handler in PHP\nDESCRIPTION: Shows how to register a callback function for a custom template hook in a Craft CMS plugin or module. The function can modify the template context and return output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/template-hooks.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->view->hook('my-custom-hook-name', function(array &$context) {\n    // Modify template *context*\n    $context['foo'] = 'bar';\n\n    // Return template *output*\n    return '<p>Hey!</p>';\n});\n```\n\n----------------------------------------\n\nTITLE: Fixed Order Querying with External API Results in Twig\nDESCRIPTION: Illustrates how to use fixedOrder() method to maintain a specific order of entries when querying based on external API results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{% set someExternalApiResult = ['SKU-C', 'SKU-R', 'SKU-A', 'SKU-F', 'SKU-T', '...'] %}\n\n{# Pre-flight a query to get a SKU-to-ID map: #}\n{% set internalIdMatches = craft.entries()\n  .select(['id', 'sku'])\n  .indexBy('sku')\n  .asArray()\n  .all() %}\n\n{# Translate SKUs to internal IDs, and load the entries in that order: #}\n{% set orderedMatches = craft.entries()\n  .id(someExternalApiResult | map(sku => internalIdMatches[sku].id))\n  .fixedOrder()\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Email Properties Before Send in PHP\nDESCRIPTION: Event handler to modify email properties before sending, such as adding BCC recipients for specific order conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\MailEvent;\nuse craft\\commerce\\services\\Emails;\nuse craft\\helpers\\StringHelper;\nuse yii\\base\\Event;\n\nEvent::on(\n    Emails::class,\n    Emails::EVENT_BEFORE_SEND_MAIL,\n    function (MailEvent $event) {\n        $order = $event->order;\n        $email = $event->craftEmail;\n\n        // Add store administrator to any email sent regarding unpaid orders:\n        if ($order->getIsUnpaid()) {\n            $email->setBcc('help@pixelandtonic.com');\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Language-Based Conditional Content in Twig\nDESCRIPTION: This snippet shows how to conditionally display content based on the current language setting in Craft CMS using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.app.language == 'de' %}\n  <p>Guten Tag!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Querying Multiple Global Sets in Craft CMS GraphQL API\nDESCRIPTION: The 'globalSets' query is used to retrieve multiple global sets. It supports various arguments for filtering and customizing the query results, including ID, UID, status, site, title, and related elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_13\n\nLANGUAGE: GraphQL\nCODE:\n```\nglobalSets(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  site: [String]\n  title: [String]\n  handle: [String]\n  # ... other arguments\n) {\n  # ... fields to return\n}\n```\n\n----------------------------------------\n\nTITLE: Defining a Controller Action with Route Parameters in Craft CMS\nDESCRIPTION: Example of a controller action method that accepts an optional ID parameter, which can be populated from route or query parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\controllers;\n\nuse craft\\web\\Controller;\n\nclass WidgetsController extends Controller\n{\n    public function actionEdit(?int $id = null)\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Twig exit Tag with HTTP Status Code\nDESCRIPTION: Shows how to use Craft's exit tag to terminate execution with a specific HTTP status code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# This is not the page you are looking for #}\n{% exit 404 %}\n```\n\n----------------------------------------\n\nTITLE: Building Resubmission-Friendly Form in Twig\nDESCRIPTION: A Twig template implementing a form that handles both new and existing Widget objects. The form supports validation error displays and retains state between submissions without explicit action attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"POST\">\n  {{ csrfInput() }}\n  {{ actionInput('my-plugin/widgets/save') }}\n\n  {# Our `widget` may be new, so it won't always have an ID: #}\n  {% if widget.id %}\n    {{ hiddenInput('id', widget.id) }}\n  {% endif %}\n\n  <label>\n    {{ input('text', 'name', widget.name) }}\n\n    {# It may also have come back with validation errors attached: #}\n    {% if widget.hasErrors('name') %}\n        <span>{{ widget.getErrors('name') | join(', ') }}</span>\n    {% endif %}\n  </label>\n\n  <button type=\"submit\">Save Widget</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating Plugin and Content Migrations via CLI in Craft CMS\nDESCRIPTION: Command line instructions for creating new migration files for plugins or content in a Craft CMS project. The commands generate the appropriate migration files at the correct locations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd /path/to/project\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create my_migration_name --plugin=my-plugin-handle\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create my_migration_name\n```\n\n----------------------------------------\n\nTITLE: Soft-Deleting Records with Query Command in PHP\nDESCRIPTION: Shows how to use the softDelete() method of craft\\db\\Command to soft-delete records directly via database commands. This is an alternative to using Active Record for soft deletion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->db->createCommand()\n    ->softDelete('{{%mytablename}}', ['id' => $id])\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Advanced Twig Query for Filtering Stew Entries\nDESCRIPTION: Uses andWhere() method to filter entries based on custom field values, demonstrating complex query conditions and ordering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% set safeStews = craft.entries()\n  .section('dishes')\n  .andWhere([\n    ['>', 'scovilleRating', '1000'],\n    ['<', 'scovilleRating', '9000'],\n  ])\n  .andWhere([\n    'not',\n    ['like', 'primaryProtein, '%shellfish%'],\n    ['like', 'primaryProtein, '%shrimp%'],\n    ['like', 'primaryProtein, '%scallop%'],\n  ])\n  .orderBy('scovilleRating')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining URL Rules in PHP for Craft CMS Routing\nDESCRIPTION: Example of defining URL rules in the config/routes.php file for Craft CMS. Shows how to route requests to controller actions or templates, including the use of named parameters and site-specific rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/routing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Route blog/archive/YYYY to a controller action\n    'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n\n    // Route blog/archive/YYYY to a template\n    'blog/archive/<year:\\d{4}>' => ['template' => 'blog/_archive'],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'siteHandle' => [\n        'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'blog/<entrySlug:{slug}>' => 'controller/action/path',\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing Outstanding Balance Payment Form in Twig\nDESCRIPTION: Template for allowing customers to pay outstanding balances on existing orders, demonstrating how to specify order number and email address explicitly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/making-payments.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set number = '12345' %}\n{% set email = 'email@address.foo' %}\n{% set cart = craft.orders().number(number).one() ?? null %}\n{% set cancelUrl = craft.app.request.getUrl()|hash %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('/shop/customer/order?number={number}&success=true') }}\n  {{ hiddenInput('cancelUrl', cancelUrl) }}\n  {{ hiddenInput('email', email) }}\n  {{ hiddenInput('orderNumber', cart.number) }}\n\n  {% namespace cart.gateway.handle|commercePaymentFormNamespace %}\n    {{ cart.gateway.getPaymentFormHtml({})|raw }}\n  {% endnamespace %}\n\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Set Fields in Twig\nDESCRIPTION: Shows how to access fields from a global set in Twig templates using the global set's handle\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/globals.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ companyInfo.yearEstablished }}\n```\n\n----------------------------------------\n\nTITLE: Registering Granular GraphQL Schema Components in Craft CMS\nDESCRIPTION: Event handler that registers type-specific GraphQL schema components using UIDs. This approach allows more fine-grained control over which specific widget types can be accessed via GraphQL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\Plugin;\nuse craft\\events\\RegisterGqlSchemaComponentsEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_SCHEMA_COMPONENTS,\n    function(RegisterGqlSchemaComponentsEvent $event) {\n        // Assume an array of objects each having `uid` and `name` properties\n        $widgetTypes = Plugin::getInstance()->getAllWidgetTypes();\n\n        if (!empty($widgetTypes)) {\n            $queryComponents = [];\n\n            foreach ($widgetTypes as $widgetType) {\n                $queryComponents['widget.' . $widgetType->uid . ':read'] = [\n                    'label' => 'View Widgets – ' . $widgetType->name\n                ];\n            }\n        }\n\n        $event->queries = array_merge($event->queries, [\n            // \"Widgets\" group\n            'Widgets' => $queryComponents,\n        ]);\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Supervisor Configuration\nDESCRIPTION: Supervisor configuration file for managing multiple Craft queue worker processes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_4\n\nLANGUAGE: supervisor\nCODE:\n```\n[program:craft-queue-worker]\nprocess_name=%(program_name)s_%(process_num)02d\nnumprocs=4\ncommand=/usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\nuser=www-data\ngroup=www-data\nstopwaitsecs=300\n```\n\n----------------------------------------\n\nTITLE: Systemd Service Configuration for Queue Worker\nDESCRIPTION: Configuration file for setting up the Craft queue as a systemd service. Includes dependencies, user permissions, and restart policies for reliable queue processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_3\n\nLANGUAGE: systemd\nCODE:\n```\n# /etc/systemd/system/craft-queue-worker@.service\n# Note the @ in the filename above!\n\n[Unit]\nDescription=Craft CMS Queue %i\nAfter=network.target\nAfter=mysql.service\nRequires=mysql.service\n# (...or postgresql.service!)\n\n[Service]\n# User + Group should agree with HTTP processes:\nUser=www-data\nGroup=www-data\nExecStart=/usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\n# Only restart after unexpected failures:\nRestart=on-failure\n# Extend time between restart attempts after a failure:\nRestartSec=120\n\n[Install]\nWantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Making a Direct HTTP Request to a Controller Action via curl\nDESCRIPTION: Demonstrates how to make a direct HTTP request to a Craft controller action using the action path format in a URL with curl.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl -X POST https://my-project.tld/actions/my-plugin/widgets/save\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Payment Gateways\nDESCRIPTION: This event allows plugins to register their own payment gateway types. Custom gateways must implement the appropriate interfaces to handle payment processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\Purchasables;\nuse yii\\base\\Event;\n\nEvent::on(Gateways::class, Gateways::EVENT_REGISTER_GATEWAY_TYPES, function(RegisterComponentTypesEvent $e) {\n    $e->types[] = MyGateway::class;\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Responsive srcset Sizes\nDESCRIPTION: Demonstrates how to generate multiple image sizes for responsive srcset attributes using tag function and getSrcSet() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({ width: 300, height: 300 }) %}\n{{ tag('img', {\n  src: asset.url,\n  width: asset.width,\n  height: asset.height,\n  srcset: asset.getSrcset(['1.5x', '2x', '3x']),\n  alt: asset.title,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Displaying a List of Tags from a Specific Group in Twig\nDESCRIPTION: This code snippet shows how to create a tag query, set parameters, fetch tags, and display them in a list using Twig in Craft CMS. It demonstrates querying tags from a specific group and creating links for each tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a tag query with the 'group' parameter #}\n{% set myTagQuery = craft.tags()\n  .group('blogTags') %}\n\n{# Fetch the tags #}\n{% set tags = myTagQuery.all() %}\n\n{# Display the tag list #}\n<ul>\n  {% for tag in tags %}\n    <li><a href=\"{{ url('blog/tags/'~tag.id) }}\">{{ tag.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Adding Items to Cart\nDESCRIPTION: Examples of forms for adding single and multiple items to a cart with various options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.id }}\">{{ variant.sku }}</option>\n    {% endfor %}\n  </select>\n\n  <button>Add item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: URL Generation in Email Templates\nDESCRIPTION: Examples of generating site and control panel URLs in email templates using Twig helper functions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/mail.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Forces a site URL: #}\n{{ siteUrl('dashboard') }}\n\n{# Forces a control panel URL: #}\n{{ cpUrl('myaccount')}}\n```\n\n----------------------------------------\n\nTITLE: Defining Supported Sites for Localized Elements in Craft CMS\nDESCRIPTION: This method implementation restricts which sites an element should be stored in, with optional configurations for each site like enabled status by default.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\npublic function getSupportedSites(): array\n{\n    return [\n        1,\n        2,\n        ['siteId' => 3, 'enabledByDefault' => false],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Related Users\nDESCRIPTION: Examples of iterating through related users and displaying their information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedUsers = entry.myFieldHandle.all() %}\n{% if relatedUsers|length %}\n  <ul>\n    {% for rel in relatedUsers %}\n      <li><a href=\"{{ url('profiles/'~rel.username) }}\">{{ rel.name }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedUsers = $entry->myFieldHandle->all();\nif (count($relatedUsers)) {\n    foreach ($relatedUsers as $rel) {\n        // \\craft\\helpers\\UrlHelper::url('profiles/' . $rel->username)\n        // $rel->name\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Running the Craft Migration Command\nDESCRIPTION: Execute the Craft CLI command to run all pending migrations, which updates the database schema to be compatible with Craft 4.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nphp craft migrate/all\n```\n\n----------------------------------------\n\nTITLE: Handling Before Save Address Event in Craft Commerce\nDESCRIPTION: This code listens for the beforeSaveAddress event, which is triggered before an address is saved. It can be used to perform actions like notifying external CRM systems about a new address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_43\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\AddressEvent;\nuse craft\\commerce\\services\\Addresses;\nuse yii\\base\\Event;\n\nEvent::on(Addresses::class, Addresses::EVENT_BEFORE_SAVE_ADDRESS, function(AddressEvent $e) {\n    // Do something - perhaps let an external CRM system know about a client's new address\n});\n```\n\n----------------------------------------\n\nTITLE: Complete Order Query Example with Query Parameters\nDESCRIPTION: Demonstrates a complete example of creating an order query with parameters, fetching a specific order by number, and displaying it in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/order-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested order number from the query string #}\n{% set orderNumber = craft.app.request.getQueryParam('number') %}\n\n{# Create an order query with the 'number' parameter #}\n{% set myOrderQuery = craft.orders()\n  .number(orderNumber) %}\n\n{# Fetch the order #}\n{% set order = myOrderQuery.one() %}\n\n{# Make sure it exists #}\n{% if not order %}\n  {% exit 404 %}\n{% endif %}\n\n{# Display the order #}\n<h1>Order {{ order.getShortNumber() }}</h1>\n<!-- ... ->\n```\n\n----------------------------------------\n\nTITLE: Creating a Categories Field Input with Checkboxes in Twig\nDESCRIPTION: Example of creating an input for a Categories field in an element form, displaying a hierarchical list of checkboxes for all possible categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Include a hidden input first so Craft knows to update the existing value\n   if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{# Get all of the possible category options #}\n{% set possibleCategories = craft.categories()\n  .group('food')\n  .all() %}\n\n{# Get the currently related category IDs #}\n{% set relatedCategoryIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% nav possibleCategory in possibleCategories %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleCategory.id,\n          { checked: possibleCategory.id in relatedCategoryIds }\n        ) }}\n        {{ possibleCategory.title }}\n      </label>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Event Class for Post-Subscribe Action in Craft CMS\nDESCRIPTION: This snippet defines a custom event class 'ApiResponseEvent' that extends Event, used after subscribing a contact to a newsletter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\events;\n\nuse mynamespace\\newsletter\\models\\Contact;\nuse yii\\base\\Event;\n\nclass ApiResponseEvent extends Event\n{\n    public Contact $contact;\n    public array $response;\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Generator in Craft CMS Plugin\nDESCRIPTION: PHP code snippet for registering a custom generator class with the Generator tool. This code should be placed in the plugin's init() method to make the custom generator available from the command line.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/generator.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\generator\\Command;\nuse mynamespace\\myplugin\\generators\\MyGenerator;\nuse yii\\base\\Event;\n\nEvent::on(\n    Command::class,\n    Command::EVENT_REGISTER_GENERATOR_TYPES,\n    function(RegisterComponentTypesEvent $e) {\n        $e->types[] = MyGenerator::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Settings HTML for Field Layout Elements in PHP\nDESCRIPTION: Provides the HTML markup for configurable settings when hasSettings() returns true. This example shows how to add a lightswitch field for a refresh setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nprotected function settingsHtml(): ?string\n{\n    return Cp::lightswitchFieldHtml([\n        'label' => Craft::t('my-plugin', 'Refresh automatically?'),\n        'instructions' => Craft::t('my-plugin', 'Periodically refresh the sync status while the element editor is open and in the foreground.'),\n        'id' => 'autoRefresh',\n        'name' => 'autoRefresh',\n        'on' => $this->autoRefresh,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Translating Messages with Parameters in Twig\nDESCRIPTION: Demonstrates how to use the translate filter with parameters in Twig templates for dynamic message translation in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"/contact\">{{ 'Welcome back, {name}'|t(params = {\n  name: currentUser.friendlyName,\n}) }}</a>\n```\n\n----------------------------------------\n\nTITLE: Adding a Product with Variant Selection to Cart\nDESCRIPTION: Form that allows customers to select from multiple variants of a product before adding to cart. Includes redirect and success message handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n  {{ hiddenInput('successMessage', ('Added \"' ~ product.title ~ '\" to cart.')|hash) }}\n  {{ hiddenInput('qty', 1) }}\n\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.id }}\">{{ variant.sku }}</option>\n    {% endfor %}\n  </select>\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating an Atom 1.0 Feed Template in Twig for Craft CMS\nDESCRIPTION: A complete Twig template for generating an Atom 1.0 feed on a Craft CMS site. It assumes a 'globals' global set with 'feedAuthorName' and 'feedAuthorEmail' fields. The template creates the proper XML structure for an Atom feed, including feed metadata and entry content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/atom-feed.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<?xml version=\"1.0\"?>\n<feed xmlns=\"http://www.w3.org/2005/Atom\">\n  <title>{{ siteName }}</title>\n  <link href=\"{{ siteUrl }}\" />\n  <link type=\"application/atom+xml\" rel=\"self\" href=\"{{ url(craft.request.path) }}\" />\n  <updated>{{ now.atom }}</updated>\n  <id>{{ url(craft.request.path) }}</id>\n  <author>\n    <name>{{ globals.feedAuthorName }}</name>\n    <email>{{ globals.feedAuthorEmail }}</email>\n  </author>\n\n  {% for entry in craft.entries.find() %}\n    <entry>\n      <id>{{ entry.url }}</id>\n      <link type=\"text/html\" rel=\"alternate\" href=\"{{ entry.url }}\" />\n      <title>{{ entry.title }}</title>\n      <published>{{ entry.postDate.atom }}</published>\n      <updated>{{ entry.dateUpdated.atom }}</updated>\n      <author>\n        <name>{{ entry.author.fullName }}</name>\n        <uri>{{ siteUrl }}</uri>\n      </author>\n      <content type=\"html\"><![CDATA[\n        {{ entry.body }}\n      ]]></content>\n    </entry>\n  {% endfor %}\n</feed>\n```\n\n----------------------------------------\n\nTITLE: Generating Srcset Attribute with Image Transform in Twig\nDESCRIPTION: This snippet demonstrates how to use the 'tag' template function and 'getSrcSet()' method to create an img tag with a srcset attribute containing multiple image variations based on a single transform.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({ width: 300, height: 300 }) %}\n{{ tag('img', {\n  src: asset.url,\n  width: asset.width,\n  height: asset.height,\n  srcset: asset.getSrcset(['1.5x', '2x', '3x']),\n  alt: asset.title,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Building a Categories Field Input for Entry Forms in Twig\nDESCRIPTION: Demonstrates how to create a form input for a Categories field using checkboxes that preserve the hierarchical structure of categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Include a hidden input first so Craft knows to update the existing value\n   if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{# Get all of the possible category options #}\n{% set possibleCategories = craft.categories()\n  .group('food')\n  .all() %}\n\n{# Get the currently related category IDs #}\n{% set relatedCategoryIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% nav possibleCategory in possibleCategories %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleCategory.id,\n          { checked: possibleCategory.id in relatedCategoryIds }\n        ) }}\n        {{ possibleCategory.title }}\n      </label>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Generating Unordered Lists with ul() Function in Craft CMS\nDESCRIPTION: Creates an HTML unordered list from an array of items. Each item is wrapped in an <li> tag and HTML-encoded by default.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_54\n\nLANGUAGE: twig\nCODE:\n```\n{% set titles = craft.entries()\n  .section('news')\n  .select('title')\n  .column() %}\n{{ ul(titles) }}\n{# Output:\n<ul>\n  <li>Shocking Foo</li>\n  <li>You Won't Believe This Bar</li>\n  <li>Ten Baz You Can't Live Without</li>\n</ul>\n#}\n```\n\n----------------------------------------\n\nTITLE: Custom Console Command Registration in PHP\nDESCRIPTION: Example of registering custom console commands using event handlers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineConsoleActionsEvent;\nuse craft\\console\\Controller;\nuse craft\\console\\controllers\\ResaveController;\nuse yii\\base\\Event;\n\nEvent::on(\n    ResaveController::class,\n    Controller::EVENT_DEFINE_ACTIONS,\n    function(DefineConsoleActionsEvent $event) {\n        $event->actions['products'] = [\n            'options' => ['type'],\n            'helpSummary' => 'Re-saves products.',\n            'action' => function($params): int {\n                /** @var ResaveController $controller */\n                $controller = Craft::$app->controller;\n                $query = Product::find();\n                if ($controller->type) {\n                    $query->type(explode(',', $controller->type));\n                }\n                return $controller->saveElements($query);\n            }\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Counting Enabled Variants in Twig, PHP, and GraphQL\nDESCRIPTION: Demonstrates how to count all enabled variants using Twig, PHP, and GraphQL in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{# Count all enabled variants #}\n{% set myVariantCount = craft.variants()\n    .status('enabled')\n    .count() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Variant;\n\n// Count all enabled variants\n$myVariantCount = Variant::find()\n    ->status(Variant::STATUS_ENABLED)\n    ->count();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Count all enabled variants\n{\n  variantCount(status: \"enabled\")\n}\n```\n\n----------------------------------------\n\nTITLE: Asserting Element Existence in Craft CMS (PHP)\nDESCRIPTION: The assertElementsExist method is used to test if multiple elements of a specific type exist in the database. It allows for specifying search parameters, amount, and search scope.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nassertElementsExist($elementType, $searchParameters, $amount = 1, $searchAll = false)\n```\n\n----------------------------------------\n\nTITLE: Adding Navigation Tabs to CP Template\nDESCRIPTION: Demonstrates how to add tabbed navigation to a control panel page with content and settings tabs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set tabs = {\n  content: {\n    label: 'Content'|t('plugin-handle'),\n    url: '#content',\n  },\n  settings: {\n    label: 'Settings'|t('plugin-handle'),\n    url: '#settings',\n  },\n} %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Multi-select Field Values\nDESCRIPTION: Examples showing how to query for elements based on Multi-select field values in both Twig and PHP. Demonstrates fetching entries with specific options selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Configuring an EntryQuery Object with Twig\nDESCRIPTION: Uses the configure function to modify an existing EntryQuery object set up by a relational field, setting the section to 'blog'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{# Modify an `EntryQuery` object set up by a relational field: #}\n{% set myRelatedEntries = configure(entry.myEntriesField, {\n  section: 'blog'\n}).all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Log Targets in Craft CMS\nDESCRIPTION: Configuration example showing how to add custom logging targets including a Yii FileTarget for 404 errors and a MonologTarget for module-specific messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\nuse craft\\log\\MonologTarget;\nuse Psr\\Log\\LogLevel;\nuse yii\\log\\FileTarget;\nuse yii\\web\\HttpException;\n\nreturn [\n    'components' => [\n        'log' => [\n            'targets' => [\n                // 1. Add a traditional Yii file target for auditing 404 errors that are normally excluded:\n                [\n                    'class' => FileTarget::class,\n                    'logFile' => '@storage/logs/missing-pages.log',\n                    'categories' => [\n                        HttpException::class . ':404',\n                    ],\n                    'logVars' => [],\n                ],\n\n                // 2. Add a Monolog target for module-specific messages:\n                [\n                    'class' => MonologTarget::class,\n                    'name' => 'custom-module',\n                    'extractExceptionTrace' => !App::devMode(),\n                    'allowLineBreaks' => App::devMode(),\n                    'level' => App::devMode() ? LogLevel::INFO : LogLevel::WARNING,\n                    'categories' => ['custom-module'],\n                    'logContext' => false,\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Updating Project Config from Service Methods in Craft CMS Plugin\nDESCRIPTION: Shows how to modify service methods to update the project config instead of the database directly. Includes handling for new records, validating data, and firing appropriate event hooks before making changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/project-config.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Db;\nuse craft\\helpers\\StringHelper;\n\npublic function saveProductType($productType)\n{\n    $isNew = empty($productType->id);\n\n    // Ensure the product type has a UID\n    if ($isNew) {\n        $productType->uid = StringHelper::UUID();\n    } else if (!$productType->uid) {\n        $productType->uid = Db::uidById('{{%producttypes}}', $productType->id);\n    }\n\n    // Fire a 'beforeSaveProductType' event?\n    if ($this->hasEventHandlers('beforeSaveProductType')) {\n        $this->trigger('beforeSaveProductType', new ProductTypeEvent([\n            'productType' => $productType,\n            'isNew' => $isNew,\n        ]));\n    }\n\n    // Make sure it validates\n    if (!$productType->validate()) {\n        return false;\n    }\n\n    // Save it to the project config\n    $path = \"product-types.{$productType->uid}\";\n    Craft::$app->projectConfig->set($path, [\n        'name' => $productType->name,\n        // ...\n    ]);\n\n    // Now set the ID on the product type in case the\n    // caller needs to know it\n    if ($isNew) {\n        $productType->id = Db::idByUid('{{%producttypes}}', $productType->uid);\n    }\n\n    return true;\n}\n\npublic function deleteProductType($productType)\n{\n    // Fire a 'beforeDeleteProductType' event?\n    if ($this->hasEventHandlers('beforeDeleteProductType')) {\n        $this->trigger('beforeDeleteProductType', new ProductTypeEvent([\n            'productType' => $productType,\n        ]));\n    }\n\n    // Remove it from the project config\n    $path = \"product-types.{$productType->uid}\";\n    Craft::$app->projectConfig->remove($path);\n}\n```\n\n----------------------------------------\n\nTITLE: Default Layout with Flash Messages in Twig\nDESCRIPTION: This snippet shows a default layout Twig template that includes handling for flash messages. It demonstrates how to retrieve and display flash messages with appropriate styling based on their level.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"{{ currentSite.language }}\">\n  <head>\n      <meta charset=\"UTF-8\">\n      <title>{{ siteName }}</title>\n  </head>\n  <body>\n    {% set flashes = craft.app.session.getAllFlashes(true) %}\n\n    {% if flashes | length %}\n      {% for level, flash in flashes %}\n        <p class=\"{{ level }}\" role=\"alert\">{{ flash }}</p>\n      {% endfor %}\n    {% endif %}\n\n    {% block content null %}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Custom Fields with Twig Form Submission\nDESCRIPTION: This code snippet demonstrates how to create a form that submits data to update custom fields on a cart using the 'commerce/cart/update-cart' action. The form includes CSRF protection and a redirect back to the cart page after submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/update-cart-custom-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\" name=\"fields[myFieldHandle]\" value=\"\">\n\n  <button type=\"submit\">Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Mocking External Service in PHP for Craft CMS Plugin\nDESCRIPTION: Demonstrates how to use mockMethods to mock an external service (Mailchimp) in a Craft CMS plugin test environment. This prevents actual API calls during testing, ensuring predictable and performant tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/mocking.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->mockMethods(\n    Mailchimp::getInstance(),\n    'externals'\n    [\n        'getUsersFromMailchimp' => [['user1'], ['user2']],\n    ],\n    []\n);\n```\n\n----------------------------------------\n\nTITLE: Generating JSON Snapshot for Purchasable in Craft Commerce\nDESCRIPTION: This code snippet demonstrates the structure of a JSON snapshot created when a purchasable becomes a line item in Craft Commerce. It includes detailed information about the product, variant, and associated metadata that persists regardless of future changes to the store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/purchasables.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"productId\": \"29\",\n  \"isDefault\": \"1\",\n  \"sku\": \"ANT-001\",\n  \"price\": 20,\n  \"sortOrder\": \"1\",\n  \"width\": null,\n  \"height\": null,\n  \"length\": null,\n  \"weight\": null,\n  \"stock\": \"0\",\n  \"hasUnlimitedStock\": \"1\",\n  \"minQty\": null,\n  \"maxQty\": null,\n  \"deletedWithProduct\": false,\n  \"id\": \"30\",\n  \"tempId\": null,\n  \"draftId\": null,\n  \"revisionId\": null,\n  \"uid\": \"076305ef-17c5-4433-99de-bf5fb090f704\",\n  \"fieldLayoutId\": null,\n  \"contentId\": \"23\",\n  \"enabled\": \"1\",\n  \"archived\": \"0\",\n  \"siteId\": \"1\",\n  \"title\": \"A New Toga\",\n  \"slug\": \"ant-001\",\n  \"uri\": null,\n  \"dateCreated\": \"2020-06-29T09:12:02-07:00\",\n  \"dateUpdated\": \"2020-06-29T09:12:03-07:00\",\n  \"dateDeleted\": null,\n  \"trashed\": false,\n  \"propagateAll\": false,\n  \"newSiteIds\": [],\n  \"resaving\": false,\n  \"duplicateOf\": null,\n  \"previewing\": false,\n  \"hardDelete\": false,\n  \"ref\": null,\n  \"status\": \"enabled\",\n  \"structureId\": null,\n  \"url\": \"https://foo.dev/shop/products/ant-001?variant=30\",\n  \"isAvailable\": true,\n  \"isPromotable\": true,\n  \"shippingCategoryId\": 1,\n  \"taxCategoryId\": 1,\n  \"onSale\": false,\n  \"cpEditUrl\": \"#\",\n  \"product\": {\n    \"postDate\": \"2020-06-29T09:12:02-07:00\",\n    \"expiryDate\": null,\n    \"typeId\": \"1\",\n    \"taxCategoryId\": \"1\",\n    \"shippingCategoryId\": \"1\",\n    \"promotable\": \"1\",\n    \"freeShipping\": null,\n    \"enabled\": \"1\",\n    \"availableForPurchase\": true,\n    \"defaultVariantId\": \"30\",\n    \"defaultSku\": \"ANT-001\",\n    \"defaultPrice\": \"20.0000\",\n    \"defaultHeight\": \"0.0000\",\n    \"defaultLength\": \"0.0000\",\n    \"defaultWidth\": \"0.0000\",\n    \"defaultWeight\": \"0.0000\",\n    \"taxCategory\": null,\n    \"name\": null,\n    \"id\": \"29\",\n    \"tempId\": null,\n    \"draftId\": null,\n    \"revisionId\": null,\n    \"uid\": \"71a2efe8-163f-4014-9ffc-b8272d469a7e\",\n    \"fieldLayoutId\": null,\n    \"contentId\": \"22\",\n    \"archived\": \"0\",\n    \"siteId\": \"1\",\n    \"title\": \"A New Toga\",\n    \"slug\": \"ant-001\",\n    \"uri\": \"shop/products/ant-001\",\n    \"dateCreated\": \"2020-06-29T09:12:02-07:00\",\n    \"dateUpdated\": \"2020-06-29T09:12:02-07:00\",\n    \"dateDeleted\": null,\n    \"trashed\": false,\n    \"propagateAll\": false,\n    \"newSiteIds\": [],\n    \"resaving\": false,\n    \"duplicateOf\": null,\n    \"previewing\": false,\n    \"hardDelete\": false,\n    \"ref\": null,\n    \"status\": \"live\",\n    \"structureId\": null,\n    \"url\": \"https://foo.dev/shop/products/ant-001\"\n  },\n  \"description\": \"A New Toga\",\n  \"purchasableId\": \"30\",\n  \"options\": [],\n  \"sales\": []\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Session Storage in Craft CMS (PHP)\nDESCRIPTION: This snippet demonstrates how to configure Craft CMS to use the database for session storage. It overrides the default session component with a database-based implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config:\n            $config = craft\\helpers\\App::sessionConfig();\n\n            // Override the class to use DB session class:\n            $config['class'] = yii\\web\\DbSession::class;\n\n            // Set the session table name:\n            $config['sessionTable'] = craft\\db\\Table::PHPSESSIONS;\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Users from a Group\nDESCRIPTION: A complete example showing how to query users from a specific group and display them in a list. This demonstrates creating a query, setting parameters, executing it, and looping through results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/users.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a user query with the 'group' parameter #}\n{% set myUserQuery = craft.users()\n  .group('authors') %}\n\n{# Fetch the users #}\n{% set users = myUserQuery.all() %}\n\n{# Display the list #}\n<ul>\n  {% for user in users %}\n    <li><a href=\"{{ url('authors/'~user.username) }}\">{{ user.name }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Implementing Card Preview Support for Field Layout Elements in PHP\nDESCRIPTION: Enables a field layout element to display its data in element cards. The previewHtml method defines how the element data should be rendered in the card preview.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\npublic function previewable(): bool\n{\n    return true;\n}\n\npublic function previewHtml(ElementInterface $element): string\n{\n    return Html::tag('code', Html::encode($element->{$this->attribute()}));\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Sequences with seq()\nDESCRIPTION: Demonstrates the seq() function for outputting sequential numbers. Shows basic usage for tracking entry views and creating padded order numbers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n<p>This entry has been read {{ seq('hits:' ~ entry.id) }} times.</p>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|date('Y') ~ '-' ~ seq('orderNumber:' ~ now|date('Y'), 5) }}\n{# Output: 2018-00001 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<h5><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h5>\n<p>{{ seq('hits:' ~ entry.id, next=false) }} views</p>\n```\n\n----------------------------------------\n\nTITLE: Rendering Multi-Instance Fields in Twig Template\nDESCRIPTION: Example of using multiple instances of the same field (Attribution) with different handles (photoCredit and byline) in a template to display article content with image attribution.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = entry.image.one() %}\n\n<article>\n  {% if image %}\n    <figure>\n      {{ image.getImg() }}\n      <figcaption>{{ entry.photoCredit }}</figcaption>\n    </figure>\n  {% endif %}\n\n  <h2>{{ entry.title }}</h2>\n  <address rel=\"author\">{{ entry.byline }}</address>\n\n  {# ... #}\n</article>\n```\n\n----------------------------------------\n\nTITLE: Creating a Database Table for Custom Elements in Craft CMS\nDESCRIPTION: Creates a database table for storing custom element data using an install migration. Includes a foreign key relationship to the main elements table and sets up required fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nif (!$this->db->tableExists('{{%products}}')) {\n    // create the products table\n    $this->createTable('{{%products}}', [\n        'id' => $this->integer()->notNull(),\n        'price' => $this->integer()->notNull(),\n        'currency' => $this->char(3)->notNull(),\n        'dateCreated' => $this->dateTime()->notNull(),\n        'dateUpdated' => $this->dateTime()->notNull(),\n        'uid' => $this->uid(),\n        'PRIMARY KEY(id)',\n    ]);\n\n    // give it a foreign key to the elements table\n    $this->addForeignKey(\n        $this->db->getForeignKeyName('{{%products}}', 'id'),\n        '{{%products}}', 'id', '{{%elements}}', 'id', 'CASCADE', null);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Route in Craft CMS\nDESCRIPTION: Example of creating a custom URL rule in the Craft CMS config/routes.php file to map a custom endpoint to a controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/controllers.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nreturn [\n    'my/custom/endpoint' => 'plugin-handle/controller/action',\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Monolog Settings in Craft CMS\nDESCRIPTION: Example of customizing Monolog settings for Craft's built-in logging targets. This configuration demonstrates how to control log context visibility, set minimum severity levels, format log output, and filter specific types of messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\nuse Monolog\\Formatter\\LineFormatter;\nuse Psr\\Log\\LogLevel;\nuse yii\\i18n\\PhpMessageSource;\nuse yii\\web\\HttpException;\n\nreturn [\n    'components' => [\n        'log' => [\n            'monologTargetConfig' => [\n                // Only log context in `devMode`\n                'logContext' => App::devMode(),\n\n                // Only export messages with `warning` severity and higher:\n                'level' => LogLevel::WARNING,\n\n                // Force single-line logs, even in `devMode`:\n                'allowLineBreaks' => false,\n\n                // Override message filtering to exclude *all* 400-level exceptions:\n                // (This replaces the default exclusions, `PhpMessageSource:*` and `HttpException:404`)\n                'except' => [\n                    PhpMessageSource::class . ':*',\n                    HttpException::class . ':4*',\n                ],\n\n                // Change the default log formatter and date format:\n                'formatter' => new LineFormatter(\n                    format: \"%datetime% [%level_name%][%context.category%] %message% %context% %extra%\\n\",\n                    dateFormat: DATE_ATOM\n                ),\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Variant Queries in Twig and PHP\nDESCRIPTION: Demonstrates how to create new variant queries using both Twig and PHP syntax in Craft CMS. Shows the equivalent syntax for initializing a variant query in both languages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/variant-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new variant query #}\n{% set myVariantQuery = craft.variants() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new variant query\n$myVariantQuery = \\craft\\commerce\\elements\\Variant::find();\n```\n\n----------------------------------------\n\nTITLE: Adding Donation to Cart Form in Twig\nDESCRIPTION: Template code for creating a donation form that allows customers to add donations to their cart. The form includes CSRF protection, donation amount input, and proper Commerce cart action routing. The donation amount must be provided via the donationAmount option parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/donations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set donation = craft.commerce.donation %}\n{% if donation and donation.isAvailable %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/cart/update-cart') }}\n    {{ redirectInput('shop/cart') }}\n    {{ hiddenInput('purchasableId', donation.id) }}\n    <input type=\"text\"\n      name=\"options[donationAmount]\"\n      value=\"\"\n      placeholder=\"Donation\"\n    >\n    <button>Donate Now</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Resolving Aliases and Environment Variables in Twig and PHP\nDESCRIPTION: Helper functions for evaluating aliases or environment variables directly in Twig or PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{# Resolve an alias, recursively: #}\n{{ alias('@uploadsBaseUrl') }}\n\n{# Access a specific environment variable: #}\n{{ getenv('SOME_ENV_VAR') }}\n\n{# Fully resolve a value, as though it came from a control panel setting: #}\n{{ parseEnv(craft.app.config.custom.myDynamicValue) }}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Resolve an alias, recursively:\nCraft::getAlias('@uploadsBaseUrl');\n\n// Access a specific environment variable:\ncraft\\helpers\\App::env('SOME_ENV_VAR');\n\n// Fully resolve a value, as though it came from a control panel setting:\ncraft\\helpers\\App::parseEnv(Craft::$app->config->custom->myDynamicValue);\n```\n\n----------------------------------------\n\nTITLE: Configuring Garbage Collection Probability in PHP\nDESCRIPTION: Configuration snippet showing how to set the garbage collection probability in config/app.php. Values range from 0 (disabled) to 10000 (1 in 100 chance), with the default being 10 (1 in 100,000 chance).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/gc.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'gc' => [\n            'probability' => 0,     // no chance\n            'probability' => 1,     // 1 in 1,000,000\n            'probability' => 10,    // 1 in 100,000 (default)\n            'probability' => 100,   // 1 in 10,000\n            'probability' => 1000,  // 1 in 1,000\n            'probability' => 10000, // 1 in 100\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Preventing Widows with widont Filter in Twig\nDESCRIPTION: Shows how to use the widont filter to insert a non-breaking space between the last two words of a string, preventing typographic widows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_48\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  Don't leave any word stranded on its own line.\n{% endset %}\n\n{{ content|widont }}\n{# Output: Don't leave any word stranded on its own&nbsp;line. #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current Site Information in Twig\nDESCRIPTION: This snippet demonstrates how to access and display various properties of the current site and its group in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# @var currentSite craft\\models\\Site #}\nSite ID:          {{ currentSite.id }}\nSite Handle:      {{ currentSite.handle }}\nSite Name:        {{ currentSite.name }}\nSite Language:    {{ currentSite.language }}\nIs Primary Site?: {{ currentSite.primary }}\nBase URL:         {{ currentSite.baseUrl }}\n\n{# @var siteGroup craft\\models\\SiteGroup #}\n{% set siteGroup = currentSite.group %}\nSite Group Name:  {{ siteGroup.name }}\n```\n\n----------------------------------------\n\nTITLE: Sequential Order Reference Number Generation\nDESCRIPTION: Advanced example of generating sequential order reference numbers using Twig's seq() function with year-based sequencing and number padding.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.dateOrdered|date('Y') }}-{{ seq(object.dateOrdered|date('Y'), 8) }}\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin CP Nav Item in PHP\nDESCRIPTION: Shows how to override the getCpNavItem() method to customize a plugin's control panel navigation item with badge counts and subnavs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function getCpNavItem()\n{\n    $item = parent::getCpNavItem();\n    $item['badgeCount'] = 5;\n    $item['subnav'] = [\n        'foo' => ['label' => 'Foo', 'url' => 'plugin-handle/foo'],\n        'bar' => ['label' => 'Bar', 'url' => 'plugin-handle/bar'],\n        'baz' => ['label' => 'Baz', 'url' => 'plugin-handle/baz'],\n    ];\n    return $item;\n}\n```\n\n----------------------------------------\n\nTITLE: Using Behavior Methods in PHP and Twig\nDESCRIPTION: Shows how to use the newly added getAuthorUrl() method from the Post behavior in both PHP and Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/behaviors.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$url = $entry->getAuthorUrl();\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.getAuthorUrl() }}\n```\n\n----------------------------------------\n\nTITLE: Cloning Objects in Twig\nDESCRIPTION: Demonstrates the use of the clone() function to create a copy of an object, specifically an element query in this example.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries().section('news') %}\n{% set articles = clone(query).type('articles') %}\n```\n\n----------------------------------------\n\nTITLE: Defining Searchable Attributes for Elements in PHP\nDESCRIPTION: Shows how to specify additional searchable attributes for an element type by implementing the defineSearchableAttributes() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSearchableAttributes(): array\n{\n    return ['price'];\n}\n```\n\n----------------------------------------\n\nTITLE: Site-Specific URL Rules in PHP Configuration\nDESCRIPTION: Demonstrates how to create site-specific URL rules in the config/routes.php file by using site handles as keys for sub-arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  'siteHandle' => [\n    'blog/archive/<year:\\d{4}>' => 'controller/action/path',\n  ],\n];\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Cart Address in Twig\nDESCRIPTION: Form implementation for updating an existing shipping address attached to the cart, including address ID handling and field population.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.getCart() %}\n{% set address = cart.shippingAddress %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Updated addresses.'|hash) }}\n\n  {{ hiddenInput('shippingAddress[id]', address.id) }}\n  <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"{{ address.firstName }}\">\n  <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"{{ address.lastName }}\">\n\n  {# ... #}\n\n  <button type=\"submit\">Update Address</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Application Type-Specific Configuration in PHP for Craft CMS\nDESCRIPTION: Demonstrates how to create application type-specific configurations for web and console applications in Craft CMS. It shows examples of general configuration files for different application types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'aliases' => [\n        '@webroot' => dirname(__DIR__) . '/web',\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\nreturn function(array $config) {\n    $config['aliases']['@web'] = App::env('CLI_WEB_URL');\n\n    return $config;\n};\n```\n\n----------------------------------------\n\nTITLE: Changing Order Status Programmatically in PHP\nDESCRIPTION: This PHP code snippet demonstrates how to change an order's status programmatically using a custom controller action. It retrieves an order, assigns a new status, adds a message, and saves the order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/custom-order-statuses.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\nuse craft\\commerce\\elements\\Order;\n// ...\npublic function actionMarkReady(int $orderId)\n{\n    $orderStatus = Commerce::getInstance()->getOrderStatuses()->getOrderStatusByHandle('readyForShipment');\n\n    $order = Order::find()\n        ->id($orderId)\n        ->one();\n\n    // Assign new status ID:\n    $order->orderStatusId = $orderStatus->id;\n\n    // Provide a message:\n    $order->message = Craft::$app->getRequest()->getBodyParam('statusMessage');\n\n    // Save it:\n    if (!Craft::$app->getElements()->saveElement($order)) {\n        return $this->asModelFailure($order, Craft::t('site', 'Failed to update order status.'));\n    }\n\n    return $this->asModelSuccess($order, Craft::t('site', 'Order updated to {status}.', [\n        'status' => $orderStatus->name,\n    ]));\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Response Handling in PHP Controllers\nDESCRIPTION: Shows correct way to handle JSON responses in controllers by checking if request accepts JSON rather than checking if it's an Ajax request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\nif (\\Craft::$app->getRequest()->getIsAjax()) {\n    return $this->asJson([...]);\n}\n\n// Better:\nif (\\Craft::$app->getRequest()->getAcceptsJson()) {\n    return $this->asJson([...]);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Relation Field Type\nDESCRIPTION: Example of creating a custom relation field type by extending BaseRelationField for product elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\fields;\n\nuse craft\\fields\\BaseRelationField;\nuse mynamespace\\elements\\Product;\n\nclass Products extends BaseRelationField\n{\n    public static function displayName(): string\n    {\n        return \\Craft::t('plugin-handle', 'Products');\n    }\n\n    protected static function elementType(): string\n    {\n        return Product::class;\n    }\n\n    public static function defaultSelectionLabel(): string\n    {\n        return \\Craft::t('plugin-handle', 'Add a product');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Time Fields in Twig and PHP\nDESCRIPTION: Examples of querying elements with time field filters including empty, non-empty, and time range comparisons.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/time.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with with a selected time before 9:00AM #}\n{% set entries = craft.entries()\n  .myFieldHandle('< 09:00')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with with a selected time before 9:00 AM\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('< 09:00')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Defining Class Properties with Getters and Setters (PHP)\nDESCRIPTION: Illustrates how to properly define class properties with getter methods and corresponding @property tags for IDE support in Craft CMS development.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @property User $author\n */\nclass Entry\n{\n    private $_author;\n\n    /**\n     * @return User\n     */\n    public function getAuthor()\n    {\n        return $this->_author;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Database Configuration for Testing\nDESCRIPTION: Database configuration file for testing environment. This PHP configuration retrieves database connection settings from environment variables defined in the .env file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'dsn' => getenv('DB_DSN'),\n    'user' => getenv('DB_USER'),\n    'password' => getenv('DB_PASSWORD'),\n    'schema' => getenv('DB_SCHEMA'),\n    'tablePrefix' => getenv('DB_TABLE_PREFIX'),\n];\n```\n\n----------------------------------------\n\nTITLE: Fetching Element IDs with ids() in PHP\nDESCRIPTION: This snippet shows how to use the ids() method to get a list of element IDs matching the specified criteria in PHP. It retrieves the IDs of entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$entryIds = Entry::find()\n    ->section('news')\n    ->ids();\n```\n\n----------------------------------------\n\nTITLE: Handling After Send Email Event in Craft Commerce\nDESCRIPTION: This snippet shows how to listen for the afterSendEmail event, which is triggered after an email has been sent. It can be used for tasks like adding the email to a CRM system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_46\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\MailEvent;\nuse craft\\commerce\\services\\Emails;\nuse yii\\base\\Event;\n\nEvent::on(Emails::class, Emails::EVENT_AFTER_SEND_MAIL, function(MailEvent $e) {\n     // Perhaps add the email to a CRM system\n});\n```\n\n----------------------------------------\n\nTITLE: Logging Messages in Craft CMS Migrations\nDESCRIPTION: Demonstrates how to properly log messages in Craft CMS migrations to ensure visibility in both console and web environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\necho \"    > some note\\n\";\n```\n\n----------------------------------------\n\nTITLE: Adding Shipping Estimate Address to Cart in Twig\nDESCRIPTION: Implementation for collecting and updating estimated shipping address information, including country and state selection, and displaying available shipping methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('estimatedBillingAddressSameAsShipping', '1') }}\n\n  {% if not cart.estimatedShippingAddressId %}\n    <select name=\"estimatedShippingAddress[countryId]\">\n      {% for key, option in craft.commerce.countries.allCountriesAsList %}\n        <option value=\"{{ key }}\">{{ option }}</option>\n      {% endfor %}\n    </select>\n\n    <select name=\"estimatedShippingAddress[stateValue]\">\n      {% for states in craft.commerce.states.allStatesAsList %}\n        {% for key, option in states %}\n          <option value=\"{{ key }}\">{{ option }}</option>\n        {% endfor %}\n      {% endfor %}\n    </select>\n\n    <input type=\"text\" name=\"estimatedShippingAddress[zipCode]\" value=\"\">\n  {% endif %}\n\n\n  {% if cart.availableShippingMethodOptions|length and cart.estimatedShippingAddressId %}\n    {% for handle, method in cart.availableShippingMethodOptions %}\n      {% set price = method.priceForOrder(cart)|commerceCurrency(cart.currency) %}\n      <label>\n        <input type=\"radio\"\n          name=\"shippingMethodHandle\"\n          value=\"{{ handle }}\"\n          {% if handle == cart.shippingMethodHandle %}checked{% endif %}\n        />\n        {{ method.name }} - {{ price }}\n      </label>\n    {% endfor %}\n  {% endif %}\n\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using Twig Conditional Tags with User Authentication\nDESCRIPTION: Shows how to use if/else/endif tags to display different links based on user authentication status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"{{ logoutUrl }}\">Logout</a>\n{% else %}\n  <a href=\"{{ loginUrl }}\">Login</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using hook Tag for Plugin Integration in Twig\nDESCRIPTION: The hook tag allows plugins and modules to hook into the template, either returning additional HTML or modifying template variables. It provides an extension point for customizing templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Give plugins a chance to make changes here #}\n{% hook 'my-custom-hook-name' %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Date Fields in Twig and PHP\nDESCRIPTION: Demonstrates how to query for elements with Date fields, filtering results based on date ranges.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a selected date in the next month #}\n{% set start = now|atom %}\n{% set end = now|date_modify('+1 month')|atom %}\n\n{% set entries = craft.entries()\n  .myDateField(['and', \">= #{start}\", \"< #{end}\"])\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a selected date in the next month\n$start = (new \\DateTime())->format(\\DateTime::ATOM);\n$end = (new \\DateTime('+1 month'))->format(\\DateTime::ATOM);\n\n$entries = \\craft\\elements\\Entry::find()\n    ->myDateField(['and', \">= ${start}\", \"< ${end}\"])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Event Class for Pre-Subscribe Action in Craft CMS\nDESCRIPTION: This snippet defines a custom event class 'SubscribeEvent' that extends CancelableEvent, used before subscribing a contact to a newsletter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\events;\n\nuse craft\\events\\CancelableEvent;\nuse mynamespace\\newsletter\\models\\Contact;\n\nclass SubscribeEvent extends CancelableEvent\n{\n    public Contact $contact;\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Localized Address Field Labels in Twig\nDESCRIPTION: Demonstrates how to get human-friendly, localized labels for address fields using the attributeLabel() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress.attributeLabel('administrativeArea') }} {# State #}\n{{ myAddress.attributeLabel('locality') }} {# City #}\n{{ myAddress.attributeLabel('dependentLocality') }} {# Suburb #}\n{{ myAddress.attributeLabel('postalCode') }} {# Zip Code #}\n```\n\n----------------------------------------\n\nTITLE: Creating Conditional Subfolder Paths for Asset Uploads in Twig\nDESCRIPTION: An alternative approach to creating dynamic subfolder paths in Twig that conditionally includes a category segment with its trailing slash only when a category exists.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\nblog/{{ categoriesFieldHandle.exists() ? \"#{categoriesFieldHandle.one().slug}/\" : null }}{canonicalId}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Purchasable Element Types in Craft Commerce\nDESCRIPTION: This code demonstrates how to register custom purchasable element types using the registerPurchasableElementTypes event. It adds a custom MyPurchasable class to the list of purchasable types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_51\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\Purchasables;\nuse yii\\base\\Event;\n\nEvent::on(Purchasables::class, Purchasables::EVENT_REGISTER_PURCHASABLE_ELEMENT_TYPES, function(RegisterComponentTypesEvent $e) {\n    $e->types[] = MyPurchasable::class;\n});\n```\n\n----------------------------------------\n\nTITLE: Outputting Money Field Values in Templates\nDESCRIPTION: Shows how to output Money field values in Twig templates and PHP code using the money filter and MoneyHelper class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/money-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle|money %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = \\craft\\helpers\\MoneyHelper::toString($entry->myFieldHandle);\n```\n\n----------------------------------------\n\nTITLE: Applying Named Transforms using setTransform\nDESCRIPTION: This snippet shows how to apply a named transform ('thumb') to an asset using the setTransform() method, which automatically updates the asset's properties like url, width, and height.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform('thumb') %}\n<img src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Proper Docblock Usage for Interface Parameters in PHP\nDESCRIPTION: Demonstrates the correct way to reference interfaces in docblock @param tags for public service methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @param \\craft\\base\\ElementInterface $element\n */\n```\n\n----------------------------------------\n\nTITLE: Basic commerceCurrency Filter Usage in Twig\nDESCRIPTION: Demonstrates basic usage of the commerceCurrency filter with various parameters including currency conversion, formatting options, and zero stripping. Shows how the filter handles different currency formatting scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/twig-filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# `USD` #}\n{% set baseCurrency = cart.currency %}\n\n{# `AUD`, exchange rate 1.3 #}\n{% set paymentCurrency = cart.paymentCurrency %}\n\n{{ 10|commerceCurrency(baseCurrency) }} {# Output: $10.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=false\n) }} {# Output: 13 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true,\n  stripZeros=true\n) }} {# Output: A$13 #}\n```\n\n----------------------------------------\n\nTITLE: Custom Discount Adjuster Implementation\nDESCRIPTION: Complete example of a custom adjuster class that applies a $2 discount to each line item in an order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/adjusters.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\base\\Component;\nuse craft\\commerce\\base\\AdjusterInterface;\nuse craft\\commerce\\elements\\Order;\nuse craft\\commerce\\models\\OrderAdjustment;\n\nclass MyAdjuster extends Component implements AdjusterInterface\n{\n    public function adjust(Order $order): array\n    {\n        $adjustments = [];\n\n        foreach ($order->getLineItems() as $item) {\n            $adjustment = new OrderAdjustment;\n            $adjustment->type = 'discount';\n            $adjustment->name = '$2 off';\n            $adjustment->description = '$2 off everything in the store';\n            // `sourceSnapshot` can contain information to explain the adjustment\n            $adjustment->sourceSnapshot = [ 'data' => 'value' ];\n            $adjustment->amount = -2;\n            $adjustment->setOrder($order);\n            $adjustment->setLineItem($item);\n\n            $adjustments[] = $adjustment;\n        }\n\n        return $adjustments;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce via Composer\nDESCRIPTION: Terminal commands to install Craft Commerce using Composer package manager and enable the plugin via Craft CLI. Requires Composer to be properly installed in the Craft 3 project environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/commerce\nphp craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Creating a Login Form with Twig in Craft CMS\nDESCRIPTION: This Twig code snippet creates a login form for Craft CMS. It includes fields for username/email, password, a remember me checkbox, and error handling. The form uses Craft's built-in user authentication action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/login-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" accept-charset=\"UTF-8\">\n  {{ getCsrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"users/login\">\n\n  <h3><label for=\"loginName\">Username or email</label></h3>\n  <input id=\"loginName\" type=\"text\" name=\"loginName\"\n    value=\"{{ craft.session.rememberedUsername }}\">\n\n  <h3><label for=\"password\">Password</label></h3>\n  <input id=\"password\" type=\"password\" name=\"password\">\n\n  <label>\n    <input type=\"checkbox\" name=\"rememberMe\" value=\"1\">\n    Remember me\n  </label>\n\n  <input type=\"submit\" value=\"Login\">\n\n  {% if errorMessage is defined %}\n    <p>{{ errorMessage }}</p>\n  {% endif %}\n</form>\n\n<p><a href=\"{{ url('forgotpassword') }}\">Forget your password?</a></p>\n```\n\n----------------------------------------\n\nTITLE: Selecting from Existing Addresses or Creating New Ones\nDESCRIPTION: Complex form implementation that allows customers to select from their existing addresses or create new ones on-the-fly. Uses radio buttons for address selection and conditional logic to show appropriate forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form class=\"form\" method=\"post\">\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Updated addresses.\">\n\n  {% set customerAddresses = craft.commerce.customer.addresses %}\n\n  {# Check if we have saved addresses: #}\n  {% if customerAddresses | length %}\n    <div class=\"shipping-address\">\n      {% for address in customerAddresses %}\n        <label>\n          <input type=\"radio\" name=\"shippingAddressId\" value=\"{{ address.id }}\" {{- cart.shippingAddressId ? ' checked' : null }}>\n          {# Identifying address information, up to you! #}\n        </label>\n      {% endfor %}\n    </div>\n\n    <div class=\"billing-address\">\n      {% for address in customerAddresses %}\n        <label>\n          <input type=\"radio\" name=\"billingAddressId\" value=\"{{ address.id }}\" {{- cart.billingAddressId ? ' checked' : null }}>\n          {# Identifying address information, up to you! #}\n        </label>\n      {% endfor %}\n    </div>\n  {% else %}\n    {# If no existing addresses were found, provide forms to add new ones: #}\n    <div class=\"new-billing-address\">\n      <label>\n        First Name\n        <input type=\"text\" name=\"billingAddress[firstName]\">\n      </label>\n        {# ...remainder of address fields... #}\n    </div>\n\n    <div class=\"new-shipping-address\">\n      <label>\n        First Name\n        <input type=\"text\" name=\"shippingAddress[firstName]\">\n      </label>\n      {# ...remainder of address fields... #}\n    </div>\n  {% endif %}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Restarting Craft Queue Workers in Bash\nDESCRIPTION: Command to restart all matching Craft queue worker instances using systemctl. This utilizes the '@' symbol in the service unit file name for flexible instance management.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl restart \"craft-queue-worker@*\"\n```\n\n----------------------------------------\n\nTITLE: User Query Schema in GraphQL\nDESCRIPTION: GraphQL query schema for retrieving a single user with detailed filtering options including ID, status, site preferences, and user-specific fields like email and username.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_17\n\nLANGUAGE: graphql\nCODE:\n```\ntype Query {\n  user(\n    id: [QueryArgument]\n    uid: [String]\n    status: [String]\n    archived: Boolean\n    trashed: Boolean\n    site: [String]\n    siteId: [QueryArgument]\n    unique: Boolean\n    preferSites: [QueryArgument]\n    enabledForSite: Boolean\n    title: [String]\n    slug: [String]\n    uri: [String]\n    search: String\n    relatedTo: [QueryArgument]\n    relatedToAssets: [AssetCriteriaInput]\n    relatedToEntries: [EntryCriteriaInput]\n    relatedToUsers: [UserCriteriaInput]\n    relatedToCategories: [CategoryCriteriaInput]\n    relatedToTags: [TagCriteriaInput]\n    relatedToAll: [QueryArgument]\n    ref: [String]\n    fixedOrder: Boolean\n    inReverse: Boolean\n    dateCreated: [String]\n    dateUpdated: [String]\n    offset: Int\n    limit: Int\n    orderBy: String\n    siteSettingsId: [QueryArgument]\n    email: [String]\n    username: [String]\n    firstName: [String]\n    lastName: [String]\n    hasPhoto: Boolean\n    groupId: [QueryArgument]\n    group: [QueryArgument]\n  ): User\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Content Migration for Multiple Field Layouts in PHP\nDESCRIPTION: Example of implementing a content migration for a custom element type that uses multiple field layouts. The migration iterates through all widget types and calls updateElements() for each field layout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nforeach (MyPlugin::getInstance()->getWidgetTypes()->getAllWidgetTypes() as $type) {\n    $this->updateElements(\n        (new Query())\n            ->from('{{%widgets}}')\n            ->where(['typeId' => $type->id]),\n        $type->getFieldLayout(),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Session Storage in Craft CMS\nDESCRIPTION: Example of configuring the session component to use Redis for session storage in a load-balanced environment. Includes Redis connection settings with environment variable support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// config/app.web.php\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config:\n            $config = craft\\helpers\\App::sessionConfig();\n\n            // Replace component class:\n            $config['class'] = yii\\redis\\Session::class;\n\n            // Define additional properties:\n            $config['redis'] = [\n                'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                'port' => 6379,\n                'password' => App::env('REDIS_PASSWORD') ?: null,\n            ];\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        }\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Debugging with Twig's dump Function\nDESCRIPTION: Shows the usage of the overridden dump function in Craft CMS for debugging purposes, which is available in all contexts and produces consistent output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set news = craft.entries()\n  .section('news')\n  .all() %}\n\n{{ dump(news|column('title')) }}\n```\n\n----------------------------------------\n\nTITLE: Applying Custom Parameters to Eager-Loaded Elements in Twig\nDESCRIPTION: This example demonstrates how to apply custom criteria parameters to eager-loaded elements, such as filtering assets by kind.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    ['assetsField', { kind: 'image' }]\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Applying Custom Transform Parameters with getUrl() in Twig\nDESCRIPTION: Using a custom transform parameters hash with the getUrl(), getWidth(), and getHeight() methods to generate transformed image properties in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<img\n  src=\"{{ asset.getUrl(thumb) }}\"\n  width=\"{{ asset.getWidth(thumb) }}\"\n  height=\"{{ asset.getHeight(thumb) }}\">\n```\n\n----------------------------------------\n\nTITLE: Displaying Entry Revision History in Twig\nDESCRIPTION: Shows how to fetch and display a list of revisions for an entry, including revision dates, notes and creator information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/drafts-revisions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ entry.title }}</h1>\n\n{# ... #}\n\n{% set edits = craft.entries()\n  .revisionOf(entry)\n  .with(['revisionCreator'])\n  .all() %}\n\n{% if edits is not empty %}\n  <h3>History for {{ entry.title }}</h3>\n\n  <ol>\n    {% for edit in edits %}\n      <li>{{ edit.dateUpdated|date('short') }} — {{ edit.revisionNotes }} ({{ edit.revisionCreator.fullName }})</li>\n    {% endfor %}\n  </ol>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Filter Precedence and Expression Grouping in Twig\nDESCRIPTION: Examples showing how filters apply only to the value immediately preceding them, and how parentheses can be used to apply filters to the result of an expression.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ 100.3 + 50.3|round }}\n{# Output: 150.3 #}\n\n{{ (100.3 + 50.3)|round }}\n{# Output: 151 #}\n```\n\n----------------------------------------\n\nTITLE: Registering Matrix Field Save Event in Craft 3 PHP\nDESCRIPTION: Demonstrates how to register an event handler for when a Matrix field is saved in Craft 3 using class-level event handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ModelEvent;\nuse craft\\fields\\Matrix;\nuse yii\\base\\Event;\n\nEvent::on(Matrix::class, Matrix::EVENT_AFTER_SAVE, function(ModelEvent $event) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Email Transport in Craft CMS\nDESCRIPTION: Example of customizing the mailer component configuration, including conditional configuration for development environments using Mailpit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'mailer' => function() {\n            // Get the default component config:\n            $config = App::mailerConfig();\n\n            // Use Mailpit in dev mode:\n            if (Craft::$app->getConfig()->getGeneral()->devMode) {\n                $adapter = craft\\helpers\\MailerHelper::createTransportAdapter(\n                    craft\\mail\\transportadapters\\Smtp::class,\n                    [\n                        'host' => App::env('MAIL_HOST'),\n                        'port' => App::env('MAIL_PORT'),\n                    ]\n                );\n\n                // Override the transport:\n                $config['transport'] = $adapter->defineTransport();\n            }\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Fetching Market Countries in Craft Commerce (Twig and PHP)\nDESCRIPTION: Demonstrates how to retrieve a list of countries in the store's configured market. Returns a key-value array with country ISO codes as keys and country names as values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set storeCountries = craft.commerce\n  .getStore()\n  .getStore()\n  .getCountriesList() %}\n\n<select>\n{% for code, name in storeCountries %}\n  <option value=\"{{ code }}\">\n    {{- name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$storeCountries = \\craft\\commerce\\Plugin::getInstance()\n  ->getStore()\n  ->getStore()\n  ->getCountriesList();\n\nforeach ($storeCountries as $code => $name) {\n    // $code\n    // $name\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Control Panel-Defined Transform in Twig\nDESCRIPTION: This snippet demonstrates how to apply a transform defined in the Control Panel to an asset in a Twig template. It uses the transform's handle with the asset's getUrl(), getWidth(), and getHeight() methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/image-transforms.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl('thumb') }}\"\n    width=\"{{ asset.getWidth('thumb') }}\"\n    height=\"{{ asset.getHeight('thumb') }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Yii Module in Craft CMS\nDESCRIPTION: This snippet shows how to register and bootstrap a custom Yii module in a Craft CMS project using the config/app.php configuration file. It registers a module class and adds it to the bootstrap process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'modules' => [\n        'my-module' => \\modules\\Module::class,\n    ],\n    'bootstrap' => ['my-module'],\n];\n```\n\n----------------------------------------\n\nTITLE: Retrieving Customer Addresses in Craft Commerce with Twig\nDESCRIPTION: Demonstrates how to fetch and display all addresses belonging to the current customer using Craft Commerce's customer.addresses API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-address-management.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% addresses = craft.commerce.customer.addresses %}\n{% for address in addresses %}\n  {address.firstName}<br/>\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Search Keywords Generation in Craft CMS Elements\nDESCRIPTION: This method customizes how search keywords are generated for specific attributes. It adds the currency to the price attribute's keywords and defers to parent implementation for other attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_41\n\nLANGUAGE: php\nCODE:\n```\nprotected function searchKeywords(string $attribute): string\n{\n    // Add the currency to search terms:\n    if ($attribute === 'price') {\n        return join(' ', [\n            $this->$attribute,\n            $this->currency,\n        ]);\n    }\n\n    return parent::searchKeywords($attribute);\n}\n```\n\n----------------------------------------\n\nTITLE: Complex Pagination with Nearby Pages\nDESCRIPTION: Implements a full pagination navigation system showing nearby page numbers, first/last links, and previous/next buttons.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/paginate.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% paginate craft.entries.section('blog').limit(10) as pageInfo, pageEntries %}\n\n<a href=\"{{ pageInfo.firstUrl }}\">First Page</a>\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n\n{% for page, url in pageInfo.getPrevUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n<span class=\"current\">{{ pageInfo.currentPage }}</span>\n\n{% for page, url in pageInfo.getNextUrls(5) %}\n  <a href=\"{{ url }}\">{{ page }}</a>\n{% endfor %}\n\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n<a href=\"{{ pageInfo.lastUrl }}\">Last Page</a>\n```\n\n----------------------------------------\n\nTITLE: Implementing URI Format Resolution for Craft CMS Elements\nDESCRIPTION: This method returns the URI format for an element, which determines its URL pattern. It retrieves the format from a related type object, similar to how entries use section settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_42\n\nLANGUAGE: php\nCODE:\n```\npublic function getUriFormat(): ?string\n{\n    return $this->getType()->uriFormat;\n}\n```\n\n----------------------------------------\n\nTITLE: Form Actions Configuration in CP Template\nDESCRIPTION: Shows how to configure alternate form actions with custom labels, shortcuts, and behavior for a control panel form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set formActions = [\n  {\n    label: 'Save and continue editing'|t('plugin-handle'),\n    redirect: 'plugin-handle/edit/{id}',\n    retainScroll: true,\n    shortcut: true,\n  },\n  {\n    label: 'Save and add another'|t('plugin-handle'),\n    redirect: 'plugin-handle/new',\n    shortcut: true,\n    shift: true,\n  },\n  {\n    label: 'Delete'|t('plugin-handle'),\n    confirm: 'Are you sure you want to delete this?'|t('plugin-handle'),\n    redirect: 'plugin-handle',\n    destructive: true,\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Complete ColorData Method Examples\nDESCRIPTION: Comprehensive example showing all available ColorData methods for manipulating and accessing color values in different formats including hex, RGB, HSL, and individual color components.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/color-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  {{ entry.myFieldHandle }}                 {# output: #e5422b #}\n  {{ entry.myFieldHandle.getHex() }}        {# output: #e5422b #}\n  {{ entry.myFieldHandle.getRgb() }}        {# output: rgb(229,66,43) #}\n  {{ entry.myFieldHandle.getHsl() }}        {# output: hsl(7,81%,90%) #}\n  {{ entry.myFieldHandle.getLuma() }}       {# output: 0.38820862745098 #}\n  {{ entry.myFieldHandle.getHue() }}        {# output: 7 #}\n  {{ entry.myFieldHandle.getLightness() }}  {# output: 90 #}\n  {{ entry.myFieldHandle.getSaturation() }} {# output: 81 #}\n  {{ entry.myFieldHandle.getRed() }}        {# output: 229 #}\n  {{ entry.myFieldHandle.getGreen() }}      {# output: 66 #}\n  {{ entry.myFieldHandle.getBlue() }}       {# output: 43 #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    echo $entry->myFieldHandle;                  // output: #e5422b\n    echo $entry->myFieldHandle->getHex();        // output: #e5422b\n    echo $entry->myFieldHandle->getRgb();        // output: rgb(229,66,43)\n    echo $entry->myFieldHandle->getHsl();        // output: hsl(7,81%,90%)\n    echo $entry->myFieldHandle->getLuma();       // output: 0.38820862745098\n    echo $entry->myFieldHandle->getHue();        // output: 7\n    echo $entry->myFieldHandle->getLightness();  // output: 90\n    echo $entry->myFieldHandle->getSaturation(); // output: 81\n    echo $entry->myFieldHandle->getRed();        // output: 229\n    echo $entry->myFieldHandle->getGreen();      // output: 66\n    echo $entry->myFieldHandle->getBlue();       // output: 43\n}\n```\n\n----------------------------------------\n\nTITLE: Using Object Templates in Craft CMS\nDESCRIPTION: Examples of object templates used in various contexts within Craft CMS, such as element title formats and asset upload paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nCurrent Coupons (Last updated {{ now|date('Y-m-d') }})\nCurrent Coupons (Last updated by {{ currentUser.username }})\n```\n\n----------------------------------------\n\nTITLE: Creating Tag Queries in Twig and PHP\nDESCRIPTION: Examples showing how to initialize tag queries in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new tag query #}\n{% set myTagQuery = craft.tags() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new tag query\n$myTagQuery = \\craft\\elements\\Tag::find();\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript with js Tag in Twig\nDESCRIPTION: The js tag registers a JavaScript file or code block. It can specify the position of the script tag and include additional HTML attributes. The tag supports both external files and inline code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a JS file #}\n{% js \"/assets/js/script.js\" %}\n\n{# Register a JS code block #}\n{% js %}\n  _gaq.push([\n    \"_trackEvent\",\n    \"Search\",\n    \"{{ searchTerm|e('js') }}\"\n  ]);\n{% endjs %}\n```\n\n----------------------------------------\n\nTITLE: Ordering Variants by Price in Twig\nDESCRIPTION: This snippet demonstrates how to query variants related to an entry and order them by price in descending order using a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pricing-rules.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch variants featured in a given article: #}\n{% set variants = craft.variants()\n  .relatedTo({\n    sourceElement: entry,\n  })\n  .orderBy('price DESC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Overriding ActiveRecord find() Method for Soft Delete Support in PHP\nDESCRIPTION: Example of how to override the ActiveRecord find() method when using soft deletion. This ensures that queries through the find() method will automatically exclude soft-deleted records by adding a dateDeleted condition.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic static function find()\n{\n    // @var MyActiveQuery $query\n    $query = Craft::createObject(MyActiveQuery::class, [static::class]);\n    $query->where(['dateDeleted' => null]);\n    return $query;\n}\n```\n\n----------------------------------------\n\nTITLE: Sanitizing HTML with purify Filter in Twig\nDESCRIPTION: The purify filter runs text through HTML Purifier to sanitize and ensure safe HTML output. It can use default settings or a custom HTML Purifier configuration file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{{ user.bio|purify }}\n\n{{ user.bio|purify('user_bio') }}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Assets Fields in PHP\nDESCRIPTION: A PHP example showing how to fetch entries that have at least one related asset in a specific Assets field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related asset\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Removing Unique Constraints for Soft-Deletable Tables in PHP\nDESCRIPTION: Demonstrates how to remove unique constraints from database tables that will support soft-deletion. Uses MigrationHelper to drop existing unique indices and recreate them as non-unique to avoid conflicts with soft-deleted records.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\MigrationHelper;\n\n// Stop enforcing unique handles at the database level\nMigrationHelper::dropIndexIfExists('{{%mytablename}}', ['handle'], true, $this);\n$this->createIndex(null, '{{%mytablename}}', ['handle'], false);\n```\n\n----------------------------------------\n\nTITLE: Requiring Permissions for Template Access in Twig\nDESCRIPTION: Shows how to require a specific permission to access an entire template using the 'requirePermission' tag in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'accessCp' %}\n```\n\n----------------------------------------\n\nTITLE: Saving Checkboxes Fields Template\nDESCRIPTION: Complete template example for creating a form that saves Checkboxes field data, including support for custom options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/checkboxes.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myCheckboxesFieldHandle') %}\n\n{{ hiddenInput('fields[myCheckboxesFieldHandle]', '') }}\n\n<ul>\n  {% for option in field.options %}\n    {% set checked = entry is defined\n      ? entry.myCheckboxesFieldHandle.contains(option.value)\n      : option.default %}\n\n    <li>\n      <label>\n        <input\n          type=\"checkbox\"\n          name=\"fields[myCheckboxesFieldHandle][]\"\n          value=\"{{ option.value }}\"\n          {% if checked %}checked{% endif %}>\n        {{ option.label }}\n      </label>\n    </li>\n  {% endfor %}\n\n  {% if field.customOptions %}\n    {% for option in entry.myCheckboxesFieldHandle | filter(o => not o.valid) %}\n      <li>\n        <label>\n          <input\n            type=\"text\"\n            name=\"fields[myCheckboxesFieldHandle][]\"\n            value=\"{{ option.value }}\">\n          {{ option.label }}\n        </label>\n      </li>\n    {% endfor %}\n\n    <li>\n      <label>\n        Other:\n        <input\n          type=\"text\"\n          name=\"fields[myCheckboxesFieldHandle][]\">\n      </label>\n    </li>\n  {% endif %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Overriding Named Transform Settings in Twig\nDESCRIPTION: Example of how to override specific settings of a named transform using setTransform() with a combination of the transform handle and custom parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({\n  transform: 'thumb',\n  quality: 100,\n}) %}\n\n<img\n  src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Creating Asset Queries in Craft CMS with Twig and PHP\nDESCRIPTION: Shows how to create a new asset query in both Twig templates and PHP code. This is the starting point for fetching assets programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new asset query #}\n{% set myAssetQuery = craft.assets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new asset query\n$myAssetQuery = \\craft\\elements\\Asset::find();\n```\n\n----------------------------------------\n\nTITLE: Creating a Blog Index Page in Craft CMS with Twig\nDESCRIPTION: Demonstrates how to create a blog index page that lists all blog posts using Craft CMS's element queries and Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layout' %}\n\n{% set posts = craft.entries().section('blog').all() %}\n\n{% block content %}\n  <h1>Blog</h1>\n\n  {% for post in posts %}\n    {% set image = post.featureImage.one() %}\n\n    <article>\n      {% if image %}\n        <div class=\"thumbnail\">\n          {{ image.getImg() }}\n        </div>\n      {% endif %}\n\n      <h2>{{ post.title }}</h2>\n\n      <time datetime=\"{{ post.postDate | atom }}\">{{ post.postDate | date }}</time>\n\n      {{ post.summary | md }}\n\n      <a href=\"{{ post.url }}\">Continue Reading</a>\n    </article>\n  {% endfor %}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Cache in Craft CMS\nDESCRIPTION: Example of configuring Redis caching in Craft CMS using the yii2-redis library.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'redis' => [\n            'class' => yii\\redis\\Connection::class,\n            'hostname' => 'localhost',\n            'port' => 6379,\n            'password' => App::env('REDIS_PASSWORD') ?: null,\n        ],\n        'cache' => function() {\n            $config = [\n                'class' => yii\\redis\\Cache::class,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Entries in PHP\nDESCRIPTION: This PHP snippet shows how to filter related entries by section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$relatedEntries = $entry->myFieldHandle\n    ->section('news')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Complete Console Command Test Implementation in PHP\nDESCRIPTION: Full example showing how to test console commands with multiple assertions including stdout, prompts and exit codes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function testSomething()\n{\n    $this->consoleCommand('test-controller/test-action')\n        ->stdOut('This output must be given')\n        ->stdOut('Followed by this one')\n        ->prompt('The user must then input something', 'This will be returned in the controller action (your console command)', 'the $default value')\n        ->exitCode(ExitCode::OK)\n        ->run();\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Element Actions via Event Handler in PHP\nDESCRIPTION: Example of registering element actions for existing element types using Craft's event system. Shows how to attach actions to Entry elements through the Element::EVENT_REGISTER_ACTIONS event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\base\\Element;\nuse craft\\elements\\Entry;\nuse craft\\events\\RegisterElementActionsEvent;\nuse mynamespace\\elements\\actions\\MyAction;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Entry::class,\n            Element::EVENT_REGISTER_ACTIONS,\n            function(RegisterElementActionsEvent $event) {\n                $event->actions[] = MyAction::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Returning JSON Response in Craft Controller\nDESCRIPTION: Shows how to return JSON responses from a controller action using asJson() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    return $this->asJson([\n        'foo' => true,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Multi-Variant Product Cart Form in Twig\nDESCRIPTION: Enhanced form implementation allowing customers to choose from multiple product variants using a dropdown selector.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adding-to-and-updating-the-cart.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products.one() %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Added {{ product.title }} to the cart.\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.id }}\">{{ variant.sku }}</option>\n    {% endfor %}\n  </select>\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Linking FontAwesome CSS Files in Twig\nDESCRIPTION: This snippet shows how to include FontAwesome CSS files in a Twig template using the css tag. Craft will automatically add these to the head of the document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/icon.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% css '/assets/fontawesome/fontawesome.css' %}\n{% css '/assets/fontawesome/solid.css' %}\n```\n\n----------------------------------------\n\nTITLE: Eager Loading Named Image Transforms in Craft CMS Twig\nDESCRIPTION: This snippet demonstrates how to eager load named image transforms for featured images in a blog section query. It uses the 'with' parameter to specify the 'thumbnail' transform.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('blog')\n  .with([\n    ['featureImage', { withTransforms: ['thumbnail'] }],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount Information by Coupon Code in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve and display discount information associated with a coupon code using the craft.commerce.discounts.getDiscountByCode() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/coupon-codes.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# @var discount craft\\commerce\\models\\Discount #}\n{% set discount = craft.commerce.discounts.getDiscountByCode(cart.couponCode) %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Twig js Tag for JavaScript Registration\nDESCRIPTION: Demonstrates how to register JavaScript code in a Twig template using Craft's js tag pair.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% js %}\n  console.log('Hello world');\n{% endjs %}\n```\n\n----------------------------------------\n\nTITLE: Enabling Thumb View for Element Indexes in PHP\nDESCRIPTION: Demonstrates how to enable thumbnail view for a source in element indexes by adding a 'hasThumbs' key to the source definition and implementing a getThumbUrl() method in the element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSources(string $context = null): array\n{\n    return [\n        [\n            'key' => 'cad',\n            'label' => 'CAD',\n            'criteria' => [\n                'currency' => 'cad',\n            ],\n            'hasThumbs' => true\n        ],\n        // ...\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\UrlHelper;\n\n// ...\n\npublic function getThumbUrl(int $size)\n{\n    return UrlHelper::resourceUrl(\"product-images/{$this->id}/{$size}\");\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Recipes with Alternate Proteins in Craft CMS Twig\nDESCRIPTION: This snippet shows how to query recipes that use alternate proteins as main ingredients, not substitutions. It uses the targetElement and field parameters in the relatedTo query to be specific about the relationship.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set alternateProteins = recipe.substitutions.foodGroup('protein').all() %}\n\n{% set recipes = craft.entries()\n  .section('recipes')\n  .relatedTo({\n    targetElement: alternateProteins,\n    field: 'ingredients',\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in PHP\nDESCRIPTION: Shows how to query for elements that have a Tags field, filtering results based on the field data using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Generating Unordered Lists with the ul Function in Twig\nDESCRIPTION: The ul function outputs an array of items as an unordered list. It accepts an array of items and optional parameters for attributes and item options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_42\n\nLANGUAGE: twig\nCODE:\n```\n{% set titles = craft.entries()\n  .section('news')\n  .select('title')\n  .column() %}\n{{ ul(titles) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Thumb View for Element Index in PHP\nDESCRIPTION: Shows how to enable thumbnail view for element index sources and implement the getThumbUrl() method to provide thumbnail URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSources(string $context = null): array\n{\n    return [\n        [\n            'key' => 'cad',\n            'label' => 'CAD',\n            'criteria' => [\n                'currency' => 'cad',\n            ],\n            'hasThumbs' => true,\n        ],\n        // ...\n    ];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\npublic function getThumbUrl(int $size): ?string\n{\n    return UrlHelper::resourceUrl(\"product-images/{$this->id}/{$size}\");\n}\n```\n\n----------------------------------------\n\nTITLE: Submitting Base64-encoded File Data for Assets Fields in Twig\nDESCRIPTION: This snippet demonstrates how to submit base64-encoded file data for an Assets field in Craft CMS. It includes hidden inputs for both the file data and filename.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput(\n  'fields[myFieldHandle][data][]',\n  'data:image/jpeg;base64,my-base64-data'\n) }}\n{{ hiddenInput('fields[myFieldHandle][filename][]', 'myFile.ext') }}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Users Fields\nDESCRIPTION: Examples of querying elements that have Users fields, showing both Twig and PHP implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related user #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related user\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Customizing Search Keywords Event Handler\nDESCRIPTION: Event handler for modifying search keywords before they are indexed. Allows replacing keywords or preventing content from being indexed based on custom logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\services\\Search;\nuse craft\\events\\IndexKeywordsEvent;\nuse craft\\helpers\\StringHelper;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_BEFORE_INDEX_KEYWORDS,\n    function(IndexKeywordsEvent $e) {\n        // Element being indexed:\n        $element = $e->element;\n\n        // Current attribute name:\n        $attribute = $e->attribute;\n\n        // Field ID, if indexing a custom field:\n        $fieldId = $e->fieldId;\n\n        // Keywords that will be indexed:\n        $keywords = $e->keywords;\n\n        // Overwrite the keywords (say, to remove common typos)...\n        $e->keywords = StringHelper::replaceAll($e->keywords, ['speling', 'wirds', 'typox'], '', false);\n\n        // ...or outright prevent something from being added to the index:\n        if (StringHelper::contains($e->keywords, 'naughty words', false)) {\n            $e->isValid = false;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Links with URL Field Values in Twig\nDESCRIPTION: This snippet demonstrates how to use a URL field value to create an HTML link using Craft's tag function. It checks if the field has a value before rendering the link and uses the normalized URL value as the href attribute.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/url-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <h3>Link</h3>\n  {{ tag('a', {\n    text: 'Learn More',\n    href: entry.myFieldHandle\n  }) }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Getting Editable Global Sets in Craft CMS\nDESCRIPTION: The getEditableSets() method returns an array of all global sets that the current user has permission to edit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getEditableSets()\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel Navigation Items in Craft CMS with Events\nDESCRIPTION: Example of registering a new control panel navigation item using the EVENT_REGISTER_CP_NAV_ITEMS event. Demonstrates setting up the URL, label, and icon for a navigation item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCpNavItemsEvent;\nuse craft\\web\\twig\\variables\\Cp;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        Cp::class,\n        Cp::EVENT_REGISTER_CP_NAV_ITEMS,\n        function(RegisterCpNavItemsEvent $event) {\n            $event->navItems[] = [\n                'url' => 'section-url',\n                'label' => 'Section Label',\n                'icon' => '@mynamespace/path/to/icon.svg',\n            ];\n        }\n    );\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Iterating through Selected Options in Twig\nDESCRIPTION: Demonstrates how to loop through selected options in a Multi-select field using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle %}\n  Label: {{ option.label }}\n  Value: {{ option }} or {{ option.value }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: User-Selectable Timezone for Date Inputs\nDESCRIPTION: Example of letting users choose a timezone when entering dates in a form. The code provides a dropdown for timezone selection that will be used when saving the date field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone='UTC')\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle][datetime]\" value=\"{{ currentValue }}\">\n\n<select name=\"fields[myFieldHandle][timezone]\">\n  <option value=\"UTC\" selected>UTC</option>\n  <option value=\"America/Los_Angeles\">Pacific Time</option>\n  <!-- ... -->\n</select>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Specific Tax Categories in Twig\nDESCRIPTION: Shows various methods to fetch specific tax categories, including the default category, by ID, and by handle using the TaxCategories service in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Get a reference to the service for brevity below #}\n{% set taxCategories = craft.commerce.getTaxCategories() %}\n\n{# Get the default tax category #}\n{% set category = taxCategories.getDefaultTaxCategory() %}\n\n{# Get tax category with an ID of `123` #}\n{% set category = taxCategories.getTaxCategoryById(123) %}\n\n{# Get tax category with a handle of `general` #}\n{% set category = taxCategories.getTaxCategoryByHandle('general') %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Time Fields\nDESCRIPTION: Examples of querying elements with Time fields in both Twig and PHP, demonstrating time-based filtering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with with a selected time before 10:00 AM #}\n{% set entries = craft.entries()\n  .myFieldHandle('< 10:00')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with with a selected time before 10:00 AM\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('< 10:00')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Applying Template-Defined Transform in Twig\nDESCRIPTION: This snippet demonstrates how to apply a transform defined in the template to an asset. It uses the transform object with the asset's getUrl(), getWidth(), and getHeight() methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/image-transforms.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl(thumb) }}\"\n    width=\"{{ asset.getWidth(thumb) }}\"\n    height=\"{{ asset.getHeight(thumb) }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Querying Fully Transformed Assets via GraphQL\nDESCRIPTION: This GraphQL query shows how to apply a named transform to entire asset objects using the @transform directive. It retrieves the title, alt text, URL, and transformed dimensions of assets using the 'fullscreen' transform.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_10\n\nLANGUAGE: graphql\nCODE:\n```\nquery Gallery {\n  assets(volume: \"images\") @transform(\"fullscreen\") {\n    title\n    alt\n    url\n    width\n    height\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Entries in Twig\nDESCRIPTION: This Twig snippet demonstrates how to filter related entries by section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedEntries = entry.myFieldHandle\n  .section('news')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Tags with the tag Function in Twig\nDESCRIPTION: The tag function renders a complete HTML tag. It accepts the tag name and an attributes object. Special attributes 'text' and 'html' can be used to set the tag's content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_41\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  class: 'foo'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  text: 'Hello'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  html: 'Hello<br>world'\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('input', {\n  id: 'foo',\n  name: 'bar',\n  required: true\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('input', {\n  name: 'bar',\n  value: 'Foobar & Baz',\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Gateway Post Redirect Template in Twig\nDESCRIPTION: A Twig template for performing POST requests to offsite payment gateways. The template includes a form that automatically submits to the gateway URL with hidden inputs and provides basic styling for the redirect page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/configuration.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <title>Redirecting...</title>\n</head>\n<body onload=\"document.forms[0].submit();\">\n<form action=\"{{ actionUrl }}\" method=\"post\">\n  <p>Redirecting to payment page...</p>\n  <p>\n    {{ inputs|raw }}\n    <input type=\"submit\" value=\"Continue\">\n  </p>\n</form>\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Running Migrations in Atomic Deployment for Craft CMS\nDESCRIPTION: This snippet demonstrates how to run migrations and apply project config changes in an atomic deployment process for Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n# ...\n\n# Run migrations and apply project config:\nphp $RELEASE/craft up --interactive=0\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Payment Gateway Type in PHP\nDESCRIPTION: Code for registering a custom payment gateway type using the registerGatewayTypes event in a plugin or module's init() method. The gateway type is added to the types array in the event handler.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/payment-gateway-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\Gateways;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gateways::class,\n    Gateways::EVENT_REGISTER_GATEWAY_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyGateway::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Handling Behavior Conflicts with SoftDeleteTrait in PHP\nDESCRIPTION: Example of how to handle an Active Record class that already defines behaviors while importing the SoftDeleteTrait, by renaming the trait's behaviors method and calling it manually.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\ActiveRecord;\nuse craft\\db\\SoftDeleteTrait;\n\nclass MyRecord extends ActiveRecord\n{\n    use SoftDeleteTrait {\n        behaviors as softDeleteBehaviors;\n    }\n\n    public function behaviors(): array\n    {\n        $behaviors = $this->softDeleteBehaviors();\n        $behaviors['myBehavior'] = MyBehavior::class;\n        return $behaviors;\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Multi-select Field Data in Twig\nDESCRIPTION: Shows how to access a Multi-select field's data in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Currency with currency Filter in Twig\nDESCRIPTION: The 'currency' filter formats a number with a given currency according to the user's preferred language, with options to strip zeros for whole numbers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|currency('USD') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|currency('USD', stripZeros=true) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'oh hai'|currency('USD') }}\n```\n\n----------------------------------------\n\nTITLE: URL Generation in Craft CMS Email Templates\nDESCRIPTION: Examples of proper URL generation functions for email templates in Craft CMS. Demonstrates using siteUrl() and cpUrl() to ensure correct links regardless of where the email was triggered from.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/mail.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Forces a site URL: #}\n{{ siteUrl('dashboard') }}\n\n{# Forces a control panel URL: #}\n{{ cpUrl('myaccount')}}\n```\n\n----------------------------------------\n\nTITLE: Querying Products with GraphQL\nDESCRIPTION: Shows how to fetch the same ten most recent clothing products using GraphQL, demonstrating parameters and field selection including type-specific fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_6\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  products(limit: 10, type: \"clothing\") {\n    title\n    uri\n    ... on clothing_Product {\n      summary\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using andRelatedTo Parameter for Multiple Relational Criteria in Twig\nDESCRIPTION: This snippet shows how to use the andRelatedTo parameter to achieve the same results as using the 'and' operator. It finds recipes that are related to both the origin and share proteins with the current recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set regionalDishes = craft.entries()\n  .section('recipes')\n  .relatedTo(origin)\n  .andRelatedTo(proteins)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Table Attributes for Element Indexes in PHP\nDESCRIPTION: Demonstrates how to customize the columns available in the Table view of element indexes by implementing the defineTableAttributes() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineTableAttributes(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n        'currency' => \\Craft::t('plugin-handle', 'Currency'),\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Incorrect and Correct Tag Usage in Twig\nDESCRIPTION: This snippet illustrates incorrect ways of nesting Twig tags and provides the correct alternatives. It shows how to properly set variables and use conditionals within Craft's entry queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/twig-primer.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# wrong #}\n{% set entry = craft.entries.section( {{ sectionId }} ).first() %}\n{% set entry = craft.entries.section( {% if filterBySection %} sectionId {% endif %} ) %}\n\n{# right #}\n{% set entry = craft.entries.section( sectionId ).first() %}\n{% set entry = craft.entries.section( filterBySection ? sectionId : null ) %}\n```\n\n----------------------------------------\n\nTITLE: Outputting Hidden Action Input in Twig\nDESCRIPTION: Demonstrates the use of the actionInput() function to output a hidden input for routing POST requests to a controller action. Shows basic usage and how to add additional attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user', {\n  id: 'action-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Restoring Soft-Deleted Records Using Active Record in PHP\nDESCRIPTION: Code demonstrating how to restore a soft-deleted record using the Active Record approach by finding a trashed record and calling its restore() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$record = MyRecord::findTrashed()\n    ->where(['id' => $id])\n    ->one();\n\n$record->restore();\n```\n\n----------------------------------------\n\nTITLE: Enabling Settings Support for Field Layout Elements in PHP\nDESCRIPTION: Enables configuration options for individual field layout element instances. When this returns true, the system will display a Settings option in the field layout designer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function hasSettings()\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Template-Defined Transform using getUrl and dimensions\nDESCRIPTION: This snippet demonstrates how to apply a template-defined transform to an image asset, using the hash variable with getUrl(), getWidth(), and getHeight() methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl(thumb) }}\"\n  width=\"{{ asset.getWidth(thumb) }}\"\n  height=\"{{ asset.getHeight(thumb) }}\">\n```\n\n----------------------------------------\n\nTITLE: Implementing Controller Actions for Edit Pages in Craft CMS\nDESCRIPTION: This PHP code defines two controller actions: one for displaying the edit page and another for handling form submissions. It includes permission checks, data validation, and error handling for both new and existing events.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-edit-pages.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\models\\Event;\nuse Craft;\nuse craft\\helpers\\DateTimeHelper;\nuse yii\\web\\BadRequestHttpException;\nuse yii\\web\\Response;\n\npublic function actionEdit(?int $eventId = null, ?Event $event = null): Response\n{\n    $this->requirePermission('edit-events');\n\n    if (!$event) {\n        if ($eventId) {\n            $event = MyPlugin::getInstance()->events->getEventById($eventId);\n            if (!$event) {\n                throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n            }\n        } else {\n            $event = new Event();\n        }\n    }\n    \n    return $this->renderTemplate('plugin-handle/events/_edit', [\n        'event' => $event,\n    ]);\n}\n\npublic function actionSave(): ?Response\n{\n    $this->requirePermission('edit-events');\n\n    $eventId = $this->request->getBodyParam('eventId');\n\n    if ($eventId) {\n        $event = MyPlugin::getInstance()->events->getEventById($eventId);\n        if (!$event) {\n            throw new BadRequestHttpException(\"Invalid event ID: $eventId\");\n        }\n    } else {\n        $event = new Event();\n    }\n\n    $event->name = $this->request->getBodyParam('name');\n    $event->startDate = DateTimeHelper::toDateTime($this->request->getBodyParam('startDate'));\n    $event->endDate = DateTimeHelper::toDateTime($this->request->getBodyParam('endDate'));\n\n    if (!MyPlugin::getInstance()->events->saveEvent($event)) {\n        if ($this->request->acceptsJson) {\n            return $this->asJson(['errors' => $event->getErrors()]);\n        }\n\n        $this->setFailFlash(Craft::t('plugin-handle', 'Couldn't save event.'));\n        \n        Craft::$app->urlManager->setRouteParams([\n            'event' => $event,\n        ]);\n        return null;\n    }\n\n    if ($this->request->acceptsJson) {\n        return $this->asJson(['success' => true]);\n    }\n\n    $this->setSuccessFlash(Craft::t('plugin-handle', 'Event saved.'));\n    $this->redirectToPostedUrl($event);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Asset Query from an Assets Field in Twig\nDESCRIPTION: Shows how to access the Asset Query object from an Assets field in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Time Field Values\nDESCRIPTION: Examples of accessing Time field values in templates and formatting them using the time filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n\n{% if entry.myFieldHandle %}\n  Selected time: {{ entry.myFieldHandle|time('short') }}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    $selectedTime = \\Craft::$app->getFormatter()->asTime(\n        $entry->myFieldHandle, \n        'short'\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CRON Job for Queue Processing\nDESCRIPTION: Example CRON configuration to run the queue processor every five minutes. Uses absolute paths to ensure proper execution regardless of CRON's working directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n*/5 * * * * /usr/bin/env php /var/www/craft queue/run\n```\n\n----------------------------------------\n\nTITLE: Accessing Radio Buttons Field Data in PHP\nDESCRIPTION: Shows how to access and work with radio buttons field data in PHP, including checking for selected values and iterating through options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myRadioFieldHandle;\n\n$entry->myRadioFieldHandle; // -> craft\\fields\\data\\SingleOptionFieldData\n$entry->myRadioFieldHandle->value; // -> string\n\nif ($entry->myRadioFieldHandle->value) {\n  // Yep, a value was selected!\n}\n\n$entry->myRadioFieldHandle->label; // -> \"The selected option's user-facing label!\"\n\nforeach ($entry->myRadioFieldHandle->options as $option) {\n    $option->label;\n    $option->value;\n    $option->selected ? 'Yes' : 'No';\n}\n```\n\n----------------------------------------\n\nTITLE: Category Query Arguments in GraphQL\nDESCRIPTION: Comprehensive list of arguments available for querying categories in Craft CMS through GraphQL. Includes filtering, pagination, relationship, and structural query parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_21\n\nLANGUAGE: graphql\nCODE:\n```\nquery category(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  archived: Boolean\n  trashed: Boolean\n  site: [String]\n  siteId: [QueryArgument]\n  # ... additional arguments as documented\n)\n```\n\n----------------------------------------\n\nTITLE: Creating New Entry Form in Twig for Craft CMS\nDESCRIPTION: This Twig template creates a form for submitting new entries in Craft CMS. It includes error handling, CSRF protection, and fields for title and body. The form is configured to save entries to a specific section and redirect after submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entry-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% macro errorList(errors) %}\n  {% if errors %}\n    <ul class=\"errors\">\n      {% for error in errors %}\n        <li>{{ error }}</li>\n      {% endfor %}\n    </ul>\n  {% endif %}\n{% endmacro %}\n\n{% from _self import errorList %}\n\n<form method=\"post\" accept-charset=\"UTF-8\">\n  {{ getCsrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"entries/saveEntry\">\n  <input type=\"hidden\" name=\"redirect\" value=\"viewentry/{slug}\">\n  <input type=\"hidden\" name=\"sectionId\" value=\"2\">\n  <input type=\"hidden\" name=\"enabled\" value=\"1\">\n\n  <label for=\"title\">Title</label>\n  <input id=\"title\" type=\"text\" name=\"title\"\n    {%- if entry is defined %} value=\"{{ entry.title }}\"{% endif -%}>\n\n  {% if entry is defined %}\n    {{ errorList(entry.getErrors('title')) }}\n  {% endif %}\n\n  <label for=\"body\">Body</label>\n  <textarea id=\"body\" name=\"fields[body]\">\n    {%- if entry is defined %}{{ entry.body }}{% endif -%}\n  </textarea>\n\n  {% if entry is defined %}\n    {{ errorList(entry.getErrors('body')) }}\n  {% endif %}\n\n  <input type=\"submit\" value=\"Publish\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring Memcached Cache in PHP\nDESCRIPTION: Example of configuring Craft to use Memcached for caching by setting up the cache component with MemCache.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\MemCache::class,\n                'useMemcached' => true,\n                'username' => App::env('MEMCACHED_USERNAME'),\n                'password' => App::env('MEMCACHED_PASSWORD'),\n                'defaultDuration' => 86400,\n                'servers' => [\n                    [\n                        'host' => App::env('MEMCACHED_HOST') ?: 'localhost',\n                        'persistent' => true,\n                        'port' => 11211,\n                        'retryInterval' => 15,\n                        'status' => true,\n                        'timeout' => 15,\n                        'weight' => 1,\n                    ],\n                ],\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Requiring Permissions in Twig Templates\nDESCRIPTION: Demonstrates how to require specific permissions in Twig templates using the requirePermission tag. This prevents unauthorized users from accessing protected template sections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'stayUpLate' %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Tags Field Form in Twig\nDESCRIPTION: Demonstrates how to create a form for a Tags field, including checkboxes for each possible tag and handling of currently related tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleTags = craft.entries()\n  .group('blogEntryTags')\n  .orderBy('title ASC')\n  .all() %}\n\n{% set relatedTagIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleTag in possibleTags %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleTag.id,\n          { checked: possibleTag.id in relatedTagIds }\n        ) }}\n        {{ possibleTag.title }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Namespacing HTML and CSS with namespace Filter\nDESCRIPTION: Shows how to namespace input names, HTML attributes, and CSS selectors using the 'namespace' or 'ns' filter, with options to include class names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% set html %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endset %}\n{{ html|namespace('foo') }}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"foo-title\" name=\"foo[title]\" type=\"text\">\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ html|namespace('foo', withClasses=true) }}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .foo-text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"foo-text\" id=\"foo-title\" name=\"foo[title]\" type=\"text\">\n```\n\n----------------------------------------\n\nTITLE: Querying Entry Revisions in Twig\nDESCRIPTION: Examples of querying revisions using various methods including getting all revisions, revisions of a specific entry, revisions by ID, and revisions by creator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/drafts-revisions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set changelog = craft.entries()\n  .section('news')\n  .revisions()\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set editHistory = craft.entries()\n  .section('news')\n  .revisionOf(entry)\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set specificRevision = craft.entries()\n  .revisionId(5678)\n  .one() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set myChangelog = craft.entries()\n  .section('news')\n  .revisionCreator(currentUser)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using Twig's commerceCurrency Filter for Currency Formatting and Conversion\nDESCRIPTION: Examples of how to use the commerceCurrency Twig filter to format and convert currencies. The filter can display currency values in different currencies with proper formatting, and can also perform currency conversion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/payment-currencies.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.00|commerceCurrency(cart.currency)}} // US$ 10.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true)}} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true,format=false)}} // 13.0000\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true,format=true)}} // A$ 13.00\n```\n\n----------------------------------------\n\nTITLE: Using Hashes in Twig\nDESCRIPTION: Explains how to define and use hashes (key-value pairs) in Twig, including creating hashes with dynamic keys and accessing hash values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set specs = {\n  length: '108cm',\n  width: '68.6cm',\n  height: '53.3cm',\n  weight: '90kg'\n} %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set myKey = 'weight' %}\n{% set myValue = '90kg' %}\n\n{% set specs = {\n  (myKey): myValue\n} %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<dl class=\"specs\">\n  {% for key, value in specs %}\n    <dt>{{ key }}</dt>\n    <dd>{{ value }}</dd>\n  {% endfor %}\n</dl>\n```\n\nLANGUAGE: twig\nCODE:\n```\n<dl class=\"specs\">\n  <dt>Dimensions</dt>\n  <dd>{{ specs.length }} × {{ specs.width }} × {{ specs.height }}</dd>\n\n  <dt>Weight</dt>\n  <dd>{{ specs['weight'] }}</dd>\n</dl>\n```\n\n----------------------------------------\n\nTITLE: Encrypting and Encoding Strings with encenc Filter in Twig\nDESCRIPTION: The 'encenc' filter encrypts and base64-encodes a string, useful for securing sensitive information in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'secure-string'|encenc }}\n```\n\n----------------------------------------\n\nTITLE: Querying Variants on Promotion in Twig\nDESCRIPTION: This snippet demonstrates how to query for variants that are currently on promotion (have an effective promotional price less than their base price) using a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pricing-rules.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set saleItems = craft.variants()\n  .onPromotion(true)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Setting Permissions for Craft Project in WSL2\nDESCRIPTION: Shell commands to set appropriate file and directory permissions for a Craft CMS project when running in WSL2. These permissions are necessary for Craft to function properly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/windows.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nchmod 777 ./.env\nchmod 777 ./composer.lock\nchmod 777 ./composer.json\nsudo chmod -R 777 ./config\nsudo chmod -R 777 ./storage\nsudo chmod -R 777 ./vendor\nsudo chmod -R 777 ./web\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin Control Panel Navigation with getCpNavItem() in PHP\nDESCRIPTION: Overriding the getCpNavItem() method to customize a plugin's control panel navigation item with additional properties like badgeCount and subnav items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function getCpNavItem(): ?array\n{\n    $item = parent::getCpNavItem();\n    $item['badgeCount'] = 5;\n    $item['subnav'] = [\n        'foo' => ['label' => 'Foo', 'url' => 'plugin-handle/foo'],\n        'bar' => ['label' => 'Bar', 'url' => 'plugin-handle/bar'],\n        'baz' => ['label' => 'Baz', 'url' => 'plugin-handle/baz'],\n    ];\n    return $item;\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Switch Subscription Plan Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a subscription plan switch. Can prevent the switch by setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_36\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionSwitchPlansEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_BEFORE_SWITCH_SUBSCRIPTION_PLAN, function(SubscriptionSwitchPlansEvent $e) {\n    // Do something - maybe mody the switch parameters based on some business logic.\n});\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Number Fields in Craft CMS\nDESCRIPTION: Examples of querying elements with Number fields using both Twig and PHP. Shows how to filter elements based on numeric field values with comparison operators.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/number-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a Number field set to at least 100 #}\n{% set entries = craft.entries()\n  .myFieldHandle('>= 100')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a Number field set to at least 100\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('>= 100')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Console Command Usage Examples in Bash\nDESCRIPTION: Examples of running console commands with different parameters and options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# Run the \"default action\":\nphp craft acme/greet\n# -> Hello, world!\n\n# Run the developer-specific greeting:\nphp craft acme/greet/developer\n# -> Hello, world!\n\n# Pass a name:\nphp craft acme/greet/developer --who=\"Marvin\"\n# -> Hello, Marvin!\n```\n\n----------------------------------------\n\nTITLE: Adding Dynamic CSS with includeCss Tag in Twig\nDESCRIPTION: This snippet demonstrates how to define CSS with Twig variables and include it in the page. It creates a CSS block that sets text color based on an entry field value, then includes it using the includeCss tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includecss.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myCss %}\n.content {\n  color: {{ entry.textColor }};\n}\n{% endset %}\n\n{% includeCss myCss %}\n```\n\n----------------------------------------\n\nTITLE: Converting Strings to PascalCase in Twig\nDESCRIPTION: Shows how to convert a string to PascalCase (UpperCamelCase) format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|pascal }}\n{# Output: FooBar #}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom HTTP Headers in Craft CMS\nDESCRIPTION: Demonstrates how to attach the Headers filter to the web application to set custom HTTP headers on site responses. The example shows setting Permissions-Policy and a custom X-Foo header for specific sites.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Attach the headers filter to the application:\n    'as headersFilter' => [\n        'class' => \\craft\\filters\\Headers::class,\n        'site' => ['siteA', 'siteB'],\n        'headers' => [\n            // Define pairs of headers:\n            'Permissions-Policy' => 'interest-cohort=()',\n            'X-Foo' => 'Bar',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Total in Multiple Payment Currencies\nDESCRIPTION: Shows how to iterate through available payment currencies and display the cart's outstanding balance converted to each currency using the commerceCurrency filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/twig-filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for currency in craft.commerce.paymentCurrencies %}\n  Total in {{ currency.iso|upper }}: {{ cart.outstandingBalance|commerceCurrency(\n    currency,\n    convert=true\n  ) }}<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using commerceCurrency Filter for Currency Formatting and Conversion in Twig\nDESCRIPTION: The commerceCurrency filter allows formatting and converting currency values. It can be used as a replacement for Craft's built-in currency filter but adds conversion capabilities between different currencies based on exchange rates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/twig-filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.00|commerceCurrency(cart.currency) }} // US$ 10.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true) }} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=false) }} // 13.0000\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=true) }} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=true,stripZeros=true) }} // A$ 13\n```\n\n----------------------------------------\n\nTITLE: Fetching Country by ISO Code in Twig\nDESCRIPTION: Demonstrates how to retrieve a specific country by its two-character ISO code using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set country = craft.commerce.countries.countryByIso('AU') %}\n{# country.id #}\n{# country.name #}\n```\n\n----------------------------------------\n\nTITLE: Custom PHP Address Formatter Implementation\nDESCRIPTION: Demonstrates creating a custom address formatter that extends the default formatter with additional options like country hiding.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nuse CommerceGuys\\Addressing\\AddressInterface;\nuse CommerceGuys\\Addressing\\Formatter\\DefaultFormatter;\nuse CommerceGuys\\Addressing\\Locale;\nuse craft\\helpers\\Html;\n\nclass OptionalCountryFormatter extends DefaultFormatter\n{\n    protected $defaultOptions = [\n        'locale' => 'en',\n        'html' => true,\n        'html_tag' => 'p',\n        'html_attributes' => ['translate' => 'no'],\n        'hide_countries' => [],\n    ];\n\n    public function format(AddressInterface $address, array $options = []): string\n    {\n        // ... implementation ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Including a Reusable Template in Twig\nDESCRIPTION: This snippet shows how to include a reusable template in Twig. It demonstrates both the simple include syntax and an advanced version that explicitly passes variables and limits the scope.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% include 'blog/_feed' %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% include 'blog/_feed' with {\n  posts: posts\n} only %}\n```\n\n----------------------------------------\n\nTITLE: Preventing HTML Encoding with raw()\nDESCRIPTION: Demonstrates the raw() function which wraps a string in a Twig\\Markup object to prevent it from being HTML-encoded when output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n{% set html = raw('<p>Don't encode me.</p>') %}\n{{ html }}\n```\n\n----------------------------------------\n\nTITLE: Order Array Generation in PHP\nDESCRIPTION: PHP code showing how order data is converted to an array format for use in shipping rule condition formulas. Includes related line items and address data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/shipping.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$order->toArray(\n    [], ['lineItems.snapshot', 'shippingAddress', 'billingAddress']\n);\n```\n\n----------------------------------------\n\nTITLE: Using timestamp Filter for Relative Time Formatting in Twig\nDESCRIPTION: Shows how to use the timestamp filter which outputs a date using plain-language relative terms when possible, with examples of various time periods and optional prepositions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|timestamp }}\n{# Output: 16:25 #}\n\n{{ now|date_modify('-1 day')|timestamp }}\n{# Output: Yesterday #}\n\n{{ now|date_modify('-4 days')|timestamp }}\n{# Output: Friday #}\n\n{{ now|date_modify('-2 months')|timestamp(withPreposition=true) }}\n{# Output: 'on March 29, 2023' #}\n```\n\n----------------------------------------\n\nTITLE: Adding Multiple Items to Cart\nDESCRIPTION: Form that adds all variants of a product to the cart in a single request using the purchasables array parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n  {{ hiddenInput('successMessage', 'Products added to the cart.'|hash) }}\n  {% for variant in product.variants %}\n     {{ hiddenInput('purchasables[' ~ loop.index ~ '][id]', variant.id) }}\n     {{ hiddenInput('purchasables[' ~ loop.index ~ '][qty]', 1) }}\n  {% endfor %}\n  <button type=\"submit\">Add all variants to cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom GraphQL Directive in PHP for Craft CMS\nDESCRIPTION: A PHP implementation of a custom GraphQL directive that replaces 'foo' with 'bar' in string field values. This directive demonstrates how to create, register, and apply transformations to GraphQL query results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\directives;\n\nuse craft\\gql\\base\\Directive;\nuse craft\\gql\\GqlEntityRegistry;\nuse GraphQL\\Language\\DirectiveLocation;\nuse GraphQL\\Type\\Definition\\Directive as GqlDirective;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\n\nclass BarTheFoo extends Directive\n{\n\n    public static function create(): GqlDirective\n    {\n        if ($type = GqlEntityRegistry::getEntity(self::name())) {\n            return $type;\n        }\n\n        $type = GqlEntityRegistry::createEntity(static::name(), new self([\n            'name' => static::name(),\n            'locations' => [\n                DirectiveLocation::FIELD,\n            ],\n            'description' => 'Replace `foo` with `bar`.',\n            'args' => [],\n        ]));\n\n        return $type;\n    }\n\n    public static function name(): string\n    {\n        return 'fooTheBar';\n    }\n\n    public static function apply($source, $value, array $arguments, ResolveInfo $resolveInfo): mixed\n    {\n        return str_replace('foo', 'bar', (string)$value);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Module Setup for Console Commands in PHP\nDESCRIPTION: Example module class configuration to handle both console and web requests by setting appropriate controller namespaces.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace acme;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace\n        Craft::setAlias('@acme', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'acme\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'acme\\\\controllers';\n        }\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Strings to snake_case with snake Filter in Twig\nDESCRIPTION: The snake filter formats a string in 'snake_case', where words are lowercase and separated by underscores. This is useful for generating identifiers or database field names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|snake }}\n{# Output: foo_bar #}\n```\n\n----------------------------------------\n\nTITLE: Declaring Method Types in PHP\nDESCRIPTION: Example of proper method declaration with argument and return types. This demonstrates the recommended approach for type declarations in Craft PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function synchronize(Entry $entry, array $data): bool\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Template in Twig for Craft CMS Plugin\nDESCRIPTION: Defines a Twig template for rendering the plugin's settings form in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.textField({\n  label: 'Foo',\n  name: 'foo',\n  value: settings.foo\n}) }}\n\n{{ forms.textField({\n  label: 'Bar',\n  name: 'bar',\n  value: settings.bar\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Displaying User Subscriptions with Twig\nDESCRIPTION: Shows how to create a subscription query, set parameters, fetch subscriptions, and display them in a Twig template. This example filters subscriptions for the current user and outputs their details in HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/subscription-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Make sure someone is logged in #}\n{% requireLogin %}\n\n{# Create a subscription query with the 'user' parameter #}\n{% set mySubscriptionQuery = craft.subscriptions()\n  .user(currentUser) %}\n\n{# Fetch the subscriptions #}\n{% set subscriptions = mySubscriptionQuery.all() %}\n\n{# Display the subscriptions #}\n{% for subscription in subscriptions %}\n  <article>\n    <h1><a href=\"{{ subscription.url }}\">{{ subscription.title }}</a></h1>\n    {{ subscription.summary }}\n    <a href=\"{{ subscription.url }}\">Learn more</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Entries by Category in Twig\nDESCRIPTION: Element query that fetches blog entries associated with a specific category using the postCategories() method. This demonstrates how Craft's understanding of the content model provides field-specific filtering capabilities.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries().section('blog').postCategories(category).all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Related Recipes with Specific Field in Craft CMS (Twig)\nDESCRIPTION: Shows how to find recipes that use alternative proteins as main ingredients by explicitly specifying the field parameter in the relational query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set alternateProteins = recipe.substitutions.foodGroup('protein').all() %}\n\n{% set recipes = craft.entries()\n  .section('recipes')\n  .relatedTo({\n    targetElement: alternateProteins,\n    field: 'ingredients',\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Deprecator Component in PHP\nDESCRIPTION: Example of customizing a single property on an existing component using a static configuration array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    // ...\n    'components' => [\n        // Customize one property on an existing component:\n        'deprecator' => [\n            'throwExceptions' => App::env('HARD_MODE') ?: false,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: GraphQL Entries Query Arguments Schema\nDESCRIPTION: Complete schema of available arguments for querying entries in Craft CMS. Includes element filters, site selection, relationships, structural parameters, and entry-specific filters like sections and types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_10\n\nLANGUAGE: graphql\nCODE:\n```\ntype Query {\n  entries(\n    id: [QueryArgument]\n    uid: [String]\n    drafts: Boolean\n    draftOf: QueryArgument\n    draftId: Int\n    draftCreator: Int\n    provisionalDrafts: Boolean\n    revisions: Boolean\n    revisionOf: QueryArgument\n    revisionId: Int\n    revisionCreator: Int\n    status: [String]\n    archived: Boolean\n    trashed: Boolean\n    site: [String]\n    siteId: [QueryArgument]\n    unique: Boolean\n    preferSites: [QueryArgument]\n    enabledForSite: Boolean\n    title: [String]\n    slug: [String]\n    uri: [String]\n    search: String\n    relatedTo: [QueryArgument]\n    relatedToAssets: [AssetCriteriaInput]\n    relatedToEntries: [EntryCriteriaInput]\n    relatedToUsers: [UserCriteriaInput]\n    relatedToCategories: [CategoryCriteriaInput]\n    relatedToTags: [TagCriteriaInput]\n    relatedToAll: [QueryArgument]\n    ref: [String]\n    fixedOrder: Boolean\n    inReverse: Boolean\n    dateCreated: [String]\n    dateUpdated: [String]\n    offset: Int\n    limit: Int\n    orderBy: String\n    siteSettingsId: [QueryArgument]\n    withStructure: Boolean\n    structureId: Int\n    level: Int\n    hasDescendants: Boolean\n    ancestorOf: Int\n    ancestorDist: Int\n    descendantOf: Int\n    descendantDist: Int\n    leaves: Boolean\n    nextSiblingOf: Int\n    prevSiblingOf: Int\n    positionedAfter: Int\n    positionedBefore: Int\n    editable: Boolean\n    section: [String]\n    sectionId: [QueryArgument]\n    type: [String]\n    typeId: [QueryArgument]\n    authorId: [QueryArgument]\n    authorGroup: [String]\n    authorGroupId: [QueryArgument]\n    postDate: [String]\n    before: String\n    after: String\n    expiryDate: [String]\n  ): [Entry!]!\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Flash Messages to Redirects in Craft CMS\nDESCRIPTION: Shows how to add flash notice messages to redirects that will be displayed to the user after the redirect occurs. This example redirects non-members with an explanatory message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser.isInGroup('members') %}\n  {% redirect \"pricing\" 301 with notice \"You have to be a member to access that!\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Controller Return Types in PHP\nDESCRIPTION: Demonstrates proper return handling for controller actions, showing that actions should explicitly return either a string or Response object rather than implicitly completing the request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$this->asJson($obj);\n$this->renderTemplate($template, $variables);\n\n// Better:\nreturn $this->asJson($obj);\nreturn $this->renderTemplate($template, $variables);\n```\n\n----------------------------------------\n\nTITLE: Applying Crop Transforms with Focal Points in Twig\nDESCRIPTION: This snippet shows how to apply a crop transform to an image in Twig, which can be used in conjunction with focal points set in the Craft CMS control panel to ensure important parts of the image are not cropped out.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"photo\">\n  {{ profileImage.getImg({\n    mode: 'crop',\n    width: 360,\n    height: 360,\n  }) }}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Checking Store Settings for Checkout Without Payment in Twig\nDESCRIPTION: This code snippet shows how to check if the store allows checkout without payment and conditionally render a form for submitting a quote request. It demonstrates accessing store settings through the currentStore object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentStore.allowCheckoutWithoutPayment %}\n  {# ... or any other tests against the store settings and current cart state ... #}\n\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/cart/complete') }}\n\n    <button>Submit Quote Request</button>\n\n    <small>Once your order is finalized, we will request payment!</small>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Components in Craft CMS 4 using config()\nDESCRIPTION: This snippet demonstrates the new way of defining plugin components in Craft 4 using the static config() method, which allows for easier customization via config/app.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n// Craft 4 `config()`\npublic static function config(): array\n{\n    return [\n        'components' => [\n            'myComponent' => ['class' => MyComponent::class],\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Mutation Query Example\nDESCRIPTION: Example of a GraphQL mutation query for creating a new widget entity with a title argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_17\n\nLANGUAGE: graphql\nCODE:\n```\nmutation NewWidget($title: String) {\n  createWidget(title: $title) {\n    id\n    title\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: PHP Docblock for Implementation Classes\nDESCRIPTION: Correct usage of inline @var tags in PHP docblocks when referencing implementation classes. This example demonstrates proper type hinting for variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n/** @var \\craft\\base\\Element $element */\n```\n\n----------------------------------------\n\nTITLE: Populating a Craft CMS Model from Data Array\nDESCRIPTION: Shows how to use the populateModel() static method to create a model instance from an existing array of data. This is useful when you already have structured data that maps to model attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\n$ingredient = CocktailRecipes_IngredientModel::populateModel($data);\n```\n\n----------------------------------------\n\nTITLE: Working with Lightswitch Field Data in Craft CMS Templates\nDESCRIPTION: Shows how to access and use Lightswitch field data in Twig templates and PHP code. The example demonstrates conditional rendering based on the field's value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/lightswitch-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <p>I'm on!</p>\n{% else %}\n  <p>I'm off.</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    // I'm on!\n} else {\n    // I'm off.\n}\n```\n\n----------------------------------------\n\nTITLE: Requiring Specific User Permission in Twig\nDESCRIPTION: Demonstrates how to ensure the current user has a specific permission before rendering content. Returns a 403 Forbidden error if the user doesn't have the required permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'stayUpLate' %}\n```\n\n----------------------------------------\n\nTITLE: Converting Categories to Structure Sections in Craft CMS\nDESCRIPTION: Console command to automate the conversion of categories to structure sections in Craft CMS 4.4+. This command takes a category group handle as an argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/categories.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/categories myCategoryGroupHandle\n```\n\n----------------------------------------\n\nTITLE: Looping Through Related Assets in PHP\nDESCRIPTION: A PHP example that fetches all related assets from an Assets field and loops through them to access their properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$relatedAssets = $entry->myFieldHandle->all();\n\nif (count($relatedAssets)) {\n    foreach ($relatedAssets as $rel) {\n        // do something with $rel->url and $rel->filename\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Table Attributes for Craft CMS Element Types in PHP\nDESCRIPTION: This method customizes which columns are available in element indexes' Table views. It returns an associative array mapping attribute keys to their translated labels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineTableAttributes(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n        'currency' => \\Craft::t('plugin-handle', 'Currency'),\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Generating URLs in Craft CMS\nDESCRIPTION: Creates URLs by appending a path to your site's base URL. Respects site configuration settings and automatically maintains preview context when applicable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_55\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ url('company/contact') }}\">Contact Us</a>\n```\n\n----------------------------------------\n\nTITLE: PHP Class Property Documentation and Getter Implementation\nDESCRIPTION: Shows proper documentation and implementation of getter methods with corresponding @property tags for IDE support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @property User $author\n */\nclass Entry\n{\n    private $_author;\n\n    /**\n     * @return User\n     */\n    public function getAuthor()\n    {\n        return $this->_author;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding WHERE Conditions in Craft CMS DbCommand PHP\nDESCRIPTION: Demonstrates how to add additional conditions to a query without overwriting existing ones using the andWhere() method in Craft's DbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\ncraft()->db->createCommand()\n    ->where('foo = 1')\n    ->andWhere('bar = 1')\n    // ...\n```\n\n----------------------------------------\n\nTITLE: Example Unit Test for Craft CMS\nDESCRIPTION: A sample unit test for Craft CMS that tests the edition setting functionality. This demonstrates a basic test structure with Codeception that checks if the Craft edition can be properly set to Pro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace yournamespace\\tests;\n\nuse Codeception\\Test\\Unit;\n\nuse UnitTester;\nuse Craft;\n\nclass ExampleTest extends Unit\n{\n    /**\n     * @var UnitTester\n     */\n    protected $tester;\n\n    public function testExample()\n    {\n        Craft::$app->setEdition(Craft::Pro);\n\n        $this->assertSame(\n            Craft::Pro,\n            Craft::$app->getEdition());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Argument Handlers in PHP\nDESCRIPTION: Shows how to register custom argument handlers with Craft's GraphQL system using the defineGqlArgumentHandlers event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\argumenthandlers\\RelatedWidgets;\nuse craft\\gql\\ArgumentManager;\nuse craft\\events\\RegisterGqlArgumentHandlersEvent;\n\nEvent::on(\n    ArgumentManager::class,\n    ArgumentManager::EVENT_DEFINE_GQL_ARGUMENT_HANDLERS,\n    function(RegisterGqlArgumentHandlersEvent $event) {\n        $event->handlers[\"argumentName\"] = RelatedWidgets::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Lightswitch Fields in Twig and PHP\nDESCRIPTION: Demonstrates how to query for elements with a Lightswitch field enabled using both Twig and PHP. The example filters entries based on a Lightswitch field named 'myFieldHandle'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the lightswitch field enabled #}\n{% set entries = craft.entries()\n  .myFieldHandle(true)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the lightswitch field enabled\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(true)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Appending HTML with Twig in Craft CMS\nDESCRIPTION: Demonstrates the 'append' filter for adding HTML to the end of an element. Shows basic usage and options for keeping or replacing existing elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'keep') }}\n{# Output: <div><p>Lorem</p></div> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'replace') }}\n{# Output: <div><p>Ipsum</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Extending a Base Template in Twig\nDESCRIPTION: A child template that extends the base HTML5 template, overriding the head and body blocks. It sets a custom document title and body attributes, and includes additional CSS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_html5.twig\" %}\n\n{% set docTitle = 'Hello World' %}\n\n{% set bodyAttributes = {\n  class: 'hello-world'\n} %}\n\n{% block head %}\n  {{ parent() }}\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/styles.css\">\n{% endblock %}\n\n{% block body %}\n  <h1>Hello world!</h1>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Updating Payment Form Namespace in Twig for Commerce 4\nDESCRIPTION: This snippet demonstrates how to update the payment form namespace when migrating from Commerce 3 to Commerce 4. It shows the use of the new commercePaymentFormNamespace filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{{ cart.gateway.getPaymentFormHtml(params)|raw }}\n\n{# Commerce 4 #}\n{% namespace cart.gateway.handle|commercePaymentFormNamespace %}\n  {{ cart.gateway.getPaymentFormHtml(params)|raw }}\n{% endnamespace %}\n```\n\n----------------------------------------\n\nTITLE: Querying Asset Transforms with GraphQL\nDESCRIPTION: This GraphQL query demonstrates how to request asset data with transforms applied. It uses the @transform directive to apply a width of 640 pixels and 'fit' mode to the URL of each asset.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_9\n\nLANGUAGE: graphql\nCODE:\n```\nquery Thumbnails {\n  assets(volume: \"images\") {\n    title\n    alt\n    url @transform(width: 640, mode: \"fit\")\n    width\n    height\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"assets\": [\n      {\n        \"title\": \"Warm Springs\",\n        \"alt\": \"Snow-dusted plateau.\",\n        \"url\": \"https://my-project.ddev.site/uploads/images/_640xAUTO_fit_center-center_none/8/warm-springs.jpg\",\n        \"width\": 6000,\n        \"height\": 4000\n      },\n      {\n        \"title\": \"Highway 26\",\n        \"alt\": \"Winter scene near Warm Springs, Oregon\",\n        \"url\": \"https://my-project.ddev.site/uploads/images/_640xAUTO_fit_center-center_none/3/highway-26.jpg\",\n        \"width\": 6000,\n        \"height\": 4000\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries and Related Assets without Eager-Loading in Twig\nDESCRIPTION: This snippet demonstrates how to query entries and their related assets without eager-loading, resulting in an N+1 query problem.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .all() %}\n\n{% for entry in entries %}\n  {# Get the related asset, if there is one #}\n  {% set image = entry.assetsField.one() %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using configure() Function as Alternative to merge Filter\nDESCRIPTION: The configure() function can be used instead of the merge filter to modify an existing object or array by adding or overriding properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set myObject = { one: 'Original' } %}\n{# With `merge`: #}\n{% set myObject = myObject | merge({ one: 'Overridden', two: 'New' }) %}\n\n{# With `configure`: #}\n{% do configure(myObject, { one: 'Overridden', two: 'New' }) %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Session Storage in Craft CMS\nDESCRIPTION: Example of setting up database-backed session storage, including configuration for the session table and component initialization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config:\n            $config = craft\\helpers\\App::sessionConfig();\n\n            // Override the class to use DB session class:\n            $config['class'] = yii\\web\\DbSession::class;\n\n            // Set the session table name:\n            $config['sessionTable'] = craft\\db\\Table::PHPSESSIONS;\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Customizing Fail Message Input Attributes\nDESCRIPTION: The failMessageInput() function allows additional attributes to be set on the rendered tag by passing an options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{{ failMessageInput('Custom fail message', {\n  id: 'fail-message-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Using mockMethods to Mock a Mailchimp Service in Craft CMS\nDESCRIPTION: Demonstrates how to mock a service component in a Mailchimp module to prevent actual external API calls during testing. The example shows mocking the getUsersFromMailchimp method to return predefined user data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/mocking.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->mockMethods(\n    Mailchimp::getInstance(),\n    'externals'\n    [\n        'getUsersFromMailchimp' => [['user1'], ['user2']],\n    ],\n    []\n);\n```\n\n----------------------------------------\n\nTITLE: Content Purification with purify Filter in Twig\nDESCRIPTION: Demonstration of using the purify filter to sanitize user-supplied content with HTML Purifier before processing it as Markdown, allowing some safe HTML elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Purify the content in the Body field, then format as Markdown #}\n{{ entry.body|purify|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions for Logged-in Users in Craft CMS\nDESCRIPTION: This snippet shows how to check if the currently logged-in user has a specific permission using the checkPermission() method of the Craft::$app->user object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/user-permissions.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// See if they have the `stayUpLate` permission\nif (Craft::$app->user->checkPermission('stayUpLate')) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Image Transform in Twig\nDESCRIPTION: Demonstrates how to set a default image transform for an asset and use it to output the transformed image URL, width, and height. This uses the setTransform() method of AssetFileModel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/assetfilemodel.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set transform = {\n  mode: 'crop',\n  width: 100,\n  height: 100\n} %}\n\n{% do image.setTransform(transform) %}\n\n<img src=\"{{ image.url }}\" width=\"{{ image.width }}\" height=\"{{ image.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Returning JSON Response in Craft CMS Controller Action\nDESCRIPTION: Example of returning a JSON response from a Craft CMS controller action using the asJson method when the request accepts JSON.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/controllers.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nuse Craft;\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    if (Craft::$app->request->acceptsJson) {\n        return $this->asJson([\n            'foo' => true,\n        ]);\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Items from Array with without Filter in Twig\nDESCRIPTION: Demonstrates the without filter which returns an array with specified item(s) removed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_49\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries().section('articles').limit(3).all() %}\n{% set firstEntry = entries|first %}\n{% set remainingEntries = entries|without(firstEntry) %}\n```\n\n----------------------------------------\n\nTITLE: Replacing Shipping Adjuster in Craft Commerce PHP\nDESCRIPTION: Illustrates how to replace the default shipping adjuster with a custom one in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/adjusters.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse craft\\commerce\\adjusters\\Shipping;\nuse MyShippingAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $adjusters = $event->types;\n\n        foreach ($adjusters as $key => $adjuster) {\n            if ($adjuster == Shipping::class) {\n                $adjusters[$key] = MyShippingAdjuster::class;\n            }\n        }\n\n        $event->types = $adjusters;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Breadcrumbs to a Control Panel Page in Twig\nDESCRIPTION: This snippet shows how to add breadcrumbs to a Craft CMS control panel page by defining a 'crumbs' variable with an array of breadcrumb objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set crumbs = [\n  {\n    label: 'Plugin Name'|t('plugin-handle'),\n    url: url('plugin-handle'),\n  },\n  {\n    label: 'Products'|t('plugin-handle'),\n    url: url('plugin-handle/products'),\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Switching Subscription Plans in Craft CMS Commerce\nDESCRIPTION: This Twig template creates forms for switching between available subscription plans. It assumes the subscription variable is set to an instance of craft\\commerce\\elements\\Subscription and posts to the commerce/subscriptions/switch action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/subscription-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for plan in subscription.alternativePlans %}\n  <strong>Switch to {{ plan.name }}</strong>\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/switch') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    {{ plan.getGateway().getSwitchPlansFormHtml(subscription.plan, plan)|raw }}\n\n    <button>Switch</button>\n  </form>\n  <hr />\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Updating Order Status via PHP in Craft Commerce\nDESCRIPTION: Demonstrates how to programmatically update an order's status and add a status message using PHP. The code retrieves an order by ID, sets a new status ID and message, then saves the changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/custom-order-statuses.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$order = \\craft\\commerce\\Plugin::getInstance()\n    ->getOrders()\n    ->getOrderById(ID);\n$order->orderStatusId = $orderStatus->id; // new status ID\n$order->message = $message; // new message\n$result = Craft::$app->getElements()->saveElement($order);\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Element Type in Craft CMS\nDESCRIPTION: Demonstrates how to register a custom element type using Craft's event system in a plugin or module's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\elements\\Product;\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Elements;\nuse yii\\base\\Event;\n\nEvent::on(\n    Elements::class,\n    Elements::EVENT_REGISTER_ELEMENT_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = Product::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating an Automatic SKU Format with Sequential Numbers\nDESCRIPTION: Shows how to generate a unique sequential SKU format for variants by combining the product slug with Craft's seq() function, resulting in SKUs like 'product-slug-001'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.product.slug }}-{{ seq(object.product.slug) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Table Field Data with PHP in Craft CMS\nDESCRIPTION: This PHP code snippet shows how to access and iterate through data from a Table field in Craft CMS using PHP. It checks the row count and then loops through each row to access column values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/table-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myFieldHandle)) {\n    // Whiskeys:\n    foreach ($entry->myFieldHandle as $row) {\n        // $row['whiskey']\n        // $row['description']\n        // $row['proof']\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Route Resolution for Craft CMS Elements\nDESCRIPTION: This method determines how to handle requests to an element's URL. It returns a route configuration that specifies the template to render and variables to pass to it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_43\n\nLANGUAGE: php\nCODE:\n```\nprotected function route(): array|string|null\n{\n    return [\n        'templates/render', [\n            // Again, assuming a `ProductType` model makes this configurable:\n            'template' => $this->getType()->template,\n            'variables' => [\n                'product' => $this,\n            ]\n        ]\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Handling After Create Transaction Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a transaction is created. Allows for custom post-creation processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\TransactionEvent;\nuse craft\\commerce\\services\\Transactions;\nuse yii\\base\\Event;\n\nEvent::on(Transactions::class, Transactions::EVENT_AFTER_CREATE_TRANSACTION, function(TransactionEvent $e) {\n    // Do something - perhaps run our custom logic depending on the transaction type\n});\n```\n\n----------------------------------------\n\nTITLE: Requiring Guest (Non-Logged In) Access with requireGuest Tag\nDESCRIPTION: Shows how to use the requireGuest tag to ensure users are not logged in when accessing a page or section. Logged-in users will be redirected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% requireGuest %}\n```\n\n----------------------------------------\n\nTITLE: Executing All Migrations in Craft CMS\nDESCRIPTION: Command to apply all new migrations across all migration tracks in a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/all\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Nested Elements in Twig (Craft CMS)\nDESCRIPTION: This snippet shows how to eager-load nested sets of elements, such as assets related to entries that are related to the main entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'news',\n  with: [\n    'entriesField.assetsField'\n  ]\n}) %}\n\n{% for entry in entries %}\n  {# Loop through any eager-loaded sub-entries #}\n  {% for relatedEntry in entry.entriesField %}\n    {# Get the eager-loaded asset, if there is one #}\n    {% set image = relatedEntry.assetsField[0] ?? null %}\n    {% if image %}\n      <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n    {% endif %}\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Cart Data via Ajax\nDESCRIPTION: Shows how to retrieve cart data using a JavaScript fetch request to the Commerce cart endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfetch('/actions/commerce/cart/get-cart', {\n  headers: {\n    'Accept': 'application/json',\n  },\n})\n  .then(r => r.json())\n  .then(console.log);\n\n// -> { cart: { ... } }\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Project Config in Craft CMS via CLI\nDESCRIPTION: Command to rebuild Project Config YAML files from the current database state using Craft's CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/rebuild\n```\n\n----------------------------------------\n\nTITLE: Retrieving Specific Tax Categories in PHP\nDESCRIPTION: Demonstrates various methods to fetch specific tax categories, including the default category, by ID, and by handle using the TaxCategories service in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Get a reference to the service for brevity below\n$taxCategories = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories();\n\n// Get the default tax category\n$category = $taxCategories->getDefaultTaxCategory();\n\n// Get tax category with an ID of `123`\n$category = $taxCategories->getTaxCategoryById(123);\n\n// Get tax category with a handle of `general`\n$category = $taxCategories->getTaxCategoryByHandle('general');\n```\n\n----------------------------------------\n\nTITLE: Past and Future Date Queries - PHP\nDESCRIPTION: PHP examples for querying entries with dates in the past or future using 'now' comparison.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/date-time-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$pastEntries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('< now')\n    ->all();\n$futureEntries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('>= now')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Grouping Arrays with group Filter\nDESCRIPTION: Groups array items based on the results of an arrow function evaluation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set allEntries = craft.entries().section('blog').all() %}\n{% set allEntriesByYear = allEntries|group(e => e.postDate|date('Y')) %}\n\n{% for year, entriesInYear in allEntriesByYear %}\n  <h2>{{ year }}</h2>\n\n  <ul>\n    {% for entry in entriesInYear %}\n      <li><a href=\"{{ entry.url }}\">{{ entry.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Widget Type in Craft CMS\nDESCRIPTION: Code snippet showing how to register a custom widget type with Craft's Dashboard service by listening to the Dashboard::EVENT_REGISTER_WIDGET_TYPES event and adding the widget class to the event's types array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/widget-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Dashboard;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Dashboard::class,\n            Dashboard::EVENT_REGISTER_WIDGET_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyWidget::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Collections in Twig\nDESCRIPTION: Shows how to use the collect() function to create a new collection from an array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set collection = collect(['a', 'b', 'c']) %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Duplicate SKUs Before Restoring Purchasable\nDESCRIPTION: Query to check if any non-trashed purchasables have the same SKU as the purchasable being restored. Uses Craft's Query builder to search the commerce_purchasables table.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/purchasable-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nif (!parent::beforeDelete()) {\n    return false;\n}\n\n$found = (new Query())->select(['[[p.sku]]', '[[e.id]]'])\n    ->from('{{%commerce_purchasables}} p')\n    ->leftJoin(Table::ELEMENTS . ' e', '[[p.id]]=[[e.id]]')\n    ->where(['[[e.dateDeleted]]' => null, '[[p.sku]]' => $this->getSku()])\n    ->andWhere(['not', ['[[e.id]]' => $this->getId()]])\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Multi-Instance Fields\nDESCRIPTION: Example of using element queries to find entries with specific conditions on multi-instance fields, showing how to find blog posts missing image attribution.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set postsMissingImageAttribution = craft.entries()\n  .section('blog')\n  .image(':notempty:')\n  .photoCredit(':empty:')\n  .count() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Checkboxes Fields\nDESCRIPTION: Examples showing how to query elements with Checkboxes fields using both Twig and PHP. Demonstrates filtering by single values, multiple values, and AND/OR conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/checkboxes.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Registering Twig Extension in Plugin Init\nDESCRIPTION: Code showing how to register a custom Twig extension in a plugin's init() method. Includes optional site request check for conditional registration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/extending-twig.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    if (Craft::$app->getRequest()->getIsSiteRequest()) {\n        // Instantiate + register the extension:\n        $extension = new mynamespace\\myplugin\\twig\\Extension();\n        Craft::$app->getView()->registerTwigExtension($extension);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Checkboxes for Asset Selection in Twig\nDESCRIPTION: This snippet demonstrates how to create a list of checkboxes for selecting assets in a Craft CMS entry form. It includes fetching possible assets, getting currently related asset IDs, and creating a checkbox for each asset with an associated image preview.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleAssets = craft.assets()\n  .volume('siteAssets')\n  .kind('image')\n  .orderBy('filename ASC')\n  .withTransforms([{ width: 100, height: 100 }])\n  .all() %}\n\n{% set relatedAssetIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleAsset in possibleAssets %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleAsset.id,\n          { checked: possibleAsset.id in relatedAssetIds }\n        ) }}\n        {{ tag('img', { src: possibleAsset.url }) }}\n        {{ possibleAsset.getImg({ width: 100, height: 100 }) }}\n        {{ possibleAsset.filename }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Registering a New Adjuster in Craft Commerce (PHP)\nDESCRIPTION: This snippet demonstrates how to register a new adjuster class using the OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS event. It appends the custom adjuster class to the types array in the event model.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adjusters.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nEvent::on(OrderAdjustments::class, OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS, function(RegisterComponentTypesEvent $event) {\n  $event->types[] = MyAdjuster::class;\n});\n```\n\n----------------------------------------\n\nTITLE: Executing GraphQL Queries with gql() Function\nDESCRIPTION: The gql() function executes a GraphQL query against the full schema, allowing GraphQL data fetching directly in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{% set result = gql('{\n  entries (section: \"news\", limit: 2, orderBy: \"dateCreated DESC\") {\n    postDate @formatDateTime (format: \"Y-m-d\")\n    title\n    url\n    ... on news_article_Entry {\n      shortDescription\n      featuredImage {\n        url @transform (width: 300)\n        altText\n      }\n    }\n  }\n}') %}\n\n{% for entry in result.data %}\n  <h3><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h3>\n  <p class=\"timestamp\">{{ entry.postDate }}</p>\n\n  {% set image = entry.featuredImage[0] %}\n  <img class=\"thumb\" src=\"{{ image.url }}\" alt=\"{{ image.altText }}\">\n\n  {{ entry.shortDescription|markdown }}\n  <p><a href=\"{{ entry.url }}\">Continue reading…</a></p>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Working with Arrays in Twig\nDESCRIPTION: Shows how to define, loop through, and output arrays in Twig templates, including using the join filter to convert arrays to strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% set todoList = [\n  'Finish design',\n  'Build HTML & CSS',\n  'Manage content with Craft'\n] %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<ol class=\"todo\">\n  {% for item in todoList %}\n    <li>{{ item }}</li>\n  {% endfor %}\n</ol>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ todoList|join(', ') }}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Directive in PHP for Craft CMS\nDESCRIPTION: Example of registering a custom GraphQL directive in Craft CMS using the registerGqlDirectives event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\directives\\BarTheFoo;\nuse craft\\events\\RegisterGqlDirectivesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_DIRECTIVES,\n    function(RegisterGqlDirectivesEvent $event) {\n        $event->directives[] = BarTheFoo::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Environment-Specific Commerce Settings in PHP\nDESCRIPTION: Example of setting up environment-specific configuration for Craft Commerce in a config/commerce.php file, particularly showing how to change the inactive carts duration for different environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/config-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Global settings\n    '*' => [\n        // ...\n    ],\n\n    // Dev environment settings\n    'dev' => [\n        'purgeInactiveCartsDuration' => 'P1D',\n        // ...\n    ],\n\n    // Staging environment settings\n    'staging' => [\n        // ...\n    ],\n\n    // Production environment settings\n    'production' => [\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Combining Multiple Statuses in Twig Queries\nDESCRIPTION: Shows how to combine multiple statuses in a single query, including using explicit status lists, single statuses, and negated statuses for user queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set bannedUsers = craft.users()\n  .status([\n    'suspended',\n    'locked',\n  ])\n  .all() %}\n\n{% set inactiveUsers = craft.users()\n  .status('inactive')\n  .all() %}\n\n{% set inactiveUsersAlt = craft.users()\n  .status(['not', 'active'])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Entry Fixtures in Craft CMS\nDESCRIPTION: Example of an Entry fixture data file that creates an entry in a specific section and with a specific entry type. It demonstrates how to reference section and type IDs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'sectionId' => $this->sectionIds['home'],\n        'typeId' => $this->typeIds['home']['home'],\n        'title' => 'Home',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Date Field Values in Twig and PHP\nDESCRIPTION: Examples of how to access and format date field values in templates. The code shows how to check if a date exists and format it using the datetime filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n\n{% if entry.myFieldHandle %}\n  Selected date: {{ entry.myFieldHandle|datetime('short') }}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n\nif ($entry->myFieldHandle) {\n    $selectedDate = \\Craft::$app->getFormatter()->asDatetime(\n        $entry->myFieldHandle,\n        'short'\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Cache in Craft CMS with PHP\nDESCRIPTION: Configuration to use the database for cache storage in Craft CMS. This example sets up the DbCache class with a default duration from the general config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => craft\\cache\\DbCache::class,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: JavaScript AJAX Controller Action Request\nDESCRIPTION: Shows how to post to controller actions using Craft's JavaScript helper function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/controllers.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nvar data = {\n    // ...\n};\n\nCraft.postActionRequest(\n    'cocktailRecipes/ingredients/saveIngredient',\n    data,\n    function(response) {\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Namespace Tag Usage in Twig\nDESCRIPTION: Demonstrates how to use the namespace tag to prefix input names, HTML attributes and CSS selectors. Shows basic usage and the withClasses flag option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% namespace 'foo' %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endnamespace %}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"foo-title\" name=\"foo[title]\" type=\"text\">\n```\n\n----------------------------------------\n\nTITLE: Displaying User Subscriptions with Twig\nDESCRIPTION: Shows how to fetch and display all subscriptions for the current user using Twig. This example creates a subscription query, sets the user parameter, fetches the subscriptions, and loops through them to display their details.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscriptions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Make sure someone is logged in #}\n{% requireLogin %}\n\n{# Create a subscription query with the 'user' parameter #}\n{% set mySubscriptionQuery = craft.subscriptions()\n  .user(currentUser) %}\n\n{# Fetch the subscriptions #}\n{% set subscriptions = mySubscriptionQuery.all() %}\n\n{# Display the subscriptions #}\n{% for subscription in subscriptions %}\n  <article>\n    <h1><a href=\"{{ subscription.url }}\">{{ subscription.title }}</a></h1>\n    {{ subscription.summary }}\n    <a href=\"{{ subscription.url }}\">Learn more</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Rendering Available Shipping Methods as Radio Buttons in Twig\nDESCRIPTION: Iterates through available shipping methods for the current cart and renders them as radio button options. Each option displays the shipping method name and formatted price, with the current selection automatically checked. The price is formatted according to the cart's currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/shipping.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for handle, method in cart.availableShippingMethodOptions %}\n  {% set isCurrentSelection = handle == cart.shippingMethodHandle %}\n  {% set formattedPrice = method.priceForOrder(cart)|currency(cart.currency) %}\n  <label>\n    <input type=\"radio\"\n      name=\"shippingMethodHandle\"\n      value=\"{{ handle }}\"\n      {{ isCurrentSelection ? ' checked' : '' }}\n    />\n    <strong>{{ method.name }}</strong> {{ formattedPrice }}\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using namespaceInputName Filter in Twig\nDESCRIPTION: Shows how to namespace an input name using the 'namespaceInputName' filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'bar'|namespaceInputName('foo') }}\n```\n\nLANGUAGE: html\nCODE:\n```\nfoo[bar]\n```\n\n----------------------------------------\n\nTITLE: Using where Filter for Array Filtering in Twig\nDESCRIPTION: Shows how to use the where filter to filter an array based on a condition, keeping only elements that match the specified criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_43\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = { 'foo': 'bar', 'bar': 'baz', 'bat': 'bar' } %}\n{{ array|where(v => v == 'bar') }}\n{# Result: { 'foo': 'bar', 'bat': 'bar' } #}\n```\n\n----------------------------------------\n\nTITLE: Pluralizing Cart Items Message in Twig\nDESCRIPTION: Shows how to use Craft's internationalization engine to create a pluralized message for cart items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'You have {num,plural,=0{nothing} =1{one item} other{# items}} in your cart'|t('site', {\n  num: cart.totalQty\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Defining a Craft CMS Plugin Model Class\nDESCRIPTION: Shows how to create a model class that extends BaseModel and defines attributes. This example creates an Ingredient model with string and enum attributes for a Cocktail Recipes plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientModel extends BaseModel\n{\n    protected function defineAttributes()\n    {\n        return array(\n            'name' => AttributeType::String,\n            'type' => array(AttributeType::Enum, 'values' => \"alcohol,mixer,other\"),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Soft-Deleting Records with Active Record in PHP\nDESCRIPTION: Demonstrates how to use the softDelete() method provided by SoftDeleteTrait to soft-delete a record. This updates the dateDeleted column instead of removing the record from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$record->softDelete();\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG from Asset in Craft CMS\nDESCRIPTION: Outputs an SVG document from an Asset object, typically from an Assets field. Includes type checking to ensure the asset is an SVG.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_46\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = entry.myAssetsField.one() %}\n{% if image and image.extension == 'svg' %}\n  {{ svg(image) }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions in Craft CMS (PHP)\nDESCRIPTION: These snippets show how to check if a user has a specific permission. The first example checks the currently logged-in user, while the second example checks a specific user object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/user-permissions.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// See if they have the `stayUpLate` permission\nif (Craft::$app->user->checkPermission('stayUpLate')) {\n    // ...\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n/** @var \\craft\\elements\\User $user */\nif ($user->can('stayUpLate')) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Users Field Data in Craft CMS\nDESCRIPTION: Shows how to access and work with Users field data in Craft CMS templates and PHP code. The example demonstrates getting a user query, fetching all related users, and looping through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n\n{% set relatedUsers = entry.myFieldHandle.all() %}\n{% if relatedUsers|length %}\n  <ul>\n    {% for rel in relatedUsers %}\n      <li><a href=\"{{ url('profiles/'~rel.username) }}\">{{ rel.name }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n\n$relatedUsers = $entry->myFieldHandle->all();\nif (count($relatedUsers)) {\n    foreach ($relatedUsers as $rel) {\n        // \\craft\\helpers\\UrlHelper::url('profiles/' . $rel->username)\n        // $rel->name\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Automatic YAML File Generation in config/app.php\nDESCRIPTION: This PHP configuration disables automatic YAML file generation for Project Config. It modifies the projectConfig component to set writeYamlAutomatically to false, giving developers manual control over when Project Config YAML files are updated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'components' => [\n        // ...\n        'projectConfig' => function() {\n            $config = craft\\helpers\\App::projectConfigConfig();\n            $config['writeYamlAutomatically'] = false;\n            return Craft::createObject($config);\n        },\n    ]\n];\n```\n\n----------------------------------------\n\nTITLE: Advanced Form Field Implementation\nDESCRIPTION: Example of a complete form field implementation with label, instructions, validation, and required indicator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.dateField({\n  label: 'Start Date'|t('plugin-handle'),\n  instructions: 'The start date of the event.'|t('plugin-handle'),\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n  required: true,\n  errors: event.getErrors('startDate'),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Expressions with expression() Function\nDESCRIPTION: The expression() function creates a new yii\\db\\Expression object for use in database queries, allowing raw SQL to be used in query conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .andWhere(expression('[[authorId]] = :authorId', {authorId: currentUser.id}))\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Testing GraphQL API Endpoint with cURL\nDESCRIPTION: Bash command using cURL to test the GraphQL API endpoint by sending a simple 'ping' query. This verifies that the API is properly configured and accessible.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncurl -H \"Content-Type: application/graphql\" -d '{ping}' http://my-project.tld/api\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Module in Craft CMS\nDESCRIPTION: Configuration for registering and bootstrapping a custom Yii module in Craft CMS. Shows how to activate a module by adding its ID to the bootstrap array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'modules' => [\n        'my-module' => \\modules\\Module::class,\n    ],\n    'bootstrap' => ['my-module'],\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Test Script Execution in Travis CI\nDESCRIPTION: Script configuration for running Codeception tests, with conditional logic to generate code coverage reports only when the TASK_TESTS_COVERAGE flag is set. This optimizes test performance in environments where coverage isn't needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nscript:\n- |\n  if [[ $TASK_TESTS_COVERAGE != 1 ]]; then\n    vendor/bin/codecept run unit\n  else\n    mkdir -p build/logs\n    vendor/bin/codecept run unit --coverage-xml coverage.xml;\n  fi\n```\n\n----------------------------------------\n\nTITLE: Creating Ad-Hoc Field Layout Elements in Craft CMS\nDESCRIPTION: Demonstrates how to create and register an ad-hoc field layout element without creating a dedicated class, using TextField as a base.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace myplugin;\n\nuse craft\\events\\DefineFieldLayoutElementsEvent;\nuse craft\\fieldlayoutelements\\TextField;\nuse craft\\models\\FieldLayout;\nuse yii\\base\\Event;\nuse myplugin\\elements\\Currency;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_NATIVE_FIELDS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        /** @var FieldLayout $layout */\n        $layout = $event->sender;\n\n        if ($layout->type === Currency::class) {\n            $event->fields[] = [\n                'class' => TextField::class,\n                'type' => 'text',\n                'title' => Craft::t('my-plugin', 'Currency Symbol'),\n                'maxlength' => 3,\n                'placeholder' => 'USD',\n                'autocorrect' => false,\n                // ...\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Variant Snapshot Fields in Craft Commerce\nDESCRIPTION: This event handler customizes which fields are included when capturing a variant's snapshot data. It demonstrates how to include all custom fields in the variant snapshot, though this will increase database size.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Variant;\nuse craft\\commerce\\events\\CustomizeVariantSnapshotFieldsEvent;\n\nEvent::on(Variant::class, Variant::EVENT_BEFORE_CAPTURE_VARIANT_SNAPSHOT, function(CustomizeVariantSnapshotFieldsEvent $e) {\n    $variant = $e->variant;\n    $fields = $e->fields;\n\n    // Add every custom field to the snapshot (huge amount of data and will increase your DB size\n    if (($fieldLayout = $variant->getFieldLayout()) !== null) {\n        foreach ($fieldLayout->getFields() as $field) {\n            $fields[] = $field->handle;\n        }\n    }\n\n    $e->fields = $fields;\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing URL Field Links in Twig Templates\nDESCRIPTION: Demonstrates how to use a URL field value in a Twig template to create an HTML anchor tag. The code checks if the field has a value and uses Craft's tag function to generate a properly formatted link.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/url-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <h3>Link</h3>\n  {{ tag('a', {\n    text: 'Learn More',\n    href: entry.myFieldHandle\n  }) }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Randomizing Arrays with shuffle()\nDESCRIPTION: Shows how to use the shuffle() function to randomize the order of elements in an array. This example shuffles a collection of promotional entries before displaying them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n{% set promos = craft.entries().section('promos').all() %}\n{% set shuffledPromos = shuffle(promos) %}\n\n{% for promo in shuffledPromos %}\n  <div class=\"promo {{ promo.slug }}\">\n    <h3>{{ promo.title }}</h3>\n    <p>{{ promo.description }}</p>\n    <a class=\"cta\" href=\"{{ promo.ctaUrl }}\">{{ promo.ctaLabel }}</a>\n  </div>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Cart Update Messages in Craft Commerce (Twig)\nDESCRIPTION: This example shows how to customize success and failure messages when updating a cart in Craft Commerce. It integrates the product type into the confirmation message when adding an item to the cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ successMessageInput(\"We hope you enjoy your #{product.type.name}!\") }}\n  {{ failMessageInput(\"Your #{product.type.name} couldn't be added to the cart.\") }}\n\n  {{ hiddenInput('purchasableId', variant.id) }}\n\n  <button>Buy</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Formatting Dates with date Filter in Twig\nDESCRIPTION: The 'date' filter formats a timestamp or DateTime object with various options for custom formats, locales, and timezones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|date('n/d/Y') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date('short') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date('short', locale='en-GB') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date('Y-m-d H:i', timezone='UTC') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.customDateFieldWithTimezone|date('Y-m-d H:i', timezone=false) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Controller in PHP for Craft CMS Testing\nDESCRIPTION: TestController extends craft\\web\\Controller and can be used to perform actions on any instance of craft\\web\\Controller in testing scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\controllers\\TestController\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Tags with Text Content in Craft CMS\nDESCRIPTION: Generates an HTML tag with encoded text content using the text attribute, which safely escapes the content to prevent XSS vulnerabilities.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_51\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  text: 'Hello'\n}) }}\n{# Output: <div>Hello</div> #}\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Template with Twig in Craft CMS\nDESCRIPTION: Creates a Twig template for the plugin's settings page, using Craft's form macros to render text fields for the settings. The template receives the settings model as a variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% import \"_includes/forms\" as forms %}\n\n{{ forms.textField({\n  first: true,\n  label: \"Foo\",\n  name: 'foo',\n  value: settings.foo\n}) }}\n\n{{ forms.textField({\n  label: \"Bar\",\n  name: 'bar',\n  value: settings.bar\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Enforcing Search Results Based on Keywords in Craft CMS\nDESCRIPTION: Demonstrates how to ensure specific elements appear in search results when certain keywords are present by manipulating search scores.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Make sure a result is always present (and highest-ranked) when certain keywords are used (anywhere in the query):\n        if (StringHelper::contains($e->query->getQuery(), 'salt', false)) {\n          // Find the highest score, or use `0` if there were no natural results:\n          $highestScore = max($e->scores ?: [0]);\n          $e->scores[12345] = $highestScore + 1;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Setting Job Priority in Craft CMS Queue\nDESCRIPTION: This code demonstrates how to specify a priority when pushing a job to the queue. Lower priority values (like 10) are executed before higher values, with the default being 1024. Note that not all queue drivers support priorities.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/queue-jobs.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\queue\\jobs\\MyJob;\n\n\\craft\\helpers\\Queue::push(new MyJob(), 10);\n```\n\n----------------------------------------\n\nTITLE: Setting Variables and Accessing Properties in Twig\nDESCRIPTION: Shows how to set variables and access their properties in Twig. This snippet also demonstrates the behavior of defined and undefined variables and properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% set duration = 500 %}\n{% set config = {\n  delay: 100,\n} %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Checkboxes Field Data\nDESCRIPTION: Shows how to access and iterate over Checkboxes field data in templates, including selected values and available options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/checkboxes.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle %}\n  Label: {{ option.label }}\n  Value: {{ option }} or {{ option.value }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $option) {\n    // label: $option->label\n    // value: $option or $option->value\n}\n```\n\n----------------------------------------\n\nTITLE: Scaffolding a Craft CMS Project Using Composer\nDESCRIPTION: Command that uses DDEV's Composer integration to create a new Craft CMS project from the official starter template. This installs Craft CMS version 4 and automatically starts the setup wizard.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/installation.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nddev composer create -y --no-scripts \"craftcms/craft:^4\"\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Entries in PHP\nDESCRIPTION: This PHP snippet shows how to check if there are any related entries without fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // There are related entries!\n}\n```\n\n----------------------------------------\n\nTITLE: Restoring Soft-Deleted Records Using Query Command in PHP\nDESCRIPTION: Example of restoring soft-deleted rows using Craft's database command restore() method, which clears the dateDeleted value to make the record active again.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->db->createCommand()\n    ->restore('{{%mytablename}}', ['id' => $id])\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Editing Existing Addresses in Twig\nDESCRIPTION: Handles editing of existing addresses by resolving the address from the route parameter, ensuring user ownership, and rendering the address form for editing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{# 1. Resolve the address: #}\n{% set address = address ?? craft.addresses\n  .owner(currentUser)\n  .uid(addressUid)\n  .one() %}\n\n{# 2. Make sure we got something: #}\n{% if not address %}\n  {% exit 404 %}\n{% endif %}\n\n{% block content %}\n  <h1>Edit Address: {{ address.title }}</h1>\n\n  {# 3. Render form: #}\n  {{ include('_account/address-form', {\n    address: address,\n  }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Assets Field Data in Twig\nDESCRIPTION: A Twig snippet demonstrating how to access an Assets field's data as a query object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Using configure() Function to Modify Element Attributes\nDESCRIPTION: The configure() function can be used to modify element attributes and then save the element, although generally it's not recommended to modify content in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% do configure(entry, { title: 'New Title' }) %}\n{% do craft.app.elements.saveElement(entry) %}\n```\n\n----------------------------------------\n\nTITLE: Hierarchical Category Display\nDESCRIPTION: Example of displaying related categories in a hierarchical list using the nav tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% nav rel in relatedCategories %}\n      <li>\n        <a href=\"{{ rel.url }}\">{{ rel.title }}</a>\n        {% ifchildren %}\n          <ul>\n            {% children %}\n          </ul>\n        {% endifchildren %}\n      </li>\n    {% endnav %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Formatting File Sizes with filesize Filter\nDESCRIPTION: Formats a number of bytes into a human-readable file size string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.size }}\n{# Output: 1944685 #}\n{{ asset.size|filesize }}\n{# Output: 1.945 MB #}\n```\n\n----------------------------------------\n\nTITLE: Displaying Field Settings UI in Craft CMS\nDESCRIPTION: This snippet demonstrates how to use the BrowserShot component to display a screenshot of the field settings user interface in Craft CMS. It includes an image of the field settings page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/fields.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<BrowserShot url=\"https://my-project.tld/admin/settings/fields/new\" :link=\"false\" :max-height=\"500\">\n<img src=\"./images/fields-field-settings.png\">\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: Defining Keywords for Custom Searchable Attributes in PHP\nDESCRIPTION: Implementing the EVENT_DEFINE_KEYWORDS handler to provide search keywords for a custom searchable attribute. This example extracts the country name from an order's billing address to make it searchable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\commerce\\elements\\Order;\nuse craft\\events\\DefineAttributeKeywordsEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Order::class,\n    Element::EVENT_DEFINE_KEYWORDS,\n    function(DefineAttributeKeywordsEvent $event) {\n        if ($event->attribute !== 'billingCountry') {\n            return;\n        }\n\n        $billingAddress = $event->sender->getBillingAddress();\n        $country = Craft::$app->getAddresses()\n            ->getCountryRepository()\n            ->get($billingAddress->countryCode);\n\n        $event->keywords = $country->name;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Basic Cache Tag Implementation in Twig Templates\nDESCRIPTION: A basic example showing how to wrap template content in cache tags to improve performance for repeated requests by caching Matrix field output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% cache %}\n  {% for block in entry.myMatrixField %}\n    <p>{{ block.text }}</p>\n  {% endfor %}\n{% endcache %}\n```\n\n----------------------------------------\n\nTITLE: Specifying WHERE Conditions in Craft CMS DbCommand PHP\nDESCRIPTION: Illustrates how Craft's DbCommand allows specifying AND conditions as key-value arrays with automatic parameter cleansing, simplifying condition specification compared to Yii's CDbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// with Yii's CDbCommand:\n->where(\n    array('and', 'foo = :foo', 'bar = :bar'),\n    array(':foo' => $foo, ':bar' => $bar)\n)\n\n// with Craft's DbCommand:\n->where(array(\n    'foo' => $foo,\n    'bar' => $bar\n))\n```\n\n----------------------------------------\n\nTITLE: Setting ElementCriteriaModel Parameters in PHP\nDESCRIPTION: Demonstrates how to set filtering parameters on an ElementCriteriaModel to narrow down element results. The example filters for news entries, orders by post date descending, and limits to 5 results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$criteria->section = 'news';\n$criteria->order   = 'postDate desc';\n$criteria->limit   = 5;\n```\n\n----------------------------------------\n\nTITLE: Creating Edit Form Template in Twig\nDESCRIPTION: Twig template for a Craft CMS control panel edit form. This template extends the CP layout, creates a full-page form with text and date fields, and includes necessary action and redirect inputs for form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-edit-pages.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/cp.twig' %}\n{% import '_includes/forms.twig' as forms %}\n\n{% set title = 'Edit Event'|t('my-plugin') %}\n{% set fullPageForm = true %}\n\n{% block content %}\n  {# Have the form submit to a my-plugin/events/save controller action #}\n  {{ actionInput('my-plugin/events/save') }}\n  \n  {# Have the save action redirect to /my-plugin/events afterward #}\n  {{ redirectInput('my-plugin/events') }}\n\n  {{ forms.textField({\n    label: 'Event Name'|t('plugin-handle'),\n    instructions: 'The name of the event'|t('plugin-handle'),\n    id: 'name',\n    name: 'name',\n    value: event.name,\n    required: true,\n    errors: event.getErrors('name'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'Start Date'|t('plugin-handle'),\n    instructions: 'The start date of the event.'|t('plugin-handle'),\n    id: 'start-date',\n    name: 'startDate',\n    value: event.startDate,\n    required: true,\n    errors: event.getErrors('startDate'),\n  }) }}\n  \n  {{ forms.dateField({\n    label: 'End Date'|t('plugin-handle'),\n    instructions: 'The end date of the event.'|t('plugin-handle'),\n    id: 'end-date',\n    name: 'endDate',\n    value: event.endDate,\n    required: true,\n    errors: event.getErrors('endDate'),\n  }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: URL Encoding with encodeUrl Function\nDESCRIPTION: Demonstrates the use of the encodeUrl function to ensure URLs contain only ASCII characters, which is useful for including URLs in HTTP headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{# …unencoded output leads to garbled characters, and won't resolve if requested: #}\n{% header \"X-See-Also: #{entry.url}\" %}\n{# -> https://my-project.ddev.site/Ã¥bÃ§dÃ©  #}\n\n{# …but encoding the output preserves the original accented characters: #}\n{% header \"X-See-Also: #{encodeUrl(entry.url)}\" %}\n{# -> https://my-project.ddev.site/%C3%A5b%C3%A7d%C3%A9 #}\n```\n\n----------------------------------------\n\nTITLE: Finding State by Abbreviation in Craft Commerce\nDESCRIPTION: Retrieves a specific state by country ID and state abbreviation, returning a State object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% set state = craft.commerce.states.stateByAbbreviation(countryId, 'ACT') %}\n{# state.id #}\n{# state.name #}\n```\n\nLANGUAGE: php\nCODE:\n```\n$state = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->getStateByAbbreviation($countryId, 'ACT');\n// $state->id\n// $state->name\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft CMS Application for Module\nDESCRIPTION: This PHP code snippet shows how to update the Craft CMS application configuration to include a custom module. It adds the module to the 'modules' array and bootstraps it for every request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/module-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'modules' => [\n        'foo' => foo\\Module::class,\n    ],\n    'bootstrap' => [\n        'foo',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Complete Product Listing Example in Twig\nDESCRIPTION: A full example showing how to query the ten most recent clothing products and output them in HTML, including creating the query, setting parameters, fetching products, and iterating through results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a product query with the 'type' and 'limit' parameters #}\n{% set myProductQuery = craft.products()\n  .type('clothing')\n  .limit(10) %}\n\n{# Fetch the products #}\n{% set products = myProductQuery.all() %}\n\n{# Display the products #}\n{% for product in products %}\n  <h2><a href=\"{{ product.url }}\">{{ product.title }}</a></h2>\n  {{ product.summary }}\n  <a href=\"{{ product.url }}\">Learn more</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Registration in Templates\nDESCRIPTION: Shows different ways to register JavaScript files and code blocks in templates with positioning options\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a JS file: #}\n{% js \"/assets/js/script.js\" %}\n\n{# Register a JS code block: #}\n{% js %}\n  _gaq.push([\n    \"_trackEvent\",\n    \"Search\",\n    \"{{ searchTerm|e('js') }}\"\n  ]);\n{% endjs %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Dropdown Fields in Entry Forms\nDESCRIPTION: Template code for implementing a dropdown field in an entry form, including option selection and default value handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/dropdown.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n<select name=\"fields[myFieldHandle]\">\n  {% for option in field.options %}\n    {% set selected = entry is defined\n      ? entry.myFieldHandle.value == option.value\n      : option.default %}\n\n    <option value=\"{{ option.value }}\"\n      {% if selected %}selected{% endif %}\n    >\n      {{ option.label }}\n    </option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Submitting Base64-Encoded File Data for Assets Field in Twig\nDESCRIPTION: This code shows how to submit base64-encoded file data as an alternative to file uploads. It uses hidden inputs to specify both the encoded data and the filename for the Assets field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput(\n  'fields[myFieldHandle][data][]',\n  'data:image/jpeg;base64,my-base64-data'\n) }}\n{{ hiddenInput('fields[myFieldHandle][filename][]', 'myFile.ext') }}\n```\n\n----------------------------------------\n\nTITLE: Checking if Matrix Blocks Exist in Twig and PHP\nDESCRIPTION: Examples of checking if any Matrix blocks exist in a field without fetching them, using the exists() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are blocks!</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // There are blocks!\n}\n```\n\n----------------------------------------\n\nTITLE: Setting HTTP Cache Headers in Twig\nDESCRIPTION: The expires tag controls HTTP caching headers using a Twig-friendly date expression. It accepts expressions beginning with 'in' for durations or 'on' for specific dates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% expires in 1 week %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% expires on entry.expiryDate %}\n```\n\n----------------------------------------\n\nTITLE: Applying Asset Transforms in Twig\nDESCRIPTION: This snippet demonstrates how to apply asset transforms in Twig templates. It shows both inline transform definitions and how to use named transforms created in the Craft CMS control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"thumbnail\">\n  {{ image.getImg({\n    mode: 'fit',\n    width: 1200,\n  }) }}\n</div>\n```\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"thumbnail\">\n  {{ image.getImg('thumbnail') }}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Implementing User Registration Option at Checkout with Twig\nDESCRIPTION: This snippet demonstrates how to provide customers with an option to register for an account during checkout. It creates a checkbox that, when checked, will trigger user registration upon order completion, sending an activation link to the customer's email address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/customers.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('checbox', 'registerUserOnOrderComplete', 1, {checked: cart.registerUserOnOrderComplete}) }}\n\n  {# ... #}\n\n  <button>Save cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Searchable Attributes in Craft CMS\nDESCRIPTION: This snippet demonstrates how to add a custom searchable attribute 'billingCountry' to Commerce orders using the EVENT_REGISTER_SEARCHABLE_ATTRIBUTES event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\commerce\\elements\\Order;\nuse craft\\events\\RegisterElementSearchableAttributesEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Order::class,\n    Element::EVENT_REGISTER_SEARCHABLE_ATTRIBUTES,\n    function(RegisterElementSearchableAttributesEvent $event) {\n        $event->attributes[] = 'billingCountry';\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Logic Tags in Twig\nDESCRIPTION: This snippet shows how to use logic tags in Twig to set variables, test conditionals, and control template flow. It checks if the current hour is within 'happy hour' (4 PM to 6 PM) and outputs a response accordingly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/twig-primer.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<p>Is it happy hour?</p>\n\n{% set hour = now|date(\"G\") %}\n{% if hour >= 16 and hour < 18 %}\n  <p>Yes!</p>\n{% else %}\n  <p>Nope.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Relation Field in PHP\nDESCRIPTION: Implementation of a custom relation field by extending BaseRelationField\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_47\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\fields;\n\nuse craft\\fields\\BaseRelationField;\nuse mynamespace\\elements\\Product;\n\nclass Products extends BaseRelationField\n{\n    public static function displayName(): string\n    {\n        return \\Craft::t('plugin-handle', 'Products');\n    }\n\n    public static function elementType(): string\n    {\n        return Product::class;\n    }\n\n    public static function defaultSelectionLabel(): string\n    {\n        return \\Craft::t('plugin-handle', 'Add a product');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating a Plugin Install Migration in Craft CMS\nDESCRIPTION: Command to create a special Install migration for a plugin that will be executed when the plugin is installed or uninstalled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create install --plugin=my-plugin-handle\n```\n\n----------------------------------------\n\nTITLE: Using ucwords Filter for Word Capitalization in Twig\nDESCRIPTION: Shows how to use the ucwords filter which capitalizes the first character of each word in a string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_41\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar baz hyphenated-pair'|ucwords }}\n{# Output: Foo Bar Baz Hyphenated-Pair #}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Matrix Block Relations in Twig (Craft CMS)\nDESCRIPTION: This snippet illustrates the syntax for eager-loading relations from Matrix blocks, which requires prefixing the relational field's handle with the block type's handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set blocks = entry.matrixField.find({\n  with: ['blockType:assetsField']\n}) %}\n\n{% set entries = craft.entries({\n  section: 'news',\n  with: ['matrixField.blockType:assetsField']\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Checking Element Permissions in Craft 4\nDESCRIPTION: Example of using the new element authorization methods in Craft 4 instead of directly checking permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Good\nif (Craft::$app->getUser()->checkPermission('myplugin-manageMyElements')) {\n    // ...\n}\n\n// Better\nif ($myElement->canSave()) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Complex Matrix Block Type Handling in Twig\nDESCRIPTION: Demonstrates handling different Matrix block types (Heading, Text, Image, Quote) with conditional statements in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField %}\n\n  {% if block.type == \"heading\" %}\n\n    <h3>{{ block.heading }}</h3>\n\n  {% elseif block.type == \"text\" %}\n\n    {{ block.text|markdown }}\n\n  {% elseif block.type == \"image\" %}\n\n    {% set image = block.image.first() %}\n    {% if image %}\n      <img src=\"{{ image.getUrl('thumb') }}\" width=\"{{ image.getWidth('thumb') }}\" height=\"{{ image.getHeight('thumb') }}\" alt=\"{{ image.title }}\">\n    {% endif %}\n\n  {% elseif block.type == \"quote\" %}\n\n    <blockquote>\n      <p>{{ block.quote }}</p>\n      <cite>– {{ block.cite }}</cite>\n    </blockquote>\n\n  {% endif %}\n\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Basic relatedTo Query with a Single Element in Twig\nDESCRIPTION: This snippet shows how to use the relatedTo parameter to find entries related to a specific element. It retrieves recipes that share the same main protein ingredient as the current recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Grab the first protein in the recipe: #}\n{% set protein = entry.ingredients.foodGroup('protein').one() %}\n\n{% set similarRecipes = craft.entries()\n  .section('recipes')\n  .relatedTo(protein)\n  .all() %}\n{# -> Recipes that share `protein` with the current one. #}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Categories in Craft Commerce\nDESCRIPTION: Examples of retrieving tax categories using both Twig and PHP. Shows how to get all tax categories, categories by product type ID, and specific categories by ID or handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.commerce\n  .getTaxCategories()\n  .getAllTaxCategories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$categories = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories()\n    ->getAllTaxCategories();\n```\n\n----------------------------------------\n\nTITLE: Using Form Input Macros in Craft CMS Control Panel\nDESCRIPTION: These examples demonstrate how to use Craft's form input macros to create form elements in control panel templates, showing both a simple date input and a full date field with label and instructions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.date({\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.dateField({\n  label: 'Start Date'|t('plugin-handle'),\n  instructions: 'The start date of the event.'|t('plugin-handle'),\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n  required: true,\n  errors: event.getErrors('startDate'),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Redirecting Plugin Settings Page to Custom URL in PHP\nDESCRIPTION: Overrides the getSettingsResponse() method to redirect the plugin settings page request to a completely different URL in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse(): mixed\n{\n    $url = \\craft\\helpers\\UrlHelper::cpUrl('my-plugin-handle/settings');\n\n    return \\Craft::$app->controller->redirect($url);\n}\n```\n\n----------------------------------------\n\nTITLE: Translating Text with translate/t Filter in Twig\nDESCRIPTION: The translate filter (or its shorter alias 't') translates messages using Craft's translation system. It supports specifying a translation category or defaults to 'site' if none is provided.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|t('myCategory') }}\n\n{{ 'Hello world'|t }}\n```\n\n----------------------------------------\n\nTITLE: PHP Use Statements in Craft Config Files\nDESCRIPTION: Example of use statements found in Craft CMS config files, specifically referencing the general.php config file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/README.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\config\\GeneralConfig;\n```\n\n----------------------------------------\n\nTITLE: Ordering Search Results by Score in Craft CMS Templates\nDESCRIPTION: Demonstrates how to order search results by relevance (score) in Craft CMS. When using this approach, each returned element will have a searchScore attribute that indicates its match quality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/searching.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries({\n  search: query,\n  order: 'score'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Category Properties in Twig\nDESCRIPTION: Shows how to iterate over tax categories and access their properties in a Twig template. This includes basic details like ID, name, description, and related product types and tax rates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for categories as taxCategory %}\n  {# @var taxCategory craft\\commerce\\models\\TaxCategory #}\n  {{ taxCategory.id }}\n  {{ taxCategory.name }}\n  {{ taxCategory.description }}\n  {{ taxCategory.default }}\n  {{ taxCategory.productTypes }}\n  {{ taxCategory.taxRates }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Save Payment Source Option in Twig for Craft Commerce\nDESCRIPTION: This Twig snippet checks if the cart's gateway supports payment sources and displays a checkbox to allow users to save their payment source for future purchases. It's typically used in payment forms to give customers the option to store their payment information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/saving-payment-sources.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.gateway.supportsPaymentSources() %}\n<div class=\"checkbox\">\n  <label>\n    <input type=\"checkbox\" name=\"savePaymentSource\" value=\"1\" />\n    {{ \"Save card for future purchases\"|t }}\n  </label>\n</div>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Example Migration Class Structure in Craft CMS\nDESCRIPTION: This PHP code snippet shows the basic structure of a migration class in Craft CMS. It includes the namespace, class name format, and a safeUp() method for migration logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/migrations.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass m121019_144608_pluginHandle_migrationDesc extends BaseMigration\n{\n    public function safeUp()\n    {\n        return true;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a GraphQL Route in Craft CMS\nDESCRIPTION: PHP code snippet for creating a URL rule in Craft CMS to establish a public endpoint for the GraphQL API. This route points '/api' requests to the 'graphql/api' controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'api' => 'graphql/api',\n    // ...\n];\n```\n\n----------------------------------------\n\nTITLE: Formatting Number Field Values in Twig and PHP\nDESCRIPTION: Demonstrates how to format Number field values with proper thousands separators using Twig's number filter and PHP's formatter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/number-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle);\n```\n\n----------------------------------------\n\nTITLE: Fetching a Cart in Twig\nDESCRIPTION: Demonstrates how to retrieve the current user's cart in a Twig template using either the short or full syntax methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n{# Same thing: #}\n{% set cart = craft.commerce.getCarts().getCart() %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Localization Support for Elements in Craft CMS\nDESCRIPTION: This code shows how to make elements support localization by implementing the isLocalized() method to store title and custom field values on a per-site basis.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\npublic static function isLocalized(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Categories Fields in Twig and PHP\nDESCRIPTION: Examples showing how to fetch entries with related categories using the Categories field handle as a query parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related category #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related category\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Saving Field Layouts to Project Config in PHP\nDESCRIPTION: Demonstrates how to save a field layout for custom elements to the project config instead of directly to the database, allowing for version control and deployment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_53\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\ArrayHelper;\nuse craft\\helpers\\StringHelper;\nuse craft\\web\\Controller;\nuse mynamespace\\elements\\Product;\n\n$fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n$fieldLayout->type = Product::class;\n\n$key = 'myplugin.productFieldLayout';\n\nCraft::$app->getProjectConfig()->set($key, $layout->getConfig());\n\nreturn $this->asSuccess(Craft::t('plugin-handle', 'Field layout saved.'), $layout);\n```\n\n----------------------------------------\n\nTITLE: Creating Autosuggest Inputs for Environmental Settings in Twig Templates\nDESCRIPTION: This Twig code creates an autosuggest input field that suggests environment variables to users when they're entering values in the control panel. The input includes user guidance about using environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/environmental-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% import \"_includes/forms\" as forms %}\n\n{{ forms.autosuggestField({\n  label: \"Secret Key\"|t('plugin-handle'),\n  id: 'secret-key',\n  name: 'secretKey',\n  value: myModel.secretKey,\n  suggestEnvVars: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Create Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a subscription is created. Can prevent subscription creation by setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\CreateSubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_BEFORE_CREATE_SUBSCRIPTION, function(CreateSubscriptionEvent $e) {\n    // Set the trial days based on some business logic\n});\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Searchable Attributes for Commerce Orders in PHP\nDESCRIPTION: Adding a custom searchable attribute to Commerce Order elements by handling the EVENT_REGISTER_SEARCHABLE_ATTRIBUTES event. This allows making additional Order properties available for searching in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\commerce\\elements\\Order;\nuse craft\\events\\RegisterElementSearchableAttributesEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Order::class,\n    Element::EVENT_REGISTER_SEARCHABLE_ATTRIBUTES,\n    function(RegisterElementSearchableAttributesEvent $event) {\n        $event->attributes[] = 'billingCountry';\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Finding Elements Related Through Matrix Fields in Craft CMS (Twig)\nDESCRIPTION: Shows how to find recipes related to an ingredient through a Matrix field by specifying the Matrix field handle in the field parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedRecipes = craft.entries()\n    .section('recipes')\n    .relatedTo({\n        targetElement: ingredient,\n        field: 'steps'\n    })\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Radio Buttons Fields\nDESCRIPTION: Examples of querying entries based on Radio Buttons field values using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/radio-buttons-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Subscription Reactivation Template in Twig\nDESCRIPTION: Template for reactivating a canceled subscription. Includes availability check and posts to commerce/subscriptions/reactivate action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscription-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if subscription.canReactivate() %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/reactivate') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n\n    <button class=\"button link\">Reactivate</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Hierarchical URIs in Structure Sections\nDESCRIPTION: Twig template for generating nested URIs in structure sections, where child entries inherit their parent's URI as a prefix.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{parent.uri}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Implementing Eager-Loading Map for Custom Elements in PHP\nDESCRIPTION: This code demonstrates how to create an eagerLoadingMap() method to enable efficient loading of related elements. It sets up a query to map source element IDs to target element IDs (such as products to vendors) to reduce database queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_31\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\nuse craft\\elements\\User;\nuse craft\\helpers\\ArrayHelper;\n\n// ...\n\npublic static function eagerLoadingMap(array $sourceElements, string $handle): array|null|false\n{\n    // Memoize the source element IDs:\n    $sourceElementIds = ArrayHelper::getColumn($sourceElements, 'id');\n\n    // The \"handle\" is the key that users will specify\n    // when eager-loading this relationship:\n    if ($handle === 'vendor') {\n        // Do a fresh selection from the products table\n        // to create a map of element IDs to vendor IDs,\n        // excluding products with no vendor ID:\n        $map = (new Query())\n            ->select(['id as source', 'vendorId as target'])\n            ->from(['{{%plugin_products}}'])\n            ->where([\n                'and',\n                ['id' => $sourceElementIds],\n                ['not', ['vendorId' => null]],\n            ])\n            ->all();\n\n        return [\n            'elementType' => User::class,\n            'map' => $map,\n        ];\n    }\n\n    return parent::eagerLoadingMap($sourceElements, $handle);\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Array Contents with contains Filter in Twig\nDESCRIPTION: The 'contains' filter checks if an array contains any nested arrays/objects with a particular key/attribute set to a given value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set works = craft.entries()\n  .section('artwork')\n  .all() %}\n\n{% if works|contains('rating', 'm') %}\n  <p class=\"mature\">Some of this artwork is meant for mature viewers.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Queues in PHP\nDESCRIPTION: PHP configuration for setting up additional custom queues in Craft CMS. This example defines a new 'sluggishQueue' component.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'bootstrap' => [\n        'sluggishQueue',\n    ],\n    'components' => [\n        'sluggishQueue' => [\n            'class' => craft\\queue\\Queue::class,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Searchable Attributes\nDESCRIPTION: Event handlers for registering new searchable attributes and defining their keywords. Example shows adding an 'author' attribute to Entry elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\DefineAttributeKeywordsEvent;\nuse craft\\events\\RegisterElementSearchableAttributesEvent;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_REGISTER_SEARCHABLE_ATTRIBUTES,\n    function(RegisterElementSearchableAttributesEvent $e) {\n      // Add a new `author` search attribute:\n      $e->attributes[] = 'author';\n    }\n);\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_DEFINE_KEYWORDS,\n    function (DefineAttributeKeywordsEvent $e) {\n        if ($e->attribute === 'author') {\n            // Let Craft know that we've been able to set custom keywords:\n            $e->handled = true;\n\n            // You can set almost anything as keywords, and let Craft figure out how to normalize it...\n            $e->keywords = $e->sender->getAuthor();\n\n            // ...or do something more explicit:\n            if ($author = $e->sender->getAuthor()) {\n                $e->keywords = $author->getFullName();\n            }\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Named Parameters in PHP Controller Actions for Craft CMS\nDESCRIPTION: Shows how to define a controller action method that can receive named parameters from URL rules in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/routing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function actionFoo(int $year = null)\n{\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Actions for Element Indexes in PHP\nDESCRIPTION: Shows how to define which actions an element type supports on its index page by implementing the defineActions() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineActions(string $source = null): array\n{\n    return [\n        FooAction::class,\n        BarAction::class,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Multiple Widget Types for GraphQL in PHP\nDESCRIPTION: Example of a generator class for multiple widget types in a Craft CMS plugin. This class handles different widget contexts and generates appropriate GraphQL types for each context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\Plugin;\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\helpers\\Gql as MyGqlHelper;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Fetch all our pretend widget types to be used as contexts\n        $widgetTypes = Plugin::getInstance()->getAllWidgetTypes();\n        $gqlTypes = [];\n\n        foreach ($widgetTypes as $widgetType) {\n            // Get relevant scopes that may limit schema access\n            $requiredContexts = WidgetElement::gqlScopesByContext($widgetType);\n\n            // Ignore this widget variation if the schema doesn't include it\n            if (!MyGqlHelper::isSchemaAwareOf($requiredContexts)) {\n                continue;\n            }\n\n            // Generate a GQL type for this widget type\n            $type = static::generateType($widgetType);\n            $gqlTypes[$type->name] = $type;\n        }\n\n        return $gqlTypes;\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        // Get the intended GQL type name as determined by the element type\n        $typeName = WidgetElement::gqlTypeNameByContext($context);\n\n        // Get element's user-defined content fields and\n        $contentFieldGqlTypes = self::getContentFields($context);\n\n        // Merge in GQL types for the widget element's own custom fields\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            array_merge(\n                WidgetInterface::getFieldDefinitions(),\n                $contentFieldGqlTypes\n            ),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Cross-Layout Field Querying in Twig\nDESCRIPTION: Demonstration of querying across multiple layouts that share similarly configured fields, using manufacturer as an example field across product types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.entries()\n  .section('products')\n  .manufacturer('ACME%')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Entry Drafts in Twig\nDESCRIPTION: Examples of querying drafts using various methods including getting all drafts, drafts of a specific entry, drafts by ID, and drafts by creator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/drafts-revisions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set newsDrafts = craft.entries()\n  .section('news')\n  .drafts()\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set proposedChanges = craft.entries()\n  .draftsOf(entry)\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set specificDraft = craft.entries()\n  .draftId(1234)\n  .one() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set myNewsDrafts = craft.entries()\n  .section('news')\n  .draftCreator(currentUser)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Adding PHP DocBlock Type Hints\nDESCRIPTION: Demonstrates how to add PHP DocBlock type hints to properly identify the behavior owner's class type for IDE support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/behaviors.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @property craft\\elements\\Entry $owner\n */\nclass Post extends Behavior\n{\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using Lazy Eager Loading in Twig\nDESCRIPTION: This snippet shows how to use lazy eager loading in Twig templates. It demonstrates how to defer eager loading until related elements are actually needed, which can be useful when you're not sure what data you'll need ahead of time.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for post in posts %}\n  {% set image = post.featureImage.eagerly().one() %}\n\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying Blog Entries with GraphQL in Craft CMS\nDESCRIPTION: This GraphQL query fetches blog entries with their titles, post dates, URLs, summaries, and feature images. It includes image transformations and focal points for the feature images.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_4\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(section: \"blog\") {\n    title\n    postDate @formatDateTime(format: \"d M Y\")\n    url\n    ... on post_Entry {\n      summary\n      featureImage {\n        title\n        url\n        sized: url @transform(width: 300, height: 300)\n        focalPoint\n      }\n    }\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"entries\": [\n      {\n        \"title\": \"Over the Mountain\",\n        \"postDate\": \"15 Oct 2024\",\n        \"url\": \"https://tutorial.ddev.site/blog/over-the-mountain\",\n        \"summary\": \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\n        \"featureImage\": [\n          {\n            \"title\": \"Warm Springs\",\n            \"url\": \"https://tutorial.ddev.site/uploads/images/warm-springs.JPG\",\n            \"sized\": \"https://tutorial.ddev.site/uploads/_300x300_crop_center-center_none/7/warm-springs.jpg\",\n            \"focalPoint\": [\n              0.5,\n              0.5\n            ]\n          }\n        ]\n      },\n      {\n        \"title\": \"My Trip to Bend\",\n        \"postDate\": \"15 Oct 2024\",\n        \"url\": \"https://tutorial.ddev.site/blog/my-trip-to-bend\",\n        \"summary\": \"Sed posuere consectetur est at lobortis.\",\n        \"featureImage\": [\n          {\n            \"title\": \"Highway 26\",\n            \"url\": \"https://tutorial.ddev.site/uploads/images/highway-26.JPG\",\n            \"sized\": \"https://tutorial.ddev.site/uploads/_300x300_crop_center-center_none/5/highway-26.jpg\",\n            \"focalPoint\": [\n              0.5,\n              0.5\n            ]\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Logging Messages in Craft CMS Migrations\nDESCRIPTION: Method for logging messages during migration execution that works in both console and web requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\necho \"    > some note\\n\";\n```\n\n----------------------------------------\n\nTITLE: Manually Triggering YAML File Generation in Craft CMS\nDESCRIPTION: This bash command demonstrates how to manually trigger YAML file generation for Project Config in Craft CMS using the command line interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/write\n```\n\n----------------------------------------\n\nTITLE: Getting Customer Addresses in Twig and PHP\nDESCRIPTION: Code examples for retrieving all customer addresses and specific addresses by ID using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set addresses = craft.commerce.customers.customer.addresses %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$addresses = craft\\commerce\\Plugin::getInstance()\n    ->getCustomers()\n    ->getCustomer()\n    ->getAddresses();\n```\n\n----------------------------------------\n\nTITLE: Using Special Named Parameters in URL Rules\nDESCRIPTION: Example of using special token patterns in URL rules to match specific content types like field handles, slugs, and UUIDs with appropriate regular expression patterns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  // Be aware that URIs matching an existing element route will be picked up by step #2, above!\n  'blog/<entrySlug:{slug}>' => 'controller/action/path',\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Advanced URL Redirects with Parameters in PHP\nDESCRIPTION: Example of configuring URL redirects with parameters and using a custom matching function for complex redirection logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  'posts/<year:\\d{4}>/<slug:{slug}>' => 'news/<year>-<slug>',\n    [\n        'match' => function (\\Psr\\Http\\Message\\UriInterface $url): ?string {\n            // Match a path:\n            if ($url->getPath() !== 'customer_order.aspx') {\n                return null;\n            }\n\n            // Or test for the presence of a query parameter:\n            parse_str($url->getQuery(), $params);\n\n            if (!isset($params['orderId'])) {\n                return null;\n            }\n\n            return sprintf('account/orders/%s', $params['orderId']);\n        },\n        'statusCode' => 301,\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Setting Element Validation Scenario in PHP\nDESCRIPTION: Shows how to set the validation scenario for required custom fields validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$element->setScenario(\\craft\\base\\Element::SCENARIO_LIVE);\n```\n\n----------------------------------------\n\nTITLE: Instantiating a Craft CMS Model\nDESCRIPTION: Demonstrates how to create a new instance of a model and set attribute values directly. This example creates a new Ingredient model and sets its name and type properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\n$ingredient = new CocktailRecipes_IngredientModel();\n$ingredient->name = \"Tonic Water\";\n$ingredient->type = \"mixer\";\n```\n\n----------------------------------------\n\nTITLE: Handling Line Item After Save\nDESCRIPTION: This event fires after a line item is saved to the database. It allows for post-save operations such as inventory management or notifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse yii\\base\\Event;\n\nEvent::on(LineItems::class, LineItems::EVENT_AFTER_SAVE_LINE_ITEM, function(LineItemEvent $e) {\n    // Do something - perhaps reserve the stock\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Field ID by Handle in Twig for Craft CMS\nDESCRIPTION: This snippet demonstrates how to safely retrieve a field's ID using its handle in Twig templates. It uses the fields API to look up a Matrix field and then uses the obtained ID in a Matrix block query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Load the field definition via the fields API: #}\n{% set matrixField = craft.app.fields.getFieldByHandle('myMatrixFieldHandle') %}\n\n{# Use the loaded ID: #}\n{% set myMatrixBlockQuery = craft.matrixBlocks()\n  .owner(featuredPost)\n  .fieldId(matrixField.id)\n  .type('text')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating Entry Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of an Entry fixture data file in PHP for Craft CMS. It demonstrates how to set up an entry with section ID, type ID, and title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'sectionId' => $this->sectionIds['home'],\n        'typeId' => $this->typeIds['home']['home'],\n        'title' => 'Home',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Gateway Payment Form HTML Rendering\nDESCRIPTION: Simple example showing how to render a gateway's payment form HTML using the cart's selected gateway.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ cart.gateway.getPaymentFormHtml({}) }}\n```\n\n----------------------------------------\n\nTITLE: Configuring APC Cache in PHP\nDESCRIPTION: Example of configuring Craft to use APC caching by setting up the cache component with ApcCache.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\ApcCache::class,\n                'useApcu' => true,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        }\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Zip Code Condition Formula with Exact Value Matching in Twig\nDESCRIPTION: A Twig expression that checks if a zip code matches any value in a predefined array. This formula returns true if the zip code exactly matches 'NG102', 'NG103', or 'NG104'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/shipping.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\nzipCode in ['NG102', 'NG103', 'NG104']\n```\n\n----------------------------------------\n\nTITLE: Creating Success Message Input Fields in Craft CMS\nDESCRIPTION: Shortcut for creating a hidden input field with a hashed success message, typically used in forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_43\n\nLANGUAGE: twig\nCODE:\n```\n{{ successMessageInput('Custom success message') }}\n```\n\n----------------------------------------\n\nTITLE: Configuring the Plugin Class for Settings UI in Craft CMS\nDESCRIPTION: Configures the main plugin class to enable CP settings and provide the settings HTML. Sets $hasCpSettings to true and implements settingsHtml() to render the settings template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public $hasCpSettings = true;\n\n    protected function createSettingsModel()\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    protected function settingsHtml()\n    {\n        return \\Craft::$app->getView()->renderTemplate(\n            'my-plugin-handle/settings',\n            [ 'settings' => $this->getSettings() ]\n        );\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Loading Cart with Form in Craft Commerce (Twig)\nDESCRIPTION: This example shows how to create a form for loading a specific cart in Craft Commerce. It requires the user to provide an existing cart number and redirects to the cart page after loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/load-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\" name=\"number\">\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining a Simple SalaryChecker Class in PHP\nDESCRIPTION: This snippet demonstrates a basic PHP class with two methods for salary calculations: multiply and add. It serves as an example for unit testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass SalaryChecker\n{\n    public function multiply(int $a, int $b) : int\n    {\n        return $a * $b;\n    }\n\n    public function add(int $a, int $b) : int\n    {\n        return $a + $b;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Assets Fields in PHP\nDESCRIPTION: Shows how to fetch entries with related assets using PHP in Craft CMS. This snippet demonstrates the equivalent PHP code for the Twig query above.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Filtering Cart Notices by Attribute\nDESCRIPTION: Demonstrates how to display notices specific to coupon codes using the getNotices() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% set couponNotices = cart.getNotices(attribute = 'couponCode') %}\n\n  {% if couponNotices is not empty %}\n    <ul>\n      {% for notice in couponNotices %}\n        <li>{{ notice.message }}</li>\n      {% endfor %}\n    </ul>\n  {% endif %}\n\n  <label>\n    <span>Coupon Code</span>\n    <input\n      type=\"text\"\n      name=\"couponCode\"\n      value=\"{{ cart.couponCode }}\">\n  </label>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying User Login Status in Twig\nDESCRIPTION: This Twig code snippet demonstrates how to display different content based on whether a user is logged in or not. It shows the user's name and account links if logged in, or a sign-in link if not.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<header>\n  <img src=\"{{ siteUrl('assets/logo.png') }}\" alt=\"{{ siteName }}\">\n\n  {% if currentUser %}\n    Welcome, {{ currentUser.fullName ?: currentUser.username }}!\n    <a href=\"{{ siteUrl('my-account') }}\">My Account</a>\n    <a href=\"{{ logoutUrl }}\">Sign out</a>\n  {% else %}\n    <a href=\"{{ loginUrl }}\">Sign in</a>\n  {% endif %}\n</header>\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple Twig Template in Craft CMS\nDESCRIPTION: Demonstrates a basic Twig template that outputs the site name using a Craft CMS global variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/twig.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nHello from {{ siteName }}!\n```\n\n----------------------------------------\n\nTITLE: Redirecting After Form Submission in Twig\nDESCRIPTION: Example of using Twig functions to add redirect, success message, and fail message inputs to a form. These inputs are used by Craft to handle post-submission behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput('some/path') }}\n{{ successMessageInput('Your form was submitted successfully!') }}\n{{ failMessageInput('There was an error submitting your form.') }}\n```\n\n----------------------------------------\n\nTITLE: Filtering Logs with tail and grep (Bash)\nDESCRIPTION: Combining tail and grep commands to monitor logs and filter for specific messages or categories. The -C option provides context lines around the matches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ntail -f storage/logs/web-*.log | grep \"specific message or category\" -C 10\n```\n\n----------------------------------------\n\nTITLE: Translating Dynamic Content in PHP with Craft::t()\nDESCRIPTION: Demonstrates how to translate strings with variable interpolation in PHP using Craft::t(). The example shows translating 'Ingredients in a {cocktail}' where {cocktail} is dynamically replaced with a cocktail name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/internationalization.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\n$str = Craft::t('Ingredients in a {cocktail}', array(\n    'cocktail' => $cocktail->name\n));\n```\n\n----------------------------------------\n\nTITLE: Example Model Implementation in PHP\nDESCRIPTION: ExampleModel class implementing Craft's base Model with example parameters including a datetime attribute.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\models\\ExampleModel\n```\n\n----------------------------------------\n\nTITLE: Extending Catalog Pricing Rules Edit View in Twig\nDESCRIPTION: This hook enables adding content after the tabbed pricing rule configuration UI, which will always be visible regardless of the selected tab.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.catalogPricingRules.edit.content\" %}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom GqlHelper Permission Check Method\nDESCRIPTION: A PHP method that extends Craft's Gql helper to add a custom permission check for querying widgets. This method checks whether the current GraphQL schema allows access to widgets by examining the 'allowedEntities' in the schema.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic static function canQueryWidgets(): bool\n{\n    $allowedEntities = self::extractAllowedEntitiesFromSchema();\n    return isset($allowedEntities['widgets']);\n}\n```\n\n----------------------------------------\n\nTITLE: Generating HTML for Condition Builder in PHP\nDESCRIPTION: This snippet demonstrates how to generate the HTML representation of a condition builder using the getBuilderHtml() method. It includes various options that can be set for the builder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/conditions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$condition->getBuilderHtml()\n```\n\n----------------------------------------\n\nTITLE: Creating GitHub Release Action Configuration\nDESCRIPTION: YAML configuration for a GitHub workflow that automatically creates releases for plugin versions. This action responds to repository dispatch events when new plugin versions are detected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-store.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: Create Release\nrun-name: Create release for ${{ github.event.client_payload.version }}\n\non:\n  repository_dispatch:\n    types:\n      - craftcms/new-release\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: ncipollo/release-action@v1\n        with:\n          body: ${{ github.event.client_payload.notes }}\n          makeLatest: ${{ github.event.client_payload.latest }}\n          name: ${{ github.event.client_payload.version }}\n          prerelease: ${{ github.event.client_payload.prerelease }}\n          tag: ${{ github.event.client_payload.tag }}\n```\n\n----------------------------------------\n\nTITLE: Querying Variant Prices for Guest Customer in Twig\nDESCRIPTION: This snippet shows how to query a variant's price for a guest customer by passing false to the .forCustomer() param in a Twig template. It displays the original price and the promotional price.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pricing-rules.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set myVariant = craft.variants()\n  .forCustomer(false)\n  .one() %}\n\nA guest would pay <del>{{ myVariant.price|commerceCurrency }}</del> {{ myVariant.promotionalPrice|commerceCurrency }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Field Layout Designer in Twig\nDESCRIPTION: Demonstrates how to render a field layout designer form in Craft CMS templates using the fieldLayoutDesignerField macro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms' as forms %}\n\n{{ forms.fieldLayoutDesignerField({\n  fieldLayout: craft.app.fields.getLayoutByType(\n    'ns\\\\prefix\\\\elements\\\\MyElementType'\n  ),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Handling JSON Requests in PHP Controllers\nDESCRIPTION: Demonstrates how to properly check if a request accepts JSON before returning a JSON response.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nif (\\Craft::$app->getRequest()->getAcceptsJson()) {\n    return $this->asJson([...]);\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Money Objects in Twig\nDESCRIPTION: Shows how to use the money filter to format Money objects with optional locale formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ myMoneyField|money }}\n{# Output: $123.00 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myMoneyField|money('de') }}\n{# Output: 123,00 $ #}\n```\n\n----------------------------------------\n\nTITLE: Creating New Address Form for Checkout in Craft Commerce\nDESCRIPTION: Builds a form for collecting shipping address information during checkout that will also be used as the billing address. Includes fields for name and country selection with a country dropdown populated from Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Updated shipping address.'|hash) }}\n\n  {# You can send a blank string here or omit this form parameter #}\n  {{ hiddenInput('shippingAddressId', '') }}\n\n  <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\">\n  <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\">\n  <select name=\"shippingAddress[countryId]\">\n    {% for id, name in craft.commerce.countries.getAllCountriesAsList() %}\n      <option value=\"{{ id }}\">{{ name }}</option>\n    {% endfor %}\n  </select>\n  {{ hiddenInput('billingAddressSameAsShipping', '1') }}\n\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions in Twig\nDESCRIPTION: Shows how to check if a user has specific permissions using the can() method and conditionally display content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/usermodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser.can('accessCp') %}\n  <a href=\"{{ cpUrl() }}\">Ccntrol Panel</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Selecting Existing Addresses with Radio Buttons in Twig\nDESCRIPTION: Displays radio buttons for selecting shipping and billing addresses from saved customer addresses, with fallback for creating new addresses if none exist.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n{% set customerAddresses = craft.commerce.customers.customer.addresses %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Updated addresses.'|hash) }}\n\n  {% if customerAddresses | length %}\n    <div class=\"shipping-address\">\n      {% for address in customerAddresses %}\n        <label>\n          <input type=\"radio\"\n            name=\"shippingAddressId\"\n            value=\"{{ address.id }}\" {{- cart.shippingAddressId ? ' checked' : null }}\n          >\n          {# Identifying address information, up to you! #}\n          {# ... #}\n        </label>\n      {% endfor %}\n    </div>\n\n    <div class=\"billing-address\">\n      {% for address in customerAddresses %}\n        <label>\n          <input type=\"radio\"\n            name=\"billingAddressId\"\n            value=\"{{ address.id }}\" {{- cart.billingAddressId ? ' checked' : null }}\n          >\n          {# Identifying address information, up to you! #}\n          {# ... #}\n        </label>\n      {% endfor %}\n    </div>\n  {% else %}\n    <div class=\"new-billing-address\">\n      <label>\n        First Name\n        <input type=\"text\" name=\"billingAddress[firstName]\">\n      </label>\n      {# Remaining address fields #}\n      {# ... #}\n    </div>\n\n    <div class=\"new-shipping-address\">\n      <label>\n        First Name\n        <input type=\"text\" name=\"shippingAddress[firstName]\">\n      </label>\n      {# Remaining address fields #}\n      {# ... #}\n    </div>\n  {% endif %}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying User Addresses in Twig\nDESCRIPTION: Example of creating a complete address query to fetch and display addresses belonging to the current user, using the address filter for formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n\n{% set addresses = craft.addresses()\n  .owner(currentUser)\n  .all() %}\n\n{% for addr in addresses %}\n  <address>{{ addr|address }}</address>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Creating Category Queries in Craft CMS\nDESCRIPTION: Examples of creating category queries in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new category query #}\n{% set myCategoryQuery = craft.categories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new category query\n$myCategoryQuery = \\craft\\elements\\Category::find();\n```\n\n----------------------------------------\n\nTITLE: Using Request Validation Methods in Craft CMS Controller Action\nDESCRIPTION: Example of using a request validation method (requireCpRequest()) at the beginning of a controller action to enforce access restrictions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\npublic function actionFoo()\n{\n    // This action should only be available to the control panel\n    $this->requireCpRequest();\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Outputting Begin Body Scripts in Twig\nDESCRIPTION: Demonstrates the use of the beginBody() function to output scripts and styles registered for the 'begin body' position in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<body>\n  {{ beginBody() }}\n\n  <h1>{{ page.name }}</h1>\n  {{ page.body }}\n</body>\n```\n\n----------------------------------------\n\nTITLE: Creating Category Fixtures in Craft CMS\nDESCRIPTION: Example of a Category fixture data file that creates a category in a specific group. It shows how to reference group IDs and set the category title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'groupId' => $this->groupIds['categories'],\n        'title' => 'Category',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Queue Component Configuration in Craft CMS\nDESCRIPTION: Configures the job queue component to use Redis instead of the default database driver for processing background tasks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'queue' => [\n            'class' => yii\\queue\\redis\\Queue::class,\n            'redis' => 'redis', // Redis connection component or its config\n            'channel' => 'queue', // Queue channel key\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Using App Component Getters in PHP for Craft CMS\nDESCRIPTION: This snippet demonstrates the correct way to use app component getters instead of magic properties. It also shows how to create a local reference when using the same app component multiple times.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n\\Craft::$app->entries->saveEntry($entry);\n\n// Better:\n\\Craft::$app->getEntries()->saveEntry($entry);\n\n// Bad:\n\\Craft::$app->getEntries()->saveEntry($entry1);\n\\Craft::$app->getEntries()->saveEntry($entry2);\n\n// Better:\n$entriesService = \\Craft::$app->getEntries();\n$entriesService->saveEntry($entry1);\n$entriesService->saveEntry($entry2);\n```\n\n----------------------------------------\n\nTITLE: Accessing Table Field Data with Twig\nDESCRIPTION: Example of iterating through table field data to display whiskey information using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/table.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>Whiskeys</h3>\n<ul>\n  {% for row in entry.myFieldHandle %}\n    <li>{{ row.whiskey }}: {{ row.description }} ({{ row.proof }} proof, {{ row.proof / 2 }}%)</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Querying Recipes with Shared or Substitutable Proteins in Craft CMS Twig\nDESCRIPTION: This complex query finds recipes that either share regionally-appropriate proteins or can be adapted using substitutions. It uses an 'or' condition and the sourceSite parameter to search across all sites for substitutions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set proteins = recipe.ingredients.foodGroup('protein').all() %}\n\n{% set recipes = craft.entries()\n  .section('recipes')\n  .relatedTo([\n    'or',\n    {\n      targetElement: proteins,\n      field: 'ingredients',\n    },\n    {\n      targetElement: proteins,\n      sourceSite: null,\n      field: 'substitutions',\n    },\n  ])\n  .all() %}\n{# -> Recipes that share regionally-appropriate proteins, *or* that can be adapted. #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Checkboxes Fields in Twig and PHP\nDESCRIPTION: Examples showing how to fetch entries with specific checkbox options selected using both Twig and PHP syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option checked\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Sets in Twig Templates\nDESCRIPTION: Shows how to access global set values in Twig templates using the global set's handle as a variable name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<p>{{ companyInfo.companyName }} was established in {{ companyInfo.yearEstablished }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables and Aliases in Twig\nDESCRIPTION: Example showing how to resolve aliases and access environment variables directly in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{# Resolve an alias, recursively: #}\n{{ alias('@uploadsBaseUrl') }}\n\n{# Access a specific environment variable: #}\n{{ getenv('SOME_ENV_VAR') }}\n\n{# Fully resolve a value, as though it came from a control panel setting: #}\n{{ parseEnv(craft.app.config.custom.myDynamicValue) }}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Process Payment Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a payment is processed. Can prevent payment processing by setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\ProcessPaymentEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_BEFORE_PROCESS_PAYMENT, function(ProcessPaymentEvent $e) {\n    // Do something - perhaps check if the transaction is allowed for the order based on some business rules.\n});\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Date Fields - PHP\nDESCRIPTION: PHP equivalent for querying entries with date field filtering within a month range using DateTime objects and ATOM format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/date-time-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$start = (new \\DateTime())->format(\\DateTime::ATOM);\n$end = (new \\DateTime('+1 month'))->format(\\DateTime::ATOM);\n\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(['and', \">= ${start}\", \"< ${end}\"])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Single Context Widget Type Generator in PHP\nDESCRIPTION: Implementation of a basic GraphQL type generator for a single-context widget element. Demonstrates generating a single GraphQL type without context variation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Widgets have no context\n        $type = static::generateType($context);\n        return [$type->name => $type];\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        $pluginType = new WidgetElement();\n        $typeName = $pluginType->getGqlTypeName();\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            WidgetInterface::getFieldDefinitions(),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Asset Bundle in Twig Template\nDESCRIPTION: Shows how to register an asset bundle from within a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% do view.registerAssetBundle(\"mynamespace\\\\FooBundle\") %}\n```\n\n----------------------------------------\n\nTITLE: Generating a Country Dropdown in Twig\nDESCRIPTION: Shows how to create a dropdown menu of countries using data from the country repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<select name=\"myCountry\">\n  {% for code, country in countries %}\n    <option value=\"{{ code }}\">{{ country.name }}</option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Checking Custom Field Value in Discount Condition Formula\nDESCRIPTION: A Twig expression that checks if an order has a custom field with a specific value. This example applies a discount to orders where the customer has selected a 'Supporter' license type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\norder.myCustomLicenseField and order.myCustomLicenseField == 'Supporter'\n```\n\n----------------------------------------\n\nTITLE: Creating Asset Queries in Twig and PHP\nDESCRIPTION: Shows how to initialize asset queries in both Twig templates and PHP code. The code demonstrates the basic syntax for creating a new asset query using either craft.assets() in Twig or Asset::find() in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new asset query #}\n{% set myAssetQuery = craft.assets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new asset query\n$myAssetQuery = \\craft\\elements\\Asset::find();\n```\n\n----------------------------------------\n\nTITLE: Creating In-Memory Field Layout\nDESCRIPTION: Example of creating a field layout programmatically without using the field layout designer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function getFieldLayout(): ?\\craft\\models\\FieldLayout\n{\n    $layoutElements = [\n        new TitleField([\n            'label' => 'My Title',\n            'mandatory' => true,\n            'instructions' => 'Enter a title.',\n        ]),\n        new TextField([\n            'label' => 'My Description',\n            'attribute' => 'description',\n            'mandatory' => true,\n            'instructions' => 'Enter a description.',\n        ])\n    ];\n\n    $fieldLayout = new FieldLayout();\n\n    $tab = new FieldLayoutTab();\n    $tab->name = 'Content';\n    $tab->setLayout($fieldLayout);\n    $tab->setElements($layoutElements);\n\n    $fieldLayout->setTabs([ $tab ]);\n\n    return $fieldLayout;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Script Tags with Attributes in Twig\nDESCRIPTION: Shows how to use the script tag to create a JavaScript script element with custom attributes like type='module'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% script with {type: 'module'} %}\n// some JavaScript\n{% endscript %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Nested Categories using craft.categories in Twig\nDESCRIPTION: This snippet demonstrates how to use craft.categories to fetch categories from a specific group and display them in a nested unordered list structure. It utilizes the nav tag for hierarchical rendering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.categories.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% nav category in craft.categories.group('newsCategories') %}\n    <li>\n      <a href=\"{{ category.url }}\">{{ category.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Implementing Global Variables in Twig Extension\nDESCRIPTION: Example showing how to implement the GlobalsInterface to inject global variables into the Twig environment. Demonstrates adding plugin instance as a global variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/extending-twig.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\myplugin\\twig;\n\nuse Craft;\nuse Twig\\Extension\\AbstractExtension;\nuse Twig\\Extension\\GlobalsInterface;\nuse mynamespace\\myplugin\\MyPlugin;\n\nclass Extension extends AbstractExtension implements GlobalsInterface\n{\n    public function getGlobals(): array\n    {\n        // Keys are variable names!\n        return [\n            'myPlugin' => MyPlugin::getInstance(),\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Native Layout Elements in Craft CMS\nDESCRIPTION: This snippet demonstrates how to add native element properties as customizable field layout elements using Craft's event system. It shows how to add a price field to a Product element type's field layout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\models\\FieldLayout;\nuse craft\\events\\DefineFieldLayoutFieldsEvent;\nuse craft\\fieldlayoutelements\\TextField;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_NATIVE_FIELDS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        /** @var FieldLayout $fieldLayout */\n        $fieldLayout = $event->sender;\n\n        // Add a mandatory `price` field to our field layout:\n        $event->fields[] = [\n            'class' => TextField::class,\n            'attribute' => 'price',\n            'type' => 'number',\n            'mandatory' => true,\n            'min' => 0,\n            // ...see the `TextField` definition for more options!\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Subnav Items in Craft CMS Control Panel\nDESCRIPTION: Shows how to configure subnav items for a control panel section, including URLs, labels, and optional badge counts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'subnav' => [\n    'foo' => ['label' => 'Foo', 'url' => 'section-url/foo'],\n    'bar' => ['label' => 'Bar', 'url' => 'section-url/bar'],\n\n    // Display a subnav badge count by adding the optional `badgeCount` key:\n    'baz' => ['label' => 'Baz', 'url' => 'section-url/baz', 'badgeCount' => 5],\n],\n```\n\n----------------------------------------\n\nTITLE: Initializing Widget JavaScript in Craft CMS\nDESCRIPTION: A pattern for creating and initializing JavaScript for widget instances, using a JavaScript class definition in an asset bundle and initializing it with the widget's ID in the PHP widget class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/widget-types.md#2025-04-22_snippet_2\n\nLANGUAGE: js\nCODE:\n```\n(function() {\n    Craft.MyWidget = Garnish.Base.extend({\n        $widget: null,\n        init: function(id) {\n            this.$widget = document.getElementById('widget' + id);\n\n            // ...\n        },\n    });\n})()\n```\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getView()->registerAssetBundle(MyAsset::class);\nCraft::$app->getView()->registerJs(\"new Craft.MyWidget({$this->id});\");\n```\n\n----------------------------------------\n\nTITLE: Registering HTML with html Tag in Twig\nDESCRIPTION: The html tag registers arbitrary HTML code on the page. By default, it places the HTML before the closing </body> tag, but the position can be specified using parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% html %}\n  <p>This will be placed right before the <code>&lt;/body&gt;</code> tag.</p>\n{% endhtml %}\n```\n\n----------------------------------------\n\nTITLE: Processing Field Type Settings Before Save in PHP\nDESCRIPTION: Shows how to pre-process field settings before they are saved to the database by implementing the prepSettings method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    public function prepSettings($settings)\n    {\n        // Modify $settings here...\n\n        return $settings;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Case-Insensitive Custom Field Queries in Craft CMS 5\nDESCRIPTION: Demonstrates how to update element queries to use case-insensitive matching for custom field values in Craft CMS 5, which is necessary due to changes in content storage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('departments')\n  .deptHeadNameFirst('oli')\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('departments')\n  .deptHeadNameFirst({\n    value: 'oli',\n    caseInsensitive: true,\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Debugging with dd Tag in Twig\nDESCRIPTION: Shows the usage of the dd (dump-and-die) tag to output a variable to the browser and end the request, useful for debugging.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n{% dd entry %}\n```\n\n----------------------------------------\n\nTITLE: Basic Currency Formatting with commerceCurrency Filter\nDESCRIPTION: Examples demonstrating various uses of the commerceCurrency filter with different parameters including currency conversion, formatting control, and zero stripping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/twig.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# `USD` #}\n{% set baseCurrency = cart.currency %}\n\n{# `AUD`, exchange rate 1.3 #}\n{% set paymentCurrency = cart.paymentCurrency %}\n\n{{ order.outstandingBalance|commerceCurrency(baseCurrency) }} {# Output: $10.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=false\n) }} {# Output: 13 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true,\n  stripZeros=true\n) }} {# Output: A$13 #}\n```\n\n----------------------------------------\n\nTITLE: Creating Number Field Input in Entry Form\nDESCRIPTION: Template example for creating a number field input in an entry form, including field handle, min/max values and default value handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/number-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{% set value = entry is defined\n  ? entry.myFieldHandle\n  : field.defaultValue %}\n\n<input type=\"number\"\n  name=\"fields[myFieldHandle]\"\n  min=\"{{ field.min }}\"\n  max=\"{{ field.max }}\"\n  value=\"{{ value }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single Discount by Code\nDESCRIPTION: Retrieves and displays a specific discount using its code. Uses craft.commerce.discounts.getDiscountByCode() to fetch a Discount model, then conditionally displays the discount name and description if found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/discounts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discounts.getDiscountByCode('HALFOFF') %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating an Active Record in Craft CMS PHP\nDESCRIPTION: Demonstrates how to create an Active Record (record) class in a Craft CMS plugin, defining table name and attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    public function getTableName()\n    {\n        return 'cocktailrecipes_ingredients';\n    }\n\n    protected function defineAttributes()\n    {\n        return array(\n            'name' => AttributeType::String,\n            'type' => array(\n                AttributeType::Enum,\n                'values' => \"alcohol,mixer,other\"\n            ),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Rate Properties in Twig\nDESCRIPTION: Demonstrates how to iterate over tax rates and access their properties in a Twig template. This includes basic details like ID, name, code, rate, and related tax zones and categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% for rates as taxRate %}\n  {# @var taxRate craft\\commerce\\models\\TaxRate #}\n  {{ taxRate.id }}\n  {{ taxRate.name }}\n  {{ taxRate.code }}\n  {{ taxRate.rate }}\n  {{ taxRate.taxable }}\n  {{ taxRate.getRateAsPercent() }}\n  {{ taxRate.getTaxZone() }}\n  {{ taxRate.getTaxCategory() }}\n  {{ taxRate.getIsEverywhere() }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Example Log Message Format in Craft CMS\nDESCRIPTION: Demonstrates the standard format of a log message in Craft CMS, including timestamp, target, level, category, message, and context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n2022-07-15 00:00:04 [web.INFO] [yii\\db\\Connection::open] Opening DB connection: mysql:host=ddev-starter-blog-db;dbname=db;port=3306 {\"memory\":913536}\n```\n\n----------------------------------------\n\nTITLE: Handling After Render PDF Event in Craft Commerce\nDESCRIPTION: This snippet shows how to listen for the afterRenderPdf event, which is triggered after a PDF has been rendered. It can be used for tasks like adding a watermark to the PDF or forwarding it to a department.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_48\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\PdfEvent;\nuse craft\\commerce\\services\\Pdf;\nuse yii\\base\\Event;\n\nEvent::on(Pdf::class, Pdf::EVENT_AFTER_RENDER_PDF, function(PdfEvent $e) {\n     // Add a watermark to the PDF or forward it to the accounting dpt.\n});\n```\n\n----------------------------------------\n\nTITLE: Display Order Price in Multiple Currencies\nDESCRIPTION: Loop through available payment currencies and display the cart's outstanding balance converted to each currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/twig.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for currency in currentStore.paymentCurrencies %}\n  Total in {{ currency.iso|upper }}: {{ cart.outstandingBalance|commerceCurrency(\n    currency,\n    convert=true\n  ) }}<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Converting to camelCase with camel Filter in Twig\nDESCRIPTION: The 'camel' filter returns a string formatted in 'camelCase', useful for formatting identifiers or variable names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|camel }}\n```\n\n----------------------------------------\n\nTITLE: Creating Category Queries in Craft CMS\nDESCRIPTION: Examples of creating category queries in Twig and PHP for Craft CMS, used to fetch categories programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/categories.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new category query #}\n{% set myCategoryQuery = craft.categories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new category query\n$myCategoryQuery = \\craft\\elements\\Category::find();\n```\n\n----------------------------------------\n\nTITLE: Creating Widget Edit Form in Twig for Craft CMS\nDESCRIPTION: This Twig template creates a form for editing widgets. It includes CSRF protection, action input, and conditional logic for displaying existing widget data and validation errors. The form is designed to work with both new and existing widgets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"POST\">\n  {{ csrfInput() }}\n  {{ actionInput('my-plugin/widgets/save') }}\n\n  {# Our `widget` may be new, so it won't always have an ID: #}\n  {% if widget.id %}\n    {{ hiddenInput('id', widget.id) }}\n  {% endif %}\n\n  <label>\n    {{ input('text', 'name', widget.name) }}\n\n    {# It may also have come back with validation errors attached: #}\n    {% if widget.hasErrors('name') %}\n        <span>{{ widget.getErrors('name') | join(', ') }}</span>\n    {% endif %}\n  </label>\n\n  <button type=\"submit\">Save Widget</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Element Type in Craft CMS\nDESCRIPTION: Registers a custom element type with Craft CMS by attaching to the Elements::EVENT_REGISTER_ELEMENT_TYPES event. This makes the custom element type available throughout the system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\elements\\Product;\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Elements;\nuse yii\\base\\Event;\n\nEvent::on(Elements::class,\n    Elements::EVENT_REGISTER_ELEMENT_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = Product::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Native Field Layout Elements Configuration\nDESCRIPTION: Event handler for defining native field layout elements, showing how to add and configure title and custom attribute fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\models\\FieldLayout;\nuse craft\\events\\DefineFieldLayoutFieldsEvent;\nuse craft\\fieldlayoutelements\\TextField;\nuse craft\\fieldlayoutelements\\TitleField;\nuse mynamespace\\elements\\Product;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_NATIVE_FIELDS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        /** @var FieldLayout $fieldLayout */\n        $fieldLayout = $event->sender;\n\n        if ($fieldLayout->type !== Product::class) {\n            return;\n        }\n\n        $event->fields[] = TitleField::class;\n\n        $event->fields[] = [\n            'class' => TextField::class,\n            'attribute' => 'price',\n            'type' => 'number',\n            'mandatory' => true,\n            'min' => 0,\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Dynamic CSS Variables in Twig Template\nDESCRIPTION: Example of interpolating CSS variables from Craft CMS fields into inline styles\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n<head>\n  {# ... #}\n\n  <style>\n    body {\n      background-color: {{ theme.backgroundColor | e('css') }};\n      color: {{ theme.textColor | e('css') }};\n    }\n  </style>\n</head>\n```\n\n----------------------------------------\n\nTITLE: Checking for Duplicate SKUs Before Restoring a Purchasable in PHP\nDESCRIPTION: Code snippet for checking if any non-trashed purchasables have the same SKU as a purchasable that's about to be restored. This is crucial for maintaining SKU uniqueness during element restoration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/purchasable-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nif (!parent::beforeDelete()) {\n    return false;\n}\n\n$found = (new Query())->select(['[[p.sku]]', '[[e.id]]'])\n    ->from('{{%commerce_purchasables}} p')\n    ->leftJoin(Table::ELEMENTS . ' e', '[[p.id]]=[[e.id]]')\n    ->where(['[[e.dateDeleted]]' => null, '[[p.sku]]' => $this->getSku()])\n    ->andWhere(['not', ['[[e.id]]' => $this->getId()]])\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Displaying Currency Selection Form in Twig\nDESCRIPTION: This snippet shows how to create a form allowing customers to select their preferred payment currency from the available options for the current store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/currencies.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart =  craft.commerce.carts.cart %}\n{% set currencies = craft.commerce.paymentCurrencies.getAllPaymentCurrencies(currentStore.id) %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  <select name=\"paymentCurrency\">\n    {% for currency in currencies %}\n      {{ tag('option', {\n        text: \"Pay in #{currency.iso}\",\n        value: currency.iso,\n        selected: cart.paymentCurrency == currency.iso,\n      })}}\n    {% endfor %}\n  </select>\n  <button>Update Payment Currency</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Entries in PHP\nDESCRIPTION: Shows how to access related entries from an Entries field in PHP, including looping through results and checking for existence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n\n$relatedEntries = $entry->myFieldHandle->all();\nif (count($relatedEntries)) {\n    foreach ($relatedEntries as $rel) {\n        // $rel->url, $rel->title\n    }\n}\n\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // $rel->url, $rel->title\n}\n\nif ($entry->myFieldHandle->exists()) {\n    // There are related entries!\n}\n```\n\n----------------------------------------\n\nTITLE: Integer Formatting for Number Fields in Twig and PHP\nDESCRIPTION: Examples of formatting Number field values as integers without decimals in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/number.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number(decimals=0) }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle, 0);\n```\n\n----------------------------------------\n\nTITLE: Applying Named Transform to Assets in GraphQL Query\nDESCRIPTION: This GraphQL query shows how to apply a named transform ('fullscreen') to all assets in the result set. The @transform directive is applied to the assets field, affecting all properties of the returned assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_10\n\nLANGUAGE: graphql\nCODE:\n```\nquery Gallery {\n  assets(volume: \"images\") @transform(\"fullscreen\") {\n    title\n    alt\n    url\n    width\n    height\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"asset\": {\n      \"title\": \"Warm Springs\",\n      \"alt\": \"Highway 26, south of Warm Springs, Oregon\",\n      \"url\": \"https://my-project.ddev.site/uploads/images/_fullScreen/8/warm-springs.jpg\",\n      \"width\": 2560,\n      \"height\": 1707\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Order Query in Twig and PHP\nDESCRIPTION: Shows how to initialize a new order query in both Twig templates and PHP code for fetching Commerce orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/order-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new order query #}\n{% set myOrderQuery = craft.orders() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new order query\n$myOrderQuery = \\craft\\commerce\\elements\\Order::find();\n```\n\n----------------------------------------\n\nTITLE: Bootstrapping Module in Craft CMS Configuration\nDESCRIPTION: This code snippet demonstrates how to bootstrap a custom module in the Craft CMS configuration file. It adds the module to the bootstrap array and defines it in the modules array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/commands.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'bootstrap' => ['bar'],\n    'modules' => [\n        'bar' => bar\\Module::class,\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Rendering Plain Text Field Content with Markdown in Twig\nDESCRIPTION: This snippet demonstrates how to check if a Plain Text field has a value and then render its content using the Markdown filter in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/plain-text-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <h3>Article</h3>\n  {{ entry.myFieldHandle|markdown }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Switch Statements for Matrix Block Type Comparison in Craft CMS\nDESCRIPTION: Shows how to use switch statements to cleanly compare a Matrix block's type against multiple possible values, instead of using repetitive if/elseif conditionals.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% switch matrixBlock.type %}\n  {% case \"text\" %}\n    {{ matrixBlock.textField|markdown }}\n  {% case \"image\" %}\n    {{ matrixBlock.image[0].getImg() }}\n  {% default %}\n    <p>A font walks into a bar.</p>\n    <p>The bartender says, \"Hey, we don't serve your type in here!\"</p>\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Initializing Project Config Event Listeners in PHP\nDESCRIPTION: Code that sets up event listeners for project config changes in a plugin's init() method. Registers handlers for add, update, and remove events for product types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->getProjectConfig()\n        ->onAdd('myplugin.productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onUpdate('myplugin.productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onRemove('myplugin.productTypes.{uid}', [$this->productTypes, 'handleDeletedProductType']);\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Template Hook in Twig\nDESCRIPTION: Demonstrates how to add a custom hook point in a Twig template, allowing plugins to inject content or modify the template context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/template-hooks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Give plugins a chance to make changes here #}\n{% hook 'my-custom-hook-name' %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Dropdown Fields in Craft\nDESCRIPTION: Examples of querying elements based on Dropdown field values using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/dropdown.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Categories in Twig and PHP\nDESCRIPTION: Demonstrates how to add parameters to the category query to filter the results, showing how to get only leaf categories in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = clone(entry.myFieldHandle)\n  .leaves()\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$myField = clone $entry->myFieldHandle;\n$relatedAssets = $myField\n    ->leaves()\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Basic GraphQL Query for Retrieving Custom Widget Elements\nDESCRIPTION: A simple GraphQL query example that retrieves a list of custom 'widget' elements and their titles. This demonstrates the structure of a basic GraphQL query targeting a custom element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  widgets {\n    title\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Subscription Form in Twig for Craft Commerce\nDESCRIPTION: Template for creating a subscription form that allows users to select and subscribe to a plan. This includes retrieving available plans, setting up the form action, and handling payment sources if needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/subscription-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set plans = craft.commerce.getPlans().getAllPlans() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"commerce/subscriptions/subscribe\">\n\n  <div>\n    <select name=\"planUid\" id=\"planSelect\">\n      {% for plan in plans %}\n        <option value=\"{{ plan.uid|hash }}\">{{ plan.name }}</option>\n      {% endfor %}\n    </select>\n  </div>\n\n  {# Display only if the user does not have a payment soure saved #}\n  {# {{ plan.getGateway().getPaymentFormHtml({})|raw }} #}\n\n  <button type=\"submit\">{{ \"Subscribe\"|t('commerce') }}</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying Order History in Twig for Craft Commerce\nDESCRIPTION: This Twig snippet iterates through an order's history records, displaying the new status name, date, and associated message for each status change. It demonstrates accessing order history data in Craft Commerce templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/custom-order-statuses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for history in order.histories %}\n    {% set newStatus = history.newStatus %}\n\n    <li>{{ newStatus.name }} ({{ history.dateCreated | date('short') }}): {{ history.message }}</li>\n\n    {# `newStatus.color` and `newStatus.handle` are also available, if you want to distinguish (visually or functionally) between history records! #}\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Number Fields in Twig and PHP\nDESCRIPTION: Demonstrates how to query for elements with a Number field set to at least 100 using both Twig and PHP. The query uses the field's handle as a parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/number-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a Number field set to at least 100 #}\n{% set entries = craft.entries()\n  .myFieldHandle('>= 100')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a Number field set to at least 100\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('>= 100')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Implementing addUserAdministrationOptions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom options to the user administration page. Returns an array of options with labels and controller actions that appear in the gear menu on user edit pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function addUserAdministrationOptions(UserModel $user)\n{\n    if (!$user->isCurrent()) {\n        return array(\n            array(\n                'label' => Craft::t('Pull finger'),\n                'action' => 'fartbook/pullFinger'\n            ),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking for Cart Shipping Address in Twig\nDESCRIPTION: Shows how to check if a cart has a shipping address set and access its properties using conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.shippingAddress %}\n  {{ cart.shippingAddress.firstName }} ... etc\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using requirePermission Tag in Twig Templates for Permission Verification\nDESCRIPTION: This snippet demonstrates how to use the requirePermission Twig tag to ensure a user has the 'spendTheNight' permission before displaying content. If the user doesn't have this permission (either directly or through a user group), a 403 Forbidden error will be served instead of rendering the subsequent content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/requirepermission.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission \"spendTheNight\" %}\n\n<h1>Slumber Party</h1>\n```\n\n----------------------------------------\n\nTITLE: Query Examples in Twig\nDESCRIPTION: Examples of using the custom query API in Twig templates, demonstrating various query scenarios including exact matches, property-specific queries, and pattern matching.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{# Find assets with a \"zero\" amount: #}\n{% set zeroValueAssets = craft.entries().myCurrencyField(0).all() %}\n\n{# Find USD assets: #}\n{% set usdAssets = craft.entries()\n    .myCurrencyField({\n        symbol: 'USD',\n    })\n    .all() %}\n\n{# Find US-based securities: #}\n{% set domesticSecurities = craft.entries()\n    .myCurrencyField({\n        type: 'securities',\n        symbol: 'US-*',\n    })\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Method in Craft Commerce\nDESCRIPTION: Code example showing how to register a custom shipping method by subscribing to the registerAvailableShippingMethods event. This is implemented in a plugin's init() method to add the shipping method to Commerce's available methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/shipping-methods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RegisterAvailableShippingMethodsEvent;\nuse craft\\commerce\\services\\ShippingMethods;\nuse yii\\base\\Event;\n\nEvent::on(\n    ShippingMethods::class,\n    ShippingMethods::EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS,\n    function(RegisterAvailableShippingMethodsEvent $event) {\n        $event->shippingMethods[] = new MyShippingMethod();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Assets in Twig\nDESCRIPTION: Template code that retrieves all related assets from an Assets field and displays them as a list with links to the assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedAssets = entry.myFieldHandle.all() %}\n{% if relatedAssets|length %}\n  <ul>\n    {% for rel in relatedAssets %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.filename }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Rendering a Field Layout Designer in Twig\nDESCRIPTION: Twig code to output a field layout designer using Craft's form macros, allowing administrators to manage the field layout for a custom element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.fieldLayoutDesignerField({\n  fieldLayout: craft.app.fields.getLayoutByType(\n    'mynamespace\\\\elements\\\\Product'\n  ),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Installing Rector for Craft 5 Migration\nDESCRIPTION: These commands show how to set up Composer and install the Craft Rector tool to automate plugin updates for Craft 5 compatibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncomposer config minimum-stability dev\ncomposer config prefer-stable true\ncomposer require craftcms/rector:dev-main --dev\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Date Fields in Twig and PHP\nDESCRIPTION: Examples of how to query for elements with date fields in a specified date range. The code demonstrates fetching entries with dates in the next month using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a selected date in the next month #}\n{% set start = now|atom %}\n{% set end = now|date_modify('+1 month')|atom %}\n\n{% set entries = craft.entries()\n  .myFieldHandle(['and', \">= #{start}\", \"< #{end}\"])\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a selected date in the next month\n$start = (new \\DateTime())->format(\\DateTime::ATOM);\n$end = (new \\DateTime('+1 month'))->format(\\DateTime::ATOM);\n\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(['and', \">= ${start}\", \"< ${end}\"])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Adding Template Hooks in Twig\nDESCRIPTION: The hook tag allows plugins and modules to hook into the template to return additional HTML or make changes to available template variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Give plugins a chance to make changes here #}\n{% hook 'my-custom-hook-name' %}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Console Actions\nDESCRIPTION: Example of registering custom console actions using Craft's event system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/commands.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineConsoleActionsEvent;\nuse craft\\console\\Controller;\nuse craft\\console\\controllers\\ResaveController;\nuse yii\\base\\Event;\n\nEvent::on(\n    ResaveController::class,\n    Controller::EVENT_DEFINE_ACTIONS,\n    function(DefineConsoleActionsEvent $event) {\n        $event->actions['products'] = [\n            'options' => ['type'],\n            'helpSummary' => 'Re-saves products.',\n            'action' => function($params): int {\n                /** @var ResaveController $controller */\n                $controller = Craft::$app->controller;\n                $query = Product::find();\n                if ($controller->type) {\n                    $query->type(explode(',', $controller->type));\n                }\n                return $controller->saveElements($query);\n            }\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining a Cancelable Event Class for Pre-API Operations in PHP\nDESCRIPTION: Creates a SubscribeEvent class that extends CancelableEvent, which will be triggered before a contact is subscribed to a newsletter. This event can be canceled by handlers to prevent the subscription from proceeding.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\events;\n\nuse craft\\events\\CancelableEvent;\nuse mynamespace\\newsletter\\models\\Contact;\n\nclass SubscribeEvent extends CancelableEvent\n{\n    public Contact $contact;\n}\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Authentication Method in Craft 5\nDESCRIPTION: This code snippet demonstrates how to register a custom authentication method by listening to the Auth::EVENT_REGISTER_METHODS event and adding a custom class to the types array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Auth;\nuse yii\\base\\Event;\n\nEvent::on(\n    Auth::class,\n    Auth::EVENT_REGISTER_METHODS,\n    function(RegisterComponentTypesEvent $e) {\n        $e->types[] = EmailVerification::class;\n    },\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Input Field Attributes\nDESCRIPTION: The input() function allows additional attributes to be set on the rendered tag by passing an options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('email', 'email-input', '', {\n  id: 'custom-input'\n}) }}\n{# Output: <input type=\"email\" id=\"custom-input\" name=\"email-input\" value=\"\"> #}\n```\n\n----------------------------------------\n\nTITLE: Initializing VueAdminTable in Craft CMS\nDESCRIPTION: Shows how to initialize a VueAdminTable component with Ajax data loading, custom buttons, and search functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nnew Craft.VueAdminTable({\n  buttons: [\n    {\n      label: Craft.t('my-plugins', 'New Project Status'),\n      href: Craft.getCpUrl('settings/acme/statuses/new'),\n      icon: 'plus',\n    }\n  ],\n  columns: statusColumns,\n  container: '#project-statuses-vue-admin-table',\n  emptyMessage: Craft.t('my-plugin', 'No statuses exist yet.'),\n  padded: true,\n  perPage: 10,\n  tableDataEndpoint: Craft.getActionUrl('acme/project-statuses'),\n  search: true,\n  searchPlaceholder: Craft.t('my-plugin', 'Search statuses')\n});\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Cart Operations in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed cart operations responses, including keys for success status, messages, and cart data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"message\": \"Operation successful\",\n  \"cart\": {} // Cart data\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\",\n  \"errors\": [],\n  \"success\": false,\n  \"message\": \"Operation failed\",\n  \"cart\": {} // Cart data\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Date Field Value in Twig and PHP\nDESCRIPTION: Demonstrates how to access a Date field's value from an element in both Twig and PHP. The value is a DateTime object or null if no date was selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Registering Event Handlers in Craft 3 PHP\nDESCRIPTION: Demonstrates the new syntax for registering event handlers in Craft 3 using the on() method instead of directly assigning to onEventName.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$component->on('eventName', $callback);\n```\n\n----------------------------------------\n\nTITLE: Formatting Date and Time with datetime Filter in Twig\nDESCRIPTION: The 'datetime' filter formats a timestamp or DateTime object, including the time of day, with options for custom formats, locales, and timezones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|datetime }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|datetime('short') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|datetime('short', locale='en-GB') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|datetime('short', timezone='UTC') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.customDateFieldWithTimezone|date('short', timezone=false) }}\n```\n\n----------------------------------------\n\nTITLE: Adding Dynamic Entry Data in Twig\nDESCRIPTION: Template that displays dynamic entry data including title and post date. Uses Twig's dot notation for accessing entry properties and date filters for formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layout' %}\n\n{% block content %}\n  {# Access a property of a variable using \"dot\" notation: #}\n  <h1>{{ entry.title }}</h1>\n\n  <time datetime=\"{{ entry.postDate | atom }}\">\n    {{ entry.postDate | date }}\n  </time>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Order Query in Twig and PHP\nDESCRIPTION: Shows how to create an order query in both Twig and PHP for fetching orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new order query #}\n{% set myOrderQuery = craft.orders() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new order query\n$myOrderQuery = \\craft\\commerce\\elements\\Order::find();\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Related Category in Twig and PHP\nDESCRIPTION: Shows how to fetch only the first related category using the one() method and conditionally display it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ rel.url }}\">{{ rel.title }}</a></p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // do something with $rel->url and $rel->title\n}\n```\n\n----------------------------------------\n\nTITLE: Invoking Console Command Test Method in PHP\nDESCRIPTION: Shows how to call the consoleCommand method to start testing a specific console controller action in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function testSomething()\n{\n    $this->consoleCommand('test-controller/test-action');\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Products Field for Selected Products\nDESCRIPTION: Shows how to check if a Products field has any selected products by using the length filter in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Form with Dynamic Redirect in Twig\nDESCRIPTION: This snippet shows how to create a form that uses an object template for the redirect value, allowing for dynamic redirection based on the created or updated element's properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {# Redirect the user to the public page: #}\n  {{ redirectInput('community-posts/{uid}') }}\n\n  {# ...entry options... #}\n\n  {{ input('text', 'title') }}\n\n  <button>Post + View</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Eager Loading Ad-Hoc Image Transforms in Craft CMS Twig\nDESCRIPTION: This example shows how to eager load ad-hoc image transforms for featured images in a blog section query. It specifies a custom transform with 'fit' mode and 1200px width.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/optimization.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('blog')\n  .with([\n    [\n      'featureImage',\n      {\n        withTransforms: [\n          { mode: 'fit', width: 1200 },\n        ],\n      },\n    ],\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Users with Additional Parameters in Craft CMS\nDESCRIPTION: Demonstrates how to add additional parameters to a Users field query in Craft CMS. The example shows filtering related users by a specific user group.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedUsers = clone(entry.myFieldHandle)\n    .group('authors')\n    .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedUsers = (clone $entry->myFieldHandle)\n    ->group('authors')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Unit Testing SalaryChecker Class with Codeception\nDESCRIPTION: This snippet shows how to write unit tests for the SalaryChecker class using Codeception. It includes setup and individual test methods for the multiply and add functions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Codeception\\Test\\Unit;\n\nclass MyTest extends Unit\n{\n    public $salaryChecker;\n\n    /**\n     * This `_before()` hook is run before *every* test. We use it here\n     * to create a new `SalaryChecker()` instance each test can call.\n     */\n    public function _before()\n    {\n        parent::_before();\n\n        $this->salaryChecker = new SalaryChecker();\n    }\n\n    /**\n     * Each `test*` function is executed, and within it we write a test\n     * that calls one of SalaryChecker's methods to make an assertion\n     * about the result that should be returned.\n     *\n     * In this test, `multiply()` should multiply the parameters and\n     * return the result, so we provide `2` and `2` and know the result\n     * should be `4`.\n     */\n    public function testMultiply()\n    {\n        $this->assertSame(\n            4,\n            $this->salaryChecker->multiply(2, 2)\n        );\n    }\n\n    /**\n     * SalaryChecker's `add()` method should add the parameters, so we\n     * can safely assert that `2` and `1` should return `3`.\n     */\n    public function testAdd()\n    {\n        $this->assertSame(\n            3,\n            $this->salaryChecker->add(2, 1)\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced Address Formatting Options\nDESCRIPTION: Shows various formatting options including custom HTML tags, Google Maps integration, and locale-specific output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address({ html_tag: 'div' }) }}\n\n{{ myAddress|address({\n  html_tag: 'a',\n  html_attributes: {\n    href: url('https://maps.google.com/maps/search/', {\n      query_place_id: address.myCustomPlaceIdField,\n    }),\n  },\n}) }}\n\n{{ myAddress|address({ html: false }) }}\n\n{{ myAddress|address({ html: false, locale: 'uk' }) }}\n```\n\n----------------------------------------\n\nTITLE: Saving Tags Fields in Twig Forms\nDESCRIPTION: Example of how to create a form for saving Tags field data, including a list of checkboxes for selecting related tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/tags.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleTags = craft.entries()\n  .group('blogEntryTags')\n  .orderBy('title ASC')\n  .all() %}\n\n{% set relatedTagIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleTag in possibleTags %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleTag.id,\n          { checked: possibleTag.id in relatedTagIds }\n        ) }}\n        {{ possibleTag.title }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Field Layout Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: This code snippet demonstrates how to structure data for a FieldLayoutFixture in Craft CMS. It includes configuration for regular fields and Matrix fields with block types and subfields. The fixture supports defining tabs, field properties, and field relationships within a layout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse craft\\fields\\Matrix;\nuse craft\\fields\\PlainText;\n\nreturn [\n    [\n        'type' => 'craft\\\\test\\\\Craft', // Required - can be set to whatever you want.\n        'tabs' => [ // Required - Value can be set to an empty array[]\n            [\n                'name' => 'My First Tab', // Required\n                'fields' => [ // Required - Value can be set to an empty array[]\n                    [\n                        'layout-link' => [ // Required\n                            'required' => true // Required\n                        ],\n                        'field' => [\n                            'name' => 'Test field', // Required\n                            'handle' => 'myTestField', // Required\n                            'fieldType' => PlainText::class, // Required\n                        ]\n                    ],\n                    // Matrix fields are supported in the following config:\n                    [\n                        'layout-link' => [\n                            'required' => false\n                        ],\n                        'field' => [\n                            'name' => 'Matrix Field',\n                            'handle' => 'myMatrixField',\n                            'fieldType' => Matrix::class,\n                            'blockTypes' => [\n                                'new1' => [\n                                    'name' => 'A Block',\n                                    'handle' => 'myMatrixBlock',\n                                    'fields' => [\n                                        'new1' => [\n                                            'type' => PlainText::class,\n                                            'name' => 'First Subfield',\n                                            'handle' => 'myBlockField',\n                                            'instructions' => '',\n                                            'required' => false,\n                                            'typesettings' => [\n                                                'multiline' => ''\n                                            ]\n                                        ]\n                                    ]\n                                ],\n                                'new2' => [\n                                    'name' => 'Another Block',\n                                    'handle' => 'myOtherMatrixBlock',\n                                    'fields' => [\n                                        'new1' => [\n                                            'type' => PlainText::class,\n                                            'name' => 'Another Subfield',\n                                            'handle' => 'myOtherBlockField',\n                                            'instructions' => '',\n                                            'required' => false,\n                                            'typesettings' => [\n                                                'multiline' => ''\n                                            ]\n                                        ]\n                                    ]\n                                ]\n                            ]\n                        ]\n                    ],\n                ]\n            ]\n        ]\n    ]\n];\n\n```\n\n----------------------------------------\n\nTITLE: Creating Redirect Input Fields with redirectInput()\nDESCRIPTION: Shows how to generate a hidden input for form redirects using the redirectInput() function. Includes an example with custom attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(url) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(url, {\n  id: 'redirect-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Generating Site URLs in Craft CMS\nDESCRIPTION: Creates URLs specifically for pages on your site by appending a path to your base site URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_42\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ siteUrl('company/contact') }}\">Contact Us</a>\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Tax Categories in Twig\nDESCRIPTION: Shows various methods to retrieve specific tax categories, including the default category, by ID, and by handle using the TaxCategories service in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Get a reference to the service for brevity below #}\n{% set taxCategories = craft.commerce.getTaxCategories() %}\n\n{# Get the default tax category #}\n{% set category = taxCategories.getDefaultTaxCategory() %}\n\n{# Get tax category with an ID of `123` #}\n{% set category = taxCategories.getTaxCategoryById(123) %}\n\n{# Get tax category with a handle of `general` #}\n{% set category = taxCategories.getTaxCategoryByHandle('general') %}\n```\n\n----------------------------------------\n\nTITLE: Using setTransform() with Custom Parameters in Twig\nDESCRIPTION: Applying a custom transform to an asset using setTransform() with a parameters hash, which modifies the asset's default properties to reflect the transformed values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/image-transforms.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform(thumb) %}\n<img\n  src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Querying Products and Iterating Through Variants in Twig\nDESCRIPTION: This snippet demonstrates how to query products of a specific type and iterate through their variants, displaying the SKU and sale price for each variant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-products.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.commerce.products.type('normal').find() %}\n\n{% for product in products %}\n  {% for variant in product.variants %}\n    {{ variant.sku }} - {{ variant.salePrice }} <br>\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Number Field Data in Craft CMS\nDESCRIPTION: Shows how to access Number field values from an element using both Twig and PHP syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/number-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Reusing Query Parameters in Twig\nDESCRIPTION: Example of defining query parameters once and reusing them in multiple element queries, demonstrating both object syntax and chaining syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set params = { section: 'blog' } %}\n\nTotal entries: {{ craft.entries(params).total() }}\n\nThe last 10 entries:\n\n<ul>\n  {% for entry in craft.entries(params).limit(10) %}\n    <li><a href=\"{{ entry.url }}\">{{ entry.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Accessing TaxAddressZone Properties in Twig\nDESCRIPTION: Shows how to iterate over tax zones and access various properties of the TaxAddressZone model, including ID, name, description, dates, and conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for zones as taxZone %}\n  {# @var taxZone craft\\commerce\\models\\TaxAddressZone #}\n  {{ taxZone.id }}\n  {{ taxZone.name }}\n  {{ taxZone.description }}\n  {{ taxZone.dateCreated }}\n  {{ taxZone.dateUpdated }}\n  {{ taxZone.default }}\n  {{ taxZone.getCondition() }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query Event Handler - Before Execution\nDESCRIPTION: Event handler for modifying GraphQL queries before they are executed, using Craft's EVENT_BEFORE_EXECUTE_GQL_QUERY event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_BEFORE_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Set the result from cache\n        $event->result = ...;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements Related to a Category in Craft CMS\nDESCRIPTION: Twig code examples for querying elements related to a specific category in Craft CMS, using both manual relational queries and field-specific query methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/categories.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set records = craft.entries()\n  .relatedTo({\n    targetElement: category,\n    field: 'flavors',\n  })\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set records = craft.entries()\n  .flavors(category)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Custom Adjuster Class Implementation in PHP for Craft Commerce\nDESCRIPTION: Demonstrates a custom adjuster class that applies a $2 discount to each line item in an order. It implements the AdjusterInterface and creates OrderAdjustment models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/adjusters.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\base\\Component;\nuse craft\\commerce\\base\\AdjusterInterface;\nuse craft\\commerce\\elements\\Order;\nuse craft\\commerce\\models\\OrderAdjustment;\n\nclass MyAdjuster extends Component implements AdjusterInterface\n{\n    public function adjust(Order $order): array\n    {\n        $adjustments = [];\n\n        foreach ($order->getLineItems() as $item) {\n            $adjustment = new OrderAdjustment;\n            $adjustment->type = 'discount';\n            $adjustment->name = '$2 off';\n            $adjustment->description = '$2 off everything in the store';\n            // `sourceSnapshot` can contain information to explain the adjustment\n            $adjustment->sourceSnapshot = [ 'data' => 'value' ];\n            $adjustment->amount = -2;\n            $adjustment->setOrder($order);\n            $adjustment->setLineItem($item);\n\n            $adjustments[] = $adjustment;\n        }\n\n        return $adjustments;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Truncating Strings with truncate Filter in Twig\nDESCRIPTION: The truncate filter shortens a string to a given length while preserving whole words. It supports customizing the append character, and can handle cases where the truncation results in less than a single word.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(10) }}\n{# Output: Hello… #}\n\n{{ 'Hello world'|truncate(10, '...') }}\n{# Output: Hello... #}\n\n{{ 'Hello world'|truncate(10, '') }}\n{# Output: Hello #}\n\n{{ 'Hello world'|truncate(2) }}\n{# Output: H… #}\n\n{{ 'Hello world'|truncate(2, splitSingleWord=false) }}\n{# Output: … #}\n```\n\n----------------------------------------\n\nTITLE: Registering Dynamic URL Routes in PHP\nDESCRIPTION: Demonstrates how to register dynamic URL routes for a Craft CMS plugin by implementing the registerCpRoutes method in the main plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesPlugin extends BasePlugin\n{\n    // ...\n\n    public function registerCpRoutes()\n    {\n        return array(\n            'cocktailrecipes/(?P<recipeId>\\d+)' => 'cocktailrecipes/_edit',\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Dashboard Widget Class in PHP\nDESCRIPTION: Implementation of a basic dashboard widget class for Craft CMS. The class extends BaseWidget and implements required methods getName() to provide the widget's display name and getBodyHtml() to render the widget's content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    public function getName()\n    {\n        return Craft::t('Recent Cocktails');\n    }\n\n    public function getBodyHtml()\n    {\n        $cocktails = craft()->cocktailRecipes->getRecentCocktails();\n\n        return craft()->templates->render('cocktailrecipes/_widgets/recentcocktails/body', array(\n            'cocktails' => $cocktails\n        ));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Duplicate Array Elements with unique Filter in Twig\nDESCRIPTION: Shows how to use the unique filter to remove duplicate elements from an array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_44\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = ['Larry', 'Darryl', 'Darryl'] %}\n{{ array|unique }}\n{# Result: ['Larry', 'Darryl'] #}\n```\n\n----------------------------------------\n\nTITLE: Using Environment Variables and Aliases in PHP\nDESCRIPTION: Example showing how to resolve aliases and access environment variables directly in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n// Resolve an alias, recursively:\nCraft::getAlias('@uploadsBaseUrl');\n\n// Access a specific environment variable:\ncraft\\helpers\\App::env('SOME_ENV_VAR');\n\n// Fully resolve a value, as though it came from a control panel setting:\ncraft\\helpers\\App::parseEnv(Craft::$app->config->custom->myDynamicValue);\n```\n\n----------------------------------------\n\nTITLE: Rendering Countries Dropdown Using Country Models in Twig\nDESCRIPTION: Demonstrates how to create a dropdown select box using the craft.commerce.countries variable, which returns an array of Country models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for country in craft.commerce.countries %}\n  <option value=\"{{ country.id }}\">{{ country.name }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Discount by Code in Twig\nDESCRIPTION: This snippet shows how to retrieve a specific discount using its code in a Craft Commerce template. It uses the craft.commerce.discounts.getDiscountByCode() method to fetch a Discount model, then displays its name and description if found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discounts.getDiscountByCode('HALFOFF') %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving and Displaying a Specific Order by Number in Twig\nDESCRIPTION: A complete example showing how to retrieve an order using its number from a query parameter, check if it exists, and display its information in a template. This demonstrates practical usage of order queries in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested order number from the query string #}\n{% set orderNumber = craft.app.request.getQueryParam('number') %}\n\n{# Create an order query with the 'number' parameter #}\n{% set myOrderQuery = craft.orders()\n  .number(orderNumber) %}\n\n{# Fetch the order #}\n{% set order = myOrderQuery.one() %}\n\n{# Make sure it exists #}\n{% if not order %}\n  {% exit 404 %}\n{% endif %}\n\n{# Display the order #}\n<h1>Order {{ order.getShortNumber() }}</h1>\n<!-- ... ->\n```\n\n----------------------------------------\n\nTITLE: Implementing Hashed Redirect Parameters in Craft CMS 3 Forms\nDESCRIPTION: Demonstrates how to implement the new requirement for hashed 'redirect' parameters in forms. The example shows both the manual approach using the hash filter and the shortcut using the redirectInput() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\nOld:\n<input type=\"hidden\" name=\"redirect\" value=\"foo/bar\">\n\nNew:\n<input type=\"hidden\" name=\"redirect\" value=\"{{ 'foo/bar'|hash }}\">\n```\n\n----------------------------------------\n\nTITLE: Accessing Config Values in Twig and PHP\nDESCRIPTION: Examples showing how to check the final resolved value of a setting in templates or modules, specifically checking if dev mode is enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Output entry ID for debugging: #}\n{% if craft.app.config.general.devMode %}\n  ID: <code>{{ entry.id }}</code>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Add `DevMode` header when active:\nif (Craft::$app->config->general->devMode) {\n  Craft::$app->request->headers->set('DevMode', 'On');\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Read/Write Splitting in Craft CMS\nDESCRIPTION: Sets up database read/write splitting by configuring replica databases. Uses environment variables for sensitive connection details and defines replica configurations with timeout settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'db' => function() {\n            // Get the default component config\n            $config = App::dbConfig();\n\n            // Use read/write query splitting\n            // (requires Craft 3.4.25 or later)\n\n            // Define the default config for replica DB connections\n            $config['replicaConfig'] = [\n                'username' => App::env('DB_REPLICA_USER'),\n                'password' => App::env('DB_REPLICA_PASSWORD'),\n                'tablePrefix' => App::env('DB_TABLE_PREFIX'),\n                'attributes' => [\n                    // Use a smaller connection timeout\n                    PDO::ATTR_TIMEOUT => 10,\n                ],\n                'charset' => 'utf8',\n            ];\n\n            // Define the replica DB connections\n            $config['replicas'] = [\n                ['dsn' => App::env('DB_REPLICA_DSN_1')],\n                ['dsn' => App::env('DB_REPLICA_DSN_2')],\n                ['dsn' => App::env('DB_REPLICA_DSN_3')],\n                ['dsn' => App::env('DB_REPLICA_DSN_4')],\n            ];\n\n            // Instantiate and return it\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating New Addresses in Twig\nDESCRIPTION: Implements a form for creating new addresses, which is also reused for editing existing addresses. It includes form fields for address details and handles form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{% block content %}\n  <h1>New Address</h1>\n\n  {# 1. Render the form #}\n  {{ include('_account/address-form', {\n    address: address ?? create('craft\\\\elements\\\\Address'),\n  }) }}\n{% endblock %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n\n  {# 2. Set the controller action: #}\n  {{ actionInput('users/save-address') }}\n\n  {# 3. Special cases for existing addresses: #}\n  {% if address.id %}\n    {{ hiddenInput('addressId', address.id) }}\n  {% endif %}\n\n  {# 4. Redirection: #}\n  {{ redirectInput('account/addresses/{uid}') }}\n\n  {# 5. Address Fields: #}\n\n  <label for=\"title\">Title</label>\n  <input\n    type=\"text\"\n    name=\"title\"\n    id=\"title\"\n    value=\"{{ address.title }}\">\n\n  <label for=\"addressLine1\">Address Line 1</label>\n  <input\n    type=\"text\"\n    name=\"addressLine1\"\n    id=\"addressLine1\"\n    value=\"{{ address.addressLine1 }}\">\n\n  <label for=\"addressLine2\">Address Line 2</label>\n  <input\n    type=\"text\"\n    name=\"addressLine2\"\n    id=\"addressLine2\"\n    value=\"{{ address.addressLine2 }}\">\n\n  <label for=\"countryCode\">Country</label>\n  <select name=\"countryCode\" id=\"countryCode\">\n    {% for country in craft.app.getAddresses().getCountryRepository().getAll() %}\n      {{ tag('option', {\n        value: country.countryCode,\n        selected: country.countryCode == address.countryCode,\n        text: country.name,\n      }) }}\n    {% endfor %}\n  </select>\n\n  {# ... #}\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Ray in Craft CMS Module\nDESCRIPTION: PHP code snippet showing how to integrate Ray debugging into a Craft CMS module. It includes setting up aliases, defining controller namespaces, and using Ray to log messages and show events.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/ray.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace modules;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        Craft::setAlias('@modules', __DIR__);\n\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'modules\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'modules\\\\controllers';\n        }\n\n        ray('Hello Ray!');\n\n        ray()->showEvents();\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Tag List with Twig\nDESCRIPTION: Complete example showing how to query and display a list of tags from a specific tag group using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a tag query with the 'group' parameter #}\n{% set myTagQuery = craft.tags()\n  .group('blogTags') %}\n\n{# Fetch the tags #}\n{% set tags = myTagQuery.all() %}\n\n{# Display the tag list #}\n<ul>\n  {% for tag in tags %}\n    <li><a href=\"{{ url('blog/tags/'~tag.id) }}\">{{ tag.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Updating Controller Action Methods in PHP for Craft 4\nDESCRIPTION: Demonstrates how to update a controller action method from Craft 3 to Craft 4, using new response methods like asModelFailure() and asModelSuccess() for improved handling of JSON responses, status codes, and redirects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\npublic function actionSave() {\n    // ...\n\n    if (!Craft::$app->getElements()->saveElement($myElement)) {\n        if ($this->request->getAcceptsJson()) {\n            return $this->asJson([\n                'success' => false,\n                'errors' => $myElement->getErrors(),\n            ]);\n        }\n\n        $this->setFailFlash(Craft::t('myPlugin', 'Couldn't save element.'));\n\n        Craft::$app->getUrlManager()->setRouteParams([\n            'myElement' => $myElement,\n        ]);\n\n        return null;\n    }\n\n    if ($this->request->getAcceptsJson()) {\n        return $this->asJson([\n            'success' => true,\n            'id' => $myElement->id,\n            'title' => $myElement->title,\n            'url' => $myElement->getUrl(),\n        ]);\n    }\n\n    $this->setSuccessFlash(Craft::t('myPlugin', 'Element saved.'));\n    return $this->redirectToPostedUrl($myElement);\n}\n\n// Craft 4\npublic function actionSave() {\n    // ...\n\n    if (!Craft::$app->getElements()->saveElement($myElement)) {\n        return $this->asModelFailure(\n            $myElement,\n            Craft::t('myPlugin', 'Couldn't save element.'),\n            'myElement'\n        );\n    }\n\n    return $this->asModelSuccess(\n        $myElement,\n        Craft::t('app', 'Element saved.'),\n        data: [\n            'id' => $myElement->id,\n            'title' => $myElement->title,\n            'url' => $myElement->getUrl(),\n        ],\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Twig Email Template for Account Activation\nDESCRIPTION: Default Twig template for account activation emails, demonstrating the use of variables and proper escaping of user data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/mail.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nHey {{user.friendlyName|e}},\n\nThanks for creating an account with {{systemName}}! To activate your account, click the following link:\n\n<{{link}}>\n\nIf you were not expecting this email, just ignore it.\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Payment Form with Gateway Default HTML in Twig\nDESCRIPTION: This snippet shows a simple payment form implementation using the payment gateway's default HTML. It includes hidden inputs for action, redirect, and cancel URL, as well as CSRF protection. The form uses the gateway's getPaymentFormHtml() method to render the payment fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/making-payments.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" class=\"form-horizontal\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/payments/pay\"/>\n  <input type=\"hidden\" name=\"redirect\" value=\"/commerce/customer/order?number={number}\"/>\n  <input type=\"hidden\" name=\"cancelUrl\" value=\"{{ '/commerce/checkout/payment'|hash }}\"/>\n\n  {{ csrfInput() }}\n\n  {{ cart.gateway.getPaymentFormHtml({})|raw }}\n\n  <button class=\"button button-primary\" type=\"submit\">Pay Now</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Multi-Environment Database Configuration in PHP\nDESCRIPTION: An example of a multi-environment database configuration for Craft CMS, using nested arrays for different environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-environment-configs.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    '*' => array(\n        'tablePrefix' => 'craft',\n    ),\n    '.test' => array(\n        'server' => 'localhost',\n        'user' => 'root',\n        'password' => 'letmein',\n        'database' => 'buildwithcraft',\n    ),\n    '.com' => array(\n        'server' => 'localhost',\n        'user' => 'av12345',\n        'password' => '$uP3r$3jp3t',\n        'database' => 'av12345-buildwithcraft',\n    ),\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements Related to Categories\nDESCRIPTION: Example of querying for entries related to a category through a categories field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .relatedTo({\n    targetElement: category,\n    field: 'topics',\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Variants by SKU using Twig in Craft CMS\nDESCRIPTION: Creates a variant query using craft.variants(), filters by SKU from query parameter, handles 404 errors, and displays variant information. Demonstrates proper error handling and data fetching patterns in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested variant SKU from the query string #}\n{% set variantSku = craft.app.request.getQueryParam('sku') %}\n\n{# Create a variant query with the 'SKU' parameter #}\n{% set myVariantQuery = craft.variants()\n    .sku(variantSku) %}\n\n{# Fetch the variant #}\n{% set variant = myVariantQuery.one() %}\n\n{# Make sure it exists #}\n{% if not variant %}\n    {% exit 404 %}\n{% endif %}\n\n{# Display information about the variant #}\n<h1>{{ variant.title }}</h1>\n<!-- ... -->\n```\n\n----------------------------------------\n\nTITLE: Overriding Plugin Settings with PHP Config File\nDESCRIPTION: Creates a PHP configuration file to override plugin settings on a per-project basis. The file returns an array with the overridden setting values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'foo' => 'overriddenFooValue',\n    'bar' => 'overriddenBarValue',\n];\n```\n\n----------------------------------------\n\nTITLE: Register Custom GraphQL Queries\nDESCRIPTION: Event handler for registering custom GraphQL queries with Craft's GraphQL system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlQueriesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\queries\\Widget;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_QUERIES,\n    function(RegisterGqlQueriesEvent $event) {\n        $event->queries = array_merge(\n            $event->queries,\n            Widget::getQueries()\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Resaving Entries with Updated Dropdown Values in Craft CMS\nDESCRIPTION: Demonstrates how to use the resave/entries console command to migrate existing data to new dropdown values. This is useful when changing the underlying value of a dropdown option used by existing entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dropdown-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/entries --section mySection --set myDropdownField --to \"={{ object.myDropdownField.value == 'oldValue' ? 'newValue' : object.myDropdownField.value }}\"\n```\n\n----------------------------------------\n\nTITLE: User Email Search in Craft CMS\nDESCRIPTION: Demonstrates searching for users by email domain across different implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set users = craft.users()\n  .search('email:@craftcms.com')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  users(search: \"email:@craftcms.com\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\User::find()\n    ->search('email:@craftcms.com')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Setting Project Config via Command Line\nDESCRIPTION: Example command for testing project config changes by setting values directly through the command line interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/set myPlugin.productTypes.689fcbe5-9433-4fb0-bc88-d89fdd9bb2df.name \"Widgets\"\n```\n\n----------------------------------------\n\nTITLE: Tax Engine Interface References\nDESCRIPTION: Core interface and class references for implementing tax engines in Craft Commerce, including the TaxEngineInterface and default Tax class implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/tax-engines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncraft\\commerce\\base\\TaxEngineInterface\n```\n\nLANGUAGE: php\nCODE:\n```\ncraft\\commerce\\engines\\Tax\n```\n\nLANGUAGE: php\nCODE:\n```\ncraft\\commerce\\adjusters\\Tax\n```\n\n----------------------------------------\n\nTITLE: Customizing Element Edit Screen Response in PHP\nDESCRIPTION: Implementation of prepareEditScreen() method to customize control panel screen responses with breadcrumbs\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_45\n\nLANGUAGE: php\nCODE:\n```\npublic function prepareEditScreen(Response $response, string $containerId): void\n{\n    $response->crumbs([\n        [\n            'label' => Craft::t('my-plugin', 'Products'),\n            'url' => UrlHelper::cpUrl('products'),\n        ],\n        [\n            'label' => $this->getType()->name,\n            'url' => UrlHelper::cpUrl(\"products/{$type->handle}\"),\n        ],\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Namespacing Inputs and Selectors with namespace Tag in Twig\nDESCRIPTION: The namespace tag namespaces input names, HTML attributes, and CSS selectors. It's useful for avoiding conflicts in forms and styles, especially when working with repeating or nested elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% namespace 'foo' %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endnamespace %}\n```\n\n----------------------------------------\n\nTITLE: Arrow Functions with Array Grouping in Twig\nDESCRIPTION: Example of using arrow functions with the group filter to organize array items by category.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set groceryList = [\n  {name: 'Eggs', category: 'Dairy'},\n  {name: 'Pancake Mix', category: 'Breakfast'},\n  {name: 'Milk', category: 'Dairy'},\n  {name: 'Onions', category: 'Produce'}\n] %}\n\n{% set itemsByCategory = groceryList|group(item => item.category) %}\n{% for category, items in itemsByCategory %}\n  <h3>{{ category }}</h3>\n  <ul>\n    {% for item in items %}\n      <li>{{ item.name }}</li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Merging Items from Previous Carts in Craft Commerce (Twig)\nDESCRIPTION: This snippet demonstrates how to create a form that allows users to merge items from previous carts into their current cart in Craft Commerce. It displays line items from old carts with checkboxes for selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n<h2>Previous Cart Items</h2>\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% for oldCart in oldCarts %}\n    {% for lineItem in oldCart.lineItems %}\n      {{ lineItem.description }}\n      <label>\n        {{ input('checkbox', 'purchasables[][id]', lineItem.purchasableId) }}\n        Add\n      </label>\n    {% endfor %}\n  {% endfor %}\n\n  <button>Merge items</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking if a Specific Option is Selected in Twig and PHP\nDESCRIPTION: Examples showing how to check if a specific checkbox option is selected using the contains() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.contains('foo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->contains('foo')) {\n```\n\n----------------------------------------\n\nTITLE: Extending ConsoleTest Class for Console Command Testing in PHP\nDESCRIPTION: Shows how to create a basic test class that extends craft\\test\\console\\ConsoleTest, which is required for testing console commands in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace crafttests\\unit\\console;\n\nuse \\craft\\test\\console\\ConsoleTest;\n\nclass MyConsoleTest extends ConsoleTest\n{\n}\n```\n\n----------------------------------------\n\nTITLE: Checking for Cart Billing Address in Twig\nDESCRIPTION: Shows how to check if a cart has a billing address set and access its properties using conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.billingAddress %}\n  {{ cart.billingAddress.firstName }} ... etc\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Requiring User Login with requireLogin Tag in Craft CMS\nDESCRIPTION: Demonstrates how to use the requireLogin tag to ensure users are logged in when accessing a page or section. Non-logged-in users will be redirected to login.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n```\n\n----------------------------------------\n\nTITLE: Creating Nested Permissions in Craft CMS\nDESCRIPTION: Demonstrates how to create nested permissions in Craft CMS by using the 'nested' key in the permission array. This creates a hierarchical UI structure for related permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'permissionName' => [\n    'label' => 'Permission Label',\n    'nested' => [\n        'nestedPermissionName' => [\n            'label' => 'Nested Permission Label',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Cache in Craft CMS\nDESCRIPTION: Example of configuring database caching in Craft CMS using DbCache component.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => craft\\cache\\DbCache::class,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Initializing Changelog File in Markdown\nDESCRIPTION: Creates the initial structure for a plugin's changelog file. This snippet demonstrates the basic format for starting a changelog document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/changelogs-and-updates.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Release Notes for <Plugin Name>\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in PHP\nDESCRIPTION: Example of how to fetch entries with a related tag using a Tags field in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Accessing Radio Buttons Field Data\nDESCRIPTION: Examples of accessing Radio Buttons field data from an element using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/radio-buttons-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Conditional User Name Formatting in Twig for Craft Emails\nDESCRIPTION: Example of conditionally including user's full name in an email greeting with a fallback when the name isn't available. This ensures emails remain personalized regardless of profile completeness.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/mail.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Output a comma before the user's name, or jump right to a punctuation mark: #}\nHello{{ user.fullName is not empty ? \", #{user.fullName}\" : null }}!\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Changes for Field Layouts in PHP\nDESCRIPTION: Shows how to listen for project config events and handle changes to field layouts for custom elements, including saving and deleting layouts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_54\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getProjectConfig()\n    ->onAdd('myplugin.productFieldLayout', [$this, 'handleChangedProductLayout'])\n    ->onUpdate('myplugin.productFieldLayout', [$this, 'handleChangedProductLayout'])\n    ->onRemove('myplugin.productFieldLayout', [$this, 'handleDeletedProductLayout']);\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\nuse craft\\db\\Table;\nuse craft\\events\\ConfigEvent;\nuse craft\\models\\FieldLayout;\nuse mynamespace\\elements\\Product;\n\npublic function handleChangedProductLayout(ConfigEvent $event)\n{\n    $layout = FieldLayout::createFromConfig($event->newValue);\n\n    // The `type` is not stored in project config:\n    $layout->type = Product::class;\n\n    // Look up and assign the database ID, if it exists:\n    $id = (new Query())\n        ->select(['id'])\n        ->from([Table::FIELDLAYOUTS])\n        ->where(['type' => Product::class])\n        ->scalar();\n\n    // This might be null, but that's OK—just means it's new!\n    $layout->id = $id;\n\n    // Save without validating (validation happened before updating project config)\n    Craft::$app->getFields()->saveLayout($layout, false);\n}\n\npublic function handleDeletedProductLayout(ConfigEvent $event)\n{\n    // There's only one thing to do here—clear any layouts for the element type:\n    Craft::$app->getFields()->deleteLayoutsByType(Product::class);\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Variants by SKU using GraphQL in Craft CMS\nDESCRIPTION: Demonstrates how to fetch variant information using a GraphQL query with a specific SKU filter. Shows the basic structure for querying variant title data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_12\n\nLANGUAGE: graphql\nCODE:\n```\n# Fetch variant with a SKU of `WIDGET-BASIC`\n{\n  variants(sku: 'WIDGET-BASIC') {\n    title\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Navigation HTML Structure in Twig\nDESCRIPTION: This snippet shows a standard navigation structure in Twig that will be refactored to use macros in the next example.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n<nav class=\"global-nav\">\n  <ul>\n    <li class=\"nav-item\"><a href=\"{{ url('about') }}\">About</a></li>\n    <li class=\"nav-item\"><a href=\"{{ url('blog') }}\">Blog</a></li>\n    <li class=\"nav-item\"><a href=\"{{ url('contact') }}\">Contact</a></li>\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Using commerceCurrency Filter for Currency Formatting and Conversion in Twig\nDESCRIPTION: This snippet demonstrates various uses of the commerceCurrency filter in Twig for Craft Commerce. It shows how to format currencies, convert between currencies, and customize the output format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/twig-filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.00|commerceCurrency(cart.currency) }} // US$ 10.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true) }} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=false) }} // 13.0000\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=true) }} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency('AUD',convert=true,format=true,stripZeros=true) }} // A$ 13\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Utility Type in Craft CMS Plugin\nDESCRIPTION: Example code showing how to register a custom utility type with Craft's Utilities service. The code demonstrates setting up an event listener that adds a custom utility class to the list of available utility types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/utility-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Utilities;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Utilities::class,\n            Utilities::EVENT_REGISTER_UTILITY_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyUtility::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Subdivisions Dropdown with Optgroups\nDESCRIPTION: Complex example showing how to create a hierarchical select element with administrative areas grouped by country, using the subdivision repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set subdivisionRepo = craft.app.getAddresses().getSubdivisionRepository() %}\n{% set countriesWithSubdivisions = countries | filter(c => subdivisionRepo.getAll([c.countryCode]) | length) %}\n\n<select name=\"administrativeArea\">\n  {% for country in countriesWithSubdivisions %}\n    {% set administrativeAreas = subdivisionRepo.getAll([country.countryCode]) %}\n\n    <optgroup label=\"{{ country.name }}\">\n      {% for a in administrativeAreas %}\n        <option value=\"{{ a.code }}\">{{ a.name }}</option>\n      {% endfor %}\n    </optgroup>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Manual PHP Configuration Override\nDESCRIPTION: Example of manually overriding PHP settings using a .user.ini file in the web root directory, demonstrating how to set max_execution_time.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/php-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: ini\nCODE:\n```\nmax_execution_time = 7000\n```\n\n----------------------------------------\n\nTITLE: SSH into Nitro Environment\nDESCRIPTION: Command to SSH into the Nitro machine for console debugging.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/xdebug.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnitro ssh\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query for Global Site Information\nDESCRIPTION: GraphQL query to fetch site information from a global set, with corresponding JSON response structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  globalSet(handle: \"siteInfo\") {\n    ... on siteInfo_GlobalSet {\n      description\n    }\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"globalSet\": {\n      \"description\": \"Hello, world!\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules with Craft's UrlManager in PHP\nDESCRIPTION: This code shows how to register custom URL rules for a plugin's edit pages in the Craft CMS control panel. It uses Craft's event system to add routes for both creating new items and editing existing ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-edit-pages.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\Urlmanager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['my-plugin/events/new'] = 'my-plugin/events/edit';\n        $event->rules['my-plugin/events/<eventId:\\d+>'] = 'my-plugin/events/edit';\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Displaying Entry Authors in Twig Templates\nDESCRIPTION: This snippet demonstrates how to display multiple authors of an entry. It accesses the authors property of an entry, extracts their full names using collection methods, and joins them with appropriate formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<h2>{{ entry.title }}</h2>\n\nBy {{ collect(entry.authors).pluck('fullName').join(', ', ', and ') }}\n\n{# ... #}\n```\n\n----------------------------------------\n\nTITLE: Updating Component Class Names in Migration\nDESCRIPTION: Shows how to update element types, field types, and widget types in database tables when migrating from Craft 2 to Craft 3, using the update method to change class name references.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\n$this->update('{{%elements}}', [\n    'type' => MyElement::class\n], ['type' => 'OldPlugin_ElementType']);\n```\n\nLANGUAGE: php\nCODE:\n```\n$this->update('{{%fields}}', [\n    'type' => MyField::class\n], ['type' => 'OldPlugin_FieldType']);\n```\n\nLANGUAGE: php\nCODE:\n```\n$this->update('{{%widgets}}', [\n    'type' => MyWidget::class\n], ['type' => 'OldPlugin_WidgetType']);\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Class to SVG in Craft CMS\nDESCRIPTION: Adds a custom class to the root SVG element using the attr filter. Useful for styling or targeting the SVG with CSS or JavaScript.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_49\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg')|attr({ class: 'lemon-icon' }) }}\n```\n\n----------------------------------------\n\nTITLE: Creating Translation Files in PHP\nDESCRIPTION: Demonstrates how to create a PHP file that returns an array of translated messages for a specific language in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Contact us' => 'Kontaktiere uns',\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Matrix Field for Post Content in Craft CMS\nDESCRIPTION: Instructions for setting up a matrix field to handle flexible post content. Includes configuration for search indexing, entry limits, view mode, and custom button label. The process for defining entry types within the matrix is mentioned but not detailed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<BrowserShot\n    url=\"https://tutorial.ddev.site/admin/settings/sections/new\"\n    id=\"newMatrixField\"\n    :poi=\"{\n        name: [44.5, 5, 'A'],\n        handle: [44.5, 13, 'B'],\n        search: [44.5, 28.5, 'C'],\n        type: [44.5, 35, 'D'],\n        entryTypes: [44.5, 45, 'E'],\n        siteSettings: [44.5, 56, 'F'],\n        minMaxEntries: [44.5, 68, 'G'],\n        viewMode: [44.5, 81, 'H'],\n        newButtonLabel: [44.5, 89, 'I'],\n    }\"\n    :link=\"false\"\n    caption=\"Configuring a new matrix field.\">\n<img src=\"../images/new-matrix-field.png\" alt=\"Screenshot of Matrix field settings\" />\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: CSRF Input HTML Output Example\nDESCRIPTION: Example of the HTML output generated by the csrfInput() function, showing the hidden input field with the CSRF token value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_12\n\nLANGUAGE: html\nCODE:\n```\n<input type=\"hidden\" name=\"CRAFT_CSRF_TOKEN\" value=\"MfVs9Nyp33VKpXH7S0eUZZxy74Dw25VUYHGti-(...)\">\n```\n\n----------------------------------------\n\nTITLE: Implementing CSRF Protection in Twig Forms\nDESCRIPTION: Shows how to include CSRF token input in a POST form using the getCsrfInput() function, which is required for sites with CSRF Protection enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ getCsrfInput() }}\n  <!-- ... -->\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Plugin Initialization with Deferred Setup\nDESCRIPTION: Advanced Plugin class implementation showing how to properly handle initialization timing using Craft's onInit event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse Craft;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init(): void\n    {\n        // Always let the parent init() method run, first:\n        parent::init();\n\n        // Set up critical components + features...\n\n        // Defer some setup tasks until Craft is fully initialized:\n        Craft::$app->onInit(function() {\n            // ...\n        });\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Color Field Usage in Twig and PHP\nDESCRIPTION: Demonstrates basic usage of Color fields to output hexadecimal color values in CSS styles. Shows how to check if a color is selected and output it directly or using getHex() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/color-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <style type=\"text/css\">\n    .content a {\n      color: {{ entry.myFieldHandle }};\n    }\n    .content b {\n      {# same thing #}\n      color: {{ entry.myFieldHandle.getHex() }};\n    }\n  </style>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    echo $entry->myFieldHandle;\n    // same thing\n    echo $entry->myFieldHandle->getHex();\n}\n```\n\n----------------------------------------\n\nTITLE: Embedding and Customizing a Template in Twig\nDESCRIPTION: Demonstrates how to embed a template and override its content block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% embed '_tip.twig' %}\n  {% block content %}\n    <p>I'm a helpful tip!</p>\n  {% endblock %}\n{% endembed %}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Variants and Related Elements in Twig\nDESCRIPTION: Shows how to eager-load variants and their related elements when querying products in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.products()\n  .type('widgets')\n  .with([\n    ['variants.complianceStandards'],\n  ])\n  .all() %}\n\n<ul>\n  {% for product in products %}\n    <li>\n      <strong>{{ product.title }}</strong>\n      <span class=\"separator\">—</span>\n      Options meeting:\n      {{ product.variants|map(v => v.complianceStandards)|flatten|join(', ') }}\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Permission Helper Method for GraphQL Widget Queries\nDESCRIPTION: A custom helper method that extends Craft's Gql helper class to check whether the current GraphQL schema allows querying widget elements. This simplifies permission checks in query classes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic static function canQueryWidgets(): bool\n{\n    $allowedEntities = self::extractAllowedEntitiesFromSchema();\n    return isset($allowedEntities['widgets']);\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Volume Type in Craft CMS Plugin\nDESCRIPTION: This code snippet demonstrates how to register a custom volume type within a Craft CMS plugin. It uses Yii's event system to add the custom volume type to Craft's list of available volume types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/volume-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Volumes;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Volumes::class,\n            Volumes::EVENT_REGISTER_VOLUME_TYPES,\n                function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyVolume::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating User Queries in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new user query in both Twig and PHP. This is the first step in fetching user data from the CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new user query #}\n{% set myUserQuery = craft.users() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new user query\n$myUserQuery = \\craft\\elements\\User::find();\n```\n\n----------------------------------------\n\nTITLE: Creating Product Queries in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new product query in both Twig templates and PHP code for Craft CMS Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/product-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new product query #}\n{% set myProductQuery = craft.products() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product query\n$myProductQuery = \\craft\\commerce\\elements\\Product::find();\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Assets Field Filters in PHP\nDESCRIPTION: Shows how to fetch entries that have related assets using an Assets field handle with the :notempty: parameter in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related asset\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Overriding find() Method with Soft Delete Support in PHP\nDESCRIPTION: Code showing how to override the find() method in an Active Record class to filter out soft-deleted records by adding a dateDeleted condition to the query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic static function find()\n{\n    // @var MyActiveQuery $query\n    $query = Craft::createObject(MyActiveQuery::class, [static::class]);\n    $query->where(['dateDeleted' => null]);\n    return $query;\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Volume Operations from Craft 3 to 4\nDESCRIPTION: Example showing how volume operations have changed between Craft 3 and 4, with filesystem operations now being performed through the volume's filesystem object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\n$myVolumeHandle = $volume->handle;\n$volume->createDirectory('subfolder');\n\n// Craft 4\n$myVolumeHandle = $volume->handle;\n$volume->getFs()->createDirectory('subfolder');\n```\n\n----------------------------------------\n\nTITLE: Implementing Request Validation in a Controller Action\nDESCRIPTION: Demonstrates how to validate an incoming request by requiring it to be a control panel request before executing the rest of the action code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function actionFoo()\n{\n    // This action should only be available to the control panel\n    $this->requireCpRequest();\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Multiple Purchasables Cart Form in Twig\nDESCRIPTION: Form implementation for adding multiple product variants to the cart simultaneously using array notation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adding-to-and-updating-the-cart.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products.one() %}\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Products added to the cart.\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n\n  {% for variant in product.variants %}\n    <input type=\"hidden\" name=\"purchasables[{{loop.index}}][id]\" value=\"{{ variant.id }}\">\n    <input type=\"hidden\" name=\"purchasables[{{loop.index}}][qty]\" value=\"1\">\n    <input type=\"hidden\" name=\"purchasables[{{loop.index}}][note]\" value=\"1\">\n  {% endfor %}\n\n  <input type=\"submit\" value=\"Add all variants to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating Field Settings Template in Twig\nDESCRIPTION: A Twig template example for rendering field settings forms using Craft's form helpers. This template creates a lightswitch input for a 'useSecurities' field setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Import field helpers from Craft: #}\n{% import \"_includes/forms\" as forms %}\n\n{{ forms.lightswitchField({\n    label: 'Use securities symbols?'|t('my-plugin'),\n    instructions: 'Enable this to allow arbitrary ISIN (ISO6166) symbols.'|t('my-plugin'),\n    id: 'currency-allow-securities',\n    name: 'useSecurities',\n    on: field.useSecurities,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Nested URI Format for Structure Sections in Craft CMS\nDESCRIPTION: A Twig template for creating hierarchical URLs in Structure sections where child entries include their parent's URI as a prefix. This creates a nested URL structure reflecting the content hierarchy.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{parent.uri}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Querying Products with Active Sales in Twig\nDESCRIPTION: This example shows how to query products that have at least one sale available to the current user using the hasSales parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-products.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.commerce.products({\n  hasSales: true\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Simplified Eager-Loading in Craft CMS 5\nDESCRIPTION: Illustrates the new simplified approach to eager-loading in Craft CMS 5, showing how to use the .eagerly() method on element queries to automatically trigger eager-loading for relational fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set articles = craft\n    .entries()\n    .section('blog')\n    .with([\n        ['featureImage'],\n    ])\n    .all() %}\n\n{% for article in articles %}\n  {% set image = article.featureImage|first %}\n  {% if image %}\n    {{ image.getImg() }}\n  {% endif %}\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set articles = craft\n    .entries()\n    .section('blog')\n    .all() %}\n\n{% for article in articles %}\n  {% set image = article.featureImage.eagerly().one() %}\n\n  {# Testing whether there was a result is still a good idea: #}\n  {% if image %}\n    {{ image.getImg() }}\n  {% endif %}\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set articles = craft\n    .entries()\n    .section('blog')\n    .with([\n      ['author'],\n    ])\n    .all() %}\n\n{% for article in articles %}\n  {# Lazily-eager-loaded relation: #}\n  {% set image = article.featureImage.eagerly().one() %}\n\n  {% if image %}\n    {{ image.getImg() }}\n  {% endif %}\n\n  {# Explicitly eager-loaded element: #}\n  <span>{{ article.author.fullName }}</span>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Generating Control Panel URLs with cpUrl() Function\nDESCRIPTION: The cpUrl() function returns a control panel URL, automatically accounting for relative vs. absolute format and the active cpTrigger setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ cpUrl('settings') }}\">Visit control panel settings</a>\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Address Validation in PHP\nDESCRIPTION: Demonstrates how to add custom validation rules for addresses using PHP in a Craft CMS plugin or module. It uses the Model::EVENT_DEFINE_RULES event to add a custom validation rule.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\base\\Model;\nuse craft\\elements\\Address;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    Address::class,\n    Model::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $event) {\n        $event->rules[] = [\n            ['fullName'],\n            'match',\n            'pattern' => '/droid|bot/i',\n            'message' => Craft::t('site', 'Robots are not allowed.'),\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Finding Elements with find() Method in Twig\nDESCRIPTION: Example of using the find() method to fetch entries from the blog section with a limit of 10, returning an array of EntryModel objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries.section('blog').limit(10).find() %}\n{# `entries` is an array of EntryModel objects #}\n```\n\n----------------------------------------\n\nTITLE: Translating Static Messages in PHP\nDESCRIPTION: Shows how to translate static messages in PHP code using Craft::t(). Includes both the original and translated implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// old\necho 'Contact us';\n\n// new\necho Craft::t('site', 'Contact us');\n```\n\n----------------------------------------\n\nTITLE: Creating Subscription Queries in Twig and PHP\nDESCRIPTION: Examples showing how to create new subscription queries using both Twig and PHP syntax in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/subscriptions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new subscription query #}\n{% set mySubscriptionQuery = craft.subscriptions() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new subscription query\n$mySubscriptionQuery = \\craft\\commerce\\elements\\Subscription::find();\n```\n\n----------------------------------------\n\nTITLE: Fetching Only Leaf Categories from Related Categories in Twig and PHP\nDESCRIPTION: Shows how to apply parameters to the category query to filter for only leaf categories (categories without children).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle\n  .leaves()\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedAssets = $entry->myFieldHandle\n    ->leaves()\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Removing Unique Constraints for Soft Deletable Tables in PHP\nDESCRIPTION: Code showing how to remove unique database constraints that would prevent proper soft deletion functionality. This example uses MigrationHelper to drop and recreate an index without the uniqueness constraint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\MigrationHelper;\n\n// Stop enforcing unique handles at the database level\nMigrationHelper::dropIndexIfExists('{{%mytablename}}', ['handle'], true, $this);\n$this->createIndex(null, '{{%mytablename}}', ['handle'], false);\n```\n\n----------------------------------------\n\nTITLE: Outputting End Body Scripts with endBody Function\nDESCRIPTION: Shows how to use the endBody function to output scripts and styles registered for the 'end body' position in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n<html>\n  <head>\n    {# ... #}\n  </head>\n  <body>\n    <h1>{{ page.name }}</h1>\n    {{ page.body }}\n\n    {{ endBody() }}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Customizing Deprecator Component in Craft CMS with PHP\nDESCRIPTION: Example of using static configuration to customize a single property on an existing component. This snippet shows how to make the deprecator throw exceptions based on an environment variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    // ...\n    'components' => [\n        // Customize one property on an existing component:\n        'deprecator' => [\n            'throwExceptions' => App::env('HARD_MODE') ?: false,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Memcached Cache in Craft CMS with PHP\nDESCRIPTION: Configuration to use Memcached for cache storage in Craft CMS. This example sets up the MemCache class with connection details, server configuration, and default settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\MemCache::class,\n                'useMemcached' => true,\n                'username' => App::env('MEMCACHED_USERNAME'),\n                'password' => App::env('MEMCACHED_PASSWORD'),\n                'defaultDuration' => 86400,\n                'servers' => [\n                    [\n                        'host' => App::env('MEMCACHED_HOST') ?: 'localhost',\n                        'persistent' => true,\n                        'port' => 11211,\n                        'retryInterval' => 15,\n                        'status' => true,\n                        'timeout' => 15,\n                        'weight' => 1,\n                    ],\n                ],\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Singles in Twig\nDESCRIPTION: Demonstrates how to access single entries in Twig templates when preloadSingles is enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<footer>\n  &copy;{{ now|date('Y') }}\n  {{ about.phoneNumber }}\n</footer>\n```\n\n----------------------------------------\n\nTITLE: Complete ColorData Object Method Examples in Twig and PHP\nDESCRIPTION: Comprehensive demonstration of all available methods in the ColorData object returned by Color fields. Shows how to access color values in different formats (hex, RGB, HSL) and extract individual color components like hue, saturation, lightness, and RGB values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/color-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  {{ entry.myFieldHandle }}                 {# output: #e5422b #}\n  {{ entry.myFieldHandle.getHex() }}        {# output: #e5422b #}\n  {{ entry.myFieldHandle.getRgb() }}        {# output: rgb(229,66,43) #}\n  {{ entry.myFieldHandle.getHsl() }}        {# output: hsl(7,81%,90%) #}\n  {{ entry.myFieldHandle.getLuma() }}       {# output: 0.38820862745098 #}\n  {{ entry.myFieldHandle.getHue() }}        {# output: 7 #}\n  {{ entry.myFieldHandle.getLightness() }}  {# output: 90 #}\n  {{ entry.myFieldHandle.getSaturation() }} {# output: 81 #}\n  {{ entry.myFieldHandle.getRed() }}        {# output: 229 #}\n  {{ entry.myFieldHandle.getGreen() }}      {# output: 66 #}\n  {{ entry.myFieldHandle.getBlue() }}       {# output: 43 #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    echo $entry->myFieldHandle;                  // output: #e5422b\n    echo $entry->myFieldHandle->getHex();        // output: #e5422b\n    echo $entry->myFieldHandle->getRgb();        // output: rgb(229,66,43)\n    echo $entry->myFieldHandle->getHsl();        // output: hsl(7,81%,90%)\n    echo $entry->myFieldHandle->getLuma();       // output: 0.38820862745098\n    echo $entry->myFieldHandle->getHue();        // output: 7\n    echo $entry->myFieldHandle->getLightness();  // output: 90\n    echo $entry->myFieldHandle->getSaturation(); // output: 81\n    echo $entry->myFieldHandle->getRed();        // output: 229\n    echo $entry->myFieldHandle->getGreen();      // output: 66\n    echo $entry->myFieldHandle->getBlue();       // output: 43\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Conditional Field Input HTML Based on Settings\nDESCRIPTION: An example of adjusting the input UI based on field settings. This implementation changes between a free-form text input and a dropdown selector based on the 'useSecurities' setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\ElementInterface;\nuse craft\\helpers\\Cp;\n\nprotected function inputHtml(mixed $value, ?ElementInterface $element, bool $inline): string\n{\n    $id = $this->getInputId();\n\n    $components = [];\n\n    if ($this->useSecurities) {\n        $components[] = Cp::textHtml([\n            'id' => \"$id-security-symbol\",\n            'name' => \"$this->handle[symbol]\",\n            'value' => $value->symbol ?? null,\n            'type' => 'text',\n            'class' => 'code',\n            'size' => 14,\n        ]);\n    } else {\n        $components[] = Cp::selectizeHtml([\n            'id' => \"$id-currency-symbol\",\n            'describedBy' => $this->describedBy,\n            'name' => \"$this->handle[symbol]\",\n            'value' => $value->symbol ?? null,\n            'options' => $this->getCurrencyOptions(),\n            'disabled' => $static,\n        ]);\n    }\n\n    $components[] = Cp::textHtml([\n        'id' => \"$id-amount\",\n        'name' => \"$this->handle[amount]\",\n        'value' => $value->amount ?? null,\n        'type' => 'number',\n        'size' => 10,\n    ]);\n\n    return join('', $components);\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Countries by Shipping Zone ID in PHP\nDESCRIPTION: Shows how to retrieve countries within a specific shipping zone using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllCountriesByShippingZoneId($shippingZoneId);\n\nforeach ($countries as $country) {\n    // $country->id\n    // $country->name\n}\n```\n\n----------------------------------------\n\nTITLE: Handling JSON Data Types in Twig\nDESCRIPTION: Shows how to handle different JSON data types and use conditional logic for output formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if data.getValue() is scalar %}\n  {{ data }}\n{% else %}\n  <pre>{{ data.getJson(true) }}</pre>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Validation Rules in Craft CMS\nDESCRIPTION: Demonstrates how to register custom GraphQL validation rules using Craft's event system. The example shows disabling introspection by adding a validation rule through an event listener.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineGqlValidationRulesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Validator\\Rules\\DisableIntrospection;\n\nEvent::on(\n    Gql::class,\n    Gql::::EVENT_DEFINE_GQL_VALIDATION_RULES,\n    function (DefineGqlValidationRulesEvent $event) {\n        // Permanently disable introspection\n        $event->validationRules[DisableIntrospection::class] = new DisableIntrospection();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Widget Content Rendering\nDESCRIPTION: Shows how to implement the getBodyHtml() method to render a widget's content using a Twig template with local variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/widget-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function getBodyHtml(): ?string\n{\n    return Craft::$app->getView()->renderTemplate('my-plugin/_widgets/my-widget', [\n        'local' => 'Variables!',\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Field Type Settings Template in PHP\nDESCRIPTION: Demonstrates how to render a settings template for a field type, passing the current settings to the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    public function getSettingsHtml()\n    {\n        return craft()->templates->render('cocktailrecipes/ingredientlist/settings', array(\n            'settings' => $this->getSettings()\n        ));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Environment-specific Commerce Configuration in PHP\nDESCRIPTION: Example showing how to configure Commerce settings with different values for each environment, specifically changing the purgeInactiveCartsDuration setting for the development environment only.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/config-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Global settings\n    '*' => [\n        // ...\n    ],\n\n    // Dev environment settings\n    'dev' => [\n        'purgeInactiveCartsDuration' => 'P1D',\n        // ...\n    ],\n\n    // Staging environment settings\n    'staging' => [\n        // ...\n    ],\n\n    // Production environment settings\n    'production' => [\n        // ...\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Entries Fields in PHP\nDESCRIPTION: Shows how to fetch artwork entries related to an artist using an Entries field in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$works = \\craft\\elements\\Entry::find()\n    ->section('artwork')\n    ->myFieldHandle($artist)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Displaying Tagged Content with Twig\nDESCRIPTION: Demonstrates how to create a tag listing page by querying tags from a specific group and generating a linked list. Includes group filtering and HTML generation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a tag query with the 'group' parameter #}\n{% set myTagQuery = craft.tags()\n  .group('blogTags') %}\n\n{# Fetch the tags #}\n{% set tags = myTagQuery.all() %}\n\n{# Display the tag list #}\n<ul>\n  {% for tag in tags %}\n    <li><a href=\"{{ url('blog/tags/'~tag.id) }}\">{{ tag.title }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Implementing afterExecuteGqlQuery Event Listener in Craft CMS\nDESCRIPTION: A PHP code example demonstrating how to listen for the afterExecuteGqlQuery event, which allows for post-processing GraphQL query results. This can be used for caching query results or modifying the response before it's returned to the client.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_AFTER_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Cache results from $event->result or just tweak them\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States in Twig\nDESCRIPTION: Demonstrates how to retrieve all enabled states and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states.allEnabledStates %}\n  <option value=\"{{ state.id }}\">\n    {{- state.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Simplified Responsive Image Generation\nDESCRIPTION: Shows how to generate responsive images using the getImg() method with transform parameters and size multipliers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getImg({ width: 300, height: 300 }, ['1.5x', '2x', '3x']) }}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Validation Rules to User Elements in PHP\nDESCRIPTION: Example of adding custom validation rules to User elements by handling the EVENT_DEFINE_RULES event. This demonstrates how to enforce additional validation requirements like password complexity without modifying core code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\elements\\User;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    User::class,\n    User::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $e) {\n        // Enforce password minimum length:\n        $e->rules[] = [['newPassword'], 'string', 'min' => 16];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating an Autosuggest Field for Environment Variables in Twig\nDESCRIPTION: This Twig snippet demonstrates how to create an autosuggest input field for environment variables in Craft CMS. It uses the autosuggestField macro to provide a user-friendly interface for entering secrets or environment-specific settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% from \"_includes/forms\" import autosuggestField %}\n\n{{ autosuggestField({\n    label: 'Secret'|t('my-plugin'),\n    instructions: 'Provide a shared secret that will be sent under the `secretParam` key in the request body.'|t('my-plugin'),\n    id: 'webhook-secret',\n    name: 'secret',\n    suggestEnvVars: true,\n    value: webhook.secret,\n    required: true,\n    placeholder: 'https://',\n    errors: webhook.getErrors('secret'),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Project Config YAML Files in Craft CMS\nDESCRIPTION: Command to rebuild the Project Config YAML files from the database state. Used when the database is the source of truth or when resolving sync issues.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/rebuild\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Set Field in Twig Templates in Craft CMS\nDESCRIPTION: This snippet demonstrates how to access a field within a global set from any Craft CMS template. The example shows retrieving the 'yearEstablished' field from a global set with the handle 'companyInfo'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/globals.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ companyInfo.yearEstablished }}\n```\n\n----------------------------------------\n\nTITLE: Defining Element Actions for Custom Element Types in PHP\nDESCRIPTION: Example of implementing the defineActions() method in a custom element type class to register element actions. The method returns an array of action class names that will be available for that element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineActions(string $source): array\n{\n    return [\n        MyAction::class,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Listing All Product Types\nDESCRIPTION: Demonstrates how to fetch and display all product types configured in the system using craft.commerce.productTypes.allProductTypes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for type in craft.commerce.productTypes.allProductTypes %}\n  {{ type.handle }} - {{ type.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting HTTP Headers with header Tag in Twig\nDESCRIPTION: The header tag sets new HTTP headers on the response. It can be used to control caching behavior and set expiration dates. The example shows how to set Cache-Control, Pragma, and Expires headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Tell the browser to cache this page for 30 days #}\n{% set expiry = now|date_modify('+30 days') %}\n\n{% header \"Cache-Control: max-age=\" ~ (expiry.timestamp - now.timestamp) %}\n{% header \"Pragma: cache\" %}\n{% header \"Expires: \" ~ expiry|date('D, d M Y H:i:s', 'GMT') ~ \" GMT\" %}\n```\n\n----------------------------------------\n\nTITLE: POST Request: Send Password Reset Email Endpoint\nDESCRIPTION: API endpoint that handles sending password reset emails to users. Accepts login name or user ID as parameters and supports both standard and JSON response formats. Returns success/error messages and handles redirects based on request type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: http\nCODE:\n```\nPOST users/send-password-reset-email\n```\n\n----------------------------------------\n\nTITLE: Displaying Product-Specific Line Item Data in Twig\nDESCRIPTION: Demonstrates how to conditionally display product-specific line item data, such as a gift message for gift card products.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# ... #}\n\n{# Extra product-type-specific line item data: #}\n{% switch item.purchasable.type.handle %}\n  {% case 'giftCard' %}\n    <p>{{ item.options.giftMessage ?? 'No custom message.' }}</p>\n  {% default %}\n    {# Fall back to outputting *all* keys: #}\n    {% if item.options is not empty %}\n      <dl>\n        {% for key, val in item.options %}\n          <dt>{{ key|title }}</dt>\n          <dd>{{ val }}</dd>\n        {% endfor %}\n      </dl>\n    {% endif %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Parsing HTML Attributes with parseAttr in Twig\nDESCRIPTION: Shows how to extract attributes from an HTML tag into an associative array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  <a class=\"text-xl pt-0\" href=\"/foo.pdf\" download>Save File</p>\n{% endset %}\n\n{{ content|parseAttr }}\n{# Result: [\"class\" => [\"text-xl\", \"pt-0\"], \"href\" => \"/foo.pdf\", \"download\" => true] #}\n```\n\n----------------------------------------\n\nTITLE: Getting published file URL for a single asset\nDESCRIPTION: PHP code for getting the URL of a published file using Craft's AssetManager. This example shows how to publish and get the URL for a single file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/path/to/file.svg',\n    true\n);\n```\n\n----------------------------------------\n\nTITLE: Sorting Entries by Nested Field Key in Twig\nDESCRIPTION: Demonstrates how to sort entries using dot notation to access nested field keys, specifically ordering by the symbol property of a currency field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set assetsBySymbol = craft.entries()\n  .orderBy('myCurrencyField.symbol ASC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Removing Multiple Keys from an Array using withoutKey Filter in Twig\nDESCRIPTION: This snippet shows how to use the 'withoutKey' filter to remove multiple keys from an array. It creates an array with three key-value pairs and then removes both the 'bar' and 'baz' keys by passing them as an array to the filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_51\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey(['bar', 'baz']) %}\n{# Result: { 'foo': 'foo' } #}\n```\n\n----------------------------------------\n\nTITLE: Initializing Custom Translation Category in PHP\nDESCRIPTION: Shows how to programmatically add a new translation category by configuring a PhpMessageSource with specified language and path settings. This is typically done in a module or plugin's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/translation-categories.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\i18n\\PhpMessageSource;\n\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->i18n->translations['my-category'] = [\n        'class' => PhpMessageSource::class,\n        'sourceLanguage' => 'en',\n        'basePath' => __DIR__ . '/translations',\n        'allowOverrides' => true,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Aliases in Craft CMS\nDESCRIPTION: Examples of defining custom aliases for file system paths and URLs in Craft CMS configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n'aliases' => [\n    '@web' => 'https://my-project.tld',\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n'aliases' => [\n    '@web' => 'https://my-project.tld',\n    '@webroot' => dirname(__DIR__) . '/path/to/webroot',\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n'aliases' => [\n    '@web' => 'https://my-project.tld',\n    '@webroot' => dirname(__DIR__) . '/path/to/webroot',\n    '@assetBaseUrl' => '@web/assets',\n    '@assetBasePath' => '@webroot/assets',\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n'aliases' => [\n    '@assetBaseUrl' => craft\\helpers\\App::env('ASSETS_BASE_URL'),\n    '@assetBasePath' => craft\\helpers\\App::env('ASSETS_BASE_PATH'),\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Selected Products in Twig\nDESCRIPTION: Demonstrates how to access selected products from a Products field in a Twig template. This snippet shows the basic usage and explains how it relates to the ElementCriteriaModel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.productsFieldHandle %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.commerce.products({\n  relatedTo: { sourceElement: entry, field: 'productsFieldHandle' },\n  order:     'sortOrder',\n  limit:     null\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Complete Example of Working with Variants in Twig Templates\nDESCRIPTION: A comprehensive example demonstrating how to set and use variants, check if any exist, and display them in a list with product links. Shows practical usage of the getProduct() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set variants = entry.myFieldHandle.all() %}\n\n{% if variants|length %}\n  <h3>Consider buying these:</h3>\n  <ul>\n    {% for variant in variants %}\n      {% set product = variant.getProduct() %}\n      <li>\n        <a href=\"{{ product.url }}\">\n          {{ product.title ~ ': ' ~ variant.title }}\n        </a>\n      </li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Saving Product Types with Field Layouts to Project Config in PHP\nDESCRIPTION: Shows how to save a product type with its associated field layout to the project config, handling both new and existing product types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_56\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Db;\nuse craft\\web\\Controller;\n\nuse mynamespace\\models\\Product;\nuse mynamespace\\models\\ProductType;\n\nclass SettingsController extends Controller\n{\n    public function actionSaveProductType()\n    {\n        // Load or instantiate a `ProductType` model and apply incoming params...\n\n        if ($isNew) {\n            // Ensure we have a UID for use when updating project config:\n            $productType->uid = StringHelper::UUID();\n        }\n\n        // Gather the incoming field layout:\n        $fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n        $fieldLayout->type = Product::class;\n\n        $productType->setFieldLayout($fieldLayout);\n\n        // (In the process of building the field layout, it gives itself a UID!)\n\n        // From above, let the model generate its own config:\n        $config = $productType->getConfig();\n\n        Craft::$app->getProjectConfig()->set(\"myplugin.productTypes.{$productType->uid}\", $config, \"Updated \\\"{$productType->name}\\\" product type definition.\");\n\n        // Was this the first time we saved this model?\n        if (!$productType->id) {\n            $productType->id = Db::idByUid('{{%plugin_producttypes}}', $productType->uid);\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Radio Buttons Field Data in Twig\nDESCRIPTION: Demonstrates how to access Radio Buttons field data in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Default Lightswitch Field Values in Twig\nDESCRIPTION: Shows how to query elements with a Lightswitch field, considering default values. The example filters entries in the 'essays' section where the 'isFeatured' field is false or not set.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set archive = craft.entries()\n  .section('essays')\n  .isFeatured(false)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Listing Active Discounts with Twig\nDESCRIPTION: Loops through and displays all currently active discounts in the system, showing each discount's name and description. Uses the craft.commerce.discounts.allActiveDiscounts method to retrieve enabled discounts that are valid for the current date and time.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/discounts.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for discount in craft.commerce.discounts.allActiveDiscounts %}\n  {{ discount.name }} - {{ discount.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Order History in Twig Template\nDESCRIPTION: This Twig code snippet shows how to display the history of an order, including the status changes and associated messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/custom-order-statuses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for history in order.histories %}\n    {% set newStatus = history.newStatus %}\n\n    <li>{{ newStatus.name }} ({{ history.dateCreated | date('short') }}): {{ history.message }}</li>\n\n    {# `newStatus.color` and `newStatus.handle` are also available, if you want to distinguish (visually or functionally) between history records! #}\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Preventing Action in Craft CMS 2 Event\nDESCRIPTION: Demonstrates how to prevent an action (like saving or deleting) from occurring in a Craft CMS 2 event by setting the performAction property to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$event->performAction = false;\n```\n\n----------------------------------------\n\nTITLE: Complex Configuration Types in PHP for Craft CMS\nDESCRIPTION: Illustrates the use of complex configuration types like arrays and closures in Craft CMS. It shows how to define custom file kinds and a dynamic post-login redirect function using the GeneralConfig class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\n\nreturn GeneralConfig::create()\n    // Arrays:\n    ->extraFileKinds([\n        'fonts' => [\n            'extensions' => ['otf', 'ttf', 'woff', 'woff2'],\n        ],\n    ])\n    // Functions or \"closures\":\n    ->postLoginRedirect(function($siteHandle) {\n        // Perform tests on the signed-in User:\n        $user = Craft::$app->getUser()->getIdentity();\n\n        // Send to their account, if their profile is incomplete...\n        if (empty($user->someProfileField)) {\n            return 'account/profile';\n        }\n\n        // ...or the homepage, by default:\n        return '/';\n    });\n```\n\n----------------------------------------\n\nTITLE: Working with Strings in Twig\nDESCRIPTION: Examples of defining strings in Twig using single or double quotes, including how to escape quotation marks within strings and handle special characters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set greeting = \"Hello there\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set heading = 'Try the new 7\" folding tablet' %}\n{% set subheading = \"The original Microsoft Surface was 3.5' long.\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set subheading = \"The original Microsoft Surface was 3' 6\\\" long.\" %}\n```\n\n----------------------------------------\n\nTITLE: Alternative Hierarchical URI Generation with Conditionals in Twig\nDESCRIPTION: An alternative approach to generating hierarchical URIs using Twig conditionals. It checks the entry's level to determine whether to use a base path or the parent's URI.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if level == 1 %}earth{% else %}{parent.uri}{% endif %}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Asset Bundle Class Implementation\nDESCRIPTION: Example PHP class extending AssetBundle to define publishable resources, dependencies, and asset registration for CSS and JavaScript files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/asset-bundles.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\web\\AssetBundle;\nuse craft\\web\\assets\\cp\\CpAsset;\n\nclass FooBundle extends AssetBundle\n{\n    public function init()\n    {\n        // define the path that your publishable resources live\n        $this->sourcePath = '@mynamespace/resources';\n\n        // define the dependencies\n        $this->depends = [\n            CpAsset::class,\n        ];\n\n        // define the relative path to CSS/JS files that should be registered with the page\n        // when this asset bundle is registered\n        $this->js = [\n            'script.js',\n        ];\n\n        $this->css = [\n            'styles.css',\n        ];\n\n        parent::init();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Making HTTP Requests with Guzzle in Craft CMS\nDESCRIPTION: Shows how to create a Guzzle HTTP client using Craft's createGuzzleClient() method, which applies project-specific settings. The example demonstrates making a POST request to a remote API endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/topics.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\n\n$client = Craft::createGuzzleClient([\n    'base_uri' => 'https://api.acme.com/v1',\n]);\n\n$response = $client->post('/widgets', [\n    'json' => [\n        'style' => 'fancy',\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Case-Insensitive Queries in Twig\nDESCRIPTION: Demonstrates how to perform case-insensitive queries against textual fields by using the special caseInsensitive parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/element-queries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set cars = craft.entries()\n  .section('cars')\n  .brand({\n    value: 'bmw',\n    caseInsensitive: true,\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Elements to the Beginning of Arrays with unshift Filter in Twig\nDESCRIPTION: The unshift filter prepends one or more items to the beginning of an array and returns the new array. This allows dynamically building arrays with elements at the start.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|unshift('bar', 'baz') %}\n{# Result: ['bar', 'baz', 'foo'] #}\n```\n\n----------------------------------------\n\nTITLE: Extending CraftVariable with Behaviors and Services in PHP\nDESCRIPTION: This code demonstrates how to extend the global 'craft' variable by attaching behaviors and services through the EVENT_INIT event handler. Behaviors add methods directly to the craft variable, while services add sub-objects accessible via a service ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/extending-twig.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\web\\twig\\variables\\CraftVariable;\nuse yii\\base\\Event;\nuse mynamespace\\myplugin\\behaviors\\MyBehavior;\nuse mynamespace\\myplugin\\services\\MyService;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        CraftVariable::class,\n        CraftVariable::EVENT_INIT,\n        function(Event $e) {\n            /** @var CraftVariable $variable */\n            $variable = $e->sender;\n\n            // Attach a behavior:\n            $variable->attachBehaviors([\n                MyBehavior::class,\n            ]);\n\n            // Attach a service:\n            $variable->set('serviceId', MyService::class);\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'boolean' test in Twig\nDESCRIPTION: Shows how to use the 'boolean' test to check if a variable is a boolean value in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if myVar is boolean %}\n  {{ myVar ? 'true' : 'false' }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Namespace Tag in Twig\nDESCRIPTION: Demonstrates how to use the namespace tag to prefix input names, HTML attributes and CSS selectors. Shows basic usage and the withClasses flag option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% namespace 'foo' %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endnamespace %}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"foo-title\" name=\"foo[title]\" type=\"text\">\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Widget Interface in GraphQL\nDESCRIPTION: Creates a custom Widget interface that extends Craft's Element interface. Defines the interface structure, type registration, and custom field definitions for the Widget element type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\interfaces\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Type\\Definition\\InterfaceType;\nuse craft\\gql\\GqlEntityRegistry;\n\nclass Widget extends \\craft\\gql\\interfaces\\Element\n{\n    public static function getName(): string\n    {\n        return 'WidgetInterface';\n    }\n\n    public static function getType($fields = null): Type\n    {\n        // Return the type if it's already been created\n        if ($type = GqlEntityRegistry::getEntity(self::getName())) {\n            return $type;\n        }\n\n        // Otherwise create the type via the entity registry, which handles prefixing\n        return GqlEntityRegistry::createEntity(self::getName(), new InterfaceType([\n            'name' => static::getName(),\n            'fields' => self::class . '::getFieldDefinitions',\n            'description' => 'This is the interface implemented by all widgets.',\n            'resolveType' => self::class . '::resolveElementTypeName',\n        ]));\n    }\n\n    public static function getFieldDefinitions(): array\n    {\n        // Add our custom widget's field to common ones for all elements\n        return TypeManager::prepareFieldDefinitions(array_merge(\n            parent::getFieldDefinitions(),\n            [\n                'approved' => [\n                    'name' => 'approved',\n                    'type' => Type::boolean(),\n                    'description' => 'Whether the widget is approved.'\n                ],\n            ]\n        ), self::getName());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Optimizing Multiple App Component References (PHP)\nDESCRIPTION: Demonstrates how to optimize multiple references to the same app component within a method by saving a local reference.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n\\Craft::$app->getEntries()->saveEntry($entry1);\n\\Craft::$app->getEntries()->saveEntry($entry2);\n\n// Better:\n$entriesService = \\Craft::$app->getEntries();\n$entriesService->saveEntry($entry1);\n$entriesService->saveEntry($entry2);\n```\n\n----------------------------------------\n\nTITLE: Declaring Method Argument Types in PHP\nDESCRIPTION: Demonstrates how to declare method argument types for improved code clarity and type safety.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function foo(Entry $entry, array $settings)\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags in Twig Templates\nDESCRIPTION: Shows how to use the parseRefs filter in Twig templates to parse any string containing reference tags. The raw filter is applied to render the HTML properly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/reference-tags.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.body|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Querying Blog Entries Related to a Specific Category in Craft CMS\nDESCRIPTION: This GraphQL query demonstrates how to fetch blog entries related to a specific category using the relatedTo parameter. It can be modified to query multiple categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_6\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(section: \"blog\", relatedTo: 11) {\n    title\n    # ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating Pricing Catalog in Craft Commerce CLI\nDESCRIPTION: This command regenerates catalog pricing data for all purchasables. It's recommended to run this command at regular intervals via a task scheduler to ensure up-to-date pricing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n0 0 * * * /usr/bin/env php /path/to/craft commerce/pricing-catalog/generate\n```\n\n----------------------------------------\n\nTITLE: Creating a Logout Link in Twig\nDESCRIPTION: This snippet shows how to create a logout link using Twig. It demonstrates both the manual method using actionUrl() and the shortcut using logoutUrl.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Output a \"log out\" link: #}\n<a href=\"{{ actionUrl('users/logout') }}\">Log Out</a>\n\n{# Craft actually provides a shortcut for this: #}\n<a href=\"{{ logoutUrl }}\">Log Out</a>\n```\n\n----------------------------------------\n\nTITLE: Complex Relational Query with Site Parameter in Craft CMS (Twig)\nDESCRIPTION: Demonstrates a more complex relational query that finds recipes sharing proteins or having them as substitutions across any site, useful for multilingual or international websites.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set proteins = recipe.ingredients.foodGroup('protein').all() %}\n\n{% set recipes = craft.entries()\n  .section('recipes')\n  .relatedTo([\n    'or',\n    {\n      targetElement: proteins,\n      field: 'ingredients',\n    },\n    {\n      targetElement: proteins,\n      sourceSite: null,\n      field: 'substitutions',\n    },\n  ])\n  .all() %}\n{# -> Recipes that share regionally-appropriate proteins, *or* that can be adapted. #}\n```\n\n----------------------------------------\n\nTITLE: Saving Elements Programmatically in Craft CMS\nDESCRIPTION: Example of creating and saving a new product element with custom fields in a controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\n// Create a new product element\n$product = new Product();\n\n// Set the main properties from POST data\n$product->price = Craft::$app->request->getBodyParam('price');\n$product->currency = Craft::$app->request->getBodyParam('currency');\n$product->enabled = (bool)Craft::$app->request->getBodyParam('enabled');\n\n// Set custom field values from POST data in a `fields` namespace\n$product->setFieldValuesFromRequest('fields');\n\n// Save the product\n$success = Craft::$app->elements->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Checking UID-based Permissions Dynamically in Craft CMS\nDESCRIPTION: This snippet demonstrates how to dynamically build a permission string by looking up a section's UID by its handle. This approach is more readable and maintainable than hard-coding UIDs in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/user-management.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Look up the section by its handle: #}\n{% set vendorsSection = craft.app.sections.getSectionByHandle('vendors') %}\n\n{# Build the permission handle: #}\n{% if currentUser.can(\"createEntries:#{vendorsSection.uid}\") %}\n  <a href=\"{{ siteUrl('account/vendors/add') }}\">Add a Vendor</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Creating Address Queries in Twig and PHP\nDESCRIPTION: Examples of initializing a new address query using both Twig and PHP approaches, which is the first step for retrieving address elements in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new address query #}\n{% set myAddressQuery = craft.addresses() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new address query\n$myAddressQuery = \\craft\\elements\\Address::find();\n```\n\n----------------------------------------\n\nTITLE: Enabling PHP Extensions with Nitro CLI\nDESCRIPTION: This code snippet demonstrates how to use the Nitro CLI to enable PHP extensions for a specific site. It shows the interactive prompt for selecting a site and choosing an extension to enable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/extensions.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro extensions\nSelect a site:\n  1. craft-support.nitro\n  2. another-site.nitro\n  3. plugins-dev.nitro\n  4. tutorial.nitro\nEnter your selection: 1\nWhich PHP extension would you like to enable for craft-support.nitro?\n  1. bcmath\n  2. bz2\n  3. calendar\n  4. dba\n  5. enchant\n  ...\nEnter your selection: 1\nApply changes now [Y/n] #\n```\n\n----------------------------------------\n\nTITLE: Date Comparison with Twig's date Function\nDESCRIPTION: Demonstrates how to use the date function for date comparisons, including support for various date formats and Craft's date/time array format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% if date(asset.dateModified) < date('-2days') %}\n  {# asset is not new #}\n{% endif %}\n\n{% if date() > date('2021/06/01') %}\n  {# today is past June 1, 2021 #}\n{% endif %}\n\n{% set myDate = {\n  date: '2021-01-15',\n  timezone: 'America/Los_Angeles',\n  time: '10:57',\n} %}\n\n{% if now > date(myDate) %}\n  {# today is past January 15, 2021 #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Extending Inventory Index View in Twig\nDESCRIPTION: This hook allows adding content after the table containing inventory levels for a specific inventory location.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.inventory.index\" %}\n```\n\n----------------------------------------\n\nTITLE: Handling Optional Parameters in Element Partial\nDESCRIPTION: Example of how to handle optional parameters in an element partial template using default values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set portionSize = portionSize|default(1) %}\n\n{{ entry.title }}: {{ entry.quantity * portionSize }} {{ entry.unit }}\n```\n\n----------------------------------------\n\nTITLE: Defining Field Layout Fixture Data in PHP for Craft CMS Testing\nDESCRIPTION: This code snippet demonstrates how to structure a data file for a FieldLayoutFixture in Craft CMS. It includes examples of defining tabs, fields, and matrix fields with their respective properties and configurations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse craft\\fields\\Matrix;\nuse craft\\fields\\PlainText;\n\nreturn [\n    [\n        'type' => 'craft\\test\\Craft', // Required - can be set to whatever you want.\n        'tabs' => [ // Required - Value can be set to an empty array[]\n            [\n                'name' => 'My First Tab', // Required\n                'fields' => [ // Required - Value can be set to an empty array[]\n                    [\n                        'layout-link' => [ // Required\n                            'required' => true // Required\n                        ],\n                        'field' => [\n                            'name' => 'Test field', // Required\n                            'handle' => 'myTestField', // Required\n                            'fieldType' => PlainText::class, // Required\n                        ]\n                    ],\n                    // Matrix fields are supported in the following config:\n                    [\n                        'layout-link' => [\n                            'required' => false\n                        ],\n                        'field' => [\n                            'name' => 'Matrix Field',\n                            'handle' => 'myMatrixField',\n                            'fieldType' => Matrix::class,\n                            'blockTypes' => [\n                                'new1' => [\n                                    'name' => 'A Block',\n                                    'handle' => 'myMatrixBlock',\n                                    'fields' => [\n                                        'new1' => [\n                                            'type' => PlainText::class,\n                                            'name' => 'First Subfield',\n                                            'handle' => 'myBlockField',\n                                            'instructions' => '',\n                                            'required' => false,\n                                            'typesettings' => [\n                                                'multiline' => ''\n                                            ]\n                                        ]\n                                    ]\n                                ],\n                                'new2' => [\n                                    'name' => 'Another Block',\n                                    'handle' => 'myOtherMatrixBlock',\n                                    'fields' => [\n                                        'new1' => [\n                                            'type' => PlainText::class,\n                                            'name' => 'Another Subfield',\n                                            'handle' => 'myOtherBlockField',\n                                            'instructions' => '',\n                                            'required' => false,\n                                            'typesettings' => [\n                                                'multiline' => ''\n                                            ]\n                                        ]\n                                    ]\n                                ]\n                            ]\n                        ]\n                    ],\n                ]\n            ]\n        ]\n    ]\n];\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Radio Buttons Fields in Twig\nDESCRIPTION: Demonstrates how to fetch entries with a specific option selected in a Radio Buttons field using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Related Blog Entries for a Product in Twig\nDESCRIPTION: This example shows how to use the .relatedTo() query parameter to find blog entries that are related to a specific product through a 'featuredProduct' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set productPosts = craft.entries()\n  .section('blog')\n  .relatedTo({\n    targetElement: product,\n    field: 'featuredProduct',\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Date Handling and Comparison\nDESCRIPTION: Converts arguments to dates for comparison operations. Supports PHP date formats and custom date/time arrays with timezone specifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% if date(asset.dateModified) < date('-2days') %}\n  {# asset is not new #}\n{% endif %}\n\n{% set myDate = {\n  date: '2021-01-15',\n  timezone: 'America/Los_Angeles',\n  time: '10:57',\n} %}\n```\n\n----------------------------------------\n\nTITLE: Mutating Table Data with GraphQL\nDESCRIPTION: Example of updating table field data using GraphQL mutations with column-specific input format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/table.md#2025-04-22_snippet_4\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry(\n  $title: String,\n  $slug: String,\n  $authorId: ID,\n  $tableRows: [myFieldHandle_TableRowInput],\n) {\n  save_cocktails_cocktails_Entry(\n    title: $title,\n    slug: $slug,\n    authorId: $authorId,\n    myFieldHandle: $tableRows\n  ) {\n    title\n    slug\n    authorId\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n    myFieldHandle {\n      whiskey\n      description\n      proof\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Named Parameters in Twig Templates\nDESCRIPTION: Demonstrates how to access named parameters passed from URL rules in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Blog Entries from {{ year }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Paginating Results with paginate Tag in Twig\nDESCRIPTION: The paginate tag simplifies pagination of query results across multiple pages. It works with element queries and provides variables for page information and the current page's entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries()\n  .section('blog')\n  .limit(10) %}\n\n{% paginate query as pageInfo, pageEntries %}\n\n{% for entry in pageEntries %}\n  <article>\n    <h1>{{ entry.title }}</h1>\n    {{ entry.body }}\n  </article>\n{% endfor %}\n\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating GitHub Action for Automated Release Creation\nDESCRIPTION: This YAML configuration sets up a GitHub Action that automatically creates releases for new plugin versions when notified by the Plugin Store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-store.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: Create Release\nrun-name: Create release for ${{ github.event.client_payload.version }}\n\non:\n  repository_dispatch:\n    types:\n      - craftcms/new-release\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: ncipollo/release-action@v1\n        with:\n          body: ${{ github.event.client_payload.notes }}\n          makeLatest: ${{ github.event.client_payload.latest }}\n          name: ${{ github.event.client_payload.version }}\n          prerelease: ${{ github.event.client_payload.prerelease }}\n          tag: ${{ github.event.client_payload.tag }}\n```\n\n----------------------------------------\n\nTITLE: Manual Link Rendering with LinkData Properties\nDESCRIPTION: Shows how to manually construct an anchor tag using the properties of the LinkData object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set link = entry.myLinkFieldHandle %}\n\n<a href=\"{{ link.value }}\" {% if link.target %}target=\"{{ link.target }}\"{% endif %}>{{ link.label }}</a>\n```\n\n----------------------------------------\n\nTITLE: Index Template Path Examples in Craft CMS\nDESCRIPTION: Demonstrates various ways to reference index.twig templates in the templates/ directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/README.md#2025-04-22_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nrecipes/ingredients\nrecipes/ingredients/index\nrecipes/ingredients/index.twig\n```\n\n----------------------------------------\n\nTITLE: Creating Subscription Queries in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new subscription query in both Twig and PHP. This is the first step in fetching subscriptions from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscriptions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new subscription query #}\n{% set mySubscriptionQuery = craft.subscriptions() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new subscription query\n$mySubscriptionQuery = \\craft\\commerce\\elements\\Subscription::find();\n```\n\n----------------------------------------\n\nTITLE: Processing Stored Data Before Use in PHP\nDESCRIPTION: Shows how to modify field data retrieved from the database before it's used in templates by implementing the prepValue method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    public function prepValue($value)\n    {\n        // Modify $value here...\n\n        return $value;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing a Relational Field in Twig\nDESCRIPTION: Example of accessing a relational field (Assets field) from an element, which returns an ElementCriteriaModel with its relatedTo parameter pre-populated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.myAssetsField %}\n```\n\n----------------------------------------\n\nTITLE: Querying Products by Type in Twig\nDESCRIPTION: Demonstrates how to query products of a specific type using the craft.products() method in Twig templates, filtering by the product type handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothes = craft.products()\n  .type('clothes')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Setting HTML Language Attribute with Craft's Language\nDESCRIPTION: This HTML snippet shows how to set the lang attribute of the html tag using Craft's current language setting, which is useful for localization and accessibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<html lang=\"{{ craft.app.language }}\">\n  <head>\n    <title>{{ siteName }}</title>\n  </head>\n  <body>\n    {# ... #}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Tags in PHP\nDESCRIPTION: Shows how to access and loop through related tags for a Tags field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$relatedTags = $entry->myFieldHandle->all();\nif (count($relatedTags)) {\n    foreach ($relatedTags as $rel) {\n        // \\craft\\helpers\\UrlHelper::url('tags/' . $rel->slug)\n        // $rel->title\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing settingsHtml Method in Craft Plugin Class\nDESCRIPTION: Updates the main plugin class to enable CP settings and implement the settingsHtml() method, which renders the settings template with the current settings values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nuse craft\\base\\Model;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public bool $hasCpSettings = true;\n\n    protected function createSettingsModel(): ?Model\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    protected function settingsHtml(): ?string\n    {\n        return \\Craft::$app->getView()->renderTemplate(\n            'my-plugin-handle/settings',\n            [ 'settings' => $this->getSettings() ]\n        );\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Keys from Arrays with withoutKey Filter in Twig\nDESCRIPTION: The withoutKey filter returns an array without one or more specified keys. It can accept either a single key as a string or multiple keys in an array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey('baz') %}\n{# Result: { 'foo': 'foo', 'bar: 'bar' } #}\n\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey(['bar', 'baz']) %}\n{# Result: { 'foo': 'foo' } #}\n```\n\n----------------------------------------\n\nTITLE: Querying Recent Clothing Products in Twig\nDESCRIPTION: Shows how to create a product query to fetch the ten most recently added clothing products and display them in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a product query with the 'type' and 'limit' parameters #}\n{% set newProducts = craft.products()\n  .type('clothing')\n  .limit(10)\n  .all() %}\n\n{# Display the products #}\n{% for product in newProducts %}\n  <h2>{{ product.title }}</h2>\n  {{ product.summary|md }}\n  <a href=\"{{ product.url }}\">Learn more</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Template Inclusion Based on Language in Twig\nDESCRIPTION: This snippet demonstrates how to dynamically include a language-specific template based on the current language setting in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% include '_share/footer-' ~ craft.app.language ~ '.twig' %}\n```\n\n----------------------------------------\n\nTITLE: Mutating Table Field Data with GraphQL\nDESCRIPTION: Shows how to update Table field data using a GraphQL mutation, including the structure of the input data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/table-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry(\n  $title: String,\n  $slug: String,\n  $authorId: ID,\n  $tableRows: [myFieldHandle_TableRowInput],\n) {\n  save_cocktails_cocktails_Entry(\n    title: $title,\n    slug: $slug,\n    authorId: $authorId,\n    myFieldHandle: $tableRows\n  ) {\n    title\n    slug\n    authorId\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n    myFieldHandle {\n      whiskey\n      description\n      proof\n    }\n  }\n}\n\n# query variables:\n{\n  \"title\": \"Whiskies\",\n  \"slug\": \"whiskies\",\n  \"authorId\": 1,\n  \"tableRows\": [\n    {\n      \"col1\": \"High West Double Rye\",\n      \"col2\": \"Blend of straight and rye whiskeys.\",\n      \"col3\": 92\n    },\n    {\n      \"col1\": \"Blanton's Single Barrel\",\n      \"col2\": \"Has been called liquid gold.\",\n      \"col3\": 92\n    },\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional URI Format with Default Segment in Craft CMS\nDESCRIPTION: A Twig template that uses the null coalescing operator to provide a default segment for top-level entries while maintaining hierarchy for nested entries in a Structure section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{parent.uri ?? 'docs'}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Reference Tag Basic Syntax in Twig\nDESCRIPTION: Demonstrates the basic syntax structure of a CraftCMS reference tag with type, identifier, and optional property components.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/reference-tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{<Type>:<Identifier>(@<Site>):<Property>}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current Site Information in Twig\nDESCRIPTION: This Twig snippet demonstrates how to access and display various properties of the current site and its group, including ID, handle, name, language, primary status, base URL, and group name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# @var currentSite craft\\models\\Site #}\nSite ID:          {{ currentSite.id }}\nSite Handle:      {{ currentSite.handle }}\nSite Name:        {{ currentSite.name }}\nSite Language:    {{ currentSite.language }}\nIs Primary Site?: {{ currentSite.primary }}\nBase URL:         {{ currentSite.baseUrl }}\n\n{# @var siteGroup craft\\models\\SiteGroup #}\n{% set siteGroup = currentSite.group %}\nSite Group Name:  {{ siteGroup.name }}\n```\n\n----------------------------------------\n\nTITLE: Counting Elements with count() in PHP\nDESCRIPTION: This snippet shows how to use the count() method to get the number of elements matching the specified criteria in PHP. It counts the number of entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$count = Entry::find()\n    ->section('news')\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Creating Subscription Forms with Payment Source Handling in Twig\nDESCRIPTION: Template for creating subscription forms for each available plan. Handles payment source collection if none exists and posts to the commerce/subscriptions/subscribe endpoint. Includes CSRF protection and plan selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscription-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set plans = craft.commerce.getPlans().getAllPlans() %}\n\n{% for plan in plans %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ hiddenInput('action', 'commerce/subscriptions/subscribe') }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    <h4>{{ plan.name }}</h4>\n\n    {% set paymentSources = craft.commerce.\n        getPaymentSources().\n        getAllGatewayPaymentSourcesByUserId(\n            plan.getGateway().id,\n            currentUser.id ?? null\n        )\n    %}\n\n    {# If we don't have a saved payment soruce, collect details for the gateway #}\n    {% if not paymentSources|length %}\n      <div class=\"paymentForm\">\n        {{ plan.getGateway().getPaymentFormHtml({})|raw }}\n      </div>\n    {% endif %}\n\n    <button type=\"submit\">{{ \"Subscribe\"|t }}</button>\n  </form>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Deleting Payment Source in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed payment source deletion responses, including a success status and error message when applicable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\"\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Payment Gateway Type in PHP\nDESCRIPTION: Code demonstrating how to register a custom payment gateway type using the registerGatewayTypes event in a plugin or module's init() method. This connects the custom gateway implementation to the Craft Commerce payment system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/payment-gateway-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\Gateways;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gateways::class,\n    Gateways::EVENT_REGISTER_GATEWAY_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyGateway::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Manually Loading Global Sets in Twig and PHP\nDESCRIPTION: Shows how to manually load a global set in special situations where they aren't available by default, such as in email templates. Examples are provided for both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/globals.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set companyInfo = craft.app.globals().getSetByHandle('companyInfo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$companyInfo = \\Craft::$app->getGlobals()->getSetByHandle('companyInfo');\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Users Existence in Craft CMS\nDESCRIPTION: Shows how to check if any related users exist for a Users field without fetching them in Craft CMS. This is useful for conditional logic based on the presence of related users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related users!</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // There are related users!\n}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query for Entries Using Generic Query in Craft CMS 5\nDESCRIPTION: GraphQL query using the generic entries query with a section argument in Craft CMS 5.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_4\n\nLANGUAGE: gql\nCODE:\n```\nquery MyIngredients {\n  entries(section: \"ingredients\") {\n    ... on ingredient_Entry {\n      title\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Settings Page Redirection in Craft CMS Plugin\nDESCRIPTION: Demonstrates how to redirect the settings page request to a custom URL within the plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse(): mixed\n{\n    $url = \\craft\\helpers\\UrlHelper::cpUrl('my-plugin-handle/settings');\n\n    return \\Craft::$app->controller->redirect($url);\n}\n```\n\n----------------------------------------\n\nTITLE: Element Action with Custom Trigger Implementation in PHP\nDESCRIPTION: Example of an Element Action class that adds ingredients to selected elements with a custom toolbar trigger. Implements BaseElementAction with parameter handling and ingredient management functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/element-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_AddIngredientElementAction extends BaseElementAction\n{\n    public function getName()\n    {\n        return Craft::t('Add Ingredient');\n    }\n\n    public function getTriggerHtml()\n    {\n        // Render the trigger menu template with all the available ingredients\n        $ingredients = craft()->cocktailRecipes->getAllIngredients();\n\n        return craft()->templates->render(\n            'cocktailRecipes/_addIngredientsTrigger',\n            array(\n                'ingredients' => $ingredients\n            )\n        );\n    }\n\n    public function performAction(ElementCriteriaModel $criteria)\n    {\n        // Get the selected ingredient\n        $ingredientId = $this->getParams()->ingredient;\n        $ingredient = craft()->cocktailRecipes->getIngredientById($ingredientId);\n\n        // Make sure it's a valid one\n        if (!$ingredient) {\n            $this->setMessage(Craft::t('Selected ingredient could not be found.'));\n            return false;\n        }\n\n        // Add the ingredient to the selected elements\n        $elements = $criteria->find();\n\n        foreach ($elements as $element) {\n            craft()->cocktailRecipes->addIngredientToElement($element, $ingredient);\n        }\n\n        // Success!\n        $this->setMessage(Craft::t('Ingredient added successfully.'));\n        return true;\n    }\n\n    protected function defineParams()\n    {\n        return array(\n            'ingredient' => array(AttributeType::Number, 'required' => true),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: PSR-3 Message Logging in Craft CMS\nDESCRIPTION: Example demonstrating how to use PSR-3 message format for logging with context and message substitutions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse samdark\\log\\PsrMessage;\n\n// Traditional Yii2 Logging:\nCraft::error('Some error…', 'Some category (logged as context.category)');\n\n// PSR-3 Logging, with context and message substitutions:\nCraft::error(new PsrMessage(\n    'Some error, {psr3Replacement}',\n    [\n        'some' => 'context',\n        'to' => ['be', 'serialized'],\n        'psr3Replacement' => 'https://www.php-fig.org/psr/psr-3/'\n    ],\n));\n```\n\n----------------------------------------\n\nTITLE: Fetching Country by ISO Code in PHP\nDESCRIPTION: Shows how to retrieve a specific country by its two-character ISO code using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n$country = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getCountryByIso('AU');\n// $country->id\n// $country->name\n```\n\n----------------------------------------\n\nTITLE: Fetching All Tax Rates in Twig and PHP\nDESCRIPTION: Shows how to retrieve all tax rates using the TaxRates service in both Twig and PHP. This returns an array of TaxRate models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getAllTaxRates() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getAllTaxRates();\n```\n\n----------------------------------------\n\nTITLE: Using the 'integer' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'integer' test to check if a variable is an integer using PHP's is_int() method. Shows examples with an integer and a string representation of a number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is integer ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is integer ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Submitting New Address During Checkout\nDESCRIPTION: Form implementation for submitting new address data during checkout. Sets shippingAddressId to an empty string to ensure the form data is used instead of attempting to look up an existing address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  {{ redirectInput('commerce/cart') }}\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Updated Shipping Address.\">\n  <input type=\"hidden\" name=\"shippingAddressId\" value=\"\">\n  <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\">\n  <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\">\n  <select name=\"shippingAddress[countryId]\">\n    {% for id, name in craft.commerce.countriesList %}\n      <option value=\"{{ id }}\">{{ name }}</option>\n    {% endfor %}\n  </select>\n  <input type=\"hidden\" name=\"sameAddress\" value=\"1\">\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Customizing Guzzle for HTTP Requests in Craft CMS\nDESCRIPTION: Configuration example for customizing Guzzle HTTP client settings used by Craft for external requests like update checks and remote asset operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'headers' => ['Foo' => 'Bar'],\n    'query' => ['testing' => '123'],\n    'auth' => ['username', 'password'],\n    'proxy' => 'https://myproxy:1234',\n];\n```\n\n----------------------------------------\n\nTITLE: Action Request Handling in JavaScript\nDESCRIPTION: Comparison of action request handling between Craft 3 and Craft 4 using JavaScript.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\n// Craft 3\nCraft.postActionRequest('my-plugin/do-something', data, function(response, textStatus) {\n  if (textStatus === 'success') {\n    // ...\n  } else {\n    // Handle non-2xx responses ...\n  }\n});\n\n// Craft 4\nCraft.sendActionRequest('POST', 'my-plugin/do-something', {data})\n  .then((response) => {\n      // ...\n  })\n  .catch(({response}) => {\n      // Handle non-2xx responses ...\n  });\n```\n\n----------------------------------------\n\nTITLE: Configuring Codeception YAML Settings\nDESCRIPTION: Main Codeception configuration file that defines test paths, modules, and Craft-specific testing parameters\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nactor: Tester\npaths:\n  tests: tests\n  log: tests/_output\n  data: tests/_data\n  support: tests/_support\n  envs: tests/_envs\nbootstrap: _bootstrap.php\nparams:\n  - tests/.env\nmodules:\n  config:\n    \\craft\\test\\Craft:\n      configFile: \"tests/_craft/config/test.php\"\n      entryUrl: \"http://my-project.test/index.php\"\n      projectConfig: {}\n      migrations: []\n      plugins: []\n      cleanup: true\n      transaction: true\n      dbSetup: { clean: true, setupCraft: true }\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Searchable Attributes for Commerce Orders\nDESCRIPTION: This snippet demonstrates how to make custom attributes searchable for Commerce Order elements by using the EVENT_REGISTER_SEARCHABLE_ATTRIBUTES event. It adds 'myCustomAttribute' to the list of searchable attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\commerce\\elements\\Order;\nuse craft\\events\\RegisterElementSearchableAttributesEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Order::class,\n    Element::EVENT_REGISTER_SEARCHABLE_ATTRIBUTES,\n    function(RegisterElementSearchableAttributesEvent $event) {\n        $event->attributes[] = 'myCustomAttribute';\n        // ...\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Nested Entries by Original Type in Craft CMS (Twig)\nDESCRIPTION: This snippet demonstrates how to query nested entries using the original global entry type handle, even when the entry type has a local alias defined elsewhere. It selects all entries of type 'announcement' that exist within a 'pageContent' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set embeddedAnnouncements = craft.entries()\n  .field('pageContent')\n  .type('announcement')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using actionInput Function in Twig\nDESCRIPTION: Demonstrates how to output a hidden action input for routing POST requests to controller actions. Shows basic usage and setting additional attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user', {\n  id: 'action-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Checking Shipping Address Zip Code in Twig Condition Formula\nDESCRIPTION: This Twig expression verifies if an order has a shipping address and if its zip code starts with '70'. It can be used to offer discounts to customers shipping to specific areas.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/discounts.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\norder.shippingAddressId and order.shippingAddress.zipCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Accessing Products with Field Handle in Twig\nDESCRIPTION: Basic example of accessing products selected in a Commerce Products field by using the field handle, which returns an element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Information with plugin()\nDESCRIPTION: Shows how to retrieve a plugin instance by its handle and access its properties. This example gets the version of the Commerce plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{{ plugin('commerce').version }}\n```\n\n----------------------------------------\n\nTITLE: Translating Static Messages in Twig and PHP\nDESCRIPTION: Examples showing how to translate static text messages using the translate filter in Twig templates and Craft::t() in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# old #}\n<a href=\"/contact\">Contact us</a>\n\n{# new #}\n<a href=\"/contact\">{{ 'Contact us'|t }}</a>\n```\n\nLANGUAGE: php\nCODE:\n```\n// old\necho 'Contact us';\n\n// new\necho Craft::t('site', 'Contact us');\n```\n\n----------------------------------------\n\nTITLE: Accessing Loop Variables in Switch Statements in Craft CMS Twig\nDESCRIPTION: Shows how to access Twig's loop variable inside a switch statement by storing it in a separate variable before entering the switch block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% for matrixBlock in entry.matrixField.all() %}\n  {% set loopIndex = loop.index %}\n\n  {% switch matrixBlock.type %}\n\n    {% case \"text\" %}\n\n        Loop #{{ loopIndex }}\n\n  {% endswitch %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: User Permissions Registration Update\nDESCRIPTION: Demonstrates the changes in registering user permissions between Craft 3 and 4, showing the new array structure required.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\RegisterUserPermissionsEvent;\nuse craft\\services\\UserPermissions;\n\n// Craft 3\nEvent::on(\n    UserPermissions::class,\n    UserPermissions::EVENT_REGISTER_PERMISSIONS,\n    function(RegisterUserPermissionsEvent $event) {\n        $event->permissions['My Heading'] = $permissions;\n    }\n);\n\n// Craft 4\nEvent::on(\n    UserPermissions::class,\n    UserPermissions::EVENT_REGISTER_PERMISSIONS,\n    function(RegisterUserPermissionsEvent $event) {\n        $event->permissions[] = [\n            'heading' => 'My Heading',\n            'permissions' => $permissions,\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Relations in Craft CMS Active Record PHP\nDESCRIPTION: Shows how to define relationships between tables using the defineRelations() method in a Craft CMS Active Record class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    // ...\n\n    public function defineRelations()\n    {\n        return array(\n            'drinks' => array(\n                static::HAS_MANY,\n                'CocktailRecipes_DrinkRecord',\n                'ingredientId'\n            ),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to Variants Query in Twig\nDESCRIPTION: Shows how to add parameters to the element query returned by a Commerce Variants field, specifically filtering by product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.myFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Partial Template for Tips in Twig\nDESCRIPTION: Defines a reusable partial template for displaying tips with customizable content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  <p>{{ tipText }}</p>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Accessing Products Field Elements in Twig\nDESCRIPTION: Demonstrates how to access products selected in a Products field using the field handle, which returns an element query for the related products.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Defining Site Routes for Controller Actions in PHP\nDESCRIPTION: Example of defining a site route in routes.php that maps a front-end URL to a plugin controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'rate-widget' => 'my-plugin/widgets/submit-review',\n];\n```\n\n----------------------------------------\n\nTITLE: Retrieving Gateway Webhook URL in Craft Commerce CLI\nDESCRIPTION: This command outputs an environment-specific webhook URL for a specified gateway. It requires the gateway's handle as input, which can be obtained from the gateways/list command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/gateways/webhook-url\nWebhook URL for the Stripe gateway:\nhttps://commerce.ddev.site/index.php?p=actions/commerce/webhooks/process-webhook&gateway=2\n```\n\n----------------------------------------\n\nTITLE: Handling Payment Transactions\nDESCRIPTION: This event fires after a payment transaction is completed. It provides access to the transaction object for post-transaction processing or logging.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\TransactionEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_AFTER_PAYMENT_TRANSACTION, function(TransactionEvent $e) {\n    // Do something - perhaps check if that was a authorize transaction and make sure that warehouse team is on top of it\n});\n```\n\n----------------------------------------\n\nTITLE: Registering an Asset Bundle in a PHP controller\nDESCRIPTION: Example of registering a Craft CMS asset bundle from within a controller action before rendering a template, ensuring the bundle's resources are available to the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\FooBundle;\n\npublic function actionFoo()\n{\n    $this->view->registerAssetBundle(FooBundle::class);\n\n    return $this->renderTemplate('plugin-handle/foo');\n}\n```\n\n----------------------------------------\n\nTITLE: Complete Twig Template with Disqus Integration for Craft CMS\nDESCRIPTION: A complete Twig template example showing how to integrate Disqus comments into a Craft CMS entry page. It includes the entry title, body content, and the full Disqus comment setup with proper configuration variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/integrating-disqus.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% block blog %}\n  <h1 class=\"title\">{{ entry.title }}</h1>\n\n  {{ entry.body|raw }}\n\n  <div id=\"disqus_thread\"></div>\n  <script type=\"text/javascript\">\n    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\n    var disqus_shortname = 'disqus_forum_shortname'; // required: replace example with your forum shortname\n    var disqus_identifier = '{{ entry.section }}-{{ entry.id }}';\n\n    /* * * DON'T EDIT BELOW THIS LINE * * */\n    (function() {\n      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\n      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';\n\n      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n    })();\n  </script>\n\n  <noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  <a href=\"https://disqus.com/\" class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">Disqus</span></a>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Accessing User's Affiliated Site in Twig\nDESCRIPTION: This snippet shows how to check and display a user's affiliated site information. It verifies if the current user has an affiliated site and displays its name if available.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/users.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser.affiliatedSite %}\n  You registered via {{ currentUser.affiliatedSite.name }}.\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Basic Named Transform Application in Twig\nDESCRIPTION: Demonstrates how to apply a named transform to an asset using getUrl(), getWidth(), and getHeight() methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl('thumb') }}\"\n     width=\"{{ asset.getWidth('thumb') }}\"\n     height=\"{{ asset.getHeight('thumb') }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Payment Gateway using Twig Template\nDESCRIPTION: This Twig template is used to perform POST redirects to payment gateways. It contains a form that submits to the actionUrl variable and outputs all hidden inputs with the inputs variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n  <title>Redirecting...</title>\n</head>\n<body onload=\"document.forms[0].submit();\">\n<form action=\"{{ actionUrl|raw }}\" method=\"post\">\n  <p>Redirecting to payment page...</p>\n  <p>\n    {{ inputs|raw }}\n    <input type=\"submit\" value=\"Continue\" />\n  </p>\n</form>\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Disabling Maximum Invalid Logins in Craft CMS\nDESCRIPTION: Sets the number of invalid login attempts Craft will allow before locking the account. Setting it to false disables the maximum limit, which is not recommended for production.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_57\n\nLANGUAGE: php\nCODE:\n```\n'maxInvalidLogins' => false,\n```\n\n----------------------------------------\n\nTITLE: Accessing Country Information in Twig\nDESCRIPTION: Shows how to access and display country information from an address object, including localized country names and other country-specific data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set country = address.country %}\n\n{{ country.name }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set country = craft.app.getAddresses().getCountryRepository().get(address.countryCode) %}\n\n{{ country.name }}\n```\n\n----------------------------------------\n\nTITLE: Registering CSS in Twig Templates\nDESCRIPTION: The css tag is used to register CSS files or inline CSS code blocks in Craft CMS templates. It supports adding HTML attributes to the generated style tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a CSS file #}\n{% css \"/assets/css/style.css\" %}\n\n{# Register a CSS code block #}\n{% css %}\n  .content {\n    color: {{ entry.textColor }};\n  }\n{% endcss %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% css with {type: 'text/css'} %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Variant Snapshot Data After Capture\nDESCRIPTION: This event handler allows modification of a variant's captured snapshot data after it has been collected. It provides access to the variant and its field data for customization, extension, or redaction.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Variant;\nuse craft\\commerce\\events\\CustomizeVariantSnapshotDataEvent;\n\nEvent::on(Variant::class, Variant::EVENT_AFTER_CAPTURE_VARIANT_SNAPSHOT, function(CustomizeVariantSnapshotFieldsEvent $e) {\n    $variant = $e->variant;\n    $data = $e->fieldData;\n    // Modify or redact captured `$data`...\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating registerCachePaths Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the registerCachePaths plugin hook from Craft 2 to an event listener in Craft 3 for registering custom cache paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCacheOptionsEvent;\nuse craft\\utilities\\ClearCaches;\nuse yii\\base\\Event;\n\nEvent::on(\n    ClearCaches::class,\n    ClearCaches::EVENT_REGISTER_CACHE_OPTIONS,\n    function(RegisterCacheOptionsEvent $event) {\n        $event->options[] = [\n            'key' => 'drink-images',\n            'label' => \\Craft::t('plugin-handle', 'Drink images'),\n            'action' => \\Craft::$app->path->getStoragePath().'/drinks'\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions for Current User\nDESCRIPTION: Shows how to programmatically check if the currently logged-in user has a specific permission using the checkPermission() method of the user service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// See if they have the `stayUpLate` permission\nif (Craft::$app->user->checkPermission('stayUpLate')) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Checking if Related Assets Exist in PHP\nDESCRIPTION: A PHP example showing how to check if an element has any related assets without actually fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // do something with related assets\n}\n```\n\n----------------------------------------\n\nTITLE: Deleting Customer Addresses in Craft Commerce\nDESCRIPTION: Form template for deleting customer addresses. Uses the commerce/customerAddresses/delete action endpoint and requires the address ID to be passed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-address-management.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/customerAddresses/delete\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/customer/addresses\">\n  <input type=\"hidden\" name=\"id\" value=\"{{ address.id }}\"/>\n  <input type=\"submit\" value=\"delete\"/>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying Sales with Twig in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to retrieve all sales in the system using craft.commerce.sales.allSales and iterate through them to display their names and descriptions. Each sale is returned as a Sale model object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/sales.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for sale in craft.commerce.sales.allSales %}\n  {{ sale.name }} - {{ sale.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Updating Custom Fields for Addresses in Twig for Commerce 4\nDESCRIPTION: This snippet shows how to update custom fields for addresses when migrating from Commerce 3 to Commerce 4. It demonstrates the change in input field names and how to handle custom fields as element fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{{ input('text', 'shippingAddress[address1]', address.address1 ?? '') }}\n{{ input('text', 'shippingAddress[custom1]', address.custom1 ?? '') }}\n\n{# Commerce 4 #}\n{{ input('text', 'shippingAddress[addressLine1]', address.addressLine1 ?? '') }}\n{{ input('text', 'shippingAddress[fields][custom1]', address.custom1 ?? '') }}\n{{ input('text', 'shippingAddress[fields][specialDeliveryNotes]', address.custom1 ?? '') }}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Transaction Capture\nDESCRIPTION: This event fires before a payment transaction is captured. It allows for validation or preprocessing before the payment capture is executed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\TransactionEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_BEFORE_CAPTURE_TRANSACTION, function(TransactionEvent $e) {\n    // Do something - maybe check if the shipment is really ready before capturing\n});\n```\n\n----------------------------------------\n\nTITLE: Counting Products in Multiple Languages\nDESCRIPTION: Demonstrates how to count enabled products using Twig, PHP, and GraphQL, which is more performant than fetching all product data when only the count is needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-variants.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Count all enabled products #}\n{% set myProductCount = craft.products()\n  .status('enabled')\n  .count() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Product;\n\n// Count all enabled products\n$myProductCount = Product::find()\n    ->status(Product::STATUS_ENABLED)\n    ->count();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Count all enabled products\n{\n  productCount(status: \"enabled\")\n}\n```\n\n----------------------------------------\n\nTITLE: Checking UUID-based Permissions in Twig\nDESCRIPTION: Shows two methods for checking UUID-based permissions in Twig: one using a hardcoded UUID and another dynamically looking up the UUID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Store the UUID directly in the template: #}\n{% if currentUser.can('createEntries:4fcb3c63-9477-4b5f-8021-874d64f819ce') %}\n  <a href=\"{{ siteUrl('account/vendors/add') }}\">Add a Vendor</a>\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{# Look up the section by its handle: #}\n{% set vendorsSection = craft.app.entries.getSectionByHandle('vendors') %}\n\n{# Build the permission handle: #}\n{% if currentUser.can(\"createEntries:#{vendorsSection.uid}\") %}\n  <a href=\"{{ siteUrl('account/vendors/add') }}\">Add a Vendor</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Requiring User Permissions in Twig\nDESCRIPTION: This snippet shows how to require a specific permission for a user to access an entire template in Twig. It uses the 'requirePermission' tag to check for the 'accessCp' permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/user-management.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'accessCp' %}\n```\n\n----------------------------------------\n\nTITLE: Validating Line Item Discount Matching\nDESCRIPTION: This event fires before a discount is matched to a line item, allowing for custom validation logic. Setting isValid to false prevents the discount from being applied.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\MatchLineItemEvent;\nuse craft\\commerce\\services\\Discounts;\nuse yii\\base\\Event;\n\nEvent::on(Discounts::class, Discounts::EVENT_BEFORE_MATCH_LINE_ITEM, function(MatchLineItemEvent $e) {\n     // Maybe check some business rules and prevent a match from happening in some cases.\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Checkbox Field Form in Craft CMS\nDESCRIPTION: Template for creating a form with a Checkboxes field including all options and maintaining selected values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{# Include a hidden input first so Craft knows to update the\n   existing value, if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n<ul>\n  {% for option in field.options %}\n    {% set checked = entry is defined\n      ? entry.myFieldHandle.contains(option.value)\n      : option.default %}\n\n    <li><label>\n      <input type=\"checkbox\"\n        name=\"fields[myFieldHandle][]\"\n        value=\"{{ option.value }}\"\n        {% if checked %}checked{% endif %}>\n      {{ option.label }}\n    </label></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Namespacing HTML Attributes with namespaceAttributes in Twig\nDESCRIPTION: Shows how to namespace HTML attributes and CSS selectors without modifying input names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set html %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endset %}\n{{ html|namespaceAttributes('foo') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ html|namespaceAttributes('foo', withClasses=true) }}\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions in Twig\nDESCRIPTION: This snippet demonstrates how to check if the currently logged-in user has a specific permission in a Twig template. It uses the 'can' method on the currentUser object to check for the 'accessCp' permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/user-management.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser.can('accessCp') %}\n  <a href=\"{{ cpUrl() }}\">Visit the Control Panel</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Generating HTML Attributes in Twig\nDESCRIPTION: Shows how to use the attr() function to generate a list of HTML attributes from a Twig hash. Includes an example with various attribute types and nested data structures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAttributes = {\n  class: ['one', 'two'],\n  disabled: true,\n  readonly: false,\n  data: {\n    baz: 'Escape this \"',\n    qux: {\n      some: ['data', '\"quoted\"']\n    }\n  },\n  style: {\n    'background-color': 'red',\n    'font-size': '20px'\n  },\n} %}\n\n<div {{ attr(myAttributes) }}></div>\n```\n\nLANGUAGE: twig\nCODE:\n```\n<div {{ attr({ title: 'Greetings & Salutations' }) }}></div>\n{# Output: <div title=\"Greetings &amp; Salutations\"> #}\n```\n\n----------------------------------------\n\nTITLE: Displaying Recent Clothing Products with Twig\nDESCRIPTION: Shows how to create a product query, set parameters, fetch products, and display them in a Twig template. This example retrieves the 10 most recent Clothing products.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/product-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a product query with the 'type' and 'limit' parameters #}\n{% set myProductQuery = craft.products()\n  .type('clothing')\n  .limit(10) %}\n\n{# Fetch the products #}\n{% set products = myProductQuery.all() %}\n\n{# Display the products #}\n{% for product in products %}\n  <h1><a href=\"{{ product.url }}\">{{ product.title }}</a></h1>\n  {{ product.summary }}\n  <a href=\"{{ product.url }}\">Learn more</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: General Configuration Example Using Fluent Syntax in PHP\nDESCRIPTION: Example configuration file for Craft CMS general settings using the fluent configuration syntax. This demonstrates setting basic configuration options like default week start day, URL formatting, content preloading, and security settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/general.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\nuse craft\\helpers\\App;\n\nreturn GeneralConfig::create()\n    ->defaultWeekStartDay(1)\n    ->omitScriptNameInUrls()\n    ->preloadSingles()\n    ->preventUserEnumeration()\n    ->aliases([\n        '@webroot' => dirname(__DIR__) . '/web',\n    ])\n;\n```\n\n----------------------------------------\n\nTITLE: Fetching Countries by Shipping Zone ID in Twig\nDESCRIPTION: Demonstrates how to retrieve countries within a specific shipping zone and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries\n  .countriesByShippingZoneId(shippingZoneId) %}\n<select name=\"country\">\n{% for country in countries %}\n  <option value=\"{{ country.id }}\">\n    {{- country.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Implementing settingsHtml() in Craft CMS Plugin Class\nDESCRIPTION: Adds a settingsHtml() method to the main plugin class, rendering the settings template and returning the HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nuse craft\\base\\Model;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public bool $hasCpSettings = true;\n\n    protected function createSettingsModel(): ?Model\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    protected function settingsHtml(): ?string\n    {\n        return \\Craft::$app->getView()->renderTemplate(\n            'my-plugin-handle/settings',\n            ['settings' => $this->getSettings()]\n        );\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using assertTestFailed for Testing Support Resources in Craft CMS\nDESCRIPTION: This assertion is used to test failure scenarios, particularly useful for providing support resources. It takes a callback where a test should fail and an optional failure message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nassertTestFailed(\n  callable $callback,\n  string $message = ''\n)\n```\n\n----------------------------------------\n\nTITLE: Adding a Job to the Craft CMS Queue in PHP\nDESCRIPTION: This snippet demonstrates how to add a custom job to the Craft CMS queue using the Queue::push() method. It also shows how to specify priority for the job.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/queue-jobs.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\queue\\jobs\\MyJob;\n\n\\craft\\helpers\\Queue::push(new MyJob());\n\n// With priority\n\\craft\\helpers\\Queue::push(new MyJob(), 10);\n```\n\n----------------------------------------\n\nTITLE: Processing Component Dependencies in Craft CMS Project Config\nDESCRIPTION: Demonstrates how to ensure dependent components' changes are applied first by calling ProjectConfig::processConfigChanges() within a handler.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getProjectConfig()->processConfigChanges('productTypeGroups');\n```\n\n----------------------------------------\n\nTITLE: Using create Function with Class Name in Twig\nDESCRIPTION: The create function instantiates a new object based on a class name or object configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set cookie = create('yii\\\\web\\\\Cookie') %}\n```\n\n----------------------------------------\n\nTITLE: Using Global Variables in Dynamic Entry Titles in Craft CMS\nDESCRIPTION: Examples of accessing Craft's global variables like 'now' and 'currentUser' within dynamic title format templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/sections-and-entries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|date('Y-m-d') }}\n{{ currentUser.username }}\n```\n\n----------------------------------------\n\nTITLE: SVG Output Function in Twig\nDESCRIPTION: Demonstrates different ways to output SVG content using the svg() function, including file paths, asset objects, and raw markup. Includes options for sanitization and namespacing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = entry.myAssetsField.one() %}\n{% if image and image.extension == 'svg' %}\n    {{ svg(image) }}\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = include('_includes/icons/lemon.svg') %}\n{{ svg(image) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg(image, sanitize=false, namespace=false) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg')|attr({ class: 'lemon-icon' }) }}\n```\n\n----------------------------------------\n\nTITLE: Creating a Form Page in Craft CMS Control Panel\nDESCRIPTION: This snippet shows how to set up a form page in the Craft CMS control panel by setting the 'fullPageForm' variable to true and adding a form action input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set fullPageForm = true %}\n\n{% block content %}\n  {{ actionInput('plugin-handle/controller/action') }}\n  <!-- ... -->\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Using POS_LOAD with view.registerJs in Twig\nDESCRIPTION: Shows how to register JavaScript code to be executed when the page loads, using the POS_LOAD constant which wraps the code in a jQuery load handler.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Page has finished loading.');\n{% endset %}\n\n{% do view.registerJs(js, POS_LOAD) %}\n```\n\nLANGUAGE: js\nCODE:\n```\njQuery(window).on('load', function () {\n  console.log('Page has finished loading.');\n});\n```\n\n----------------------------------------\n\nTITLE: Redirecting Users with the redirect Tag in Craft CMS\nDESCRIPTION: Shows how to use the redirect tag to conditionally redirect users to a different URL. This example redirects non-members to a pricing page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if not user or not user.isInGroup('members') %}\n  {% redirect \"pricing\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Search Query Implementation\nDESCRIPTION: Shows how to implement search using a query parameter from the request in Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the user's search query from the 'q' query string param #}\n{% set searchQuery = craft.app.request.getQueryParam('q') %}\n\n{# Fetch entries that match the search query #}\n{% set results = craft.entries()\n  .search(searchQuery)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get the user's search query from the 'q' query string param\n$searchQuery = Craft::$app->getRequest()->getParam('q');\n\n// Fetch entries that match the search query\n$results = \\craft\\elements\\Entry::find()\n    ->search($searchQuery)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating Dynamic Subfolder Paths with Twig in Assets Fields\nDESCRIPTION: Example of using Twig to handle empty category slugs in dynamic subfolder paths by using the :ignore: placeholder to prevent path validation errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ categoriesFieldHandle.one().slug ?? ':ignore:' }}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin via Composer in Craft CMS\nDESCRIPTION: This snippet demonstrates how to install a Craft CMS plugin using Composer. It includes two steps: requiring the plugin package and installing it using Craft's CLI.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/commerce -w\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Translating Static Messages in Twig Templates\nDESCRIPTION: Demonstrates how to translate static text content in Twig templates using the translate filter. Shows before and after examples of implementing translations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# old #}\n<a href=\"/contact\">Contact us</a>\n\n{# new #}\n<a href=\"/contact\">{{ 'Contact us'|t }}</a>\n```\n\n----------------------------------------\n\nTITLE: Including Header CSS with getHeadHtml()\nDESCRIPTION: Shows how to output queued CSS and high-resolution CSS in the document head using getHeadHtml().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<head>\n  <title>{{ siteName }}</title>\n  {{ getHeadHtml() }}\n</head>\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States Grouped by Country ID in Twig\nDESCRIPTION: Demonstrates how to retrieve all enabled states grouped by country ID and create a select dropdown with optgroups in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set statesByCountryId = craft.commerce.states\n  .allEnabledStatesAsListGroupedByCountryId %}\n<select>\n{% for countryId, states in statesByCountryId %}\n  {% set country = craft.commerce.countries.getCountryById(countryId) %}\n  <optgroup label=\"{{ country.name }}\">\n    {% for stateId, stateName in states %}\n      <option value=\"{{ stateId }}\">{{ stateName }}</option>\n    {% endfor %}\n  </optgroup>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Element Index Page Template\nDESCRIPTION: Template code for creating an element index page in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/elementindex.html' %}\n{% set title = 'Products' %}\n{% set elementType = 'ns\\\\prefix\\\\elements\\\\Product' %}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Checked Options in Twig and PHP\nDESCRIPTION: Code showing how to iterate through all selected checkbox options and access their label and value properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle %}\n  Label: {{ option.label }}\n  Value: {{ option }} or {{ option.value }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $option) {\n    // label: $option->label\n    // value: $option or $option->value\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Tax Zone by ID in Craft Commerce (Twig and PHP)\nDESCRIPTION: Demonstrates how to retrieve a specific tax zone by its ID using both Twig and PHP in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{# Get tax zone with an ID of `123` #}\n{% set zone = craft.commerce\n  .getTaxZones()\n  .getTaxZoneById(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get tax zone with an ID of `123`\n$taxZones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getTaxZoneById(123);\n```\n\n----------------------------------------\n\nTITLE: Redirecting to Posted URL in Craft CMS Controller Action\nDESCRIPTION: This snippet demonstrates how to redirect to a posted URL in a Craft CMS controller action. It uses the redirectToPostedUrl method to handle the redirection based on a 'redirect' parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/controllers.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    // Redirect the request based on a 'redirect' param\n    return $this->redirectToPostedUrl();\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing PHP Constants in Twig\nDESCRIPTION: Demonstrates how to access various types of PHP constants in Twig templates using the constant() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# You can fetch native PHP constants... #}\n{{ constant('PHP_VERSION') }}\n\n{# ...constants defined by Craft... #}\n{{ constant('CRAFT_BASE_PATH') }}\n\n{# ...and even class constants: #}\n{{ constant('craft\\\\elements\\\\Entry::STATUS_LIVE') }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Zone Properties in Twig\nDESCRIPTION: Shows how to iterate over tax zones and access their properties in a Twig template. This includes accessing basic details like ID, name, description, and other attributes of the TaxAddressZone model.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% for zones as taxZone %}\n  {# @var taxZone craft\\commerce\\models\\TaxAddressZone #}\n  {{ taxZone.id }}\n  {{ taxZone.name }}\n  {{ taxZone.description }}\n  {{ taxZone.dateCreated }}\n  {{ taxZone.dateUpdated }}\n  {{ taxZone.default }}\n  {{ taxZone.getCondition() }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Migrating addRichTextLinkOptions Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the addRichTextLinkOptions plugin hook from Craft 2 to an event listener in Craft 3 for adding custom link options to Rich Text fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterRichTextLinkOptionsEvent;\nuse craft\\fields\\RichText;\nuse yii\\base\\Event;\n\nEvent::on(\n    RichText::class,\n    RichText::EVENT_REGISTER_LINK_OPTIONS,\n    function(RegisterRichTextLinkOptionsEvent $event) {\n        $event->linkOptions[] = [\n            'optionTitle' => \\Craft::t('plugin-handle', 'Link to a product'),\n            'elementType' => Product::class,\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Registering CSS in Twig Templates\nDESCRIPTION: Demonstrates how to use the css tag to register both external CSS files and inline CSS code blocks in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a CSS file #}\n{% css \"/assets/css/style.css\" %}\n\n{# Register a CSS code block #}\n{% css %}\n  .content {\n    color: {{ entry.textColor }};\n  }\n{% endcss %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Static Basic HTTP Authentication\nDESCRIPTION: Implementation of HTTP authentication using static credentials. Shows configuration of username and password for site-wide authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\filters\\BasicHttpAuthStatic;\n\nreturn [\n    'as basicStaticWithConfig' => [\n        'class' => BasicHttpAuthStatic::class,\n        'username' => 'foo',\n        'password' => 'secret',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Login Form Flashes in Twig\nDESCRIPTION: This Twig snippet shows how to display flash messages from the login action, which can help users understand the state of their session or specific issues with submitted information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set flashes = craft.app.session.getAllFlashes(true) %}\n\n{% if flashes is not empty %}\n  <ul>\n    {% for flash in flashes %}\n      <li>{{ flash }}</li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Field Layout in Element Class\nDESCRIPTION: Implementation of the getFieldLayout() method that retrieves the field layout for the element type based on its class name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\npublic function getFieldLayout()\n{\n    return \\Craft::$app->getFields()->getLayoutByType(self::class);\n}\n```\n\n----------------------------------------\n\nTITLE: Populating Multiple Craft CMS Models from Data Arrays\nDESCRIPTION: Demonstrates how to use the populateModels() static method to create multiple model instances from an array of data arrays. This is useful for batch creation of models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\n$ingredients = CocktailRecipes_IngredientModel::populateModels($data);\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom Address Formatter in PHP\nDESCRIPTION: Defines a custom OptionalCountryFormatter class that extends the DefaultFormatter to add a hide_countries option for omitting specific country names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nuse CommerceGuys\\Addressing\\AddressInterface;\nuse CommerceGuys\\Addressing\\Formatter\\DefaultFormatter;\nuse CommerceGuys\\Addressing\\Locale;\nuse craft\\helpers\\Html;\n\nclass OptionalCountryFormatter extends DefaultFormatter\n{\n    protected $defaultOptions = [\n        'locale' => 'en',\n        'html' => true,\n        'html_tag' => 'p',\n        'html_attributes' => ['translate' => 'no'],\n        'hide_countries' => [],\n    ];\n\n    public function format(AddressInterface $address, array $options = []): string\n    {\n        $this->validateOptions($options);\n        $options = array_replace($this->defaultOptions, $options);\n        $countryCode = $address->getCountryCode();\n        $addressFormat = $this->addressFormatRepository->get($countryCode);\n\n        if (!in_array($countryCode, $options['hide_countries'])) {\n            if (Locale::matchCandidates($addressFormat->getLocale(), $address->getLocale())) {\n                $formatString = '%country' . \"\\n\" . $addressFormat->getLocalFormat();\n            } else {\n                $formatString = $addressFormat->getFormat() . \"\\n\" . '%country';\n            }\n        } else {\n            $formatString = $addressFormat->getFormat();\n        }\n\n        $view = $this->buildView($address, $addressFormat, $options);\n        $view = $this->renderView($view);\n        $replacements = [];\n\n        foreach ($view as $key => $element) {\n            $replacements['%' . $key] = $element;\n        }\n\n        $output = strtr($formatString, $replacements);\n        $output = $this->cleanupOutput($output);\n\n        if (!empty($options['html'])) {\n            $output = nl2br($output, false);\n            $output = Html::tag($options['html_tag'], $output, $options['html_attributes']);\n        }\n\n        return $output;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating CSRF Input with csrfInput() Function\nDESCRIPTION: The csrfInput() function returns a hidden CSRF Token input that must be included in forms that submit via POST when CSRF Protection is enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput() }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Zone Properties in Craft Commerce (Twig)\nDESCRIPTION: Shows how to iterate over tax zones and access their properties such as ID, name, description, and conditions in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% for zones as taxZone %}\n  {# @var taxZone craft\\commerce\\models\\TaxAddressZone #}\n  {{ taxZone.id }}\n  {{ taxZone.name }}\n  {{ taxZone.description }}\n  {{ taxZone.dateCreated }}\n  {{ taxZone.dateUpdated }}\n  {{ taxZone.default }}\n  {{ taxZone.getCondition() }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying Tag Count in Craft CMS GraphQL API\nDESCRIPTION: The tagCount query is used to return the number of tags based on specified criteria. It accepts various arguments for filtering and narrowing the results, such as ID, status, site, and related elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_19\n\nLANGUAGE: graphql\nCODE:\n```\ntagCount(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  archived: Boolean\n  trashed: Boolean\n  site: [String]\n  siteId: [QueryArgument]\n  unique: Boolean\n  preferSites: [QueryArgument]\n  enabledForSite: Boolean\n  title: [String]\n  slug: [String]\n  uri: [String]\n  search: String\n  relatedTo: [QueryArgument]\n  relatedToAssets: [AssetCriteriaInput]\n  relatedToEntries: [EntryCriteriaInput]\n  relatedToUsers: [UserCriteriaInput]\n  relatedToCategories: [CategoryCriteriaInput]\n  relatedToTags: [TagCriteriaInput]\n  relatedToAll: [QueryArgument]\n  ref: [String]\n  fixedOrder: Boolean\n  inReverse: Boolean\n  dateCreated: [String]\n  dateUpdated: [String]\n  offset: Int\n  limit: Int\n  orderBy: String\n  siteSettingsId: [QueryArgument]\n  group: [String]\n  groupId: [QueryArgument]\n): Int\n```\n\n----------------------------------------\n\nTITLE: Generating Sequential Numbers in Craft CMS Templates\nDESCRIPTION: Outputs and increments a number in a named sequence. Useful for hit counters, order numbers, or other sequential identifiers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n<p>This entry has been read {{ seq('hits:' ~ entry.id) }} times.</p>\n```\n\n----------------------------------------\n\nTITLE: Static Message Translation in Twig\nDESCRIPTION: This snippet shows how to use Craft's static translation support for strings in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"Welcome!\"|t }}\n```\n\n----------------------------------------\n\nTITLE: Supervisor Configuration for Queue Worker\nDESCRIPTION: Configuration file for setting up multiple Craft queue workers using Supervisor. Includes process naming, number of processes, and user permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_4\n\nLANGUAGE: supervisor\nCODE:\n```\n; /etc/supervisor/conf.d/craft-queue-worker.conf\n\n[program:craft-queue-worker]\n; Use the process number in its name (required when using `numprocs`):\nprocess_name=%(program_name)s_%(process_num)02d\nnumprocs=4\ncommand=/usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\n; User + Group should agree with HTTP processes:\nuser=www-data\ngroup=www-data\n```\n\n----------------------------------------\n\nTITLE: Enabling Always Refresh Behavior for Field Layout Elements in PHP\nDESCRIPTION: Controls whether a field layout element should refresh after every auto-save. By default, elements only refresh when initially loaded or when visibility changes due to conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nprotected function alwaysRefresh(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing Translation Category Programmatically in PHP\nDESCRIPTION: Shows how to programmatically add a new translation category by configuring a PhpMessageSource in the init() method. Sets up source language, base path for translations, and allows overrides.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/translation-categories.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\i18n\\PhpMessageSource;\n\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->i18n->translations['my-category'] = [\n        'class' => PhpMessageSource::class,\n        'sourceLanguage' => 'en',\n        'basePath' => __DIR__ . '/translations',\n        'allowOverrides' => true,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Rate Properties in Twig\nDESCRIPTION: Demonstrates how to iterate over tax rates and access their properties in a Twig template. This includes basic details like ID, name, code, rate, and related tax zones and categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% for rates as taxRate %}\n  {# @var taxRate craft\\commerce\\models\\TaxRate #}\n  {{ taxRate.id }}\n  {{ taxRate.name }}\n  {{ taxRate.code }}\n  {{ taxRate.rate }}\n  {{ taxRate.taxable }}\n  {{ taxRate.getRateAsPercent() }}\n  {{ taxRate.getTaxZone() }}\n  {{ taxRate.getTaxCategory() }}\n  {{ taxRate.getIsEverywhere() }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Asset Transform with setTransform Method\nDESCRIPTION: Shows how to apply a transform directly to an asset using setTransform() for automatic property manipulation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform('thumb') %}\n<img src=\"{{ asset.url }}\"\n     width=\"{{ asset.width }}\"\n     height=\"{{ asset.height }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Translating Static Strings in Twig Templates\nDESCRIPTION: Shows how to use Craft's static translation feature to translate strings in Twig templates with the |t filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/localization-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"Welcome!\"|t }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Environment Variables with getenv() Function\nDESCRIPTION: The getenv() function returns the value of an environment variable using craft\\helpers\\App::env().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{{ getenv('MAPS_API_KEY') }}\n```\n\n----------------------------------------\n\nTITLE: Specifying Column Types in Craft CMS DbCommand PHP\nDESCRIPTION: Demonstrates how Craft's DbCommand allows specifying column types using an array syntax, providing a more structured approach compared to Yii's CDbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n// with Yii's CDbCommand:\n->alterColumn('assetfiles', 'sourceId', 'INT(11) NULL')\n\n// with Craft's DbCommand:\n->alterColumn('assetfiles', 'sourceId', array(\n    'column' => ColumnType::Int,\n    'null' => true\n))\n```\n\n----------------------------------------\n\nTITLE: Copying Commerce Example Templates to Project (Bash)\nDESCRIPTION: This command copies all Commerce example templates from the vendor directory to the project's templates folder. It's useful for getting started with a new Commerce project or referencing the latest examples.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/example-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncp -r vendor/craftcms/commerce/example-templates/dist/* ./templates\n```\n\n----------------------------------------\n\nTITLE: Accessing Element Property in Twig\nDESCRIPTION: Example demonstrating how a getter method can be accessed as a property by removing the 'get' prefix and down-casing the first letter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/elements.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.getLink() }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.link }}\n```\n\n----------------------------------------\n\nTITLE: Conditional User Name Output in Email Template\nDESCRIPTION: Twig template snippet showing how to conditionally include user's full name with proper fallback handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/mail.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\nHello{{ user.fullName is not empty ? \", #{user.fullName}\" : null }}!\n```\n\n----------------------------------------\n\nTITLE: Displaying User Subscriptions with Twig\nDESCRIPTION: Complete example demonstrating how to fetch and display subscriptions for the current user, including login requirement, query creation, and HTML output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/subscriptions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Make sure someone is logged in #}\n{% requireLogin %}\n\n{# Create a subscription query with the 'user' parameter #}\n{% set mySubscriptionQuery = craft.subscriptions()\n  .user(currentUser) %}\n\n{# Fetch the subscriptions #}\n{% set subscriptions = mySubscriptionQuery.all() %}\n\n{# Display the subscriptions #}\n{% for subscription in subscriptions %}\n  <article>\n    <h1><a href=\"{{ subscription.url }}\">{{ subscription.title }}</a></h1>\n    {{ subscription.summary }}\n    <a href=\"{{ subscription.url }}\">Learn more</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Outputting Entry Title in Twig\nDESCRIPTION: Basic example showing how to output an EntryModel's title in a Twig template. When an EntryModel is output without specifying a property, it defaults to the entry's title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ entry }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Saving Lightswitch Fields in Craft CMS Entry Forms\nDESCRIPTION: Provides a template for including a Lightswitch field in an element form, such as an entry form. The code includes a hidden input and a checkbox input for proper form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/lightswitch-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{{ tag('input', {\n  type: 'checkbox',\n  name: 'fields[myFieldHandle]',\n  value: '1',\n  checked: (entry.myFieldHandle ?? false) ? true : false,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Using Data URL for Images in Twig Template for PDF Generation\nDESCRIPTION: This snippet shows how to use a data URL for including images in a PDF template when the 'pdfAllowRemoteImages' setting is set to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/pdfs.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<img width=\"75\" height=\"75\" src=\"{{ dataUrl('@webroot/images/store-logo.svg') }}\" alt=\"Store logo\"/>\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Elements with Additional Query Parameters in Twig\nDESCRIPTION: This snippet shows how to narrow down related elements using additional parameters on the element query. It filters ingredients by their 'foodGroup' field to display only vegetables from the recipe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Narrow the query to only \"Vegetables\": %}\n{% set veggies = entry.ingredients.foodGroup('vegetable').all() %}\n\n<h3>Vegetables</h3>\n\n{% if veggies|length %}\n  <ul>\n    {% for veggie in veggies %}\n      <li>{{ veggie.title }}</li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>This recipe has no vegetables!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Selected Variants in Twig\nDESCRIPTION: Shows how to check if a Commerce Variants field has any selected product variants using the length filter in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Requiring Admin without Checking allowAdminChanges\nDESCRIPTION: Shows how to require admin privileges without checking the allowAdminChanges configuration setting, useful for displaying read-only settings screens.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% requireAdmin false %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Page Trigger for Craft CMS (PHP)\nDESCRIPTION: Sets the pageTrigger config option to 'page/', which defines the string Craft will look for when determining if the current request is for a particular page in a paginated list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_34\n\nLANGUAGE: php\nCODE:\n```\n'pageTrigger' => 'page/',\n```\n\n----------------------------------------\n\nTITLE: Installing Nitro via Shell Script (macOS/Linux)\nDESCRIPTION: This command downloads and executes the Nitro installer script for macOS and Linux systems. It requires curl to be installed on the system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nbash <(curl -sLS http://installer.getnitro.sh)\n```\n\n----------------------------------------\n\nTITLE: Markdown Processing Filter\nDESCRIPTION: Shows how to process Markdown content using the markdown/md filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n# Everything You Need to Know About Computer Keyboards\n\nThe only *real* computer keyboard ever made was famously\nthe [Apple Extended Keyboard II] [1].\n\n\t[1]: https://www.flickr.com/photos/gruber/sets/72157604797968156/\n{% endset %}\n\n{{ content|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Creating Category Query in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new category query in both Twig and PHP. This is the starting point for fetching categories programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new category query #}\n{% set myCategoryQuery = craft.categories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new category query\n$myCategoryQuery = \\craft\\elements\\Category::find();\n```\n\n----------------------------------------\n\nTITLE: Configuring Queue Component in Craft CMS\nDESCRIPTION: Examples of configuring the queue component including Redis driver setup and job timeout settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'queue' => [\n            'proxyQueue' => [\n                'class' => yii\\queue\\redis\\Queue::class,\n                'redis' => [\n                    'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                    'port' => 6379,\n                    'password' => App::env('REDIS_PASSWORD') ?: null,\n                ],\n            ],\n            'channel' => 'queue', // Queue channel key\n        ],\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n\nreturn [\n    'components' => [\n        'queue' => [\n            // Allow individual jobs to run for 15 minutes:\n            'ttr' => 900,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Email Field Value in Twig Template\nDESCRIPTION: Example of how to render an email field value in a Craft CMS template. The code checks if an email exists for a user and creates a mailto link if present. The snippet demonstrates proper email field value access and conditional rendering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/email-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.email %}\n  <h3>Email</h3>\n  <a href=\"mailto:{{ user.email }}\">{{ user.email }}</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Custom GraphQL Directive in PHP for Craft CMS\nDESCRIPTION: Example of a custom GraphQL directive class for Craft CMS. This directive replaces occurrences of 'foo' with 'bar' in the field value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\directives;\n\nuse craft\\gql\\base\\Directive;\nuse craft\\gql\\GqlEntityRegistry;\nuse GraphQL\\Language\\DirectiveLocation;\nuse GraphQL\\Type\\Definition\\Directive as GqlDirective;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\n\nclass BarTheFoo extends Directive\n{\n\n    public static function create(): GqlDirective\n    {\n        if ($type = GqlEntityRegistry::getEntity(self::name())) {\n            return $type;\n        }\n\n        $type = GqlEntityRegistry::createEntity(static::name(), new self([\n            'name' => static::name(),\n            'locations' => [\n                DirectiveLocation::FIELD,\n            ],\n            'description' => 'Replace `foo` with `bar`.',\n            'args' => [],\n        ]));\n\n        return $type;\n    }\n\n    public static function name(): string\n    {\n        return 'fooTheBar';\n    }\n\n    public static function apply($source, $value, array $arguments, ResolveInfo $resolveInfo)\n    {\n        return str_replace('foo', 'bar', (string)$value);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using length Filter for Element Counting in Twig\nDESCRIPTION: Example of using the length filter to check if an assets field has any images before rendering a gallery, which optimizes database queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myAssetsField|length %}\n  <h3>Image Gallery</h3>\n  <ul>\n    {% for image in entry.myAssetsField %}\n      <img src=\"{{ image.getUrl('thumb') }}\">\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Mutation for Saving Entries with Matrix Field in Craft CMS 5\nDESCRIPTION: GraphQL mutation to save an entry with a Matrix field containing nested entries in Craft CMS 5, demonstrating the new 'entries' key usage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_7\n\nLANGUAGE: gql\nCODE:\n```\nmutation AddStep {\n  save_recipes_recipe_Entry(\n    title: \"Yummy Bits and Bytes\"\n    summary: \"Chocolate chip cookies that are out of this world!\"\n    steps: {\n      entries: [\n        {\n          step: {\n            difficulty: \"hard\",\n            instructions: \"Preheat oven to 20,000,000°F\",\n            estimatedTime: 120,\n            id: \"new:1\"\n          }\n        }\n        # ...\n      ],\n      sortOrder: [\n        \"new-first\"\n      ]\n    }\n  ) {\n    title\n    id\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Selected Subnav Item in Twig\nDESCRIPTION: Shows how to specify the currently selected sub-navigation item in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set selectedSubnavItem = 'bar' %}\n```\n\n----------------------------------------\n\nTITLE: Secure Redirect Input in Object Templates\nDESCRIPTION: Demonstrates safe usage of the redirectInput function in object templates, avoiding user input in the template itself.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(currentUser.isInGroup('supporters') ? 'account/receipts' : 'tip/thanks') }}\n```\n\n----------------------------------------\n\nTITLE: Defining Template Route with Named Parameter\nDESCRIPTION: PHP configuration showing how to route a URL with a year parameter to a specific template. The parameter is captured by a regex pattern and made available to the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n'blog/archive/<year:\\d{4}>' => ['template' => 'blog/_archive'],\n```\n\n----------------------------------------\n\nTITLE: Listing User Addresses in Twig\nDESCRIPTION: Displays the current user's address book on their account dashboard. It loads addresses, provides edit and delete functionality, and links to create new addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{# 1. Load Addresses: #}\n{% set addresses = currentUser.getAddresses() %}\n\n{% block content %}\n  <h1>Hello, {{ currentUser.fullName }}!</h1>\n\n  {% if addresses | length %}\n    <ul>\n      {% for address in addresses %}\n        <li>\n          {{ address.title }}<br>\n          {{ address|address }}<br>\n\n          {# 2. Build an edit URL: #}\n          <a href=\"{{ url(\"account/addresses/#{address.uid}\") }}\">Edit</a>\n\n          {# 3. Use a form to delete Addresses: #}\n          <form method=\"post\">\n            {{ csrfInput() }}\n            {{ actionInput('users/delete-address') }}\n            {{ hiddenInput('addressId', address.id) }}\n\n            <button>Delete</button>\n          </form>\n        </li>\n      {% endfor $}\n    </ul>\n  {% else %}\n    <p>You haven't added any addresses, yet!</p>\n  {% endif %}\n\n  {# 4. Link to \"new\" route: #}\n  <p><a href=\"{{ url('account/addresses/new') }}\">New Address</a></p>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Updating Locality Input in Twig for Commerce 4\nDESCRIPTION: This snippet shows how to update the input field for city/locality when migrating from Commerce 3 to Commerce 4. It demonstrates the change in property name from 'city' to 'locality'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{# @var model craft\\commerce\\models\\Address #}\n{{ input('text', 'address[city]', address.city ?? '') }}\n\n{# Commerce 4 #}\n{# @var address craft\\elements\\Address #}\n{{ input('text', 'locality', address.locality ?? '') }}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Products in Twig\nDESCRIPTION: Demonstrates how to iterate over selected products in a Products field using a Twig for loop.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for product in entry.productsFieldHandle %}\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Running Craft CMS System Updates via Command Line\nDESCRIPTION: These commands should be run after pulling new code to ensure the vendor directory contains expected packages and to apply incoming project config changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer install\nphp craft up\n```\n\n----------------------------------------\n\nTITLE: Retrieving Variants with Twig in Craft Commerce\nDESCRIPTION: Example showing how to fetch a specific variant by ID and display its SKU and sale price. Uses craft.commerce.variants to query variants and access their properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-variants.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set variants = craft.commerce.variants.id(8376).first() %}\n\n{{ variant.sku }} - {{ variant.salePrice }}\n```\n\n----------------------------------------\n\nTITLE: Setting Disqus Identifier for Craft CMS Entries\nDESCRIPTION: This JavaScript snippet shows how to set a unique identifier for Disqus comments using the Craft entry ID. This ensures comments are associated with the correct entry page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/integrating-disqus.md#2025-04-22_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nvar disqus_identifier = 'blog-{{ entry.id }}';\n```\n\n----------------------------------------\n\nTITLE: Creating a Multi-Environment Config File for Plugin Settings in Craft CMS\nDESCRIPTION: Demonstrates how to create a multi-environment configuration file that provides different setting values based on the environment. Uses '*' for default values and environment-specific keys for overrides.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    '*' => [\n        'foo' => 'defaultValue',\n    ],\n    '.test' => [\n        'foo' => 'devValue',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Outputting Related Elements in Twig\nDESCRIPTION: This snippet demonstrates how to fetch and display related elements (ingredients) for a recipe entry using a relational field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/relations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = entry.ingredients.all() %}\n\n{% if ingredients|length %}\n  <h3>Ingredients</h3>\n\n  <ul>\n    {% for ingredient in ingredients %}\n      <li>{{ ingredient.title }}</li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Commerce Email Before Sending\nDESCRIPTION: Event handler for 'commerce_emails.onBeforeSendEmail' that changes the email's from address based on the order's locale. It demonstrates accessing order data from the event parameters to conditionally modify the email.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_emails.onBeforeSendEmail', function($event) {\n    // if the order's locale is US English, change the email's From address.\n    if ($event->params['order'] && $event->params['order']->orderLocale == 'en_us') {\n        $event->params['craftEmail']->fromEmail = 'usa@usa-example.com';\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Site URLs in Craft CMS with PHP\nDESCRIPTION: Sets up the siteUrl configuration in the general.php config file to define separate URLs for different locales in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/localization-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    // ...\n    'siteUrl' => array(\n        'en' => 'http://my-project.com/en/',\n        'de' => 'http://my-project.com/de/',\n    ),\n);\n```\n\n----------------------------------------\n\nTITLE: HTML Attribute Modification with attr Filter\nDESCRIPTION: Modifies HTML tag attributes using Yii2's BaseHtml::renderTagAttributes() functionality. Supports class and style combining, attribute removal, and HTML encoding.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div>' %}\n{{ tag|attr({\n  class: 'foo'\n}) }}\n\n{% set svg %}\n  <?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <svg>...</svg>\n{% endset %}\n{{ svg|attr({\n  class: 'icon'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Tax Zone by ID in Craft Commerce\nDESCRIPTION: Demonstrates how to retrieve a single tax zone by its ID using the TaxZones service in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Get tax zone with an ID of `123` #}\n{% set zone = craft.commerce\n  .getTaxZones()\n  .getTaxZoneById(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get tax zone with an ID of `123`\n$taxZones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getTaxZoneById(123);\n```\n\n----------------------------------------\n\nTITLE: Randomizing Array Elements with shuffle() Function\nDESCRIPTION: Demonstrates how to use the shuffle() function to randomize the order of elements in an array, useful for displaying content in a random order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set promos = shuffle(homepage.promos) %}\n\n{% for promo in promos %}\n  <div class=\"promo {{ promo.slug }}\">\n    <h3>{{ promo.title }}</h3>\n    <p>{{ promo.description }}</p>\n    <a class=\"cta\" href=\"{{ promo.ctaUrl }}\">{{ promo.ctaLabel }}</a>\n  </div>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using replace Filter for String Replacement in Twig\nDESCRIPTION: Demonstrates the replace filter that matches and replaces parts of a string. Supports mapping arrays, single string replacements, and regular expressions for advanced pattern matching.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{% set str = 'Hello, FIRST LAST' %}\n\n{{ str|replace({\n  FIRST: currentUser.firstName,\n  LAST:  currentUser.lastName\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set str = 'Hello, NAME' %}\n\n{{ str|replace('NAME', currentUser.name) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag.title|lower|replace('/[^\\\\w]+/', '-') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag.title|lower|replace({\n  '/^the\\\\s/': '',\n  '/[^\\\\w]+/': '-',\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag.title|lower|replace({\n  '/you/i': 'y\\'all',\n  '/-_-/': '(^_^)',\n}, regex=false) }}\n```\n\n----------------------------------------\n\nTITLE: Requiring Permissions in Craft CMS Templates\nDESCRIPTION: This snippet demonstrates how to require a specific permission in a Twig template using the requirePermission tag. This ensures that the user has the necessary permission to view the content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/user-permissions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'stayUpLate' %}\n```\n\n----------------------------------------\n\nTITLE: Console Command Action with Arguments\nDESCRIPTION: Example of a console command action that accepts typed arguments with optional values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/commands.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function actionDeveloper(string $emotion, ?int $days = null): int\n{\n    $who = $this->who ?? 'world';\n\n    if ($days >= 500) {\n        $this->stderr(\"Sorry, I don't remember you, {$who}!\", Console::FG_YELLOW);\n\n        return ExitCode::TEMPFAIL;\n    }\n\n    $this->stdout(\"Hello, {$who}! I am {$emotion} to see you!\", Console::FG_GREEN);\n\n    return ExitCode::OK;\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Template-Defined Transform\nDESCRIPTION: Example of applying a template-defined transform to an asset using the transform hash.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl(thumb) }}\"\n     width=\"{{ asset.getWidth(thumb) }}\"\n     height=\"{{ asset.getHeight(thumb) }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Radio Buttons Fields in PHP\nDESCRIPTION: Shows how to query for elements with specific radio buttons field values in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myRadioFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Running Asset Indexing from Command Line in Craft CMS\nDESCRIPTION: Command to see available options for indexing assets using Craft CMS CLI tools.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft index-assets/one --help\n```\n\n----------------------------------------\n\nTITLE: Submitting New Address in Cart Update Form\nDESCRIPTION: Example of submitting a new shipping address to the cart. This will create a new address in the customer's address book.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<form method=\"post\">\n <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n {{ redirectInput('shop/shipping') }}\n {{ csrfInput() }}\n <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\"/>\n <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\"/>\n //...\n</form>\n```\n\n----------------------------------------\n\nTITLE: Advanced Date Field Querying with MySQL and Postgres\nDESCRIPTION: Shows how to use database-specific functions for more complex date queries, such as filtering by year.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set year = 2024 %}\n\n{% set sentInYear = craft.entries()\n  .section('letters')\n  .andWhere(\"YEAR([[dateSent]]) = :y\", { y: year })\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set year = 2024 %}\n\n{% set sentInYear = craft.entries()\n  .section('letters')\n  .andWhere(\"EXTRACT(YEAR FROM TIMESTAMP [[dateSent]]) = :y\", { y: year })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Existing User Account in Twig\nDESCRIPTION: This snippet shows how to check if a guest customer already has a user account based on their email address. It's useful for guiding users through the checkout process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-customer.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.users.email(cart.email).one() %}You are already a user, please log in.{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Section by ID in Craft CMS using Twig\nDESCRIPTION: This snippet demonstrates how to use the getSectionById() method to fetch a specific section by its ID. It first retrieves the ID from the URL segment and then uses it to get the section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set sectionId = craft.request.getSegment(3) %}\n{% set section = craft.sections.getSectionById(sectionId) %}\n```\n\n----------------------------------------\n\nTITLE: Conditionally Loading Google Analytics in Twig Based on Live Preview Status\nDESCRIPTION: Demonstrates how to conditionally load Google Analytics tracking code only when not in Live Preview mode, which prevents tracking analytics during content preview sessions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.request.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if not craft.request.isLivePreview %}\n  <script type=\"text/javascript\">\n    // Google Analytics tracking code\n  </script>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking Shipping Zip Code in Discount Condition Formula\nDESCRIPTION: A Twig expression that validates whether an order has a shipping address and if the zip code starts with a specific prefix. This allows targeting discounts to specific geographic areas.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\norder.shippingAddressId and order.shippingAddress.zipCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Database Queries with Soft Delete Support\nDESCRIPTION: Examples of how to perform database queries while respecting soft delete status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$results = (new \\craft\\db\\Query())\n    ->select(['...'])\n    ->from(['{{%mytablename}}'])\n    ->where(['dateDeleted' => null])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Using the |address Filter in Twig\nDESCRIPTION: Demonstrates usage of the |address filter to output formatted addresses with various options like HTML formatting, custom tags, and localization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address({ html_tag: 'div' }) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address({\n  html_tag: 'a',\n  html_attributes: {\n    href: url('https://maps.google.com/maps/search/', {\n      query_place_id: address.myCustomPlaceIdField,\n    }),\n  },\n}) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address({ html: false }) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address({ html: false, locale: 'uk' }) }}\n```\n\n----------------------------------------\n\nTITLE: Adding Navigation Menu to Layout in Twig\nDESCRIPTION: This snippet demonstrates how to add a global navigation menu to the header of the layout template, allowing easy navigation between pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/extra-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<a class=\"home\" href=\"{{ siteUrl }}\">{{ siteName }}</a>\n\n<nav>\n  <ul>\n    <li>\n      <a href=\"{{ url('/') }}\">Home</a>\n    </li>\n    <li>\n      <a href=\"{{ url('blog') }}\">Blog</a>\n    </li>\n    <li>\n      <a href=\"{{ url('about') }}\">About</a>\n    </li>\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Using Custom Cache Keys in Craft CMS Templates\nDESCRIPTION: Shows how to specify a custom cache key name, which allows for more control over cache invalidation and identification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% cache using key \"page-header\" %}\n```\n\n----------------------------------------\n\nTITLE: Using Comments in Twig\nDESCRIPTION: This example shows how to add comments in Twig templates. Comments are not evaluated or printed in the output and are useful for leaving notes in the code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/twig-primer.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Holy cow Twig is awesome! #}\n```\n\n----------------------------------------\n\nTITLE: Querying Additional Database in Craft CMS (PHP)\nDESCRIPTION: This snippet demonstrates how to use the additional 'legacydb' connection to query data from a legacy database in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\db\\Query;\n\n$connection = Craft::$app->get('legacydb');\n\n$legacyPosts = (new Query)\n    ->select(['title', 'body', 'post_date'])\n    ->from(['posts'])\n    ->all($connection);\n```\n\n----------------------------------------\n\nTITLE: Chaining Parameters on ElementCriteriaModel in Twig\nDESCRIPTION: Example of using the chaining syntax to set parameters on an ElementCriteriaModel when querying blog entries with a limit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries.section('blog').limit(10) %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query for Entries by Section in Craft CMS 5\nDESCRIPTION: GraphQL query to fetch entries from a specific section in Craft CMS 5, demonstrating changes in type naming conventions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_3\n\nLANGUAGE: gql\nCODE:\n```\nquery MyIngredients {\n  ingredientsEntries {\n    ... on ingredient_Entry {\n      title\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Retrieving Customer Orders in Craft Commerce\nDESCRIPTION: Defines the JSON structure for the response when retrieving customer orders, including a success status and an array of order objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"orders\": [] // Array of order objects\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Redis Session Storage in Craft CMS (PHP)\nDESCRIPTION: This example shows how to configure Craft CMS to use Redis for session storage. It overrides the default session component with a Redis-based implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// config/app.web.php\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config:\n            $config = craft\\helpers\\App::sessionConfig();\n\n            // Replace component class:\n            $config['class'] = yii\\redis\\Session::class;\n\n            // Define additional properties:\n            $config['redis'] = [\n                'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                'port' => 6379,\n                'password' => App::env('REDIS_PASSWORD') ?: null,\n            ];\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        }\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Users Field Data\nDESCRIPTION: Examples of accessing related users data from an element with a Users field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current User's Cart in Twig Templates for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to get the current user's cart using the craft.commerce.getCart() method in Twig templates. It creates a new cart in the session if none exists. The code is typically used once per page request for optimal performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.getCart() %}\n```\n\n----------------------------------------\n\nTITLE: Clearing All Order Notices in Twig and PHP\nDESCRIPTION: Demonstrates how to clear all notices on an order using both a Twig form submission and PHP method call.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ successMessageInput('All notices dismissed') }}\n  {{ hiddenInput('clearNotices') }}\n  <button>Dismiss</button>\n</form>\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\n\n// Get the current cart\n$cart = Commerce::getInstance()->getCarts()->getCart();\n\n// Clear all notices\n$cart->clearNotices();\n```\n\n----------------------------------------\n\nTITLE: Fetching Available Countries - Twig & PHP Implementation\nDESCRIPTION: Examples showing how to retrieve the list of available countries in both Commerce 3 and 4\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Craft 3 #}\n{% set countries = craft.commerce.countries.allEnabledCountriesAsList %}\n\n{# Craft 4 #}\n{% set countries = craft.commerce.getStore().getStore().getCountriesList() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllEnabledCountriesAsList();\n\n// Craft 4\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getStore()\n    ->getStore()\n    ->getCountriesList();\n```\n\n----------------------------------------\n\nTITLE: Basic Event Testing with Craft CMS Tester\nDESCRIPTION: Demonstrates the basic usage of expectEvent() method to test event triggering. Takes the event class, event name, and a closure containing the triggering code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->expectEvent(MyComponent::class, MyComponent::AN_EVENT, function() {\n    MyModule::getInstance()->myComponent->myMethod();\n});\n```\n\n----------------------------------------\n\nTITLE: Working with Lightswitch Field Data in Twig and PHP\nDESCRIPTION: Demonstrates how to access and use Lightswitch field data in templates using both Twig and PHP. The example checks the value of a field named 'myLightswitchField'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myLightswitchField %}\n  <p>I'm on!</p>\n{% else %}\n  <p>I'm off.</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myLightswitchField) {\n    // I'm on!\n} else {\n    // I'm off.\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Schema Version in Migration for Project Config Changes in Craft CMS Plugin\nDESCRIPTION: Shows how to check the plugin's schema version in the YAML file before making project config changes from a migration. This prevents duplicate changes across environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp()\n{\n    // Don't make the same config changes twice:\n    $schemaVersion = Craft::$app->getProjectConfig()\n        ->get('plugins.myPlugin.schemaVersion', true);\n\n    // It's OK to hard-code a schema version, because they're always tied to migrations:\n    if (version_compare($schemaVersion, '1.2.3', '<')) {\n        // Project config changes made in this block will only be run once,\n        // wherever the plugin is updated...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Order Adjuster in Craft Commerce\nDESCRIPTION: Example showing how to register a custom order adjuster class using the registerOrderAdjusters event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/adjusters.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Time Input in Twig Form\nDESCRIPTION: Twig code snippet for creating a time input in an element form, with current value handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('H:i')\n  : '' %}\n\n<input type=\"time\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Basic GraphQL Ping Test Query\nDESCRIPTION: Simple GraphQL query to test if the GraphQL endpoint is working properly by sending a ping request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_0\n\nLANGUAGE: graphql\nCODE:\n```\n{ ping }\n```\n\n----------------------------------------\n\nTITLE: Rendering Nested Entry Partial with Conditional Logic\nDESCRIPTION: Example of a Twig partial for a nested entry, demonstrating how to check the owner and field context to conditionally render content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.title }}\n\n{% if entry.field and entry.field.handle == 'nutritionHighlights' %}\n  {{ entry.typicalCalories }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Notices in Twig\nDESCRIPTION: Shows how to loop through and display cart notices to customers, including notice type and message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set notices = cart.notices %}\n\n{% if notices %}\n  <ul>\n    {% for notice in notices %}\n      <li class=\"notice notice--{{ notice.type }}\">{{ notice.message }}</li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Transform Parameters in Template\nDESCRIPTION: This snippet shows how to define a transform directly in a template by creating a hash with parameters including mode, dimensions, quality, and position for a crop transform.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set thumb = {\n  mode: 'crop',\n  width: 100,\n  height: 100,\n  quality: 75,\n  position: 'top-center'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Requiring User Permissions in Craft CMS Templates (Twig)\nDESCRIPTION: This snippet demonstrates how to require a specific user permission in a Twig template using the requirePermission tag. This ensures that the user has the specified permission before rendering the template content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/user-permissions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'stayUpLate' %}\n```\n\n----------------------------------------\n\nTITLE: Enabling Status Support for Craft CMS Element Types\nDESCRIPTION: This method enables status support for an element type. Returning true indicates that elements of this type should have status tracking.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_36\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasStatuses(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Using purify Filter for HTML Purification in Twig\nDESCRIPTION: Demonstrates how to use the purify filter to sanitize HTML content through HTML Purifier. The filter can be used with default settings, predefined rules from a config file, or with custom configuration passed as an object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{{ user.bio|purify }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ user.bio|purify('user-profile') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ user.bio|purify({\n  'HTML.AllowedElements': 'p, a',\n  'HTML.Nofollow': true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Handling After Cancel Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a subscription is canceled. Useful for post-cancellation processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_39\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\CancelSubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_AFTER_CANCEL_SUBSCRIPTION, function(CancelSubscriptionEvent $e) {\n    // Do something - maybe refund the user for the remainder of the subscription.\n});\n```\n\n----------------------------------------\n\nTITLE: Language-based Conditional Content in Twig\nDESCRIPTION: This snippet shows how to use conditional statements based on the current language in Twig templates. It demonstrates displaying different content for specific languages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.app.language == 'de' %}\n  <p>Guten Tag!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Site URLs with siteUrl()\nDESCRIPTION: Demonstrates the siteUrl() function for creating URLs to pages on your site. This is similar to the url() function but specifically for site pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ siteUrl('company/contact') }}\">Contact Us</a>\n```\n\n----------------------------------------\n\nTITLE: Fetching All States in Twig\nDESCRIPTION: Demonstrates how to retrieve all states, including disabled ones, and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states.allStates %}\n  <option value=\"{{ state.id }}\">\n    {{- state.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Cache-busting Asset URLs with Query Parameters in Twig\nDESCRIPTION: Example of manually cache-busting an asset URL by appending the last-modified timestamp as a query parameter using Craft's url() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ url(image.getUrl('thumb'), { v: image.dateModified.timestamp }) }}\">\n{# <img src=\"https://my-project.tld/images/_thumb/bar.jpg?v=1614374621\"> #}\n```\n\n----------------------------------------\n\nTITLE: Using DDEV Mailpit Environment Variables for SMTP Configuration in Craft CMS\nDESCRIPTION: Example of environment variables provided by DDEV for Mailpit integration that can be used for SMTP configuration in Craft CMS. These variables define the hostname and port for capturing and reviewing outbound emails during development.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/mail.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nMAILPIT_SMTP_HOSTNAME=\"127.0.0.1\"\nMAILPIT_SMTP_PORT=\"1025\"\n```\n\n----------------------------------------\n\nTITLE: Creating Hidden Input Fields with hiddenInput()\nDESCRIPTION: Demonstrates the hiddenInput() function for generating HTML hidden input tags. Shows basic usage and how to add additional attributes using the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', entry.id) }}\n{# Output: <input type=\"hidden\" name=\"entryId\" value=\"100\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', entry.id, {\n  id: 'entry-id-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Coupon Code Form in Twig for Craft Commerce\nDESCRIPTION: A basic Twig template for adding a coupon code input field to a cart update form. The form submits the couponCode parameter using the commerce/cart/update-cart action and displays the current coupon code if one exists.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/coupon-codes.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Project Config Data for Craft CMS Plugin\nDESCRIPTION: Illustrates how to listen to the ProjectConfig::EVENT_REBUILD event to aid Craft in rebuilding the project config based on database-stored data when the rebuild command is run.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RebuildConfigEvent;\nuse craft\\services\\ProjectConfig;\nuse yii\\base\\Event;\n\nEvent::on(\n    ProjectConfig::class,\n    ProjectConfig::EVENT_REBUILD,\n    function(RebuildConfigEvent $e) {\n        // Add plugin's project config data...\n        $productTypes = MyPlugin::getInstance()->getProductTypes()->getAllProductTypes();\n\n        $config = [];\n\n        foreach ($productTypes as $productType) {\n            $config[$productType->uid] = $productType->getConfig();\n        }\n\n        $e->config['myPlugin']['productTypes'] = $config;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Adding dateDeleted Column to Database Table in PHP\nDESCRIPTION: Shows how to add a dateDeleted column to both new and existing database tables to support soft deletion functionality. These migration examples demonstrate the column definition for both table creation and modification scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// New table migration\n$this->createTable('{{%mytablename}}', [\n    // other columns...\n    'dateDeleted' => $this->dateTime()->null(),\n]);\n\n// Existing table migration\n$this->addColumn(\n    '{{%mytablename}}',\n    'dateDeleted',\n    $this->dateTime()->null()->after('dateUpdated')\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States in PHP\nDESCRIPTION: Shows how to retrieve all enabled states using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->getAllEnabledStates();\nforeach ($states as $state) {\n    // $state->id\n    // $state->name\n}\n```\n\n----------------------------------------\n\nTITLE: Using attr Function for HTML Attributes in Twig\nDESCRIPTION: Demonstrates generating HTML attributes from a hash using the attr function, including nested data attributes and styles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAttributes = {\n  class: ['one', 'two'],\n  disabled: true,\n  readonly: false,\n  data: {\n    baz: 'Escape this \"',\n    qux: {\n      some: ['data', '\"quoted\"']\n    }\n  },\n  style: {\n    'background-color': 'red',\n    'font-size': '20px'\n  },\n} %}\n\n<div {{ attr(myAttributes) }}></div>\n```\n\n----------------------------------------\n\nTITLE: Template Path Examples in Craft CMS\nDESCRIPTION: Examples showing how to reference templates in the templates/ directory using both standard and shorthand paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/README.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nrecipes/entry\nrecipes/entry.twig\n```\n\n----------------------------------------\n\nTITLE: PHP Type Declaration with Nullable Types\nDESCRIPTION: Example of using nullable type declarations in PHP. This shows how to declare a method that accepts either a string or null as an argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function foo(?string $bar): void\n```\n\n----------------------------------------\n\nTITLE: Filtering Switchable Plans in Twig\nDESCRIPTION: This snippet demonstrates how to filter and display plans that a user can switch to from their current subscription plan. It uses Twig to fetch all plans for the current gateway, filter them based on compatibility, and create a select dropdown with the available options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/dev/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentPlan = subscription.getPlan() %}\n{% set gateway = currentPlan.getGateway() %}\n{% set allPlans = craft.commerce.plans.getPlansByGatewayId(gateway.id) %}\n{% set switchablePlans = allPlans|filter((p) => p.canSwitchFrom(currentPlan)) %}\n\n<select name=\"planUid\">\n  {% for plan in switchablePlans %}\n    <option value=\"{{ plan.uid|hash }}\">{{ plan.name }}</option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Fetching Categories for a Blog Post in Twig\nDESCRIPTION: Demonstrates how to load and display categories (topics) associated with a blog post entry in Craft CMS using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set featureImage = entry.featureImage.one() %}\n\n{# Load attached topics: #}\n{% set topics = entry.postCategories.all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<time datetime=\"{{ entry.postDate | atom }}\">\n  {{ entry.postDate | date }}\n</time>\n\n{% if topics | length %}\n  <ul class=\"topics\">\n    {% for topic in topics %}\n      <li>{{ topic.getLink() }}</li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Subscription Plan Switching Template in Twig\nDESCRIPTION: Template for switching between subscription plans. Displays available alternative plans and posts to commerce/subscriptions/switch action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscription-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for plan in subscription.alternativePlans %}\n  <strong>Switch to {{ plan.name }}</strong>\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/switch') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    {{ plan.getGateway().getSwitchPlansFormHtml(subscription.plan, plan)|raw }}\n\n    <button class=\"button link\">Switch</button>\n  </form>\n  <hr />\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Getting Global Set by Handle in Craft CMS\nDESCRIPTION: The getSetByHandle() method retrieves a global set by its handle. It accepts an optional locale parameter to get the global set in a specific locale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getSetByHandle( handle, locale )\n```\n\n----------------------------------------\n\nTITLE: Checking UID-based Permissions with Hard-coded UIDs in Craft CMS\nDESCRIPTION: This example shows how to check permissions for a specific resource by directly including its UID in the permission string. It controls access to an 'Add a Vendor' link based on whether the user can create entries in a specific section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/user-management.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Store the UID directly in the template: #}\n{% if currentUser.can('createEntries:4fcb3c63-9477-4b5f-8021-874d64f819ce') %}\n  <a href=\"{{ siteUrl('account/vendors/add') }}\">Add a Vendor</a>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Getting Class Names in Twig\nDESCRIPTION: Shows how to use the className() function to retrieve the fully qualified class name of an object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set class = className(entry) %}\n{# Result: 'craft\\\\elements\\\\Entry' #}\n```\n\n----------------------------------------\n\nTITLE: Adding Content to Order Details Tab in Twig\nDESCRIPTION: This hook enables insertion of content after existing content within the 'Order Details' tab in the order edit view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.order.edit.main-pane\" %}\n```\n\n----------------------------------------\n\nTITLE: Setting and Getting Global Collection Values in Twig\nDESCRIPTION: Example showing how to set and get values using the _globals Collection object in Twig templates. Demonstrates both single and multiple value assignment methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% do _globals.set('theme', 'dark') %}\n{% do _globals.set({\n  red: '#F00',\n  green: '#0F0',\n  blue: '#00F',\n}) %}\n\n{{ _globals.get('theme') }}\n{# -> 'dark' #}\n\n{{ _globals.get('red') }}\n{# -> '#F00' #}\n```\n\n----------------------------------------\n\nTITLE: Outputting Position Select Field Value in Twig\nDESCRIPTION: This snippet demonstrates how to output the value of a Position Select field directly into a div's class attribute using Twig syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/position-select-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"block {{ entry.positionSelectFieldHandle }}\">\n```\n\n----------------------------------------\n\nTITLE: Running the Commerce Data Reset Command\nDESCRIPTION: Command for cleansing Commerce data without uninstalling the plugin or removing store configuration. It deletes all orders, subscriptions, payment sources, customers, addresses and resets discount usages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/console-commands.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft commerce/reset-data\n```\n\n----------------------------------------\n\nTITLE: Running Queue Job in PHP Test Class\nDESCRIPTION: Demonstrates how to execute a queue job within a unit test using the tester property. Accepts a job class and an array of parameters that will be passed to the job.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/queue.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->runQueue(MyJob::class, [\n    'param1' => 'value',\n    'param2' => 'value2'\n]);\n```\n\n----------------------------------------\n\nTITLE: Implementing getTriggerHtml() with JavaScript Binding in Craft CMS\nDESCRIPTION: This snippet demonstrates how to implement the getTriggerHtml() method to bind JavaScript to an element action trigger. It creates a new Craft.ElementActionTrigger instance with configurations for handle, batch processing, selection validation, and activation behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/element-actions.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function getTriggerHtml()\n{\n    $js = 'new Craft.ElementActionTrigger({' .\n               'handle: '.JsonHelper::encode($this->getClassHandle()).', ' .\n               'batch: true, ' .\n               'validateSelection: function($selectedElements){ return true; }, ' .\n               'activate: function($selectedElements){ alert(\"Made you click\"); }' .\n          '});';\n\n    craft()->templates->includeJs($js);\n}\n```\n\n----------------------------------------\n\nTITLE: Installing MailHog with Nitro CLI\nDESCRIPTION: Command to install and set up MailHog using the Nitro development environment tool. This initializes MailHog for local email testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/mailhog.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro install mailhog\n```\n\n----------------------------------------\n\nTITLE: Registering an Asset Bundle in Twig templates\nDESCRIPTION: Code example showing how to register a Craft CMS asset bundle from within a Twig template, which will include the bundle's CSS and JavaScript files in the page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% do view.registerAssetBundle(\"mynamespace\\\\FooBundle\") %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Set Fields in Twig\nDESCRIPTION: Demonstrates how to access fields from a global set in a Twig template. The example uses a global set named 'companyInfo' with a 'yearEstablished' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/globals.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ companyInfo.yearEstablished }}\n```\n\n----------------------------------------\n\nTITLE: Validating Commerce Addresses Before Saving\nDESCRIPTION: Event handler for 'commerce_addresses.onBeforeSaveAddress' that validates an address before saving. It demonstrates how to add validation errors and prevent the save operation by setting performAction to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_addresses.onBeforeSaveAddress', function($event) {\n    $address = $event->params['address'];\n    $address->addError('firstName', 'Invalid name');\n    $event->performAction = false;\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating Element Actions Registration - PHP\nDESCRIPTION: Demonstrates how to update element action registration from Craft 2's hook system to Craft 3's event system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\npublic function addEntryActions($source)\n{\n    return [new MyElementAction()];\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\nuse craft\\events\\RegisterElementActionsEvent;\nuse yii\\base\\Event;\n\nEvent::on(Entry::class, Element::EVENT_REGISTER_ACTIONS, function(RegisterElementActionsEvent $event) {\n    $event->actions[] = new MyElementAction();\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Pay and Save Functionality in Twig for Craft Commerce\nDESCRIPTION: This code snippet demonstrates how to add a checkbox to a payment form that allows users to save their payment source for future use when making a purchase. It checks if the selected gateway supports payment sources before rendering the checkbox.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/saving-payment-sources.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.gateway.supportsPaymentSources() %}\n<div class=\"checkbox\">\n  <label>\n    <input type=\"checkbox\" name=\"savePaymentSource\" value=\"1\" />\n    {{ \"Save card for future purchases\"|t }}\n  </label>\n</div>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Users by Permission in Twig\nDESCRIPTION: An example showing how to fetch users with specific permissions, in this case those who can create entries in a specific section (ID: 5).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.users.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set authors = craft.users.can('createEntries:5') %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Entry Form for Editing Existing Entries in Twig\nDESCRIPTION: This code snippet shows how to modify the new entry form to edit existing entries in Craft CMS. It adds a hidden input field for the entry ID, allowing the form to update an existing entry instead of creating a new one.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entry-form.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"entryId\" value=\"{{ entry.id }}\">\n```\n\n----------------------------------------\n\nTITLE: Preserving Query Parameters in Pagination Links\nDESCRIPTION: Demonstrates how to maintain the current query string parameters when creating pagination links, excluding the path parameter that Craft uses internally.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.request.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ paginate.nextUrl }}?{{ craft.request.getQueryStringWithoutPath() }}\">Next Page</a>\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Craft CMS Utility Class in PHP\nDESCRIPTION: Example of a basic utility class implementation that extends craft\\base\\Utility. Shows required method implementations for display name, ID, icon path and content HTML rendering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/utilities.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace;\n\nuse Craft;\nuse craft\\base\\Utility;\n\nclass MyUtility extends Utility\n{\n    public static function displayName(): string\n    {\n        return Craft::t('my-plugin', 'My Utility');\n    }\n\n    public static function id(): string\n    {\n        return 'my-utility';\n    }\n\n    public static function iconPath(): ?string\n    {\n        return Craft::getAlias('@my-plugin/icon.svg');\n    }\n\n    public static function contentHtml(): string\n    {\n        $view = Craft::$app->getView();\n\n        return $view->renderTemplate('_utilities/my-utility.twig');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Extending Subscription Detail Content in Twig\nDESCRIPTION: This hook allows adding content after the last .pane in the subscription detail view's content block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.subscriptions.edit.content\" %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Element Type for GraphQL in Craft CMS\nDESCRIPTION: This snippet demonstrates how to create a custom element type class for GraphQL in Craft CMS. It extends the base Element class and declares its interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\nnamespace mynamespace\\gql\\types\\elements;\n\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nclass Widget extends \\craft\\gql\\types\\elements\\Element\n{\n    public function __construct(array $config)\n    {\n        $config['interfaces'] = [\n            WidgetInterface::getType(),\n        ];\n\n        parent::__construct($config);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Email in Craft Commerce (PHP)\nDESCRIPTION: This hook allows modification of the email model before it's sent. It provides access to the email model and the order for customization. The hook should modify the email model directly and not return anything.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_modifyEmail(EmailModel &$email, $order){\n  $email->subject = 'new Subject';\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Setup in codeception.yml\nDESCRIPTION: YAML configuration for database setup options including table cleanup and migration application.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/config-options.md#2025-04-22_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ndbSetup:\n  clean: true\n  setupCraft: true\n  applyMigrations: true\n```\n\n----------------------------------------\n\nTITLE: Retrieving Previous Carts\nDESCRIPTION: Code examples in both Twig and PHP for fetching a user's previous incomplete carts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  {% set currentCart = craft.commerce.carts.cart %}\n  {% if currentCart.id %}\n    {% set oldCarts = craft.orders()\n      .isCompleted(false)\n      .id('not '~currentCart.id)\n      .user(currentUser)\n      .all() %}\n  {% else %}\n    {% set oldCarts = craft.orders()\n      .isCompleted(false)\n      .user(currentUser)\n      .all() %}\n  {% endif %}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\nuse craft\\commerce\\elements\\Order;\n\n$currentUser = Craft::$app->getUser()->getIdentity();\n\nif ($currentUser) {\n    $currentCart = Commerce::getInstance()->getCarts()->getCart();\n    if ($currentCart->id) {\n        // Return all incomplete carts *except* the currently-loaded one\n        $oldCarts = Order::findAll()\n            ->isCompleted(false)\n            ->id('not '.$currentCart->id)\n            ->user($currentUser);\n    } else {\n        $oldCarts = Order::findAll()\n            ->isCompleted(false)\n            ->user($currentUser);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Address Validation in PHP\nDESCRIPTION: This snippet shows how to add custom validation rules for addresses using PHP. It demonstrates adding a rule to check if the full name contains 'droid' or 'bot'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\base\\Model;\nuse craft\\elements\\Address;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    Address::class,\n    Model::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $event) {\n        $event->rules[] = [\n            ['fullName'],\n            'match',\n            'pattern' => '/droid|bot/i',\n            'message' => Craft::t('site', 'Robots are not allowed.'),\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Entries Fields in PHP\nDESCRIPTION: This PHP snippet shows how to fetch artwork entries that are related to an artist using an Entries field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$works = \\craft\\elements\\Entry::find()\n    ->section('artwork')\n    ->myFieldHandle($artist)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Generating Site URLs with url() Function\nDESCRIPTION: Shows how to use the url() function to create internal links within a site. The function appends the path to the site URL and supports query parameters and protocol specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ url('company/contact') }}\">Contact Us</a>\n```\n\n----------------------------------------\n\nTITLE: Saving Elements in Craft CMS PHP Tests\nDESCRIPTION: This code snippet demonstrates how to save elements in Craft CMS tests using the ElementsService. It's used to highlight potential issues with the search index table when using transactions in MySQL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getElements()->saveElement()\n```\n\n----------------------------------------\n\nTITLE: Retrieving Store Location Address in Craft Commerce\nDESCRIPTION: Demonstrates how to retrieve the store location address using both Twig and PHP. The Addresses service provides access to the store's location address configured in Commerce settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set storeAddress = craft.commerce.addresses.storeLocationAddress %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$storeAddress = craft\\commerce\\Plugin::getInstance()\n    ->getAddresses()\n    ->getStoreLocationAddress();\n```\n\n----------------------------------------\n\nTITLE: Asserting Test Failure in Craft CMS (PHP)\nDESCRIPTION: The assertTestFailed method is used to verify that a specific test fails with an expected message. It's useful for testing custom assertion methods in modules or plugins.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nassertTestFailed($callback, $message = '')\n```\n\n----------------------------------------\n\nTITLE: Unsetting Reference Variables After Foreach Loops\nDESCRIPTION: Demonstrates how to properly unset reference variables created in foreach loops to prevent unexpected behavior. This is an important practice to avoid variable leaks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nforeach ($array as &$value) {\n    // ...\n}\nunset($value);\n```\n\n----------------------------------------\n\nTITLE: Past and Future Date Queries - Twig\nDESCRIPTION: Examples of querying entries with dates in the past or future using 'now' comparison in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/date-time-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set pastEntries = craft.entries()\n  .myFieldHandle('< now')\n  .all() %}\n{% set futureEntries = craft.entries()\n  .myFieldHandle('>= now')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Search Indexes via CLI in Bash\nDESCRIPTION: Command to rebuild search indexes by bulk-resaving entries using the Craft CLI. This is useful when search indexes are suspected to be out of date.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/entries --update-search-index\n```\n\n----------------------------------------\n\nTITLE: Implementing App Component Getters in PHP for Craft CMS\nDESCRIPTION: This example shows how to implement a getter function for an app component. It demonstrates calling the app component getter method get() directly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @return Entries\n */\npublic function getEntries()\n{\n    return $this->get('entries');\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Products with Specific Variant Attributes in Twig\nDESCRIPTION: This example shows how to use the hasVariant parameter to query products based on specific variant attributes, in this case, filtering for t-shirts with a red color variant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-products.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.commerce.products.type('tshirt').hasVariant({ color: 'red' }) %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Radio Buttons Fields in Twig\nDESCRIPTION: Demonstrates how to query for elements with specific radio buttons field values in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myRadioFieldHandle('foo')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Using Data URL for Images in PDF Templates with Twig\nDESCRIPTION: This code demonstrates how to embed images in PDF templates using the dataUrl function when remote images are not allowed. It converts an SVG image to a base64-encoded data URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/pdfs.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# base64-encoded SVG image works when `pdfAllowRemoteImages` is `false` #}\n<img width=\"75\" height=\"75\" src=\"{{ dataUrl('@webroot/images/store-logo.svg') }}\" alt=\"Store logo\"/>\n```\n\n----------------------------------------\n\nTITLE: Implementing Checkboxes in a Front-End Entry Form in Twig\nDESCRIPTION: Shows how to properly implement Checkboxes fields in a front-end form, including a hidden input to handle the case when no checkboxes are selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/checkboxes-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"fields[checkboxFieldhandle]\" value=\"\">\n\n<ul>\n  <li><input type=\"checkbox\" name=\"fields[checkboxFieldHandle][]\" value=\"foo\">{{ checkboxOption.label }}</li>\n  <li><input type=\"checkbox\" name=\"fields[checkboxFieldHandle][]\" value=\"bar\">{{ checkboxOption.label }}</li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Rendering Element Collection with Custom Parameters\nDESCRIPTION: Example of rendering an element collection with additional parameters passed to the partial template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/elements.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ recipe.ingredients.render({\n  portionSize: currentUser.householdSize,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Migrating getCpAlerts Hook to Craft 3 PHP\nDESCRIPTION: Demonstrates how to migrate the getCpAlerts plugin hook from Craft 2 to an event listener in Craft 3 for registering control panel alerts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCpAlertsEvent;\nuse craft\\helpers\\Cp;\nuse yii\\base\\Event;\n\nEvent::on(\n    Cp::class,\n    Cp::EVENT_REGISTER_ALERTS,\n    function(RegisterCpAlertsEvent $event) {\n        if (\\Craft::$app->config->general->devMode) {\n            $event->alerts[] = \\Craft::t('plugin-handle', 'Dev Mode is enabled!');\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Advanced Relations Query with Multiple Criteria\nDESCRIPTION: Complex query example showing how to find related drinks using multiple criteria and relation types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/relations.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set otherUsers = craft.users()\n  .id('not '~currentUser.id)\n  .all() %}\n\n{% set recommendedCocktails = craft.entries()\n  .section('drinks')\n  .relatedTo([\n    'and',\n    { sourceElement: otherUsers, field: 'favoriteDrinks' },\n    { targetElement: drink.ingredients.one(), field: 'ingredients' }\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Rates for a Specific Zone in Twig\nDESCRIPTION: Shows how to retrieve tax rates for a specific tax zone using either a zone object or zone ID in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch rates for a `zone` we've already got #}\n{# @var zone craft\\commerce\\models\\TaxAddressZone #}\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getTaxRatesForZone(zone) %}\n\n{# Fetch rates for a tax zone with an ID of `123` #}\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getTaxRatesByTaxZoneId(123) %}\n```\n\n----------------------------------------\n\nTITLE: Processing Component Dependencies in Project Config Handlers\nDESCRIPTION: Ensures that dependent components' changes are applied before your component by explicitly processing them first. This is necessary when your component references other components in project config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getProjectConfig()->processConfigChanges('productTypeGroups');\n```\n\n----------------------------------------\n\nTITLE: Maintaining Existing Assets While Adding New Ones in Twig\nDESCRIPTION: This snippet shows how to maintain existing assets in an Assets field while allowing the addition of new ones. It includes hidden inputs for existing asset IDs and a file input for new uploads.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% for relatedAssetId in entry.myFieldHandle.ids() %}\n  {{ input(\n    'hidden',\n    'fields[myFieldHandle][]',\n    relatedAssetId\n  ) }}\n{% endfor %}\n\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Arrayable Interface in PHP\nDESCRIPTION: ExampleArrayble class that implements Yii's Arrayable interface for testing modules/plugins that work with arrayable objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\arrayable\\ExampleArrayble\n```\n\n----------------------------------------\n\nTITLE: Creating a Checkbox List for Entries Field in Twig\nDESCRIPTION: Demonstrates how to create a list of checkboxes for selecting related entries in a front-end form using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleEntries = craft.entries()\n  .section('galleries')\n  .orderBy('title ASC')\n  .all() %}\n\n{% set relatedEntryIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleEntry in possibleEntries %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleEntry.id,\n          { checked: possibleEntry.id in relatedEntryIds }\n        ) }}\n        {{ possibleEntry.title }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Trace Level in Craft CMS Logging\nDESCRIPTION: Example showing how to configure the trace level for detailed call stack logging in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n# config/app.php\nreturn [\n    'components' => [\n        'log' => [\n            // Include this many levels of the call stack:\n            'traceLevel' => 5,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Test Configuration Setup\nDESCRIPTION: A PHP file that creates the test Craft application configuration. This minimal configuration creates a properly configured Craft object for testing purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse craft\\test\\TestSetup;\n\nreturn TestSetup::createTestCraftObjectConfig();\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Multi-select Fields in Twig\nDESCRIPTION: Demonstrates how to fetch entries with a specific option selected in a Multi-select field using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Selected Variants with Field Handle in Twig\nDESCRIPTION: Basic example of accessing selected variants through the field handle. This returns an element query for the selected product variants.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set variants = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Saving Cart Changes in Twig and PHP\nDESCRIPTION: Demonstrates how to save the cart after clearing notices to persist the changes in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{# Save the cart #}\n{% do craft.app.elements.saveElement(cart) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Save the cart\nCraft::$app->getElements()->saveElement($cart);\n```\n\n----------------------------------------\n\nTITLE: Switching Subscription Plans Template in Twig\nDESCRIPTION: Template for switching between available subscription plans. Iterates through alternative plans and posts to the commerce/subscriptions/switch endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscription-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for plan in subscription.alternativePlans %}\n  <strong>Switch to {{ plan.name }}</strong>\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ hiddenInput('action', 'commerce/subscriptions/switch') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    {{ plan.getGateway().getSwitchPlansFormHtml(subscription.plan, plan)|raw }}\n\n    <button type=\"submit\" class=\"button link\">Switch</button>\n  </form>\n  <hr />\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Refund Transaction Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a transaction refund is processed. Allows for implementing pre-refund validation or business logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RefundTransactionEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_BEFORE_REFUND_TRANSACTION, function(RefundTransactionEvent $e) {\n    // Do something - perhaps check if refund amount more than half the transaction and do something based on that\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Partial Payment Selection in Twig\nDESCRIPTION: Example showing how to implement a partial payment form with options for half or full payment amounts. Uses payment currency conversion and hashing for security.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/making-payments.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set halfAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance * 0.5,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n{% set fullAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n<select name=\"paymentAmount\">\n  <option value=\"{{ halfAmount|hash }}\">\n    50% ({{ halfAmount|commerceCurrency(cart.paymentCurrency) }})\n  </option>\n  <option value=\"{{ fullAmount|hash }}\">\n    100% ({{ fullAmount|commerceCurrency(cart.paymentCurrency) }})\n  </option>\n</select>\n```\n\n----------------------------------------\n\nTITLE: JSON Response Structure for Cart Complete Action\nDESCRIPTION: Example JSON response structure when completing a cart with application/json header. Shows both success and error response formats.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"message\": \"string\",\n  \"cart\": {}\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"string\",\n  \"errors\": [],\n  \"success\": false,\n  \"message\": \"string\",\n  \"cart\": {}\n}\n```\n\n----------------------------------------\n\nTITLE: Unset Variables in PHP Foreach Loops\nDESCRIPTION: Best practice for unsetting variables created by reference in foreach loops after the loop is finished. This prevents potential issues with variable scoping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nforeach ($array as &$value) {\n    // ...\n}\nunset($value);\n```\n\n----------------------------------------\n\nTITLE: Filesystem Migration Class Implementation\nDESCRIPTION: Migration class example showing how to update old volume types to new filesystem types in the project config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse mynamespace\\migrations;\n\nuse mynamespace\\fs\\MyFs;\nuse Craft;\nuse craft\\db\\Migration;\nuse craft\\services\\ProjectConfig;\n\nclass mXXXXXX_XXXXXX_update_fs_configs extends Migration\n{\n    public function safeUp(): bool\n    {\n        $projectConfig = Craft::$app->getProjectConfig();\n\n        // Don't make the same changes twice\n        $schemaVersion = $projectConfig->get('plugins.pluginHandle.schemaVersion', true);\n        if (version_compare($schemaVersion, '2.0', '>=')) {\n            return true;\n        }\n\n        $fsConfigs = $projectConfig->get(ProjectConfig::PATH_FS) ?? [];\n        foreach ($fsConfigs as $uid => $config) {\n            if ($config['type'] === 'my\\old\\Volume') {\n                $config['type'] = MyFs::class;\n                $projectConfig->set(sprintf('%s.%s', ProjectConfig::PATH_FS, $uid), $config);\n            }\n        }\n\n        return true;\n    }\n\n    public function safeDown(): bool\n    {\n        echo \"mXXXXXX_XXXXXX_update_fs_configs cannot be reverted.\\n\";\n        return false;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Filtered Related Elements Query in Twig\nDESCRIPTION: Example of querying related elements with additional section filtering criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/relations.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for ingredient in entry.ingredients.section('ingredients').all() %}\n  <li>{{ ingredient.title }}</li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using setTransform with Template-Defined Transform\nDESCRIPTION: This snippet shows how to use setTransform() with a template-defined transform hash, which updates the asset's properties to reflect the transformed image.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform(thumb) %}\n<img src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags in PHP\nDESCRIPTION: Demonstrates how to parse reference tags programmatically using the Elements service in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/reference-tags.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$parsed = Craft::$app->getElements()->parseRefs($text);\n```\n\n----------------------------------------\n\nTITLE: Creating Base HTML Template with Twig Inheritance\nDESCRIPTION: This snippet demonstrates how to create a base HTML5 template with defined blocks for head and body content that can be extended by child templates. It includes dynamic title setting and body attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"{{ currentSite.language }}\">\n<head>\n  {% block head %}\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta charset=\"utf-8\">\n    <title>{{ docTitle ?? siteName }}</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  {% endblock %}\n</head>\n<body {{ attr(bodyAttributes ?? {}) }}>\n  {% block body %}\n  {% endblock %}\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Soft Deleting Records Using Active Record in PHP\nDESCRIPTION: Code showing how to soft-delete a record using the softDelete() method provided by the SoftDeleteTrait instead of the regular delete() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$record->softDelete();\n```\n\n----------------------------------------\n\nTITLE: Customer Email Address Template in Twig\nDESCRIPTION: Twig template to fetch the customer's email address from the order object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.email }}\n```\n\n----------------------------------------\n\nTITLE: Subscribing to Plans in Craft CMS Commerce\nDESCRIPTION: This Twig template creates a form for each available subscription plan, allowing users to subscribe. It handles cases where the user may or may not have a saved payment source, and posts to the commerce/subscriptions/subscribe action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/subscription-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set plans = craft.commerce.getPlans().getAllPlans() %}\n\n{% for plan in plans %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('commerce/subscriptions/subscribe') }}\n    {{ hiddenInput('planUid', plan.uid|hash) }}\n\n    <h4>{{ plan.name }}</h4>\n\n    {% set paymentSources = craft.commerce.\n      getPaymentSources().\n      getAllGatewayPaymentSourcesByCustomerId(\n        plan.getGateway().id,\n        currentUser.id ?? null\n      )\n    %}\n\n    {# If we don't have a saved payment source, collect details for the gateway #}\n    {% if not paymentSources|length %}\n      <div class=\"paymentForm\">\n        {% namespace plan.getGateway().handle|commercePaymentFormNamespace %}\n          {{ plan.getGateway().getPaymentFormHtml({})|raw }}\n        {% endnamespace %}\n      </div>\n    {% endif %}\n\n    <button>{{ \"Subscribe\"|t }}</button>\n  </form>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript with Twig js Tag Pair\nDESCRIPTION: Example of using Craft's js tag pair to register JavaScript code in a template. The code between the opening and closing tags will be added to the page's JavaScript.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% js %}\n  console.log('Hello world');\n{% endjs %}\n```\n\n----------------------------------------\n\nTITLE: Defining Field Type Settings in PHP\nDESCRIPTION: Shows how to define configurable settings for a field type using the defineSettings method, specifying data types and validation rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    protected function defineSettings()\n    {\n        return array(\n            'initialSlots' => array(AttributeType::Number, 'min' => 0)\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Rates for a Specific Zone in PHP\nDESCRIPTION: Demonstrates how to retrieve tax rates for a specific tax zone using either a zone object or zone ID in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Fetch rates for a `$zone` we've already got\n/** @var $zone craft\\commerce\\models\\TaxAddressZone **/\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRatesForZone($zone);\n\n// Fetch rates for a tax zone with an ID of `123`\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRatesByTaxZoneId(123);\n```\n\n----------------------------------------\n\nTITLE: Implementing Checkout Without Payment in Twig\nDESCRIPTION: This snippet demonstrates how to create a form for submitting an order without payment when the 'Allow Checkout Without Payment' setting is enabled. It uses the commerce/cart/complete controller action and includes CSRF protection and redirect input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/making-payments.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/complete') }}\n  {{ redirectInput('/shop/customer/order?number={number}&success=true') }}\n\n  <button>Buy Now + Pay Later</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Address Validation Errors in Twig Templates\nDESCRIPTION: Example of checking and accessing validation errors for address fields in Twig templates, including methods for getting all errors or specific field errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% if address %}\n  {# Get all validation errors for the address #}\n  {% set errors = address.getErrors() %}\n\n  {# Get the `firstName` error for the address #}\n  {% set firstNameErrors = address.getErrors('firstName') %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Handling Order Status Changes\nDESCRIPTION: This event fires when an order's status is changed. It allows for notifications or additional processing based on the new status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\OrderStatusEvent;\nuse craft\\commerce\\services\\OrderHistories;\nuse yii\\base\\Event;\n\nEvent::on(OrderHistories::class, OrderHistories::EVENT_ORDER_STATUS_CHANGE, function(OrderStatusEvent $e) {\n     // Perhaps, let the delivery department know that the order is ready to be delivered.\n});\n```\n\n----------------------------------------\n\nTITLE: Fetching Country by ID in PHP\nDESCRIPTION: Shows how to retrieve a specific country by its ID using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n$country = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getCountryById($countryId);\n// $country->id\n// $country->name\n```\n\n----------------------------------------\n\nTITLE: Injecting Primary Order Actions in Twig\nDESCRIPTION: This hook allows adding additional controls just before the primary order form actions in the page toolbar.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.order.edit.order-actions\" %}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Post-Test Code Coverage Reporting\nDESCRIPTION: After test execution, code coverage reports are uploaded to codecov.io for environments where the TASK_TESTS_COVERAGE flag is set. This provides visibility into test coverage metrics without impacting performance of other test environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nafter_script:\n- |\n  if [ $TASK_TESTS_COVERAGE == 1 ]; then\n    bash <(curl -s https://codecov.io/bash)\n  fi\n```\n\n----------------------------------------\n\nTITLE: Creating an Autosuggest Input for Environmental Settings with Twig\nDESCRIPTION: This snippet demonstrates how to create an autosuggest input field in the control panel that suggests environment variables. This helps guide users when entering setting values that can reference environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/environmental-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.autosuggestField({\n  label: 'Secret Key'|t('plugin-handle'),\n  id: 'secret-key',\n  name: 'secretKey',\n  value: myModel.secretKey,\n  suggestEnvVars: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Updating Custom Fields on Cart in Twig\nDESCRIPTION: Form implementation for updating custom fields on a cart using the commerce/cart/update-cart action. Demonstrates how to update a 'giftMessage' custom field with proper CSRF protection and redirect handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <label>\n    Gift Message\n    {{ input('text', 'fields[giftMessage]', cart.giftMessage) }}\n  </label>\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Editions in PHP\nDESCRIPTION: Example of how to define available plugin editions by overriding the editions() method in a Craft CMS plugin class. The editions are defined as constants and returned in ascending order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-editions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass Plugin extends \\craft\\base\\Plugin;\n{\n    const EDITION_LITE = 'lite';\n    const EDITION_PRO = 'pro';\n\n    public static function editions(): array\n    {\n        return [\n            self::EDITION_LITE,\n            self::EDITION_PRO,\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using configure Function with Query Objects in Twig\nDESCRIPTION: The configure function modifies an existing object by applying new attributes to it, similar to the Craft::configure() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set myRelatedEntries = configure(entry.myEntriesField, {\n  section: 'blog'\n}).all() %}\n```\n\n----------------------------------------\n\nTITLE: Extending Shipping Methods Edit View in Twig\nDESCRIPTION: This hook allows adding content after the shipping rule form in the shipping methods edit view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.shippingMethods.edit.content\" %}\n```\n\n----------------------------------------\n\nTITLE: Using Commerce Currency Filter in Twig with Various Parameters\nDESCRIPTION: Example of using the commerceCurrency Twig filter to format currency values with different parameters. Demonstrates converting between currencies, disabling formatting, and removing trailing zeros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/payment-currencies.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# `USD` #}\n{% set baseCurrency = cart.currency %}\n\n{# `AUD`, exchange rate 1.3 #}\n{% set paymentCurrency = cart.paymentCurrency %}\n\n{{ 10|commerceCurrency(baseCurrency) }} {# Output: $10.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=false\n) }} {# Output: 13 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true,\n  stripZeros=true\n) }} {# Output: A$13 #}\n```\n\n----------------------------------------\n\nTITLE: Creating Test Method for Console Commands in PHP\nDESCRIPTION: Adding a test method to the console command test class for testing specific functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace crafttests\\unit\\console;\n\nuse \\craft\\test\\console\\ConsoleTest;\n\nclass MyConsoleTest extends ConsoleTest\n{\n    public function testSomething()\n    {\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Outputting UserGroupModel Name in Twig\nDESCRIPTION: Demonstrates how to output a UserGroupModel object's name without attaching a property or method. This will return the group's name by default.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/usergroupmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<li>{{ group }}</li>\n```\n\n----------------------------------------\n\nTITLE: Setting up Codeception Configuration Options in YAML\nDESCRIPTION: Configuration options for the Craft module in the codeception.yml file, recommending to set 'cleanup' and 'transaction' to true to maintain database integrity during tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\n# Recommended settings for codeception.yml\ntransactions: true\ncleanup: true\n```\n\n----------------------------------------\n\nTITLE: Fetching All Countries as List in PHP\nDESCRIPTION: Shows how to retrieve all countries as a key-value list using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllCountriesAsList();\n\nforeach ($countries as $id => $countryName) {\n    // $id\n    // $countryName\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to Categories ElementCriteriaModel\nDESCRIPTION: Shows how to modify the ElementCriteriaModel returned by a Categories field by adding parameters like ordering criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = entry.categoriesFieldHandle.order('name') %}\n```\n\n----------------------------------------\n\nTITLE: Using the 'float' test in Twig\nDESCRIPTION: Shows how to use the 'float' test to check if a variable is a float value in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.5 is float ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 9 is float ? 'true' : 'false' }}\n{# result: false #}\n\n{{ 'duck' is float ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Setting Commerce Configuration Values in PHP\nDESCRIPTION: Demonstrates how to override default Commerce configuration values by creating a config/commerce.php file. The example shows setting the purgeInactiveCartsDuration parameter to one day.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'purgeInactiveCartsDuration' => 'P1D',\n];\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Assets Fields in Twig\nDESCRIPTION: A Twig example showing how to fetch entries that have at least one related asset in a specific Assets field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related asset #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Dropdown Fields in Craft CMS\nDESCRIPTION: Shows how to filter element queries based on Dropdown field data using Twig and PHP. This snippet demonstrates fetching entries with a specific option selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dropdown-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the 'foo' option selected #}\n{% set entries = craft.entries()\n  .myFieldHandle('foo')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Ordered Search Results by Score\nDESCRIPTION: Demonstrates how to order search results by relevance score across different implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .orderBy('score')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\", orderBy: \"score\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->orderBy('score')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating Hidden Input Fields with hiddenInput() Function\nDESCRIPTION: The hiddenInput() function generates an HTML hidden input tag with the specified name and value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', entry.id) }}\n{# Output: <input type=\"hidden\" name=\"entryId\" value=\"100\"> #}\n```\n\n----------------------------------------\n\nTITLE: Creating an Assets Field Input in an Entry Form\nDESCRIPTION: Template code that creates a list of checkboxes for selecting assets in an entry form, showing the currently selected assets and allowing for new selections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{# Include a hidden input first so Craft knows to update the existing value\n   if no checkboxes are checked. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{# Get all of the possible asset options #}\n{% set possibleAssets = craft.assets()\n  .volume('siteAssets')\n  .kind('image')\n  .orderBy('filename ASC')\n  .withTransforms([{ width: 100, height: 100 }])\n  .all() %}\n\n{# Get the currently related asset IDs #}\n{% set relatedAssetIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleAsset in possibleAssets %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleAsset.id,\n          { checked: possibleAsset.id in relatedAssetIds }\n        ) }}\n        {{ tag('img', { src: possibleAsset.url }) }}\n        {{ possibleAsset.getImg({ width: 100, height: 100 }) }}\n        {{ possibleAsset.filename }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Outputting Category Group Name using Twig\nDESCRIPTION: Demonstrates how to output a category group's name by directly rendering the CategoryGroupModel object in a template. When a CategoryGroupModel is output without specifying a property, it returns the group's name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorygroupmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>{{ categoryGroup }}</h3>\n```\n\n----------------------------------------\n\nTITLE: Using Global Set Variables in Craft CMS Twig\nDESCRIPTION: Shows how to use custom global set variables to display company information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n<p>{{ companyInfo.companyName }} was established in {{ companyInfo.yearEstablished }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Accessing Craft Services in Twig Templates\nDESCRIPTION: Access Craft's common services through the craft.app variable in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/README.md#2025-04-22_snippet_1\n\nLANGUAGE: Twig\nCODE:\n```\n{{ craft.app.someService }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Modal Response in Craft Controller\nDESCRIPTION: Shows how to create a modal response in a Craft CMS controller using CpModalResponseBehavior. The code demonstrates setting up the modal with an action, content template, and submit button.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nreturn $this->asCpModal()\n    ->action('my-plugin/emails/send')\n    ->contentTemplate('my-plugin/emails/transactional-body', $params)\n    ->submitButtonLabel(Craft::t('my-plugin', 'Send'));\n```\n\n----------------------------------------\n\nTITLE: Creating a Tag Query in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates how to create a new tag query using PHP in Craft CMS. It uses the Tag::find() method to initialize a tag query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Create a new tag query\n$myTagQuery = \\craft\\elements\\Tag::find();\n```\n\n----------------------------------------\n\nTITLE: Customizing CSRF Input Attributes\nDESCRIPTION: The csrfInput() function allows additional attributes to be set on the rendered tag by passing an options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput({\n  id: 'my-csrf-input',\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Variants in Twig\nDESCRIPTION: Demonstrates how to loop through all selected variants in a Commerce Variants field using the all() method in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for variant in entry.myFieldHandle.all() %}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Short Order Number in Twig\nDESCRIPTION: Shows how to output the short order number, which is the first seven characters of the full order number. This provides a more concise identifier that is still likely to be unique, useful for customer-facing displays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.shortNumber }}\n{# -> 706ffb9 #}\n```\n\n----------------------------------------\n\nTITLE: Implementing ComponentInterface in PHP\nDESCRIPTION: ComponentExample class implementing Craft's ComponentInterface for testing modules/plugins that require this interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\components\\ComponentExample\n```\n\n----------------------------------------\n\nTITLE: Fetching and Displaying News Entries with craft.entries in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve entries from a 'news' section, limit the results to 10 entries, and output them as article elements with title, summary, and a link to the full entry. The code shows the basic pattern for entry loops in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for entry in craft.entries.section('news').limit(10) %}\n  <article>\n    <h1><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h1>\n    {{ entry.summary }}\n    <a href=\"{{ entry.url }}\">Continue reading</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Registering Order Adjuster in PHP for Craft Commerce\nDESCRIPTION: Demonstrates how to register a custom order adjuster class using the 'registerOrderAdjusters' event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/adjusters.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Field Settings in PHP\nDESCRIPTION: Example of implementing settings for a custom field type by defining properties and a getSettingsHtml() method that renders a template with field settings form elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic bool $useSecurities = false;\n\n// ...\n\npublic function getSettingsHtml(): ?string\n{\n    return Craft::$app->getView()->renderTemplate('my-plugin/fields/currency/settings', [\n        'field' => $this,\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Invoking Console Command Test Method in PHP\nDESCRIPTION: Example of invoking the consoleCommand method to test a specific controller action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function testSomething()\n{\n    $this->consoleCommand('test-controller/test-action');\n}\n```\n\n----------------------------------------\n\nTITLE: Using the exit Tag with HTTP Status Code in Twig\nDESCRIPTION: Demonstration of Craft's exit tag with a parameter specifying an HTTP status code (404). This tag terminates template processing and returns the specified status code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# This is not the page you are looking for #}\n{% exit 404 %}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Date Fields - Twig\nDESCRIPTION: Example of querying entries with date field filtering for dates within the next month using Twig syntax. Uses atom filter for ISO-8601 timestamp conversion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/date-time-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set start = now|atom %}\n{% set end = now|date_modify('+1 month')|atom %}\n\n{% set entries = craft.entries()\n  .myFieldHandle(['and', \">= #{start}\", \"< #{end}\"])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Registering Twig Extension in Craft 3 PHP\nDESCRIPTION: Demonstrates how to register a Twig extension in Craft 3, replacing the addTwigExtension hook from Craft 2.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->view->registerTwigExtension($extension);\n```\n\n----------------------------------------\n\nTITLE: Using create Function with Configuration Hash in Twig\nDESCRIPTION: The create function can instantiate objects with predefined property values using a configuration hash.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set cookie = create({\n  class: 'yii\\\\web\\\\cookie',\n  name: 'foo',\n  value: 'bar'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Recipient Email Template in Twig\nDESCRIPTION: A Twig template example showing how to set the recipient email address dynamically from the order data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-status-emails.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.email }}\n```\n\n----------------------------------------\n\nTITLE: Auto-filling Addresses from Address Book - Twig Implementation\nDESCRIPTION: Shows how to implement address auto-fill functionality from a customer's saved address book. Includes radio button selection for saved addresses and handling for customers without saved addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n{% set customerAddresses = currentUser ? currentUser.addresses : [] %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% if customerAddresses | length %}\n    <div class=\"shipping-address\">\n      {% for address in customerAddresses %}\n        <label>\n          {{ input('radio', 'shippingAddressId', address.id, {\n            checked: cart.sourceShippingAddressId == address.id,\n          }) }}\n          {{ address|address }}\n        </label>\n      {% endfor %}\n    </div>\n\n    {# ... same process for `billingAddressId` ... #}\n  {% else %}\n    {# No existing addresses! See examples above to learn about sending a new address. #}\n  {% endif %}\n\n  <button>Save Addresses</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Variant Attributes in Craft Commerce Templates\nDESCRIPTION: Examples of how to access various attributes of a Variant model in Craft Commerce templates. These snippets demonstrate the usage of properties like title, price, stock, and sales information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/variant-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ variant.title }}\n{{ variant.price }}\n{{ variant.salePrice }}\n{{ variant.sku }}\n{{ variant.isDefault }}\n{{ variant.hasStock }}\n{{ variant.stock }}\n{{ variant.onSale }}\n{{ variant.salesApplied[0].description }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Custom Field Values in PHP\nDESCRIPTION: Demonstrates how to access custom field values on an element. Custom fields are accessed using the same object property syntax as built-in properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$body = $entry->myBodyField;\n```\n\n----------------------------------------\n\nTITLE: Implementing Project Config Rebuild Event Handler in PHP\nDESCRIPTION: Example of how to listen for the ProjectConfig::EVENT_REBUILD event and add plugin-specific configuration data during project config rebuilds. This code allows plugins to contribute their data when the 'php craft project-config/rebuild' command is executed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/project-config.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RebuildConfigEvent;\nuse craft\\services\\ProjectConfig;\nuse yii\\base\\Event;\n\nEvent::on(\n    ProjectConfig::class,\n    ProjectConfig::EVENT_REBUILD,\n    function(RebuildConfigEvent $e) {\n        // Add plugin's project config data...\n        $e->config['myPlugin']['key'] = $value;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Tax Rates in Twig and PHP\nDESCRIPTION: Shows how to retrieve all tax rates using the TaxRates service in both Twig and PHP. This returns an array of TaxRate models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getAllTaxRates() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getAllTaxRates();\n```\n\n----------------------------------------\n\nTITLE: Using relatedTo Parameter for Simple Relation Queries\nDESCRIPTION: Illustrates the basic usage of the relatedTo parameter to find elements related to a given element in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedDrinks = craft.entries.section('cocktails').relatedTo(cocktail) %}\n```\n\n----------------------------------------\n\nTITLE: Alternative Method for Retrieving User's Cart in Craft Commerce using Twig\nDESCRIPTION: This snippet shows an alternative way to retrieve the current user's cart using the craft.commerce.getCart() function. It produces the same result as the previous method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-cart.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.getCart() %}\n```\n\n----------------------------------------\n\nTITLE: Counting Matrix Blocks in Twig and PHP\nDESCRIPTION: Examples of counting the total number of Matrix blocks in a field without fetching the actual blocks, using the count() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set total = entry.myFieldHandle.count() %}\n<p>Total blocks: <strong>{{ total }}</strong></p>\n```\n\nLANGUAGE: php\nCODE:\n```\n$total = $entry->myFieldHandle->count();\n// Total blocks: $total\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query Event Handler - After Execution\nDESCRIPTION: Event handler for processing GraphQL query results after execution, using Craft's EVENT_AFTER_EXECUTE_GQL_QUERY event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ExecuteGqlQueryEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_AFTER_EXECUTE_GQL_QUERY,\n    function(ExecuteGqlQueryEvent $event) {\n        // Cache results from $event->result or just tweak them\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Loading Field Layout Provider with Craft Assets Query\nDESCRIPTION: Demonstrates how to load a field layout provider (a volume) and use it to query assets with specific field values. This example filters for long exposure photos based on shutter speed values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{# Load a field layout provider: #}\n{# set volume = craft.app.volumes.getVolumeByHandle('photos') %}\n{% set longExposures = craft.assets()\n  .volume('photos')\n  .andWhere('between', (fieldValueSql(volume, 'shutterSpeed')), 0.17, 1)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Control Panel Section\nDESCRIPTION: Shows how to enable a control panel section for a plugin by setting the hasCpSection property in the plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public bool $hasCpSection = true;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Running Queue via CLI Command\nDESCRIPTION: Basic command to manually process the queue from the command line interface. This will process all waiting jobs and then exit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft queue/run\n```\n\n----------------------------------------\n\nTITLE: Migrating Template Rendering - PHP\nDESCRIPTION: Shows changes in template rendering between Craft 2 and 3, including front-end template handling and controller actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\ncraft()->templates->render('pluginHandle/path/to/template', $variables);\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->view->renderTemplate('plugin-handle/path/to/template', $variables);\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags in Twig Template\nDESCRIPTION: Shows how to parse reference tags in a Twig template using the parseRefs filter with raw output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/reference-tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.body|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Fetching All Tax Zones in Craft Commerce\nDESCRIPTION: Demonstrates how to retrieve all tax zones using the TaxZones service in both Twig and PHP. This returns an array of TaxAddressZone models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set zones = craft.commerce\n  .getTaxZones()\n  .getAllTaxZones() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$zones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getAllTaxZones();\n```\n\n----------------------------------------\n\nTITLE: Using Color Field Values in Twig Templates with Conditional Styling\nDESCRIPTION: This snippet demonstrates how to use a Color field value in a Twig template to conditionally apply custom CSS styling. It checks if a color value exists and is not the default black (#000000) before applying it to links within the content area.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/color-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% block head %}\n  {{ parent() }}\n\n  {% if entry.linkColor and entry.linkColor != '#000000' %}\n    <style type=\"text/css\">\n      .content a {\n        color: {{ entry.linkColor }};\n      }\n    </style>\n  {% endif %}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Writing Temporary Files in Craft CMS\nDESCRIPTION: Illustrates how to generate and write temporary files using Craft's FileHelper and Path service. This approach ensures proper cleanup of temporary data via Craft's utilities.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/topics.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\FileHelper;\n\n$content = '# Todo List';\n\n$filename = 'todos.md';\n$tempDir = Craft::$app->getPath()->getTempPath();\n\n$path = $tempDir . DIRECTORY_SEPARATOR . uniqid() . $filename;\n\nFileHelper::writeToFile($path, $content);\n\n// Pass $path back to another part of the application...\n```\n\n----------------------------------------\n\nTITLE: Checking for Enabled Descendants in Twig\nDESCRIPTION: Alternative to the hasDescendants property that checks if the entry has any enabled descendants by counting the total returned from getDescendants() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set hasDescendants = entry.getDescendants().total() != 0 %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Cart Addresses in Twig\nDESCRIPTION: Shows how to access shipping and billing addresses from a cart object in Twig templates, demonstrating defensive coding to handle null values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.shippingAddress %}\n  {{ cart.shippingAddress.firstName }}\n  {# ... #}\n{% endif %}\n\n{% if cart.billingAddress %}\n  {{ cart.billingAddress.firstName }}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Numbers with the number Filter in Twig\nDESCRIPTION: The number filter formats numbers according to the user's preferred language. It supports decimals specification and accepts formatter options and text options for fine-tuning the output format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number }}\n{# Output: 1,000,000 #}\n\n{{ 1000000|number(2) }}\n{# Output: 1,000,000.00 #}\n\n{{ 1000000|number(null, { (constant('NumberFormatter::GROUPING_SIZE')): 4 }) }}\n{# Output: 100,0000 #}\n\n{{ (-5)|number(null, {}, { (constant('NumberFormatter::NEGATIVE_PREFIX')): '☹' }) }}\n{# Output: ☹5 #}\n\n{{ 'oh hai'|number }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Querying Table Field Data with GraphQL\nDESCRIPTION: Illustrates how to request Table field data, including specific column values, in a GraphQL query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/table-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  # (...) query for relevant entry\n  myFieldHandle {\n    whiskey\n    description\n    proof\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Loading Cart Form Implementation\nDESCRIPTION: Example form implementation for loading a cart using the commerce/cart/load-cart endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/load-cart') }}\n  {{ redirectInput('/shop/cart') }}\n\n  <input type=\"text\" name=\"number\" value=\"{{ cart.number }}\">\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating Subscription Queries in Twig and PHP\nDESCRIPTION: Examples showing how to create a new subscription query in both Twig and PHP. This is the first step in retrieving subscription data programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscriptions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new subscription query #}\n{% set mySubscriptionQuery = craft.subscriptions() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new subscription query\n$mySubscriptionQuery = \\craft\\commerce\\elements\\Subscription::find();\n```\n\n----------------------------------------\n\nTITLE: Accessing Cart Addresses in Twig\nDESCRIPTION: Shows how to access shipping and billing addresses from a cart object in Craft Commerce templates. The code checks if addresses exist before accessing their properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.shippingAddress %}\n  {{ cart.shippingAddress.firstName }}\n  {# ... #}\n{% endif %}\n\n{% if cart.billingAddress %}\n  {{ cart.billingAddress.firstName }}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Enabled Countries in Twig\nDESCRIPTION: Demonstrates how to retrieve all enabled countries and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries.allEnabledCountries %}\n<select>\n{% for country in countries %}\n  <option value=\"{{ country.id }}\">\n    {{- country.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Implementing Badge Count Method for Utilities\nDESCRIPTION: Example of implementing the badgeCount method for a utility to display notification counts. The implementation includes caching to improve performance and filtering results to only show actionable items for the current user.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/utilities.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic static function badgeCount(): int\n{\n    $user = Craft::$app->getUser()->getIdentity();\n\n    // Check the cache before querying, or set the cache for the default `cacheDuration`:\n    return Craft::$app->getCache()->getOrSet(\"my-plugin:utility-badge-count:{$user->uid}\", function() {\n        return Entry::find()\n            ->dateUpdated(\"<= {$now->modify('-1 month')->format(DateTime::ATOM)}\")\n            ->savable()\n            ->count();\n    });\n}\n```\n\n----------------------------------------\n\nTITLE: Conditional Statements in Twig\nDESCRIPTION: Shows various ways to use if, else, and elseif statements for conditional rendering in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <p>Hello, {{ currentUser.friendlyName }}</p>\n{% endif %}\n\n{% if currentUser %}\n  <a href=\"/logout\">Logout</a>\n{% else %}\n  <a href=\"/login\">Login</a>\n{% endif %}\n\n{% set hour = now|date('G') %}\n\n{% if hour < 12 %}\n  <p>Good morning, {{ currentUser.friendlyName }}</p>\n{% elseif hour < 17 %}\n  <p>Good afternoon, {{ currentUser.friendlyName }}</p>\n{% else %}\n  <p>Good evening, {{ currentUser.friendlyName }}</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Matrix Field Data Structure for Form Submission\nDESCRIPTION: A JSON example showing the structure required when submitting Matrix field data in a form. It includes existing blocks with IDs, a new block, and demonstrates the correct field value format for different field types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"sortOrder\": [\n    321,\n    654,\n    \"new:1\"\n  ],\n  \"blocks\": {\n    \"321\": {\n      \"type\": \"myFirstTypeHandle\",\n      \"fields\": {\n        \"myTextFieldHandle\": \"...\",\n        \"myAssetField\": [\n          4,\n          5,\n          6\n        ]\n      }\n    },\n    \"654\": {\n      \"type\": \"myOtherTypeHandle\",\n      \"fields\": {\n        \"myNumberField\": 42,\n        \"myDateField\": {\n          \"date\": \"2023-01-01\",\n          \"time\": \"00:00\",\n          \"timezone\": \"America/Los_Angeles\"\n        }\n      }\n    },\n    \"new:1\": {\n      \"type\": \"myFirstTypeHandle\",\n      \"fields\": {\n        \"myTextFieldHandle\": \"...\",\n        \"myAssetField\": []\n      }\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Automatic SKU Format Using Product Slug and Sequential Number\nDESCRIPTION: Example of generating a unique SKU format using the product slug and Craft's seq() function to create sequential numbers per product.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.product.slug }}-{{ seq(object.product.slug) }}\n```\n\n----------------------------------------\n\nTITLE: Requiring Guest Access in Twig Templates\nDESCRIPTION: Demonstrates how to ensure a user is not logged in using the requireGuest tag. Logged-in users are redirected to the post-login page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% requireGuest %}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Behavior Methods in PHP\nDESCRIPTION: This code shows how to use the custom behavior methods in PHP. It demonstrates checking if a product is eligible for financing and retrieving the monthly payment amount.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nif ($product->isFinanceable()) {\n    $priceFrom = $product->getFinancePriceFrom();\n}\n```\n\n----------------------------------------\n\nTITLE: Registering CP URL Rules in PHP\nDESCRIPTION: Example of registering custom control panel URL rules using the EVENT_REGISTER_CP_URL_RULES event in a plugin's init method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    Event::on(\n        UrlManager::class,\n        UrlManager::EVENT_REGISTER_CP_URL_RULES,\n        function(RegisterUrlRulesEvent $event) {\n            $event->rules['plugin-handle'] = 'plugin-handle/foo/bar';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Service Methods from Within Plugin Class\nDESCRIPTION: Example showing how to call a service method directly from within the plugin class using $this instead of getInstance().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$this->foo->bar()\n```\n\n----------------------------------------\n\nTITLE: Filtering Arrays by Values with where Filter in Twig\nDESCRIPTION: The where filter filters an array based on a condition function, returning only items that match the provided criteria. It uses Craft's ArrayHelper::where() method under the hood.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = { 'foo': 'bar', 'bar': 'baz', 'bat': 'bar' } %}\n{{ array|where(v => v == 'bar') }}\n{# Result: { 'foo': 'bar', 'bat': 'bar' } #}\n```\n\n----------------------------------------\n\nTITLE: Nesting Tag Elements in Twig Templates\nDESCRIPTION: Demonstrates how to nest tag elements to create complex HTML structures with dynamic content and attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'div' with {\n  class: 'foo',\n} %}\n  {% tag 'p' with {\n    class: 'welcome',\n  } -%}\n    Hello, {{ currentUser.friendlyName }}\n  {%- endtag %}\n{% endtag %}\n{# Output: <div class=\"foo\"><p class=\"welcome\">Hello, Tim</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Registering Hook Handlers in PHP\nDESCRIPTION: This code shows how to register a callback method for a template hook using the View::hook() method. The callback can modify the template context and return output string that will be inserted at the hook point.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/template-hooks.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getView()->hook('my-custom-hook-name', function(array &$context) {\n    // Modify template *context*\n    $context['foo'] = 'bar';\n\n    // Return *output*\n    return '<p>Hey!</p>';\n});\n```\n\n----------------------------------------\n\nTITLE: Equivalent ElementCriteriaModel Creation in Twig\nDESCRIPTION: Shows the expanded version of accessing entries, demonstrating the ElementCriteriaModel that's created behind the scenes with relation parameters, ordering by sortOrder, and no limit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  relatedTo: { sourceElement: entry, field: \"entriesFieldHandle\" },\n  order:     \"sortOrder\",\n  limit:     null\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Checking Field Values and Options\nDESCRIPTION: Examples of checking if options are selected and testing for specific values using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/checkboxes.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myCheckboxesFieldHandle | length %}\n  {# At least one option was selected! #}\n{% endif %}\n\n{% if entry.myCheckboxesFieldHandle.contains('foo') %}\n  {# `foo` was selected! #}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myCheckboxesFieldHandle)) {\n    // At least one option was selected!\n}\n\nif ($entry->myCheckboxesFieldHandle->contains('foo')) {\n    // `foo` was selected!\n}\n```\n\n----------------------------------------\n\nTITLE: Order Reference Number Format with Twig Template\nDESCRIPTION: Example of generating an order reference number using a Twig template that combines the order date with an ID. Shows how to format order references with year and order ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.dateOrdered|date('Y') }}-{{ id }}\n```\n\n----------------------------------------\n\nTITLE: Asserting Queue Operations in Craft CMS (PHP)\nDESCRIPTION: The assertPushedToQueue method is used for testing queue operations in Craft CMS. It allows developers to verify that specific jobs have been pushed to the queue during test execution.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nassertPushedToQueue()\n```\n\n----------------------------------------\n\nTITLE: Basic Craft Update Commands using DDEV and Generic CLI\nDESCRIPTION: Basic terminal commands to check and perform updates in Craft CMS environment\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nddev craft update\nphp craft update\n```\n\n----------------------------------------\n\nTITLE: Defining Sort Options for Element Indexes in PHP\nDESCRIPTION: Shows how to define sort options for element indexes by implementing the defineSortOptions() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSortOptions(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Nested Eager Loading\nDESCRIPTION: Demonstrates how to eager load nested relationships between elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .section('news')\n  .with([\n    'entriesField.assetsField'\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Zip Code Pattern Matching in Twig\nDESCRIPTION: Example of using Twig expression syntax to match zip code patterns for shipping zones. Demonstrates checking zip code prefixes and exact matches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/shipping.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nzipCode[0:2] == '60' or zipCode[0:2] == '70'\n```\n\nLANGUAGE: twig\nCODE:\n```\nzipCode in ['NG102', 'ZZ200', 'CC101']\n```\n\n----------------------------------------\n\nTITLE: Attaching the CraftVariable Behavior in init() Method\nDESCRIPTION: Event handler code to attach the custom behavior to the CraftVariable, making the products() method available in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\DefineBehaviorsEvent;\nuse craft\\web\\twig\\variables\\CraftVariable;\nuse mynamespace\\variables\\CraftVariableBehavior;\n\nEvent::on(\n    CraftVariable::class,\n    CraftVariable::EVENT_DEFINE_BEHAVIORS,\n    function(DefineBehaviorsEvent $e) {\n        $e->sender->attachBehaviors([\n            CraftVariableBehavior::class,\n        ]);\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using floor() Function to Round Numbers Down\nDESCRIPTION: Demonstrates the floor() function which rounds a number down to the nearest integer. This is useful for mathematical operations in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{{ floor(42.9) }}\n{# Output: 42 #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Radio Buttons Fields in PHP\nDESCRIPTION: Shows how to fetch entries with a specific option selected in a Radio Buttons field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Sample Console Command Action in PHP\nDESCRIPTION: Example of a simple console command action that outputs two messages in sequence, used to illustrate the importance of test method ordering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function actionSomething()\n{\n    $this->stdOut('first');\n    $this->stdOut('second');\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Order Reference Format with Date in Twig\nDESCRIPTION: Demonstrates creating a custom order reference number format combining the order date year and ID\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/orders.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.dateOrdered|date('Y') }}-{{ id }}\n```\n\n----------------------------------------\n\nTITLE: Translating Static Messages in Twig Templates\nDESCRIPTION: Demonstrates how to use the translate filter (|t) in Twig templates to make static messages translatable in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# old #}\n<a href=\"/contact\">Contact us</a>\n\n{# new #}\n<a href=\"/contact\">{{ 'Contact us'|t }}</a>\n```\n\n----------------------------------------\n\nTITLE: Default Values in Object Templates\nDESCRIPTION: Demonstrates the use of the null-coalescing operator for providing default values in object templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{parentUri ?? 'topics'}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Types in Craft CMS\nDESCRIPTION: This snippet demonstrates how to register custom GraphQL types using the Gql service's registerGqlTypes event. It registers a custom Widget interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\nuse craft\\events\\RegisterGqlTypesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_TYPES,\n    function(RegisterGqlTypesEvent $event) {\n        $event->types[] = WidgetInterface::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Database Query Conditions in PHP\nDESCRIPTION: Demonstrates proper syntax for database query conditions, including null handling and column name quoting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$query->where('foo.thing is null');\n$query->innerJoin('{{%bar}} bar', 'bar.fooId = foo.id');\n\n// Better:\n$query->where(['foo.thing' => null]);\n$query->innerJoin('{{%bar}} bar', '[[bar.fooId]] = [[foo.id]]');\n```\n\n----------------------------------------\n\nTITLE: Running a Queue Job in Craft CMS Unit Tests\nDESCRIPTION: Demonstrates how to run a queue job from a unit test in Craft CMS. This method allows testing of resource-intensive or long-running tasks in a separate process. It requires a $tester property in the test class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/queue.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->runQueue(MyJob::class, [\n    'param1' => 'value',\n    'param2' => 'value2'\n]);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single Country Information by ID (Twig and PHP)\nDESCRIPTION: Shows how to fetch detailed information for a specific country using its two-character ISO code. Returns a Country object with code, label, and locale information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# @var country CommerceGuys\\Addressing\\Country\\Country #}\n{% set country = craft.app.getAddresses().countryRepository.get('US') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n/** @var CommerceGuys\\Addressing\\Country\\Country $country **/\n$country = Craft::$app->getAddresses()->countryRepository->get('US');\n```\n\n----------------------------------------\n\nTITLE: Filtering Products with ElementCriteriaModel in Twig\nDESCRIPTION: Demonstrates how to add parameters to the ElementCriteriaModel returned by a Products field to filter the results.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.productsFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Ensuring Keyword-Specific Elements Appear in Search Results\nDESCRIPTION: Example demonstrating how to ensure a specific element appears at the top of search results when certain keywords are present in the search query, regardless of whether it would naturally match.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\SearchEvent;\nuse craft\\helpers\\StringHelper;\nuse craft\\services\\Search;\n\nEvent::on(\n    Search::class,\n    Search::EVENT_AFTER_SEARCH,\n    function(SearchEvent $e) {\n        // Make sure a result is always present (and highest-ranked) when certain keywords are used (anywhere in the query):\n        if (StringHelper::contains($e->query->getQuery(), 'salt', false)) {\n          // Find the highest score, or use `0` if there were no natural results:\n          $highestScore = max($e->scores ?: [0]);\n          $e->scores[12345] = $highestScore + 1;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Translation File Configuration in PHP\nDESCRIPTION: Example of a PHP translation file that maps source messages to their translated versions for German language.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Contact us' => 'Kontaktiere uns',\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Payment Form Attributes in Markdown\nDESCRIPTION: A markdown table showing the attributes, validation rules, and descriptions for payment form models handling credit card information in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/payment-form-models.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Attribute | Validation | Description |\n| --- | --- | --- |\n| `token` | not validated | If a token is present on the payment form, no validation of other fields is performed and the data is ignored. |\n| `firstName` | required | The first name on the customer's credit card. |\n| `lastName` | required | The last name of the customer's credit card. |\n| `month` | required, min: `1`, max: `12` | Integer representing the month of credit card expiry. |\n| `year` | required, min: current year, max: current year + 12 | Integer representing the year of credit card expiry. |\n| `CVV` | minLength: 3, maxLength: 4 | Integer found on the back of the card for security. |\n| `number` | [Luhn algorithm](https://en.wikipedia.org/wiki/Luhn_algorithm) | The credit card number itself. |\n| `threeDSecure` | not validated | A flag indicating whether 3D Secure authentication is being performed for the transaction. |\n```\n\n----------------------------------------\n\nTITLE: Implementing Feature Image Display in Twig\nDESCRIPTION: Template that handles feature image display with asset queries and conditional rendering. Includes image loading and fallback handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layout' %}\n\n{# Load the attached image: #}\n{% set featureImage = entry.featureImage.one() %}\n\n{% block content %}\n  {# Access a property of a variable using \"dot\" notation: #}\n  <h1>{{ entry.title }}</h1>\n\n  <time datetime=\"{{ entry.postDate | atom }}\">\n    {{ entry.postDate | date }}\n  </time>\n\n  {# Output the image, if one was found: #}\n  {% if featureImage %}\n    <div class=\"feature-image\">\n      {{ featureImage.getImg() }}\n    </div>\n  {% endif %}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Processing Commerce Addresses After Saving\nDESCRIPTION: Event handler for 'commerce_addresses.onSaveAddress' that uses a class method rather than a closure. This demonstrates an alternative way to handle events by referencing a class method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_addresses.onSaveAddress', ['MyClass', 'saveAddressHandlerMethod']);\n```\n\n----------------------------------------\n\nTITLE: Requiring Codeception in Composer JSON for Craft CMS Testing\nDESCRIPTION: To run tests using the Craft testing framework, you need to include Codeception as a dependency in your project's composer.json file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/codeception.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"codeception/codeception\"\n```\n\n----------------------------------------\n\nTITLE: Array Grouping by Common Properties\nDESCRIPTION: Demonstrates grouping array items based on common properties, specifically blog entries by year.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set allEntries = craft.entries.section('blog').find() %}\n{% set allEntriesByYear = allEntries|group('postDate.year') %}\n\n{% for year, entriesInYear in allEntriesByYear %}\n  <h2>{{ year }}</h2>\n\n  <ul>\n    {% for entry in entriesInYear %}\n      <li><a href=\"{{ entry.url }}\">{{ entry.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Tag Checkbox List in Twig\nDESCRIPTION: Demonstrates how to create a list of checkboxes for selecting tags in a Twig template, including handling of existing relations and ordering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleTags = craft.entries()\n  .group('blogEntryTags')\n  .orderBy('title ASC')\n  .all() %}\n\n{% set relatedTagIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleTag in possibleTags %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleTag.id,\n          { checked: possibleTag.id in relatedTagIds }\n        ) }}\n        {{ possibleTag.title }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Setting Up Order Variable for PDF Preview in Twig\nDESCRIPTION: This Twig code snippet sets up the order variable for previewing PDF templates. It checks if the current user is an admin and fetches the order based on the order number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pdfs.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser and currentUser.admin %}\n  {% set order = order ?? craft.orders()\n    .number(orderNumber)\n    .one() %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Form Actions Configuration\nDESCRIPTION: Configuration example for adding multiple form actions with different behaviors and keyboard shortcuts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set formActions = [\n  {\n    label: 'Save and continue editing'|t('plugin-handle'),\n    redirect: 'plugin-handle/edit/{id}',\n    retainScroll: true,\n    shortcut: true,\n  },\n  {\n    label: 'Save and add another'|t('plugin-handle'),\n    redirect: 'plugin-handle/new',\n    shortcut: true,\n    shift: true,\n  },\n  {\n    label: 'Delete'|t('plugin-handle'),\n    confirm: 'Are you sure you want to delete this?'|t('plugin-handle'),\n    redirect: 'plugin-handle',\n    destructive: true,\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tags Field Data in PHP\nDESCRIPTION: Examples of how to access and work with Tags field data in PHP, including looping through related tags and checking for their existence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/tags.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n\n$relatedTags = $entry->myFieldHandle->all();\nif (count($relatedTags)) {\n    foreach ($relatedTags as $rel) {\n        // \\craft\\helpers\\UrlHelper::url('tags/' . $rel->slug)\n        // $rel->title\n    }\n}\n\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // \\craft\\helpers\\UrlHelper::url('tags' . $rel->slug)\n    // $rel->title\n}\n\nif ($entry->myFieldHandle->exists()) {\n    // There are related tags!\n}\n\n$relatedTags = $entry->myFieldHandle\n    ->group('blogEntryTags')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Requiring Permissions in Craft CMS Controllers\nDESCRIPTION: This snippet shows how to require a specific permission in a controller action using the requirePermission() method. If the user doesn't have the required permission, a 403 error will be returned.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/user-permissions.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function actionStayUpLate()\n{\n    // Require the `stayUpLate` permission\n    $this->requirePermission('stayUpLate');\n}\n```\n\n----------------------------------------\n\nTITLE: Converting and Formatting Currency in Twig\nDESCRIPTION: This snippet demonstrates how to use the commerceCurrency Twig filter to convert and format a price in the cart's payment currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/currencies.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ variant.salePrice|commerceCurrency(\n  cart.paymentCurrency,\n  convert = true\n) }}\n```\n\n----------------------------------------\n\nTITLE: CRON Job Configuration\nDESCRIPTION: Example CRON configuration to run the queue every 5 minutes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n*/5 * * * * /usr/bin/env php /var/www/craft queue/run\n```\n\n----------------------------------------\n\nTITLE: Checking for Existence of Related Categories in Twig and PHP\nDESCRIPTION: Demonstrates how to check if there are any related categories without actually fetching them, using the exists() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related categories!</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // do something with related categories\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Single Item with Options and Notes\nDESCRIPTION: Form that adds an item to the cart with additional line item options like engraving and giftwrap, plus a customer note field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n{% set variant = product.defaultVariant %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('qty', 1) }}\n  <input type=\"text\" name=\"note\" value=\"\">\n  <select name=\"options[engraving]\">\n    <option value=\"happy-birthday\">Happy Birthday</option>\n    <option value=\"good-riddance\">Good Riddance</option>\n  </select>\n  <select name=\"options[giftwrap]\">\n    <option value=\"yes\">Yes Please</option>\n    <option value=\"no\">No Thanks</option>\n  </select>\n  {{ hiddenInput('purchasableId', variant.id) }}\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Accessing Loop Variables Inside Switch Statements in Twig\nDESCRIPTION: This example demonstrates how to access Twig's loop variable inside a {% switch %} tag when the switch statement is used within a {% for %} loop. It requires storing the loop index in a separate variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/switch.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for matrixBlock in entry.matrixField %}\n    {% set loopIndex = loop.index %}\n\n    {% switch matrixBlock.type %}\n\n        {% case \"text\" %}\n\n            Loop #{{ loopIndex }}\n\n    {% endswitch %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Multiple Sets Eager Loading\nDESCRIPTION: Example showing how to eager load multiple sets of related elements simultaneously.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/eager-loading-elements.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries\n  .section('news')\n  .with([\n    'assetsField',\n    'matrixField'\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating New Craft Project\nDESCRIPTION: Creates a new Craft CMS installation with automated setup of project directory and environment configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro create\nWhat is the name of the project? example\nEnter the hostname [example] example.test\nDownloading Craft CMS...\nCreating project folder example...\nAdded example.test to config file\nApply changes from config? [yes]\nMounting ~/sites/example to nitro-dev\nAdding site example.test to nitro-dev\nApplied changes from /Users/oli/.nitro/nitro-dev.yaml\n```\n\n----------------------------------------\n\nTITLE: Searching for Users by Email in Craft CMS\nDESCRIPTION: Examples of searching for users with email addresses ending in '@craftcms.com' using Twig, GraphQL, and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set users = craft.users()\n  .search('email:@craftcms.com')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  users(search: \"email:@craftcms.com\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\User::find()\n    ->search('email:@craftcms.com')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Adding Elements to Arrays with push Filter in Twig\nDESCRIPTION: The push filter appends one or more items to the end of an array and returns the new array. This is useful for building arrays dynamically in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|push('bar', 'baz') %}\n{# Result: ['foo', 'bar', 'baz'] #}\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Checked Options in Craft CMS\nDESCRIPTION: Examples of looping through checked options in a Checkboxes field using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle %}\n  Label: {{ option.label }}\n  Value: {{ option }} or {{ option.value }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $option) {\n    // label: $option->label\n    // value: $option or $option->value\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Multiple Items to Cart\nDESCRIPTION: Example showing how to add multiple product variants to the cart in a single form submission using a purchasables array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n  {{ successMessageInput('Products added to the cart.') }}\n  {% for variant in product.variants %}\n     {{ hiddenInput('purchasables[' ~ loop.index ~ '][id]', variant.id) }}\n     {{ hiddenInput('purchasables[' ~ loop.index ~ '][qty]', 1) }}\n  {% endfor %}\n  <button>Add all variants to cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying All Sales in Craft Commerce with Twig\nDESCRIPTION: A Twig snippet that loops through all sales in the system and displays the name and description of each sale. This uses the craft.commerce.sales.allSales method which returns an array of Sale models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/sales.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for sale in craft.commerce.sales.allSales %}\n  {{ sale.name }} - {{ sale.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Entry Types with entryType Function\nDESCRIPTION: Demonstrates how to use the entryType function to get a reference to an entry type by its handle, and how to use it in front-end forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set type = entryType('post') %}\n\n{{ type.name }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n\n  {{ hiddenInput('typeId', entryType('post').id) }}\n\n  {# ... #}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining Database Environment Variables in .env File for Craft CMS\nDESCRIPTION: Example of setting up environment variables in a .env file for a Craft CMS project. These variables define database connection settings and other configuration options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/db-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nENVIRONMENT=\"dev\"\nSECURITY_KEY=\"\"\nDB_DRIVER=\"mysql\"\nDB_SERVER=\"<host>\"\nDB_PORT=\"<port>\"\nDB_DATABASE=\"<dbname>\"\nDB_USER=\"root\"\nDB_PASSWORD=\"\"\nDB_SCHEMA=\"public\"\nDB_TABLE_PREFIX=\"\"\n```\n\n----------------------------------------\n\nTITLE: Checking Available Updates in Craft CMS via Terminal\nDESCRIPTION: Command to check available updates for Craft CMS and plugins using the craft update console command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update\n```\n\n----------------------------------------\n\nTITLE: Displaying FontAwesome Icons with Webfonts in Twig\nDESCRIPTION: This snippet demonstrates how to display a FontAwesome icon using the webfonts method in a Twig template. The value from an Icon Field is used in the class name of an HTML element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/icon.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<i class=\"fa-solid fa-{{ entry.myIconField }}\"></i>\n```\n\n----------------------------------------\n\nTITLE: Accessing Time Field Values in Twig and PHP\nDESCRIPTION: Examples of accessing and formatting time field values in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/time.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set time = entry.myTimeFieldHandle %}\n\n{% if entry.myFieldHandle %}\n  Selected time: {{ entry.myFieldHandle|time('short') }}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$time = $entry->myTimeFieldHandle;\n\nif ($entry->myFieldHandle) {\n    $selectedTime = \\Craft::$app->getFormatter()->asTime(\n        $entry->myFieldHandle, \n        'short'\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Users from a Specific Group in Twig\nDESCRIPTION: Shows how to create a user query, set the group parameter, fetch users, and display them in a list. This example specifically targets users in the 'Authors' group.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a user query with the 'group' parameter #}\n{% set myUserQuery = craft.users()\n  .group('authors') %}\n\n{# Fetch the users #}\n{% set users = myUserQuery.all() %}\n\n{# Display the list #}\n<ul>\n  {% for user in users %}\n    <li><a href=\"{{ url('authors/'~user.username) }}\">{{ user.name }}</a></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Registering a Class-Level Event Handler in Craft CMS\nDESCRIPTION: This example shows how to register a class-level event handler that will be triggered after a user is activated. The handler creates and sends a custom welcome email to the newly activated user. Class-level handlers are typically attached from a plugin's init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse yii\\base\\Event;\nuse craft\\services\\Users;\nuse craft\\events\\UserEvent;\n\nEvent::on(\n    Users::class,\n    Users::EVENT_AFTER_ACTIVATE_USER,\n    function(UserEvent $e) {\n        $message = Craft::$app->getMailer()\n            ->composeFromKey('custom.welcome')\n            ->setTo($e->user);\n\n        // ...\n\n        $message->send();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Basic Element Class for Products in PHP\nDESCRIPTION: Creates a base Product element class by extending Craft's Element class and implementing essential display name methods. Defines basic properties for price and currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements;\n\nuse craft\\base\\Element;\n\nclass Product extends Element\n{\n    public static function displayName(): string\n    {\n        return 'Product';\n    }\n\n    public static function pluralDisplayName(): string\n    {\n        return 'Products';\n    }\n\n    public int $price = 0;\n    public ?string $currency = null;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Saving Both Addresses Simultaneously in Craft Commerce Twig Template\nDESCRIPTION: This snippet shows how to save both billing and shipping addresses at once using the 'saveAddressesOnOrderComplete' parameter. It includes checks for existing addresses and user authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% if currentUser and ((cart.billingAddressId and not cart.sourceBillingAddressId) or (cart.shippingAddressId and not cart.sourceShippingAddressId)) %}\n    {{ input('checkbox', 'saveAddressesOnOrderComplete', 1, {checked: cart.saveBillingAddressOnOrderComplete and cart.saveShippingAddressOnOrderComplete}) }}\n  {% endif %}\n\n  {# ... #}\n\n  <button>Save Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using removeClass Filter to Remove CSS Classes in Twig\nDESCRIPTION: Shows how to use the removeClass filter to remove one or more CSS classes from an HTML tag, with examples of removing a single class or multiple classes using an array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass('orange') }}\n{# Result: <p class=\"apple banana\">A classy bit of text.</p> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass(['orange', 'banana']) }}\n{# Result: <p class=\"apple\">A classy bit of text.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Matrix Blocks - Twig Example\nDESCRIPTION: Shows how to create a Matrix block query with parameters, fetch the blocks, and display their contents in a loop using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/matrix-blocks.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a Matrix block query with the 'owner', 'fieldId', and 'type' parameters #}\n{% set myMatrixBlockQuery = craft.matrixBlocks()\n  .owner(myEntry)\n  .fieldId(10)\n  .type('text') %}\n\n{# Fetch the Matrix blocks #}\n{% set matrixBlocks = myMatrixBlockQuery.all() %}\n\n{# Display their contents #}\n{% for block in matrixBlocks %}\n  <p>{{ block.text }}</p>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Pretty-Printing JSON Field Value in Twig\nDESCRIPTION: Shows how to pretty-print the JSON field value using the .getJson() method with formatting options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<pre>{{ entry.myJsonField.getJson(true) }}</pre>\n```\n\nLANGUAGE: html\nCODE:\n```\n<pre>{\n  \"appId\": \"3beb8a4e-de95-448b-be44-ee19ab8cbe5e\",\n  \"environment\": \"production\"\n}</pre>\n```\n\n----------------------------------------\n\nTITLE: Conditional Logic in Object Templates\nDESCRIPTION: Shows how to use conditional logic within object templates, combining Twig syntax with compact notation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.level == 1 ? 'topics' : object.parent.uri }}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Automatic HTML Encoding of Attribute Values in Tag Template Tag in Twig\nDESCRIPTION: Illustrates how attribute values are automatically HTML-encoded when using the '{% tag %}' template tag. This is useful for preventing XSS vulnerabilities when using dynamic attribute values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'p' with {\n  title: 'Hello & Welcome',\n} %}\n  Hello, {{ currentUser.friendlyName }}\n{% endtag %}\n{# Output: <p title=\"Hello &amp; Welcome\">Hello, Tim</p> #}\n```\n\n----------------------------------------\n\nTITLE: Using Twig Filters with Dynamic Entry Titles in Craft CMS\nDESCRIPTION: Examples of applying Twig filters to entry properties in dynamic title formats, showing both standard Twig syntax and Craft's shortcut syntax for referencing entry properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/sections-and-entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.postDate|date('M j, Y') }}\n{postDate|date('M j, Y')}\n```\n\n----------------------------------------\n\nTITLE: Fetching Store Address in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve the store's primary address using both the global currentStore variable and the Stores service in Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set storeAddress = craft.commerce\n  .getStores()\n  .getStoreByHandle('eu')\n  .getSettings()\n  .getLocationAddress() %}\n\n{# ...or... #}\n\n{% set storeAddress = currentStore\n  .getSettings()\n  .getLocationAddress() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$storeAddress = \\craft\\commerce\\Plugin::getInstance()\n    ->getStores()\n    ->getStoreByHandle('eu')\n    ->getSettings()\n    ->getLocationAddress();\n\n// ...or...\n\n$storeAddress = \\craft\\commerce\\Plugin::getInstance()\n    ->getStores()\n    ->getCurrentStore()\n    ->getSettings()\n    ->getLocationAddress();\n```\n\n----------------------------------------\n\nTITLE: Extracting Values from Arrays with values Filter in Twig\nDESCRIPTION: The values filter returns all values from an array without custom keys, creating a new sequential array. This is useful when you need just the values without their associated keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = {foo: 'Foo', bar: 'Bar'} %}\n{% set arr2 = arr1|values %}\n{# arr2 = ['Foo', 'Bar'] #}\n```\n\n----------------------------------------\n\nTITLE: Setting Matrix Block Sort Order with Twig in Craft CMS\nDESCRIPTION: This snippet demonstrates how to create hidden input fields to maintain the order of existing Matrix blocks. It loops through block IDs and creates a hidden input for each one to preserve their order when the form is submitted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry is defined %}\n  {% for blockId in entry.myFieldHandle.anyStatus().ids() %}\n    {{ hiddenInput('fields[myFieldHandle][sortOrder][]', blockId) }}\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Radio Button Options in Twig\nDESCRIPTION: Demonstrates how to iterate through all available options in a Radio Buttons field using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:    {{ option.label }}\n  Value:    {{ option }} or {{ option.value }}\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Example Purchasable JSON Snapshot in Craft Commerce\nDESCRIPTION: A comprehensive example of a JSON snapshot that gets created when a purchasable becomes a line item. This snapshot preserves all details about the product at the time of purchase, including pricing, dimensions, stock information, and product metadata.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/purchasables.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"productId\": \"29\",\n  \"isDefault\": \"1\",\n  \"sku\": \"ANT-001\",\n  \"price\": 20,\n  \"sortOrder\": \"1\",\n  \"width\": null,\n  \"height\": null,\n  \"length\": null,\n  \"weight\": null,\n  \"stock\": \"0\",\n  \"hasUnlimitedStock\": \"1\",\n  \"minQty\": null,\n  \"maxQty\": null,\n  \"deletedWithProduct\": false,\n  \"id\": \"30\",\n  \"tempId\": null,\n  \"draftId\": null,\n  \"revisionId\": null,\n  \"uid\": \"076305ef-17c5-4433-99de-bf5fb090f704\",\n  \"fieldLayoutId\": null,\n  \"contentId\": \"23\",\n  \"enabled\": \"1\",\n  \"archived\": \"0\",\n  \"siteId\": \"1\",\n  \"title\": \"A New Toga\",\n  \"slug\": \"ant-001\",\n  \"uri\": null,\n  \"dateCreated\": \"2020-06-29T09:12:02-07:00\",\n  \"dateUpdated\": \"2020-06-29T09:12:03-07:00\",\n  \"dateDeleted\": null,\n  \"trashed\": false,\n  \"propagateAll\": false,\n  \"newSiteIds\": [],\n  \"resaving\": false,\n  \"duplicateOf\": null,\n  \"previewing\": false,\n  \"hardDelete\": false,\n  \"ref\": null,\n  \"status\": \"enabled\",\n  \"structureId\": null,\n  \"url\": \"https://foo.dev/shop/products/ant-001?variant=30\",\n  \"isAvailable\": true,\n  \"isPromotable\": true,\n  \"shippingCategoryId\": 1,\n  \"taxCategoryId\": 1,\n  \"onSale\": false,\n  \"cpEditUrl\": \"#\",\n  \"product\": {\n    \"postDate\": \"2020-06-29T09:12:02-07:00\",\n    \"expiryDate\": null,\n    \"typeId\": \"1\",\n    \"taxCategoryId\": \"1\",\n    \"shippingCategoryId\": \"1\",\n    \"promotable\": \"1\",\n    \"freeShipping\": null,\n    \"enabled\": \"1\",\n    \"availableForPurchase\": true,\n    \"defaultVariantId\": \"30\",\n    \"defaultSku\": \"ANT-001\",\n    \"defaultPrice\": \"20.0000\",\n    \"defaultHeight\": \"0.0000\",\n    \"defaultLength\": \"0.0000\",\n    \"defaultWidth\": \"0.0000\",\n    \"defaultWeight\": \"0.0000\",\n    \"taxCategory\": null,\n    \"name\": null,\n    \"id\": \"29\",\n    \"tempId\": null,\n    \"draftId\": null,\n    \"revisionId\": null,\n    \"uid\": \"71a2efe8-163f-4014-9ffc-b8272d469a7e\",\n    \"fieldLayoutId\": null,\n    \"contentId\": \"22\",\n    \"archived\": \"0\",\n    \"siteId\": \"1\",\n    \"title\": \"A New Toga\",\n    \"slug\": \"ant-001\",\n    \"uri\": \"shop/products/ant-001\",\n    \"dateCreated\": \"2020-06-29T09:12:02-07:00\",\n    \"dateUpdated\": \"2020-06-29T09:12:02-07:00\",\n    \"dateDeleted\": null,\n    \"trashed\": false,\n    \"propagateAll\": false,\n    \"newSiteIds\": [],\n    \"resaving\": false,\n    \"duplicateOf\": null,\n    \"previewing\": false,\n    \"hardDelete\": false,\n    \"ref\": null,\n    \"status\": \"live\",\n    \"structureId\": null,\n    \"url\": \"https://foo.dev/shop/products/ant-001\"\n  },\n  \"description\": \"A New Toga\",\n  \"purchasableId\": \"30\",\n  \"options\": [],\n  \"sales\": []\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Category Data in Craft CMS Templates\nDESCRIPTION: Twig code demonstrating how to access category data in Craft CMS templates, including the category title and ancestor categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/categories.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ category.title }}\n{# -> \"Sour Aromatics\" #}\n\n{{ category.ancestors.collect()\n  .select('title')\n  .join(' / ') }}\n{# -> \"Sour & Fermented / Sour\" #}\n```\n\n----------------------------------------\n\nTITLE: Customer Order History Template in Twig\nDESCRIPTION: Template for displaying authenticated customer's order history with links to individual orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% requireLogin %}\n\n{% set orders = craft.orders()\n  .customer(currentUser)\n  .isCompleted(true)\n  .orderBy('dateOrdered DESC')\n  .all() %}\n\n<ul>\n  {% for order in orders %}\n    <li><a href=\"{{ siteUrl(\"account/orders/#{order.number}\") }}\">Order {{ order.reference }}</a> ({{ order.total|commerceCurrency }})</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Categories by Product Type ID in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve tax categories for a specific product type using its ID in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.commerce\n  .getTaxCategories()\n  .getTaxCategoriesByProductTypeId(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$category = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories()\n    ->getTaxCategoriesByProductTypeId(123);\n```\n\n----------------------------------------\n\nTITLE: Redirecting Users in Twig Templates\nDESCRIPTION: Shows how to use the redirect tag to send users to a different URL based on conditions. This example redirects non-member users to a pricing page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if not user or not user.isInGroup('members') %}\n  {% redirect \"pricing\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Time Durations with duration Filter in Twig\nDESCRIPTION: The 'duration' filter converts a DateInterval object or number of seconds into a human-friendly duration text using Craft's DateTimeHelper::humanDuration() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n<p>Posted {{ entry.postDate.diff(now)|duration(false) }} ago.</p>\n```\n\n----------------------------------------\n\nTITLE: Basic Address Formatting with Twig Filter\nDESCRIPTION: Demonstrates the basic usage of the |address filter to output a formatted address with HTML markup.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress|address }}\n{# Output:\n  <p translate=\"no\">\n    <span class=\"address-line1\">1234 Balboa Towers Circle</span><br>\n    <span class=\"locality\">Los Angeles</span>, <span class=\"administrative-area\">CA</span> <span class=\"postal-code\">92662</span><br>\n    <span class=\"country\">United States</span>\n  </p>\n#}\n```\n\n----------------------------------------\n\nTITLE: Defining GraphQL Field Complexity in PHP for Craft CMS\nDESCRIPTION: This snippet shows how to define a complexity value for a GraphQL field in Craft CMS. It uses the Gql service's relatedArgumentComplexity method to calculate the complexity based on eager loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\n// ...\n'children' => [\n    'name' => 'children',\n    'args' => WidgetArguments::getArguments(),\n    'type' => Type::listOf(WidgetInterface::getType()),\n    'description' => 'Widget's children. Accepts same arguments as `widgets` query.',\n    'complexity' => Gql::relatedArgumentComplexity(\n        GqlService::GRAPHQL_COMPLEXITY_EAGER_LOAD\n    ),\n],\n// ...\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Assets in PHP\nDESCRIPTION: PHP code that checks whether an Assets field has any related assets without fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // do something with related assets\n}\n```\n\n----------------------------------------\n\nTITLE: Order Lookup Example with Twig\nDESCRIPTION: Complete example showing how to look up and display an order using its order number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the requested order number from the query string #}\n{% set orderNumber = craft.app.request.getQueryParam('number') %}\n\n{# Create an order query with the 'number' parameter #}\n{% set myOrderQuery = craft.orders()\n  .number(orderNumber) %}\n\n{# Fetch the order #}\n{% set order = myOrderQuery.one() %}\n\n{# Make sure it exists #}\n{% if not order %}\n  {% exit 404 %}\n{% endif %}\n\n{# Display the order #}\n<h1>Order {{ order.getShortNumber() }}</h1>\n<!-- ... -->\n```\n\n----------------------------------------\n\nTITLE: Handling Before Send Email Event in Craft Commerce\nDESCRIPTION: This code demonstrates how to intercept the beforeSendEmail event. It allows for preventing the email from being sent by setting the isValid property to false based on business rules or client preferences.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_45\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\MailEvent;\nuse craft\\commerce\\services\\Emails;\nuse yii\\base\\Event;\n\nEvent::on(Emails::class, Emails::EVENT_BEFORE_SEND_MAIL, function(MailEvent $e) {\n     // Maybe prevent the email based on some business rules or client preferences.\n});\n```\n\n----------------------------------------\n\nTITLE: Generating Dynamic Entry Titles with Twig in Craft CMS\nDESCRIPTION: Examples of using Twig syntax to create dynamic entry titles in Craft CMS. Demonstrates both normal and shortcut Twig syntax, as well as the use of filters and conditionals.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.postDate|date('M j, Y') }}\n{postDate|date('M j, Y')}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|date('Y-m-d') }}\n{{ currentUser.username }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if object.postDate %}{postDate|date('M j, Y')}{% else %}{{ now|date('M j, Y') }}{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Sending GraphQL Requests with Variables using cURL\nDESCRIPTION: Example of sending a GraphQL request with variables using cURL. This demonstrates how to include both a query and variables in a POST request with JSON content type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ncurl \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n        \"query\": \"query($id:[Int]) { entries(id: $id) { id, title } }\",\n        \"variables\": { \"id\": [1, 2, 3] }\n      }' \\\n  http://my-project.tld/api\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States Grouped by Country ID in PHP\nDESCRIPTION: Shows how to retrieve all enabled states grouped by country ID using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n$commerce = \\craft\\commerce\\Plugin::getInstance();\n\n$statesByCountryId = $commerce->getStates()\n    ->getAllEnabledStatesAsListGroupedByCountryId();\n\nforeach ($statesByCountryId as $countryId => $states) {\n    $country = $commerce->getCountries()->getCountryById($countryId);\n    foreach ($states as $stateId => $stateName) {\n        // $country->name\n        // $stateId\n        // $stateName\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Postal Code Formula Examples\nDESCRIPTION: Examples of Twig expressions for matching postal codes in tax zone conditions, showing pattern matching and list comparison.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\npostalCode[0:2] == '60' or postalCode[0:2] == '70'\n```\n\nLANGUAGE: twig\nCODE:\n```\npostalCode in ['NG102', 'NG103', 'NG104']\n```\n\n----------------------------------------\n\nTITLE: Creating Plugin Install Migration in Craft CMS\nDESCRIPTION: Command for creating a special Install migration for a plugin that handles installation and uninstallation processes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/create install --plugin=my-plugin-handle\n```\n\n----------------------------------------\n\nTITLE: Implementing a Quantity-Based Discount Adjuster in Craft Commerce\nDESCRIPTION: Example of a custom adjuster class that applies a $5 discount when the order quantity is 10 or more. It implements the Commerce_AdjusterInterface and conditionally returns an array of Commerce_OrderAdjustmentModel objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/adjusters.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nclass BusinessLogic_Discounter implements Commerce_AdjusterInterface\n{\n\n    public function adjust(Commerce_OrderModel &$order, array $lineItems = [])\n    {\n\n        $myAdjuster = new Commerce_OrderAdjustmentModel();\n\n        if ($order->totalQty >= 10) {\n            $order->baseDiscount = $order->baseDiscount - 5;\n            $myAdjuster->type = 'Discount';\n            $myAdjuster->name = 'Discount for more than 10 items';\n            $myAdjuster->description = 'Discount of $5 for more than 10 items in the cart';\n            $myAdjuster->amount = -5.0;\n            $myAdjuster->orderId = $order->id;\n            $myAdjuster->optionsJson = ['lineItemsAffected' => null];\n            $myAdjuster->included = false;\n\n            return [$myAdjuster];\n        }\n\n        return [];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables in Craft CMS (PHP)\nDESCRIPTION: Example of defining environmentVariables for multi-environment configurations. These variables can be accessed in URL and Path settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n'environmentVariables' => array(\n    'baseAssetUrl'  => '//my-project.tld/',\n    'baseAssetPath' => './',\n),\n```\n\n----------------------------------------\n\nTITLE: Setting Existing Address in Cart Update Form\nDESCRIPTION: Example of updating cart with an existing shipping address ID. When shippingAddressId is provided, any shipping address form data will be ignored.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<form method=\"post\">\n <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n {{ redirectInput('shop/shipping') }}\n {{ csrfInput() }}\n <input type=\"hidden\" name=\"shippingAddressId\" value=\"5\"/>\n <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\"/>\n <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\"/>\n //...\n</form>\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query with Arguments for Filtering Widgets\nDESCRIPTION: This GraphQL query demonstrates how to use arguments to filter results, specifically fetching only approved widgets. Arguments provide a way to narrow GraphQL query results based on specific criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_6\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  widgets(approved: true) {\n    title\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Twig requireLogin Tag\nDESCRIPTION: Demonstrates how to use Craft's requireLogin tag to restrict page access to logged-in users only.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# A user must be logged in to visit this page #}\n{% requireLogin %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Products Field in Twig\nDESCRIPTION: Basic example of accessing selected products through a Products field handle in a Twig template. Returns an element query for the selected products.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.productsFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Viewing Daemonized Worker Logs in Bash\nDESCRIPTION: Commands to view logs for daemonized workers using journalctl and supervisorctl.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_13\n\nLANGUAGE: bash\nCODE:\n```\njournalctl -u craft-queue-worker.service\n```\n\nLANGUAGE: bash\nCODE:\n```\nsupervisorctl tail craft-queue-worker\n```\n\n----------------------------------------\n\nTITLE: Resilient Template for Handling Draft Content in Twig\nDESCRIPTION: This Twig code snippet demonstrates how to safely handle potentially missing field data when rendering drafts in live preview. It checks if a value exists before outputting it, preventing template errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/drafts-revisions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Attempt to load the field's value: #}\n{% set topic = entry.primaryTopic.one() %}\n\n{# Check if anything came back: #}\n{% if topic %}\n    <span class=\"topic-flag\">{{ topic.title }}</span>\n{% else %}\n    {# Optional: Fallback output! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Language-specific Content and Translation in Twig\nDESCRIPTION: This snippet shows how to display language-specific content and use Craft's static translation feature in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.app.language == 'de' %}\n  <p>I like bread and beer.</p>\n{% endif %}\n\n{{ \"Welcome!\"|t }}\n```\n\n----------------------------------------\n\nTITLE: Customizing Database Column Type in PHP\nDESCRIPTION: Shows how to define the database column type for a field type by implementing the defineContentAttribute method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    public function defineContentAttribute()\n    {\n        return AttributeType::Number;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Products by Type in Twig\nDESCRIPTION: Demonstrates how to retrieve products of a specific type using the craft.commerce.products API and filtering by type handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/product-types.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothes = craft.commerce.products.type('clothes').find() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Content to Sales Index View in Twig\nDESCRIPTION: This hook enables insertion of content after the main content in the sales index view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.sales.index\" %}\n```\n\n----------------------------------------\n\nTITLE: Outputting Money Field Values using Twig Filter\nDESCRIPTION: Uses the 'money' Twig filter to format and output the value of a Money field in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/money.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle|money %}\n```\n\n----------------------------------------\n\nTITLE: Referencing Craft's runQueueAutomatically Config Setting\nDESCRIPTION: This snippet shows how to reference the runQueueAutomatically configuration setting in Craft CMS. This setting determines whether the queue should be run automatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\nrunQueueAutomatically\n```\n\n----------------------------------------\n\nTITLE: Creating Global Set Queries in Twig and PHP\nDESCRIPTION: Shows how to create a new global set query in both Twig and PHP for fetching global sets programmatically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/globals.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new global set query #}\n{% set myGlobalSetQuery = craft.globalSets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new global set query\n$myGlobalSetQuery = \\craft\\elements\\GlobalSet::find();\n```\n\n----------------------------------------\n\nTITLE: Message Parameters Translation in PHP\nDESCRIPTION: Demonstrates how to use placeholder values in translations with a German translation example.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Welcome back, {name}' => 'Willkommen zurück {name}',\n];\n```\n\n----------------------------------------\n\nTITLE: Modifying User Sortable Attributes in Craft CMS\nDESCRIPTION: Hook to modify the attributes that users can be sorted by in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyUserSortableAttributes(&$attributes)\n{\n    $attributes['id'] = Craft::t('ID');\n}\n```\n\n----------------------------------------\n\nTITLE: Variable Definition and Usage\nDESCRIPTION: Shows how to define and use variables in Twig templates, including string concatenation and usage in HTML structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set title = \"About Us\" %}\n{% set docTitle = title ~ \" | ACME, Inc.\" %}\n\n<html>\n  <head>\n    <title>{{ docTitle }}</title>\n  </head>\n  <body>\n    <h1>{{ title }}</h1>\n    <!-- ... -->\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Rendering Payment Methods Form in Twig\nDESCRIPTION: Demonstrates how to create a form for selecting payment methods using the craft.commerce.paymentMethods variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% if not craft.commerce.paymentMethods|length %}\n  <p>No payment methods available.</p>\n{% endif %}\n\n{% if craft.commerce.paymentMethods|length %}\n<form method=\"post\" id=\"paymentMethod\" class=\"form-inline\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/checkout/payment\">\n  {{ getCsrfInput() }}\n\n  <label for=\"\">Payment Method</label>\n  <select id=\"paymentMethodId\" name=\"paymentMethodId\" class=\"form-control\" >\n      {% for id,name in craft.commerce.paymentMethods %}\n          <option value=\"{{ id }}\" {% if id == cart.paymentMethod.id %}selected{% endif %}>\n            {{- name -}}\n          </option>\n      {% endfor %}\n  </select>\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving States by Shipping Zone ID in Craft Commerce\nDESCRIPTION: Gets all states belonging to a specific shipping zone, returning an array of State objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states.statesByShippingZoneId(shippingZoneId) %}\n  <option value=\"{{ state.id }}\">\n    {{- state.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->statesByShippingZoneId($shippingZoneId);\nforeach ($states as $state) {\n    // $state->id\n    // $state->name\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Matrix Blocks by Type in Twig\nDESCRIPTION: Shows how to filter Matrix blocks by specific block types using the type parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.type('text') %}\n  {{ block.text|markdown }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Explicit Address IDs for Cart in Craft Commerce\nDESCRIPTION: Demonstrates how to explicitly set both shipping and billing addresses by their IDs in a cart update form. This approach doesn't use the 'same as' flags and directly assigns each address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customers.customer.addresses|first %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('shippingAddressId', address.id) }}\n  {{ hiddenInput('billingAddressId', address.id) }}\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Retrieving All Sites in Craft CMS Twig\nDESCRIPTION: Demonstrates how to get all sites for the current Craft installation using the craft.app.sites service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set sites = craft.app.sites.allSites() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Element Sources in PHP\nDESCRIPTION: Shows how to define sources for element index filtering and organization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSources(string $context = null): array\n{\n    return [\n        [\n            'key' => '*',\n            'label' => 'All Products',\n            'criteria' => []\n        ],\n        [\n            'heading' => Craft::t('plugin-handle', 'Currencies'),\n        ],\n        [\n            'key' => 'cad',\n            'label' => 'CAD',\n            'criteria' => [\n                'currency' => 'cad',\n            ]\n        ],\n        [\n            'key' => 'usd',\n            'label' => 'USD',\n            'criteria' => [\n                'currency' => 'usd',\n            ],\n            'defaultSort' => ['price', 'desc'],\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Null Handling for Lightswitch Fields in Twig\nDESCRIPTION: Shows two methods for customizing null handling when querying elements with Lightswitch fields. The first example explicitly includes null values, while the second uses a 'strict' option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set headlines = craft.entries()\n  .section(['essays', 'bulletins'])\n  .isFeatured([true, null])\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set headlines = craft.entries()\n  .section(['essays', 'bulletins'])\n  .isFeatured({\n    value: true,\n    strict: true,\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Basic Commerce Configuration in PHP\nDESCRIPTION: Example of setting basic Commerce configuration options in a config/commerce.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/configure.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'purgeInactiveCartsDuration' => 'P1D',\n];\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript on Window Load\nDESCRIPTION: Demonstrates using the POS_LOAD constant to register JavaScript that runs when the window has finished loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Page has finished loading.');\n{% endset %}\n\n{% do view.registerJs(js, POS_LOAD) %}\n```\n\n----------------------------------------\n\nTITLE: Listing Sales in Twig\nDESCRIPTION: Demonstrates how to list all sales set up in the system using the craft.commerce.sales variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% for sale in craft.commerce.sales %}\n{{ sale.name }} - {{ sale.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Primary Address Selection Form in Twig\nDESCRIPTION: A Twig template code snippet for creating form inputs that allow users to set primary shipping and billing addresses. Includes hidden inputs for proper state management when unchecking boxes and visible checkboxes that reflect the current primary status of addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Make primary shipping address? #}\n{{ hiddenInput('isPrimaryShipping', 0) }}\n<label>\n  {{ input('checkbox', 'isPrimaryShipping', 1, {\n    checked: address.isPrimaryShipping\n  }) }}\n  Set as primary shipping address\n</label>\n\n{{ hiddenInput('isPrimaryBilling', 0) }}\n<label>\n  {{ input('checkbox', 'isPrimaryBilling', 1, {\n    checked: address.isPrimaryBilling\n  }) }}\n  Set as primary billing address\n</label>\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_SECRETS_PATH in PHP\nDESCRIPTION: Specifies the path to a secrets file containing sensitive values that are not loaded into the environment. This example checks for a 'secrets.php' file in the parent directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n// Check the `secrets.php` file next to this script for sensitive values:\ndefine('CRAFT_SITE', dirname(__DIR__) . 'secrets.php');\n```\n\n----------------------------------------\n\nTITLE: Embedding Template with Block Overrides in Twig\nDESCRIPTION: This snippet shows how to embed a template and override specific blocks within it, allowing for more flexibility than simple includes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% embed '_tip.twig' %}\n  {% block content %}\n    <p>I'm a helpful tip!</p>\n  {% endblock %}\n{% endembed %}\n```\n\n----------------------------------------\n\nTITLE: Advanced Cart Cookie Configuration in PHP\nDESCRIPTION: Configuration for customizing cart cookie behavior including duration and parameters through application configuration in config/app.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/configure.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'plugins' => [\n            'pluginConfigs' => [\n                'commerce' => [\n                    'components' => [\n                        'carts' => [\n                            'cartCookie' => [\n                                // Add custom key-value cookie params\n                            ],\n                            // Set the cart expiry to one month\n                            'cartCookieDuration' => 2629800,\n                        ],\n                    ],\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Fetching Administrative Areas by Market (Twig and PHP)\nDESCRIPTION: Shows how to retrieve states/administrative areas that are part of Commerce's configured store market. Returns results keyed by country code with state codes and names as values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set storeStates = craft.commerce\n  .getStore()\n  .getStore()\n  .getAdministrativeAreasListByCountryCode() %}\n\n{% for countryCode, states in storeStates %}\n  <h2>{{ countryCode }}</h2>\n  <select name=\"myState\">\n    {% for code, name in states %}\n      <option value=\"{{ code }}\">{{ name }}</option>\n    {% endfor %}\n  </select>\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$storeStates = \\craft\\commerce\\Plugin::getInstance()\n    ->getStore()\n    ->getStore()\n    ->getAdministrativeAreasListByCountryCode();\n\nforeach ($storeStates as $countryCode => $states) {\n  // $countryCode\n  foreach ($states as $code => $name) {\n    // $code\n    // $name\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring APC Cache in Craft CMS with PHP\nDESCRIPTION: Configuration to use APC/APCu for cache storage in Craft CMS. This sets up the ApcCache class with APCu enabled, a key prefix, and default duration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\ApcCache::class,\n                'useApcu' => true,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        }\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Products in Twig\nDESCRIPTION: This snippet demonstrates how to access related products via a products field's handle in a Twig template. It returns a product query that can be executed or further refined.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.myProductFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Categories as a Hierarchical List with the nav Tag\nDESCRIPTION: Shows how to display related categories as a hierarchical list using Twig's nav tag, maintaining the parent-child relationships.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% nav rel in relatedCategories %}\n      <li>\n        <a href=\"{{ rel.url }}\">{{ rel.title }}</a>\n        {% ifchildren %}\n          <ul>\n            {% children %}\n          </ul>\n        {% endifchildren %}\n      </li>\n    {% endnav %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Parsing Markdown in Plain Text Field in Twig\nDESCRIPTION: Shows how to parse a plain text field's value as Markdown using the 'markdown' or 'md' filter in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.summary %}\n  <h3>Summary</h3>\n  {{ entry.summary|md }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Comparing Objects and Values in Twig\nDESCRIPTION: Demonstrates the use of the 'same as' test and property comparison for comparing objects and values in Twig, particularly useful when dealing with Craft CMS elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{% set category = entry.topic.one() %}\n{% set relatedPosts = craft.entries\n  .section('blog')\n  .relatedTo(category)\n  .all() %}\n\n{% for post in relatedPosts %}\n  {% if post is not same as(entry) %}\n    {# Whoops! Our original post is still output in the related items! #}\n  {% endif %}\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.id == relatedEntry.id %}\n  {# Same entry! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Re-indexing Assets in Craft CMS\nDESCRIPTION: Console commands to update Craft's asset indexes when files are modified outside the CMS. The commands can target all volumes or a specific volume by handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# Re-index all volumes:\nphp craft index-assets/all\n\n# Re-index a specific volume:\nphp craft index-assets/one myVolumeHandle\n```\n\n----------------------------------------\n\nTITLE: Ordering Search Results by Score in Craft CMS (Twig, GraphQL, PHP)\nDESCRIPTION: Demonstrates how to order search results by relevance score in Twig, GraphQL, and PHP. This uses the special 'score' value to sort results from best match to worst match.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set results = craft.entries()\n  .search('foo')\n  .orderBy('score')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  entries(search: \"foo\", orderBy: \"score\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$results = \\craft\\elements\\Entry::find()\n    ->search('foo')\n    ->orderBy('score')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Referencing Cart and Customer in Craft Commerce Templates\nDESCRIPTION: These snippets show how to reference the cart and customer objects in Craft Commerce templates. However, the document warns against using these in email templates due to potential session-related errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\ncraft.commerce.carts.cart\n```\n\nLANGUAGE: twig\nCODE:\n```\ncraft.commerce.customers.customer\n```\n\n----------------------------------------\n\nTITLE: Using unique Filter for Array Deduplication in Twig\nDESCRIPTION: Shows how to use the unique filter to remove duplicate values from an array using PHP's array_unique() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_39\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = ['Larry', 'Darryl', 'Darryl'] %}\n{{ array|unique }}\n{# Result: ['Larry', 'Darryl'] #}\n```\n\n----------------------------------------\n\nTITLE: Matrix Field Relations Query\nDESCRIPTION: Example of querying related elements through a Matrix field using dot notation for specific block type fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/relations.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries()\n    .section('ingredients')\n    .relatedTo({\n        sourceElement: drink,\n        field: 'ingredientsMatrix.relatedIngredient'\n    })\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Coupon Code to Cart Form in Twig\nDESCRIPTION: This snippet demonstrates how to create a form in Twig for adding a coupon code to the cart. It includes error handling and displays the current coupon code if one exists.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/coupon-codes.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Added coupon code.\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n\n  <input type=\"text\"\n         name=\"couponCode\"\n         value=\"{{ cart.couponCode }}\"\n         class=\"{% if cart.getFirstError('couponCode') %}has-error{% endif %}\"\n         placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <input type=\"submit\" value=\"Update Cart\"/>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Array Element Removal\nDESCRIPTION: Shows how to remove specific elements from an array using the without filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries.section('articles').limit(3).find %}\n{% set firstEntry = entries[0] %}\n{% set remainingEntries = entries|without(firstEntry) %}\n```\n\n----------------------------------------\n\nTITLE: Module Base Class Implementation\nDESCRIPTION: Basic module class template with initialization logic and namespace configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/module-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace foo;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace\n        Craft::setAlias('@foo', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'foo\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'foo\\\\controllers';\n        }\n\n        parent::init();\n\n        // Custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'numeric' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'numeric' test to check if a variable is numeric using PHP's is_numeric() method. Shows examples with different data types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'twenty-three' is numeric ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Updating All Craft CMS Components via Terminal\nDESCRIPTION: This command updates Craft CMS core, Commerce, and all other plugins simultaneously. It should be used with caution after reviewing all relevant release notes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/update.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update all\n```\n\n----------------------------------------\n\nTITLE: Filtering Asset Queries by Type in PHP\nDESCRIPTION: PHP code that filters an Assets field query to only return images by setting the kind parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$relatedAssets = (clone $entry->myFieldHandle)\n    ->kind('image')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Updating Purchasable SKU and Related Tables in PHP\nDESCRIPTION: This code snippet shows how to update the SKU of a purchasable and related database tables when restoring a soft-deleted purchasable. It ensures SKU uniqueness and updates necessary records.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/purchasables.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif ($found) {\n\n    $this->sku = $this->getSku() . '-1'; // make unique\n\n    // Update variant table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_variants}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n\n    if ($this->isDefault) {\n        Craft::$app->getDb()->createCommand()->update('{{%commerce_products}}',\n            ['defaultSku' => $this->sku],\n            ['id' => $this->productId]\n        )->execute();\n    }\n\n    // Update purchasable table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_purchasables}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart with Existing Address ID in Twig/HTML\nDESCRIPTION: This snippet shows a form to update the cart with an existing address ID for both shipping and billing addresses. It uses the 'sameAddress' parameter to set both addresses to the same value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/update-cart-addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customer.addresses|first %}\n\n<form method=\"post\">\n    <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n    <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n    <input type=\"hidden\" name=\"shippingAddressId\" value=\"{{ address.id }}\">\n    <input type=\"hidden\" name=\"sameAddress\" value=\"1\">\n    <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing Preview Support in Nuxt with GraphQL\nDESCRIPTION: Example of implementing preview functionality in a Nuxt.js application using GraphQL API. Shows how to handle preview tokens and fetch entry data with dynamic routing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_3\n\nLANGUAGE: vue\nCODE:\n```\n<script setup>\nconst route = useRoute();\n\n// Construct a GraphQL fragment using the route param:\nconst query = `{\n  entry(slug: \"${route.params.slug}\") {\n    title\n    description\n  }\n}`;\n\n// Fetch the incoming token:\nconst token = route.query.token;\n\n// Build the URL, with `query` and `token` params:\nconst { data: gql } = await useFetch('https://my-project.ddev.site/api', {\n  params: { query, token },\n});\n</script>\n\n<template>\n  <article>\n    <h1>{{ gql.data.entry.title }}</h1>\n    <code>{{ gql.data.entry.uid }}</code>\n  </article>\n</template>\n```\n\n----------------------------------------\n\nTITLE: Setting Default Cart Shipping Address in Craft Commerce (PHP)\nDESCRIPTION: This hook allows setting a default shipping address on the cart when no address is present. It should return a Commerce_AddressModel of an existing address in the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_defaultCartShippingAddress(){\n\n    $address = craft()->commerce_addresses->getAddressById($myId);\n    return $address;\n\n}\n```\n\n----------------------------------------\n\nTITLE: Defining GraphQL Mutations in PHP for Craft CMS\nDESCRIPTION: This class implements getMutations() to return a list of available mutations for widgets. It checks permissions, creates a resolver instance, and defines mutations for creating, saving, and deleting widgets based on schema permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\mutations;\n\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\Widget;\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutationResolver;\nuse craft\\gql\\base\\Mutation;\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends Mutation\n{\n    public static function getMutations(): array\n    {\n        // Make sure we should be able to mutate widgets\n        if (!GqlHelper::canMutateWidgets()) {\n            return [];\n        }\n\n        $mutations = [];\n\n        // Create an instance of our mutation resolver\n        $resolver = Craft::createObject(WidgetMutationResolver::class);\n\n        if (GqlHelper::canSchema('widget', 'edit')) {\n            // Create a new widget\n            $mutations['createWidget'] = [\n                'name' => 'createWidget',\n                'args' => [\n                    'title' => Type::nonNull(Type::string())\n                ],\n                'resolve' => [$resolver, 'saveWidget'],\n                'description' => 'Saves a new widget.',\n                'type' => Widget::getType(),\n            ];\n        }\n\n        if (GqlHelper::canSchema('widget', 'save')) {\n            // Save an existing widget\n            // ...\n        }\n\n        if (GqlHelper::canSchema('widget', 'delete')) {\n            // Delete a widget\n            // ...\n        }\n\n        return $mutations;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Store Location in Templates\nDESCRIPTION: Shows how to access and display a store's location address in templates using Twig filters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/stores.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set store = order.store %}\n{{ store.settings.locationAddress|address }}\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags with Twig Filter\nDESCRIPTION: Shows how to parse reference tags in template content using the parseRefs filter combined with the raw filter for proper rendering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/reference-tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.body|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Setting Selected Subnav Item in Twig Template\nDESCRIPTION: Demonstrates how to set the selected subnav item in a Twig template using the selectedSubnavItem variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-section.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set selectedSubnavItem = 'bar' %}\n```\n\n----------------------------------------\n\nTITLE: Migrating registerSiteRoutes Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the registerSiteRoutes plugin hook from Craft 2 to an event listener in Craft 3 for registering site routes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_SITE_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['cocktails/new'] = ['template' => 'cocktails/_edit'];\n        $event->rules['cocktails/<widgetId:\\d+>'] = 'cocktails/edit-cocktail';\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Secure Redirect Input in Object Templates\nDESCRIPTION: Shows a secure way to use the redirectInput() function with object templates, avoiding potential security risks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(currentUser.isInGroup('supporters') ? 'account/receipts' : 'tip/thanks') }}\n```\n\n----------------------------------------\n\nTITLE: Using rss Filter for Formatting Dates in Twig\nDESCRIPTION: Shows how to use the rss filter to output a date in the format required for RSS feeds, with optional timezone conversion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|rss }}\n{# Expires: Wed, 31 May 2023 12:23:09 -0700 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% header 'Expires: ' ~ expiry|httpdate('CET') %}\n{# Expires: Thu, 08 Apr 2021 21:00:00 +0000 #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Users Fields in Craft CMS\nDESCRIPTION: Demonstrates how to fetch entries with related users using both Twig and PHP in Craft CMS. The example shows querying for entries that have at least one related user.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related user\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Sequential Order Number Generation\nDESCRIPTION: Shows how to generate sequential order numbers using the seq() function with year-based sequences.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.dateOrdered|date('Y') }}-{{ seq(object.dateOrdered|date('Y'), 8) }}\n```\n\n----------------------------------------\n\nTITLE: Reactivating Canceled Subscriptions Template in Twig\nDESCRIPTION: Template for reactivating a previously canceled subscription. Includes a condition check for reactivation eligibility and posts to the commerce/subscriptions/reactivate endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscription-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if subscription.canReactivate() %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ hiddenInput('action', 'commerce/subscriptions/reactivate') }}\n    {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n\n    <button type=\"submit\" class=\"button link\">Reactivate</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Active Record Implementation with Soft Delete Support\nDESCRIPTION: Demonstrates how to add soft delete support to an Active Record class using SoftDeleteTrait.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\ActiveRecord;\nuse craft\\db\\SoftDeleteTrait;\n\nclass MyRecord extends ActiveRecord\n{\n    use SoftDeleteTrait;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Iterating Through All Options in Craft CMS\nDESCRIPTION: Examples of looping through all available options in a Checkboxes field using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:   {{ option.label }}\n  Value:   {{ option }} or {{ option.value }}\n  Checked: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // label:   $option->label\n    // value:   $option or $option->value\n    // checked: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Global Sets to Entries via CLI\nDESCRIPTION: Demonstrates the use of a console command to convert global sets to entries in Craft 4.4+. This command helps in migrating global sets to singles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/globals.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/global-set myGlobalSetHandle\n```\n\n----------------------------------------\n\nTITLE: Iterating Over Tags in a Specific Group Using Twig\nDESCRIPTION: This snippet demonstrates how to loop through tags from a specific group named 'blogTags' and create a list of links to individual tag pages. It uses the craft.tags variable with the group parameter to filter tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for tag in craft.tags.group('blogTags') %}\n  <li><a href=\"{{ url('blog/tags/'~tag.id) }}\">{{ tag.title }}</a></li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Handling Receive Subscription Payment Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes when a subscription payment is received. Useful for payment processing and notifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_41\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionPaymentEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_RECEIVE_SUBSCRIPTION_PAYMENT, function(SubscriptionPaymentEvent $e) {\n    // Do something - perhaps update the loyalty reward data.\n});\n```\n\n----------------------------------------\n\nTITLE: Fetching Cart via AJAX\nDESCRIPTION: JavaScript example showing how to fetch cart data via AJAX endpoint returning JSON response.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nfetch('/actions/commerce/cart/get-cart', {\n  headers: {\n    'Accept': 'application/json',\n  },\n})\n  .then(r => r.json())\n  .then(console.log);\n\n// -> { cart: { ... } }\n```\n\n----------------------------------------\n\nTITLE: Creating Partial Template for Inclusion in Twig\nDESCRIPTION: This snippet demonstrates creating a reusable partial template that accepts variables. This pattern is useful for component-based templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  <p>{{ tipText }}</p>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Setting Dynamic Recipient Email Address with Twig\nDESCRIPTION: Example of using the order object to dynamically set the recipient email address to the customer who placed the order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/emails.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.email }}\n```\n\n----------------------------------------\n\nTITLE: Accessing PHP Constants with constant() Function in Twig\nDESCRIPTION: Demonstrates how to access various types of PHP constants in Twig templates, including native PHP constants, Craft-defined constants, and class constants.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# You can fetch native PHP constants... #}\n{{ constant('PHP_VERSION') }}\n\n{# ...constants defined by Craft... #}\n{{ constant('CRAFT_BASE_PATH') }}\n\n{# ...and even class constants: #}\n{{ constant('craft\\\\elements\\\\Entry::STATUS_LIVE') }}\n```\n\n----------------------------------------\n\nTITLE: Checking Specific Option Selection in Craft CMS\nDESCRIPTION: Examples of checking if a specific option is selected in a Checkboxes field using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.contains('foo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->contains('foo')) {\n```\n\n----------------------------------------\n\nTITLE: Configuring Garbage Collection Probability in PHP\nDESCRIPTION: Configuration options for setting garbage collection probability in Craft CMS's app.php config file. Values represent chances from 0 (disabled) to 10000 (1 in 100).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/gc.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'gc' => [\n            'probability' => 0,     // no chance\n            'probability' => 1,     // 1 in 1,000,000\n            'probability' => 10,    // 1 in 100,000 (default)\n            'probability' => 100,   // 1 in 10,000\n            'probability' => 1000,  // 1 in 1,000\n            'probability' => 10000, // 1 in 100\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Checking for Existence of Related Categories in Twig and PHP\nDESCRIPTION: Shows how to check if any related categories exist without actually fetching them in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related categories!</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // do something with related categories\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Configuration Values in Craft CMS (PHP)\nDESCRIPTION: Basic example of how to structure configuration values in the craft/config/general.php file. This snippet shows how to enable Dev Mode and disable compressed JavaScript.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    'devMode' => true,\n    'useCompressedJs' => false,\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Default Address to Cart in Craft Commerce\nDESCRIPTION: Creates a form that adds the customer's first saved address as both shipping and billing address. Uses hidden form fields to set the shipping address ID and indicates billing should match shipping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customers.customer.addresses|first %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('shippingAddressId', address.id) }}\n  {{ hiddenInput('billingAddressSameAsShipping', '1') }}\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining PHP Constants for Craft Testing in YAML\nDESCRIPTION: Example of defining required PHP constants for Craft testing in the tests/_bootstrap.php file. These constants specify paths for storage, templates, config, migrations, translations, and vendor directories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/config-options.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nCRAFT_STORAGE_PATH: '/path/to/storage'\nCRAFT_TEMPLATES_PATH: '/path/to/templates'\nCRAFT_CONFIG_PATH: '/path/to/config'\nCRAFT_MIGRATIONS_PATH: '/path/to/migrations'\nCRAFT_TRANSLATIONS_PATH: '/path/to/translations'\nCRAFT_VENDOR_PATH: '/path/to/vendor'\n```\n\n----------------------------------------\n\nTITLE: Markdown Processing with markdown Filter\nDESCRIPTION: Processes text using Markdown with support for different flavors and inline-only parsing\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n# Everything You Need to Know About Computer Keyboards\n\nThe only *real* computer keyboard ever made was famously\nthe [Apple Extended Keyboard II] [1].\n\n    [1]: https://www.flickr.com/photos/gruber/sets/72157604797968156/\n{% endset %}\n\n{{ content|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Saving a Field Layout in PHP\nDESCRIPTION: Code to save a field layout using Craft's Fields service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getFields()->saveLayout($fieldLayout);\n```\n\n----------------------------------------\n\nTITLE: Disabling Order Recalculation in PHP\nDESCRIPTION: Example of temporarily disabling order recalculation when saving an order by setting the recalculation mode to NONE, then restoring the original mode after saving.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/upgrading.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$originalRecalculationMode = $order->getRecalculationMode();\n$order->setRecalculationMode(\\craft\\commerce\\elements\\Order::RECALCULATION_MODE_NONE);\n\nCraft::$app->elements->saveElement($order);\n\n// restore original mode to avoid unexpected issues with other events, plugins, etc.\n$order->setRecalculationMode($originalRecalculationMode);\n```\n\n----------------------------------------\n\nTITLE: Canceling a Subscription in Twig for Craft Commerce\nDESCRIPTION: Template for creating a subscription cancellation form. This assumes a subscription variable is available and uses the commerce/subscriptions/cancel action to process the cancellation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/subscription-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"commerce/subscriptions/cancel\">\n  <input type=\"hidden\" name=\"subscriptionUid\" value=\"{{ subscription.uid|hash }}\" />\n  {{ redirectInput('shop/services') }}\n\n  {{ subscription.plan.getGateway().getCancelSubscriptionFormHtml()|raw }}\n\n  <button type=\"submit\">{{ \"Unsubscribe\"|t('commerce') }}</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using actionInput Function in Twig\nDESCRIPTION: The actionInput function outputs a hidden input used to route a POST request to a controller action. It can include optional additional attributes via the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user') }}\n```\n\n----------------------------------------\n\nTITLE: Overriding Named Transform Properties\nDESCRIPTION: This snippet demonstrates how to override specific properties of a named transform by passing both the transform name and override parameters in a hash to setTransform().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({\n  transform: 'thumb',\n  quality: 100,\n}) %}\n\n<img\n  src=\"{{ asset.url }}\"\n  width=\"{{ asset.width }}\"\n  height=\"{{ asset.height }}\">\n```\n\n----------------------------------------\n\nTITLE: Registering Guest Customer as User on Checkout in Twig\nDESCRIPTION: This snippet demonstrates how to add a checkbox to the cart update form, allowing guests to register for a user account during checkout. It sets the 'registerUserOnOrderComplete' flag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-customer.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n {{ redirectInput('shop/cart') }}\n {{ csrfInput() }}\n <label for=\"registerUserOnOrderComplete\">\n  <input type=\"checkbox\" id=\"registerUserOnOrderComplete\" name=\"registerUserOnOrderComplete\" value=\"1\" /> Register me for a user account\n </label>\n <input type=\"submit\" value=\"Update Cart\"/>\n<form>\n```\n\n----------------------------------------\n\nTITLE: Creating a Multiple File Upload Field in Craft CMS Front-end Forms\nDESCRIPTION: HTML markup for creating a multiple file upload input for an Assets field in a front-end entry form, using the multiple attribute and array notation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_9\n\nLANGUAGE: markup\nCODE:\n```\n<input type=\"file\" name=\"fields[assetsFieldHandle][]\" multiple>\n```\n\n----------------------------------------\n\nTITLE: Replacing Shipping Adjuster in PHP for Craft Commerce\nDESCRIPTION: Illustrates how to replace the default Shipping adjuster with a custom one in Craft Commerce using event handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/adjusters.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse craft\\commerce\\adjusters\\Shipping;\nuse MyShippingAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $adjusters = $event->types;\n\n        foreach ($adjusters as $key => $adjuster) {\n            if ($adjuster == Shipping::class) {\n                $adjusters[$key] = MyShippingAdjuster::class;\n            }\n        }\n\n        $event->types = $adjusters;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount Information by Coupon Code in Twig\nDESCRIPTION: This snippet shows how to retrieve and display the discount information associated with the current coupon code in the cart. It checks if a discount exists before displaying its name and description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/coupon-codes.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discounts.getDiscountByCode(cart.couponCode) %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Loops in Twig\nDESCRIPTION: Shows how to use the 'for' tag to loop over items in an array or hash in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% set todoList = [\n  'Finish design',\n  'Build HTML & CSS',\n  'Manage content with Craft'\n] %}\n\n<ol class=\"todo\">\n  {% for item in todoList %}\n    <li>{{ item }}</li>\n  {% endfor %}\n</ol>\n```\n\n----------------------------------------\n\nTITLE: Comprehensive Variant Display Example in Twig\nDESCRIPTION: A more complex example showing how to display selected variants, including accessing the parent product and creating a list of links. This snippet also demonstrates setting the variants to a variable for easier reuse.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set variants = entry.myFieldHandle.all() %}\n\n{% if variants|length %}\n  <h3>Consider buying these:</h3>\n  <ul>\n    {% for variant in variants %}\n      {% set product = variant.getProduct() %}\n      <li>\n        <a href=\"{{ product.url }}\">\n          {{ product.title ~ ': ' ~ variant.title }}\n        </a>\n      </li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Anonymous Access to Controller Actions\nDESCRIPTION: Demonstrates how to configure controller actions to allow anonymous access.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/controllers.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientsController extends BaseController\n{\n    protected $allowAnonymous = array('actionSaveIngredient');\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Multi-select Field Data\nDESCRIPTION: Shows how to access Multi-select field data from an element in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Registering Control Panel URL Rules for Element Index in Craft CMS\nDESCRIPTION: This event listener registers a control panel URL rule for a custom element index page, mapping a URL pattern to a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function (RegisterUrlRulesEvent $event) {\n        $event->rules['products'] = ['template' => 'my-plugin/products/_index.twig'];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Handling Line Item Addition to Order\nDESCRIPTION: This event fires after a line item has been added to an order. It provides access to the line item and a flag indicating whether it's a new item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Order;\nuse yii\\base\\Event;\n\nEvent::on(Order::class, Order::EVENT_AFTER_ADD_LINE_ITEM, function(Event $e) {\n    $lineItem = $e->lineItem;\n    $isNew = $e->isNew;\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing availableForUseWithOrder Method in PHP\nDESCRIPTION: This method determines if the gateway should be available as a payment option for a given order. In this example, it only allows the gateway for orders with billing addresses in Australia.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/payment-gateway-types.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\npublic function availableForUseWithOrder(\\craft\\commerce\\elements\\Order $order): bool\n{\n    // only allow this gateway for orders in Australia\n    return $order->getBillingAddress()->countryIso === 'AU';\n}\n```\n\n----------------------------------------\n\nTITLE: Getting a Single Related Category in Twig and PHP\nDESCRIPTION: Shows how to fetch only the first related category and check if it exists before using it in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ rel.url }}\">{{ rel.title }}</a></p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // do something with $rel->url and $rel->title\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Save Payment Source Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a payment source is saved. Allows for pre-save validation or modification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\PaymentSourceEvent;\nuse craft\\commerce\\services\\PaymentSources;\nuse yii\\base\\Event;\n\nEvent::on(PaymentSources::class, PaymentSources::EVENT_BEFORE_SAVE_PAYMENT_SOURCE, function(PaymentSourceEvent $e) {\n    // Do something\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Current Site Name in Craft CMS Twig\nDESCRIPTION: Shows how to output the name of the current site using the currentSite variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ currentSite.name }}\n```\n\n----------------------------------------\n\nTITLE: Order Reference Number Format Example\nDESCRIPTION: Shows how to format order reference numbers using date and ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ dateOrdered|date('Y') }}-{{ id }}\n```\n\n----------------------------------------\n\nTITLE: Transferring Customer Data in Craft Commerce CLI\nDESCRIPTION: This command transfers customer data from one user to another. It prompts for the username or email of the source and destination users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/transfer-user-data\n```\n\n----------------------------------------\n\nTITLE: Setting Products to a Variable for Multiple Use\nDESCRIPTION: Shows a best practice for storing the Products field query results in a variable to improve template readability and efficiency when using the related products multiple times.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.myFieldHandle.all() %}\n\n{% if products|length %}\n  <h3>Some great products</h3>\n  {% for product in products %}\n    {# ... #}\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Existing Non-Trashed Purchasables with Same SKU in PHP\nDESCRIPTION: This code snippet demonstrates how to check if any non-trashed purchasables have the same SKU as the purchasable being restored. It uses a database query to count matching records.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/purchasables.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nif (!parent::beforeDelete()) {\n    return false;\n}\n\n$found = (new Query())->select(['[[p.sku]]', '[[e.id]]'])\n    ->from('{{%commerce_purchasables}} p')\n    ->leftJoin(Table::ELEMENTS . ' e', '[[p.id]]=[[e.id]]')\n    ->where(['[[e.dateDeleted]]' => null, '[[p.sku]]' => $this->getSku()])\n    ->andWhere(['not', ['[[e.id]]' => $this->getId()]])\n    ->count();\n```\n\n----------------------------------------\n\nTITLE: Deleting a Customer Address in Twig for Craft Commerce\nDESCRIPTION: Form implementation to delete an existing address belonging to the current customer. This posts to the commerce/customer-addresses/delete action and requires the address ID to identify which address to remove.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/customer-address-management.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/customer-addresses/delete\">\n  {{ redirectInput('commerce/customer/addresses') }}\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"id\" value=\"{{ address.id }}\"/>\n  <input type=\"submit\" value=\"delete\"/>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking if Products Field Has Selected Products\nDESCRIPTION: Using the length filter to check if a Commerce Products field has any selected products before proceeding with conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Switching to Composer 1 in Nitro Container\nDESCRIPTION: Step-by-step process for changing the Composer version from 2 to 1 within a Nitro container, including navigating to the project, accessing the container with root permissions, and updating Composer version.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/composer.md#2025-04-22_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\n$ cd ~/dev/my-craft-project\n```\n\nLANGUAGE: sh\nCODE:\n```\n$ nitro ssh --root\n```\n\nLANGUAGE: sh\nCODE:\n```\n$ composer self-update --1\n```\n\nLANGUAGE: sh\nCODE:\n```\n$ exit\n```\n\n----------------------------------------\n\nTITLE: Using Twig Filters with Expression Precedence\nDESCRIPTION: Shows the difference between applying a filter directly to a value versus applying it to the result of an expression using parentheses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ 100.3 + 50.3|round }}\n{# Output: 150.3 #}\n\n{{ (100.3 + 50.3)|round }}\n{# Output: 151 #}\n```\n\n----------------------------------------\n\nTITLE: Using the 'boolean' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'boolean' test to check if a variable is a boolean value using PHP's is_bool() method. The example shows conditional output based on a boolean variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if myVar is boolean %}\n  {{ myVar ? 'true' : 'false' }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Element Query Example\nDESCRIPTION: Example of using the custom element query to find products with a specific price.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nProduct::find()\n    ->price(100)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Registering a Template Hook Handler in PHP\nDESCRIPTION: This PHP code shows how to register a callback function for a custom template hook, allowing modification of template context and output of custom content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/template-hooks.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getView()->hook('my-custom-hook-name', function(array &$context) {\n    // Modify template *context*\n    $context['foo'] = 'bar';\n\n    // Return template *output*\n    return '<p>Hey!</p>';\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Editor HUDs in PHP\nDESCRIPTION: Shows how to make elements editable via Element Editor HUDs by implementing the getIsEditable() and getEditorHtml() methods in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\npublic function getIsEditable(): bool\n{\n    return \\Craft::$app->user->checkPermission('edit-product:'.$this->getType()->id);\n}\n```\n\nLANGUAGE: php\nCODE:\n```\npublic function getEditorHtml(): string\n{\n    $html = \\Craft::$app->getView()->renderTemplateMacro('_includes/forms', 'textField', [\n        [\n            'label' => \\Craft::t('app', 'Title'),\n            'siteId' => $this->siteId,\n            'id' => 'title',\n            'name' => 'title',\n            'value' => $this->title,\n            'errors' => $this->getErrors('title'),\n            'first' => true,\n            'autofocus' => true,\n            'required' => true\n        ]\n    ]);\n\n    $html .= parent::getEditorHtml();\n\n    return $html;\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Front-end Login Path in Craft CMS (PHP)\nDESCRIPTION: Sets the loginPath config option to specify the URI Craft should use for user login on the front-end of the site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_55\n\nLANGUAGE: php\nCODE:\n```\n'loginPath' => 'members/login',\n```\n\n----------------------------------------\n\nTITLE: Enabling Title Support for Elements\nDESCRIPTION: Implementation of the hasTitles() method to enable user-defined titles for elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasTitles(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Event Handling in Behaviors\nDESCRIPTION: Example of how behaviors can automatically bind to their owner's events by implementing an events() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/behaviors.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function events()\n{\n    return [\n        Entry::EVENT_SET_ROUTE => [$this, 'defineRoute'],\n    ];\n}\n\npublic function defineRoute(SetElementRouteEvent $event)\n{\n    $event->route = '...';\n}\n```\n\n----------------------------------------\n\nTITLE: Line Items Display Template in Twig\nDESCRIPTION: Template for displaying order line items in a table format, showing quantity, description, price, and subtotal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<table>\n  <thead>\n    <tr>\n      <th>Quantity</th>\n      <th>Item</th>\n      <th>Unit Price</th>\n      <th>Subtotal</th>\n  </thead>\n  <tbody>\n    {% for item in order.lineItems %}\n      <tr>\n        <td>{{ item.qty }}</td>\n        <td>{{ item.description }}</td>\n        <td>{{ item.price }}</td>\n        <td>{{ item.subtotal }}</td>\n      </tr>\n    {% endfor %}\n  </tbody>\n</table>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Enabled Variants in Commerce 4 Product Element\nDESCRIPTION: Several Product element methods now return data related to only enabled variants by default in Commerce 4. This change affects how variant data is retrieved and calculated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nProduct::getVariants()\nProduct::getDefaultVariant()\nProduct::getCheapestVariant()\nProduct::getTotalStock()\nProduct::getHasUnlimitedStock()\n```\n\n----------------------------------------\n\nTITLE: Iterating through All Options in Twig\nDESCRIPTION: Shows how to loop through all available options (including unselected ones) in a Multi-select field using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:    {{ option.label }}\n  Value:    {{ option }} or {{ option.value }}\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using Order Variables in Email Subject with Twig\nDESCRIPTION: Template for creating dynamic email subjects that include order information like the order ID. This snippet demonstrates how to access the order object in email templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/emails.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nOrder #{{ order.id }} received.\n```\n\n----------------------------------------\n\nTITLE: Accessing Selected Variants in Twig\nDESCRIPTION: Demonstrates how to access selected variants from a Commerce Variants field in a Twig template. This snippet shows the basic syntax for retrieving an element query of the selected variants.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set variants = entry.myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Setting Homepage Link in Craft CMS Twig\nDESCRIPTION: Demonstrates how to set the homepage link using the siteUrl variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n<link rel=\"home\" href=\"{{ siteUrl }}\">\n```\n\n----------------------------------------\n\nTITLE: Fetching Enabled Countries in PHP\nDESCRIPTION: Shows how to retrieve all enabled countries using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllEnabledCountries();\n\nforeach ($countries as $country) {\n    // $country->id\n    // $country->name\n}\n```\n\n----------------------------------------\n\nTITLE: Removing CSS Classes with removeClass Filter in Twig\nDESCRIPTION: Shows how to use the removeClass filter to remove one or more CSS classes from an HTML tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass('orange') }}\n{# Result: <p class=\"apple banana\">A classy bit of text.</p> #}\n\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass(['orange', 'banana']) }}\n{# Result: <p class=\"apple\">A classy bit of text.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current Site Group Information in Twig\nDESCRIPTION: Example showing how to access and display information about sites in the same group as the current site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<nav>\n  <ul>\n    {% for site in currentSite.group.sites %}\n      <li><a href=\"{{ alias(site.baseUrl) }}\">{{ site.name }}</a></li>\n    {% endfor %}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Enhanced Coupon Code Form with Error Handling in Twig\nDESCRIPTION: An improved Twig template for coupon code entry that includes error handling. It displays validation errors by checking for both order notices specific to the couponCode attribute and any direct couponCode errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/coupon-codes.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  {# Get the first notice for the `couponCode` attribute, if we have one #}\n  {% set couponCodeNotice = cart.getFirstNotice(null, 'couponCode') %}\n\n  {# Get any lower-level coupon code errors just in case #}\n  {% set couponCodeError = cart.getFirstError('couponCode') %}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    class=\"{% if couponCodeNotice or couponCodeError %}has-error{% endif %}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Modifying Order Sources in Craft Commerce (PHP)\nDESCRIPTION: This hook allows plugins to modify the sources listed in the sidebar of the Orders index page. It provides access to the sources array and context for customization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_modifyOrderSources($sources, $context)\n{\n    unset($sources['carts:inactive']); // remove the inactive carts from the sources.\n}\n```\n\n----------------------------------------\n\nTITLE: Registering CSS in Twig Templates\nDESCRIPTION: The css tag allows registering CSS files or inline CSS code blocks in Twig templates. It supports adding attributes to the generated style tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Register a CSS file #}\n{% css \"/assets/css/style.css\" %}\n\n{# Register a CSS code block #}\n{% css %}\n  .content {\n    color: {{ entry.textColor }};\n  }\n{% endcss %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Config Values from Custom Config Files\nDESCRIPTION: Shows how to use the get() method to access configuration values from files other than general.php. Takes two parameters: the setting name and the config file name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.config.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ craft.config.get('someConfigSetting', 'someConfigFile') }}\n```\n\n----------------------------------------\n\nTITLE: Running Craft Setup Wizard via Terminal\nDESCRIPTION: Command to initiate Craft's Setup Wizard from the terminal. This interactive process configures the database connection and installs Craft.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/installation.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft setup\n```\n\n----------------------------------------\n\nTITLE: Checking Products Field Length in Twig\nDESCRIPTION: Demonstrates how to check if a Products field has any selected products using the length filter in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.productsFieldHandle | length %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Assets Field Data in PHP\nDESCRIPTION: A PHP snippet demonstrating how to access an Assets field's data as a query object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Rendering Head Scripts and Styles with head()\nDESCRIPTION: Shows how to output scripts and styles that were registered for the 'head' position using the head() function. This should be placed right before the closing head tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n<head>\n  <title>{{ siteName }}</title>\n  {{ head() }}\n</head>\n```\n\n----------------------------------------\n\nTITLE: Adding Payment Source Storage Checkbox to Twig Template in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to add a checkbox to a payment form that allows customers to save their payment information for future purchases. The code includes a conditional check to ensure the gateway supports payment sources before displaying the option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/saving-payment-sources.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.gateway.supportsPaymentSources() %}\n<div class=\"checkbox\">\n  <label>\n    <input type=\"checkbox\" name=\"savePaymentSource\" value=\"1\" /> \n    {{ \"Save card for future purchases\"|t }}\n  </label>\n</div>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugin Services Using the config() Method\nDESCRIPTION: Implementation of the config() method to make services extensible at the project level. This approach allows for service configuration overrides.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/services.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic static function config(): array\n{\n    return [\n        'components' => [\n            'foo' => ['class' => \\mynamespace\\services\\Foo::class],\n        ],\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Garbage Collection for Custom Elements in PHP\nDESCRIPTION: Event listener setup for garbage collection of custom elements. This helps ensure that orphaned element records are properly deleted from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_38\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\elements\\Product;\nuse craft\\db\\Table;\nuse craft\\services\\Event;\nuse craft\\services\\Gc;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gc::class,\n    Gc::EVENT_RUN,\n    function(Event $event) {\n        // Delete `elements` table rows without peers in our custom products table\n        Craft::$app->getGc()->deletePartialElements(\n            Product::class,\n            'plugin_products',\n            'id',\n        );\n\n        // Delete `elements` table rows without corresponding `content` table rows for the custom element\n        Craft::$app->getGc()->deletePartialElements(\n            Product::class,\n            Table::CONTENT,\n            'elementId',\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Displaying Sales Information with Twig\nDESCRIPTION: Demonstrates how to fetch and display all sales from the system using craft.commerce.sales.allSales. Each sale is represented as a Sale model and can display properties like name and description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/sales.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for sale in craft.commerce.sales.allSales %}\n  {{ sale.name }} - {{ sale.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Invalid Login Window Duration in Craft CMS (PHP)\nDESCRIPTION: Sets the invalidLoginWindowDuration config option to track invalid login attempts for 10 minutes, used for determining if Craft should lock an account.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_53\n\nLANGUAGE: php\nCODE:\n```\n'invalidLoginWindowDuration' => 'PT10M',\n```\n\n----------------------------------------\n\nTITLE: Custom Controller Action Using Route Parameters\nDESCRIPTION: PHP controller class with an action method that receives a route parameter. The method requires a POST request, looks up an entry using the provided ID, and retrieves comment content from the request body.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nnamespace modules\\controllers;\n\nuse craft\\elements\\Entry;\nuse craft\\web\\Controller;\n\nclass BlogController extends Controller\n{\n  /**\n   * Create a comment for the specified blog post ID.\n   * \n   * @param int $postId Blog Post ID defined by route parameters.\n   */\n  public function actionComment(int $postId)\n  {\n    $this->requirePostRequest();\n\n    // Use the ID to look up the entry...\n    $entry = Entry::find()\n      ->section('posts')\n      ->id($postId)\n      ->one();\n\n    // ...and grab the comment content from the request:\n    $comment = Craft::$app->getRequest()->getBodyParam('comment');\n\n    // ...\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Template Rendering for Plugin Settings Page in PHP\nDESCRIPTION: Overrides the getSettingsResponse() method to render a custom template for the plugin settings page instead of using Craft's default settings layout template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse(): mixed\n{\n    return \\Craft::$app\n        ->controller\n        ->renderTemplate('my-plugin-handle/settings/template');\n}\n```\n\n----------------------------------------\n\nTITLE: Adding a Single Item to Cart\nDESCRIPTION: Twig code for creating a form that adds a product's default variant to the cart using the commerce/cart/update-cart action and purchasableId parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n{% set variant = product.defaultVariant %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('purchasableId', variant.id) }}\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Removing Duplicate Values with unique Filter in Twig\nDESCRIPTION: The unique filter removes duplicate values from an array by passing it through PHP's array_unique() function. It preserves keys and only keeps the first occurrence of each value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = ['Larry', 'Darryl', 'Darryl'] %}\n{{ array|unique }}\n{# Result: ['Larry', 'Darryl'] #}\n```\n\n----------------------------------------\n\nTITLE: Defining Single Column Content Type in Craft CMS Field\nDESCRIPTION: Example of implementing getContentColumnType() for a field that uses a single database column.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/field-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function getContentColumnType(): array|string\n{\n    return \\yii\\db\\Schema::TYPE_STRING;\n}\n```\n\n----------------------------------------\n\nTITLE: Checking User Login Status with craft.session in Twig\nDESCRIPTION: This snippet demonstrates how to check if a user is logged in using the isLoggedIn property of craft.session. It conditionally displays a logout link if the user is logged in.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.session.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.session.isLoggedIn %}\n  <a href=\"{{ logoutUrl }}\">Logout</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Migrating registerCpRoutes Hook to Craft 3 PHP\nDESCRIPTION: Demonstrates how to migrate the registerCpRoutes plugin hook from Craft 2 to an event listener in Craft 3 for registering control panel routes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function(RegisterUrlRulesEvent $event) {\n        $event->rules['cocktails/new'] = ['template' => 'cocktails/_edit'];\n        $event->rules['cocktails/<widgetId:\\d+>'] = 'cocktails/edit-cocktail';\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Using alias Function in Twig\nDESCRIPTION: The alias function parses a string through Craft::getAlias() to resolve aliases in configuration paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ alias('@assetBaseUrl/images/logo.png') }}\">\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Assets in a List with Twig\nDESCRIPTION: A Twig example that fetches all related assets from an Assets field and displays them as links in an unordered list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedAssets = entry.myFieldHandle.all() %}\n{% if relatedAssets|length %}\n  <ul>\n    {% for rel in relatedAssets %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.filename }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring System Template CSS in PHP\nDESCRIPTION: This PHP code snippet shows how to configure the systemTemplateCss setting in Craft CMS. It sets a custom CSS file path for styling system templates like the login page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\n\nreturn GeneralConfig::create()\n    // ...\n    ->systemTemplateCss('/assets/styles/system.css')\n;\n```\n\n----------------------------------------\n\nTITLE: POST Request: Set User Password Endpoint\nDESCRIPTION: API endpoint for setting a new password on a user account. Requires verification code and user UUID. Can activate pending accounts and supports both standard and JSON response formats. Handles redirects based on configuration settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/controller-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: http\nCODE:\n```\nPOST users/set-password\n```\n\n----------------------------------------\n\nTITLE: Evaluating Order Email Domain with Twig in Craft Commerce Discount Condition\nDESCRIPTION: This Twig expression checks if the order's email contains a specific domain. It can be used in a discount's condition formula to apply the discount only to orders from a particular company or organization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n'@myclient.com' in order.email\n```\n\n----------------------------------------\n\nTITLE: Checking Plugin Schema Version in Migrations\nDESCRIPTION: Ensures project config changes in migrations are only applied once by checking the schema version in the YAML file. This prevents duplicate changes when migrations run in different environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp()\n{\n    // Don't make the same config changes twice:\n    $schemaVersion = Craft::$app->getProjectConfig()\n        ->get('plugins.myPlugin.schemaVersion', true);\n\n    // It's OK to hard-code a schema version, because they're always tied to migrations:\n    if (version_compare($schemaVersion, '1.2.3', '<')) {\n        // Project config changes made in this block will only be run once,\n        // wherever the plugin is updated...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using without Filter to Remove Array Items in Twig\nDESCRIPTION: Shows how to use the without filter to return an array without the specified item(s), useful for removing elements from collections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_45\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries().section('articles').limit(3).find %}\n{% set firstEntry = entries[0] %}\n{% set remainingEntries = entries|without(firstEntry) %}\n```\n\n----------------------------------------\n\nTITLE: Setting Temporary Asset Upload Filesystem Configuration in Craft CMS\nDESCRIPTION: Configuration for defining the temporary asset upload filesystem using either a config file or environment variable. This setting determines where temporary uploaded files are stored before being moved to their final destination.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_12\n\nLANGUAGE: yaml\nCODE:\n```\nCRAFT_TEMP_ASSET_UPLOAD_FS\n```\n\n----------------------------------------\n\nTITLE: Creating Entry Fixtures with Custom Fields in PHP for Craft CMS Testing\nDESCRIPTION: Example of an Entry fixture data file in PHP for Craft CMS, demonstrating how to set custom field values, including matrix fields, along with standard entry fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    [\n        // Standard `craft\\elements\\Entry` fields.\n        'authorId' => '1',\n        'sectionId' => '1000',\n        'typeId' => '1000',\n        'title' => 'Theories of matrix',\n\n        // Set a field layout\n        'fieldLayoutType' => 'field_layout_with_matrix_and_normal_fields',\n\n        // Set custom field values\n        'field:myPlainTextFieldHandle' => 'value of text field',\n        'field:myOtherPlainTextFieldHandle' => 'another value',\n\n        // Set custom Matrix field values\n        'field:matrixFirst' => [\n            'new1' => [\n                'type' => 'myBlockType',\n                'fields:mySubfield' => 'Some text'\n            ],\n            'new2' => [\n                'type' => 'myBlockType',\n                'fields:mySubfield' => 'Some text'\n            ],\n        ],\n    ]\n];\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Tags with Boolean Attributes in Craft CMS\nDESCRIPTION: Generates an HTML tag with boolean attributes (those without values) by setting the attribute value to true. Attributes set to null or false are omitted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_53\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('input', {\n  id: 'foo',\n  name: 'bar',\n  required: true\n}) }}\n{# Output: <input id=\"foo\" name=\"bar\" required> #}\n```\n\n----------------------------------------\n\nTITLE: Defining Relations in Craft CMS Record\nDESCRIPTION: Example of implementing the defineRelations() method in a Craft CMS record to establish relationships with other tables. This shows a HAS_MANY relationship with another record.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/records.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    // ...\n\n    public function defineRelations()\n    {\n        return array(\n            'drinks' => array(static::HAS_MANY, 'CocktailRecipes_DrinkRecord', 'ingredientId'),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Success Message Inputs with successMessageInput()\nDESCRIPTION: Shows how to create hidden input elements with tamper-proof success messages for forms. The success message will be stored in the session as a flash message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_39\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ actionInput('users/save-user') }}\n  {{ successMessageInput('Your profile has been updated!') }}\n\n  {# ... #}\n</form>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ successMessageInput('Your profile has been updated!', {\n  id: 'success-message-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Databases in Nitro YAML\nDESCRIPTION: This YAML configuration demonstrates setting up MySQL and PostgreSQL databases in Nitro. It specifies the engine, version, and port for each database instance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/multiple-databases.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\ndatabases:\n  - engine: mysql\n    version: \"8.0\"\n    port: \"3306\"\n  - engine: postgres\n    version: \"13\"\n    port: \"5432\"\n```\n\n----------------------------------------\n\nTITLE: Getting a Single Entry from an Entries Field in Twig\nDESCRIPTION: Demonstrates how to get the first entry from an Entries field that's configured to have only one entry selected using the first() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = entry.myEntriesField.first() %}\n\n{% if entry %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Categories as a Hierarchical List in Twig\nDESCRIPTION: Demonstrates using the nav tag to display related categories in a hierarchical structure preserving parent-child relationships.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% nav rel in relatedCategories %}\n      <li>\n        <a href=\"{{ rel.url }}\">{{ rel.title }}</a>\n        {% ifchildren %}\n          <ul>\n            {% children %}\n          </ul>\n        {% endifchildren %}\n      </li>\n    {% endnav %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Replacing Shipping Adjuster in Craft Commerce\nDESCRIPTION: Example demonstrating how to replace the default shipping adjuster with a custom implementation in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/adjusters.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse craft\\commerce\\adjusters\\Shipping;\nuse MyShippingAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $adjusters = $event->types;\n\n        foreach ($adjusters as $key => $adjuster) {\n            if ($adjuster == Shipping::class) {\n                $adjusters[$key] = MyShippingAdjuster::class;\n            }\n        }\n\n        $event->types = $adjusters;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Test Controller Implementation in PHP\nDESCRIPTION: TestController class that extends Craft's base Controller class for testing controller-related functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\controllers\\TestController\n```\n\n----------------------------------------\n\nTITLE: Merging Entry Types in Craft CMS 5\nDESCRIPTION: Command to merge entry types in Craft CMS 5. This process updates field layouts, sections, and generates content migrations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nddev craft entry-types/merge quote pullQuote\n```\n\n----------------------------------------\n\nTITLE: Generating SQL for New Records in Craft CMS\nDESCRIPTION: This bash command uses the yiic tool to generate SQL statements for creating tables and foreign key constraints for new records in a Craft CMS plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/migrations.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nyiic querygen all <RECORD-CLASS-NAME>\n```\n\n----------------------------------------\n\nTITLE: Processing Input Data Before Save in PHP\nDESCRIPTION: Demonstrates how to modify field input data before it's saved to the database by implementing the prepValueFromPost method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientListFieldType extends BaseFieldType\n{\n    // ...\n\n    public function prepValueFromPost($value)\n    {\n        // Modify $value here...\n\n        return $value;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering States Dropdown Grouped by Country in Twig\nDESCRIPTION: Shows how to create a grouped dropdown select box for states using the craft.commerce.statesArray variable, which returns an array of states indexed by country IDs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for countryId, states in craft.commerce.statesArray %}\n  <optgroup label=\"{{ craft.commerce.countriesList[countryId] }}\">\n    {% for stateId, stateName in craft.commerce.statesArray[countryId] %}\n      <option value=\"{{ stateId }}\">{{ stateName }}</option>\n    {% endfor %}\n  </optgroup>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Sending GraphQL Requests with cURL\nDESCRIPTION: Examples of sending GraphQL requests using cURL, demonstrating different methods including GET requests, POST requests with JSON, and POST requests with GraphQL content type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncurl \\\n  --data-urlencode \"query={ping}\" \\\n  http://my-project.tld/api\n# or\ncurl http://my-project.tld/api?query=%7Bping%7D\n```\n\nLANGUAGE: bash\nCODE:\n```\ncurl \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\":\"{ping}\"}' \\\n  http://my-project.tld/api\n```\n\nLANGUAGE: bash\nCODE:\n```\ncurl \\\n  -H \"Content-Type: application/graphql\" \\\n  -d '{ping}' \\\n  http://my-project.tld/api\n```\n\n----------------------------------------\n\nTITLE: Dumping Variables to Debug Toolbar in Twig\nDESCRIPTION: The dump tag logs the current context or a provided variable to the Yii debug toolbar in a special Dumps tab. It can be used multiple times in a request and keeps track of the template path and line number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# templates/_blog/post #}\n\n{% dump entry %}\n\n{# ... #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% dump %}\n```\n\n----------------------------------------\n\nTITLE: Adding Select Columns in Craft CMS DbCommand PHP\nDESCRIPTION: Shows how to add additional columns to a query without overwriting existing ones using the addSelect() method in Craft's DbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\ncraft()->db->createCommand()\n    ->select('foo')\n    ->addSelect('bar')\n    // ...\n```\n\n----------------------------------------\n\nTITLE: Basic Matrix Block Iteration in Twig\nDESCRIPTION: Shows how to iterate through Matrix blocks using a for-loop in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField %}\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Total in Twig\nDESCRIPTION: Demonstrates how to display the cart's total using the itemSubtotal attribute and the commerceCurrency filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\nCart ({{ cart.itemSubtotal|commerceCurrency }})\n```\n\n----------------------------------------\n\nTITLE: Handling Order After Completion\nDESCRIPTION: This event fires after an order has been completed. It provides access to the completed order object for post-completion processing or notifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Order;\nuse yii\\base\\Event;\n\nEvent::on(Order::class, Order::EVENT_AFTER_COMPLETE_ORDER, function(Event $e) {\n    // @var Order $order\n    $order = $e->sender;\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Querying Elements Using sourceElement in Craft CMS (Twig)\nDESCRIPTION: Demonstrates how to query ingredients related to a recipe using the sourceElement parameter, which is equivalent to using the field handle directly on the element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries()\n  .section('ingredients')\n  .relatedTo({\n    sourceElement: recipe,\n  })\n  .all() %}\n{# -> Equivalent to `recipe.ingredients.all()`, from our very first example! #}\n```\n\n----------------------------------------\n\nTITLE: Formatting Timestamps with timestamp Filter in Twig\nDESCRIPTION: Demonstrates the timestamp filter for outputting dates in a human-readable format, including relative time expressions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_39\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|timestamp }}\n{# Output: 16:25 #}\n\n{{ now|date_modify('-1 day')|timestamp }}\n{# Output: Yesterday #}\n\n{{ now|date_modify('-4 days')|timestamp }}\n{# Output: Friday #}\n\n{{ now|date_modify('-2 months')|timestamp(withPreposition=true) }}\n{# Output: 'on March 29, 2023' #}\n```\n\n----------------------------------------\n\nTITLE: Filtering Arrays with where Filter in Twig\nDESCRIPTION: Demonstrates the where filter which filters an array based on a given condition.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_47\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = { 'foo': 'bar', 'bar': 'baz', 'bat': 'bar' } %}\n{{ array|where(v => v == 'bar') }}\n{# Result: { 'foo': 'bar', 'bat': 'bar' } #}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Craft CMS Testing\nDESCRIPTION: A .env file configuration for Craft CMS testing environment. This provides database connection details, security key, and site URL settings required for the testing environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nDB_DSN=\"mysql:host=<host>;port=<port>;dbname=<dbname>\"\nDB_USER=\"root\"\nDB_PASSWORD=\"\"\nDB_TABLE_PREFIX=\"\"\nSECURITY_KEY=\"\"\nPRIMARY_SITE_URL=\"http://my-project.test/\" # Set this to the `entryUrl` param in the `codeception.yml` file.\n```\n\n----------------------------------------\n\nTITLE: Querying Entries with Assets Field Filters in Twig\nDESCRIPTION: Demonstrates how to fetch entries that have related assets using an Assets field handle with the :notempty: parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related asset #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Current Customer in Commerce 3\nDESCRIPTION: Examples showing how to retrieve the current customer in both Twig and PHP using the customers service in Commerce 3, replacing the previous Customer field approach.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/upgrading.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# gets the customer active in the current session #}\n{% set customer = craft.commerce.customers.customer %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// gets the customer active in the current session\n$customer = \\craft\\commerce\\Plugin::getInstance()\n    ->getCustomers()\n    ->customer;\n```\n\n----------------------------------------\n\nTITLE: Address Management Routes Configuration\nDESCRIPTION: Configuration for setting up address management routes in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n  'account' => ['template' => '_account/dashboard'],\n  'account/addresses/new' => ['template' => '_account/edit-address'],\n  'account/addresses/<addressUid:{uid}>' => ['template' => '_account/edit-address'],\n];\n```\n\n----------------------------------------\n\nTITLE: Setting Validation Key in PHP\nDESCRIPTION: Sets a secure validation key for verifying hashed values in load-balanced environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\n'validationKey' => '6#AYD6jW6nUJ3GMfreeXcPTGmBu.V*3Fi?f',\n```\n\n----------------------------------------\n\nTITLE: Installing Commerce Example Templates via CLI\nDESCRIPTION: This command copies Commerce's example templates into your project's template directory. You can specify a custom folder name and use the --overwrite flag to replace existing templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/console-commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/example-templates\nA folder will be copied to your templates directory.\nChoose folder name: [shop] myshop\nCopying ...\nDone!\n```\n\n----------------------------------------\n\nTITLE: Checking Cart Addresses in Twig\nDESCRIPTION: These snippets demonstrate how to check if shipping and billing addresses are set for the cart using Twig conditionals. They return the firstName if the address is set.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/update-cart-addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.shippingAddress %}\n    {{ cart.shippingAddress.firstName }} ...etc\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.billingAddress %}\n  {{ cart.billingAddress.firstName }} ... etc\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Namespacing Element IDs with namespaceInputId in Twig\nDESCRIPTION: Shows how to namespace an element ID to avoid conflicts in the DOM.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'bar'|namespaceInputId('foo') }}\n```\n\n----------------------------------------\n\nTITLE: Setting Products to a Variable for Reuse\nDESCRIPTION: Technique for storing the products element query results in a variable to avoid repeating the field handle and adding conditional display logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.myFieldHandle.all() %}\n\n{% if products|length %}\n  <h3>Some great products</h3>\n  {% for product in products %}\n    {# ... #}\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Current Date with date() Function\nDESCRIPTION: When the date() function receives a null or empty argument, it defaults to the current date, enabling date comparisons.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% if date() > date('2021/06/01') %}\n  {# today is past June 1, 2021 #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using the 'string' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'string' test to check if a variable is a string using PHP's is_string() method. Shows examples with a string and a number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ '23' is string ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is string ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Monitoring Logs with tail Command (Bash)\nDESCRIPTION: Using the tail command to continuously monitor new log entries in Craft CMS web logs. The -f option follows the file, and wildcard is used to capture all web log files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ntail -f storage/logs/web-*.log\n```\n\n----------------------------------------\n\nTITLE: Listing All Order Statuses in Twig\nDESCRIPTION: This code demonstrates how to list all order statuses in the Craft Commerce system, displaying their handles and names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% for status in craft.commerce.orderStatuses.allOrderStatuses %}\n  {{ status.handle }} - {{ status.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Testing Resource Type in Twig\nDESCRIPTION: Demonstrates checking if a value is a resource using PHP's is_resource() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getStream() is resource ? 'true' : 'false' }}\n{# result: true #}\n\n{{ siteUrl is resource ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Basic Craft CLI Command Usage\nDESCRIPTION: Example output of running the base 'php craft' command without arguments, showing available database and cache management commands. The output demonstrates the command structure and help system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/console-commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft\n\nThis is Yii version 2.0.36.\n\nThe following commands are available:\n\n- db                                    Performs database operations.\n    db/backup                           Creates a new database backup.\n    db/convert-charset                  Converts tables' character sets and collations. (MySQL only)\n    db/restore                          Restores a database backup.\n\n- cache                                 Allows you to flush cache.\n    cache/flush                         Flushes given cache components.\n    cache/flush-all                     Flushes all caches registered in the system.\n    cache/flush-schema                  Clears DB schema cache for a given connection\n                                        component.\n    cache/index (default)               Lists the caches that can be flushed.\n\n...\n\nTo see the help of each command, enter:\n\n  craft help <command-name>\n```\n\n----------------------------------------\n\nTITLE: Adding a Title Field to Element Editor HUD in Craft CMS\nDESCRIPTION: Customizes the element editor HUD to include a title field. This is necessary when hasTitles is enabled, as the title field isn't automatically included in the HUD.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function getEditorHtml(): string\n{\n    $html = \\Craft::$app->getView()->renderTemplateMacro('_includes/forms', 'textField', [\n        [\n            'label' => \\Craft::t('app', 'Title'),\n            'siteId' => $this->siteId,\n            'id' => 'title',\n            'name' => 'title',\n            'value' => $this->title,\n            'errors' => $this->getErrors('title'),\n            'first' => true,\n            'autofocus' => true,\n            'required' => true\n        ]\n    ]);\n\n    // ...\n\n    $html .= parent::getEditorHtml();\n\n    return $html;\n}\n```\n\n----------------------------------------\n\nTITLE: Using exists() Method to Check for Related Elements in Twig\nDESCRIPTION: This snippet demonstrates how to use the .exists() method to check if any related elements match specific criteria, without retrieving the full elements. It checks if a recipe contains meat or poultry ingredients.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set hasMeat = entry.ingredients.foodGroup(['meat', 'poultry']).exists() %}\n\n{% if not hasMeat %}\n  <span class=\"badge\">Vegetarian</span>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_LICENSE_KEY from Environment Variable in PHP\nDESCRIPTION: Defines the Craft CMS license key using an environment variable. This approach allows for secure storage of the license key outside of the codebase.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to get its license key from a `LICENSE_KEY` environment variable\ndefine('CRAFT_LICENSE_KEY', craft\\helpers\\App::env('LICENSE_KEY'));\n```\n\n----------------------------------------\n\nTITLE: Testing Integer Type in Twig\nDESCRIPTION: Demonstrates checking if a value is an integer using PHP's is_int() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is integer ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is integer ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Creating Order Queries in Twig and PHP\nDESCRIPTION: Examples showing how to initialize an order query using both Twig and PHP syntax in Craft Commerce. These queries serve as the starting point for retrieving orders from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new order query #}\n{% set myOrderQuery = craft.orders() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new order query\n$myOrderQuery = \\craft\\commerce\\elements\\Order::find();\n```\n\n----------------------------------------\n\nTITLE: Setting Database Configuration for Tests\nDESCRIPTION: Database configuration file that uses environment variables for test database connections\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'dsn' => getenv('DB_DSN'),\n    'user' => getenv('DB_USER'),\n    'password' => getenv('DB_PASSWORD'),\n    'schema' => getenv('DB_SCHEMA'),\n    'tablePrefix' => getenv('DB_TABLE_PREFIX'),\n];\n```\n\n----------------------------------------\n\nTITLE: Setting the Register User Flag on Payment Form in Twig\nDESCRIPTION: This snippet shows how to add a user registration checkbox to the commerce/payments/pay form. When enabled, it will create a new user account when the order is completed successfully.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/update-cart-customer.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('action', commerce/payments/pay') }}\n{# ... payment form ... #}\n<label for=\"registerUserOnOrderComplete\">\n  <input type=\"checkbox\"\n    id=\"registerUserOnOrderComplete\"\n    name=\"registerUserOnOrderComplete\"\n    value=\"1\"\n  /> Register me for a user account\n</label>\n```\n\n----------------------------------------\n\nTITLE: Counting Elements with count() in Twig\nDESCRIPTION: This snippet demonstrates how to use the count() method to get the number of elements matching the specified criteria in Twig. It counts the number of entries in the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set count = craft.entries()\n  .section('news')\n  .count() %}\n```\n\n----------------------------------------\n\nTITLE: Basic Add to Cart Form with Default Variant\nDESCRIPTION: Simple form implementation to add a product's default variant to the cart. Uses the commerce/cart/updateCart action with a single purchasableId.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/add-to-cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.commerce.products.first() %}\n{% set variant = product.defaultVariant %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n  <input type=\"hidden\" name=\"purchasableId\" value=\"{{ variant.purchasableId }}\">\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Adding a Create Button to Element Index in Craft CMS\nDESCRIPTION: This Twig block adds an action button to an element index page that allows users to create a new element of the specified type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% block actionButton %}\n    {{ tag('a', {\n        class: 'btn submit add icon',\n        href: actionUrl('elements/create', {\n            elementType: elementType\n        }),\n        text: 'New product'|t('my-plugin'),\n    }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Disabling CRAFT_LOG_PHP_ERRORS in PHP\nDESCRIPTION: Prevents Craft CMS from setting PHP's log_errors and error_log settings, allowing them to be controlled by php.ini instead.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n// Don't send PHP error logs to storage/logs/phperrors.log\ndefine('CRAFT_LOG_PHP_ERRORS', false);\n```\n\n----------------------------------------\n\nTITLE: Using Custom Behavior Methods in Twig Templates\nDESCRIPTION: This code demonstrates how to use custom behavior methods in Twig templates. It checks if a product is eligible for financing and displays the monthly payment amount.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/extending-system-components.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if product.isFinanceable() %}\n  <p>{{ product.title }} available from {{ product.financePriceFrom|commerceCurrency('USD') }} per month!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query for Nested Entries in Matrix Field in Craft CMS 5\nDESCRIPTION: GraphQL query to fetch nested entries from a Matrix field with specific criteria in Craft CMS 5.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_5\n\nLANGUAGE: gql\nCODE:\n```\nquery DifficultSteps {\n  stepsFieldEntries(difficulty: \"hard\") {\n    ... on step_Entry {\n      title\n      estimatedTime\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags with parseRefs in Twig\nDESCRIPTION: Shows how to parse and replace reference tags in content strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  {entry:blog/hello-world:link} was my first blog post. Pretty geeky, huh?\n{% endset %}\n\n{{ content|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Using the 'scalar' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'scalar' test to check if a variable is a scalar value using PHP's is_scalar() method. Shows examples with strings, numbers, and arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'hai' is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ [23, 'hai'] is scalar ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Updating Gateway Settings in PHP for Commerce 4\nDESCRIPTION: This snippet shows how to update gateway-specific setting overrides when migrating from Commerce 3 to Commerce 4. It demonstrates the change from using a PHP configuration file to using environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// Commerce 3\n// config/commerce-gateways.php\nreturn [\n    'myStripeGateway' => [\n        'apiKey' => getenv('STRIPE_API_KEY'),\n    ],\n];\n```\n\nLANGUAGE: plaintext\nCODE:\n```\n# Commerce 4\n# .env\nSTRIPE_API_KEY=\"<MY-API-KEY>\"\n```\n\n----------------------------------------\n\nTITLE: Custom Line Item Pricing in Commerce 3\nDESCRIPTION: Updated example for Commerce 3 showing how to customize line item pricing by directly setting both price and salePrice properties, as salePrice is no longer automatically calculated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/upgrading.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse craft\\commerce\\models\\LineItem;\nuse yii\\base\\Event;\n\nEvent::on(\n    LineItems::class,\n    LineItems::EVENT_POPULATE_LINE_ITEM,\n    function(LineItemEvent $event) {\n        // @var LineItem $lineItem\n        $lineItem = $event->lineItem;\n\n        // setting custom price\n        $lineItem->price = 20;\n\n        // setting discounted price\n        $lineItem->salePrice = 15;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching Elements Using ElementCriteriaModel in PHP\nDESCRIPTION: Shows how to execute a query using the find() method on an ElementCriteriaModel to retrieve the actual element objects that match the criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$entries = $criteria->find();\n```\n\n----------------------------------------\n\nTITLE: Prepending Items to Array with unshift Filter in Twig\nDESCRIPTION: Demonstrates the unshift filter which prepends one or more items to the beginning of an array and returns the new array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_45\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|unshift('bar', 'baz') %}\n{# Result: ['bar', 'baz', 'foo'] #}\n```\n\n----------------------------------------\n\nTITLE: Using POS_BEGIN with view.registerJs in Twig\nDESCRIPTION: Demonstrates registering JavaScript code to be placed at the beginning of the body element using the POS_BEGIN constant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Hello, Craft!');\n{% endset %}\n\n{% do view.registerJs(js, POS_BEGIN) %}\n```\n\n----------------------------------------\n\nTITLE: Importing a Database for Collaboration in DDEV\nDESCRIPTION: Commands for collaborators to start a DDEV environment and import an existing database backup. This allows team members to quickly get up and running with a cloned project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/installation.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nddev start\nddev import-db path/to/backup.sql\n```\n\n----------------------------------------\n\nTITLE: Order Lookup Template in Twig\nDESCRIPTION: Template for looking up and displaying completed orders using order number. Includes 404 handling for non-existent orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set order = craft.orders()\n  .number(orderNumber)\n  .isCompleted(true)\n  .one() %}\n\n{% if not order %}\n  {% exit 404 %}\n{% endif %}\n\n{{ order.dateOrdered|date }}\n```\n\n----------------------------------------\n\nTITLE: Defining Element Sources with Thumbnail Support in Craft CMS\nDESCRIPTION: This method configures element sources with support for thumbnail views. It includes a 'hasThumbs' key to enable thumbnail view for specific sources.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_34\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSources(string $context = null): array\n{\n    return [\n        [\n            'key' => 'cad',\n            'label' => 'CAD',\n            'criteria' => [\n                'currency' => 'cad',\n            ],\n            'hasThumbs' => true,\n        ],\n        // ...\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching a Specific Tax Rate by ID in Twig and PHP\nDESCRIPTION: Shows how to retrieve a single tax rate by its ID using the TaxRates service in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Get tax rate with an ID of `123` #}\n{% set rate = craft.commerce\n  .getTaxRates()\n  .getTaxRateById(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get tax zone with an ID of `123`\n$taxZones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRateById(123);\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Changes in Migrations for Craft CMS Plugin\nDESCRIPTION: Demonstrates how to safely make project config changes in plugin migrations by checking the schema version first. This prevents duplicate config changes when migrations run in different environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/project-config.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp()\n{\n    // Don't make the same config changes twice\n    $schemaVersion = Craft::$app->projectConfig\n        ->get('plugins.<plugin-handle>.schemaVersion', true);\n\n    if (version_compare($schemaVersion, '<NewSchemaVersion>', '<')) {\n        // Make the config changes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Single-Context GraphQL Type Generator in PHP for Craft CMS\nDESCRIPTION: A PHP implementation of a simple GraphQL type generator for a single-context widget element. This class generates a single type without considering different contexts, suitable for elements that don't have variations like entry types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Widgets have no context\n        $type = static::generateType($context);\n        return [$type->name => $type];\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        $pluginType = new WidgetElement();\n        $typeName = $pluginType->getGqlTypeName();\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            WidgetInterface::getFieldDefinitions(),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Sort Option Implementation in PHP\nDESCRIPTION: Implementation of getSortOption() method to provide custom sorting logic for element indexes, including handling of status values in a semantic rather than alphabetical order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\npublic function getSortOption(): array {\n    $col = $this->getValueSql();\n\n    // Re-map statuses so they are \"in order,\" semantically (not alphabetically):\n    $orderBy = <<<SQL\nCASE\n    WHEN $col = \"draft\" THEN 0\n    WHEN $col = \"submitted\" THEN 1\n    WHEN $col = \"approved\" THEN 2\n    WHEN $col = \"published\" THEN 3\n    ELSE 4\nEND; \nSQL;\n\n    // This is identical to the base implementation:\n    return [\n        'label' => Craft::t('site', $this->name),\n        'orderBy' => $orderBy,\n        'attribute' => isset($this->layoutElement->handle)\n            ? \"fieldInstance:{$this->layoutElement->uid}\"\n            : \"field:$this->uid\",\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Commerce Settings in Twig Templates\nDESCRIPTION: Example showing how to access the Commerce general settings model in Twig templates, allowing access to all configured Commerce settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/config-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set settings = craft.commerce.settings %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Maximum Upload File Size in Craft CMS\nDESCRIPTION: Sets the maximum file size (in bytes) that Craft should allow users to upload. This overrides the default limit of 16MB.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_78\n\nLANGUAGE: php\nCODE:\n```\n'maxUploadFileSize' => 33554432,\n```\n\n----------------------------------------\n\nTITLE: Constructing Dynamic Subfolder Paths with Category Fallback in Twig\nDESCRIPTION: A Twig snippet that demonstrates how to create a dynamic subfolder path that includes a category slug when available, or uses the :ignore: keyword when a category isn't selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nblog/{{ categoriesFieldHandle.one().slug ?? ':ignore:' }}/{canonicalId}\n```\n\n----------------------------------------\n\nTITLE: Conditional Statements with Position Select Field in Twig\nDESCRIPTION: This example shows how to use the Position Select field's value in conditional statements within a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/position-select-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.positionSelectFieldHandle in ['left', 'right'] %}\n  {# ... #}\n{% elseif entry.positionSelectFieldHandle == 'center' %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Notices\nDESCRIPTION: Examples of retrieving order notices using both Twig and PHP, demonstrating different methods to access notice information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{# @var order craft\\commerce\\elements\\Order #}\n\n{# Get a multi-dimensional array of notices by attribute key #}\n{% set notices = order.getNotices() %}\n\n{# Get an array of notice models for the `couponCode` attribute only #}\n{% set couponCodeNotices = order.getNotices(null, 'couponCode') %}\n\n{# Get the first notice only for the `couponCode` attribute #}\n{% set firstCouponCodeNotice = order.getFirstNotice(null, 'couponCode') %}\n\n{# Get an array of notice models for changed line item prices #}\n{% set priceChangeNotices = order.getNotices('lineItemSalePriceChanged') %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// @var craft\\commerce\\elements\\Order $order\n\n// Get a multi-dimensional array of notices by attribute key\n$notices = $order->getNotices();\n\n// Get an array of notice models for the `couponCode` attribute only\n$couponCodeNotices = $order->getNotices(null, 'couponCode');\n\n// Get the first notice only for the `couponCode` attribute\n$firstCouponCodeNotice = $order->getFirstNotice(null, 'couponCode');\n\n// Get an array of notice models for changed line item prices\n$priceChangeNotices = $order->getNotices('lineItemSalePriceChanged');\n```\n\n----------------------------------------\n\nTITLE: Using alias Function in Twig\nDESCRIPTION: Shows how to parse strings containing aliases using Craft's alias function, commonly used for asset URLs and configuration values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ alias('@assetBaseUrl/images/logo.png') }}\">\n```\n\n----------------------------------------\n\nTITLE: Advanced Relation Querying with Specific Criteria\nDESCRIPTION: Demonstrates how to use more specific criteria in relatedTo queries, including specifying source elements and fields in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries.section('ingredients').relatedTo({\n    sourceElement: cocktail,\n    field: 'ingredients'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Cart Shipping and Billing Addresses\nDESCRIPTION: Shows how to retrieve shipping and billing addresses from a cart object and implement defensive coding when addresses might not yet be set.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart.shippingAddress %}\n  {{ cart.shippingAddress.firstName }}\n  {# ... #}\n{% endif %}\n\n{% if cart.billingAddress %}\n  {{ cart.billingAddress.firstName }}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Updating Footer with Global Set Content in Twig\nDESCRIPTION: This snippet shows how to update the footer in the layout template to include content from a Global Set, providing site-wide information on every page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/extra-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<footer>\n  <div class=\"description\">\n    {{ siteInfo.description | md }}\n  </div>\n  <div class=\"copyright\">&copy;{{ now | date('Y') }} {{ siteName }}</div>\n  <div class=\"colophon\">Built with <a href=\"https://craftcms.com/\" target=\"_blank\">Craft CMS</a></div>\n</footer>\n```\n\n----------------------------------------\n\nTITLE: Rendering Countries List Dropdown in Twig\nDESCRIPTION: Shows how to create a dropdown select box using the craft.commerce.countriesList variable, which returns a list of countries as ID-name pairs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for id, countryName in craft.commerce.countriesList %}\n  <option value=\"{{ id }}\">{{ countryName }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Related Asset in Twig\nDESCRIPTION: A Twig example showing how to fetch only the first related asset from an Assets field and display it as a link.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ rel.url }}\">{{ rel.filename }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Atom Date Filter in Twig\nDESCRIPTION: Converts a date to ISO-8601 timestamp format for Atom feeds. Optionally accepts a boolean parameter to control timezone conversion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|atom }}\n{{ entry.customDateFieldWithTimezone|atom(false) }}\n```\n\n----------------------------------------\n\nTITLE: Creating a Payment Gateway Selection Form in Twig\nDESCRIPTION: This snippet creates a form for selecting a payment gateway from all available front-end gateways in Craft Commerce. It includes error handling for when no payment methods are available.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% if not craft.commerce.gateways.allFrontEndGateways|length %}\n  <p>No payment methods available.</p>\n{% endif %}\n\n{% if craft.commerce.gateways.allFrontEndGateways|length %}\n<form method=\"post\" id=\"paymentMethod\" class=\"form-inline\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/checkout/payment\">\n  {{ getCsrfInput() }}\n\n  <label for=\"\">Payment Method</label>\n  <select id=\"gatewayId\" name=\"gatewayId\" class=\"form-control\" >\n    {% for id,name in craft.commerce.gateways.allFrontEndGateways %}\n      <option value=\"{{ id }}\" {% if id == cart.gatewayId %}selected{% endif %}>{{ name }}</option>\n    {% endfor %}\n  </select>\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Number Field Data in Twig and PHP\nDESCRIPTION: Shows how to access Number field data from an element in both Twig and PHP templates using the field's handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/number-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Registering a Service Component in Craft CMS Plugin\nDESCRIPTION: Example of how to register a service as a component in the main plugin class. This is typically done in the init() method of the plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/services.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function init()\n{\n    parent::init();\n\n    $this->setComponents([\n        'foo' => \\mynamespace\\services\\Foo::class,\n    ]);\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Composer for Automated Craft Updates\nDESCRIPTION: JSON configuration for Composer to automatically check and update Craft CMS after package installation. This script runs 'craft up' non-interactively to apply migrations and project config changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/updating.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"require\": {\n        \"craftcms/cms\": \"^4.0.0\",\n        \"vlucas/phpdotenv\": \"^5.4.0\"\n        // ...\n    },\n    // ...\n    \"scripts\": {\n        \"post-install-cmd\": \"@php craft install/check && php craft up --interactive=0 || exit 0\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Non-Deleted Records with dateDeleted Condition in PHP\nDESCRIPTION: Shows how to use craft\\db\\Query to select data from a table with soft deletion support. The query includes a condition to filter out soft-deleted records by checking for null dateDeleted values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$results = (new \\craft\\db\\Query())\n    ->select(['...'])\n    ->from(['{{%mytablename}}'])\n    ->where(['dateDeleted' => null])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Checking Current User and Displaying Welcome Message in Craft CMS Twig\nDESCRIPTION: Shows how to check if a user is logged in and display a welcome message with their friendly name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  Welcome, {{ currentUser.friendlyName }}!\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining Craft Path Constants\nDESCRIPTION: Examples of setting various path constants for different Craft components including config, plugins, storage, templates, and translations directories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_CONFIG_PATH', '../craft_sitefiles/config/');\ndefine('CRAFT_PLUGINS_PATH', '../craft_sitefiles/plugins/');\ndefine('CRAFT_STORAGE_PATH', '../craft_sitefiles/storage/');\ndefine('CRAFT_TEMPLATES_PATH', '../craft_sitefiles/templates/');\ndefine('CRAFT_TRANSLATIONS_PATH', '../craft_sitefiles/translations/');\n```\n\n----------------------------------------\n\nTITLE: Defining Sort Options for Craft CMS Element Indexes\nDESCRIPTION: This method defines which attributes can be used for sorting elements in the element index. It returns an associative array mapping sort keys to their translated labels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineSortOptions(): array\n{\n    return [\n        'title' => \\Craft::t('app', 'Title'),\n        'price' => \\Craft::t('plugin-handle', 'Price'),\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Clearing Specific Order Notices in Twig and PHP\nDESCRIPTION: Shows how to clear notices for a specific attribute (couponCode) on an order in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{# Clear notices on the `couponCode` attribute #}\n{% do cart.clearNotices(null, 'couponCode') %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\n\n// Get the current cart\n$cart = Commerce::getInstance()->getCarts()->getCart();\n\n// Clear notices on the `couponCode` attribute\n$cart->clearNotices(null, 'couponCode');\n```\n\n----------------------------------------\n\nTITLE: Setting HTTP Headers in Twig\nDESCRIPTION: The header tag sets an HTTP header on the response. It can be used to set various headers including cache control, expiration, and custom headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Tell the browser to cache this page for 30 days #}\n{% set expiry = now|date_modify('+30 days') %}\n\n{% header \"Cache-Control: max-age=\" ~ (expiry.timestamp - now.timestamp) %}\n{% header \"Pragma: cache\" %}\n{% header \"Expires: \" ~ expiry|date('D, d M Y H:i:s', 'GMT') ~ \" GMT\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% header \"Expires: #{myDate|httpdate}\" %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Sites in Nitro YAML\nDESCRIPTION: YAML configuration example showing how to mount a development folder and configure multiple sites within Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nmounts:\n - source: ~/dev\n   dest: /home/ubuntu/sites\nsites:\n - hostname: example1.test\n   webroot: /home/ubuntu/sites/example1.test/web\n - hostname: example2.test\n   webroot: /home/ubuntu/sites/example2.test/web\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current User's Cart in Craft Commerce using Twig\nDESCRIPTION: This snippet demonstrates how to access the current user's cart in Craft Commerce templates. It uses the craft.commerce.cart function, which returns an Order model representing the user's cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.cart %}\n```\n\n----------------------------------------\n\nTITLE: Sequential Order Reference Format in Twig\nDESCRIPTION: Shows how to generate a sequential order reference number using the seq() function with year-based padding\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/orders.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{object.dateOrdered|date('Y')}}-{{ seq(object.dateOrdered|date('Y'), 8) }}\n```\n\n----------------------------------------\n\nTITLE: Using ucfirst Filter for Capitalization in Twig\nDESCRIPTION: Demonstrates the ucfirst filter which capitalizes the first character of a string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_38\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foobar'|ucfirst }}\n{# Output: Foobar #}\n```\n\n----------------------------------------\n\nTITLE: Clearing Cart Notices\nDESCRIPTION: Examples of clearing notices using both Twig and PHP, with cart saving functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% do cart.clearNotices(null, 'couponCode') %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\n\n// Get the current cart\n$cart = Commerce::getInstance()->getCarts()->getCart();\n\n// Clear notices on the `couponCode` attribute\n$cart->clearNotices(null, 'couponCode');\n```\n\n----------------------------------------\n\nTITLE: Getting States by Country ID in Craft Commerce\nDESCRIPTION: Retrieves all states belonging to a specific country ID, returning an array of State objects regardless of enabled status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states.statesByCountryId(countryId) %}\n  <option value=\"{{ state.id }}\">\n    {{- state.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->statesByCountryId($countryId);\nforeach ($states as $state) {\n    // $state->id\n    // $state->name\n}\n```\n\n----------------------------------------\n\nTITLE: Action Button Implementation in Twig\nDESCRIPTION: Adds a creation button to element index page for creating new elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% block actionButton %}\n    {{ tag('a', {\n        class: 'btn submit add icon',\n        href: actionUrl('elements/create', {\n            elementType: elementType\n        }),\n        text: 'New product'|t('my-plugin'),\n    }) }}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Payment Source Management Endpoints\nDESCRIPTION: API endpoints for managing payment sources including adding and deleting payment methods. Includes parameter details and response formats.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n### POST payment-sources/add\n### POST payment-sources/delete\n\nParams:\n- gatewayId: ID of payment gateway\n- description: Payment source description\n- isPrimaryPaymentSource: Boolean flag\n```\n\n----------------------------------------\n\nTITLE: Machine-Readable Log Output in Production Mode (Craft CMS)\nDESCRIPTION: Example of single-line, machine-readable log output when devMode is disabled in Craft CMS. Each line includes timestamp, log level, message, and JSON-encoded context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n[2022-04-15T16:57:54+00:00] web.WARNING: Some warning… {\"trace\":[],\"memory\":13579752,\"category\":\"application\"}\n[2022-04-15T16:57:54+00:00] web.WARNING: Request context  {\"ip\":\"172.18.0.1\",\"userId\":1,\"vars\":{\"_GET\":[],\"_POST\":[],\"_COOKIE\":{\"1031b8c41dfff97a311a7ac99863bdc5_username\":\"2756d05ef7521bdc1dac02da066e1658e3e16d6acc7360cfc6256cb1cec311cca:2:{i:0;s:41:\\\"1031b8c41dfff97a311a7ac99863bdc5_username\\\";i:1;s:5:\\\"admin\\\";}\",\"CraftSessionId\":\"if0uq3uj36d8ek6n5o9eak2l04\",\"1031b8c41dfff97a311a7ac99863bdc5_identity\":\"8ddb6a5ce28f3fb2d23567df9228ce31614d6b19572c4f60db3b4b5eae78f2a3a:2:{i:0;s:41:\\\"1031b8c41dfff97a311a7ac99863bdc5_identity\\\";i:1;s:159:\\\"[1,\\\"[\\\\\\\"QwoFhu6pBsTvSOkCXqNvu2_cIr16fde6AK1DHP7GLiyXmnv7qY5BscDi8sl_QRT9z2uGh051J7r9IkSawusrx-ijCLZWZ6bHB433\\\\\\\",null,\\\\\\\"d9667159e600aea00a68fcc215cc4f6e\\\\\\\"]\\\",3600]\\\";}\",\"CRAFT_CSRF_TOKEN\":\"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••\"},\"_FILES\":[],\"_SERVER\":{\"PATH\":\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\"HOSTNAME\":\"my-project.tld\",\"PHP_DISPLAY_ERRORS\":\"on\",\"PHP_MEMORY_LIMIT\":\"512M\",\"PHP_MAX_EXECUTION_TIME\":\"5000\",\"PHP_UPLOAD_MAX_FILESIZE\":\"512M\",\"PHP_MAX_INPUT_VARS\":\"5000\",\"PHP_POST_MAX_SIZE\":\"512M\",\"PHP_OPCACHE_ENABLE\":\"0\",\"PHP_OPCACHE_REVALIDATE_FREQ\":\"0\",\"PHP_OPCACHE_VALIDATE_TIMESTAMPS\":\"0\",\"XDEBUG_SESSION\":\"PHPSTORM\",\"PHP_IDE_CONFIG\":\"serverName=my-project.tld\",\"XDEBUG_CONFIG\":\"client_host=host.docker.internal client_port=9003\",\"XDEBUG_MODE\":\"develop,debug\",\"IMAGE_USER\":\"nitro\",\"PHP_VERSION\":\"8.0\",\"NVM_VERSION\":\"0.38.0\",\"DEBIAN_FRONTEND\":\"noninteractive\",\"HOME\":\"/home/nitro\",\"LC_CTYPE\":\"C.UTF-8\",\"SUPERVISOR_ENABLED\":\"1\",\"SUPERVISOR_PROCESS_NAME\":\"php-fpm\",\"SUPERVISOR_GROUP_NAME\":\"php-fpm\",\"USER\":\"nitro\",\"HTTP_X_FORWARDED_PROTO\":\"https\",\"HTTP_X_FORWARDED_FOR\":\"172.18.0.1\",\"HTTP_UPGRADE_INSECURE_REQUESTS\":\"1\",\"HTTP_SEC_FETCH_USER\":\"?1\",\"HTTP_SEC_FETCH_SITE\":\"none\",\"HTTP_SEC_FETCH_MODE\":\"navigate\",\"HTTP_SEC_FETCH_DEST\":\"document\",\"HTTP_SEC_CH_UA_PLATFORM\":\"\\\"macOS\\\"\",\"HTTP_SEC_CH_UA_MOBILE\":\"?0\",\"HTTP_SEC_CH_UA\":\"\\\" Not A;Brand\\\";v=\\\"99\\\", \\\"Chromium\\\";v=\\\"100\\\", \\\"Google Chrome\\\";v=\\\"100\\\"\",\"HTTP_COOKIE\":\"1031b8c41dfff97a311a7ac99863bdc5_username=2756d05ef7521bdc1dac02da066e1658e3e16d6acc7360cfc6256cb1cec311cca%3A2%3A%7Bi%3A0%3Bs%3A41%3A%221031b8c41dfff97a311a7ac99863bdc5_username%22%3Bi%3A1%3Bs%3A5%3A%22admin%22%3B%7D; 1031b8c41dfff97a311a7ac99863bdc5_identity=8ddb6a5ce28f3fb2d23567df9228ce31614d6b19572c4f60db3b4b5eae78f2a3a%3A2%3A%7Bi%3A0%3Bs%3A41%3A%221031b8c41dfff97a311a7ac99863bdc5_identity%22%3Bi%3A1%3Bs%3A159%3A%22%5B1%2C%22%5B%5C%22QwoFhu6pBsTvSOkCXqNvu2_cIr16fde6AK1DHP7GLiyXmnv7qY5BscDi8sl_QRT9z2uGh051J7r9IkSawusrx-ijCLZWZ6bHB433%5C%22%2Cnull%2C%5C%22d9667159e600aea00a68fcc215cc4f6e%5C%22%5D%22%2C3600%5D%22%3B%7D; CRAFT_CSRF_TOKEN=9779283c4e1eba389e1017adc948f01af0a22c04a007ab820e41e540b501e74ca%3A2%3A%7Bi%3A0%3Bs%3A16%3A%22CRAFT_CSRF_TOKEN%22%3Bi%3A1%3Bs%3A147%3A%22XBmAAP6UFlrOfMEOHl9coZnXbJKENF2LtqdsItB7%7C11c6df0a319dfd02ab5a74652e290bf2aa260e6423b903fc38fee0c76e1dbc06XBmAAP6UFlrOfMEOHl9coZnXbJKENF2LtqdsItB7%7C1%22%3B%7D\",\"HTTP_CACHE_CONTROL\":\"max-age=0\",\"HTTP_ACCEPT_LANGUAGE\":\"en-US,en;q=0.9\",\"HTTP_ACCEPT_ENCODING\":\"gzip, deflate, br\",\"HTTP_ACCEPT\":\"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\"HTTP_USER_AGENT\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.88 Safari/537.36\",\"HTTP_HOST\":\"my-project.tld\",\"SCRIPT_FILENAME\":\"/app/web/index.php\",\"REDIRECT_STATUS\":\"200\",\"SERVER_NAME\":\"\",\"SERVER_PORT\":\"80\",\"SERVER_ADDR\":\"172.18.0.12\",\"REMOTE_USER\":\"\",\"REMOTE_PORT\":\"46122\",\"REMOTE_ADDR\":\"172.18.0.19\",\"SERVER_SOFTWARE\":\"nginx/1.18.0\",\"GATEWAY_INTERFACE\":\"CGI/1.1\",\"REQUEST_SCHEME\":\"http\",\"SERVER_PROTOCOL\":\"HTTP/1.1\",\"DOCUMENT_ROOT\":\"/app/web\",\"DOCUMENT_URI\":\"/index.php\",\"REQUEST_URI\":\"/\",\"SCRIPT_NAME\":\"/index.php\",\"CONTENT_LENGTH\":\"\",\"CONTENT_TYPE\":\"\",\"REQUEST_METHOD\":\"GET\",\"QUERY_STRING\":\"\",\"FCGI_ROLE\":\"RESPONDER\",\"PHP_SELF\":\"/index.php\",\"REQUEST_TIME_FLOAT\":1650041873.980016,\"REQUEST_TIME\":1650041873,\"PRIMARY_SITE_URL\":\"https://my-project.tld/\",\"CRAFT_ENVIRONMENT\":\"dev\",\"CRAFT_SECURITY_KEY\":\"•••\",\"CRAFT_DEV_MODE\":\"0\",\"CRAFT_DB_URL\":\"\",\"CRAFT_DB_DATABASE\":\"db\",\"CRAFT_DB_USER\":\"db\",\"CRAFT_DB_PASSWORD\":\"•••••\",\"CRAFT_DB_DRIVER\":\"pgsql\",\"CRAFT_DB_SCHEMA\":\"public\",\"CRAFT_DB_SERVER\":\"postgres-13-5432.database.nitro\"},\"_SESSION\":{\"bd62416aa8538ede709019a5e113eea5__flash\":[],\"1031b8c41dfff97a311a7ac99863bdc5__token\":\"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••\",\"1031b8c41dfff97a311a7ac99863bdc5__id\":1,\"__authKey\":\"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••\",\"1031b8c41dfff97a311a7ac99863bdc5__expire\":1650045474,\"__duration\":3600}}}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount by Code in Twig\nDESCRIPTION: Shows how to retrieve a specific discount using its code with the craft.commerce.getDiscountByCode() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.getDiscountByCode('HALFOFF') %}\n{% if discount %}\n{{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Displaying All Product Types in Twig\nDESCRIPTION: This snippet shows how to list all product types set up in the Craft Commerce system, displaying their handles and names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% for type in craft.commerce.productTypes.allProductTypes %}\n  {{ type.handle }} - {{ type.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Money Field Values in PHP\nDESCRIPTION: Uses the MoneyHelper::toString() method to format and output the value of a Money field in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/money.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$value = \\craft\\helpers\\MoneyHelper::toString($entry->myFieldHandle);\n```\n\n----------------------------------------\n\nTITLE: Implementing addTwigExtension Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom Twig extensions to the templating system. Returns a new Twig_Extension object that adds functions, filters, or other Twig functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function addTwigExtension()\n{\n    Craft::import('plugins.cocktailrecipes.twigextensions.CocktailRecipesTwigExtension');\n    return new CocktailRecipesTwigExtension();\n}\n```\n\n----------------------------------------\n\nTITLE: Nitro YAML Configuration\nDESCRIPTION: Example of how PHP settings are stored in the nitro.yaml configuration file, showing the structure for site-specific PHP settings including max_execution_time.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/php-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n# ...\nsites:\n    - hostname: craft-support.nitro\n      aliases:\n        - support.nitro\n      path: ~/dev/support\n      version: \"7.3\"\n      php:\n        max_execution_time: 7000\n      extensions:\n        - calendar\n      webroot: craft-support/web\n      xdebug: true\n```\n\n----------------------------------------\n\nTITLE: Implementing Cart Address Estimation Form in Twig\nDESCRIPTION: A Twig template that creates a form for collecting estimated shipping address information and selecting shipping methods. The form includes country and state dropdowns, zip code input, and shipping method radio buttons that appear after an estimated address is set. It uses the commerce/cart/update-cart action to process the form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/estimate-cart-addresses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"estimatedBillingAddressSameAsShipping\" value=\"1\">\n\n  {% if not cart.estimatedShippingAddressId %}\n    <select name=\"estimatedShippingAddress[countryId]\">\n      {% for key, option in craft.commerce.countries.allCountriesAsList %}\n        <option value=\"{{ key }}\">{{ option }}</option>\n      {% endfor %}\n    </select>\n\n    <select name=\"estimatedShippingAddress[stateValue]\">\n      {% for states in craft.commerce.states.allStatesAsList %}\n        {% for key, option in states %}\n          <option value=\"{{ key }}\">{{ option }}</option>\n        {% endfor %}\n      {% endfor %}\n    </select>\n\n    <input type=\"text\" name=\"estimatedShippingAddress[zipCode]\" value=\"\">\n  {% endif %}\n\n\n  {% if cart.availableShippingMethods|length and cart.estimatedShippingAddressId %}\n    {% for handle, method in cart.availableShippingMethods %}\n      <label>\n        <input type=\"radio\" name=\"shippingMethodHandle\" value=\"{{ handle }}\" {% if handle == cart.shippingMethodHandle %}checked{% endif %} />\n        {{ method.name }} - {{ method.priceForOrder(cart)|commerceCurrency(cart.currency) }}\n      </label>\n    {% endfor %}\n  {% endif %}\n\n  <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Iterating Through All Available Options\nDESCRIPTION: Demonstrates how to loop through all available options in a Multi-select field, including checking their selected state.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:    {{ option.label }}\n  Value:    {{ option }} or {{ option.value }}\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // Label:    $option->label\n    // Value:    $option or $option->value\n    // Selected: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Save Product Type Event in Craft Commerce\nDESCRIPTION: This code demonstrates how to listen for the beforeSaveProductType event, which is triggered before a product type is saved. It can be used for tasks like creating an audit trail of the action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_49\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\ProductTypeEvent;\nuse craft\\commerce\\services\\ProductTypes;\nuse yii\\base\\Event;\n\nEvent::on(ProductTypes::class, ProductTypes::EVENT_BEFORE_SAVE_PRODUCTTYPE, function(ProductTypeEvent $e) {\n     // Maybe create an audit trail of this action.\n});\n```\n\n----------------------------------------\n\nTITLE: Changing Order Status Programmatically in PHP\nDESCRIPTION: This snippet demonstrates how to change the status of an order programmatically using PHP in Craft Commerce. It retrieves an order by ID, sets a new status ID and message, then saves the element to trigger the status change event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/custom-order-statuses.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$order = Plugin::getInstance()->getOrders()->getOrderById(ID);\n$order->orderStatusId = $orderStatus->id; //  new status ID\n$order->message = $message; // new message\n$result = Craft::$app->getElements()->saveElement($order);\n```\n\n----------------------------------------\n\nTITLE: Listing All Order Statuses in Twig\nDESCRIPTION: Example of how to retrieve and display all available order statuses in a Craft Commerce site using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/custom-order-statuses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for status in craft.commerce.orderStatuses.allOrderStatuses %}\n  {{ status.handle }} - {{ status.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Image Rotation by EXIF Data in Craft CMS\nDESCRIPTION: Configuration setting that determines whether Craft should automatically rotate images based on EXIF orientation data upon upload. When enabled, Craft detects the camera orientation from EXIF data and rotates the image accordingly, then strips the orientation entry.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_80\n\nLANGUAGE: php\nCODE:\n```\n'rotateImagesOnUploadByExifData' => true,\n```\n\n----------------------------------------\n\nTITLE: Setting Default Cart Billing Address in Craft Commerce (PHP)\nDESCRIPTION: This hook allows setting a default billing address on the cart when no address is present. It should return a Commerce_AddressModel of an existing address in the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_defaultCartBillingAddress(){\n\n    $address = craft()->commerce_addresses->getAddressById($myId);\n    return $address;\n\n}\n```\n\n----------------------------------------\n\nTITLE: Array Indexing with index Filter\nDESCRIPTION: Uses ArrayHelper::index() to index an array by a specified key\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|index('id') %}\n```\n\n----------------------------------------\n\nTITLE: Converting Date to ISO-8601 Timestamp with atom Filter in Twig\nDESCRIPTION: The 'atom' filter converts a date to an ISO-8601 timestamp format, suitable for Atom feeds. It can optionally prevent timezone conversion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|atom }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.customDateFieldWithTimezone|atom(false) }}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Asset from an Assets Field in Craft CMS\nDESCRIPTION: Demonstrates how to get the first asset from an Assets field when you expect only one asset to be selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set asset = entry.myAssetsField.first() %}\n\n{% if asset %}\n  {{ asset.url }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Image Quality in Craft CMS\nDESCRIPTION: Specifies the default quality Craft will use when creating image transforms. This can be overridden on a per-transform basis. Values range from 1 to 100.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_72\n\nLANGUAGE: php\nCODE:\n```\n'defaultImageQuality' => 90,\n```\n\n----------------------------------------\n\nTITLE: Checking if a Variant is on Sale using Twig in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to check if a variant is on sale by evaluating the length of the salesApplied array using Twig templating in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/line-item-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if variant.salesApplied|length %}This variant is on sale{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Generating SQL for Field Values with fieldValueSql Function\nDESCRIPTION: Shows how to use the fieldValueSql function to generate platform-specific SQL expressions for extracting values from elements' JSON content column.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set longestFilm = craft.entries()\n  .section('films')\n  .max(fieldValueSql(entryType('film'), 'runtimeMinutes')) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set shortFilms = craft.entries()\n  .section('films')\n  .runtimeMinutes('<= 20')\n  .orderBy('runtimeMinutes DESC')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Previous Cart Items Form\nDESCRIPTION: Form implementation for adding items from previous carts to the current cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n<h2>Previous Cart Items</h2>\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% for oldCart in oldCarts %}\n    {% for lineItem in oldCart.lineItems %}\n      {{ lineItem.description }}\n      <label>\n        {{ input('checkbox', 'purchasables[][id]', lineItem.purchasableId) }}\n        Add to cart\n      </label>\n    {% endfor %}\n  {% endfor %}\n\n  <button>Add Items</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Sorting Arrays with the multisort Filter in Twig\nDESCRIPTION: Demonstrates how to sort arrays by single or multiple properties, with custom sort directions and flags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('title') %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort(['postDate', 'title']) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort(e => e.author.fullName) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('title', direction=SORT_DESC) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort('id', sortFlag=SORT_NUMERIC) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entries|multisort([\n  'postDate',\n  'title',\n], sortFlag=[SORT_NATURAL, SORT_FLAG_CASE]) %}\n```\n\n----------------------------------------\n\nTITLE: Finding Enabled Previous Sibling Entry in Twig\nDESCRIPTION: Alternative to getPrevSibling() that returns only enabled siblings by using the positionedBefore parameter with craft.entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set prevSibling = craft.entries.positionedBefore(entry).order('lft desc').first() %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Dates for RSS with rss Filter in Twig\nDESCRIPTION: The rss filter outputs a date in the format required for RSS feeds (D, d M Y H:i:s O), ensuring compatibility with RSS specifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|rss }}\n```\n\n----------------------------------------\n\nTITLE: Filtering Variants by Price in Twig\nDESCRIPTION: This snippet shows how to filter variants by price, specifically querying for variants with a price of $1 or less using a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pricing-rules.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set dollarOrLess = craft.variants()\n  .price('<= 1')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Saving Single Custom Field Value in Craft CMS\nDESCRIPTION: This code demonstrates two approaches to setting a single custom field value on an element: direct property assignment and using the setFieldValue() helper method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Direct assignment:\n$product->myCustomField = 'foo';\n\n// Via helper method:\n$product->setFieldValue('myCustomField', 'foo');\n\n\\Craft::$app->getElements()->saveElement($product);\n```\n\n----------------------------------------\n\nTITLE: Finding Maximum Value with max() Function\nDESCRIPTION: Demonstrates how to use the max() function to find the largest number in a set of values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ max(1, 2, 3) }} => 3\n```\n\n----------------------------------------\n\nTITLE: Product Type Variant Check Comparison\nDESCRIPTION: Shows the difference between old and new ways of checking product type variant configuration, using maxVariants instead of hasVariants property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/upgrade.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if product.type.hasVariants %}\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.id }}\">{{ variant.title }}</option>\n    {% endfor %}\n  </select>\n  {# ... #}\n{% else %}\n  <button name=\"purchasableId\" value=\"{{ product.defaultVariantId }}\">Add to Cart</button>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if product.type.maxVariants > 1 %}\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.id }}\">{{ variant.title }}</option>\n    {% endfor %}\n  </select>\n  {# ... #}\n{% else %}\n  <button name=\"purchasableId\" value=\"{{ product.defaultVariantId }}\">Add to Cart</button>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Numbers and Dates with Twig Filters in Craft CMS\nDESCRIPTION: Twig filters for formatting currency, dates, and file sizes in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|currency('USD') }}\n{# Output: $1,000,000.00 #}\n\n{{ 1000000|currency('USD', stripZeros=true) }}\n{# Output: $1,000,000 #}\n\n{{ 'oh hai'|currency('USD') }}\n{# Output: oh hai #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|date }}\n{# Output: Dec 20, 1990 #}\n\n{{ 'now'|date('m/d/Y') }}\n{# Output: 12/20/1990 #}\n\n{{ entry.postDate|date('short') }}\n{# Output: 12/20/1990 #}\n\n{{ entry.postDate|date('short', locale='en-GB') }}\n{# Output: 20/12/1990 #}\n\n{{ entry.postDate|date('short', timezone='UTC') }}\n{# Output: 12/21/1990 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|datetime }}\n{# Output: Dec 20, 1990, 5:00:00 PM #}\n\n{{ entry.postDate|datetime('short') }}\n{# Output: 9/26/2018, 5:00 PM #}\n\n{{ entry.postDate|datetime('short', locale='en-GB') }}\n{# Output: 20/12/1990, 17:00 #}\n\n{{ entry.postDate|datetime('short', timezone='UTC') }}\n{# Output: 12/21/1990, 12:00 AM #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<p>Posted {{ entry.postDate.diff(now)|duration(false) }} ago.</p>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.size }}\n{# Output: 1944685 #}\n{{ asset.size|filesize }}\n{# Output: 1.945 MB #}\n\n{{ 'oh hai'|filesize }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_COMPOSER_PATH in PHP\nDESCRIPTION: Defines the path to the composer.json file for Craft CMS. This allows specifying a custom location for the Composer configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_COMPOSER_PATH', 'path/to/composer.json');\n```\n\n----------------------------------------\n\nTITLE: Rounding Numbers with round() Function\nDESCRIPTION: Shows how to use the round() function to round a number to the nearest integer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ round(42.1) }} => 42\n{{ round(42.9) }} => 43\n```\n\n----------------------------------------\n\nTITLE: Form Input Examples in Craft CP\nDESCRIPTION: Examples of creating form inputs using Craft's form macros, showing both simple input and full field with label and instructions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms' as forms %}\n\n{{ forms.date({\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n}) }}\n\n{{ forms.dateField({\n  label: 'Start Date'|t('plugin-handle'),\n  instructions: 'The start date of the event.'|t('plugin-handle'),\n  id: 'start-date',\n  name: 'startDate',\n  value: event.startDate,\n  required: true,\n  errors: event.getErrors('startDate'),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries by Plain Text Field Value in Twig\nDESCRIPTION: Demonstrates how to query entries based on an exact match of a plain text field value in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set reds = craft.entries()\n  .section('swatches')\n  .colorGroupCode('RED')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Specific Customer Address by ID in Twig for Craft Commerce\nDESCRIPTION: Code to fetch a specific address belonging to the current customer using its ID. This method returns a single address model that can then be used in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/customer-address-management.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customer.getAddressById(id) %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Locale Date and Time Formats in Twig\nDESCRIPTION: Twig template code to display the current locale's date and time format patterns. Uses Craft's locale service to fetch formatting strings that can be referenced against PHP's date() function documentation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\nDate format: <code>{{ craft.app.locale.getDateFormat('short', 'php') }}</code><br>\nTime format: <code>{{ craft.app.locale.getTimeFormat('short', 'php') }}</code>\n```\n\n----------------------------------------\n\nTITLE: Querying a Single Tag in Craft CMS GraphQL API\nDESCRIPTION: The tag query is used to retrieve a single tag based on specified criteria. It accepts various arguments for filtering and narrowing the results, similar to the tagCount query, such as ID, status, site, and related elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_20\n\nLANGUAGE: graphql\nCODE:\n```\ntag(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  archived: Boolean\n  trashed: Boolean\n  site: [String]\n  siteId: [QueryArgument]\n  unique: Boolean\n  preferSites: [QueryArgument]\n  enabledForSite: Boolean\n  title: [String]\n  slug: [String]\n  uri: [String]\n  search: String\n  relatedTo: [QueryArgument]\n  relatedToAssets: [AssetCriteriaInput]\n  relatedToEntries: [EntryCriteriaInput]\n  relatedToUsers: [UserCriteriaInput]\n  relatedToCategories: [CategoryCriteriaInput]\n  relatedToTags: [TagCriteriaInput]\n  relatedToAll: [QueryArgument]\n  ref: [String]\n  fixedOrder: Boolean\n  inReverse: Boolean\n  dateCreated: [String]\n  dateUpdated: [String]\n  offset: Int\n  limit: Int\n  orderBy: String\n  siteSettingsId: [QueryArgument]\n  group: [String]\n  groupId: [QueryArgument]\n): TagInterface\n```\n\n----------------------------------------\n\nTITLE: Working with Provisional Drafts in Twig\nDESCRIPTION: Examples of querying provisional (unsaved) drafts and displaying entries with provisional drafts for the current user.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/drafts-revisions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set proposedChanges = craft.entries()\n  .section('news')\n  .provisionalDrafts()\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('news')\n  .withProvisionalDrafts()\n  .all() %}\n\n<ul>\n  {% for post in posts %}\n    <li>\n      <strong>{{ post.title }}</strong>\n      {% if post.isDraft %}\n        <em>Showing your proposed changes</em>\n        <a href=\"{{ post.getCpEditUrl() }}\">Edit</a>\n      {% endif %}\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Using the 'object' test in Twig\nDESCRIPTION: Demonstrates how to use the 'object' test to check if a variable is an object in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry is object ? 'true' : 'false' }}\n{# result: true #}\n\n{{ entry.url is object ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Checkboxes Field Data in Twig and PHP\nDESCRIPTION: Examples of how to access checkbox field data from an element using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Checking if a Guest Customer Already Has a User Account in Twig\nDESCRIPTION: This code checks if the email address associated with the current cart matches an existing user in the system. It can be used to prompt existing users to log in during checkout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/update-cart-customer.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.users.email(cart.email).one() %}\n  You are already a user, please log in.\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Redactor Configuration Format in JSON\nDESCRIPTION: Examples showing the correct JSON formatting for Redactor configuration files in Craft 3. Demonstrates the requirement for double quotes and proper JSON syntax without comments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Bad:\n{\n  /* interesting comment */\n  buttons: ['bold', 'italic']\n}\n\n// Good:\n{\n  \"buttons\": [\"bold\", \"italic\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Named Parameters in Template\nDESCRIPTION: Simple Twig example showing how to access a named parameter that was defined in a route. The route passes the 'year' variable to the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/routing.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Blog Entries from {{ year }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Setting Test Email Address in Craft CMS\nDESCRIPTION: Configures Craft to send all system emails to a single or multiple email addresses for testing purposes. This overrides the default email sending behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_67\n\nLANGUAGE: php\nCODE:\n```\n'testToEmailAddress' => 'me@domain.tld',\n```\n\n----------------------------------------\n\nTITLE: Formatting Address with Twig Address Filter\nDESCRIPTION: Demonstrates how to format an Address object using the address filter. Returns a formatted HTML representation of the address with appropriate structure and classes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAddress = currentUser.getAddresses()|first %}\n{{ myAddress|address }}\n{# Output:\n  <p translate=\"no\">\n  <span class=\"address-line1\">1234 Balboa Towers Circle</span><br>\n  <span class=\"locality\">Los Angeles</span>, <span class=\"administrative-area\">CA</span> <span class=\"postal-code\">92662</span><br>\n  <span class=\"country\">United States</span>\n  </p>\n#}\n```\n\n----------------------------------------\n\nTITLE: Formatting Dates as Timestamps with timestamp Filter in Twig\nDESCRIPTION: The timestamp filter formats a date as a human-readable timestamp using Craft's Formatter service. This provides a consistent way to display timestamps across a site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|timestamp }}\n{# Output: 9:00:00 AM #}\n```\n\n----------------------------------------\n\nTITLE: Loading Global Variables in Email Templates\nDESCRIPTION: Example showing how to access Craft global set variables within email templates, which aren't automatically loaded into the template context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/emails.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set globalSetName = craft.globals.getSetByHandle('globalSetName') %}\n{{ globalSetName.customFieldName }}\n```\n\n----------------------------------------\n\nTITLE: Outputting Asset Source Name in Twig\nDESCRIPTION: Demonstrates how to output an AssetSourceModel's name by directly rendering the source object in a Twig template. When an AssetSourceModel is output without specifying a property, it returns the source's name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/assetsourcemodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nSource: {{ source }}\n```\n\n----------------------------------------\n\nTITLE: Creating Multi-Environment Plugin Settings Config in PHP\nDESCRIPTION: Demonstrates how to create a multi-environment configuration for plugin settings, with different values for different environments like development and production.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    '*' => [\n        'foo' => 'defaultValue',\n    ],\n    '.test' => [\n        'foo' => 'devValue',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Excluding Elements from Arrays with without Filter in Twig\nDESCRIPTION: The without filter returns an array excluding specified element(s). This is useful for removing specific items from a collection while preserving the rest.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries().section('articles').limit(3).find %}\n{% set firstEntry = entries[0] %}\n{% set remainingEntries = entries|without(firstEntry) %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Orders by Purchasable IDs\nDESCRIPTION: Example of querying orders that contain specific purchasables using their IDs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-orders.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set orders = craft.commerce.orders({\n  hasPurchasables: [32,34,35]\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Working with Tax Category Properties\nDESCRIPTION: Example of accessing various properties of a tax category model in Twig, including ID, name, description, default status, product types, and tax rates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for categories as taxCategory %}\n  {# @var taxCategory craft\\commerce\\models\\TaxCategory #}\n  {{ taxCategory.id }}\n  {{ taxCategory.name }}\n  {{ taxCategory.description }}\n  {{ taxCategory.default }}\n  {{ taxCategory.productTypes }}\n  {{ taxCategory.taxRates }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Disabling Element Query Caching in Craft CMS (PHP)\nDESCRIPTION: Sets the cacheElementQueries config option to false, which prevents element queries from being recorded when using the cache tag in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_39\n\nLANGUAGE: php\nCODE:\n```\n'cacheElementQueries' => false,\n```\n\n----------------------------------------\n\nTITLE: Displaying Image Thumbnails with Asset Query\nDESCRIPTION: Demonstrates how to create and execute an asset query to display a list of image thumbnails from a specific volume, including filtering by image type and generating thumbnail URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Create an asset query with the 'volume' and 'kind' parameters #}\n{% set myAssetQuery = craft.assets()\n  .volume('photos')\n  .kind('image') %}\n\n{# Fetch the assets #}\n{% set images = myAssetQuery.all() %}\n\n{# Display the thumbnail list #}\n<ul>\n  {% for image in images %}\n    <li><img src=\"{{ image.getUrl('thumb') }}\" alt=\"{{ image.alt }}\"></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Plugin Translation Directory Structure\nDESCRIPTION: Shows the expected directory structure for plugin translations, demonstrating where translation files should be placed within a plugin's source directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/translation-categories.md#2025-04-22_snippet_2\n\nLANGUAGE: treeview\nCODE:\n```\nsrc/\n├── Plugin.php\n├── ...\n└── translations/\n    └── de/\n        └── plugin-handle.php\n```\n\n----------------------------------------\n\nTITLE: Accessing Tax Category Properties in Twig\nDESCRIPTION: Shows how to iterate over tax categories and access their properties in a Twig template. This includes basic details like ID, name, description, and related product types and tax rates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for categories as taxCategory %}\n  {# @var taxCategory craft\\commerce\\models\\TaxCategory #}\n  {{ taxCategory.id }}\n  {{ taxCategory.name }}\n  {{ taxCategory.description }}\n  {{ taxCategory.default }}\n  {{ taxCategory.productTypes }}\n  {{ taxCategory.taxRates }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Sets in Twig\nDESCRIPTION: Shows how to access global set variables in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n<p>{{ companyInfo.companyName }} was established in {{ companyInfo.yearEstablished }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Creating Routes with Named Regex Subpatterns in PHP\nDESCRIPTION: Shows how to use named regular expression subpatterns in routes. Named patterns are available both in the 'matches' array and as individual variables in the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/routing.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n'news/(?P<year>\\d{4})/(?P<month>\\d{2})' => 'news/_archive',\n```\n\n----------------------------------------\n\nTITLE: Extending Control Panel Layout in Twig\nDESCRIPTION: Shows how to extend the Craft CMS control panel layout in a plugin's Twig template, setting the title and content variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_layouts/cp\" %}\n\n{% set title = \"Cocktail Recipes\"|t %}\n\n{% set content %}\n  <p>Hello!</p>\n{% endset %}\n```\n\n----------------------------------------\n\nTITLE: Updating Layout Template with Header and Footer in Twig\nDESCRIPTION: This snippet shows how to update the main layout template to include a header and footer, providing a consistent structure across all pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/extra-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"{{ craft.app.language }}\">\n  <head>\n    <meta charset=\"utf-8\"/>\n    <title>{{ siteName }}</title>\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\n\n    {% do craft.app.view.registerCssFile('@web/styles.css') %}\n  </head>\n  <body>\n    <header>\n      <a class=\"home\" href=\"{{ siteUrl }}\">{{ siteName }}</a>\n    </header>\n    <main>\n      {% block content %}\n        {# Nothing here, yet! #}\n      {% endblock %}\n    </main>\n    <footer>\n      <div class=\"copyright\">&copy;{{ now | date('Y') }} {{ siteName }}</div>\n      <div class=\"colophon\">Built with <a href=\"https://craftcms.com/\" target=\"_blank\">Craft CMS</a></div>\n    </footer>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Expiration for Template Caching in PHP\nDESCRIPTION: Implementation of getExpiryDate() method for elements with a lifespan. This helps Craft determine the maximum allowable cache duration for template caching.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_37\n\nLANGUAGE: php\nCODE:\n```\npublic function getExpiryDate(): ?DateTime\n{\n    return $this->getNextSaleEndDate();\n}\n```\n\n----------------------------------------\n\nTITLE: Reference Tag Syntax in Craft CMS\nDESCRIPTION: Demonstrates the basic syntax structure for reference tags in Craft CMS. The tag consists of three segments: Type, Identifier, and Property (optional).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/reference-tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{<Type>:<Identifier>:<Property>}\n```\n\n----------------------------------------\n\nTITLE: Example JSON Response from a GraphQL Mutation\nDESCRIPTION: A JSON response example showing the data returned after executing a createWidget GraphQL mutation. The response includes the created widget's ID and title fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_20\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"createWidget\": {\n        \"id\": \"123\",\n        \"title\": \"My Glorious Mutated Widget\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Cart Form with Line Item Options and Notes\nDESCRIPTION: Advanced cart form implementation including customer notes and custom options like engraving and gift wrapping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adding-to-and-updating-the-cart.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products.one() %}\n{% set variant = product.defaultVariant %}\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Added {{ product.title }} to the cart.\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n\n  <input type=\"text\" name=\"note\" value=\"\">\n\n  <select name=\"options[engraving]\">\n    <option value=\"happy-birthday\">Happy Birthday</option>\n    <option value=\"good-riddance\">Good Riddance</option>\n  </select>\n\n  <select name=\"options[giftwrap]\">\n    <option value=\"yes\">Yes Please</option>\n    <option value=\"no\">No Thanks</option>\n  </select>\n\n  <input type=\"hidden\" name=\"purchasableId\" value=\"{{ variant.id }}\">\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Counting Products in Multiple Languages\nDESCRIPTION: Examples of counting enabled products in Twig, PHP, and GraphQL without fetching the actual product data, which is more efficient when only the count is needed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Count all enabled products #}\n{% set myProductCount = craft.products()\n  .status('enabled')\n  .count() %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Product;\n\n// Count all enabled products\n$myProductCount = Product::find()\n    ->status(Product::STATUS_ENABLED)\n    ->count();\n```\n\nLANGUAGE: graphql\nCODE:\n```\n# Count all enabled products\n{\n  productCount(status: \"enabled\")\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Eager Loading in PHP\nDESCRIPTION: Example of implementing eager loading support for custom element relations\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_48\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\nuse craft\\elements\\User;\nuse craft\\helpers\\ArrayHelper;\n\n// ...\n\npublic static function eagerLoadingMap(array $sourceElements, string $handle): array|null|false\n{\n    // Memoize the source element IDs:\n    $sourceElementIds = ArrayHelper::getColumn($sourceElements, 'id');\n\n    // The \"handle\" is the key that users will specify\n    // when eager-loading this relationship:\n    if ($handle === 'vendor') {\n        // Do a fresh selection from the products table\n        // to create a map of element IDs to vendor IDs,\n        // excluding products with no vendor ID:\n        $map = (new Query())\n            ->select(['id as source', 'vendorId as target'])\n            ->from(['{{%plugin_products}}'])\n            ->where([\n                'and',\n                ['id' => $sourceElementIds],\n                ['not', ['vendorId' => null]],\n            ])\n            ->all();\n\n        return [\n            'elementType' => User::class,\n            'map' => $map,\n        ];\n    }\n\n    return parent::eagerLoadingMap($sourceElements, $handle);\n}\n```\n\n----------------------------------------\n\nTITLE: Listing All Product Types in Twig\nDESCRIPTION: Demonstrates how to iterate through all product types using the Commerce productTypes service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for type in craft.commerce.productTypes.allProductTypes %}\n  {{ type.handle }} - {{ type.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Asset Sources in Craft CMS\nDESCRIPTION: Hook to modify the available sources for assets in the control panel. Adds file kind-based sources when in index context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyAssetSources(&$sources, $context)\n{\n    if ($context == 'index') {\n        $sources[] = array('heading' => 'File Kinds');\n\n        foreach (IOHelper::getFileKinds() as $kind => $info) {\n            $sources['kind:'.$kind] = array(\n                'label' => $info['label'],\n                'criteria' => array('kind' => $kind)\n            );\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Systemd Commands for Managing Queue Worker Service\nDESCRIPTION: Terminal commands for managing the Craft queue worker as a systemd service, including enabling, starting, checking status, and stopping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n# Install hooks to run a single worker on boot:\nsudo systemctl enable craft-queue-worker\n\n# Start a worker:\nsudo systemctl start craft-queue-worker\n\n# Get the worker's status:\nsudo systemctl status craft-queue-worker\n\n# Stop a worker:\nsudo systemctl stop craft-queue-worker\n```\n\n----------------------------------------\n\nTITLE: Configuring VS Code Path Mappings for Custom Project Layout in JavaScript\nDESCRIPTION: This snippet demonstrates how to adjust the path mappings in the VS Code launch configuration for a project with a non-standard directory structure, where the Craft CMS files are located in a 'craft' subdirectory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/xdebug.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n\"pathMappings\": {\n    \"/app\": \"${workspaceFolder}/craft\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Settings for Control Panel in Craft CMS\nDESCRIPTION: Implementation of the defineSettings() method in the plugin's main class to specify what settings the plugin has. This method returns an array of setting names and their parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/plugin-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesPlugin extends BasePlugin\n{\n    // ...\n\n    protected function defineSettings()\n    {\n        return array(\n            'cocktailCategories' => array(\n                AttributeType::Mixed,\n                'default' => array('Sours', 'Fizzes', 'Juleps')\n            ),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying HTML Attributes with attr Filter in Twig\nDESCRIPTION: The attr filter modifies an HTML tag's attributes. It can add, modify, or remove attributes from the first tag in a string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div>' %}\n{{ tag|attr({\n  class: 'foo'\n}) }}\n{# Output: <div class=\"foo\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set svg %}\n  <?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <svg>...</svg>\n{% endset %}\n{{ svg|attr({\n  class: 'icon'\n}) }}\n{# Output:\n  <?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <svg class=\"icon\">...</svg> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\" disabled>' %}\n{{ tag|attr({\n    disabled: false\n}) }}\n{# Output: <input type=\"text\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div class=\"foo\" style=\"color: black;\">' %}\n{{ tag|attr({\n  class: 'bar',\n  style: {background: 'red'}\n}) }}\n{# Output: <div class=\"foo bar\" style=\"color: black; background: red;\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\">' %}\n{{ tag|attr({\n  type: 'email'\n}) }}\n{# Output: <input type=\"email\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<div class=\"foo\">' %}\n{{ tag|attr({class: false})|attr({class: 'bar'}) }}\n{# Output: <div class=\"bar\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = '<input type=\"text\">' %}\n{{ tag|attr({\n  type: 'submit',\n  value: 'Register & Subscribe →'\n}) }}\n{# Output: <input type=\"submit\" value=\"Register &amp; Subscribe →\"> #}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Asset Field for Feature Image in Craft CMS\nDESCRIPTION: Instructions for creating an asset field to handle feature images for blog posts. Includes configuration for asset location, allowed file types, and relation limits. The field is then customized in the layout with a specific label and handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<BrowserShot\n    url=\"https://tutorial.ddev.site/admin/settings/sections/new\"\n    id=\"newAssetsField\"\n    :poi=\"{\n        name: [44.5, 3, 'A'],\n        handle: [44.5, 7, 'B'],\n        type: [44.5, 18, 'C'],\n        restrict: [44.5, 22, 'D'],\n        location: [44.5, 26, 'E'],\n        allowSubfolders: [44.5, 30, 'F'],\n        defaultLocation: [44.5, 34, 'G'],\n        allowedTypes: [44.5, 52, 'H'],\n        minMaxRelations: [44.5, 74, 'I'],\n        viewMode: [44.5, 80, 'J'],\n    }\"\n    :link=\"false\"\n    :max-height=\"600\"\n    caption=\"Settings for a new asset field.\">\n<img src=\"../images/new-assets-field.png\" alt=\"Screenshot of new asset field settings\" />\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: Adding Single Item to Cart\nDESCRIPTION: Twig template example showing how to create a form to add a single product variant to the cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n{% set variant = product.defaultVariant %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('purchasableId', variant.id) }}\n  <button>Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Extending ComponentExample in PHP for Craft CMS Testing\nDESCRIPTION: ExtendedComponentExample class implements the craft\\base\\ComponentInterface by extending ComponentExample. It provides an alternative implementation for testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\components\\ExtendedComponentExample\n```\n\n----------------------------------------\n\nTITLE: Using Negative Tests with is not Syntax in Twig\nDESCRIPTION: Demonstration of using the is not syntax to check for the negative result of a test, in this case exiting with a 404 status if an entry is not defined.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry is not defined %}\n  {% exit 404 %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Alert Syntax in Changelog\nDESCRIPTION: Examples of using GitHub's alert syntax to highlight important information in release notes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/changelogs-and-updates.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n> [!NOTE]  \n> Highlights information that users should take into account, even when skimming.\n\n> [!IMPORTANT]  \n> Crucial information necessary for users to succeed.\n\n> [!WARNING]  \n> Critical content demanding immediate user attention due to potential risks.\n```\n\n----------------------------------------\n\nTITLE: Converting Date Field to Time Field in PostgreSQL\nDESCRIPTION: SQL query to update existing Date field values when converting to a Time field in PostgreSQL. Adjusts for timezone offset.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE \"content\"\nSET \"field_myFieldHandle\" = \"field_myFieldHandle\" at time zone 'UTC' at time zone '-07:00'\nWHERE \"field_myFieldHandle\" IS NOT NULL\n```\n\n----------------------------------------\n\nTITLE: Checkout Without Payment Form in Twig\nDESCRIPTION: Form implementation for completing checkout without payment when allowCheckoutWithoutPayment setting is enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/making-payments.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/cart/complete') }}\n  {{ redirectInput('/shop/customer/order?number='~cart.number~'&success=true') }}\n\n  <button type=\"submit\">Commit to buy</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using Basic Twig Tags\nDESCRIPTION: Shows how to use the requireLogin and exit tags in Twig templates for access control and response handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# A user must be logged in to visit this page #}\n{% requireLogin %}\n\n{# This is not the page you are looking for #}\n{% exit 404 %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Active Discounts in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve and display all active discounts in a Craft Commerce template. It uses the craft.commerce.discounts.allActiveDiscounts method to get an array of enabled discounts that are currently active.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for discount in craft.commerce.discounts.allActiveDiscounts %}\n  {{ discount.name }} - {{ discount.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Generating Settings HTML for Craft CMS Plugin Control Panel\nDESCRIPTION: Implementation of the getSettingsHtml() method that returns HTML for displaying plugin settings. It uses the templates service to render a dedicated settings template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/plugin-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesPlugin extends BasePlugin\n{\n    // ...\n\n    public function getSettingsHtml()\n    {\n       return craft()->templates->render('cocktailrecipes/settings', array(\n           'settings' => $this->getSettings()\n       ));\n   }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing getCpAlerts Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers control panel alerts based on conditions. Returns an array of alert messages that will be displayed at the top of control panel pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function getCpAlerts($path, $fetch)\n{\n    if (craft()->config->devMode) {\n        return array('Dev Mode is enabled!');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Commerce Configuration Values in PHP\nDESCRIPTION: Example of overriding default Commerce config settings in a config/commerce.php file. This example sets the purgeInactiveCartsDuration parameter to one day.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/configuration.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'purgeInactiveCartsDuration' => 'P1D',\n];\n```\n\n----------------------------------------\n\nTITLE: Working with Nested Collections in Twig Globals\nDESCRIPTION: Shows how to handle nested values in the _globals collection by creating and manipulating a nested collection object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% do _globals.set('events', collect()) %}\n\n{# ... #}\n\n{% do _globals.get('events').push(\"show:element:#{entry.id}\") %}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Expressions with expression Function\nDESCRIPTION: Shows how to use the expression function to create and return a new yii\\db\\Expression object for use in database queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .andWhere(expression('[[authorId]] = :authorId', {authorId: currentUser.id}))\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Switching Between Multiple Carts in Craft Commerce (Twig)\nDESCRIPTION: This example shows how to create a form that allows users to switch between multiple carts in Craft Commerce. It displays a select dropdown with cart details and submits the selected cart number for loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/load-cart') }}\n  {{ redirectInput('cart') }}\n\n  <select name=\"number\">\n    {% for oldCart in oldCarts %}\n      <option value=\"{{ oldCart.number }}\">\n        {{ oldCart.shortNumber }}\n        ({{ oldCart.totalQty }} items, last updated {{ oldCart.dateUpdated.format('F j, Y') }})\n      </option>\n    {% endfor %}\n  </select>\n\n  <button>Switch</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring Installation Process in Travis CI\nDESCRIPTION: Setup for the installation phase that disables xDebug when not needed for performance optimization and installs Composer dependencies. xDebug is only enabled in environments where code coverage is being generated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\ninstall:\n- |\n  if [[ $TASK_TESTS_COVERAGE != 1 ]]; then\n    # disable xdebug for performance reasons when code coverage is not needed.\n    phpenv config-rm xdebug.ini || echo \"xdebug is not installed\"\n  fi\n  # install composer dependencies\n  export PATH=\"$HOME/.composer/vendor/bin:$PATH\"\n  travis_retry composer install $DEFAULT_COMPOSER_FLAGS\n```\n\n----------------------------------------\n\nTITLE: Creating About Page Template in Twig\nDESCRIPTION: This snippet shows how to create a template for the About page, extending the main layout and displaying a profile image and bio.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/extra-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layout' %}\n\n{% set profileImage = entry.profileImage.one() %}\n\n{% block content %}\n  <h1>{{ entry.title }}</h1>\n\n  <div class=\"about\">\n    {% if profileImage %}\n      <div class=\"photo\">\n        {{ profileImage.getImg() }}\n      </div>\n    {% endif %}\n\n    <div class=\"bio\">\n      {{ entry.bio | md }}\n    </div>\n  </div>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Elements with Additional Parameters\nDESCRIPTION: Shows how to add additional parameters to filter related elements when querying them in Craft CMS Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for ingredient in cocktail.ingredients.section('ingredients') %}\n    <li>{{ ingredient.getLink() }}</li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Parsing Aliases in Twig\nDESCRIPTION: Demonstrates the use of the alias() function to parse strings as aliases, which can be used for referencing paths or URLs defined in the Craft configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ alias('@assetBaseUrl/images/logo.png') }}\">\n```\n\n----------------------------------------\n\nTITLE: Optimized Tag Field Access Pattern in Twig\nDESCRIPTION: Best practice for working with tags by storing the field access in a variable first. This improves readability and performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tags = entry.tagsFieldHandle %}\n\n{% if tags | length %}\n\n  <h3>Some great tags</h3>\n  {% for tag in tags %}\n    ...\n  {% endfor %}\n\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Maximum Sites Limit\nDESCRIPTION: PHP configuration example for increasing the maximum number of sites allowed in a Craft CMS installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'sites' => [\n            'maxSites' => 5000,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Retrieving Craft Commerce Settings in Twig\nDESCRIPTION: This snippet demonstrates how to get the Craft Commerce general settings model in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set settings = craft.commerce.settings %}\n```\n\n----------------------------------------\n\nTITLE: Merging Arrays with the Twig merge Filter\nDESCRIPTION: Demonstrates how to use the merge filter to combine arrays or hashes. Shows examples for merging with sequential arrays, associative arrays, and nested arrays using the recursive option.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set values = [1, 2] %}\n{% set values = values|merge(['Lucille', 'Buster']) %}\n{# Result: [1, 2, 'Lucille', 'Buster'] #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = { 'Buster': 'Bluth', 'Lindsay': 'Bluth' } %}\n{% set items = items|merge({ 'Tobias': 'Fünke', 'Lindsay': 'Fünke' }) %}\n{# Result: { 'Buster': 'Bluth', 'Tobias': 'Fünke', 'Lindsay': 'Fünke' } #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = { 'Buster': 'Bluth', 'Lindsay': 'Bluth' } %}\n{% set items = { 'Tobias': 'Fünke', 'Lindsay': 'Fünke' }|merge(items) %}\n{# Result: { 'Tobias': 'Fünke', 'Lindsay': 'Bluth', 'Buster': 'Bluth' } #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = {\n  'rebellion': { 'Bespin': 'Calrissian', 'Hoth': 'Organa', 'Crait': 'Organa' },\n  'empire': { 'Coruscant': 'Palpatine', 'Endor': 'Palpatine' }\n} %}\n{% set items = items|merge({\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n}) %}\n{# Result: {\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n} #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = {\n  'rebellion': { 'Bespin': 'Calrissian', 'Hoth': 'Organa', 'Crait': 'Organa' },\n  'empire': { 'Coruscant': 'Palpatine', 'Endor': 'Palpatine' }\n} %}\n{% set items = items|merge({\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n}, true) %}\n{# Result: {\n  'rebellion': {\n    'Bespin': 'Calrissian',\n    'Hoth': 'Organa',\n    'Crait': 'Organa',\n    'Endor': 'Solo/Organa'\n  },\n  'empire': {\n    'Coruscant': 'Palpatine',\n    'Endor': 'Palpatine',\n    'Bespin': 'Vader',\n    'Hoth': 'Veers'\n  }\n} #}\n```\n\n----------------------------------------\n\nTITLE: Migrating modifyCpNav Hook to Craft 3 PHP\nDESCRIPTION: Demonstrates how to migrate the modifyCpNav plugin hook from Craft 2 to an event listener in Craft 3 for modifying the control panel navigation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterCpNavItemsEvent;\nuse craft\\web\\twig\\variables\\Cp;\nuse yii\\base\\Event;\n\nEvent::on(\n    Cp::class,\n    Cp::EVENT_REGISTER_CP_NAV_ITEMS,\n    function(RegisterCpNavItemsEvent $event) {\n        if (\\Craft::$app->user->identity->admin) {\n            $event->navItems['foo'] = [\n                'label' => \\Craft::t('plugin-handle', 'Utils'),\n                'url' => 'utils'\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Pagebreak Plugin in JavaScript\nDESCRIPTION: Redactor configuration that enables the pagebreak plugin for content pagination.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"buttons\": [/* ... */],\n  \"plugins\": [\"pagebreak\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Assets in Craft CMS\nDESCRIPTION: A simple loop that iterates through the assets selected in an Assets field and outputs their URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for asset in entry.assetsFieldHandle %}\n  {{ asset.url }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in Twig\nDESCRIPTION: Demonstrates how to query for elements that have a Tags field, filtering results based on the field data using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Radio Button Options in Twig\nDESCRIPTION: Iterates through all available options in a Radio Button field, regardless of which one is selected. This allows displaying all options and can identify the selected one via option.selected property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/radio-buttons-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n    {% for option in entry.radioFieldHandle.options %}\n        <li>{{ option }}</li>\n    {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Generating HTML Input Elements with input()\nDESCRIPTION: Shows how to use the input() function to create HTML input tags with specified type, name, and value. Includes an example with additional attributes via the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('email', 'email-input', '') }}\n{# Output: <input type=\"email\" name=\"email-input\" value=\"\"> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('email', 'email-input', '', {\n  id: 'custom-input'\n}) }}\n{# Output: <input type=\"email\" id=\"custom-input\" name=\"email-input\" value=\"\"> #}\n```\n\n----------------------------------------\n\nTITLE: Rendering Widget Settings Form with getSettingsHtml Method in PHP\nDESCRIPTION: Implementation of the getSettingsHtml() method to render the HTML for widget settings. This method uses a template to generate the settings form and passes the current settings to the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    // ...\n\n    public function getSettingsHtml()\n    {\n        return craft()->templates->render('cocktailrecipes/_widgets/recentcocktails/settings', array(\n           'settings' => $this->getSettings()\n        ));\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Parsing Environment Variables in PHP for Craft CMS API Calls\nDESCRIPTION: This code demonstrates how to parse environment variables when making API calls in Craft CMS. It uses App::parseEnv() to evaluate the configured values at the time of use, ensuring secrets are properly handled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$client = \\Craft::createGuzzleClient([\n    'baseUri' => App::parseEnv($crm->targetUrl),\n]);\n\n$response = $client->post('', [\n    'body' => [\n        $webhook->secretParam => \\craft\\helpers\\App::parseEnv($crm->secret),\n        'payload' => [\n            // ...\n        ],\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Finding Minimum Value with min() Function\nDESCRIPTION: Demonstrates how to use the min() function to find the smallest number in a set of values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ min(1, 2, 3) }} => 1\n```\n\n----------------------------------------\n\nTITLE: Using POS_HEAD with view.registerJs in Twig\nDESCRIPTION: Demonstrates registering JavaScript code to be placed at the end of the head element using the POS_HEAD constant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Where am I?!');\n{% endset %}\n\n{% do view.registerJs(js, POS_HEAD) %}\n```\n\n----------------------------------------\n\nTITLE: Generating Custom Order Reference Numbers\nDESCRIPTION: Demonstrates how to create a custom order reference number format using date and ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.dateOrdered|date('Y') }}-{{ id }}\n```\n\n----------------------------------------\n\nTITLE: Advanced Coupon Code Form with Error Handling\nDESCRIPTION: Enhanced form implementation that includes error handling and validation feedback for coupon code submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/coupon-codes.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  {% set couponCodeNotice = cart.getFirstNotice(null, 'couponCode') %}\n\n  {% set couponCodeError = cart.getFirstError('couponCode') %}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    class=\"{% if couponCodeNotice or couponCodeError %}has-error{% endif %}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Rates in Craft Commerce\nDESCRIPTION: Examples of retrieving tax rates using both Twig and PHP. Shows how to get all tax rates and access their properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getAllTaxRates() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getAllTaxRates();\n```\n\n----------------------------------------\n\nTITLE: Configuring Monolog Target Settings in Craft CMS\nDESCRIPTION: Example configuration for customizing Monolog logging behavior including log context, severity levels, formatting, and exception filtering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\nuse Monolog\\Formatter\\LineFormatter;\nuse Psr\\Log\\LogLevel;\nuse yii\\i18n\\PhpMessageSource;\nuse yii\\web\\HttpException;\n\nreturn [\n    'components' => [\n        'log' => [\n            'monologTargetConfig' => [\n                // Only log context in `devMode`\n                'logContext' => App::devMode(),\n\n                // Only export messages with `warning` severity and higher:\n                'level' => LogLevel::WARNING,\n\n                // Force single-line logs, even in `devMode`:\n                'allowLineBreaks' => false,\n\n                // Override message filtering to exclude *all* 400-level exceptions:\n                // (This replaces the default exclusions, `PhpMessageSource:*` and `HttpException:404`)\n                'except' => [\n                    PhpMessageSource::class . ':*',\n                    HttpException::class . ':4*',\n                ],\n\n                // Change the default log formatter and date format:\n                'formatter' => new LineFormatter(\n                    format: \"%datetime% [%level_name%][%context.category%] %message% %context% %extra%\\n\",\n                    dateFormat: DATE_ATOM\n                ),\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Database Query Syntax in Craft 3\nDESCRIPTION: Example of the new Query builder syntax for selecting data from the database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\n\n$results = (new Query())\n    ->select(['column1', 'column2'])\n    ->from(['{{%mytablename}}'])\n    ->where(['foo' => 'bar'])\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Setting Up Global Set Fixtures in Craft CMS\nDESCRIPTION: Example of a Global Set fixture data file that creates a global set with a specific handle. Global sets are unique elements in Craft that don't necessarily have their own database rows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'handle' => 'aHandle',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Entries in Twig\nDESCRIPTION: This Twig snippet demonstrates how to check if there are any related entries without fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related entries!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Basic HTTP Authentication with User Accounts\nDESCRIPTION: Configuration for HTTP authentication using existing Craft user accounts. Includes site-specific and conditional authentication rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\filters\\BasicHttpAuthLogin;\n\nreturn [\n    'as requireBasicLogin' => [\n        'class' => BasicHttpAuthLogin::class,\n\n        // Test against arbitrary criteria (akin to validators):\n        'when' => fn() => Craft::$app->env !== 'production',\n\n        // Only apply to specific sites:\n        'site' => ['secretSite'],\n\n        // Make optional for some actions:\n        'optional' => ['queue/run'],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Testing Event Triggering in Craft CMS with PHP\nDESCRIPTION: Basic example of using Craft's expectEvent method to verify that an event is triggered. This method takes the event class, event name, and a closure that should trigger the event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->tester->expectEvent(MyComponent::class, MyComponent::AN_EVENT, function() {\n    MyModule::getInstance()->myComponent->myMethod();\n});\n```\n\n----------------------------------------\n\nTITLE: Preventing Caching with the 'unless' Parameter\nDESCRIPTION: Demonstrates how to prevent caching when a specific condition is met, in this example when a user is logged in.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Don't cache if someone is logged in #}\n{% cache unless currentUser %}\n```\n\n----------------------------------------\n\nTITLE: Getting Order Data for Discount Condition Formula in PHP\nDESCRIPTION: This PHP code snippet shows how the order data is prepared for use in discount condition formulas. It converts the order to an array format that includes line items, shipping address, and billing address data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$order->toArray(\n    [], ['lineItems.snapshot', 'shippingAddress', 'billingAddress']\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Multiple Items with Options and Notes\nDESCRIPTION: Form that adds multiple items to the cart with line item options and notes for each variant, properly structured for the commerce/cart/update-cart action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.products().one() %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {% for variant in product.variants %}\n    {{ hiddenInput('purchasables[' ~ loop.index ~ '][id]', variant.id) }}\n    {{ hiddenInput('purchasables[' ~ loop.index ~ '][qty]', 1) }}\n    <input type=\"text\" name=\"purchasables[{{ loop.index }}][note]\" value=\"\">\n    <select name=\"purchasables[{{ loop.index }}][options][engraving]\">\n      <option value=\"happy-birthday\">Happy Birthday</option>\n      <option value=\"good-riddance\">Good Riddance</option>\n    </select>\n    <select name=\"purchasables[{{ loop.index }}][options][giftwrap]\">\n      <option value=\"yes\">Yes Please</option>\n      <option value=\"no\">No Thanks</option>\n    </select>\n  {% endfor %}\n  <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying User Friendly Name in Twig\nDESCRIPTION: Example of using getFriendlyName() method to display a personalized greeting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/usermodel.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<p>Hello, {{ currentUser.getFriendlyName() }}</p>\n```\n\n----------------------------------------\n\nTITLE: Registering HTML Code in Twig\nDESCRIPTION: The html tag registers arbitrary HTML code on the page. It can be used to inject HTML at different positions in the document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% html %}\n  <p>This will be placed right before the <code>&lt;/body&gt;</code> tag.</p>\n{% endhtml %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set para = '<p>This will be placed right before the <code>&lt;/body&gt;</code> tag.</p>' %}\n{% do view.registerHtml(para) %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Related Assets in PHP\nDESCRIPTION: PHP code that retrieves all related assets from an Assets field and processes them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$relatedAssets = $entry->myFieldHandle->all();\n\nif (count($relatedAssets)) {\n    foreach ($relatedAssets as $rel) {\n        // do something with $rel->url and $rel->filename\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating SKUs for Restored Purchasable\nDESCRIPTION: Updates the SKU in commerce_variants, commerce_products, and commerce_purchasables tables when restoring a purchasable that has a conflicting SKU. Makes the SKU unique by appending '-1'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/purchasable-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif ($found) {\n\n    $this->sku = $this->getSku() . '-1'; // make unique\n\n    // Update variant table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_variants}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n\n    if ($this->isDefault) {\n        Craft::$app->getDb()->createCommand()->update('{{%commerce_products}}',\n            ['defaultSku' => $this->sku],\n            ['id' => $this->productId]\n        )->execute();\n    }\n\n    // Update purchasable table with new SKU\n    Craft::$app->getDb()->createCommand()->update('{{%commerce_purchasables}}',\n        ['sku' => $this->sku],\n        ['id' => $this->getId()]\n    )->execute();\n}\n```\n\n----------------------------------------\n\nTITLE: Traditional CSS Link Tag with Dynamic URL\nDESCRIPTION: Shows how to create a standard HTML link tag with a dynamic URL generated by Craft\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<link href=\"{{ url('styles.css') }}\" rel=\"stylesheet\">\n```\n\n----------------------------------------\n\nTITLE: Data Selection in Craft CMS Migrations\nDESCRIPTION: Shows how to select data in a Craft CMS migration using Yii's Query Builder since craft\\db\\Migration doesn't provide a method for data selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Query;\n\n$result = (new Query())\n    // ...\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Component Config Field Layout Management\nDESCRIPTION: Comprehensive example of managing field layouts within project config components including save, update, and delete operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\Table;\nuse craft\\helpers\\Db;\nuse craft\\helpers\\StringHelper;\nuse craft\\models\\FieldLayout;\n\n// ...\n\npublic function saveComponent($myComponent)\n{\n    // ...\n\n    $fieldLayoutConfig = $fieldLayout->getConfig();\n    if ($fieldLayoutConfig) {\n        if (!$fieldLayout->id) {\n            $layoutUid = $fieldLayout->uid = StringHelper::UUID();\n        } else {\n            $layoutUid = Db::uidById(Table::FIELDLAYOUTS, $fieldLayout->id);\n        }\n        $myComponentConfig['fieldLayouts'] = [\n            $layoutUid => $fieldLayoutConfig\n        ];\n    }\n\n    // ...\n}\n\npublic function handleChangedComponent(ConfigEvent $event)\n{\n    // ...\n\n    if (!empty($data['fieldLayouts'])) {\n        // Save the field layout\n        $layout = FieldLayout::createFromConfig(reset($data['fieldLayouts']));\n        $layout->id = $myComponentRecord->fieldLayoutId;\n        $layout->type = MyComponent::class;\n        $layout->uid = key($data['fieldLayouts']);\n        Craft::$app->fields->saveLayout($layout);\n        $myComponentRecord->fieldLayoutId = $layout->id;\n    } else if ($myComponentRecord->fieldLayoutId) {\n        // Delete the field layout\n        Craft::$app->fields->deleteLayoutById($myComponentRecord->fieldLayoutId);\n        $myComponentRecord->fieldLayoutId = null;\n    }\n\n    // ...\n}\n\npublic function handleDeletedComponent(ConfigEvent $event)\n{\n    // ...\n\n    // Delete the field layout\n    if ($myComponentRecord->fieldLayoutId) {\n        Craft::$app->fields->deleteLayoutById($myComponentRecord->fieldLayoutId);\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Using Switch Statement in Twig\nDESCRIPTION: This example shows how to simplify conditional logic using the {% switch %} tag when comparing the same variable against multiple values. It evaluates a Matrix block's type and renders content accordingly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/switch.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% switch matrixBlock.type %}\n\n    {% case \"text\" %}\n\n        {{ matrixBlock.textField | markdown }}\n\n    {% case \"image\" %}\n\n        {{ matrixBlock.image[0].getImg() }}\n\n    {% default %}\n\n        <p>A font walks into a bar.</p>\n        <p>The bartender says, \"Hey, we don't serve your type in here!\"</p>\n\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Constant for Payment Currency in Craft Commerce\nDESCRIPTION: Example showing how to set the COMMERCE_PAYMENT_CURRENCY constant to lock a cart's payment currency to a specific 3-digit ISO code. This would typically be set in the index.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/payment-currencies.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nCOMMERCE_PAYMENT_CURRENCY\n```\n\n----------------------------------------\n\nTITLE: Case-Insensitive Querying for Plain Text Fields in Twig\nDESCRIPTION: Demonstrates how to perform a case-insensitive query on a plain text field using a hash with 'value' and 'caseInsensitive' keys in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set reds = craft.entries()\n  .section('swatches')\n  .colorGroupCode({\n    value: 'red',\n    caseInsensitive: true,\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Outputting Related Elements in Twig\nDESCRIPTION: Demonstrates how to access and output related elements from a source element using Twig templating in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if cocktail.ingredients | length %}\n    <h3>Featured Blog Posts</h3>\n\n    <ul>\n        {% for ingredient in cocktail.ingredients %}\n            <li>{{ ingredient.getLink() }}</li>\n        {% endfor %}\n    </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Updating Postal Code Input in Twig for Commerce 4\nDESCRIPTION: This snippet demonstrates how to update the input field for ZIP/postal code when migrating from Commerce 3 to Commerce 4. It shows the change in property name from 'zipCode' to 'postalCode'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{# @var model craft\\commerce\\models\\Address #}\n{{ input('text', 'address[zipCode]', model.zipCode ?? '') }}\n\n{# Commerce 4 #}\n{# @var address craft\\elements\\Address #}\n{{ input('text', 'postalCode', address.postalCode ?? '') }}\n```\n\n----------------------------------------\n\nTITLE: Example GraphQL Mutation Query for Creating a Widget\nDESCRIPTION: Example of a GraphQL mutation query for creating a new widget in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_16\n\nLANGUAGE: graphql\nCODE:\n```\nmutation NewWidget($title: String) {\n  createWidget(title: $title) {\n    id\n    title\n  }\n}\n\n# query variables:\n# {\n#  \"title\": \"My Glorious Mutated Widget\",\n# }\n```\n\n----------------------------------------\n\nTITLE: Installing Commerce Example Templates via Copy Command\nDESCRIPTION: Command to copy all Commerce example templates from the vendor directory into the project's templates folder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/example-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncp -r vendor/craftcms/commerce/example-templates/dist/* ./templates\n```\n\n----------------------------------------\n\nTITLE: Suppressing Order Status Emails with PHP\nDESCRIPTION: PHP event handler that prevents order status emails from being sent by listening to the status change event and setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/emails.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\OrderStatusEmailsEvent;\nuse craft\\commerce\\services\\OrderStatuses;\nuse yii\\base\\Event;\n\nEvent::on(\n    OrderStatuses::class,\n    OrderStatuses::EVENT_ORDER_STATUS_CHANGE_EMAILS,\n    function (OrderStatusEmailsEvent $event) {\n        // Prevent sending an order status email\n        $event->isValid = false;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Manually Creating Categories ElementCriteriaModel in Twig\nDESCRIPTION: This snippet shows the equivalent manual creation of the ElementCriteriaModel that a Categories field handle returns. It demonstrates the relation parameters being used under the hood.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.categories({\n  relatedTo: { sourceElement: entry, field: \"categoriesFieldHandle\" },\n  limit:     null\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags with parseRefs in Twig\nDESCRIPTION: The parseRefs filter parses a string for reference tags, converting them to their actual content. This is useful for working with reference tags in content fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  {entry:blog/hello-world:link} was my first blog post. Pretty geeky, huh?\n{% endset %}\n\n{{ content|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Registering an Adjuster in Craft Commerce Plugin\nDESCRIPTION: Demonstrates how to register a custom adjuster in a Craft Commerce plugin by implementing the commerce_registerOrderAdjusters method. This method returns an array of adjuster objects that will be applied to the order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/adjusters.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_registerOrderAdjusters(){\n  return [\n    new MyAdjusterClass\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements Across Sections with Lightswitch Fields in Twig\nDESCRIPTION: Demonstrates querying elements across multiple sections with a Lightswitch field, showing potential issues with default values. The example attempts to fetch featured entries from both 'essays' and 'bulletins' sections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/lightswitch.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set headlines = craft.entries()\n  .section(['essays', 'bulletins'])\n  .isFeatured(true)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Address Field Values in Twig\nDESCRIPTION: Shows how to access both native and custom field values of an address element in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  <li>Name: {{ myAddress.title }}</li>\n  <li>Postal Code: {{ myAddress.postalCode }}</li>\n  <li>Custom Label Color: {{ myAddress.myCustomColorFieldHandle }}</li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Checking if Options are Selected in Twig and PHP\nDESCRIPTION: Code showing how to check if any checkboxes are selected by using the length filter or count method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myFieldHandle)) {\n```\n\n----------------------------------------\n\nTITLE: Adding Jobs to Queue in Craft CMS\nDESCRIPTION: Compares how to add a job to the queue in Craft 2 (using tasks->createTask) versus Craft 3 (using the queue->push method with a job object).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\ncraft()->tasks->createTask('MyTask', 'Custom description', array(\n    'mySetting' => 'value',\n));\n```\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->queue->push(new MyJob([\n    'description' => 'Custom description',\n    'mySetting' => 'value',\n]));\n```\n\n----------------------------------------\n\nTITLE: Setting Cache-Control Headers with Twig in Craft CMS\nDESCRIPTION: This snippet demonstrates how to use the {% header %} tag to set cache-related HTTP headers. It calculates an expiry date 30 days in the future and sets appropriate Cache-Control, Pragma, and Expires headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/header.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Tell the browser to cache this page for 30 days #}\n{% set expiry = now|date_modify('+30 days') %}\n\n{% header \"Cache-Control: max-age=\" ~ (expiry.timestamp - now.timestamp) %}\n{% header \"Pragma: cache\" %}\n{% header \"Expires: \" ~ expiry|date('D, d M Y H:i:s', 'GMT') ~ \" GMT\" %}\n```\n\n----------------------------------------\n\nTITLE: Evaluating Object Templates with renderObjectTemplate()\nDESCRIPTION: Shows how to use the renderObjectTemplate() function to evaluate a string as an object template, using the provided element or hash for variable replacement.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n{{ renderObjectTemplate('👋 Hi, {fullName}!', currentUser) }}\n{# Output: 👋 Hi, Oli! #}\n\n{{ renderObjectTemplate('✨ {foo}', { foo: \"I'm a made-up hash!\" }) }}\n{# Output: ✨ I'm a made-up hash! #}\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags in Twig Templates\nDESCRIPTION: Shows how to use the parseRefs filter in Twig templates to parse a string containing reference tags. The raw filter is applied to prevent HTML escaping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/reference-tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.body|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Setting Powered-By Header in Craft CMS (PHP)\nDESCRIPTION: Example of disabling the sendPoweredByHeader configuration. This controls whether Craft sends the X-Powered-By header with each request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n'sendPoweredByHeader' => false,\n```\n\n----------------------------------------\n\nTITLE: Implementing a Tax Removal Adjuster in Craft Commerce\nDESCRIPTION: Example of a custom adjuster class that removes $5 from the order's base tax. It implements the Commerce_AdjusterInterface and returns an array of Commerce_OrderAdjustmentModel objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/adjusters.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nclass BusinessLogic_TaxRemover implements Commerce_AdjusterInterface {\n\n    public function adjust(Commerce_OrderModel &$order, array $lineItems = []){\n\n        $myAdjuster = new Commerce_OrderAdjustmentModel();\n\n        $order->baseTax = $order->baseTax - 5;\n\n        $myAdjuster->type = 'Tax';\n        $myAdjuster->name = 'Australian GST Remover';\n        $myAdjuster->description = 'Removes $5 from tax';\n        $myAdjuster->amount = -5.0;\n        $myAdjuster->orderId = $order->id;\n        $myAdjuster->optionsJson = ['lineItemsAffected' => null];\n        $myAdjuster->included = false;\n\n        return [$myAdjuster];\n\n    }\n\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'countable' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'countable' test to check if a variable is countable using PHP's is_countable() method. Shows examples with element queries, arrays, and strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ craft.entries() is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ ['apple', 'orange'] is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'dracula' is countable ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Functional Test Example\nDESCRIPTION: Functional test implementation using Codeception to test user-facing functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse FunctionalTester;\n\nclass FunctionalTest\n{\n    public function testWelcomeMessage(FunctionalTester $I)\n    {\n        $I->amLoggedInAs($userWithFirstNameBob);\n        $I->amOnPage('/pages/bob');\n        $I->see('Hi Bob,');\n        $I->see('Welcome to this app!');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Field Layout Designer Template Implementation\nDESCRIPTION: Twig template code for rendering the field layout designer interface in plugin settings, using Craft's built-in form macros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.fieldLayoutDesignerField({\n  fieldLayout: craft.app.fields.getLayoutByType(\n    'mynamespace\\\\elements\\\\Product'\n  ),\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Addresses with Form Submission\nDESCRIPTION: Demonstrates how to create a form that updates shipping address information on a cart, including handling native address fields and custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {# Native `fullName` field: #}\n  {{ input('text', 'shippingAddress[fullName]', cart.shippingAddress.fullName) }}\n\n  {# Custom fields (note the `[fields]` prefix): #}\n  {{ input('checkbox', 'shippingAddress[fields][isResidentialAddress]') }}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating Load Cart URL in Craft Commerce (Twig and PHP)\nDESCRIPTION: This snippet demonstrates how to create a URL for loading a specific cart in Craft Commerce. It uses the actionUrl() function in Twig and the UrlHelper::actionUrl() method in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set loadCartUrl = actionUrl(\n  'commerce/cart/load-cart',\n  { number: cart.number }\n) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$loadCartUrl = craft\\helpers\\UrlHelper::actionUrl(\n    'commerce/cart/load-cart',\n    ['number' => $cart->number]\n);\n```\n\n----------------------------------------\n\nTITLE: Product Type Breadcrumb Navigation\nDESCRIPTION: Shows how to create a breadcrumb navigation structure using product type information and site URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul class=\"breadcrumbs\">\n  <li><a href=\"{{ siteUrl }}\">Home</a></li>\n  <li><a href=\"{{ siteUrl('shop') }}\">Shop</a></li>\n  <li><a href=\"{{ siteUrl(\"shop/#{product.type.handle}\") }}\">{{ product.type.name }}</a></li>\n</ul>\n\n<h2>{{ product.title }}</h2>\n```\n\n----------------------------------------\n\nTITLE: Using Collection and Array Functions in Twig\nDESCRIPTION: Examples of manipulating arrays and collections using ceil, combine, and collect functions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ ceil(42.1) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set collection = collect(['a', 'b', 'c']) %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = ['a', 'b', 'c'] %}\n{% set arr2 = ['foo', 'bar', 'baz'] %}\n{% set arr3 = combine(arr1, arr2) %}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Order Adjusters\nDESCRIPTION: This event allows plugins to register their own order adjusters that can modify order totals. Custom adjusters must implement the appropriate interfaces.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\n\nEvent::on(OrderAdjustments::class, OrderAdjustments::EVENT_REGISTER_ORDER_ADJUSTERS, function(RegisterComponentTypesEvent $e) {\n    $e->types[] = MyAdjuster::class;\n});\n```\n\n----------------------------------------\n\nTITLE: Using the 'instance of' test in Twig\nDESCRIPTION: Illustrates how to use the 'instance of' test to check if an object is an instance of a specific class in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if element is instance of('craft\\\\elements\\\\Entry') %}\n  <h1>{{ entry.title }}</h1>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Removing CSS Classes with removeClass Filter in Twig\nDESCRIPTION: The removeClass filter removes one or more CSS classes from an HTML tag. It accepts either a single class name or an array of class names to remove.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass('orange') }}\n{# Result: <p class=\"apple banana\">A classy bit of text.</p> #}\n\n{% set markup = '<p class=\"apple orange banana\">A classy bit of text.</p>' %}\n{{ markup|removeClass(['orange', 'banana']) }}\n{# Result: <p class=\"apple\">A classy bit of text.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Flash Messages in Craft CMS Twig\nDESCRIPTION: Shows how to get the value of a 'notice' flash message using the craft.app.session service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set message = craft.app.session.getFlash('notice') %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Previous User Carts\nDESCRIPTION: Examples showing how to retrieve a user's previous carts in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  {% set currentCart = craft.commerce.carts.cart %}\n  {% if currentCart.id %}\n    {% set oldCarts = craft.orders()\n      .isCompleted(false)\n      .id('not '~currentCart.id)\n      .user(currentUser)\n      .all() %}\n  {% else %}\n    {% set oldCarts = craft.orders()\n      .isCompleted(false)\n      .user(currentUser)\n      .all() %}\n  {% endif %}\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\nuse craft\\commerce\\elements\\Order;\n\n$currentUser = Craft::$app->getUser()->getIdentity();\n\nif ($currentUser) {\n    $currentCart = Commerce::getInstance()->getCarts()->getCart();\n    if ($currentCart->id) {\n        // return all incomplete carts *except* the one from this session\n        $oldCarts = Order::findAll()\n            ->isCompleted(false)\n            ->id('not '.$currentCart->id)\n            ->user($currentUser);\n    } else {\n        $oldCarts = Order::findAll()\n            ->isCompleted(false)\n            ->user($currentUser);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through All Dropdown Options in Twig\nDESCRIPTION: How to iterate through all available options in a dropdown field, regardless of which one is selected.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/dropdown-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for option in entry.dropdownFieldHandle.options %}\n    <li>{{ option }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Handling Before Update Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a subscription is updated on the gateway. Allows for pre-update processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_40\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_BEFORE_UPDATE_SUBSCRIPTION, function(SubscriptionEvent $e) {\n    // Do something - maybe refund the user for the remainder of the subscription.\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Custom HTTP Port for Nitro\nDESCRIPTION: Shows how to set a custom HTTP port for Nitro using an environment variable. This change is temporary and only applies to the current terminal session.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/customizing.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nexport NITRO_HTTP_PORT=8080\n```\n\n----------------------------------------\n\nTITLE: Database Command Operations in Craft 3\nDESCRIPTION: Example of executing database operations using the new Command builder syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$result = \\Craft::$app->db->createCommand()\n    ->insert('{{%mytablename}}', $rowData)\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Encoding Strings to Base64 with base64_encode Filter in Twig\nDESCRIPTION: The 'base64_encode' filter encodes a value as base64, which can be useful for making unpredictable strings or data URL-safe.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Craft CMS' | base64_encode }}\n```\n\n----------------------------------------\n\nTITLE: Conditional Content Based on Locale in Twig Templates\nDESCRIPTION: Demonstrates how to conditionally display content in Twig templates based on the current locale using craft.locale variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/localization-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.locale == 'de' %}\n  <p>Congrats on the big win!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Session Location in Craft CMS (PHP)\nDESCRIPTION: Example of configuring overridePhpSessionLocation to use a custom session storage location. This example uses a TCP connection for session storage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n'overridePhpSessionLocation' => 'tcp://127.0.0.1:1234',\n```\n\n----------------------------------------\n\nTITLE: Using the 'missing' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'missing' test to check if an object is an instance of MissingComponentInterface, which represents components whose types are missing in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% if field is missing %}\n  <p>😱</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Listing All Order Statuses in Twig Template\nDESCRIPTION: This Twig code snippet demonstrates how to iterate through all order statuses in the system using the craft.commerce.orderStatuses.allOrderStatuses variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/custom-order-statuses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for status in craft.commerce.orderStatuses.allOrderStatuses %}\n  {{ status.handle }} - {{ status.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Custom HTML Email Template Layout\nDESCRIPTION: Complete HTML template for styling email messages, including custom styling and dynamic content insertion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/mail.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <style>\n      /* Custom styles! */\n    </style>\n  </head>\n  <body>\n    <div class=\"email-wrapper\">\n      <div class=\"email-header\">\n        <img\n          class=\"email-logo\"\n          src=\"{{ siteUrl('assets/images/email/logo.png') }}\"\n          width=\"140\"\n          alt=\"{{ siteName }}\">\n      </div>\n      <div class=\"email-body\">\n        {{ body }}\n      </div>\n      <div class=\"email-footer\">\n        ©{{ now.format('Y') }}, <a href=\"{{ siteUrl }}\">{{ siteName }}</a>\n      </div>\n    </div>\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Modifying Asset Filenames in Craft CMS\nDESCRIPTION: Hook to customize asset filenames during the cleansing process. Takes a filename as input and returns the modified filename.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyAssetFilename($filename)\n{\n    return 'KittensRule-'.$filename;\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Cart Forget Functionality in Twig\nDESCRIPTION: Form implementation for forgetting/detaching a customer's cart from their session. Uses the commerce/cart/forget-cart action with CSRF protection and redirect handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/forget-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <button>Forget this cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring Password Reset Success Path in Craft CMS\nDESCRIPTION: Sets the URI and template path to use upon successfully resetting a user's password on the front-end site. This can be configured for multiple locales.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_66\n\nLANGUAGE: php\nCODE:\n```\n'setPasswordSuccessPath' => array(\n    'en' => 'password/success',\n    'de' => 'passwort/erfolg'\n),\n```\n\n----------------------------------------\n\nTITLE: Creating Ordered Lists with ol()\nDESCRIPTION: Demonstrates how to use the ol() function to output an array of items as an HTML ordered list. Shows retrieving entry titles and rendering them as list items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{% set titles = craft.entries()\n  .section('news')\n  .select('title')\n  .column() %}\n{{ ol(titles) }}\n{# Output:\n<ol>\n  <li>Shocking Foo</li>\n  <li>You Won't Believe This Bar</li>\n  <li>Ten Baz You Can't Live Without</li>\n</ol>\n#}\n```\n\n----------------------------------------\n\nTITLE: Setting Cart Shipping Address with Billing Same as Shipping\nDESCRIPTION: Form implementation that sets an existing customer address as the shipping address and makes the billing address the same using the billingAddressSameAsShipping parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customer.addresses|first %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n  <input type=\"hidden\" name=\"shippingAddressId\" value=\"{{ address.id }}\">\n  <input type=\"hidden\" name=\"billingAddressSameAsShipping\" value=\"1\">\n  <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce via Composer\nDESCRIPTION: Commands to install Craft Commerce using Composer in an existing Craft 4 project. The commands require the package and then use the Craft CLI to install the plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require -w craftcms/commerce\nphp craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Updating Specific Plugin in Craft CMS\nDESCRIPTION: Commands to update individual plugins like Commerce in Craft CMS\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nddev craft update commerce\nphp craft update commerce\n```\n\n----------------------------------------\n\nTITLE: Querying Using 'now' Comparisons in Twig and PHP\nDESCRIPTION: Examples of using the 'now' keyword in date field queries to fetch elements with dates in the past or future. This feature was added in Craft 3.7.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a selected date in the past #}\n{% set pastEntries = craft.entries()\n  .myFieldHandle('< now')\n  .all() %}\n{# Fetch entries with a selected date now onward #}\n{% set futureEntries = craft.entries()\n  .myFieldHandle('>= now')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a selected date in the past\n$pastEntries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('< now')\n    ->all();\n// Fetch entries with a selected date now onward\n$futureEntries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('>= now')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Traditional Navigation Markup in Twig\nDESCRIPTION: A standard navigation structure with repeating list items for each navigation link.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n<nav class=\"global-nav\">\n  <ul>\n    <li class=\"nav-item\"><a href=\"{{ url('about') }}\">About</a></li>\n    <li class=\"nav-item\"><a href=\"{{ url('blog') }}\">Blog</a></li>\n    <li class=\"nav-item\"><a href=\"{{ url('contact') }}\">Contact</a></li>\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Copying Commerce Example Templates to Project (Bash)\nDESCRIPTION: This command copies the built example templates from the Commerce package to the project's templates folder. It provides a quick way to start with a full set of working templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/example-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncp -r vendor/craftcms/commerce/example-templates/dist/* ./templates\n```\n\n----------------------------------------\n\nTITLE: Evaluating Zip Code Conditions with Twig Expressions\nDESCRIPTION: Examples of Twig expressions used to evaluate zip code conditions for tax zones. Shows how to match zip codes based on prefix patterns or exact values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/tax.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nzipCode[0:2] == '60' or zipCode[0:2] == '70'\n```\n\nLANGUAGE: twig\nCODE:\n```\nzipCode in ['NG102', 'NG103', 'NG104']\n```\n\n----------------------------------------\n\nTITLE: Including a JavaScript File with Twig in Craft CMS\nDESCRIPTION: Basic usage of the includeJsFile tag to queue a JavaScript file for inclusion on the page. The file will be output in a script tag at the end of the HTML document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includejsfile.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% includeJsFile \"/vendor/redactor/redactor.js\" %}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin from Packagist in Craft CMS\nDESCRIPTION: Command-line instructions for installing a publicly released plugin into a Craft CMS project from Packagist using Composer. This method is used for plugins that have been registered on Packagist.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Using a Variable for Entries Field in Twig\nDESCRIPTION: Demonstrates assigning the Entries field to a variable for cleaner code, then checking for entries and looping through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entry.entriesFieldHandle %}\n\n{% if entries | length %}\n\n  <h3>Some great entries</h3>\n  {% for entry in entries %}\n    ...\n  {% endfor %}\n\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Evaluating Custom Field Value with Twig in Craft Commerce Discount Condition\nDESCRIPTION: This Twig expression checks if an order has a custom field 'myCustomLicenseField' with a value of 'Supporter'. It can be used in a discount's condition formula to apply the discount based on specific custom field data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\norder.myCustomLicenseField and order.myCustomLicenseField == 'Supporter'\n```\n\n----------------------------------------\n\nTITLE: Composer Autoload Configuration\nDESCRIPTION: Configuration for PSR-4 autoloading of module classes in composer.json file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/module-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"autoload\": {\n    \"psr-4\": {\n      \"foo\\\\\": \"modules/foo/\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Asset Results by Kind in Craft CMS\nDESCRIPTION: Shows how to add parameters to an ElementCriteriaModel to filter assets by kind, in this case returning only images.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set images = entry.assetsFieldHandle.kind('image') %}\n```\n\n----------------------------------------\n\nTITLE: Reference Tags Parsing\nDESCRIPTION: Shows how to parse reference tags in content using the parseRefs filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  {entry:blog/hello-world:link} was my first blog post. Pretty geeky, huh?\n{% endset %}\n\n{{ content|parseRefs|raw }}\n```\n\n----------------------------------------\n\nTITLE: Category Navigation with Ancestor Check\nDESCRIPTION: Demonstrates how to build a navigation structure using categories and checking for ancestors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% nav page in craft.categories.group('whiskey') %}\n  {% set expanded = category is defined and item.isAncestorOf(category) %}\n  <li{% if expanded %} class=\"expanded\"{% endif %}>\n    {{ item.getLink() }}\n    {% ifchildren %}\n      <ul>\n        {% children %}\n      </ul>\n    {% endifchildren %}\n  </li>\n{% endnav %}\n```\n\n----------------------------------------\n\nTITLE: PHP Control Flow - Avoiding Unnecessary Else\nDESCRIPTION: Example of simplifying control flow in PHP by avoiding unnecessary else statements. This pattern improves code readability and reduces nesting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nif (!$condition) {\n    return $foo;\n}\n\nreturn $bar;\n```\n\n----------------------------------------\n\nTITLE: Tag Navigation with getPrev() and getNext() Methods\nDESCRIPTION: Shows how to implement previous/next tag navigation in a template using the getPrev() and getNext() methods. This example defines parameters for tag selection and creates conditional navigation links.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/tagmodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set params = {\n    setId: 3\n} %}\n\n{% set prevTag = entry.getPrev(params) %}\n{% set nextTag = entry.getNext(params) %}\n\n{% if prevTag %}\n    <p>Previous: <a href=\"/tags/{{ prevTag | url_encode }}\">{{ prevTag }}</a></p>\n{% endif %}\n\n{% if nextTag %}\n    <p>Next: <a href=\"/tags/{{ nextTag | url_encode }}\">{{ nextTag }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving All Sections in Craft CMS using Twig\nDESCRIPTION: This snippet demonstrates how to use the getAllSections() method to retrieve an array of SectionModel objects representing all sections in the site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set sections = craft.sections.getAllSections() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Payment Method Settings in PHP\nDESCRIPTION: This PHP code snippet demonstrates how to override payment method settings in the commerce.php config file. It includes examples for configuring sandbox and production environments for different payment gateways.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/configuration.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n\n    // he * must be present to enable multi-environment configs, even if empty\n    '*' => array(\n    ),\n\n    // DEV Details - i.e. your PayPal sandbox details for example\n    'dev.whatever.net' => array(\n\n        'paymentMethodSettings' => [\n            //eWay Sandbox\n            '1' => [\n                'testMode' => true,\n                'apiKey' => 'whatever',\n                'password' => 'whatever',\n                'CSEKey' => 'whatever',\n\n            ],\n            // 4 - PayPal Express\n            '4' => [\n                'testMode' => true,\n                'password' => 'whatever',\n                'username' => 'whatever',\n                'signature' => 'whatever'\n            ],\n        ],\n    ),\n\n    // PRODUCTION Details - live payment stuff here\n    'whatever.com' => array(\n        'paymentMethodSettings' => [\n            //eWay LIVE\n            '1' => [\n                'testMode' => false,\n                'apiKey' => 'whatever',\n                'password' => 'whatever',\n                'CSEKey' => 'whatever',\n            ],\n            // 4 - PayPal Express\n            '4' => [\n                'testMode' => false,\n                'password' => 'whatever',\n                'username' => 'whatever',\n                'signature' => 'whatever'\n            ],\n        ],\n    ),\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Module Controller Namespace\nDESCRIPTION: Module initialization code that configures the controller namespace based on request type and sets up custom aliases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/commands.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace acme;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // Define a custom alias named after the namespace:\n        Craft::setAlias('@acme', __DIR__);\n\n        // Set the controllerNamespace based on whether this is a console or web request:\n        if (Craft::$app->getRequest()->getIsConsoleRequest()) {\n            $this->controllerNamespace = 'acme\\\\console\\\\controllers';\n        } else {\n            $this->controllerNamespace = 'acme\\\\controllers';\n        }\n\n        // Call init() *after* setting the `controllerNamespace` so Yii doesn't try and set it:\n        parent::init();\n\n        // Additional custom initialization code goes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Published File URL in PHP\nDESCRIPTION: Examples of how to get the published URL for individual files using AssetManager.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/path/to/file.svg',\n    true\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Plugin Install Migration in Craft CMS\nDESCRIPTION: Template for a plugin's Install migration class that handles installation and uninstallation of the plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\migrations;\n\nuse craft\\db\\Migration;\n\nclass Install extends Migration\n{\n    public function safeUp(): bool\n    {\n        // ...\n    }\n\n    public function safeDown(): bool\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Plugins in codeception.yml\nDESCRIPTION: YAML configuration showing how to specify plugins to be installed before running tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/config-options.md#2025-04-22_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nplugins:\n  - class: \"path\\to\\PluginClass\"\n    handle: \"plugin-handle\"\n```\n\n----------------------------------------\n\nTITLE: Parsing Reference Tags in Plain Text Field in Twig\nDESCRIPTION: Shows how to parse reference tags in a plain text field using the 'parseRefs' filter in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.testimonial|parseRefs }}\n```\n\n----------------------------------------\n\nTITLE: Redirecting Settings Request to Custom URL in Craft CMS\nDESCRIPTION: Overrides the getSettingsResponse() method to redirect the request to a different URL when the plugin's settings page is accessed, allowing for complex settings management interfaces.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse()\n{\n    $url = \\craft\\helpers\\UrlHelper::cpUrl('my-plugin-handle/settings');\n\n    return \\Craft::$app->controller->redirect($url);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Tag Query in Twig for Craft CMS\nDESCRIPTION: This code snippet shows how to create a new tag query using Twig in Craft CMS templates. It initializes a variable myTagQuery with the craft.tags() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new tag query #}\n{% set myTagQuery = craft.tags() %}\n```\n\n----------------------------------------\n\nTITLE: Handling Low Stock on Variant Orders in Commerce\nDESCRIPTION: Event handler for the 'commerce_variants.onOrderVariant' event that logs a message when a variant's stock falls below 5 units. The handler receives the variant model through the event parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_variants.onOrderVariant', function($event) {\n    $variant = $event->params['variant'];\n    if ($variant->stock < 5) {\n        Craft::log('Stock Low');\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Looping Through Tags in a Field with Twig\nDESCRIPTION: Iterating through tags selected in a Tags field to display each tag's information individually.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for tag in entry.tagsFieldHandle %}\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Integer Number Fields\nDESCRIPTION: Shows how to format number values as integers without decimal places using both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/number-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number(decimals=0) }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle, 0);\n```\n\n----------------------------------------\n\nTITLE: Calling Hooks in Craft CMS PHP\nDESCRIPTION: Examples of calling hooks using craft()->plugins->call() method. Shows both basic hook calling and calling with additional parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-and-events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$pirates = craft()->plugins->call('registerPirates');\n```\n\nLANGUAGE: php\nCODE:\n```\n$pirates = craft()->plugins->call('registerPirates', array('smee'));\n```\n\n----------------------------------------\n\nTITLE: Accessing Loop Variables within Switch Statements\nDESCRIPTION: Demonstrates how to access Twig's loop variable inside switch statements by storing it in another variable before entering the switch block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{% for matrixBlock in entry.matrixField.all() %}\n  {% set loopIndex = loop.index %}\n\n  {% switch matrixBlock.type %}\n\n    {% case \"text\" %}\n\n        Loop #{{ loopIndex }}\n\n  {% endswitch %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Loading Cart URL Generation Examples\nDESCRIPTION: Code examples showing how to generate URLs for loading carts in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set loadCartUrl = actionUrl(\n  'commerce/cart/load-cart',\n  { number: cart.number }\n) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$loadCartUrl = craft\\helpers\\UrlHelper::actionUrl(\n    'commerce/cart/load-cart',\n    ['number' => $cart->number]\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Object Templates in Craft CMS\nDESCRIPTION: Renders a micro Twig template with an object's properties. Useful for generating dynamic values from objects such as entries or custom hashes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().one() %}\n{{ renderObjectTemplate('👋 {object.title}', entry) }}\n{# Output: 👋 I'm an entry title! #}\n\n{{ renderObjectTemplate('✨ {object.foo}', { foo: \"I'm a made-up hash!\" }) }}\n{# Output: ✨ I'm a made-up hash! #}\n```\n\n----------------------------------------\n\nTITLE: Iterating through Selected Options in PHP\nDESCRIPTION: Demonstrates how to loop through selected options in a Multi-select field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $option) {\n    // Label: $option->label\n    // Value: $option or $option->value\n}\n```\n\n----------------------------------------\n\nTITLE: Array Values Extraction\nDESCRIPTION: Demonstrates extracting values from an associative array without preserving keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = {foo: \"Foo\", bar: \"Bar\"} %}\n{% set arr2 = arr1|values %}\n{# arr2 = [\"Foo\", \"Bar\"] #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Codeception for Craft CMS in YAML\nDESCRIPTION: The main Codeception configuration file that sets up testing paths, environment variables, and Craft-specific module configuration for testing. This YAML configuration defines the testing actor, paths, bootstrap file, and module settings specific to the Craft test environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/setup.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nactor: Tester\npaths:\n  tests: tests\n  log: tests/_output\n  data: tests/_data\n  support: tests/_support\n  envs: tests/_envs\nbootstrap: _bootstrap.php\nparams:\n  - tests/.env\nmodules:\n  config:\n    \\craft\\test\\Craft:\n      configFile: \"tests/_craft/config/test.php\"\n      entryUrl: \"http://my-project.test/index.php\"\n      projectConfig: {}\n      migrations: []\n      plugins: []\n      cleanup: true\n      transaction: true\n      dbSetup: { clean: true, setupCraft: true }\n```\n\n----------------------------------------\n\nTITLE: Filtering Products Field Elements with Parameters\nDESCRIPTION: Shows how to add parameters to the Products field element query to filter the results, in this case by product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.myFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Loading Cart in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed cart loading responses, including a success status and error message when applicable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\"\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables in .env File\nDESCRIPTION: Example of setting environment variables in a .env file for a Craft CMS project. This includes setting the application ID and environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nCRAFT_APP_ID=my-project\nCRAFT_ENVIRONMENT=dev\n\n# ...and comments!\n```\n\n----------------------------------------\n\nTITLE: Using withoutKey Filter to Remove Array Keys in Twig\nDESCRIPTION: Demonstrates the withoutKey filter which returns an array without one or more specified keys, supporting both single key removal and multiple key removal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_46\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey('baz') %}\n{# Result: { 'foo': 'foo', 'bar: 'bar' } #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey(['bar', 'baz']) %}\n{# Result: { 'foo': 'foo' } #}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Variant with one() Method in Twig\nDESCRIPTION: Example showing how to get a single variant from a variants field using the one() method, which is useful when the field is configured to only allow a single selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set variant = entry.myFieldHandle.one() %}\n{% if variant %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Tags in PHP\nDESCRIPTION: Shows how to check for the existence of related tags without fetching them in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // There are related tags!\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Database Engines in Nitro YAML\nDESCRIPTION: Shows how to configure multiple database engines in the Nitro YAML configuration file, including specifying the engine type, version, and port for each database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/usage.md#2025-04-22_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\ndatabases:\n - engine: mysql\n   version: \"5.7\"\n   port: \"3306\"\n - engine: mysql\n   version: \"5.6\"\n   port: \"33061\"\n - engine: postgres\n   version: \"11\"\n   port: \"5432\"\n```\n\n----------------------------------------\n\nTITLE: Forgetting Cart Examples\nDESCRIPTION: Examples showing how to forget/remove a cart from the current session in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ craft.commerce.carts.forgetCart() }}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\n\n// Forget the cart in the current session.\nCommerce::getInstance()->getCarts()->forgetCart();\n```\n\n----------------------------------------\n\nTITLE: Outstanding Balance Payment Form in Twig\nDESCRIPTION: Form implementation for paying outstanding balance on an existing order with a specific order number and email.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/making-payments.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set number = '12345' %}\n{% set email = 'email@address.foo' %}\n{% set cart = craft.orders().number(number).one() ?? null %}\n{% set cancelUrl = craft.app.request.getUrl()|hash %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/payments/pay') }}\n  {{ redirectInput('/shop/customer/order?number='~cart.number~'&success=true') }}\n  {{ hiddenInput('cancelUrl', cancelUrl) }}\n  {{ hiddenInput('email', email) }}\n  {{ hiddenInput('orderNumber', cart.number) }}\n\n  {{ cart.gateway.getPaymentFormHtml({})|raw }}\n\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Alternative Method for Retrieving User Cart in Craft Commerce\nDESCRIPTION: This snippet shows an alternative, more verbose approach to retrieve the current user's cart using the getCarts() and getCart() methods. This is functionally equivalent to the more concise approach.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/craft-commerce-carts-cart.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.getCarts().getCart()%}\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variable for allowAdminChanges in Craft CMS\nDESCRIPTION: Example of setting the allowAdminChanges configuration option using an environment variable in a .env file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nCRAFT_ALLOW_ADMIN_CHANGES=false\n```\n\n----------------------------------------\n\nTITLE: Namespacing Input Names with namespaceInputName in Twig\nDESCRIPTION: Shows how to namespace an input name to create properly structured form fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'bar'|namespaceInputName('foo') }}\n```\n\n----------------------------------------\n\nTITLE: Line Item Update Form in Twig\nDESCRIPTION: Form implementation for updating existing line items in the cart, including quantity adjustments and removal options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adding-to-and-updating-the-cart.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  <input type=\"hidden\" name=\"cartUpdatedNotice\" value=\"Updated line items.\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n  <input type=\"text\" placeholder=\"My Note\" name=\"lineItems[LINE_ITEM_ID][note]\" value=\"{{ item.note }}\">\n  <input type=\"number\" name=\"lineItems[LINE_ITEM_ID][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n  <input type=\"submit\" value=\"Update Line Item\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using Wildcard Token in Twig Template\nDESCRIPTION: Shows how to use the value of a wildcard token (*) in a Twig template, which is automatically available as a named parameter called 'any'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\nIt seems you're looking for `{{ any }}`.\n{# output: It seems you're looking for `some-slug`. #}\n```\n\n----------------------------------------\n\nTITLE: Checking Dev Mode Status in Craft CMS Twig\nDESCRIPTION: Demonstrates how to check if Craft is running in dev mode using the devMode variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% if devMode %}\n  Craft is running in dev mode.\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Processing Plain Text Field Content with Markdown in PHP\nDESCRIPTION: This PHP snippet shows how to check if a Plain Text field has a value and then process it using the Markdown helper class from Yii2. The code is commented out, suggesting it's an example of how it could be used.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/plain-text-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    // \\yii\\helpers\\Markdown::process($entry->myFieldHandle);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Boolean Menu Field with Environmental Values in Twig\nDESCRIPTION: This Twig snippet shows how to create a boolean menu field that includes environment variables as options. It's suitable for boolean settings in the Craft CMS control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.booleanMenuField({\n  label: \"Use authentication\"|t('my-plugin'),\n  id: 'useAuthentication',\n  name: 'useAuthentication',\n  includeEnvVars: true,\n  value: model.useAuthentication,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Iterating Over Collections in Twig\nDESCRIPTION: Shows how to iterate over a collection in a Twig template to generate an HTML list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/collections.md#2025-04-22_snippet_1\n\nLANGUAGE: Twig\nCODE:\n```\n<ul>\n  {% for color in colors %}\n    {# `color` is one of our original three strings: #}\n    <li>{{ color }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Displaying First Related Asset in Twig\nDESCRIPTION: Template code that retrieves only the first related asset from an Assets field and displays it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ rel.url }}\">{{ rel.filename }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Efficient Eager-Loading in Twig (Craft CMS)\nDESCRIPTION: This snippet shows how to use the 'with' parameter to eager-load related assets, reducing the number of queries and improving performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'news',\n  with: ['assetsField']\n}) %}\n\n{% for entry in entries %}\n  {# Get the eager-loaded asset, if there is one #}\n  {% set image = entry.assetsField[0] ?? null %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Validation Scenario for Required Fields in Craft CMS\nDESCRIPTION: This snippet demonstrates how to set the 'live' validation scenario on an element before saving it, which is necessary to enforce required custom field validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n$element->setScenario(\\craft\\base\\Element::SCENARIO_LIVE);\n```\n\n----------------------------------------\n\nTITLE: Configuring VS Code Launch Configuration for Xdebug in JavaScript\nDESCRIPTION: This snippet shows how to set up a launch configuration in VS Code for debugging PHP with Xdebug. It specifies the debug port, path mappings, hostname, and Xdebug settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/xdebug.md#2025-04-22_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n    \"name\": \"Listen for Nitro XDebug\",\n    \"type\": \"php\",\n    \"request\": \"launch\",\n    \"port\": 9003,\n    \"pathMappings\": {\n        \"/app\": \"${workspaceFolder}\"\n    },\n    \"hostname\": \"tutorial.nitro\",\n    \"xdebugSettings\": {\n        \"max_data\": 65535,\n        \"show_hidden\": 1,\n        \"max_children\": 100,\n        \"max_depth\": 5\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Generating HTML Elements with the Tag Tag in Twig\nDESCRIPTION: Shows how to use the tag tag to dynamically generate HTML elements with attributes and content. This example creates a paragraph with a class and dynamic content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'p' with {\n  class: 'welcome',\n} %}\n  Hello, {{ currentUser.friendlyName }}\n{% endtag %}\n{# Output: <p class=\"welcome\">Hello, Tim</p> #}\n```\n\n----------------------------------------\n\nTITLE: Handling After Create Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a subscription is created. Useful for post-creation processing or notifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_33\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_AFTER_CREATE_SUBSCRIPTION, function(SubscriptionEvent $e) {\n    // Do something about it - perhaps make a call to third party service to authorize a user\n});\n```\n\n----------------------------------------\n\nTITLE: Array Merging with merge Filter\nDESCRIPTION: Merges arrays or hashes with optional recursive merging support\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = {\n  'rebellion': { 'Bespin': 'Calrissian', 'Hoth': 'Organa', 'Crait': 'Organa' },\n  'empire': { 'Coruscant': 'Palpatine', 'Endor': 'Palpatine' }\n} %}\n{% set items = items|merge({\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n}, true) %}\n```\n\n----------------------------------------\n\nTITLE: Defining Default Table Attributes for Element Indexes in PHP\nDESCRIPTION: Shows how to specify which columns should be visible by default for new sources by implementing the defineDefaultTableAttributes() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineDefaultTableAttributes(string $source): array\n{\n    return ['title', 'price', 'currency'];\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Up Asset Fixtures in Craft CMS\nDESCRIPTION: Example of an Asset fixture data file that uploads an image to a specific volume and folder. It demonstrates how to reference volume IDs, folder IDs, and specify the source file path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'tempFilePath' => 'path/to/_craft/storage/runtime/temp/product.jpg',\n        'filename' => 'product.jpg',\n        'volumeId' => $this->volumeIds['products'],\n        'folderId' => $this->folderIds['clothes'],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Setting Post-Login Redirect for Control Panel in Craft CMS\nDESCRIPTION: Specifies the path that users should be redirected to after logging in from the control panel. This also applies when visiting the login page while already logged in.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_58\n\nLANGUAGE: php\nCODE:\n```\n'postCpLoginRedirect' => 'entries',\n```\n\n----------------------------------------\n\nTITLE: Rendering DateTime Input in Craft CMS - Discrete Format\nDESCRIPTION: Creates separate date and time input fields for handling entry post dates in Craft CMS. Formats the date in Y-m-d format and time in 24-hour G:i format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('date', 'postDate[date]', entry.postDate.format('Y-m-d')) }}\n{{ input('time', 'postDate[time]', entry.postDate.format('G:i')) }}\n```\n\n----------------------------------------\n\nTITLE: Checking Queue Status in Craft CMS Templates\nDESCRIPTION: Methods for checking if jobs are waiting or reserved in the queue system. These replace the removed task-related functions in Craft 3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\ncraft.app.queue.getHasWaitingJobs()\n```\n\nLANGUAGE: twig\nCODE:\n```\ncraft.app.queue.getHasReservedJobs()\n```\n\n----------------------------------------\n\nTITLE: Customizing Sensitive Keywords for Log Redaction (PHP)\nDESCRIPTION: Example of how to add custom sensitive keywords for log redaction in Craft CMS. This configuration is added to the config/app.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'components' => [\n        'security' => [\n            'sensitiveKeywords' => [\n                // Anything added here gets merged with the defaults:\n                'private',\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing getElementRoute Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Overrides the default routing for a specific element. Returns a route array to define custom handling for specific element types or sections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\npublic function getElementRoute(BaseElementModel $element)\n{\n    if (\n        $element->getElementType() == ElementType::Entry &&\n        $element->getSection()->handle == 'products'\n    ) {\n        return array('action' => 'products/viewEntry');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Account Area Route Configuration in PHP\nDESCRIPTION: Route configuration for authenticated customer account area, including order history and individual order views.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'account' => ['template' => '_account/dashboard'],\n    'account/orders' => ['template' => '_account/order-history'],\n    'account/orders/<orderNumber:[a-f0-9]{32}>' => ['template' => '_account/order'],\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Selected Option in Twig\nDESCRIPTION: Illustrates how to display the selected option from a Radio Buttons field in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle }} or {{ entry.myFieldHandle.value }}\n```\n\n----------------------------------------\n\nTITLE: Using POS_END with view.registerJs in Twig\nDESCRIPTION: Demonstrates registering JavaScript code to be placed at the end of the body element using the POS_END constant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Goodbye, Craft!');\n{% endset %}\n\n{% do view.registerJs(js, POS_END) %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Category Sources in Craft CMS\nDESCRIPTION: Hook to modify the available sources for categories in the control panel. Adds status-based sources when in index context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyCategorySources(&$sources, $context)\n{\n    if ($context == 'index') {\n        $sources[] = array('heading' => 'Statuses');\n        $statuses = craft()->elements->getElementType(ElementType::Category)->getStatuses();\n\n        foreach ($statuses as $status => $label) {\n            $sources['status:'.$status] = array(\n                'label' => $label,\n                'criteria' => array('status' => $status)\n            );\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Instance Type in Twig\nDESCRIPTION: Shows how to check if an object is an instance of a specific class or interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if element is instance of('craft\\\\elements\\\\Entry') %}\n  <h1>{{ entry.title }}</h1>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Tax Zone by ID in Craft Commerce\nDESCRIPTION: Demonstrates how to retrieve a specific tax zone by its ID using the TaxZones service in both Twig and PHP. This returns a single TaxAddressZone model.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{# Get tax zone with an ID of `123` #}\n{% set zone = craft.commerce\n  .getTaxZones()\n  .getTaxZoneById(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get tax zone with an ID of `123`\n$taxZones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getTaxZoneById(123);\n```\n\n----------------------------------------\n\nTITLE: Truncating Strings with truncate Filter in Twig\nDESCRIPTION: Demonstrates the truncate filter for shortening strings while preserving whole words and customizing truncation behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_41\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Hello world'|truncate(10) }}\n{# Output: Hello… #}\n\n{{ 'Hello world'|truncate(10, '...') }}\n{# Output: Hello... #}\n\n{{ 'Hello world'|truncate(10, '') }}\n{# Output: Hello #}\n\n{{ 'Hello world'|truncate(2) }}\n{# Output: H… #}\n\n{{ 'Hello world'|truncate(2, splitSingleWord=false) }}\n{# Output: … #}\n```\n\n----------------------------------------\n\nTITLE: Setting Dynamic Recipient Email Address in Twig for Craft Commerce\nDESCRIPTION: This snippet shows how to dynamically set the recipient email address using Twig templating in Craft Commerce. It uses the 'order' object to retrieve the customer's email address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/order-status-emails.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.email }}\n```\n\n----------------------------------------\n\nTITLE: Displaying Login Link for Guest Users in Craft CMS Twig\nDESCRIPTION: Shows how to display a login link for users who are not currently logged in, using the loginUrl variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser %}\n  <a href=\"{{ loginUrl }}\">Login</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Asset Queries by Type in Twig\nDESCRIPTION: Template code that filters an Assets field query to only return images by setting the kind parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedAssets = clone(entry.myFieldHandle)\n  .kind('image')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Requiring Specific Craft CMS Edition with requireEdition Tag\nDESCRIPTION: Demonstrates how to require a specific Craft CMS edition (Solo or Pro) to access a template or section. This example requires Craft Pro edition.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{# Require Craft Pro #}\n{% requireEdition 1 %}\n```\n\n----------------------------------------\n\nTITLE: Basic Pagination Implementation in Twig\nDESCRIPTION: Demonstrates basic usage of the paginate tag to display paginated blog entries with previous/next navigation links.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/paginate.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% paginate craft.entries.section('blog').limit(10) as pageInfo, pageEntries %}\n\n{% for entry in pageEntries %}\n  <article>\n    <h1>{{ entry.title }}</h1>\n    {{ entry.body }}\n  </article>\n{% endfor %}\n\n{% if pageInfo.prevUrl %}<a href=\"{{ pageInfo.prevUrl }}\">Previous Page</a>{% endif %}\n{% if pageInfo.nextUrl %}<a href=\"{{ pageInfo.nextUrl }}\">Next Page</a>{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Converting Tags to Channel Sections using CLI Command\nDESCRIPTION: Command to convert tags to channel sections using Craft CMS's CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/tags myTagGroupHandle\n```\n\n----------------------------------------\n\nTITLE: Installing Local Plugin with Composer\nDESCRIPTION: Command to require the local plugin using Nitro's Composer command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/plugin-development.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro composer require craftcms/commerce\n```\n\n----------------------------------------\n\nTITLE: Directory Navigation Examples\nDESCRIPTION: Series of commands showing various ways to navigate the filesystem using cd command, including relative and absolute paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/environment/terminal.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncd ..\npwd\n\ncd /Applications\npwd\n\ncd ~/Desktop\npwd\n\ncd ~\npwd\n```\n\nLANGUAGE: batch\nCODE:\n```\ncd ..\ncd\n\ncd C:\\Windows\ncd\n\ncd %HOMEPATH%/Desktop\ncd\n\ncd %HOMEPATH%\ncd\n```\n\n----------------------------------------\n\nTITLE: Environment Configuration in Craft CMS\nDESCRIPTION: Shows how to configure environment-specific settings using environment variables and multi-environment configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\n# -- .env --\nCP_TRIGGER=\"secret-word\"\nENVIRONMENT=\"dev\"\n```\n\nLANGUAGE: php\nCODE:\n```\n// -- config/general.php --\nreturn [\n    // Global settings\n    '*' => [\n        'omitScriptNameInUrls' => true,\n    ],\n\n    // Dev environment settings\n    'dev' => [\n        'devMode' => true,\n    ],\n\n    // Production environment settings\n    'production' => [\n        'cpTrigger' => 'secret-word',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Working with Arrays in Twig\nDESCRIPTION: Demonstrates how to define and use arrays in Twig, including looping over array items and outputting array contents.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% set todoList = [\n  'Finish design',\n  'Build HTML & CSS',\n  'Manage content with Craft'\n] %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<ol class=\"todo\">\n  {% for item in todoList %}\n    <li>{{ item }}</li>\n  {% endfor %}\n</ol>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ todoList|join(', ') }}\n```\n\n----------------------------------------\n\nTITLE: Line Item JSON Snapshot Structure\nDESCRIPTION: Example JSON structure showing the comprehensive snapshot data stored for a line item, including purchasable details, product information, and various metadata fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/purchasables.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"isDefault\": false,\n  \"sortOrder\": 1,\n  \"deletedWithProduct\": false,\n  \"width\": null,\n  \"height\": null,\n  \"length\": null,\n  \"weight\": null,\n  \"freeShipping\": false,\n  \"promotable\": false,\n  \"availableForPurchase\": true,\n  \"minQty\": null,\n  \"maxQty\": null,\n  \"inventoryItemId\": 1,\n  \"inventoryTracked\": false,\n  \"eagerLoadInfo\": null,\n  \"id\": 114,\n  \"tempId\": null,\n  \"draftId\": null,\n  \"revisionId\": null,\n  \"isProvisionalDraft\": false,\n  \"uid\": \"639a0373-cd9a-4d5b-9a48-860e4ebf355d\",\n  \"siteSettingsId\": 119,\n  \"fieldLayoutId\": 12,\n  \"enabled\": true,\n  \"archived\": false,\n  \"siteId\": 2,\n  \"title\": \"Advanced Unit\",\n  \"slug\": \"__temp_gpyrlszcdnezpempgaxfzzryspgsylgjnojs\",\n  \"uri\": null,\n  \"dateCreated\": \"2024-07-01T16:02:32-07:00\",\n  \"dateUpdated\": \"2024-07-10T09:23:04-07:00\",\n  \"dateLastMerged\": null,\n  \"dateDeleted\": null,\n  \"deletedWithOwner\": null,\n  \"trashed\": false,\n  \"isNewForSite\": false,\n  \"forceSave\": false,\n  \"fieldId\": null,\n  \"canonicalId\": 114,\n  \"cpEditUrl\": \"#\",\n  \"isDraft\": false,\n  \"isRevision\": false,\n  \"isUnpublishedDraft\": false,\n  \"ref\": null,\n  \"status\": \"enabled\",\n  \"structureId\": null,\n  \"url\": \"https://my-project.ddev.site/widgets/thingamabob?variant=114\",\n  \"isAvailable\": true,\n  \"isPromotable\": false,\n  \"price\": 8.99,\n  \"promotionalPrice\": null,\n  \"basePrice\": 8.99,\n  \"basePromotionalPrice\": null,\n  \"onPromotion\": false,\n  \"salePrice\": 8.99,\n  \"sku\": \"WIDGET-THINGY-ADVANCED\",\n  \"stock\": 0,\n  \"product\": {\n    \"postDate\": \"2024-07-01T16:02:03-07:00\",\n    \"expiryDate\": null,\n    \"typeId\": 1,\n    \"defaultVariantId\": 142,\n    \"defaultSku\": \"WIDGET-THINGY-BASIC\",\n    \"defaultHeight\": null,\n    \"defaultLength\": null,\n    \"defaultWidth\": null,\n    \"defaultWeight\": null,\n    \"taxCategory\": null,\n    \"name\": null,\n    \"eagerLoadInfo\": null,\n    \"id\": 113,\n    \"tempId\": null,\n    \"draftId\": null,\n    \"revisionId\": null,\n    \"isProvisionalDraft\": false,\n    \"uid\": \"40cdabfe-c7ca-4a49-be20-f55be18531cd\",\n    \"siteSettingsId\": 117,\n    \"fieldLayoutId\": 11,\n    \"enabled\": true,\n    \"archived\": false,\n    \"siteId\": 2,\n    \"title\": \"Thingamabob\",\n    \"slug\": \"thingamabob\",\n    \"uri\": \"widgets/thingamabob\",\n    \"dateCreated\": \"2024-07-01T16:02:03-07:00\",\n    \"dateUpdated\": \"2024-07-10T09:23:28-07:00\",\n    \"dateLastMerged\": null,\n    \"dateDeleted\": null,\n    \"deletedWithOwner\": null,\n    \"trashed\": false,\n    \"isNewForSite\": false,\n    \"forceSave\": false,\n    \"canonicalId\": 113,\n    \"cpEditUrl\": \"https://my-project.ddev.site/admin/commerce/products/widgets/113-thingamabob\",\n    \"isDraft\": false,\n    \"isRevision\": false,\n    \"isUnpublishedDraft\": false,\n    \"ref\": null,\n    \"status\": \"live\",\n    \"structureId\": null,\n    \"url\": \"https://my-project.ddev.site/widgets/thingamabob\"\n  },\n  \"description\": \"Thingamabob - Advanced Unit\",\n  \"purchasableId\": 114,\n  \"options\": [],\n  \"sales\": []\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Email Domain in Discount Condition Formula\nDESCRIPTION: A Twig expression used in discount condition formulas to check if an order's email address contains a specific domain. This would apply a discount to any customer with an email from the specified company.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/discounts.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n'@myclient.com' in order.email\n```\n\n----------------------------------------\n\nTITLE: Configuring Migrations in codeception.yml\nDESCRIPTION: YAML configuration example for specifying migration classes and parameters to be run before tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/config-options.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nmigrations:\n  - class: \"path\\to\\Migration\"\n    params:\n      param1: value1\n```\n\n----------------------------------------\n\nTITLE: Defining VueAdminTable Columns in Craft\nDESCRIPTION: Example of defining columns for a VueAdminTable component with sorting and special title slot configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_11\n\nLANGUAGE: javascript\nCODE:\n```\nconst statusColumns = [\n  { name: '__slot:title', title: Craft.t('my-plugin', 'Status Label'), sortField: 'name' },\n  { name: 'description', title: Craft.t('my-plugin', 'Description') },\n  // ...\n];\n```\n\n----------------------------------------\n\nTITLE: Number Field Form Input Template in Twig\nDESCRIPTION: Template code for creating a number input field in a front-end form, including field definition loading and value handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/number.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Load the base field definition: #}\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{# Resolve a current or default value: #}\n{% set value = entry is defined\n  ? entry.myFieldHandle\n  : field.defaultValue %}\n\n{# Build the input: #}\n<input\n  type=\"number\"\n  name=\"fields[myFieldHandle]\"\n  min=\"{{ field.min }}\"\n  max=\"{{ field.max }}\"\n  step=\"{{ field.step }}\"\n  value=\"{{ value }}\">\n```\n\n----------------------------------------\n\nTITLE: String Replacement Filter Usage\nDESCRIPTION: Shows different ways to replace parts of strings, including multiple replacements and regex.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set str = \"Hello, FIRST LAST\" %}\n\n{{ str|replace({\n  FIRST: currentUser.firstName,\n  LAST:  currentUser.lastName\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Installation Steps Configuration\nDESCRIPTION: Configures the installation process including xDebug management and Composer dependency installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\ninstall:\n- |\n  if [[ $TASK_TESTS_COVERAGE != 1 ]]; then\n    # disable xdebug for performance reasons when code coverage is not needed.\n    phpenv config-rm xdebug.ini || echo \"xdebug is not installed\"\n  fi\n  # install composer dependencies\n  export PATH=\"$HOME/.composer/vendor/bin:$PATH\"\n  travis_retry composer install $DEFAULT_COMPOSER_FLAGS\n```\n\n----------------------------------------\n\nTITLE: Inline Markdown Parsing in Twig\nDESCRIPTION: Demonstrates how to parse a plain text field as inline-only Markdown in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<h3>{{ entry.stylizedHeader|md(inlineOnly = true) }}</h3>\n```\n\n----------------------------------------\n\nTITLE: Hashing Data with hash Filter\nDESCRIPTION: Prefixes strings with HMAC for secure data passing in forms. Includes PHP validation examples.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('foo', 'bar'|hash) }}\n```\n\nLANGUAGE: php\nCODE:\n```\n$foo = Craft::$app->getRequest()->getBodyParam('foo');\n$foo = Craft::$app->getSecurity()->validateData($foo);\n\nif ($foo !== false) {\n    // $foo is valid!\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Referenced Elements from Link Fields\nDESCRIPTION: Shows how to access and render the element that a link field references when using asset, category, or entry link types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myLinkFieldHandle.element.render() }}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Rates for Specific Zones in Twig\nDESCRIPTION: Shows how to retrieve tax rates for a specific tax zone using either a zone object or zone ID in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch rates for a `zone` we've already got #}\n{# @var zone craft\\commerce\\models\\TaxAddressZone #}\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getTaxRatesForZone(zone) %}\n\n{# Fetch rates for a tax zone with an ID of `123` #}\n{% set rates = craft.commerce\n  .getTaxRates()\n  .getTaxRatesByTaxZoneId(123) %}\n```\n\n----------------------------------------\n\nTITLE: Querying Products with Active Sales in Twig\nDESCRIPTION: Demonstrates how to query products that have variants with active sales using the new hasVariant parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.products.hasVariant({hasSales: true}).all() %}\n```\n\n----------------------------------------\n\nTITLE: Namespacing Attributes with namespaceAttributes Filter\nDESCRIPTION: Demonstrates the 'namespaceAttributes' filter which is similar to namespace but preserves input name attributes, with options for class namespacing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set html %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endset %}\n{{ html|namespaceAttributes('foo') }}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"foo-title\" name=\"title\" type=\"text\">\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ html|namespaceAttributes('foo', withClasses=true) }}\n```\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .foo-text { font-size: larger; }\n  #foo-title { font-weight: bold; }\n</style>\n<input class=\"foo-text\" id=\"foo-title\" name=\"title\" type=\"text\">\n```\n\n----------------------------------------\n\nTITLE: Safe Conditional Logic in Object Templates\nDESCRIPTION: A safer alternative to dynamic attribute access, using conditional logic with fixed attribute names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\nprofiles/{{ slugPrefixSource == 'accountType' ? memberType : 'member' }}/{id}\n```\n\n----------------------------------------\n\nTITLE: Creating Routes with Regex Subpatterns in PHP\nDESCRIPTION: Demonstrates how to use regular expression subpatterns in routes to capture dynamic segments of the URI. Captured values are passed to the template in a 'matches' array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/routing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n'news/(\\d{4})/(\\d{2})' => 'news/_archive',\n```\n\n----------------------------------------\n\nTITLE: Extending Templates with Twig Extends Tag\nDESCRIPTION: Shows how to extend templates using Twig's extends tag, which is commonly used for template inheritance in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating-overview.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"foo/bar\" %}\n```\n\n----------------------------------------\n\nTITLE: Complete Event Testing Example with Property Validation\nDESCRIPTION: Comprehensive example showing how to test events with property validation using createEventItems(). Demonstrates checking both object and primitive event properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/events.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\test\\EventItem;\n\n$this->tester->expectEvent(SomeComponent::class, SomeComponent::SOME_EVENT, function() {\n\n        // Code that should trigger an event goes here.\n\n    }, Event::class,\n    $this->tester->createEventItems([\n        [\n            // The $event->sender prop is a \\stdClass where the $key property is set to 'value'\n            'eventPropName' => 'sender',\n            'type' => EventItem::TYPE_CLASS,\n            'desiredClass' => \\stdClass::class,\n            'desiredValue' => [\n                'key' => 'value'\n            ],\n        ],\n        [\n            // The $event->name prop string set to 'someEvent'.\n            'eventPropName' => 'name',\n            'type' => EventItem::TYPE_OTHERVALUE,\n            'desiredValue' => 'someEvent'\n        ]\n    ]\n));\n```\n\n----------------------------------------\n\nTITLE: Specifying Node.js Version in Nitro\nDESCRIPTION: Command to specify a specific Node.js version when running npm commands through Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/node.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro npm --version=12 install\n```\n\n----------------------------------------\n\nTITLE: Creating a Settings Page Template in Twig for Craft Plugin\nDESCRIPTION: Creates a Twig template for the plugin's settings page in the control panel. The template uses Craft's form macros to render input fields for the plugin settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-settings.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.textField({\n  first: true,\n  label: 'Foo',\n  name: 'foo',\n  value: settings.foo\n}) }}\n\n{{ forms.textField({\n  label: 'Bar',\n  name: 'bar',\n  value: settings.bar\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Elements with the tag Tag in Craft CMS\nDESCRIPTION: Demonstrates how to use the tag tag to render HTML elements with dynamic content. This example creates a paragraph with a welcome class and dynamic user greeting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'p' with {\n  class: 'welcome',\n} %}\n  Hello, {{ currentUser.friendlyName }}\n{% endtag %}\n{# Output: <p class=\"welcome\">Hello, Tim</p> #}\n```\n\n----------------------------------------\n\nTITLE: Setting WSL2 as Default (Windows)\nDESCRIPTION: This PowerShell command sets WSL2 as the default version for Windows Subsystem for Linux. It's part of the Windows installation process for Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_7\n\nLANGUAGE: sh\nCODE:\n```\nwsl --set-default-version 2\n```\n\n----------------------------------------\n\nTITLE: Saving Lightswitch Fields in Twig Forms\nDESCRIPTION: Provides a template for including a Lightswitch field in an element form, such as an entry form. The code creates a hidden input and a checkbox input for the Lightswitch field, ensuring proper form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/lightswitch-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{{ tag('input', {\n  type: 'checkbox',\n  name: 'fields[myFieldHandle]',\n  value: '1',\n  checked: (entry.myFieldHandle ?? false) ? true : false,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Country Code in Twig\nDESCRIPTION: Demonstrates how to check if a country is selected and output its two-letter code using Twig in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.country is not empty %}\n  Country code: {{ entry.country }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Listing All Sales in Twig\nDESCRIPTION: This snippet shows how to list all sales set up in the Craft Commerce system, displaying their names and descriptions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% for sale in craft.commerce.sales.allSales %}\n  {{ sale.name }} - {{ sale.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using namespaceInputId Filter in Twig\nDESCRIPTION: Shows how to namespace an element ID using the 'namespaceInputId' filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'bar'|namespaceInputId('foo') }}\n```\n\nLANGUAGE: html\nCODE:\n```\nfoo-bar\n```\n\n----------------------------------------\n\nTITLE: Implementation Classes in Inline Variable Type Annotations\nDESCRIPTION: Comparison showing the proper way to use @var tags for inline variable type annotations. Implementation classes should be referenced rather than interfaces for inline variable declarations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n/** @var \\craft\\base\\ElementInterface $element */\n/** @var \\craft\\base\\ElementInterface|\\craft\\base\\Element $element */\n\n// Better:\n/** @var \\craft\\base\\Element $element */\n```\n\n----------------------------------------\n\nTITLE: Soft Deleting Records Using Query Command in PHP\nDESCRIPTION: Example of using Craft's database command to soft-delete rows by using softDelete() instead of delete(), which updates the dateDeleted column rather than removing the row.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->db->createCommand()\n    ->softDelete('{{%mytablename}}', ['id' => $id])\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Accessing Multi-select Field Data in PHP\nDESCRIPTION: Shows how to access a Multi-select field's data in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Adding Payment Source in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed payment source addition responses, including success status, payment source object, and error details.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true,\n  \"paymentSource\": {} // Payment source object\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\",\n  \"paymentFormErrors\": [] // Array of payment form errors\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Editions in PHP\nDESCRIPTION: Implementation of plugin editions by extending the Craft base Plugin class. Defines constants for different editions and overrides the editions() method to return available editions in ascending order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-editions.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass Plugin extends \\craft\\base\\Plugin;\n{\n    const EDITION_LITE = 'lite';\n    const EDITION_PRO = 'pro';\n\n    public static function editions(): array\n    {\n        return [\n            self::EDITION_LITE,\n            self::EDITION_PRO,\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Querying JSON Fields with GraphQL\nDESCRIPTION: Demonstrates how to query JSON fields using GraphQL and parse the result in JavaScript.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nconst gql = `\nquery MyQuery {\n  globalSet(handle: \"siteOptions\") {\n    ... on siteOptions_GlobalSet {\n      analyticsConfig\n    }\n  }\n}`;\n\nfetch('/api', {\n  body: gql,\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/graphql',\n    'X-Craft-Gql-Schema': '*',\n  },\n})\n  .then(response => response.json())\n  .then(json => JSON.parse(json.data.globalSet.analyticsConfig))\n  .then(config => new AcmeAnalytics(config));\n```\n\n----------------------------------------\n\nTITLE: JSON Response Structure for Get Cart Action\nDESCRIPTION: Example JSON response structure when retrieving cart information. Returns cart data under the configured cartVariable key.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"cart\": {}\n}\n```\n\n----------------------------------------\n\nTITLE: Processing Table Field Data in PHP\nDESCRIPTION: Example of accessing table field row data using PHP array syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/table.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $row) {\n    // Each row is a plain array, not an object:\n    $row['whiskey'];\n    $row['description'];\n    $row['proof'];\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Head Scripts with head() Function\nDESCRIPTION: The head() function outputs any scripts and styles that were registered for the \"head\" position, to be placed right before the closing head tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n<head>\n  <title>{{ siteName }}</title>\n  {{ head() }}\n</head>\n```\n\n----------------------------------------\n\nTITLE: Creating/Updating Customer Addresses Form in Craft Commerce\nDESCRIPTION: Form template for creating new or updating existing customer addresses. Uses the commerce/customerAddresses/save action endpoint and includes fields for customer details.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-address-management.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/customerAddresses/save\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/customer/addresses\">\n  <input type=\"text\" name=\"address[firstName]\" value=\"{{ address ? address[firstName] : '' }}\">\n  <input type=\"text\" name=\"address[lastName]\" value=\"{{ address ? address[lastName] : '' }}\">\n  ...\n  <input type=\"submit\" value=\"Save\"/>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Tags in Twig\nDESCRIPTION: Demonstrates how to check for the existence of related tags without fetching them in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related tags!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Reactivate Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a subscription is reactivated. Can prevent reactivation by setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_34\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_BEFORE_REACTIVATE_SUBSCRIPTION, function(SubscriptionEvent $e) {\n    // Do something - maybe the user does not qualify for reactivation due to some business logic.\n});\n```\n\n----------------------------------------\n\nTITLE: Explicit Level-Based URI Format in Craft CMS\nDESCRIPTION: An alternative approach to creating hierarchical URLs using conditional logic based on the entry's level in a Structure section. This explicitly sets a base segment for top-level entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if level == 1 %}docs{% else %}{parent.uri}{% endif %}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to Entries Field Query in Twig\nDESCRIPTION: Shows how to add parameters to the ElementCriteriaModel to filter the results, in this case limiting to entries from the 'news' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set newsEntries = entry.entriesFieldHandle.section('news') %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Categories\nDESCRIPTION: Examples of accessing and working with related categories from an element with a Categories field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Snake Case String Formatting\nDESCRIPTION: Demonstrates the snake case string formatting filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"foo bar\"|snake }}\n{# Outputs: foo_bar #}\n```\n\n----------------------------------------\n\nTITLE: Displaying First Related Asset in PHP\nDESCRIPTION: PHP code that retrieves only the first related asset from an Assets field and processes it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // do something with $rel->url and $rel->filename\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring General Settings in Craft CMS\nDESCRIPTION: Basic configuration example for enabling development mode in Craft CMS through the config/general.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'devMode' => true,\n];\n```\n\n----------------------------------------\n\nTITLE: Using Address Repository for Country Data in Twig\nDESCRIPTION: Demonstrates how to use the address repository to get detailed country information in earlier versions of Craft.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/country-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set repo = craft.app.addresses.getCountryRepository() %}\n\n{% set country = repo.get(entry.country) %}\n\n{{ country.name }} ({{ country.threeLetterCode }})\n```\n\n----------------------------------------\n\nTITLE: Creating Directory Structure for Craft CMS Translation Files\nDESCRIPTION: Shows the directory structure for placing translation files in a Craft CMS project. The translations folder should be created at craft/translations/ with language-specific PHP files inside.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/static-translations.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\ncraft/\n├── config/\n├── ...\n└── translations/\n    └── es.php\n```\n\n----------------------------------------\n\nTITLE: Setting Parameters on Tag Query in Twig\nDESCRIPTION: Illustrates how to set parameters on a tag query using a Tags field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedTags = clone(entry.myFieldHandle)\n  .group('blogEntryTags')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft CMS Using Map Style in PHP\nDESCRIPTION: Example of configuring Craft CMS using the map style in a PHP config file. This sets the dev mode and user session duration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'devMode' => App::env('DEV_MODE') ?? false,\n    'userSessionDuration' => 'P1D',\n];\n```\n\n----------------------------------------\n\nTITLE: Querying Cocktail Recipe Data Structure\nDESCRIPTION: Example GraphQL query variables showing the data structure for a cocktail recipe with ingredients including spirits, mixers and garnishes. Demonstrates nested object structure with IDs and measurements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_25\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"title\": \"Gin and Tonic\",\n  \"slug\": \"gin-tonic\",\n  \"authorId\": 1,\n  \"sortOrder\": [\"new1\", \"new2\", \"new3\", \"new4\"],\n  \"ingredients\": [\n    {\n      \"spirit\": {\n        \"id\": \"new1\",\n        \"spiritName\": \"Gin\",\n        \"ounces\": 2\n      }\n    },\n    {\n      \"mixer\": {\n        \"id\": \"new2\",\n        \"mixerName\": \"Tonic\",\n        \"ounces\": 4\n      }\n    },\n    {\n      \"mixer\": {\n        \"id\": \"new3\",\n        \"mixerName\": \"Fresh Lime Juice\",\n        \"ounces\": 0.25\n      }\n    },\n    {\n      \"garnish\": {\n        \"id\": \"new4\",\n        \"garnishName\": \"Lime Wedge or Twist\"\n      }\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Service Class in Craft CMS Plugin\nDESCRIPTION: Shows how to create a service class for a Craft CMS plugin with sample methods for saving and deleting ingredients. The class extends BaseApplicationComponent and follows the naming convention matching the filename.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/services.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientsService extends BaseApplicationComponent\n{\n    public function saveIngredient(CocktailRecipes_IngredientModel $ingredient)\n    {\n        ...\n    }\n\n    public function deleteIngredientById($id)\n    {\n        ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Method with Commerce Event System in PHP\nDESCRIPTION: Code example showing how to register a custom shipping method with Craft Commerce by subscribing to the registerAvailableShippingMethods event. This makes the custom shipping method available for selection in the store checkout process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/shipping-methods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RegisterAvailableShippingMethodsEvent;\nuse craft\\commerce\\services\\ShippingMethods;\nuse yii\\base\\Event;\n\nEvent::on(\n    ShippingMethods::class,\n    ShippingMethods::EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS,\n    function(RegisterAvailableShippingMethodsEvent $event) {\n        $event->shippingMethods[] = new MyShippingMethod();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Rendering Available Shipping Methods with Twig\nDESCRIPTION: Template code that iterates through available shipping methods for the current cart, displays each method's name and price, and creates radio button inputs for selection. Includes logic for marking the currently selected shipping method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/shipping.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for handle, method in cart.availableShippingMethodOptions %}\n  {% set isCurrentSelection = handle == cart.shippingMethodHandle %}\n  {% set formattedPrice = method.priceForOrder(cart)|currency(cart.currency) %}\n  <label>\n    <input type=\"radio\"\n      name=\"shippingMethodHandle\"\n      value=\"{{ handle }}\"\n      {{ isCurrentSelection ? ' checked' : '' }}\n    />\n    <strong>{{ method.name }}</strong> {{ formattedPrice }}\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Configuring GIF Transformation in Craft CMS\nDESCRIPTION: Configuration setting that controls whether GIF files should be transformed or cleansed in Craft CMS. Setting this to false will prevent Craft from processing GIF files during transformations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_81\n\nLANGUAGE: php\nCODE:\n```\n'transformGifs' => false,\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Location Block in Nginx Configuration for Nitro 2\nDESCRIPTION: This snippet demonstrates how to add a custom location block to the Nginx configuration in Nitro 2. It creates a new location that returns a test message for the /testing path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/nginx.md#2025-04-22_snippet_0\n\nLANGUAGE: nginx\nCODE:\n```\nlocation ~ ^/testing {\n    default_type text/html;\n    return 200 'Testing custom config!';\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Products in Twig\nDESCRIPTION: Shows how to iterate through selected products in a Products field using a for loop in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for product in entry.productsFieldHandle %}\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Element Properties Table in Markdown\nDESCRIPTION: Markdown table showing common properties available to all elements in Craft CMS, including their types and usage notes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/elements.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nProperty | Type | Notes\n-------- | ---- | -----\n`archived` | `bool|null` | Whether the element is soft-deleted, or \"trashed.\"\n`dateCreated` | `DateTime` | Date the element was originally created.\n`dateDeleted` | `DateTime|null` | Date the element was soft-deleted or `null` if not.\n`dateUpdated` | `DateTime` | Date the element was last updated.\n`enabled` | `bool` | Whether the element is enabled (globally).\n`id` | `int` | ID of the element.\n`level` | `int|null` | Depth of the element in a structure. _Structures only._\n`parentId` | `int|null` | ID of the parent element. _Structures only._\n`searchScore` | `int` | Score relative to other results when returned from an [element query](element-queries.md) using the [`search` param](searching.md).\n`siteId` | `int` | ID of the <craft4:craft\\models\\Site> the element was loaded in.\n`slug` | `string|null` | _Only for elements with slugs._\n`title` | `string|null` | _Only for elements with titles._\n`trashed` | `bool` | Whether or not the element has been soft-deleted.\n`uid` | `string|null` | A UUIDv4 string uniquely identifying this element.\n`uri` | `string|null` | Resolved URI or path for the site the element was loaded in. _Only for elements with URLs._\n```\n\n----------------------------------------\n\nTITLE: Defining Breadcrumbs in Craft CP Template\nDESCRIPTION: Shows how to define navigation breadcrumbs for a control panel page using an array of crumb objects with labels and URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set crumbs = [\n  {\n    label: 'Plugin Name'|t('plugin-handle'),\n    url: url('plugin-handle'),\n  },\n  {\n    label: 'Products'|t('plugin-handle'),\n    url: url('plugin-handle/products'),\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Creating Redirect Input with Custom Attributes in Craft CMS\nDESCRIPTION: Creates a hidden redirect input field with additional custom HTML attributes specified in the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_36\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(url, {\n  id: 'redirect-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Initializing Console Command Test Class in PHP\nDESCRIPTION: Basic setup for a console command test class that extends craft\\test\\console\\ConsoleTest.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace crafttests\\unit\\console;\n\nuse \\craft\\test\\console\\ConsoleTest;\n\nclass MyConsoleTest extends ConsoleTest\n{\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing addCategoryActions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom element actions to the category index page. Returns an array of element action class handles or instantiated IElementAction objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\npublic function addCategoryActions($source)\n{\n    return array(\n        'Foo',\n        new BarElementAction(),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Single Asset in Craft CMS GraphQL\nDESCRIPTION: This GraphQL query schema defines the structure for querying a single asset in Craft CMS. It includes a wide range of arguments for filtering and sorting assets based on various criteria such as ID, status, site, relationships, and asset-specific properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_9\n\nLANGUAGE: graphql\nCODE:\n```\nasset(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  archived: Boolean\n  trashed: Boolean\n  site: [String]\n  siteId: [QueryArgument]\n  unique: Boolean\n  preferSites: [QueryArgument]\n  enabledForSite: Boolean\n  title: [String]\n  slug: [String]\n  uri: [String]\n  search: String\n  relatedTo: [QueryArgument]\n  relatedToAssets: [AssetCriteriaInput]\n  relatedToEntries: [EntryCriteriaInput]\n  relatedToUsers: [UserCriteriaInput]\n  relatedToCategories: [CategoryCriteriaInput]\n  relatedToTags: [TagCriteriaInput]\n  relatedToAll: [QueryArgument]\n  ref: [String]\n  fixedOrder: Boolean\n  inReverse: Boolean\n  dateCreated: [String]\n  dateUpdated: [String]\n  offset: Int\n  limit: Int\n  orderBy: String\n  siteSettingsId: [QueryArgument]\n  volumeId: [QueryArgument]\n  volume: [String]\n  folderId: [QueryArgument]\n  filename: [String]\n  kind: [String]\n  height: [String]\n  width: [String]\n  size: [String]\n  dateModified: String\n  includeSubfolders: Boolean\n  withTransforms: [String]\n  uploader: QueryArgument\n) {\n  # Query fields go here\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Grouped State Dropdown by Country in Twig\nDESCRIPTION: This snippet demonstrates how to create a select dropdown for states, grouped by country, using the craft.commerce.states.allStatesAsList method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for countryId, states in craft.commerce.states.allStatesAsList %}\n  <optgroup label=\"{{ craft.commerce.countries.countriesAsList[countryId] }}\">\n    {% for stateId, stateName in craft.commerce.states.allStatesAsList[countryId] %}\n      <option value=\"{{ stateId }}\">{{ stateName }}</option>\n    {% endfor %}\n  </optgroup>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Creating and Navigating to Project Folder in Shell\nDESCRIPTION: Shell commands to create a new 'tutorial' folder for the Craft CMS project and navigate into it. This sets up the initial project directory structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/README.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ncd /path/to/dev/folder\nmkdir tutorial\ncd tutorial\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_BASE_PATH in PHP for Custom Base Directory Location\nDESCRIPTION: Defines the CRAFT_BASE_PATH constant to specify where Craft should look for config/, templates/, and other directories. This example sets it to two directory levels above the current file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to look for config/, templates/, etc., two levels up from here\ndefine('CRAFT_BASE_PATH', dirname(__DIR__, 2));\n```\n\n----------------------------------------\n\nTITLE: Running Commerce Upgrade Process via CLI\nDESCRIPTION: Support command for the Commerce 3 to Commerce 4 upgrade process. It performs various migration steps including converting legacy customers to users, converting addresses to elements, updating zone conditions, and migrating country settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/console-commands.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/upgrade\n```\n\n----------------------------------------\n\nTITLE: Validating Request Parameters in PHP and Twig\nDESCRIPTION: Enables validation of redirect parameters and provides Twig filter for parameter hashing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\n'validateUnsafeRequestParams' => true,\n```\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"redirect\" value=\"{{ 'my-page'|hash }}\">\n```\n\n----------------------------------------\n\nTITLE: Optimized Event Handler Registration in Craft CMS PHP\nDESCRIPTION: Improved method of registering event handlers using craft()->on() which allows lazy loading of service classes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-and-events.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('entries.saveEntry', function(Event $event) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Time Fields in Twig\nDESCRIPTION: Twig code snippet demonstrating how to query for entries with a Time field value before 10:00 AM.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with with a selected time before 10:00 AM #}\n{% set entries = craft.entries()\n  .myFieldHandle('< 10:00')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Tables with Soft Delete Support in PHP\nDESCRIPTION: Examples of adding a dateDeleted column to new and existing database tables to enable soft deletion. The dateDeleted column will store the timestamp when a row was soft-deleted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/soft-deletes.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// New table migration\n$this->createTable('{{%mytablename}}', [\n    // other columns...\n    'dateDeleted' => $this->dateTime()->null(),\n]);\n\n// Existing table migration\n$this->addColumn(\n    '{{%mytablename}}',\n    'dateDeleted',\n    $this->dateTime()->null()->after('dateUpdated')\n);\n```\n\n----------------------------------------\n\nTITLE: Customizing Asset Table Attribute HTML in Craft CMS\nDESCRIPTION: Hook to customize the HTML output of table cells on the asset index page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_31\n\nLANGUAGE: php\nCODE:\n```\npublic function getAssetTableAttributeHtml(AssetFileModel $asset, $attribute)\n{\n    if ($attribute == 'smallScreenImage' || $attribute == 'largeScreenImage') {\n        $altImage = $asset->$attribute->first();\n\n        if ($altImage) {\n            return craft()->templates->render('_elements/element', array(\n                'element' => $altImg\n            ));\n        }\n\n        return '';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Assets in Twig\nDESCRIPTION: Template code that checks whether an Assets field has any related assets without fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related assets!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Running Garbage Collection in Craft CMS (Bash)\nDESCRIPTION: This snippet demonstrates how to force garbage collection to run using a terminal command in Craft CMS. It also shows an option to force hard-deletion of all soft-deleted rows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/gc.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc --delete-all-trashed=1\n```\n\n----------------------------------------\n\nTITLE: Creating Script Tags with Attributes using script Tag\nDESCRIPTION: Demonstrates how to use the script tag to generate a JavaScript script element with custom attributes. This example creates a module-type script.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{% script with {type: 'module'} %}\n// some JavaScript\n{% endscript %}\n```\n\n----------------------------------------\n\nTITLE: Reactivating a Canceled Subscription in Twig for Craft Commerce\nDESCRIPTION: Template for creating a form to reactivate a canceled subscription. This checks if the subscription can be reactivated using canReactivate() method before displaying the form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/subscription-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if subscription.canReactivate() %}\n  <form method=\"post\">\n    {{ csrfInput() }}\n    <input type=\"hidden\" name=\"action\" value=\"commerce/subscriptions/reactivate\">\n    <input type=\"hidden\" name=\"subscriptionUid\" value=\"{{ subscription.uid|hash }}\">\n\n    <button type=\"submit\" class=\"button link\">{{ \"Reactivate\"|t('commerce') }}</button>\n  </form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Adding HTML Meta Tag for PDF Character Encoding in Twig Template\nDESCRIPTION: This snippet shows how to add a meta tag to a PDF template to ensure proper character encoding (UTF-8) and prevent display issues like missing or incorrect characters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/pdfs.md#2025-04-22_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n```\n\n----------------------------------------\n\nTITLE: Forcing Project Config Changes Application in Craft CMS\nDESCRIPTION: Command to forcefully apply all Project Config values, treating them as added or updated. Used when regular apply isn't picking up changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/apply --force\n```\n\n----------------------------------------\n\nTITLE: Atomic Deployment with Persistent Files for Craft CMS\nDESCRIPTION: An extension of the atomic deployment script that includes creating symlinks for persistent files like .env and uploaded assets between deployments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/deploy.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\n# ...\n\nSHARED=\"$WORKING/shared\"\n\n# Create links to persistent files:\nln -s \"$RELEASE/.env\" \"$SHARED/.env\"\nln -s \"$RELEASE/web/uploads\" \"$SHARED/web/uploads\"\n\n# Create a symbolic link to the new release:\nln -sf $RELEASE $CURRENT\n```\n\n----------------------------------------\n\nTITLE: Loading Global Set Variables in Craft Commerce Email Templates\nDESCRIPTION: This snippet demonstrates how to manually load global set variables into Craft Commerce email templates. It uses the craft.globals function to retrieve a specific global set and access its custom fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/order-status-emails.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set globalSetName = craft.globals.getSetByHandle('globalSetName') %}\n\n{{ globalSetName.customFieldName }}\n```\n\n----------------------------------------\n\nTITLE: Setting Required Craft CMS Version in composer.json\nDESCRIPTION: JSON configuration that specifies the minimum required Craft CMS version for a plugin. This is required when submitting a plugin to the Plugin Store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-store.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"require\": {\n    \"craftcms/cms\": \"^3.0.0\"\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Plugin via CLI\nDESCRIPTION: Command to temporarily disable a plugin using Craft's CLI tool\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/plugins.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/disable commerce\n```\n\n----------------------------------------\n\nTITLE: Deprecated Order Method in Commerce 4\nDESCRIPTION: The Order::getUser() method has been deprecated in Commerce 4. Developers should use getCustomer() instead to retrieve the associated user.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nOrder::getUser()\n```\n\n----------------------------------------\n\nTITLE: Running Craft Help Command\nDESCRIPTION: This command displays a list of supported commands in your Craft CMS project. It's useful for identifying available commands in your specific installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/cli.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nddev craft help\n```\n\n----------------------------------------\n\nTITLE: Fetching All Tax Zones in Craft Commerce (Twig and PHP)\nDESCRIPTION: Demonstrates how to retrieve all tax zones using the TaxZones service in both Twig and PHP. This returns an array of TaxAddressZone models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set zones = craft.commerce\n  .getTaxZones()\n  .getAllTaxZones() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$zones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getAllTaxZones();\n```\n\n----------------------------------------\n\nTITLE: HTML Attribute Encoding Example in Twig\nDESCRIPTION: Demonstrates how the attr function automatically HTML-encodes attribute values for security.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<div {{ attr({ title: 'Greetings & Salutations' }) }}></div>\n{# Output: <div title=\"Greetings &amp; Salutations\"> #}\n```\n\n----------------------------------------\n\nTITLE: Creating ElementCriteriaModel for Entry Elements in PHP\nDESCRIPTION: Creates an ElementCriteriaModel instance for querying Entry elements. This is the first step in fetching elements programmatically in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$criteria = craft()->elements->getCriteria(ElementType::Entry);\n```\n\n----------------------------------------\n\nTITLE: Rendering DateTime Input in Craft CMS - Unified Format\nDESCRIPTION: Creates a unified datetime-local input field for handling entry post dates in Craft CMS. Uses the atom format for the date value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('datetime-local', 'postDate', entry.postDate|atom) }}\n```\n\n----------------------------------------\n\nTITLE: Fluent Configuration Style in PHP for Craft CMS\nDESCRIPTION: Illustrates the fluent style declaration for Craft CMS configuration, providing auto-completion and type hints. It uses the GeneralConfig class to set devMode and userSessionDuration in a chained method call style.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\nuse craft\\helpers\\App;\n\nreturn GeneralConfig::create()\n    ->devMode(App::env('DEV_MODE') ?? false)\n    ->userSessionDuration('P1D');\n```\n\n----------------------------------------\n\nTITLE: Extending Catalog Pricing Rules Index in Twig\nDESCRIPTION: This hook allows adding content after the table containing a store's pricing rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.catalogPricingRules.index\" %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tags from a Field in Twig Templates\nDESCRIPTION: Basic syntax to access tags associated with an element through a Tags field. This returns an ElementCriteriaModel object containing the selected tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set tags = entry.tagsFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Array Intersection with intersect Filter\nDESCRIPTION: Returns an array containing only values that exist in both arrays\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set ownedIngredients = [\n  'vodka',\n  'gin',\n  'triple sec',\n  'tonic',\n  'grapefruit juice'\n] %}\n\n{% set longIslandIcedTeaIngredients = [\n  'vodka',\n  'tequila',\n  'rum',\n  'gin',\n  'triple sec',\n  'sweet and sour mix',\n  'Coke'\n] %}\n\n{% set ownedLongIslandIcedTeaIngredients =\n  ownedIngredients|intersect(longIslandIcedTeaIngredients)\n%}\n```\n\n----------------------------------------\n\nTITLE: Radio Buttons Field in Entry Form\nDESCRIPTION: Provides a template for including a Radio Buttons field in an entry form, demonstrating how to generate radio buttons for each option and handle selected states.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n<ul>\n  {% for option in field.options %}\n    {% set selected = entry is defined\n      ? entry.myFieldHandle.value == option.value\n      : option.default %}\n\n    <li><label>\n      <input type=\"radio\"\n        name=\"fields[myFieldHandle]\"\n        value=\"{{ option.value }}\"\n        {% if selected %} checked{% endif %}\n      >\n      {{ option.label }}\n    </label></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Indicators to Field Layout Elements in Craft CMS\nDESCRIPTION: Demonstrates how to add custom indicators to field layout elements by overriding the selectorIndicators() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nprotected function selectorIndicators(): array\n{\n    // Preserve built-in indicators:\n    $indicators = parent::selectorIndicators();\n\n    if ($this->someCustomSetting) {\n        $indicators[] = [\n            'label' => Craft::t('my-plugin', 'This field layout element may behave differently!'),\n            'icon' => 'triangle-exclamation',\n            'iconColor' => 'fuchsia',\n        ];\n    }\n\n    return $indicators;\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Address in Cart Update Form\nDESCRIPTION: Example of updating an existing shipping address (ID: 5) that belongs to the customer and setting it on the cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_7\n\nLANGUAGE: html\nCODE:\n```\n<form method=\"post\">\n <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n {{ redirectInput('shop/shipping') }}\n {{ csrfInput() }}\n <input type=\"text\" name=\"shippingAddress[id]\" value=\"5\"/>\n <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\"/>\n <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\"/>\n //...\n</form>\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoding/Decoding in Twig\nDESCRIPTION: Implements base64 encoding and decoding functionality for strings. Includes both encode and decode operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Q3JhZnQgQ01T' | base64_decode }}\n{{ 'Craft CMS' | base64_encode }}\n```\n\n----------------------------------------\n\nTITLE: Systemd Service Configuration\nDESCRIPTION: Systemd service configuration file for running the Craft queue as a daemon process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_3\n\nLANGUAGE: systemd\nCODE:\n```\n[Unit]\nDescription=Craft CMS Queue %i\nAfter=network.target\nAfter=mysql.service\nRequires=mysql.service\n\n[Service]\nUser=www-data\nGroup=www-data\nExecStart=/usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\nRestart=on-failure\nRestartSec=120\nTimeoutStopSec=300\n\n[Install]\nWantedBy=multi-user.target\n```\n\n----------------------------------------\n\nTITLE: Handling After Save Transaction Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a transaction is saved. Useful for custom transaction processing logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\TransactionEvent;\nuse craft\\commerce\\services\\Transactions;\nuse yii\\base\\Event;\n\nEvent::on(Transactions::class, Transactions::EVENT_AFTER_SAVE_TRANSACTION, function(TransactionEvent $e) {\n    // Do something - perhaps run our custom logic for failed transactions\n});\n```\n\n----------------------------------------\n\nTITLE: Estimating Cart Addresses in Craft Commerce Twig Template\nDESCRIPTION: This snippet demonstrates how to add or update estimated addresses on the order for shipping cost estimates. It includes a form to collect shipping country, state, and postal code, and displays available shipping methods if an estimate exists.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n{% set store = craft.commerce.getStore().getStore() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('estimatedBillingAddressSameAsShipping', '1') }}\n\n  {% if not cart.estimatedShippingAddressId %}\n    <select name=\"estimatedShippingAddress[countryCode]\">\n      {% for code, option in store.getCountriesList() %}\n        <option value=\"{{ code }}\">{{ option }}</option>\n      {% endfor %}\n    </select>\n\n    <select name=\"estimatedShippingAddress[administrativeArea]\">\n      {% for states in store.getAdministrativeAreasListByCountryCode() %}\n        {% for key, option in states %}\n          <option value=\"{{ key }}\">{{ option }}</option>\n        {% endfor %}\n      {% endfor %}\n    </select>\n\n    <input type=\"text\" name=\"estimatedShippingAddress[postalCode]\" value=\"\">\n  {% endif %}\n\n  {% if cart.availableShippingMethodOptions|length and cart.estimatedShippingAddressId %}\n    {% for handle, method in cart.availableShippingMethodOptions %}\n      {% set price = method.priceForOrder(cart)|commerceCurrency(cart.currency) %}\n      <label>\n        <input type=\"radio\"\n          name=\"shippingMethodHandle\"\n          value=\"{{ handle }}\"\n          {% if handle == cart.shippingMethodHandle %}checked{% endif %}\n        />\n        {{ method.name }} - {{ price }}\n      </label>\n    {% endfor %}\n  {% endif %}\n\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Caching Template Output in Twig\nDESCRIPTION: Uses the cache tag to cache a portion of template output, improving performance for subsequent requests. The example caches the output of iterating through a Matrix field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% cache %}\n  {% for block in entry.myMatrixField.all() %}\n    <p>{{ block.text }}</p>\n  {% endfor %}\n{% endcache %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Radio Buttons Field Data in PHP\nDESCRIPTION: Shows how to access Radio Buttons field data in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Accessing Time Field Value in PHP\nDESCRIPTION: PHP code snippet showing how to access a Time field value and format it using the Craft formatter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    $selectedTime = \\Craft::$app->getFormatter()->asTime(\n        $entry->myFieldHandle, \n        'short'\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Country Dropdown with IDs and Names in Twig\nDESCRIPTION: This snippet shows how to create a select dropdown for countries using the craft.commerce.countries.allCountriesAsList method, which returns a list of country IDs and names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for id, countryName in craft.commerce.countries.allCountriesAsList %}\n  <option value=\"{{ id }}\">{{ countryName }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Update Feed JSON Structure for Craft CMS\nDESCRIPTION: This JSON structure defines the format for a plugin's update feed in Craft CMS. It includes version information, download URL, release date, and release notes. This feed is used to provide update information in the Craft CMS control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/setting-things-up.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n[\n    {\n        \"version\": \"0.9.0\",\n        \"downloadUrl\": \"https://download.craftcommerce.com/0.9/Commerce0.9.0.zip\",\n        \"date\": \"2015-12-01T10:00:00-08:00\",\n        \"notes\": [\n            \"# Big Stuff\",\n            \"[Added] It's now possible to create new products right from Product Selector Modals (like the ones used by Products fields).\",\n            \"[Improved] Variants are now defined in a new Variant Matrix field, right on the main Edit Product pages.\",\n            \"# Bug Fixes\",\n            \"[Fixed] Fixed a Twig error that occurred if you manually went to /commerce/orders/new. You now receive a 404 error instead.\"\n        ]\n    },\n    {\n        \"version\": \"0.9.1\",\n        \"downloadUrl\": \"https://download.craftcommerce.com/0.9/Commerce0.9.1.zip\",\n        \"date\": \"2015-12-01T11:00:00-08:00\",\n        \"notes\": [\n            \"[Fixed] Fixed a PHP error that occurred when creating a new produt when the current user's username was 'null'.\"\n        ]\n    }\n]\n```\n\n----------------------------------------\n\nTITLE: Querying Categories with GraphQL in Craft CMS\nDESCRIPTION: This GraphQL query fetches all categories with their IDs and titles. It's useful for getting category IDs to use in related entry queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/graphql.md#2025-04-22_snippet_5\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  categories {\n    id\n    title\n  }\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"categories\": [\n      {\n        \"id\": \"11\",\n        \"title\": \"Trips\"\n      },\n      {\n        \"id\": \"12\",\n        \"title\": \"Oregon\"\n      },\n      {\n        \"id\": \"22\",\n        \"title\": \"Summer\"\n      }\n    ]\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Address Formatters in Twig\nDESCRIPTION: Demonstrates how to use custom address formatters, including the PostalLabelFormatter and a custom OptionalCountryFormatter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set addressService = craft.app.getAddresses() %}\n{% set labelFormatter = create(\n  'CommerceGuys\\\\Addressing\\\\Formatter\\\\PostalLabelFormatter',\n  [\n    addressService.getAddressFormatRepository(),\n    addressService.getCountryRepository(),\n    addressService.getSubdivisionRepository(),\n  ]) %}\n{{ addr|address({ origin_country: 'GB' }, labelFormatter) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set addressService = craft.app.getAddresses() %}\n{% set customFormatter = create(\n  'mynamespace\\\\OptionalCountryFormatter',\n  [\n    addressService.getAddressFormatRepository(),\n    addressService.getCountryRepository(),\n    addressService.getSubdivisionRepository(),\n  ]\n) %}\n{{ addr|address({ hide_countries: ['US'] }, customFormatter) }}\n```\n\n----------------------------------------\n\nTITLE: Trimming Whitespace from Plain Text Field in Twig\nDESCRIPTION: Demonstrates how to trim whitespace from a plain text field before checking if it has content in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.summary|trim %}\n  {# Ok, there really is content in here! #}\n  <h3>Summary</h3>\n  <p>{{ entry.summary }}</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Outputting Asset Title in Twig\nDESCRIPTION: Demonstrates how to output an asset's title and URL using Twig syntax. The AssetFileModel object returns the asset's Title when output directly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/assetfilemodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ file.url }}\">{{ file }}</a>\n```\n\n----------------------------------------\n\nTITLE: GraphQL Generic Query for Nested Entries in Matrix Field in Craft CMS 5\nDESCRIPTION: GraphQL generic query to fetch nested entries from a Matrix field with specific criteria in Craft CMS 5.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_6\n\nLANGUAGE: gql\nCODE:\n```\nquery DifficultSteps {\n  entries(field: \"steps\", difficulty: \"hard\") {\n    ... on step_Entry {\n      title\n      estimatedTime\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'instance of' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'instance of' test to check if an object is an instance of a specific class. Shows checking if an element is an instance of a Craft Entry element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if element is instance of('craft\\\\elements\\\\Entry') %}\n  <h1>{{ entry.title }}</h1>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Declaring Craft CMS Version Support in composer.json\nDESCRIPTION: This JSON snippet shows how to specify the minimum required Craft CMS version for a plugin in the composer.json file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-store.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"require\": {\n    \"craftcms/cms\": \"^3.0.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Percentages with percentage Filter in Twig\nDESCRIPTION: Shows the usage of the percentage filter to format numbers as percentages according to the user's preferred language.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{{ 0.85|percentage }}\n{# Output: 85% #}\n\n{{ 'oh hai'|percentage }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Output Format Examples\nDESCRIPTION: Examples showing how the RelatedEntries field data is formatted in different export formats (CSV, JSON, and XML).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-exporter-types.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nRelatedEntries\n\"[\\\"Title 1\\\",\\\"Title 2\\\"]\"\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"RelatedEntries\": [\n    \"Title 1\",\n    \"Title 2\"\n  ]\n}\n```\n\nLANGUAGE: xml\nCODE:\n```\n<RelatedEntries>\n  <item>Title 1</item>\n  <item>Title 2</item>\n</RelatedEntries>\n```\n\n----------------------------------------\n\nTITLE: Using Arrow Functions in Twig\nDESCRIPTION: Demonstrates the use of arrow functions in Twig, particularly with the 'group' filter for organizing array items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% set groceryList = [\n  {name: 'Eggs', category: 'Dairy'},\n  {name: 'Pancake Mix', category: 'Breakfast'},\n  {name: 'Milk', category: 'Dairy'},\n  {name: 'Onions', category: 'Produce'}\n] %}\n\n{# output the list by category #}\n{% set itemsByCategory = groceryList|group(item => item.category) %}\n{% for category, items in itemsByCategory %}\n  <h3>{{ category }}</h3>\n  <ul>\n    {% for item in items %}\n      <li>{{ item.name }}</li>\n    {% endfor %}\n  </ul>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Checking if Tags Exist in a Field with Twig\nDESCRIPTION: Using the length filter to check if any tags are selected in a Tags field. This is useful for conditional display of tag-related content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.tagsFieldHandle | length %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Search Indexes with Craft CLI\nDESCRIPTION: Command to rebuild search indexes by bulk-resaving entries using Craft's CLI tool. Includes option for updating search index specifically.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/searching.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/entries --update-search-index\n```\n\n----------------------------------------\n\nTITLE: Processing Widget Settings with prepSettings Method in PHP\nDESCRIPTION: Implementation of the prepSettings() method to process widget settings before they are saved to the database. This method allows for validation or transformation of user-submitted settings data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    // ...\n\n    public function prepSettings($settings)\n    {\n        // Modify $settings here...\n\n        return $settings;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Product Ownership with hasPurchasables\nDESCRIPTION: Shows how to check if a user has previously purchased a specific product variant by querying orders with the hasPurchasables parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-orders.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  {% set order = craft.commerce.orders.user(currentUser).hasPurchasables([product.defaultVariant]).first() %}\n  {% if order %}\n    I already own this product:  <a href=\"shop/order?orderNumber={{ order.number }}\">Order #{{ order.shortNumber }}</a>\n  {% endif %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Table Field Conditional Checks in Twig\nDESCRIPTION: Examples of different ways to check for table field data existence and row counts in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/table.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Basic conditional: #}\n{% if entry.myFieldHandle %}\n  {# An array with any values is \"truthy!\" #}\n{% endif %}\n\n{# Emptiness test: #}\n{% if entry.myFieldHandle is not empty %}\n  {# Note the `not`—we only want to render this block if there *is* data! #}\n{% endif %}\n\n{# Length check: #}\n{% if entry.myFieldHandle|length %}\n  {# At least one row is present! #}\n{% endif %}\n\n{# Test for a specific number of rows: #}\n{% if entry.myFieldHandle|length >= 3 %}\n  {# Three or more rows have been added to this table field. #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Multi-select Fields in PHP\nDESCRIPTION: Shows how to fetch entries with a specific option selected in a Multi-select field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the 'foo' option selected\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('foo')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Kebab Case Formatting with kebab Filter\nDESCRIPTION: Converts a string to kebab-case format\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar?'|kebab }}\n{# Output: foo-bar #}\n```\n\n----------------------------------------\n\nTITLE: Fetching Field Layout in PHP\nDESCRIPTION: Example showing how to retrieve a field layout for a custom element type using the fields service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function getFieldLayout(): ?\\craft\\models\\FieldLayout\n{\n    return \\Craft::$app->getFields()->getLayoutByType(MyElement::class);\n}\n```\n\n----------------------------------------\n\nTITLE: Switching Subscription Plans in Twig for Craft Commerce\nDESCRIPTION: Template for creating a form to switch between subscription plans. This loops through alternative plans and creates a form for each one, using the commerce/subscriptions/switch action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/subscription-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for plan in subscription.alternativePlans %}\n  <div><strong>Switch to {{ plan.name }}</strong></div>\n  <form method=\"post\">\n    {{ csrfInput() }}\n    <input type=\"hidden\" name=\"action\" value=\"commerce/subscriptions/switch\">\n    <input type=\"hidden\" name=\"planUid\" value=\"{{ plan.uid|hash }}\">\n    <input type=\"hidden\" name=\"subscriptionUid\" value=\"{{ subscription.uid|hash }}\">\n\n    {{ plan.gateway.getSwitchPlansFormHtml(subscription.plan, plan)|raw }}\n    <button type=\"submit\" class=\"button link\">{{ \"Switch\"|t('commerce') }}</button>\n  </form>\n  <hr />\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Integer Number Field Values in Twig and PHP\nDESCRIPTION: Shows how to format Number field values as integers without decimals using Twig's number filter with decimals parameter and PHP's formatter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/number-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number(decimals=0) }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle, 0);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Tax Zones in Craft Commerce\nDESCRIPTION: Demonstrates how to retrieve all tax zones using the TaxZones service in both Twig and PHP. This returns an array of TaxAddressZone models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/tax.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set zones = craft.commerce\n  .getTaxZones()\n  .getAllTaxZones() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$zones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxZones()\n    ->getAllTaxZones();\n```\n\n----------------------------------------\n\nTITLE: Defining Exporters for Element Indexes in PHP\nDESCRIPTION: Demonstrates how to specify which exporter types an element type supports on its index page by implementing the defineExporters() method in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineExporters(string $source): array\n{\n    $exporters = parent::defineExporters($source);\n    $exporters[] = MyExporter::class;\n    return $exporters;\n}\n```\n\n----------------------------------------\n\nTITLE: Exploding Class Names with explodeClass Filter\nDESCRIPTION: Converts a class attribute string into an array of individual class names. Returns array as-is if array is passed in.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = 'foo bar baz'|explodeClass %}\n{# Result: ['foo', 'bar', 'baz'] #}\n```\n\n----------------------------------------\n\nTITLE: Handling Line Item Population from Purchasable\nDESCRIPTION: This event fires when a line item is being populated from a purchasable. It allows for modifying properties like price during the population process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse yii\\base\\Event;\n\nEvent::on(LineItems::class, LineItems::EVENT_POPULATE_LINE_ITEM, function(LineItemEvent $e) {\n    // Do something - perhaps modify the price of a line item\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG from Raw Markup in Craft CMS\nDESCRIPTION: Outputs an SVG document from raw markup that's been included from another template. The SVG is sanitized and namespaced by default.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_47\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = include('_includes/icons/lemon.svg') %}\n{{ svg(image) }}\n```\n\n----------------------------------------\n\nTITLE: Handling After Process Payment Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a payment is processed. Useful for post-payment notifications or processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\ProcessPaymentEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_AFTER_PROCESS_PAYMENT, function(ProcessPaymentEvent $e) {\n    // Do something - maybe let accounting dept. know that a transaction went through for an order.\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Country Dropdown in Twig\nDESCRIPTION: Example of using the country repository data to generate an HTML select element with options for all countries, displaying their names and using ISO codes as values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<select name=\"myCountry\">\n  {% for code, country in countries %}\n    <option value=\"{{ code }}\">{{ country.name }}</option>\n  {% endfor %}\n</select>\n\n{# Output:\n<select name=\"myCountry\">\n  <option value=\"AF\">Afghanistan</option>\n  <option value=\"AX\">Åland Islands</option>\n  ...\n</select>\n#}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Redirect Status Code in Twig\nDESCRIPTION: Demonstrates how to set a custom HTTP status code (301 permanent redirect) when redirecting users to another page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% redirect \"pricing\" 301 %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Single Variant Selection in Twig\nDESCRIPTION: Demonstrates how to retrieve a single variant when the field is configured to allow only one selection, using the one() method in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/variants-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set variant = entry.myFieldHandle.one() %}\n{% if variant %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to Variants Element Query in Twig\nDESCRIPTION: Example showing how to add additional parameters to the variants element query, in this case filtering variants by a specific product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.myFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Order Reference in Twig\nDESCRIPTION: Shows how to display an order's reference number using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.reference }}\n```\n\n----------------------------------------\n\nTITLE: Working with User Status in Element Queries (Twig and PHP)\nDESCRIPTION: Demonstrates how to update user queries to account for the change in default behavior where Craft 4 returns all users instead of only active users as in Craft 3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set activeUsers = craft.users().all() %}\n\n{% set activeUsers = craft.users()\n  .status('active')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$activeUsers = User::find()->all();\n\n$activeUsers = User::find()\n  ->status('active')\n  ->all();\n```\n\n----------------------------------------\n\nTITLE: Handling After Capture Transaction Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a payment transaction is captured. Useful for triggering warehouse notifications or other post-capture processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\TransactionEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_AFTER_CAPTURE_TRANSACTION, function(TransactionEvent $e) {\n    // Do something - probably notify warehouse that we're ready to ship\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Manual YAML File Generation in Craft CMS\nDESCRIPTION: This PHP snippet shows how to configure Craft CMS to stop writing YAML files automatically when changes are made. It modifies the projectConfig component in the app configuration to set writeYamlAutomatically to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'components' => [\n        // ...\n        'projectConfig' => function() {\n            $config = craft\\helpers\\App::projectConfigConfig();\n            $config['writeYamlAutomatically'] = false;\n            return Craft::createObject($config);\n        },\n    ]\n];\n```\n\n----------------------------------------\n\nTITLE: Validating a Craft CMS Model\nDESCRIPTION: Shows how to validate a model and access validation errors. The validate() method returns a boolean indicating whether validation passed, and getErrors() provides access to validation error messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nif ($ingredient->validate())\n{\n    // It validates!\n}\nelse\n{\n    // Here's a list of all the errors, grouped by attribute:\n    $ingredient->getErrors();\n\n    // Here's a list of errors for a single attribute:\n    $ingredient->getErrors('name');\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing and Using Number Field Values in Twig Templates\nDESCRIPTION: This example shows how to access a Number field value in a Twig template and perform calculations with it. The snippet checks if a user's birth year is set, displays it, and calculates the user's age based on the current year.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/number-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.birthyear %}\n  <p>{{ user.name }} was born in {{ user.birthyear }}.</p>\n\n  {% set age = now.year - user.birthyear %}\n  <p>That makes them {{ age }} years old!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Entry Model in Craft CMS 2 Event\nDESCRIPTION: Shows how to access the EntryModel object in Craft CMS 2 events related to entries. This object represents the entry being saved or deleted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$entry = $event->params['entry'];\n```\n\n----------------------------------------\n\nTITLE: Using Nullable Type Declarations in PHP\nDESCRIPTION: Example showing the correct way to declare methods that accept nullable arguments using the ? prefix notation. This syntax is preferred when an argument can be either a specific type or null.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function foo(?string $bar): void\n```\n\n----------------------------------------\n\nTITLE: Resaving Elements with Updated Dropdown Values in Craft CLI\nDESCRIPTION: Command to migrate existing dropdown field data using Craft's resave console command with value transformation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/dropdown.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/entries --section mySection --set myDropdownField --to \"={{ object.myDropdownField.value == 'oldValue' ? 'newValue' : object.myDropdownField.value }}\"\n```\n\n----------------------------------------\n\nTITLE: Sequential Order Reference with Padding\nDESCRIPTION: Example of generating sequential order references with year and padded numbers using the seq() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ dateOrdered|date('Y') }}-{{ seq(dateOrdered|date('Y'), 8) }}\n```\n\n----------------------------------------\n\nTITLE: Extending Base Template in Twig\nDESCRIPTION: This example shows how to extend a base template, set variables for the parent template, and override content blocks while preserving parent content with parent().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_html5.twig\" %}\n\n{% set docTitle = 'Hello World' %}\n\n{% set bodyAttributes = {\n  class: 'hello-world'\n} %}\n\n{% block head %}\n  {{ parent() }}\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/styles.css\">\n{% endblock %}\n\n{% block body %}\n  <h1>Hello world!</h1>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Asset Query in Twig and PHP\nDESCRIPTION: Shows how to initialize a new asset query using both Twig and PHP syntax in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new asset query #}\n{% set myAssetQuery = craft.assets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new asset query\n$myAssetQuery = \\craft\\elements\\Asset::find();\n```\n\n----------------------------------------\n\nTITLE: Unsafe Attribute Access in Object Templates\nDESCRIPTION: An example of unsafe attribute access in object templates that should be avoided for security reasons.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\nprofiles/{{ object[slugSource] }}/{id}\n```\n\n----------------------------------------\n\nTITLE: Customizing Field Layout Element Width in Craft CMS\nDESCRIPTION: Shows how to enable customizable width for a field layout element by implementing the hasCustomWidth() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function hasCustomWidth(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Tags to Channel Sections in Craft CMS\nDESCRIPTION: This code snippet demonstrates how to use a console command to convert tags to channel sections in Craft CMS. It requires specifying the handle of the tag group to be converted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/tags myTagGroupHandle\n```\n\n----------------------------------------\n\nTITLE: Multi-Environment Configuration with Nested Arrays in PHP\nDESCRIPTION: A more advanced multi-environment configuration using nested arrays for different environments in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-environment-configs.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    '*' => array(\n        'omitScriptNameInUrls' => true,\n    ),\n\n    'my-project.test' => array(\n        'devMode' => true,\n    ),\n\n    'my-project.com' => array(\n        'cooldownDuration' => 0,\n    )\n);\n```\n\n----------------------------------------\n\nTITLE: Sensitive Information Redaction Configuration in Craft CMS\nDESCRIPTION: PHP configuration example for customizing sensitive keywords that should be redacted from logs in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'components' => [\n        'security' => [\n            'sensitiveKeywords' => [\n                // Anything added here gets merged with the defaults:\n                'private',\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing Getters with @property Tags in PHP for Craft CMS\nDESCRIPTION: This example shows how to implement a getter method with a corresponding @property tag in the class's docblock. This approach helps IDEs like PhpStorm recognize magic properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @property User $author\n */\nclass Entry\n{\n    private $_author;\n\n    /**\n     * @return User\n     */\n    public function getAuthor()\n    {\n        return $this->_author;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Discount Detail View in Twig\nDESCRIPTION: This hook enables modifications before the template blocks in the discount detail view. HTML is not allowed in this hook.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.discounts.edit\" %}\n```\n\n----------------------------------------\n\nTITLE: Registering Project Config Event Listeners in Craft CMS Plugin\nDESCRIPTION: Demonstrates how to register event listeners in a plugin's init() method to handle when items are added, updated, or removed from the project config. Uses the onAdd(), onUpdate(), and onRemove() methods from ProjectConfig service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/project-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\ConfigEvent;\nuse craft\\services\\ProjectConfig;\n\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->projectConfig\n        ->onAdd('productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onUpdate('productTypes.{uid}', [$this->productTypes, 'handleChangedProductType'])\n        ->onRemove('productTypes.{uid}', [$this->productTypes, 'handleDeletedProductType']);\n}\n```\n\n----------------------------------------\n\nTITLE: Removed Controller Methods in Craft Commerce 4\nDESCRIPTION: Controller methods that have been removed in Commerce 4, affecting OrdersController, PlansController, and ProductsPreviewController.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nOrdersController::_prepCustomersArray() // Use _customerToArray() instead\nPlansController::actionRedirect()\nProductsPreviewController::enforceProductPermissions()\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Address Formatter in PHP\nDESCRIPTION: Shows how to configure a custom address formatter as the default formatter in the application configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'components' => [\n        // ...\n        'addresses' => [\n            'class' => \\craft\\services\\Addresses::class,\n            'formatter' => new \\mynamespace\\OptionalCountryFormatter(\n                new \\CommerceGuys\\Addressing\\AddressFormat\\AddressFormatRepository(),\n                new \\CommerceGuys\\Addressing\\Country\\CountryRepository(),\n                new \\CommerceGuys\\Addressing\\Subdivision\\SubdivisionRepository()\n            )\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Matrix Block Query - Twig & PHP Examples\nDESCRIPTION: Demonstrates how to create a new Matrix block query using both Twig and PHP syntax in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/matrix-blocks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new Matrix block query #}\n{% set myMatrixBlockQuery = craft.matrixBlocks() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new Matrix block query\n$myMatrixBlockQuery = \\craft\\elements\\MatrixBlock::find();\n```\n\n----------------------------------------\n\nTITLE: Using Dump Tag in Twig Templates\nDESCRIPTION: Demonstrates how to use the dump tag to log template context or variables to the Yii debug toolbar without halting execution\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# templates/_blog/post #}\n\n{% dump entry %}\n\n{# ... #}\n```\n\n----------------------------------------\n\nTITLE: Displaying Line Item Metadata in Twig\nDESCRIPTION: Shows how to display additional metadata for line items, including notes and options, with conditional checks for empty values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for item in cart.lineItems %}\n    {% set purchasable = item.purchasable %}\n\n    <li>\n      <h4>{{ item.description }}</h4>\n\n      {# ... #}\n\n      {# Notes: #}\n      {% if item.notes is not empty %}\n        <p>{{ item.notes }}</p>\n      {% endif %}\n\n      {# Options: #}\n      {% if item.options is not empty %}\n        <dl>\n          {% for key, val in item.options %}\n            <dt>{{ key|title }}</dt>\n            <dd>{{ val }}</dd>\n          {% endfor %}\n        </dl>\n      {% endif %}\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring ASCII-only Slugs in Craft CMS (PHP)\nDESCRIPTION: Sets the limitAutoSlugsToAscii config option to true, which limits automatically-generated slugs to ASCII characters. Non-ASCII characters are converted to their ASCII equivalents or removed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_31\n\nLANGUAGE: php\nCODE:\n```\n'limitAutoSlugsToAscii' => true,\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount by Code in Twig\nDESCRIPTION: This snippet shows how to fetch a specific discount using its code in Twig. It returns a Discount model that matches the provided code, allowing access to the discount's properties such as name and description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discounts.getDiscountByCode('HALFOFF') %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Products with Additional Parameters\nDESCRIPTION: Example of applying additional filtering parameters to the products element query using the type parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.myFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Creating Custom GraphQL Arguments for Widget Elements\nDESCRIPTION: A PHP class that defines custom GraphQL arguments for filtering Widget elements. The class extends Craft's ElementArguments to inherit common element arguments while adding a custom 'approved' boolean argument specific to Widgets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\arguments\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends craft\\gql\\base\\ElementArguments\n{\n    public static function getArguments(): array\n    {\n        // append our argument to common element arguments and any from custom fields\n        return array_merge(parent::getArguments(), self::getContentArguments(), [\n            'approved' => [\n                'name' => 'approved',\n                'type' => Type::boolean(),\n                'description' => 'Narrows query results based on approved status.'\n            ],\n        ]);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Simple Redactor Settings in JavaScript\nDESCRIPTION: Basic Redactor configuration that enables only bold and italic formatting options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"buttons\": [\"bold\",\"italic\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Counting Total Sections in Craft CMS using Twig\nDESCRIPTION: This snippet demonstrates how to use the getTotalSections() method to get the total number of sections in the site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set total = craft.sections.getTotalSections() %}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Image Transform Indexes in Twig (Craft CMS)\nDESCRIPTION: This example shows how to use the 'withTransforms' parameter to eager-load image transform indexes, optimizing performance when applying transforms to multiple assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsField.find({\n  withTransforms: [\n    'heroImage',\n    { width: 100, height: 100 }\n  ]\n}) %}\n\n{% set entries = craft.entries({\n  with: [\n    ['assetsField', {\n      withTransforms: ['heroImage']\n    }]\n  ]\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Hierarchical Navigation Menu with {% nav %} in Twig\nDESCRIPTION: This snippet demonstrates how to use the {% nav %} tag to create a hierarchical navigation menu for entries in a Structure section. It shows how to set up the loop, display entry titles and URLs, and handle child entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/nav.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries.section('pages') %}\n\n<ul id=\"nav\">\n  {% nav entry in entries %}\n    <li>\n      <a href=\"{{ entry.url }}\">{{ entry.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Applying the markdown Filter to Format Text in Twig\nDESCRIPTION: Example of using the markdown filter to convert Markdown-formatted text into HTML, showing how filters transform values in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set text = \"I **really** love Tom Petty.\" %}\n{{ text|markdown }}\n{# Output: <p>I <strong>really</strong> love Tom Petty.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Checkbox Field Data in Craft CMS\nDESCRIPTION: Examples of accessing Checkboxes field data from an element using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Prepending HTML Content with prepend Filter in Twig\nDESCRIPTION: The prepend filter adds HTML to the beginning of another element. It supports three modes: default (always prepend), 'keep' (only prepend if element type doesn't exist), and 'replace' (replace existing element of same type).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'keep') }}\n{# Output: <div><p>Ipsum</p></div> #}\n\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'replace') }}\n{# Output: <div><p>Lorem</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Using Position Select Field with Switch Statement in Twig\nDESCRIPTION: This snippet illustrates how to use a Position Select field's value in a switch statement within a Twig template for more complex conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/position-select-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% switch entry.positionSelectFieldHandle %}\n  {% case 'left' %}\n    {# ... #}\n  {% case 'right' %}\n    {# ... #}\n  {% case 'center' %}\n    {# ... #}\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Setting allowAdminChanges in Craft CMS Configuration\nDESCRIPTION: Example of setting the allowAdminChanges configuration option to false in the Craft CMS general configuration file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'allowAdminChanges' => false,\n];\n```\n\n----------------------------------------\n\nTITLE: Using Address Repository for Country Data in Twig\nDESCRIPTION: Illustrates how to use the address repository to fetch country data and access various properties of the Country model in earlier versions of Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Load all country data: #}\n{% set repo = craft.app.addresses.getCountryRepository() %}\n\n{# Get just the selected country: #}\n{% set country = repo.get(entry.country) %}\n\n{# Use properties of the country model: #}\n{{ country.name }} ({{ country.threeLetterCode }})\n```\n\n----------------------------------------\n\nTITLE: Handling After Expire Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes when a subscription expires. Useful for cleanup or notification purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_31\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_AFTER_EXPIRE_SUBSCRIPTION, function(SubscriptionEvent $e) {\n    // Do something about it - perhaps make a call to third party service to de-authorize a user.\n});\n```\n\n----------------------------------------\n\nTITLE: Widget Asset Registration\nDESCRIPTION: PHP code showing how to register JavaScript assets and initialize widget instances in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/widget-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nCraft::$app->getView()->registerAssetBundle(MyAsset::class);\nCraft::$app->getView()->registerJs(\"new Craft.MyWidget({$this->id});\");\n```\n\n----------------------------------------\n\nTITLE: Using a Variable for Categories Field in Twig\nDESCRIPTION: Example of storing the Categories field result in a variable for cleaner template code when referencing it multiple times. Includes checking if categories exist and iterating through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = entry.categoriesFieldHandle %}\n\n{% if categories | length %}\n\n  <h3>Some great categories</h3>\n  {% nav category in categories %}\n    ...\n  {% endnav %}\n\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Verbose Log Output in Development Mode (Craft CMS)\nDESCRIPTION: Example of verbose, multi-line log output when devMode is enabled in Craft CMS. Includes timestamp, log level, message, and context information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n[2022-04-15T17:00:11+00:00] web.INFO: Opening DB connection: pgsql:host=db;dbname=db;port=5432 {\"trace\":[],\"memory\":9646256,\"category\":\"yii\\\\db\\\\Connection::open\"}\n[2022-04-15T17:00:11+00:00] web.WARNING: Some warning… {\"trace\":[],\"memory\":13577888,\"category\":\"application\"}\n[2022-04-15T17:00:11+00:00] web.INFO: Request context\n$_GET = []\n\n$_POST = []\n[…truncated] {\"ip\":\"172.18.0.1\"}\n```\n\n----------------------------------------\n\nTITLE: Displaying Order Notices in Twig\nDESCRIPTION: Shows how to output an order notice as a string in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% set notice = order.getFirstNotice('salePrice') %}\n<p>{{ notice }}</p>\n{# result: <p>The price of x has changed</p> #}\n```\n\n----------------------------------------\n\nTITLE: Creating a Country Selection Form in Twig\nDESCRIPTION: Demonstrates how to create a front-end form for selecting a country, including populating a dropdown with all countries and handling form submission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/country-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.app.addresses.getCountryRepository().getAll() %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n  {{ hiddenInput('canonicalId', entry.id) }}\n\n  {{ input('text', 'title', entry.title) }}\n\n  <select name=\"fields[toCountry]\">\n    {% for country in countries %}\n      {{ tag('option', {\n        text: country.name,\n        value: country.countryCode,\n        selected: country.countryCode == entry.toCountry,\n      }) }}\n    {% endfor %}\n  </select>\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Correct Usage of Cache Tags with Template Inheritance\nDESCRIPTION: Example showing proper implementation of cache tags inside block tags in a template that extends another.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Good: #}\n\n{% extends \"_layout\" %}\n{% block \"content\" %}\n  {% cache %}\n    ...\n  {% endcache %}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Address Form with Country Dropdown\nDESCRIPTION: Shows how to build a form for updating a shipping address with a country dropdown populated from the store's available countries list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('text', 'shippingAddress[fullName]', shippingAddress.fullName) }}\n\n  <select name=\"shippingAddress[countryCode]\">\n    {% for code, name in craft.commerce.getStore().getStore().getCountriesList() %}\n      {{ tag('option', {\n        value: code,\n        text: name,\n        selected: code == shippingAddress.countryCode,\n      }) }}\n    {% endfor %}\n  </select>\n\n  {# ... #}\n\n  <button>Save Shipping Address</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Basic User Iteration with User Group Filter in Twig\nDESCRIPTION: A basic example of how to loop through users belonging to the 'authors' group and display links to their profiles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.users.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for author in craft.users.group('authors') %}\n  <li><a href=\"{{ url('authors/'~author.id) }}\">{{ author.name }}</a></li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Fetching CSRF Token and Submitting Ajax Request in JavaScript\nDESCRIPTION: This snippet demonstrates how to fetch a CSRF token using the users/session-info action and then use it to submit an Ajax request to save user data. It uses the fetch API and handles the response as JSON.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nconst getSessionInfo = function() {\n  return fetch('/actions/users/session-info', {\n    headers: {\n      'Accept': 'application/json',\n    },\n  })\n  .then(response => response.json());\n};\n\ngetSessionInfo()\n  .then(session => {\n    const params = new FormData();\n\n    params.append('userId', session.id);\n    params.append('fullName', 'Tony Tiger');\n\n    return fetch('/actions/users/save-user', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'X-CSRF-Token': session.csrfTokenValue,\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      body: params,\n    })\n    .then(response => response.json())\n    .then(result => console.log(result));\n  });\n```\n\n----------------------------------------\n\nTITLE: Using className Function in Twig\nDESCRIPTION: The className function returns the fully qualified class name of a given object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set class = className(entry) %}\n{# Result: 'craft\\\\elements\\\\Entry' #}\n```\n\n----------------------------------------\n\nTITLE: Creating Objects with create() Function in Twig\nDESCRIPTION: The create() function creates a new object instance based on a given class name or object configuration, leveraging Yii::createObject() functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{# Pass in a class name #}\n{% set cookie = create('yii\\\\web\\\\Cookie') %}\n\n{# Or a full object configuration hash #}\n{% set cookie = create({\n  class: 'yii\\\\web\\\\cookie',\n  name: 'foo',\n  value: 'bar'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Implementing createSettingsModel() Method in Craft CMS Plugin Class\nDESCRIPTION: Adds the createSettingsModel() method to the main plugin class to return a new instance of the settings model. This method is required for plugins that have settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    protected function createSettingsModel()\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Sub-navigation Tabs in Twig\nDESCRIPTION: Demonstrates how to set sub-navigation tabs for a plugin's control panel section using Twig variables in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tabs = {\n  recent: { label: \"Recent\"|t, url: url('cocktailrecipes') },\n  new:    { label: \"Add a New Recipe\"|t, url: url('cocktailrecipes/new') }\n} %}\n```\n\n----------------------------------------\n\nTITLE: Handling After Save Payment Source Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a payment source is saved. Useful for post-save processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\PaymentSourceEvent;\nuse craft\\commerce\\services\\PaymentSources;\nuse yii\\base\\Event;\n\nEvent::on(PaymentSources::class, PaymentSources::EVENT_BEFORE_SAVE_PAYMENT_SOURCE, function(PaymentSourceEvent $e) {\n    // Do something - perhaps settle any outstanding balance\n});\n```\n\n----------------------------------------\n\nTITLE: Updating Nitro CLI and Docker Containers via Self-Update\nDESCRIPTION: Use Nitro's self-update command to update the CLI, then use the updated CLI's update command to bring Nitro's Docker containers to their latest versions. This method is for manual or script installations on macOS, Linux, and Windows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nnitro self-update\nnitro update\n```\n\n----------------------------------------\n\nTITLE: Converting String to snake_case with snake Filter in Twig\nDESCRIPTION: Demonstrates the use of the snake filter to format a string in snake_case.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_37\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|snake }}\n{# Output: foo_bar #}\n```\n\n----------------------------------------\n\nTITLE: Element Identity Comparison in Twig\nDESCRIPTION: Examples of comparing elements and handling related entries in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set category = entry.topic.one() %}\n{% set relatedPosts = craft.entries\n  .section('blog')\n  .relatedTo(category)\n  .all() %}\n\n{% for post in relatedPosts %}\n  {% if post is not same as(entry) %}\n    {# Whoops! Our original post is still output in the related items! #}\n  {% endif %}\n{% endfor %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.id == relatedEntry.id %}\n  {# Same entry! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking if Any Options are Selected in Twig\nDESCRIPTION: Shows how to check if any options are selected in a Multi-select field using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n```\n\n----------------------------------------\n\nTITLE: CPU Priority Queue Worker Command\nDESCRIPTION: Command to run queue worker with lower CPU priority using nice command. Sets process priority to 10 to ensure web requests are prioritized.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n/usr/bin/nice -n 10 /usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\n```\n\n----------------------------------------\n\nTITLE: Module Bootstrap Configuration in PHP\nDESCRIPTION: Configuration snippet for bootstrapping a module in Craft CMS config/app.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/commands.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'bootstrap' => ['acme'],\n    'modules' => [\n        'acme' => acme\\Module::class,\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering Site Template Roots in Craft CMS using PHP\nDESCRIPTION: Example of registering a custom template root directory using the EVENT_REGISTER_SITE_TEMPLATE_ROOTS event in Craft CMS. This allows making templates accessible from a predefined path prefix, such as accessing utility macros from '_utils/macros.twig'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/template-roots.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterTemplateRootsEvent;\nuse craft\\web\\View;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        View::class,\n        View::EVENT_REGISTER_SITE_TEMPLATE_ROOTS,\n        function(RegisterTemplateRootsEvent $event) {\n            $event->roots['_utils'] = __DIR__ . '/template-utils';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching a Cart with Axios\nDESCRIPTION: Example of retrieving cart data asynchronously using Axios. Includes proper CSRF token handling and outputs the response to the console.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js\"></script>\n<script>\naxios.get('', {\n  params: {\n    '{{ craft.config.csrfTokenName|e('js') }}': '{{ craft.request.csrfToken|e('js') }}',\n    action: 'commerce/cart/get-cart'\n  }\n}).then((response) => {\n  console.log(response.data);\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Array Intersection Filter Usage\nDESCRIPTION: Shows how to find common values between two arrays using the intersect filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set ownedIngredients = [\n  'vodka',\n  'gin',\n  'triple sec',\n  'tonic',\n  'grapefruit juice'\n] %}\n\n{% set longIslandIcedTeaIngredients = [\n  'vodka',\n  'tequila',\n  'rum',\n  'gin',\n  'triple sec',\n  'sweet and sour mix',\n  'Coke'\n] %}\n\n{% set ownedLongIslandIcedTeaIngredients =\n  ownedIngredients|intersect(longIslandIcedTeaIngredients)\n%}\n```\n\n----------------------------------------\n\nTITLE: Using beginBody Function in Twig\nDESCRIPTION: The beginBody function outputs scripts and styles registered for the \"begin body\" position in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<body>\n  {{ beginBody() }}\n\n  <h1>{{ page.name }}</h1>\n  {{ page.body }}\n</body>\n```\n\n----------------------------------------\n\nTITLE: Launching Craft CMS Project in Web Browser\nDESCRIPTION: DDEV command to open the newly created Craft CMS project in a web browser. This allows you to view the default welcome template of your Craft installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/README.md#2025-04-22_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nddev launch\n```\n\n----------------------------------------\n\nTITLE: Fetching Section by Handle in Craft CMS using Twig\nDESCRIPTION: This code shows how to use the getSectionByHandle() method to retrieve a specific section by its handle. It first gets the handle from the URL segment and then uses it to fetch the section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set handle = craft.request.getSegment(3) %}\n{% set section = craft.sections.getSectionByHandle(handle) %}\n```\n\n----------------------------------------\n\nTITLE: Using push Filter to Append Items to an Array in Twig\nDESCRIPTION: Demonstrates how to use the push filter to append one or more items to the end of an array, returning the new array with the added elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|push('bar', 'baz') %}\n{# Result: ['foo', 'bar', 'baz'] #}\n```\n\n----------------------------------------\n\nTITLE: Widget JavaScript Implementation\nDESCRIPTION: JavaScript code for implementing widget functionality with Garnish.Base extension and instance initialization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/widget-types.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n(function() {\n    Craft.MyWidget = Garnish.Base.extend({\n        $widget: null,\n        init: function(id) {\n            this.$widget = document.getElementById('widget' + id);\n\n            // ...\n        },\n    });\n})()\n```\n\n----------------------------------------\n\nTITLE: Testing Project Config Changes via CLI\nDESCRIPTION: Command line example for testing project config changes by directly setting configuration values using the Craft CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/set myPlugin.productTypes.689fcbe5-9433-4fb0-bc88-d89fdd9bb2df.name \"Widgets\"\n```\n\n----------------------------------------\n\nTITLE: Using First-Class Callable Syntax for Event Handlers in PHP\nDESCRIPTION: Example demonstrating the use of PHP's native first-class callable syntax for event handlers. This is a more concise way to reference a method as an event handler.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/events.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nEvent::on(\n    Users::class,\n    Users::EVENT_AFTER_ACTIVATE_USER,\n    MyPlugin::getInstance()->getMyService()->someMethod(...),\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring composer.json for a Craft CMS Plugin\nDESCRIPTION: Template for a plugin's composer.json file, defining package information, dependencies, autoloading configuration, and Craft-specific metadata in the 'extra' section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"name\": \"package/name\",\n  \"description\": \"Your plugin's package description\",\n  \"type\": \"craft-plugin\",\n  \"keywords\": [\"some\", \"keywords\", \"here\"],\n  \"license\": \"MIT\",\n  \"authors\": [\n    {\n      \"name\": \"Developer Name\",\n      \"homepage\": \"https://developer-website.tld\"\n    }\n  ],\n  \"support\": {\n    \"email\": \"email@developer-website.tld\",\n    \"issues\": \"https://github.com/developer/repo/issues?state=open\",\n    \"source\": \"https://github.com/developer/repo\",\n    \"docs\": \"https://github.com/developer/repo/blob/master/README.md\"\n  },\n  \"require\": {\n    \"craftcms/cms\": \"^3.1.0\"\n  },\n  \"autoload\": {\n    \"psr-4\": {\n      \"namespace\\\\prefix\\\\\": \"src/\"\n    }\n  },\n  \"extra\": {\n    \"name\": \"Plugin Name\",\n    \"handle\": \"my-plugin-handle\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Using Default Filter and Null Coalesce Operator in Twig\nDESCRIPTION: Demonstrates the use of the 'default' filter and null coalesce operator in Twig to provide fallback values for potentially undefined or empty variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = \"tip tip--#{style|default('plain')}\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = \"tip tip--#{style ?? 'plain'}\" %}\n```\n\n----------------------------------------\n\nTITLE: Handling Entry Status Changes with Event Listener in PHP\nDESCRIPTION: This PHP snippet demonstrates how to listen for entry save events and check for status changes, useful when using static statuses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/entries.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Event;\nuse craft\\elements\\Entry;\nuse craft\\events\\ModelEvent;\nuse craft\\helpers\\ElementHelper;\n\nEvent::on(\n    Entry::class,\n    Entry::EVENT_AFTER_SAVE,\n    function (ModelEvent $event) {\n        /** @var Entry $entry */\n        $entry = $event->sender;\n\n        // Make sure we're dealing with a canonical entry, and that there was indeed a status change:\n        if (\n            !ElementHelper::isDraftOrRevision($entry) &&\n            $entry->getStatus() !== $entry->oldStatus\n        ) {\n            if ($entry->getStatus() === Entry::STATUS_LIVE) {\n                // The entry just moved into the \"live\" status!\n            } elseif ($entry->oldStatus === Entry::STATUS_LIVE) {\n                // The entry *was* live, but isn't any more!\n            }\n        }\n    });\n```\n\n----------------------------------------\n\nTITLE: Using Date/Time Array with date() Function\nDESCRIPTION: Craft extends Twig's date() function to support passing a date/time array with date, timezone, and time properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set myDate = {\n  date: '2021-01-15',\n  timezone: 'America/Los_Angeles',\n  time: '10:57',\n} %}\n\n{% if now > date(myDate) %}\n  {# today is past January 15, 2021 #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using the 'resource' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'resource' test to check if a variable is a PHP resource using PHP's is_resource() method. Shows examples with an asset stream and a site URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getStream() is resource ? 'true' : 'false' }}\n{# result: true #}\n\n{{ siteUrl is resource ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Querying Entries by Country in Twig\nDESCRIPTION: Shows how to query for entries based on country field values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/country-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set letters = craft.entries\n    .section('letters')\n    .fromCountry('FR')\n    .toCountry('GB')\n    .dateSent()\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Application Configuration\nDESCRIPTION: Configuration for registering the module in Craft CMS application config file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/module-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'modules' => [\n        'foo' => foo\\Module::class,\n    ],\n    'bootstrap' => [\n        'foo',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript in Head\nDESCRIPTION: Shows how to use the POS_HEAD constant to register JavaScript in the <head> element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Where am I?!');\n{% endset %}\n\n{% do view.registerJs(js, POS_HEAD) %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Base URI for Structure Sections\nDESCRIPTION: Twig template that sets a default base URI for top-level entries while maintaining hierarchy for nested entries using null coalescing operator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{parent.uri ?? 'earth'}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Adding Previous Cart Items Form\nDESCRIPTION: Form implementation for adding items from previous carts to the current cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n<h2>Previous Cart Items</h2>\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% for oldCart in oldCarts %}\n    {% for lineItem in oldCart.lineItems %}\n      {{ lineItem.description }}\n      <label>\n        {{ input('checkbox', 'purchasables[][id]', lineItem.getPurchasable().id) }}\n        Add to cart\n      </label>\n    {% endfor %}\n  {% endfor %}\n\n  <button type=\"submit\">Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions in Twig\nDESCRIPTION: Demonstrates how to check if the current user has a specific permission using the 'can' method in a Twig template. This example checks for control panel access.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/user-management.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser.can('accessCp') %}\n  <a href=\"{{ cpUrl() }}\">Visit the Control Panel</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Directory Navigation Commands Cross-Platform\nDESCRIPTION: Shows equivalent commands for printing working directory across operating systems. Uses pwd for macOS/Linux and cd for Windows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/environment/terminal.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npwd\n```\n\nLANGUAGE: batch\nCODE:\n```\ncd\n```\n\n----------------------------------------\n\nTITLE: Configuring Site Name in PHP\nDESCRIPTION: Sets multilingual site names using an array that maps locale IDs to locale-specific strings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n'siteName' => array(\n    'en' => 'On the Rocks',\n    'es' => 'Con Hielo'\n),\n```\n\n----------------------------------------\n\nTITLE: Enabling PATH_INFO for URL Generation in Craft CMS (PHP)\nDESCRIPTION: Sets the usePathInfo config option to true, instructing Craft to use PATH_INFO instead of query string parameters when generating URLs that include index.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_38\n\nLANGUAGE: php\nCODE:\n```\n'usePathInfo' => true,\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_SECRETS_PATH for Custom Secrets File Location\nDESCRIPTION: Configures CRAFT_SECRETS_PATH to specify the location of a secrets file that contains sensitive values that should not be loaded into the environment. This example points to a secrets.php file in the parent directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// Check the `secrets.php` file next to this script for sensitive values:\ndefine('CRAFT_SECRETS_PATH', dirname(__DIR__) . 'secrets.php');\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_SITE in PHP to Force Specific Site\nDESCRIPTION: Defines the CRAFT_SITE constant to explicitly specify which site Craft should serve, overriding the automatic detection based on the requested URL. This example forces the German site to be displayed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Show the German site\ndefine('CRAFT_SITE', 'de');\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Exporter Types in PHP\nDESCRIPTION: Example showing how to register a custom element exporter type using event handling in a plugin initialization method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-exporter-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\base\\Element;\nuse craft\\elements\\Entry;\nuse craft\\events\\RegisterElementExportersEvent;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Entry::class,\n            Element::EVENT_REGISTER_EXPORTERS,\n            function(RegisterElementExportersEvent $event) {\n                $event->exporters[] = MyExporter::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing registerUserPermissions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers custom user permissions for the system. Returns an array of permission definitions with labels that can be assigned to user groups in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic function registerUserPermissions()\n{\n    return array(\n        'drinkAlcohol' => array('label' => Craft::t('Drink alcohol')),\n        'stayUpLate' => array('label' => Craft::t('Stay up late')),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Referencing Craft Commerce Event in Plugin Development\nDESCRIPTION: This snippet shows how to reference the EVENT_BEFORE_SEND_MAIL event in Craft Commerce plugin development. It's used to potentially suppress email sending based on custom logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\nEVENT_BEFORE_SEND_MAIL\n```\n\n----------------------------------------\n\nTITLE: Querying Elements by Country in Twig\nDESCRIPTION: Shows how to query for elements based on country field values using two-letter country codes in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set letters = craft.entries\n    .section('letters')\n    .fromCountry('FR')\n    .toCountry('GB')\n    .orderBy('dateSent DESC')\n    .all() %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Countries by Tax Zone ID in PHP\nDESCRIPTION: Shows how to retrieve countries within a specific tax zone using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllCountriesByTaxZoneId($taxZoneId);\n\nforeach ($countries as $country) {\n    // $country->id\n    // $country->name\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Table Field Data with Twig in Craft CMS\nDESCRIPTION: This Twig code snippet demonstrates how to render data from a Table field in a Craft CMS template. It checks if the field has any rows, then iterates through them to display the values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/table-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n<h3>Whiskeys</h3>\n<ul>\n  {% for row in entry.myFieldHandle %}\n    <li>{{ row.whiskey }} - {{ row.description }} - {{ row.proof }}</li>\n  {% endfor %}\n</ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Lightswitch Fields in Twig and PHP\nDESCRIPTION: Demonstrates how to query for elements with enabled Lightswitch fields using both Twig and PHP. The query filters results based on the Lightswitch field data using a parameter named after the field's handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/lightswitch-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(true)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(true)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Rendering Plain Text Field with Markdown Filter in Twig\nDESCRIPTION: This snippet demonstrates how to render a user's biography using a Plain Text field with conditional logic. It checks if the bio exists, then displays it with the Markdown filter applied.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plain-text-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.bio %}\n  <h3>Bio</h3>\n  {{ user.bio | markdown }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Zip Code Condition Formula with Prefix Matching in Twig\nDESCRIPTION: A Twig expression that matches zip codes starting with specific prefixes. This formula returns true if the zip code starts with '60' or '70', enabling targeted shipping rules based on zip code ranges.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/shipping.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nzipCode[0:2] == '60' or zipCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Uninstalling a Plugin via CLI in Craft CMS\nDESCRIPTION: This command demonstrates how to uninstall a Craft CMS plugin using the command-line interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/uninstall commerce\n```\n\n----------------------------------------\n\nTITLE: Creating a Partial Template for Inclusion in Twig\nDESCRIPTION: A reusable tip component template that displays a tip message. It expects a tipText variable to be passed when included.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  <p>{{ tipText }}</p>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Creating Basic Controller File Structure\nDESCRIPTION: Demonstrates the file naming convention and basic structure for a Craft CMS plugin controller.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/controllers.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientsController extends BaseController\n{\n    public function actionSaveIngredient()\n    {\n        // ...\n    }\n\n    public function actionDeleteIngredient()\n    {\n        // ...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving All States as List in Craft Commerce\nDESCRIPTION: Gets all states defined in the system as a key-value array where key is state ID and value is state name. Returns data in format [1:'Australian Capital Territory', 2:'New South Wales'].\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% set states = craft.commerce.states.allStatesAsList %}\n<select>\n{% for id, stateName in states %}\n  <option value=\"{{ id }}\">\n    {{- stateName -}}\n  </option>\n{% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->getAllStatesAsList);\n\nforeach ($states as $id => $stateName) {\n    // $id\n    // $stateName\n}\n```\n\n----------------------------------------\n\nTITLE: Setting the Register User Flag on Cart Update in Twig\nDESCRIPTION: This form allows customers to opt-in to user registration during checkout by setting the registerUserOnOrderComplete flag. It uses the commerce/cart/update-cart action to update the cart with this preference.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/update-cart-customer.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <label for=\"registerUserOnOrderComplete\">\n    <input type=\"checkbox\"\n      id=\"registerUserOnOrderComplete\"\n      name=\"registerUserOnOrderComplete\"\n      value=\"1\"\n    /> Register me for a user account\n  </label>\n  <button type=\"submit\">Update Cart</button>\n<form>\n```\n\n----------------------------------------\n\nTITLE: Module Directory Structure Example\nDESCRIPTION: Example of the basic file structure for a Craft CMS module showing the recommended directory layout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/module-guide.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nmy-project/\n├── modules/\n│   └── foo/\n│       └── Module.php\n├── templates/\n└── ...\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Mutex Driver in Craft CMS\nDESCRIPTION: Example of configuring a custom file-based mutex driver by overriding the mutex component's nested mutex property. Demonstrates setting file and directory permissions based on general config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'mutex' => function() {\n            $generalConfig = Craft::$app->getConfig()->getGeneral();\n\n            $config = [\n                'class' => craft\\mutex\\Mutex::class,\n                // Alter just this nested property of the main mutex component:\n                'mutex' => [\n                    'class' => yii\\mutex\\FileMutex::class,\n                    'fileMode' => $generalConfig->defaultFileMode,\n                    'dirMode' => $generalConfig->defaultDirMode,\n                ],\n            ];\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n    // ...\n];\n```\n\n----------------------------------------\n\nTITLE: Sample JSON Response for __typename Query\nDESCRIPTION: The JSON response for the __typename introspection query, showing the type names for the Query itself, an entry, a user, and a custom widget. This demonstrates how GraphQL represents different entity types in the response.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_9\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"__typename\": \"Query\",\n    \"entry\": {\n      \"__typename\": \"blog_blog_Entry\"\n    },\n    \"user\": {\n      \"__typename\": \"User\"\n    },\n    \"widget\": {\n      \"__typename\": \"Widget\"\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Zero-Padding Sequential Numbers in Craft CMS\nDESCRIPTION: Generates a zero-padded sequential number to a specified length. Useful for creating formatted identifiers like order numbers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_39\n\nLANGUAGE: twig\nCODE:\n```\n{{ now|date('Y') ~ '-' ~ seq('orderNumber:' ~ now|date('Y'), 5) }}\n{# Output: 2018-00001 #}\n```\n\n----------------------------------------\n\nTITLE: Product Type URL Routing in PHP\nDESCRIPTION: Configures URL routing rules for product type pages using PHP array configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'shop/<productType:{slug}>' => ['template' => '_shop/product-type'],\n];\n```\n\n----------------------------------------\n\nTITLE: Updated Element Query Syntax\nDESCRIPTION: Comparison of old ElementCriteriaModel syntax with new Element Queries in Craft 3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// Old:\n$criteria = craft()->elements->getCriteria(ElementType::Entry);\n$criteria->section = 'news';\n$entries = $criteria->find();\n\n// New:\nuse craft\\elements\\Entry;\n\n$entries = Entry::find()\n    ->section('news')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Configuring Translation Category via Application Config\nDESCRIPTION: Demonstrates how to add a translation category through the application configuration file. This approach is used when you have access to modify the application config directly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/translation-categories.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// -- config/app.php --\nreturn [\n    'components' => [\n        'i18n' => [\n            'translations' => [\n                'my-category' => [\n                    'class' => craft\\i18n\\PhpMessageSource::class,\n                    'sourceLanguage' => 'en',\n                    'basePath' => dirname(__DIR__) . '/translations',\n                    'allowOverrides' => true,\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Updating URL Field Usage in PHP for Craft CMS 5\nDESCRIPTION: Demonstrates how to update PHP code that uses URL fields, which are now converted to Link fields in Craft CMS 5. Shows changes to type hints and accessing field data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\n\nclass MyHelper\n{\n    public static function getUrl(Element $element, string $fieldHandle): string\n    {\n        return $element->$fieldHandle;\n    }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\fields\\data\\LinkData;\n\nclass MyHelper\n{\n    public static function getUrl(Element $element, string $fieldHandle): LinkData\n    {\n        // The return type is now an object instead of a string!\n        return $element->$fieldHandle;\n    }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\fields\\data\\LinkData;\n\nclass MyHelper\n{\n    public static function getUrl(Element $element, string $fieldHandle): string\n    {\n        // The signature can stay the same if you return a specific property:\n        return $element->$fieldHandle->url;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Order Before Completion\nDESCRIPTION: This event fires before an order is completed, allowing for pre-completion tasks or validation. It provides access to the order object being completed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Order;\nuse yii\\base\\Event;\n\nEvent::on(Order::class, Order::EVENT_BEFORE_COMPLETE_ORDER, function(Event $e) {\n    // @var Order $order\n    $order = $e->sender;\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Getting Children of a Category in Twig\nDESCRIPTION: Example of calling a category's getChildren() function to get an ElementCriteriaModel with descendantOf and descendantDist parameters pre-populated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set children = category.getChildren() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Element Properties in PHP\nDESCRIPTION: Shows how to access an element's built-in properties such as the title field. Element properties can be accessed using standard object property syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$title = $entry->title;\n```\n\n----------------------------------------\n\nTITLE: Referencing Templates with Twig Include Tag\nDESCRIPTION: Demonstrates how to include other templates using Twig's include tag. This is one of several ways to reference template paths in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating-overview.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% include \"foo/bar\" %}\n```\n\n----------------------------------------\n\nTITLE: Uninstalling a Plugin via Composer in Craft CMS\nDESCRIPTION: This code snippet shows how to remove a Craft CMS plugin package using Composer after uninstalling it from the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer remove craftcms/commerce\n```\n\n----------------------------------------\n\nTITLE: Getting All Sections in Craft CMS Twig\nDESCRIPTION: Shows how to retrieve all sections for the current site using the craft.app.sections service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set sections = craft.app.sections.getAllSections() %}\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Configuration with JSON\nDESCRIPTION: This JSON configuration for HTML Purifier allows only paragraph and anchor elements, with nofollow set on all anchors. It's used with the purify filter for sanitizing user-generated content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_39\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"HTML.AllowedElements\": \"p, a\",\n  \"HTML.Nofollow\": true,\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Products by Type in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve products of a specific type using the craft.products service in a Twig template. The example shows querying for products with the 'clothes' handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/product-types.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothes = craft.products.type('clothes').all() %}\n```\n\n----------------------------------------\n\nTITLE: String Replacement with replace Filter in Twig\nDESCRIPTION: The replace filter allows replacing parts of a string. It can use a mapping array for multiple replacements, single value replacement, or regular expressions for pattern matching.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% set str = 'Hello, FIRST LAST' %}\n\n{{ str|replace({\n  FIRST: currentUser.firstName,\n  LAST:  currentUser.lastName\n}) }}\n\n{% set str = 'Hello, NAME' %}\n\n{{ str|replace('NAME', currentUser.name) }}\n\n{{ tag.title|lower|replace('/[^\\\\w]+/', '-') }}\n```\n\n----------------------------------------\n\nTITLE: Basic commerceCurrency Filter Usage in Craft Commerce\nDESCRIPTION: Demonstrates various ways to use the commerceCurrency filter with different parameters to format and convert currency values. Examples show formatting with base currency, converting between currencies, disabling formatting, and stripping trailing zeros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/twig-filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# `USD` #}\n{% set baseCurrency = cart.currency %}\n\n{# `AUD`, exchange rate 1.3 #}\n{% set paymentCurrency = cart.paymentCurrency %}\n\n{{ 10|commerceCurrency(baseCurrency) }} {# Output: $10.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=false\n) }} {# Output: 13 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true,\n  stripZeros=true\n) }} {# Output: A$13 #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Country Code in Twig\nDESCRIPTION: Demonstrates how to check if a country is selected and display its two-letter code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/country-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.country is not empty %}\n  Country code: {{ entry.country }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Combined Address Saving in Craft Commerce - Twig Template\nDESCRIPTION: Demonstrates how to implement combined billing and shipping address saving using the saveAddressesOnOrderComplete parameter. Includes validation for existing addresses and user authentication.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {% if currentUser and ((cart.billingAddressId and not cart.sourceBillingAddressId) or (cart.shippingAddressId and not cart.sourceShippingAddressId)) %}\n    {{ input('checkbox', 'saveAddressesOnOrderComplete', 1, {checked: cart.saveBillingAddressOnOrderComplete and cart.saveShippingAddressOnOrderComplete}) }}\n  {% endif %}\n\n  {# ... #}\n\n  <button>Save Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Getting published file URL from a directory of assets\nDESCRIPTION: PHP code for publishing a directory of files and getting the URL for a specific file within that directory using Craft's AssetManager.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/icons',\n    true,\n    'shaker.svg'\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Global Caching in Craft CMS Templates\nDESCRIPTION: Example of using the 'globally' parameter to cache content site-wide (for the current locale) rather than on a per-URL basis.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% cache globally %}\n```\n\n----------------------------------------\n\nTITLE: Installing CKEditor Plugin via Composer in Craft CMS\nDESCRIPTION: Command to install the CKEditor plugin for rich text editing in Craft CMS using Composer through DDEV.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nddev composer require craftcms/ckeditor -w\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Instance in Tests\nDESCRIPTION: Method for accessing a plugin instance within test suites after registration and installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/plugins-and-modules.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nMyPlugin::getInstance()\n```\n\n----------------------------------------\n\nTITLE: Getting nth Element with nth() Method in Twig\nDESCRIPTION: Example of using the nth() method to get the second entry (index 1) from the features section, with a null check before using the result.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set secondEntry = craft.entries.section('features').nth(1) %}\n{# `secondEntry` is either an EntryModel or null #}\n\n{% if secondEntry %}\n  <a href=\"{{ secondEntry.url }}\" title=\"{{ secondEntry.title }}\">{{ secondEntry.title }}</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Testing Countable Type in Twig\nDESCRIPTION: Shows how to check if a value is countable using PHP's is_countable() method or array/Countable interface check for PHP < 7.3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ craft.entries() is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ ['apple', 'orange'] is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'dracula' is countable ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Searching for Images in Craft CMS\nDESCRIPTION: Shows how to search specifically for image assets using the 'kind' attribute across different implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set images = craft.assets()\n  .search('kind:image')\n  .all() %}\n```\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  images: assets(search: \"kind:image\") {\n    title\n  }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n$images = \\craft\\elements\\Asset::find()\n    ->search('kind:image')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Using Conditionals in Twig\nDESCRIPTION: Examples of conditional logic in Twig templates, including if, else, and elseif statements to control template output based on various conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <p>Hello, {{ currentUser.friendlyName }}</p>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"/logout\">Logout</a>\n{% else %}\n  <a href=\"/login\">Login</a>\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set hour = now|date('G') %}\n\n{% if hour < 12 %}\n  <p>Good morning, {{ currentUser.friendlyName }}</p>\n{% elseif hour < 17 %}\n  <p>Good afternoon, {{ currentUser.friendlyName }}</p>\n{% else %}\n  <p>Good evening, {{ currentUser.friendlyName }}</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Updating Twig Block Checks\nDESCRIPTION: Demonstrates the correct way to check for block existence in Twig 2, replacing the 'not empty' check with 'defined'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if block('foo') is not empty %}\n  {{ block('foo') }}\n{% endif %}\n\n{% if block('foo') is defined %}\n  {{ block('foo') }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Handling Behavior Conflicts with SoftDeleteTrait in PHP\nDESCRIPTION: Shows how to rename and incorporate the SoftDeleteTrait's behaviors method when the Active Record class already has its own behaviors method. This allows combining the soft delete behaviors with existing behaviors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/soft-deletes.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\db\\ActiveRecord;\nuse craft\\db\\SoftDeleteTrait;\n\nclass MyRecord extends ActiveRecord\n{\n    use SoftDeleteTrait {\n        behaviors as softDeleteBehaviors;\n    }\n\n    public function behaviors(): array\n    {\n        $behaviors = $this->softDeleteBehaviors();\n        $behaviors['myBehavior'] = MyBehavior::class;\n        return $behaviors;\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Entry Query Arguments Schema for Craft CMS GraphQL API\nDESCRIPTION: Complete schema of available arguments for the entry query in Craft CMS's GraphQL API. Includes arguments for filtering by ID, status, site, relationships, structure position, and entry-specific attributes like section and type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_12\n\nLANGUAGE: graphql\nCODE:\n```\ntype Query {\n  entry(\n    id: [QueryArgument]\n    uid: [String]\n    drafts: Boolean\n    draftOf: QueryArgument\n    draftId: Int\n    draftCreator: Int\n    provisionalDrafts: Boolean\n    revisions: Boolean\n    revisionOf: QueryArgument\n    revisionId: Int\n    revisionCreator: Int\n    status: [String]\n    archived: Boolean\n    trashed: Boolean\n    site: [String]\n    siteId: [QueryArgument]\n    unique: Boolean\n    preferSites: [QueryArgument]\n    enabledForSite: Boolean\n    title: [String]\n    slug: [String]\n    uri: [String]\n    search: String\n    relatedTo: [QueryArgument]\n    relatedToAssets: [AssetCriteriaInput]\n    relatedToEntries: [EntryCriteriaInput]\n    relatedToUsers: [UserCriteriaInput]\n    relatedToCategories: [CategoryCriteriaInput]\n    relatedToTags: [TagCriteriaInput]\n    relatedToAll: [QueryArgument]\n    ref: [String]\n    fixedOrder: Boolean\n    inReverse: Boolean\n    dateCreated: [String]\n    dateUpdated: [String]\n    offset: Int\n    limit: Int\n    orderBy: String\n    siteSettingsId: [QueryArgument]\n    withStructure: Boolean\n    structureId: Int\n    level: Int\n    hasDescendants: Boolean\n    ancestorOf: Int\n    ancestorDist: Int\n    descendantOf: Int\n    descendantDist: Int\n    leaves: Boolean\n    nextSiblingOf: Int\n    prevSiblingOf: Int\n    positionedAfter: Int\n    positionedBefore: Int\n    editable: Boolean\n    section: [String]\n    sectionId: [QueryArgument]\n    type: [String]\n    typeId: [QueryArgument]\n    authorId: [QueryArgument]\n    authorGroup: [String]\n    authorGroupId: [QueryArgument]\n    postDate: [String]\n    before: String\n    after: String\n    expiryDate: [String]\n  ): Entry\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Line Item Creation from Purchasable\nDESCRIPTION: This event fires after a line item has been created from a purchasable. It allows for additional processing or integration with third-party services.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse yii\\base\\Event;\n\nEvent::on(LineItems::class, LineItems::EVENT_CREATE_LINE_ITEM, function(LineItemEvent $e) {\n    // Do something - perhaps call a third party service according to the line item options\n});\n```\n\n----------------------------------------\n\nTITLE: Date Comparison with date() Function\nDESCRIPTION: The date() function converts an argument to a date to allow comparison, supporting PHP's date and time formats as well as date/time arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% if date(asset.dateModified) < date('-2days') %}\n  {# asset is not new #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking Specific Option Selection in Twig\nDESCRIPTION: Demonstrates how to check if a specific option is selected in a multi-select field using the contains method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-select-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.multiselectFieldHandle.contains('tequilla') %}\n    <p>Really?</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Nginx Start Command\nDESCRIPTION: Command for starting nginx on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_6\n\nLANGUAGE: shell\nCODE:\n```\nnitro nginx start [<options>]\n```\n\n----------------------------------------\n\nTITLE: Appending Items to Array with push Filter in Twig\nDESCRIPTION: Demonstrates the push filter which appends one or more items to the end of an array and returns the new array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_33\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|push('bar', 'baz') %}\n{# Result: ['foo', 'bar', 'baz'] #}\n```\n\n----------------------------------------\n\nTITLE: Counting Users with GraphQL in Craft CMS\nDESCRIPTION: The 'userCount' query returns the number of users matching specified criteria. It accepts the same arguments as the 'users' query for filtering, allowing for precise user counting based on various conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_16\n\nLANGUAGE: GraphQL\nCODE:\n```\nquery {\n  userCount(\n    status: [\"active\"],\n    groupId: [1, 2],\n    hasPhoto: true\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: HTTP Cache Header Setting\nDESCRIPTION: Demonstrates setting HTTP cache headers using the header tag with expiry calculations\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Tell the browser to cache this page for 30 days #}\n{% set expiry = now|date_modify('+30 days') %}\n\n{% header \"Cache-Control: max-age=\" ~ (expiry.timestamp - now.timestamp) %}\n{% header \"Pragma: cache\" %}\n{% header \"Expires: \" ~ expiry|date('D, d M Y H:i:s', 'GMT') ~ \" GMT\" %}\n```\n\n----------------------------------------\n\nTITLE: Using widont Filter to Prevent Typographic Widows in Twig\nDESCRIPTION: Demonstrates the widont filter which inserts a non-breaking space between the last two words of a string to prevent typographic widows and orphans.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_44\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  Don't leave any word stranded on its own line.\n{% endset %}\n\n{{ content|widont }}\n{# Output: Don't leave any word stranded on its own&nbsp;line. #}\n```\n\n----------------------------------------\n\nTITLE: JavaScript for Radio Buttons Custom Value Handling\nDESCRIPTION: Provides JavaScript code to handle the custom value input in a radio buttons field front-end form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/radio-buttons.md#2025-04-22_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n<script>\n  // Connect to the form element with an ID:\n  const $form = document.getElementById('form');\n\n  // \n  const $other = document.getElementById('myRadioFieldHandleOther');\n  const $custom = document.getElementById('myRadioFieldHandleCustom');\n\n  $form.addEventListener('change', function(e) {\n    $custom.disabled = !$other.checked;\n  });\n</script>\n```\n\n----------------------------------------\n\nTITLE: Setting User Registration Flag on Payment Form in Twig\nDESCRIPTION: This snippet shows how to add the user registration checkbox to the payment form, allowing customers to register for an account during the payment process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-customer.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"action\" value=\"commerce/payments/pay\">\n<!-- payment form...-->\n<label for=\"registerUserOnOrderComplete\">\n <input type=\"checkbox\" id=\"registerUserOnOrderComplete\" name=\"registerUserOnOrderComplete\" value=\"1\" /> Register me for a user account\n</label>\n```\n\n----------------------------------------\n\nTITLE: Migrating addUserAdministrationOptions Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the addUserAdministrationOptions plugin hook from Craft 2 to an event listener in Craft 3 for adding custom user administration options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\controllers\\UsersController;\nuse craft\\events\\RegisterUserActionsEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    UsersController::class,\n    UsersController::EVENT_REGISTER_USER_ACTIONS,\n    function(RegisterUserActionsEvent $event) {\n        if ($event->user->isCurrent) {\n            $event->miscActions[] = [\n                'label' => \\Craft::t('plugin-handle', 'Send Bacon'),\n                'action' => 'baconater/send-bacon'\n            ];\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Adding Order Number to Preview URL in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to add a specific order number to the email preview URL in Craft Commerce. It allows for testing email templates with data from a particular order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n&number=ORDER_NUMBER\n```\n\n----------------------------------------\n\nTITLE: Subscription Cancellation Template in Twig\nDESCRIPTION: Template for canceling an existing subscription. Posts to commerce/subscriptions/cancel action and includes gateway-specific cancellation form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/subscription-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/subscriptions/cancel') }}\n  {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n  {{ redirectInput('shop/services') }}\n\n  {% namespace subscription.getGateway().handle|commercePaymentFormNamespace %}\n    {{ subscription.plan.getGateway().getCancelSubscriptionFormHtml()|raw }}\n  {% endnamespace %}\n\n  <button>Unsubscribe</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Setting Content Type and Charset in Twig Template for PDF Generation\nDESCRIPTION: This code snippet demonstrates how to set the correct content type and charset in a Twig template to ensure proper character rendering in generated PDFs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/pdfs.md#2025-04-22_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n```\n\n----------------------------------------\n\nTITLE: Dumping Entry Author Data in Twig\nDESCRIPTION: This snippet demonstrates how to use the Twig dump tag to display all available data for an entry's author. It's useful for exploring the structure of user data in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/more/README.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% dump entry.author %}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Variants with all() in Twig\nDESCRIPTION: Example showing how to loop through all selected variants in a Variants field by using the all() method to execute the element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for variant in entry.myFieldHandle.all() %}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Site Name in Templates\nDESCRIPTION: Shows how to output the site name defined in Craft CMS settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ siteName }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Using the 'callable' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'callable' test to check if a variable is a callable function or method using PHP's is_callable() method. Shows checking if an entry's getStatus method is callable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ [entry, 'getStatus'] is callable ? 'true' : 'false' }}\n{# result: true #}\n```\n\n----------------------------------------\n\nTITLE: Displaying Prices in All Available Payment Currencies with Twig\nDESCRIPTION: This snippet demonstrates how to iterate through all available payment currencies in Craft Commerce and display the cart's total price converted to each currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/twig-filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for currency in craft.commerce.paymentCurrencies %}\n  Total in {{ currency.iso|upper }}: {{ cart.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true) }} <br>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Rates for Specific Zones in PHP\nDESCRIPTION: Demonstrates how to retrieve tax rates for a specific tax zone using either a zone object or zone ID in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Fetch rates for a `$zone` we've already got\n/** @var $zone craft\\commerce\\models\\TaxAddressZone **/\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRatesForZone($zone);\n\n// Fetch rates for a tax zone with an ID of `123`\n$rates = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRatesByTaxZoneId(123);\n```\n\n----------------------------------------\n\nTITLE: Forcing Specific Image Driver in Craft CMS\nDESCRIPTION: Forces Craft to use a specific image manipulation library. Options are 'gd' for GD library, 'imagick' for ImageMagick, or null to let Craft decide.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_76\n\nLANGUAGE: php\nCODE:\n```\n'imageDriver' => 'gd',\n```\n\n----------------------------------------\n\nTITLE: Checking Shipping Address Zip Code with Twig in Craft Commerce Discount Condition\nDESCRIPTION: This Twig expression verifies if an order has a shipping address and if its zip code starts with '70'. It can be used in a discount's condition formula to apply the discount only to orders shipping to a specific region.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\norder.shippingAddressId and order.shippingAddress.zipCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Mutating Table Field Data with GraphQL in Craft CMS\nDESCRIPTION: This GraphQL mutation shows how to update data in a Table field. It includes variables for the entry details and table rows, demonstrating how to structure the input for table data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/table-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry(\n  $title: String,\n  $slug: String,\n  $authorId: ID,\n  $tableRows: [myFieldHandle_TableRowInput],\n) {\n  save_cocktails_cocktails_Entry(\n    title: $title,\n    slug: $slug,\n    authorId: $authorId,\n    myFieldHandle: $tableRows\n  ) {\n    title\n    slug\n    authorId\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n    myFieldHandle {\n      whiskey\n      description\n      proof\n    }\n  }\n}\n\n# query variables:\n{\n  \"title\": \"Whiskies\",\n  \"slug\": \"whiskies\",\n  \"authorId\": 1,\n  \"tableRows\": [\n    {\n      \"col1\": \"High West Double Rye\",\n      \"col2\": \"Blend of straight and rye whiskeys.\",\n      \"col3\": 92\n    },\n    {\n      \"col1\": \"Blanton's Single Barrel\",\n      \"col2\": \"Has been called liquid gold.\",\n      \"col3\": 92\n    },\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Checking User Permissions with Twig in Craft CMS\nDESCRIPTION: This snippet demonstrates how to check if the currently logged-in user has a specific permission using the can() method. It controls the display of a control panel link based on whether the user has the 'accessCp' permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/user-management.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser.can('accessCp') %}\n  <a href=\"{{ cpUrl() }}\">Visit the Control Panel</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Quantity in Twig\nDESCRIPTION: Shows how to display the number of items in the customer's cart using the totalQty attribute.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\nThere are {{ cart.totalQty }} item(s) in your cart!\n```\n\n----------------------------------------\n\nTITLE: Finding Array Differences with diff Filter in Twig\nDESCRIPTION: The 'diff' filter returns the difference between arrays using PHP's array_diff() function, returning a new array with values present in the initial array but not in the compared arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = ['foo', 'bar'] %}\n{% set arr2 = ['bar', 'baz'] %}\n{% set arr3 = arr1|diff(arr2) %}\n```\n\n----------------------------------------\n\nTITLE: Using commerceCurrency Twig filter for currency conversion and formatting in Craft Commerce\nDESCRIPTION: This snippet demonstrates various ways to use the commerceCurrency Twig filter to format and convert currencies in Craft Commerce. It shows how to convert between base and payment currencies, control formatting options, and strip trailing zeros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/payment-currencies.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# `USD` #}\n{% set baseCurrency = cart.currency %}\n\n{# `AUD`, exchange rate 1.3 #}\n{% set paymentCurrency = cart.paymentCurrency %}\n\n{{ 10|commerceCurrency(baseCurrency) }} {# Output: $10.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=false\n) }} {# Output: 13 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true\n) }} {# Output: A$13.00 #}\n\n{{ order.outstandingBalance|commerceCurrency(\n  paymentCurrency,\n  convert=true,\n  format=true,\n  stripZeros=true\n) }} {# Output: A$13 #}\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Version Constraints in composer.json for Craft 3 Plugin\nDESCRIPTION: Example of setting PHP version constraints in composer.json for a Craft 3 plugin supporting PHP 7 and 8.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n  \"require\": {\n    \"php\": \"^7.2.5|^8.0\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Configuring Logout Path in Craft CMS\nDESCRIPTION: Sets the URI Craft should use to log out users on the front-end of the site. This setting accepts a string set to any valid URI, or an array that maps locale IDs to locale-specific URIs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_56\n\nLANGUAGE: php\nCODE:\n```\n'logoutPath' => 'members/logout',\n```\n\n----------------------------------------\n\nTITLE: Configuring Multiple Sites in Nitro YAML\nDESCRIPTION: Demonstrates how to configure multiple sites in the Nitro YAML configuration file, including setting hostnames, paths, webroots, PHP versions, and xdebug settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/usage.md#2025-04-22_snippet_2\n\nLANGUAGE: yaml\nCODE:\n```\nsites:\n - hostname: happylager.nitro\n   path: ~/dev\n   webroot: happy-lager/web\n   version: \"7.4\"\n   xdebug: false\n - hostname: spokeandchain.nitro\n   path: ~/dev\n   webroot: spoke-and-chain/web\n   version: \"7.4\"\n   xdebug: false\n - hostname: starterblog.nitro\n   path: ~/dev\n   webroot: starter-blog/web\n   version: \"7.4\"\n   xdebug: false\n```\n\n----------------------------------------\n\nTITLE: Checking if Assets Field has Selected Assets in Craft CMS\nDESCRIPTION: A Twig snippet that checks if an Assets field has any selected assets using the length filter before looping through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.assetsFieldHandle | length %}\n  {% for asset in entry.assetsFieldHandle %}\n    {{ asset.url }}\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Nitro SSH\nDESCRIPTION: Command to SSH into the Nitro environment for configuration purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/blackfire.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro ssh\n```\n\n----------------------------------------\n\nTITLE: Displaying Line Item Specific Notices\nDESCRIPTION: Shows how to filter and display notices specific to individual line items in a cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% for item in cart.lineItems %}\n  {# ... #}\n  {% set itemNotices = cart.notices|filter(n => n.attribute starts with \"lineItems.#{item.id}\") %}\n\n  {% for itemNotice in itemNotices %}\n    {{ itemNotice.message }}\n  {% endfor %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: File Naming Convention for Field Type Classes in PHP\nDESCRIPTION: Demonstrates the naming convention for field type PHP files within a plugin structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n[PluginHandle]_[FieldTypeName]FieldType.php\n```\n\n----------------------------------------\n\nTITLE: Iterating through All Options in PHP\nDESCRIPTION: Shows how to loop through all available options in a Multi-select field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // Label:    $option->label\n    // Value:    $option or $option->value\n    // Selected: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Array Type in Twig\nDESCRIPTION: Demonstrates using the array test operator to check if a value is an array using PHP's is_array() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ ['oh', 'hello', 'there'] is array ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'oh hai' is array ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Installing Generator via Composer - Bash\nDESCRIPTION: Command to install the Craft CMS Generator package as a dev dependency using Composer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/generator.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/generator --dev\n```\n\n----------------------------------------\n\nTITLE: Formatting Date/Time Field Output in Twig Template\nDESCRIPTION: This snippet demonstrates how to access and format a Date/Time field value in a Twig template. It checks if a user's birthday is set and displays it formatted as 'Month Day, Year'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/date-time-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.birthday %}\n  {{ user.name }}'s birthday is: {{ user.birthday | date('M j, Y') }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Model File Structure in Craft CMS\nDESCRIPTION: Demonstrates the file naming convention for plugin models in Craft CMS. Model files should be placed in a 'models/' subfolder with a specific naming pattern that includes the plugin handle and model name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/models.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n[PluginHandle]_[ModelName]Model.php\n```\n\n----------------------------------------\n\nTITLE: Creating Autosuggest Input with Alias Suggestions in Twig\nDESCRIPTION: This Twig snippet shows how to create an autosuggest input field that suggests both environment variables and aliases, suitable for URL or file system path settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.autosuggestField({\n  // ...\n  suggestEnvVars: true,\n  suggestAliases: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Service with Event Triggers for API Communication in PHP\nDESCRIPTION: A MailingList service class that handles API communication for newsletter subscriptions. It demonstrates how to define event constants, create and trigger events before API calls, check if events were canceled, and emit events after receiving API responses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/events.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\newsletter\\services;\n\nuse craft\\helpers\\Json as JsonHelper;\nuse mynamespace\\newsletter\\events\\ApiResponseEvent;\nuse mynamespace\\newsletter\\events\\SubscribeEvent;\nuse mynamespace\\newsletter\\models\\Contact;\nuse yii\\base\\Component;\n\nclass MailingList extends Component\n{\n    /**\n     * @var string Event emitted before a contact is added to the mailing list.\n     */\n    public const EVENT_BEFORE_SUBSCRIBE = 'beforeSubscribe';\n\n    /**\n     * @var string Event emitted after a contact has been added to the mailing list.\n     */\n    public const EVENT_AFTER_SUBSCRIBE = 'afterSubscribe';\n\n    /**\n     * Subscribes a contact to the mailing list.\n     *\n     * @param Contact $contact\n     * @return bool\n     */\n    public function subscribe(Contact $contact): bool\n    {\n        // Create an HTTP client:\n        $client = Craft::createGuzzleClient([\n            'base_uri' => 'https://api.mycrm.com/',\n        ]);\n\n        // We're ready! Emit an event:\n        $subscribeEvent = new SubscribeEvent([\n            'contact' => $contact,\n        ]);\n\n        $this->trigger(self::EVENT_BEFORE_SUBSCRIBE, $subscribeEvent);\n\n        // Check if a handler canceled it:\n        if (!$subscribeEvent->isValid) {\n            return false;\n        }\n\n        // Ok, we're good to go!\n        $response = $client->post('org/1234/lists/5678', [\n            'form_params' => [\n                'name' => $contact->name,\n                'email' => $contact->email,\n            ],\n        ]);\n\n        // Did we upset the API?\n        if ($response->getStatusCode() !== 200) {\n            return false;\n        }\n\n        // Unpack the response:\n        $data = JsonHelper::decode($response->getBody()->getContents());\n\n        // Give plugins a chance to react to this, regardless of success state:\n        $this->trigger(self::EVENT_AFTER_SUBSCRIBE, new ApiResponseEvent([\n            'contact' => $contact,\n            'response' => $response,\n        ]));\n\n        // Make sure it actually contained the expected \"success\" flag:\n        if ($data['success'] !== true) {\n            return false;\n        }\n\n        return true;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Editable Table Fields in Twig for Craft 4\nDESCRIPTION: Demonstrates how to update editable table fields in Twig templates for Craft 4, adding explicit allowAdd, allowDelete, and allowReorder parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% import _includes/forms.twig' as forms %}\n\n{# Craft 3 #}\n{{ forms.editableTableField({\n  label: 'My Table Field',\n  name: 'myTable',\n  cols: myTableCols,\n  rows: myTableRows,\n}) }}\n\n{# Craft 4 #}\n{{ forms.editableTableField({\n  label: 'My Table Field',\n  name: 'myTable',\n  cols: myTableCols,\n  rows: myTableRows,\n  allowAdd: true,\n  allowReorder: true,\n  allowDelete: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Submitting New Addresses During Checkout in Twig/HTML\nDESCRIPTION: This snippet shows a form to submit new shipping and billing addresses during checkout. It includes fields for firstName, lastName, and country selection. The 'sameAddress' parameter is used to set the billing address same as shipping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/update-cart-addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n    <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n    <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n    <input type=\"hidden\" name=\"shippingAddressId\" value=\"new\">\n    <input type=\"text\" name=\"shippingAddress[firstName]\" value=\"\">\n    <input type=\"text\" name=\"shippingAddress[lastName]\" value=\"\">\n    <select name=\"shippingAddress[countryId]\">\n    {% for id, name in craft.commerce.countriesList %}\n      <option value=\"{{ id }}\">{{ name }}</option>\n    {% endfor %}\n        </select>\n      <input type=\"hidden\" name=\"sameAddress\" value=\"1\">\n    <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Route for PDF Preview in PHP\nDESCRIPTION: This PHP code snippet defines a custom route in routes.php to allow previewing of PDF templates in a browser. It maps a URL pattern to a specific template path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/pdfs.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // If your PDF templates are located somewhere else, adjust this path:\n    'pdf/test/<orderNumber:[a-f0-9]{32}>' => ['template' => 'shop/_private/receipt/index'],\n];\n```\n\n----------------------------------------\n\nTITLE: Checking if a Checkbox is Selected Using Length Filter in Twig\nDESCRIPTION: Demonstrates how to check if a single checkbox option has been selected by testing if the field has any length.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/checkboxes-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.checkboxFieldHandle | length %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Remembered Username in Twig Form\nDESCRIPTION: This snippet shows how to pre-fill a login form's username field with the remembered username using the getRememberedUsername() method of craft.session.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.session.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"text\" name=\"loginName\" value=\"{{ craft.session.getRememberedUsername() }}\">\n```\n\n----------------------------------------\n\nTITLE: Chaining Multiple Filters in Twig Templates\nDESCRIPTION: Demonstration of chaining multiple filters (markdown, striptags, upper) to progressively transform content from Markdown to plain uppercase text.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set text = \"I **really** love Tom Petty.\" %}\n{{ text|markdown|striptags|upper }}\n{# Output: I REALLY LOVE TOM PETTY.</p> #}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin via Composer in a Craft Project\nDESCRIPTION: Command-line instructions for installing a plugin into a Craft CMS project using Composer. The commands navigate to the project directory and require the plugin package.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Rounding Numbers in Twig\nDESCRIPTION: Demonstrates the use of the ceil() function to round a number up to the nearest integer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ ceil(42.1) }}\n{# Output: 43 #}\n```\n\n----------------------------------------\n\nTITLE: Rendering Plugin Templates in PHP\nDESCRIPTION: Demonstrates how to render a plugin template using the TemplatesService in Craft CMS. This snippet shows the basic syntax for rendering a template from a plugin's template directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncraft()->templates->render('pluginHandle/path/to/template')\n```\n\n----------------------------------------\n\nTITLE: Adding a Job to the Queue in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates how to add a job to the queue in Craft CMS. It uses the Queue::push() method to push a new instance of the MyJob class to the queue. The example also shows how to specify a priority for the job.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/queue-jobs.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\queue\\jobs\\MyJob;\n\n\\craft\\helpers\\Queue::push(new MyJob());\n```\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\queue\\jobs\\MyJob;\n\n\\craft\\helpers\\Queue::push(new MyJob(), 10);\n```\n\n----------------------------------------\n\nTITLE: Creating a Users Field Form in Craft CMS\nDESCRIPTION: Shows how to create a form for a Users field in Craft CMS. The example demonstrates creating a list of checkboxes for selecting related users, including handling existing relations and potential new relations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleUsers = craft.users()\n  .group('authors')\n  .orderBy('username ASC')\n  .all() %}\n\n{% set relatedUserIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleUser in possibleUsers %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleUser.id,\n          { checked: possibleUser.id in relatedUserIds }\n        ) }}\n        {{ possibleUser.friendlyName }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Memcached in Craft CMS\nDESCRIPTION: Example of configuring Memcached caching in Craft CMS using MemCache component with server settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\MemCache::class,\n                'useMemcached' => true,\n                'username' => App::env('MEMCACHED_USERNAME'),\n                'password' => App::env('MEMCACHED_PASSWORD'),\n                'defaultDuration' => 86400,\n                'servers' => [\n                    [\n                        'host' => 'localhost',\n                        'persistent' => true,\n                        'port' => 11211,\n                        'retryInterval' => 15,\n                        'status' => true,\n                        'timeout' => 15,\n                        'weight' => 1,\n                    ],\n                ],\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Getting Element Count with total() Method in Twig\nDESCRIPTION: Example of using the total() method to get the total number of blog entries without fetching the actual elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set totalBlogPosts = craft.entries.section('blog').total() %}\n```\n\n----------------------------------------\n\nTITLE: Exit Tag with Error Handling\nDESCRIPTION: Example of using exit tag with error handling and template rendering for non-existent entries\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n\n{% if not entry %}\n  {% exit 404 %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Date Input in HTML Forms\nDESCRIPTION: Example of creating a date input for an element form. This HTML input allows users to select a date that will be saved to a Date field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d', timezone='UTC')\n  : '' %}\n\n<input type=\"date\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Basic PHP Class Example for Unit Testing\nDESCRIPTION: A simple PHP class with mathematical operations to demonstrate unit testing concepts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass SalaryChecker\n{\n    public function multiply(int $a, int $b) : int\n    {\n        return $a * $b;\n    }\n\n    public function add(int $a, int $b) : int\n    {\n        return $a + $b;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Elements with ElementCriteriaModel in PHP\nDESCRIPTION: Demonstrates how to loop through elements using ElementCriteriaModel directly as an array, which implicitly calls find(). This example outputs each entry's title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/working-with-elements.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nforeach ($criteria as $entry)\n{\n    echo $entry->title . '<br>';\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Time with time Filter in Twig\nDESCRIPTION: The time filter outputs the time of day from a timestamp or DateTime object. It supports locale-specific formats with 'short', 'medium', and 'long' options, and allows customizing the locale and timezone.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time }}\n{# Output: 10:00:00 AM #}\n\n{{ entry.postDate|time('short') }}\n{# Output: 10:00 AM #}\n\n{{ entry.postDate|time('short', locale='en-GB') }}\n{# Output: 17:00 #}\n\n{{ entry.postDate|time('short', timezone='UTC') }}\n{# Output: 12:00 AM #}\n```\n\n----------------------------------------\n\nTITLE: Implementing Plugin Template Variable Class\nDESCRIPTION: Example implementation of a template variable class for a Cocktail Recipes plugin, showing how to create methods that wrap service API functionality for template access.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/variables.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesVariable\n{\n    public function findIngredients($criteria)\n    {\n        $criteria = new CocktailRecipes_IngredientCriteria($criteria);\n        return craft()->cocktailRecipes->findIngredients($criteria);\n    }\n\n    public function findIngredient($criteria)\n    {\n        $criteria = new CocktailRecipes_IngredientCriteria($criteria);\n        return craft()->cocktailRecipes->findIngredient($criteria);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plain Text Field Value in Twig\nDESCRIPTION: Demonstrates how to access the value of a plain text field named 'Summary' in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.summary }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Post-Checkout Payment Form with Redirect in Twig\nDESCRIPTION: Form implementation for payment processing with CSRF protection and redirect after completion. Uses object template to redirect to a unique order page based on order number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/payments/pay') }}\n  {{ redirectInput('orders/{number}') }}\n\n  {# ... #}\n\n  <button>Pay</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Array Definition and Iteration in Twig\nDESCRIPTION: Shows how to define arrays and iterate over them using for loops, including array joining with filters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set todoList = [\n  'Finish design',\n  'Build HTML & CSS',\n  'Manage content with Craft'\n] %}\n\n<ol class=\"todo\">\n  {% for item in todoList %}\n    <li>{{ item }}</li>\n  {% endfor %}\n</ol>\n\n{{ todoList|join(', ') }}\n```\n\n----------------------------------------\n\nTITLE: Creating Blog Entry Template in Twig\nDESCRIPTION: Entry template that extends the base layout and displays a static heading. Shows template inheritance pattern using extends and block tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# You can omit the `.twig` when referencing another template: #}\n{% extends '_layout' %}\n\n{# Provide something to the `content` block in `_layout.twig`: #}\n{% block content %}\n  <h1>Some day, I'll be a blog post!</h1>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Categories in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve all tax categories using the TaxCategories service in both Twig and PHP. This code returns an array of TaxCategory models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.commerce\n  .getTaxCategories()\n  .getAllTaxCategories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$categories = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories()\n    ->getAllTaxCategories();\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single Product from Products Field\nDESCRIPTION: Shows how to retrieve a single product from a Products field using the one() method when the field is configured for single selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = entry.productsFieldHandle.one() %}\n{% if product %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using the ceil() Function in Twig Templates\nDESCRIPTION: Demonstrates how to use the ceil() function to round a number up to the nearest integer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ ceil(42.1) }} => 43\n```\n\n----------------------------------------\n\nTITLE: Exiting Template Execution in Twig\nDESCRIPTION: The exit tag prevents the rest of the template from executing and ends the request. It can be used with optional status code and message parameters to set the HTTP status and provide an error message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n\n{% if not entry %}\n  {% exit 404 %}\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser.isInGroup('powerUsers') ?? false %}\n  {% exit 403 'You must be a power user to access this page!' %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Timezone for Date Field Input in Twig\nDESCRIPTION: Shows how to customize the timezone for Date field input in Twig forms, including using a specific timezone or allowing user selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Use the timezone selected under Settings → General Settings → Time Zone #}\n{% set tz = craft.app.getTimezone() %}\n\n{# Or set a specific timezone #}\n{% set tz = 'America/Los_Angeles' %}\n\n{# Normalize saved dates with the specified timezone: #}\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone=tz)\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle][datetime]\" value=\"{{ currentValue }}\">\n{{ hiddenInput('fields[myFieldHandle][timezone]', tz) }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone='UTC')\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle][datetime]\" value=\"{{ currentValue }}\">\n\n<select name=\"fields[myFieldHandle][timezone]\">\n  <option value=\"UTC\" selected>UTC</option>\n  <option value=\"America/Los_Angeles\">Pacific Time</option>\n  {# ... #}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_COMPOSER_PATH in PHP for Custom composer.json Location\nDESCRIPTION: Defines the CRAFT_COMPOSER_PATH constant to specify a custom location for the composer.json file, rather than using the default location within the base directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_COMPOSER_PATH', 'path/to/composer.json');\n```\n\n----------------------------------------\n\nTITLE: Accessing a Single Tag from Tags Field in Twig\nDESCRIPTION: Using the first() method to get a single tag from a Tags field that is intended to have only one selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set tag = entry.myTagsField.first() %}\n\n{% if tag %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Generating Single Widget Type for GraphQL in PHP\nDESCRIPTION: Example of a generator class for a single widget type in a Craft CMS plugin. This class implements the GeneratorInterface and provides methods to generate GraphQL types for a widget element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\types\\generators;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse mynamespace\\gql\\types\\elements\\Widget;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse craft\\gql\\base\\GeneratorInterface;\nuse craft\\gql\\GqlEntityRegistry;\nuse craft\\gql\\TypeManager;\n\nclass WidgetType implements GeneratorInterface\n{\n    public static function generateTypes($context = null): array\n    {\n        // Widgets have no context\n        $type = static::generateType($context);\n        return [$type->name => $type];\n    }\n\n    public static function generateType($context): ObjectType\n    {\n        $pluginType = new WidgetElement();\n        $typeName = $pluginType->getGqlTypeName();\n        $widgetFields = TypeManager::prepareFieldDefinitions(\n            WidgetInterface::getFieldDefinitions(),\n            $typeName\n        );\n\n        // Return the type if it exists, otherwise create and return it\n        return GqlEntityRegistry::getEntity($typeName) ?:\n            GqlEntityRegistry::createEntity(\n                $typeName,\n                new Widget([\n                    'name' => $typeName,\n                    'fields' => function() use ($widgetFields) {\n                        return $widgetFields;\n                    },\n                ])\n            );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Percentages with percentage Filter in Twig\nDESCRIPTION: The percentage filter formats a decimal number as a percentage according to the user's preferred language. If the input isn't a valid number, it returns the input unchanged.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{{ 0.85|percentage }}\n{# Output: 85% #}\n\n{{ 'oh hai'|percentage }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Capitalizing Words with ucwords Filter in Twig\nDESCRIPTION: Demonstrates the ucwords filter which capitalizes the first character of each word in a string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_43\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar baz hyphenated-pair'|ucwords }}\n{# Output: Foo Bar Baz Hyphenated-Pair #}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Twig Comment Visibility in HTML Output\nDESCRIPTION: Shows how Twig comments are stripped from HTML output, unlike HTML comments which remain visible in the source code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<!-- This will be visible in the HTML source! -->\n{# This won't! #}\n```\n\nLANGUAGE: html\nCODE:\n```\n<!-- This will be visible in the HTML source! -->\n```\n\n----------------------------------------\n\nTITLE: Displaying Option Label in Twig\nDESCRIPTION: Shows how to display the label of the selected option in a Radio Buttons field using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle.label }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Blackfire Agent\nDESCRIPTION: Command to register the Blackfire agent with server credentials. This step is necessary to connect the local agent to your Blackfire account.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/blackfire.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nsudo blackfire-agent --register\n```\n\n----------------------------------------\n\nTITLE: Defining Component Map for Service Mocking in PHP\nDESCRIPTION: Example of implementing getComponentMap method to define how services should be mocked in a module or plugin. Shows the structure for mapping service classes to their access methods and properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/full-mock.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    [Elements::class, ['getElements', 'elements']],\n];\n```\n\n----------------------------------------\n\nTITLE: Fetching Single Related User in Craft CMS\nDESCRIPTION: Demonstrates how to fetch and work with a single related user from a Users field in Craft CMS. The example shows checking if a related user exists and accessing its properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/users-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ url('profiles/'~rel.username) }}\">{{ rel.name }}</a></p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // \\craft\\helpers\\UrlHelper::url('profiles/' . $rel->username)\n    // $rel->name\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Recent Clothing Products in GraphQL\nDESCRIPTION: Demonstrates how to fetch the same information as the Twig example using Craft's GraphQL API.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_6\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  products(limit: 10, type: \"clothing\") {\n    title\n    uri\n    ... on clothing_Product {\n      summary\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Products with In-Stock Variants in Twig\nDESCRIPTION: This snippet demonstrates how to query products that have at least one variant in stock using the hasStock parameter within the hasVariant criteria.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-products.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = craft.commerce.products({\n  hasVariant: {\n    hasStock: true\n  },\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Loading Global Variables in Email Templates\nDESCRIPTION: Example of how to load and access Craft CMS global set variables within email templates, since they are not automatically loaded.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-status-emails.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set globalSetName = craft.globals.getSetByHandle('globalSetName') %}\n\n{{ globalSetName.customFieldName }}\n```\n\n----------------------------------------\n\nTITLE: Purifying HTML with purify Filter in Twig\nDESCRIPTION: Shows how to use the purify filter to clean HTML using HTML Purifier. It includes examples of using predefined rules and custom configurations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{{ user.bio|purify }}\n\n{{ user.bio|purify('user-profile') }}\n\n{{ user.bio|purify({\n  'HTML.AllowedElements': 'p, a',\n  'HTML.Nofollow': true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Using Order Data in Email Subject with Twig\nDESCRIPTION: Example of how to access order information in the Email Subject field using Twig templating. This demonstrates including the order ID in the subject line.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/emails.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nOrder #{{ order.id }} received.\n```\n\n----------------------------------------\n\nTITLE: Database Parameter Escaping with literal Filter\nDESCRIPTION: Escapes special characters in query parameters using Db::escapeParam()\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set titleParam = craft.app.request.getQueryParam('title') %}\n{% set entry = craft.entries()\n  .title(titleParam|literal)\n  .one() %}\n```\n\n----------------------------------------\n\nTITLE: Finding Element Position with indexOf Filter\nDESCRIPTION: Returns the zero-based index position of an element in an array or a substring in a string\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set colors = ['red', 'green', 'blue'] %}\n<p>Green is located at position {{ colors|indexOf('green') + 1 }}.</p>\n\n{% set position = 'team'|indexOf('i') %}\n{% if position != -1 %}\n  <p>There <em>is</em> an \"i\" in \"team\"! It's at position {{ position + 1 }}.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Field Types in Twig Templates in Craft CMS\nDESCRIPTION: Example of how to create a field by type in Craft 3, replacing the removed craft.fields.getFieldType() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\ncraft.app.fields.createField(type)\n```\n\n----------------------------------------\n\nTITLE: Preventing HTML Encoding with raw() Function in Twig\nDESCRIPTION: Wraps a string in a Twig\\Markup object to prevent it from being HTML-encoded when output. Unlike the |raw filter, this preserves the non-encoding behavior even when passing to other templates or macros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{% set html = raw('<p>Don't encode me.</p>') %}\n{{ html }}\n```\n\n----------------------------------------\n\nTITLE: User Navigation with Previous/Next in Twig\nDESCRIPTION: Demonstrates how to implement previous/next user navigation using getPrev() and getNext() methods with custom parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/usermodel.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set params = {\n  group: 'authors',\n  order: 'firstName, lastName'\n} %}\n\n{% set prevAuthor = entry.getPrev(params) %}\n{% set nextAuthor = entry.getNext(params) %}\n\n{% if prevAuthor %}\n  <p>Previous: <a href=\"/authors/{{ prevAuthor.username }}\">{{ prevAuthor.name }}</a></p>\n{% endif %}\n\n{% if nextAuthor %}\n  <p>Next: <a href=\"/authors/{{ nextAuthor.username }}\">{{ nextAuthor.name }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering Discount Adjuster in Craft Commerce PHP\nDESCRIPTION: Shows how to register a custom discount adjuster class using the registerDiscountAdjusters event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/extend/adjusters.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_DISCOUNT_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing createSettingsModel() in Craft CMS Plugin Class\nDESCRIPTION: Adds a createSettingsModel() method to the main plugin class, returning an instance of the Settings model.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    protected function createSettingsModel(): ?Model\n    {\n        return new \\mynamespace\\models\\Settings();\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Basic Craft CMS Constants for Site Configuration\nDESCRIPTION: Example showing how to set the craft path and define basic constants for site URL and locale settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// Path to your craft/ folder\n$craftPath = '../../craft';\n\n// This is for the Dutch site\ndefine('CRAFT_SITE_URL', 'http://my-project.tld/nl/');\ndefine('CRAFT_LOCALE',   'nl');\n```\n\n----------------------------------------\n\nTITLE: Displaying Order Price in All Available Payment Currencies using Twig\nDESCRIPTION: This snippet shows how to iterate through all available payment currencies and display the order's price in each currency using the commerceCurrency filter in Twig for Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/twig-filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for currency in craft.commerce.paymentCurrenciess %}\n  Total in {{ currency.iso|upper }}: {{ cart.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true) }} <br>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Counting Total Matrix Blocks in Twig\nDESCRIPTION: Shows how to get the total count of Matrix blocks using the length filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myMatrixField|length }}\n```\n\n----------------------------------------\n\nTITLE: Postal Code Matching with Twig Expressions\nDESCRIPTION: Example of using Twig expression syntax to match postal codes based on specific patterns. Shows how to match postal codes starting with certain numbers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/shipping.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\npostalCode[0:2] == '60' or postalCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Configuring Aliases in Craft CMS\nDESCRIPTION: Demonstrates how to configure custom aliases in Craft CMS, including recursive aliases and environment variable usage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'aliases' => [\n        '@primaryUrl' => App::env('PRIMARY_SITE_URL'),\n        '@shared' => App::env('SHARED_PATH'),\n        '@uploads' => '@shared/web/uploads',\n        '@assets' => '@primaryUrl/uploads',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Matrix Block Type Input Example in HTML\nDESCRIPTION: This HTML example shows the structure of a hidden input field for specifying a Matrix block's type, using a temporary ID for a new block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/matrix-fields.md#2025-04-22_snippet_12\n\nLANGUAGE: html\nCODE:\n```\n<input type=\"hidden\" name=\"fields[myFieldHandle][new:1][type]\" value=\"text\" />\n```\n\n----------------------------------------\n\nTITLE: Getting Current User's Email in Craft CMS Twig\nDESCRIPTION: Demonstrates how to access the current user's email address using the craft.app.user service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set email = craft.app.user.email %}\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Command on macOS and Linux\nDESCRIPTION: This command removes the Nitro command from the system on macOS and Linux. It's part of the uninstallation process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nsudo rm /usr/local/bin/nitro\n```\n\n----------------------------------------\n\nTITLE: Defining Craft Environment Constant\nDESCRIPTION: Sets the environment name for the Craft installation, which is used for multi-environment configurations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_ENVIRONMENT', 'dev');\n```\n\n----------------------------------------\n\nTITLE: Implementing HTML Form for Controller Action\nDESCRIPTION: Shows how to create an HTML form that posts to a controller action with proper routing parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/controllers.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" action=\"\" accept-charset=\"UTF-8\">\n  <input type=\"hidden\" name=\"action\" value=\"cocktailRecipes/ingredients/saveIngredient\">\n  <input type=\"hidden\" name=\"redirect\" value=\"cocktailRecipes/ingredients\">\n\n  <!-- ...-->\n\n  <input class=\"btn submit\" type=\"submit\" value=\"{{ 'Submit'|t }}\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Displaying Order Status History with Twig\nDESCRIPTION: Shows how to display an order's current status and iterate through its status history. For each history entry, it shows the new status, previous status, and any associated message.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-history-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nCurrent Order Status: {{order.orderStatus.name}} <br>\n{% for history in order.histories %}\n  Status: '{{ history.newStatus.name ?? \"\"}}' (previously '{{ history.prevStatus.name ?? \"\"}}') \n  with message: '{{ history.message }}'<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Executing Database Backup Command in Nitro\nDESCRIPTION: This snippet shows the basic command to initiate a database backup in Nitro. It triggers the interactive process for selecting the database engine and specific database to backup.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/backups.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro db backup\n```\n\n----------------------------------------\n\nTITLE: Updated Translation Syntax in PHP\nDESCRIPTION: Examples of the new translation syntax in Craft 3, showing proper category usage for different contexts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::t('app', 'Entries')\n\n\\Craft::t('app', 'Post a new {section} entry', [\n    'section' => \\Craft::t('site', $section->name)\n])\n```\n\n----------------------------------------\n\nTITLE: Multiple Block Type Filtering in Twig\nDESCRIPTION: Example of filtering Matrix blocks by multiple block types and handling each type appropriately.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.type('text, heading') %}\n  {% if block.type == \"heading\" %}\n    <h3>{{ block.heading }}</h3>\n  {% else %}\n    {{ block.text|markdown }}\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Handling Discount Line Item Matching in PHP\nDESCRIPTION: Event handler for commerce_discounts.onBeforeMatchLineItem that checks variant quantity conditions before applying discounts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_discounts.onBeforeMatchLineItem', function($event) {\n    if ($lineItem->purchasable instanceof Commerce_VariantModel) {\n        if ($lineItem->qty < 3) {\n            $event->performAction = false;\n        }\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Finding Enabled Parent Entry in Twig\nDESCRIPTION: Alternative to getParent() that returns only enabled parent entries by using the ancestorOf parameter with craft.entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set parent = craft.entries.ancestorOf(entry).order('lft desc').first() %}\n```\n\n----------------------------------------\n\nTITLE: Trigger Template Implementation in Twig\nDESCRIPTION: Twig template that renders the ingredient selection menu for the Element Action trigger button. Creates a dropdown menu with ingredient options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/element-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"btn menubtn\" role=\"button\">{{ \"Add Ingredient\"|t }}</div>\n<div class=\"menu\">\n  <ul>\n    {% for ingredient in ingredients %}\n      <li>\n        <a class=\"formsubmit\"\n            data-param=\"ingredient\"\n            data-value=\"{{ ingredient.id }}\"\n        >\n          {{- ingredient.name -}}\n        </a>\n      </li>\n    {% endfor %}\n  </ul>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Looping Through Radio Button Options in PHP\nDESCRIPTION: Shows how to iterate through all available options in a Radio Buttons field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // Label:    $option->label\n    // Value:    $option or $option->value\n    // Selected: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Elements with Boolean Attributes in Twig\nDESCRIPTION: Shows how to create HTML elements with boolean attributes using the tag tag. When an attribute is set to true, it will be added without a value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'textarea' with {\n  name: 'message',\n  required: true\n} -%}\n  Please foo some bar.\n{%- endtag %}\n{# Output: <textarea name=\"message\" required>Please foo some bar.</textarea> #}\n```\n\n----------------------------------------\n\nTITLE: Adding a Site with Nitro CLI\nDESCRIPTION: Demonstrates the process of adding an existing project as a site using the Nitro CLI 'add' command. This includes setting the hostname, web root, and PHP version.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/usage.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ cd /path/to/project\n$ nitro add\nAdding site…\nEnter the hostname [mysite.test]:\n  ✓ setting hostname to mysite.test\n  ✓ adding site ~/dev/support/mysite.test\nEnter the web root for the site [web]:\n  ✓ using web root web\nChoose a PHP version:\n  1. 8.0\n  2. 7.4\n  3. 7.3\n  4. 7.2\n  5. 7.1\n  6. 7.0\nEnter your selection: 2\n  ✓ setting PHP version 7.4\n  … saving file ✓\nSite added 🌍\nApply changes now [Y/n]? y\nChecking network…\n  ✓ network ready\nChecking proxy…\n  ✓ proxy ready\nChecking databases…\n  … checking mysql-8.0-3306.nitro ✓\n  … checking postgres-13-5432.nitro ✓\nChecking mounts…\n  … checking ~/dev/craftcms/cms-3 ✓\nChecking services…\n  … checking mailhog service ✓\nChecking sites…\n  … checking mysite.test ✓\nChecking proxy…\n  … updating proxy ✓\nModifying hosts file (you might be prompted for your password)\nAdding sites to hosts file…\n  … modifying hosts file ✓\nNitro is up and running 😃\n```\n\n----------------------------------------\n\nTITLE: Looping Through All Selected Products\nDESCRIPTION: Example of iterating through all selected products in a Commerce Products field using the all() method to execute the element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for product in entry.myFieldHandle.all() %}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Starting Multiple Queue Worker Instances with Systemd\nDESCRIPTION: Commands to start, check status, and restart multiple queue worker instances using systemd. Uses range syntax for managing multiple workers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nsudo systemctl start craft-queue-worker@{1..4}\n\nsudo systemctl status \"craft-queue-worker@*\"\n\nsudo systemctl restart \"craft-queue-worker@*\"\n```\n\n----------------------------------------\n\nTITLE: Element Redirect Form in Twig\nDESCRIPTION: Shows how to create a form that redirects to an element's edit page in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form>\n  {{ actionInput('elements/redirect') }}\n  {{ hiddenInput('elementId', object.id) }}\n\n  <button>Edit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Checking Collection Length in Twig\nDESCRIPTION: Examples of how to properly check for empty collections in Twig, as empty collections evaluate as true unlike empty arrays.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% if myArray %}\n  {# Do stuff #}\n{% else %}\n  {# No items to do stuff with; do something else #}\n{% endif %}\n\n{% if myCollection %}\n  {# Do stuff #}\n{% else %}\n  {# !! We'll never end up here !! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Example Order PHP Object\nDESCRIPTION: PHP code snippet showing the structure of an Order object in Craft Commerce with its properties and values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n  'billingAddressId' => null,\n  'cancelUrl' => null,\n  'couponCode' => null,\n  'currency' => 'USD',\n  'customerId' => null,\n  'dateOrdered' => null,\n  'datePaid' => null,\n  'dateUpdated' => new \\DateTime('now', new \\DateTimeZone('UTC')),\n  'email' => null,\n  'gatewayId' => null,\n  'id' => 59,\n  'isCompleted' => false,\n  'isPaid' => false,\n  'itemSubtotal' => 0,\n  'itemTotal' => 0,\n  'lineItems' => [],\n  'number' => 'cart_1565201928',\n  'orderAdjustments' => [],\n  'orderLanguage' => 'en',\n  'orderSiteId' => 1,\n  'origin' => 'web',\n  'paymentCurrency' => 'USD',\n  'paymentSourceId' => null,\n  'registerUserOnOrderComplete' => false,\n  'returnUrl' => null,\n  'shippingAddressId' => null,\n  'shippingMethodHandle' => null,\n  'shortNumber' => '1565201928',\n  'status' => 'new',\n  'statusId' => 1,\n  'total' => 0,\n  'totalPaid' => 0,\n  'totalPrice' => 0,\n  'totalSaleAmount' => 0,\n  'totalTax' => 0,\n  'totalTaxIncluded' => 0,\n  'transactionId' => null,\n  'userId' => null,\n];\n```\n\n----------------------------------------\n\nTITLE: Ordering Adjusters in Craft Commerce\nDESCRIPTION: Demonstrates how to order custom adjusters relative to the standard Craft Commerce adjusters by using specific array keys when registering adjusters. This allows for precise control over the order of adjustment application.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/adjusters.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_registerOrderAdjusters(){\n  return [\n    201 => new MyShippingAdjuster,\n    601 => new MyTaxAdjuster\n  ];\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Cart in Twig\nDESCRIPTION: Examples of how to fetch the current user's cart in Twig templates. Shows two equivalent methods using craft.commerce.carts.cart.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n\n{# Same thing: #}\n{% set cart = craft.commerce.getCarts().getCart() %}\n```\n\n----------------------------------------\n\nTITLE: Adding Environmental Settings Validation with EnvAttributeParserBehavior\nDESCRIPTION: This example demonstrates how to validate environmental settings by using EnvAttributeParserBehavior to check the parsed values rather than the raw values during validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/environmental-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\behaviors\\EnvAttributeParserBehavior;\n\nclass MyModel extends Model\n{\n    public function behaviors()\n    {\n        return [\n            'parser' => [\n                'class' => EnvAttributeParserBehavior::class,\n                'attributes' => ['secretKey'],\n            ],\n        ];\n    }\n\n    public function rules()\n    {\n        return [\n            ['secretKey', 'required'],\n            ['secretKey', 'string', 'length' => 50],\n        ];\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Status Attributes in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to access various attributes of an Order Status model in Craft Commerce. It includes the id, name, handle, color, and default status of the order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-status-model.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### `id`\n\nThe status ID.\n\n### `name`\n\nThe name of the order status.\n\n### `handle`\n\nThe handle of the order status.\n\n### `color`\n\nThe name of the color of the order status\n\n### `default`\n\nReturns `true` or `false` depending on if this status is the default applied to new orders.\n```\n\n----------------------------------------\n\nTITLE: Previous/Next Category Navigation\nDESCRIPTION: Shows how to implement previous/next navigation between categories with custom parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set params = {\n  section: 'cocktails',\n  order:   'title'\n} %}\n\n{% set prevWhiskey = category.getPrev(params) %}\n{% set nextWhiskey = category.getNext(params) %}\n\n{% if prevWhiskey %}\n  <p>Previous: <a href=\"{{ prevWhiskey.url }}\">{{ prevWhiskey.title }}</a></p>\n{% endif %}\n\n{% if nextWhiskey %}\n  <p>Next: <a href=\"{{ nextWhiskey.url }}\">{{ nexWhiskey.title }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Environmental Settings Model in PHP\nDESCRIPTION: This snippet demonstrates how to create a model with a property that can reference an environment variable. It includes a method to parse the environment variable at runtime using Craft's App::parseEnv() helper.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/environmental-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\helpers\\App;\n\nclass MyModel extends Model\n{\n    /**\n     * @var string the raw secret key (e.g. '$ENV_NAME')\n     */\n    public $secretKey;\n\n    /**\n     * @return string the parsed secret key (e.g. 'XXXXXXXXXXX')\n     */\n    public function getSecretKey(): string\n    {\n        return App::parseEnv($this->secretKey);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Partial Matching in Plain Text Field Queries in Twig\nDESCRIPTION: Shows how to use partial matching with asterisks in plain text field queries in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set pastels = craft.entries()\n  .section('swatches')\n  .colorGroupCode('PASTEL-*')\n  .all() %}\n\n{% set glosses = craft.entries()\n  .section('swatches')\n  .colorGroupCode('*-GLOSS')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Custom Field in Craft CMS Twig\nDESCRIPTION: Demonstrates how to get a custom field by its handle using the craft.app.fields service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('body') %}\n```\n\n----------------------------------------\n\nTITLE: Marking Critical Updates in Changelog using Markdown\nDESCRIPTION: Shows how to indicate a critical update in the changelog by adding [CRITICAL] to the version heading. This alerts users to important security or bug fixes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/changelogs-and-updates.md#2025-04-22_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-01-21 [CRITICAL]\n### Fixed\n- Reverted change to `$potus` due to security vulnerabilities\n```\n\n----------------------------------------\n\nTITLE: Creating DateTime-Local Input in HTML Forms\nDESCRIPTION: Example of creating a datetime-local input for an element form. This HTML input allows users to select both a date and time that will be saved to a Date field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone='UTC')\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Nesting Tag Template Tags for Complex HTML Structure in Twig\nDESCRIPTION: Shows how to nest '{% tag %}' template tags to create a more complex HTML structure. This example creates a div containing a paragraph, both with dynamic class attributes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'div' with {\n  class: 'foo',\n} %}\n  {% tag 'p' with {\n    class: 'welcome',\n  } -%}\n    Hello, {{ currentUser.friendlyName }}\n  {%- endtag %}\n{% endtag %}\n{# Output: <div class=\"foo\"><p class=\"welcome\">Hello, Tim</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Checking for Existing User Account During Checkout in Twig\nDESCRIPTION: This snippet demonstrates how to conditionally display a user registration checkbox during checkout by first checking if a user account already exists with the cart's email address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/customers.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Get a user account using the same email address as the cart #}\n{% set user = craft.users.email(cart.email).one() %}\n{% if not user %}\n  <label for=\"registerUserOnOrderComplete\">\n    <input type=\"checkbox\" name=\"registerUserOnOrderComplete\" value=\"1\" />\n    {{ \"Register me for a user account\"|t }}\n  </label>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin CP Section in PHP\nDESCRIPTION: Demonstrates how to create a plugin class with a control panel section by setting the hasCpSection property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public $hasCpSection = true;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Add to Cart Form with Options and Notes\nDESCRIPTION: Advanced form implementation that includes customer notes and custom options (engraving and giftwrap) along with the product variant.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/add-to-cart.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.commerce.products.first() %}\n{% set variant = product.defaultVariant %}\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n\n  <input type=\"text\" name=\"note\" value=\"\">\n\n  <select name=\"options[engraving]\">\n    <option value=\"happy-birthday\">Happy Birthday</option>\n    <option value=\"good-riddance\">Good Riddance</option>\n  </select>\n\n  <select name=\"options[giftwrap]\">\n    <option value=\"yes\">Yes Please</option>\n    <option value=\"no\">No Thanks</option>\n  </select>\n\n  <input type=\"hidden\" name=\"purchasableId\" value=\"{{ variant.purchasableId }}\">\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variables for Testing\nDESCRIPTION: Environment configuration file for testing database connections and Craft CMS settings\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nDB_DSN=\"mysql:host=<host>;port=<port>;dbname=<dbname>\"\nDB_USER=\"root\"\nDB_PASSWORD=\"\"\nDB_TABLE_PREFIX=\"\"\nSECURITY_KEY=\"\"\nPRIMARY_SITE_URL=\"http://my-project.test/\"\n```\n\n----------------------------------------\n\nTITLE: Checking Multiple Values in a Single Case Statement\nDESCRIPTION: Shows how to check for multiple values in a single case statement using 'or' operators. This creates more concise switch statements when multiple conditions should trigger the same code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_25\n\nLANGUAGE: twig\nCODE:\n```\n{% case \"h2\" or \"h3\" or \"p\" %}\n  {# output an <h2>, <h3>, or <p> tag, depending on the block type #}\n  {{ tag(matrixBlock.type, {\n      text: matrixBlock.text\n  }) }}\n```\n\n----------------------------------------\n\nTITLE: Installing Codeception for Craft CMS via Composer\nDESCRIPTION: This command installs Codeception, a PHP testing framework, using Composer for Craft CMS projects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require codeception/codeception\n```\n\n----------------------------------------\n\nTITLE: Using the defined Test in Conditional Display\nDESCRIPTION: Example of using the defined test in a conditional statement to check if a property exists before displaying it, preventing errors when accessing undefined properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if specs.weight is defined %}\n  <dt>Weight</dt>\n  <dd>{{ specs.weight }}</dd>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Kebab Case String Formatting\nDESCRIPTION: Demonstrates the kebab case string formatting filter that converts a string to kebab-case.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"foo bar?\"|kebab }}\n{# Outputs: foo-bar #}\n```\n\n----------------------------------------\n\nTITLE: Using values Filter for Array Transformation in Twig\nDESCRIPTION: Demonstrates the values filter which returns an array of all values in a given array, removing any custom keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_42\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = {foo: 'Foo', bar: 'Bar'} %}\n{% set arr2 = arr1|values %}\n{# arr2 = ['Foo', 'Bar'] #}\n```\n\n----------------------------------------\n\nTITLE: Basic Rich Text Field Output in Twig\nDESCRIPTION: Simple template code to output Rich Text field content in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.richTextFieldHandle }}\n```\n\n----------------------------------------\n\nTITLE: Checking Element Existence with exists() in PHP\nDESCRIPTION: This snippet shows how to use the exists() method to check if any elements match the specified criteria in PHP. It checks for the existence of an entry in the 'news' section with a specific slug.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n$exists = Entry::find()\n    ->section('news')\n    ->slug('hello-world')\n    ->exists();\n```\n\n----------------------------------------\n\nTITLE: Accessing Single Product from Products Field in Twig\nDESCRIPTION: Shows how to retrieve a single product from a Products field that is intended to have only one selection, using the first() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = entry.productsFieldHandle.first() %}\n\n{% if product %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Local Development Queue Commands\nDESCRIPTION: Commands for running queue workers in local development environments using DDEV or direct PHP CLI.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nddev craft queue/listen --verbose\n```\n\n----------------------------------------\n\nTITLE: Combining Arrays in Twig\nDESCRIPTION: Demonstrates the use of the combine() function to merge two arrays, using one for keys and the other for values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = ['a', 'b', 'c'] %}\n{% set arr2 = ['foo', 'bar', 'baz'] %}\n{% set arr3 = combine(arr1, arr2) %}\n{# arr3 will now be `{a: 'foo', b: 'bar', c: 'baz'}` #}\n```\n\n----------------------------------------\n\nTITLE: Using Custom Config in PHP with Guzzle Client\nDESCRIPTION: Example of using custom configuration values in PHP code with Guzzle client implementation for API requests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n$privateKey = Craft::$app->config->custom->servicePrivateKey;\n\n$client = Craft::createGuzzleClient([\n    'base_uri' => Craft::$app->config->custom->serviceBaseUrl,\n]);\n\n$client->post('/donations', [\n    'auth' => ['apiuser', $privateKey],\n    'json' => [\n        'amount' => 1000,\n    ],\n]);\n```\n\n----------------------------------------\n\nTITLE: Dynamic Navigation with Active State in Twig\nDESCRIPTION: Template code for navigation menu with dynamic active state classes based on current URL segment\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set navSegment = craft.app.request.getSegment(1) %}\n\n<nav>\n  <ul>\n    <li>\n      <a href=\"{{ url('/') }}\" class=\"{{ navSegment is empty ? 'active' : 'inactive' }}\">Home</a>\n    </li>\n    <li>\n      <a href=\"{{ url('blog') }}\" class=\"{{ navSegment == 'blog' ? 'active' : 'inactive' }}\">Blog</a>\n    </li>\n    <li>\n      <a href=\"{{ url('about') }}\" class=\"{{ navSegment == 'about' ? 'active' : 'inactive' }}\">About</a>\n    </li>\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Assigning Dropdown Field Value to a Variable in Twig\nDESCRIPTION: How to correctly assign a dropdown field's value to a variable in Twig using the .value property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/dropdown-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set dropdownValue = entry.dropdownFieldHandle.value %}\n```\n\n----------------------------------------\n\nTITLE: Changelog Version Format Example\nDESCRIPTION: Example of properly formatted heading for a changelog entry, including version number and release date. This format is used by the automated GitHub release process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-store.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 5.0.0 - 2018-03-31\n```\n\n----------------------------------------\n\nTITLE: Displaying Password Reset Link in Craft CMS Twig\nDESCRIPTION: Demonstrates how to display a password reset link if the setPasswordUrl is configured.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if setPasswordUrl %}\n  <a href=\"{{ setPasswordUrl }}\">Reset password</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Modified SalaryChecker Class with Minimum Salary in PHP\nDESCRIPTION: This snippet shows a modified version of the SalaryChecker class where the multiply method enforces a minimum salary of 25,000. This change would cause the previous unit test to fail.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function multiply(int $a, int $b) : int\n{\n    $result = $a * $b;\n\n    // Don't return salaries lower than 25,000\n    if ($result < 25000) {\n        return 25000\n    }\n\n    return $result;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing General Config Properties in Twig Templates\nDESCRIPTION: Demonstrates how to access configuration settings from craft/config/general.php using property syntax in Twig templates. The example shows checking the devMode setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.config.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if craft.config.devMode %}\n  <p>Craft is running in Dev Mode.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: JavaScript Integration with Twig\nDESCRIPTION: Demonstrates how to include JavaScript code within Twig templates using the js tag pair.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% js %}\n  console.log('Hello world');\n{% endjs %}\n```\n\n----------------------------------------\n\nTITLE: Configuring APC Cache in Craft CMS\nDESCRIPTION: Example of configuring APC caching in Craft CMS using ApcCache component.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'cache' => function() {\n            $config = [\n                'class' => yii\\caching\\ApcCache::class,\n                'useApcu' => true,\n                'keyPrefix' => Craft::$app->id,\n                'defaultDuration' => Craft::$app->config->general->cacheDuration,\n            ];\n\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Data URL Generation for Assets\nDESCRIPTION: Converts assets or files to base64-encoded data URLs. Accepts either an Asset object or file path with optional MIME type specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{# Asset object `myLogoAsset` #}\n<img src=\"{{ dataUrl(myLogoAsset) }}\" />\n\n{# File path, optionally using an alias #}\n<img src=\"{{ dataUrl('@webroot/images/my-logo-asset.svg') }}\" />\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Line Items with Twig\nDESCRIPTION: Example form for updating cart line item quantities and notes using the commerce/cart/update-cart endpoint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n  {% endfor %}\n  <button type=\"submit\">Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Processing Commerce Email After Sending\nDESCRIPTION: Event handler for 'commerce_emails.onSendEmail' triggered after an email is sent. It demonstrates how to access the email and order information from the event parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_emails.onSendEmail', function($event) {\n    // if the order's locale is US English, change the email's From address.\n    if ($event->params['order'] && $event->params['order']->orderLocale == 'en_us') {\n        $event->params['craftEmail']->fromEmail = 'usa@usa-example.com';\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Utility Twig Filters in Craft CMS\nDESCRIPTION: Miscellaneous utility Twig filters in Craft CMS for tasks like encryption, HTTP date formatting, and HTML input ID formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'secure-string'|encenc }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = 'foo bar baz'|explodeClass %}\n{# Result: ['foo', 'bar', 'baz'] #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set styles = 'font-weight: bold; color: red;'|explodeStyle %}\n{# Result: {'font-weight': 'bold', 'color': 'red'} #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"foo\" value=\"{{ 'bar'|hash }}\">\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% header \"Expires: \" ~ expiry|httpdate %}\n{# Output: Expires: Thu, 08 Apr 2021 13:00:00 GMT #}\n\n{% header \"Expires: \" ~ expiry|httpdate('CET') %}\n{# Output: Expires: Thu, 08 Apr 2021 21:00:00 GMT #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set name = 'input[name]' %}\n<input type=\"text\" name=\"{{ name }}\" id=\"{{ name|id }}\">\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce via Composer CLI\nDESCRIPTION: Commands to install Craft Commerce plugin using Composer in a standard Craft 4 project environment. Requires an existing Craft 4 installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/install.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require -w craftcms/commerce\nphp craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Handling After Save Address Event in Craft Commerce\nDESCRIPTION: This snippet shows how to listen for the afterSaveAddress event, which is triggered after an address is saved. It can be used for actions like setting the address as default in an external system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_44\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\AddressEvent;\nuse craft\\commerce\\services\\Addresses;\nuse yii\\base\\Event;\n\nEvent::on(Addresses::class, Addresses::EVENT_AFTER_SAVE_ADDRESS, function(AddressEvent $e) {\n    // Do something - perhaps set this address as default in an external CRM system\n});\n```\n\n----------------------------------------\n\nTITLE: Requiring Specific Craft CMS Edition in Twig\nDESCRIPTION: Shows how to require a specific Craft CMS edition (Solo, Team, or Pro) before rendering template content. Returns a 404 error if the requirement is not met.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{# Require Craft Pro #}\n{% requireEdition 1 %}\n```\n\n----------------------------------------\n\nTITLE: Using Output Tags in Twig\nDESCRIPTION: This example demonstrates how to use output tags in Twig to print values in the rendered HTML. It displays the current time formatted as hours:minutes AM/PM.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/twig-primer.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<p>The current time is {{ now|date(\"g:i a\") }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Configuring Element Edit Routes in PHP\nDESCRIPTION: Routes configuration for element index and edit pages in Craft CMS, defining URL patterns and templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\n$event->rules['products'] = ['template' => 'my-plugin/products/_index.twig'];\n\n$event->rules['products/<elementId:\\d+>'] = 'elements/edit';\n```\n\n----------------------------------------\n\nTITLE: Prepending HTML Content with the prepend Filter in Twig\nDESCRIPTION: Shows how to prepend HTML content to an element with options to keep or replace existing elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_26\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'keep') }}\n{# Output: <div><p>Ipsum</p></div> #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'replace') }}\n{# Output: <div><p>Lorem</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Decoding Base64 Strings with base64_decode Filter in Twig\nDESCRIPTION: The 'base64_decode' filter decodes a base64-encoded string, which is useful for handling encoded data from various sources.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Q3JhZnQgQ01T' | base64_decode }}\n```\n\n----------------------------------------\n\nTITLE: Defining Image Transform in Twig Template\nDESCRIPTION: This snippet shows how to define an image transform directly in a Twig template. It creates an object with transform parameters including mode, width, height, quality, and position.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/image-transforms.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set thumb = {\n    mode: 'crop',\n    width: 100,\n    height: 100,\n    quality: 75,\n    position: 'top-center'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Using Functions in Twig Templates with hiddenInput Example\nDESCRIPTION: Demonstration of using a Craft-provided function (hiddenInput) to generate HTML markup for a hidden input field with a name and value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', 100) }}\n{# Output: <input type=\"hidden\" name=\"entryId\" value=\"100\"> #}\n```\n\n----------------------------------------\n\nTITLE: Updating Action Parameters in Twig Templates for Craft CMS 3\nDESCRIPTION: Shows how to update the 'action' parameter in forms from camelCase to kebab-case format as required in Craft CMS 3. The example demonstrates changing 'entries/saveEntry' to 'entries/save-entry'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\nOld:\n<input type=\"hidden\" name=\"action\" value=\"entries/saveEntry\">\n\nNew:\n<input type=\"hidden\" name=\"action\" value=\"entries/save-entry\">\n```\n\n----------------------------------------\n\nTITLE: Displaying Site Name in Craft CMS Twig\nDESCRIPTION: Shows how to output the site name using the siteName variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ siteName }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Using the 'numeric' test in Twig\nDESCRIPTION: Illustrates how to use the 'numeric' test to check if a variable is numeric in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'twenty-three' is numeric ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Message Parameter Translation Example\nDESCRIPTION: Demonstration of using placeholder parameters in translations with both Twig and PHP implementations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/sites.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Welcome back, {name}' => 'Willkommen zurück {name}',\n];\n```\n\n----------------------------------------\n\nTITLE: Creating Symbolic Links for Persistent Files in Atomic Deployment\nDESCRIPTION: This snippet shows how to create symbolic links for persistent files in an atomic deployment process. It links shared files like .env and uploads directory to the new release.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n# ...\n\nSHARED=\"$WORKING/shared\"\n\n# Create links to persistent files:\nln -s \"$RELEASE/.env\" \"$SHARED/.env\"\nln -s \"$RELEASE/web/uploads\" \"$SHARED/web/uploads\"\n\n# Create a symbolic link to the new release:\nln -sf $RELEASE $CURRENT\n```\n\n----------------------------------------\n\nTITLE: Development Mode Log Format Example in Craft CMS\nDESCRIPTION: Example of verbose, multi-line log format when devMode is enabled in Craft CMS, showing database connections and request context information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_1\n\nLANGUAGE: log\nCODE:\n```\n[2022-04-15T17:00:11+00:00] web.INFO: Opening DB connection: pgsql:host=db;dbname=db;port=5432 {\"trace\":[],\"memory\":9646256,\"category\":\"yii\\\\db\\\\Connection::open\"}\n[2022-04-15T17:00:11+00:00] web.WARNING: Some warning… {\"trace\":[],\"memory\":13577888,\"category\":\"application\"}\n[2022-04-15T17:00:11+00:00] web.INFO: Request context\n$_GET = []\n\n$_POST = []\n[…truncated] {\"ip\":\"172.18.0.1\"}\n```\n\n----------------------------------------\n\nTITLE: Migrating registerUserPermissions Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the registerUserPermissions plugin hook from Craft 2 to an event listener in Craft 3 for registering custom user permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUserPermissionsEvent;\nuse craft\\services\\UserPermissions;\nuse yii\\base\\Event;\n\nEvent::on(\n    UserPermissions::class,\n    UserPermissions::EVENT_REGISTER_PERMISSIONS,\n    function(RegisterUserPermissionsEvent $event) {\n        $event->permissions[\\Craft::t('plugin-handle', 'Vices')] = [\n            'drinkAlcohol' => ['label' => \\Craft::t('plugin-handle', 'Drink alcohol')],\n            'stayUpLate' => ['label' => \\Craft::t('plugin-handle', 'Stay up late')],\n        ];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Negation and Empty Checks in Twig\nDESCRIPTION: Shows how to use negation operators and check for empty values in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{# If we know the variable exists: #}\n{% if var is not empty %}\n  {# There's a value! #}\n{% endif %}\n\n{# If we aren't sure (and the above might blow up): #}\n{% if var is defined and var is not empty %}\n  {# The value is definitely useful! #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Adding Alias Suggestions to Environmental Settings Inputs in Twig\nDESCRIPTION: This Twig snippet extends the autosuggest input to also suggest aliases, which is appropriate for settings that accept URLs or file system paths.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/environmental-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ forms.autosuggestField({\n  // ...\n  suggestEnvVars: true,\n  suggestAliases: true\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Translation Category via App Config\nDESCRIPTION: Demonstrates how to add a translation category through the application configuration file. Specifies the same parameters as the programmatic approach but in the config/app.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/translation-categories.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// -- config/app.php --\nreturn [\n    'components' => [\n        'i18n' => [\n            'translations' => [\n                'my-category' => [\n                    'class' => craft\\i18n\\PhpMessageSource::class,\n                    'sourceLanguage' => 'en',\n                    'basePath' => dirname(__DIR__) . '/translations',\n                    'allowOverrides' => true,\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Product Owner in Twig with Variants Query\nDESCRIPTION: Example of querying variants and accessing their owner (product) using the new getOwner() method instead of the deprecated getProduct() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/upgrade.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set smallThings = craft.variants()\n  .weight('< 1')\n  .with(['owner'])\n  .all() %}\n\n<ul>\n  {% for smallThing in smallThings %}\n    <li>{{ smallThing.getOwner().title }}: {{ smallThing.title }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating an Embeddable Tip Template in Twig\nDESCRIPTION: Modifies the tip template to allow content customization through blocks when embedded.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n<div class=\"tip\">\n  <h6>Tip</h6>\n  {% block content %}\n    <p>{{ tipText }}</p>\n  {% endblock %}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Basic Multi-select Field Option Iteration in Twig\nDESCRIPTION: Demonstrates how to loop through selected options in a multi-select field and display them in an unordered list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-select-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n    {% for option in entry.multiselectFieldHandle %}\n        <li>{{ option }}</li>\n    {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Using the 'array' test in Twig\nDESCRIPTION: Demonstrates how to use the 'array' test to check if a variable is an array in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ ['oh', 'hello', 'there'] is array ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'oh hai' is array ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Disabling MinIO in Nitro\nDESCRIPTION: Commands to disable and remove MinIO from the Nitro environment. This will remove the MinIO service from Nitro and the hosts file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/minio.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnitro disable minio\n```\n\nLANGUAGE: bash\nCODE:\n```\nnitro apply\n```\n\n----------------------------------------\n\nTITLE: Displaying Email Field Value in Twig Template\nDESCRIPTION: This snippet demonstrates how to check if an email field has a value and display it as a clickable mailto link in a Twig template. It uses the user's email field as an example.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/email-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if user.email %}\n  <h3>Email</h3>\n  <a href=\"mailto:{{ user.email }}\">{{ user.email }}</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Defining Additional Order Table Attributes in Craft Commerce (PHP)\nDESCRIPTION: This hook allows plugins to add additional table columns to order indexes. It should return an array of attribute keys and labels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_defineAdditionalOrderTableAttributes()\n{\n    return array(\n        'foo' => 'Foo',\n        'bar' => 'Bar',\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Success Message Input with Custom Attributes in Craft CMS\nDESCRIPTION: Creates a hidden success message input field with additional custom HTML attributes specified in the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_44\n\nLANGUAGE: twig\nCODE:\n```\n{{ successMessageInput('Custom success message', {\n  id: 'success-message-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Customizing Hidden Input Attributes\nDESCRIPTION: The hiddenInput() function allows additional attributes to be set on the rendered tag by passing an options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('entryId', entry.id, {\n  id: 'entry-id-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Using the 'callable' test in Twig\nDESCRIPTION: Illustrates how to use the 'callable' test to check if a variable is callable in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ [entry, 'getStatus'] is callable ? 'true' : 'false' }}\n{# result: true #}\n```\n\n----------------------------------------\n\nTITLE: Fetching Enabled Countries as List in Twig\nDESCRIPTION: Demonstrates how to retrieve all enabled countries as a key-value list and create a select dropdown in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries.allEnabledCountriesAsList %}\n<select>\n{% for id, countryName in countries %}\n  <option value=\"{{ id }}\">\n    {{- countryName -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Querying a Single Global Set in Craft CMS GraphQL API\nDESCRIPTION: The 'globalSet' query is used to retrieve a single global set. It supports the same arguments as the 'globalSets' query for narrowing down the specific global set to retrieve.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_14\n\nLANGUAGE: GraphQL\nCODE:\n```\nglobalSet(\n  id: [QueryArgument]\n  uid: [String]\n  status: [String]\n  site: [String]\n  title: [String]\n  handle: [String]\n  # ... other arguments\n) {\n  # ... fields to return\n}\n```\n\n----------------------------------------\n\nTITLE: Registering Order Adjusters in Craft Commerce (PHP)\nDESCRIPTION: This hook allows registration of custom order adjusters. It should return an array of adjuster objects that will be used to adjust order totals.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_registerOrderAdjusters(){\n\n    $myAdjuster = new MyAdjuster;\n    return [$myAdjuster];\n\n}\n```\n\n----------------------------------------\n\nTITLE: Cart Management API Endpoints\nDESCRIPTION: Documentation for cart-related endpoints including forget-cart, get-cart, and load-cart operations. Details response formats for both HTML and JSON content types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n### POST cart/forget-cart\n### GET cart/get-cart\n\nParams:\n- number: Optional order number\n- forceSave: Optional boolean to force save\n```\n\n----------------------------------------\n\nTITLE: Implementing EnvAttributeParserBehavior in PHP for Craft CMS\nDESCRIPTION: This snippet shows how to attach EnvAttributeParserBehavior to a model in Craft CMS, declaring properties to be parsed as environment strings. It helps manage secrets and environment-specific settings in project config.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Model;\nuse craft\\behaviors\\EnvAttributeParserBehavior;\n\nclass Webhook extends Model\n{\n    public ?string $targetUrl;\n    public ?string $secret;\n    public ?string $secretParam;\n\n    protected function defineBehaviors(): array\n    {\n        return [\n            'parser' => [\n                'class' => EnvAttributeParserBehavior::class,\n                'attributes' => [\n                    'targetUrl',\n                    'secret',\n                ],\n            ],\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Ordered Lists with ol() Function\nDESCRIPTION: The ol() function outputs an array of items as an HTML ordered list, wrapping each item in <li> tags.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{% set titles = craft.entries()\n  .section('news')\n  .select('title')\n  .column() %}\n{{ ol(titles) }}\n{# Output:\n<ol>\n  <li>Shocking Foo</li>\n  <li>You Won't Believe This Bar</li>\n  <li>Ten Baz You Can't Live Without</li>\n</ol>\n#}\n```\n\n----------------------------------------\n\nTITLE: Prioritizing JavaScript File Inclusion with first Parameter\nDESCRIPTION: Example of using the first parameter with includeJsFile tag to prioritize a JavaScript file to be included before any other JavaScript files queued with this tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includejsfile.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% includeJsFile myJsFile first %}\n```\n\n----------------------------------------\n\nTITLE: Supporting Delta Saves in Craft CMS Custom Field\nDESCRIPTION: This code shows how to implement delta save support in a custom field type. It checks if the field is dirty (changed) before performing any processing in the afterElementSave() method, improving performance by skipping unnecessary operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/field-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function afterElementSave(ElementInterface $element, bool $isNew)\n{\n    if ($element->isFieldDirty()) {\n        // logic for handling saved element\n    }\n\n    parent::afterElementSave($element, $isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Widget Arguments Implementation\nDESCRIPTION: Example implementation of custom arguments for Widget element queries in GraphQL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\arguments\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends craft\\gql\\base\\ElementArguments\n{\n    public static function getArguments(): array\n    {\n        // append our argument to common element arguments and any from custom fields\n        return array_merge(parent::getArguments(), self::getContentArguments(), [\n            'approved' => [\n                'name' => 'approved',\n                'type' => Type::boolean(),\n                'description' => 'Narrows query results based on approved status.'\n            ],\n        ]);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Line Item Before Save\nDESCRIPTION: This event fires before a line item is saved to the database. It allows for pre-save modifications or validation of the line item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse yii\\base\\Event;\n\nEvent::on(LineItems::class, LineItems::EVENT_BEFORE_SAVE_LINE_ITEM, function(LineItemEvent $e) {\n    // Do something - perhaps let a third party service know about changes to an order\n});\n```\n\n----------------------------------------\n\nTITLE: Displaying Localized Country Name in Twig\nDESCRIPTION: Shows how to access and display the localized name of the selected country.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/country-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<h1>Mail from {{ entry.country.name }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Setting Site URL in Templates\nDESCRIPTION: Demonstrates how to use the site URL variable in template links.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<link rel=\"home\" href=\"{{ siteUrl }}\">\n```\n\n----------------------------------------\n\nTITLE: Implementing Status Getter for Craft CMS Elements\nDESCRIPTION: This method returns the current status of an element based on its properties. It checks a condition and returns the appropriate status string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_38\n\nLANGUAGE: php\nCODE:\n```\npublic function getStatus(): ?string\n{\n    if ($this->fooIsTrue) {\n        return 'foo';\n    }\n\n    return 'bar';\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Related Categories as a Flat List in Twig and PHP\nDESCRIPTION: Demonstrates how to fetch all related categories and display them as a flat list, showing the title and URL of each category.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/categories.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% for rel in relatedCategories %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedCategories = $entry->myFieldHandle->all();\nif (count($relatedCategories)) {\n    foreach ($relatedCategories as $rel) {\n        // do something with $rel->url and $rel->title\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Order Reference Display in Twig\nDESCRIPTION: Shows how to display an order's reference number using Twig template syntax\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/orders.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.reference }}\n```\n\n----------------------------------------\n\nTITLE: Adding Content After Main Discount Detail in Twig\nDESCRIPTION: This hook enables insertion of content after the main content in the discount detail view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.discounts.edit.content\" %}\n```\n\n----------------------------------------\n\nTITLE: Creating Objects with Twig's create Function\nDESCRIPTION: Shows how to use the create function to instantiate objects, either by class name or full object configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{# Pass in a class name #}\n{% set cookie = create('yii\\\\web\\\\Cookie') %}\n\n{# Or a full object configuration hash #}\n{% set cookie = create({\n  class: 'yii\\\\web\\\\cookie',\n  name: 'foo',\n  value: 'bar'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Resource URLs in Twig Templates\nDESCRIPTION: Using the resourceUrl function in Twig templates to generate URLs for resource files\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/resources.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ resourceUrl('path/to/file.ext') }}\n```\n\n----------------------------------------\n\nTITLE: Creating Forgot Password Form with Twig in Craft CMS\nDESCRIPTION: A Twig template that renders a forgot password form with CSRF protection, username/email input field, and error handling. The form submits to the users/sendPasswordResetEmail action and includes conditional display of validation errors and remembered username.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/forgot-password-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\" accept-charset=\"UTF-8\">\n  {{ getCsrfInput() }}\n  <input type=\"hidden\" name=\"action\" value=\"users/sendPasswordResetEmail\">\n  <input type=\"hidden\" name=\"redirect\" value=\"\">\n\n  <h3><label for=\"loginName\">Username or email</label></h3>\n  <input id=\"loginName\" type=\"text\" name=\"loginName\"\n      value=\"{% if loginName is defined %}{{ loginName }}{% else %}{{ craft.session.rememberedUsername }}{% endif %}\">\n\n  {% if errors is defined %}\n    <ul class=\"errors\">\n      {% for error in errors %}\n        <li>{{ error }}</li>\n      {% endfor %}\n    </ul>\n  {% endif %}\n\n  <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating Multi-Column Widgets Using Property in PHP\nDESCRIPTION: Example of configuring a widget to span multiple columns by overriding the protected $colspan property. This approach uses a fixed number of columns for the widget.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    protected $colspan = 2;\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Randomizing Array Elements with shuffle() in Craft CMS\nDESCRIPTION: Randomizes the order of elements in an array. Useful for displaying content in a random order such as promotions or featured items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_41\n\nLANGUAGE: twig\nCODE:\n```\n{% set promos = craft.entries().section('promos').all() %}\n{% set shuffledPromos = shuffle(promos) %}\n\n{% for promo in shuffledPromos %}\n  <div class=\"promo {{ promo.slug }}\">\n    <h3>{{ promo.title }}</h3>\n    <p>{{ promo.description }}</p>\n    <a class=\"cta\" href=\"{{ promo.ctaUrl }}\">{{ promo.ctaLabel }}</a>\n  </div>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Secrets in PHP for Craft CMS\nDESCRIPTION: Example of defining secrets in a PHP file for Craft CMS. This file returns an associative array containing sensitive information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'SUPER_SECRET_KEY' => '...',\n];\n```\n\n----------------------------------------\n\nTITLE: Override Named Transform Properties\nDESCRIPTION: Example of overriding specific properties of a named transform using a hash with additional parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% do asset.setTransform({\n  transform: 'thumb',\n  quality: 1\n}) %}\n<img src=\"{{ asset.url }}\"\n     width=\"{{ asset.width }}\"\n     height=\"{{ asset.height }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Requiring Admin Access with requireAdmin Tag in Craft CMS\nDESCRIPTION: Shows how to use the requireAdmin tag to ensure only admin users can access a page or section of a template. Non-admin users will be redirected to login.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% requireAdmin %}\n```\n\n----------------------------------------\n\nTITLE: Fetching All Countries in PHP\nDESCRIPTION: Shows how to retrieve all countries, including disabled ones, using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllCountries();\n\nforeach ($countries as $country) {\n    // $country->id\n    // $country->name\n}\n```\n\n----------------------------------------\n\nTITLE: Managing Multiple Systemd Queue Worker Instances\nDESCRIPTION: Commands to manage multiple instances of the Craft queue worker as systemd services, showing how to enable, start, and check the status of multiple instances.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\n# Install four instances of a service:\nsudo systemctl enable craft-queue-worker@{1..4}\n\n# Start those instances:\nsudo systemctl start craft-queue-worker@{1..4}\n\n# Get the status for any matching instances:\nsudo systemctl status \"craft-queue-worker@*\"\n```\n\n----------------------------------------\n\nTITLE: Dynamic Template Inclusion Based on Language in Twig\nDESCRIPTION: This snippet demonstrates how to dynamically include language-specific templates in Twig based on the current language setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% include '_share/footer-' ~ craft.app.language ~ '.twig' %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Multi-Environment Site URLs in Craft CMS with PHP\nDESCRIPTION: Sets up environment-specific siteUrl configurations for different locales in Craft CMS, allowing for separate development and production URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/localization-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    '*' => array(\n        // ...\n    ),\n    'my-project.test' => array(\n        // ...\n        'siteUrl' => array(\n            'en' => 'http://my-project.test/en/',\n            'de' => 'http://my-project.test/de/',\n        ),\n    ),\n    'my-project.com' => array(\n        // ...\n        'siteUrl' => array(\n            'en' => 'http://my-project.com/en/',\n            'de' => 'http://my-project.com/de/',\n        ),\n    ),\n);\n```\n\n----------------------------------------\n\nTITLE: Supervisor Commands for Managing Queue Worker Service\nDESCRIPTION: Terminal commands for managing the Craft queue worker with Supervisor, including entering the supervisor CLI, updating configurations, and applying changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\n# Enter the supervisor command line utility:\nsudo supervisorctl\n\n# Tell supervisord there is a new configuration available:\nsudo supervisorctl reread\n\n# Apply new configuration changes and restart affected services:\nsudo supervisorctl update\n```\n\n----------------------------------------\n\nTITLE: Registering CraftVariable Behavior in Plugin Init\nDESCRIPTION: Event handler setup to attach the custom behavior to Craft's template variable, enabling template access to element queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse yii\\base\\Event;\nuse craft\\events\\DefineBehaviorsEvent;\nuse craft\\web\\twig\\variables\\CraftVariable;\nuse mynamespace\\variables\\CraftVariableBehavior;\n\nEvent::on(\n    CraftVariable::class,\n    CraftVariable::EVENT_DEFINE_BEHAVIORS,\n    function(DefineBehaviorsEvent $e) {\n        $e->sender->attachBehaviors([\n            CraftVariableBehavior::class,\n        ]);\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Translating Dynamic Content in Twig Templates\nDESCRIPTION: Shows how to translate strings with variable interpolation in Twig templates using the |t filter. The example demonstrates translating the same cocktail ingredients string in a template context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/internationalization.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"Ingredients in a {cocktail}\"|t({\n  cocktail: cocktail.name\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Simple Twig Template for User Welcome Message\nDESCRIPTION: This Twig template demonstrates a basic welcome message that includes the user's first name. It's used as an example for functional testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\nHi {{ currentUser.firstName }},\n\nWelcome to this app!\n```\n\n----------------------------------------\n\nTITLE: Outputting Dropdown Field Value in Twig\nDESCRIPTION: Basic usage for displaying the selected value from a dropdown field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/dropdown-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.dropdownFieldHandle }}\n```\n\n----------------------------------------\n\nTITLE: Order Subject Line Template in Twig\nDESCRIPTION: A Twig template example for generating dynamic email subject lines using the order ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-status-emails.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nOrder #{{ order.id }} received.\n```\n\n----------------------------------------\n\nTITLE: Accessing Dropdown Field Data in Templates\nDESCRIPTION: Examples of accessing dropdown field data in templates using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/dropdown.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Basic Craft CLI Command Usage Example\nDESCRIPTION: Example of running the base Craft CLI command which displays all available command options. Shows the typical output including database, cache and other system commands.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/console-commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft\n\nThis is Yii version 2.0.36.\n\nThe following commands are available:\n\n- db                                    Performs database operations.\n    db/backup                           Creates a new database backup.\n    db/convert-charset                  Converts tables' character sets and collations. (MySQL only)\n    db/restore                          Restores a database backup.\n\n- cache                                 Allows you to flush cache.\n    cache/flush                         Flushes given cache components.\n    cache/flush-all                     Flushes all caches registered in the system.\n    cache/flush-schema                  Clears DB schema cache for a given connection\n                                        component.\n    cache/index (default)               Lists the caches that can be flushed.\n\n...\n\nTo see the help of each command, enter:\n\n  craft help <command-name>\n```\n\n----------------------------------------\n\nTITLE: Working with Booleans in Twig\nDESCRIPTION: Demonstrates how to define and use boolean values in Twig templates, primarily for use in conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set havingABud = true %}\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce in DDEV Environment\nDESCRIPTION: Commands to install Craft Commerce plugin using Composer within a DDEV development environment. These commands ensure execution occurs inside the appropriate DDEV container.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/install.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nddev composer require -w craftcms/commerce\nddev craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Commerce Transaction Types Reference\nDESCRIPTION: Code reference to the RequestResponseInterface class that handles payment gateway responses in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/transactions.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\ncommerce4:craft\\commerce\\base\\RequestResponseInterface\n```\n\n----------------------------------------\n\nTITLE: Rendering Failure Message Input with failMessageInput Function\nDESCRIPTION: Demonstrates how to use the failMessageInput function to render a hidden input element with a tamper-proof failure message for use in forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ actionInput('users/save-user') }}\n  {{ failMessageInput('Something went wrong when updating your profile.') }}\n\n  {# ... #}\n</form>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ failMessageInput('Something went wrong when updating your profile.', {\n  id: 'failure-message-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Parsing HTML Attributes with parseAttr Filter in Twig\nDESCRIPTION: Demonstrates the use of the parseAttr filter to extract attributes from an HTML tag. It returns an array of attribute names and values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n  <a class=\"text-xl pt-0\" href=\"/foo.pdf\" download>Save File</p>\n{% endset %}\n\n{{ content|parseAttr }}\n{# Result: [\"class\" => [\"text-xl\", \"pt-0\"], \"href\" => \"/foo.pdf\", \"download\" => true] #}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating File Structure for Craft CMS Asset Configuration\nDESCRIPTION: This snippet shows the recommended file structure for setting up asset sources in Craft CMS. It illustrates the relative path configuration for the 'images' folder in relation to the 'index.php' file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ncraft/\npublic_html/\n    index.php\n    images/\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Payment Gateway Type in Craft Commerce\nDESCRIPTION: This code snippet demonstrates how to register a custom payment gateway type using the registerGatewayTypes event in a plugin or custom module's init() method. It adds the custom gateway class to the list of available gateway types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/payment-gateway-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\commerce\\services\\Purchasables;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gateways::class,\n    Gateways::EVENT_REGISTER_GATEWAY_TYPES,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyGateway::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring CRAFT_REBRAND_PATH in PHP\nDESCRIPTION: Overrides the path where the control panel's Login Page Logo and Site Icon are stored. This example uses a top-level 'rebrand/' directory for these assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n// Use a top-level `rebrand/` directory for the site logo + icon:\ndefine('CRAFT_REBRAND_PATH', '@root/rebrand');\n```\n\n----------------------------------------\n\nTITLE: Creating a Site Navigation in Craft CMS Twig\nDESCRIPTION: Demonstrates how to create a navigation menu for all sites in the same group as the current site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n<nav>\n  <ul>\n    {% for site in currentSite.group.sites %}\n      <li><a href=\"{{ alias(site.baseUrl) }}\">{{ site.name }}</a></li>\n    {% endfor %}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Displaying Image Assets with Thumbnails in Twig\nDESCRIPTION: Example of iterating through image assets using craft.assets with the 'kind' parameter to filter for images only. Creates a list of thumbnail images with alt text.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.assets.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for image in craft.assets.kind('image') %}\n  <li><img src=\"{{ image.getUrl('thumb') }}\" alt=\"{{ image.title }}\"></li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Countries by Tax Zone ID in Twig\nDESCRIPTION: Demonstrates how to retrieve countries within a specific tax zone and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries.countriesByTaxZoneId(taxZoneId) %}\n<select name=\"country\">\n{% for country in countries %}\n  <option value=\"{{ country.id }}\">\n    {{- country.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Controller Action with Error Handling\nDESCRIPTION: Example of a controller action implementing validation, error handling, and response management.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/controllers.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientsController extends BaseController\n{\n    public function actionSaveIngredient()\n    {\n        $this->requirePostRequest();\n\n        $ingredient = new CocktailRecipes_IngredientModel();\n\n        // ...\n\n        if (craft()->cocktailRecipes_ingredients->saveIngredient($ingredient))\n        {\n            craft()->userSession->setNotice(Craft::t('Ingredient saved.'));\n            $this->redirectToPostedUrl();\n        }\n        else\n        {\n            craft()->userSession->setError(Craft::t('Couldn't save ingredient.'));\n            craft()->urlManager->setRouteVariables(array(\n               'ingredient' => $ingredient\n            ));\n        }\n    }\n```\n\n----------------------------------------\n\nTITLE: Maintaining Existing Assets While Uploading New Ones in Twig\nDESCRIPTION: This snippet illustrates how to maintain existing asset relationships while allowing new file uploads. It iterates over existing asset IDs and includes them as hidden inputs, followed by a file input for new uploads.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Provide each existing asset ID in the array of field data #}\n{% for relatedAssetId in entry.myFieldHandle.ids() %}\n  {{ input(\n    'hidden',\n    'fields[myFieldHandle][]',\n    relatedAssetId\n  ) }}\n{% endfor %}\n\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Using unshift Filter to Prepend Items to Arrays in Twig\nDESCRIPTION: Demonstrates the unshift filter which prepends one or more items to the beginning of an array and returns the new array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_40\n\nLANGUAGE: twig\nCODE:\n```\n{% set array1 = ['foo'] %}\n{% set array2 = array1|unshift('bar', 'baz') %}\n{# Result: ['bar', 'baz', 'foo'] #}\n```\n\n----------------------------------------\n\nTITLE: Using Booleans in Twig\nDESCRIPTION: Explains how to define and use boolean values in Twig, including their usage in conditionals and how they are converted when output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set havingABud = true %}\n```\n\n----------------------------------------\n\nTITLE: Using snake Filter for Snake Case Formatting in Twig\nDESCRIPTION: Demonstrates the snake filter which returns a string formatted in snake_case, converting spaces to underscores.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|snake }}\n{# Output: foo_bar #}\n```\n\n----------------------------------------\n\nTITLE: Configuring File Permissions in PHP\nDESCRIPTION: Sets default file and folder permissions for newly created files and directories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\n'defaultFilePermissions' => 0744,\n'defaultFolderPermissions' => 0744,\n```\n\n----------------------------------------\n\nTITLE: Fetching Specific Tax Categories in PHP\nDESCRIPTION: Demonstrates various methods to retrieve specific tax categories, including the default category, by ID, and by handle using the TaxCategories service in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Get a reference to the service for brevity below\n$taxCategories = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories();\n\n// Get the default tax category\n$category = $taxCategories->getDefaultTaxCategory();\n\n// Get tax category with an ID of `123`\n$category = $taxCategories->getTaxCategoryById(123);\n\n// Get tax category with a handle of `general`\n$category = $taxCategories->getTaxCategoryByHandle('general');\n```\n\n----------------------------------------\n\nTITLE: Iterating Over Customer Addresses in Twig for Craft Commerce\nDESCRIPTION: This code shows how to loop through a customer's addresses from the Customer Info field. It displays the first name for each address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-info-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for address in user.customerInfo.addresses %}\n  {{ address.firstName }}<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Viewing Current Sequence Number Without Incrementing in Craft CMS\nDESCRIPTION: Displays the current value of a sequence without incrementing it by setting the next parameter to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_40\n\nLANGUAGE: twig\nCODE:\n```\n<h5><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h5>\n<p>{{ seq('hits:' ~ entry.id, next=false) }} views</p>\n```\n\n----------------------------------------\n\nTITLE: Updating Multiple Plugins in Craft CMS\nDESCRIPTION: Command to update multiple specific plugins simultaneously by listing their handles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/updating.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update element-api commerce\n```\n\n----------------------------------------\n\nTITLE: Configuring JavaScript Compression in PHP\nDESCRIPTION: Controls whether compressed JavaScript files should be used to reduce page load times.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n'useCompressedJs' => false,\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft Site URL Constants\nDESCRIPTION: Shows two methods of setting the site URL constant, including a basic URL and one using environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_SITE_URL', \"http://my-project.tld/nl/\");\n```\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_SITE_URL', \"http://{host}/nl\");\n```\n\n----------------------------------------\n\nTITLE: Implementing addEntryActions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom element actions to the entry index page. Returns an array of element action class handles or instantiated IElementAction objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\npublic function addEntryActions($source)\n{\n    return array(\n        'Foo',\n        new BarElementAction(),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Product from Products Field\nDESCRIPTION: Demonstrates how to retrieve a single product from a Products field using the one() method, useful when the field is configured to allow only one selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = entry.myFieldHandle.one() %}\n{% if product %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Folder Structure Example for GraphQL Extension\nDESCRIPTION: Example directory structure for organizing GraphQL-related files when extending Craft CMS with a custom 'Widget' element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nsrc/gql/\n├── arguments/\n│   └── elements/\n│       └── Widget.php\n├── directives/\n│   └── BarTheFoo.php\n├── interfaces/\n│   └── elements/\n│       └── Widget.php\n├── mutations/\n│   └── Widget.php\n├── queries/\n│   └── Widget.php\n├── resolvers/\n│   └── elements/\n│       └── Widget.php\n│   └── mutations/\n│       └── Widget.php\n└── types/\n    ├── elements/\n    │    └── Widget.php\n    ├── generators/\n    │   └── WidgetType.php\n    └── input/\n        └── Widget.php\n```\n\n----------------------------------------\n\nTITLE: Creating Categories Field for Post Topics in Craft CMS\nDESCRIPTION: Steps to set up a categories field for assigning topics to blog posts. The field is configured to use the previously created 'Topics' category group.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<BrowserShot\n    url=\"https://tutorial.ddev.site/admin/settings/sections/new\"\n    id=\"newCategoriesField\"\n    :poi=\"{\n        name: [44.5, 5, 'A'],\n        handle: [44.5, 12, 'B'],\n        type: [44.5, 33, 'C'],\n        source: [44.5, 42, 'D'],\n    }\"\n    :link=\"false\"\n    caption=\"Settings for a new categories field.\">\n<img src=\"../images/new-categories-field.png\" alt=\"Screenshot of the categories field settings\" />\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: Outputting Product Name in Twig Template\nDESCRIPTION: Demonstrates how to output a product's name in a template using the Commerce_ProductModel object. When the product object is output directly, it returns the product's name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/product-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ product }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Checking Lightswitch Field State in Twig Template\nDESCRIPTION: This snippet demonstrates how to check the state of a Lightswitch field in a Twig template. It tests if the field is in the 'on' position and outputs different content based on the result.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/lightswitch-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.lightswitchFieldHandle %}\n  <p>I'm on!</p>\n{% else %}\n  <p>I'm off.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Displaying Countries in a Select Dropdown using Twig\nDESCRIPTION: This code creates a select dropdown with all countries available in Craft Commerce. It uses the craft.commerce.countries.allCountries method to retrieve country objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for country in craft.commerce.countries.allCountries %}\n  <option value=\"{{ country.id }}\">{{ country.name }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Conditional Rendering of Plain Text Field in Twig\nDESCRIPTION: Shows how to conditionally render a plain text field's value, including its label, in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.summary %}\n  <h3>Summary</h3>\n  <p>{{ entry.summary }}</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript at End of Body\nDESCRIPTION: Demonstrates using the POS_END constant to register JavaScript at the end of the <body> element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Goodbye, Craft!');\n{% endset %}\n\n{% do view.registerJs(js, POS_END) %}\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Configurations on macOS and Linux\nDESCRIPTION: This optional command removes all Nitro machine configurations on macOS and Linux systems.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf ~/.nitro\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount Information from Coupon Code in Twig\nDESCRIPTION: A Twig snippet that retrieves the discount associated with a coupon code using craft.commerce.discounts.getDiscountByCode() and displays its name and description if a discount is found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/coupon-codes.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# @var discount craft\\commerce\\models\\Discount #}\n{% set discount = craft.commerce.discounts.getDiscountByCode(cart.couponCode) %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring DDEV Mailpit SMTP Settings in Bash\nDESCRIPTION: This snippet shows environment variables set by DDEV for Mailpit SMTP configuration. These variables can be used in the adapter configuration or consumed via application configuration in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/mail.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nMAILPIT_SMTP_HOSTNAME=\"127.0.0.1\"\nMAILPIT_SMTP_PORT=\"1025\"\n```\n\n----------------------------------------\n\nTITLE: Optimizing Products Field Usage in Twig\nDESCRIPTION: Shows a best practice for working with Products fields by assigning the field to a variable and then using it in multiple places within the template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.productsFieldHandle %}\n\n{% if products | length %}\n  <h3>Some great products</h3>\n  {% for product in products %}\n    ...\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Custom Status Code Redirect in Twig\nDESCRIPTION: Shows how to perform a permanent redirect (301) to a pricing page using the redirect tag with an explicit status code parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/redirect.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% redirect \"pricing\" 301 %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Aliases in Craft CMS PHP Configuration\nDESCRIPTION: PHP configuration snippet that defines webroot and uploads aliases for asset handling in Craft CMS. It sets up filesystem paths and URLs for uploaded assets using environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn GeneralConfig::create()\n    // ...\n    ->aliases([\n        '@webroot' => dirname(__DIR__) . '/web',\n        '@uploads' => App::env('PRIMARY_SITE_URL') . '/uploads',\n    ])\n;\n```\n\n----------------------------------------\n\nTITLE: Naming Convention for Craft CMS Plugin Service Files\nDESCRIPTION: Demonstrates the proper file naming pattern for Craft CMS plugin services, using the format [PluginHandle]_[ServiceName]Service.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/services.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n[PluginHandle]_[ServiceName]Service.php\n```\n\n----------------------------------------\n\nTITLE: Creating Base Layout Template in Twig\nDESCRIPTION: Base layout template that defines the HTML structure and common elements like language, title, viewport settings, and CSS inclusion. Uses Twig blocks for content insertion.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"{{ craft.app.language }}\">\n  <head>\n    <meta charset=\"utf-8\"/>\n    <title>{{ siteName }}</title>\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\n\n    {% do craft.app.view.registerCssFile('@web/styles.css') %}\n  </head>\n  <body>\n    {% block content %}\n      {# Nothing here, yet! #}\n    {% endblock %}\n  </body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Listing Gateways in Craft Commerce CLI\nDESCRIPTION: This command displays a table of configured gateways, showing their ID, name, handle, enabled status, type, and UUID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/gateways/list\n    ID  Name    Handle  Enabled  Type                                           UUID                                \n    --  ------  ------  -------  ---------------------------------------------  ------------------------------------\n    1   Dummy   dummy   No       craft\\commerce\\gateways\\Dummy                  45462c5b-90e1-4563-9a80-dc4241ee0299\n    2   Stripe  stripe  Yes      craft\\commerce\\stripe\\gateways\\PaymentIntents  55df7465-9e09-4765-a93b-143f1b4f1f5f\n```\n\n----------------------------------------\n\nTITLE: Adding Error to Line Item in PHP for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to add an error to a line item when validating a purchasable in Craft Commerce. It's used within the validateLineItem method of a Purchasable interface implementation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/purchasables.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$lineItem->addError(['options'=>'not valid options submitted for this purchasable']);\n```\n\n----------------------------------------\n\nTITLE: Get Next Enabled Sibling in Twig\nDESCRIPTION: Demonstrates how to find the next enabled sibling category using craft.categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set nextSibling = craft.categories.positionedAfter(category).order('lft asc').first() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Required PHP Constants\nDESCRIPTION: PHP code showing the required constants that must be defined in tests/_bootstrap.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/config-options.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_STORAGE_PATH', '/path/to/storage');\ndefine('CRAFT_TEMPLATES_PATH', '/path/to/templates');\ndefine('CRAFT_CONFIG_PATH', '/path/to/config');\ndefine('CRAFT_MIGRATIONS_PATH', '/path/to/migrations');\ndefine('CRAFT_TRANSLATIONS_PATH', '/path/to/translations');\ndefine('CRAFT_VENDOR_PATH', '/path/to/vendor');\n```\n\n----------------------------------------\n\nTITLE: Matching Specific Postal Codes with Twig Expression in Craft Commerce\nDESCRIPTION: This Twig expression checks if the postal code matches any of the specified codes ('NG102', 'ZZ200', 'CC101'). It's used in the 'Postal Code Formula' address condition for shipping zones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/shipping.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\npostalCode in ['NG102', 'ZZ200', 'CC101']\n```\n\n----------------------------------------\n\nTITLE: Displaying States in a Select Dropdown using Twig\nDESCRIPTION: This code creates a select dropdown with all states available in Craft Commerce. It uses the craft.commerce.states method to retrieve state objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states %}\n  <option value=\"{{ state.id }}\">{{ state.name }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Fetching Country by ID in Twig\nDESCRIPTION: Demonstrates how to retrieve a specific country by its ID using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% set country = craft.commerce.countries.countryById(countryId) %}\n{# country.id #}\n{# country.name #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Lightswitch Fields in Craft CMS\nDESCRIPTION: Demonstrates how to query for elements with a specific Lightswitch field value using both Twig and PHP. The example fetches entries with the Lightswitch field enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/lightswitch-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with the Lightswitch field enabled #}\n{% set entries = craft.entries()\n  .myFieldHandle(true)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with the Lightswitch field enabled\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(true)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Basic User Output in Twig\nDESCRIPTION: Demonstrates how to output a user's username by directly using the UserModel object in a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/usermodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<p>Written by {{ entry.author }}</p>\n```\n\n----------------------------------------\n\nTITLE: Extending Inventory Location Edit Screen in Twig\nDESCRIPTION: This hook enables adding content after address fields in the inventory location edit screen.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.inventoryLocation.edit\" %}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Search Query in Craft CMS\nDESCRIPTION: Examples of using a dynamic search query from a request parameter in Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/searching.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the user's search query from the 'q' query string param #}\n{% set searchQuery = craft.app.request.getQueryParam('q') %}\n\n{# Fetch entries that match the search query #}\n{% set results = craft.entries()\n  .search(searchQuery)\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get the user's search query from the 'q' query string param\n$searchQuery = Craft::$app->getRequest()->getParam('q');\n\n// Fetch entries that match the search query\n$results = \\craft\\elements\\Entry::find()\n    ->search($searchQuery)\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Updating Organization Fields in Twig for Commerce 4\nDESCRIPTION: This snippet shows how to update the input fields for business name and tax ID when migrating from Commerce 3 to Commerce 4. It demonstrates the change in property names from 'business' to 'organization'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{# @var model craft\\commerce\\models\\Address #}\n{{ input('text', 'address[businessName]', address.businessName ?? '') }}\n{{ input('text', 'address[businessTaxId]', address.businessTaxId ?? '') }}\n\n{# Commerce 4 #}\n{# @var address craft\\elements\\Address #}\n{{ input('text', 'organization', address.organization ?? '') }}\n{{ input('text', 'organizationTaxId', address.organizationTaxId ?? '') }}\n```\n\n----------------------------------------\n\nTITLE: Adding CSRF Protection to Forms in Craft CMS 3\nDESCRIPTION: Demonstrates how to manually add CSRF token parameters to forms in Craft CMS 3, which has CSRF protection enabled by default. The example shows how to retrieve and use the CSRF parameter name and token value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set csrfParam = craft.app.request.csrfParam %}\n{% set csrfToken = craft.app.request.csrfToken %}\n<input type=\"hidden\" name=\"{{ csrfParam }}\" value=\"{{ csrfToken }}\">\n```\n\n----------------------------------------\n\nTITLE: Creating Global Set Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of a Global Set fixture data file in PHP for Craft CMS. It shows how to set up a global set with a handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'handle' => 'aHandle',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: GraphQL Query Execution\nDESCRIPTION: Executes GraphQL queries against the full schema with support for complex queries including transformations and formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{% set result = gql('{\n  entries (section: \"news\", limit: 2, orderBy: \"dateCreated DESC\") {\n    postDate @formatDateTime (format: \"Y-m-d\")\n    title\n    url\n    ... on news_article_Entry {\n      shortDescription\n      featuredImage {\n        url @transform (width: 300, immediately: true)\n        altText\n      }\n    }\n  }\n}') %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Complex Types in Craft CMS PHP\nDESCRIPTION: Example showing how to configure arrays and closures in Craft CMS general config. Demonstrates setting up custom file types and post-login redirect logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\n\nreturn GeneralConfig::create()\n    // Arrays:\n    ->extraFileKinds([\n        'fonts' => [\n            'extensions' => ['otf', 'ttf', 'woff', 'woff2'],\n        ],\n    ])\n    // Functions or \"closures\":\n    ->postLoginRedirect(function($siteHandle) {\n        // Perform tests on the signed-in User:\n        $user = Craft::$app->getUser()->getIdentity();\n\n        // Send to their account, if their profile is incomplete...\n        if (empty($user->someProfileField)) {\n            return 'account/profile';\n        }\n\n        // ...or the homepage, by default:\n        return '/';\n    });\n```\n\n----------------------------------------\n\nTITLE: Setting Selected Tab and Breadcrumbs in Twig\nDESCRIPTION: Shows how to set the selected tab and breadcrumbs for a plugin's control panel page in Craft CMS using Twig variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set selectedTab = 'recent' %}\n\n{% set crumbs = [\n  { label: \"Cocktail Recipes\"|t, url: url('cocktailrecipes') },\n  { label: recipe.groupName|t, url: url('cocktailrecipes/recipes/'~recipe.groupHandle) }\n] %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Console Greet Controller\nDESCRIPTION: Example console controller implementation with custom actions, options, and output formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/commands.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nnamespace modules\\console\\controllers;\n\nuse craft\\console\\Controller;\nuse craft\\helpers\\Console;\nuse yii\\console\\ExitCode;\n\n/**\n * Greet Controller\n */\nclass GreetController extends Controller\n{\n    public $defaultAction = 'developer';\n\n    /**\n     * @var string|null The name used when referring to the runner.\n     */\n    public ?string $who = null;\n\n    public function options($actionID): array\n    {\n        $options = parent::options($actionID);\n\n        // Always allow a --who flag:\n        $options[] = 'who';\n\n        switch ($actionID) {\n            case 'developer':\n                // Action-specific arguments:\n                // $options[] = '...';\n                break;\n        }\n\n        return $options;\n    }\n\n    /**\n     * Issues a greeting to new Craft developers.\n     */\n    public function actionDeveloper(): int\n    {\n        $who = $this->who ?? 'world';\n\n        $this->stdout(\"Hello, {$who}!\", Console::FG_GREEN);\n\n        return ExitCode::OK;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating Product Queries with Shipping Category in Twig\nDESCRIPTION: Example showing how to update product queries that use shipping category parameters by replacing direct parameter usage with hasVariant() method. The new approach reflects the shift of shipping-related parameters to variant queries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/upgrade.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set perishableShippingCategory = craft.commerce.shippingCategories.getShippingCategoryByHandle('perishable') %}\n\n{% set perishableGoods = craft.products()\n  .shippingCategory(perishableShippingCategory)\n  .all() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set perishableShippingCategory = craft.commerce.shippingCategories.getShippingCategoryByHandle('perishable') %}\n\n{% set perishableGoods = craft.products()\n  .hasVariant({\n    shippingCategory: perishableShippingCategory,\n  })\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Disabling PHP Error Logging in Craft CMS\nDESCRIPTION: Sets CRAFT_LOG_PHP_ERRORS to false to prevent Craft from configuring PHP's log_errors and error_log settings, letting the settings in php.ini handle PHP error logging instead.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Don't send PHP error logs to storage/logs/phperrors.log\ndefine('CRAFT_LOG_PHP_ERRORS', false);\n```\n\n----------------------------------------\n\nTITLE: Displaying Cart Total in Multiple Payment Currencies\nDESCRIPTION: Shows how to iterate through all available payment currencies and display the cart's outstanding balance converted to each currency using the commerceCurrency filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/twig-filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% for currency in craft.commerce.paymentCurrencies %}\n  Total in {{ currency.iso|upper }}: {{ cart.outstandingBalance|commerceCurrency(\n    currency,\n    convert=true\n  ) }}<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Updating GraphQL Field Definitions in Craft CMS 4\nDESCRIPTION: This snippet demonstrates how to update the getFieldDefinitions() method to use the new Gql::prepareFieldDefinitions() in Craft 4, replacing the deprecated TypeManager::prepareFieldDefinitions() from Craft 3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\npublic static function getFieldDefinitions(): array\n{\n    return craft\\gql\\TypeManager::prepareFieldDefinitions([\n        // ...\n    ], self::getName());\n}\n\n// Craft 4\npublic static function getFieldDefinitions(): array\n{\n    return Craft::$app->getGql()->prepareFieldDefinitions([\n        // ...\n    ], self::getName());\n}\n```\n\n----------------------------------------\n\nTITLE: Updating a Plugin's Composer Dependencies\nDESCRIPTION: Commands to remove and re-require a plugin when its composer.json dependencies change. This is necessary because Composer may ignore path-based dependency changes during updates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\n# Remove the plugin package from your project:\ncomposer remove package/name\n\n# Re-require the plugin package, and allow updates to dependencies:\ncomposer require package/name -w\n```\n\n----------------------------------------\n\nTITLE: Structuring JSON Response for Deleting Customer Address in Craft Commerce\nDESCRIPTION: Defines the JSON structure for successful and failed customer address deletion responses, including a success status and error message when applicable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"success\": true\n}\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"error\": \"Error message\"\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Strings in Twig\nDESCRIPTION: Demonstrates how to define and use strings in Twig, including single and double quotes, escaping characters, and string concatenation and interpolation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set greeting = \"Hello there\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set heading = 'Try the new 7\" folding tablet' %}\n{% set subheading = \"The original Microsoft Surface was 3.5' long.\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set subheading = \"The original Microsoft Surface was 3' 6\\\" long.\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{# Concatenation #}\n{% set greeting = \"Hello, \" ~ currentUser.friendlyName %}\n\n{# Interpolation #}\n{% set greeting = \"Hello, #{currentUser.friendlyName}\" %}\n```\n\n----------------------------------------\n\nTITLE: Storing Assets Field Results in a Variable in Craft CMS\nDESCRIPTION: Demonstrates storing the assets from a field in a variable for easier reuse within a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsFieldHandle %}\n\n{% if assets | length %}\n\n  <h3>Some great assets</h3>\n  {% for asset in assets %}\n    {{ asset.url }}\n  {% endfor %}\n\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Adding Alternate Form Actions in Craft CMS Control Panel\nDESCRIPTION: This snippet demonstrates how to add alternate form actions to a Craft CMS control panel form by defining a 'formActions' variable with an array of action objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set formActions = [\n  {\n    label: 'Save and continue editing'|t('plugin-handle'),\n    redirect: 'plugin-handle/edit/{id}',\n    retainScroll: true,\n    shortcut: true,\n  },\n  {\n    label: 'Save and add another'|t('plugin-handle'),\n    redirect: 'plugin-handle/new',\n    shortcut: true,\n    shift: true,\n  },\n  {\n    label: 'Delete'|t('plugin-handle'),\n    confirm: 'Are you sure you want to delete this?'|t('plugin-handle'),\n    redirect: 'plugin-handle',\n    destructive: true,\n  },\n] %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Item Bag in Craft Commerce (PHP)\nDESCRIPTION: This hook allows modification of the Omnipay ItemBag object that will be sent to the gateway. It provides access to the items and the order for customization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_modifyItemBag($items, $order){\n\n  // Modify the $items\n\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Product Snapshot Data After Capture\nDESCRIPTION: This event handler allows modification of a product's captured snapshot data after it has been collected. It provides access to the product and its field data for customization.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Variant;\nuse craft\\commerce\\events\\CustomizeProductSnapshotDataEvent;\n\nEvent::on(Variant::class, Variant::EVENT_AFTER_CAPTURE_PRODUCT_SNAPSHOT, function(CustomizeProductSnapshotFieldsEvent $e) {\n    $product = $e->product;\n    $data = $e->fieldData;\n    // Modify or redact captured `$data`\n});\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Services in Craft CMS\nDESCRIPTION: Demonstrates how to access plugin service methods from anywhere in the application using the craft() global function with the pluginName_serviceName format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/services.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncraft()->cocktailRecipes_ingredients->saveIngredient($ingredient);\n```\n\n----------------------------------------\n\nTITLE: Element Query Cloning Pattern in Twig\nDESCRIPTION: Shows how to properly clone element queries to maintain independent query states when executing variations of a base query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries().section('news') %}\n{% set articleEntries = clone(query).type('article').all() %}\n{% set totalEntries = query.count() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft CMS Using Closure in PHP\nDESCRIPTION: Example of configuring Craft CMS using a closure in a PHP config file. This sets aliases for the web root directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\n\nreturn function(GeneralConfig $config) {\n    return $config\n        ->aliases([\n            '@webroot' => dirname(__DIR__) . '/web',\n        ])\n        // ...\n    ;\n};\n```\n\n----------------------------------------\n\nTITLE: Adding Tips and Warnings to Field Layout Elements in PHP\nDESCRIPTION: Fields can provide additional contextual information through tip and warning boxes displayed below the field markup. These strings support plain text or Markdown formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\npublic ?string $tip = null;\npublic ?string $warning = null;\n```\n\n----------------------------------------\n\nTITLE: Registering UI Elements in Craft CMS\nDESCRIPTION: Shows how to register UI elements using the EVENT_DEFINE_UI_ELEMENTS event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineFieldLayoutElementsEvent;\nuse craft\\models\\FieldLayout;\nuse yii\\base\\Event;\n\nEvent::on(\n    FieldLayout::class,\n    FieldLayout::EVENT_DEFINE_UI_ELEMENTS,\n    function(DefineFieldLayoutFieldsEvent $event) {\n        $event->elements[] = SynchronizationStatus::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Manually Generating Project Config YAML Files via CLI\nDESCRIPTION: This command demonstrates how to manually trigger YAML file generation for Project Config using the Craft CLI. This is useful when automatic generation is disabled and you need to update the YAML files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/write\n```\n\n----------------------------------------\n\nTITLE: Implementing User Fixtures in Craft CMS\nDESCRIPTION: Example of a User fixture data file that creates a user with a username and email address. This is useful for testing features that require authenticated users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'username' => 'User',\n        'email' => 'info@domain.tld',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Reference\nDESCRIPTION: Simple example showing how to access an order's reference number in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.reference }}\n```\n\n----------------------------------------\n\nTITLE: Recursive Array Merging in Twig\nDESCRIPTION: Demonstrates recursive array merging using the optional 'recursive' parameter with the merge filter, which uses ArrayHelper::merge() to handle nested arrays or hashes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = {\n  'rebellion': { 'Bespin': 'Calrissian', 'Hoth': 'Organa', 'Crait': 'Organa' },\n  'empire': { 'Coruscant': 'Palpatine', 'Endor': 'Palpatine' }\n} %}\n{% set items = items|merge({\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n}) %}\n{# Result: {\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n} #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set items = {\n  'rebellion': { 'Bespin': 'Calrissian', 'Hoth': 'Organa', 'Crait': 'Organa' },\n  'empire': { 'Coruscant': 'Palpatine', 'Endor': 'Palpatine' }\n} %}\n{% set items = items|merge({\n  'rebellion': { 'Endor': 'Solo/Organa' },\n  'empire': { 'Bespin': 'Vader', 'Hoth': 'Veers' }\n}, true) %}\n{# Result: {\n  'rebellion': {\n    'Bespin': 'Calrissian',\n    'Hoth': 'Organa',\n    'Crait': 'Organa',\n    'Endor': 'Solo/Organa'\n  },\n  'empire': {\n    'Coruscant': 'Palpatine',\n    'Endor': 'Palpatine',\n    'Bespin': 'Vader',\n    'Hoth': 'Veers'\n  }\n} #}\n```\n\n----------------------------------------\n\nTITLE: Embedding Templates with Twig Embed Tag\nDESCRIPTION: Illustrates how to embed templates using Twig's embed tag, which combines the behavior of include and extends in Craft CMS templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating-overview.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% embed \"foo/bar\" %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Available Updates in Craft CMS via Terminal\nDESCRIPTION: This command checks for available updates for Craft CMS and its plugins, including Commerce. It displays a list of updates without applying them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/update.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update\n```\n\n----------------------------------------\n\nTITLE: Compact Syntax in Object Templates\nDESCRIPTION: Demonstrates the compact syntax used in object templates for referencing attributes of the passed object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{slug}\n{postDate.format('Y')}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Indexes in Craft CMS Record\nDESCRIPTION: Example of implementing the defineIndexes() method in a Craft CMS record to set up database indexes. This shows how to create a unique compound index on multiple columns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/records.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    // ...\n\n    public function defineIndexes()\n    {\n        return array(\n            array('columns' => array('name', 'type'), 'unique' => true),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring CRAFT_CP for Control Panel Requests in PHP\nDESCRIPTION: Dictates whether the current request should be treated as a control panel request in Craft CMS. This example explicitly defines it as a control panel request.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft that this is a control panel request\ndefine('CRAFT_CP', true);\n```\n\n----------------------------------------\n\nTITLE: Getting States by Tax Zone ID in Craft Commerce\nDESCRIPTION: Retrieves all states belonging to a specific tax zone, returning an array of State objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for state in craft.commerce.states.statesByTaxZoneId(taxZoneId) %}\n  <option value=\"{{ state.id }}\">\n    {{- state.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->statesByTaxZoneId($taxZoneId);\nforeach ($states as $state) {\n    // $state->id\n    // $state->name\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Entry Sources in Craft CMS\nDESCRIPTION: Hook to modify the available sources for entries in the control panel. Adds status-based sources when in index context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyEntrySources(&$sources, $context)\n{\n    if ($context == 'index') {\n        $sources[] = array('heading' => 'Statuses');\n\n        $statuses = craft()\n            ->elements\n            ->getElementType(ElementType::Entry)\n            ->getStatuses();\n\n        foreach ($statuses as $status => $label) {\n            $sources['status:'.$status] = array(\n                'label' => $label,\n                'criteria' => array('status' => $status)\n            );\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Control Panel Language in Craft CMS (PHP)\nDESCRIPTION: Configures the defaultCpLanguage option to set the default language for rendering the control panel for users who haven't specified their Preferred Locale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_51\n\nLANGUAGE: php\nCODE:\n```\n'defaultCpLanguage' => 'en',\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Cart Address - Twig Template\nDESCRIPTION: Shows how to update an existing address on the cart by passing individual address properties. Includes form inputs for address fields and handles shipping address updates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.getCart() %}\n{% set address = cart.shippingAddress %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('text', 'shippingAddress[fullName]', address.fullName) }}\n  {{ input('text', 'shippingAddress[addressLine1]', address.addressLine1) }}\n\n  {# ... #}\n\n  <button>Save Shipping Info</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Canceling Subscriptions Form Template in Twig\nDESCRIPTION: Template for canceling an existing subscription. Posts to the commerce/subscriptions/cancel endpoint and includes gateway-specific cancellation form HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscription-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ hiddenInput('action', 'commerce/subscriptions/cancel') }}\n  {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n  {{ redirectInput('shop/services') }}\n\n  {{ subscription.plan.getGateway().getCancelSubscriptionFormHtml()|raw }}\n\n  <button type=\"submit\">Unsubscribe</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Creating a Config File to Override Plugin Settings in Craft CMS\nDESCRIPTION: Shows how to create a PHP configuration file in the project's config/ directory to override plugin settings. The file returns an array with the overridden values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'foo' => 'overriddenFooValue',\n    'bar' => 'overriddenBarValue',\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing registerSiteRoutes Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers custom front-end site routes. Returns an array mapping URL patterns to template paths or controller actions for the public site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\npublic function registerSiteRoutes()\n{\n    return array(\n        'cocktails/(?P<widgetId>\\d+)' => array('action' => 'cocktails/editCocktail'),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Environment Variables Configuration in PHP for Craft CMS\nDESCRIPTION: Setting up environment variables in the Craft CMS configuration file for use in asset source settings and other areas of the Control Panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-environment-configs.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    '*' => array(\n        // ...\n    ),\n\n    'my-project.test' => array(\n        // ...\n\n        'environmentVariables' => array(\n            'basePath' => '/users/brandon/Sites/my-project/public/',\n            'baseUrl'  => 'http://my-project.test/',\n        )\n    ),\n\n    'my-project.com' => array(\n        // ...\n\n        'environmentVariables' => array(\n            'basePath' => '/storage/av12345/www/public_html/',\n            'baseUrl'  => 'https://my-project.com/',\n        )\n    )\n);\n```\n\n----------------------------------------\n\nTITLE: Creating Asset Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of an Asset fixture data file in PHP for Craft CMS. It demonstrates how to set up an asset with a file path, filename, volume ID, and folder ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'tempFilePath' => 'path/to/_craft/storage/runtime/temp/product.jpg',\n        'filename' => 'product.jpg',\n        'volumeId' => $this->volumeIds['products'],\n        'folderId' => $this->folderIds['clothes'],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Installing CKEditor Plugin in Craft CMS\nDESCRIPTION: Craft CLI command to install the CKEditor plugin after adding it to the project dependencies.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nddev php craft plugin/install ckeditor\n```\n\n----------------------------------------\n\nTITLE: Overriding Craft CMS Plugin Settings in Configuration File\nDESCRIPTION: Shows how to override plugin settings using a PHP configuration file in the project's config/ folder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'foo' => 'overriddenFooValue',\n    'bar' => 'overriddenBarValue',\n];\n```\n\n----------------------------------------\n\nTITLE: Accessing Tag Model in Craft CMS 2 Event\nDESCRIPTION: Shows how to access the TagModel object in Craft CMS 2 events related to tags. This object represents the tag being saved.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$tag = $event->params['tag'];\n```\n\n----------------------------------------\n\nTITLE: Checking for a Specific Checkbox Value in Twig\nDESCRIPTION: Shows how to check if a specific option is selected in a Checkboxes field using the contains method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/checkboxes-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.checkboxFieldHandle.contains('tequila') %}\n  <p>Really?</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Custom Line Item Pricing in Commerce 2\nDESCRIPTION: Example showing how to customize line item pricing in Commerce 2 by modifying price and saleAmount properties. The salePrice is automatically calculated as the sum of these values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/upgrading.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\LineItemEvent;\nuse craft\\commerce\\services\\LineItems;\nuse craft\\commerce\\models\\LineItem;\nuse yii\\base\\Event;\n\nEvent::on(\n    LineItems::class,\n    LineItems::EVENT_POPULATE_LINE_ITEM,\n    function(LineItemEvent $event) {\n        // @var LineItem $lineItem\n        $lineItem = $event->lineItem;\n\n        // setting custom price\n        $lineItem->price = 20;\n\n        // setting amount to be discounted from price\n        $lineItem->saleAmount = -5;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Custom Exit Message Implementation\nDESCRIPTION: Shows how to use exit tag with a custom error message for access control\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser.isInGroup('powerUsers') ?? false %}\n  {% exit 403 'You must be a power user to access this page!' %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Nitro Add Command\nDESCRIPTION: Command to add a new site to a Nitro machine with options for hostname and webroot configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ cd /path/to/project\n$ nitro add\nEnter the hostname [plugins-dev] example.test\nEnter the web root [web]\nAdded plugins-dev to config file.\nApply changes from config? [yes]\nMounting /path/to/project to nitro-dev\nAdding site example.test to nitro-dev\nApplied changes from /Users/oli/.nitro/nitro-dev.yaml\nEditing your hosts file\nPassword: ******\n```\n\n----------------------------------------\n\nTITLE: Migrating Alt Text to Native Attribute in Craft CMS\nDESCRIPTION: Command to migrate existing alt text from a custom field to Craft's native alt attribute for assets. The --if-empty flag ensures existing values aren't overwritten.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/assets.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/assets --set alt --to myAltTextField --if-empty\n```\n\n----------------------------------------\n\nTITLE: Creating a Permanent Redirect with Custom Status Code in Craft CMS\nDESCRIPTION: Demonstrates how to create a permanent (301) redirect instead of the default temporary (302) redirect using the redirect tag with a status code parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% redirect \"pricing\" 301 %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Element Edit Screen Response in PHP\nDESCRIPTION: Implementation of prepareEditScreen() method to customize control panel response with breadcrumbs for element editing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\npublic function prepareEditScreen(Response $response, string $containerId): void\n{\n    $response->crumbs([\n        [\n            'label' => Craft::t('my-plugin', 'Products'),\n            'url' => UrlHelper::cpUrl('products'),\n        ],\n        [\n            'label' => $this->getType()->name,\n            'url' => UrlHelper::cpUrl(\"products/{$type->handle}\"),\n        ],\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Markdown Edition Notice Block\nDESCRIPTION: Warning block indicating changes to Commerce editions in version 4.5\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/editions.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n<Block label=\"Commerce Edition Changes\">\n\nWith the release of Commerce 4.5, Lite and Pro editions have been merged. This page discusses differences in earlier versions of the plugin.\n\n</Block>\n```\n\n----------------------------------------\n\nTITLE: Handling Invalid Coupon Codes in Twig\nDESCRIPTION: This snippet shows how to handle invalid coupon codes by checking for order notices and errors. It includes class assignment for styling error states.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/coupon-codes.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'Added coupon code.'|hash) }}\n  {{ redirectInput('shop/cart') }}\n\n  {# Get the first notice for the `couponCode` attribute, if we have one #}\n  {% set couponCodeNotice = cart.getFirstNotice(null, 'couponCode') %}\n\n  {# Get any lower-level coupon code errors just in case #}\n  {% set couponCodeError = cart.getFirstError('couponCode') %}\n\n  <input type=\"text\"\n    name=\"couponCode\"\n    value=\"{{ cart.couponCode }}\"\n    class=\"{% if couponCodeNotice or couponCodeError %}has-error{% endif %}\"\n    placeholder=\"{{ \"Coupon Code\"|t }}\"\n  >\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Advanced Link Attribute Handling with tag Function\nDESCRIPTION: Demonstrates how to manually construct an anchor tag with various attributes including target and rel using Twig's tag function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set link = entry.myLinkFieldHandle %}\n\n{{ tag('a', {\n  href: link.value,\n  target: link.target,\n  rel: link.target == '_blank' ? 'noopener noreferrer' : null,\n  text: link.label,\n}) }}\n\n{# ...produces output like... #}\n\n<a href=\"https://custom-url.com/page\" target=\"_blank\" rel=\"noopener noreferrer\">custom-url.com</a>\n```\n\n----------------------------------------\n\nTITLE: Using the 'float' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'float' test to check if a variable is a floating-point number using PHP's is_float() method. Shows examples with different data types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.5 is float ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 9 is float ? 'true' : 'false' }}\n{# result: false #}\n\n{{ 'duck' is float ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Cart in Twig\nDESCRIPTION: Demonstrates the new recommended way to retrieve the cart in Twig templates, handling both clean and error states.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if cart is not defined %}\n  {% set cart = craft.commerce.getCarts().getCart() %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Conditional URI Generation Based on Entry Level\nDESCRIPTION: Alternative Twig template using conditional logic to generate URIs based on entry level in the structure hierarchy.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if level == 1 %}earth{% else %}{parent.uri}{% endif %}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Matrix Field Entry Mutation in GraphQL\nDESCRIPTION: Example mutation for saving a new cocktail entry with Matrix blocks containing ingredients. Demonstrates handling of complex Matrix field data structure with multiple block types including spirits, mixers, and garnishes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_23\n\nLANGUAGE: graphql\nCODE:\n```\nmutation saveEntry(\n  $title: String,\n  $slug: String,\n  $authorId: ID,\n  $ingredients: [ingredients_MatrixBlockContainerInput],\n  $sortOrder: [QueryArgument]\n) {\n  save_cocktails_cocktails_Entry(\n    title: $title,\n    slug: $slug,\n    authorId: $authorId,\n    ingredients: { blocks: $ingredients, sortOrder: $sortOrder }\n  ) {\n    title\n    slug\n    authorId\n    dateCreated @formatDateTime (format: \"Y-m-d\")\n    ingredients {\n      __typename\n        ...on MatrixBlockInterface {\n          id\n        }\n        ... on ingredients_spirit_BlockType {\n          spiritName\n          ounces\n        }\n        ... on ingredients_mixer_BlockType {\n          mixerName\n          ounces\n        }\n        ... on ingredients_garnish_BlockType {\n          garnishName\n        }\n     }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Customer Model in Twig for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to retrieve a Customer model from a user's Customer Info field in a Twig template. It assumes the field is named 'customerInfo'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-info-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set customer = user.customerInfo %}\n```\n\n----------------------------------------\n\nTITLE: Prepending HTML with prepend Filter in Twig\nDESCRIPTION: Demonstrates the prepend filter which adds HTML to the beginning of another element. It includes options for keeping or replacing existing elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_31\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'keep') }}\n{# Output: <div><p>Ipsum</p></div> #}\n\n{{ '<div><p>Ipsum</p></div>'|prepend('<p>Lorem</p>', 'replace') }}\n{# Output: <div><p>Lorem</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Using the Markdown Filter in Twig\nDESCRIPTION: Demonstrates how to use the 'markdown' filter to parse Markdown content. This filter supports different flavors of Markdown and provides options for inline-only parsing and content escaping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set content %}\n# Everything You Need to Know About Computer Keyboards\n\nThe only *real* computer keyboard ever made was famously\nthe [Apple Extended Keyboard II] [1].\n\n    [1]: https://www.flickr.com/photos/gruber/sets/72157604797968156/\n{% endset %}\n\n{{ content|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Injecting Content After Discount Enabled Field in Twig\nDESCRIPTION: This hook allows inserting content after the 'Enabled' field in the discount detail view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.discount.edit\" %}\n```\n\n----------------------------------------\n\nTITLE: Appending HTML with Twig Filter in Craft CMS\nDESCRIPTION: Shows the usage of the 'append' filter to add HTML content to the end of an existing element. It includes examples of basic appending, conditional appending, and replacement options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'keep') }}\n{# Output: <div><p>Lorem</p></div> #}\n\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'replace') }}\n{# Output: <div><p>Ipsum</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Configuring CRAFT_SITE for Specific Site in PHP\nDESCRIPTION: Sets the Site handle or ID that Craft should serve from the index.php file. This example explicitly sets it to serve the German site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\n// Show the German site\ndefine('CRAFT_SITE', 'de');\n```\n\n----------------------------------------\n\nTITLE: Outputting Values in Twig Templates with dd Tag\nDESCRIPTION: Use the {% dd %} tag in Twig templates to output a value or variable to the browser for debugging purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/README.md#2025-04-22_snippet_0\n\nLANGUAGE: Twig\nCODE:\n```\n{% dd someVariable %}\n```\n\n----------------------------------------\n\nTITLE: Using string Filter for Type Coercion in Twig\nDESCRIPTION: Shows the string filter which coerces the passed value to a string using PHP's strval() function, useful for stronger typing in PHP 8 and Twig 3.x.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_33\n\n\n\n----------------------------------------\n\nTITLE: Handling Delta Saves in afterElementSave\nDESCRIPTION: Demonstrates how to check if a field's value has changed before performing post-save operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\npublic function afterElementSave(ElementInterface $element, bool $isNew): void\n{\n    if ($element->isFieldDirty($this->handle)) {\n        // logic for handling saved element\n    }\n\n    parent::afterElementSave($element, $isNew);\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Custom Log Targets in Craft CMS\nDESCRIPTION: Example showing how to add custom log targets in Craft CMS. This includes creating a traditional Yii FileTarget for specific errors and a Monolog target for module-specific messages with customized behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\helpers\\App;\nuse craft\\log\\MonologTarget;\nuse Psr\\Log\\LogLevel;\nuse yii\\log\\FileTarget;\nuse yii\\web\\HttpException;\n\nreturn [\n    'components' => [\n        'log' => [\n            'targets' => [\n                // 1. Add a traditional Yii file target for auditing 404 errors that are normally excluded:\n                [\n                    'class' => FileTarget::class,\n                    'logFile' => '@storage/logs/missing-pages.log',\n                    'categories' => [\n                        HttpException::class . ':404',\n                    ],\n                    'logVars' => [],\n                ],\n\n                // 2. Add a Monolog target for module-specific messages:\n                [\n                    'class' => MonologTarget::class,\n                    'name' => 'custom-module',\n                    'extractExceptionTrace' => !App::devMode(),\n                    'allowLineBreaks' => App::devMode(),\n                    'level' => App::devMode() ? LogLevel::INFO : LogLevel::WARNING,\n                    'categories' => ['custom-module'],\n                    'logContext' => false,\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Removed Model Properties and Methods in Commerce 4\nDESCRIPTION: Various model properties and methods have been removed in Commerce 4. The table provides alternatives or explanations for each removed item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nShippingAddressZone::getStatesNames()\nDiscount::$code\nDiscount::getDiscountUserGroups()\nDiscount::getUserGroupIds()\nDiscount::setUserGroupIds()\nOrderHistory::$customerId\nOrderHistory::getCustomer()\nSettings::$showCustomerInfoTab\nShippingAddressZone::getCountries()\nShippingAddressZone::getCountriesNames()\nShippingAddressZone::getCountryIds()\nShippingAddressZone::getStateIds()\nShippingAddressZone::getStates()\nShippingAddressZone::getStatesNames()\nShippingAddressZone::isCountryBased\nStates\nTaxAddressZone::getCountries()\nTaxAddressZone::getCountriesNames()\nTaxAddressZone::getCountryIds()\nTaxAddressZone::getStateIds()\nTaxAddressZone::getStates()\nTaxAddressZone::getStatesNames()\nTaxAddressZone::isCountryBased\n```\n\n----------------------------------------\n\nTITLE: Migrating Control Panel Templates - Twig\nDESCRIPTION: Demonstrates changes in control panel template structure from Craft 2 to 3, including page header customization and grid layouts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set extraPageHeaderHtml %}\n  <a href=\"{{ url('recipes/new') }}\" class=\"btn submit\">{{ 'New recipe'|t('app') }}</a>\n{% endset %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% block actionButton %}\n  <a href=\"{{ url('recipes/new') }}\" class=\"btn submit\">{{ 'New recipe'|t('app') }}</a>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Global Set Queries\nDESCRIPTION: Shows how to create global set queries in both Twig and PHP\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/globals.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new global set query #}\n{% set myGlobalSetQuery = craft.globalSets() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new global set query\n$myGlobalSetQuery = \\craft\\elements\\GlobalSet::find();\n```\n\n----------------------------------------\n\nTITLE: Database Expression Creation\nDESCRIPTION: Creates a new database Expression object for use in database queries with parameter binding support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .andWhere(expression('[[authorId]] = :authorId', {authorId: currentUser.id}))\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Order Table Attribute HTML in Craft Commerce (PHP)\nDESCRIPTION: This hook allows plugins to customize the HTML of the table cells on the order index page. It provides access to the order model and the attribute being rendered.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_getOrderTableAttributeHtml(Commerce_OrderModel $order, $attribute)\n{\n    if ($attribute == 'totalPaid')\n    {\n        return $order->totalPaid * 100;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Fail Message Inputs with failMessageInput() Function\nDESCRIPTION: The failMessageInput() function is a shortcut for creating a hidden input with a hashed custom fail message value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_22\n\nLANGUAGE: twig\nCODE:\n```\n{{ failMessageInput('Custom fail message') }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Time Field Value in Twig\nDESCRIPTION: Twig code snippet showing how to access a Time field value and format it using the time filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  Selected time: {{ entry.myFieldHandle|time('short') }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating or Updating Customer Addresses in Twig for Craft Commerce\nDESCRIPTION: Form implementation to create a new address or update an existing one for the current customer. The form posts to the commerce/customer-addresses/save action and includes fields for address information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/customer-address-management.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/customer-addresses/save\">\n  {{ redirectInput('commerce/customer/addresses') }}\n  {{ csrfInput() }}\n  <input type=\"text\" name=\"address[firstName]\" value=\"{{ address is defined ? address.firstName : '' }}\">\n  <input type=\"text\" name=\"address[lastName]\" value=\"{{ address is defined ? address.lastName : '' }}\">\n  ...\n  <input type=\"submit\" value=\"Save\"/>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring DDEV for a Craft CMS Project\nDESCRIPTION: Command to create DDEV configuration files specifying Craft CMS as the project type and setting the document root to the 'web' directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/install.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nddev config --project-type=craftcms --docroot=web\n```\n\n----------------------------------------\n\nTITLE: Customizing Log Exceptions in Craft 4\nDESCRIPTION: Configuration example showing how to customize log exceptions in Craft 4, including how to override the default behavior of not logging 404 errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n'components' => [\n    'log' => [\n        'monologTargetConfig' => [\n            // Override exclusions:\n            'except' => [\n                \\yii\\i18n\\PhpMessageSource::class . ':*',\n                // This pattern is a default, commented out here for illustration:\n                // \\yii\\web\\HttpException::class . ':404',\n            ],\n        ],\n    ],\n],\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Adjustments in Twig Templates\nDESCRIPTION: This snippet demonstrates how to access all adjustments on an order within Twig templates. It uses the 'cart.adjustments' property to retrieve the adjustments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/order-adjustment-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\ncart.adjustments\n```\n\n----------------------------------------\n\nTITLE: Defining Address Routes in PHP\nDESCRIPTION: Demonstrates how to define routing rules for managing user addresses in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n  // Listing Addresses\n  'account' => ['template' => '_account/dashboard'],\n\n  // New Addresses\n  'account/addresses/new' => ['template' => '_account/edit-address'],\n\n  // Existing Addresses\n  'account/addresses/<addressUid:{uid}>' => ['template' => '_account/edit-address'],\n];\n```\n\n----------------------------------------\n\nTITLE: Testing Object Type in Twig\nDESCRIPTION: Shows how to check if a value is an object using PHP's is_object() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry is object ? 'true' : 'false' }}\n{# result: true #}\n\n{{ entry.url is object ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Checking for Selected Options in Craft CMS\nDESCRIPTION: Examples of checking if any options are selected in a Checkboxes field using Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/checkboxes-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myFieldHandle)) {\n```\n\n----------------------------------------\n\nTITLE: Creating Tag Queries in Craft CMS\nDESCRIPTION: Shows how to initialize a new tag query in both Twig templates and PHP. Tag queries allow fetching and filtering tags from the system.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new tag query #}\n{% set myTagQuery = craft.tags() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new tag query\n$myTagQuery = \\craft\\elements\\Tag::find();\n```\n\n----------------------------------------\n\nTITLE: Formatting Changelog Entry for New Version\nDESCRIPTION: This Markdown snippet demonstrates the correct format for a changelog entry when releasing a new version of a plugin.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-store.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 3.0.0 - 2018-03-31\n```\n\n----------------------------------------\n\nTITLE: Setting up directory structure for Asset Bundles in Craft CMS\nDESCRIPTION: Example directory structure for organizing asset bundles in a Craft CMS plugin, showing the location of the bundle class file and resources folder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/asset-bundles.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nbase_dir/\n└── src/\n    ├── FooBundle.php\n    └── resources/\n        ├── script.js\n        ├── styles.css\n        └── ...\n```\n\n----------------------------------------\n\nTITLE: Handling Before Cancel Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes before a subscription is canceled. Can prevent cancellation by setting isValid to false.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_38\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\CancelSubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_BEFORE_CANCEL_SUBSCRIPTION, function(CancelSubscriptionEvent $e) {\n    // Do something - maybe the user is not permitted to cancel the subscription for some reason.\n});\n```\n\n----------------------------------------\n\nTITLE: Extracting Array Values with values Filter in Twig\nDESCRIPTION: Shows how to use the values filter to return an array of all values in a given array, without custom keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_46\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = {foo: 'Foo', bar: 'Bar'} %}\n{% set arr2 = arr1|values %}\n{# arr2 = ['Foo', 'Bar'] #}\n```\n\n----------------------------------------\n\nTITLE: Registering Asset Bundle in Controller\nDESCRIPTION: Demonstrates how to register an asset bundle from a controller action before rendering a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\FooBundle;\n\npublic function actionFoo()\n{\n    $this->view->registerAssetBundle(FooBundle::class);\n\n    return $this->renderTemplate('plugin-handle/foo');\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Parameters on Tag Query in PHP\nDESCRIPTION: Shows how to set parameters on a tag query using a Tags field in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$relatedTags = (clone $entry->myFieldHandle)\n    ->group('blogEntryTags')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Template-Specific CSS Registration\nDESCRIPTION: Example of registering a CSS file from within a specific template\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Say, from `templates/blog/_entry.twig`! #}\n{% do craft.app.view.registerCssFile('@web/post.css') %}\n```\n\n----------------------------------------\n\nTITLE: Creating an Asset Selection Form in Twig\nDESCRIPTION: Shows how to create a form for selecting assets in Twig. This includes generating checkboxes for each possible asset and handling the current selection state.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleAssets = craft.assets()\n  .volume('siteAssets')\n  .kind('image')\n  .orderBy('filename ASC')\n  .withTransforms([{ width: 100, height: 100 }])\n  .all() %}\n\n{% set relatedAssetIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% for possibleAsset in possibleAssets %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleAsset.id,\n          { checked: possibleAsset.id in relatedAssetIds }\n        ) }}\n        {{ tag('img', { src: possibleAsset.url }) }}\n        {{ possibleAsset.getImg({ width: 100, height: 100 }) }}\n        {{ possibleAsset.filename }}\n      </label>\n    </li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Configuring Label and Instructions for Field Layout Elements in PHP\nDESCRIPTION: These properties allow setting assistive text for field inputs. The label provides a title for the field, while instructions provide additional guidance about field usage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic ?string $label = null;\npublic ?string $instructions = null;\n```\n\n----------------------------------------\n\nTITLE: Installing Generator via Composer in Craft CMS\nDESCRIPTION: Command to install the Generator package using Composer in a Craft CMS project. This is required for projects started with Craft versions earlier than 4.3.5.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/generator.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/generator --dev\n```\n\n----------------------------------------\n\nTITLE: Accessing Entries Field Data in Twig Templates\nDESCRIPTION: Demonstrates how to access selected entries from an Entries field using the field's handle. This returns an ElementCriteriaModel object configured to output all selected entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = entry.entriesFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Version Headings in Markdown\nDESCRIPTION: Shows the correct format for version headings in the changelog. This format is crucial for proper parsing and display in the Plugin Store and Craft's Updates screen.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/changelogs-and-updates.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## X.Y.Z - YYYY-MM-DD\n```\n\n----------------------------------------\n\nTITLE: Registering Additional Address Validation Rules in Craft Commerce\nDESCRIPTION: This snippet demonstrates how to add custom address validation rules using the registerAddressValidationRules event. It adds a required rule for the 'attention' field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_42\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RegisterAddressRulesEvent;\nuse craft\\commerce\\models\\Address;\n\nEvent::on(Address::class, Address::EVENT_REGISTER_ADDRESS_VALIDATION_RULES, function(RegisterAddressRulesEvent $event) {\n     $event->rules[] = [['attention'], 'required'];\n});\n```\n\n----------------------------------------\n\nTITLE: Removing Unique Constraints for Soft Delete\nDESCRIPTION: Demonstrates how to remove unique constraints from tables that will support soft deletes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\MigrationHelper;\n\n// Stop enforcing unique handles at the database level\nMigrationHelper::dropIndexIfExists('{{%mytablename}}', ['handle'], true, $this);\n$this->createIndex(null, '{{%mytablename}}', ['handle'], false);\n```\n\n----------------------------------------\n\nTITLE: Creating URLs with the url Function in Twig\nDESCRIPTION: The url function returns a URL. It can generate internal URLs, append query parameters, and enforce URL schemes. It respects site configuration settings for URL formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_43\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ url('company/contact') }}\">Contact Us</a>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ url('http://my-project.tld', 'foo=1', 'https') }}\n```\n\n----------------------------------------\n\nTITLE: Basic Configuration Style in PHP for Craft CMS\nDESCRIPTION: Demonstrates the simplest form of a Craft CMS configuration file, returning a key-value map of settings. It shows how to set devMode and userSessionDuration using environment variables and static values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\App;\n\nreturn [\n    'devMode' => App::env('DEV_MODE') ?? false,\n    'userSessionDuration' => 'P1D',\n];\n```\n\n----------------------------------------\n\nTITLE: Find and Replace Operations for Updating Templates from Market Commerce to Craft Commerce\nDESCRIPTION: This table provides a series of find-and-replace operations to update front-end templates from Market Commerce to Craft Commerce syntax. It includes changes to function calls, cart operations, and product variant handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/upgrading-from-market.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nFind | Replace\n-----|--------\n`craft.market.` | `craft.commerce.`\n`cart.shippingMethodId` | `cart.shippingMethodHandle`\n`|marketCurrency` | `|commerceCurrency`\n`name=\"action\" value=\"market/cart/setEmail\"` | `name=\"action\" value=\"commerce/cart/updateCart\"`\n`name=\"action\" value=\"market/cartAddress/chooseAddresses\"` | `name=\"action\" value=\"commerce/cart/updateCart\"`\n`name=\"action\" value=\"market/cart/setShippingMethod\"` | `name=\"action\" value=\"commerce/cart/updateCart\"`\n`name=\"action\" value=\"market/cart/add\"` | `name=\"action\" value=\"commerce/cart/updateCart\"`\n`name=\"action\" value=\"market/cart/remove\"` | `name=\"action\" value=\"commerce/cart/removeLineItem\"`\n`name=\"action\" value=\"market/cart/removeAll\"` | `name=\"action\" value=\"commerce/cart/removeAllLineItems\"`\n`name=\"action\" value=\"market/cart/applyCoupon\"` | `name=\"action\" value=\"commerce/cart/updateCart\"`\n```\n\n----------------------------------------\n\nTITLE: Generating Order Array for Discount Condition in Craft Commerce\nDESCRIPTION: This PHP code snippet shows how the order array is generated for use in discount condition formulas. It converts the order to an array and includes specific relations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$order->toArray(\n    [], ['lineItems.snapshot', 'shippingAddress', 'billingAddress']\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Content Column Type for Craft CMS Custom Field\nDESCRIPTION: These snippets demonstrate how to define the content column type for a custom field in Craft CMS. The first example shows a single column definition, while the second shows multiple columns with different data types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/field-types.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function getContentColumnType()\n{\n    return \\yii\\db\\Schema::TYPE_STRING;\n}\n```\n\nLANGUAGE: php\nCODE:\n```\npublic function getContentColumnType()\n{\n    return [\n        'comment' => \\yii\\db\\Schema::TYPE_STRING,\n        'date' => \\yii\\db\\Schema::TYPE_DATE,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tags Field Data in Twig\nDESCRIPTION: Illustrates how to access and loop through related tags from a Tags field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedTags = entry.myFieldHandle.all() %}\n{% if relatedTags|length %}\n  <ul>\n    {% for rel in relatedTags %}\n      <li><a href=\"{{ url('tags/'~rel.slug) }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Injecting Secondary Order Actions in Twig\nDESCRIPTION: This hook enables adding additional controls just before the secondary order form actions in the page toolbar.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.order.edit.order-secondary-actions\" %}\n```\n\n----------------------------------------\n\nTITLE: Implementing registerEmailMessages Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers custom email message types for the system. Returns an array of email message keys that the plugin provides translations for in its language files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function registerEmailMessages()\n{\n    return array(\n        'myPluginMessageKey1',\n        'myPluginMessageKey2',\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Private Template Trigger in Craft CMS (PHP)\nDESCRIPTION: Configures the privateTemplateTrigger option to use a dot as the prefix for template folders/filenames to forbid direct HTTP traffic to them in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_44\n\nLANGUAGE: php\nCODE:\n```\n'privateTemplateTrigger' => \".\"\n```\n\n----------------------------------------\n\nTITLE: Setting Maximum Slug Increment in Craft CMS (PHP)\nDESCRIPTION: Configures the maxSlugIncrement option to 200, which sets the maximum number of increments Craft will apply to a slug while searching for a unique URL before throwing an error.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\n'maxSlugIncrement' => 200,\n```\n\n----------------------------------------\n\nTITLE: Creating Topic Index Page Template in Twig\nDESCRIPTION: Template for displaying blog posts filtered by a specific category. It extends a layout, fetches posts associated with the current category, and displays them with feature images, titles, dates, and summaries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/blog-templates.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layout' %}\n\n{% set posts = craft.entries().section('blog').postCategories(category).all() %}\n\n{% block content %}\n  <h1>Topic: {{ category.title }}</h1>\n\n  {% for post in posts %}\n    {% set image = post.featureImage.one() %}\n\n    <article>\n      {% if image %}\n        <div class=\"thumbnail\">\n          {{ image.getImg() }}\n        </div>\n      {% endif %}\n\n      <h2>{{ post.title }}</h2>\n\n      <time datetime=\"{{ post.postDate | atom }}\">{{ post.postDate | date }}</time>\n\n      {{ post.summary | md }}\n\n      <a href=\"{{ post.url }}\">Continue Reading</a>\n    </article>\n  {% endfor %}\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Creating Date Input Fields in Twig Forms\nDESCRIPTION: Demonstrates how to create date and datetime-local input fields in Twig forms for saving Date field data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/date-time.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d', timezone='UTC')\n  : '' %}\n\n<input type=\"date\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone='UTC')\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Defining Additional User Table Attributes in Craft CMS\nDESCRIPTION: Hook to add additional table columns to user indexes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\npublic function defineAdditionalUserTableAttributes()\n{\n    return array(\n        'foo' => \"Foo\",\n        'bar' => \"Bar\",\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Using ceil Function in Twig\nDESCRIPTION: The ceil function rounds a number up to the next highest integer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ ceil(42.1) }}\n{# Output: 43 #}\n```\n\n----------------------------------------\n\nTITLE: Multi-Environment Configuration with Ternary Operator in PHP\nDESCRIPTION: An example of a multi-environment configuration using a ternary operator to set different values based on the server name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-environment-configs.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    'omitScriptNameInUrls' => true,\n    'devMode' => ($_SERVER['SERVER_NAME'] == 'my-project.test' ? true : false),\n);\n```\n\n----------------------------------------\n\nTITLE: Number Formatting in Craft CMS Templates\nDESCRIPTION: Updated method for rounding numbers in templates using Twig filters instead of the deprecated round() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\nnum|round\n```\n\n----------------------------------------\n\nTITLE: Setting Pending User Purge Duration in Craft CMS\nDESCRIPTION: Specifies the amount of time to wait before Craft purges pending users who have not activated. Set to false to disable this feature. Content assigned to purged users will also be deleted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_60\n\nLANGUAGE: php\nCODE:\n```\n'purgePendingUsersDuration' => 'P1M',\n```\n\n----------------------------------------\n\nTITLE: Accessing Resource URLs in PHP\nDESCRIPTION: Using UrlHelper to generate URLs for plugin resource files\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/resources.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nUrlHelper::getResourceUrl('path/to/file.ext')\n```\n\n----------------------------------------\n\nTITLE: Registering Translation Category Programmatically in PHP\nDESCRIPTION: Shows how to programmatically register a new translation category by adding a translation source to Yii's I18N translations array. Defines the message source class, source language, base path for translations, and override settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/translation-categories.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\i18n\\PhpMessageSource;\n\npublic function init()\n{\n    parent::init();\n\n    Craft::$app->i18n->translations['my-category'] = [\n        'class' => PhpMessageSource::class,\n        'sourceLanguage' => 'en',\n        'basePath' => __DIR__ . '/translations',\n        'allowOverrides' => true,\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Including JavaScript Resources in Twig Templates\nDESCRIPTION: Using the includeJsResource tag to include JavaScript files in templates with proper script tags\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/resources.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% includeJsResource \"path/to/file.js\" %}\n```\n\n----------------------------------------\n\nTITLE: Translation File Configuration in PHP\nDESCRIPTION: Example of a PHP translation file that maps source messages to their translated versions in German.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Contact us' => 'Kontaktiere uns',\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring Project Config in Craft CMS Tests\nDESCRIPTION: This snippet shows the path to the project config files that should be ignored in version control when using Craft 3.5+ or the projectConfig option in Codeception.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\ntests/_craft/config/project/*\n```\n\n----------------------------------------\n\nTITLE: Accessing Module Instance in Tests\nDESCRIPTION: Demonstrates how to access a module instance within test cases using the getInstance() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/plugins-and-modules.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nMyModule::getInstance()\n```\n\n----------------------------------------\n\nTITLE: Configuring CRAFT_LOG_PHP_ERRORS Constant in PHP for Craft CMS\nDESCRIPTION: Controls whether Craft CMS should set PHP's log_errors and error_log settings. Setting it to false leaves the configuration to php.ini.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n// Don't send PHP error logs to storage/logs/phperrors.log\ndefine('CRAFT_LOG_PHP_ERRORS', false);\n```\n\n----------------------------------------\n\nTITLE: Time Field with Custom Timezone Input\nDESCRIPTION: Advanced time field implementation with custom timezone selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/time.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tzs = [\n  { label: 'UTC', value: 'UTC' },\n  { label: 'Los Angeles', value: 'America/Los_Angeles' },\n] %}\n\n<select name=\"fields[myTimeField][timezone]\">\n  {% for tz in tzs %}\n    <option value=\"{{ tz.value }}\" {{ craft.app.timezone == tz.value ? 'selected' : null }}>{{ tz.label }}</option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Using Email as Username in Craft CMS\nDESCRIPTION: Removes 'Username' fields in the control panel and automatically saves users' usernames based on their email addresses. This simplifies user management.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_68\n\nLANGUAGE: php\nCODE:\n```\n'useEmailAsUsername' => true,\n```\n\n----------------------------------------\n\nTITLE: Using the 'array' Test Operator in Twig Templates\nDESCRIPTION: Demonstrates using the 'array' test to check if a variable is an array using PHP's is_array() method. Returns true for arrays and false for other data types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tests.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ ['oh', 'hello', 'there'] is array ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'oh hai' is array ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Time Fields in PHP\nDESCRIPTION: PHP code snippet demonstrating how to query for entries with a Time field value before 10:00 AM.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with with a selected time before 10:00 AM\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('< 10:00')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Addresses in Twig Form\nDESCRIPTION: Demonstrates how to create a form to update shipping address information, including both native and custom fields, using the commerce/cart/update-cart action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {# Native `fullName` field: #}\n  {{ input('text', 'shippingAddress[fullName]', cart.shippingAddress.fullName) }}\n\n  {# Custom fields (note the `[fields]` prefix): #}\n  {{ input('checkbox', 'shippingAddress[fields][isResidentialAddress]') }}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Transferring Customer Data Between Users via CLI\nDESCRIPTION: Introduced in Commerce 4.3.0, this command transfers customer data from one user to another. The command prompts for source and destination user information and performs low-level database updates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/console-commands.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/transfer-user-data\n```\n\n----------------------------------------\n\nTITLE: Setting Mandatory Status for Field Layout Elements in PHP\nDESCRIPTION: Makes a field layout element required in any layout where it's supported. Mandatory elements are automatically injected at the bottom of the first tab if not explicitly added.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\npublic function mandatory(): bool\n{\n    return false;\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Before Render PDF Event in Craft Commerce\nDESCRIPTION: This code demonstrates how to intercept the beforeRenderPdf event. It allows for overriding Commerce's PDF generation by setting a custom-rendered PDF to the pdf property of the event.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_47\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\PdfEvent;\nuse craft\\commerce\\services\\Pdf;\nuse yii\\base\\Event;\n\nEvent::on(Pdf::class, Pdf::EVENT_BEFORE_RENDER_PDF, function(PdfEvent $e) {\n     // Roll out our own custom PDF\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Boolean Attributes using Tag Template Tag in Twig\nDESCRIPTION: Demonstrates how to render boolean attributes using the '{% tag %}' template tag. When an attribute is set to 'true', it will be added to the element without a value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'textarea' with {\n  name: 'message',\n  required: true\n} -%}\n  Please foo some bar.\n{%- endtag %}\n{# Output: <textarea name=\"message\" required>Please foo some bar.</textarea> #}\n```\n\n----------------------------------------\n\nTITLE: Nesting HTML Tags with the tag Tag in Craft CMS\nDESCRIPTION: Shows how to nest tag tags to create complex HTML structures. This example creates a div containing a paragraph with dynamic content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_27\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'div' with {\n  class: 'foo',\n} %}\n  {% tag 'p' with {\n    class: 'welcome',\n  } -%}\n    Hello, {{ currentUser.friendlyName }}\n  {%- endtag %}\n{% endtag %}\n{# Output: <div class=\"foo\"><p class=\"welcome\">Hello, Tim</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Creating an Element Edit Form in Twig\nDESCRIPTION: This snippet demonstrates how to create a form that redirects to the control panel edit page for a given element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<form>\n  {{ actionInput('elements/redirect') }}\n  {{ hiddenInput('elementId', object.id) }}\n\n  <button>Edit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Querying Products in Commerce 2\nDESCRIPTION: Shows how to query all products in Commerce 2 using the new element query syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\ncraft.products.all()\n```\n\n----------------------------------------\n\nTITLE: Implementing Value Normalization\nDESCRIPTION: Demonstrates how to normalize raw field values into the declared PHP type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\npublic function normalizeValue(mixed $value, ?ElementInterface $element): mixed\n{\n    // Already normalized?\n    if ($value instanceof BaseCurrency) {\n        return $value;\n    }\n\n    // Not set?\n    if ($value === null) {\n        return null;\n    }\n\n    // Misconfigured in some other way?\n    if (!is_array($value)) {\n        return null;\n    }\n\n    return BaseCurrency::create($value);\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Missing Component in Twig\nDESCRIPTION: Shows how to check if an object implements MissingComponentInterface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% if field is missing %}\n  <p>😱</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Converting Date Field Values MySQL Query\nDESCRIPTION: SQL query for MySQL to convert existing Date field values from UTC to local timezone when converting to a Time field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE `content`\nSET `field_myFieldHandle` = CONVERT_TZ(`field_myFieldHandle`, '+00:00', '-07:00')\nWHERE `field_myFieldHandle` IS NOT NULL\n```\n\n----------------------------------------\n\nTITLE: Element Query Array Parameter Setting in Twig\nDESCRIPTION: Demonstrates the required syntax change for setting array parameters in element queries, showing explicit array brackets are now required.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\nOld:\n{% set query = craft.entries()\n  .relatedTo('and', 1, 2, 3) %}\n\nNew:\n{% set query = craft.entries()\n  .relatedTo(['and', 1, 2, 3]) %}\n```\n\n----------------------------------------\n\nTITLE: Setting Log Dump Method in Craft CMS (PHP)\nDESCRIPTION: Example of setting the logDumpMethod configuration. This defines which function is used to dump context information in logs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n'logDumpMethod' => 'print_r',\n```\n\n----------------------------------------\n\nTITLE: Debugging with dump() Function in Twig\nDESCRIPTION: The dump() function in Craft overrides Twig's default function to be available in all contexts, producing consistent output with the {% dd %} tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% set news = craft.entries()\n  .section('news')\n  .all() %}\n\n{{ dump(news|column('title')) }}\n```\n\n----------------------------------------\n\nTITLE: Transaction Creation Event Handler in PHP\nDESCRIPTION: Event handler for commerce_transactions.onCreateTransaction that modifies transaction amounts upon creation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_transactions.onCreateTransaction', function($event) {\n    $transaction = $event->params['transaction'];\n\n    // pay half the regular amount\n    $transaction->amount /= 2;\n    $transaction->paymentAmount /= 2;\n});\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to Tags ElementCriteriaModel in Twig\nDESCRIPTION: Customizing the tag query by adding parameters like ordering to the ElementCriteriaModel returned by a Tags field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set tags = entry.tagsFieldHandle.order('title') %}\n```\n\n----------------------------------------\n\nTITLE: Updating URL Rules Syntax for Craft CMS 3\nDESCRIPTION: Examples of converting URL routing rules from Craft 2 to Craft 3 format, showing changes in parameter syntax and route definitions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Old:\n'dashboard' => ['action' => 'dashboard/index'],\n'settings/fields/new' => 'settings/fields/_edit',\n'settings/fields/edit/(?P<fieldId>\\d+)' => 'settings/fields/_edit',\n'blog/type/([^\\/]+)' => 'blog/_type',\n\n// New:\n'dashboard' => 'dashboard/index',\n'settings/fields/new' => ['template' => 'settings/fields/_edit'],\n'settings/fields/edit/<fieldId:\\d+>' => ['template' => 'settings/fields/_edit'],\n'blog/type/<type:[^\\/]+>' => ['template' => 'blog/_type'],\n```\n\n----------------------------------------\n\nTITLE: Customizing Product Table Attribute HTML in Craft Commerce (PHP)\nDESCRIPTION: This hook allows plugins to customize the HTML of the table cells on the product index page. It provides access to the product model and the attribute being rendered.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_getProductTableAttributeHtml(Commerce_ProductModel $product, $attribute)\n{\n    if ($attribute == 'freeShipping')\n    {\n        return 'FREE';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Tag Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of a Tag fixture data file in PHP for Craft CMS. It demonstrates how to set up a tag with a group ID and title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'groupId' => $this->groupIds['tags'],\n        'title' => 'Tag',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Enabling Pre-generation of Image Transforms in Craft CMS\nDESCRIPTION: Configures Craft to generate new image transforms immediately when getUrl() is called, rather than when the browser first requests the image.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_75\n\nLANGUAGE: php\nCODE:\n```\n'generateTransformsBeforePageLoad' => true,\n```\n\n----------------------------------------\n\nTITLE: Using DateTime Object for Cache Expiration\nDESCRIPTION: Demonstrates setting cache expiration using the 'until' parameter with a DateTime object from an entry field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% cache until entry.eventDate %}\n```\n\n----------------------------------------\n\nTITLE: ToString Implementation in PHP\nDESCRIPTION: ToString class implementing Craft's Serializable interface for testing string conversion functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\ToString\n```\n\n----------------------------------------\n\nTITLE: Testing Callable Type in Twig\nDESCRIPTION: Demonstrates checking if a value is callable using PHP's is_callable() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ [entry, 'getStatus'] is callable ? 'true' : 'false' }}\n{# result: true #}\n```\n\n----------------------------------------\n\nTITLE: Configuring CRAFT_CP Constant in PHP for Craft CMS Control Panel Requests\nDESCRIPTION: Sets whether the current request should be treated as a control panel request in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft that this is a control panel request\ndefine('CRAFT_CP', true);\n```\n\n----------------------------------------\n\nTITLE: Checking Selected Option in PHP\nDESCRIPTION: Demonstrates how to check if an option is selected in a Radio Buttons field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->value) {\n```\n\n----------------------------------------\n\nTITLE: Implicit find() Call with a for Loop in Twig\nDESCRIPTION: Example showing how find() is called automatically when iterating through an ElementCriteriaModel in a for loop.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries.section('blog').limit(10) %}\n{# `entries` is still an ElementCriteriaModel here #}\n\n{% for entry in entries %}\n  {# Behind the scenes, the {% for %} tag just called our ElementCriteriaModel's find() method for us.\n    `entries` is still an ElementCriteriaModel, though #}\n  <li>{{ entry.getLink() }}</li>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Extending Order Edit Sidebar Details in Twig\nDESCRIPTION: This hook allows adding content after the existing right sidebar details in the order edit view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.order.edit.details\" %}\n```\n\n----------------------------------------\n\nTITLE: Registering Discount Adjuster in PHP for Craft Commerce\nDESCRIPTION: Shows how to register a custom discount adjuster class using the 'registerDiscountAdjusters' event in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/adjusters.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\services\\OrderAdjustments;\nuse yii\\base\\Event;\nuse MyAdjuster;\n\nEvent::on(\n    OrderAdjustments::class,\n    OrderAdjustments::EVENT_REGISTER_DISCOUNT_ADJUSTERS,\n    function(RegisterComponentTypesEvent $event) {\n        $event->types[] = MyAdjuster::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Listing All Order Statuses in Twig for Craft Commerce\nDESCRIPTION: This Twig snippet demonstrates how to retrieve and display all order statuses in Craft Commerce. It uses the craft.commerce.orderStatuses.allOrderStatuses variable to access the status objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/custom-order-statuses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for status in craft.commerce.orderStatuses.allOrderStatuses %}\n  {{ status.handle }} - {{ status.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Order Edit View in Twig\nDESCRIPTION: This hook enables modifications before the template blocks in the order edit view. HTML is not allowed in this hook.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.order.edit\" %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Categories Field Data in Twig\nDESCRIPTION: Basic example of accessing categories selected in a Categories field. This returns an ElementCriteriaModel object containing all selected categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = entry.categoriesFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Getting Global Set by ID in Craft CMS\nDESCRIPTION: The getSetById() method retrieves a global set by its ID. It accepts an optional locale parameter to get the global set in a specific locale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getSetById( id, locale )\n```\n\n----------------------------------------\n\nTITLE: Displaying All Discounts in Twig\nDESCRIPTION: This snippet shows how to list all discounts set up in the Craft Commerce system, displaying their names and descriptions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% for discount in craft.commerce.discounts.allDiscounts %}\n  {{ discount.name }} - {{ discount.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Security Key via Terminal\nDESCRIPTION: Command to generate and set a security key for Craft CMS using the terminal. This should be run from the project's root directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/installation.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft setup/security-key\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Field Types in Craft CMS Plugin\nDESCRIPTION: This snippet demonstrates how to register a custom field type within a Craft CMS plugin. It uses the Event::on() method to listen for the Fields::EVENT_REGISTER_FIELD_TYPES event and adds the custom field class to the list of field types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/field-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Fields;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Fields::class,\n            Fields::EVENT_REGISTER_FIELD_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyField::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current Customer in Twig Templates\nDESCRIPTION: Shows how to get the current customer model in Twig templates using the craft.commerce.getCustomer() method. This works for both guest and logged-in users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-model.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set customer = craft.commerce.getCustomer() %}\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Elements with Boolean Attributes using the tag Tag\nDESCRIPTION: Demonstrates how to add boolean HTML attributes (without values) using the tag tag. This example creates a textarea with the required attribute.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_28\n\nLANGUAGE: twig\nCODE:\n```\n{% tag 'textarea' with {\n  name: 'message',\n  required: true\n} -%}\n  Please foo some bar.\n{%- endtag %}\n{# Output: <textarea name=\"message\" required>Please foo some bar.</textarea> #}\n```\n\n----------------------------------------\n\nTITLE: Defining Test Matrix Configuration\nDESCRIPTION: Sets up test environments for different PHP versions (7.1-7.3) and database configurations (MySQL and PostgreSQL), with code coverage enabled for PHP 7.1.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nmatrix:\n  fast_finish: true\n  include:\n  - php: 7.3\n    env: DB=mysql\n  - php: 7.3\n    env: DB=pgsql\n  - php: 7.2\n    env: DB=mysql\n  - php: 7.2\n    env: DB=pgsql\n  - php: 7.1\n    env: TASK_TESTS_COVERAGE=1 DB=mysql\n  - php: 7.1\n    env: TASK_TESTS_COVERAGE=1 DB=pgsql\n```\n\n----------------------------------------\n\nTITLE: Using Global Set Variables\nDESCRIPTION: Demonstrates how to access and display information from global sets in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n<p>{{ companyInfo.companyName }} was established in {{ companyInfo.yearEstablished }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Filtering Products by Type in Twig\nDESCRIPTION: Demonstrates adding parameters to the Products field element query to filter results by product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set clothingProducts = entry.productsFieldHandle.type('clothing') %}\n```\n\n----------------------------------------\n\nTITLE: Clearing Order Notices\nDESCRIPTION: Examples showing how to clear order notices using both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ hiddenInput('successMessage', 'All notices dismissed'|hash) }}\n  {{ hiddenInput('clearNotices') }}\n  <button type=\"submit\">Dismiss</button>\n</form>\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\Plugin as Commerce;\n\n// Get the current cart\n$cart = Commerce::getInstance()->getCarts()->getCart();\n\n// Clear all notices\n$cart->clearNotices();\n```\n\n----------------------------------------\n\nTITLE: Converting String to PascalCase with pascal Filter in Twig\nDESCRIPTION: Demonstrates the pascal filter which formats a string in PascalCase (also known as UpperCamelCase).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|pascal }}\n{# Output: FooBar #}\n```\n\n----------------------------------------\n\nTITLE: Queue Listener Command\nDESCRIPTION: Command to run the queue in continuous listening mode with verbose output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft queue/listen --verbose\n```\n\n----------------------------------------\n\nTITLE: Adding Subscription Edit Metadata in Twig\nDESCRIPTION: This hook enables adding content after the right sidebar details on subscription elements' edit screen.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.subscriptions.edit.meta\" %}\n```\n\n----------------------------------------\n\nTITLE: Time Field Form Input Implementation\nDESCRIPTION: HTML implementation for Time field inputs in entry forms, including timezone handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('H:i')\n  : '' %}\n\n<input type=\"time\" name=\"fields[myFieldHandle]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Session Name in Craft CMS (PHP)\nDESCRIPTION: Example of setting the phpSessionName configuration. This defines the name of the PHP session cookie that Craft will use.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\n'phpSessionName' => 'PHPSESSID',\n```\n\n----------------------------------------\n\nTITLE: Setting Timezone in PHP\nDESCRIPTION: Configures system timezone using valid PHP timezone identifier.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n'timezone' => 'America/Los_Angeles',\n```\n\n----------------------------------------\n\nTITLE: Converting Style Attributes with explodeStyle Filter\nDESCRIPTION: Converts a style attribute string into an associative array of CSS property name/value pairs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set styles = 'font-weight: bold; color: red;'|explodeStyle %}\n{# Result: {'font-weight': 'bold', 'color': 'red'} #}\n```\n\n----------------------------------------\n\nTITLE: Markdown Warning Block\nDESCRIPTION: Warning notice about feature table relevance after version 4.5\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/editions.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n::: warning\nAs of Commerce 4.5, this feature table is no longer relevant! See the notice at the top of this page.\n:::\n```\n\n----------------------------------------\n\nTITLE: Updating to Specific Version in Craft CMS\nDESCRIPTION: Commands to update a plugin to a specific version number\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nddev craft update element-api:4.1.0\nphp craft update element-api:4.1.0\n```\n\n----------------------------------------\n\nTITLE: Requiring JSON Acceptance in Controller Actions (PHP)\nDESCRIPTION: Demonstrates how to require that a request accepts JSON for controller actions that only return JSON responses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$this->requireAcceptsJson();\n```\n\n----------------------------------------\n\nTITLE: Directory Structure Example for Asset Bundles\nDESCRIPTION: Shows the recommended file structure for implementing asset bundles in a plugin, including the bundle class and resources directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/asset-bundles.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nbase_dir/\n└── src/\n    ├── FooBundle.php\n    └── resources/\n        ├── script.js\n        ├── styles.css\n        └── ...\n```\n\n----------------------------------------\n\nTITLE: Template Asset Inclusion in Craft CMS\nDESCRIPTION: Updated methods for including head and footer HTML content in templates, replacing the deprecated getHeadHtml() and getFootHtml() functions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\nhead()\n```\n\nLANGUAGE: twig\nCODE:\n```\nendBody()\n```\n\n----------------------------------------\n\nTITLE: Adding Extra Allowed File Extensions in Craft CMS\nDESCRIPTION: Specifies additional file extensions that Craft will allow for file uploads. These are appended to the default list of allowed extensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_73\n\nLANGUAGE: php\nCODE:\n```\n'extraAllowedFileExtensions' => 'log',\n```\n\n----------------------------------------\n\nTITLE: Including CSS Resources in Twig Templates\nDESCRIPTION: Using the includeCssResource tag to include CSS files in templates with proper link tags\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/resources.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% includeCssResource \"path/to/file.css\" %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Translation Category via Application Config\nDESCRIPTION: Demonstrates how to add a translation category through the application configuration file. Specifies the message source class, source language, translations path, and override settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/translation-categories.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// -- config/app.php --\nreturn [\n    'components' => [\n        'i18n' => [\n            'translations' => [\n                'my-category' => [\n                    'class' => craft\\i18n\\PhpMessageSource::class,\n                    'sourceLanguage' => 'en',\n                    'basePath' => dirname(__DIR__) . '/translations',\n                    'allowOverrides' => true,\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Element Edit Route in PHP\nDESCRIPTION: Example of defining a route for element edit pages that matches the getCpEditUrl() method\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_44\n\nLANGUAGE: php\nCODE:\n```\n$event->rules['products/<elementId:\\d+>'] = 'elements/edit';\n```\n\n----------------------------------------\n\nTITLE: Setting Up Test Matrix Configuration in Travis CI\nDESCRIPTION: Defines the test matrix for running tests across multiple PHP versions and database configurations. Includes PHP 7.1-7.3 with both MySQL and PostgreSQL databases, with code coverage enabled only for PHP 7.1 environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nmatrix:\n  fast_finish: true\n  include:\n  - php: 7.3\n    env: DB=mysql\n  - php: 7.3\n    env: DB=pgsql\n  - php: 7.2\n    env: DB=mysql\n  - php: 7.2\n    env: DB=pgsql\n  - php: 7.1\n    env: TASK_TESTS_COVERAGE=1 DB=mysql\n  - php: 7.1\n    env: TASK_TESTS_COVERAGE=1 DB=pgsql\n```\n\n----------------------------------------\n\nTITLE: Displaying Radio Button Values and Labels\nDESCRIPTION: Examples showing how to output field values and labels in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/radio-buttons-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle }} or {{ entry.myFieldHandle.value }}\n{{ entry.myFieldHandle.label }}\n```\n\nLANGUAGE: php\nCODE:\n```\n// $entry->myFieldHandle or $entry->myFieldHandle->value\n// $entry->myFieldHandle->label\n```\n\n----------------------------------------\n\nTITLE: Testing String Type in Twig\nDESCRIPTION: Demonstrates checking if a value is a string using PHP's is_string() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ '23' is string ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is string ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Adding PHP Platform Requirement to Composer JSON\nDESCRIPTION: Add a PHP platform requirement to your composer.json file to ensure compatibility with Craft 4, which requires PHP 8.0.2 or higher.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n\"php\": \"8.0.2\"\n```\n\n----------------------------------------\n\nTITLE: Installing Craft CMS using Composer via DDEV\nDESCRIPTION: Command to scaffold a new Craft CMS project using the official starter project template through DDEV's Composer integration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/install.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nddev composer create -y \"craftcms/craft\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Blowfish Hash Cost in Craft CMS (PHP)\nDESCRIPTION: Sets the blowfishHashCost config option to 14, increasing the time taken to generate and verify password hashes for better protection against brute-force attacks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_49\n\nLANGUAGE: php\nCODE:\n```\n'blowfishHashCost' => 14,\n```\n\n----------------------------------------\n\nTITLE: Testing Boolean Type in Twig\nDESCRIPTION: Shows how to check if a variable is a boolean using PHP's is_bool() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if myVar is boolean %}\n  {{ myVar ? 'true' : 'false' }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Using Current DateTime in Twig Templates\nDESCRIPTION: Demonstrates how to format and display the current date/time using the now variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nToday is {{ now|date('M j, Y') }}.\n```\n\n----------------------------------------\n\nTITLE: Custom Timezone Time Field Implementation\nDESCRIPTION: Advanced implementation of Time field inputs with custom timezone support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Set a specific timezone #}\n{% set tz = 'America/Los_Angeles' %}\n\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('H:i', timezone=tz)\n  : '' %}\n\n<input type=\"time\" name=\"fields[myFieldHandle][time]\" value=\"{{ currentValue }}\">\n{{ hiddenInput('fields[myFieldHandle][timezone]', tz) }}\n```\n\n----------------------------------------\n\nTITLE: Implementing Advanced Settings Page in Craft CMS Plugin\nDESCRIPTION: Shows how to override the getSettingsResponse() method for more control over the settings page rendering or redirection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-settings.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npublic function getSettingsResponse(): mixed\n{\n    return \\Craft::$app\n        ->controller\n        ->renderTemplate('my-plugin-handle/settings/template');\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Dynamic Multi-Column Widgets Using Method in PHP\nDESCRIPTION: Example of configuring a widget to dynamically determine its column span using the getColspan() method. This approach allows the column span to be based on widget settings or other factors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    public function getColspan()\n    {\n        return $this->getSettings()->colspan;\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: PHP Restart Command\nDESCRIPTION: Command for restarting PHP-FPM on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_10\n\nLANGUAGE: shell\nCODE:\n```\nnitro php restart [<options>]\n```\n\n----------------------------------------\n\nTITLE: Manual Content Escaping with escape Filter in Twig\nDESCRIPTION: An example showing how to manually escape potentially unsafe user content using the escape filter before passing it to the markdown filter for formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Escape any HTML in the Body field, then format as Markdown #}\n{{ entry.body|escape|markdown }}\n```\n\n----------------------------------------\n\nTITLE: Equivalent Flat Eager-Loading Map in Twig\nDESCRIPTION: An example of the equivalent flat eager-loading map for the nested approach shown previously. Note how each relationship must repeat the parent path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/eager-loading.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n[\n  ['topic.thumbnail', { kind: 'image' }],\n  ['topic.descendants'],\n  ['topic.sectionEditor'],\n]\n```\n\n----------------------------------------\n\nTITLE: Requiring Specific User Permission with requirePermission Tag\nDESCRIPTION: Shows how to restrict access to a template or section based on a specific user permission. This example requires the 'stayUpLate' permission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{% requirePermission 'stayUpLate' %}\n```\n\n----------------------------------------\n\nTITLE: Appending HTML with Twig Append Filter\nDESCRIPTION: Shows usage of the append filter to add HTML content to existing elements, with options for keeping or replacing existing content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>') }}\n{# Output: <div><p>Lorem</p><p>Ipsum</p></div> #}\n\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'keep') }}\n{# Output: <div><p>Lorem</p></div> #}\n\n{{ '<div><p>Lorem</p></div>'|append('<p>Ipsum</p>', 'replace') }}\n{# Output: <div><p>Ipsum</p></div> #}\n```\n\n----------------------------------------\n\nTITLE: Conditional User Group Redirect in Twig\nDESCRIPTION: Demonstrates redirecting non-member users to a pricing page using a conditional check with the redirect tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/redirect.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if not user or not user.isInGroup('members') %}\n  {% redirect \"pricing\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Plugin Variable File Structure\nDESCRIPTION: Example of the required file naming convention for plugin template variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/variables.md#2025-04-22_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n[PluginHandle]Variable.php\n```\n\n----------------------------------------\n\nTITLE: Accessing Number Field Values in Twig and PHP\nDESCRIPTION: Basic examples of accessing Number field values from an element using both Twig and PHP syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/number.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$value = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Outputting JSON Field Value in Twig\nDESCRIPTION: Demonstrates how to output a JSON field's value directly in a Twig template, which serializes it back to JSON.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myJsonField }}\n```\n\nLANGUAGE: html\nCODE:\n```\n{\"appId\":\"3beb8a4e-de95-448b-be44-ee19ab8cbe5e\",\"environment\":\"production\"}\n```\n\n----------------------------------------\n\nTITLE: Overriding Async CSRF Setting\nDESCRIPTION: The csrfInput() function allows overriding the global asyncCsrfInputs setting using the async key in the options argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput({\n  async: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Search Term Options in Craft CMS (PHP)\nDESCRIPTION: Example of configuring defaultSearchTermOptions to modify search behavior. This controls how search terms are matched when searching for elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n'defaultSearchTermOptions' => array(\n    'subLeft' => true,\n    'subRight' => true,\n),\n```\n\n----------------------------------------\n\nTITLE: Dynamic Parameter Translation in Twig\nDESCRIPTION: Shows how to replace placeholder values with dynamic content when translating messages in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"/contact\">{{ 'Welcome back, {name}'|t(params = {\n  name: currentUser.friendlyName,\n}) }}</a>\n```\n\n----------------------------------------\n\nTITLE: Implementing registerCachePaths Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers custom cache paths for the Clear Caches tool. Returns an array where keys are file paths and values are user-friendly labels shown in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\npublic function registerCachePaths()\n{\n    return array(\n        craft()->path->getStoragePath().'drinks/' => Craft::t('Drink images'),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Float Type in Twig\nDESCRIPTION: Demonstrates checking if a value is a float using PHP's is_float() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.5 is float ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 9 is float ? 'true' : 'false' }}\n{# result: false #}\n\n{{ 'duck' is float ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Scaffolding Craft CMS Project with Composer\nDESCRIPTION: DDEV command using Composer to create a new Craft CMS project from the official starter. This initializes the project with the necessary files and dependencies.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/README.md#2025-04-22_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nddev composer create -y \"craftcms/craft\"\n```\n\n----------------------------------------\n\nTITLE: Using the 'first' Parameter with includeCss in Twig\nDESCRIPTION: This example shows how to use the 'first' parameter with the includeCss tag to prioritize CSS inclusion. When 'first' is specified, the CSS will be included before any other CSS snippets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includecss.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% includeCss myCss first %}\n```\n\n----------------------------------------\n\nTITLE: Number Formatting Filter Usage\nDESCRIPTION: Demonstrates number formatting with optional group symbol omission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number }} => 1,000,000\n{{ 1000000|number(false) }} => 1000000\n```\n\n----------------------------------------\n\nTITLE: Handling After Discount Adjustments Creation\nDESCRIPTION: This event fires after discount adjustments have been created for an order. It allows for modifying the adjustments before they are applied to the order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\adjusters\\Discount;\nuse yii\\base\\Event;\n\nEvent::on(Discount::class, Discount::EVENT_AFTER_DISCOUNT_ADJUSTMENTS_CREATED, function(DiscountAdjustmentsEvent $e) {\n    // Do something - perhaps use a third party to check order data and modify the adjustments.\n});\n```\n\n----------------------------------------\n\nTITLE: Retrieving Products with GraphQL\nDESCRIPTION: Example GraphQL query to fetch the same information as the Twig example, demonstrating how to limit results, filter by type, and select specific fields including a custom field from the clothing product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_6\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  products(limit: 10, type: \"clothing\") {\n    title\n    uri\n    ... on clothing_Product {\n      summary\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing Entry Table Attribute HTML in Craft CMS\nDESCRIPTION: Hook to customize the HTML output of table cells on the entry index page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\npublic function getEntryTableAttributeHtml(EntryModel $entry, $attribute)\n{\n    if ($attribute == 'price') {\n        return '$'.$entry->price;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Published File URL with Parent Directory\nDESCRIPTION: Shows how to get a published URL for a file while publishing its entire parent directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/icons',\n    true,\n    'shaker.svg'\n);\n```\n\n----------------------------------------\n\nTITLE: Accessing Module Instance in Tests\nDESCRIPTION: Code pattern for accessing a module instance within test suites after proper configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/plugins-and-modules.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nMyModule::getInstance()\n```\n\n----------------------------------------\n\nTITLE: Navigation Link Styling CSS\nDESCRIPTION: CSS rules for styling navigation links with hover and active states using CSS variables\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_3\n\nLANGUAGE: css\nCODE:\n```\nnav a {\n    color: var(--color-muted);\n}\n\nnav a.active,\nnav a:hover {\n    color: var(--color-base);\n}\n```\n\n----------------------------------------\n\nTITLE: Handling Delete Payment Source Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes when a payment source is deleted. Can be used for cleanup or notification purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\PaymentSourceEvent;\nuse craft\\commerce\\services\\PaymentSources;\nuse yii\\base\\Event;\n\nEvent::on(PaymentSources::class, PaymentSources::EVENT_DELETE_PAYMENT_SOURCE, function(PaymentSourceEvent $e) {\n    // Do something - perhaps warn a user they have no valid payment sources saved.\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Allowed File Extensions in Craft CMS\nDESCRIPTION: Sets a list of file extensions that Craft will allow when a user is uploading files. This overrides the default list of allowed extensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_70\n\nLANGUAGE: php\nCODE:\n```\n'allowedFileExtensions' => 'jpg, jpeg, png, gif',\n```\n\n----------------------------------------\n\nTITLE: Date Modification with Twig Filter\nDESCRIPTION: Example of modifying a date using Twig's date_modify filter to get tomorrow's date\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/datetime.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set tomorrow = now|date_modify(\"+1 day\") %}\n<p>Tomorrow's date is {{ tomorrow|date(\"M d, Y\") }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Production Mode Log Format in Craft CMS\nDESCRIPTION: Example of machine-readable, single-line log format when devMode is disabled, including detailed request context and server variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_2\n\nLANGUAGE: log\nCODE:\n```\n[2022-04-15T16:57:54+00:00] web.WARNING: Some warning… {\"trace\":[],\"memory\":13579752,\"category\":\"application\"}\n[2022-04-15T16:57:54+00:00] web.WARNING: Request context  {\"ip\":\"172.18.0.1\",\"userId\":1,\"vars\":{\"_GET\":[],\"_POST\":[],\"_COOKIE\":{...}}}\n```\n\n----------------------------------------\n\nTITLE: Running Garbage Collection via Command Line\nDESCRIPTION: Terminal commands for manually triggering garbage collection in Craft CMS. Includes basic command and option for forcing deletion of all trashed items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/gc.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc --delete-all-trashed=1\n```\n\n----------------------------------------\n\nTITLE: Evaluating Custom Field in Twig Condition Formula\nDESCRIPTION: This Twig expression checks a custom field on the order for a specific value. It can be used to offer discounts based on custom order attributes like license types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/discounts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\norder.myCustomLicenseField and order.myCustomLicenseField == 'Supporter'\n```\n\n----------------------------------------\n\nTITLE: Namespacing HTML with the namespace Filter in Twig\nDESCRIPTION: Shows how to namespace input names, HTML attributes, and CSS selectors to prevent conflicts in the DOM.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% set html %}\n<style>\n  .text { font-size: larger; }\n  #title { font-weight: bold; }\n</style>\n<input class=\"text\" id=\"title\" name=\"title\" type=\"text\">\n{% endset %}\n{{ html|namespace('foo') }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ html|namespace('foo', withClasses=true) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Entries in PHP\nDESCRIPTION: This PHP snippet shows how to access and loop through related entries from an Entries field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/entries.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$relatedEntries = $entry->myFieldHandle->all();\nif (count($relatedEntries)) {\n    foreach ($relatedEntries as $rel) {\n        // $rel->url, $rel->title\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'countable' test in Twig\nDESCRIPTION: Demonstrates how to use the 'countable' test to check if a variable is countable in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{{ craft.entries() is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ ['apple', 'orange'] is countable ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'dracula' is countable ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Selected Products\nDESCRIPTION: Demonstrates how to loop through all selected products in a Products field by using the all() method to execute the element query.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/products-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for product in entry.myFieldHandle.all() %}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Cookie Domain in Craft CMS (PHP)\nDESCRIPTION: Example of setting the defaultCookieDomain configuration value. This controls the domain name Craft will use when sending cookies to the browser.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n'defaultCookieDomain' => '.my-project.tld',\n```\n\n----------------------------------------\n\nTITLE: All Options Iteration for Multi-select Field in Twig\nDESCRIPTION: Shows how to iterate through all available options in a multi-select field, regardless of selection status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-select-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n    {% for option in entry.multiselectFieldHandle.options %}\n        <li>{{ option }}</li>\n    {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Retrieving Current User's Cart in Twig\nDESCRIPTION: This snippet demonstrates how to retrieve the current user's cart in a Twig template using the craft.commerce.carts.cart variable. If no cart exists, this will generate a new one in the session.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n```\n\n----------------------------------------\n\nTITLE: JSON Decoding with json_decode Filter\nDESCRIPTION: Decodes a JSON string into an array using Yii's Json::decode()\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr = '[1, 2, 3]'|json_decode %}\n```\n\n----------------------------------------\n\nTITLE: Basic Order Email Subject Template in Twig\nDESCRIPTION: Simple Twig template for generating an order confirmation email subject line using the order ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nOrder #{{ order.id }} received.\n```\n\n----------------------------------------\n\nTITLE: Basic Reference Tag Syntax\nDESCRIPTION: Shows the fundamental structure of reference tags which can be used in any plain text field. A reference tag consists of three segments: element type, identifying reference, and property to return.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/reference-tags.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n{type:reference:property}\n```\n\n----------------------------------------\n\nTITLE: Using Collections with Element Queries (Twig and PHP)\nDESCRIPTION: Shows how to use the new Collections functionality in Craft 4 which offers a more convenient way of working with arrays and collections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set posts = craft.entries()\n  .section('blog')\n  .all() %}\n\n{% set posts = craft.entries()\n  .section('blog')\n  .collect() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Array\n$posts = \\craft\\elements\\Entry::find()\n    ->section('blog')\n    ->all();\n\n// Collection\n$posts = \\craft\\elements\\Entry::find()\n    ->section('blog')\n    ->collect();\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Arguments for Widget Element GraphQL Queries\nDESCRIPTION: This PHP class extends Craft's ElementArguments class to define custom GraphQL arguments for Widget queries. It adds an 'approved' argument that allows filtering widgets by their approval status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\arguments\\elements;\n\nuse GraphQL\\Type\\Definition\\Type;\n\nclass Widget extends craft\\gql\\base\\ElementArguments\n{\n    public static function getArguments(): array\n    {\n        // append our argument to common element arguments and any from custom fields\n        return array_merge(parent::getArguments(), self::getContentArguments(), [\n            'approved' => [\n                'name' => 'approved',\n                'type' => Type::boolean(),\n                'description' => 'Narrows query results based on approved status.'\n            ],\n        ]);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_REBRAND_PATH for Custom Control Panel Assets Location\nDESCRIPTION: Configures CRAFT_REBRAND_PATH to store login page logo and site icon in a version-controlled directory instead of the default storage directory. This variable supports aliases and environment variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// Use a top-level `rebrand/` directory for the site logo + icon:\ndefine('CRAFT_REBRAND_PATH', '@root/rebrand');\n```\n\n----------------------------------------\n\nTITLE: Unlimited Matrix Block Return in Twig\nDESCRIPTION: Shows how to return all Matrix blocks by setting the limit parameter to null.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.limit(null) %}\n```\n\n----------------------------------------\n\nTITLE: Checking for Selected Products in Twig\nDESCRIPTION: Shows how to check if a Products field has any selected products using the length filter in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/products-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.productsFieldHandle | length %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Running Queue in Daemon Mode\nDESCRIPTION: Command to run the queue as a continuous listener process. This mode will keep running and checking for new jobs, with verbose output for monitoring.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft queue/listen --verbose\n```\n\n----------------------------------------\n\nTITLE: Adding Alerts to Release Notes in Markdown\nDESCRIPTION: Demonstrates how to include alert messages in release notes using GitHub's alert syntax. These alerts will be styled appropriately in the Plugin Store and Updates utility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/changelogs-and-updates.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n> [!NOTE]  \n> Highlights information that users should take into account, even when skimming.\n\n> [!IMPORTANT]  \n> Crucial information necessary for users to succeed.\n\n> [!WARNING]  \n> Critical content demanding immediate user attention due to potential risks.\n```\n\n----------------------------------------\n\nTITLE: Customizing Timezone for Time Input in Twig Form\nDESCRIPTION: Twig code snippet for creating a time input with a custom timezone in an element form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Set a specific timezone #}\n{% set tz = 'America/Los_Angeles' %}\n\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('H:i', timezone=tz)\n  : '' %}\n\n<input type=\"time\" name=\"fields[myFieldHandle][time]\" value=\"{{ currentValue }}\">\n{{ hiddenInput('fields[myFieldHandle][timezone]', tz) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Customer in Commerce 4 Order Element\nDESCRIPTION: In Commerce 4, Order::getCustomer() now returns a User element instead of a Customer element. This change affects how customer data is accessed from an order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nOrder::getCustomer()\n```\n\n----------------------------------------\n\nTITLE: Evaluating Order Email Domain in Twig Condition Formula\nDESCRIPTION: This Twig expression checks if the order's email contains a specific domain. It can be used in a discount's condition formula to target customers from a particular company.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/discounts.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n'@myclient.com' in order.email\n```\n\n----------------------------------------\n\nTITLE: Listing All Tax Categories in Twig\nDESCRIPTION: This code demonstrates how to list all tax categories set up in the Craft Commerce system, displaying their IDs and names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% for taxCategory in craft.commerce.taxCategories.allTaxCategories %}\n  {{ taxCategory.id }} - {{ taxCategory.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Using Named Parameters in URL Rules\nDESCRIPTION: Shows how to use special tokens like {handle}, {slug}, and {uid} in the regular expression portion of named parameters in URL rules.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/routing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  // Be aware that URIs matching an existing element route will be picked up by step #2, above!\n  'blog/<entrySlug:{slug}>' => 'controller/action/path',\n];\n```\n\n----------------------------------------\n\nTITLE: Translation Directory Structure Example\nDESCRIPTION: Demonstrates the new directory structure for static message translations in Craft 3, showing organization by locale and translation category.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_2\n\nLANGUAGE: treeview\nCODE:\n```\ntranslations/\n└── de/\n    ├── app.php\n    └── site.php\n```\n\n----------------------------------------\n\nTITLE: Using Getter Methods Directly in PHP for Craft CMS\nDESCRIPTION: This snippet demonstrates the preferred way of using getter and setter methods directly instead of magic properties. This approach provides better performance and easier debugging.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n$oldAuthor = $entry->author;\n$entry->author = $newAuthor;\n\n// Better:\n$oldAuthor = $entry->getAuthor();\n$entry->setAuthor($newAuthor);\n```\n\n----------------------------------------\n\nTITLE: Implementing Model in PHP for Craft CMS Testing\nDESCRIPTION: ExampleModel implements craft\\base\\Model with public properties exampleParam and exampleDateParam. The latter is linked to the datetimeAttributes() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\models\\ExampleModel\n```\n\n----------------------------------------\n\nTITLE: Setting CSRF Token Name in PHP\nDESCRIPTION: Defines the name for CSRF cookies and input fields used in CSRF protection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\n'csrfTokenName' => 'CSRF',\n```\n\n----------------------------------------\n\nTITLE: Adjusting Matrix Block Limit in Twig\nDESCRIPTION: Demonstrates how to modify the number of Matrix blocks returned using the limit parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/matrix-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for block in entry.myMatrixField.limit(5) %}\n```\n\n----------------------------------------\n\nTITLE: Installing Plugin via Composer\nDESCRIPTION: Command to require a plugin package using Composer with dependency updates enabled\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/plugins.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/commerce -w\n```\n\n----------------------------------------\n\nTITLE: Updating Cart with Explicit Address IDs in Twig/HTML\nDESCRIPTION: This snippet demonstrates a form to update the cart with explicit address IDs for both shipping and billing addresses. It sets both addresses to the same value without using the 'sameAddress' parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/update-cart-addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customer.addresses|first %}\n\n<form method=\"post\">\n    <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n    <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n    <input type=\"hidden\" name=\"shippingAddressId\" value=\"{{ address.id }}\">\n    <input type=\"hidden\" name=\"billingAddressId\" value=\"{{ address.id }}\">\n    <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Implementing a GraphQL Argument Handler in PHP for Craft CMS\nDESCRIPTION: This class extends RelationArgumentHandler to handle a custom 'relatedToWidgets' argument, translating it into a query argument for Widget IDs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\argumenthandlers;\n\nuse mynamespace\\elements\\Widget;\nuse craft\\gql\\base\\RelationArgumentHandler;\n\nclass RelatedWidgets extends RelationArgumentHandler\n{\n    protected $argumentName = 'relatedToWidgets';\n\n    protected function handleArgument($argumentValue)\n    {\n        $argumentValue = parent::handleArgument($argumentValue);\n        return $this->getIds(Widget::class, $argumentValue);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Viewing Nitro Hosts Configuration\nDESCRIPTION: Example of Nitro's hosts file configuration showing database and site hostnames. The hostnames are automatically set when running the apply command and follow a consistent naming pattern for databases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/databases.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# <nitro>\n127.0.0.1\tmysql-8.0-3306.database.nitro plugins-dev.nitro tutorial.nitro\n# </nitro>\n```\n\n----------------------------------------\n\nTITLE: Checking Selected Option in Twig\nDESCRIPTION: Shows how to check if an option is selected in a Radio Buttons field using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/radio-buttons-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.value %}\n```\n\n----------------------------------------\n\nTITLE: Nginx Stop Command\nDESCRIPTION: Command for stopping nginx on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_7\n\nLANGUAGE: shell\nCODE:\n```\nnitro nginx stop [<options>]\n```\n\n----------------------------------------\n\nTITLE: Configuring Text Field for Post Summary in Craft CMS\nDESCRIPTION: Steps to create a plain text field for post summaries, including enabling search keywords and line breaks. The field is then customized in the field layout with a specific label and handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/configure/resources.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<BrowserShot\n    url=\"https://tutorial.ddev.site/admin/settings/sections/new\"\n    id=\"newTextField\"\n    :poi=\"{\n        name: [81, 5, 'A'],\n        keywords: [75, 29, 'B'],\n        allowLineBreaks: [60, 74, 'C'],\n    }\"\n    :link=\"false\"\n    caption=\"Creating a plain text field in a slideout.\">\n<img src=\"../images/new-plain-text-field.png\" alt=\"Plain text field creation slideout\" />\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: Executing Plugin and Content Migrations in Craft CMS\nDESCRIPTION: Command line instructions for executing pending migrations for a specific plugin, for content migrations, or for all migrations across all tracks in a Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/up --plugin=my-plugin-handle\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/up\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft migrate/all\n```\n\n----------------------------------------\n\nTITLE: Requiring Craft CMS Version in composer.json\nDESCRIPTION: Example of how to specify minimum Craft CMS version requirements in a plugin's composer.json file. This is required for all plugins submitted to the Plugin Store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-store.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"require\": {\n  \"craftcms/cms\": \"^5.0.0\"\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Craft Base Path Constants\nDESCRIPTION: Demonstrates how to set the base path for Craft's folder structure and configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Path to your craft/ folder (where the app/ folder lives)\n$craftPath = '../../craft';\n\n// Path to where the rest of the craft/* folders live\ndefine('CRAFT_BASE_PATH', '../craft_sitefiles/');\n```\n\n----------------------------------------\n\nTITLE: Setting Application ID in Craft CMS (PHP)\nDESCRIPTION: Example of setting the appId configuration value. This identifier is used for caches and user sessions and should be consistent across load-balanced environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'appId' => 'lannister',\n```\n\n----------------------------------------\n\nTITLE: Using the 'first' parameter with {% includeJs %} in Twig\nDESCRIPTION: This snippet shows how to use the 'first' parameter with the {% includeJs %} tag. Adding 'first' ensures that this JavaScript snippet is included before any other snippets added with this tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includejs.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% includeJs myJs first %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Action Menu Items with JavaScript Integration in PHP\nDESCRIPTION: Example of creating action menu items for an element type with JavaScript integration. The code generates a unique ID for each menu item to connect it with the appropriate JavaScript functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$alertId = sprintf('action-alert-title-%s', mt_rand());\n$items[] = [\n    'type' => MenuItemType::Button,\n    'id' => $alertId,\n    'icon' => 'alert',\n    'label' => Craft::t('my-plugin', 'Show {type} title', [\n        'type' => static::lowerDisplayName(),\n    ]),\n];\n\n$view = Craft::$app->getView();\n$view->registerJsWithVars(fn($id, $title) => <<<JS\n$('#' + $id).on('click', () => {\n  alert($title);\n});\nJS, [$alertId, $this->title]);\n```\n\n----------------------------------------\n\nTITLE: PHP Stop Command\nDESCRIPTION: Command for stopping PHP-FPM on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\nnitro php stop [<options>]\n```\n\n----------------------------------------\n\nTITLE: Registering Arbitrary HTML in Craft CMS\nDESCRIPTION: Demonstrates how to include arbitrary HTML on a page, comparing the approach in Craft 2 (using templates->includeFootHtml) versus Craft 3 (using View events).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\ncraft()->templates->includeFootHtml($html);\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\web\\View;\nuse yii\\base\\Event;\n\nEvent::on(\n    View::class,\n    View::EVENT_END_BODY,\n    function(Event $event) {\n        // $html = ...\n        echo $html;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Converting Class Attribute to Array with explodeClass Filter in Twig\nDESCRIPTION: The 'explodeClass' filter converts a 'class' attribute value into an array of class names, useful for manipulating HTML classes in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{% set classNames = 'foo bar baz'|explodeClass %}\n```\n\n----------------------------------------\n\nTITLE: Control Panel Template Hooks Table\nDESCRIPTION: A comprehensive table listing all available template hooks in Craft Commerce's control panel, including their locations and purposes. The hooks cover various sections including discounts, customers, orders, products, sales, and subscriptions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/template-hooks.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Hook                                     | Description & Template\n| ---------------------------------------- | ----------------------\n| `cp.commerce.discount.edit`              | After discount detail view's \"Enabled\" field.<br><small>[promotions/discounts/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/discounts/_edit.html)</small>\n| `cp.commerce.discounts.edit.content`     | After discount detail view's main content.<br><small>[promotions/discounts/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/discounts/_edit.html)</small>\n| `cp.commerce.discounts.edit.details`     | After discount detail view's existing right sidebar details column.<br><small>[promotions/discounts/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/discounts/_edit.html)</small>\n| `cp.commerce.discounts.edit`             | Before discount detail view's template blocks.<br><small>[promotions/discounts/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/discounts/_edit.html)</small>\n| `cp.commerce.discounts.index`            | After discounts index view's main content.<br><small>[promotions/discounts/index.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/discounts/index.html)</small>\n| `cp.commerce.customers.edit`             | Before customer edit view's template blocks.<br><small>[customers/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/customers/_edit.html)</small>\n| `cp.commerce.customers.edit.content`     | After existing customer edit view's content.<br><small>[customers/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/customers/_edit.html)</small>\n| `cp.commerce.customers.edit.details`     | After existing customer edit view's right sidebar details.<br><small>[customers/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/customers/_edit.html)</small>\n| `cp.commerce.order.edit`                 | Before order edit view's template blocks.<br><small>[orders/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/orders/_edit.html)</small>\n| `cp.commerce.order.edit.details`         | After existing order edit view's right sidebar details.<br><small>[orders/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/orders/_edit.html)</small>\n| `cp.commerce.order.edit.main-pane`       | After existing content within order edit view's \"Order Details\" tab.<br><small>[orders/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/orders/_edit.html)</small>\n| `cp.commerce.product.edit.content`       | After product detail view's custom fields.<br><small>[products/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/products/_edit.html)</small>\n| `cp.commerce.product.edit.details`       | After existing product detail view's right sidebar details.<br><small>[products/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/products/_edit.html)</small>\n| `cp.commerce.sales.edit.content`         | After sale detail view's main content.<br><small>[promotions/sales/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/sales/_edit.html)</small>\n| `cp.commerce.sales.edit.details`         | After sale detail view's existing right sidebar details column.<br><small>[promotions/sales/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/sales/_edit.html)</small>\n| `cp.commerce.sales.edit`                 | Before sale detail view's template blocks.<br><small>[promotions/sales/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/sales/_edit.html)</small>\n| `cp.commerce.sales.index`                | After sales index view's main content.<br><small>[promotions/sales/index.html](https://github.com/craftcms/commerce/blob/v3/src/templates/promotions/sales/index.html)</small>\n| `cp.commerce.subscriptions.edit.content` | After the last `.pane` in subscription detail view's content block.<br><small>[subscriptions/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/subscriptions/_edit.html)</small>\n| `cp.commerce.subscriptions.edit.meta`    | After the discount detail view's existing right sidebar details.<br><small>[subscriptions/_edit.html](https://github.com/craftcms/commerce/blob/v3/src/templates/subscriptions/_edit.html)</small>\n```\n\n----------------------------------------\n\nTITLE: Updating Existing Address in Craft Commerce Twig Template\nDESCRIPTION: This snippet shows how to update an existing address on the cart by passing individual address properties. It demonstrates updating a shipping address with new full name and address line 1.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/addresses.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.getCart() %}\n{% set address = cart.shippingAddress %}\n\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n\n  {{ input('text', 'shippingAddress[fullName]', address.fullName) }}\n  {{ input('text', 'shippingAddress[addressLine1]', address.addressLine1) }}\n\n  {# ... #}\n\n  <button>Save Shipping Info</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Ngrok Tunnel Configuration for Nitro\nDESCRIPTION: Commands for setting up ngrok tunnels to Nitro sites, including both basic and custom hostname configurations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ ngrok http -host-header=example1.test example1.test:80\n```\n\n----------------------------------------\n\nTITLE: Checking for Selected Options\nDESCRIPTION: Shows how to check if any options are selected in a Multi-select field using length/count functions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myFieldHandle)) {\n```\n\n----------------------------------------\n\nTITLE: Configuring Payment Gateways Outside the Database in PHP\nDESCRIPTION: This snippet shows how to store payment gateway configuration information outside the database using the commerce-gateways.php config file. It demonstrates using environment variables to securely store API keys for a Stripe gateway.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/payment-gateways.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  'myStripeGateway' => [\n    'apiKey' => getenv('STRIPE_API_KEY'),\n  ],\n];\n```\n\n----------------------------------------\n\nTITLE: Suppressing Template Errors in Craft CMS (PHP)\nDESCRIPTION: Sets the suppressTemplateErrors config option to true, which hides Twig template runtime errors in the browser but still logs them to Craft's log files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_45\n\nLANGUAGE: php\nCODE:\n```\n'suppressTemplateErrors' => true\n```\n\n----------------------------------------\n\nTITLE: Adding Logout Link\nDESCRIPTION: Shows how to implement a conditional logout link using the logoutUrl variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"{{ logoutUrl }}\">Logout</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Redirecting After Cart Update in Craft Commerce (Twig)\nDESCRIPTION: This example shows how to redirect users to a specific page after updating their cart in Craft Commerce. It uses the redirectInput() Twig function to specify the redirect destination.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  {# ... #}\n\n  <button>Add to cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Configuring Index Template Filenames in Craft CMS (PHP)\nDESCRIPTION: Sets the indexTemplateFilenames config option to specify the template filenames Craft will look for to represent a directory's 'index' template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_43\n\nLANGUAGE: php\nCODE:\n```\n'indexTemplateFilenames' => array('index', 'default'),\n```\n\n----------------------------------------\n\nTITLE: Conditional Logic in Object Templates\nDESCRIPTION: Shows how to use conditional logic within object templates, combining full Twig syntax with compact notation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.level == 1 ? 'topics' : object.parent.uri }}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Handling After Refund Transaction Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a transaction refund is processed. Useful for post-refund processing or notifications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\RefundTransactionEvent;\nuse craft\\commerce\\services\\Payments;\nuse yii\\base\\Event;\n\nEvent::on(Payments::class, Payments::EVENT_AFTER_REFUND_TRANSACTION, function(RefundTransactionEvent $e) {\n    // Do something - perhaps check if refund amount more than half the transaction and do something based on that\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Product Query Element Query Class in PHP\nDESCRIPTION: Example of implementing a custom ElementQuery class for products with stock availability checking. Shows param normalization and query condition handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nclass ProductQuery extends ElementQuery\n{\n    public $stock;\n    public bool $isAvailable;\n\n    // ...\n\n    public function isAvailable(null|bool $value): self\n    {\n        $this->isAvailable = $value;\n\n        return $this;\n    }\n\n    public function beforePrepare(): bool\n    {\n        // ...\n\n        if ($this->isAvailable !== null) {\n            if ($this->isAvailable) {\n                $this->subQuery->andWhere(Db::parseParam('products.stock', '>', 0));\n            } else {\n                $this->subQuery->andWhere(Db::parseParam('products.stock', '<=', 0));\n            }\n        }\n\n        return parent::beforePrepare();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Restoring Soft-Deleted Records\nDESCRIPTION: Shows different methods for restoring soft-deleted records using Active Record and query commands.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/soft-deletes.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$record = MyRecord::findTrashed()\n    ->where(['id' => $id])\n    ->one();\n\n$record->restore();\n\n\\Craft::$app->db->createCommand()\n    ->restore('{{%mytablename}}', ['id' => $id])\n    ->execute();\n```\n\n----------------------------------------\n\nTITLE: Querying Relations with Source Locale Constraint\nDESCRIPTION: Shows how to limit relation queries to a specific source locale in Craft CMS Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries.section('ingredients').relatedTo({\n    sourceElement: cocktail,\n    sourceLocale: craft.locale\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Reference Link Usage in Release Notes\nDESCRIPTION: Example showing how to properly format and place reference-style links in changelog entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/changelogs-and-updates.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-02-01\n### Fixed issue [#123]\n\n[#123]: https://github.com/pixelandtonic/foo/issues/123\n\n## 2.0.0 - 2017-01-31\n### Added\n- New [superFoo] config setting\n\n[superFoo]: https://docs.my-plugin.tld/config#superFoo\n```\n\n----------------------------------------\n\nTITLE: Running Craft Queue Listener in Local Development\nDESCRIPTION: Commands to run the Craft queue listener in verbose mode for local development, with examples for DDEV and other environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nddev craft queue/listen --verbose\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft queue/listen --verbose\n```\n\n----------------------------------------\n\nTITLE: Converting Date Field to Time Field in MySQL\nDESCRIPTION: SQL query to update existing Date field values when converting to a Time field in MySQL. Adjusts for timezone offset.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE `content`\nSET `field_myFieldHandle` = CONVERT_TZ(`field_myFieldHandle`, '+00:00', '-07:00')\nWHERE `field_myFieldHandle` IS NOT NULL\n```\n\n----------------------------------------\n\nTITLE: Unsetting Variables in PHP Foreach Loops\nDESCRIPTION: Shows how to properly unset variables created by reference in foreach loops to prevent unintended side effects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nforeach ($array as &$value) {\n    // ...\n}\nunset($value);\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Memory Limit in Craft CMS (PHP)\nDESCRIPTION: Example of configuring phpMaxMemoryLimit to increase available memory. This controls how much memory Craft will reserve for intensive operations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n'phpMaxMemoryLimit' => '512M',\n```\n\n----------------------------------------\n\nTITLE: Setting Verification Code Duration in Craft CMS\nDESCRIPTION: Specifies the amount of time a user verification code can be used before expiring. This affects the validity period of verification links sent to users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_69\n\nLANGUAGE: php\nCODE:\n```\n'verificationCodeDuration' => 'P1M',\n```\n\n----------------------------------------\n\nTITLE: Advanced URL Function with Query Parameters and Protocol\nDESCRIPTION: Demonstrates using the url() function with an absolute URL, adding query parameters and enforcing a specific protocol.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ url('http://my-project.tld', 'foo=1', 'https') }}\n{# Outputs: \"https://my-project.tld?foo=1\" #}\n```\n\n----------------------------------------\n\nTITLE: Setting Page Trigger as Query Parameter in Craft CMS (PHP)\nDESCRIPTION: Configures the pageTrigger as a query string parameter named 'page' for specifying page numbers in Craft CMS URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_35\n\nLANGUAGE: php\nCODE:\n```\n'pageTrigger' => '?page',\n```\n\n----------------------------------------\n\nTITLE: Updating Composer Autoloader\nDESCRIPTION: This Bash command updates Composer's autoloader after modifying the autoload configuration in composer.json. It regenerates the autoloader files with optimized performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/module-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer dump-autoload -a\n```\n\n----------------------------------------\n\nTITLE: Converting Strings to PascalCase with pascal Filter in Twig\nDESCRIPTION: The pascal filter formats a string in 'PascalCase' (also known as 'UpperCamelCase'), where each word starts with an uppercase letter and has no spaces.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foo bar'|pascal }}\n{# Output: FooBar #}\n```\n\n----------------------------------------\n\nTITLE: Using combine Function in Twig\nDESCRIPTION: The combine function merges two arrays, using the first array for keys and the second for values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set arr1 = ['a', 'b', 'c'] %}\n{% set arr2 = ['foo', 'bar', 'baz'] %}\n{% set arr3 = combine(arr1, arr2) %}\n{# arr3 will now be `{a: 'foo', b: 'bar', c: 'baz'}` #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Craft Commerce Settings in Twig\nDESCRIPTION: Demonstrates how to retrieve all Craft Commerce general settings using the craft.commerce.settings variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set settings = craft.commerce.settings %}\n```\n\n----------------------------------------\n\nTITLE: Using Nitro Keys Command\nDESCRIPTION: Example showing how to list and select SSH keys to add to a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\n$ nitro keys\n  1 - id_rsa\n  2 - personal_rsa\nSelect the key to add to \"nitro-dev\"? [1]\nTransferred the key \"id_rsa\" into \"nitro-dev\".\n```\n\n----------------------------------------\n\nTITLE: Using New Button Macros with Spinners in Twig for Craft 4\nDESCRIPTION: Showcases the usage of new button and submitButton macros in Craft 4 Twig templates, including the spinner option for loading animations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% import '_includes/forms.twig' as forms %}\n\n{{ forms.button({\n  label: 'Save a Copy',\n  spinner: true,\n}) }}\n\n{# Output:\n<button type=\"button\" class=\"btn\">\n  <div class=\"label\">Save a Copy</div>\n  <div class=\"spinner spinner-absolute\"></div>\n</button>\n#}\n\n{{ forms.submitButton({\n  label: 'Save',\n  spinner: true,\n}) }}\n\n{# Output:\n<button type=\"submit\" class=\"submit btn\">\n  <div class=\"label\">Save</div>\n  <div class=\"spinner spinner-absolute\"></div>\n</button>\n#}\n```\n\n----------------------------------------\n\nTITLE: Configuring XSendFile Usage in PHP\nDESCRIPTION: Enables XSendFile for serving files when supported by the server.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_22\n\nLANGUAGE: php\nCODE:\n```\n'useXSendFile' => true,\n```\n\n----------------------------------------\n\nTITLE: Accessing Asset File Model in Craft CMS 2 Event\nDESCRIPTION: Demonstrates how to access the AssetFileModel object in Craft CMS 2 events related to assets. This object represents the asset being saved, deleted, or modified.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$asset = $event->params['asset'];\n```\n\n----------------------------------------\n\nTITLE: Making Nitro Executable (Manual Installation)\nDESCRIPTION: This command makes the Nitro binary executable during manual installation. It's used after downloading the binary from GitHub releases.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nchmod +x ./nitro\n```\n\n----------------------------------------\n\nTITLE: Matrix Block Type Class Structure\nDESCRIPTION: HTML structure showing class naming convention for different Matrix block types\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Text blocks: #}\n<div class=\"content-block text\">{# ... #}</div>\n\n{# Image blocks: #}\n<div class=\"content-block image\">{# ... #}</div>\n\n{# Unsupported blocks: #}\n<div class=\"content-block unsupported\">{# ... #}</div>\n\n{# Quote blocks (if you implemented them): #}\n<div class=\"content-block quote\">{# ... #}</div>\n```\n\n----------------------------------------\n\nTITLE: Country Model Attributes Definition\nDESCRIPTION: Defines the core attributes of the CountryModel class including identifier, name, ISO code, state requirement flag, and control panel edit URL.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/country-model.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nid\nThe address record ID.\n\nname\nThe countries name (required).\n\niso\nThe country's ISO code (required).\n\nstateRequired\nA boolean, which determines if the state is required when this country is selected.\n\ncpEditUrl\nA URL to edit this country in the control panel.\n```\n\n----------------------------------------\n\nTITLE: Updating Multiple Specific Plugins\nDESCRIPTION: Commands to update multiple specified plugins simultaneously in Craft CMS\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nddev craft update commerce element-api\nphp craft update commerce element-api\n```\n\n----------------------------------------\n\nTITLE: User-defined Plugin Config Override in Craft CMS\nDESCRIPTION: Example of a user-created configuration file that overrides default plugin settings. The file should be placed in the craft/config/ directory and named after the plugin handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/plugin-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn array(\n    'foo' => 'fooValueOverride',\n);\n```\n\n----------------------------------------\n\nTITLE: Adding End-Body Scripts with endBody() Function\nDESCRIPTION: The endBody() function outputs any scripts and styles that were registered for the \"end body\" position, to be placed right before the closing body tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n<body>\n  <h1>{{ page.name }}</h1>\n  {{ page.body }}\n\n  {{ endBody() }}\n</body>\n```\n\n----------------------------------------\n\nTITLE: Formatting Links in Release Notes using Markdown\nDESCRIPTION: Illustrates how to properly format and define reference-style links in release notes. Links must be defined before the next version heading for proper parsing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/changelogs-and-updates.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-02-01\n### Fixed issue [#123]\n\n[#123]: https://github.com/pixelandtonic/foo/issues/123\n\n## 2.0.0 - 2017-01-31\n### Added\n- New [superFoo] config setting\n\n[superFoo]: https://docs.my-plugin.tld/config#superFoo\n```\n\n----------------------------------------\n\nTITLE: Configuring Tag Similarity Rules in Craft CMS\nDESCRIPTION: Configuration setting that determines whether Craft should allow tags with names that would be identical when converted to ASCII. When enabled, it allows tags with diacritical marks to exist alongside their ASCII equivalents.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_82\n\nLANGUAGE: php\nCODE:\n```\n'allowSimilarTags' => true,\n```\n\n----------------------------------------\n\nTITLE: Configuring DDEV for Craft CMS Project\nDESCRIPTION: Command to set up DDEV configuration for a Craft CMS project. This specifies the project type, document root location, and creates the necessary directory structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/installation.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nddev config --project-type=craftcms --docroot=web --create-docroot\n```\n\n----------------------------------------\n\nTITLE: Using the 'resource' test in Twig\nDESCRIPTION: Shows how to use the 'resource' test to check if a variable is a resource in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ asset.getStream() is resource ? 'true' : 'false' }}\n{# result: true #}\n\n{{ siteUrl is resource ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Deprecated Methods in Craft Commerce 4\nDESCRIPTION: List of deprecated methods from Commerce 3 and their Commerce 4 replacements, including changes to Plans, Subscriptions, TaxRates, and Transactions services.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nPlans::getAllGatewayPlans() -> Plans::getPlansByGatewayId()\nSubscriptions::doesUserHaveAnySubscriptions() -> Subscriptions::doesUserHaveSubscriptions()\nSubscriptions::getSubscriptionCountForPlanById() -> Subscriptions::getSubscriptionCountByPlanId()\nTaxRates::getTaxRatesForZone() -> TaxRates::getTaxRatesByTaxZoneId()\nTransactions::deleteTransaction() -> Transactions::deleteTransactionById()\n```\n\n----------------------------------------\n\nTITLE: Fetching All Countries as List in Twig\nDESCRIPTION: Demonstrates how to retrieve all countries as a key-value list and create a select dropdown in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries.allCountriesAsList %}\n<select>\n{% for id, countryName in countries %}\n    <option value=\"{{ id }}\">\n        {{- countryName -}}\n    </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Updating Nitro CLI on Windows with Sudo\nDESCRIPTION: For Windows users, the self-update command requires sudo privileges. After updating the CLI, use the update command to bring Docker containers to their latest versions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/updating.md#2025-04-22_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nsudo nitro self-update\nnitro update\n```\n\n----------------------------------------\n\nTITLE: Implementing Hook Registration in Craft CMS PHP\nDESCRIPTION: Example of implementing a hook method in a plugin to register custom CP routes. The method returns an array of route patterns mapped to their corresponding templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-and-events.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nfunction registerCpRoutes()\n{\n    return array(\n        'cocktails/new'               => 'cocktails/_edit',\n        'cocktails/(?P<widgetId>\\d+)' => 'cocktails/_edit',\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Gateway Request Event Handler in PHP\nDESCRIPTION: Event handler for commerce_payments.onBeforeGatewayRequestSend that can prevent gateway requests and set transaction messages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_payments.onBeforeGatewayRequestSend', function($event){\n    $transaction = $event->params['transaction'];\n    $transaction->message = 'Transaction declined';\n    $event->performAction = false;\n});\n```\n\n----------------------------------------\n\nTITLE: Using clone Function in Twig\nDESCRIPTION: The clone function creates a copy of an object to allow for modified operations without affecting the original.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.entries().section('news') %}\n{% set articles = clone(query).type('articles') %}\n```\n\n----------------------------------------\n\nTITLE: Setting Container Environment Variables in Nitro\nDESCRIPTION: Example of setting custom environment variables for a container in Nitro by adding them to the container's environment file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/containers.md#2025-04-22_snippet_1\n\nLANGUAGE: env\nCODE:\n```\nMY_CUSTOM_ENV=somevariable\n```\n\n----------------------------------------\n\nTITLE: Enabling ASCII Filename Conversion in Craft CMS\nDESCRIPTION: Determines whether Craft should convert any non-ASCII characters in uploaded filenames to ASCII. This can help ensure compatibility across different systems.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_71\n\nLANGUAGE: php\nCODE:\n```\n'convertFilenamesToAscii' => true,\n```\n\n----------------------------------------\n\nTITLE: Handling Order After Payment\nDESCRIPTION: This event fires after an order has been both paid and completed. It provides access to the paid order object for post-payment processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\elements\\Order;\nuse yii\\base\\Event;\n\nEvent::on(Order::class, Order::EVENT_AFTER_ORDER_PAID, function(Event $e) {\n    // @var Order $order\n    $order = $e->sender;\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Installing Plugin via Craft CLI\nDESCRIPTION: Command to install a plugin using Craft's CLI tool and run any necessary migrations\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/plugins.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: GraphQL Mutation Response for Cocktail Entry\nDESCRIPTION: Example response from a GraphQL mutation showing the saved cocktail entry data with typed ingredients blocks and system fields like dateCreated. Demonstrates the response format with typename identification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_26\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"data\": {\n    \"save_cocktails_cocktails_Entry\": {\n      \"title\": \"Gin and Tonic\",\n      \"slug\": \"gin-tonic\",\n      \"authorId\": 1,\n      \"dateCreated\": \"2021-03-04\",\n      \"ingredients\": [\n        {\n          \"__typename\": \"ingredients_spirit_BlockType\",\n          \"id\": \"9\",\n          \"spiritName\": \"Gin\",\n          \"ounces\": 2\n        },\n        {\n          \"__typename\": \"ingredients_mixer_BlockType\",\n          \"id\": \"10\",\n          \"mixerName\": \"Tonic\",\n          \"ounces\": 4\n        },\n        {\n          \"__typename\": \"ingredients_mixer_BlockType\",\n          \"id\": \"11\",\n          \"mixerName\": \"Fresh Lime Juice\",\n          \"ounces\": 0.25\n        },\n        {\n          \"__typename\": \"ingredients_garnish_BlockType\",\n          \"id\": \"12\",\n          \"garnishName\": \"Lime Wedge or Twist\"\n        }\n      ]\n    }\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: GET payments/complete-payment API Endpoint\nDESCRIPTION: Endpoint for processing customer's return from off-site payment processing. Requires a commerceTransactionHash parameter for payment verification. Handles both standard and JSON response formats.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/dev/controller-actions.md#2025-04-22_snippet_10\n\nLANGUAGE: http\nCODE:\n```\nGET payments/complete-payment\n```\n\n----------------------------------------\n\nTITLE: Cloning Plugin Repository\nDESCRIPTION: Command to clone a plugin repository into the plugins directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/plugin-development.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n$ git clone git@github.com:craftcms/commerce.git\n```\n\n----------------------------------------\n\nTITLE: Checking Table Field Data in Twig\nDESCRIPTION: Demonstrates various methods to check if a Table field has data or a specific number of rows in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/table-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Basic conditional: #}\n{% if entry.myFieldHandle %}\n  {# An array with any values is \"truthy!\" #}\n{% endif %}\n\n{# Emptiness test: #}\n{% if entry.myFieldHandle is not empty %}\n  {# Note the `not`—we only want to render this block if there *is* data! #}\n{% endif %}\n\n{# Length check: #}\n{% if entry.myFieldHandle|length %}\n  {# At least one row is present! #}\n{% endif %}\n\n{# Test for a specific number of rows: #}\n{% if entry.myFieldHandle|length >= 3 %}\n  {# Three or more rows have been added to this table field. #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking Port Availability in Nitro\nDESCRIPTION: Demonstrates how to use the 'nitro portcheck' command to check if a specific port is available or already in use.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/customizing.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro portcheck 80\nPort 80 is already in use...\n\n$ nitro portcheck 8080\nPort 8080 is available!\n```\n\n----------------------------------------\n\nTITLE: Configuring Front-end Post-Login Redirect in Craft CMS\nDESCRIPTION: Sets the URL or path that users should be redirected to after logging in from the front-end site. This also applies when visiting the login page while already logged in.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_59\n\nLANGUAGE: php\nCODE:\n```\n'postLoginRedirect' => 'members/home',\n```\n\n----------------------------------------\n\nTITLE: Copying Example Templates in Craft Commerce CLI\nDESCRIPTION: This command copies Commerce example templates into the project's template folder. It allows specifying a custom folder name and includes an option to overwrite existing folders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/example-templates\nA folder will be copied to your templates directory.\nChoose folder name: [shop] myshop\nCopying ...\nDone!\n```\n\n----------------------------------------\n\nTITLE: Using the Commerce Example Templates Generator Command\nDESCRIPTION: Command for customizing and copying example templates into your project's template folder. It prompts for folder name, CDN resource usage, and color preferences before generating templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/console-commands.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/example-templates\nA folder will be copied to your templates directory.\nChoose folder name: [shop] myshop\nUse CDN link to resources (tailwind)? (yes|no) [yes]: yes\nBase Tailwind CSS color: [gray,red,yellow,green,blue,indigo,purple,pink,?]: green\nAttempting to copy example templates ... \nCopying ...\nDone!\n```\n\n----------------------------------------\n\nTITLE: Formatting Number Field Values in Twig and PHP\nDESCRIPTION: Examples of formatting Number field values with proper separators using Twig filters and PHP formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/number.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle);\n```\n\n----------------------------------------\n\nTITLE: Formatting Money Values in Twig\nDESCRIPTION: Shows how to format Money objects using the 'money' filter with optional locale formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_20\n\nLANGUAGE: twig\nCODE:\n```\n{{ myMoneyField|money }}\n{# Output: $123.00 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ myMoneyField|money('de') }}\n{# Output: 123,00 $ #}\n```\n\n----------------------------------------\n\nTITLE: Updating Administrative Area Select in Twig for Commerce 4\nDESCRIPTION: This snippet demonstrates how to update the select input for states/administrative areas when migrating from Commerce 3 to Commerce 4. It shows the change in property names and how to use the new Store model to get administrative areas.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{% set states = craft.commerce.states.allEnabledStatesAsListGroupedByCountryId %}\n{% set options = (countryId and states[countryId] is defined ? states[countryId] : []) %}\n\n{% tag 'select' with { name: 'address[stateValue]' } %}\n  {% for key, option in options %}\n    {# @var option \\craft\\commerce\\models\\State #}\n    {% set optionValue = (stateId ?: '') %}\n    {{ tag('option', {\n      value: key,\n      selected: key == optionValue,\n      text: option\n    }) }}\n  {% endfor %}\n{% endtag %}\n\n{# Commerce 4 #}\n{% set administrativeAreas = craft.commerce\n  .getStore()\n  .getStore()\n  .getAdministrativeAreasListByCountryCode() %}\n\n<select name=\"shippingAddress[administrativeArea]\">\n  {% for countryCode, areas in administrativeAreas %}\n    <optgroup label=\"{{ countryCode }}\">\n      {% for code, name in areas %}\n        {{ tag('option', {\n          value: code,\n          text: name,\n          selected: code == address.administrativeArea ?? false,\n        }) }}\n      {% endfor %}\n    </optgroup>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Vue Icon Link Grid Implementation\nDESCRIPTION: Vue component template for displaying a responsive grid of icon links. Used for presenting plugins, tools and community resources with icons and descriptions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/README.md#2025-04-22_snippet_1\n\nLANGUAGE: vue\nCODE:\n```\n<div class=\"sm:flex sm:flex-wrap\">\n    <div class=\"py-1 sm:w-1/2 sm:py-0\">\n        <IconLink\n            title=\"Plugin Store\"\n            subtitle=\"Browse free and commercial plugins.\"\n            link=\"https://plugins.craftcms.com\"\n            icon=\"/docs/icons/icon-plugin.svg\"\n            iconSize=\"large\" />\n    </div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Registering Custom GraphQL Validation Rules in PHP\nDESCRIPTION: This snippet shows how to register custom GraphQL validation rules by listening to the EVENT_DEFINE_GQL_VALIDATION_RULES event. In this example, introspection is permanently disabled by adding a DisableIntrospection rule to the validation rules array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\DefineGqlValidationRulesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse GraphQL\\Type\\Definition\\Type;\nuse GraphQL\\Validator\\Rules\\DisableIntrospection;\n\nEvent::on(\n    Gql::class,\n    Gql::::EVENT_DEFINE_GQL_VALIDATION_RULES,\n    function (DefineGqlValidationRulesEvent $event) {\n        // Permanently disable introspection\n        $event->validationRules[DisableIntrospection::class] = new DisableIntrospection();\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Mutex Component in Craft CMS (PHP)\nDESCRIPTION: This example shows how to configure a custom mutex driver for Craft CMS. It demonstrates setting up a file-based mutex driver while maintaining the overall mutex component structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'mutex' => function() {\n            $generalConfig = Craft::$app->getConfig()->getGeneral();\n\n            $config = [\n                'class' => craft\\mutex\\File::class,\n                // Alter just this nested property of the main mutex component:\n                'mutex' => [\n                    'class' => yii\\mutex\\FileMutex::class,\n                    'fileMode' => $generalConfig->defaultFileMode,\n                    'dirMode' => $generalConfig->defaultDirMode,\n                ],\n            ];\n\n            // Return the initialized component:\n            return Craft::createObject($config);\n        },\n    ],\n    // ...\n];\n```\n\n----------------------------------------\n\nTITLE: Using configure as a merge Alternative in Twig\nDESCRIPTION: The configure function can be used as an alternative to the merge filter when modifying objects in place.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set myObject = { one: 'Original' } %}\n{# With `merge`: #}\n{% set myObject = myObject | merge({ one: 'Overridden', two: 'New' }) %}\n\n{# With `configure`: #}\n{% do configure(myObject, { one: 'Overridden', two: 'New' }) %}\n```\n\n----------------------------------------\n\nTITLE: Fetching and Displaying RSS Feed Items with Craft CMS Twig\nDESCRIPTION: Example of fetching RSS feed items using craft.feeds.getFeedItems() and displaying them in an HTML template. The code demonstrates handling feed item properties like title, permalink, author, date, and summary.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.feeds.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set feedUrl = \"http://feeds.feedburner.com/blogandtonic\" %}\n{% set limit = 10 %}\n{% set items = craft.feeds.getFeedItems(feedUrl, limit) %}\n\n{% for item in items %}\n  <article>\n    <h3><a href=\"{{ item.permalink }}\">{{ item.title }}</a></h3>\n    <p class=\"author\">{{ item.authors[0].name }}</p>\n    <p class=\"date\">{{ item.date }}</p>\n\n    {{ item.summary }}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Installing a Plugin with DDEV\nDESCRIPTION: Shows the shortcut command for installing a Craft CMS plugin using DDEV, which simplifies the Composer execution process in containerized environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nddev composer require package/name\n```\n\n----------------------------------------\n\nTITLE: Entry Field Reference Example\nDESCRIPTION: Demonstrates how to reference a textual field's value by using its field handle in the property segment of a reference tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/reference-tags.md#2025-04-22_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n{entry:entry-slug:fieldHandle}\n```\n\n----------------------------------------\n\nTITLE: Verifying Docker Installation in WSL2 (Windows)\nDESCRIPTION: This command checks if Docker is running correctly inside the WSL2 environment. It should display an empty table of containers if Docker is properly installed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\ndocker ps\n```\n\n----------------------------------------\n\nTITLE: Checking if a Specific Option is Selected in Twig\nDESCRIPTION: Shows how to check if a specific option is selected in a Multi-select field using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.contains('foo') %}\n```\n\n----------------------------------------\n\nTITLE: Checking if Any Options are Selected in PHP\nDESCRIPTION: Shows how to check if any options are selected in a Multi-select field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nif (count($entry->myFieldHandle)) {\n```\n\n----------------------------------------\n\nTITLE: Implementing Widget Content with getBodyHtml() Method\nDESCRIPTION: Example of a widget's getBodyHtml() method that renders a Twig template with local variables. This method determines what content is displayed in the widget on the dashboard.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/widget-types.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function getBodyHtml(): ?string\n{\n    return Craft::$app->getView()->renderTemplate('my-plugin/_widgets/my-widget', [\n        'local' => 'Variables!',\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: Converting to ASCII with Twig ASCII Filter\nDESCRIPTION: Demonstrates the ascii filter for converting strings to ASCII characters, with optional locale-specific character mappings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'über'|ascii }}\n{# Output: uber #}\n\n{{ 'über'|ascii('de') }}\n{# Output: ueber #}\n```\n\n----------------------------------------\n\nTITLE: Querying and Displaying Global Set Content\nDESCRIPTION: Example showing how to create a global set query with parameters, fetch the global set, and display its content\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/globals.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a global set query with the 'handle' and 'siteId' parameters #}\n{% set myGlobalSetQuery = craft.globalSets()\n  .handle('footerCopy')\n  .siteId(1) %}\n\n{# Fetch the global set #}\n{% set globalSet = myGlobalSetQuery.one() %}\n\n{# Display the content #}\n<p>{{ globalSet.copyrightInfo }}</p>\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Version Constraints in composer.json for Craft 4 Plugin\nDESCRIPTION: Example of setting PHP version constraints in composer.json for a Craft 4 plugin supporting PHP 8 and future PHP 9.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n  \"require\": {\n    \"php\": \"^8.0.2|^9.0\"\n  }\n```\n\n----------------------------------------\n\nTITLE: Basic Queue CLI Command\nDESCRIPTION: Command to manually run the Craft CMS queue from the command line.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/queue.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft queue/run\n```\n\n----------------------------------------\n\nTITLE: Displaying Customer's Past Orders in Twig for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to iterate over a customer's past orders from the Customer Info field. It displays the order number for each order.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/customer-info-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for order in user.customerInfo.orders %}\n  {{ order.number }}<br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Module Bootstrap Configuration\nDESCRIPTION: Configuration code for bootstrapping a module in Craft CMS application settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/commands.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'bootstrap' => ['acme'],\n    'modules' => [\n        'acme' => acme\\Module::class,\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Default Values in Object Templates\nDESCRIPTION: Demonstrates using the null-coalescing operator for providing default values in object templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{parentUri ?? 'topics'}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Traditional Event Handler Registration in Craft CMS PHP\nDESCRIPTION: Example of traditional event handler registration in Craft CMS, which requires immediate initialization of the service class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-and-events.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncraft()->entries->onSaveEntry = function(Event $event) {\n    // ...\n};\n```\n\n----------------------------------------\n\nTITLE: Implementing Translation Filter in Twig Templates\nDESCRIPTION: Demonstrates how to modify a Twig template to use Craft's translate filter (|t) on static text. This allows the text to be translated based on the site's current language.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/static-translations.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ \"News\"|t }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Manually Creating an ElementCriteriaModel for Related Assets in Craft CMS\nDESCRIPTION: Shows the full syntax for manually creating an ElementCriteriaModel to fetch assets related to an entry through a specific field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = craft.assets({\n  relatedTo: { sourceElement: entry, field: \"assetsFieldHandle\" },\n  order:     \"sortOrder\",\n  limit:     null\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Setting Database Character Set and Collation for Craft CMS 5 Upgrade\nDESCRIPTION: Environment variable settings for database character set and collation during Craft CMS 5 upgrade process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nCRAFT_DB_CHARSET=\"utf8mb3\"\nCRAFT_DB_COLLATION=\"utf8mb3_general_ci\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Nitro Site Path and Webroot in YAML\nDESCRIPTION: This YAML snippet demonstrates how to configure a Nitro site with a custom path and webroot. It sets the path to the user's dev directory and specifies a subdirectory for the webroot.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/how-nitro-works.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\npath: ~/dev\nwebroot: my-project/web\n```\n\n----------------------------------------\n\nTITLE: Directory Structure Example for Asset Bundles\nDESCRIPTION: Shows the recommended file structure for implementing asset bundles in a plugin, including the bundle class and resources directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/asset-bundles.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nbase_dir/\n└── src/\n    ├── FooBundle.php\n    └── resources/\n        ├── script.js\n        ├── styles.css\n        └── ...\n```\n\n----------------------------------------\n\nTITLE: Looping Through All Available Options in Twig and PHP\nDESCRIPTION: Code demonstrating how to iterate through all available checkbox options (checked and unchecked) in a field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/checkboxes-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle.options %}\n  Label:   {{ option.label }}\n  Value:   {{ option }} or {{ option.value }}\n  Checked: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle->options as $option) {\n    // label:   $option->label\n    // value:   $option or $option->value\n    // checked: $option->selected ? 'Yes' : 'No'\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Filename Word Separator in Craft CMS\nDESCRIPTION: Defines the string that should replace spaces in filenames after a file has been uploaded. Set to null to leave spaces unchanged.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_74\n\nLANGUAGE: php\nCODE:\n```\n'filenameWordSeparator' => '_',\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Content Pages in Twig\nDESCRIPTION: Template code demonstrating how to loop through and display all pages of paginated content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for page in entry.richTextFieldHandle.getPages() %}\n  <div class=\"page\">\n    {{ page }}\n  </div>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Simple Tag Output in Twig Templates\nDESCRIPTION: Demonstrates basic tag output in a template, which renders the tag's title by default when the TagModel is used directly in output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/tagmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<li>{{ tag }}</li>\n```\n\n----------------------------------------\n\nTITLE: Generating RSS 2.0 Feed with Twig in Craft CMS\nDESCRIPTION: A Twig template that generates a standard RSS 2.0 feed including site metadata and entry content. Requires a global set with handle 'globals' containing a 'siteDescription' field. Should be saved with .rss extension for proper MIME type serving.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/rss-feed.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<?xml version=\"1.0\"?>\n<rss version=\"2.0\" xmlns:atom=\"https://www.w3.org/2005/Atom\">\n  <channel>\n    <title>{{ siteName }}</title>\n    <link>{{ siteUrl }}</link>\n    <atom:link href=\"{{ url(craft.request.path) }}\" rel=\"self\" type=\"application/rss+xml\" />\n    <description>{{ globals.siteDescription }}</description>\n    <language>en-us</language>\n    <pubDate>{{ now.rss }}</pubDate>\n    <lastBuildDate>{{ now.rss }}</lastBuildDate>\n\n    {% for entry in craft.entries.find() %}\n      <item>\n        <title>{{ entry.title }}</title>\n        <link>{{ entry.url }}</link>\n        <pubDate>{{ entry.postDate.rss }}</pubDate>\n        <author>{{ entry.author }}</author>\n        <guid>{{ entry.url }}</guid>\n        <description><![CDATA[\n          {{ entry.body }}\n        ]]></description>\n      </item>\n    {% endfor %}\n  </channel>\n</rss>\n```\n\n----------------------------------------\n\nTITLE: Displaying Available Shipping Methods for Cart in Twig\nDESCRIPTION: This code shows how to display available shipping methods for the current cart, including radio buttons for selection and pricing information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for handle, method in cart.availableShippingMethods %}\n  <label>\n    <input type=\"radio\" \n           name=\"shippingMethodHandle\" \n           value=\"{{ handle }}\"\n           {% if handle == cart.shippingMethodHandle %} checked{% endif %}\n    />\n    <strong>{{ method.name }}</strong> {{ method.priceForOrder(cart)|currency(cart.currency) }}\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Custom Fields with Twig Form\nDESCRIPTION: Example form for updating custom fields on a cart using the commerce/cart/update-cart action. Demonstrates how to update a gift message field with proper CSRF protection and redirect handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {{ redirectInput('shop/cart') }}\n\n  <label>\n    Gift Message\n    {{ input('text', 'fields[giftMessage]', cart.giftMessage) }}\n  </label>\n\n  <button>Update Cart</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Using the csrfInput() Function in Craft CMS 3\nDESCRIPTION: Shows the usage of the csrfInput() helper function, which provides a shortcut for adding CSRF protection to forms in Craft CMS 3.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{{ csrfInput() }}\n```\n\n----------------------------------------\n\nTITLE: Converting releases.json to CHANGELOG.md using cURL\nDESCRIPTION: Command to convert an existing releases.json file to the new CHANGELOG.md format required for Craft 3 plugins.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# go to the plugin directory\ncd /path/to/my-plugin\n\n# create a CHANGELOG.md from its releases.json\ncurl https://api.craftcms.com/v1/utils/releases-2-changelog --data-binary @releases.json > CHANGELOG.md\n```\n\n----------------------------------------\n\nTITLE: Setting Maximum Cached Cloud Image Size in Craft CMS\nDESCRIPTION: Specifies the maximum size in pixels (length or width) Craft should use when caching images from external sources. This is used to speed up transform generation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_77\n\nLANGUAGE: php\nCODE:\n```\n'maxCachedCloudImageSize' => 2880,\n```\n\n----------------------------------------\n\nTITLE: Basic Configuration Array in PHP\nDESCRIPTION: A simple example of a configuration array in PHP, typically used in Craft CMS config files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/multi-environment-configs.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn array(\n    'omitScriptNameInUrls' => true,\n);\n```\n\n----------------------------------------\n\nTITLE: Creating a Docker Compose Mount for Plugin Development\nDESCRIPTION: Shows how to configure a Docker Compose mount for plugin development in DDEV environments. This allows Composer to access the plugin directory from outside the container.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_8\n\nLANGUAGE: yml\nCODE:\n```\nservices:\n  web:\n    volumes:\n      - \"$HOME/Developer/my-plugin:/home/shared/my-plugin\"\n```\n\n----------------------------------------\n\nTITLE: Listing Order Statuses in Twig\nDESCRIPTION: Shows how to list all order statuses set up in the system using the craft.commerce.orderStatuses variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% for status in craft.commerce.orderStatuses %}\n{{ status.handle }} - {{ status.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Template Path for Front-end Requests in PHP\nDESCRIPTION: Shows how to set the template path for front-end requests in Craft CMS plugins. This is necessary when rendering plugin templates outside of the control panel context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$oldPath = craft()->path->getTemplatesPath();\n$newPath = craft()->path->getPluginsPath().'pluginHandle/templates';\ncraft()->path->setTemplatesPath($newPath);\n$html = craft()->templates->render('path/to/template');\ncraft()->path->setTemplatesPath($oldPath);\n```\n\n----------------------------------------\n\nTITLE: Array and String Index Finding\nDESCRIPTION: Demonstrates finding index positions in arrays and strings using the indexOf filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set colors = ['red', 'green', 'blue'] %}\n<p>Green is located at position {{ colors|indexOf('green') + 1 }}.</p>\n\n{% set position = \"team\"|indexOf('i') %}\n{% if position != -1 %}\n  <p>There <em>is</em> an \"i\" in \"team\"! It's at position {{ position + 1 }}.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Outputting a Section Name with SectionModel in Twig\nDESCRIPTION: Demonstrates the simple output of a SectionModel object, which returns the section's name when output directly in a template without specifying a property or method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/sectionmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>{{ section }}</h3>\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Categories Fields in Twig and PHP\nDESCRIPTION: Examples of how to query for elements that have specific category relationships, demonstrating various filtering options in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a related category #}\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a related category\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Safe and Unsafe Object Template Examples\nDESCRIPTION: Illustrates safe and unsafe practices when constructing object templates, particularly when dealing with user-submitted content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/object-templates.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\nprofiles/{{ object[slugSource] }}/{id}\n```\n\nLANGUAGE: twig\nCODE:\n```\nprofiles/{{ slugPrefixSource == 'accountType' ? memberType : 'member' }}/{id}\n```\n\n----------------------------------------\n\nTITLE: Implementing Redirects in Craft CMS Templates\nDESCRIPTION: This snippet shows how to use the {% redirect %} tag in Craft CMS to redirect users based on certain conditions. It includes examples of setting custom status codes and flash messages with the redirect.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% if not user or not user.isInGroup('members') %}\n  {% redirect \"pricing\" %}\n{% endif %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% redirect \"pricing\" 301 %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser.isInGroup('members') %}\n  {% redirect \"pricing\" 301 with notice \"You have to be a member to access that!\" %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Database Environment Variables for Craft CMS\nDESCRIPTION: Environment variable configuration for connecting Craft CMS to the Nitro database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nDB_USER=\"nitro\"\nDB_PASSWORD=\"nitro\"\n# `nitro` is the default database\nDB_DATABASE=\"nitro\"\n```\n\n----------------------------------------\n\nTITLE: Customizing Category Table Attribute HTML in Craft CMS\nDESCRIPTION: Hook to customize the HTML output of table cells on the category index page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_30\n\nLANGUAGE: php\nCODE:\n```\npublic function getCategoryTableAttributeHtml(CategoryModel $category, $attribute)\n{\n    if ($attribute == 'color' && $category->color) {\n        return '<div class=\"colorbox\" style=\"background-color: '.$category->color.';\"></div>';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Asset Sortable Attributes in Craft CMS\nDESCRIPTION: Hook to modify the attributes that assets can be sorted by in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyAssetSortableAttributes(&$attributes)\n{\n    $attributes['id'] = Craft::t('ID');\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Migrations via Command Line in Craft CMS\nDESCRIPTION: Terminal commands to navigate to your project directory in preparation for creating migrations.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/migrations.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd /path/to/project\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Plugin via CLI\nDESCRIPTION: Command to uninstall a plugin using Craft's CLI tool\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/plugins.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/uninstall commerce\n```\n\n----------------------------------------\n\nTITLE: Product Sale Matching Event Handler in PHP\nDESCRIPTION: Event handler for commerce_sales.onBeforeMatchProductAndSale that prevents sale matching for in-store orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_sales.onBeforeMatchProductAndSale', function($event) {\n    $cart = craft()->commerce_cart->getCart();\n    if ($cart->isInStoreOrder) {\n        $event->performAction = false;\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Recommended File Permissions for One-Click Updates in Craft Commerce\nDESCRIPTION: This snippet outlines the recommended file permissions for the plugins folder to enable one-click updates in Craft Commerce. The permissions vary based on the relationship between the Apache/PHP user and the craft/config folder owner.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nIf they are the same user, use 744.\nIf they're in the same group, then use 774.\nOtherwise, use 777.\n```\n\n----------------------------------------\n\nTITLE: Creating Tag Fixtures in Craft CMS\nDESCRIPTION: Example of a Tag fixture data file that creates a tag in a specific group. It shows how to reference group IDs and set the tag title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'groupId' => $this->groupIds['tags'],\n        'title' => 'Tag',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Log Monitoring Commands in Unix\nDESCRIPTION: Terminal commands for monitoring and filtering log files using tail and grep in Unix-based systems.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ntail -f storage/logs/web-*.log\ntail -f storage/logs/web-*.log | grep \"specific message or category\" -C 10\n```\n\n----------------------------------------\n\nTITLE: Setting Error Template Prefix in Craft CMS (PHP)\nDESCRIPTION: Configures the errorTemplatePrefix option to specify the path prefix for HTTP error code templates in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_42\n\nLANGUAGE: php\nCODE:\n```\n'errorTemplatePrefix' => \"_errors/\",\n```\n\n----------------------------------------\n\nTITLE: Visualizing Craft CMS Directory Structure\nDESCRIPTION: Tree view representation of the standard Craft CMS project directory structure, showing all top-level files and folders created during installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/files.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\ncraft/\n├── .ddev/\n├── config/\n├── storage/\n├── templates/\n├── vendor/\n├── web/\n├── .env\n├── .env.example.dev\n├── .env.example.production\n├── .env.example.staging\n├── .gitignore\n├── bootstrap.php\n├── composer.json\n├── composer.lock\n└── craft\n```\n\n----------------------------------------\n\nTITLE: Extended Component Implementation in PHP\nDESCRIPTION: ExtendedComponentExample class that implements ComponentInterface by extending ComponentExample, useful for testing inheritance scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\components\\ExtendedComponentExample\n```\n\n----------------------------------------\n\nTITLE: Configuring User Agent and IP Requirements for Sessions in Craft CMS\nDESCRIPTION: Controls whether Craft should require the existence of a user agent string and IP address when creating a new user session. Setting it to false disables these requirements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_64\n\nLANGUAGE: php\nCODE:\n```\n'requireUserAgentAndIpForSession' => false,\n```\n\n----------------------------------------\n\nTITLE: Installing a Local Plugin in a Craft CMS Project\nDESCRIPTION: These Bash commands demonstrate how to navigate to a Craft project directory and require a locally developed plugin using Composer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n```\n\n----------------------------------------\n\nTITLE: Disabling a Plugin via CLI in Craft CMS\nDESCRIPTION: This command shows how to temporarily disable a Craft CMS plugin using the command-line interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp craft plugin/disable commerce\n```\n\n----------------------------------------\n\nTITLE: Accessing Commerce Settings in Twig Templates\nDESCRIPTION: Code snippet showing how to access the Commerce general settings model within Twig templates, allowing for template-based configuration checks and usage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/config-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set settings = craft.commerce.settings %}\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Mutations in PHP for Craft CMS\nDESCRIPTION: This code snippet demonstrates how to register custom GraphQL mutations by listening to the registerGqlMutations event and merging the custom mutations with the existing ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutations;\nuse craft\\events\\RegisterGqlMutationsEvent;\nuse craft\\services\\Gql;\nuse GraphQL\\Type\\Definition\\Type;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_MUTATIONS,\n    function(RegisterGqlMutationsEvent $event) {\n        $event->mutations = array_merge(\n            $event->mutations,\n            WidgetMutations::getMutations(),\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Restarting Blackfire Agent Service\nDESCRIPTION: Command to restart the Blackfire agent service after configuration. This ensures that the new settings are applied.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/blackfire.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nsudo /etc/init.d/blackfire-agent restart\n```\n\n----------------------------------------\n\nTITLE: Multi-select Field Form Template\nDESCRIPTION: Complete template example for creating a Multi-select field input in an element form, including proper value handling and option selection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{# Include a hidden input first so Craft knows to update the\n   existing value, if no options are selected. #}\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n<select multiple name=\"fields[myFieldHandle][]\">\n  {% for option in field.options %}\n      {% set selected = entry is defined\n        ? entry.myFieldHandle.contains(option.value)\n        : option.default %}\n\n      <option value=\"{{ option.value }}\"\n        {% if selected %} selected{% endif %}\n      >\n        {{ option.label }}\n      </option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Setting Account Activation Failure Path in Craft CMS (PHP)\nDESCRIPTION: Configures the activateAccountFailurePath option to specify the URI Craft should redirect to when front-end account activation fails.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_46\n\nLANGUAGE: php\nCODE:\n```\n'activateAccountFailurePath' => 'members/activation-failed',\n```\n\n----------------------------------------\n\nTITLE: Implementing addAssetActions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom element actions to the asset index page. Returns an array of element action class handles or instantiated IElementAction objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\npublic function addAssetActions($source)\n{\n    return array(\n        'Foo',\n        new BarElementAction(),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Custom Field Input Form with Custom Fields Location\nDESCRIPTION: Example form showing how to customize the fields location parameter for custom field data submission. Uses a hidden input to specify an alternate location for field data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('entries/save-entry') }}\n  {{ hiddenInput('fieldsLocation', 'f')}}\n\n  {# Don't forget to update all your input names! #}\n  {{ input('text', 'f[myCustomFieldHandle]') }}\n\n  <button>Save Entry</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Listing Product Types in Twig\nDESCRIPTION: Demonstrates how to list all product types set up in the system using the craft.commerce.productTypes variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% for type in craft.commerce.productTypes %}\n{{ type.handle }} - {{ type.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Registering JavaScript at Beginning of Body\nDESCRIPTION: Shows how to use the POS_BEGIN constant to register JavaScript at the beginning of the <body> element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set js %}\n  console.log('Hello, Craft!');\n{% endset %}\n\n{% do view.registerJs(js, POS_BEGIN) %}\n```\n\n----------------------------------------\n\nTITLE: Fetching All Countries in Twig\nDESCRIPTION: Demonstrates how to retrieve all countries, including disabled ones, and create a select dropdown using Twig templating.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.commerce.countries.allCountries %}\n<select name=\"country\">\n{% for country in countries %}\n  <option value=\"{{ country.id }}\">\n    {{- country.name -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Rendering Table Field Data with Twig in Craft CMS\nDESCRIPTION: This snippet demonstrates how to iterate through rows of a Table field in a Craft CMS template. It checks if the table contains data, then loops through each row to display its column values in an unordered list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/table-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.whiskeyTableHandle | length %}\n  <h3>Whiskeys</h3>\n\n  <ul>\n    {% for row in entry.whiskeyTableHandle %}\n      <li>{{ row.whiskey }} - {{ row.description }} - {{ row.proof }}</li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Checking Available Updates in Craft CMS via Terminal\nDESCRIPTION: Command to check for available updates for Craft CMS and its plugins including Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update\n```\n\n----------------------------------------\n\nTITLE: Order Array Generation in PHP\nDESCRIPTION: PHP code showing how the order array is generated for use in shipping rule condition formulas. Includes specific array parameters for line items and addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/shipping.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$order->toArray(\n    [], ['lineItems.snapshot', 'shippingAddress', 'billingAddress']\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Gateway Settings with PHP Environment Variables\nDESCRIPTION: Example of using a PHP configuration file to store gateway settings with environment variables. This approach is deprecated in favor of using environment variables directly in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/payment-gateways.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'myStripeGateway' => [\n        'apiKey' => getenv('STRIPE_API_KEY'),\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Postal Code Array Matching with Twig\nDESCRIPTION: Example of using Twig to match postal codes against a specific array of values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/shipping.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\npostalCode in ['NG102', 'ZZ200', 'CC101']\n```\n\n----------------------------------------\n\nTITLE: Accessing Config Values in Twig Templates\nDESCRIPTION: Example showing how to access configuration values and debug information in Twig templates using the Config service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{# Output entry ID for debugging: #}\n{% if craft.app.config.general.devMode %}\n  ID: <code>{{ entry.id }}</code>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Command (macOS/Linux Uninstallation)\nDESCRIPTION: This command removes the Nitro command from the system. It's part of the uninstallation process for macOS and Linux.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nsudo rm /usr/local/bin/nitro\n```\n\n----------------------------------------\n\nTITLE: Filtering Users by Admin Status in Twig\nDESCRIPTION: Examples showing how to fetch admin users and non-admin users separately using the admin parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.users.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch all the admins #}\n{% set admins = craft.users.admin('1') %}\n\n{# Fetch all the non-admins #}\n{% set nonAdmins = craft.users.admin('not 1') %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving URL Segments in Twig Templates\nDESCRIPTION: Shows how to access specific URL segments using the getSegment() method, including both positive indexing (from the start) and negative indexing (from the end).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.request.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\nThe second URL segment is {{ craft.request.getSegment(2) }}.\nThe second-to-last URL segment is {{ craft.request.getSegment(-2) }}.\n```\n\n----------------------------------------\n\nTITLE: Formatting Dates as Atom Timestamps in Craft CMS\nDESCRIPTION: Demonstrates the 'atom' filter for converting dates to ISO-8601 timestamps, suitable for use in Atom feeds.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|atom }}\n```\n\n----------------------------------------\n\nTITLE: Counting Editable Sections in Craft CMS using Twig\nDESCRIPTION: This code shows how to use the getTotalEditableSections() method to get the count of sections the current user can edit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set total = craft.sections.getTotalEditableSections() %}\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Project Config\nDESCRIPTION: Command to rebuild the project config before upgrading to ensure a clean state.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nphp craft project-config/rebuild\n```\n\n----------------------------------------\n\nTITLE: Resetting Commerce Data in Craft Commerce CLI\nDESCRIPTION: This command cleanses Commerce data without uninstalling the plugin or removing store configuration. It deletes all orders, subscriptions, payment sources, customers, addresses and resets discount usages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/console-commands.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft commerce/reset-data\n```\n\n----------------------------------------\n\nTITLE: Running Craft Queue with Nice in Bash\nDESCRIPTION: Command to run the Craft queue listener with a lower CPU priority using the 'nice' program. This helps ensure web requests are prioritized over queue processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\n/usr/bin/nice -n 10 /usr/bin/php /var/www/craft queue/listen --verbose=1 --color=0\n```\n\n----------------------------------------\n\nTITLE: Configuring Composer Local Repository\nDESCRIPTION: JSON configuration to add local plugins directory as a Composer repository path.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/plugin-development.md#2025-04-22_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n\"repositories\": [\n    {\n      \"type\": \"path\",\n      \"url\": \"./plugins/*\"\n    }\n  ]\n```\n\n----------------------------------------\n\nTITLE: Implementing Element URLs in PHP\nDESCRIPTION: Demonstrates how to implement custom URL generation and routing for elements by overriding the getUriFormat() and route() methods in a custom element class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\npublic function getUriFormat()\n{\n    return $this->getType()->uriFormat;\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nprotected function route()\n{\n    return [\n        'templates/render', [\n            'template' => $this->getType()->template,\n            'variables' => [\n                'product' => $this,\n            ]\n        ]\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Entry Count with GraphQL in Craft CMS\nDESCRIPTION: The entryCount query is used to return the number of entries in Craft CMS. It accepts numerous arguments to filter and customize the query results, including ID, status, site, and various relational parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_11\n\nLANGUAGE: graphql\nCODE:\n```\nquery {\n  entryCount(\n    id: [QueryArgument]\n    uid: [String]\n    status: [String]\n    site: [String]\n    # ... other arguments as needed\n  )\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Content to Sale Detail View in Twig\nDESCRIPTION: This hook allows inserting content after the main content in the sale detail view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.sales.edit.content\" %}\n```\n\n----------------------------------------\n\nTITLE: Migrating Custom Alt Text to Native Fields (Shell)\nDESCRIPTION: Commands for migrating content from custom alternative text fields to Craft 4's native alt field for assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_12\n\nLANGUAGE: shell\nCODE:\n```\nphp craft resave/assets --set alt --to myAltTextField --if-empty\nphp craft resave/assets --set myAltTextField --to :empty:\n```\n\n----------------------------------------\n\nTITLE: Symlink Installation Output in Composer\nDESCRIPTION: Example of Composer's output when installing a plugin via a symlink. This indicates the plugin is being installed from a local directory rather than a remote repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/plugin-guide.md#2025-04-22_snippet_6\n\nLANGUAGE: plaintext\nCODE:\n```\n  - Installing package/name (X.Y.Z): Symlinking from ../my-plugin\n```\n\n----------------------------------------\n\nTITLE: Environment Variables Configuration in .env\nDESCRIPTION: Example of basic environment variable configuration in a .env file, showing how to set application ID and environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nCRAFT_APP_ID=my-project\nCRAFT_ENVIRONMENT=dev\n\n# ...and comments!\n```\n\n----------------------------------------\n\nTITLE: Configuring Standard Redactor Settings in JavaScript\nDESCRIPTION: Standard Redactor configuration with common formatting options and plugins for source editing and fullscreen mode.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  \"buttons\": [\"format\",\"bold\",\"italic\",\"lists\",\"link\",\"file\",\"horizontalrule\"],\n  \"plugins\": [\"source\",\"fullscreen\"]\n}\n```\n\n----------------------------------------\n\nTITLE: Multiple Database Engines Configuration\nDESCRIPTION: YAML configuration for running multiple database engines with different versions and ports in Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_6\n\nLANGUAGE: yaml\nCODE:\n```\ndatabases:\n - engine: mysql\n   version: \"5.7\"\n   port: \"3306\"\n - engine: mysql\n   version: \"5.6\"\n   port: \"33061\"\n - engine: postgres\n   version: \"11\"\n   port: \"5432\"\n```\n\n----------------------------------------\n\nTITLE: Setting Cache Method in Craft CMS (PHP)\nDESCRIPTION: Example of setting the cacheMethod configuration value. This determines which storage mechanism Craft will use for caching data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n'cacheMethod' => 'memcache',\n```\n\n----------------------------------------\n\nTITLE: Using beginBody Function in Twig\nDESCRIPTION: Shows how to output scripts and styles registered for the begin body position in a template layout.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<body>\n  {{ beginBody() }}\n\n  <h1>{{ page.name }}</h1>\n  {{ page.body }}\n</body>\n```\n\n----------------------------------------\n\nTITLE: Fetching Editable Sections in Craft CMS using Twig\nDESCRIPTION: This code shows how to use the getEditableSections() method to get an array of SectionModel objects for sections the current user has permission to edit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.sections.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set sections = craft.sections.getEditableSections() %}\n```\n\n----------------------------------------\n\nTITLE: Defining CRAFT_BASE_PATH Constant in PHP for Craft CMS\nDESCRIPTION: Sets the base directory path for Craft CMS to look for config, templates, and other directories. This constant is typically defined in the web/index.php or craft file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to look for config/, templates/, etc., two levels up from here\ndefine('CRAFT_BASE_PATH', dirname(__DIR__, 2));\n```\n\n----------------------------------------\n\nTITLE: Accessing Store Location Address - Twig & PHP Implementation\nDESCRIPTION: Examples showing how to access the store's location address in both Commerce 3 and 4\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{% set storeAddress = craft.commerce.addresses.storeLocationAddress %}\n\n{# Commerce 4 #}\n{% set storeAddress = craft.commerce.getStore().getStore().getLocationAddress() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Commerce 3\n$storeAddress = \\craft\\commerce\\Plugin::getInstance()\n    ->getAddresses()\n    ->getStoreLocationAddress();\n\n// Commerce 4\n$storeAddress = \\craft\\commerce\\Plugin::getInstance()\n    ->getStore()\n    ->getStore()\n    ->getLocationAddress();\n```\n\n----------------------------------------\n\nTITLE: Rendering SVG from File Path in Craft CMS\nDESCRIPTION: Outputs an SVG document from a file path. Useful for including icons or other vector graphics in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_45\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg('@webroot/icons/lemon.svg') }}\n```\n\n----------------------------------------\n\nTITLE: Checking DDEV Version in Shell\nDESCRIPTION: This command checks the installed version of DDEV. It's important to ensure you're running DDEV 1.23.4 or later for compatibility with the setup instructions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/environment/stack.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nddev -v\n# -> ddev version v1.23.4\n```\n\n----------------------------------------\n\nTITLE: Initializing Plugin Changelog Header in Markdown\nDESCRIPTION: Basic template for starting a plugin's changelog file with the main header.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/changelogs-and-updates.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Release Notes for <Plugin Name>\n```\n\n----------------------------------------\n\nTITLE: Setting Password Reset Path in Craft CMS\nDESCRIPTION: Specifies the URI and template path for user password resetting on the front-end site. This can be set to a string or an array for locale-specific templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_65\n\nLANGUAGE: php\nCODE:\n```\n'setPasswordPath' => array(\n    'en' => 'password',\n    'de' => 'passwort'\n),\n```\n\n----------------------------------------\n\nTITLE: Setting Craft Locale Constant\nDESCRIPTION: Defines the locale for the current request, overriding the site's primary locale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/php-constants.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_LOCALE', 'nl');\n```\n\n----------------------------------------\n\nTITLE: Installing Docker Desktop via Homebrew (macOS)\nDESCRIPTION: This command uses Homebrew to install Docker Desktop on macOS. It's a prerequisite for installing Nitro using the Homebrew method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nbrew install homebrew/cask/docker\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of Color Fields in Twig and PHP\nDESCRIPTION: Examples of basic usage of Color fields showing how to access the hexadecimal value of a color in both Twig templates and PHP. The field handle returns a hexadecimal representation of the color by default, which can also be accessed using the getHex() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/color-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <style type=\"text/css\">\n    .content a {\n      color: {{ entry.myFieldHandle }};\n    }\n    .content b {\n      {# same thing #}\n      color: {{ entry.myFieldHandle.getHex() }};\n    }\n  </style>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    echo $entry->myFieldHandle;\n    // same thing\n    echo $entry->myFieldHandle->getHex();\n}\n```\n\n----------------------------------------\n\nTITLE: Persisting Custom Nitro Settings\nDESCRIPTION: Shows how to make custom Nitro settings persistent by adding the environment variable to the shell profile file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/customizing.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\necho 'export NITRO_HTTP_PORT=8080' >> ~/.zshrc\n```\n\n----------------------------------------\n\nTITLE: Pascal Case String Formatting\nDESCRIPTION: Demonstrates the Pascal case (UpperCamelCase) string formatting filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"foo bar\"|pascal }}\n{# Outputs: FooBar #}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Field Information in Twig with craft.fields\nDESCRIPTION: Demonstrates how to fetch a field model by its handle using the getFieldByHandle method and access its properties. This example shows accessing the field's instructions property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set body = craft.fields.getFieldByHandle('body') %}\n{{ body.instructions }}\n```\n\n----------------------------------------\n\nTITLE: Implementing modifyCpNav Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Modifies the control panel navigation structure. Allows adding, removing, or modifying navigation items based on permissions or other conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyCpNav(&$nav)\n{\n    if (craft()->userSession->isAdmin()) {\n        $nav['utils'] = array('label' => 'Utils', 'url' => 'utils');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating modifyAssetFilename Hook to Craft 3 PHP\nDESCRIPTION: Shows how to migrate the modifyAssetFilename plugin hook from Craft 2 to an event listener in Craft 3 for modifying asset filenames.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\SetElementTableAttributeHtmlEvent;\nuse craft\\helpers\\Assets;\nuse yii\\base\\Event;\n\nEvent::on(\n    Assets::class,\n    Assets::EVENT_SET_FILENAME,\n    function(SetElementTableAttributeHtmlEvent $event) {\n        $event->filename = 'KittensRule-'.$event->filename;\n\n        // Prevent other event listeners from getting invoked\n        $event->handled = true;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Defining Additional Category Table Attributes in Craft CMS\nDESCRIPTION: Hook to add additional table columns to category indexes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\npublic function defineAdditionalCategoryTableAttributes()\n{\n    return array(\n        'foo' => \"Foo\",\n        'bar' => \"Bar\",\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Removed Order Methods in Commerce 4\nDESCRIPTION: Several Order element methods have been removed in Commerce 4. The table provides alternatives for each removed method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nOrder::getAdjustmentsTotalByType()\nOrder::getAvailableShippingMethods()\nOrder::getOrderLocale()\nOrder::getShippingMethodId()\nOrder::getShouldRecalculateAdjustments()\nOrder::getTotalTaxablePrice()\nOrder::isEditable\nOrder::removeEstimatedBillingAddress()\nOrder::removeEstimatedShippingAddress()\nOrder::setShouldRecalculateAdjustments()\n```\n\n----------------------------------------\n\nTITLE: Creating /usr/local/bin Directory (Manual Installation)\nDESCRIPTION: This command creates the /usr/local/bin directory if it doesn't exist, sets appropriate permissions, and changes ownership. It's used during manual installation if the directory is missing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\nsudo mkdir -p -m 775 /usr/local/bin && sudo chown $USER: /usr/local/bin\n```\n\n----------------------------------------\n\nTITLE: Composer Post-Install Script Configuration\nDESCRIPTION: JSON configuration for automating Craft updates after Composer package installation\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"require\": {\n        \"craftcms/cms\": \"^5.0.0\",\n        \"vlucas/phpdotenv\": \"^5.4.0\"\n    },\n    \"scripts\": {\n        \"post-install-cmd\": \"@php craft install/check && php craft up --interactive=0 || exit 0\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Plugin Config Values in Craft CMS\nDESCRIPTION: Demonstrates how to retrieve configuration values within plugin code using Craft's ConfigService::get() method. The plugin handle must be passed as the second argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/plugin-settings.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$configSettingValue = craft()->config->get('foo', 'cocktailrecipes');\n```\n\n----------------------------------------\n\nTITLE: Removed Product and Variant Methods in Commerce 4\nDESCRIPTION: Several Product and Variant element methods have been removed in Commerce 4. The table provides alternatives for each removed method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nProduct::getIsDeletable()\nProduct::getIsEditable()\nProduct::isDeletable()\nProduct::isEditable()\nVariant::isEditable()\n```\n\n----------------------------------------\n\nTITLE: Defining Default Config Values for Craft CMS Plugin\nDESCRIPTION: Creates a config.php file at the plugin root to define default configuration values. This file returns an array with the default settings that can be overridden by users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/plugin-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn array(\n    'foo' => 'defaultFooValue',\n    'bar' => 'defaultBarValue',\n);\n```\n\n----------------------------------------\n\nTITLE: Setting PHP Session Handler (PHP)\nDESCRIPTION: Example of configuring PHP's session handler in index.php. This is needed when using a custom session storage mechanism like memcached.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nini_set('session.save_handler', 'memcached');\n```\n\n----------------------------------------\n\nTITLE: Using Print Statements to Output Dynamic Content in Twig\nDESCRIPTION: A simple example of a Twig print statement that outputs the current user's name within an HTML paragraph element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n<p>Hi, {{ currentUser.name }}</p>\n```\n\n----------------------------------------\n\nTITLE: Checking If Categories Are Selected in Twig\nDESCRIPTION: Example of checking if any categories are selected in a Categories field by using the length filter to determine if the result contains any items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.categoriesFieldHandle | length %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Resetting User Password in Craft CMS via DDEV\nDESCRIPTION: This command allows you to reset a user's password in Craft CMS when using DDEV. It's useful if you've forgotten your login credentials. Replace 'me@domain.com' with the email or username provided during setup, or use '1' for the first user's ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/control-panel.md#2025-04-22_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nddev craft users/set-password me@domain.com\n```\n\n----------------------------------------\n\nTITLE: Destroying Nitro Machine\nDESCRIPTION: This command destroys the Nitro machine, which is part of the uninstallation process. It should be run before removing the Nitro command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnitro destroy\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with Nitro Composer\nDESCRIPTION: Example of using Nitro's composer command to install project dependencies without requiring a local Composer installation. Shows typical output including dependency verification and autoload file generation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/composer.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ cd ~/dev/my-craft-project\n$ nitro composer install\n  … checking /Users/oli/dev/my-craft-project/composer.json ✓\nInstalling dependencies from lock file (including require-dev)\nVerifying lock file contents can be installed on current platform.\nNothing to install, update or remove\nGenerating optimized autoload files\n79 packages you are using are looking for funding.\nUse the `composer fund` command to find out more!\ncomposer install completed 🤘\n```\n\n----------------------------------------\n\nTITLE: Listing Discounts in Twig\nDESCRIPTION: Demonstrates how to list all discounts set up in the system using the craft.commerce.discounts variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% for discount in craft.commerce.discounts %}\n{{ discount.name }} - {{ discount.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Services in Travis CI\nDESCRIPTION: Specifies the required database services (MySQL and PostgreSQL) for running Craft CMS tests.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nservices:\n  - mysql\n  - postgresql\n```\n\n----------------------------------------\n\nTITLE: Rounding Down with floor() Function\nDESCRIPTION: The floor() function rounds a number down to the nearest integer, removing any decimal part.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{{ floor(42.9) }}\n{# Output: 42 #}\n```\n\n----------------------------------------\n\nTITLE: Capitalizing First Character with ucfirst Filter in Twig\nDESCRIPTION: Shows the usage of the deprecated ucfirst filter to capitalize the first character of a string.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_42\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foobar'|ucfirst }}\n{# Output: Foobar #}\n```\n\n----------------------------------------\n\nTITLE: Checking for Specific Selected Option\nDESCRIPTION: Demonstrates how to check if a specific option is selected using the contains() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.contains('foo') %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->contains('foo') {\n```\n\n----------------------------------------\n\nTITLE: Configuring User Agent Matching for Sessions in Craft CMS\nDESCRIPTION: Determines whether Craft should require a matching user agent string when restoring a user session from a cookie. Setting it to false disables this security check.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_63\n\nLANGUAGE: php\nCODE:\n```\n'requireMatchingUserAgentForSession' => false,\n```\n\n----------------------------------------\n\nTITLE: Creating Redirect Input Field in Craft CMS Templates\nDESCRIPTION: Shortcut for creating a hidden input field with a hashed URL for redirect purposes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_35\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput(url) }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Guzzle HTTP Client in Craft CMS\nDESCRIPTION: Example of customizing Guzzle HTTP client settings for Craft CMS including headers, query parameters, authentication and proxy settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'headers' => ['Foo' => 'Bar'],\n    'query'   => ['testing' => '123'],\n    'auth'    => ['username', 'password'],\n    'proxy'   => 'https://myproxy:1234',\n];\n```\n\n----------------------------------------\n\nTITLE: Referencing Craft CMS Configuration Variable in Markdown\nDESCRIPTION: This snippet demonstrates how to reference a Craft CMS configuration variable using Markdown syntax. It links to the documentation for the CRAFT_TRANSLATIONS_PATH variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/directory-structure.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[`CRAFT_TRANSLATIONS_PATH`](./config/README.md#craft-translations-path)\n```\n\n----------------------------------------\n\nTITLE: Twig Template for Line Item Purchasable Fallback\nDESCRIPTION: Twig code example showing how to handle line item purchasable information with a fallback to snapshot data when the original purchasable is no longer available.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/purchasables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set purchasable = lineItem.getPurchasable() ?? lineItem.snapshot %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Dropdown Field Label in Twig\nDESCRIPTION: How to output the human-readable label of the selected dropdown option rather than its raw value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/dropdown-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.dropdownFieldHandle.label }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Database Services in Travis CI for Craft CMS\nDESCRIPTION: Defines the database services required for Craft CMS testing. Both MySQL and PostgreSQL are configured as Craft supports both database systems.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nservices:\n  - mysql\n  - postgresql\n```\n\n----------------------------------------\n\nTITLE: Outputting a Tag Group Name in Twig\nDESCRIPTION: This snippet demonstrates how to output a tag group's name by accessing the tag group object via a tag's getGroup() method. When a TagGroupModel is output directly, it returns the group's name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/taggroupmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>{{ tag.getGroup() }}</h3>\n```\n\n----------------------------------------\n\nTITLE: Including Dynamic CSS File in Twig\nDESCRIPTION: Demonstrates including a CSS file with a dynamic path based on an entry's layout property. The path is concatenated using Twig's concatenation operator (~).\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includecssfile.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% includeCssFile \"/assets/css/layouts/\" ~ entry.layout ~ \".css\" %}\n```\n\n----------------------------------------\n\nTITLE: Enabling Fieldset Wrapping for Field Layout Elements in PHP\nDESCRIPTION: Wraps the input HTML in a fieldset element, providing special handling for labels, instructions, and errors. This is useful for grouped form controls.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nprotected function useFieldset(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Register Asset Bundle in Twig Template\nDESCRIPTION: Example of registering the asset bundle from within a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/asset-bundles.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% do view.registerAssetBundle(\"mynamespace\\\\FooBundle\") %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Spanish Translation File in PHP\nDESCRIPTION: Demonstrates how to create a Spanish translation file (es.php) that returns an array mapping English strings to their Spanish equivalents. Each key-value pair represents a translation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/static-translations.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn array(\n    'News' => 'Noticias',\n);\n```\n\n----------------------------------------\n\nTITLE: Directory Listing Commands Cross-Platform\nDESCRIPTION: Demonstrates how to list directory contents using ls for macOS/Linux and dir for Windows.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/environment/terminal.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nls\n```\n\nLANGUAGE: batch\nCODE:\n```\ndir\n```\n\n----------------------------------------\n\nTITLE: Nitro Logs Command Usage\nDESCRIPTION: Command syntax for viewing machine logs including nginx, database, or docker container logs\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\nnitro logs [<options>]\n```\n\n----------------------------------------\n\nTITLE: Updating Nitro Using Command Line\nDESCRIPTION: Commands to update Nitro to the latest version. Requires running both the self-update command to get the latest version and refresh command to apply changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro self-update\nnitro refresh\n```\n\n----------------------------------------\n\nTITLE: Formatting File Size in Twig\nDESCRIPTION: Shows how to output the file size of an asset using Craft's filesize filter in Twig. This converts the raw byte size to a human-readable format.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/assetfilemodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ file.size|filesize }}\n```\n\n----------------------------------------\n\nTITLE: Basic Order Listing in Twig\nDESCRIPTION: Demonstrates how to fetch and display a list of orders with their numbers and total prices using craft.commerce.orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/craft-commerce-orders.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set orders = craft.commerce.orders.find() %}\n\n{% for order in orders %}\n  {{ order.number }} - {{ order.totalPrice}} <br>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Basic Route Configuration in PHP Config File\nDESCRIPTION: Demonstrates the basic syntax for defining routes in the craft/config/routes.php file. Routes map URI patterns to template paths that should be loaded when the pattern is matched.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/routing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n'some/uri/pattern' => 'template/path',\n```\n\n----------------------------------------\n\nTITLE: Testing Numeric Type in Twig\nDESCRIPTION: Demonstrates checking if a value is numeric using PHP's is_numeric() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is numeric ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 'twenty-three' is numeric ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Formatting DateTime for RSS Feed in Twig\nDESCRIPTION: Example of formatting a post date in RSS feed format using the rss() method\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/datetime.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<pubDate>{{ entry.postDate.rss }}</pubDate>\n```\n\n----------------------------------------\n\nTITLE: Requiring Craft 4 in Composer JSON\nDESCRIPTION: Update your project's composer.json file to require Craft CMS version 4.0.0 or higher. You may also need to set the PHP platform requirement to 8.0.2 to match Craft 4's requirements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"craftcms/cms\": \"^4.0.0\"\n```\n\n----------------------------------------\n\nTITLE: PostgreSQL Required Database Privileges\nDESCRIPTION: List of required PostgreSQL database user privileges needed for Craft CMS to function properly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/requirements.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- `SELECT`\n- `INSERT`\n- `UPDATE`\n- `CREATE`\n- `DELETE`\n- `REFERENCES`\n- `CONNECT`\n```\n\n----------------------------------------\n\nTITLE: Basic Entry URI Format Using Twig Variables in Craft CMS\nDESCRIPTION: A simple Twig template for generating entry URIs by combining the author's username and the entry slug. This format can be used in Channel or Structure sections to automatically generate URLs for entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ author.username }}/{{ slug }}\n```\n\n----------------------------------------\n\nTITLE: Overriding MailHog SMTP Port\nDESCRIPTION: Environment variable to override the default SMTP port (1025) for MailHog. This affects the port on the host machine and should be set before enabling the MailHog service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/mailhog.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nNITRO_MAILHOG_SMTP_PORT\n```\n\n----------------------------------------\n\nTITLE: Basic Category Title Output in Twig\nDESCRIPTION: Demonstrates how to output a category's title by simply outputting the CategoryModel object directly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h1>{{ category }}</h1>\n```\n\n----------------------------------------\n\nTITLE: Updating Composer Requirement for Commerce 3\nDESCRIPTION: Updates the project's composer.json file to require Commerce 3 by specifying the version constraint in the require section.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/upgrading.md#2025-04-22_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"craftcms/commerce\": \"^3.0\",\n```\n\n----------------------------------------\n\nTITLE: Using exit tag with conditional check in Craft CMS Twig template\nDESCRIPTION: This snippet demonstrates how to use the {% exit %} tag in a Craft CMS Twig template. It checks for the existence of an entry and exits with a 404 status if not found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/exit.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries.id(entryId).first() %}\n\n{% if not entry %}\n  {% exit 404 %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_SITE Constant in PHP for Craft CMS\nDESCRIPTION: Specifies the Site handle or ID that Craft CMS should serve from the index.php file. This is typically used only when necessary to override automatic site detection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n// Show the German site\ndefine('CRAFT_SITE', 'de');\n```\n\n----------------------------------------\n\nTITLE: Example Console Command Action in PHP\nDESCRIPTION: Sample console command action showing the structure of stdout calls that need to be tested.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic function actionSomething()\n{\n    $this->stdOut('first');\n    $this->stdOut('second');\n}\n```\n\n----------------------------------------\n\nTITLE: Original Static Text in Twig Template\nDESCRIPTION: Shows an example of static text in a Twig template before implementing translations. This represents hardcoded text that needs to be made translatable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/static-translations.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<h1>News</h1>\n```\n\n----------------------------------------\n\nTITLE: Registering CP URL Rules in PHP\nDESCRIPTION: Demonstrates how to register control panel URL rules for element index pages.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterUrlRulesEvent;\nuse craft\\web\\UrlManager;\nuse yii\\base\\Event;\n\nEvent::on(\n    UrlManager::class,\n    UrlManager::EVENT_REGISTER_CP_URL_RULES,\n    function (RegisterUrlRulesEvent $event) {\n        $event->rules['products'] = ['template' => 'my-plugin/products/_index.twig'];\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Category Field Form Input\nDESCRIPTION: Example of creating a form input for a Categories field using checkboxes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{{ hiddenInput('fields[myFieldHandle]', '') }}\n\n{% set possibleCategories = craft.categories()\n  .group('food')\n  .all() %}\n\n{% set relatedCategoryIds = entry is defined\n  ? entry.myFieldHandle.ids()\n  : [] %}\n\n<ul>\n  {% nav possibleCategory in possibleCategories %}\n    <li>\n      <label>\n        {{ input(\n          'checkbox',\n          'fields[myFieldHandle][]',\n          possibleCategory.id,\n          { checked: possibleCategory.id in relatedCategoryIds }\n        ) }}\n        {{ possibleCategory.title }}\n      </label>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Creating Record File with Proper Naming Convention in Craft CMS\nDESCRIPTION: Example of the file naming convention for record classes in Craft CMS plugins. The format follows [PluginHandle]_[RecordName]Record.php pattern.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/records.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n[PluginHandle]_[RecordName]Record.php\n```\n\n----------------------------------------\n\nTITLE: Twig Template Example for Testing\nDESCRIPTION: Sample Twig template demonstrating user greeting functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\nHi {{ currentUser.firstName }},\n\nWelcome to this app!\n```\n\n----------------------------------------\n\nTITLE: Redis Session Configuration in Craft CMS\nDESCRIPTION: Configures Redis for session storage in a load-balanced environment. Sets up Redis connection details and overrides the default session component to use Redis storage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// config/app.php\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'redis' => [\n            'class' => yii\\redis\\Connection::class,\n            'hostname' => 'localhost',\n            'port' => 6379,\n            'password' => App::env('REDIS_PASSWORD') ?: null,\n        ],\n    ],\n];\n```\n\nLANGUAGE: php\nCODE:\n```\n// config/app.web.php\n<?php\n\nuse craft\\helpers\\App;\n\nreturn [\n    'components' => [\n        'session' => function() {\n            // Get the default component config\n            $config = App::sessionConfig();\n\n            // Override the class to use Redis' session class\n            $config['class'] = yii\\redis\\Session::class;\n\n            // Instantiate and return it\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce using Composer in Craft CMS\nDESCRIPTION: Command to install Craft Commerce 2.0 or later via Composer in a Craft 3 project. Requires correctly configured Composer installation in the project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require craftcms/commerce:\"^2.0\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Primary Address Selection in Twig for Craft Commerce\nDESCRIPTION: This Twig code snippet demonstrates how to add form inputs for setting primary shipping and billing addresses in Craft Commerce. It includes hidden inputs and checkboxes for both shipping and billing addresses, with explanations on their usage.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/addresses.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Make primary shipping address? #}\n{{ hiddenInput('isPrimaryShipping', 0) }}\n<label>\n  {{ input('checkbox', 'isPrimaryShipping', 1, {\n    checked: address.isPrimaryShipping\n  }) }}\n  Set as primary shipping address\n</label>\n\n{{ hiddenInput('isPrimaryBilling', 0) }}\n<label>\n  {{ input('checkbox', 'isPrimaryBilling', 1, {\n    checked: address.isPrimaryBilling\n  }) }}\n  Set as primary billing address\n</label>\n```\n\n----------------------------------------\n\nTITLE: Outputting Radio Button Field Value in Twig\nDESCRIPTION: Displays the selected radio button option's value in a Craft CMS template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/radio-buttons-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.radioFieldHandle }}\n```\n\n----------------------------------------\n\nTITLE: Outputting Asset Folder Name in Twig\nDESCRIPTION: Demonstrates how to output an asset folder's name by using the getFolder() method on an image asset. When an AssetFolderModel is output directly, it returns the folder's name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/assetfoldermodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nFolder: {{ image.getFolder() }}\n```\n\n----------------------------------------\n\nTITLE: Configuring Webpack Dev Server for Nitro\nDESCRIPTION: Example webpack configuration for dev server settings to work with Nitro's proxy ports, using port 3000 and binding to all interfaces via 0.0.0.0.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/node.md#2025-04-22_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n{\n  // ...\n  devServer: {\n    // ...\n    port: 3000,\n    host: '0.0.0.0',\n    // ...\n  },\n  // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Adding CSS Comment in styles.css\nDESCRIPTION: Demonstrates creating a simple CSS file in the web root with a single comment. This file can be directly accessed through the web server without involving Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/routing.md#2025-04-22_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n/* Hello, world! */\n```\n\n----------------------------------------\n\nTITLE: Installing Ray Plugin for Craft CMS\nDESCRIPTION: Commands to install the Ray plugin for Craft CMS using Composer and Craft's CLI. The --dev flag can be added to install only for development environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/ray.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro composer require spatie/craft-ray\nnitro craft plugin/install craft-ray\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_LICENSE_KEY in PHP via Environment Variable\nDESCRIPTION: Defines the CRAFT_LICENSE_KEY constant by retrieving it from an environment variable named LICENSE_KEY, allowing the license key to be defined through PHP rather than a license key file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to get its license key from a `LICENSE_KEY` environment variable\ndefine('CRAFT_LICENSE_KEY', craft\\helpers\\App::env('LICENSE_KEY'));\n```\n\n----------------------------------------\n\nTITLE: Radio Buttons Field Form Template\nDESCRIPTION: Template code for creating a form with Radio Buttons field input in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/radio-buttons-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n<ul>\n  {% for option in field.options %}\n    {% set selected = entry is defined\n      ? entry.myFieldHandle.value == option.value\n      : option.default %}\n\n    <li><label>\n      <input type=\"radio\"\n        name=\"fields[myFieldHandle]\"\n        value=\"{{ option.value }}\"\n        {% if selected %} checked{% endif %}\n      >\n      {{ option.label }}\n    </label></li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Formatting Numbers with the number Filter in Twig\nDESCRIPTION: Shows how to format numbers according to locale preferences with optional parameters for decimals and formatting options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_21\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number }}\n{# Output: 1,000,000 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number(2) }}\n{# Output: 1,000,000.00 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|number(null, { (constant('NumberFormatter::GROUPING_SIZE')): 4 }) }}\n{# Output: 100,0000 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ (-5)|number(null, {}, { (constant('NumberFormatter::NEGATIVE_PREFIX')): '☹' }) }}\n{# Output: ☹5 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'oh hai'|number }}\n{# Output: oh hai #}\n```\n\n----------------------------------------\n\nTITLE: Converting to ASCII with Twig in Craft CMS\nDESCRIPTION: Shows the usage of the 'ascii' filter to convert strings to ASCII characters. Includes an example of specifying a locale for character mapping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'über'|ascii }}\n{# Output: uber #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'über'|ascii('de') }}\n{# Output: ueber #}\n```\n\n----------------------------------------\n\nTITLE: Migrating Existing Alt Text in Craft CMS\nDESCRIPTION: Command to migrate existing alt text from a custom field to the native alt attribute for assets in Craft CMS. This is useful for standardizing alt text storage and improving accessibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/assets.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/assets --set alt --to myAltTextField --if-empty\n```\n\n----------------------------------------\n\nTITLE: Displaying User Subscriptions with Twig\nDESCRIPTION: A complete example that displays all subscriptions for the current user. The code creates a query, sets the user parameter, fetches the subscriptions, and loops through them to generate HTML output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/subscriptions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{# Make sure someone is logged in #}\n{% requireLogin %}\n\n{# Create a subscription query with the 'user' parameter #}\n{% set mySubscriptionQuery = craft.subscriptions()\n  .user(currentUser) %}\n\n{# Fetch the subscriptions #}\n{% set subscriptions = mySubscriptionQuery.all() %}\n\n{# Display the subscriptions #}\n{% for subscription in subscriptions %}\n  <article>\n    <h1><a href=\"{{ subscription.url }}\">{{ subscription.title }}</a></h1>\n    {{ subscription.summary }}\n    <a href=\"{{ subscription.url }}\">Learn more</a>\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Requiring Admin Privileges in Twig Templates\nDESCRIPTION: Demonstrates the requireAdmin tag which ensures an admin user is logged in before rendering the content. Non-admin users receive a 403 error.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tags.md#2025-04-22_snippet_17\n\nLANGUAGE: twig\nCODE:\n```\n{% requireAdmin %}\n```\n\n----------------------------------------\n\nTITLE: First Character Lowercase with lcfirst Filter\nDESCRIPTION: Converts the first character of a string to lowercase\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'Foobar'|lcfirst }}\n{# Output: foobar #}\n```\n\n----------------------------------------\n\nTITLE: Simple Dump Tag Usage\nDESCRIPTION: Shows how to dump all available variables in the current template context\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% dump %}\n```\n\n----------------------------------------\n\nTITLE: Changed Model Properties and Methods in Commerce 4\nDESCRIPTION: Some model properties and methods have been renamed or changed in Commerce 4. These changes affect how certain data is accessed or manipulated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nProductType::$titleFormat\nTaxRate::getRateAsPercent()\n```\n\n----------------------------------------\n\nTITLE: Composer Autoload Update Command\nDESCRIPTION: Command to update Composer's autoloader after configuration changes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/module-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncomposer dump-autoload -a\n```\n\n----------------------------------------\n\nTITLE: Adding Content to Discounts Index View in Twig\nDESCRIPTION: This hook allows inserting content after the main content in the discounts index view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.discounts.index\" %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Table Attributes for Element Sources in Craft CMS\nDESCRIPTION: Hook to customize the visible table attributes for a given element index source.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_33\n\nLANGUAGE: php\nCODE:\n```\npublic function getTableAttributesForSource($elementType, $sourceKey)\n{\n    if ($sourceKey == 'foo') {\n        return craft()->elementIndexes->getTableAttributes($elementType, 'bar');\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Entries in Twig\nDESCRIPTION: Shows how to iterate through all selected entries in an Entries field using a for loop, treating the field as an array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% for entry in entry.entriesFieldHandle %}\n  ...\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Filtering Notices by Type\nDESCRIPTION: Example of filtering notices by a specific type using Twig filter syntax.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/cart.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set notices = cart.getNotices() %}\n\n{% for notice in notices|filter(n => n.type == 'invalidCouponRemoved') %}\n  {{ notice.message }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Converting String to ASCII with Twig Filter in Craft CMS\nDESCRIPTION: Demonstrates the 'ascii' filter for converting strings to ASCII characters in Craft CMS templates. It includes an example of using a specific locale for character mapping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'über'|ascii }}\n{# Output: uber #}\n\n{{ 'über'|ascii('de') }}\n{# Output: ueber #}\n```\n\n----------------------------------------\n\nTITLE: Modifying Gateway Request Data in Craft Commerce (PHP)\nDESCRIPTION: This hook allows modification of the raw data object being sent to the payment gateway. It differs from the modifyPaymentRequest hook in that it modifies the actual data object native to the gateway being used.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_modifyPaymentRequest($data, $type, $transaction){\n\n  // Modify the $data\n  return $data;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Single File Upload Field in Craft CMS Front-end Forms\nDESCRIPTION: HTML markup for creating a single file upload input for an Assets field in a front-end entry form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: markup\nCODE:\n```\n<input type=\"file\" name=\"fields[assetsFieldHandle]\">\n```\n\n----------------------------------------\n\nTITLE: Creating Example Unit Test for Craft CMS\nDESCRIPTION: Sample unit test that demonstrates testing Craft CMS edition setting\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace yournamespace\\tests;\n\nuse Codeception\\Test\\Unit;\n\nuse UnitTester;\nuse Craft;\n\nclass ExampleTest extends Unit\n{\n    /**\n     * @var UnitTester\n     */\n    protected $tester;\n\n    public function testExample()\n    {\n        Craft::$app->setEdition(Craft::Pro);\n\n        $this->assertSame(\n            Craft::Pro,\n            Craft::$app->getEdition());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Redis in Nitro\nDESCRIPTION: Command to disable Redis in Nitro. After execution and applying changes, the Redis service will be removed from Nitro and the hosts file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/redis.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnitro disable redis\n```\n\n----------------------------------------\n\nTITLE: Configuring Locale in Craft CMS Index File\nDESCRIPTION: Sets up the index.php file to define the locale for a specific site location, telling Craft which locale's content to serve from this file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/localization-guide.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Path to your craft/ folder\n$craftPath = '../../craft';\n\n// Tell Craft to serve the German content\ndefine('CRAFT_LOCALE', 'de');\n\n// Do not edit below this line\n// ...\n```\n\n----------------------------------------\n\nTITLE: Managing Custom Queues via CLI in Bash\nDESCRIPTION: Command to manage custom queues from the command line interface using their kebab-cased component ID.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/queue.md#2025-04-22_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\nphp craft sluggish-queue/listen --verbose\n```\n\n----------------------------------------\n\nTITLE: Setting Up Pre-Test Environment in Travis CI\nDESCRIPTION: Preparation steps before running tests, including outputting version information, creating test databases for MySQL and PostgreSQL, installing Imagick, and configuring environment variables for database connections.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/ci.md#2025-04-22_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nbefore_script:\n- |\n  # show some version and environment information\n  php --version\n  composer --version\n  php -r \"echo INTL_ICU_VERSION . \\\"\\n\\\";\"\n  php -r \"echo INTL_ICU_DATA_VERSION . \\\"\\n\\\";\"\n  psql --version\n  mysql --version\n- travis_retry mysql -e 'CREATE DATABASE `craft-test`;';\n- mysql -e \"SET GLOBAL sql_mode = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';\";\n- psql -U postgres -c 'CREATE DATABASE \"craft-test\";';\n- pear config-set preferred_state beta\n- pecl channel-update pecl.php.net\n- yes | pecl install imagick\n- cp tests/.env.example.$DB tests/.env\n```\n\n----------------------------------------\n\nTITLE: Checking for Entries Using Length Filter in Twig\nDESCRIPTION: Demonstrates how to check if an Entries field has any selected entries by using the length filter in a conditional statement.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/entries-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.entriesFieldHandle | length %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Handling After Reactivate Subscription Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a subscription is reactivated. Useful for post-reactivation processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_35\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_AFTER_REACTIVATE_SUBSCRIPTION, function(SubscriptionEvent $e) {\n    // Do something - maybe the user needs to be re-authorized with a third party service.\n});\n```\n\n----------------------------------------\n\nTITLE: Creating a Dropdown Field in a Craft CMS Entry Form\nDESCRIPTION: Provides a template for including a Dropdown field in an element form, such as an entry form. This snippet shows how to create a select input with options from the field definition, handling both new and existing entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dropdown-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n<select name=\"fields[myFieldHandle]\">\n  {% for option in field.options %}\n    {% set selected = entry is defined\n      ? entry.myFieldHandle.value == option.value\n      : option.default %}\n\n    <option value=\"{{ option.value }}\"\n      {% if selected %}selected{% endif %}\n    >\n      {{ option.label }}\n    </option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Configuring Site URLs in PHP\nDESCRIPTION: Defines locale-specific site URLs using an array mapping locale IDs to their respective URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n'siteUrl' => array(\n    'en' => 'http://my-project.com/',\n    'de' => 'http://my-project.de/'\n),\n```\n\n----------------------------------------\n\nTITLE: Setting Both Shipping and Billing Addresses Explicitly\nDESCRIPTION: Form implementation that explicitly sets both shipping and billing addresses to the same customer address by providing IDs for both.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-addresses.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.customer.addresses|first %}\n\n<form method=\"post\">\n    <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n    <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n    <input type=\"hidden\" name=\"shippingAddressId\" value=\"{{ address.id }}\">\n    <input type=\"hidden\" name=\"billingAddressId\" value=\"{{ address.id }}\">\n    <input type=\"submit\" value=\"Submit\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Updating Craft and Plugins via CLI\nDESCRIPTION: Command-line instructions for updating Craft CMS and plugins using the Craft CLI. This includes checking for updates, updating all components, or updating specific plugins.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update all\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update commerce\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update commerce element-api\n```\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update element-api:2.7.0\n```\n\n----------------------------------------\n\nTITLE: Translation Filters in Twig Templates\nDESCRIPTION: Examples of translation filters in Twig templates, demonstrating default category behavior.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"News\"|t }}\n{{ \"News\"|t('site') }}\n```\n\n----------------------------------------\n\nTITLE: Checking for Related Users\nDESCRIPTION: Examples of checking for the existence of related users without fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related users!</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->exists()) {\n    // There are related users!\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Craft Commerce using DDEV\nDESCRIPTION: DDEV-specific commands for installing Craft Commerce in a containerized environment. These shortcuts ensure the commands are executed inside the appropriate container.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/installation.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nddev composer require -w craftcms/commerce\nddev craft plugin/install commerce\n```\n\n----------------------------------------\n\nTITLE: Including CSS File with First Parameter\nDESCRIPTION: Shows how to include a CSS file with the 'first' parameter, which ensures the file is included before other CSS files queued with this tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includecssfile.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% includeCssFile myCssFile first %}\n```\n\n----------------------------------------\n\nTITLE: Converting Categories to Structure Sections in Craft CMS\nDESCRIPTION: Console command to convert category groups into structure sections using Craft's CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/categories myCategoryGroupHandle\n```\n\n----------------------------------------\n\nTITLE: Implementing CP Edit URL for Elements\nDESCRIPTION: Shows how to implement the getCpEditUrl() method to define control panel edit URLs for custom elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\npublic function getCpEditUrl()\n{\n    return 'plugin-handle/products/'.$this->id;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Order Queries in Twig and PHP\nDESCRIPTION: Shows how to create a new order query in both Twig and PHP for fetching orders.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new order query #}\n{% set myOrderQuery = craft.orders() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new order query\n$myOrderQuery = \\craft\\commerce\\elements\\Order::find();\n```\n\n----------------------------------------\n\nTITLE: Updated Permission Structure in Craft Commerce 4\nDESCRIPTION: New permission structure showing the replacement of broad permissions with more granular type-specific permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\ncommerce-manageProducts -> commerce-editProductType:<uid>\ncommerce-createProducts:<uid>\ncommerce-deleteProducts:<uid>\n\ncommerce-managePromotions:\n  commerce-editSales\n  commerce-createSales\n  commerce-deleteSales\n  commerce-editDiscounts\n  commerce-createDiscounts\n  commerce-deleteDiscounts\n```\n\n----------------------------------------\n\nTITLE: PHP INI Get Command\nDESCRIPTION: Command for retrieving PHP ini setting values\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_8\n\nLANGUAGE: shell\nCODE:\n```\nnitro php iniget [<options>] <setting>\n```\n\n----------------------------------------\n\nTITLE: Creating Expandable Navigation with isAncestorOf in Twig\nDESCRIPTION: Uses the isAncestorOf method to build a navigation menu that shows expanded state for the current page's ancestors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% nav page in craft.entries.section('pages') %}\n  {% set expanded = entry is defined and page.isAncestorOf(entry) %}\n  <li{% if expanded %} class=\"expanded\"{% endif %}>\n    {{ page.getLink() }}\n    {% ifchildren %}\n      <ul>\n        {% children %}\n      </ul>\n    {% endifchildren %}\n  </li>\n{% endnav %}\n```\n\n----------------------------------------\n\nTITLE: Implementing Reference Tags Support\nDESCRIPTION: Shows how to add reference tag support to custom elements and implement copy reference tag functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\npublic static function refHandle()\n{\n    return 'product';\n}\n```\n\n----------------------------------------\n\nTITLE: Adding User Actions in Craft CMS\nDESCRIPTION: Hook to add custom actions to the user index page. Returns an array containing element action class handles or instantiated IElementAction objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\npublic function addUserActions($source)\n{\n    return array(\n        'Foo',\n        new BarElementAction(),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Widget File Structure in Craft CMS\nDESCRIPTION: Example of the file naming convention for a Craft CMS widget. The file should be placed in a 'widgets/' subfolder within your plugin's directory and follow the naming pattern [PluginHandle]_[WidgetHandle]Widget.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n[PluginHandle]_[WidgetHandle]Widget.php\n```\n\n----------------------------------------\n\nTITLE: Listing All Product Types in Twig\nDESCRIPTION: Example of iterating through all product types in the system using craft.commerce.productTypes.allProductTypes and displaying both the handle and name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-variants.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for type in craft.commerce.productTypes.allProductTypes %}\n  {{ type.handle }} - {{ type.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Enabling Database Query Logging and Profiling in Craft 4\nDESCRIPTION: Configuration example showing how to manually enable database query logging and profiling in Craft 4, which are now only enabled by default when Dev Mode is on.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n  'components' => [\n    'db' => function() {\n      $config = craft\\helpers\\App::dbConfig();\n\n      // Always enable DB logging and profiling\n      $config['enableLogging'] => true;\n      $config['enableProfiling'] => true;\n\n      return Craft::createObject($config);\n    },\n  ],\n];\n```\n\n----------------------------------------\n\nTITLE: Iterating Active Discounts in Twig\nDESCRIPTION: This snippet demonstrates how to loop through all active discounts in the system using Twig. It retrieves discounts that are enabled and currently active based on the current date and time.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/discounts.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% for discount in craft.commerce.discounts.allActiveDiscounts %}\n  {{ discount.name }} - {{ discount.description }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Matrix Block Type-Specific CSS\nDESCRIPTION: CSS rules for styling specific Matrix block types with custom styling\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_6\n\nLANGUAGE: css\nCODE:\n```\n.content-block.image {\n    background-color: #EEE;\n    padding: var(--layout-site-gutter);\n    transform: rotate(-1deg);\n}\n\n.content-block.unsupported {\n    border: 1px dashed var(--color-highlight);\n    color: var(--color-highlight);\n    padding: var(--layout-site-gutter);\n    text-align: center;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Database Character Set and Collation in Craft CMS 5\nDESCRIPTION: Environment variable settings for default database character set and collation after completing the Craft CMS 5 upgrade.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/upgrade.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nCRAFT_DB_CHARSET=\"utf8mb4\"\nCRAFT_DB_COLLATION=\"utf8mb4_0900_ai_ci\" # MySQL\nCRAFT_DB_COLLATION=\"utf8mb4_unicode_ci\" # MariaDB\n```\n\n----------------------------------------\n\nTITLE: Using Dynamic Subfolder Paths with Twig in Craft CMS\nDESCRIPTION: A Twig snippet that demonstrates how to access a source element's slug or fallback to its ID for use in dynamic subfolder paths in an Assets field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ object.slug ?: object.id }}\n```\n\n----------------------------------------\n\nTITLE: Running Composer Autoload Command in Bash\nDESCRIPTION: Terminal command to update Composer's class autoloader script based on the autoload mapping defined in composer.json.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/module-guide.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer dump-autoload -a\n```\n\n----------------------------------------\n\nTITLE: Implementing getResourcePath Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Maps resource request paths to actual server file paths. Returns a string with the server path to the requested resource or null if the plugin doesn't handle the requested resource.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function getResourcePath($path)\n{\n    // Does this path start with \"myplugin/\"?\n    if (strncmp($path, 'myplugin/', 9) == 0) {\n        // Return the path to the file in craft/storage/\n        return craft()->path->getStoragePath().'myplugin/'.substr($path, 9);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Checking for New Entry in Craft CMS 2 Event\nDESCRIPTION: Shows how to check if an entry is new in Craft CMS 2 entry-related events using the isNewEntry parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nif ($event->params['isNewEntry']) {\n    // This is a new entry\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Commerce Services in Twig\nDESCRIPTION: Demonstrates how to access Commerce service methods through the plugin instance in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\ncraft.commerce.paymentCurrencies.getAllPaymentCurrencies()\n```\n\n----------------------------------------\n\nTITLE: Querying Products with Active Sales in PHP\nDESCRIPTION: Shows how to query products that have variants with active sales using PHP in Commerce 2.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/changes-in-commerce-2.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$products = Product::find()->hasVariant(['hasSales' => true])->all();\n```\n\n----------------------------------------\n\nTITLE: Setting Account Activation Success Path in Craft CMS (PHP)\nDESCRIPTION: Configures the activateAccountSuccessPath option to specify the URI Craft should redirect to when a user is successfully activated on the front-end.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_47\n\nLANGUAGE: php\nCODE:\n```\n'activateAccountSuccessPath' => 'members/activation-success',\n```\n\n----------------------------------------\n\nTITLE: Testing Scalar Type in Twig\nDESCRIPTION: Shows how to check if a value is a scalar using PHP's is_scalar() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tests.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'hai' is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ [23, 'hai'] is scalar ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: HMAC Hash Generation and Validation\nDESCRIPTION: Shows how to generate and validate HMAC hashes for secure form data transmission.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"foo\" value=\"{{ 'bar'|hash }}\">\n```\n\nLANGUAGE: php\nCODE:\n```\n$foo = craft()->request->getPost('foo');\n$foo = craft()->security->validateData($foo);\n\nif ($foo !== false) {\n    // data is valid\n}\n```\n\n----------------------------------------\n\nTITLE: Converting Global Sets to Entries via Console Command\nDESCRIPTION: Demonstrates the console command for converting a global set to an entry, part of the process of consolidating features into entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/globals.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft entrify/global-set myGlobalSetHandle\n```\n\n----------------------------------------\n\nTITLE: Enabling Dev Mode in Craft CMS (PHP)\nDESCRIPTION: Example of enabling the devMode configuration setting. This puts the system in development mode with additional debugging features enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n'devMode' => true,\n```\n\n----------------------------------------\n\nTITLE: Locale-Specific Route Configuration in PHP\nDESCRIPTION: Shows how to configure routes for multiple locales in the routes.php file. Global routes apply to all locales, while locale-specific routes only apply to requests for that specific locale.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/routing.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'global/uri/pattern' => 'global/template/path',\n\n'de' => array(\n    'german/only/uri/pattern' => 'german/only/template/path',\n),\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Types in Craft CMS\nDESCRIPTION: Demonstrates how to register custom GraphQL types using Craft's Gql service events. This example shows registering a Widget interface through the RegisterGqlTypesEvent.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterGqlTypesEvent;\nuse craft\\services\\Gql;\nuse yii\\base\\Event;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_TYPES,\n    function(RegisterGqlTypesEvent $event) {\n        $event->types[] = WidgetInterface::class;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Formatting DateTime for Atom Feed in Twig\nDESCRIPTION: Example of formatting a post date in Atom feed format using the atom() method\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/datetime.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<published>{{ entry.postDate.atom }}</published>\n```\n\n----------------------------------------\n\nTITLE: Displaying Current Year in Twig\nDESCRIPTION: Example of displaying the current year using the year() method\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/datetime.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<p>Copyright {{ now.year }} Pixel &amp; Tonic, Inc.</p>\n```\n\n----------------------------------------\n\nTITLE: Subscription Statuses in Commerce\nDESCRIPTION: Lists and describes the four possible subscription statuses in Commerce: active, canceled, expired, and trial. Includes precedence order for status resolution when multiple statuses could apply.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/subscriptions.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- `active` - if a subscription is within a paid billing cycle, it is considered active, even if it's set to cancel at the end of the current billing cycle.\n- `canceled` - if a subscription is outside of a paid billing cycle, it is considered to be canceled, if it was canceled by the user.\n- `expired` - if a subscription is outside of a paid billing cycle, it is considered to be expired if has been marked as such by the gateway, either because it was set to a fixed amount of billing cycles or a payment failed.\n- `trial` - if a subscription is within the set amount of trial days from the beginning of the subscription.\n```\n\n----------------------------------------\n\nTITLE: Enabling MailHog in Nitro\nDESCRIPTION: Command to enable MailHog service in Nitro. After running this command, Nitro will prompt to apply changes, making the MailHog web UI available at https://mailhog.service.nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/mailhog.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro enable mailhog\n```\n\n----------------------------------------\n\nTITLE: Creating New Nitro Site\nDESCRIPTION: Command to create a new Nitro site for plugin development.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/plugin-development.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro add plugins-dev\n```\n\n----------------------------------------\n\nTITLE: Marking Critical Updates in Changelog\nDESCRIPTION: Example of marking a critical security update in the changelog using the [CRITICAL] tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/changelogs-and-updates.md#2025-04-22_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-01-21 [CRITICAL]\n### Fixed\n- Reverted change to `$potus` due to security vulnerabilities\n```\n\n----------------------------------------\n\nTITLE: Using Variable Assignment with Products Field\nDESCRIPTION: Example of assigning Products field query to a variable for cleaner template code and multiple uses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/products-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set products = entry.productsFieldHandle %}\n\n{% if products | length %}\n  <h3>Some great products</h3>\n  {% for product in products %}\n    ...\n  {% endfor %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Disabling Cart Info Sending to Gateways in PHP\nDESCRIPTION: This PHP code snippet shows how to configure Craft Commerce to not send cart information to payment gateways. This setting is useful for gateways that only require the payment amount.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/configuration.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n'sendCartInfoToGateways' => false,\n```\n\n----------------------------------------\n\nTITLE: Updating to Specific Version in Craft CMS\nDESCRIPTION: Command to update a plugin to a specific version by appending the version number to the handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/updating.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update element-api:2.7.0\n```\n\n----------------------------------------\n\nTITLE: Retrieving Discount Information by Coupon Code\nDESCRIPTION: Code snippet demonstrating how to fetch and display discount details associated with a coupon code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/coupon-codes.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discounts.getDiscountByCode(cart.couponCode) %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Capitalizing First Letter with ucfirst Filter in Twig\nDESCRIPTION: The ucfirst filter capitalizes the first character of a string, keeping the rest of the string unchanged. This is useful for ensuring proper capitalization of titles or names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/filters.md#2025-04-22_snippet_32\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'foobar'|ucfirst }}\n{# Output: Foobar #}\n```\n\n----------------------------------------\n\nTITLE: Post-Test Actions Configuration\nDESCRIPTION: Configures post-test actions including uploading code coverage reports to codecov.io when enabled.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_5\n\nLANGUAGE: yaml\nCODE:\n```\nafter_script:\n- |\n  if [ $TASK_TESTS_COVERAGE == 1 ]; then\n    bash <(curl -s https://codecov.io/bash)\n  fi\n```\n\n----------------------------------------\n\nTITLE: Updating Craft Commerce via Terminal\nDESCRIPTION: This command specifically updates the Craft Commerce plugin. It should be run after checking for available updates and reviewing the release notes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/update.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update commerce\n```\n\n----------------------------------------\n\nTITLE: Verifying Nitro 2 Version Installation\nDESCRIPTION: Command to verify the installed version of Nitro 2 after upgrading from Nitro 1. Expected to show version 2.0.0-alpha or newer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/upgrade.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro --version\nnitro version 2.0.0-alpha\n```\n\n----------------------------------------\n\nTITLE: Deferring Public Registration Password in Craft CMS (PHP)\nDESCRIPTION: Enables the deferPublicRegistrationPassword option, allowing public user registration forms to omit the password input. Users set their password after email verification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_52\n\nLANGUAGE: php\nCODE:\n```\n'deferPublicRegistrationPassword' => true,\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft Path in PHP\nDESCRIPTION: This code snippet shows how to set the $craftPath variable in the index.php file to point to the correct location of the craft/ folder if it's in the same directory as index.php.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/installing.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$craftPath = './craft';\n```\n\n----------------------------------------\n\nTITLE: Implementing availableForUseWithOrder() for Payment Gateway in PHP\nDESCRIPTION: Example of implementing the availableForUseWithOrder() method to determine if a payment gateway should be available for a given order. This snippet checks if the order's billing address is in Australia.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/extend/payment-gateway-types.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\npublic function availableForUseWithOrder(\\craft\\commerce\\elements\\Order $order): bool\n{\n    // only allow this gateway for orders in Australia\n    return $order->getBillingAddress()->countryIso === 'AU';\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Nitro and Docker Versions\nDESCRIPTION: Use the version command to output Nitro and Docker versions in use. This command also suggests running nitro update if versions appear out of sync.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/updating.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro version\nView the changelog at https://github.com/craftcms/nitro/blob/2.0.0/CHANGELOG.md\nNitro CLI: \t 2.0.0\nNitro gRPC: \t 2.0.0\nDocker API: \t 1.41 (1.12 min)\nDocker CLI: \t 1.41\nThe Nitro CLI and gRPC versions do not match\nYou might need to run `nitro update`\n```\n\n----------------------------------------\n\nTITLE: Displaying Line Item Status in Twig Template\nDESCRIPTION: Template code for iterating through order line items and displaying their status. Uses the lineItemStatus property to access status information and creates a visual status indicator with handle and name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/line-item-statuses.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% for item in order.lineItems %}\n  {% set status = item.lineItemStatus %}\n\n  {{ item.description }}\n  <span class=\"status-pip status-pip--{{ status.handle }}\" title=\"{{ status.name }}\"></span>\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Version Heading Format in Markdown\nDESCRIPTION: Standard format for version headings in changelog files, including version number and date.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/changelogs-and-updates.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## X.Y.Z - YYYY-MM-DD\n```\n\n----------------------------------------\n\nTITLE: Customizing User Table Attribute HTML in Craft CMS\nDESCRIPTION: Hook to customize the HTML output of table cells on the user index page.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_32\n\nLANGUAGE: php\nCODE:\n```\npublic function getUserTableAttributeHtml(UserModel $user, $attribute)\n{\n    if ($attribute == 'twitter' && $user->twitter) {\n        return '<a href=\"https://twitter.com/'.$user->twitter.'\">@'.$user->twitter.'</a>';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Record Class in Craft CMS\nDESCRIPTION: Example of a basic record implementation for a Craft CMS plugin. This class defines a table name and attributes that map to database columns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/records.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    public function getTableName()\n    {\n        return 'cocktailrecipes_ingredients';\n    }\n\n    protected function defineAttributes()\n    {\n        return array(\n            'name' => AttributeType::String,\n            'type' => array(AttributeType::Enum, 'values' => \"alcohol,mixer,other\"),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Viewing Twig Template in VS Code\nDESCRIPTION: Shows the initial view of the index.twig template file in VS Code, highlighting the need for proper Twig syntax highlighting and formatting extensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/routing.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<!DOCTYPE html>\n<html lang=\"en-US\">\n<head>\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <meta charset=\"utf-8\" />\n    <title>Welcome to Craft CMS</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover\" />\n    <meta name=\"referrer\" content=\"origin-when-cross-origin\" />\n</head>\n<body class=\"ltr\">\n    <div id=\"app\">\n    </div>\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Currency Conversion and Formatting Examples in Twig\nDESCRIPTION: Examples demonstrating how to use the commerceCurrency filter for formatting and converting currency values in Craft Commerce. Shows various options including basic formatting, currency conversion, and raw value output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/payment-currencies.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ 10.00|commerceCurrency(cart.currency)}} // US$ 10.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true)}} // A$ 13.00\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true,format=false)}} // 13.0000\n\n{{ order.totalPrice|commerceCurrency(cart.paymentCurrency,convert=true,format=true)}} // A$ 13.00\n```\n\n----------------------------------------\n\nTITLE: Enabling Redis in Nitro\nDESCRIPTION: Command to enable Redis in Nitro. After execution, Nitro will prompt to apply changes, making Redis available at redis.service.nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/redis.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro enable redis\n```\n\n----------------------------------------\n\nTITLE: Referencing Static Translations Documentation in Markdown\nDESCRIPTION: A Markdown link to the static translations documentation within the Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/directory-structure.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n[static translations](sites.md#static-message-translations)\n```\n\n----------------------------------------\n\nTITLE: Referencing CRAFT_TRANSLATIONS_PATH Configuration in Markdown\nDESCRIPTION: A Markdown link to the CRAFT_TRANSLATIONS_PATH configuration documentation in the Craft CMS project.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/directory-structure.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n[`CRAFT_TRANSLATIONS_PATH`](../reference/config/bootstrap.md#craft-translations-path)\n```\n\n----------------------------------------\n\nTITLE: Disabling SVG Sanitization and Namespacing in Craft CMS\nDESCRIPTION: Renders an SVG without sanitizing potentially malicious scripts and without namespacing IDs or class names, which can be useful when working with trusted SVGs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_48\n\nLANGUAGE: twig\nCODE:\n```\n{{ svg(image, sanitize=false, namespace=false) }}\n```\n\n----------------------------------------\n\nTITLE: Accessing Dropdown Field Data in Craft CMS Templates\nDESCRIPTION: Illustrates how to access and work with Dropdown field data in Twig templates. This includes displaying selected options, checking if an option is selected, and looping through available options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dropdown-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set value = entry.myFieldHandle %}\n\n{{ entry.myFieldHandle }} or {{ entry.myFieldHandle.value }}\n\n{% if entry.myFieldHandle.value %}\n\n{{ entry.myFieldHandle.label }}\n\n{% for option in entry.myFieldHandle.options %}\n  Label:    {{ option.label }}\n  Value:    {{ option }} or {{ option.value }}\n  Selected: {{ option.selected ? 'Yes' : 'No' }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Setting Token Duration in PHP\nDESCRIPTION: Defines the default duration for system tokens using PHP interval specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\n'defaultTokenDuration' => 'P1W',\n```\n\n----------------------------------------\n\nTITLE: Looping Through All Available Checkbox Options in Twig\nDESCRIPTION: Demonstrates how to iterate through all available options in a Checkboxes field, not just the selected ones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/checkboxes-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for option in entry.checkboxFieldHandle.options %}\n    <li>{{ option }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Checking for Available Updates via Terminal in Craft CMS\nDESCRIPTION: This command checks for available updates for Craft CMS and its plugins, including Commerce. It should be run from the Craft project directory in the terminal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update\n```\n\n----------------------------------------\n\nTITLE: Implementing a GraphQL Mutation Resolver in PHP for Craft CMS\nDESCRIPTION: This class extends ElementMutationResolver to handle saving a widget. It checks permissions, creates a new widget element, populates it with data, sets a custom field, saves the element, and handles validation errors.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\resolvers\\mutations;\n\nuse mynamespace\\elements\\Widget as WidgetElement;\nuse craft\\gql\\base\\ElementMutationResolver;\nuse GraphQL\\Type\\Definition\\ResolveInfo;\nuse GraphQL\\Error\\UserError;\nuse Craft;\n\nclass Widget extends ElementMutationResolver\n{\n    protected $immutableAttributes = ['id', 'uid'];\n\n    public function saveWidget($source, array $arguments, $context, ResolveInfo $resolveInfo)\n    {\n        $this->requireSchemaAction('widget', 'edit');\n\n        $elementService = Craft::$app->getElements();\n        $widget = $elementService->createElement(WidgetElement::class);\n        // Have Craft populate the element's content\n        $widget = $this->populateElementWithData($widget, $arguments);\n        // Always set our custom approved field to false for mutations\n        $widget->approved = false;\n        // Save the new element\n        $widget = $this->saveElement($widget);\n\n        if ($widget->hasErrors()) {\n            $validationErrors = [];\n\n            foreach ($widget->getFirstErrors() as $attribute => $errorMessage) {\n                $validationErrors[] = $errorMessage;\n            }\n            \n            // Throw a UserError with validation messages if we can't save\n            throw new UserError(implode(\"\\n\", $validationErrors));\n        }\n\n        // Return the newly-saved element\n        return $elementService->getElementById($widget->id, WidgetElement::class);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Refund Transaction Event Handler in PHP\nDESCRIPTION: Event handler for commerce_payments.onRefundTransaction that updates order status after successful refund.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/events-reference.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\ncraft()->on('commerce_payments.onRefundTransaction', function($event) {\n    $transaction = $event->params['transaction];\n    if ($transaction->status == 'success') {\n        $transaction->order->orderStatusId = 2;\n        craft()->commerce_orders->saveOrder($transaction->order);\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Handling After Save Product Type Event in Craft Commerce\nDESCRIPTION: This snippet shows how to listen for the afterSaveProductType event, which is triggered after a product type has been saved. It can be used for tasks like preparing third-party systems for a new product type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_50\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\ProductTypeEvent;\nuse craft\\commerce\\services\\ProductTypes;\nuse yii\\base\\Event;\n\nEvent::on(ProductTypes::class, ProductTypes::EVENT_AFTER_SAVE_PRODUCTTYPE, function(ProductTypeEvent $e) {\n     // Maybe prepare some third party system for a new product type\n});\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Mutex Driver in PHP for Craft CMS\nDESCRIPTION: Sets up a custom mutex driver for Craft CMS, typically used in load-balanced environments. This example configures the mutex driver provided by yii2-redis.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n// Use mutex driver provided by yii2-redis\nreturn [\n    'components' => [\n        'mutex' => [\n            'mutex' => 'yii\\redis\\Mutex',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Referencing Craft 4 Testing Documentation in Markdown\nDESCRIPTION: A Markdown link to the Craft 4 testing documentation, used as a temporary reference while Craft 5 testing documentation is not yet available.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/directory-structure.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[Craft 4 testing](/4.x/testing/README.md)\n```\n\n----------------------------------------\n\nTITLE: Escaped Variable Interpolation for Docker\nDESCRIPTION: Shows how to escape variable interpolation tokens for later evaluation in Docker environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_2\n\nLANGUAGE: env\nCODE:\n```\nBASE_API_HOSTNAME=\"api.\\${DDEV_HOSTNAME}\"\n```\n\n----------------------------------------\n\nTITLE: Configuring MySQL Settings in Nitro\nDESCRIPTION: Series of commands to customize MySQL configuration in Nitro by editing mysql.conf and restarting the service. Requires SSH access to the Nitro machine.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/advanced.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro ssh\n```\n\nLANGUAGE: bash\nCODE:\n```\nexit\n```\n\nLANGUAGE: bash\nCODE:\n```\nnitro db restart\n```\n\n----------------------------------------\n\nTITLE: Loading Cart Form Implementation\nDESCRIPTION: Form implementation for loading a specific cart using its number.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/load-cart') }}\n  {{ redirectInput('/shop/cart') }}\n\n  <input type=\"text\" name=\"number\" value=\"{{ cart.number }}\">\n  <button>Submit</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: PHP Docblock for Interface Parameters\nDESCRIPTION: Proper way to document parameters in PHP docblocks when using interfaces. This example shows how to reference an interface type for a parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n/**\n * @param \\craft\\base\\ElementInterface $element\n */\n```\n\n----------------------------------------\n\nTITLE: Customizing Default Order Status\nDESCRIPTION: This event allows overriding the default order status that would normally be set according to the control panel settings. It can dynamically determine a more appropriate status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\DefaultOrderStatusEvent;\nuse craft\\commerce\\services\\OrderStatuses;\nuse yii\\base\\Event;\n\nEvent::on(OrderStatuses::class, OrderStatuses::EVENT_DEFAULT_ORDER_STATUS, function(DefaultOrderStatusEvent $e) {\n    // Do something - perhaps figure out a better default order statues than the one set in the control panel\n});\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation Structure\nDESCRIPTION: Hierarchical documentation structure explaining front-end development concepts in Craft CMS, including request lifecycle, content querying, and presentation approaches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/README.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Front-End Basics\n\nNow that we've set up enough tools to manage a pool of content, it's time to build a \"front-end\" presentation for visitors.\n\nThis process involves three concepts:\n\n1. Craft's request and response lifecycle;\n1. Querying for content created via the admin;\n1. Interspersing that content with HTML (and styling the output with CSS);\n\nCraft supports two fundamentally different approaches to building a front-end:\n\n1. **Monolithic:** Using templates to generate HTML on the server;\n1. **Headless:** Using GraphQL in conjunction with a separate front-end view library;\n```\n\n----------------------------------------\n\nTITLE: Check for Enabled Descendants in Twig\nDESCRIPTION: Shows how to check if a category has any enabled descendants using the getDescendants() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set hasDescendants = category.getDescendants().total() != 0 %}\n```\n\n----------------------------------------\n\nTITLE: Formatting Number Fields with Thousands Separators\nDESCRIPTION: Demonstrates how to format number values with proper thousands separators using Twig filters and PHP formatting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/number-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.myFieldHandle|number }}\n```\n\nLANGUAGE: php\nCODE:\n```\n\\Craft::$app->getFormatter()->asDecimal($entry->myFieldHandle);\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Categories in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve all tax categories using the TaxCategories service in both Twig and PHP. This code returns an array of TaxCategory models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/tax.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.commerce\n  .getTaxCategories()\n  .getAllTaxCategories() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$categories = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories()\n    ->getAllTaxCategories();\n```\n\n----------------------------------------\n\nTITLE: Path Customization Warning\nDESCRIPTION: Warning message about the importance of correctly configuring CRAFT_BASE_PATH and related directory structures\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/directory-structure.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n::: warning\nMany of these directories' locations are defined relative to Craft's _base path_. Manually setting the [`CRAFT_BASE_PATH`](./config/README.md#craft_base_path) environment override without making the corresponding adjustments to the rest of your project's structure (or explicitly setting other paths) can lead to a non-functional installation.\n:::\n```\n\n----------------------------------------\n\nTITLE: Rendering States Dropdown Using State Models in Twig\nDESCRIPTION: Demonstrates how to create a dropdown select box for states using the craft.commerce.states variable, which returns an array of State models.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n<select>\n{% for states in craft.commerce.countries %}\n  <option value=\"{{ state.id }}\">{{ state.name }}</option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Using Craft Services in Twig Templates\nDESCRIPTION: Examples of accessing various Craft CMS services and components through craft.app in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/global-variables.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# get the value of an `email` query parameter or post field #}\n{% set address = craft.app.request.getParam('email') %}\n\n{# get the value of the `notice` flash message #}\n{% set message = craft.app.session.getFlash('notice') %}\n\n{# get the current user's email address #}\n{% set email = craft.app.user.email %}\n\n{# is `devMode` enabled? #}\n{% set isDevMode = craft.app.config.general.devMode %}\n\n{# get a custom field by its `body` handle #}\n{% set field = craft.app.fields.getFieldByHandle('body') %}\n\n{# get all the sections for the current site #}\n{% set sections = craft.app.entries.getAllSections() %}\n\n{# get all the sites for the current Craft installation #}\n{% set sites = craft.app.sites.allSites() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Transaction Types in Craft Commerce\nDESCRIPTION: Lists the possible types of transactions in Craft Commerce, including purchase, authorize, capture, and refund. Each type represents a different stage or action in the payment process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/transaction-model.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- `purchase` – The transaction represents a purchase or immediate payment request. If this transaction type succeeds, the charge on the gateway took the funds from the customers credit card immediately and payment has been made.\n- `authorize` – The transaction represents an authorization of a payment with the gateway. If successful, the payment was successfully authorized, but an additional capture action needs to take place for the funds to be taken from the credit card.\n- `capture` – This transaction represents a capture of a previous `authorize` transaction. If this transaction type succeeds, the charge on the gateway took the funds from the customers credit card and payment has been made. This transaction is always the child of an authorize transaction.\n- `refund` – This transaction represents a refund of a payment. It is always the child transaction of either a `purchase` or `capture` transaction. You can not refund an authorization.\n```\n\n----------------------------------------\n\nTITLE: Configuring a Path Repository in composer.json\nDESCRIPTION: Shows how to configure a Composer path repository in a project's composer.json to use a local plugin during development. This creates a symbolic link to the plugin directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/plugin-guide.md#2025-04-22_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"minimum-stability\": \"dev\",\n  \"prefer-stable\": true,\n  \"repositories\": [\n    {\n      \"type\": \"path\",\n      \"url\": \"./local/my-plugin\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: PHP INI Set Command\nDESCRIPTION: Command for modifying PHP ini settings from the command line\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_9\n\nLANGUAGE: shell\nCODE:\n```\nnitro php iniset [<options>] <setting> <value>\n```\n\n----------------------------------------\n\nTITLE: Fetching Enabled Countries as List in PHP\nDESCRIPTION: Shows how to retrieve all enabled countries as a key-value list using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$countries = \\craft\\commerce\\Plugin::getInstance()\n    ->getCountries()\n    ->getAllEnabledCountriesAsList();\n\nforeach ($countries as $id => $countryName) {\n    // $id\n    // $countryName\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Logout Link for Logged-in Users in Craft CMS Twig\nDESCRIPTION: Demonstrates how to show a logout link for currently logged-in users using the logoutUrl variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"{{ logoutUrl }}\">Logout</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: String Declaration and Escaping in Twig\nDESCRIPTION: Shows different ways to declare strings in Twig including single and double quotes, and how to escape quotation marks.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set greeting = \"Hello there\" %}\n{% set heading = 'Try the new 7\" folding tablet' %}\n{% set subheading = \"The original Microsoft Surface was 3.5' long.\" %}\n{% set subheading = \"The original Microsoft Surface was 3' 6\\\" long.\" %}\n```\n\n----------------------------------------\n\nTITLE: Disabling Template Caching in Craft CMS (PHP)\nDESCRIPTION: Sets the enableTemplateCaching config option to false, which disables template caching via the cache tag in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_41\n\nLANGUAGE: php\nCODE:\n```\n'enableTemplateCaching' => false,\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_COMPOSER_PATH Constant in PHP for Craft CMS\nDESCRIPTION: Defines the path to the composer.json file for Craft CMS. By default, it's assumed to be in the base directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\ndefine('CRAFT_COMPOSER_PATH', 'path/to/composer.json');\n```\n\n----------------------------------------\n\nTITLE: Using assertElementsExist for Element Testing in Craft CMS\nDESCRIPTION: This method asserts that multiple elements of a specific type exist in the database. It accepts parameters for element type, search criteria, expected amount, and search scope.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/assertion-helpers.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nassertElementsExist(\n  string $elementType,\n  array $searchParameters,\n  int $amount = 1,\n  bool $searchAll = false\n)\n```\n\n----------------------------------------\n\nTITLE: Pre-Test Setup Configuration\nDESCRIPTION: Sets up the test environment including version checking, database creation, and Imagick installation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_3\n\nLANGUAGE: yaml\nCODE:\n```\nbefore_script:\n- |\n  # show some version and environment information\n  php --version\n  composer --version\n  php -r \"echo INTL_ICU_VERSION . \\\"\\n\\\";\"\n  php -r \"echo INTL_ICU_DATA_VERSION . \\\"\\n\\\";\"\n  psql --version\n  mysql --version\n- travis_retry mysql -e 'CREATE DATABASE `craft-test`;';\n- mysql -e \"SET GLOBAL sql_mode = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';\";\n- psql -U postgres -c 'CREATE DATABASE \"craft-test\";';\n- pear config-set preferred_state beta\n- pecl channel-update pecl.php.net\n- yes | pecl install imagick\n- cp tests/.env.example.$DB tests/.env\n```\n\n----------------------------------------\n\nTITLE: Alert Syntax for Release Notes\nDESCRIPTION: GitHub-style alert syntax for adding formatted notes, warnings, and important information to release notes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/changelogs-and-updates.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n> [!NOTE]  \n> Highlights information that users should take into account, even when skimming.\n\n> [!IMPORTANT]  \n> Crucial information necessary for users to succeed.\n\n> [!WARNING]  \n> Critical content demanding immediate user attention due to potential risks.\n```\n\n----------------------------------------\n\nTITLE: Ending Template Execution in Twig\nDESCRIPTION: The exit tag is used to stop template execution and end the request. It can optionally set an HTTP status code, which Craft uses to determine the appropriate error template to render.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set entry = craft.entries().id(entryId).one() %}\n\n{% if not entry %}\n  {% exit 404 %}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Setting Parameters Using Object Syntax in Twig\nDESCRIPTION: Example of passing parameters as an object to craft.entries() when querying blog entries with a limit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'blog',\n  limit: 10\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Accessing Plugin Instance in Tests\nDESCRIPTION: Shows how to access a plugin instance within test cases after registering it in codeception.yml.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/plugins-and-modules.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nMyPlugin::getInstance()\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States as List in Twig\nDESCRIPTION: Demonstrates how to retrieve all enabled states as a key-value list and create a select dropdown in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_18\n\nLANGUAGE: twig\nCODE:\n```\n{% set states = craft.commerce.states.allEnabledStatesAsList %}\n<select>\n{% for id, stateName in states %}\n  <option value=\"{{ id }}\">\n    {{- stateName -}}\n  </option>\n{% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Adding MySQL 5.7 to Existing Nitro Database Configuration\nDESCRIPTION: This YAML snippet shows how to add MySQL 5.7 to an existing Nitro configuration that already includes MySQL 8.0 and PostgreSQL. It demonstrates using a different port for the new MySQL instance to avoid conflicts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/multiple-databases.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\ndatabases:\n  - engine: mysql\n    version: \"8.0\"\n    port: \"3306\"\n  - engine: mysql\n    version: \"5.7\"\n    port: \"33061\"\n  - engine: postgres\n    version: \"13\"\n    port: \"5432\"\n```\n\n----------------------------------------\n\nTITLE: Referencing DDEV Directory in Markdown\nDESCRIPTION: A Markdown link reference to the .ddev directory section within the same document.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/directory-structure.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n[`.ddev/` directory](#ddev)\n```\n\n----------------------------------------\n\nTITLE: Initializing Nitro with Custom Settings\nDESCRIPTION: Demonstrates how to initialize Nitro after setting custom environment variables. This applies the new settings to the Nitro configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/customizing.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnitro init\n```\n\n----------------------------------------\n\nTITLE: Setting System Status in Craft CMS (PHP)\nDESCRIPTION: Example of using isSystemOn to override the system status setting. This controls whether the system is available to users.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n'isSystemOn' => false,\n```\n\n----------------------------------------\n\nTITLE: Displaying Single Page with Continue Reading Link in Twig\nDESCRIPTION: Template code showing how to display the first page of content with a continue reading link if multiple pages exist.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/rich-text-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for entry in craft.entries.section('blog') %}\n  <article>\n    <h1><a href=\"{{ entry.url }}\">{{ entry.title }}</a></h1>\n\n    {{ entry.richTextFieldHandle.getPage(1) }}\n\n    {% if entry.richTextFieldHandle.getTotalPages() > 1 %}\n      <a href=\"{{ entry.url }}\">Continue reading…</a>\n    {% endif %}\n  </article>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Incorrect Usage of Cache Tags with Template Inheritance\nDESCRIPTION: Example showing incorrect implementation of cache tags outside block tags in a template that extends another.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Bad: #}\n\n{% extends \"_layout\" %}\n{% cache %}\n  {% block \"content\" %}\n    ...\n  {% endblock %}\n{% endcache %}\n```\n\n----------------------------------------\n\nTITLE: Using the floor() Function in Twig Templates\nDESCRIPTION: Demonstrates how to use the floor() function to round a number down to the nearest integer.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ floor(42.9) }} => 42\n```\n\n----------------------------------------\n\nTITLE: Binding JavaScript to a Field Type Input in PHP\nDESCRIPTION: Demonstrates how to include JavaScript with a field input while handling Craft's input namespacing for proper ID targeting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\npublic function getInputHtml($name, $value)\n{\n    // Reformat the input name into something that looks more like an ID\n    $id = craft()->templates->formatInputId($name);\n\n    // Figure out what that ID is going to look like once it has been namespaced\n    $namespacedId = craft()->templates->namespaceInputId($id);\n\n    // Include our JavaScript\n    craft()->templates->includeJsResource('cocktails/js/input.js');\n    craft()->templates->includeJs(\"$('#{$namespacedId}').cocktail();\");\n\n    // Render the HTML\n    return craft()->templates->render('cocktails/input', array(\n        'name'  => $name,\n        'id'    => $id,\n        'value' => $value\n    ));\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Subnav Items in PHP\nDESCRIPTION: Example of configuring sub-navigation items for a control panel section, including labels, URLs, and optional badge counts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-section.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n'subnav' => [\n    'foo' => ['label' => 'Foo', 'url' => 'section-url/foo'],\n    'bar' => ['label' => 'Bar', 'url' => 'section-url/bar'],\n\n    // Display a subnav badge count by adding the optional `badgeCount` key:\n    'baz' => ['label' => 'Baz', 'url' => 'section-url/baz', 'badgeCount' => 5],\n],\n```\n\n----------------------------------------\n\nTITLE: User Form Updates for Craft 4 (Twig)\nDESCRIPTION: Demonstrates how to update user forms to use the new fullName field instead of separate firstName and lastName fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/save-user') }}\n\n  {# Separate first and last name inputs: #}\n  {{ input('text', 'firstName', user.firstName) }}\n  {{ input('text', 'lastName', user.lastName) }}\n\n  {# ... #}\n</form>\n```\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('users/save-user') }}\n\n  {# Consolidated full name input: #}\n  {{ input('text', 'fullName', user.fullName) }}\n\n  {# ... #}\n</form>\n```\n\n----------------------------------------\n\nTITLE: Enabling Auto-Login After Account Activation in Craft CMS (PHP)\nDESCRIPTION: Sets the autoLoginAfterAccountActivation config option to true, which automatically logs users in after they've activated their accounts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_48\n\nLANGUAGE: php\nCODE:\n```\n'autoLoginAfterAccountActivation' => true,\n```\n\n----------------------------------------\n\nTITLE: Running Garbage Collection via Command Line\nDESCRIPTION: Basic command to manually trigger garbage collection in Craft CMS from the terminal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/gc.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc\n```\n\n----------------------------------------\n\nTITLE: Importing Database Backup with Nitro CLI\nDESCRIPTION: Demonstrates how to use the nitro db import command to import a SQL backup file. The command automatically detects the backup type and guides the user through selecting a database engine and naming the new database.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/importing.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro db import my-backup.sql\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Template Extensions in Craft CMS (PHP)\nDESCRIPTION: Sets the defaultTemplateExtensions config option to specify the file extensions Craft will look for when matching template paths to files on the front end.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_40\n\nLANGUAGE: php\nCODE:\n```\n'defaultTemplateExtensions' => array('html', 'htm', 'xhtml'),\n```\n\n----------------------------------------\n\nTITLE: Enabling CSRF Protection in PHP\nDESCRIPTION: Enables Cross-Site Request Forgery protection for the site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\n'enableCsrfProtection' => true,\n```\n\n----------------------------------------\n\nTITLE: Updating Craft Commerce via Terminal\nDESCRIPTION: Command to specifically update the Commerce plugin in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/updating.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update commerce\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in Twig\nDESCRIPTION: Demonstrates how to fetch entries with a related tag using a Tags field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Implementing ToString in PHP for Craft CMS Testing\nDESCRIPTION: ToString class implements the craft\\base\\Serializable interface, offering a way to test string conversion functionality in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\ToString\n```\n\n----------------------------------------\n\nTITLE: Type Declaration for Nullable Arguments in PHP\nDESCRIPTION: Illustrates the use of the nullable type declaration for method arguments that can accept null or a specific type.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/coding-guidelines.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function foo(?string $bar): void\n```\n\n----------------------------------------\n\nTITLE: Defining Indexes in Craft CMS Active Record PHP\nDESCRIPTION: Demonstrates how to define indexes on a table using the defineIndexes() method in a Craft CMS Active Record class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_IngredientRecord extends BaseRecord\n{\n    // ...\n\n    public function defineIndexes()\n    {\n        return array(\n            array('columns' => array('name', 'type'), 'unique' => true),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Extending Sale Sidebar Details in Twig\nDESCRIPTION: This hook enables adding content after the existing right sidebar details column in the sale detail view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.sales.edit.details\" %}\n```\n\n----------------------------------------\n\nTITLE: Updating Project Config with Site Relationships in Craft CMS Plugin\nDESCRIPTION: Shows how to update project config with site relationships using UIDs instead of IDs. This ensures consistency when moving between environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/project-config.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Db;\n\n$siteUid = Db::uidById('{{%sites}}', $productType->siteId);\n\n// ...\n\nCraft::$app->getProjectConfig()->set($path, [\n    'name' => $productType->name,\n    'site' => $siteUid,\n    // ...\n]);\n```\n\n----------------------------------------\n\nTITLE: Overriding MinIO's Default Port in Nitro\nDESCRIPTION: Example of how to customize MinIO's default port using an environment variable. This is useful when the default port (9000) conflicts with another service on the host machine.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/minio.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nexport NITRO_MINIO_PORT=9005\nnitro enable minio\n```\n\n----------------------------------------\n\nTITLE: Moving Nitro to System Path (Manual Installation)\nDESCRIPTION: This command moves the Nitro binary to the system path, making it accessible from anywhere in the terminal. It's part of the manual installation process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_4\n\nLANGUAGE: sh\nCODE:\n```\nsudo mv ./nitro /usr/local/bin\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Nitro via Homebrew (macOS)\nDESCRIPTION: This command uninstalls Nitro using Homebrew on macOS. It's used if Nitro was originally installed via Homebrew.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_12\n\nLANGUAGE: bash\nCODE:\n```\nbrew uninstall nitro\n```\n\n----------------------------------------\n\nTITLE: Creating Number Field Input in Twig Form\nDESCRIPTION: Provides a template for creating a Number field input in a Twig form, including field retrieval, default value handling, and input attributes based on field settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/number-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set field = craft.app.fields.getFieldByHandle('myFieldHandle') %}\n\n{% set value = entry is defined\n  ? entry.myFieldHandle\n  : field.defaultValue %}\n\n<input type=\"number\"\n  name=\"fields[myFieldHandle]\"\n  min=\"{{ field.min }}\"\n  max=\"{{ field.max }}\"\n  value=\"{{ value }}\"\n>\n```\n\n----------------------------------------\n\nTITLE: Defining CRAFT_ENVIRONMENT Constant in PHP for Craft CMS\nDESCRIPTION: Sets the environment name for multi-environment configurations in Craft CMS. It typically uses an environment variable or defaults to 'production'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n// Set the environment from the ENVIRONMENT env var, or default to 'production'\ndefine('CRAFT_ENVIRONMENT', craft\\helpers\\App::env('ENVIRONMENT') ?: 'production');\n```\n\n----------------------------------------\n\nTITLE: Complete Database Backup Process in Nitro\nDESCRIPTION: This snippet demonstrates the entire process of backing up a database using Nitro, including selecting the database engine, choosing the specific database, and showing the backup creation and save location.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/backups.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro db backup\nGetting ready to backup…\nWhich database engine?\n  1. mysql-8.0-3306.database.nitro\n  2. postgres-13-5432.database.nitro\nEnter your selection: 2\nWhich database should we backup?\n  1. postgres\n  2. nitro\n  3. plugins\nEnter your selection: 3\nPreparing backup…\n  … creating backup plugins-2021-01-31-160219.sql ✓\nBackup saved in /Users/oli/.nitro/backups/postgres-13-5432.database.nitro 💾\n```\n\n----------------------------------------\n\nTITLE: Accessing Translations in Craft CMS Templates\nDESCRIPTION: Updated method for accessing and outputting translation data in templates, replacing the deprecated getTranslations() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\nview.getTranslations()|json_encode|raw\n```\n\n----------------------------------------\n\nTITLE: Serializable Implementation in PHP\nDESCRIPTION: Class implementing Craft's Serializable interface for testing serialization functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\serializable\\Serializable\n```\n\n----------------------------------------\n\nTITLE: Configuring PHP Extensions in Nitro YAML File\nDESCRIPTION: This YAML snippet shows how PHP extensions are stored in the nitro.yaml configuration file. It demonstrates the structure for specifying site settings, including the PHP version and enabled extensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/extensions.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n// removed for brevity\nsites:\n    - hostname: craft-support.nitro\n      aliases:\n        - support.nitro\n      path: ~/dev/support\n      version: \"7.3\"\n      extensions:\n        - calendar\n      webroot: craft-support/web\n      xdebug: true\n```\n\n----------------------------------------\n\nTITLE: Cart Complete Parameters Table\nDESCRIPTION: Documents the supported parameters for the cart/complete POST endpoint used for completing orders without payment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nParam | Description\n----- | -----------\nforceSave | Optionally set to `true` to force saving the cart.\nnumber | Optional order number for a specific, existing cart.\nregisterUserOnOrderComplete | Whether to create a user account for the customer when the cart is completed and turned into an order.\n```\n\n----------------------------------------\n\nTITLE: Outputting Radio Button Field Label in Twig\nDESCRIPTION: Displays the selected radio button option's label in a Craft CMS template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/radio-buttons-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.radioFieldHandle.label }}\n```\n\n----------------------------------------\n\nTITLE: Rendering Available Shipping Methods in Twig\nDESCRIPTION: Shows how to display available shipping methods for the current cart using the craft.commerce.availableShippingMethods variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% for handle, method in craft.commerce.availableShippingMethods %}\n  <label>\n    <input type=\"radio\" \n           name=\"shippingMethod\" \n           value=\"{{ handle }}\"\n           {% if handle == cart.shippingMethodHandle %}checked{% endif %}\n    />\n    <strong>{{ method.name }}</strong> {{ method.amount|currency(cart.currency) }}\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Including Footer JavaScript with getFootHtml()\nDESCRIPTION: Demonstrates how to output queued JavaScript at the end of the document using getFootHtml(), which should be placed before the closing body tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/functions.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<body>\n  <h1>{{ page.name }}</h1>\n  {{ page.body }}\n\n  {{ getFootHtml() }}\n</body>\n```\n\n----------------------------------------\n\nTITLE: Getting First Element with first() Method in Twig\nDESCRIPTION: Example of using the first() method to get the first asset from a relational field, with a null check before using the result.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% set image = entry.myAssetsField.first() %}\n{# `image` is either an AssetFileModel or null #}\n\n{% if image %}\n  <img src=\"{{ image.url }}\">\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Get Previous Enabled Sibling in Twig\nDESCRIPTION: Shows how to find the previous enabled sibling category using craft.categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/categorymodel.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set prevSibling = craft.categories.positionedBefore(category).order('lft desc').first() %}\n```\n\n----------------------------------------\n\nTITLE: Properly Checking Collection Length in Twig\nDESCRIPTION: Correct ways to check if a collection has items in Twig using the count() method or length filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% if myCollection.count() %}\n  {# Do stuff #}\n{% else %}\n  {# No items to do stuff with; do something else #}\n{% endif %}\n\n{% if myCollection|length %}\n  {# Do stuff #}\n{% else %}\n  {# No items to do stuff with; do something else #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Basic Time Field Form Input\nDESCRIPTION: Implementation of a basic time field input in an entry form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/time.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myTimeField\n  ? entry.myTimeField|date('H:i')\n  : '' %}\n\n<input type=\"time\" name=\"fields[myTimeField]\" value=\"{{ currentValue }}\">\n```\n\n----------------------------------------\n\nTITLE: Setting NITRO_EDIT_HOSTS Environment Variable\nDESCRIPTION: Configuration to prevent Nitro from modifying the host machine's hosts file. This is particularly useful when using third-party host file management applications.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/advanced.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nNITRO_EDIT_HOSTS=false\n```\n\n----------------------------------------\n\nTITLE: Overriding MailHog HTTP Port\nDESCRIPTION: Environment variable to override the default HTTP port (8025) for MailHog's web UI. This affects the port on the host machine and should be set before enabling the MailHog service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/mailhog.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nNITRO_MAILHOG_HTTP_PORT\n```\n\n----------------------------------------\n\nTITLE: Retrieving State by ID in Craft Commerce\nDESCRIPTION: Gets a specific state by its ID, returning a State object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_29\n\nLANGUAGE: twig\nCODE:\n```\n{% set state = craft.commerce.states.stateById(stateId) %}\n{# state.id #}\n{# state.name #}\n```\n\nLANGUAGE: php\nCODE:\n```\n$state = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->stateById($stateId);\n// $state->id\n// $state->name\n```\n\n----------------------------------------\n\nTITLE: Proper Interface Documentation in Docblocks\nDESCRIPTION: Comparison of correct vs incorrect ways to reference interfaces in @param docblocks. The example shows that public service methods should reference interfaces rather than implementation classes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/coding-guidelines.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Bad:\n/**\n * @param \\craft\\base\\Element $element\n * @param \\craft\\base\\ElementInterface|\\craft\\base\\Element $element\n */\n\n// Better:\n/**\n * @param \\craft\\base\\ElementInterface $element\n */\n```\n\n----------------------------------------\n\nTITLE: Implementing ComponentInterface in PHP for Craft CMS Testing\nDESCRIPTION: ComponentExample class implements the craft\\base\\ComponentInterface. It can be used in testing modules or plugins that require a class implementing this interface.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\components\\ComponentExample\n```\n\n----------------------------------------\n\nTITLE: Running Craft 5 Rector Ruleset on Plugin Code\nDESCRIPTION: This command processes a plugin's source code with the Craft 5 Rector ruleset to automatically update API usages and method signatures.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/rector process my-local-plugin/src --config vendor/craftcms/rector/sets/craft-cms-50.php\n```\n\n----------------------------------------\n\nTITLE: Updating All Craft CMS Components via Terminal\nDESCRIPTION: Command to update Craft CMS core and all plugins including Commerce in a single operation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/updating.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update all\n```\n\n----------------------------------------\n\nTITLE: Implementing Gateway Availability Check in PHP\nDESCRIPTION: Example method showing how to determine if a payment gateway should be available for use with a specific order. This implementation checks if the billing address is in Australia.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/payment-gateway-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function availableForUseWithOrder(\\craft\\commerce\\elements\\Order $order): bool\n{\n    // only allow this gateway for orders in Australia\n    return $order->getBillingAddress()->countryIso === 'AU';\n}\n```\n\n----------------------------------------\n\nTITLE: Listing PHP Package Dependencies for Commerce\nDESCRIPTION: Lists the required PHP package dependencies including Craft CMS, DomPDF, Money PHP library, VAT calculation library, and PHPSpreadsheet with their minimum version requirements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/requirements.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ncraftcms/cms ^3.1\ndompdf/dompdf ^0.8.2\nmoneyphp/money ^3.1.3\ndannyvankooten/vat.php ^1.1.2\nphpoffice/phpspreadsheet ^1.4\n```\n\n----------------------------------------\n\nTITLE: Updating All Components in Craft CMS\nDESCRIPTION: Command to update all Craft CMS components and plugins simultaneously using the update all command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/updating.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update all\n```\n\n----------------------------------------\n\nTITLE: Basic Changelog Header Structure in Markdown\nDESCRIPTION: Template for starting a new plugin changelog file with the plugin name as a main heading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/changelogs-and-updates.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Release Notes for <Plugin Name>\n```\n\n----------------------------------------\n\nTITLE: Using the 'string' test in Twig\nDESCRIPTION: Demonstrates how to use the 'string' test to check if a variable is a string value in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{{ '23' is string ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is string ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Running PHPStan on a Craft Plugin\nDESCRIPTION: This command demonstrates how to run PHPStan on a plugin to identify code quality issues before upgrading to Craft 5.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/phpstan -c path/to/plugin/phpstan.neon\n```\n\n----------------------------------------\n\nTITLE: Add to Cart Form with Variant Selection\nDESCRIPTION: Enhanced form that allows customers to choose from multiple product variants using a dropdown selector.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/add-to-cart.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = craft.commerce.products.first() %}\n\n<form method=\"post\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/updateCart\">\n  <input type=\"hidden\" name=\"redirect\" value=\"commerce/cart\">\n  <input type=\"hidden\" name=\"qty\" value=\"1\">\n  <select name=\"purchasableId\">\n    {% for variant in product.variants %}\n      <option value=\"{{ variant.purchasableId }}\">{{ variant.sku }}</option>\n    {% endfor %}\n  </select>\n  <input type=\"submit\" value=\"Add to cart\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: JSON Response Requirement in PHP\nDESCRIPTION: Example of requiring JSON acceptance for JSON-only controller actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/coding-guidelines.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$this->requireAcceptsJson();\n```\n\n----------------------------------------\n\nTITLE: Disabling MailHog in Nitro\nDESCRIPTION: Command to disable and remove the MailHog service from Nitro. After running this command, apply the changes to remove MailHog from Nitro and the hosts file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/mailhog.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnitro disable mailhog\n```\n\n----------------------------------------\n\nTITLE: Disabling Image Color Profile Preservation in Craft CMS\nDESCRIPTION: Controls whether the embedded color profiles should be preserved when uploading an image. Setting this to false can reduce image size but may affect color accuracy.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_79\n\nLANGUAGE: php\nCODE:\n```\n'preserveImageColorProfiles' => false,\n```\n\n----------------------------------------\n\nTITLE: Preventing User Enumeration in PHP\nDESCRIPTION: Enhances security by preventing password reset forms from revealing valid email addresses.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\n'preventUserEnumeration' => true,\n```\n\n----------------------------------------\n\nTITLE: Time Comparison in Templates\nDESCRIPTION: Example of comparing time field values with current time for conditional logic.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/time.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if storeInfo.openTime <= now() and storeInfo.closeTime > now() %}\n  Come on in!\n{% else %}\n  Sorry, we're closed!\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Rebuilding Search Indexes\nDESCRIPTION: Command line instruction for rebuilding search indexes using the resave/entries command.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/searching.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nphp craft resave/entries --update-search-index\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Configuration (macOS Uninstallation)\nDESCRIPTION: This command removes the Nitro configuration directory on macOS. It's an optional step in the uninstallation process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf ~/.nitro\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_LICENSE_KEY Constant in PHP for Craft CMS\nDESCRIPTION: Defines the Craft CMS license key using PHP, typically retrieving it from an environment variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to get its license key from a `LICENSE_KEY` environment variable\ndefine('CRAFT_LICENSE_KEY', craft\\helpers\\App::env('LICENSE_KEY'));\n```\n\n----------------------------------------\n\nTITLE: Structuring Release Notes with References\nDESCRIPTION: Example showing how to format release notes with reference-style links and version headers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/changelogs-and-updates.md#2025-04-22_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-02-01\n### Fixed issue [#123]\n\n[#123]: https://github.com/pixelandtonic/foo/issues/123\n\n## 2.0.0 - 2017-01-31\n### Added\n- New [superFoo] config setting\n\n[superFoo]: https://docs.my-plugin.tld/config#superFoo\n```\n\n----------------------------------------\n\nTITLE: Accessing Assets from a Field in Craft CMS Templates\nDESCRIPTION: Demonstrates how to retrieve assets from an Assets field in a Craft CMS template, returning an ElementCriteriaModel object with all selected assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/assets-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsFieldHandle %}\n```\n\n----------------------------------------\n\nTITLE: Counting Total Editable Global Sets in Craft CMS\nDESCRIPTION: The getTotalEditableSets() method returns the total number of global sets that the current user has permission to edit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getTotalEditableSets()\n```\n\n----------------------------------------\n\nTITLE: Configuring Trace Level in Craft CMS Logging\nDESCRIPTION: Example showing how to set the traceLevel property for the log component in Craft CMS. This configuration enables call stack traces for all log messages, though it may impact performance.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/logging.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n<?php\n# config/app.php\nreturn [\n    'components' => [\n        'log' => [\n            // Include this many levels of the call stack:\n            'traceLevel' => 5,\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Looping Through Related Categories\nDESCRIPTION: Examples of looping through related categories and displaying them as a list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/categories-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedCategories = entry.myFieldHandle.all() %}\n{% if relatedCategories|length %}\n  <ul>\n    {% for rel in relatedCategories %}\n      <li><a href=\"{{ rel.url }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedCategories = $entry->myFieldHandle->all();\nif (count($relatedCategories)) {\n    foreach ($relatedCategories as $rel) {\n        // do something with $rel->url and $rel->title\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Getting Last Element with last() Method in Twig\nDESCRIPTION: Example of using the last() method to get the last entry from the features section, with a null check before using the result.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set lastEntry = craft.entries.section('features').last() %}\n{# `lastEntry` is either an EntryModel or null #}\n\n{% if lastEntry %}\n  <a href=\"{{ lastEntry.url }}\" title=\"{{ lastEntry.title }}\">&larr; Previous</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Modified SalaryChecker Class with Minimum Value\nDESCRIPTION: Updated version of the SalaryChecker class with a minimum return value constraint.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function multiply(int $a, int $b) : int\n{\n    $result = $a * $b;\n\n    // Don't return salaries lower than 25,000\n    if ($result < 25000) {\n        return 25000\n    }\n\n    return $result;\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Tags Field Data in PHP\nDESCRIPTION: Shows how to access and loop through related tags from a Tags field in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$relatedTags = $entry->myFieldHandle->all();\nif (count($relatedTags)) {\n    foreach ($relatedTags as $rel) {\n        // \\craft\\helpers\\UrlHelper::url('tags/' . $rel->slug)\n        // $rel->title\n    }\n}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Dynamic Parameter Translation in PHP\nDESCRIPTION: Demonstrates how to replace placeholder values with dynamic content when translating messages in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/sites.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\necho Craft::t('site', 'Welcome back, {name}', [\n    'name' => Craft::$app->user->identity->friendlyName,\n]);\n```\n\n----------------------------------------\n\nTITLE: CSRF Protection Methods in Craft CMS Templates\nDESCRIPTION: Updated methods for generating CSRF tokens and inputs in templates, replacing the deprecated getCsrfInput() function.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\ncsrfInput()\n```\n\n----------------------------------------\n\nTITLE: Handling After Switch Subscription Plan Event in Craft Commerce PHP\nDESCRIPTION: Event handler that executes after a subscription plan switch. Useful for post-switch processing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/events.md#2025-04-22_snippet_37\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\SubscriptionSwitchPlansEvent;\nuse craft\\commerce\\services\\Subscriptions;\nuse yii\\base\\Event;\n\nEvent::on(Subscriptions::class, Subscriptions::EVENT_AFTER_SWITCH_SUBSCRIPTION_PLAN, function(SubscriptionSwitchPlansEvent $e) {\n    // Do something - maybe the user needs their permissions adjusted on a third party service.\n});\n```\n\n----------------------------------------\n\nTITLE: Conditional Caching with the 'if' Parameter\nDESCRIPTION: Shows how to conditionally apply caching only when a specific condition is met, in this case only for mobile browsers.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{# Only cache if this is a mobile browser #}\n{% cache if craft.request.isMobileBrowser() %}\n```\n\n----------------------------------------\n\nTITLE: Basic User Identity Command in Bash\nDESCRIPTION: Demonstrates the whoami command which displays the current user's username.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/environment/terminal.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nwhoami\n# -> oli\n```\n\n----------------------------------------\n\nTITLE: Accessing Category Model in Craft CMS 2 Event\nDESCRIPTION: Demonstrates how to access the CategoryModel object in Craft CMS 2 events related to categories. This object represents the category being saved or deleted.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/events-reference.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$category = $event->params['category'];\n```\n\n----------------------------------------\n\nTITLE: Outputting EntryTypeModel Handle in Twig\nDESCRIPTION: This snippet demonstrates how to output an EntryTypeModel object without attaching a property or method, which returns the entry type's handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrytypemodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.getType() }}\n```\n\n----------------------------------------\n\nTITLE: Removing macOS Quarantine Flag from Nitro\nDESCRIPTION: This command removes the quarantine flag that macOS automatically adds to downloaded files. It's used to allow Nitro to run without security prompts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_6\n\nLANGUAGE: sh\nCODE:\n```\nxattr -dr com.apple.quarantine /usr/local/bin/nitro\n```\n\n----------------------------------------\n\nTITLE: Implementing Project Config for Plugin Components\nDESCRIPTION: Demonstrates how to modify service methods to operate on the project config store rather than directly on the database. This example shows saving and deleting a product type with proper UID handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse Craft;\nuse craft\\helpers\\Db;\nuse craft\\helpers\\StringHelper;\nuse craft\\commerce\\models\\ProductType;\n\npublic function saveProductType(ProductType $productType)\n{\n    $isNew = empty($productType->id);\n\n    // Ensure the product type has a UID:\n    if ($isNew) {\n        $productType->uid = StringHelper::UUID();\n    } else if (!$productType->uid) {\n        $productType->uid = Db::uidById('{{%plugin_producttypes}}', $productType->id);\n    }\n\n    // Make sure it validates:\n    if (!$productType->validate()) {\n        return false;\n    }\n\n    // Save it to the project config:\n    $path = \"myPlugin.productTypes.{$productType->uid}\";\n\n    Craft::$app->getProjectConfig()->set($path, [\n        'name' => $productType->name,\n        // ...\n    ]);\n\n    // Now set the ID on the product type in case the caller expects it to exist after being saved:\n    if ($isNew) {\n        $productType->id = Db::idByUid('{{%plugin_producttypes}}', $productType->uid);\n    }\n\n    return true;\n}\n\npublic function deleteProductType(ProductType $productType)\n{\n    $path = \"myPlugin.productTypes.{$productType->uid}\";\n\n    Craft::$app->getProjectConfig()->remove($path);\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Nitro via Homebrew (macOS)\nDESCRIPTION: This command installs Nitro using Homebrew on macOS. It requires Homebrew to be installed and Docker Desktop to be previously installed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nbrew install craftcms/nitro/nitro\n```\n\n----------------------------------------\n\nTITLE: Incorrect Order of Console Command Test Steps in PHP\nDESCRIPTION: Shows an example of incorrectly ordered test assertions that will fail because they don't match the sequence of the console command's actual output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$this->consoleCommand('test-controller/test-action')\n    ->stdOut('second')\n    ->stdOut('first')\n    ->exitCode(ExitCode::OK)\n    ->run();\n```\n\n----------------------------------------\n\nTITLE: Implementing Login Link\nDESCRIPTION: Demonstrates how to create a conditional login link using the loginUrl variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if not currentUser %}\n  <a href=\"{{ loginUrl }}\">Login</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Removing Plugin Package\nDESCRIPTION: Command to remove a plugin's Composer package from the project\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/plugins.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncomposer remove craftcms/commerce\n```\n\n----------------------------------------\n\nTITLE: Updating All Dependencies in Craft CMS\nDESCRIPTION: Commands to update all Craft CMS dependencies simultaneously\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/update.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nddev craft update all\nphp craft update all\n```\n\n----------------------------------------\n\nTITLE: Specifying Table Names in Craft CMS DbCommand PHP\nDESCRIPTION: Shows how Craft's DbCommand automatically adds table prefixes without requiring manual wrapping, simplifying table name specification compared to Yii's CDbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// with Yii's CDbCommand:\n->from('{{users}}')\n\n// with Craft's DbCommand:\n->from('users')\n```\n\n----------------------------------------\n\nTITLE: Creating a Test Method for Console Commands in PHP\nDESCRIPTION: Demonstrates how to add a test method to a console command test class in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/testing-craft/console.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace crafttests\\unit\\console;\n\nuse \\craft\\test\\console\\ConsoleTest;\n\nclass MyConsoleTest extends ConsoleTest\n{\n    public function testSomething()\n    {\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Disabling Conditions for Field Layout Elements in PHP\nDESCRIPTION: By default, field layout elements support conditions. This method allows opting out of condition support, which prevents the element from being conditionally displayed.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nprotected function conditional(): bool\n{\n    return false;\n}\n```\n\n----------------------------------------\n\nTITLE: AddressModel Class Reference\nDESCRIPTION: Comprehensive listing of attributes and methods available in the AddressModel class. Includes personal information fields, address components, business details, and geographical relationship methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/address-model.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Address Model\n\nAddressModel objects have the following attributes and methods:\n\n## Attributes\n\n### `id`\nThe address record ID.\n\n### `firstName`\nThe customers first name (required).\n\n### `lastName`\nThe customers last name (required).\n\n### `address1`\nThe first line of the address,\n\n### `address2`\nSecond address line.\n\n### `city`\nThe city.\n\n### `zipCode`\nThe zip or postcode.\n\n### `phone`\nPhone number.\n\n### `alternativePhone`\nAn alternative phone number\n\n### `businessName`\nBusiness Name.\n\n### `businessTaxId`\nBusiness tax ID. No automatic validation of this ID occurs.\n\n### `stateText`\nAlias of `getStateText()`\nReturns the `stateName` if it exists, otherwise the related state's name.\n\n### `stateName`\n\n### `countryId`\nThe record ID of the related country (required).\n\n### `stateId`\nThe record ID of the related state.\n\n### `stateText`\nAlias of `getStateText()`.\n\n### `countryText`\nAlias of `getCountryText()`,\n\n## Methods\n\n### `getStateText()`\nReturns the `stateName` if it exists, otherwise the related state's name.\n\n## `getCountry()`\nReturns the related [Country model](country-model.md) is it exists, or a blank string if it does not.\n\n## `getState()`\nReturns the related [State model](state-model.md) is it exists, or null if it does not.\n```\n\n----------------------------------------\n\nTITLE: Implementing Element Localization in PHP\nDESCRIPTION: Demonstrates how to implement localization support for elements with isLocalized() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_14\n\nLANGUAGE: php\nCODE:\n```\npublic static function isLocalized(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Destroying Nitro Environment (Uninstallation)\nDESCRIPTION: This command destroys all Docker networks, containers, and volumes associated with Nitro. It's the first step in completely uninstalling Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/installation.md#2025-04-22_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\nnitro destroy\n```\n\n----------------------------------------\n\nTITLE: Force Delete Trashed Items via Command Line\nDESCRIPTION: Command to force immediate hard-deletion of all soft-deleted items, bypassing the normal soft delete duration period.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/gc.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft gc --delete-all-trashed=1\n```\n\n----------------------------------------\n\nTITLE: Setting Invalid User Token Path in Craft CMS (PHP)\nDESCRIPTION: Configures the invalidUserTokenPath option to specify the URI Craft should redirect to when user token validation fails.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_54\n\nLANGUAGE: php\nCODE:\n```\n'invalidUserTokenPath' => 'members/invalidtoken',\n```\n\n----------------------------------------\n\nTITLE: Using time Filter for Formatting Time in Twig\nDESCRIPTION: Demonstrates how to use the time filter to output the time of day for a timestamp or DateTime object, with various format options, locale customization, and timezone settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_34\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time }}\n{# Output: 3:14:07 AM #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time('short') }}\n{# Output: 3:14 AM #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time('short', locale='en-GB') }}\n{# Output: 17:00 #}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ entry.postDate|time('short', timezone='UTC') }}\n{# Output: 12:00 AM #}\n```\n\n----------------------------------------\n\nTITLE: DateTime Attribute Declaration Changes\nDESCRIPTION: Shows the evolution of DateTime attribute handling from Craft 3 to 4, demonstrating the simplified type declaration approach.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nclass MyModel extends \\yii\\base\\Model\n{\n    public $dateViewed;\n    \n    // ...\n\n    public function datetimeAttributes(): array\n    {\n        $attributes = parent::datetimeAttributes();\n        $attributes[] = 'dateViewed';\n        return $attributes;\n    }\n\n    // ...\n}\n```\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nclass MyModel extends \\yii\\base\\Model\n{\n    public ?DateTime $dateViewed;\n    \n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Suppressing Order Status Emails in PHP\nDESCRIPTION: Event handler to conditionally suppress email notifications for specific order status changes based on order properties.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/emails.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\events\\OrderStatusEmailsEvent;\nuse craft\\commerce\\services\\OrderStatuses;\nuse yii\\base\\Event;\n\nEvent::on(\n    OrderStatuses::class,\n    OrderStatuses::EVENT_ORDER_STATUS_CHANGE_EMAILS,\n    function (OrderStatusEmailsEvent $event) {\n        $newStatus = $event->orderHistory->getNewStatus();\n\n        // Prevent shipping notifications going out for orders without a shippable item:\n        if ($newStatus->handle === 'shipped' && !$order->hasShippableItems()) {\n            $event->isValid = false;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Creating HTML Tags with Unencoded HTML Content in Craft CMS\nDESCRIPTION: Generates an HTML tag containing raw HTML using the html attribute. This should only be used with trusted content as it does not encode the inner HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_52\n\nLANGUAGE: twig\nCODE:\n```\n{{ tag('div', {\n  html: 'Hello<br>world'\n}) }}\n{# Output: <div>Hello<br>world</div> #}\n```\n\n----------------------------------------\n\nTITLE: Referencing Base Payment Form Class in Craft Commerce\nDESCRIPTION: Shows the class path for the base payment form model that all gateway-specific payment forms must extend.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/payment-form-models.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\ncraft/commerce/models/payments/BasePaymentForm\n```\n\n----------------------------------------\n\nTITLE: Configuring Garbage Collection Probability in Craft CMS (PHP)\nDESCRIPTION: This snippet shows how to configure the probability of garbage collection occurring on each web request in Craft CMS. The configuration is done in the config/app.php file by overriding the craft\\services\\Gc::$probability property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/gc.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'gc' => [\n            'probability' => 0,     // no chance\n            'probability' => 1,     // 1 in 1,000,000\n            'probability' => 10,    // 1 in 100,000 (default)\n            'probability' => 100,   // 1 in 10,000\n            'probability' => 1000,  // 1 in 1,000\n            'probability' => 10000, // 1 in 100\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Symlinking Commerce Example Templates for Development\nDESCRIPTION: Command to create a symbolic link from the Commerce example templates to the project's templates folder, useful for development and testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/example-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nln -s vendor/craftcms/commerce/example-templates/dist/shop ./templates/shop\n```\n\n----------------------------------------\n\nTITLE: Setting File Permissions for Craft CMS Updates\nDESCRIPTION: Command line permissions values for craft/app folder based on user/group relationships. Used to ensure proper access for the update process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/updating.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n744\n```\n\nLANGUAGE: bash\nCODE:\n```\n774\n```\n\nLANGUAGE: bash\nCODE:\n```\n777\n```\n\n----------------------------------------\n\nTITLE: Simple Git-based Deployment for Craft CMS\nDESCRIPTION: This snippet demonstrates a basic Git-based deployment process for a Craft CMS project. It includes steps for fetching new code, installing dependencies, running migrations, and building front-end assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/deployment.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n# Fetch new code:\ngit pull\n\n# Install dependencies:\ncomposer install --no-interaction\n\n# Run migrations and apply project config:\nphp craft up --interactive=0\n\n# Build front-end artifacts (less urgent / lower priority):\nnpm install && npm run build\n```\n\n----------------------------------------\n\nTITLE: Updating Twig Macro Usage for Twig 2\nDESCRIPTION: Shows how to update Twig macro usage to comply with Twig 2 requirements, which require explicit importing of macros.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\nOld:\n{% macro foo %}...{% endmacro %}\n{{ _self.foo() }}\n\nNew:\n{% macro foo %}...{% endmacro %}\n{% import _self as macros %}\n{{ macros.foo() }}\n```\n\n----------------------------------------\n\nTITLE: Reference Tag Basic Syntax in Twig\nDESCRIPTION: Demonstrates the basic syntax structure for reference tags consisting of Type, Identifier, and optional Property segments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/reference-tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{<Type>:<Identifier>:<Property>}\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies with Nitro npm\nDESCRIPTION: Example of installing npm dependencies using Nitro's npm command, which doesn't require Node.js or npm installed on the host machine.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/node.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ cd ~/dev/my-craft-project\n$ nitro npm install\n  … checking /Users/oli/dev/docs/package.json ✓\n  … pulling docker.io/library/node:14-alpine ✓\nRunning npm install\n\n131 packages are looking for funding\n  run `npm fund` for details\n\nfound 0 vulnerabilities\n\nnpm install complete 🤘\n```\n\n----------------------------------------\n\nTITLE: Using nitro iniset Command\nDESCRIPTION: Interactive command-line example showing how to modify PHP's max_execution_time setting for a specific Nitro site. The command walks through site selection and parameter configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/php-settings.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro iniset\nSelect a site:\n  1. craft-support.nitro\n  2. another-site.nitro\n  3. plugins-dev.nitro\nEnter your selection: 1\nWhich PHP setting would you like to change for craft-support.nitro?\n  1. display_errors\n  2. max_execution_time\n  3. max_input_vars\n  4. max_input_time\n  5. max_file_upload\n  6. memory_limit\n  7. opcache_enable\n  8. opcache_revalidate_freq\n  9. post_max_size\n  10. upload_max_file_size\nEnter your selection: 2\nWhat should the max execution time be [5000]? 7000\nApply changes now [Y/n]\n```\n\n----------------------------------------\n\nTITLE: Formatting Version Headers in Markdown\nDESCRIPTION: Standard format for version headers in plugin changelogs, showing version number and release date.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/changelogs-and-updates.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n## X.Y.Z - YYYY-MM-DD\n```\n\n----------------------------------------\n\nTITLE: Custom Date Formatting with Twig Filter\nDESCRIPTION: Example of using Twig's date filter for custom date formatting\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/datetime.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n<p>Today's date is {{ now|date(\"M d, Y\") }}.</p>\n```\n\n----------------------------------------\n\nTITLE: Using the 'integer' test in Twig\nDESCRIPTION: Demonstrates how to use the 'integer' test to check if a variable is an integer value in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ 23 is integer ? 'true' : 'false' }}\n{# result: true #}\n\n{{ '23' is integer ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: WSL2 Memory Configuration\nDESCRIPTION: Configuration settings for WSL2 memory management, to be placed in .wslconfig file. Limits WSL2 memory usage to 6GB and disables swap file creation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/windows.md#2025-04-22_snippet_1\n\nLANGUAGE: config\nCODE:\n```\n[wsl2]\nmemory=6GB\nswap=0\n```\n\n----------------------------------------\n\nTITLE: Configuring File Write Locks in PHP\nDESCRIPTION: Controls exclusive file locking behavior when writing files, with auto-detection for filesystem support.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n'useWriteFileLock' => true,\n```\n\n----------------------------------------\n\nTITLE: Enabling Translation Debug in PHP\nDESCRIPTION: Enables debug output for string translations by surrounding translated strings with @ symbols.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n'translationDebugOutput' => true,\n```\n\n----------------------------------------\n\nTITLE: Shortcut Syntax for Entry URI Format in Craft CMS\nDESCRIPTION: A more concise syntax for referencing entry properties when creating URI formats in Craft CMS. This achieves the same result as the standard Twig syntax but with less code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/entries.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{author.username}/{slug}\n```\n\n----------------------------------------\n\nTITLE: Queueing JavaScript with {% includeJs %} in Twig\nDESCRIPTION: This snippet demonstrates how to use the {% includeJs %} tag to queue a JavaScript snippet for inclusion on the page. It sets a variable with JavaScript code and then includes it using the tag.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includejs.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myJs %}\n_gaq.push([ \"_trackEvent\", \"Search\", \"{{ searchTerm|e('js') }}\" ]);\n{% endset %}\n\n{% includeJs myJs %}\n```\n\n----------------------------------------\n\nTITLE: Inefficient Element Loading in Twig (Craft CMS)\nDESCRIPTION: This snippet demonstrates the N+1 query problem when looping through entries and accessing related assets without eager-loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'news'\n}) %}\n\n{% for entry in entries %}\n  {# Get the related asset, if there is one #}\n  {% set image = entry.assetsField.first() %}\n  {% if image %}\n    <img src=\"{{ image.url }}\" alt=\"{{ image.title }}\">\n  {% endif %}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Transaction Statuses in Craft Commerce\nDESCRIPTION: Enumerates the possible statuses of a transaction in Craft Commerce, including pending, redirect, success, and failed. Each status represents a different state of the transaction process.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/transaction-model.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- `pending` – The transaction is pending getting a `redirect`, `success` or `failed` status.\n- `redirect` – The initial transaction was registered successfully with the offsite gateway, and we have been told to redirect to the offsite gateway. This will be the status while the customer is on the gateways offsite page.\n- `success` – The transaction is successful.\n- `failed` – The transaction failed. See the transaction `code` and `message` to find out more information.\n```\n\n----------------------------------------\n\nTITLE: Checking Dev Mode in Craft CMS Twig\nDESCRIPTION: Shows how to check if the devMode configuration is enabled using the craft.app.config.general service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set isDevMode = craft.app.config.general.devMode %}\n```\n\n----------------------------------------\n\nTITLE: Using Conditionals in Dynamic Entry Titles in Craft CMS\nDESCRIPTION: Example of implementing conditional logic in a dynamic entry title format, checking if postDate exists and displaying either the entry date or current date.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/sections-and-entries.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% if object.postDate %}{postDate|date('M j, Y')}{% else %}{{ now|date('M j, Y') }}{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Mailer Component in Craft CMS\nDESCRIPTION: Overrides the default mailer component configuration to use a custom transport adapter with specific settings for email delivery.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/config/README.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'mailer' => function() {\n            // Get the stored email settings\n            $settings = craft\\helpers\\App::mailSettings();\n\n            // Override the transport adapter class\n            $settings->transportType = craft\\mailgun\\MailgunAdapter::class;\n\n            // Override the transport adapter settings\n            $settings->transportSettings = [\n                'domain' => 'my-project.tld',\n                'apiKey' => 'key-xxxxxxxxxx',\n            ];\n\n            // Create a Mailer component config with these settings\n            $config = craft\\helpers\\App::mailerConfig($settings);\n\n            // Instantiate and return it\n            return Craft::createObject($config);\n        },\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Checking if Related Assets Exist in Twig\nDESCRIPTION: A Twig example showing how to check if an element has any related assets without actually fetching them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle.exists() %}\n  <p>There are related assets!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Customizing Timezone for Date Inputs\nDESCRIPTION: Examples of customizing the timezone for date inputs in forms. The code shows how to set a specific timezone or allow users to select a timezone.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/date-time-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{# Use the timezone selected under Settings → General Settings → Time Zone #}\n{% set tz = craft.app.getTimezone() %}\n\n{# Or set a specific timezone #}\n{% set tz = 'America/Los_Angeles' %}\n\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('Y-m-d\\\\TH:i', timezone=tz)\n  : '' %}\n\n<input type=\"datetime-local\" name=\"fields[myFieldHandle][datetime]\" value=\"{{ currentValue }}\">\n{{ hiddenInput('fields[myFieldHandle][timezone]', tz) }}\n```\n\n----------------------------------------\n\nTITLE: Critical Update Notation\nDESCRIPTION: Example of marking a release as critical using the [CRITICAL] notation in the version heading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/changelogs-and-updates.md#2025-04-22_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n## 2.0.1 - 2017-01-21 [CRITICAL]\n### Fixed\n- Reverted change to `$potus` due to security vulnerabilities\n```\n\n----------------------------------------\n\nTITLE: Using actionInput with Options in Twig\nDESCRIPTION: The actionInput function with additional HTML attributes specified through the options parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ actionInput('users/save-user', {\n  id: 'action-input'\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Shipping Method in Craft Commerce Pro\nDESCRIPTION: This code snippet demonstrates how to register a custom shipping method class using the EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS event in a module or plugin's init() method. It adds the custom shipping method to the list of available shipping methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/shipping-methods.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nEvent::on(ShippingMethods::class, ShippingMethods::EVENT_REGISTER_AVAILABLE_SHIPPING_METHODS, function(RegisterAvailableShippingMethodsEvent $event) {\n    $event->shippingMethods[] = new MyShippingMethod();\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing addRichTextLinkOptions Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Adds custom options to Rich Text fields' Link menus. Returns an array of options specifying element types that can be linked to, with optional source restrictions and criteria filtering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function addRichTextLinkOptions()\n{\n    return array(\n        array(\n            'optionTitle' => Craft::t('Link to a product'),\n            'elementType' => 'Commerce_Product',\n        ),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: GQL Helper Utility\nDESCRIPTION: Helper class extending Craft's Gql helper to check widget query permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/graphql.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\npublic static function canQueryWidgets(): bool\n{\n    $allowedEntities = self::extractAllowedEntitiesFromSchema();\n    return isset($allowedEntities['widgets']);\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Widget GraphQL Query Class for Custom Elements\nDESCRIPTION: A PHP class implementation that defines a custom 'widgets' GraphQL query. The class extends Craft's base Query class and provides the query definition including its return type, arguments, and resolver. It also includes permission checking via a custom helper.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\queries;\n\nuse GraphQL\\Type\\Definition\\Type;\nuse mynamespace\\helpers\\Gql as GqlHelper;\nuse mynamespace\\gql\\interfaces\\elements\\Widget as WidgetInterface;\nuse mynamespace\\gql\\arguments\\elements\\Widget as WidgetArguments;\nuse mynamespace\\gql\\resolvers\\elements\\Widget as WidgetResolver;\n\nclass Widget extends \\craft\\gql\\base\\Query\n{\n    public static function getQueries($checkToken = true): array\n    {\n        // Make sure the current token's schema allows querying widgets\n        if ($checkToken && !GqlHelper::canQueryWidgets()) {\n            return [];\n        }\n\n        // Provide one or more query definitions\n        return [\n            'widgets' => [\n                'type' => Type::listOf(WidgetInterface::getType()),\n                'args' => WidgetArguments::getArguments(),\n                'resolve' => WidgetResolver::class . '::resolve',\n                'description' => 'This query is used to query for custom widgets.'\n            ],\n        ];\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Nitro CLI Including Prereleases\nDESCRIPTION: Use the --dev flag with the self-update command to include prereleases when updating the Nitro CLI to the latest version.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/updating.md#2025-04-22_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nnitro self-update --dev\n```\n\n----------------------------------------\n\nTITLE: Initializing Craft CMS Test Bootstrap\nDESCRIPTION: Bootstrap file that configures PHP settings and defines essential Craft CMS constants for testing\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\test\\TestSetup;\n\nini_set('date.timezone', 'UTC');\n\n// Use the current installation of Craft\ndefine('CRAFT_TESTS_PATH', __DIR__);\ndefine('CRAFT_STORAGE_PATH', __DIR__ . '/_craft/storage');\ndefine('CRAFT_TEMPLATES_PATH', __DIR__ . '/_craft/templates');\ndefine('CRAFT_CONFIG_PATH', __DIR__ . '/_craft/config');\ndefine('CRAFT_MIGRATIONS_PATH', __DIR__ . '/_craft/migrations');\ndefine('CRAFT_TRANSLATIONS_PATH', __DIR__ . '/_craft/translations');\ndefine('CRAFT_VENDOR_PATH', dirname(__DIR__).'/vendor');\n\nTestSetup::configureCraft();\n```\n\n----------------------------------------\n\nTITLE: Configuring Order Routes in PHP\nDESCRIPTION: Route configuration for handling order URLs using order numbers. Defines a pattern matching 32-character hexadecimal order numbers and maps them to a template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/orders.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // ...\n    'orders/<orderNumber:[a-f0-9]{32}>' => ['template' => '_orders/receipt'],\n];\n```\n\n----------------------------------------\n\nTITLE: Configuring DDEV for Craft CMS Project\nDESCRIPTION: DDEV command to create configuration files for a Craft CMS project. This sets up the project type and document root for the local development environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/install/README.md#2025-04-22_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nddev config --project-type=craftcms --docroot=web\n```\n\n----------------------------------------\n\nTITLE: Test Execution Configuration\nDESCRIPTION: Defines the test execution process with conditional code coverage generation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/ci.md#2025-04-22_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nscript:\n- |\n  if [[ $TASK_TESTS_COVERAGE != 1 ]]; then\n    vendor/bin/codecept run unit\n  else\n    mkdir -p build/logs\n    vendor/bin/codecept run unit --coverage-xml coverage.xml;\n  fi\n```\n\n----------------------------------------\n\nTITLE: Converting Date Field Values PostgreSQL Query\nDESCRIPTION: SQL query for PostgreSQL to convert existing Date field values from UTC to local timezone when converting to a Time field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/time-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: sql\nCODE:\n```\nUPDATE \"content\"\nSET \"field_myFieldHandle\" = \"field_myFieldHandle\" at time zone 'UTC' at time zone '-07:00'\nWHERE \"field_myFieldHandle\" IS NOT NULL\n```\n\n----------------------------------------\n\nTITLE: Accessing Global Sets with craft.globals in Craft CMS\nDESCRIPTION: The craft.globals API provides methods to access global sets in Craft CMS templates. Global sets are used to store content that's available globally throughout a site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals\n```\n\n----------------------------------------\n\nTITLE: Fetching a Single Related Asset in PHP\nDESCRIPTION: A PHP example showing how to fetch only the first related asset from an Assets field and check if it exists before using it.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/assets.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // do something with $rel->url and $rel->filename\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft Test Object\nDESCRIPTION: Test configuration file that creates the Craft application test object\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/setup.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse craft\\test\\TestSetup;\n\nreturn TestSetup::createTestCraftObjectConfig();\n```\n\n----------------------------------------\n\nTITLE: Getting Element IDs with ids() Method in Twig\nDESCRIPTION: Example of using the ids() method to fetch all tag IDs from the blogTags group without any limit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/elementcriteriamodel.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set allTagIds = craft.tags.group('blogTags').limit(null).ids() %}\n{# `allTagIds` is an array of tag IDs #}\n```\n\n----------------------------------------\n\nTITLE: Symlinking Commerce Example Templates for Development (Bash)\nDESCRIPTION: This command creates a symbolic link to the Commerce example templates in the project's templates folder. It's recommended for active development to always have access to the most up-to-date examples, particularly when testing gateway plugins.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/example-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nln -s vendor/craftcms/commerce/example-templates/dist/shop ./templates/shop\n```\n\n----------------------------------------\n\nTITLE: Removing Cart Line Items with Twig\nDESCRIPTION: Form example showing how to add removal functionality for cart line items using a checkbox input.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_10\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/cart/update-cart') }}\n  {% for item in cart.lineItems %}\n    <input type=\"number\" name=\"lineItems[{{ item.id }}][qty]\" min=\"1\" value=\"{{ item.qty }}\">\n    <input type=\"text\" name=\"lineItems[{{ item.id }}][note]\" placeholder=\"My Note\" value=\"{{ item.note }}\">\n    <input type=\"checkbox\" name=\"lineItems[{{ item.id }}][remove]\" value=\"1\"> Remove item<br>\n  {% endfor %}\n  <button type=\"submit\">Update Line Item</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Checkbox Options in Twig\nDESCRIPTION: Shows how to iterate through only the selected options in a Checkboxes field and display them in an unordered list.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/checkboxes-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<ul>\n  {% for option in entry.checkboxFieldHandle %}\n    <li>{{ option }}</li>\n  {% endfor %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Visualizing Category Tree Structure Example\nDESCRIPTION: An example of a category tree structure used to illustrate the Branch Limit setting in Categories fields.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nFood\n├── Fruit\n│   ├── Apples\n│   ├── Bananas\n│   └── Oranges\n└── Vegetables\n    ├── Brussels sprouts\n    ├── Carrots\n    └── Celery\n```\n\n----------------------------------------\n\nTITLE: MySQL Required Database Privileges\nDESCRIPTION: List of required MySQL/MariaDB database user privileges needed for Craft CMS to function properly.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/requirements.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- `SELECT`\n- `INSERT`\n- `DELETE`\n- `UPDATE`\n- `CREATE`\n- `ALTER`\n- `INDEX`\n- `DROP`\n- `REFERENCES`\n- `LOCK TABLES`\n```\n\n----------------------------------------\n\nTITLE: Implementing Arrayable Interface in PHP for Craft CMS Testing\nDESCRIPTION: ExampleArrayble class implements the yii\\base\\Arrayable interface. It can be used when testing modules or plugins that depend on actions with arrayable objects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\arrayable\\ExampleArrayble\n```\n\n----------------------------------------\n\nTITLE: Modifying Payment Request in Craft Commerce (PHP)\nDESCRIPTION: This hook allows modification of the payment request array before it's sent to the payment gateway. It must return an array that will be merged into the original request array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_modifyPaymentRequest(array $request){\n\n  $request['description'] = 'My Order Info';\n\n  return $request;\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading with Custom Parameters in Twig (Craft CMS)\nDESCRIPTION: This example demonstrates how to apply custom criteria parameters when eager-loading elements, including nested eager-loading scenarios.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/eager-loading-elements.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries({\n  section: 'news',\n  with: [\n    ['assetsField', { kind: 'image' }]\n  ]\n}) %}\n\n{% set entries = craft.entries({\n  section: 'news',\n  with: [\n    ['entriesField', { authorId: 5 }],\n    ['entriesField.assetsField', { kind: 'image' }]\n  ]\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Creating Input Fields with input() Function\nDESCRIPTION: The input() function generates an HTML input tag with the specified type, name, and value.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/functions.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{{ input('email', 'email-input', '') }}\n{# Output: <input type=\"email\" name=\"email-input\" value=\"\"> #}\n```\n\n----------------------------------------\n\nTITLE: Creating Plugins Directory\nDESCRIPTION: Commands to navigate to the project directory and create a plugins folder.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/plugin-development.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ cd plugins-dev\n$ mkdir plugins\n```\n\n----------------------------------------\n\nTITLE: String Concatenation and Interpolation in Twig\nDESCRIPTION: Demonstrates two methods of combining strings: using the tilde operator for concatenation and interpolation for embedding variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{# Concatenation #}\n{% set greeting = \"Hello, \" ~ currentUser.friendlyName %}\n\n{# Interpolation #}\n{% set greeting = \"Hello, #{currentUser.friendlyName}\" %}\n```\n\n----------------------------------------\n\nTITLE: Get Published File URL\nDESCRIPTION: Examples of getting URLs for published files using AssetManager, including single file and directory-based publishing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/asset-bundles.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/path/to/file.svg',\n    true\n);\n\n$url = \\Craft::$app->assetManager->getPublishedUrl(\n    '@mynamespace/icons',\n    true,\n    'shaker.svg'\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing a Custom Adjuster in Craft Commerce (PHP)\nDESCRIPTION: This example shows a complete custom adjuster class that implements the AdjusterInterface. It applies a $2 discount to each line item in the order. The class demonstrates how to create and configure OrderAdjustment models for each line item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/adjusters.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse craft\\base\\Component;\nuse craft\\commerce\\base\\AdjusterInterface;\nuse craft\\commerce\\elements\\Order;\nuse craft\\commerce\\models\\OrderAdjustment;\n\nclass MyAdjuster extends Component implements AdjusterInterface\n{\n\n  public function adjust(Order $order): array\n  {\n    $adjustments = [];\n\n    foreach ($order->getLineItems() as $item) {\n      $adjustment = new OrderAdjustment;\n      $adjustment->type = 'discount';\n      $adjustment->name = '$2 off';\n      $adjustment->description = '$2 off everything in the store';\n      $adjustment->sourceSnapshot = [ 'data' => 'value']; // This can contain information about how the adjustment came to be\n      $adjustment->amount = -2;\n      $adjustment->setOrder($order);\n      $adjustment->setLineItem($item);\n\n      $adjustments[] = $adjustment;\n    }\n\n    return $adjustments;\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Payment Gateways Using Environment Variables in Craft Commerce\nDESCRIPTION: This example demonstrates how to override gateway settings by creating a commerce-gateways.php configuration file. The configuration uses environment variables to store sensitive gateway credentials for eWay and PayPal Pro payment gateways, which is a security best practice for managing API keys, passwords, and other sensitive information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/gateway-config.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'ewayGatewayHandle' => [\n        'testMode' => getenv('EWAY_TEST_MODE'),\n        'apiKey' => getenv('EWAY_API_KEY'),\n        'password' => getenv('EWAY_PASSWORD'),\n        'CSEKey' => getenv('EWAY_CSE_KEY'),\n    ],\n    'paypalProGateway' => [\n        'testMode' => getenv('PAYPAL_PRO_TEST_MODE'),\n        'password' => getenv('PAYPAL_PRO_PASSWORD'),\n        'username' => getenv('PAYPAL_PRO_USERNAME'),\n        'signature' => getenv('PAYPAL_PRO_SIGNATURE'),\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Markdown Heading for Templating Reference\nDESCRIPTION: A simple markdown heading that serves as the title for the templating reference documentation in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/README.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Templating Reference\n```\n\n----------------------------------------\n\nTITLE: Creating Default Filters with Conditions for Element Sources in Craft CMS\nDESCRIPTION: This code demonstrates how to use the defaultFilter option with conditions to create a source that shows recently edited entries while allowing users to modify the filter settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\nuse craft\\elements\\conditions\\DateUpdatedConditionRule;\n\n// ...\n\n$condition = Entry::createCondition();\n$condition->setConditionRules([\n    new DateUpdatedConditionRule([\n        'attributes' => [\n            // Keep in mind, these are just defaults!\n            // Users will be able to update them via the filter/condition UI.\n            'rangeType' => DateRange::TYPE_AFTER,\n            'periodValue' => 7,\n            'periodType' => DateRange::PERIOD_DAYS_AGO,\n        ],\n    ]),\n]);\n\n// ...\n\nreturn [\n    // ...\n    [\n        'key' => 'recent-edits',\n        'label' => 'Recently Edited',\n        'criteria' => [],\n        'defaultFilter' => $condition,\n        'defaultSort' => ['dateUpdated', 'desc'],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Defining Additional Product Table Attributes in Craft Commerce (PHP)\nDESCRIPTION: This hook allows plugins to add additional table columns to product indexes. It should return an array of attribute keys and labels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/hooks-reference.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function commerce_defineAdditionalProductTableAttributes()\n{\n    return array(\n        'foo' => 'Foo',\n        'bar' => 'Bar',\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Tab Navigation Setup for Control Panel\nDESCRIPTION: Template code demonstrating how to implement tabbed navigation in a control panel page with content and settings tabs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-templates.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set tabs = {\n  content: {\n    label: 'Content'|t('plugin-handle'),\n    url: '#content',\n  },\n  settings: {\n    label: 'Settings'|t('plugin-handle'),\n    url: '#settings',\n  },\n} %}\n```\n\n----------------------------------------\n\nTITLE: Vue Link Panel Component Implementation\nDESCRIPTION: Vue component template for displaying product and resource links with icons and metadata. Used for presenting the main product offerings and starter projects.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/README.md#2025-04-22_snippet_0\n\nLANGUAGE: vue\nCODE:\n```\n<div class=\"w-full sm:flex sm:-mx-2 flex-wrap\">\n    <LinkPanel\n        title=\"Craft CMS\"\n        subtitle=\"Flexible content management.\"\n        link=\"/5.x/\"\n        icon=\"/docs/icons/craft.svg\"\n        currentVersion=\"5.x\" />\n    <LinkPanel\n        title=\"Craft Commerce\"\n        subtitle=\"Custom, extensible ecommerce.\"\n        link=\"/commerce/5.x/\"\n        icon=\"/docs/icons/commerce.svg\"\n        currentVersion=\"5.x\" />\n    <LinkPanel\n        title=\"Craft Cloud\"\n        subtitle=\"Our scalable hosting platform.\"\n        link=\"https://craftcms.com/cloud\"\n        icon=\"/docs/icons/icon-cloud.svg\" />\n</div>\n```\n\n----------------------------------------\n\nTITLE: Checking if Variants Field Has Selected Products in Twig\nDESCRIPTION: Example showing how to check if a Commerce Variants field has any selected product variants using the length filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/variants-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle|length %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Managing Nested Collection Values in Twig\nDESCRIPTION: Example demonstrating how to work with nested values in the _globals Collection by creating a dedicated top-level Collection object.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/global-variables.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% do _globals.set('events', collect()) %}\n\n{# ... #}\n\n{% do _globals.get('events').push(\"show:element:#{entry.id}\") %}\n```\n\n----------------------------------------\n\nTITLE: Setting Breadcrumbs in Craft Controller\nDESCRIPTION: Demonstrates how to set up breadcrumbs for a control panel screen using the asCpScreen method. Includes examples of nested menu items and multiple navigation levels.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/updating-plugins.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nreturn $this->asCpScreen()\n    ->title(Craft::t('my-plugin', 'Edit {type}', ['type' => $type->name]))\n    // ...\n    ->crumbs([\n        [\n            'menu' => [\n                'label' => Craft::t('my-plugin', 'Select settings screen'),\n                'items' => [\n                    [\n                        'label' => Craft::t('my-plugin', 'Widget Types'),\n                        'url' => 'settings/acme/widget-types',\n                        'selected' => true,\n                    ],\n                    [\n                        'label' => Craft::t('my-plugin', 'Security Clearances'),\n                        'url' => 'settings/acme/security',\n                    ],\n                    [\n                        'label' => Craft::t('my-plugin', 'Project Statuses'),\n                        'url' => 'settings/acme/statuses',\n                    ],\n                ],\n            ],\n        ],\n        [\n            'menu' => [\n              'label' => Craft::t('my-plugin', 'ACME Lab Settings'),\n              'url' => 'settings/acme',\n            ],\n        ]\n    ]);\n```\n\n----------------------------------------\n\nTITLE: Creating an Element Query Class for Custom Elements in Craft CMS\nDESCRIPTION: Defines a custom element query class for Product elements. Includes properties and methods for filtering by price and currency, and joins the custom table in the beforePrepare method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\elements\\db;\n\nuse craft\\db\\Query;\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\helpers\\Db;\nuse mynamespace\\elements\\Product;\n\nclass ProductQuery extends ElementQuery\n{\n    public $price;\n    public $currency;\n\n    public function price($value)\n    {\n        $this->price = $value;\n\n        return $this;\n    }\n\n    public function currency($value)\n    {\n        $this->currency = $value;\n\n        return $this;\n    }\n\n    protected function beforePrepare(): bool\n    {\n        // join in the products table\n        $this->joinElementTable('products');\n\n        // select the price and currency columns\n        $this->query->select([\n            'products.price',\n            'products.currency',\n        ]);\n\n        if ($this->price) {\n            $this->subQuery->andWhere(Db::parseParam('products.price', $this->price));\n        }\n\n        if ($this->currency) {\n            $this->subQuery->andWhere(Db::parseParam('products.currency', $this->currency));\n        }\n\n        return parent::beforePrepare();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Element Exporter in PHP\nDESCRIPTION: Example implementation of a custom element exporter class that extends ElementExporter. This exporter provides title, status, URL and related entries data for selected elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-exporter-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nnamespace mynamespace\\exporters;\n\nuse Craft;\nuse craft\\base\\EagerLoadingFieldInterface;\nuse craft\\base\\Element;\nuse craft\\base\\ElementExporter;\nuse craft\\base\\Field;\nuse craft\\elements\\db\\ElementQuery;\nuse craft\\elements\\db\\ElementQueryInterface;\nuse craft\\helpers\\ArrayHelper;\n\nclass MyCustomExporter extends ElementExporter\n{\n    public static function displayName(): string\n    {\n        return 'My Exporter';\n    }\n\n    public function export(ElementQueryInterface $query): mixed\n    {\n        $results = [];\n\n        // Eager-load the entries related via the relatedEntries field\n        /** @var ElementQuery $query */\n        $query->with(['relatedEntries']);\n\n        foreach ($query->each() as $element) {\n            /** @var Element $element */\n            $results[] = [\n                'Title' => $element->title ?? '',\n                'Status' => ucfirst($element->status),\n                'URL' => $element->getUrl(),\n                'RelatedEntries' => ArrayHelper::getColumn(\n                    $element->relatedEntries,\n                    'title'\n                ),\n            ];\n        }\n\n        return $results;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: User Profile Form with Validation in Twig\nDESCRIPTION: This snippet shows a Twig template for a user profile form that handles validation errors. It demonstrates how to display contextual validation errors for form fields and includes CSRF protection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/controller-actions.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% extends '_layouts/default' %}\n\n{% requireLogin %}\n\n{% block content %}\n  <h1>Hello, {{ currentUser.fullName }}</h1>\n\n  {% set user = user ?? currentUser %}\n\n  <form method=\"post\">\n    {{ csrfInput() }}\n    {{ actionInput('users/save-user') }}\n    {{ hiddenInput('userId', user.id) }}\n\n    <label for=\"fullName\">Full Name</label>\n\n    {{ input('text', 'fullName', user.fullName, {\n      id: 'fullName',\n      aria: {\n        invalid: user.hasErrors('fullName'),\n        errormessage: user.hasErrors('fullName') ? 'fullName-errors' : null,\n      },\n    }) }}\n\n    {% if user.hasErrors('fullName') %}\n      <ul id=\"fullName-errors\">\n        {% for error in user.getErrors('fullName') %}\n          <li>{{ error }}</li>\n        {% endfor %}\n      </ul>\n    {% endif %}\n\n    <button>Save</button>\n  </form>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Routing to Controller Actions in PHP\nDESCRIPTION: Demonstrates how to define a route that points to a controller action instead of a template. This allows for custom PHP processing before rendering a response.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/routing.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n'some/uri/pattern' => array('action' => 'action/path'),\n```\n\n----------------------------------------\n\nTITLE: Combining Global Caching with Custom Keys\nDESCRIPTION: Example of combining 'globally' parameter with a custom key based on the request path to cache per-page without including query string variables.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% cache globally using key craft.request.path %}\n```\n\n----------------------------------------\n\nTITLE: Matching Postal Codes with Twig Expression in Craft Commerce\nDESCRIPTION: This Twig expression checks if the first two characters of a postal code are '60' or '70'. It's used in the 'Postal Code Formula' address condition for shipping zones.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/shipping.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\npostalCode[0:2] == '60' or postalCode[0:2] == '70'\n```\n\n----------------------------------------\n\nTITLE: Setting Slug Word Separator in Craft CMS (PHP)\nDESCRIPTION: Configures the slugWordSeparator option to use an underscore as the separator between words when generating entry/category slugs in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_37\n\nLANGUAGE: php\nCODE:\n```\n'slugWordSeparator' => '_',\n```\n\n----------------------------------------\n\nTITLE: PHP Secrets Configuration\nDESCRIPTION: Example of storing sensitive configuration values in a PHP secrets file that returns an associative array.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/configure.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'SUPER_SECRET_KEY' => '...',\n];\n```\n\n----------------------------------------\n\nTITLE: Implementing Twig Comments\nDESCRIPTION: Demonstrates how to add comments in Twig templates that won't appear in the final HTML output, compared to HTML comments which remain visible in source.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<!-- This will be visible in the HTML source -->\n{# This won't! #}\n```\n\n----------------------------------------\n\nTITLE: Using First Parameter with includeHiResCss\nDESCRIPTION: Shows how to use the 'first' parameter to prioritize CSS inclusion before other CSS snippets in the output.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includehirescss.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% includeHiResCss myCss first %}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Specific Tax Rate by ID in Twig and PHP\nDESCRIPTION: Shows how to fetch a single tax rate by its ID using the TaxRates service in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{# Get tax rate with an ID of `123` #}\n{% set rate = craft.commerce\n  .getTaxRates()\n  .getTaxRateById(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Get tax zone with an ID of `123`\n$taxZones = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxRates()\n    ->getTaxRateById(123);\n```\n\n----------------------------------------\n\nTITLE: Configuring Token Parameters in PHP\nDESCRIPTION: Sets the query string parameter name for system tokens and SSL usage for tokenized URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\n'tokenParam' => 't',\n'useSslOnTokenizedUrls' => true,\n```\n\n----------------------------------------\n\nTITLE: Partial Payment Selection Form in Twig\nDESCRIPTION: Example form showing how to implement partial payment options with a dropdown selector for half or full payment amounts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/making-payments.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set halfAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance * 0.5,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n{% set fullAmount = craft.commerce\n  .paymentCurrencies\n  .convertCurrency(\n    cart.outstandingBalance,\n    cart.currency,\n    cart.paymentCurrency\n  )\n%}\n\n<select name=\"paymentAmount\">\n    <option value=\"{{ halfAmount|hash }}\">50%\n      ({{ halfAmount|commerceCurrency(cart.paymentCurrency) }})\n    </option>\n    <option value=\"{{ fullAmount|hash }}\">100%\n      ({{ fullAmount|commerceCurrency(cart.paymentCurrency) }})\n    </option>\n</select>\n```\n\n----------------------------------------\n\nTITLE: Filtering Compatible Subscription Plans in Twig\nDESCRIPTION: This snippet demonstrates how to check and display compatible subscription plans for switching. It retrieves the current plan, gateway, all plans for that gateway, and filters them based on compatibility. The resulting plans are then presented in a select dropdown.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentPlan = subscription.getPlan() %}\n{% set gateway = currentPlan.getGateway() %}\n{% set allPlans = craft.commerce.plans.getPlansByGatewayId(gateway.id) %}\n{% set switchablePlans = allPlans|filter((p) => p.canSwitchFrom(currentPlan)) %}\n\n<select name=\"planUid\">\n  {% for plan in switchablePlans %}\n    <option value=\"{{ plan.uid|hash }}\">{{ plan.name }}</option>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Element Actions in Craft CMS Plugin\nDESCRIPTION: Demonstrates how to register a custom element action type for entries using Craft's event system. This code shows the plugin initialization process that listens for the Element::EVENT_REGISTER_ACTIONS event and adds a custom action class to the available actions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-action-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\base\\Element;\nuse craft\\elements\\Entry;\nuse craft\\events\\RegisterElementActionsEvent;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Entry::class,\n            Element::EVENT_REGISTER_ACTIONS,\n            function(RegisterElementActionsEvent $event) {\n                $event->actions[] = MyAction::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Creating and Executing a Basic Element Query in PHP\nDESCRIPTION: This snippet shows how to create an entry query, set parameters, and execute it to fetch news entries in PHP. It creates a query for the 'news' section, orders by post date, limits to 10 results, and retrieves all matching entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/element-queries.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\Entry;\n\n// Create an entry query and set some parameters on it\n$entryQuery = Entry::find()\n    ->section('news')\n    ->orderBy('postDate DESC')\n    ->limit(10);\n\n// Execute the query and get the results\n$entries = $entryQuery->all();\n```\n\n----------------------------------------\n\nTITLE: Currency Formatting Filter Updates in Twig\nDESCRIPTION: Shows the changes in currency filter syntax between Craft 2 and 3, specifically regarding the stripZeroCents/stripZeros parameter placement.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\nOld:\n{{ num|currency('USD', true) }}\n{{ num|currency('USD', stripZeroCents = true) }}\n\nNew:\n{{ num|currency('USD', stripZeros = true) }}\n```\n\n----------------------------------------\n\nTITLE: Basic includeHiResCss Usage in Twig\nDESCRIPTION: Demonstrates how to define and include CSS styles for high-resolution screens using the includeHiResCss tag. The example shows setting a background image for a hero element with specific sizing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/includehirescss.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myCss %}\n.content img.hero {\n  background-image: url({{ heroImage.getUrl('hires') }});\n  background-size: 1000px;\n}\n{% endset %}\n\n{% includeHiResCss myCss %}\n```\n\n----------------------------------------\n\nTITLE: Omitting Script Name in URLs for Craft CMS (PHP)\nDESCRIPTION: Sets the omitScriptNameInUrls config option to true, which instructs Craft to omit the script filename (e.g. index.php) when generating URLs.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_33\n\nLANGUAGE: php\nCODE:\n```\n'omitScriptNameInUrls' => true,\n```\n\n----------------------------------------\n\nTITLE: Setting Cache Duration in Craft CMS (PHP)\nDESCRIPTION: Example of setting the cacheDuration configuration value. This controls how long Craft will store data caches using a PHP interval specification.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n'cacheDuration' => 'P1W',\n```\n\n----------------------------------------\n\nTITLE: Batch Inserting Rows in Craft CMS DbCommand PHP\nDESCRIPTION: Shows how to perform batch inserts of multiple rows at once using the insertAll() method in Craft's DbCommand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/database.md#2025-04-22_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$rows[] = array('apples');\n$rows[] = array('oranges');\n$rows[] = array('pears');\n\ncraft()->db->createCommand()->insertAll('fruit', array('name'), $rows);\n```\n\n----------------------------------------\n\nTITLE: Adding Donation to Cart Form Implementation - Twig\nDESCRIPTION: A Twig template form implementation for adding donations to the cart in Craft Commerce. The form includes necessary CSRF protection, donation amount input, and availability checking. The donation amount must be provided through the donationAmount option parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/donations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set donation = craft.commerce.donation %}\n{% if donation and donation.isAvailable %}\n<form method=\"post\" class=\"pt-2 pb-8 text-center\">\n  <input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n  {{ redirectInput('shop/cart') }}\n  {{ csrfInput() }}\n  <input type=\"hidden\" name=\"purchasableId\" value=\"{{ craft.commerce.donation.id }}\">\n  <input type=\"text\" name=\"options[donationAmount]\" value=\"\" placeholder=\"Donation\">\n  <input type=\"submit\" value=\"Donate Now\" />\n</form>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Required PHP Package Dependencies List for Craft Commerce\nDESCRIPTION: Lists the required PHP packages and their minimum versions that Craft Commerce depends on. These packages are automatically installed via Composer and may have their own additional requirements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/requirements.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- [craftcms/cms](https://github.com/craftcms/cms) ^3.7.25\n- [dompdf/dompdf](https://github.com/dompdf/dompdf) ^1.0.2 (recommends GD and IMagick)\n- [moneyphp/money](https://github.com/moneyphp/money) ^3.3.1\n- [ibericode/vat](https://github.com/ibericode/vat) ^1.1.2\n- [iio/libmergepdf](https://github.com/ibericode/vat) ^4.0\n```\n\n----------------------------------------\n\nTITLE: Registering a Custom Utility with Craft CMS\nDESCRIPTION: Code snippet showing how to register a custom utility class with Craft's Utilities service using event listeners. This registration makes the utility available in the control panel's Utilities section for users with appropriate permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/utilities.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\myplugin;\n\nuse craft\\base\\Plugin as BasePlugin;\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Utilities;\nuse yii\\base\\Event;\n\nclass Plugin extends BasePlugin\n{\n    public function init()\n    {\n        Event::on(\n            Utilities::class,\n            Utilities::EVENT_REGISTER_UTILITIES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyUtility::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Extending CraftVariable with Behaviors and Services in PHP\nDESCRIPTION: Example showing how to attach custom behaviors and services to the CraftVariable instance using event handlers. This allows adding new methods and properties to the craft variable in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/extending-twig.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\web\\twig\\variables\\CraftVariable;\nuse yii\\base\\Event;\nuse mynamespace\\myplugin\\behaviors\\MyBehavior;\nuse mynamespace\\myplugin\\services\\MyService;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        CraftVariable::class,\n        CraftVariable::EVENT_INIT,\n        function(Event $e) {\n            /** @var CraftVariable $variable */\n            $variable = $e->sender;\n\n            // Attach a behavior:\n            $variable->attachBehaviors([\n                MyBehavior::class,\n            ]);\n\n            // Attach a service:\n            $variable->set('serviceId', MyService::class);\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Fetching Related Elements via Relational Field in Twig\nDESCRIPTION: This snippet demonstrates how to access related elements through a relational field on an entry, retrieve them with .all(), and display them in a list. It represents the basic pattern for working with related elements in templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/relations.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch related elements by calling `.all()` on the relational field: #}\n{% set ingredients = entry.ingredients.all() %}\n\n{# Check if anything came back: #}\n{% if ingredients|length %}\n  <h3>Ingredients</h3>\n\n  <ul>\n    {# Loop over the results: #}\n    {% for ingredient in ingredients %}\n      <li>{{ ingredient.title }}</li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Outputting a Global Set Name in Twig\nDESCRIPTION: Demonstrates how to output a global set's name by simply referencing the GlobalSetModel object in a template. This example outputs the name of the 'companyInfo' global set inside an h3 element.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/globalsetmodel.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<h3>{{ companyInfo }}</h3>\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Permissions Table Documentation\nDESCRIPTION: Markdown table detailing all available permissions in Craft CMS, including their handles and hierarchical relationships. Shows core system permissions, content management permissions, and asset handling permissions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/users.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nPermission | Handle\n-|-\nAccess the site when the system is off | `accessSiteWhenSystemIsOff`\nAccess the control panel | `accessCp`\n↳&nbsp; Access the control panel when the system is off | `accessCpWhenSystemIsOff`\n↳&nbsp; Perform Craft and plugin updates | `performUpdates`\n↳&nbsp; Access _[plugin name]_ | `accessPlugin-[PluginHandle]`\nEdit users | `editUsers`\n↳&nbsp; Register users | `registerUsers`\n↳&nbsp; Assign permissions | `assignUserPermissions`\n↳&nbsp; Administrate users | `administrateUsers`\nDelete users | `deleteUsers`\nEdit _[locale name]_ | `editLocale:[LocaleID]`\nEdit entries | `editEntries:[SectionID]`\n↳&nbsp; Create entries | `createEntries:[SectionID]`\n↳&nbsp; Publish entries | `publishEntries:[SectionID]`\n↳&nbsp; Delete entries | `deleteEntries:[SectionID]`\n↳&nbsp; Edit other authors' entries | `editPeerEntries:[SectionID]`\n&nbsp;&nbsp;&nbsp; ↳&nbsp; Publish other authors' entries | `publishPeerEntries:[SectionID]`\n&nbsp;&nbsp;&nbsp; ↳&nbsp; Delete other authors' entries | `deletePeerEntries:[SectionID]`\n↳&nbsp; Edit other authors' drafts | `editPeerEntryDrafts:[SectionID]`\n&nbsp;&nbsp;&nbsp; ↳&nbsp; Publish other authors' drafts | `publishPeerEntryDrafts:[SectionID]`\n&nbsp;&nbsp;&nbsp; ↳&nbsp; Delete other authors' drafts | `deletePeerEntryDrafts:[SectionID]`\nEdit _[global set name]_ | `editGlobalSet:[GlobalSetID]`\nEdit _[category group name]_ | `editCategories:[CategoryGroupID]`\nView _[asset source name]_ | `viewAssetSource:[SourceID]`\n↳&nbsp; Upload files | `uploadToAssetSource:[SourceID]`\n↳&nbsp; Create subfolders | `createSubfoldersInAssetSource:[SourceID]`\n↳&nbsp; Remove files | `removeFromAssetSource:[SourceID]`\n```\n\n----------------------------------------\n\nTITLE: Working with Numbers in Twig\nDESCRIPTION: Shows how to define and use numeric values in Twig templates, including how to output numbers within template content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/twig.md#2025-04-22_snippet_19\n\nLANGUAGE: twig\nCODE:\n```\n{% set answer = 42 %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n<p>The answer is {{ answer }}</p>\n```\n\n----------------------------------------\n\nTITLE: Using Nitro Bridge Command for Local Network Sharing\nDESCRIPTION: Example showing how to use the nitro bridge command to make a local development site available on the network. The command prompts for IP selection and site choice, then creates a bridged connection on port 8000.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/local-sharing.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro bridge\nWhich IP address should we use for the bridge?\n  1. 192.168.7.237\n  2. 100.70.187.121\nEnter your selection: 1\nSelect a site:\n  1. tutorial.nitro\n  2. plugins-dev.nitro\nEnter your selection: 1\nbridge server listening on http://192.168.7.237:8000\n```\n\n----------------------------------------\n\nTITLE: Creating a Control Panel URL with cpUrl Function\nDESCRIPTION: Demonstrates the use of the cpUrl function to generate a control panel URL, automatically accounting for the cpTrigger setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/functions.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ cpUrl('settings') }}\">Visit control panel settings</a>\n```\n\n----------------------------------------\n\nTITLE: Element Action with Menu Option Implementation in PHP\nDESCRIPTION: Example of an Element Action class that removes all ingredients from selected elements using a menu option interface. Implements a destructive action without custom trigger HTML.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/element-actions.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RemoveAllIngredientsElementAction extends BaseElementAction\n{\n    public function getName()\n    {\n        return Craft::t('Remove all ingredients');\n    }\n\n    public function isDestructive()\n    {\n        return true;\n    }\n\n    public function performAction(ElementCriteriaModel $criteria)\n    {\n        // Remove all the ingredients from the selected elements\n        $elements = $criteria->find();\n\n        foreach ($elements as $element)\n        {\n            craft()->cocktailRecipes->removeAllIngredientsFromElement($element);\n        }\n\n        // Success!\n        $this->setMessage(Craft::t('Ingredients removed successfully.'));\n        return true;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Getter and Setter Methods for Automatic Parsing in PHP\nDESCRIPTION: This snippet shows how to implement getter and setter methods for automatic parsing of environment variables in Craft CMS. It allows for flexible access to both raw and parsed values of sensitive data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nprivate ?string $_secret;\n\npublic function getSecret(bool $parse = true): ?string\n{\n     if ($this->_secret) {\n        if ($parse) {\n            return \\craft\\helpers\\App::parseEnv($this->_secret);\n        }\n\n        return $this->_secret;\n    }\n\n    return null;\n}\n\npublic function setSecret(?string $secret): void\n{\n    $this->_secret = $secret;\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a CraftVariable Behavior for Template Access\nDESCRIPTION: Implementing a behavior class that attaches to the Craft variable, enabling template access to custom elements through a function like craft.products().\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\variables;\n\nuse mynamespace\\elements\\Product;\nuse mynamespace\\elements\\db\\ProductQuery;\nuse Craft;\nuse yii\\base\\Behavior;\n\n/**\n * The class name isn't important, but we've used something that describes\n * how it is applied, rather than what it does.\n * \n * You are only apt to need a single behavior, even if your plugin or module\n * provides multiple element types.\n */\nclass CraftVariableBehavior extends Behavior\n{\n    public function products(array $criteria = []): ProductQuery\n    {\n        // Create a query via your element type, and apply any passed criteria:\n        return Craft::configure(Product::find(), $criteria);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom ASCII Character Mappings in Craft CMS (PHP)\nDESCRIPTION: Example of defining customAsciiCharMappings for special character handling. This maps HTML decimal character codes to ASCII character equivalents.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n'customAsciiCharMappings' => array(\n    198 => 'AE',\n    216 => 'O',\n    197 => 'A',\n),\n```\n\n----------------------------------------\n\nTITLE: Iterating Through Selected Options\nDESCRIPTION: Examples of how to loop through selected options in a Multi-select field, accessing both labels and values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/multi-select-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% for option in entry.myFieldHandle %}\n  Label: {{ option.label }}\n  Value: {{ option }} or {{ option.value }}\n{% endfor %}\n```\n\nLANGUAGE: php\nCODE:\n```\nforeach ($entry->myFieldHandle as $option) {\n    // Label: $option->label\n    // Value: $option or $option->value\n}\n```\n\n----------------------------------------\n\nTITLE: Querying Table Fields with GraphQL\nDESCRIPTION: Example of querying table field data using GraphQL, showing field structure.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/table.md#2025-04-22_snippet_2\n\nLANGUAGE: graphql\nCODE:\n```\n{\n  # (...) query for relevant entry\n  myFieldHandle {\n    whiskey\n    description\n    proof\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Negation in Plain Text Field Queries in Twig\nDESCRIPTION: Demonstrates how to exclude entries based on a plain text field value using the 'not' keyword in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/plain-text.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set notCool = craft.entries()\n  .section('swatches')\n  .colorGroupCode('not BLUE')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Configuring Response Headers in Craft CMS\nDESCRIPTION: Setting custom headers for site responses using the Headers filter. Demonstrates how to configure headers for specific sites.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    // Attach the headers filter to the application:\n    'as headersFilter' => [\n        'class' => \\craft\\filters\\Headers::class,\n        'site' => ['siteA', 'siteB'],\n        'headers' => [\n            // Define pairs of headers:\n            'Permissions-Policy' => 'interest-cohort=()',\n            'X-Foo' => 'Bar',\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Removing a Single Key from an Array using withoutKey Filter in Twig\nDESCRIPTION: This snippet demonstrates how to use the 'withoutKey' filter to remove a single key from an array. It creates an array with three key-value pairs and then removes the 'baz' key.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_50\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = {\n  foo: 'foo',\n  bar: 'bar',\n  baz: 'baz'\n} %}\n{% set filtered = array|withoutKey('baz') %}\n{# Result: { 'foo': 'foo', 'bar: 'bar' } #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Queue Component in Craft CMS (PHP)\nDESCRIPTION: This snippet demonstrates how to configure a custom queue driver for Craft CMS. It shows setting up a Redis-based queue while maintaining control panel visibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/app.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n<?php\nreturn [\n    'components' => [\n        'queue' => [\n            'proxyQueue' => [\n                'class' => yii\\queue\\redis\\Queue::class,\n                'redis' => [\n                    'hostname' => App::env('REDIS_HOSTNAME') ?: 'localhost',\n                    'port' => 6379,\n                    'password' => App::env('REDIS_PASSWORD') ?: null,\n                ],\n            ],\n            'channel' => 'queue', // Queue channel key\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Complete Nitro Database Import Process\nDESCRIPTION: Shows the full process of importing a database backup using Nitro, including backup type detection, database name input, and import confirmation. This example demonstrates importing a PostgreSQL backup into a new database named 'tutorial'.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/importing.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro db import my-backup.sql\n  … detecting backup type ✓\nDetected postgres backup\nEnter the database name: tutorial\nPreparing import…\n  … importing database \"tutorial\" into \"postgres-13-5432.database.nitro\" ✓\nImported database \"tutorial\" took 2.00 seconds 💪...\n```\n\n----------------------------------------\n\nTITLE: Registering GraphQL Mutations in Craft CMS\nDESCRIPTION: Event handler that registers custom GraphQL mutations with Craft's GraphQL service. This code merges the custom mutations with existing ones during the RegisterGqlMutationsEvent.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/graphql.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nuse mynamespace\\gql\\resolvers\\mutations\\Widget as WidgetMutations;\nuse craft\\events\\RegisterGqlMutationsEvent;\nuse craft\\services\\Gql;\nuse GraphQL\\Type\\Definition\\Type;\nuse yii\\base\\Event;\n\nEvent::on(\n    Gql::class,\n    Gql::EVENT_REGISTER_GQL_MUTATIONS,\n    function(RegisterGqlMutationsEvent $event) {\n        $event->mutations = array_merge(\n            $event->mutations,\n            WidgetMutations::getMutations(),\n        );\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Single Administrative Area by ID (Twig and PHP)\nDESCRIPTION: Demonstrates fetching data for a specific state using its two-character code and parent country. Returns a Subdivision object with code, label, and postal code information.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/countries-states.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{# @var state CommerceGuys\\Addressing\\Subdivision\\Subdivision #}\n{% set state = craft.app.getAddresses().subdivisionRepository.get('OR', ['US']) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n/** @var CommerceGuys\\Addressing\\Subdivision\\Subdivision $state **/\n$state = Craft::$app->getAddresses()->subdivisionRepository->get('OR', ['US']);\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Search Query in Craft CMS Templates with Twig\nDESCRIPTION: Shows two approaches to implementing search in Craft CMS templates: passing a search query directly to the search parameter, and passing it with custom search term options. The query is retrieved from a request parameter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/searching.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.request.getParam('q') %}\n\n{# Pass the search query directly into the search param: #}\n{% set results = craft.entries({\n  search: query\n}) %}\n\n{# Or pass it along with some custom search term options: #}\n{% set results = craft.entries({\n  search: {\n    query: query,\n    subLeft: true,\n    subRight: true\n  }\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Registering Widget Type in Craft CMS Plugin\nDESCRIPTION: Example showing how to register a custom widget type with Craft's Dashboard service within a plugin's init() method using event handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/widget-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace;\n\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Dashboard;\nuse yii\\base\\Event;\n\nclass Plugin extends \\craft\\base\\Plugin\n{\n    public function init()\n    {\n        Event::on(\n            Dashboard::class,\n            Dashboard::EVENT_REGISTER_WIDGET_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyWidget::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Customizing JSON Indentation in Twig\nDESCRIPTION: Demonstrates how to customize the indentation when pretty-printing JSON field values.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/json.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<pre>{{ entry.myJsonField.getJson(true, '\\t') }}</pre>\n```\n\n----------------------------------------\n\nTITLE: Complex Relation Querying with Multiple Criteria\nDESCRIPTION: Demonstrates how to perform complex relation queries using multiple criteria and logical operators in Craft CMS Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set gin = craft.entries.section('ingredients').slug('gin').first() %}\n\n{% set cocktails = craft.entries.section('cocktails').relatedTo('and',\n    { sourceElement: currentUser, field: 'favoriteCocktails' },\n    { targetElement: gin, field: 'ingredients' }\n) %}\n```\n\n----------------------------------------\n\nTITLE: Canceling Subscriptions in Craft CMS Commerce\nDESCRIPTION: This Twig template creates a form for canceling a subscription. It assumes the subscription variable is set to an instance of craft\\commerce\\elements\\Subscription and posts to the commerce/subscriptions/cancel action.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/development/subscription-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n  {{ csrfInput() }}\n  {{ actionInput('commerce/subscriptions/cancel') }}\n  {{ hiddenInput('subscriptionUid', subscription.uid|hash) }}\n  {{ redirectInput('shop/services') }}\n\n  {% namespace subscription.getGateway().handle|commercePaymentFormNamespace %}\n    {{ subscription.plan.getGateway().getCancelSubscriptionFormHtml()|raw }}\n  {% endnamespace %}\n\n  <button>Unsubscribe</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Modifying User Sources in Craft CMS\nDESCRIPTION: Hook to modify the available sources for users in the control panel. Adds status-based sources when in index context.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_24\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyUserSources(&$sources, $context)\n{\n    if ($context == 'index') {\n        $sources[] = array('heading' => 'Statuses');\n        $statuses = craft()\n            ->elements\n            ->getElementType(ElementType::User)\n            ->getStatuses();\n\n        foreach ($statuses as $status => $label) {\n            $sources['status:'.$status] = array(\n                'label' => $label,\n                'criteria' => array('status' => $status)\n            );\n        }\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing Single Related User\nDESCRIPTION: Examples of accessing the first related user from a Users field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set rel = entry.myFieldHandle.one() %}\n{% if rel %}\n  <p><a href=\"{{ url('profiles/'~rel.username) }}\">{{ rel.name }}</a></p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$rel = $entry->myFieldHandle->one();\nif ($rel) {\n    // \\craft\\helpers\\UrlHelper::url('profiles/' . $rel->username)\n    // $rel->name\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Hierarchical Navigation with nav Tag in Twig\nDESCRIPTION: The nav tag helps create hierarchical navigation menus for entries in a Structure section or Category Group. It supports nested levels and conditional display of child items.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_9\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries().section('pages').all() %}\n\n<ul id=\"nav\">\n  {% nav entry in entries %}\n    <li>\n      <a href=\"{{ entry.url }}\">{{ entry.title }}</a>\n      {% ifchildren %}\n        <ul>\n          {% children %}\n        </ul>\n      {% endifchildren %}\n    </li>\n  {% endnav %}\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Fetching a Cart with jQuery Ajax\nDESCRIPTION: Example of retrieving cart data asynchronously using jQuery Ajax. Includes proper CSRF token handling and outputs the response to the console.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/orders-carts.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\n<script>\n$.ajax({\n  url: '',\n  data: {\n    '{{ craft.config.csrfTokenName|e('js') }}': '{{ craft.request.csrfToken|e('js') }}',\n    'action': 'commerce/cart/get-cart'\n  },\n  success: function(response) {\n    console.log(response);\n  },\n  dataType: 'json'\n});\n</script>\n```\n\n----------------------------------------\n\nTITLE: Updating Database Schema for Locale to Site Migration\nDESCRIPTION: Demonstrates how to handle the transition from locales in Craft 2 to sites in Craft 3 by dropping old locale foreign key columns and renaming new siteId columns.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_29\n\nLANGUAGE: php\nCODE:\n```\n// Drop the old locale FK column\n$this->dropColumn('{{%mytablename}}', 'oldName');\n\n// Rename the new siteId FK column\nMigrationHelper::renameColumn('{{%mytablename}}', 'oldName__siteId', 'newName', $this);\n```\n\n----------------------------------------\n\nTITLE: Implementing Field Preview HTML Generation\nDESCRIPTION: Shows how to implement getPreviewHtml() to generate custom preview displays for field values, handling different display formats based on field configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function getPreviewHtml(mixed $value, ElementInterface $element): string\n{\n    // Display securities amounts + symbols, verbatim:\n    if ($this->useSecurities) {\n        return $value->amount . ' ' . Html::tag('code', $value->symbol);\n    }\n\n    // Display a flag for the currency and a formatted value:\n    return MyCurrencyHelper::currencyToFlagSvg($value->symbol) . MoneyHelper::toString($value->amount);\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Cart Email Address in Twig\nDESCRIPTION: This snippet demonstrates how to create a form for updating the email address of a cart in Craft CMS Commerce. It includes error handling and value persistence.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/update-cart-customer.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"post\">\n<input type=\"hidden\" name=\"action\" value=\"commerce/cart/update-cart\">\n{{ redirectInput('shop/cart') }}\n{{ csrfInput() }}\n\n<input type=\"text\"\n       name=\"email\"\n       class=\"{% if cart.getFirstError('email') %}has-error{% endif %}\"\n       value=\"{{ cart.email }}\"\n       placeholder=\"{{ \"your@email.com\"|t }}\">\n\n<input type=\"submit\" value=\"Update Cart Email\"/>\n<form>\n```\n\n----------------------------------------\n\nTITLE: Registering Craft CMS Utility via Plugin in PHP\nDESCRIPTION: Example showing how to register a custom utility with Craft's Utilities service through a plugin's init() method using event handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/utilities.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace mynamespace\\myplugin;\n\nuse craft\\base\\Plugin as BasePlugin;\nuse craft\\events\\RegisterComponentTypesEvent;\nuse craft\\services\\Utilities;\nuse yii\\base\\Event;\n\nclass Plugin extends BasePlugin\n{\n    public function init()\n    {\n        Event::on(\n            Utilities::class,\n            Utilities::EVENT_REGISTER_UTILITY_TYPES,\n            function(RegisterComponentTypesEvent $event) {\n                $event->types[] = MyUtility::class;\n            }\n        );\n\n        // ...\n    }\n\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Checking Multiple Values in a Single Case Block with Craft CMS Switch Statements\nDESCRIPTION: Demonstrates how to check for multiple values in a single case block using 'or' operators in a switch statement. This example checks for different HTML tag types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/tags.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n{% case \"h2\" or \"h3\" or \"p\" %}\n  {# output an <h2>, <h3>, or <p> tag, depending on the block type #}\n  {{ tag(matrixBlock.type, {\n      text: matrixBlock.text\n  }) }}\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin Components in Craft CMS 4 via config/app.php\nDESCRIPTION: This snippet shows how to customize a plugin's component configuration from the project's config/app.php file, allowing for easy overrides without modifying the plugin code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'plugins' => [\n            'pluginConfigs' => [\n                'my-plugin' => [\n                    'components' => [\n                        'myComponent' => [\n                            'myProperty' => 'foo',\n                        ],\n                    ],\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Registering Custom Site Template Root in Craft CMS\nDESCRIPTION: This code snippet shows how to register a custom site template root using the EVENT_REGISTER_SITE_TEMPLATE_ROOTS event. It creates a new template root '_utils' pointing to a 'template-utils' directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/template-roots.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\events\\RegisterTemplateRootsEvent;\nuse craft\\web\\View;\nuse yii\\base\\Event;\n\npublic function init()\n{\n    parent::init();\n\n    Event::on(\n        View::class,\n        View::EVENT_REGISTER_SITE_TEMPLATE_ROOTS,\n        function(RegisterTemplateRootsEvent $event) {\n            $event->roots['_utils'] = __DIR__ . '/template-utils';\n        }\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Address Validation Rules in PHP\nDESCRIPTION: Example of adding required field validation rules for firstName and lastName fields to the Address model using an event listener in a Craft CMS plugin/module init() method.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/addresses.md#2025-04-22_snippet_10\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\commerce\\models\\Address;\nuse craft\\base\\Model;\nuse craft\\events\\DefineRulesEvent;\n\nEvent::on(\n    Address::class,\n    Model::EVENT_DEFINE_RULES,\n    function(DefineRulesEvent $event) {\n        $rules = $event->rules;\n        $rules[] = [['firstName', 'lastName'], 'required'];\n        $event->rules = $rules;\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Search Results Template with Auto-escaping\nDESCRIPTION: Demonstrates building a search results page with proper XSS protection through auto-escaping, including handling of query parameters and entry listing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/twig-primer.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = craft.app.request.getQueryParam('q') %}\n\n{% set entries = craft.entries()\n  .section('blog')\n  .search(query)\n  .all() %}\n\n{% if entries %}\n  <h3>Search Results</h3>\n  <ul>\n    {% for entry in entries %}\n      <li>{{ entry.getLink() }}</li>\n    {% endfor %}\n  </ul>\n{% else %}\n  <p>Sorry, no results for <strong>{{ query }}</strong> were found.</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Implementing a Basic UI Field Layout Element in PHP\nDESCRIPTION: Shows the minimum implementation of a UI field layout element class, extending BaseUiElement and implementing required methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-layout-element-types.md#2025-04-22_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnamespace myplugin\\fieldlayoutelements;\n\nuse Craft;\nuse craft\\base\\ElementInterface;\nuse craft\\fieldlayoutelements\\BaseUiElement;\nuse craft\\helpers\\Html;\n\nclass SynchronizationStatus extends BaseUiElement\n{\n    public function selectorLabel(): string\n    {\n        return Craft::t('site', 'Synchronization Status');\n    }\n\n    public function formHtml(?ElementInterface $element = null, bool $static = false): ?string\n    {\n        return Html::tag('div', 'Hello, world!');\n    }\n\n    protected function selectorIcon(): ?string\n    {\n        return 'satellite-dish';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Next/Previous Entry Links in Twig\nDESCRIPTION: Uses getNext() and getPrev() methods to create navigation links between entries in a section, with custom sorting parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set params = {\n  section: 'cocktails',\n  order:   'title'\n} %}\n\n{% set prevCocktail = entry.getPrev(params) %}\n{% set nextCocktail = entry.getNext(params) %}\n\n{% if prevCocktail %}\n  <p>Previous: <a href=\"{{ prevCocktail.url }}\">{{ prevCocktail.title }}</a></p>\n{% endif %}\n\n{% if nextCocktail %}\n  <p>Next: <a href=\"{{ nextCocktail.url }}\">{{ nextCocktail.title }}</a></p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Search Form in Twig for Craft CMS\nDESCRIPTION: This snippet shows how to create a simple HTML search form using Twig syntax in Craft CMS. The form posts to a 'search/results' URL and includes a search input field and a submit button.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/search-form.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<form action=\"{{ url('search/results') }}\">\n  <input type=\"search\" name=\"q\" placeholder=\"Search\">\n  <input type=\"submit\" value=\"Go\">\n</form>\n```\n\n----------------------------------------\n\nTITLE: Unordered List Generation in Twig\nDESCRIPTION: Demonstrates the ul() function for creating HTML unordered lists from arrays. Shows basic usage with news entries and their titles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_23\n\nLANGUAGE: twig\nCODE:\n```\n{% set titles = craft.entries()\n  .section('news')\n  .select('title')\n  .column() %}\n{{ ul(titles) }}\n```\n\n----------------------------------------\n\nTITLE: Preserving Existing Assets While Adding New Ones in Twig\nDESCRIPTION: This snippet demonstrates how to maintain existing assets in an Assets field while allowing new uploads. It iterates over existing asset IDs and includes them as hidden inputs, followed by a file input for new uploads.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{# Provide each existing asset ID in the array of field data #}\n{% for relatedAssetId in entry.myFieldHandle.ids() %}\n  {{ input(\n    'hidden',\n    'fields[myFieldHandle][]',\n    relatedAssetId\n  ) }}\n{% endfor %}\n\n{{ input('file', 'fields[myFieldHandle][]', options={\n  multiple: true,\n}) }}\n```\n\n----------------------------------------\n\nTITLE: Setting Cache Duration in Craft CMS Templates\nDESCRIPTION: Example showing how to specify cache expiration time using the 'for' parameter with a time unit.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/cache.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% cache for 3 weeks %}\n```\n\n----------------------------------------\n\nTITLE: Implementing registerCpRoutes Hook in PHP for Craft CMS 2.x\nDESCRIPTION: Registers custom control panel routes. Returns an array mapping URL patterns to template paths or controller actions for the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\npublic function registerCpRoutes()\n{\n    return array(\n        'cocktails/new'               => 'cocktails/_edit',\n        'cocktails/(?P<widgetId>\\d+)' => array('action' => 'cocktails/editCocktail'),\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Translating Messages with Parameters in PHP\nDESCRIPTION: Shows how to use Craft::t() function with parameters in PHP for dynamic message translation in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_9\n\nLANGUAGE: php\nCODE:\n```\necho Craft::t('site', 'Welcome back, {name}', [\n    'name' => Craft::$app->user->identity->friendlyName,\n]);\n```\n\n----------------------------------------\n\nTITLE: Displaying Product Prices with Promotional Pricing in Twig\nDESCRIPTION: Demonstrates how to display product prices, including promotional pricing, in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/products-variants.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% for variant in product.variants %}\n  <label class=\"option\">\n    <input name=\"purchasableId\" value=\"{{ variant.id }}\" type=\"radio\">\n    <span class=\"label\">{{ purchasable.title }}</label>\n    <span class=\"price {{ variant.onPromotion ? 'price--has-promo' : null }}\">\n      <span class=\"price__base\">{{ variant.price|commerceCurrency }}</span>\n\n      {% if variant.onPromotion %}\n        <span class=\"price__promotional\">{{ variant.promotionalPrice|commerceCurrency }}</span>\n      {% endif %}\n    </span>\n  </label>\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Defining Widget Settings with defineSettings Method in PHP\nDESCRIPTION: Implementation of the defineSettings() method to specify configurable settings for a widget. This example defines a 'limit' setting of type Number with a minimum value of 0.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/widgets.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipes_RecentCocktailsWidget extends BaseWidget\n{\n    protected function defineSettings()\n    {\n        return array(\n           'limit' => array(AttributeType::Number, 'min' => 0),\n        );\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Deferred Initialization in Craft CMS Module\nDESCRIPTION: This PHP snippet demonstrates how to use Craft's onInit method to defer module initialization tasks until the application is fully initialized, avoiding potential race conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/module-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nnamespace foo;\n\nuse Craft;\n\nclass Module extends \\yii\\base\\Module\n{\n    public function init()\n    {\n        // ...\n\n        // Defer most setup tasks until Craft is fully initialized:\n        Craft::$app->onInit(function() {\n            // ...\n        });\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Craft CMS Route Configuration\nDESCRIPTION: Comparison of route configurations between Craft 3 and Craft 4 for element editing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3\n'assets/edit/<assetId:\\d+><filename:(?:-[^\\/]*)?>' => 'assets/edit-asset',\n'categories/<groupHandle:{handle}>/new' => 'categories/edit-category',\n'entries/<section:{handle}>/<entryId:\\d+><slug:(?:-[^\\/]*)?>' => 'entries/edit-entry',\n\n// Craft 4\n'assets/edit/<elementId:\\d+><filename:(?:-[^\\/]*)?>' => 'elements/edit',\n'categories/<groupHandle:{handle}>/<elementId:\\d+><slug:(?:-[^\\/]*)?>' => 'elements/edit',\n'entries/<section:{handle}>/<elementId:\\d+><slug:(?:-[^\\/]*)?>' => 'elements/edit',\n```\n\n----------------------------------------\n\nTITLE: Checking Permissions for a Specific User\nDESCRIPTION: Demonstrates how to check if a specific user has a permission using the can() method on a User element. This is useful when you need to verify permissions for users other than the current one.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/user-permissions.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n/** @var \\craft\\elements\\User $user */\nif ($user->can('stayUpLate')) {\n    // ...\n}\n```\n\n----------------------------------------\n\nTITLE: Caching Template Output in Twig\nDESCRIPTION: The cache tag is used to cache a portion of a template to improve performance. It supports various parameters for fine-tuning caching behavior, including global caching, custom keys, and expiration settings.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% cache %}\n  {% for block in entry.myMatrixField.all() %}\n    <p>{{ block.text }}</p>\n  {% endfor %}\n{% endcache %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache globally %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache using key \"page-header\" %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache for 3 weeks %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache until entry.eventDate %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache if craft.app.request.isMobileBrowser() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% cache unless currentUser %}\n```\n\n----------------------------------------\n\nTITLE: Setting Default Table Attributes for Craft CMS Element Sources\nDESCRIPTION: This method defines which columns should be visible by default for specific element sources. It accepts a source parameter and returns an array of attribute keys.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_28\n\nLANGUAGE: php\nCODE:\n```\nprotected static function defineDefaultTableAttributes(string $source): array\n{\n    return ['title', 'price', 'currency'];\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Administrative Areas Dropdown in Twig\nDESCRIPTION: Demonstrates how to generate a dropdown of administrative areas grouped by country using the subdivision repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/addresses.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set subdivisionRepo = craft.app.getAddresses().getSubdivisionRepository() %}\n{% set countriesWithSubdivisions = countries | filter(c => subdivisionRepo.getAll([c.countryCode]) | length) %}\n\n<select name=\"administrativeArea\">\n  {% for country in countriesWithSubdivisions %}\n    {% set administrativeAreas = subdivisionRepo.getAll([country.countryCode]) %}\n\n    <optgroup label=\"{{ country.name }}\">\n      {% for a in administrativeAreas %}\n        <option value=\"{{ a.code }}\">{{ a.name }}</option>\n      {% endfor %}\n    </optgroup>\n  {% endfor %}\n</select>\n```\n\n----------------------------------------\n\nTITLE: Working with Lightswitch Field Data in Twig and PHP\nDESCRIPTION: Shows how to access and use Lightswitch field data in templates using Twig and PHP. The code checks the value of the Lightswitch field and conditionally displays content based on its state.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/lightswitch-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myFieldHandle %}\n  <p>I'm on!</p>\n{% else %}\n  <p>I'm off.</p>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle) {\n    // I'm on!\n} else {\n    // I'm off.\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Control Panel Page Template in Twig\nDESCRIPTION: Demonstrates the minimum required template code for creating a new control panel page. Shows how to extend the base CP layout and set a title and content.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/cp-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_layouts/cp.html\" %}\n{% set title = \"Page Title\"|t('plugin-handle') %}\n\n{% block content %}\n  <p>Page content goes here</p>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Adding Copy Reference Tag Action to Element Index in PHP\nDESCRIPTION: Code to add a \"Copy reference tag\" action to custom element index pages. This makes it easier for users to copy reference tags for elements.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_36\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\elements\\actions\\CopyReferenceTag;\n\n// ...\n\nprotected static function defineActions(string $source = null): array\n{\n    return [\n        [\n            'type' => CopyReferenceTag::class,\n            'elementType' => static::class,\n        ],\n        // ...\n    ];\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a HTML Form with Action Parameter in Twig\nDESCRIPTION: Shows how to create an HTML form that submits to a plugin controller action using the actionInput() helper function to generate the necessary hidden input field.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/controllers.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<form method=\"POST\">\n  {{ csrfInput() }}\n  {{ actionInput('my-plugin/widgets/save') }}\n\n  {# ... #}\n\n  <button>Save</button>\n</form>\n```\n\n----------------------------------------\n\nTITLE: Updating Project Config with UI Relationships Using UIDs\nDESCRIPTION: Shows how to store relationships between components using UIDs in project config instead of database IDs. This example tracks a product type's site relationship.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/project-config.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\helpers\\Db;\n\n$siteUid = Db::uidById('{{%sites}}', $productType->siteId);\n\n// ...\n\nCraft::$app->getProjectConfig()->set($path, [\n    'name' => $productType->name,\n    'site' => $siteUid,\n    // ...\n]);\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Control Panel Page Template in Twig\nDESCRIPTION: This snippet demonstrates the minimum required structure for a control panel page template in Craft CMS. It extends the base CP layout and sets a title and content block.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/cp-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% extends \"_layouts/cp.twig\" %}\n{% set title = \"Page Title\"|t('plugin-handle') %}\n\n{% block content %}\n  <p>Page content goes here</p>\n{% endblock %}\n```\n\n----------------------------------------\n\nTITLE: Basic Color Field Usage in Twig and PHP\nDESCRIPTION: Demonstrates basic usage of color fields including direct output and hex value retrieval. Shows equivalent operations in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/color.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% if entry.myColorField %}\n  <style type=\"text/css\">\n    .content a {\n      {# Directly outputting the value... #}\n      color: {{ entry.myColorField }};\n    }\n    .content b {\n      {# ...is equivalent to: #}\n      color: {{ entry.myColorField.getHex() }};\n    }\n  </style>\n{% endif %}\n```\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myColorField) {\n    echo $entry->myColorField;\n    // …is equivalent to…\n    echo $entry->myColorField->getHex();\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Named Transforms using getUrl and dimensions methods\nDESCRIPTION: This snippet demonstrates how to apply a named transform ('thumb') to an image asset using getUrl(), getWidth(), and getHeight() methods to generate the transformed image URL and dimensions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/image-transforms.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<img src=\"{{ asset.getUrl('thumb') }}\"\n  width=\"{{ asset.getWidth('thumb') }}\"\n  height=\"{{ asset.getHeight('thumb') }}\">\n```\n\n----------------------------------------\n\nTITLE: Symlinking Commerce Example Templates to Project (Bash)\nDESCRIPTION: This command creates a symbolic link to the Commerce example templates in the project's templates folder. This approach ensures the templates are always up-to-date during development, but should not be used in production.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/example-templates.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nln -s vendor/craftcms/commerce/example-templates/dist/shop ./templates/shop\n```\n\n----------------------------------------\n\nTITLE: Accessing Guzzle Configuration in Craft CMS\nDESCRIPTION: Demonstrates how to access Guzzle configuration and HTTP proxy settings in Craft CMS, useful when working with third-party packages that use their own HTTP clients.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/topics.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Guzzle config object:\n$guzzleConfig = Craft::$app->getConfig()->getConfigFromFile('guzzle');\n\n// HTTP proxy:\n$proxyConfig = Craft::$app->getConfig()->getGeneral()->httpProxy;\n```\n\n----------------------------------------\n\nTITLE: Getting Localized Address Field Labels\nDESCRIPTION: Example of using the attributeLabel() method to retrieve human-friendly, localized labels for address fields based on the address's country code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{{ myAddress.attributeLabel('administrativeArea') }} {# State #}\n{{ myAddress.attributeLabel('locality') }} {# City #}\n{{ myAddress.attributeLabel('dependentLocality') }} {# Suburb #}\n{{ myAddress.attributeLabel('postalCode') }} {# Zip Code #}\n```\n\n----------------------------------------\n\nTITLE: Configuring Composer Path Repository for Plugin Development\nDESCRIPTION: Shows how to modify a Craft project's composer.json file to use a path repository for local plugin development, allowing Composer to symlink the plugin into the vendor directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"minimum-stability\": \"dev\",\n  \"prefer-stable\": true,\n  \"repositories\": [\n    {\n      \"type\": \"path\",\n      \"url\": \"../my-plugin\"\n    }\n  ]\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Subscription Queries in Twig and PHP\nDESCRIPTION: Demonstrates how to create a new subscription query in both Twig templates and PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/dev/element-queries/subscription-queries.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Create a new subscription query #}\n{% set mySubscriptionQuery = craft.subscriptions() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Create a new subscription query\n$mySubscriptionQuery = \\craft\\commerce\\elements\\Subscription::find();\n```\n\n----------------------------------------\n\nTITLE: Basic Craft CLI Command Output Example\nDESCRIPTION: Example output of running the base 'php craft' command without arguments, showing the available command categories and basic usage instructions. Demonstrates the structure of CLI help output including database, cache, and other command groups.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/cli.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ php craft\n\nThis is Yii version 2.0.36.\n\nThe following commands are available:\n\n- db                                    Performs database operations.\n    db/backup                           Creates a new database backup.\n    db/convert-charset                  Converts tables' character sets and collations. (MySQL only)\n    db/restore                          Restores a database backup.\n\n- cache                                 Allows you to flush cache.\n    cache/flush                         Flushes given cache components.\n    cache/flush-all                     Flushes all caches registered in the system.\n    cache/flush-schema                  Clears DB schema cache for a given connection\n                                        component.\n    cache/index (default)               Lists the caches that can be flushed.\n\n...\n\nTo see the help of each command, enter:\n\n  craft help <command-name>\n```\n\n----------------------------------------\n\nTITLE: Forcing Project Config Apply in Craft CMS via CLI\nDESCRIPTION: Command to force apply all Project Config changes, potentially overriding database values, using Craft's CLI tool.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/project-config.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nphp craft project-config/apply --force\n```\n\n----------------------------------------\n\nTITLE: Creating Load Cart URLs\nDESCRIPTION: Code examples in both Twig and PHP for generating URLs to load existing carts.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/orders-carts.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set loadCartUrl = actionUrl(\n  'commerce/cart/load-cart',\n  { number: cart.number }\n) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$loadCartUrl = craft\\helpers\\UrlHelper::actionUrl(\n    'commerce/cart/load-cart',\n    ['number' => $cart->number]\n);\n```\n\n----------------------------------------\n\nTITLE: Setting CRAFT_CP in PHP to Force Control Panel Request\nDESCRIPTION: Defines the CRAFT_CP constant to explicitly tell Craft that the current request should be treated as a control panel request, overriding the automatic detection.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/bootstrap.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft that this is a control panel request\ndefine('CRAFT_CP', true);\n```\n\n----------------------------------------\n\nTITLE: Implementing GraphQL Argument Handler in PHP\nDESCRIPTION: Creates a custom argument handler for processing widget relations. Extends RelationArgumentHandler to handle the 'relatedToWidgets' argument.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_26\n\nLANGUAGE: php\nCODE:\n```\nnamespace mynamespace\\gql\\argumenthandlers;\n\nuse mynamespace\\elements\\Widget;\nuse craft\\gql\\base\\RelationArgumentHandler;\n\nclass RelatedWidgets extends RelationArgumentHandler\n{\n    protected $argumentName = 'relatedToWidgets';\n\n    protected function handleArgument($argumentValue)\n    {\n        $argumentValue = parent::handleArgument($argumentValue);\n        return $this->getIds(Widget::class, $argumentValue);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Components in Craft CMS 3/4 using setComponents()\nDESCRIPTION: This snippet shows how to define plugin components using the setComponents() method in the init() function, which is applicable to both Craft 3 and 4.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n// Craft 3/4 `setComponents()`\npublic function init(): void\n{\n    // …\n    $this->setComponents([\n        'myComponent' => MyComponent::class\n    ]);\n}\n```\n\n----------------------------------------\n\nTITLE: JSON Response Structure for Failed POST Requests\nDESCRIPTION: This snippet illustrates the structure of a JSON response for a failed POST request, including error messages, model data, and the model name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/development/forms.md#2025-04-22_snippet_12\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"errors\": {\n    \"email\": \"...\",\n    /* ... */\n  },\n  \"modelName\": \"user\",\n  \"user\": {\n    \"email\": \"@craftcms\",\n    /* ... */\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Eager-Loading Image Transform Indexes in Twig\nDESCRIPTION: This example demonstrates how to use the 'withTransforms' parameter to eager-load image transform indexes, optimizing performance when applying transforms to multiple assets.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/eager-loading-elements.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set assets = entry.assetsField\n  .withTransforms([\n    'heroImage',\n    { width: 100, height: 100 }\n  ])\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Handling Different Link Types with Switch Statement\nDESCRIPTION: Demonstrates how to conditionally handle different link types using a Twig switch statement based on the type property.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% switch entry.myLinkFieldHandle.type %}\n  {% case 'phone' %}\n    <span class=\"icon icon-phone\"></span> {{ entry.myLinkFieldHandle.label }}\n  {% case 'email' %}\n    <span class=\"icon icon-email\"></span> {{ entry.myLinkFieldHandle.link }}\n  {% default %}\n    {{ entry.myLinkFieldHandle.link }}\n{% endswitch %}\n```\n\n----------------------------------------\n\nTITLE: Changed Service Methods in Commerce 4\nDESCRIPTION: Some service methods have been renamed or had their arguments changed in Commerce 4. These changes affect how shipping methods are retrieved and line items are created or resolved.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nShippingMethods::getAvailableShippingMethods()\nLineItems::createLineItem()\nLineItems::resolveLineItem()\nVariants::getAllVariantsByProductId()\n```\n\n----------------------------------------\n\nTITLE: Redirecting Request in Craft CMS Controller Action\nDESCRIPTION: Examples of redirecting requests in Craft CMS controller actions using redirect and redirectToPostedUrl methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/controllers.md#2025-04-22_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nuse yii\\web\\Response;\n\npublic function actionFoo(): Response\n{\n    return $this->redirect('bar');\n}\n\npublic function actionBar(): Response\n{\n    // Redirect the request based on a 'redirect' param\n    return $this->redirectToPostedUrl();\n}\n\npublic function actionBaz(): Response\n{\n    // ...\n\n    // Redirect the request based on a 'redirect' param,\n    // which can contain entry attribute tokens, such as {id}\n    return $this->redirectToPostedUrl($entry);\n}\n```\n\n----------------------------------------\n\nTITLE: Removing and Re-requiring a Plugin Package in Craft CMS\nDESCRIPTION: Commands for completely removing and re-requiring a plugin package in a Craft project, which may be necessary when making changes to a plugin's composer.json file during development.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-guide.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n# go to the project directory\ncd /path/to/my-project\n\n# remove the plugin package\ncomposer remove package/name\n\n# re-require the plugin package\ncomposer require package/name\n```\n\n----------------------------------------\n\nTITLE: Localizing Country Names in Twig\nDESCRIPTION: Demonstrates how to fetch and display localized country names using the address repository and current site locale in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/country.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set repo = craft.app.addresses.getCountryRepository() %}\n{% set country = repo.get(entry.country, currentSite.locale) %}\n\n{{ country.name }}\n{# -> In a site set to use US English (en-US): \"United States\" #}\n{# -> In a site set to use Swiss French (fr-CH): \"États-Unis\" #}\n```\n\n----------------------------------------\n\nTITLE: Updating All Craft CMS Plugins Including Commerce via Terminal\nDESCRIPTION: This command updates Craft CMS core and all plugins, including Commerce. It applies all available updates at once and should be run from the Craft project directory in the terminal.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/updating.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update all\n```\n\n----------------------------------------\n\nTITLE: Creating and Using a Macro for Navigation Items in Twig\nDESCRIPTION: Defines a macro for generating navigation items and demonstrates its usage in a navigation menu.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_30\n\nLANGUAGE: twig\nCODE:\n```\n{% macro navItem(label, path) %}\n  <li class=\"nav-item\"><a href=\"{{ url(path) }}\">{{ label }}</a></li>\n{% endmacro %}\n\n<nav class=\"global-nav\">\n  <ul>\n    {{ _self.navItem('About', 'about') }}\n    {{ _self.navItem('Blog', 'blog') }}\n    {{ _self.navItem('Contact', 'contact') }}\n  </ul>\n</nav>\n```\n\n----------------------------------------\n\nTITLE: Viewing Nitro Context Configuration\nDESCRIPTION: Shows the machine's configuration including PHP version, mounts, databases, and sites.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n$ nitro context\nMachine: nitro-dev\n------\nphp: \"7.4\"\nmounts:\n- source: ~/sites/demo-site\n  dest: /home/ubuntu/sites/demo-site\ndatabases:\n- engine: mysql\n  version: \"5.7\"\n  port: \"3306\"\n- engine: postgres\n  version: \"12\"\n  port: \"5432\"\nsites:\n- hostname: demo-site\n  webroot: /home/ubuntu/sites/demo-site/web\n------\n```\n\n----------------------------------------\n\nTITLE: Manual Migration File Naming Pattern in Craft CMS\nDESCRIPTION: This snippet demonstrates the naming pattern for manually created migration files in Craft CMS. It includes placeholders for date, time, plugin handle, and migration description.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/migrations.md#2025-04-22_snippet_2\n\nLANGUAGE: text\nCODE:\n```\nmYYMMDD_HHmmSS_pluginHandle_migrationDesc\n```\n\n----------------------------------------\n\nTITLE: Handling Project Config Changes on Plugin Uninstallation in Craft CMS\nDESCRIPTION: Shows how to safely make project config changes when a plugin is being uninstalled, ensuring changes aren't duplicated.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/migrations.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic function safeUp()\n{\n    // ...\n}\n\npublic function safeDown()\n{\n    // ...\n\n    // Don't make the same config changes twice\n    if (Craft::$app->projectConfig->get('plugins.my-plugin-handle', true) !== null) {\n        // Make the config changes here...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Filtering Arrays with filter Filter\nDESCRIPTION: Filters array elements using empty value removal or custom arrow function conditions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/dev/filters.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set array = ['foo', '', 'bar', '', 'baz'] %}\n{% set filteredArray = array|filter %}\n{# Result: ['foo', 'bar', 'baz'] #}\n\n{% set array = ['foo', 'bar', 'baz'] %}\n{% set filteredArray = array|filter(v => v[0] == 'b') %}\n{# Result: ['bar', 'baz'] #}\n```\n\n----------------------------------------\n\nTITLE: Defining CRAFT_BASE_PATH in PHP\nDESCRIPTION: Sets the base directory path for Craft CMS to look for config, templates, and other directories. This example sets it to two levels up from the current directory.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_15\n\nLANGUAGE: php\nCODE:\n```\n// Tell Craft to look for config/, templates/, etc., two levels up from here\ndefine('CRAFT_BASE_PATH', dirname(__DIR__, 2));\n```\n\n----------------------------------------\n\nTITLE: Enabling Titles for Custom Elements in Craft CMS\nDESCRIPTION: Adds the hasTitles method to enable title support for custom elements. When combined with hasContent, this allows elements to have user-defined titles.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\npublic static function hasTitles(): bool\n{\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Eager-Loaded Elements on Custom Element Class in PHP\nDESCRIPTION: Implementation of setEagerLoadedElements() method to assign eager-loaded elements to specific attributes. This allows custom handling of relationships loaded through eager-loading.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/element-types.md#2025-04-22_snippet_34\n\nLANGUAGE: php\nCODE:\n```\npublic function setEagerLoadedElements(string $handle, array $elements, EagerLoadPlan $plan): void\n{\n    // The handle can be anything, so long as it matches what is used in `eagerLoadingMap()`:\n    if ($handle === 'vendor') {\n        $vendor = $elements[0] ?? null;\n        $this->setVendor($vendor);\n    } else {\n        parent::setEagerLoadedElements($handle, $elements, $plan);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Displaying Folder Structure for GraphQL Extensions in Craft CMS\nDESCRIPTION: A treeview representation of the recommended folder structure for organizing GraphQL-related files when adding a custom 'Widget' element to the GraphQL API. The structure follows Craft's own organization pattern with directories for arguments, directives, interfaces, mutations, queries, resolvers, and types.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/graphql.md#2025-04-22_snippet_0\n\nLANGUAGE: treeview\nCODE:\n```\nsrc/gql/\n├── arguments/\n│   └── elements/\n│       └── Widget.php\n├── directives/\n│   └── BarTheFoo.php\n├── interfaces/\n│   └── elements/\n│       └── Widget.php\n├── mutations/\n│   └── Widget.php\n├── queries/\n│   └── Widget.php\n├── resolvers/\n│   └── elements/\n│       └── Widget.php\n│   └── mutations/\n│       └── Widget.php\n└── types/\n    ├── elements/\n    │    └── Widget.php\n    ├── generators/\n    │   └── WidgetType.php\n    └── input/\n        └── Widget.php\n```\n\n----------------------------------------\n\nTITLE: Filtering Related Users by Group\nDESCRIPTION: Examples of filtering related users by their group assignment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/users.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedUsers = entry.myFieldHandle\n    .group('authors')\n    .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$relatedUsers = $entry->myFieldHandle\n    ->group('authors')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Creating a Simple Textarea Field Input Template in Twig\nDESCRIPTION: A basic Twig template that renders a textarea field with the field name and value passed from the field type class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/field-types.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n<textarea name=\"{{ name }}\">{{ value }}</textarea>\n```\n\n----------------------------------------\n\nTITLE: Modifying Sale Detail View in Twig\nDESCRIPTION: This hook allows modifications before the template blocks in the sale detail view. HTML is not allowed in this hook.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_12\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.sales.edit\" %}\n```\n\n----------------------------------------\n\nTITLE: Setting Eager Loaded Elements in PHP\nDESCRIPTION: Implementation of setEagerLoadedElements() method to handle storage of eager-loaded elements\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/element-types.md#2025-04-22_snippet_49\n\nLANGUAGE: php\nCODE:\n```\npublic function setEagerLoadedElements(string $handle, array $elements): void\n{\n    // The handle can be anything, so long as it matches what is used in `eagerLoadingMap()`:\n    if ($handle === 'author') {\n        $author = $elements[0] ?? null;\n        $this->setAuthor($author);\n    } else {\n        parent::setEagerLoadedElements($handle, $elements);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Installing and Running Craft Docs Development Server\nDESCRIPTION: Commands for installing dependencies and starting the local development server for the Craft CMS documentation project. The development server should be restarted after any changes to JavaScript configuration files.\nSOURCE: https://github.com/craftcms/docs/blob/main/README.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\nnpm run docs:dev\n```\n\n----------------------------------------\n\nTITLE: Adding Control Panel Section to Craft CMS Plugin\nDESCRIPTION: Demonstrates how to add a control panel section for a Craft CMS plugin by implementing the hasCpSection method in the main plugin class.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/templates.md#2025-04-22_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nnamespace Craft;\n\nclass CocktailRecipesPlugin extends BasePlugin\n{\n    // ...\n\n    public function hasCpSection()\n    {\n        return true;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Formatting Plugin Changelog Entry\nDESCRIPTION: Example of the proper Markdown format for a changelog entry, showing how to format the version number and release date for a new plugin release.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-store.md#2025-04-22_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n## 3.0.0 - 2018-03-31\n```\n\n----------------------------------------\n\nTITLE: Conditional Display with if/else Tags in Twig\nDESCRIPTION: A practical example of conditional content display using Twig's if/else statement to show different links based on user login status.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n  <a href=\"/logout\">Logout</a>\n{% else %}\n  <a href=\"/login\">Login</a>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Configuration Example in Craft CMS\nDESCRIPTION: Simple JSON configuration example for HTML Purifier that restricts content to only paragraph and anchor tags, used for Redactor or CKEditor fields or the purify filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_14\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"HTML.AllowedElements\": \"p, a\",\n}\n```\n\n----------------------------------------\n\nTITLE: Expanded Tags Relation Query in Twig\nDESCRIPTION: The full ElementCriteriaModel configuration equivalent to the shorthand syntax. This shows the relation parameters being used behind the scenes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/tags-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{% set tags = craft.tags({\n  relatedTo: { sourceElement: entry, field: \"tagsFieldHandle\" },\n  order:     \"sortOrder\",\n  limit:     null\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Fetching Tax Categories by Product Type ID in Twig and PHP\nDESCRIPTION: Demonstrates how to retrieve tax categories for a specific product type using its ID in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/tax.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set categories = craft.commerce\n  .getTaxCategories()\n  .getTaxCategoriesByProductTypeId(123) %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$category = \\craft\\commerce\\Plugin::getInstance()\n    ->getTaxCategories()\n    ->getTaxCategoriesByProductTypeId(123);\n```\n\n----------------------------------------\n\nTITLE: Configuring Craft CMS Using Fluent Style in PHP\nDESCRIPTION: Example of configuring Craft CMS using the fluent style in a PHP config file. This sets the dev mode and user session duration using method chaining.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\config\\GeneralConfig;\nuse craft\\helpers\\App;\n\nreturn GeneralConfig::create()\n    ->devMode(App::env('DEV_MODE') ?? false)\n    ->userSessionDuration('P1D');\n```\n\n----------------------------------------\n\nTITLE: URL Generation in Twig\nDESCRIPTION: Shows how to use the url() function to generate URLs with various parameters and schemes. Includes examples of basic usage and parameter handling.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_24\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ url('company/contact') }}\">Contact Us</a>\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ url('http://my-project.tld', 'foo=1', 'https') }}\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Redirect URL in Craft CMS Login Form\nDESCRIPTION: This Twig snippet demonstrates how to set a custom redirect URL after successful login in Craft CMS. It overrides the default 'postLoginRedirect' config setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/login-form.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n<input type=\"hidden\" name=\"redirect\" value=\"some/custom/path\">\n```\n\n----------------------------------------\n\nTITLE: Disabling Username Remember Feature in Craft CMS\nDESCRIPTION: Controls the duration Craft will remember a username and pre-populate it on the control panel login page. Setting it to false disables this feature altogether.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_61\n\nLANGUAGE: php\nCODE:\n```\n'rememberUsernameDuration' => false,\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Logging in Craft CMS\nDESCRIPTION: Examples of logging custom messages using both traditional Yii2 logging and PSR-3 message format with context and substitutions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/system/logging.md#2025-04-22_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Short form, using a helper function for the `info` level:\nCraft::info('My first log message!', 'custom-module');\n\n// The equivalent call, with an explicit level:\nCraft::getLogger()->log('My first log message!', Logger::LEVEL_INFO, 'custom-module');\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Single Product from the Field\nDESCRIPTION: Using the one() method to retrieve only the first selected product when the field is configured to relate to a single product.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/products-fields.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set product = entry.myFieldHandle.one() %}\n{% if product %}\n  {# ... #}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Listing Tax Categories in Twig\nDESCRIPTION: Shows how to list all tax categories set up in the system using the craft.commerce.taxCategories variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/available-variables.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% for taxCategory in craft.commerce.taxCategories %}\n{{ taxCategory.id }} - {{ taxCategory.name }}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Referencing Commerce Configuration in Markdown\nDESCRIPTION: These snippets demonstrate how to reference Craft Commerce configuration settings in Markdown documentation. They specifically point to the activeCartDuration setting.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/customers.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n[Commerce::$activeCartDuration](configuration.md#activecartduration)\n```\n\nLANGUAGE: markdown\nCODE:\n```\n[Commerce::$activeCartDuration](configuration.md#activecartduration)\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Tags in Twig\nDESCRIPTION: Demonstrates how to access and loop through related tags for a Tags field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/tags-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set relatedTags = entry.myFieldHandle.all() %}\n{% if relatedTags|length %}\n  <ul>\n    {% for rel in relatedTags %}\n      <li><a href=\"{{ url('tags/'~rel.slug) }}\">{{ rel.title }}</a></li>\n    {% endfor %}\n  </ul>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Demonstrating Twig Comments vs HTML Comments in Templates\nDESCRIPTION: This snippet illustrates the difference between HTML comments and Twig comments. HTML comments appear in the source code when rendered, while Twig comments are completely removed before rendering.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/twig-primer.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<!-- This will be visible in the HTML source -->\n{# This won't! #}\n```\n\n----------------------------------------\n\nTITLE: Extending Discount Sidebar Details in Twig\nDESCRIPTION: This hook allows adding content after the existing right sidebar details column in the discount detail view.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/extend/template-hooks.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% hook \"cp.commerce.discounts.edit.details\" %}\n```\n\n----------------------------------------\n\nTITLE: Creating a Project Directory for Craft CMS Installation\nDESCRIPTION: Commands to create a new project directory and navigate into it, which is the first step in setting up a local Craft CMS development environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/install.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir my-craft-project\ncd my-craft-project/\n```\n\n----------------------------------------\n\nTITLE: Setting Selected Subnav Item in Twig Template\nDESCRIPTION: Twig code showing how to specify which subnav item should be selected in the control panel by setting the selectedSubnavItem variable to the key of the nav item.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/cp-section.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set selectedSubnavItem = 'bar' %}\n```\n\n----------------------------------------\n\nTITLE: Using Message Parameters in PHP Translations\nDESCRIPTION: Shows how to use placeholder values in translated messages and replace them with dynamic values in PHP for Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    'Welcome back, {name}' => 'Willkommen zurück {name}',\n];\n```\n\n----------------------------------------\n\nTITLE: Setting Craft CMS License Key via Environment Variable\nDESCRIPTION: Example showing the special environment variable CRAFT_LICENSE_KEY that can be used to set the Craft CMS license key outside of the standard license.key file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/plugins.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nCRAFT_LICENSE_KEY\n```\n\n----------------------------------------\n\nTITLE: Installing Nitro on macOS and Linux\nDESCRIPTION: This command downloads and executes the Nitro installation script for macOS and Linux systems. It requires Multipass 1.5.0+ to be installed beforehand.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nbash <(curl -sLS https://raw.githubusercontent.com/craftcms/nitro/v1/install.sh)\n```\n\n----------------------------------------\n\nTITLE: Using the 'scalar' test in Twig\nDESCRIPTION: Illustrates how to use the 'scalar' test to check if a variable is a scalar value in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{{ 'hai' is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ 23 is scalar ? 'true' : 'false' }}\n{# result: true #}\n\n{{ [23, 'hai'] is scalar ? 'true' : 'false' }}\n{# result: false #}\n```\n\n----------------------------------------\n\nTITLE: Looping Through Selected Categories in Twig\nDESCRIPTION: Demonstrates how to iterate through categories selected in a Categories field using a nav tag, which is particularly useful for handling nested categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% nav category in entry.categoriesFieldHandle %}\n    ...\n{% endnav %}\n```\n\n----------------------------------------\n\nTITLE: Enabling MinIO in Nitro\nDESCRIPTION: Command to enable MinIO in the Nitro environment. After running this command, Nitro will prompt to apply changes, making the MinIO web UI available at https://minio.service.nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/services/minio.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro enable minio\n```\n\n----------------------------------------\n\nTITLE: Store Location Address Access\nDESCRIPTION: Demonstrates the old and new ways of accessing store location address information using the stores service and currentStore variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/upgrade.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = craft.commerce.store.store.getLocationAddress() %}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{% set address = currentStore.settings.locationAddress %}\n\n{% set store = craft.commerce.stores.getStoreByHandle('store-eu') %}\n{% set address = store.settings.locationAddress %}\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Number Fields in Twig and PHP\nDESCRIPTION: Examples of querying elements filtered by Number field values, demonstrating both Twig and PHP approaches.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/number.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{# Fetch entries with a Number field set to at least 100 #}\n{% set entries = craft.entries()\n  .myFieldHandle('>= 100')\n  .all() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n// Fetch entries with a Number field set to at least 100\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle('>= 100')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Setting Environment Variable for Admin Changes in Craft CMS\nDESCRIPTION: Example of setting the CRAFT_ALLOW_ADMIN_CHANGES environment variable to false, which prevents modifications to Project Config settings in production environments.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/project-config.md#2025-04-22_snippet_0\n\nLANGUAGE: env\nCODE:\n```\nCRAFT_ALLOW_ADMIN_CHANGES=false\n```\n\n----------------------------------------\n\nTITLE: Store Settings Countries List Check\nDESCRIPTION: Example of accessing store settings to check allowed countries list for shipping validation.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/upgrade.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% set allowedCountries = currentStore.settings.countriesList %}\n\n{% if cart.shippingAddress.countryCode not in countries|keys %}\n  <p>Sorry, we don't fulfill orders to or from {{ countries[cart.shippingAddress.countryCode].name }}!</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Creating Database Cache Table in Craft CMS with Bash\nDESCRIPTION: Command to create a database cache table for storing data caches. This command honors the tablePrefix setting in the database configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/config/app.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft setup/db-cache-table\n```\n\n----------------------------------------\n\nTITLE: Customizing Plugin Components in app.php\nDESCRIPTION: Configuration example for customizing plugin components from the project's config/app.php file.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/services.md#2025-04-22_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'components' => [\n        'plugins' => [\n            'pluginConfigs' => [\n                'my-plugin' => [\n                    'components' => [\n                        'foo' => [\n                            'myProperty' => 'bar',\n                        ],\n                    ],\n                ],\n            ],\n        ],\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Displaying Formatted State Name in Markdown\nDESCRIPTION: This snippet demonstrates the format of the 'formatName' attribute, which combines the state name and country name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/1.x/state-model.md#2025-04-22_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n`California (United States)`\n```\n\n----------------------------------------\n\nTITLE: Processing Field Layout in PHP Controller\nDESCRIPTION: Shows how to handle field layout POST data in a controller and save it using the Fields service.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/element-types.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$fieldLayout = Craft::$app->getFields()->assembleLayoutFromPost();\n$fieldLayout->type = MyElementType::class;\n```\n\n----------------------------------------\n\nTITLE: Adding Site Using Nitro CLI\nDESCRIPTION: Example of using the nitro add command to configure a new site, showing the interactive prompt flow for hostname and webroot configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ cd /path/to/project\n$ nitro add\nEnter the hostname [plugins-dev] example.test\nEnter the web root [web]\nAdded plugins-dev to config file.\nApply changes from config? [yes]\nMounting /path/to/project to nitro-dev\nAdding site example.test to nitro-dev\nApplied changes from /Users/oli/.nitro/nitro-dev.yaml\nEditing your hosts file\nPassword: ******\n```\n\n----------------------------------------\n\nTITLE: Incorrect Console Command Test Order in PHP\nDESCRIPTION: Example showing incorrect order of stdout assertions that will fail during testing.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/console.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$this->consoleCommand('test-controller/test-action')\n    ->stdOut('second')\n    ->stdOut('first')\n    ->exitCode(ExitCode::OK)\n    ->run();\n```\n\n----------------------------------------\n\nTITLE: Basic Link Field Usage in Twig Templates\nDESCRIPTION: Shows how to output a link field's value as an href attribute with a label in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/link.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ entry.myLinkFieldHandle }}\">{{ entry.myLinkFieldHandle.label }}</a>\n```\n\n----------------------------------------\n\nTITLE: User-selectable Timezone for Time Input in Twig Form\nDESCRIPTION: Twig code snippet for creating a time input with a user-selectable timezone in an element form.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/time-fields.md#2025-04-22_snippet_8\n\nLANGUAGE: twig\nCODE:\n```\n{% set currentValue = entry is defined and entry.myFieldHandle\n  ? entry.myFieldHandle|date('H:i', timezone='UTC')\n  : '' %}\n\n<input type=\"time\" name=\"fields[myFieldHandle][time]\" value=\"{{ currentValue }}\">\n\n<select name=\"fields[myFieldHandle][timezone]\">\n  <option value=\"UTC\" selected>UTC</option>\n  <option value=\"America/Los_Angeles\">Pacific Time</option>\n  <!-- ... -->\n</select>\n```\n\n----------------------------------------\n\nTITLE: Setting COMMERCE_PAYMENT_CURRENCY PHP Constant\nDESCRIPTION: Example of defining the COMMERCE_PAYMENT_CURRENCY constant to lock a specific payment currency. This overrides the default behavior of using the primary currency.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/configuration.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nCOMMERCE_PAYMENT_CURRENCY\n```\n\n----------------------------------------\n\nTITLE: Querying Relations Through Matrix Fields\nDESCRIPTION: Illustrates how to query relations through Matrix fields, including targeting specific block type fields in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/relations.md#2025-04-22_snippet_5\n\nLANGUAGE: twig\nCODE:\n```\n{% set ingredients = craft.entries.section('ingredients').relatedTo({\n    sourceElement: cocktail,\n    field: 'ingredientsMatrix.relatedIngredient'\n}) %}\n```\n\n----------------------------------------\n\nTITLE: Modifying Category Sortable Attributes in Craft CMS\nDESCRIPTION: Hook to modify the attributes that categories can be sorted by in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_18\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyCategorySortableAttributes(&$attributes)\n{\n    $attributes['id'] = Craft::t('ID');\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Craft Commerce via Terminal Command\nDESCRIPTION: This command updates Craft Commerce specifically. It should be run from the Craft project directory in the terminal after checking for available updates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/updating.md#2025-04-22_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update commerce\n```\n\n----------------------------------------\n\nTITLE: Accessing Related Categories in Twig and PHP\nDESCRIPTION: Shows how to access a category query from an element with a Categories field in both Twig and PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories-fields.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set query = entry.myFieldHandle %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Implementing Serializable Interface in PHP for Craft CMS Testing\nDESCRIPTION: Serializable class implements the craft\\base\\Serializable interface, providing a mock implementation for testing serialization functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/testing/framework/support-classes.md#2025-04-22_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\serializable\\Serializable\n```\n\n----------------------------------------\n\nTITLE: Accessing Current User Information\nDESCRIPTION: Shows how to check for and display current user information using the currentUser variable.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/global-variables.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\n{% if currentUser %}\n    Welcome, {{ currentUser.friendlyName }}!\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Currency Formatting Filter Usage\nDESCRIPTION: Shows how to format numbers as currency with optional zero cents stripping.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ 1000000|currency('USD') }} => $1,000,000.00\n{{ 1000000|currency('USD', true) }} => $1,000,000\n```\n\n----------------------------------------\n\nTITLE: Using cpUrl Function in Twig\nDESCRIPTION: The cpUrl function generates a control panel URL, accounting for the cpTrigger setting and format preferences.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/functions.md#2025-04-22_snippet_15\n\nLANGUAGE: twig\nCODE:\n```\n<a href=\"{{ cpUrl('settings') }}\">Visit control panel settings</a>\n```\n\n----------------------------------------\n\nTITLE: Configuring Project Config in codeception.yml\nDESCRIPTION: Example YAML configuration showing how to set up Project Config support with folder path and reset options.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/config-options.md#2025-04-22_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nprojectConfig:\n  folder: \"config/project\"\n  reset: true\n```\n\n----------------------------------------\n\nTITLE: Displaying Current Date in Craft CMS Twig\nDESCRIPTION: Shows how to display the current date using the now variable and Twig's date filter.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/dev/global-variables.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\nToday is {{ now|date('M j, Y') }}.\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Entries Fields in Twig\nDESCRIPTION: Demonstrates how to fetch artwork entries related to an artist using an Entries field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/entries-fields.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set works = craft.entries()\n  .section('artwork')\n  .myFieldHandle(artist)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Sorting Entries by Custom Field in Twig\nDESCRIPTION: Example of ordering entries by a custom currency field value in descending order using Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/extend/field-types.md#2025-04-22_snippet_14\n\nLANGUAGE: twig\nCODE:\n```\n{% set topAssets = craft.entries()\n  .orderBy('myCurrencyField DESC')\n  .limit(5)\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Translating Static Messages in PHP\nDESCRIPTION: Shows how to use Craft::t() function in PHP code to make static messages translatable in Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/sites.md#2025-04-22_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// old\necho 'Contact us';\n\n// new\necho Craft::t('site', 'Contact us');\n```\n\n----------------------------------------\n\nTITLE: Translation Filter Usage\nDESCRIPTION: Shows how to use the translate/t filter for static text translation with variable substitution.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_13\n\nLANGUAGE: twig\nCODE:\n```\n<p>{{ \"Welcome, {name}\"|t({ name: user.friendlyName }) }}<p>\n```\n\n----------------------------------------\n\nTITLE: Creating Custom Configuration Settings in Craft CMS\nDESCRIPTION: Example of using a custom.php configuration file to centralize data, flags, or secrets that don't have a specific place in Craft's default configuration categories.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/config/README.md#2025-04-22_snippet_12\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'serviceBaseUrl' => 'https://api.service.com/v1',\n    'servicePublishableKey' => App::env('SERVICE_PUBLISHABLE_KEY'),\n    'servicePrivateKey' => App::env('SERVICE_PRIVATE_KEY'),\n];\n```\n\n----------------------------------------\n\nTITLE: Fetching All States in PHP\nDESCRIPTION: Shows how to retrieve all states, including disabled ones, using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_23\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->getAllStates();\nforeach ($states as $state) {\n    // $state->id\n    // $state->name\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing a Single Category from Categories Field\nDESCRIPTION: Demonstrates how to retrieve only the first category from a Categories field when you know it should only contain one selection. Uses the first() method on the ElementCriteriaModel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/categories-fields.md#2025-04-22_snippet_6\n\nLANGUAGE: twig\nCODE:\n```\n{% set category = entry.myCategoriesField.first() %}\n\n{% if category %}\n  ...\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Migrating from Craft 3 'for' Tags with 'if' Parameters to Craft 4 (Twig 3)\nDESCRIPTION: Example showing how to update Twig templates that use 'for' tags with 'if' parameters, which have been removed in Twig 3. The replacement uses the filter pipe operator.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/upgrade.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{# Craft 3 #}\n{% for item in items if item is not null %}\n  {# ... #}\n{% endfor %}\n\n{# Craft 4 #}\n{% for item in items|filter(item => item is not null) %}\n  {# ... #}\n{% endfor %}\n```\n\n----------------------------------------\n\nTITLE: Generating Dynamic Email Subject in Twig for Craft Commerce\nDESCRIPTION: This snippet demonstrates how to create a dynamic email subject using Twig templating in Craft Commerce. It utilizes the 'order' object to include the order ID in the subject line.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/order-status-emails.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\nOrder #{{ order.id }} received.\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Command on Windows\nDESCRIPTION: This command removes the Nitro folder from the user's home directory on Windows, effectively uninstalling Nitro.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf $HOME/Nitro\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in PHP\nDESCRIPTION: Shows how to fetch entries with a related tag using a Tags field in PHP code.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/tags-fields.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$entries = \\craft\\elements\\Entry::find()\n    ->myFieldHandle(':notempty:')\n    ->all();\n```\n\n----------------------------------------\n\nTITLE: Querying Elements with Tags Fields in Twig\nDESCRIPTION: Example of how to fetch entries with a related tag using a Tags field in a Twig template.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/field-types/tags.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set entries = craft.entries()\n  .myFieldHandle(':notempty:')\n  .all() %}\n```\n\n----------------------------------------\n\nTITLE: Defining Additional Asset Table Attributes in Craft CMS\nDESCRIPTION: Hook to add additional table columns to asset indexes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_27\n\nLANGUAGE: php\nCODE:\n```\npublic function defineAdditionalAssetTableAttributes()\n{\n    return array(\n        'foo' => \"Foo\",\n        'bar' => \"Bar\",\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Using the 'missing' test in Twig\nDESCRIPTION: Shows how to use the 'missing' test to check if an object is an instance of MissingComponentInterface in Twig templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/tests.md#2025-04-22_snippet_7\n\nLANGUAGE: twig\nCODE:\n```\n{% if field is missing %}\n  <p>😱</p>\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Registering CSS File in Twig Layout\nDESCRIPTION: Demonstrates how to register a CSS file in Craft CMS using Twig's view component\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/styles.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% do craft.app.view.registerCssFile('@web/styles.css') %}\n```\n\n----------------------------------------\n\nTITLE: Building Codeception Test Suites for Craft CMS\nDESCRIPTION: This command builds the Codeception test suites after setting up the testing environment for Craft CMS.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/testing-tips.md#2025-04-22_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncodecept build\n```\n\n----------------------------------------\n\nTITLE: Mount Configuration in Nitro YAML\nDESCRIPTION: YAML configuration example for mounting system directories into the Nitro machine.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_4\n\nLANGUAGE: yaml\nCODE:\n```\nmounts:\n  - source: /Users/oli/dev\n    dest: /home/ubuntu/sites\n```\n\n----------------------------------------\n\nTITLE: Getting All Global Sets in Craft CMS\nDESCRIPTION: The getAllSets() method returns an array of all global sets defined in the Craft CMS site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getAllSets()\n```\n\n----------------------------------------\n\nTITLE: Counting Total Global Sets in Craft CMS\nDESCRIPTION: The getTotalSets() method returns the total number of global sets defined in the Craft CMS site.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/craft.globals.md#2025-04-22_snippet_3\n\nLANGUAGE: twig\nCODE:\n```\ncraft.globals.getTotalSets()\n```\n\n----------------------------------------\n\nTITLE: Project Path Structure\nDESCRIPTION: Example of the absolute path structure for project root mapping in PhpStorm server configuration.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/xdebug.md#2025-04-22_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n/home/ubuntu/sites/my-site\n```\n\n----------------------------------------\n\nTITLE: Creating Additional Nitro Machine\nDESCRIPTION: Command for initializing a new Nitro machine instance with a custom name.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/usage.md#2025-04-22_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro init -m my-machine\n```\n\n----------------------------------------\n\nTITLE: Using the redirectInput() Function in Craft CMS 3\nDESCRIPTION: Shows the usage of the redirectInput() helper function, which is a shortcut for creating properly hashed redirect input fields in Craft CMS 3 forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/upgrade.md#2025-04-22_snippet_16\n\nLANGUAGE: twig\nCODE:\n```\n{{ redirectInput('foo/bar') }}\n```\n\n----------------------------------------\n\nTITLE: Updating Street Lines Input in Twig for Commerce 4\nDESCRIPTION: This snippet demonstrates how to update the input field for address lines when migrating from Commerce 3 to Commerce 4. It shows the change in property names and input field names.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/4.x/upgrading.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{# Commerce 3 #}\n{# @var model craft\\commerce\\models\\Address #}\n{{ input('text', 'address[address1]', address.address1 ?? '') }}\n\n{# Commerce 4 #}\n{# @var address craft\\elements\\Address #}\n{{ input('text', 'addressLine1', address.addressLine1 ?? '') }}\n```\n\n----------------------------------------\n\nTITLE: Ordering Categories in Twig Query\nDESCRIPTION: Demonstrates how to maintain the exact order of categories as seen in the control panel by adding an orderBy parameter to the category query in Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/categories.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set myCategoryQuery = craft.categories()\n  .group('topics')\n  .orderBy('lft ASC') %}\n```\n\n----------------------------------------\n\nTITLE: Disabling 'Remember Me' Feature in Craft CMS\nDESCRIPTION: Sets the duration a user stays logged in if 'Remember Me' is checked on the login page. Setting it to false disables the 'Remember Me' feature completely.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_62\n\nLANGUAGE: php\nCODE:\n```\n'rememberedUserSessionDuration' => false,\n```\n\n----------------------------------------\n\nTITLE: Modifying Entry Sortable Attributes in Craft CMS\nDESCRIPTION: Hook to modify the attributes that entries can be sorted by in the control panel.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_17\n\nLANGUAGE: php\nCODE:\n```\npublic function modifyEntrySortableAttributes(&$attributes)\n{\n    $attributes['id'] = Craft::t('ID');\n}\n```\n\n----------------------------------------\n\nTITLE: String Formatting with Camel Case Filter\nDESCRIPTION: Demonstrates the camel case string formatting filter that converts a string to camelCase.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ \"foo bar\"|camel }}\n{# Outputs: fooBar #}\n```\n\n----------------------------------------\n\nTITLE: Accessing Order Reference in Twig\nDESCRIPTION: Demonstrates how to display an order's reference number using Twig.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/orders-carts.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{{ order.reference }}\n```\n\n----------------------------------------\n\nTITLE: Removing Nitro Configurations on Windows\nDESCRIPTION: This optional command removes all Nitro machine configurations on Windows systems.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf $HOME/.nitro\n```\n\n----------------------------------------\n\nTITLE: Enabling Xdebug in Nitro\nDESCRIPTION: Commands to enable and disable Xdebug in the Nitro development environment.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/xdebug.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnitro xdebug on\n```\n\nLANGUAGE: bash\nCODE:\n```\nnitro xdebug off\n```\n\n----------------------------------------\n\nTITLE: Creating Category Fixtures in PHP for Craft CMS Testing\nDESCRIPTION: Example of a Category fixture data file in PHP for Craft CMS. It shows how to set up a category with a group ID and title.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/testing-craft/fixtures.md#2025-04-22_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nreturn [\n    [\n        'groupId' => $this->groupIds['categories'],\n        'title' => 'Category',\n    ],\n];\n```\n\n----------------------------------------\n\nTITLE: Formatting Address with Twig Filter in Craft CMS\nDESCRIPTION: Demonstrates the use of the 'address' filter to format an Address object in Craft CMS templates. The filter applies formatting to create a structured HTML output of the address.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/twig/filters.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set myAddress = currentUser.getAddresses()|first %}\n{{ myAddress|address }}\n{# Output:\n  <p translate=\"no\">\n  <span class=\"address-line1\">1234 Balboa Towers Circle</span><br>\n  <span class=\"locality\">Los Angeles</span>, <span class=\"administrative-area\">CA</span> <span class=\"postal-code\">92662</span><br>\n  <span class=\"country\">United States</span>\n  </p>\n#}\n```\n\n----------------------------------------\n\nTITLE: Basic Object Template Syntax in Twig\nDESCRIPTION: Demonstrates the concise syntax for accessing object attributes in Craft CMS object templates.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/object-templates.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{slug}\n```\n\n----------------------------------------\n\nTITLE: Using Ray in Twig Templates\nDESCRIPTION: Example of how to use Ray for debugging within Twig templates in Craft CMS. This snippet demonstrates sending a simple message to the Ray app.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/ray.md#2025-04-22_snippet_1\n\nLANGUAGE: twig\nCODE:\n```\n{{ ray(\"Hello Ray!\") }}\n```\n\n----------------------------------------\n\nTITLE: Defining Additional Entry Table Attributes in Craft CMS\nDESCRIPTION: Hook to add additional table columns to entry indexes.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/hooks-reference.md#2025-04-22_snippet_25\n\nLANGUAGE: php\nCODE:\n```\npublic function defineAdditionalEntryTableAttributes()\n{\n    return array(\n        'foo' => \"Foo\",\n        'bar' => \"Bar\",\n    );\n}\n```\n\n----------------------------------------\n\nTITLE: Xdebug Enable Command\nDESCRIPTION: Command for enabling Xdebug in the PHP environment\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_14\n\nLANGUAGE: shell\nCODE:\n```\nnitro xon [<options>]\n```\n\n----------------------------------------\n\nTITLE: PHP Start Command\nDESCRIPTION: Command for starting PHP-FPM on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_11\n\nLANGUAGE: shell\nCODE:\n```\nnitro php start [<options>]\n```\n\n----------------------------------------\n\nTITLE: Updating Specific Plugin in Craft CMS\nDESCRIPTION: Command to update a specific plugin in Craft CMS by specifying its handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/updating.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp craft update element-api\n```\n\n----------------------------------------\n\nTITLE: Commerce Transaction Model Reference\nDESCRIPTION: Reference to the Transaction model class in Craft Commerce.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/transactions.md#2025-04-22_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\ncommerce4:craft\\commerce\\models\\Transaction\n```\n\n----------------------------------------\n\nTITLE: Nginx Restart Command\nDESCRIPTION: Command for restarting nginx on a Nitro machine\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_5\n\nLANGUAGE: shell\nCODE:\n```\nnitro nginx restart [<options>]\n```\n\n----------------------------------------\n\nTITLE: Adding New Elasticsearch Container in Nitro\nDESCRIPTION: Interactive command example showing how to add a new Elasticsearch container using the nitro container new command. Demonstrates the full setup process including image selection, port configuration, and environment setup.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/containers.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro container new\nWhat image are you trying to add? elasticsearch\nWhich image should we use?\n  1. elasticsearch\n  2. bitnami/elasticsearch\n  3. bitnami/elasticsearch-exporter\n  4. elastichq/elasticsearch-hq\n  5. justwatch/elasticsearch_exporter\n  6. taskrabbit/elasticsearch-dump\n  7. lmenezes/elasticsearch-kopf\n  8. blacktop/elasticsearch\n  9. barnybug/elasticsearch\n  10. elastic/elasticsearch\nEnter your selection: 1\nWhat tag should we use [latest]? 7.10.1\n  … downloading docker.io/library/elasticsearch:7.10.1 ✓\nExpose port `9200` on host [Y/n]?\nExpose port `9300` on host [Y/n]?\nShould we proxy one of the ports to expose a web based UI [Y/n]?\nWhich port should we use for the UI?\n  1. 9200\n  2. 9300\nEnter your selection: 1\nWhat is the name of the container [elasticsearch]?\nCreate a file to add environment variables [Y/n]?\nCreated environment variables file at \"/Users/oli/.nitro/.elasticsearch\".\nNew container \"elasticsearch.containers.nitro\" added!\nApply changes now [Y/n]? n\n```\n\n----------------------------------------\n\nTITLE: Retrieving User Cart in Craft Commerce with Twig\nDESCRIPTION: This snippet shows how to retrieve the current user's cart as a craft\\commerce\\elements\\Order object in Craft Commerce templates. The cart object can then be displayed to customers or used as a target for add-to-cart forms.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/craft-commerce-carts-cart.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{% set cart = craft.commerce.carts.cart %}\n```\n\n----------------------------------------\n\nTITLE: Asset Count Query Implementation in GraphQL\nDESCRIPTION: The assetCount query returns the total number of assets matching specified criteria. It accepts the same filtering parameters as the assets query but returns a count instead of the assets themselves.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/graphql.md#2025-04-22_snippet_8\n\nLANGUAGE: graphql\nCODE:\n```\nquery assetCount(\n  $id: [QueryArgument]\n  $uid: [String]\n  $status: [String]\n  $archived: Boolean\n  $trashed: Boolean\n  $site: [String]\n  $siteId: [QueryArgument]\n  # ... additional arguments\n)\n```\n\n----------------------------------------\n\nTITLE: Creating Migration File using yiic in Craft CMS\nDESCRIPTION: This bash command creates a new migration file for a Craft CMS plugin using the yiic console tool. It requires specifying the migration description and plugin handle.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/plugins/migrations.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd /path/to/craft/app/etc/console\nchmod 777 yiic\n./yiic migrate create <MIGRATION-DESCRIPTION> <PLUGIN-HANDLE>\n```\n\n----------------------------------------\n\nTITLE: Running Rector for Craft 4 Compatibility\nDESCRIPTION: Series of commands to run Rector for adding type declarations and preparing a plugin for Craft 4 compatibility.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/extend/updating-plugins.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncomposer config minimum-stability dev\ncomposer config prefer-stable true\ncomposer require craftcms/rector:dev-main --dev\nvendor/bin/rector process src --config vendor/craftcms/rector/sets/craft-cms-40.php\n```\n\n----------------------------------------\n\nTITLE: Redis Shell Command\nDESCRIPTION: Command for starting a Redis shell in Nitro\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/commands.md#2025-04-22_snippet_13\n\nLANGUAGE: shell\nCODE:\n```\nnitro redis [<options>]\n```\n\n----------------------------------------\n\nTITLE: Configuring Resource Trigger for Craft CMS (PHP)\nDESCRIPTION: Sets the resourceTrigger config option to 'assets', which defines the URI segment Craft should use to identify requests for resource files.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_36\n\nLANGUAGE: php\nCODE:\n```\n'resourceTrigger' => 'assets',\n```\n\n----------------------------------------\n\nTITLE: Finding Enabled Next Sibling Entry in Twig\nDESCRIPTION: Alternative to getNextSibling() that returns only enabled siblings by using the positionedAfter parameter with craft.entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/templating/entrymodel.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set nextSibling = craft.entries.positionedAfter(entry).order('lft asc').first() %}\n```\n\n----------------------------------------\n\nTITLE: Accessing the Address Country Repository\nDESCRIPTION: Examples of retrieving all countries from the commerceguys/addressing library using both Twig and PHP, providing access to globally-aware country data.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/reference/element-types/addresses.md#2025-04-22_snippet_2\n\nLANGUAGE: twig\nCODE:\n```\n{% set countries = craft.app.getAddresses().getCountryRepository().getAll() %}\n```\n\nLANGUAGE: php\nCODE:\n```\n$countries = Craft::$app->getAddresses()->getCountryRepository()->getAll();\n```\n\n----------------------------------------\n\nTITLE: PDF Generation and Subscription Endpoints\nDESCRIPTION: Endpoints for generating order PDFs and managing subscriptions. Includes parameter specifications and response formats.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/reference/controller-actions.md#2025-04-22_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n### GET downloads/pdf\n### POST subscriptions/subscribe\n\nParams:\n- number: Order number\n- pdfHandle: PDF template handle\n- option: Optional template parameter\n```\n\n----------------------------------------\n\nTITLE: Importing a Database Backup in DDEV for Collaboration\nDESCRIPTION: Commands for collaborators to start a DDEV environment and import a database backup after cloning a Craft CMS project repository.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/5.x/install.md#2025-04-22_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nddev start\nddev import-db path/to/backup.sql\n```\n\n----------------------------------------\n\nTITLE: Migrating getElementRoute Function - PHP\nDESCRIPTION: Shows how to update element routing from Craft 2's getElementRoute function to Craft 3's event-based approach. Handles routing for product entries.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/updating-plugins.md#2025-04-22_snippet_20\n\nLANGUAGE: php\nCODE:\n```\npublic function getElementRoute(BaseElementModel $element)\n{\n    if (\n        $element->getElementType() === ElementType::Entry &&\n        $element->getSection()->handle === 'products'\n    ) {\n        return ['action' => 'products/viewEntry'];\n    }\n}\n```\n\nLANGUAGE: php\nCODE:\n```\nuse craft\\base\\Element;\nuse craft\\elements\\Entry;\nuse craft\\events\\SetElementRouteEvent;\nuse yii\\base\\Event;\n\nEvent::on(\n    Entry::class,\n    Element::EVENT_SET_ROUTE,\n    function(SetElementRouteEvent $event) {\n        /** @var Entry $entry */\n        $entry = $event->sender;\n\n        if ($entry->section->handle === 'products') {\n            $event->route = 'products/view-entry';\n\n            // Prevent other event listeners from getting invoked\n            $event->handled = true;\n        }\n    }\n);\n```\n\n----------------------------------------\n\nTITLE: Fetching All Enabled States as List in PHP\nDESCRIPTION: Shows how to retrieve all enabled states as a key-value list using PHP and iterate through them.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/3.x/countries-states.md#2025-04-22_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n$states = \\craft\\commerce\\Plugin::getInstance()\n    ->getStates()\n    ->getAllEnabledStatesAsList();\n\nforeach ($states as $id => $stateName) {\n    // $id\n    // $stateName\n}\n```\n\n----------------------------------------\n\nTITLE: Template-Defined Transform Creation\nDESCRIPTION: Shows how to define a custom transform directly in templates using a hash of parameters.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/image-transforms.md#2025-04-22_snippet_4\n\nLANGUAGE: twig\nCODE:\n```\n{% set thumb = {\n  mode: 'crop',\n  width: 100,\n  height: 100,\n  quality: 75,\n  position: 'top-center'\n} %}\n```\n\n----------------------------------------\n\nTITLE: Disabling Account Cooldown in Craft CMS (PHP)\nDESCRIPTION: Sets the cooldownDuration config option to false, which keeps user accounts locked indefinitely after too many failed login attempts, requiring manual admin unlock.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/2.x/config-settings.md#2025-04-22_snippet_50\n\nLANGUAGE: php\nCODE:\n```\n'cooldownDuration' => false,\n```\n\n----------------------------------------\n\nTITLE: Accessing Store Data in Twig Templates\nDESCRIPTION: Demonstrates different methods for accessing store information in Twig templates, including global variables and commerce service methods.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/5.x/system/stores.md#2025-04-22_snippet_0\n\nLANGUAGE: twig\nCODE:\n```\n{{ currentStore.name }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{{ currentSite.name }} — {{ currentSite.store.name }}\n```\n\nLANGUAGE: twig\nCODE:\n```\n{# Get the current store: #}\n{{ craft.commerce.stores.currentStore }}\n\n{# Get a specific store: #}\n{{ craft.commerce.stores.getStoreByHandle('na') }}\n```\n\n----------------------------------------\n\nTITLE: Retrieving a Specific Discount by Code in Twig\nDESCRIPTION: This code demonstrates how to retrieve a specific discount using its code and display its name and description if found.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/commerce/2.x/available-variables.md#2025-04-22_snippet_11\n\nLANGUAGE: twig\nCODE:\n```\n{% set discount = craft.commerce.discount.getDiscountByCode('HALFOFF') %}\n{% if discount %}\n  {{ discount.name }} - {{ discount.description }}\n{% endif %}\n```\n\n----------------------------------------\n\nTITLE: Updating Nitro CLI and Docker Containers via Homebrew\nDESCRIPTION: For macOS users who installed Nitro via Homebrew, use brew to upgrade the Nitro CLI, then use the updated CLI's update command to bring Docker containers to their latest versions.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/updating.md#2025-04-22_snippet_3\n\nLANGUAGE: sh\nCODE:\n```\nbrew upgrade nitro\nnitro update\n```\n\n----------------------------------------\n\nTITLE: Deleting All Multipass Machines\nDESCRIPTION: This command deletes all Multipass machines, which can be useful when uninstalling Nitro if you have multiple machines.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/1.x/installation.md#2025-04-22_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nmultipass delete --all -p\n```\n\n----------------------------------------\n\nTITLE: Creating an Asset Query from an Assets Field in PHP\nDESCRIPTION: Shows how to access the Asset Query object from an Assets field in PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/assets-fields.md#2025-04-22_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$query = $entry->myFieldHandle;\n```\n\n----------------------------------------\n\nTITLE: Checking if a Specific Option is Selected in PHP\nDESCRIPTION: Shows how to check if a specific option is selected in a Multi-select field using PHP.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/4.x/multi-select-fields.md#2025-04-22_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nif ($entry->myFieldHandle->contains('foo') {\n```\n\n----------------------------------------\n\nTITLE: Displaying Browser Screenshot in Craft CMS Documentation\nDESCRIPTION: HTML-like template code for displaying a browser screenshot with caption in Craft CMS documentation. Uses a custom BrowserShot component to render an image with associated metadata.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/getting-started-tutorial/build/preview.md#2025-04-22_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<BrowserShot url=\"https://tutorial.ddev.site/admin/entries/blog/20-my-trip-to-bend\" :link=\"false\" caption=\"Editing a blog post with live preview.\">\n<img src=\"../images/live-preview.png\" alt=\"Screenshot of control panel editing a post with live preview: content on the left and a front end preview on the right\" />\n</BrowserShot>\n```\n\n----------------------------------------\n\nTITLE: Executing Nitro Share Command for Local Site Sharing\nDESCRIPTION: This snippet demonstrates how to use the 'nitro share' command to select and share a local site. The command prompts the user to choose from a list of available sites.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/nitro/2.x/share.md#2025-04-22_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ nitro share\nSelect a site:\n  1. craft-support.nitro\n  2. another-site.nitro\n  3. plugins-dev.nitro\nEnter your selection: 1\n```\n\n----------------------------------------\n\nTITLE: Creating GitHub Automated Release Workflow\nDESCRIPTION: YAML configuration file for GitHub Actions that automatically creates releases for new plugin versions. This workflow responds to repository dispatch events triggered by the Plugin Store.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/extend/plugin-store.md#2025-04-22_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\nname: Create Release\nrun-name: Create release for ${{ github.event.client_payload.version }}\n\non:\n  repository_dispatch:\n    types:\n      - craftcms/new-release\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: ncipollo/release-action@v1\n        with:\n          body: ${{ github.event.client_payload.notes }}\n          makeLatest: ${{ github.event.client_payload.latest }}\n          name: ${{ github.event.client_payload.version }}\n          prerelease: ${{ github.event.client_payload.prerelease }}\n          tag: ${{ github.event.client_payload.tag }}\n```\n\n----------------------------------------\n\nTITLE: Twig Extension Implementation in PHP\nDESCRIPTION: TwigExtension class that extends Twig's AbstractExtension for testing custom Twig functionality.\nSOURCE: https://github.com/craftcms/docs/blob/main/docs/3.x/testing/framework/support-classes.md#2025-04-22_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\ncraft\\test\\mockclasses\\TwigExtension\n```"
  }
]
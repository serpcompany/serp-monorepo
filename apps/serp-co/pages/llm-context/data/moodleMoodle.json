[
  {
    "owner": "moodle",
    "repo": "moodle",
    "content": "TITLE: Moodle Module Standard Functions\nDESCRIPTION: Core function signatures that must be implemented in module's lib.php file. These functions handle module instance management, user activity tracking, cron operations, and activity reporting.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nmodulename_add_instance()\nmodulename_update_instance()\nmodulename_delete_instance()\n\nmodulename_user_complete()\nmodulename_user_outline()\n\nmodulename_cron()\n\nmodulename_print_recent_activity()\n```\n\n----------------------------------------\n\nTITLE: Declaring Supported and Incompatible Moodle Versions in Plugin's version.php\nDESCRIPTION: Plugins can now explicitly declare supported and incompatible Moodle versions in their version.php file. This allows for better version compatibility management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_74\n\nLANGUAGE: PHP\nCODE:\n```\n$plugin->supported = [37,39];\n$plugin->incompatible = 36;\n```\n\n----------------------------------------\n\nTITLE: Major Changes to the Edit Quiz Page (Moodle 2.8)\nDESCRIPTION: Major changes have been made to the Edit quiz page to increase usability and clean up the page for future features. The display of `mod/quiz/edit.php` is now entirely generated by `mod_quiz\\output\\edit_renderer`, which uses a helper class `mod_quiz\\structure` to provide details of the structure of the quiz, and `mod_quiz\\repaginate` to alter that structure. `mod/quiz/editlib.php` has been removed, with some functions moved to `locallib.php`.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_34\n\nLANGUAGE: text\nCODE:\n```\n\"Major changes to the Edit quiz page.\n\n  The goal of this work was to increase usability, and also clean up the page\n  enough that it will be possible to add new features in future.\n\n  Display of mod/quiz/edit.php is now entirely generated by\n  mod_quiz\\output\\edit_renderer. This uses a helper class mod_quiz\\structure\n  to provide details of the structure of the quiz, and mod_quiz\\repaginate to\n  alter that structure. (Actually, there are still some modification methods on\n  mod_quiz\\structure. Expect that to be cleaned up in future.)\n\n  The new code uses much more ajax, and there are new scripts mod/quiz/edit_rest.php\n  and mod/quiz/repaginate.php to handle this. (Again, don't be surprised if those\n  two scripts get merged in future.) Also questionbank.ajax.php (which may, in\n  future, be made more generic, and moved into the core question bank code.)\n\n  As a result of this, mod/quiz/editlib.php has gone. (A few remaining functions\n  were moved to locallib.php.)\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Accessible Table with Links in Moodle\nDESCRIPTION: An HTML example of a properly formatted table with links that meets WCAG color contrast standards. The table includes striped rows, checkboxes for selection, and various data columns with links that should display without contrast issues.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/contrast.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<table class=\"flexible table table-striped table-hover generaltable generalbox\">\n  <thead>\n    <tr>\n      <th scope=\"col\">#</th>\n      <th scope=\"col\">Name</th>\n      <th scope=\"col\">Email</th>\n      <th scope=\"col\">Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr >\n      <th scope=\"row\"><input type=\"checkbox\" class=\"m-1\" value=\"\" data-action=\"toggle\" data-toggle=\"master\" data-togglegroup=\"participants-table\" data-toggle-selectall=\"Select all\" data-toggle-deselectall=\"Deselect all\"></th>\n      <td><a href=\"#\">Bas Brands</a></td>\n      <td>bas@example.com</td>\n      <td>\n      </td>\n    </tr>\n    <tr>\n      <th scope=\"row\"><input type=\"checkbox\" class=\"m-1\" value=\"\" data-action=\"toggle\" data-toggle=\"master\" data-togglegroup=\"participants-table\" data-toggle-selectall=\"Select all\" data-toggle-deselectall=\"Deselect all\"></th>\n      <td><a href=\"#\">Chris Cross</a></td>\n      <td>chris@example.com</td>\n      <td>\n        Active\n        </td>\n    </tr>\n    <tr >\n      <th scope=\"row\"><input type=\"checkbox\" class=\"m-1\" value=\"\" data-action=\"toggle\" data-toggle=\"master\" data-togglegroup=\"participants-table\" data-toggle-selectall=\"Select all\" data-toggle-deselectall=\"Deselect all\"></th>\n      <td>\n        <a class=\"linktest-1\" href=\"#\">Irene Ipsum</a><br>\n        </td>\n      <td>irene@example.com</td>\n      <td>@blab</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n----------------------------------------\n\nTITLE: Sending Email with PHPMailer Basic Configuration\nDESCRIPTION: Complete example of sending an HTML email with attachments using PHPMailer. Demonstrates SMTP configuration, recipient management, and error handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n//Import PHPMailer classes into the global namespace\n//These must be at the top of your script, not inside a function\nuse PHPMailer\\PHPMailer\\PHPMailer;\nuse PHPMailer\\PHPMailer\\SMTP;\nuse PHPMailer\\PHPMailer\\Exception;\n\n//Load Composer's autoloader\nrequire 'vendor/autoload.php';\n\n//Create an instance; passing `true` enables exceptions\n$mail = new PHPMailer(true);\n\ntry {\n    //Server settings\n    $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      //Enable verbose debug output\n    $mail->isSMTP();                                            //Send using SMTP\n    $mail->Host       = 'smtp.example.com';                     //Set the SMTP server to send through\n    $mail->SMTPAuth   = true;                                   //Enable SMTP authentication\n    $mail->Username   = 'user@example.com';                     //SMTP username\n    $mail->Password   = 'secret';                               //SMTP password\n    $mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;            //Enable implicit TLS encryption\n    $mail->Port       = 465;                                    //TCP port to connect to; use 587 if you have set `SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS`\n\n    //Recipients\n    $mail->setFrom('from@example.com', 'Mailer');\n    $mail->addAddress('joe@example.net', 'Joe User');     //Add a recipient\n    $mail->addAddress('ellen@example.com');               //Name is optional\n    $mail->addReplyTo('info@example.com', 'Information');\n    $mail->addCC('cc@example.com');\n    $mail->addBCC('bcc@example.com');\n\n    //Attachments\n    $mail->addAttachment('/var/tmp/file.tar.gz');         //Add attachments\n    $mail->addAttachment('/tmp/image.jpg', 'new.jpg');    //Optional name\n\n    //Content\n    $mail->isHTML(true);                                  //Set email format to HTML\n    $mail->Subject = 'Here is the subject';\n    $mail->Body    = 'This is the HTML message body <b>in bold!</b>';\n    $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';\n\n    $mail->send();\n    echo 'Message has been sent';\n} catch (Exception $e) {\n    echo \"Message could not be sent. Mailer Error: {$mail->ErrorInfo}\";\n}\n```\n\n----------------------------------------\n\nTITLE: Executing PHPUnit Tests in Moodle\nDESCRIPTION: Commands to run PHPUnit tests in Moodle. Includes examples for running all tests, a single test case class, and using custom configuration files.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpunit/readme.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/phpunit\n```\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/phpunit lib/tests/phpunit_test.php\n```\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/phpunit -c mytestsuites.xml\n```\n\nLANGUAGE: bash\nCODE:\n```\nvendor/bin/phpunit local/mytest/tests/my_test.php\n```\n\n----------------------------------------\n\nTITLE: Using JWKs for JWT Decoding\nDESCRIPTION: This snippet demonstrates how to decode a JWT using a JSON Web Key Set (JWKS). The keys must be formatted correctly and passed to the decode method of the Firebase JWT library for successful verification.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWK;\nuse Firebase\\JWT\\JWT;\n\n$jwks = ['keys' => []];\nJWT::decode($payload, JWK::parseKeySet($jwks));\n```\n\n----------------------------------------\n\nTITLE: Accessing Course Module Info Properties in PHP\nDESCRIPTION: Various cm_info methods have been deprecated in favor of read-only properties. This snippet shows the new way to access course module information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_93\n\nLANGUAGE: PHP\nCODE:\n```\n$cm->url;\n$cm->content;\n$cm->extraclasses;\n$cm->onclick;\n$cm->customdata;\n$cm->afterlink;\n$cm->afterediticons;\n```\n\n----------------------------------------\n\nTITLE: Creating a Tab Class in PHP for Moodle Dynamic Tabs\nDESCRIPTION: This code snippet demonstrates how to create a tab class that extends the base.php class. The class implements four required methods: export_for_template to provide data to the template, get_tab_label for the tab title, is_available to check permissions, and get_template to specify the template file.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dynamictabs.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass tab1 extends base {\n\n    /**\n     * Export this for use in a mustache template context.\n     *\n     * @param renderer_base $output\n     *\n     * @return stdClass\n     */\n    public function export_for_template(renderer_base $output) {\n        $content = (object)[];\n        $content->customtext = 'Tab 1 content example';\n        return $content;\n    }\n\n    /**\n     * The label to be displayed on the tab\n     *\n     * @return string\n     */\n    public function get_tab_label(): string {\n        return 'Tab 1';\n    }\n\n    /**\n     * Check permission of the current user to access this tab\n     *\n     * @return bool\n     */\n    public function is_available(): bool {\n        // Define the correct permissions here.\n        return true;\n    }\n\n    /**\n     * Template to use to display tab contents\n     *\n     * @return string\n     */\n    public function get_template(): string {\n        return 'tool_componentlibrary/dynamictabs_tab1';\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Sending HTTP Requests with Guzzle\nDESCRIPTION: This code snippet demonstrates how to send both synchronous and asynchronous HTTP requests using the Guzzle PHP HTTP client. It shows how to create a client, send a GET request, retrieve the status code, headers, and body of the response, and send an asynchronous request using promises.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$client = new \\GuzzleHttp\\Client();\n$response = $client->request('GET', 'https://api.github.com/repos/guzzle/guzzle');\n\necho $response->getStatusCode(); // 200\necho $response->getHeaderLine('content-type'); // 'application/json; charset=utf8'\necho $response->getBody(); // '{\"id\": 1420053, \"name\": \"guzzle\", ...}'\n\n// Send an asynchronous request.\n$request = new \\GuzzleHttp\\Psr7\\Request('GET', 'http://httpbin.org');\n$promise = $client->sendAsync($request)->then(function ($response) {\n    echo 'I completed! ' . $response->getBody();\n});\n\n$promise->wait();\n```\n\n----------------------------------------\n\nTITLE: Creating and Rendering a Bar Chart in PHP\nDESCRIPTION: Example code for creating a new bar chart with data series in PHP. The code instantiates a chart_bar object, creates a chart_series with a label and data, adds the series to the chart, and renders it using the Moodle OUTPUT renderer.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n  $chart1 = new chart_bar();\n  $series1 = new chart_series('Data type', $data);\n  $chart1->add_series($series1);\n  $OUTPUT->render($chart1);\n```\n\n----------------------------------------\n\nTITLE: Defining a Cache Configuration in Moodle PHP\nDESCRIPTION: This snippet demonstrates how to define a cache configuration in Moodle. It includes various optional parameters such as mode, key simplicity, data guarantees, and invalidation events. This configuration is used to set up specific caching behavior for different components.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$definitions = array(\n    'string' => array(                            // Required, unique to the component\n        'mode' => \\core_cache\\store::MODE_APPLICATION,  // Required\n        'simplekeys' => false,                    // Optional\n        'simpledata' => false,                    // Optional\n        'requireidentifiers' => array(            // Optional\n            'lang'\n        ),\n        'requiredataguarantee' => false,          // Optional\n        'requiremultipleidentifiers' => false,    // Optional\n        'requirelockingbeforewrite' => false,     // Optional\n        'requiresearchable' => false,             // Optional\n        'maxsize' => null,                        // Optional\n        'overrideclass' => null,                  // Optional\n        'overrideclassfile' => null,              // Optional\n        'datasource' => null,                     // Optional\n        'datasourcefile' => null,                 // Optional\n        'staticacceleration' => false,            // Optional\n        'staticaccelerationsize' => false,        // Optional\n        'ttl' => 0,                               // Optional\n        'mappingsonly' => false                   // Optional\n        'invalidationevents' => array(            // Optional\n            'contextmarkeddirty'\n        ),\n        'canuselocalstore' => false               // Optional\n        'sharingoptions' => null                  // Optional\n        'defaultsharing' => null                  // Optional\n    )\n);\n```\n\n----------------------------------------\n\nTITLE: Initializing Emoji Picker with jQuery and Templates\nDESCRIPTION: Example showing how to initialize and integrate the emoji picker using jQuery, Moodle's template system, and the emoji picker module. The code sets up a callback function to display selected emojis and renders the picker template.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/emojipicker.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nrequire([\n    'jquery',\n    'core/templates',\n    'core/emoji/picker'\n],\nfunction(\n    $,\n    templates,\n    emojiPicker\n) {\n  var emojiCallback = function(emoji) {\n    $('[data-region=\"emojivalue\"]').html(emoji);\n  }\n\n    var testArea = $('[data-region=\"emojipickertest\"]');\n    templates.render('core/emoji/picker', {}).done(function(html, js) {\n        templates.replaceNodeContents(testArea, html, js);\n          emojiPicker(testArea[0], emojiCallback);\n    });\n\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Dynamic Tabs on a Moodle Page\nDESCRIPTION: This snippet shows how to instantiate tab objects and render them on a page. The tabs are created with data attributes that can be accessed within tab classes, and then rendered using the dynamic_tabs template with the Moodle output renderer.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dynamictabs.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n    $tabs = [\n        new tab1(['demotab' => 'Tab1', 'reportid' => $reportid]),\n        new tab2(['demotab' => 'Tab2']),\n    ];\n    echo $OUTPUT->render_from_template('core/dynamic_tabs', (new dynamic_tabs($tabs))->export_for_template($OUTPUT));\n```\n\n----------------------------------------\n\nTITLE: Behat Test Steps Definition\nDESCRIPTION: Behat test step definitions for common Moodle interactions like sending messages, managing users and groups, and form interactions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_87\n\nLANGUAGE: gherkin\nCODE:\n```\nI send \"<message_contents_string>\" message to \"<username_string>\"\nI add \"<user_username_string>\" user to \"<cohort_idnumber_string>\" cohort\nI add \"<username_string>\" user to \"<group_name_string>\" group\nI fill in \"<field_string>\" with \"<value_string>\"\nI select \"<option_string>\" from \"<select_string>\"\nI select \"<radio_button_string>\" radio button\nI check \"<option_string>\"\nI uncheck \"<option_string>\"\nthe \"<field_string>\" field should match \"<value_string>\" value\nthe \"<checkbox_string>\" checkbox should be checked\nthe \"<checkbox_string>\" checkbox should not be checked\n```\n\n----------------------------------------\n\nTITLE: Hook Implementation for Course Module Background Deletion\nDESCRIPTION: New hook for plugin developers to indicate if course module deletion should be handled as a background task. Used in conjunction with existing pre-deletion hook.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_88\n\nLANGUAGE: php\nCODE:\n```\n<component>_course_module_background_deletion_recommended()\n```\n\n----------------------------------------\n\nTITLE: Adding `mtrace_exception` Helper Function\nDESCRIPTION: There is a new helper function `mtrace_exception` to help with reporting exceptions you have caught in scheduled tasks.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_46\n\n\n\n----------------------------------------\n\nTITLE: Rendering Icons in Mustache Templates\nDESCRIPTION: Shows the syntax for rendering Moodle icons in Mustache templates, referencing the icon by its identifier and component.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/moodle-icons.md#2025-04-21_snippet_0\n\nLANGUAGE: mustache\nCODE:\n```\n{{#pix}} i/edit, core {{/pix}}\n```\n\n----------------------------------------\n\nTITLE: Confirmation Modal with Toast Notification\nDESCRIPTION: HTML for a confirmation modal that displays a toast notification after confirmation. Additional data attributes specify that a toast should be shown and define the toast message content.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-confirmation=\"modal\" data-confirmation-title-str='[\"save\", \"core\"]'\ndata-confirmation-content-str='[\"areyousure\"]' data-confirmation-yes-button-str='[\"save\", \"core\"]' data-confirmation-toast=\"true\"\ndata-confirmation-toast-confirmation-str='[\"saved\", \"core_question\", \"My question\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Advanced Cache Request Flow with Data Source\nDESCRIPTION: Demonstrates an advanced cache request flow with chained stores and a data source, showing how a cache miss is handled by retrieving data from the source and caching it at multiple levels.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n=> Code calls get\n    => Loader handles get, passes the request to its store\n        => Memcache handles request, doesn't have it passes it to the chained store\n            => File (default store) doesn't have it requests it from the loader\n                => Data source - makes required db calls, processes information\n                    ...database calls...\n                    ...processing and moulding...\n                <= Data source returns the information\n            <= File caches the information on its way back through\n        <= Memcache caches the information on its way back through\n    <= Loader returns the data to the user.\n|= Code the code now has the data.\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Confirmation Modal in HTML\nDESCRIPTION: HTML code to create a button that triggers a confirmation modal dialog. The data attributes specify the modal's title, content, and button text using Moodle string identifiers.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-confirmation=\"modal\" data-confirmation-title-str='[\"delete\", \"core\"]'\ndata-confirmation-content-str='[\"areyousure\"]' data-confirmation-yes-button-str='[\"delete\", \"core\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Removal of get_grade_item_id Step Helper - PHP\nDESCRIPTION: The `behat_gradereport_grader::get_grade_item_id` step helper has been removed. Developers are instructed to use the `behat_grades` method as a replacement going forward, ensuring that user implementations remain functional.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_23\n\nLANGUAGE: php\nCODE:\n```\n// Removed behat_gradereport_grader::get_grade_item_id step helper, please use the equivalent behat_grades method instead\n// For more information see [MDL-77107](https://tracker.moodle.org/browse/MDL-77107)\n```\n\n----------------------------------------\n\nTITLE: Adding get_psr_stream Functionality - PHP\nDESCRIPTION: This snippet introduces a new optional function in the file_system class that allows extending implementations to return streams implementing StreamInterface, enhancing interoperability and functionality for file handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_61\n\nLANGUAGE: php\nCODE:\n```\n  * The file_system class now declares a new, optional, `get_psr_stream` function which allows a Stream implementing `\\Psr\\Http\\Message\\StreamInterface` to be returned.\n  A default implementation which uses the existing file handle resource is used by default, but this should be extended by file_system implementations where relevant.\n```\n\n----------------------------------------\n\nTITLE: Encoding JWT with Multiple Keys\nDESCRIPTION: This snippet illustrates how to encode a JWT using multiple keys by referencing different private/public key pairs for the RS256 and EdDSA algorithms. This showcases the flexibility of the Firebase JWT library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\Key;\n\n$payload = [\n    'iss' => 'example.org',\n    'aud' => 'example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$jwt1 = JWT::encode($payload, $privateKey1, 'RS256', 'kid1');\n$jwt2 = JWT::encode($payload, $privateKey2, 'EdDSA', 'kid2');\necho \"Encode 1:\\n\" . print_r($jwt1, true) . \"\\n\";\necho \"Encode 2:\\n\" . print_r($jwt2, true) . \"\\n\";\n\n$keys = [\n    'kid1' => new Key($publicKey1, 'RS256'),\n    'kid2' => new Key($publicKey2, 'EdDSA'),\n];\n\n$decoded1 = JWT::decode($jwt1, $keys);\n$decoded2 = JWT::decode($jwt2, $keys);\necho \"Decode 1:\\n\" . print_r((array) $decoded1, true) . \"\\n\";\necho \"Decode 2:\\n\" . print_r((array) $decoded2, true) . \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Event Triggering on Role and User Creation - PHP\nDESCRIPTION: This snippet discusses the introduction of event triggering mechanisms when roles and users are created. Such events improve extensibility and allow developers to hook into system changes effectively.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_54\n\nLANGUAGE: php\nCODE:\n```\n  * A `\\core\\event\\role_created` event is now triggered when roles are created via the `create_role` API.\n  * Event \\core\\event\\user_created is now triggered if the user is created during course restore. In this case\n  $event->other has properties 'restoreid' and 'courseid'.\n```\n\n----------------------------------------\n\nTITLE: WebAuthn Registration Workflow\nDESCRIPTION: JavaScript and server-side workflow for registering a new WebAuthn credential. The process involves a fetch request to get creation arguments, creating credentials using the WebAuthn API, and processing the result on the server.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/webauthn/README.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.fetch  ----------------->     getCreateArgs\n                                             |\nnavigator.credentials.create   <-------------'\n        |\n        '------------------------->     processCreate\n                                             |\n      alert ok or fail      <----------------'\n```\n\n----------------------------------------\n\nTITLE: Using Grade Update with Feedback Files in PHP\nDESCRIPTION: Example showing how to add file feedback to grades using grade_update() function by passing feedbackfiles parameter with context, component, filearea and itemid details.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_81\n\nLANGUAGE: php\nCODE:\n```\n$grades['feedbackfiles'] = [\n    'contextid' => 1,\n    'component' => 'mod_xyz', \n    'filearea' => 'mod_xyz_feedback',\n    'itemid' => 2\n];\n```\n\n----------------------------------------\n\nTITLE: Rendering Default Activity Icon in PHP\nDESCRIPTION: Demonstrates how to render the default activity icon for a quiz using the core_course\\output\\activity_icon class and a renderer.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n\n$icon = activity_icon::from_modname('quiz');\n\necho $renderer->render($icon);\n```\n\n----------------------------------------\n\nTITLE: Initializing JavaScript Notification in Moodle\nDESCRIPTION: This JavaScript code demonstrates how to create and display a notification using Moodle's core/notification module. It sets up a click event listener on a button to trigger the notification.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/notifications.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(\n[\n    'core/notification'\n],\nfunction(\n    Notification\n) {\n    document.querySelector('[data-action=\"shownotification\"]').addEventListener('click', function() {\n        Notification.alert('Notification message', 'Extra content for notification message');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Encoding and Decoding JWT with HS256\nDESCRIPTION: This example illustrates how to create a JWT using the HS256 algorithm. It includes payload definition, encoding the JWT, decoding it, and extracting header values. The snippet emphasizes the importance of specified algorithms for secure processing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\Key;\n\n$key = 'example_key';\n$payload = [\n    'iss' => 'http://example.org',\n    'aud' => 'http://example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$jwt = JWT::encode($payload, $key, 'HS256');\n$decoded = JWT::decode($jwt, new Key($key, 'HS256'));\nprint_r($decoded);\n\n$headers = new stdClass();\n$decoded = JWT::decode($jwt, new Key($key, 'HS256'), $headers);\nprint_r($headers);\n\n$decoded_array = (array) $decoded;\nJWT::$leeway = 60;\n$decoded = JWT::decode($jwt, new Key($key, 'HS256'));\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom Activity Icons in PHP\nDESCRIPTION: Demonstrates how to implement custom activity icons by using the XXX_get_coursemodule_info() callback in a module's lib.php file.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$info = new cached_cm_info();\n$info->iconurl = new moodle_url('https://moodle.org/theme/moodleorg/pix/moodle_logo_small.svg');\n```\n\n----------------------------------------\n\nTITLE: Deprecating Gradereport User Group ESM\nDESCRIPTION: Indicates the deprecation of the gradereport_user/group ESM module and recommends using core_course/actionbar/group as a replacement. Related to Moodle tracker issue MDL-80745.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/report/user/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Deprecated: gradereport_user/group ESM\n// Recommended replacement: core_course/actionbar/group\n```\n\n----------------------------------------\n\nTITLE: Introducing FEATURE_COMPLETION Constant in Moodle 4.5\nDESCRIPTION: Introduces a new plugin support constant 'FEATURE_COMPLETION' which will be used to indicate when a plugin does not allow completion. This constant is enabled by default.\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n- A new `FEATURE_COMPLETION` plugin support constant has been added. In the future, this constant will be used to indicate when a plugin does not allow completion and it is enabled by default.\n```\n\n----------------------------------------\n\nTITLE: Retrieving and Setting Cache Data in Moodle PHP\nDESCRIPTION: This snippet shows how to retrieve data from a cache and set it if it doesn't exist. It demonstrates the use of the \\core_cache\\cache::make() method to create a cache instance based on a predefined configuration.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$cache = \\core_cache\\cache::make('core', 'string');\nif (!$component = $cache->get('component')) {\n    // get returns false if its not there and can't be loaded.\n    $component = generate_data();\n    $cache->set($component);\n}\n```\n\n----------------------------------------\n\nTITLE: New Method for HTTP Client Mocking in Tests\nDESCRIPTION: A new static method get_mocked_http_client() has been added to advanced_testcase to mock the core\\http_client class and update the DI container for unit testing.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_57\n\nLANGUAGE: PHP\nCODE:\n```\n\\advanced_testcase::get_mocked_http_client()\n```\n\n----------------------------------------\n\nTITLE: New Method get_number_of_unanswered_questions() in attemptlib.php (Moodle 4.0.2, 4.1)\nDESCRIPTION: A new method, `get_number_of_unanswered_questions()`, has been added to `mod/quiz/attemptlib.php`. This method allows you to retrieve the total number of unanswered questions in the current quiz attempt.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: text\nCODE:\n```\n\"New method called get_number_of_unanswered_questions() has been added to mod/quiz/attemptlib.php\n  to get the total number of unanswered questions in the current attempt.\"\n```\n\n----------------------------------------\n\nTITLE: Creating a Confirmation Modal in PHP\nDESCRIPTION: PHP code that generates a button with modal functionality using Moodle's output API, allowing for the same customization options as the HTML version.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\necho $OUTPUT->single_button('#', get_string('delete'), 'get', [\n    'data-modal' => 'modal',\n    'data-modal-title-str' => json_encode(['delete', 'core']),\n    'data-modal-content-str' => json_encode(['areyousure']),\n    'data-modal-yes-button-str' => json_encode(['delete', 'core'])\n]);\n```\n\n----------------------------------------\n\nTITLE: Enrolment Plugin Action Method in PHP\nDESCRIPTION: Implementation method for enrolment plugins to define user enrolment actions with support for modal rendering through data-action attributes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_85\n\nLANGUAGE: php\nCODE:\n```\nenrol_plugin::get_user_enrolment_actions()\n```\n\n----------------------------------------\n\nTITLE: Encoding and Decoding with EdDSA\nDESCRIPTION: This snippet demonstrates how to encode and decode a JWT using the EdDSA algorithm with keys generated using libsodium. It provides methods for creating and utilizing public/private key pairs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\Key;\n\n$keyPair = sodium_crypto_sign_keypair();\n$privateKey = base64_encode(sodium_crypto_sign_secretkey($keyPair));\n$publicKey = base64_encode(sodium_crypto_sign_publickey($keyPair));\n\n$payload = [\n    'iss' => 'example.org',\n    'aud' => 'example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$jwt = JWT::encode($payload, $privateKey, 'EdDSA');\necho \"Encode:\\n\" . print_r($jwt, true) . \"\\n\";\n$decoded = JWT::decode($jwt, new Key($publicKey, 'EdDSA'));\necho \"Decode:\\n\" . print_r((array) $decoded, true) . \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Implementing is_csv_upload_supported() for Enrolment Plugins in PHP\nDESCRIPTION: New function to check if an enrolment plugin is supported in CSV course upload. Override this in the enrolment plugin to enable CSV upload support.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nfunction is_csv_upload_supported() {\n    return false; // Default to false, override to enable support\n}\n```\n\n----------------------------------------\n\nTITLE: Loading Moodle Template with Custom JSON Data\nDESCRIPTION: This snippet shows how to use a Moodle template with custom JSON data. It demonstrates loading the 'core/notification_error' template with specific parameters for message, close button, announcement, and extra classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/moodle-templates.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n{{</* mustache template=\"core/notification_error\" */>}}\n{\n    \"message\": \"Your pants are awesome!\",\n    \"closebutton\": 1,\n    \"announce\": 1,\n    \"extraclasses\": \"foo bar\"\n}\n{{</* /mustache */>}}\n```\n\n----------------------------------------\n\nTITLE: Horizontal Bar Chart with Table Configuration\nDESCRIPTION: JSON configuration for a horizontal bar chart. The chart includes two data series for Sales and Expenses from 2004-2007. The 'horizontal' parameter is set to true to display horizontal bars, with an axis minimum value set to zero.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_6\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022bar\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022HORIZONTAL BAR CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[{\\u0022label\\u0022:null,\\u0022labels\\u0022:null,\\u0022max\\u0022:null,\\u0022min\\u0022:0,\\u0022position\\u0022:null,\\u0022stepSize\\u0022:null}]},\\u0022config_colorset\\u0022:null,\\u0022horizontal\\u0022:true,\\u0022stacked\\u0022:null}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: New Locations for Core Classes - PHP\nDESCRIPTION: Moves core classes to new namespaces to facilitate autoloading while maintaining support for existing class locations, thereby enhancing modularity.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_18\n\n\n\n----------------------------------------\n\nTITLE: Implementing Text Styling with Custom CSS Classes in HTML\nDESCRIPTION: Shows how to use Moodle's utility classes for text transformation (lowercase, uppercase), font weight (bold, normal), font style (italic), and text color (muted with reset option).\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<p class=\"text-lowercase\">Lowercased text.</p>\n<p class=\"text-uppercase\">Uppercased text.</p>\n<p class=\"fw-bold\">Bold text.</p>\n<p class=\"fw-normal\">Normal weight text.</p>\n<p class=\"fst-italic\">Italic text.</p>\n\n<p class=\"text-muted\">\n    Muted text with a <a href=\"#\" class=\"text-reset\">reset link</a>.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Implementing Enrolment Plugin Method in PHP\nDESCRIPTION: New method added to the enrol_plugin class to display additional details next to the instance name on the management page.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\nenrol_plugin::get_instance_name_for_management_page()\n```\n\n----------------------------------------\n\nTITLE: User Authentication Setup Sequence\nDESCRIPTION: The correct sequence for setting up the global $USER object in authentication plugins.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$user = get_complete_user_data('username', $username); // or $user = authenticate_user_login()\nenrol_check_plugins($user);\nsession_set_user($user);\n```\n\n----------------------------------------\n\nTITLE: Doughnut Chart with Table Configuration\nDESCRIPTION: JSON configuration for a doughnut chart with sales data from 2004-2007. This is similar to the pie chart but has the 'doughnut' parameter set to true. The 'withtable' parameter is set to true to display data in tabular format alongside the chart.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022pie\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022DOUGHNUT CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[]},\\u0022config_colorset\\u0022:null,\\u0022doughnut\\u0022:true}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: classes/output/edit_renderer.php Argument Changes (Moodle 2.9)\nDESCRIPTION: Several methods in `classes/output/edit_renderer.php` have had their arguments changed. Some methods used to take `$structure` and `$question` as the first two arguments, but now take `$structure` and `$slot` number.  Methods that used to take `$quiz` and `$question` now take `$structure` and `$slot` number. The `initialise_editing_javascript` method has had some redundant arguments removed.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_27\n\nLANGUAGE: text\nCODE:\n```\n\"There have been changes in classes/output/edit_renderer.php for MDL-40990.\n  + Some methods use to take $structure & $question as the first two arguments.\n    They now take $structure & $slot number. If you need $question, you can get\n    it using $question = $structure->get_question_in_slot($slot);\n  + Some methods used to take $quiz & $question. They now take $structure & $slot\n    number. You can get $question as above. $quiz is $structure->get_quiz().\n  + initialise_editing_javascript has had some redundant arguments removed.\n  Hopefully, with these changes, we will have less need to make other changes in future.\"\n```\n\n----------------------------------------\n\nTITLE: Regrading Final Grades Asynchronously in PHP\nDESCRIPTION: Added an 'async' parameter to grade_regrade_final_grades() to allow full course regrades to be performed in the background using an adhoc task.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\ngrade_regrade_final_grades($async)\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_course\\task\\regrade_final_grades\n```\n\n----------------------------------------\n\nTITLE: Adding Course Module Info Retrieval Method in PHP\nDESCRIPTION: A new method get_sequence_cm_infos() has been added to the \\section_info class to retrieve all \\cm_info instances associated with the course section.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_26\n\nLANGUAGE: PHP\nCODE:\n```\n\\section_info::get_sequence_cm_infos()\n```\n\n----------------------------------------\n\nTITLE: Adding Native Event to `core_filters/events` AMD Module\nDESCRIPTION: A new native event `eventTypes.filterContentRenderingComplete` has been created in the `core_filters/events` AMD module.  This event fires when the filter rendering is complete.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_14\n\n\n\n----------------------------------------\n\nTITLE: Generating Placeholder Images in PHP\nDESCRIPTION: PHP code snippet showing how to generate placeholder images for courses when no course image is provided, using the Moodle OUTPUT object.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/coursecards.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$OUTPUT->get_generated_image_for_id($id);\n```\n\n----------------------------------------\n\nTITLE: Adding Delete States Web Service in Moodle xAPI (Version 4.3)\nDESCRIPTION: Introduces a new web service for deleting all user state data for an activity in Moodle 4.3. Also adds a constraint for numeric activity IDs in the default state store.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xapi/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n* The default state store will throw and exception if the activity ID is not\n  a numeric value. This is to avoid problems with the database when using\n  the default state store. If a plugin requires a non numeric activity ID,\n  it must implement its own state store.\n* New xAPI state webservices:\n   - core_xapi_delete_states: delete all user state data for an activity\n```\n\n----------------------------------------\n\nTITLE: Creating and Using Cache with Parameters in Moodle PHP\nDESCRIPTION: This snippet demonstrates how to create a cache instance using parameters instead of a predefined configuration. It uses the \\core_cache\\cache::make_from_params() method to create the cache with specific mode, component, and area.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$cache = \\core_cache\\cache::make_from_params(\\core_cache\\store::MODE_APPLICATION, 'core', 'string');\nif (!$component = $cache->get('component')) {\n    // get returns false if its not there and can't be loaded.\n    $component = generate_data();\n    $cache->set($component);\n}\n```\n\n----------------------------------------\n\nTITLE: Stacked Bar Chart with Table Configuration\nDESCRIPTION: JSON configuration for a stacked bar chart. The chart includes two data series for Sales and Expenses from 2004-2007. The 'stacked' parameter is set to true to display the data series stacked on top of each other rather than side by side.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_7\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022bar\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022STACKED BAR CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[{\\u0022label\\u0022:null,\\u0022labels\\u0022:null,\\u0022max\\u0022:null,\\u0022min\\u0022:0,\\u0022position\\u0022:null,\\u0022stepSize\\u0022:null}]},\\u0022config_colorset\\u0022:null,\\u0022horizontal\\u0022:false,\\u0022stacked\\u0022:true}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Using JMESPath in PHP with Expressions\nDESCRIPTION: This snippet demonstrates how to use JMESPath expressions within a PHP application to extract data from JSON structures. It requires PHP 7.2.5 or greater and the `mtdowling/jmespath.php` package, installable via Composer. It showcases the use of the `JmesPath\\search` method for querying data based on expressions, which returns an array of results.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jmespath/README.rst#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nrequire 'vendor/autoload.php';\n\n$expression = 'foo.*.baz';\n\n$data = [\n    'foo' => [\n        'bar' => ['baz' => 1],\n        'bam' => ['baz' => 2],\n        'boo' => ['baz' => 3]\n    ]\n];\n\nJmesPath\\search($expression, $data);\n// Returns: [1, 2, 3]\n```\n\n----------------------------------------\n\nTITLE: Implementing Navigation Hooks for Local Plugin in PHP\nDESCRIPTION: Defines navigation extension functions for a local Moodle plugin to modify global and settings navigation.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nfunction local_nicehack_extend_navigation(global_navigation $nav) {\n    // $nav is the global navigation instance.\n    // Here you can add to and manipulate the navigation structure as you like.\n}\nfunction local_nicehack_extend_settings_navigation(settings_navigation $nav, context $context) {\n    // $nav is the settings navigation instance.\n    // $context is the context the settings have been loaded for\n}\n```\n\n----------------------------------------\n\nTITLE: Accessing H5P Global Settings in WebService (Moodle 4.2)\nDESCRIPTION: The WebService mod_h5pactivity_get_h5pactivities_by_courses now returns a `h5pglobalsettings` property that includes the global settings for H5P activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/h5pactivity/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nThe WebService mod_h5pactivity_get_h5pactivities_by_courses now returns a `h5pglobalsettings` property that includes the global settings for H5P activities.\n```\n\n----------------------------------------\n\nTITLE: Implementing include_after_restore Function in PHP\nDESCRIPTION: Example of implementing the include_after_restore function in a condition plugin to indicate if it should be removed during the restore process.\nSOURCE: https://github.com/moodle/moodle/blob/main/availability/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\npublic function include_after_restore($restoreid, $courseid, $logger) {\n    // Implementation logic here\n    return true; // or false\n}\n```\n\n----------------------------------------\n\nTITLE: Delete Confirmation Modal Example\nDESCRIPTION: HTML for a delete confirmation modal with delete-specific styling. This includes a data-confirmation-type attribute set to 'delete' which likely changes the appearance of the modal to indicate a destructive action.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-confirmation=\"modal\" data-confirmation-type=\"delete\" data-confirmation-title-str='[\"delete\", \"core\"]'\ndata-confirmation-content-str='[\"areyousure\"]' data-confirmation-yes-button-str='[\"delete\", \"core\"]'>Show delete modal</button>\n```\n\n----------------------------------------\n\nTITLE: Defining Web Services for Local Plugin in PHP\nDESCRIPTION: Configures web service functions and services for a local Moodle plugin with associated permissions and descriptions.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$$functions = array (\n    'nicehack_hello_world' => array(\n                'classname'   => 'local_nicehack_external',\n                'methodname'  => 'hello_world',\n                'classpath'   => 'local/nicehack/externallib.php',\n                'description' => 'Get hello world string',\n                'type'        => 'read',\n    ),\n);\n$services = array(\n        'Nice hack service 1' => array(\n                'functions' => array ('nicehack_hello_world'),\n                'enabled'=>1,\n        ),\n);\n```\n\n----------------------------------------\n\nTITLE: New Functions for Qbank Usage SQL Queries - PHP\nDESCRIPTION: Introduces new functions qbank_usage\\helper::get_question_bank_usage_sql and qbank_usage\\helper::get_question_attempt_usage_sql, emphasizing the need for careful ordering in the $params array when executing the returned SQL queries.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/upgrade.txt#2025-04-21_snippet_3\n\n\n\n----------------------------------------\n\nTITLE: Creating a Confirmation Modal with Toast Notification\nDESCRIPTION: HTML code implementing a confirmation modal that displays a toast notification after confirmation, with customized toast message.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"confirmation\" data-modal-title-str='[\"delete\", \"core\"]'\ndata-modal-content-str='[\"areyousure\"]' data-modal-yes-button-str='[\"delete\", \"core\"]' data-modal-toast=\"true\"\ndata-modal-toast-confirmation-str='[\"deleteblockinprogress\", \"block\", \"Online users\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Using Cache with Data Source in Moodle PHP\nDESCRIPTION: This snippet shows how to use a cache when a data source has been specified in the definition. In this case, the cache automatically handles data retrieval if the item is not in the cache.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$cache = \\core_cache\\cache::make('core', 'string');\n$component = $cache->get('component');\n```\n\n----------------------------------------\n\nTITLE: Loading and Executing AMD Modules in Moodle\nDESCRIPTION: This snippet demonstrates how to load and execute AMD modules in Moodle using RequireJS syntax within Mustache templates. It shows how to require a Toast module from the Boost theme and initialize it with a DOM element.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/moodle-javascript.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"toasttest\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" class=\"toast\" data-autohide=\"false\">\n  <div class=\"toast-header\">\n    <img src=\"http://placekitten.com/50/50\" class=\"rounded me-2\" alt=\"PlaceKitten\">\n    <strong class=\"me-auto\">Bootstrap</strong>\n    <small>11 mins ago</small>\n    <button type=\"button\" class=\"ms-2 mb-1 btn-close\" data-dismiss=\"toast\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"toast-body\">\n    Hello, world! This is a toast message.\n  </div>\n</div>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(\n[\n    'theme_boost/toast',\n],\nfunction(\n    Toast\n) {\n    const toastTrigger = document.getElementById('toasttest');\n    new Toast(toastTrigger).show();\n});\n```\n\n----------------------------------------\n\nTITLE: Including the Composer Autoloader in PHP\nDESCRIPTION: PHP code to require the Composer autoloader, which is necessary after installing dependencies to use the GeoIP2 library in your application.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nrequire 'vendor/autoload.php';\n```\n\n----------------------------------------\n\nTITLE: Moving Context Classes to `\\core\\context` Namespace\nDESCRIPTION: All context classes were moved to the `\\core\\context` namespace while keeping full backwards compatibility. It is not necessary to update plugins unless they rely on exact class names returned from `get_class()` or `context_helper`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_34\n\n\n\n----------------------------------------\n\nTITLE: Resolving Promises in PHP\nDESCRIPTION: This example shows how to resolve a promise, triggering the `$onFulfilled` callbacks. The `$onFulfilled` callbacks are chained, with the return value of one callback being passed to the next. The example demonstrates how resolving the promise triggers the execution of these callbacks, resulting in the output 'Hello, reader.'.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(function ($value) {\n        // Return a value and don't break the chain\n        return \\\"Hello, \\\" . $value;\n    })\n    // This then is executed after the first then and receives the value\n    // returned from the first then.\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Resolving the promise triggers the $onFulfilled callbacks and outputs\n// \\\"Hello, reader.\\\".\n$promise->resolve('reader.');\"\n```\n\n----------------------------------------\n\nTITLE: Generating PHP Notification in Moodle Core Renderer\nDESCRIPTION: This PHP snippet shows how to create a notification using Moodle's core renderer. It specifies the message content and notification type.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/notifications.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$OUTPUT->notification('message', 'info');\n```\n\n----------------------------------------\n\nTITLE: Creating a Confirmation Modal with Redirect\nDESCRIPTION: HTML code implementing a confirmation modal that redirects the user to a specified URL after confirmation.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_6\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"confirmation\" data-modal-title-str='[\"delete\", \"core\"]'\ndata-modal-content-str='[\"areyousure\"]' data-modal-yes-button-str='[\"delete\", \"core\"]'\ndata-modal-destination=\"http://moodle.com\">Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Implementing is_self_enrol_available() for Enrolment Plugins in PHP\nDESCRIPTION: New function to check if self-enrolment is available, similar to can_self_enrol but without checking user capabilities.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nfunction is_self_enrol_available() {\n    // Implementation to check if self-enrolment is available\n    // Return boolean\n}\n```\n\n----------------------------------------\n\nTITLE: Adding `properties_filter` Method to Persistent Class\nDESCRIPTION: A new `properties_filter` method has been added to the persistent class for filtering properties of a record against a persistent definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_43\n\n\n\n----------------------------------------\n\nTITLE: Defining Read-Only External Functions in services.php\nDESCRIPTION: External functions can be called without requiring a session lock if they define 'readonlysession' => true in db/services.php. This also requires $CFG->enable_read_only_sessions to be set to true.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_76\n\nLANGUAGE: PHP\nCODE:\n```\n'readonlysession' => true\n```\n\n----------------------------------------\n\nTITLE: Introducing Visibility and Permission Fields in Groups Table - PHP\nDESCRIPTION: This snippet outlines new fields related to visibility and participation in the groups table, providing enhanced access control and filtering capabilities for group functionalities in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_58\n\nLANGUAGE: php\nCODE:\n```\n  * Addition of new 'visibility' and 'participation' fields in the groups table, and 'moodle/group:viewhiddengroups' capability.\n  The following grouplib functions will now return groups and members based on group visibility and the user's permissions:\n   - groups_get_all_groups()\n   - groups_get_user_groups()\n   - groups_get_my_groups()\n   - groups_is_member()\n   - groups_get_members()\n   - groups_get_groups_members()\n  groups_print_activity_menu() will now only return groups where particiation == true.\n```\n\n----------------------------------------\n\nTITLE: Creating an Alert Modal with Example\nDESCRIPTION: HTML code showing a complete implementation of an alert modal button with title and content strings from the core language pack.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"alert\" data-modal-title-str='[\"cookiesenabled\", \"core\"]'\ndata-modal-content-str='[\"cookiesenabled_help_html\", \"core\"]'>Show alert modal</button>\n```\n\n----------------------------------------\n\nTITLE: Rendering Notification Badge Using Core Renderer in PHP\nDESCRIPTION: Demonstrates how to create and render a notification badge using Moodle's core_renderer, including badge style configuration and action link creation.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/alert-badge.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Get the core renderer.\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n\n// Save the badge into a variable.\n$badge = $renderer->notice_badge(\n    contents: ($needgrading > 0) ? $needgrading : '',\n    title: get_string('numberofsubmissionsneedgrading', 'assign'),\n    badgestyle: \\core\\output\\local\\properties\\badge::SECONDARY,\n);\n\n$content = new action_link(\n    url: new url('/some/index.php'),\n    text: get_string('gradeverb') . $badge,\n);\necho $renderer->render($content);\n```\n\n----------------------------------------\n\nTITLE: Adding Headers to PSR-7 Response in PHP\nDESCRIPTION: Demonstrates how to add custom headers to a PSR-7 response object. This operation is immutable, returning a new instance with the added header.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$response->withHeader('My-Custom-Header', 'My Custom Message');\n```\n\n----------------------------------------\n\nTITLE: Rendering a Basic Mustache Template in PHP\nDESCRIPTION: A simple example demonstrating how to initialize the Mustache engine and render a basic template with a single variable. The template contains a placeholder '{{planet}}' that is replaced with 'World!' during rendering.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$m = new Mustache_Engine;\necho $m->render('Hello {{planet}}', array('planet' => 'World!')); // \"Hello World!\"\n```\n\n----------------------------------------\n\nTITLE: Version 3.8 Custom Field API Methods\nDESCRIPTION: Introduction of two new functions for course grouping support in custom fields, specifically for integration with the myoverview block. These functions enable custom fields to be used for grouping courses in the course overview interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/field/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nsupports_course_grouping()\ncourse_grouping_format_values()\n```\n\n----------------------------------------\n\nTITLE: Implementing Multiple Course Cards Data Structure\nDESCRIPTION: Extended JSON example showing data structure for multiple course cards in a deck, demonstrating various course types with different images and categories.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/coursecards.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"courses\": [\n        {\n            \"viewurl\": \"https://moodlesite/course/view.php?id=2\",\n            \"courseimage\": \"https://placekitten.com/300/500\",\n            \"fullname\": \"Mathematics Year One\",\n            \"isfavourite\": true,\n            \"coursecategory\": \"Category 1\",\n            \"showcoursecategory\": true,\n            \"visible\": true\n        },\n        {\n            \"viewurl\": \"https://moodlesite/course/view.php?id=3\",\n            \"courseimage\": \"https://placekitten.com/330/500\",\n            \"fullname\": \"Health and Safety\",\n            \"isfavourite\": false,\n            \"coursecategory\": \"Business\",\n            \"showcoursecategory\": true,\n            \"visible\": true\n        },\n        {\n            \"viewurl\": \"https://moodlesite/course/view.php?id=4\",\n            \"courseimage\": \"https://placekitten.com/360/500\",\n            \"fullname\": \"French Advanced\",\n            \"isfavourite\": false,\n            \"coursecategory\": \"Languages\",\n            \"showcoursecategory\": true,\n            \"visible\": true\n        },\n        {\n            \"viewurl\": \"https://moodlesite/course/view.php?id=4\",\n            \"courseimage\": \"https://placekitten.com/360/400\",\n            \"fullname\": \"French Year one\",\n            \"isfavourite\": false,\n            \"coursecategory\": \"Languages\",\n            \"showcoursecategory\": true,\n            \"visible\": true\n        }\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Deprecated Function no_questions_message() in mod_quiz_renderer (Moodle 4.0)\nDESCRIPTION: The function `no_questions_message()` in class `mod_quiz_renderer` is deprecated and has no replacement. Developers using this function should find alternative solutions.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_9\n\nLANGUAGE: text\nCODE:\n```\n\"The function no_questions_message() in class mod_quiz_renderer is deprecated. There is no replacement.\"\n```\n\n----------------------------------------\n\nTITLE: Creating Link with Text Indicator for New Window in HTML\nDESCRIPTION: This example shows how to create a link that opens in a new window, using text to explicitly state the behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/links.md#2025-04-21_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"https://moodle.org\" target=\"_blank\">\n    Moodle.org (Opens in new window)\n</a>\n```\n\n----------------------------------------\n\nTITLE: Setting POST Body Fields and Files in Guzzle 4.0\nDESCRIPTION: Example showing how to set form fields and add files to a POST request body using the new Guzzle 4.0 API. Uses the createRequest method and accesses the body through getBody().\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$request = $client->createRequest('POST', '/');\n$request->getBody()->setField('foo', 'bar');\n$request->getBody()->addFile(new PostFile('file_key', fopen('/path/to/content', 'r')));\n```\n\n----------------------------------------\n\nTITLE: Adding Visibility Methods to Content Class in PHP\nDESCRIPTION: Two new methods, 'set_visibility()' and 'get_visibility()', have been added to allow users to control whether their content should be listed in the content bank.\nSOURCE: https://github.com/moodle/moodle/blob/main/contentbank/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nset_visibility()\nget_visibility()\n```\n\n----------------------------------------\n\nTITLE: Basic Button Types HTML Implementation\nDESCRIPTION: Example showing the four main button types used in Moodle: primary, secondary, danger, and outline buttons.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/buttons.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\">Primary Button</button>\n<button type=\"button\" class=\"btn btn-secondary\">Secondary Button</button>\n<button type=\"button\" class=\"btn btn-danger\">Danger Button</button>\n<button type=\"button\" class=\"btn btn-outline-secondary\">Outline Button</button>\n```\n\n----------------------------------------\n\nTITLE: Focus Management JavaScript Implementation\nDESCRIPTION: JavaScript code that handles focus management for demonstration purposes, including a show focus button that programmatically focuses elements and prevents default link behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/keyboard-access.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nvar exampleContainer = document.querySelector('#focusexamples');\n\ndocument.getElementById(\"showfocus\").addEventListener('click', function(){\n    var elements = exampleContainer.querySelectorAll('.focusloop');\n    elements.forEach(function(item) {\n        item.focus();\n        item.classList.add('focus');\n    });\n});\n\nexampleContainer.querySelectorAll('.aalink').forEach(function (link) {\n    window.console.log(link);\n    link.addEventListener('click', function (e) {\n        e.preventDefault();\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Task Indicator in PHP\nDESCRIPTION: This code demonstrates how to conditionally render the task indicator on a page. It checks if there's a queued task record before outputting the indicator.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/task-indicator.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nif ($taskindicator->has_task_record()) {\n    echo $OUTPUT->render($taskindicator);\n}\n```\n\n----------------------------------------\n\nTITLE: Introducing Routed REST API JavaScript Module\nDESCRIPTION: A new JavaScript module for interacting with the Routed REST API has been introduced. Refer to the documentation in the core/fetch module for more information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_25\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Refer to core/fetch module documentation\n```\n\n----------------------------------------\n\nTITLE: Deprecating get_shortcuts() Callback - PHP\nDESCRIPTION: This entry describes the deprecation of the 'get_shortcuts()' callback in favor of using 'get_course_content_items()' and 'get_all_content_items()' in Moodle's activity modules to enhance module functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nget_course_content_items();\nget_all_content_items();\n```\n\n----------------------------------------\n\nTITLE: New Method for Checking Filtered User IDs in PHP (Moodle 4.1)\nDESCRIPTION: Introduces a new method is_userid_filtered() in the assign class to check if a user ID is filtered out based on user preferences or submission status filter.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n\\assign::is_userid_filtered()\n```\n\n----------------------------------------\n\nTITLE: Implementing Auto Search Input with Clear Option in Moodle\nDESCRIPTION: This code shows the implementation of an auto search input with a clear option using the core/search_input_auto template. This search option immediately triggers updates to data displayed below the search and includes a clear button that clears the input on typing.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/search-input.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n        \"placeholder\": \"Search settings\",\n        \"uniqid\": \"45\"\n    }\n```\n\n----------------------------------------\n\nTITLE: Implementing Course Card Data Structure in Mustache\nDESCRIPTION: Example JSON data structure for rendering a single course card showing required fields like viewurl, courseimage, fullname, isfavourite, coursecategory, and visibility settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/coursecards.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"courses\": [\n        {\n            \"viewurl\": \"https://moodlesite/course/view.php?id=2\",\n            \"courseimage\": \"https://placekitten.com/300/500\",\n            \"fullname\": \"Mathematics Year One\",\n            \"isfavourite\": true,\n            \"coursecategory\": \"Category 1\",\n            \"showcoursecategory\": true,\n            \"visible\": true\n        }\n    ]\n}\n```\n\n----------------------------------------\n\nTITLE: Using the Regex Class with Result Objects\nDESCRIPTION: Alternative object-oriented approach using the Regex class that returns result objects instead of using by-reference arguments, providing a more verbose but potentially clearer API.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse Composer\\Pcre\\Regex;\n\n// this is useful when you are just interested in knowing if something matched\n// as it returns a bool instead of int(1/0) for match\n$bool = Regex::isMatch('{fo+}', $string);\n\n$result = Regex::match('{fo+}', $string);\nif ($result->matched) { something($result->matches); }\n\n$result = Regex::matchWithOffsets('{fo+}', $string);\nif ($result->matched) { something($result->matches); }\n\n$result = Regex::matchAll('{fo+}', $string);\nif ($result->matched && $result->count > 3) { something($result->matches); }\n\n$newString = Regex::replace('{fo+}', 'bar', $string)->result;\n$newString = Regex::replaceCallback('{fo+}', function ($match) { return strtoupper($match[0]); }, $string)->result;\n$newString = Regex::replaceCallbackArray(['{fo+}' => fn ($match) => strtoupper($match[0])], $string)->result;\n```\n\n----------------------------------------\n\nTITLE: Implementing Checked Toggle with Hidden Label in Moodle\nDESCRIPTION: Example of implementing a checked toggle input with a visually hidden label. Uses the core/toggle template with data attributes for actions.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/toggle.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"id\": \"example-toggle-1\",\n    \"checked\": true,\n    \"dataattributes\": [{\n        \"name\": \"action\",\n        \"value\": \"toggle-status\"\n    }],\n    \"title\": \"Toggle Enabled\",\n    \"label\": \"Enable/disable status\",\n    \"labelclasses\": \"visually-hidden\"\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Factor Management File Path in Moodle MFA Tool\nDESCRIPTION: The factor management table now uses plugin_management_table, requiring the file to be moved from admin/tool/mfa/classes/local/admin_setting_managemfa.php to admin/tool/mfa/classes/table/admin_setting_managemfa.php. This change is part of the upgrades in Moodle 5.0 MFA tool.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nadmin/tool/mfa/classes/local/admin_setting_managemfa.php to admin/tool/mfa/classes/table/admin_setting_managemfa.php\n```\n\n----------------------------------------\n\nTITLE: PHP Method Replacements in Moodle Core\nDESCRIPTION: Lists deprecated methods and their recommended replacements across various Moodle subsystems including context handling, enrollment, output, navigation, and file management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_98\n\nLANGUAGE: php\nCODE:\n```\nget_related_contexts_string() -> $context->get_parent_context_ids(true)\nget_course_participants() -> get_enrolled_users()\nis_course_participant() -> is_enrolled()\ncurrent_theme() -> $PAGE->theme->name\nskip_main_destination() -> $OUTPUT->skip_link_target()\n```\n\n----------------------------------------\n\nTITLE: Deprecating gradereport_singleview/group ESM\nDESCRIPTION: This snippet indicates the deprecation of the `gradereport_singleview/group` ESM. It suggests using `core_course/actionbar/group` as a replacement. This change was implemented as part of MDL-80745.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/report/singleview/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: none\nCODE:\n```\nThe `gradereport_singleview/group` ESM has been deprecated. Please use `core_course/actionbar/group` instead.\n\n  For more information see [MDL-80745](https://tracker.moodle.org/browse/MDL-80745)\n```\n\n----------------------------------------\n\nTITLE: Implementing a Confirmation Modal in HTML\nDESCRIPTION: HTML code to create a button that displays a confirmation modal dialog with customizable title, content, and yes-button text.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"confirmation\" data-modal-title-str='[\"delete\", \"core\"]'\ndata-modal-content-str='[\"areyousure\"]' data-modal-yes-button-str='[\"delete\", \"core\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Updating `\\single_button` Constructor Signature\nDESCRIPTION: The `\\single_button` constructor signature has been changed. The boolean \"primary\" parameter has been deprecated and replaced by a more generic type allowing to use Bootstrap styles of buttons (danger, warning...). The constructor will still manage the boolean primary parameter but will display a debugging message.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_37\n\n\n\n----------------------------------------\n\nTITLE: Updating Enrollment Methods to Handle Multiple Groups\nDESCRIPTION: The methods `get_enrolled_with_capabilities_join`, `get_enrolled_sql`, `get_enrolled_users`, and `count_enrolled_users` in `enrollib.php` now accept all group-related options that `groups_get_members_join` can handle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_38\n\n\n\n----------------------------------------\n\nTITLE: PHP Hook Function Example - Pre User Delete\nDESCRIPTION: Example of implementing a pre-user-delete hook in a Moodle module. The function allows interaction with the user object before deletion.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_90\n\nLANGUAGE: php\nCODE:\n```\nmod_xxx_pre_user_delete($user)\n```\n\n----------------------------------------\n\nTITLE: JSON Configuration for Moodle Subplugins\nDESCRIPTION: The updated format for subplugins.json that accepts a new 'subplugintypes' object. Paths should be relative to the plugin root instead of the Moodle document root. Both subplugintypes and plugintypes can co-exist but must be kept in sync.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: JSON\nCODE:\n```\n{\n    \"subplugintypes\": {\n        \"tiny\": \"plugins\"\n    },\n    \"plugintypes\": {\n        \"tiny\": \"lib/editor/tiny/plugins\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Semantic Toast Styles\nDESCRIPTION: Demonstrates how to display toast notifications with different semantic styles (success, danger, warning, info). Uses data attributes to determine the toast type.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/toast.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['core/toast'], Toast => {\n    const container = document.querySelector(\"[data-example-name='semantic']\").parentNode;\n    container.addEventListener('click', e => {\n        if (!e.target.closest('[data-type]')) {\n            return;\n        }\n        Toast.add(`This toast will be displayed with the ${e.target.dataset.type} type.`, {\n            type: e.target.dataset.type,\n        });\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Uploading File to Amazon S3 Using AWS SDK\nDESCRIPTION: Demonstrates how to upload a file to an S3 bucket with public read access. Includes error handling for potential upload failures.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/aws-sdk/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n// Upload a publicly accessible file. The file size and type are determined by the SDK.\ntry {\n    $s3->putObject([\n        'Bucket' => 'my-bucket',\n        'Key'    => 'my-object',\n        'Body'   => fopen('/path/to/file', 'r'),\n        'ACL'    => 'public-read',\n    ]);\n} catch (Aws\\S3\\Exception\\S3Exception $e) {\n    echo \"There was an error uploading the file.\\n\";\n}\n```\n\n----------------------------------------\n\nTITLE: Creating an Interactive Button with Spinner in Moodle\nDESCRIPTION: This example demonstrates a button with a toggleable spinner animation. When clicked, the button uses jQuery to toggle the 'spinner-grow' class on the span element, creating a loading indicator effect.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/example.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"example w-25 border border-secondary p-3\">\n    <button class=\"btn btn-primary btn-block\" id=\"clickme\">\n        Click me\n        <span id=\"waiting\" class=\"spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n    </button>\n</div>\n```\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['jquery'], function($) {\n    $('#clickme').on('click', function() {\n        $('#waiting').toggleClass('spinner-grow');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: WebAuthn Validation Workflow\nDESCRIPTION: JavaScript and server-side workflow for validating an existing WebAuthn credential. The process involves fetching validation arguments, getting credentials using the WebAuthn API, and processing the authentication on the server.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/webauthn/README.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nwindow.fetch ------------------>      getGetArgs\n                                             |\nnavigator.credentials.get   <----------------'\n        |\n        '------------------------->      processGet\n                                             |\n      alert ok or fail      <----------------'\n```\n\n----------------------------------------\n\nTITLE: Replacing Events in Moodle 3.2 Choice Module\nDESCRIPTION: The answer_submitted and answer_updated events are replaced by answer_created and answer_deleted events. These new events are triggered for each option selected or unselected. The related user can be found in $event->relateduserid.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/choice/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\nmod_choice\\event\\answer_created\nmod_choice\\event\\answer_deleted\n$event->relateduserid\n```\n\n----------------------------------------\n\nTITLE: Adding Password Length Constants and Methods\nDESCRIPTION: A new constant `MAX_PASSWORD_CHARACTERS` has been added to `moodlelib.php` to hold the accepted password length.  A new method `exceeds_password_length` has been added to `moodlelib.php` to validate the password length.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_24\n\n\n\n----------------------------------------\n\nTITLE: Updating get_groups() Method in core_availability\\info Class for PHP\nDESCRIPTION: The base class \\core_availability\\info::get_groups() method now accepts a $userid parameter to specify which user you want to retrieve course groups for. If not provided, it defaults to the current user.\nSOURCE: https://github.com/moodle/moodle/blob/main/availability/condition/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_availability\\info::get_groups($userid = null)\n```\n\n----------------------------------------\n\nTITLE: Rendering Icons in PHP\nDESCRIPTION: Demonstrates how to use the pix_icon method in PHP to retrieve HTML for a Moodle icon, specifying the icon identifier, alt text, and component.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/moodle-icons.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$icon = $OUTPUT->pix_icon('i/edit', 'Edit me', 'moodle');\n```\n\n----------------------------------------\n\nTITLE: Local Language Pack Modification in Moodle\nDESCRIPTION: This code snippet demonstrates how to customize a standard language pack in Moodle by creating a new dataroot directory with the \"_local\" suffix. The example changes the string \"Login\" to \"Sign in\" in the English language pack.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n  $string['login'] = 'Sign in';\n```\n\n----------------------------------------\n\nTITLE: Queuing Adhoc Task with Progress Initialization in PHP\nDESCRIPTION: This snippet demonstrates how to queue an adhoc task and initialize its stored progress for use with the task indicator. It creates a task instance, queues it, and sets up the progress tracking.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/task-indicator.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$task = new \\core\\task\\mytask($id);\n$taskid = \\core\\task\\manager::queue_adhoc_task($task, true);\nif ($taskid) {\n    $task->set_id($taskid);\n    $task->initialise_stored_progress();\n}\n```\n\n----------------------------------------\n\nTITLE: Click Interaction Update for Behat Tests in Moodle\nDESCRIPTION: This snippet updates Behat step definitions for multiple choice questions in Moodle. Instead of clicking on label elements, the interaction now focuses on the answer text utilizing ARIA attributes. The change enhances accessibility while ensuring appropriate test functionality. It requires the Behat framework for test automation.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/multichoice/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n    And I click on \"One\" \"checkbox\"\\n    And I click on \"One\" \"qtype_multichoice > Answer\"\n```\n\n----------------------------------------\n\nTITLE: Initializing CSS Parser in PHP\nDESCRIPTION: Basic initialization of the CSS parser by reading a file and parsing its contents\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$parser = new \\Sabberworm\\CSS\\Parser(file_get_contents('somefile.css'));\n$cssDocument = $parser->parse();\n```\n\n----------------------------------------\n\nTITLE: Course Renderer Theme Override Method in PHP\nDESCRIPTION: Theme override method for course enrollment index page through the course renderer enrolment_options method.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nenrolment_options\n```\n\n----------------------------------------\n\nTITLE: Using new formatting methods in PHP\nDESCRIPTION: The format_string() and format_text() methods have been moved to the \\core\\formatting class. The old methods are still maintained, but new code should use the new methods with first-class parameters.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n\\core\\formatting::format_string($string, $options);\n\\core\\formatting::format_text($text, $format, $options);\n```\n\n----------------------------------------\n\nTITLE: New Behat Step for Course Section Navigation in PHP\nDESCRIPTION: A new Behat step has been introduced that uses URL resolvers to navigate to specific course sections. It first searches by section name and then by section number if the name is not found.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nWhen I am on the \"Course > <section> \"course > section\" page logged in as \"<username>\"\n```\n\n----------------------------------------\n\nTITLE: Deprecating book_get_nav_classes() in PHP\nDESCRIPTION: The book_get_nav_classes() function has been deprecated in Moodle 4.4 and will not have a replacement. It was originally intended to be deprecated along with book_get_nav_types.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nbook_get_nav_classes()\n```\n\n----------------------------------------\n\nTITLE: Configuring Auto-hide and Close Button Features\nDESCRIPTION: Shows how to customize toast notifications with different auto-hide delays and close button options. Includes examples of long display duration and disabled auto-hide functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/toast.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['core/toast'], Toast => {\n    document.querySelector(\"[data-example-name='autohide-long']\").addEventListener('click', e => {\n        Toast.add('This message will be displayed for 30 seconds with a closeButton', {\n            delay: 30000,\n            closeButton: true,\n        });\n    });\n\n    document.querySelector(\"[data-example-name='autohide-disabled']\").addEventListener('click', e => {\n        Toast.add('This message will be displayed until closed using the closeButton.', {\n            autohide: false,\n            closeButton: true,\n        });\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Adding User Name Placeholders Method - PHP\nDESCRIPTION: Defines the new method `\\core_user::get_name_placeholders()` that returns an array of user name fields. This enhances the user management capabilities within Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_user::get_name_placeholders()\n```\n\n----------------------------------------\n\nTITLE: Plugin Security Helper Implementation\nDESCRIPTION: Example showing how to define a plugin's curl security helper callback function.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_73\n\nLANGUAGE: php\nCODE:\n```\nplugintype_pluginname_curl_security_helper\n```\n\n----------------------------------------\n\nTITLE: Adding Quiz Structure Modified Callback Implementation\nDESCRIPTION: Example implementation of the quiz_structure_modified callback for quiz plugins, showing the required namespace structure and static callback method. This is called from grade_calculator::recompute_quiz_sumgrades().\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass quiz_structure_modified {\n    public static function callback() {\n        // Callback implementation goes here\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Initializing the PHPUnit Test Environment\nDESCRIPTION: Command to initialize the PHPUnit test environment in Moodle. This needs to be run before first execution and after every Moodle upgrade. The command also builds the phpunit.xml configuration files.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpunit/readme.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphp admin/tool/phpunit/cli/init.php\n```\n\n----------------------------------------\n\nTITLE: Form Element Validation Method in PHP\nDESCRIPTION: New optional validation method for moodleform elements to perform implicit validation of submitted values without explicitly adding validation rules to each form.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_84\n\nLANGUAGE: php\nCODE:\n```\nvalidateSubmitValue($submittedValue)\n```\n\n----------------------------------------\n\nTITLE: Implementing Default Search Input in Moodle\nDESCRIPTION: This code demonstrates the implementation of a default search input component in Moodle using the core/search_input template. It allows users to search a collection of data with various configuration options including action URL, input name, and hidden fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/search-input.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n        \"action\": \"https://moodle.local/admin/search.php\",\n        \"extraclasses\": \"my-2\",\n        \"inputname\": \"search\",\n        \"inform\": false,\n        \"searchstring\": \"Search something\",\n        \"hiddenfields\": [\n            {\n                \"name\": \"context\",\n                \"value\": \"11\"\n            }\n        ]\n    }\n```\n\n----------------------------------------\n\nTITLE: Positioning Last Item to the Right in a Group with Bootstrap Flexbox\nDESCRIPTION: This example demonstrates how to use the .ms-auto class to move the last item in a .d-flex container to the right, while keeping other items aligned to the left.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/positioning.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex\">\n  <button class=\"btn btn-secondary me-1\">Ha!</button>\n  <button class=\"btn btn-secondary me-1\">Jay</button>\n  <button class=\"btn btn-secondary me-1\">Wow</button>\n  <button class=\"ms-auto btn btn-success\">OK</button>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Dataformat Callback Method Updates in 3.11.1\nDESCRIPTION: Methods that accept an optional callback parameter now receive a second argument indicating HTML format support. Affects download_data(), write_data(), and write_data_to_filearea() methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/dataformat/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core\\dataformat::download_data($callback, $supportshtml)\n\\core\\dataformat::write_data($callback, $supportshtml)\n\\core\\dataformat::write_data_to_filearea($callback, $supportshtml)\n```\n\n----------------------------------------\n\nTITLE: Updating Moodle Autoloader Registration in PHP\nDESCRIPTION: The Moodle autoloader should now be registered using \\core\\component::register_autoloader instead of manual registration in exceptional locations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_24\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\component::register_autoloader\n```\n\n----------------------------------------\n\nTITLE: Implementing Menu Position Control for Question Actions - PHP\nDESCRIPTION: This snippet provides guidelines for subclassing question_action_base to implement the get_menu_position() method, which controls the position of question bank actions in the action menu. Not implementing this will lead to debugging warnings.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/upgrade.txt#2025-04-21_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: Using Google Client API in Moodle\nDESCRIPTION: The standard pattern for using the Google Client API in Moodle, showing how to include the library and initialize a client. This snippet demonstrates the proper way to load the Google API functionality in any Moodle code.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/google/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nrequire_once($CFG->libdir . '/google/lib.php');\n$client = get_google_client();\n```\n\n----------------------------------------\n\nTITLE: Debugging Database Connection using ADOdb in PHP\nDESCRIPTION: This snippet demonstrates how to include the ADOdb library in a PHP script and establish a database connection using various drivers like 'mysqli' or 'oci8'. It enables debugging mode to assist in tracing execution details and outputs the contents of a database table. Key parameters include the database driver, server name, user credentials, and database name. The snippet assumes the ADOdb library is accessible at the specified path.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/adodb/README.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\ninclude('adodb/adodb.inc.php');\n\n$db = adoNewConnection($driver); # eg. 'mysqli' or 'oci8'\n$db->debug = true;\n$db->connect($server, $user, $password, $database);\n$rs = $db->execute('select * from some_small_table');\nprint \"<pre>\";\nprint_r($rs->getRows());\nprint \"</pre>\";\n\n```\n\n----------------------------------------\n\nTITLE: Using Cached Dispatcher for Performance\nDESCRIPTION: Demonstrates how to use the cachedDispatcher function to cache generated routing data for improved performance. Includes options for cache file location and conditional caching.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n$dispatcher = FastRoute\\cachedDispatcher(function(FastRoute\\RouteCollector $r) {\n    $r->addRoute('GET', '/user/{name}/{id:[0-9]+}', 'handler0');\n    $r->addRoute('GET', '/user/{id:[0-9]+}', 'handler1');\n    $r->addRoute('GET', '/user/{name}', 'handler2');\n}, [\n    'cacheFile' => __DIR__ . '/route.cache', /* required */\n    'cacheDisabled' => IS_DEBUG_ENABLED,     /* optional, enabled by default */\n]);\n```\n\n----------------------------------------\n\nTITLE: Integrating Guzzle Promises with React Event Loop in PHP\nDESCRIPTION: Demonstrates how to integrate Guzzle promises with a React event loop using a periodic timer to run the task queue.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n$loop = React\\EventLoop\\Factory::create();\n$loop->addPeriodicTimer(0, [$queue, 'run']);\n```\n\n----------------------------------------\n\nTITLE: Nested Padding Example with Multiple Classes\nDESCRIPTION: HTML example demonstrating nested elements with different padding sizes (p-1 through p-6) and background colors to visualize the spacing hierarchy.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/spacing.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex align-items-center justify-content-center\">\n  <div class=\"p-6 bg-dark\">\n    <div class=\"p-5 bg-white\">\n      <div class=\"p-4 bg-info\">\n        <div class=\"p-3 bg-success\">\n          <div class=\"p-2 bg-warning\">\n            <div class=\"p-1 bg-danger\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Removed Entity Classes in Moodle\nDESCRIPTION: This snippet lists entity classes that have been removed from Moodle since version 4.1. These classes were renamed and their support has now been completely removed. Developers should update their code to use the new entity classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_9\n\nLANGUAGE: text\nCODE:\n```\n\t- `\\core_admin\\local\\entities\\task_log`\n\t- `\\core_cohort\\local\\entities\\cohort`\n\t- `\\core_cohort\\local\\entities\\cohort_member`\n\t- `\\core_course\\local\\entities\\course_category`\n\t- `\\report_configlog\\local\\entities\\config_change`\n```\n\n----------------------------------------\n\nTITLE: Instance of mod_quiz_renderer Required (Moodle 2.9)\nDESCRIPTION: An instance of the `mod_quiz_renderer` must be passed if you call `$attemptobj->render_question` or `$attemptobj->render_question_at_step`.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_29\n\nLANGUAGE: text\nCODE:\n```\n\"You now need to pass an instance of the mod_quiz_renderer if you call\n  $attemptobj->render_question or $attemptobj->render_question_at_step.\"\n```\n\n----------------------------------------\n\nTITLE: Creating and Resolving a Promise in PHP\nDESCRIPTION: Demonstrates how to create a Promise object with wait and cancel functions, and how to resolve and assert its value.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_13\n\nLANGUAGE: php\nCODE:\n```\nuse GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise(\n    function () use (&$promise) {\n        $promise->resolve('waited');\n    },\n    function () {\n        // do something that will cancel the promise computation (e.g., close\n        // a socket, cancel a database query, etc...)\n    }\n);\n\nassert('waited' === $promise->wait());\n```\n\n----------------------------------------\n\nTITLE: Adding `required` Field to `core\\output\\datafilter`\nDESCRIPTION: A new `required` field has been added to `core\\output\\datafilter`. This is output via the `data-required` property in `filter_type.mustache`. Filters with `data-required=\"1\"` will not be removable.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_18\n\n\n\n----------------------------------------\n\nTITLE: Removing Legacy Cron Functions\nDESCRIPTION: The legacy cron functions `cron_execute_plugin_type()` and `cron_bc_hack_plugin_functions()` have been removed.  Developers should use the Task API instead, as documented at https://moodledev.io/docs/apis/subsystems/task.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_9\n\n\n\n----------------------------------------\n\nTITLE: Implementing Block Copy Functionality in PHP\nDESCRIPTION: Example of implementing the instance_copy() function in the block_base class to allow for block-specific data to be copied when a block is copied.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ninstance_copy()\n```\n\n----------------------------------------\n\nTITLE: Serializing and Unserializing a Closure in PHP\nDESCRIPTION: This PHP code snippet demonstrates how to serialize and unserialize a closure using the Laravel Serializable Closure package. It sets a secret key, serializes the closure, unserializes it, and then executes the closure to display the result.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/laravel/serializable-closure/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\"use Laravel\\SerializableClosure\\SerializableClosure;\n\n$closure = fn () => 'james';\n\n// Recommended\nSerializableClosure::setSecretKey('secret');\n\n$serialized = serialize(new SerializableClosure($closure));\n$closure = unserialize($serialized)->getClosure();\n\necho $closure(); // james;\"\n```\n\n----------------------------------------\n\nTITLE: Setting Up Routes in Slim - PHP\nDESCRIPTION: Defines a route in a Slim application with a parameter included in the URL path. The value is injected into the callback function. Slim application setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$app->get('/hello/:name', function ($name) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Event Handlers for Local Plugin in PHP\nDESCRIPTION: Defines event handlers for a local Moodle plugin to respond to core system events.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$handlers = array (\n    'user_deleted' => array (\n         'handlerfile'      => '/local/nicehack/lib.php',\n         'handlerfunction'  => 'nicehack_userdeleted_handler',\n         'schedule'         => 'instant'\n     ),\n);\n```\n\n----------------------------------------\n\nTITLE: New File System Hook Before File Creation in PHP\nDESCRIPTION: A hook has been created to allow modification of files immediately before they are stored in the file system. This enables plugins to alter file content or metadata before saving.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_67\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_files\\hook\\before_file_created\n```\n\n----------------------------------------\n\nTITLE: Creating Link with Icon for New Window in HTML\nDESCRIPTION: This snippet demonstrates how to create a link that opens in a new window, using an icon with appropriate ARIA labels to indicate the behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/links.md#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"https://moodle.org\" target=\"_blank\">\n    Moodle.org <i class=\"fa fa-external-link\" role=\"img\" aria-label=\"Opens in new window\" title=\"Opens in new window\"></i>\n</a>\n```\n\n----------------------------------------\n\nTITLE: Implementing Cron for Moodle Plugin\nDESCRIPTION: This snippet demonstrates how to implement a cron function for a custom Moodle question type plugin. It is essential for scheduling tasks in the background within the Moodle ecosystem.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nfunction qtype_mypluginname_cron() {}\n```\n\n----------------------------------------\n\nTITLE: Initializing SortableList in JavaScript with Configuration Options\nDESCRIPTION: This code shows how to initialize a SortableList instance with optional configuration parameters. It demonstrates setting up a sortable list with customizable options for targeting specific elements, defining move handlers, setting orientation, and enabling auto-scroll.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/sortable-list.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n// Default config, this variable is optional.\nvar config = {\n    targetListSelector: null,\n    moveHandlerSelector: '[data-drag-type=move]',\n    isHorizontal: false,\n    autoScroll: true\n};\nnew SortableList(domElement, config);\n```\n\n----------------------------------------\n\nTITLE: Rendering HTML Alert Notification in Moodle\nDESCRIPTION: This snippet demonstrates the HTML structure for a Moodle alert notification. It includes classes for styling, accessibility attributes, and a close button.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/notifications.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"alert alert-info alert-block fade in foo bar\" role=\"alert\" data-aria-autofocus=\"true\" id=\"yui_3_17_2_1_1599746674354_24\">\n    <button type=\"button\" class=\"btn-close\" data-dismiss=\"alert\"></button>\n    Hello\n</div>\n```\n\n----------------------------------------\n\nTITLE: Rendering Activity Icon from cm_info Object in PHP\nDESCRIPTION: Shows how to render an activity icon using a cm_info object, which allows for custom icons based on specific activity instances.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n$cminfo = get_fast_modinfo($courseid)->get_cm($cmid);\n\n$icon = activity_icon::from_cm_info($cminfo);\n\necho $renderer->render($icon);\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 Enterprise Database in PHP\nDESCRIPTION: Comprehensive example of using the GeoIP2 Database Reader with the Enterprise database. Shows how to access detailed geolocation data including confidence scores and accuracy information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$enterpriseDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-Enterprise.mmdb');\n\n// Use the ->enterprise method to do a lookup in the Enterprise database\n$record = $enterpriseDbReader->enterprise('128.101.101.101');\n\nprint($record->country->confidence . \"\\n\"); // 99\nprint($record->country->isoCode . \"\\n\"); // 'US'\nprint($record->country->name . \"\\n\"); // 'United States'\nprint($record->country->names['zh-CN'] . \"\\n\"); // ''\n\nprint($record->mostSpecificSubdivision->confidence . \"\\n\"); // 77\nprint($record->mostSpecificSubdivision->name . \"\\n\"); // 'Minnesota'\nprint($record->mostSpecificSubdivision->isoCode . \"\\n\"); // 'MN'\n\nprint($record->city->confidence . \"\\n\"); // 60\nprint($record->city->name . \"\\n\"); // 'Minneapolis'\n\nprint($record->postal->code . \"\\n\"); // '55455'\n\nprint($record->location->accuracyRadius . \"\\n\"); // 50\nprint($record->location->latitude . \"\\n\"); // 44.9733\nprint($record->location->longitude . \"\\n\"); // -93.2323\n\nprint($record->traits->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Using Language Strings in Toast Messages\nDESCRIPTION: Demonstrates how to use Moodle's language string system with toast notifications. Requires both core/toast and core/str modules.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/toast.md#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['core/toast', 'core/str'], (Toast, Str) => {\n    document.querySelector(\"[data-example-name='langstring']\").addEventListener('click', e => {\n        Toast.add(Str.get_string('ok'));\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Defining Version and Requirements for Moodle Course Format Plugin (PHP)\nDESCRIPTION: Sets the version number and Moodle version requirement for a custom course format plugin. This file is required if the format uses database tables. The version number should be updated when table structures change.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/README.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$plugin->version  = 2006120100; // Plugin version (update when tables change)\n$plugin->requires = 2006092801; // Required Moodle version\n?>\n```\n\n----------------------------------------\n\nTITLE: Creating Task Indicator Instance in PHP\nDESCRIPTION: This snippet shows how to create an instance of the task indicator on a page. It initializes the task object and sets up the task indicator with various parameters like heading, message, and icon.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/task-indicator.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$task = new mytask($id);\n$taskindicator = new \\core\\output\\task_indicator(\n    task: $task,\n    heading: 'Task processing',\n    message: get_string('recalculatinggradesadhoc', 'grades'),\n    icon: new \\core\\output\\pix_icon('i/grades', ''),\n    redirecturl: $PAGE->url,\n    extraclasses: ['mytask'],\n);\n```\n\n----------------------------------------\n\nTITLE: Promise Forwarding in PHP\nDESCRIPTION: This code demonstrates how to forward a promise to another promise. The first promise, when resolved, triggers the first `$onFulfilled` callback, which in turn resolves the second promise.  This then triggers the second `$onFulfilled` callback.  The order of resolution matters for when the callbacks execute.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$nextPromise = new Promise();\n\n$promise\n    ->then(function ($value) use ($nextPromise) {\n        echo $value;\n        return $nextPromise;\n    })\n    ->then(function ($value) {\n        echo $value;\n    });\n\n// Triggers the first callback and outputs \\\"A\\\"\n$promise->resolve('A');\n// Triggers the second callback and outputs \\\"B\\\"\n$nextPromise->resolve('B');\"\n```\n\n----------------------------------------\n\nTITLE: Adding Behat Step for Page Title Checks\nDESCRIPTION: A new Behat step `\\behat_general::the_page_title_should_contain()` has been added to allow checking of page titles.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_28\n\n\n\n----------------------------------------\n\nTITLE: JavaScript Event Handling Implementation\nDESCRIPTION: Shows how to implement event listeners for collapsable section state changes using custom event types.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/collapsable-sections.md#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport {eventTypes as collapsableSectionEventTypes} from 'core/local/collapsable_section/events';\n\ndocument.addEventListener(collapsableSectionEventTypes.shown, event => {\n    console.log(event.target); // The HTMLElement relating to the section that was shown.\n});\n\ndocument.addEventListener(collapsableSectionEventTypes.hidden, event => {\n    console.log(event.target); // The HTMLElement relating to the section that was hidden.\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing PSR-3 LoggerInterface in PHP Class\nDESCRIPTION: Example of how to implement the PSR-3 LoggerInterface in a PHP class. This snippet shows dependency injection of the logger, error handling, and logging of various events.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/log/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse Psr\\Log\\LoggerInterface;\n\nclass Foo\n{\n    private $logger;\n\n    public function __construct(LoggerInterface $logger = null)\n    {\n        $this->logger = $logger;\n    }\n\n    public function doSomething()\n    {\n        if ($this->logger) {\n            $this->logger->info('Doing work');\n        }\n           \n        try {\n            $this->doSomethingElse();\n        } catch (Exception $exception) {\n            $this->logger->error('Oh no!', array('exception' => $exception));\n        }\n\n        // do something useful\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Advanced PHP Implementation with Custom Options\nDESCRIPTION: Demonstrates creating a collapsable section with additional customization options including CSS classes, HTML attributes, and custom labels.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/collapsable-sections.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$section = new collapsable_section(\n    titlecontent: 'Section Title',\n    sectioncontent: 'This is the content of the section.',\n    open: true, // Optional parameter to set the section as open by default.\n    classes: 'p-3 rounded bg-dark text-white', // Optional parameter to add custom CSS classes.\n    extras: ['id' => 'MyCollapsableSection', 'data-foo' => 'bar'], // Optional HTML attributes.\n    expandlabel: 'Show more', // Optional label for the expand button.\n    collapselabel: 'Show less', // Optional label for the collapse button.\n);\n\necho $OUTPUT->render($section);\n```\n\n----------------------------------------\n\nTITLE: Embedding example pages via iframe in Markdown documentation\nDESCRIPTION: Shows how to embed example pages into component documentation using an iframe element. This example demonstrates embedding formfields.php into a markdown documentation file.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/example-files.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n<iframe src=\"../../../../examples/formfields.php\" style=\"overflow:hidden;height:4000px;width:100%;border:0\" title=\"Moodle form fields\"></iframe>\n```\n\n----------------------------------------\n\nTITLE: Support for Help Icons in Table Headers in PHP\nDESCRIPTION: New functionality allowing help icons to be rendered in header columns of system reports.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n// Method to set help icon for a column header\npublic function set_help_icon($icon) {\n    // Implementation for help icon\n}\n```\n\n----------------------------------------\n\nTITLE: Lazily Opening a File with LazyOpenStream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates the use of LazyOpenStream in GuzzleHttp\\Psr7 to defer the opening of a file until an I/O operation is performed on the stream. The file is only opened when data is read from or written to the stream, optimizing resource usage.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$stream = new Psr7\\LazyOpenStream('/path/to/file', 'r');\n// The file has not yet been opened...\n\necho $stream->read(10);\n// The file is opened and read from only when needed.\n```\n```\n\n----------------------------------------\n\nTITLE: Securing Client::send() Method in XML-RPC\nDESCRIPTION: This code snippet demonstrates the security measure to restrict XML-RPC client access to only HTTP and HTTPS protocols by setting CURL options. It prevents potential misuse that could lead to unauthorized local file access or unintended URL connections.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n$client->setCurlOptions([CURLOPT_PROTOCOLS, CURLPROTO_HTTPS|CURLPROTO_HTTP]);\n```\n\n----------------------------------------\n\nTITLE: Entry Tags Field Addition - Version 3.7\nDESCRIPTION: Documentation of added 'tags' field in get_entries_by_* and get_entry function return values.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n* External functions get_entries_by_* and get_entry now return an additional field \"tags\" containing the entry tags.\n```\n\n----------------------------------------\n\nTITLE: Displaying Basic Toast Message in Moodle\nDESCRIPTION: Shows how to implement a basic toast notification triggered by a button click. Uses the core/toast module to display a simple message.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/toast.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['core/toast'], Toast => {\n    const button = document.querySelector(\"[data-example-name='basic']\")\n    button.addEventListener('click', () => {\n        Toast.add('This is the message for the toast');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Checking OGVPlayer Compatibility in JavaScript\nDESCRIPTION: Demonstrates how to use the OGVCompat API to check if the browser supports OGVPlayer before loading the full player.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nif (OGVCompat.supported('OGVPlayer')) {\n  // go load the full player from ogv.js and instantiate stuff\n}\n```\n\n----------------------------------------\n\nTITLE: Implementing Confirmation Modal in PHP\nDESCRIPTION: PHP code to generate a button that triggers a confirmation modal dialog using Moodle's output components. The attributes parameter is used to add the necessary data attributes for the confirmation modal.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\necho $OUTPUT->single_button('#', get_string('delete'), 'get', [\n    'data-confirmation' => 'modal',\n    'data-confirmation-title-str' => json_encode(['delete', 'core']),\n    'data-confirmation-content-str' => json_encode(['areyousure']),\n    'data-confirmation-yes-button-str' => json_encode(['delete', 'core'])\n]);\n```\n\n----------------------------------------\n\nTITLE: Extending enrol_plugin Class for Moodle Enrolment Modules in PHP\nDESCRIPTION: All Moodle enrolment modules must extend the base class enrol_plugin, which is defined in lib/enrollib.php. Developers should refer to the base class for documentation of each method.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nclass YourEnrolmentModule extends enrol_plugin {\n    // Implement required methods here\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Usage Example of FastRoute\nDESCRIPTION: Demonstrates the basic setup and usage of FastRoute, including defining routes with parameters, handling different HTTP methods, and processing the dispatched route results.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nrequire '/path/to/vendor/autoload.php';\n\n$dispatcher = FastRoute\\simpleDispatcher(function(FastRoute\\RouteCollector $r) {\n    $r->addRoute('GET', '/users', 'get_all_users_handler');\n    // {id} must be a number (\\d+)\n    $r->addRoute('GET', '/user/{id:\\d+}', 'get_user_handler');\n    // The /{title} suffix is optional\n    $r->addRoute('GET', '/articles/{id:\\d+}[/{title}]', 'get_article_handler');\n});\n\n// Fetch method and URI from somewhere\n$httpMethod = $_SERVER['REQUEST_METHOD'];\n$uri = $_SERVER['REQUEST_URI'];\n\n// Strip query string (?foo=bar) and decode URI\nif (false !== $pos = strpos($uri, '?')) {\n    $uri = substr($uri, 0, $pos);\n}\n$uri = rawurldecode($uri);\n\n$routeInfo = $dispatcher->dispatch($httpMethod, $uri);\nswitch ($routeInfo[0]) {\n    case FastRoute\\Dispatcher::NOT_FOUND:\n        // ... 404 Not Found\n        break;\n    case FastRoute\\Dispatcher::METHOD_NOT_ALLOWED:\n        $allowedMethods = $routeInfo[1];\n        // ... 405 Method Not Allowed\n        break;\n    case FastRoute\\Dispatcher::FOUND:\n        $handler = $routeInfo[1];\n        $vars = $routeInfo[2];\n        // ... call $handler with $vars\n        break;\n}\n```\n\n----------------------------------------\n\nTITLE: Setting Request Options on Client Methods in Guzzle\nDESCRIPTION: This code snippet shows the addition of the `$options` argument to the end of several methods of `Guzzle\\Http\\ClientInterface`, including createRequest, head, delete, put, patch, post, options, and prepareRequest. This allows passing additional options to these methods, enhancing their flexibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added an `$options` argument to the end of the following methods of `Guzzle\\\\Http\\\\ClientInterface`:\\n  createRequest, head, delete, put, patch, post, options, prepareRequest\"\n```\n\n----------------------------------------\n\nTITLE: Documenting New Hooks for User Tour Filters in Moodle 4.4\nDESCRIPTION: Describes new hooks added to allow plugins to define custom server-side and client-side user tour filters.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/usertours/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.4 ===\n* New hooks have been provided to allow plugins to define their own server-side, and client-side user tour filters.\n  The new hooks are named:\n  - \\tool_usertours\\hook\\before_serverside_filter_fetch\n  - \\tool_usertours\\hook\\before_clientside_filter_fetch\n  These hooks allow addition, and removal, of filters.\n```\n\n----------------------------------------\n\nTITLE: Using New Namespaced PNG Metadata Handler in PHP\nDESCRIPTION: The class previously in badges/lib/bakerlib.php has been moved to a namespaced location. Code that extended or used the old bakerlib.php needs to be updated to use the new namespaced class.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse core_badges\\png_metadata_handler;\n\n$handler = new png_metadata_handler();\n```\n\n----------------------------------------\n\nTITLE: Session Management Method Deprecation Table in Moodle 4.5\nDESCRIPTION: A table showing the mapping between deprecated session management methods and their new replacements in \\core\\session\\manager class. This change removes dependency on the 'sessions' table and introduces a new handler class for session management plugins.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/roles/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Old method name                  | New method name           |\n| ---                              | ---                       |\n| `kill_all_sessions`              | `destroy_all`             |\n| `kill_session`                   | `destroy`                 |\n| `kill_sessions_for_auth_plugin`  | `destroy_by_auth_plugin`  |\n| `kill_user_sessions`             | `destroy_user_sessions`   |\n```\n\n----------------------------------------\n\nTITLE: Basic Show More Component Example in Mustache\nDESCRIPTION: A basic example of implementing the Show More component with collapsed and expanded content. It includes custom styling through extra classes for the container and button.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/showmore.md#2025-04-21_snippet_0\n\nLANGUAGE: mustache\nCODE:\n```\n{{< mustache template=\"core/showmore\" >}}\n    {\n        \"collapsedcontent\": \"Hello...\",\n        \"expandedcontent\": \"Hello<br>Is it me you're looking for? I can see it in your eyes\",\n        \"extraclasses\": \"rounded p-2 border\",\n        \"buttonextraclasses\": \"fw-bold\"\n    }\n{{< /mustache >}}\n```\n\n----------------------------------------\n\nTITLE: Appending Content to PSR-7 Body in PHP\nDESCRIPTION: Shows two methods of appending content to a PSR-7 body: directly writing to the response body and using a separate body variable.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n$response->getBody()->write('Hello'); // writing directly\n$body = $request->getBody(); // which is a `StreamInterface`\n$body->write('xxxxx');\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 ISP Database in PHP\nDESCRIPTION: Example of using the GeoIP2 Database Reader to look up ISP information for an IP address. Creates a Reader object for the ISP database and displays ISP, organization, and network details.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$ispDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-ISP.mmdb');\n\n$record = $ispDbReader->isp('128.101.101.101');\n\nprint($record->autonomousSystemNumber . \"\\n\"); // 217\nprint($record->autonomousSystemOrganization . \"\\n\"); // 'University of Minnesota'\nprint($record->isp . \"\\n\"); // 'University of Minnesota'\nprint($record->organization . \"\\n\"); // 'University of Minnesota'\n\nprint($record->ipAddress . \"\\n\"); // '128.101.101.101'\nprint($record->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Implementing Basic Moodle Footer Structure in HTML\nDESCRIPTION: Demonstrates the minimal required structure for a Moodle page footer including documentation links, user login status, homepage link, and user tour reset container. The footer uses dark background styling with light text and includes essential navigation elements.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/footer.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<footer id=\"page-footer\" class=\"py-3 bg-dark text-light\">\n    <div class=\"container\">\n        <p class=\"helplink\"><a href=\"#\">Moodle docs for this page</a></p>\n        You are logged in as <a href=\"#\">Test User</a> (<a href=\"#\">logout</a>)\n        <a href=\"#\">Home</a>\n        <div class=\"tool_usertours-resettourcontainer\"></div>\n    </div>\n</footer>\n```\n\n----------------------------------------\n\nTITLE: Creating a Centered 404 Error Display with HTML\nDESCRIPTION: HTML markup that creates a centered 404 error message display. It uses Bootstrap classes for styling and includes a large '404' heading followed by a 'File not found' message.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/404.md#2025-04-21_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<div class=\"text-center py-5\">\n  <h1 class=\"display-1\">404</h1>\n  <h2>File not found</h2>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Defining Plugin Dependencies in Moodle\nDESCRIPTION: A new way of declaring plugin dependencies was introduced, shifting from the older method to using the 'dependencies' property in the version.php file. This ensures compatibility with the required plugins.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$plugin->dependencies = array(\n    'qtype_numerical' => 2011102700,\n);\n```\n\n----------------------------------------\n\nTITLE: New Hook Implementation for Number Calculations in PHP\nDESCRIPTION: New hook customfield_number\\hook\\add_custom_providers allows for automatic calculation of number course custom fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/field/number/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\customfield_number\\hook\\add_custom_providers\n```\n\n----------------------------------------\n\nTITLE: Pie Chart with Table Configuration\nDESCRIPTION: JSON configuration for a pie chart with sales data from 2004-2007. This mustache template reference includes chart type specification, series data, labels, and title. The 'withtable' parameter is set to true to display data in tabular format alongside the chart.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022pie\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022PIE CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[]},\\u0022config_colorset\\u0022:null,\\u0022doughnut\\u0022:null}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Completion Pass Criteria Moved to Core (Moodle 4.0)\nDESCRIPTION: The 'completionpass' criteria has been moved to core as 'completionpassgrade'. Refer to completion/upgrade.txt for further information on how to migrate.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n\"The completionpass criteria has been moved to core as 'completionpassgrade'. Refer to completion/upgrade.txt for\n  further information.\"\n```\n\n----------------------------------------\n\nTITLE: Setting Request Options in Guzzle\nDESCRIPTION: This code snippet demonstrates how to set default request options for all requests created by a Guzzle client. It involves using the 'request.options' configuration setting to specify options such as query string variables, headers, and cURL options.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\"You can pass a 'request.options' configuration setting to a client to apply default request options to\\nevery request created by a client (e.g. default query string variables, headers, curl options, etc.).\"\n```\n\n----------------------------------------\n\nTITLE: Adding File Creation Hooks in PHP for Moodle 4.5\nDESCRIPTION: Two new hooks have been added in Moodle 4.5: \\core_files\\hook\\after_file_created for inspecting files after they are saved, and \\core_files\\hook\\before_file_created for modifying files before they are stored in the file system.\nSOURCE: https://github.com/moodle/moodle/blob/main/files/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n\\core_files\\hook\\after_file_created\n```\n\nLANGUAGE: php\nCODE:\n```\n\\core_files\\hook\\before_file_created\n```\n\n----------------------------------------\n\nTITLE: Using New UUID Generation Method in PHP\nDESCRIPTION: The generate_uuid() function has been deprecated. Developers should use \\core\\uuid::generate() instead for generating UUIDs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_77\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\uuid::generate()\n```\n\n----------------------------------------\n\nTITLE: New Method in icon_system Class for Deprecated Icons\nDESCRIPTION: The core\\output\\icon_system class now includes a get_deprecated_icons() method. Plugins can implement a callback to register their deprecated icons. When debugging is enabled, deprecated icons will be listed in the console.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_53\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\output\\::get_deprecated_icons()\n```\n\n----------------------------------------\n\nTITLE: Using debounce function with cancellation in JavaScript\nDESCRIPTION: A new parameter has been added to the debounce function in the core/utils module to allow for cancellation of the debounced function.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\ndebounce(function, delay, immediate, cancelPrevious)\n```\n\n----------------------------------------\n\nTITLE: Synchronous Wait on Promise in PHP\nDESCRIPTION: This code shows how to synchronously wait for a promise to be fulfilled using the `wait` method. The promise is resolved with the value 'foo' within the wait function. Calling `wait` returns the resolved value, which is then echoed to the output.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n\"$promise = new Promise(function () use (&$promise) {\n    $promise->resolve('foo');\n});\n\n// Calling wait will return the value of the promise.\necho $promise->wait(); // outputs \\\"foo\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Rendering CSS Output\nDESCRIPTION: Rendering the parsed CSS document with optional output formatting\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$parser = new \\Sabberworm\\CSS\\Parser(file_get_contents('somefile.css'));\n$cssDocument = $parser->parse();\nprint $cssDocument->render();\n```\n\n----------------------------------------\n\nTITLE: Loading Fixtures in Unit Tests - PHP\nDESCRIPTION: Adds a helper method `advanced_testcase::load_fixture(string $component, string $fixture): void;` to load fixtures from a component's `tests/fixtures/` directory, facilitating testing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\nadvanced_testcase::load_fixture(string $component, string $fixture): void;\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Target Noopener in Moodle\nDESCRIPTION: This configuration snippet defines the HTML.TargetNoopener setting for Moodle. It specifies that the setting is a boolean, introduced in version 4.8.0, with a default value of TRUE. When enabled, it adds noopener rel attributes to links with target attributes to prevent malicious destinations from overwriting the original window.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TargetNoopener.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.TargetNoopener\nTYPE: bool\nVERSION: 4.8.0\nDEFAULT: TRUE\n--DESCRIPTION--\nIf enabled, noopener rel attributes are added to links which have\na target attribute associated with them.  This prevents malicious\ndestinations from overwriting the original window.\n```\n\n----------------------------------------\n\nTITLE: Converting after_config to Hook - PHP\nDESCRIPTION: Transforms the `after_config()` callback into a hook at `\\core\\hook\\after_config`, allowing for greater flexibility and extensibility in configuration management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_8\n\n\n\n----------------------------------------\n\nTITLE: Setting Mailpit Configuration in Moodle's config.php\nDESCRIPTION: Constants required in config.php to enable email content verification with Mailpit for Behat testing. These settings define the Mailpit server address and API endpoint.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nTEST_EMAILCATCHER_MAIL_SERVER - The Mailpit server address (e.g. `0.0.0.0:1025`)\nTEST_EMAILCATCHER_API_SERVER - The Mailpit API server (qe.g. `http://localhost:8025`)\n```\n\n----------------------------------------\n\nTITLE: Dropdown Status Implementation - PHP\nDESCRIPTION: Creates a dropdown status component with multiple options using choicelist.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$choice = new core\\output\\choicelist('Dialog content');\n$choice->add_option('option1', 'Option 1');\n$choice->add_option('option2', 'Option 2');\n$choice->add_option('option3', 'Option 3');\n$choice->set_selected_value('option2');\n\n$dialog = new core\\output\\local\\dropdown\\status('Open dialog button', $choice);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Stacking Font Awesome Icons in HTML\nDESCRIPTION: Examples of how to stack Font Awesome icons to create composite icons with different sizes and colors, using the fa-stack classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/moodle-icons.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<span class=\"fa-stack fa-lg\">\n  <i class=\"fa-solid fa-comment fa-stack-2x\"></i>\n  <i class=\"fa-solid fa-thumbs-up fa-stack-1x fa-inverse\"></i>\n</span>\n\n<span class=\"fa-stack fa-2x\">\n    <i class=\"fa-solid fa-camera fa-stack-1x\"></i>\n    <i class=\"fa-solid fa-ban fa-stack-2x\" style=\"color:Tomato\"></i>\n</span>\n\n<span class=\"fa-stack fa-2x\">\n    <i class=\"fa-solid fa-square fa-stack-2x\"></i>\n    <i class=\"fa-solid fa-terminal fa-stack-1x fa-inverse\"></i>\n</span>\n\n<span class=\"fa-stack fa-4x\">\n    <i class=\"fa-solid fa-square fa-stack-2x\"></i>\n    <i class=\"fa-solid fa-terminal fa-stack-1x fa-inverse\"></i>\n</span>\n```\n\n----------------------------------------\n\nTITLE: Constructor Updates for PHP 7 Compatibility\nDESCRIPTION: This snippet captures the adjustment of constructors in the PEAR library classes. Changing them to __construct() is critical for ensuring compliance with PHP 7 and later standards.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/pear/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nChanged constructors in classes PEAR and PEAR_ERROR to be __construct().\n```\n\n----------------------------------------\n\nTITLE: Task Indicator Mustache Template\nDESCRIPTION: This Mustache template defines the structure and content of the task indicator component. It includes a heading, icon, message, progress bar, and optional 'Run now' button for administrators.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/task-indicator.md#2025-04-21_snippet_4\n\nLANGUAGE: mustache\nCODE:\n```\n{\n    \"heading\": \"Regrade in progress\",\n    \"icon\": {\n        \"attributes\": [\n            {\"name\": \"src\", \"value\": \"/pix/i/timer.svg\"},\n            {\"name\": \"alt\", \"value\": \"\"}\n        ]\n    },\n    \"message\": \"Grades are being recalculated due to recent changes.\",\n    \"progress\": {\n        \"id\": \"progressbar_test\",\n        \"message\": \"Task pending\",\n        \"idnumber\": \"progressbar_test\",\n        \"class\": \"stored-progress-bar stored-progress-notstarted\",\n        \"width\": \"500\",\n        \"value\": \"0\"\n    },\n    \"runurl\": \"http://example.com/runtask.php?id=1\",\n    \"runlabel\": \"Run now\"\n}\n```\n\n----------------------------------------\n\nTITLE: Rendering Basic Action Menu in PHP\nDESCRIPTION: Creates and renders a basic action menu with a single item using Moodle's core renderer.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n/** @var core_renderer $output*/\n$output = $PAGE->get_renderer('core');\n\n$menu = new action_menu();\n\n// Add items.\n$menu->add(new action_menu_link(\n    new moodle_url($PAGE->url, ['foo' => 'bar']),\n    new pix_icon('t/emptystar', ''),\n    'Action link example',\n    false\n));\n\necho $output->render($menu);\n```\n\n----------------------------------------\n\nTITLE: Using PSR Clock Interface with Dependency Injection in PHP\nDESCRIPTION: Example of a PHP class that uses dependency injection to receive a ClockInterface implementation. The class demonstrates how to access the current time through the interface's now() method which returns a DateTimeImmutable object.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/clock/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\nuse Psr\\Clock\\ClockInterface;\n\nclass Foo\n{\n    private ClockInterface $clock;\n\n    public function __construct(ClockInterface $clock)\n    {\n        $this->clock = $clock;\n    }\n\n    public function doSomething()\n    {\n        /** @var DateTimeImmutable $currentDateAndTime */\n        $currentDateAndTime = $this->clock->now();\n        // do something useful with that information\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 Anonymous IP Database in PHP\nDESCRIPTION: Example of using the GeoIP2 Database Reader to check if an IP address is anonymous. Creates a Reader object for the Anonymous IP database and displays relevant information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$anonymousDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-Anonymous-IP.mmdb');\n\n$record = $anonymousDbReader->anonymousIp('128.101.101.101');\n\nif ($record->isAnonymous) { print \"anon\\n\"; }\nprint($record->ipAddress . \"\\n\"); // '128.101.101.101'\nprint($record->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Creating Multiple User Accounts in Moodle using tool_generator\nDESCRIPTION: This function generates a specified number of user accounts in Moodle. It uses the tool_generator plugin to create accounts efficiently. The function handles progress tracking and error reporting.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/generator/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nfunction progress_createaccounts($generator, $size, $courseid) {\n    $users = $generator->create_users($size);\n    $enrolplugin = enrol_get_plugin('manual');\n    $instance = $DB->get_record('enrol', array('courseid' => $courseid, 'enrol' => 'manual'));\n    foreach ($users as $user) {\n        $enrolplugin->enrol_user($instance, $user->id);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Static Images\nDESCRIPTION: Demonstrates the folder structure for storing static image assets.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-images.md#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n static\n      moodle\n          getting-started\n             adding-images\n```\n\n----------------------------------------\n\nTITLE: Implementing Cron Support for Question Format Plugin\nDESCRIPTION: Standard method for adding cron functionality to a question format plugin by creating a lib.php file with a specific cron function.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nfunction qformat_mypluginname_cron() {};\n```\n\n----------------------------------------\n\nTITLE: Refactor of Question Actions as Standalone Qbank Feature - PHP\nDESCRIPTION: This entry highlights the transition of question actions to a standalone qbank plugin feature, detailing the use of get_question_actions() for action handling, and the new question_action_base class that replaces deprecated classes for enhanced functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/upgrade.txt#2025-04-21_snippet_2\n\n\n\n----------------------------------------\n\nTITLE: Installing PHPMailer via Composer JSON Configuration\nDESCRIPTION: This snippet shows how to add PHPMailer as a dependency in a composer.json file. It specifies version 6.9.2 or higher using semantic versioning.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n\"phpmailer/phpmailer\": \"^6.9.2\"\n```\n\n----------------------------------------\n\nTITLE: Initializing and Using GeoIP2 Web Service Client in PHP\nDESCRIPTION: Demonstrates how to initialize and use the GeoIP2 web service client to look up geolocation data for an IP address. Shows various data fields that can be accessed from the response including country, city, postal code, and coordinates. Requires GeoIP2 PHP library and valid MaxMind credentials.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\WebService\\Client;\n\n// This creates a Client object that can be reused across requests.\n// Replace \"42\" with your account ID and \"license_key\" with your license\n// key. Set the \"host\" to \"geolite.info\" in the fourth argument options\n// array to use the GeoLite2 web service instead of the GeoIP2 web\n// service. Set the \"host\" to \"sandbox.maxmind.com\" in the fourth argument\n// options array to use the Sandbox GeoIP2 web service instead of the\n// production GeoIP2 web service.\n$client = new Client(42, 'abcdef123456');\n\n// Replace \"city\" with the method corresponding to the web service that\n// you are using, e.g., \"country\", \"insights\".\n$record = $client->city('128.101.101.101');\n\nprint($record->country->isoCode . \"\\n\"); // 'US'\nprint($record->country->name . \"\\n\"); // 'United States'\nprint($record->country->names['zh-CN'] . \"\\n\"); // ''\n\nprint($record->mostSpecificSubdivision->name . \"\\n\"); // 'Minnesota'\nprint($record->mostSpecificSubdivision->isoCode . \"\\n\"); // 'MN'\n\nprint($record->city->name . \"\\n\"); // 'Minneapolis'\n\nprint($record->postal->code . \"\\n\"); // '55455'\n\nprint($record->location->latitude . \"\\n\"); // 44.9733\nprint($record->location->longitude . \"\\n\"); // -93.2323\n\nprint($record->traits->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Basic Usage of PHP Markdown\nDESCRIPTION: Example of using the Markdown class to convert text to HTML with the defaultTransform method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Michelf\\Markdown;\n$my_html = Markdown::defaultTransform($my_text);\n```\n\n----------------------------------------\n\nTITLE: Implementing Stored Progress Task Trait in PHP\nDESCRIPTION: This code shows how to implement a task class that uses the stored_progress_task_trait. It demonstrates starting, progressing, and completing the stored progress during task execution.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/task-indicator.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nclass mytask extends adhoc_task {\n    use \\core\\task\\stored_progress_task_trait;\n\n    public function execute(): void {\n        $this->start_stored_progress();\n        $storedprogress = $this->get_progress();\n        foreach ($this->get_records() as $record) {\n            $this->process_record($record);\n            $storedprogress->progress();\n        }\n        $storedprogress->end_progress();\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Deprecated Behat Step for Learning Plan Generation in Moodle\nDESCRIPTION: This code snippet shows the deprecated Behat step for generating learning plan data in Moodle 5.0. It also provides the recommended alternative step to use instead, which involves using core_competency-specific steps.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nbehat_tool_lp_data_generators::the_following_lp_exist is deprecated. Use the following \"core_competency > [competency|framework|plan...]\" exist:\n```\n\n----------------------------------------\n\nTITLE: Implementing HTML Notification Badge Button in Moodle\nDESCRIPTION: Example of a basic notification badge implementation within a button element using Bootstrap classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/alert-badge.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<button class=\"btn btn-outline-secondary\">\n    Grade\n    <span class=\"ms-1 badge rounded-pill text-bg-primary\" title=\"Needs grading\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n</button>\n```\n\n----------------------------------------\n\nTITLE: Adding 'versionfromdb' DB Parameter\nDESCRIPTION: A new DB parameter 'versionfromdb' is available for MySQL and MariaDB drivers. It allows to force the DB version to be evaluated through an explicit call to VERSION() to skip the PHP client version.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_40\n\n\n\n----------------------------------------\n\nTITLE: New Method for section_info Class\nDESCRIPTION: The section_info class now includes a get_sequence_cm_infos() method that retrieves all cm_info instances associated with a course section.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_59\n\nLANGUAGE: PHP\nCODE:\n```\n\\section_info::get_sequence_cm_infos()\n```\n\n----------------------------------------\n\nTITLE: Implementing Capability Check Method for Dynamic Tables in PHP\nDESCRIPTION: The \\core_table\\dynamic class now requires implementation of a new has_capability(): bool method. This method allows classes implementing the dynamic table interface to perform access checks.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/table/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\npublic function has_capability(): bool\n```\n\n----------------------------------------\n\nTITLE: Task Execution Parameter Additions - PHP\nDESCRIPTION: This snippet highlights additional parameters added to various task execution methods, enabling better control over task execution and allowing users to filter tasks based on specific criteria.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_59\n\nLANGUAGE: php\nCODE:\n```\n  * Functions get_next_adhoc_task() and cron::run_adhoc_tasks() have additional parameter $classname to filter by the specified class.\n  * Function cron::run_adhoc_tasks() has additional parameter $number to limit the number of the tasks to run.\n  * Function get_adhoc_tasks() has additional parameter $failedonly to return only failed tasks.\n```\n\n----------------------------------------\n\nTITLE: Adding Validation Method in mod_assign - PHP\nDESCRIPTION: A new method called `assign_plugin::settings_validation` has been added, which allows for data validation when an assignments form is saved. This enhancement improves data integrity and developer flexibility in assignment handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_29\n\nLANGUAGE: php\nCODE:\n```\n// Assign sub-plugins have a new method assign_plugin::settings_validation which can be overridden to validate the data when the assignments form is saved.\n// For more information see [MDL-83440](https://tracker.moodle.org/browse/MDL-83440)\n```\n\n----------------------------------------\n\nTITLE: Adding Get Uses Method to Content Class in PHP\nDESCRIPTION: A new method 'get_uses()' has been added to the content class. This method returns the places where a content is used within the system.\nSOURCE: https://github.com/moodle/moodle/blob/main/contentbank/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nget_uses()\n```\n\n----------------------------------------\n\nTITLE: External Function Deprecations - PHP\nDESCRIPTION: This snippet mentions the deprecation of certain external functions, providing guidance to developers for using recommended alternatives, which steers code towards improved practices and updated functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_57\n\nLANGUAGE: php\nCODE:\n```\n  * The external function core_grades_get_enrolled_users_for_search_widget is now deprecated.\n  Please use the new core_grades_get_enrolled_users_for_selector external function instead.\n  * The external function core_grades_get_groups_for_search_widget is now deprecated.\n  Please use the new core_grades_get_groups_for_selector external function instead.\n```\n\n----------------------------------------\n\nTITLE: Importing PhpSpreadsheet Library with Shell Script\nDESCRIPTION: A shell script for importing PhpSpreadsheet version 4 into Moodle. The script backs up existing files, sets up a temporary directory, configures Composer dependencies, removes unnecessary files, and places the library in the correct location.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\nmv lib/phpspreadsheet/readme_moodle.txt ./\nmv lib/phpspreadsheet/moodle.diff ./\nrm -rf lib/phpspreadsheet/*\ntempdir=`mktemp -d`\ncd \"${tempdir}\"\ncomposer init --require phpoffice/phpspreadsheet:^4 -n\ncat composer.json | jq '.replace.\"composer/pcre\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncat composer.json | jq '.replace.\"maennchen/zipstream-php\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncat composer.json | jq '.replace.\"psr/http-client\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncat composer.json | jq '.replace.\"psr/http-factory\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncat composer.json | jq '.replace.\"psr/http-message\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncat composer.json | jq '.replace.\"psr/simple-cache\"=\"*\"' --indent 4 > composer.json.tmp; mv composer.json.tmp composer.json\ncomposer install\nrm -rf vendor/composer\nrm vendor/autoload.php\n# Delete all hidden files and phpstan.neon\nfind vendor -name '.*' | xargs rm -rf {} \\;\nfind vendor -name 'phpstan*' | xargs rm -rf {} \\;\n# Delete legacy Xls (Excel5) files.\nfind vendor -name 'Xls.php' | xargs rm -rf {} \\;\nfind vendor -name 'Xls' | xargs rm -rf {} \\;\n# Delete legacy OLE files.\nfind vendor -name 'OLE' | xargs rm -rf {} \\;\nfind vendor -name 'OLERead.php' | xargs rm -rf {} \\;\nfind vendor -name 'OLE.php' | xargs rm -rf {} \\;\nfind vendor -name '*.dist' | xargs rm -rf {} \\;\n# Remove examples.\nfind vendor -name 'examples' | xargs rm -rf {} \\;\ncd -\ncp -rf \"${tempdir}/vendor/\"* lib/phpspreadsheet/\nmv readme_moodle.txt lib/phpspreadsheet/\nmv moodle.diff ./lib/phpspreadsheet/\nmv lib/phpspreadsheet/phpoffice/phpspreadsheet lib/phpspreadsheet\nrm -rf $tempdir\ngit add .\n```\n\n----------------------------------------\n\nTITLE: Basic Cache Request Flow Example\nDESCRIPTION: Illustrates the flow of a basic cache request with no chained stores, where the data is not found in the cache and must be generated by the application code.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_6\n\nLANGUAGE: text\nCODE:\n```\n=> Code calls get\n    => Loader handles get, passes the request to its store\n        <= Memcache doesn't have the data. sorry.\n    <= Loader returns the result.\n|= Code couldn't get the data from the cache. It must generate it and then ask the loader to cache it.\n```\n\n----------------------------------------\n\nTITLE: Deprecated Class quiz_has_question_use (Moodle 4.1)\nDESCRIPTION: The class `quiz_has_question_use` is deprecated in Moodle 4.1.  The replacement is `mod_quiz\\structure::has_use_capability`.  Developers should update their code to use the new capability check.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n\"quiz_has_question_use is now deprecated. Use mod_quiz\\structure::has_use_capability istead.\"\n```\n\n----------------------------------------\n\nTITLE: Synchronous Wait with Exception in PHP\nDESCRIPTION: This code demonstrates how an exception thrown within the wait function of a promise will cause the promise to be rejected and the exception to be thrown when `wait` is called. The example throws an exception with the message 'foo', which is then caught when `wait` is called.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n\"$promise = new Promise(function () use (&$promise) {\n    throw new Exception('foo');\n});\n\n$promise->wait(); // throws the exception.\"\n```\n\n----------------------------------------\n\nTITLE: Guzzle v6 Middleware Request Modification\nDESCRIPTION: Demonstrates the new middleware-based approach for modifying requests in Guzzle version 6, using immutable request objects and handler stacks\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse GuzzleHttp\\Middleware;\n// Create a handler stack that has all of the default middlewares attached\n$handler = GuzzleHttp\\HandlerStack::create();\n// Push the handler onto the handler stack\n$handler->push(Middleware::mapRequest(function (RequestInterface $request) {\n    // Notice that we have to return a request object\n    return $request->withHeader('X-Foo', 'Bar');\n}));\n// Inject the handler into the client\n$client = new GuzzleHttp\\Client(['handler' => $handler]);\n```\n\n----------------------------------------\n\nTITLE: Creating PHP Stream Resource from PSR-7 Stream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to create a PHP stream resource from a PSR-7 stream using GuzzleHttp\\Psr7\\StreamWrapper. This allows a PSR-7 stream to be used with PHP functions that expect a stream resource, enabling interoperability between different stream handling systems.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7\\StreamWrapper;\n\n$stream = GuzzleHttp\\Psr7\\Utils::streamFor('hello!');\n$resource = StreamWrapper::getResource($stream);\necho fread($resource, 6); // outputs hello!\n```\n```\n\n----------------------------------------\n\nTITLE: External API Configuration (PHP)\nDESCRIPTION: Configuration changes for external forum API functions including new parameters and return fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/forum/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$CFG->forumpostcountchunksize = 5000; // Default chunk size for post count processing\n$CFG->noreplyaddress // Centralized no-reply address setting\n```\n\n----------------------------------------\n\nTITLE: Shrinking Absolute CSS Sizes\nDESCRIPTION: Reducing all absolute CSS sizes by half using the library's value manipulation methods\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$parser = new \\Sabberworm\\CSS\\Parser($css);\n$cssDocument = $parser->parse();\nforeach ($cssDocument->getAllValues() as $value) {\n    if ($value instanceof CSSSize && !$value->isRelative()) {\n        $value->setSize($value->getSize() / 2);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Activity Purpose in Moodle Module\nDESCRIPTION: Demonstrates how to assign a purpose to a Moodle activity (quiz in this example) by implementing the supports function in the module's lib.php file.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nfunction quiz_supports($feature) {\n    switch($feature) {\n        ..\n        case FEATURE_PLAGIARISM: return true;\n        case FEATURE_MOD_PURPOSE: return MOD_PURPOSE_ASSESSMENT;\n        ..\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 City Database in PHP\nDESCRIPTION: Complete example of using the GeoIP2 Database Reader to look up city information for an IP address. Demonstrates how to create a Reader object and access various properties of the returned record.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$cityDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-City.mmdb');\n\n// Replace \"city\" with the appropriate method for your database, e.g.,\n// \"country\".\n$record = $cityDbReader->city('128.101.101.101');\n\nprint($record->country->isoCode . \"\\n\"); // 'US'\nprint($record->country->name . \"\\n\"); // 'United States'\nprint($record->country->names['zh-CN'] . \"\\n\"); // ''\n\nprint($record->mostSpecificSubdivision->name . \"\\n\"); // 'Minnesota'\nprint($record->mostSpecificSubdivision->isoCode . \"\\n\"); // 'MN'\n\nprint($record->city->name . \"\\n\"); // 'Minneapolis'\n\nprint($record->postal->code . \"\\n\"); // '55455'\n\nprint($record->location->latitude . \"\\n\"); // 44.9733\nprint($record->location->longitude . \"\\n\"); // -93.2323\n\nprint($record->traits->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Smooth Lines Chart with Table Configuration\nDESCRIPTION: JSON configuration for a line chart with smooth curves. The chart includes two data series for Sales and Expenses from 2004-2007. The 'smooth' parameter is set to true to create curved lines instead of straight line segments.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_4\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022line\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022SMOOTH LINES CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[]},\\u0022config_colorset\\u0022:null,\\u0022smooth\\u0022:true}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Action Menu Choice Selection in Behat\nDESCRIPTION: Example of selecting nested items in action menus using Behat step definitions with the '>' separator\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_6\n\nLANGUAGE: gherkin\nCODE:\n```\nI choose \"Group mode > Visible groups\" in the open action menu\n```\n\n----------------------------------------\n\nTITLE: Implementing Toast Notification in Moodle\nDESCRIPTION: This JavaScript snippet shows how to create and display a toast notification using Moodle's core/toast module. It sets up a click event listener on a button to trigger the toast notification.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/notifications.md#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(\n[\n    'core/toast'\n],\nfunction(\n    Toast\n) {\n    document.querySelector('[data-action=\"showtoastnotification\"]').addEventListener('click', function() {\n        Toast.add('Toast message');\n    });\n});\n```\n\n----------------------------------------\n\nTITLE: Updated Autoloader Registration Method\nDESCRIPTION: The Moodle autoloader should now be registered using core\\component::register_autoloader rather than manual registration in exceptional cases.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_58\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\component::register_autoloader\n```\n\n----------------------------------------\n\nTITLE: Template Block Example of Show More Component\nDESCRIPTION: An example showing how to use the Show More component as a template block, referencing a specific example template from the component library.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/showmore.md#2025-04-21_snippet_1\n\nLANGUAGE: mustache\nCODE:\n```\n{{< mustache template=\"tool_componentlibrary/examples/showmore/example\" >}}\n    {\n    }\n{{< /mustache >}}\n```\n\n----------------------------------------\n\nTITLE: Renaming Core Component Class - PHP\nDESCRIPTION: Renames the class `\\core_component` to `\\core\\component` to support autoloading, thereby improving code organization without affecting existing usage.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_component\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\component\n```\n\n----------------------------------------\n\nTITLE: Cron Utility Functions Refactoring - PHP\nDESCRIPTION: This snippet demonstrates the refactoring of cron utility functions to encapsulate them within a dedicated \\core\\cron class, enhancing organization and usability of cron tasks within the core Moodle functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_55\n\nLANGUAGE: php\nCODE:\n```\n  * Cron utility functions have been moved from the global namespaces to the \\core\\cron class, these include:\n  - cron_setup_user()                => \\core\\cron::setup_user()\n  - cron_run()                       => \\core\\cron::run_main_process()\n  - cron_run_scheduled_task()        => \\core\\cron::run_scheduled_tasks()\n  - cron_run_adhoc_task()            => \\core\\cron::run_adhoc_tasks()\n  - cron_run_inner_scheduled_task()  => \\core\\cron::run_inner_scheduled_task()\n  - cron_run_inner_adhoc_task()      => \\core\\cron::run_inner_adhoc_task()\n  - cron_set_process_title()         => \\core\\cron::set_process_title()\n  - cron_trace_time_and_memory()     => \\core\\cron::trace_time_and_memory()\n  - cron_prepare_core_renderer()     => \\core\\cron::prepare_core_renderer()\n```\n\n----------------------------------------\n\nTITLE: New set_report_action and set_report_info_container Methods in PHP\nDESCRIPTION: Enhancements in the base report class allowing the addition of action buttons and info containers within reports.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Method to set report action button\npublic function set_report_action($action) {\n    // Code to set action\n}\n\n// Method to set report info container\npublic function set_report_info_container($info) {\n    // Code to set info container\n}\n```\n\n----------------------------------------\n\nTITLE: TinyMCE External Configuration Method\nDESCRIPTION: External function for retrieving TinyMCE editor configuration from subplugins that implement the plugin_with_configuration_for_external interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_15\n\nLANGUAGE: PHP\nCODE:\n```\neditor_tiny_get_configuration\n```\n\n----------------------------------------\n\nTITLE: MarkdownExtra Fenced Code Blocks with GitHub Flavour\nDESCRIPTION: This snippet highlights the addition of backtick fenced code blocks to MarkdownExtra, aligning PHP Markdown with features from Github-Flavored Markdown. This amendment allows users to create code blocks without indentation, enhancing readability and compatibility with other Markdown parsers. The language or syntax doesn't need to be specified within the fenced block.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_9\n\n\n\n----------------------------------------\n\nTITLE: Defining Read-Only AJAX Sessions in PHP\nDESCRIPTION: AJAX pages can be called without requiring a session lock by setting READ_ONLY_SESSION to true. This requires $CFG->enable_read_only_sessions to be set to true as well.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_75\n\nLANGUAGE: PHP\nCODE:\n```\ndefine('READ_ONLY_SESSION', true);\n```\n\n----------------------------------------\n\nTITLE: Using the Preg Class for Type-Safe PCRE Operations\nDESCRIPTION: Examples showing how to use the Preg class to perform regex operations that throw exceptions instead of failing silently, providing type safety and more predictable return values.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Composer\\Pcre\\Preg;\n\nif (Preg::match('{fo+}', $string, $matches)) { ... }\nif (Preg::matchWithOffsets('{fo+}', $string, $matches)) { ... }\nif (Preg::matchAll('{fo+}', $string, $matches)) { ... }\n$newString = Preg::replace('{fo+}', 'bar', $string);\n$newString = Preg::replaceCallback('{fo+}', function ($match) { return strtoupper($match[0]); }, $string);\n$newString = Preg::replaceCallbackArray(['{fo+}' => fn ($match) => strtoupper($match[0])], $string);\n$filtered = Preg::grep('{[a-z]}', $elements);\n$array = Preg::split('{[a-z]+}', $string);\n```\n\n----------------------------------------\n\nTITLE: Tensioned Lines Chart with Table Configuration\nDESCRIPTION: JSON configuration for a line chart with tensioned lines (non-smooth). The chart includes two data series for Sales and Expenses from 2004-2007. The 'smooth' parameter is explicitly set to false to create tensioned lines rather than smooth curves.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022line\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022TENSIONED LINES CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[]},\\u0022config_colorset\\u0022:null,\\u0022smooth\\u0022:false}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Basic Emoji Picker Function Call\nDESCRIPTION: Simplified example showing the basic function call to initialize the emoji picker with a DOM node and callback function.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/emojipicker.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nemojiPicker(domNode, callback);\n```\n\n----------------------------------------\n\nTITLE: New Methods in Moodle Database Class - PHP\nDESCRIPTION: Introduces two new functions, `\\moodle_database::get_counted_records_sql()` and `\\moodle_database::get_counted_recordset_sql()`, which optimize SQL counting for supported databases.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n\\moodle_database::get_counted_records_sql()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\moodle_database::get_counted_recordset_sql()\n```\n\n----------------------------------------\n\nTITLE: Updating Grade Export Form Submission\nDESCRIPTION: Demonstrates how to update the grade export form to utilize simple UI. Developers are required to pass 'simpleui' => true as an option to the grade_export_form and submit directly to the export script.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/export/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: Markdown\nCODE:\n```\n\"To update your export plugins you must pass 'simpleui' => true as an option to the grade_export_form, and make your grade_export_form submit directly to your export script.\"\n```\n\n----------------------------------------\n\nTITLE: Report Builder Row Count Method\nDESCRIPTION: New method signature for retrieving report row counts in the report helper class without fetching the full report content.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\nget_report_row_count\n```\n\n----------------------------------------\n\nTITLE: Deprecated Navigation Methods\nDESCRIPTION: List of deprecated navigation-related methods that have been replaced with newer alternatives. This includes methods for handling section activities and renderer methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_31\n\nLANGUAGE: PHP\nCODE:\n```\nglobal_navigation::load_section_activities\n```\n\nLANGUAGE: PHP\nCODE:\n```\nrender_action_menu_link\n```\n\nLANGUAGE: PHP\nCODE:\n```\nrender_action_menu_link_primary\n```\n\nLANGUAGE: PHP\nCODE:\n```\nrender_action_menu_link_secondary\n```\n\nLANGUAGE: PHP\nCODE:\n```\nrender_action_menu_filler\n```\n\n----------------------------------------\n\nTITLE: Injecting Basic Mock Plugin Type in PHP Unit Tests\nDESCRIPTION: Demonstrates how to inject a basic mock plugin type into core_component for testing. This operation rebuilds the core_component cache and should be used with @runInSeparateProcess tag.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/tests/fixtures/fakeplugins/fake/fullfeatured/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$this->add_full_mocked_plugintype(\n    plugintype: 'fake',\n    path: 'lib/tests/fixtures/fakeplugins/fake',\n);\n```\n\n----------------------------------------\n\nTITLE: Implementing Quiz Access Rule Cron Function in PHP\nDESCRIPTION: Example of how to implement a cron function for quiz access rule plugins. This function should be placed in the lib.php file of the plugin and follows the standard Moodle cron naming convention.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/accessrule/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nfunction quizaccess_mypluginname_cron() {};\n```\n\n----------------------------------------\n\nTITLE: Using StrictGroups Methods for Non-Nullable Match Groups\nDESCRIPTION: Preg class methods with StrictGroups variants that ensure match groups are always non-nullable, making it easier to write type-safe code with regex patterns that don't have optional subpatterns.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse Composer\\Pcre\\Preg;\n\n// $matches is guaranteed to be an array of strings, if a subpattern does not match and produces a null it will throw\nif (Preg::matchStrictGroups('{fo+}', $string, $matches))\nif (Preg::matchAllStrictGroups('{fo+}', $string, $matches))\n```\n\n----------------------------------------\n\nTITLE: SQL Comparison for User Preferences Value Field\nDESCRIPTION: Example of using $DB->sql_compare_text() for queries with conditions on the {user_preferences}.value field, which has been changed from CHAR to TEXT.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$DB->sql_compare_text()\n```\n\n----------------------------------------\n\nTITLE: Equivalent Flat Route Definitions\nDESCRIPTION: Shows the equivalent flat route definitions that would result from the grouped route definitions, demonstrating how the group prefix is prepended to each route pattern.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$r->addRoute('GET', '/admin/do-something', 'handler');\n$r->addRoute('GET', '/admin/do-another-thing', 'handler');\n$r->addRoute('GET', '/admin/do-something-else', 'handler');\n```\n\n----------------------------------------\n\nTITLE: Rejection Forwarding with Exceptions in PHP\nDESCRIPTION: This code snippet demonstrates how rejections can be forwarded down the promise chain when an exception is thrown in an `$onRejected` callback. The subsequent `$onRejected` callback receives the thrown exception as the reason. The assertion confirms that the message of the exception is 'Error!'.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    throw new Exception($reason);\n})->then(null, function ($reason) {\n    assert($reason->getMessage() === 'Error!');\n});\n\n$promise->reject('Error!');\"\n```\n\n----------------------------------------\n\nTITLE: Migrating ServiceDescription in Guzzle\nDESCRIPTION: Example showing the migration of Guzzle's ServiceDescription class usage. The key change is replacing command-related methods with operation-related methods, reflecting the terminology change from 'commands' to 'operations'.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Service\\Description\\ServiceDescription;\n\n$sd = new ServiceDescription();\n$sd->getCommands();     // @returns ApiCommandInterface[]\n$sd->hasCommand($name);\n$sd->getCommand($name); // @returns ApiCommandInterface|null\n$sd->addCommand($command); // @param ApiCommandInterface $command\n```\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Service\\Description\\ServiceDescription;\n\n$sd = new ServiceDescription();\n$sd->getOperations();           // @returns OperationInterface[]\n$sd->hasOperation($name);\n$sd->getOperation($name);       // @returns OperationInterface|null\n$sd->addOperation($operation);  // @param OperationInterface $operation\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 Connection-Type Database in PHP\nDESCRIPTION: Example of using the GeoIP2 Database Reader to look up connection type information for an IP address. Creates a Reader object and displays the connection type and network information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$connectionTypeDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-Connection-Type.mmdb');\n\n$record = $connectionTypeDbReader->connectionType('128.101.101.101');\n\nprint($record->connectionType . \"\\n\"); // 'Corporate'\nprint($record->ipAddress . \"\\n\"); // '128.101.101.101'\nprint($record->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Updated removeRule() Method Usage in PHP\nDESCRIPTION: Demonstrates how to maintain backward compatibility with the modified removeRule() method which now only removes the exact rule instance when passed a Rule object, rather than all rules of the same type.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nSabberworm\\CSS\\RuleSet->removeRule($oRule->getRule()\n```\n\n----------------------------------------\n\nTITLE: JavaScript Dropdown Control\nDESCRIPTION: Shows how to control dropdowns using JavaScript, including opening and closing functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_6\n\nLANGUAGE: javascript\nCODE:\n```\nimport {getDropdownDialog} from 'core/local/dropdown/';\n\nconst dialog = getDropdownDialog('[MYDROPDOWNSELECTOR]');\ndocument.querySelector('[data-for=\"openDropdown\"]').addEventListener('click', (event) => {\n    event.stopPropagation();\n    dialog.setVisible(true);\n});\n```\n\n----------------------------------------\n\nTITLE: Implementing Navbar Search Form in Moodle\nDESCRIPTION: This snippet demonstrates the implementation of a navbar search form using the core/search_input_navbar template. This search should be used once on a page to trigger a global site search, using minimal space to prevent breakage on mobile devices.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/search-input.md#2025-04-21_snippet_3\n\nLANGUAGE: json\nCODE:\n```\n{\n        \"action\": \"https://moodle.local/admin/search.php\",\n        \"inputname\": \"search\",\n        \"searchstring\": \"Search\",\n        \"hiddenfields\": [\n            {\n                \"name\": \"cmid\",\n                \"value\": \"11\"\n            }\n        ]\n    }\n```\n\n----------------------------------------\n\nTITLE: Replacing question_rewrite_questiontext_preview_urls Function in PHP\nDESCRIPTION: Updated the function for displaying question text without an active attempt. The new function, question_rewrite_question_preview_urls, replaces the old mechanism and requires additional parameters for flexibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n// Replace this:\n// question_rewrite_questiontext_preview_urls(...)\n// With this:\nquestion_rewrite_question_preview_urls(..., $additional_params);\n```\n\n----------------------------------------\n\nTITLE: Using the Builder Class to Create Matrices\nDESCRIPTION: This snippet shows the use of the Builder class to create a filled matrix and an identity matrix. It highlights the flexibility of generating matrices with specific values or structures.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$matrix = Matrix\\Builder::createFilledMatrix(1, 5, 3);\n$matrix = Matrix\\Builder::createIdentityMatrix(3);\n```\n\n----------------------------------------\n\nTITLE: Database Table quiz_slots Fields Removed (Moodle 4.0)\nDESCRIPTION: The fields `question_references` and `question_set_references` have been removed from the `quiz_slots` database table. These fields are now managed by the new `core_question` tables. The data is now managed by `core_question` tables: `question_references` records where a specific question is used, `question_set_references` records where groups of questions are used (e.g. random questions).\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_10\n\nLANGUAGE: text\nCODE:\n```\n\"Related to the Moodle 4.0 question bank changes, the quiz_slots database table.\nThe fields removed are now manage by new core_question tables:\n  - question_references -> Records where a specific question is used.\n  - question_set_references -> Records where groups of questions are used (e.g. random questions).\"\n```\n\n----------------------------------------\n\nTITLE: CSS Variables for Activity Icon Customization\nDESCRIPTION: Introduces new CSS variables to customize activity icon background colors, replacing previous filter-based approach. Provides more flexible theming options for activity icons.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: scss\nCODE:\n```\n$activity-icon-administration-bg\n$activity-icon-assessment-bg\n$activity-icon-collaboration-bg\n$activity-icon-communication-bg\n$activity-icon-content-bg\n$activity-icon-interactivecontent-bg\n```\n\n----------------------------------------\n\nTITLE: Centering Items Horizontally with Bootstrap Flexbox\nDESCRIPTION: This snippet illustrates how to use the align-items-center class to align items horizontally in the center of a flex container.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/positioning.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex align-items-center p-2 bg-light\">\n    <div class=\"bg-success me-2\" style=\"width: 35px; height: 35px;\"></div>\n    <div class=\"bg-warning me-2\" style=\"width: 48px; height: 48px;\"></div>\n    <div class=\"bg-info me-2\" style=\"width: 20px; height: 20px;\"></div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: New Completion API Methods and Features\nDESCRIPTION: Introduction of new methods and features for handling course and activity completion in Moodle\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// New methods\n// - cm_completion_details::is_overall_complete()\n// - cm_completion_details::is_manual()\n// - mark_course_completions_activity_criteria()\n// - get_available_completion_options()\n```\n\n----------------------------------------\n\nTITLE: Output Hook After HTTP Headers - PHP\nDESCRIPTION: Introduces a new hook `\\core\\hook\\output\\after_http_headers`, allowing plugins to modify content after HTTP headers are sent, enhancing output flexibility for developers.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_11\n\n\n\n----------------------------------------\n\nTITLE: Creating and Using a FulfilledPromise in PHP\nDESCRIPTION: Shows how to create a FulfilledPromise and immediately invoke a fulfilled callback.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nuse GuzzleHttp\\Promise\\FulfilledPromise;\n\n$promise = new FulfilledPromise('value');\n\n// Fulfilled callbacks are immediately invoked.\n$promise->then(function ($value) {\n    echo $value;\n});\n```\n\n----------------------------------------\n\nTITLE: Question Data Structure Method Reference\nDESCRIPTION: Method reference for handling question data structures in question type plugins, specifically the get_question_options() method for formatting question data during backup and restore operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\nget_question_options()\n```\n\n----------------------------------------\n\nTITLE: Rendering Update Mode Dropdown Status in PHP for Moodle\nDESCRIPTION: This PHP code snippet demonstrates how to create and render an update mode dropdown status component in Moodle. It sets up a choicelist with options and renders it as a dropdown status with update functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$choice = new core\\output\\choicelist('Dialog content');\n\n$choice->add_option('option1', get_string('option1', YOURPLUGIN));\n$choice->add_option('option2', get_string('option2', YOURPLUGIN));\n$choice->set_selected_value('option2');\n\n// Add some attribute to select through a query selector.\n$dialog = new core\\output\\local\\dropdown\\status(\n    get_string('buttontext', YOURPLUGIN),\n    $choice,\n    [\n        'extras' => ['id' => 'mydropdown'],\n        'updatestatus' => true,\n    ]\n);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Updating `$searchanywhere` Parameter to `$searchtype`\nDESCRIPTION: The `users_search_sql` function's parameter `$searchanywhere` has been changed to `$searchtype` for different types of search. `$searchtype` is an integer parameter and has three constant values: `USER_SEARCH_STARTS_WITH: 0`, `USER_SEARCH_CONTAINS: 1`, `USER_SEARCH_EXACT_MATCH: 2`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_32\n\n\n\n----------------------------------------\n\nTITLE: Configuring PSR-16 Cache Implementation with Symfony in SimplePie\nDESCRIPTION: Example showing how to set up PSR-16 compatible caching in SimplePie using Symfony's cache implementation. Demonstrates configuring a FilesystemAdapter as the cache backend.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/simplepie/README.markdown#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$simplepie = new \\SimplePie\\SimplePie();\n$simplepie->set_cache(\n    new \\Symfony\\Component\\Cache\\Psr16Cache(\n        new \\Symfony\\Component\\Cache\\Adapter\\FilesystemAdapter()\n    ),\n);\n```\n\n----------------------------------------\n\nTITLE: Installing LibPhoneNumber-for-PHP-Lite via Composer and Copying to Moodle Lib Directory\nDESCRIPTION: This bash script creates a temporary directory, uses Composer to download the libphonenumber-for-php-lite package, copies the source files and documentation to the Moodle lib directory, and then adds the changes to git before cleaning up the temporary directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ninstalldir=$(mktemp -d)\ncd \"$installdir\" || exit\ncomposer require giggsey/libphonenumber-for-php-lite\n\ncd - || exit\nrm -rf lib/giggsey/libphonenumber-for-php-lite/src\ncp -rf \"$installdir\"/vendor/giggsey/libphonenumber-for-php-lite/src lib/giggsey/libphonenumber-for-php-lite/src\ncp -rf \"$installdir\"/vendor/giggsey/libphonenumber-for-php-lite/{composer.json,LICENSE.txt,README.md} lib/giggsey/libphonenumber-for-php-lite\n\ngit add lib/giggsey/libphonenumber-for-php-lite\n\nrm -rf \"$installdir\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Feedback Item Type in PHP\nDESCRIPTION: Feedback item types must now implement the complete_form_element() method instead of several deprecated methods. This change affects how items are rendered in various feedback forms.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/feedback/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nclass feedback_item_type extends feedback_item_base {\n    public function complete_form_element($item, $value, $form) {\n        // Implementation here\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Extending AI Model Base Class in PHP\nDESCRIPTION: Base class that AI provider plugins must extend to implement pre-defined models and display additional settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/ai/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\\core_ai\\aimodel\\base\n```\n\n----------------------------------------\n\nTITLE: CurlMulti Client Injection\nDESCRIPTION: Demonstrates how to inject a custom CurlMulti object into each Guzzle client instance using the ServiceBuilder's `service_builder.create_client` event. This is useful when you want to reuse the same CurlMulti object across multiple clients.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$multi = new Guzzle\\Http\\Curl\\CurlMulti();\n$builder = Guzzle\\Service\\Builder\\ServiceBuilder::factory('/path/to/config.json');\n$builder->addListener('service_builder.create_client', function ($event) use ($multi) {\n    $event['client']->setCurlMulti($multi);\n}\n});\n?>\n```\n\n----------------------------------------\n\nTITLE: Using Constant-Time Encoding Functions in PHP\nDESCRIPTION: Demonstrates how to use various encoding functions from the library, including base64, base32, and hexadecimal encoding. It shows encoding random bytes using different methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/factor/totp/extlib/ParagonIE/ConstantTime/README.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nuse ParagonIE\\ConstantTime\\Encoding;\n\n// possibly (if applicable): \n// require 'vendor/autoload.php';\n\n$data = random_bytes(32);\necho Encoding::base64Encode($data), \"\\n\";\necho Encoding::base32EncodeUpper($data), \"\\n\";\necho Encoding::base32Encode($data), \"\\n\";\necho Encoding::hexEncode($data), \"\\n\";\necho Encoding::hexEncodeUpper($data), \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Database Connection Configuration - PostgreSQL\nDESCRIPTION: SQL commands for configuring PostgreSQL database connection parameters including character encoding, string conformance, and search path settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_86\n\nLANGUAGE: sql\nCODE:\n```\nALTER DATABASE moodle SET client_encoding = UTF8;\nALTER DATABASE moodle SET standard_conforming_strings = on;\nALTER DATABASE moodle SET search_path = 'moodle,public';\n```\n\n----------------------------------------\n\nTITLE: Adding Validation Method for Assign Sub-plugins in PHP\nDESCRIPTION: A new method 'assign_plugin::settings_validation' has been added for assign sub-plugins to validate data when the assignments form is saved.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nassign_plugin::settings_validation\n```\n\n----------------------------------------\n\nTITLE: Adding Admin Menu Items for Local Plugin in PHP\nDESCRIPTION: Configures administration menu entries for a local Moodle plugin, including category and external page definitions.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$ADMIN->add('root', new admin_category('tweaks', 'Custom tweaks'));\n$ADMIN->add('tweaks', new admin_externalpage('nicehackery', 'Tweak something',\n            $CFG->wwwroot.'/local/nicehack/setuppage.php'));\n```\n\n----------------------------------------\n\nTITLE: Initializing Amazon S3 Client in PHP\nDESCRIPTION: Creates an Amazon S3 client with configuration for AWS region and version. Requires Composer autoloader and AWS SDK for PHP.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/aws-sdk/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n// Require the Composer autoloader.\nrequire 'vendor/autoload.php';\n\nuse Aws\\S3\\S3Client;\n\n// Instantiate an Amazon S3 client.\n$s3 = new S3Client([\n    'version' => 'latest',\n    'region'  => 'us-west-2'\n]);\n```\n\n----------------------------------------\n\nTITLE: Creating a Context Object for Mustache Templates in PHP\nDESCRIPTION: An example showing how to create a PHP class to serve as a view context for Mustache templates. The class includes properties and a method that can be accessed within the template.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nclass Chris {\n    public $name  = \"Chris\";\n    public $value = 10000;\n\n    public function taxed_value() {\n        return $this->value - ($this->value * 0.4);\n    }\n\n    public $in_ca = true;\n}\n```\n\n----------------------------------------\n\nTITLE: HTML.TargetNoreferrer Configuration Definition\nDESCRIPTION: Configuration setting that determines whether noreferrer rel attributes are added to links with target attributes. When enabled, this security feature prevents malicious destinations from manipulating the original window through targeted links.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TargetNoreferrer.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.TargetNoreferrer\nTYPE: bool\nVERSION: 4.8.0\nDEFAULT: TRUE\n```\n\n----------------------------------------\n\nTITLE: Defining Multi-language Content Blocks\nDESCRIPTION: Demonstrates how to define content for multiple languages using 'lang blocks' in HTML. Dependencies include the proper setup of Moodle's multi-language capabilities, which are enabled through the admin filters. Each language-specific content is enclosed within a <span> tag with corresponding language attributes and classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/multilang/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<span lang=\\\"en\\\" class=\\\"multilang\\\">Hello!</span><span lang=\\\"es\\\" class=\\\"multilang\\\">Hola!</span>\\nThis text is common for every language because it's out from any lang block.\\n<span lang=\\\"en\\\" class=\\\"multilang\\\">Bye!</span><span lang=\\\"it\\\" class=\\\"multilang\\\">Ciao!</span>\n```\n\n----------------------------------------\n\nTITLE: Casting JWT Decode Result to Array in PHP\nDESCRIPTION: This snippet shows how to cast the stdClass object returned by JWT::decode to an array using json_encode and json_decode functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\n// return type is stdClass\n$decoded = JWT::decode($payload, $keys);\n\n// cast to array\n$decoded = json_decode(json_encode($decoded), true);\n```\n\n----------------------------------------\n\nTITLE: Recalibrating Row/Column Dimensions After Remove Operations\nDESCRIPTION: This snippet describes a fix that recalibrates Row/Column Dimensions after removeRow/Column operations in PhpSpreadsheet. The fix ensures that row and column dimensions are correctly recalculated and updated after removing rows or columns, preventing layout issues or inconsistencies. This enhances the accuracy and reliability of row/column dimension management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n\"Recalibrate Row/Column Dimensions after removeRow/Column. [Issue #2442](https://github.com/PHPOffice/PhpSpreadsheet/issues/2442) [PR #2486](https://github.com/PHPOffice/PhpSpreadsheet/pull/2486)\"\n```\n\n----------------------------------------\n\nTITLE: Basic JMESPath Search Functionality\nDESCRIPTION: The function `JmesPath\\search` is used for querying JSON structures using JMESPath expressions. It provides flexible and dynamic data extraction capabilities, relying on JMESPath runtimes for its implementation, with optional PSR-4 compliance.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jmespath/README.rst#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = JmesPath\\search($expression, $data);\n```\n\nLANGUAGE: php\nCODE:\n```\n$result = JmesPath\\Env::search($expression, $data);\n```\n\n----------------------------------------\n\nTITLE: Removed Methods and Functions\nDESCRIPTION: List of previously deprecated methods and functions that have been completely removed from Moodle and can no longer be used. These include renderer methods, error handling, and task management functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_32\n\nLANGUAGE: PHP\nCODE:\n```\nsearch_generate_text_SQL\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_text::reset_caches()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\renderer_base::should_display_main_logo()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\print_error()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\task\\manager::ensure_adhoc_task_qos()\n```\n\n----------------------------------------\n\nTITLE: Rendering a Template with a Context Object in PHP\nDESCRIPTION: Demonstrates how to render a Mustache template using a context object. This example instantiates the Mustache engine, creates an instance of the context class, and renders the template with the context.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$m = new Mustache_Engine;\n$chris = new Chris;\necho $m->render($template, $chris);\n```\n\n----------------------------------------\n\nTITLE: Updating Question Object in core_question_generator (PHP)\nDESCRIPTION: In Moodle 4.3, the `core_question_generator::update_question` method no longer modifies the input `$question` object directly.  Instead, it returns the updated question. This requires updating existing code that relied on the old behavior to assign the return value of the function back to the `$question` variable. The updated object now has fields questionbankentryid, versionid, version and status.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\"$questiongenerator->update_question($question, ...);\\n   to\\n$question = $questiongenerator->update_question($question, ...);\"\n```\n\n----------------------------------------\n\nTITLE: JavaScript State Checking Implementation\nDESCRIPTION: Demonstrates how to check the visibility state of a collapsable section using JavaScript.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/collapsable-sections.md#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\nimport CollapsableSection from 'core/local/collapsable_section/controls';\n\nconst section = CollapsableSection.instanceFromSelector('#MyCollapsableSection');\n\nif (section.isVisible()) {\n    console.log('The section is hidden.');\n} else {\n    console.log('The section is visible.');\n}\n```\n\n----------------------------------------\n\nTITLE: Caching a Stream with CachingStream in GuzzleHttp\nDESCRIPTION: This snippet illustrates the use of CachingStream in GuzzleHttp\\Psr7 for enabling seeking on non-seekable streams. It reads data from a remote resource (e.g., a URL), buffers the data in a temporary stream, and allows seeking to previously read positions. This is useful when rewinding is needed but the original stream doesn't support seeking.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$original = Psr7\\Utils::streamFor(fopen('http://www.google.com', 'r'));\n$stream = new Psr7\\CachingStream($original);\n\n$stream->read(1024);\necho $stream->tell();\n// 1024\n\n$stream->seek(0);\necho $stream->tell();\n// 0\n```\n```\n\n----------------------------------------\n\nTITLE: Basic Google API PHP Client Usage Example\nDESCRIPTION: This snippet demonstrates how to set up and use the Google API PHP Client library to search for free ebooks by Henry David Thoreau using the Google Books API. It includes initializing the client, setting credentials, and iterating through search results.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/google/README.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n\n  require_once 'google-api-php-client/src/Google/autoload.php'; // or wherever autoload.php is located\n  \n  $client = new Google_Client();\n  $client->setApplicationName(\"Client_Library_Examples\");\n  $client->setDeveloperKey(\"YOUR_APP_KEY\");\n  \n  $service = new Google_Service_Books($client);\n  $optParams = array('filter' => 'free-ebooks');\n  $results = $service->volumes->listVolumes('Henry David Thoreau', $optParams);\n\n  foreach ($results as $item) {\n    echo $item['volumeInfo']['title'], \"<br /> \\n\";\n  }\n  \n```\n\n----------------------------------------\n\nTITLE: Message Processor Callback Function\nDESCRIPTION: Callback function signature allowing plugins to manipulate messages before they are sent by a processor.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_80\n\nLANGUAGE: PHP\nCODE:\n```\n<component>_pre_processor_message_send($procname, $proceventdata)\n```\n\n----------------------------------------\n\nTITLE: Manipulating PSR-7 Message Body Separately in PHP\nDESCRIPTION: Illustrates how to work with the PSR-7 message body by getting it separately, performing operations, and then replacing it in the response.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$body = $response->getBody();\n// operations on body, eg. read, write, seek\n// ...\n// replacing the old body\n$response->withBody($body); \n// this last statement is optional as we working with objects\n// in this case the \"new\" body is same with the \"old\" one\n// the $body variable has the same value as the one in $request, only the reference is passed\n```\n\n----------------------------------------\n\nTITLE: Disabling Cache Stores in Moodle PHP\nDESCRIPTION: These snippets demonstrate how to disable cache stores in Moodle. This can be done either at the start of a script using a constant definition or within the script using the \\core_cache\\factory class methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Disable the cache store at the start of your script with:\ndefine('CACHE_DISABLE_STORES', true);\n\n// Disable the cache within your script when you want with:\n\\core_cache\\factory::disable_stores();\n// If you disabled it using the above means you can re-enable it with:\n\\core_cache\\factory::reset();\n```\n\n----------------------------------------\n\nTITLE: Adding a Button Element to a Moodle Form in PHP\nDESCRIPTION: This code demonstrates how to add a button element to a Moodle form using the addElement method from formslib.php. The button is given an identifier 'intro' and uses a localized string for its label.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/form-elements.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$mform->addElement('button', 'intro', get_string(\"buttonlabel\"));\n```\n\n----------------------------------------\n\nTITLE: Adding Active Users Query Method (Moodle 3.11)\nDESCRIPTION: A new method was added to the H5P activity manager to query all active users from a specific activity, even in a freeze context.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/h5pactivity/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\nAdded mod_h5pactivity\\local\\manager::get_active_users_join method to query all active\n  users from a specific activity, even in a freeze context.\n```\n\n----------------------------------------\n\nTITLE: Retrieving PSR-7 Body Contents in PHP\nDESCRIPTION: Demonstrates how to get the contents of a PSR-7 stream, including rewinding the stream to ensure all content is retrieved.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n$body = $response->getBody();\n$body->rewind(); // or $body->seek(0);\n$bodyText = $body->getContents();\n```\n\n----------------------------------------\n\nTITLE: Notification Message Enhancements in mod_assign - PHP\nDESCRIPTION: When the assignment activity sends notifications, it now incorporates more detailed information in the `$a` object used for language strings in message subjects and bodies. This change allows for improved customization options in notifications.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_31\n\nLANGUAGE: php\nCODE:\n```\n// When the assignment activity sends notifications, it now sets more information in the $a object passed to the languages strings for the message subject and body.\n// For more information see [MDL-84733](https://tracker.moodle.org/browse/MDL-84733)\n```\n\n----------------------------------------\n\nTITLE: Single Button PHP Implementation\nDESCRIPTION: PHP code showing how to create a single button using Moodle's renderer system.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/buttons.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$url = new moodle_url(\"$CFG->wwwroot/my/index.php\", $params);\n$button = $OUTPUT->single_button($url, $editstring);\n$PAGE->set_button($resetbutton . $button);\n```\n\n----------------------------------------\n\nTITLE: Supporting Autoloading of Legacy Class Files - PHP\nDESCRIPTION: Implements a mechanism for autoloading legacy class files, reducing the reliance on `require_once` calls and streamlining code refactoring.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_15\n\n\n\n----------------------------------------\n\nTITLE: New get_report_row_count Method in PHP\nDESCRIPTION: Defines a new method 'get_report_row_count' in the report helper class for retrieving row counts of reports without needing to fetch report content.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// New method in report helper class\npublic function get_report_row_count() {\n    // Implementation goes here\n}\n```\n\n----------------------------------------\n\nTITLE: Constructor Injection Example in PHP-DI 4.2\nDESCRIPTION: Shows how optional parameter injection behavior changed in version 4.2, where optional parameters are no longer automatically injected if not configured.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\npublic function __construct(Bar $bar = null)\n{\n    $this->bar = $bar ?: $this->createDefaultBar();\n}\n```\n\n----------------------------------------\n\nTITLE: Testing Notification Badges with Behat in Moodle\nDESCRIPTION: Behat test scenario for verifying notification badge presence and content in a table row.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/alert-badge.md#2025-04-21_snippet_3\n\nLANGUAGE: gherkin\nCODE:\n```\nAnd I should see \"Grade\" in the \"Assign with pending grades\" \"table_row\"\nAnd I should see \"(2)\" in the \"Assign with pending grades\" \"table_row\"\n```\n\n----------------------------------------\n\nTITLE: Using Callbacks with Promises in PHP\nDESCRIPTION: This code snippet demonstrates how to create a new promise instance and attach fulfillment and rejection callbacks using the `then` method. The `$onFulfilled` callback is executed when the promise is resolved, and the `$onRejected` callback is executed when the promise is rejected.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(\n    // $onFulfilled\n    function ($value) {\n        echo 'The promise was fulfilled.';\n    },\n    // $onRejected\n    function ($reason) {\n        echo 'The promise was rejected.';\n    }\n);\"\n```\n\n----------------------------------------\n\nTITLE: Vertical Bar Chart with Table Configuration\nDESCRIPTION: JSON configuration for a standard vertical bar chart. The chart includes two data series for Sales and Expenses from 2004-2007. The 'horizontal' parameter is set to false to display vertical bars, with an axis minimum value set to zero.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_5\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022bar\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022BAR CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[{\\u0022label\\u0022:null,\\u0022labels\\u0022:null,\\u0022max\\u0022:null,\\u0022min\\u0022:0,\\u0022position\\u0022:null,\\u0022stepSize\\u0022:null}]},\\u0022config_colorset\\u0022:null,\\u0022horizontal\\u0022:false,\\u0022stacked\\u0022:null}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: DML SQL Conversion Functions\nDESCRIPTION: Database methods for SQL operations including casting to character type and ordering null values in queries.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_64\n\nLANGUAGE: php\nCODE:\n```\n$DB->sql_cast_to_char()\n```\n\nLANGUAGE: php\nCODE:\n```\n$DB->sql_order_by_null\n```\n\nLANGUAGE: php\nCODE:\n```\n$DB->sql_regex_get_word_beginning_boundary_marker()\n```\n\nLANGUAGE: php\nCODE:\n```\n$DB->sql_regex_get_word_end_boundary_marker()\n```\n\n----------------------------------------\n\nTITLE: Creating Complex Objects with Values\nDESCRIPTION: This snippet demonstrates how to create a new Complex object using either individual values or an array, or a string representation of a complex number.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/complex/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$real = 1.23;\n$imaginary = -4.56;\n$suffix = 'i';\n\n$complexObject = new Complex\\Complex($real, $imaginary, $suffix);\n```\n\nLANGUAGE: php\nCODE:\n```\n$real = 1.23;\n$imaginary = -4.56;\n$suffix = 'i';\n\n$arguments = [$real, $imaginary, $suffix];\n\n$complexObject = new Complex\\Complex($arguments);\n```\n\nLANGUAGE: php\nCODE:\n```\n$complexString = '1.23-4.56i';\n\n$complexObject = new Complex\\Complex($complexString);\n```\n\n----------------------------------------\n\nTITLE: Deprecation of Older Completion Methods\nDESCRIPTION: Overview of deprecated methods and callback functions related to activity and course completion in Moodle\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// Deprecated methods\n// - core_course_bulk_activity_completion_renderer::navigation\n// - core_completion\\manager::get_available_completion_tabs\n// - completion_info::display_help_icon\n// - completion_info::print_help_icon\n// - *_get_completion_state() callback functions\n```\n\n----------------------------------------\n\nTITLE: Adding Parameters to `get_time_interval_string()`\nDESCRIPTION: New parameters `$dropzeroes` and `$fullformat` have been added to `get_time_interval_string()`. Passing `true` to `$dropzeroes` will exclude zero date/time units from the output. Passing `true` to `$fullformat` returns date/time units in full format (e.g., `1 day` instead of `1d`).\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_15\n\n\n\n----------------------------------------\n\nTITLE: Basic Usage of Html2Text - PHP\nDESCRIPTION: This snippet shows how to utilize the Html2Text library to convert an HTML string into plain text. It creates an instance of the Html2Text class and retrieves the formatted plain text from a sample HTML input. The expected output is plain text without HTML tags.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/html2text/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$html = new \\Html2Text\\Html2Text('Hello, &quot;<b>world</b>&quot;');\n\necho $html->getText();  // Hello, \"WORLD\"\n```\n```\n\n----------------------------------------\n\nTITLE: HTML Example of Different Badge Styles in Moodle\nDESCRIPTION: Shows all available badge styles (primary, secondary, success, danger, warning, info) implemented in a list structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/alert-badge.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<ul class=\"list-group\">\n    <li class=\"list-group-item\">\n        Primary badge\n        <span class=\"ms-1 badge rounded-pill text-bg-primary\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n    <li class=\"list-group-item\">\n        Secondary badge\n        <span class=\"ms-1 badge rounded-pill text-bg-secondary\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n    <li class=\"list-group-item\">\n        Success badge\n        <span class=\"ms-1 badge rounded-pill text-bg-success\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n    <li class=\"list-group-item\">\n        Danger badge\n        <span class=\"ms-1 badge rounded-pill text-bg-danger\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n    <li class=\"list-group-item\">\n        Warning badge\n        <span class=\"ms-1 badge rounded-pill text-bg-warning\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n    <li class=\"list-group-item\">\n        Info badge\n        <span class=\"ms-1 badge rounded-pill text-bg-info\" title=\"\"><span class=\"visually-hidden\"> (</span>1<span class=\"visually-hidden\">)</span></span>\n    </li>\n</ul>\n```\n\n----------------------------------------\n\nTITLE: Time Formatting Method for Reports in PHP\nDESCRIPTION: A new static method has been added for formatting time durations in column callbacks. This method can represent a duration as a formatted string (e.g., \"3 days 4 hours\").\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_73\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_reportbuilder\\local\\helpers\\format::format_time()\n```\n\n----------------------------------------\n\nTITLE: Configuring Redirects in Guzzle 4.0\nDESCRIPTION: Examples of configuring redirect behavior in Guzzle 4.0 using the allow_redirects request option. Shows both standard and strict redirect configuration with custom maximum redirects.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Standard redirects with a default of a max of 5 redirects\n$request = $client->createRequest('GET', '/', ['allow_redirects' => true]);\n\n// Strict redirects with a custom number of redirects\n$request = $client->createRequest('GET', '/', [\n    'allow_redirects' => ['max' => 5, 'strict' => true]\n]);\n```\n\n----------------------------------------\n\nTITLE: Removing Legacy Cron Task Classes\nDESCRIPTION: The following classes have been removed: `\\core\\task\\legacy_plugin_cron_task`, `\\mod_quiz\\task\\legacy_quiz_reports_cron`, `\\mod_quiz\\task\\legacy_quiz_accessrules_cron`, and `\\mod_workshop\\task\\legacy_workshop_allocation_cron`. Developers should migrate to the Task API as described in the Moodle documentation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_10\n\n\n\n----------------------------------------\n\nTITLE: Search Area Categorization and Custom Tabs\nDESCRIPTION: Enables search areas to have categories and implement custom search result tabs, allowing plugins to define additional search area categories\nSOURCE: https://github.com/moodle/moodle/blob/main/search/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// New methods for search area categorization\nget_category_names()\nsearch_area_categories()\n```\n\n----------------------------------------\n\nTITLE: Positioning Element in the Middle of Container with Bootstrap Flexbox\nDESCRIPTION: This example shows how to combine align-items-center and justify-content-center classes to position an element in the exact middle of a flex container both vertically and horizontally.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/positioning.md#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex align-items-center justify-content-center p-3 bg-light\" style=\"height:100px;\">\n    <div class=\"bg-warning me-2\" style=\"width: 48px; height: 48px;\"></div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Implementing find_instance() for Enrolment Plugins in PHP\nDESCRIPTION: New function to find a matching enrolment instance in a course using provided enrolment data. This should be implemented by enrolment plugins to support CSV course upload.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nfunction find_instance() {\n    // Implementation to find matching enrolment instance\n    // Return null if not found or not supported\n}\n```\n\n----------------------------------------\n\nTITLE: New Method for url_select Class\nDESCRIPTION: A new method set_disabled_option() has been added to url_select class to enable or disable an option based on its URL key.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_55\n\nLANGUAGE: PHP\nCODE:\n```\n\\url_select::set_disabled_option()\n```\n\n----------------------------------------\n\nTITLE: Renaming Core User Class - PHP\nDESCRIPTION: Renames the `\\core_user` class to `\\core\\user` to streamline the class structure and support autoloading, while maintaining backward compatibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_user\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\user\n```\n\n----------------------------------------\n\nTITLE: Updating Bootstrap Sass files\nDESCRIPTION: This snippet details the steps to update the Bootstrap Sass files within the Moodle theme. It involves removing the old directory, copying the new files from the Bootstrap source, and updating the thirdpartylibs.xml file.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n* download bootstrap source files to your home folder\n* remove folder theme/boost/scss/bootstrap\n* copy the scss files from ~/bootstrap/scss to theme/boost/scss/bootstrap\n* update ./thirdpartylibs.xml\n* follow the instructions in admin/tool/component_library/readme_moodle.txt to update the Bootstrap documentation there.\n```\n\n----------------------------------------\n\nTITLE: Localizing Custom Glossary Format Name in PHP\nDESCRIPTION: This snippet explains how to translate the custom format name for display in the Moodle interface. It involves editing the language file and adding a new string for the format name.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/formats/README.txt#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n9.-If you want to translate your THENAME format name to some nice name to\n   be showed in the Format popup, simply, edit your lang/XX/glossary.php\n   file (where XX is your language) and create a new displayformatTHENAME\n   string.\n```\n\n----------------------------------------\n\nTITLE: Custom Charset Encoding with Request Serialization\nDESCRIPTION: Demonstrates creating a custom character encoder and utilizing it during the serialization of a Request. This method empowers developers to define their charset encoding, which enhances Request serialization flexibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n// 1. create an instance of a custom character encoder\n// $myCharsetEncoder = ...\n// 2. then use it while serializing a Request:\nRequest::setCharsetEncoder($myCharsetEncoder);\n$request->serialize($funkyCharset);\n```\n\n----------------------------------------\n\nTITLE: New Exceptions in Core Exception Namespace - PHP\nDESCRIPTION: Adds a set of new exceptions to the `\\core\\exception` namespace, improving error handling and providing developers with more robust exception management tools.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_16\n\n\n\n----------------------------------------\n\nTITLE: Moving External API to `core_external` Subsystem\nDESCRIPTION: The following parts of the external API have been moved to the `core_external` subsystem: `external_api`, `external_description`, `external_files`, `external_format_value`, `external_function_parameters`, `external_multiple_structure`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_48\n\n\n\n----------------------------------------\n\nTITLE: Basic FPDI Usage Example (PHP)\nDESCRIPTION: PHP example demonstrating basic usage of FPDI to import a page from an existing PDF and place it on a new page. Shows setup, page creation, source file setting, page import, and template usage.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse setasign\\Fpdi\\Fpdi;\n// or for usage with TCPDF:\n// use setasign\\Fpdi\\Tcpdf\\Fpdi;\n\n// or for usage with tFPDF:\n// use setasign\\Fpdi\\Tfpdf\\Fpdi;\n\n// setup the autoload function\nrequire_once('vendor/autoload.php');\n\n// initiate FPDI\n$pdf = new Fpdi();\n// add a page\n$pdf->AddPage();\n// set the source file\n$pdf->setSourceFile(\"Fantastic-Speaker.pdf\");\n// import page 1\n$tplId = $pdf->importPage(1);\n// use the imported page and place it at point 10,10 with a width of 100 mm\n$pdf->useTemplate($tplId, 10, 10, 100);\n\n$pdf->Output();\n```\n\n----------------------------------------\n\nTITLE: Removing Course Options Function in Test Plan Backend with PHP\nDESCRIPTION: This snippet indicates the removal of the tool_generator_testplan_backend::get_course_options() function. It has been replaced by the 'course' form element.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/generator/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ntool_generator_testplan_backend::get_course_options()\n```\n\n----------------------------------------\n\nTITLE: Updating Default Home Page URL Return in Moodle\nDESCRIPTION: This snippet describes the modification made to the `core_webservice_external::get_site_info` function in Moodle. The function now includes a feature to return the default home page URL when necessary. This change ensures that API responses are more informative and meet user needs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/external/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n// The external function `core_webservice_external::get_site_info` now returns the default home page URL when needed.\n// For more information see [MDL-82844](https://tracker.moodle.org/browse/MDL-82844)\nclass core_webservice_external {\n    public static function get_site_info() {\n        // existing logic...\n        // New logic to fetch and return the default home page URL if required...\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Updating `moodle_page::set_title()` Method\nDESCRIPTION: The `\\moodle_page::set_title()` method has been updated to automatically append the site name depending on `$CFG->sitenameintitle` and the site's fullname/shortname. Use `$appendsitename = false` to override this behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_26\n\n\n\n----------------------------------------\n\nTITLE: New File Output Methods in 3.9\nDESCRIPTION: Introduction of new base dataformat class methods for local file export handling and HTML content support. Includes methods for file operations and HTML content formatting.\nSOURCE: https://github.com/moodle/moodle/blob/main/dataformat/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nstart_output_to_file()\nclose_output_to_file()\nsupports_html()\nexport_html_image_source()\nformat_record()\n```\n\n----------------------------------------\n\nTITLE: Canonical Mustache Template Example in HTML+Jinja\nDESCRIPTION: A more complex Mustache template example showing various Mustache features including variables and conditional blocks. This template demonstrates the canonical example used in Mustache documentation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/README.md#2025-04-21_snippet_1\n\nLANGUAGE: html+jinja\nCODE:\n```\nHello {{name}}\nYou have just won {{value}} dollars!\n{{#in_ca}}\nWell, {{taxed_value}} dollars, after taxes.\n{{/in_ca}}\n```\n\n----------------------------------------\n\nTITLE: Using core_text and core_collator in PHP\nDESCRIPTION: Use core_text::* instead of textlib:: and core_collator::* instead of collatorlib::* for text and collation operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_97\n\nLANGUAGE: PHP\nCODE:\n```\ncore_text::strtoupper($string);\ncore_collator::asort($array);\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom Logger for XML-RPC in PHP\nDESCRIPTION: Injects a custom logger into all classes of the XML-RPC library, allowing for centralized logging configuration.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc::setLogger($customLogger);\n```\n\n----------------------------------------\n\nTITLE: Introducing `COMPLETION_COMPLETE_FAIL_HIDDEN` Constant\nDESCRIPTION: A new constant `COMPLETION_COMPLETE_FAIL_HIDDEN` is introduced to mark that a user has received a failing grade for a hidden grade item. This state is returned by `internal_get_grade_state()` and is only used by `get_core_completion_state()` for processing the passgrade completion data.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_36\n\n\n\n----------------------------------------\n\nTITLE: Accessing current page language in JavaScript\nDESCRIPTION: The current page language is now available in the core/config language property for JavaScript modules.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nimport {language} from 'core/config';\nconsole.log('Current language:', language);\n```\n\n----------------------------------------\n\nTITLE: Introducing State Store and Web Services in Moodle xAPI (Version 4.2)\nDESCRIPTION: Introduces a new state store functionality and web services for xAPI in Moodle 4.2. Plugins can now store state data and provide alternative state store implementations. New web services are added for managing user state data.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xapi/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n* A new state store has been introduced. Now plugins can store state data\n  by overriding the PLUGINNAME\\xapi\\handler::validate_state method.\n* New core_xapi\\state_store class to handle the state data storing. Plugins\n  can provide alternative state store implementations by overriding the\n  PLUGINNAME\\xapi\\handler::get_state_store method.\n* New xAPI state webservices:\n   - core_xapi_post_state: store a user state data\n   - core_xapi_get_state: gets a user state data\n   - core_xapi_get_states: get the list of user states\n   - core_xapi_delete_state: delete a user state data\n```\n\n----------------------------------------\n\nTITLE: Defining a Question Format Class - PHP\nDESCRIPTION: This snippet illustrates how to define a question format class for the Moodle question import/export system. The class name must follow the format 'qformat_{plugin_name}', and it should extend a default question format class. This structure is essential for ensuring the system correctly recognizes and utilizes the custom format.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nclass qformat_webct extends qformat_default {\n    // Class implementation here\n}\n?>\n```\n\n----------------------------------------\n\nTITLE: Limiting Stream Size with LimitStream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to use LimitStream from GuzzleHttp\\Psr7 to create a stream that reads only a subset of an existing stream. It limits the size of the stream and optionally specifies an offset from which to start reading. This is useful for working with chunks of data from a large file or stream.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$original = Psr7\\Utils::streamFor(fopen('/tmp/test.txt', 'r+'));\necho $original->getSize();\n// >>> 1048576\n\n// Limit the size of the body to 1024 bytes and start reading from byte 2048\n$stream = new Psr7\\LimitStream($original, 1024, 2048);\necho $stream->getSize();\n// >>> 1024\necho $stream->tell();\n// >>> 0\n```\n```\n\n----------------------------------------\n\nTITLE: New Excel 2013 Bitwise Functions\nDESCRIPTION: Functions added for bitwise operations including BITAND, BITOR, BITXOR, BITLSHIFT, and BITRSHIFT that were introduced in Excel 2013.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_19\n\nLANGUAGE: PHP\nCODE:\n```\nBITAND()          Returns a Bitwise 'And' of two numbers\nBITOR()           Returns a Bitwise 'Or' of two number\nBITXOR()          Returns a Bitwise 'Exclusive Or' of two numbers\nBITLSHIFT()       Returns a number shifted left by a specified number of bits\nBITRSHIFT()       Returns a number shifted right by a specified number of bits\n```\n\n----------------------------------------\n\nTITLE: Interoperability between Guzzle and React Promises in PHP\nDESCRIPTION: Illustrates how Guzzle promises can work with foreign promises, such as React promises, by returning a React promise inside a Guzzle promise's then method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n// Create a React promise\n$deferred = new React\\Promise\\Deferred();\n$reactPromise = $deferred->promise();\n\n// Create a Guzzle promise that is fulfilled with a React promise.\n$guzzlePromise = new GuzzleHttp\\Promise\\Promise();\n$guzzlePromise->then(function ($value) use ($reactPromise) {\n    // Do something something with the value...\n    // Return the React promise\n    return $reactPromise;\n});\n```\n\n----------------------------------------\n\nTITLE: Migrating Guzzle HTTP Client Calls from 3.0 to 4.0\nDESCRIPTION: This snippet shows the transition from Guzzle 3.0 to 4.0 in creating and sending HTTP requests. The previous method involved separate `create` and `send` steps, which have been simplified in Guzzle 4.0 to a single step that returns a response directly.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n// 3.0\n$request = $client->get('/');\n$response = $request->send();\n\n// 4.0\n$response = $client->get('/');\n\n// or, to mirror the previous behavior\n$request = $client->createRequest('GET', '/');\n$response = $client->send($request);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Additional Login Parameters for OAuth2 Client in PHP\nDESCRIPTION: The method get_additional_login_parameters() in the OAuth2 client class now supports adding the language code to the authentication request. This allows the OAuth2 login page to match the language setting in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/oauth2/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\oautuh2\\client::get_additional_login_parameters()\n```\n\n----------------------------------------\n\nTITLE: Renaming TEMPLATE Format Files for Custom Glossary Plugin in PHP\nDESCRIPTION: This snippet illustrates the file renaming process for creating a custom glossary format plugin. It involves duplicating the TEMPLATE directory, renaming it, and renaming the main PHP file inside it.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/formats/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n2.-Duplicate the TEMPLATE directory (under mod/glossary/formats/TEMPLATE).\n3.-Rename it to THENAME\n4.-Go into the THENAME directory and rename the TEMPLATE_format.php file\n   to THENAME_format.php\n```\n\n----------------------------------------\n\nTITLE: Converting Message to String in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to convert an HTTP message (e.g., a request) to its string representation using the `GuzzleHttp\\Psr7\\Message::toString()` method. This is useful for logging or debugging purposes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n```php\n$request = new GuzzleHttp\\Psr7\\Request('GET', 'http://example.com');\necho GuzzleHttp\\Psr7\\Message::toString($request);\n```\n```\n\n----------------------------------------\n\nTITLE: Using CompilerRuntime for Enhanced Performance\nDESCRIPTION: The CompilerRuntime improves performance for frequently reused JMESPath expressions by compiling them into PHP code. Although slower during initial compilation, it performs significantly better for repeated executions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jmespath/README.rst#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$runtime = new JmesPath\\CompilerRuntime('/path/to/compile/folder');\n$runtime('foo.bar', ['foo' => ['bar' => 'baz']]);\n// > 'baz'\n```\n\n----------------------------------------\n\nTITLE: Adding HTTP Client Mocking in PHP Unit Tests\nDESCRIPTION: A new static method get_mocked_http_client() has been added to the advanced_testcase class to allow unit tests to mock the \\core\\http_client and update the DI container.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_23\n\nLANGUAGE: PHP\nCODE:\n```\n\\advanced_testcase::get_mocked_http_client()\n```\n\n----------------------------------------\n\nTITLE: Installing PHP-JWT Library Using Composer\nDESCRIPTION: This snippet demonstrates how to install the Firebase PHP-JWT library using Composer. It includes an optional installation of the 'paragonie/sodium_compat' package for environments without libsodium support.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require firebase/php-jwt\n\ncomposer require paragonie/sodium_compat\n```\n\n----------------------------------------\n\nTITLE: Implementing Stream Decorators in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to create a stream decorator using the `StreamDecoratorTrait` in GuzzleHttp\\Psr7. It shows how to override the `read()` method to implement custom logic when the end of a stream is reached, allowing specific actions to be triggered at EOF.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse Psr\\Http\\Message\\StreamInterface;\nuse GuzzleHttp\\Psr7\\StreamDecoratorTrait;\n\nclass EofCallbackStream implements StreamInterface\n{\n    use StreamDecoratorTrait;\n\n    private $callback;\n\n    private $stream;\n\n    public function __construct(StreamInterface $stream, callable $cb)\n    {\n        $this->stream = $stream;\n        $this->callback = $cb;\n    }\n\n    public function read($length)\n    {\n        $result = $this->stream->read($length);\n\n        // Invoke the callback when EOF is hit.\n        if ($this->eof()) {\n            ($this->callback)();\n        }\n\n        return $result;\n    }\n}\n```\n```\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$original = Psr7\\Utils::streamFor('foo');\n\n$eofStream = new EofCallbackStream($original, function () {\n    echo 'EOF!';\n});\n\n$eofStream->read(2);\n$eofStream->read(1);\n// echoes \"EOF!\"\n$eofStream->seek(0);\n$eofStream->read(3);\n// echoes \"EOF!\"\n```\n```\n\n----------------------------------------\n\nTITLE: JavaScript Section Control Implementation\nDESCRIPTION: Shows how to control collapsable sections using JavaScript, including methods to hide, show, and toggle visibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/collapsable-sections.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport CollapsableSection from 'core/local/collapsable_section/controls';\n\nconst section = CollapsableSection.instanceFromSelector('#MyCollapsableSection');\n\n// Use hide, show, and toggle methods to control the section.\nsection.hide();\nsection.show();\nsection.toggle();\n```\n\n----------------------------------------\n\nTITLE: Internal Method quiz_overview_report::regrade_attempt API Change (Moodle 4.0.2, 4.1)\nDESCRIPTION: The internal method `quiz_overview_report::regrade_attempt` has undergone a slight API change. It now returns an array listing questions that could not be regraded. Avoid calling this internal method directly.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: text\nCODE:\n```\n\"No external code should be calling quiz_overview_report::regrade_attempt because it is an\n  internal method of the quiz_overview plugin. But if you are incorrectly using it, be aware\n  that the API changed slightly. It now returns an array listing any questions which could\n  not be regraded.\"\n```\n\n----------------------------------------\n\nTITLE: Implementing Filter.ExtractStyleBlocks in PHP with HTML Purifier\nDESCRIPTION: This snippet demonstrates how to use the Filter.ExtractStyleBlocks option in HTML Purifier. It extracts style blocks from input HTML, processes them, and saves them as external stylesheets. The example includes setting up HTML Purifier, processing input, and handling the extracted styles.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.ExtractStyleBlocks.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n    header('Content-type: text/html; charset=utf-8');\n    echo '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n  \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en\" xml:lang=\"en\">\n<head>\n  <title>Filter.ExtractStyleBlocks</title>\n<?php\n    require_once '/path/to/library/HTMLPurifier.auto.php';\n    require_once '/path/to/csstidy.class.php';\n\n    $dirty = '<style>body {color:#F00;}</style> Some text';\n\n    $config = HTMLPurifier_Config::createDefault();\n    $config->set('Filter', 'ExtractStyleBlocks', true);\n    $purifier = new HTMLPurifier($config);\n\n    $html = $purifier->purify($dirty);\n\n    // This implementation writes the stylesheets to the styles/ directory.\n    // You can also echo the styles inside the document, but it's a bit\n    // more difficult to make sure they get interpreted properly by\n    // browsers; try the usual CSS armoring techniques.\n    $styles = $purifier->context->get('StyleBlocks');\n    $dir = 'styles/';\n    if (!is_dir($dir)) mkdir($dir);\n    $hash = sha1($_GET['html']);\n    foreach ($styles as $i => $style) {\n        file_put_contents($name = $dir . $hash . \"_$i\");\n        echo '<link rel=\"stylesheet\" type=\"text/css\" href=\"'.$name.'\" />';\n    }\n?>\n</head>\n<body>\n  <div>\n    <?php echo $html; ?>\n  </div>\n</body>\n</html>\n```\n\n----------------------------------------\n\nTITLE: Checking User Readiness Status\nDESCRIPTION: Method to check if a user is fully ready to use the site or if they need to complete additional actions like filling profile fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_69\n\nLANGUAGE: php\nCODE:\n```\n\\core_user::awaiting_action()\n```\n\n----------------------------------------\n\nTITLE: Customizing Moodle Colors with SCSS\nDESCRIPTION: This SCSS code snippet shows how to customize Moodle's color scheme by modifying the $theme-colors map in the theme/boost/scss/preset/default.scss file. It defines custom colors for primary, secondary, success, info, warning, danger, light, and dark themes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/colours.md#2025-04-21_snippet_0\n\nLANGUAGE: scss\nCODE:\n```\n$theme-colors: map-merge((\n    primary: #1177d1,\n    secondary: #ced4da,\n    success: #398439,\n    info: #5bc0de,\n    warning: #f0ad4e,\n    danger: #d43f3a,\n    light: #f8f9fa,\n    dark: #373a3c\n), $theme-colors);\n```\n\n----------------------------------------\n\nTITLE: Disabling Entire Cache System in Moodle PHP\nDESCRIPTION: This snippet shows how to disable the entire cache system in Moodle. This is useful for scenarios like installation and upgrades where minimal cache initialization is required. Once disabled, it cannot be re-enabled.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// To disable the cache entirely call the following:\ndefine('CACHE_DISABLE_ALL', true);\n```\n\n----------------------------------------\n\nTITLE: Implementing Block File Handling in PHP\nDESCRIPTION: Example of updating the block_xxx_pluginfile() function to handle the new 7th parameter for additional file serving options.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nblock_xxx_pluginfile($course, $birecord_or_cm, $context, $filearea, $args, $forcedownload, array $options=array())\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML.Allowed Directive for Element and Attribute Whitelisting\nDESCRIPTION: This snippet demonstrates the syntax for specifying allowed HTML elements and attributes using the HTML.Allowed directive. It shows how to define element-specific attributes and global attributes applicable to all elements.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.Allowed.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\nelement1[attr1|attr2],element2...\na[href],p\n*[lang]\n```\n\n----------------------------------------\n\nTITLE: Deprecated PHP Method Reference\nDESCRIPTION: List of deprecated PHP methods and their replacements in mod_data module version 5.0\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/data/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n\\mod_data_renderer::import_setting_mappings() -> \\mod_data_renderer::importing_preset()\ndata_print_template() -> mod_data\\manager::get_template and mod_data\\template::parse_entries\ndata_preset_name() -> preset::get_name_from_plugin()\ndata_get_available_presets() -> manager::get_available_presets()\ndata_get_available_site_presets() -> manager::get_available_saved_presets()\ndata_delete_site_preset() -> preset::delete()\nis_directory_a_preset() -> preset::is_directory_a_preset()\ndata_presets_save() -> preset::save()\ndata_presets_generate_xml() -> preset::generate_preset_xml()\ndata_presets_export() -> preset::export()\ndata_user_can_delete_preset() -> preset::can_manage()\ndata_view() -> mod_data\\manager::set_module_viewed()\n```\n\n----------------------------------------\n\nTITLE: Configuring Moodle for PHPUnit Testing\nDESCRIPTION: PHP configuration settings that need to be added to the Moodle config.php file. These settings specify the database prefix and data directory for the PHPUnit test environment.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpunit/readme.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$CFG->phpunit_prefix = 'phpu_';\n```\n\nLANGUAGE: php\nCODE:\n```\n$CFG->phpunit_dataroot = '/path/to/phpunitdataroot';\n```\n\n----------------------------------------\n\nTITLE: Basic PHP Implementation of Collapsable Section\nDESCRIPTION: Shows how to create and render a basic collapsable section using PHP with core title and content parameters.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/collapsable-sections.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuse core\\output\\local\\collapsable_section;\n\n// Create an instance of the collapsable section.\n$section = new collapsable_section(\n    titlecontent: 'Section Title',\n    sectioncontent: 'This is the content of the section.',\n);\n\necho $OUTPUT->render($section);\n```\n\n----------------------------------------\n\nTITLE: Adding Login Captcha Methods\nDESCRIPTION: Two new methods are introduced: `login_captcha_enabled()` to check if the login captcha is enabled, and `validate_login_captcha()` to validate the login captcha.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_11\n\n\n\n----------------------------------------\n\nTITLE: Bootstrap 4 to 5 Compatibility Module\nDESCRIPTION: Adds a new JavaScript module to help third-party plugins migrate from Bootstrap 4 to Bootstrap 5 data attribute syntax. Provides direct conversion support during the transition.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ntheme_boost/bs4-compat\n```\n\n----------------------------------------\n\nTITLE: Setting Up Kebab Menu Trigger in PHP\nDESCRIPTION: Shows how to set up a kebab menu trigger for an action menu.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n/** @var core_renderer $output*/\n$output = $PAGE->get_renderer('core');\n\n$menu = new action_menu();\n$menu->set_kebab_trigger(get_string('edit'), $output);\n$menu->set_additional_classes('fields-actions');\n```\n\n----------------------------------------\n\nTITLE: Adding Responsive Property to Flexible Table in PHP\nDESCRIPTION: A new $responsive property has been added to the \\core_table\\flexible_table class. This boolean property, defaulting to true, controls whether the table is rendered as a responsive table.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/table/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$reponsive = true;\n```\n\n----------------------------------------\n\nTITLE: Calendar External Function Parameters - PHP\nDESCRIPTION: Example of external calendar functions that now accept an optional searchvalue parameter in version 4.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/calendar/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncore_calendar_external::get_calendar_action_events_by_timesort\ncore_calendar_external::get_calendar_action_events_by_courses\ncore_calendar_external::get_calendar_action_events_by_course\n```\n\n----------------------------------------\n\nTITLE: Using HTTP Method Shortcut Functions\nDESCRIPTION: Demonstrates the shortcut methods available for common HTTP request methods (GET, POST, PUT, PATCH, DELETE, HEAD) when defining routes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$r->get('/get-route', 'get_handler');\n$r->post('/post-route', 'post_handler');\n```\n\n----------------------------------------\n\nTITLE: Initializing OGVPlayer with Muted Autoplay for iOS Compatibility\nDESCRIPTION: This code demonstrates how to initialize the OGVPlayer with audio muted to work around iOS Safari's limitations with autoplay. This pattern allows playback to start programmatically, with the option to unmute in response to user interaction later.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\n  player = new OGVPlayer();\n  player.muted = true;\n  player.src = 'path/to/file-with-audio.ogv';\n  player.play();\n```\n\n----------------------------------------\n\nTITLE: Inline Labels in Select Menu Widget - PHP\nDESCRIPTION: Adds support for inline labels in the `\\core\\output\\select_menu` widget, allowing labels to be rendered inside the combobox by passing `true` to the `$inlinelabel` parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_10\n\n\n\n----------------------------------------\n\nTITLE: Installing PSR-18 HTTP Client in Moodle\nDESCRIPTION: Step-by-step instructions for installing the PSR-18 HTTP Client package in Moodle. This process involves downloading the latest release from GitHub, unzipping it in the appropriate folder, and updating the thirdpartylibs.xml file to register the new library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-client/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# PSR-18 HTTP Client\n\nThis is a description for including the PSR-18 Interfaces in Moodle\n\n## Installation\n\n1. Visit https://github.com/php-fig/http-client\n2. Download the latest release\n3. Unzip in this folder\n4. Update `thirdpartylibs.xml`\n```\n\n----------------------------------------\n\nTITLE: JWT Exception Handling in PHP\nDESCRIPTION: This snippet shows how to handle various exceptions that can be thrown when decoding a JWT. It covers different types of exceptions related to invalid arguments, unsupported algorithms, signature verification, and token expiration.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\SignatureInvalidException;\nuse Firebase\\JWT\\BeforeValidException;\nuse Firebase\\JWT\\ExpiredException;\nuse DomainException;\nuse InvalidArgumentException;\nuse UnexpectedValueException;\n\ntry {\n    $decoded = JWT::decode($payload, $keys);\n} catch (InvalidArgumentException $e) {\n    // provided key/key-array is empty or malformed.\n} catch (DomainException $e) {\n    // provided algorithm is unsupported OR\n    // provided key is invalid OR\n    // unknown error thrown in openSSL or libsodium OR\n    // libsodium is required but not available.\n} catch (SignatureInvalidException $e) {\n    // provided JWT signature verification failed.\n} catch (BeforeValidException $e) {\n    // provided JWT is trying to be used before \"nbf\" claim OR\n    // provided JWT is trying to be used before \"iat\" claim.\n} catch (ExpiredException $e) {\n    // provided JWT is trying to be used after \"exp\" claim.\n} catch (UnexpectedValueException $e) {\n    // provided JWT is malformed OR\n    // provided JWT is missing an algorithm / using an unsupported algorithm OR\n    // provided JWT algorithm does not match provided key OR\n    // provided key ID in key/key-array is empty or invalid.\n}\n```\n\n----------------------------------------\n\nTITLE: PHP Color Keywords Lookup Array\nDESCRIPTION: Defines an array mapping standard HTML/CSS color names to their 6-digit hexadecimal representations. Each color name is mapped to its hex value with a preceding hash mark. The array is used for case-insensitive color parsing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.ColorKeywords.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\narray (\n  'aliceblue' => '#F0F8FF',\n  'antiquewhite' => '#FAEBD7',\n  'aqua' => '#00FFFF',\n  'aquamarine' => '#7FFFD4',\n  'azure' => '#F0FFFF',\n  'beige' => '#F5F5DC',\n  'bisque' => '#FFE4C4',\n  'black' => '#000000',\n  'blanchedalmond' => '#FFEBCD',\n  'blue' => '#0000FF',\n  'blueviolet' => '#8A2BE2',\n  'brown' => '#A52A2A',\n  'burlywood' => '#DEB887',\n  'cadetblue' => '#5F9EA0',\n  'chartreuse' => '#7FFF00',\n  'chocolate' => '#D2691E',\n  'coral' => '#FF7F50',\n  'cornflowerblue' => '#6495ED',\n  'cornsilk' => '#FFF8DC',\n  'crimson' => '#DC143C',\n  'cyan' => '#00FFFF',\n  'darkblue' => '#00008B',\n  'darkcyan' => '#008B8B',\n  'darkgoldenrod' => '#B8860B',\n  'darkgray' => '#A9A9A9',\n  'darkgrey' => '#A9A9A9',\n  'darkgreen' => '#006400',\n  'darkkhaki' => '#BDB76B',\n  'darkmagenta' => '#8B008B',\n  'darkolivegreen' => '#556B2F',\n  'darkorange' => '#FF8C00',\n  'darkorchid' => '#9932CC',\n  'darkred' => '#8B0000',\n  'darksalmon' => '#E9967A',\n  'darkseagreen' => '#8FBC8F',\n  'darkslateblue' => '#483D8B',\n  'darkslategray' => '#2F4F4F',\n  'darkslategrey' => '#2F4F4F',\n  'darkturquoise' => '#00CED1',\n  'darkviolet' => '#9400D3',\n  'deeppink' => '#FF1493',\n  'deepskyblue' => '#00BFFF',\n  'dimgray' => '#696969',\n  'dimgrey' => '#696969',\n  'dodgerblue' => '#1E90FF',\n  'firebrick' => '#B22222',\n  'floralwhite' => '#FFFAF0',\n  'forestgreen' => '#228B22',\n  'fuchsia' => '#FF00FF',\n  'gainsboro' => '#DCDCDC',\n  'ghostwhite' => '#F8F8FF',\n  'gold' => '#FFD700',\n  'goldenrod' => '#DAA520',\n  'gray' => '#808080',\n  'grey' => '#808080',\n  'green' => '#008000',\n  'greenyellow' => '#ADFF2F',\n  'honeydew' => '#F0FFF0',\n  'hotpink' => '#FF69B4',\n  'indianred' => '#CD5C5C',\n  'indigo' => '#4B0082',\n  'ivory' => '#FFFFF0',\n  'khaki' => '#F0E68C',\n  'lavender' => '#E6E6FA',\n  'lavenderblush' => '#FFF0F5',\n  'lawngreen' => '#7CFC00',\n  'lemonchiffon' => '#FFFACD',\n  'lightblue' => '#ADD8E6',\n  'lightcoral' => '#F08080',\n  'lightcyan' => '#E0FFFF',\n  'lightgoldenrodyellow' => '#FAFAD2',\n  'lightgray' => '#D3D3D3',\n  'lightgrey' => '#D3D3D3',\n  'lightgreen' => '#90EE90',\n  'lightpink' => '#FFB6C1',\n  'lightsalmon' => '#FFA07A',\n  'lightseagreen' => '#20B2AA',\n  'lightskyblue' => '#87CEFA',\n  'lightslategray' => '#778899',\n  'lightslategrey' => '#778899',\n  'lightsteelblue' => '#B0C4DE',\n  'lightyellow' => '#FFFFE0',\n  'lime' => '#00FF00',\n  'limegreen' => '#32CD32',\n  'linen' => '#FAF0E6',\n  'magenta' => '#FF00FF',\n  'maroon' => '#800000',\n  'mediumaquamarine' => '#66CDAA',\n  'mediumblue' => '#0000CD',\n  'mediumorchid' => '#BA55D3',\n  'mediumpurple' => '#9370DB',\n  'mediumseagreen' => '#3CB371',\n  'mediumslateblue' => '#7B68EE',\n  'mediumspringgreen' => '#00FA9A',\n  'mediumturquoise' => '#48D1CC',\n  'mediumvioletred' => '#C71585',\n  'midnightblue' => '#191970',\n  'mintcream' => '#F5FFFA',\n  'mistyrose' => '#FFE4E1',\n  'moccasin' => '#FFE4B5',\n  'navajowhite' => '#FFDEAD',\n  'navy' => '#000080',\n  'oldlace' => '#FDF5E6',\n  'olive' => '#808000',\n  'olivedrab' => '#6B8E23',\n  'orange' => '#FFA500',\n  'orangered' => '#FF4500',\n  'orchid' => '#DA70D6',\n  'palegoldenrod' => '#EEE8AA',\n  'palegreen' => '#98FB98',\n  'paleturquoise' => '#AFEEEE',\n  'palevioletred' => '#DB7093',\n  'papayawhip' => '#FFEFD5',\n  'peachpuff' => '#FFDAB9',\n  'peru' => '#CD853F',\n  'pink' => '#FFC0CB',\n  'plum' => '#DDA0DD',\n  'powderblue' => '#B0E0E6',\n  'purple' => '#800080',\n  'rebeccapurple' => '#663399',\n  'red' => '#FF0000',\n  'rosybrown' => '#BC8F8F',\n  'royalblue' => '#4169E1',\n  'saddlebrown' => '#8B4513',\n  'salmon' => '#FA8072',\n  'sandybrown' => '#F4A460',\n  'seagreen' => '#2E8B57',\n  'seashell' => '#FFF5EE',\n  'sienna' => '#A0522D',\n  'silver' => '#C0C0C0',\n  'skyblue' => '#87CEEB',\n  'slateblue' => '#6A5ACD',\n  'slategray' => '#708090',\n  'slategrey' => '#708090',\n  'snow' => '#FFFAFA',\n  'springgreen' => '#00FF7F',\n  'steelblue' => '#4682B4',\n  'tan' => '#D2B48C',\n  'teal' => '#008080',\n  'thistle' => '#D8BFD8',\n  'tomato' => '#FF6347',\n  'turquoise' => '#40E0D0',\n  'violet' => '#EE82EE',\n  'wheat' => '#F5DEB3',\n  'white' => '#FFFFFF',\n  'whitesmoke' => '#F5F5F5',\n  'yellow' => '#FFFF00',\n  'yellowgreen' => '#9ACD32'\n)\n```\n\n----------------------------------------\n\nTITLE: Deprecating Capabilities with Debugging Support - PHP\nDESCRIPTION: This snippet elaborates on the new process to mark capabilities as deprecated with appropriate messages displayed during usage when in debug mode, guiding developers towards updating their codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_62\n\nLANGUAGE: php\nCODE:\n```\n  * A process to deprecate capabilities by flagging them in the access.php by adding a $deprecatedcapabilities variable (an array).\n  This array will list the deprecated capabilities and a possible replacement. Once we declare the capability as deprecated, a debugging\n  message will be displayed (in DEBUG_DEVELOPPER mode only) when using the deprecated capability.\n  Declaration is as follow:\n    $deprecatedcapabilities = [\n        'fake/access:fakecapability' => ['replacement' => '', 'message' => 'This capability should not be used anymore.']\n    ];\n```\n\n----------------------------------------\n\nTITLE: Core Language Configuration Definition\nDESCRIPTION: Defines the core language configuration for HTML Purifier. Sets the default language to English ('en') using ISO 639 language code format. Currently only supports English localization for error reporting.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.Language.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nCore.Language\nTYPE: string\nVERSION: 2.0.0\nDEFAULT: 'en'\n```\n\n----------------------------------------\n\nTITLE: Handling Update Mode Dropdown Status in JavaScript for Moodle\nDESCRIPTION: This JavaScript code snippet shows how to handle user interactions with an update mode dropdown status component in Moodle. It captures change events, sends updates to the backend, and handles value rollback on failure.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_10\n\nLANGUAGE: javascript\nCODE:\n```\nimport {getDropdownStatus} from 'core/local/dropdown/status';\nimport {sendValueToTheBackend} from 'YOURPLUGIN/example';\n\nconst status = getDropdownStatus('#mydropdown');\nlet currentValue = status.getSelectedValue();\n\nstatus.getElement().addEventListener('change', (event) => {\n    if (currentValue == status.getSelectedValue()) {\n        return;\n    }\n    try {\n        sendValueToTheBackend(status.getSelectedValue());\n        currentValue = status.getSelectedValue();\n    } catch (error) {\n        status.setSelectedValue(currentValue);\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: External Quiz Functions New Optional Field blockedbyprevious (Moodle 3.2)\nDESCRIPTION: The external functions `mod_quiz_external::get_attempt_data`, `mod_quiz_external::get_attempt_summary`, and `mod_quiz_external::get_attempt_review` now return an additional optional field called `blockedbyprevious`. This field indicates whether a question is blocked by the previous question.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_20\n\nLANGUAGE: text\nCODE:\n```\n\"External functions mod_quiz_external::get_attempt_data, mod_quiz_external::get_attempt_summary\n  and mod_quiz_external::get_attempt_review now return additional optional fields:\n   - blockedbyprevious: Whether a question is blocked by the previous question.\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Shibboleth for IIS with Moodle\nDESCRIPTION: This XML configuration snippet for Shibboleth on IIS protects the Moodle authentication directory. It sets up path-based rules to require a Shibboleth session for the index.php file within the auth/shibboleth directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_1\n\nLANGUAGE: xml\nCODE:\n```\n<Path name=\"moodle\" requireSession=\"false\" >\n   <Path name=\"auth/shibboleth/index.php\" requireSession=\"true\" >\n      <AccessControl>\n          ...\n      </AccessControl>\n   </Path>\n</Path>\n```\n\n----------------------------------------\n\nTITLE: SQL Parameter Replacement Helper in PHP\nDESCRIPTION: Added a new database helper method to ensure uniqueness of parameters within a SQL expression. This helps prevent parameter conflicts in complex SQL queries.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_72\n\nLANGUAGE: PHP\nCODE:\n```\nsql_replace_parameters\n```\n\n----------------------------------------\n\nTITLE: Updating Bootstrap JavaScript files\nDESCRIPTION: This snippet outlines the procedure to update the Bootstrap JavaScript files in the Moodle theme. It includes removing the old directory, copying the new JavaScript files, updating import paths, ensuring popper.js compatibility, adjusting AMD module names, updating thirdpartylibs.xml, running grunt ignorefiles, and compiling JavaScript and CSS.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\n* remove folder theme/boost/amd/src/bootstrap\n* copy the js files from ~/bootstrap/js/src to theme/boost/amd/src/bootstrap (including the subfolder)\n* copy index.js from ~/bootstrap/js to theme/boost/amd/src\n* edit theme/boost/amd/src/index.js and update import path (src -> bootstrap)\n* Moodle core includes the popper.js library, make sure each of the new Bootstrap js files\nincludes the 'core/popper2' library instead of 'popperjs'. For current version these files were: tooltip.js and dropdown.js\n* Fix all Boostrap JS files import paths to use the correct AMD module names. For example, change:\n    import Manipulator from '../dom/manipulator.js'\n        to:\n    import Manipulator from '../dom/manipulator'\n* update ./thirdpartylibs.xml\n* run \"grunt ignorefiles\" to prevent linting errors appearing from the new Bootstrap js files.\n* in folder theme/boost run \"grunt amd\" to compile the bootstrap JS\n* in folder theme/boost run \"grunt css\" to compile scss\n```\n\n----------------------------------------\n\nTITLE: Adding Parameter to `authenticate_user_login()`\nDESCRIPTION: A new parameter `$loginrecaptcha` has been added to the `authenticate_user_login()` method.  This parameter, with a default value of `false`, indicates whether login captcha verification is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_12\n\n\n\n----------------------------------------\n\nTITLE: Updating `addFilterRow()` Method\nDESCRIPTION: The `addFilterRow()` method in `core/datafilter` now accepts a `filterdata` object to add a row with a pre-defined filter.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_19\n\n\n\n----------------------------------------\n\nTITLE: Renaming and Autoloading Core Classes - PHP\nDESCRIPTION: Renames various core classes to specify their new locations while ensuring backward compatibility, and supports autoloading across the Moodle ecosystem.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_17\n\n\n\n----------------------------------------\n\nTITLE: Introducing New Language String in Moodle MFA Tool\nDESCRIPTION: A new mandatory language string 'settings:shortdescription' is introduced for each factor in the Moodle 5.0 MFA tool upgrade. This addition is part of the improvements to factor management and description.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nsettings:shortdescription\n```\n\n----------------------------------------\n\nTITLE: Implementing Enrolment Page Hook in PHP\nDESCRIPTION: Enrolment plugins are encouraged to use a new renderable class to produce HTML for the enrolment page, with forms displayed in a modal dialogue.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_enrol\\output\\enrol_page\n```\n\n----------------------------------------\n\nTITLE: Handling Rejections and Continuing the Chain in PHP\nDESCRIPTION: This code snippet demonstrates how to handle a rejection and continue the promise chain by returning a value from an `$onRejected` callback.  The downstream `$onFulfilled` callback is invoked with the value returned from the `$onRejected` callback. The assertion confirms that the value is \"It's ok\".\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise\n    ->then(null, function ($reason) {\n        return \\\"It's ok\\\";\n    })\n    ->then(function ($value) {\n        assert($value === \\\"It's ok\\\");\n    });\n\n$promise->reject('Error!');\"\n```\n\n----------------------------------------\n\nTITLE: Accessing Course Communication Tool Configuration in PHP\nDESCRIPTION: The external function core_course::get_courses_by_field now returns additional fields for the communication tool configuration of a course, including the room name and tool URL.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncommunicationroomname: the room name\ncommunicationroomurl: the tool url\n```\n\n----------------------------------------\n\nTITLE: Accessing Blog Entry in Moodle 4.4\nDESCRIPTION: In Moodle 4.4, the blog_entry class constructor now throws an exception if the specified entry ID does not exist. This change improves error handling when working with blog entries.\nSOURCE: https://github.com/moodle/moodle/blob/main/blog/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.4 ===\n  * The blog_entry class constructor now throws an exception if the indicated entry id does not exist.\n```\n\n----------------------------------------\n\nTITLE: Manual Loading of PHPMailer Core Classes\nDESCRIPTION: This PHP code demonstrates how to manually load PHPMailer classes when not using Composer. It imports the necessary namespaces and requires the core files from a specified path.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse PHPMailer\\PHPMailer\\PHPMailer;\nuse PHPMailer\\PHPMailer\\Exception;\n\nrequire 'path/to/PHPMailer/src/Exception.php';\nrequire 'path/to/PHPMailer/src/PHPMailer.php';\nrequire 'path/to/PHPMailer/src/SMTP.php';\n```\n\n----------------------------------------\n\nTITLE: Using Functions with Complex Numbers\nDESCRIPTION: This snippet shows how to call various functions on complex numbers using both instance methods and static function methods from the library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/complex/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$complexString = '1.23-4.56i';\n\n$complexObject = new Complex\\Complex($complexString);\necho $complexObject->sinh();\n```\n\nLANGUAGE: php\nCODE:\n```\n$complexString = '1.23-4.56i';\necho Complex\\Functions::sinh($complexString);\n```\n\nLANGUAGE: php\nCODE:\n```\n$complexString = '1.23-4.56i';\n\n$complexObject = new Complex\\Complex($complexString);\necho Complex\\Functions::pow($complexObject, 2);\n```\n\nLANGUAGE: php\nCODE:\n```\n$complexString = '1.23-4.56i';\n\n$complexObject = new Complex\\Complex($complexString);\necho $complexObject->pow(2);\n```\n\n----------------------------------------\n\nTITLE: Removing Deprecated Renderer Method in Moodle MFA Tool\nDESCRIPTION: The previously deprecated 'setup_factor' renderer method has been removed in the Moodle 5.0 MFA tool upgrade. This removal is part of the cleanup process for outdated functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\nsetup_factor\n```\n\n----------------------------------------\n\nTITLE: Behat Steps for Activity Completion Testing\nDESCRIPTION: New Behat steps introduced for testing activity completion scenarios in Moodle\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// New Behat steps\n// - activity_completion_condition_displayed_as()\n// - activity_should_have_the_completion_condition()\n// - manual_completion_button_displayed_as()\n// - toggle_the_manual_completion_state()\n```\n\n----------------------------------------\n\nTITLE: Configuring Mailpit for Email Testing in PHP\nDESCRIPTION: Constants required in config.php to enable email content verification using Mailpit in Behat tests. This allows checking email contents via test steps.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nTEST_EMAILCATCHER_MAIL_SERVER - The Mailpit server address (e.g. `0.0.0.0:1025`)\nTEST_EMAILCATCHER_API_SERVER - The Mailpit API server (qe.g. `http://localhost:8025`)\n```\n\n----------------------------------------\n\nTITLE: Boolean Return Type Methods in Preg Class\nDESCRIPTION: Additional Preg class methods that return boolean values rather than integers, providing stricter type safety when the number of pattern matches is not needed.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Composer\\Pcre\\Preg;\n\nif (Preg::isMatch('{fo+}', $string, $matches)) // bool\nif (Preg::isMatchAll('{fo+}', $string, $matches)) // bool\n```\n\n----------------------------------------\n\nTITLE: Extending get_custom_report_content Helper in PHP\nDESCRIPTION: This enhanced helper method now accepts a list of filter values to customize the data applied to reports, allowing for more dynamic report generation based on specific conditions.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nfunction get_custom_report_content($filter_values) {\n    // Apply filter values to customize report content\n}\n```\n\n----------------------------------------\n\nTITLE: Updating core_question_renderer::mark_summary Parameters in PHP\nDESCRIPTION: The argument list for the mark_summary method has changed in core_question_renderer. Ensure to update calls from the old format to the new format, which adds behaviouroutput as a parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n// Old call:\n$this->mark_summary($qa, $options);\n// New call:\n$this->mark_summary($qa, $behaviouroutput, $options);\n```\n\n----------------------------------------\n\nTITLE: Running Tests Using Alternative Cache Config Path in Moodle\nDESCRIPTION: To use a different cache configuration path when running tests in Moodle, define 'TEST_CACHE_USING_ALT_CACHE_CONFIG_PATH' in 'config.php'. This requires setting '$CFG->altcacheconfigpath' to the desired path. Ensure to copy pre-existing configurations to this path if they were set before defining it.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\ndefine('TEST_CACHE_USING_ALT_CACHE_CONFIG_PATH', true');\\n$CFG->altcacheconfigpath = '/a/temp/directory/yoursite.php'\n```\n\n----------------------------------------\n\nTITLE: Triggering Deprecation Notice in PHP using Symfony Contracts\nDESCRIPTION: Demonstrates how to use the trigger_deprecation() function to generate a deprecation notice. The function takes a package name, version number, message format, and optional formatting arguments to create standardized deprecation messages.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/symfony/deprecation-contracts/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ntrigger_deprecation('symfony/blockchain', '8.9', 'Using \"%s\" is deprecated, use \"%s\" instead.', 'bitcoin', 'fabcoin');\n```\n\n----------------------------------------\n\nTITLE: Exporting Lamejs as a module\nDESCRIPTION: This JavaScript code adds an export statement to the `lame.all.js` file, making the Lamejs library available as a module for use in other parts of the Moodle application. This is necessary to properly integrate and utilize Lamejs within the RecordRTC plugin.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_5\n\nLANGUAGE: javascript\nCODE:\n```\nexport default lamejs;\n```\n\n----------------------------------------\n\nTITLE: Question Management Function Type Hinting\nDESCRIPTION: Multiple functions in questionlib.php now use type hinting, which will result in fatal errors if called with incorrect types\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// Examples of functions now using type hinting\n- is_latest()\n- get_next_version()\n- get_question_version()\n- get_question_bank_entry()\n```\n\n----------------------------------------\n\nTITLE: Navigation Behat Test Steps in PHP\nDESCRIPTION: Alternative navigation steps for Behat tests to replace i_navigate_to_node_in() showing different navigation patterns including page administration, site administration, course participants and gradebook.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_82\n\nLANGUAGE: php\nCODE:\n```\n- I navigate to \"PATH > ITEM\" in current page administration\n- I navigate to \"PATH > ITEM\" in site administration\n- I navigate to course participants\n- I navigate to \"TAB1 > TAB2\" in the course gradebook\n```\n\n----------------------------------------\n\nTITLE: Creating and Navigating Directories (Bash)\nDESCRIPTION: This snippet demonstrates how to create a directory structure and then navigate into it using bash commands. It is used to prepare a location for downloading the Lamejs library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p /tmp/lamejs\ncd /tmp/lamejs\n```\n\n----------------------------------------\n\nTITLE: Autoloading Unit Tests - PHP\nDESCRIPTION: Introduces the ability for unit tests to autoload classes located in the `\\[component]\\tests\\` namespace from the specified `\\[path/to/component]/tests/classes` directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_4\n\n\n\n----------------------------------------\n\nTITLE: Demonstrating Iterative Promise Resolution in PHP\nDESCRIPTION: Illustrates how Guzzle handles promise resolution and chaining iteratively, maintaining a constant stack size even with a large number of chained promises.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire 'vendor/autoload.php';\n\nuse GuzzleHttp\\Promise\\Promise;\n\n$parent = new Promise();\n$p = $parent;\n\nfor ($i = 0; $i < 1000; $i++) {\n    $p = $p->then(function ($v) {\n        // The stack size remains constant (a good thing)\n        echo xdebug_get_stack_depth() . ', ';\n        return $v + 1;\n    });\n}\n\n$parent->resolve(0);\nvar_dump($p->wait()); // int(1000)\n```\n\n----------------------------------------\n\nTITLE: External Quiz Functions New Optional Field responsefileareas (Moodle 3.10)\nDESCRIPTION: The external functions `mod_quiz_external::get_attempt_data`, `mod_quiz_external::get_attempt_summary`, and `mod_quiz_external::get_attempt_review` now return a new additional optional field called `responsefileareas`. This field contains the user responses to questions file area names including files.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_14\n\nLANGUAGE: text\nCODE:\n```\n\"External functions mod_quiz_external::get_attempt_data, mod_quiz_external::get_attempt_summary\n  and mod_quiz_external::get_attempt_review now return a new additional optional field:\n   - responsefileareas: Containing the user responses to questions file area names including files.\"\n```\n\n----------------------------------------\n\nTITLE: Using AstRuntime for JMESPath Expressions\nDESCRIPTION: AstRuntime is the default runtime for JMESPath expressions, parsing and caching them as ASTs in memory. It offers an efficient approach for expressions with moderate reuse.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jmespath/README.rst#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$runtime = new JmesPath\\AstRuntime();\n$runtime('foo.bar', ['foo' => ['bar' => 'baz']]);\n// > 'baz'\n```\n\n----------------------------------------\n\nTITLE: Encoding/Decoding XML-RPC values in PHP\nDESCRIPTION: The xmlrpc_encode() and xmlrpc_decode() functions translate between xmlrpcval objects and PHP language arrays. They are not suitable for all datatypes, but can speed up coding in simple scenarios.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_15\n\nLANGUAGE: PHP\nCODE:\n```\n\"* xmlrpc_encode() and xmlrpc_decode() translate between xmlrpcval\n   objects and PHP language arrays. They aren't suitable for all\n   datatypes, but can speed up coding in simple scenarios. Thanks to Dan\n   Libby for these.\"\n```\n\n----------------------------------------\n\nTITLE: Defining Core HTML Modules in PHP for Moodle\nDESCRIPTION: This PHP code snippet defines an array of core HTML modules required for XHTML compliance. It includes essential modules like Structure, Text, Hypertext, and Lists, as well as various attribute sets. This configuration ensures that generated HTML in Moodle adheres to XHTML standards.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.CoreModules.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\narray (\n  'Structure' => true,\n  'Text' => true,\n  'Hypertext' => true,\n  'List' => true,\n  'NonXMLCommonAttributes' => true,\n  'XMLCommonAttributes' => true,\n  'CommonAttributes' => true,\n)\n```\n\n----------------------------------------\n\nTITLE: Position-Adjusted Dropdown - PHP\nDESCRIPTION: Sets the dropdown position using the POSITION constant values.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$dialog = new core\\output\\local\\dropdown\\dialog('Open dialog', 'Dialog content');\n$dialog->set_position(core\\output\\local\\dropdown\\dialog::POSITION['end']);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Initializing Language Strings for Custom Moodle Course Format (PHP)\nDESCRIPTION: Defines basic language strings for a custom Moodle course format. It sets the display name for the format and the name of a section within the format. These strings are used in course settings and when editing activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$string['formatyourformat']='Your format'; // Name to display for format\n$string['nameyourformat']='section'; // Name of a section within your format\n?>\n```\n\n----------------------------------------\n\nTITLE: Accessing Matrix Decomposition\nDESCRIPTION: This snippet illustrates how to perform matrix decomposition using the QR method, as well as using a factory method to specify the type of decomposition. This enables retrieving matrices Q and R from the decomposition process.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$grid = [\n    [1, 2],\n    [3, 4],\n];\n\n$matrix = new Matrix\\Matrix($grid);\n\n$decomposition = new Matrix\\Decomposition\\QR($matrix);\n$Q = $decomposition->getQ();\n$R = $decomposition->getR();\n```\n\nLANGUAGE: php\nCODE:\n```\n$decomposition = Matrix\\Decomposition\\Decomposition::decomposition(Matrix\\Decomposition\\Decomposition::QR, $matrix);\n$Q = $decomposition->getQ();\n$R = $decomposition->getR();\n```\n\n----------------------------------------\n\nTITLE: Adding `moodle_page:TITLE_SEPARATOR` Constant\nDESCRIPTION: A new page title separator constant `moodle_page:TITLE_SEPARATOR` has been created to help standardise the separators used in page titles.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_27\n\n\n\n----------------------------------------\n\nTITLE: PHP Class Reference - Deprecated Copy Class in 4.1\nDESCRIPTION: Deprecated class path reference for backup copy functionality\nSOURCE: https://github.com/moodle/moodle/blob/main/backup/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncore_backup\\copy\\copy\n```\n\n----------------------------------------\n\nTITLE: Modified Question Bank Column Method in PHP\nDESCRIPTION: The from_column_name method now accepts a boolean parameter to ignore missing classes instead of throwing an exception, providing more flexibility in handling column classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_71\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_question\\local\\bank\\column_base::from_column_name()\n```\n\n----------------------------------------\n\nTITLE: Customizing CSS Output Formatting\nDESCRIPTION: Configuring custom output formatting for the rendered CSS document\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$format = \\Sabberworm\\CSS\\OutputFormat::create()\n    ->indentWithSpaces(4)->setSpaceBetweenRules(\"\\n\");\nprint $cssDocument->render($format);\n```\n\n----------------------------------------\n\nTITLE: Namespace Reorganization for Question Bank Classes\nDESCRIPTION: Multiple core question bank classes have been moved to new namespaces to improve organization and follow Moodle's naming conventions\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// Old namespace\n'core_question\\bank\\action_column_base'\n\n// New namespace\n'core_question\\local\\bank\\action_column_base'\n```\n\n----------------------------------------\n\nTITLE: Defining Test Cache Store in Moodle Configuration\nDESCRIPTION: The snippet demonstrates how to define a test cache store in Moodle's 'config.php'. You can specify a particular cache store for testing purposes using a 'TEST_CACHE_USING_APPLICATION_STORE' definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n// xxx is one of the installed stored (for example redis) or other cachestore with a test define.\\ndefine('TEST_CACHE_USING_APPLICATION_STORE', 'xxx');\n```\n\n----------------------------------------\n\nTITLE: PHP Method Reference - Backup Links Function in 4.3\nDESCRIPTION: Updated function signature for get_async_backup_links_backup with new backupid parameter\nSOURCE: https://github.com/moodle/moodle/blob/main/backup/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nget_async_backup_links_backup\n```\n\n----------------------------------------\n\nTITLE: Uninstalling Temporary Polyfill Packages\nDESCRIPTION: Removes the installed polyfill packages after their contents have been concatenated, using npm uninstall with the --no-save flag.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/polyfills/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nnpm uninstall --no-save mdn-polyfills url-polyfill regenerator-runtime core-js-bundle\n```\n\n----------------------------------------\n\nTITLE: Search Result Filtering and Customization\nDESCRIPTION: Introduces support for group and user filtering in search results, allowing more granular search experiences with optional implementation for search engines\nSOURCE: https://github.com/moodle/moodle/blob/main/search/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// New filtering methods and parameters\nsupports_group_filtering()\nsupports_users()\nexecute_query()\n```\n\n----------------------------------------\n\nTITLE: Decoding JWT with Cached Key Set in PHP\nDESCRIPTION: This snippet demonstrates how to set up and use a CachedKeySet for decoding JWTs. It includes creating an HTTP client, request factory, and cache item pool, which are required for the CachedKeySet.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\nuse Firebase\\JWT\\CachedKeySet;\nuse Firebase\\JWT\\JWT;\n\n// The URI for the JWKS you wish to cache the results from\n$jwksUri = 'https://www.gstatic.com/iap/verify/public_key-jwk';\n\n// Create an HTTP client (can be any PSR-7 compatible HTTP client)\n$httpClient = new GuzzleHttp\\Client();\n\n// Create an HTTP request factory (can be any PSR-17 compatible HTTP request factory)\n$httpFactory = new GuzzleHttp\\Psr\\HttpFactory();\n\n// Create a cache item pool (can be any PSR-6 compatible cache item pool)\n$cacheItemPool = Phpfastcache\\CacheManager::getInstance('files');\n\n$keySet = new CachedKeySet(\n    $jwksUri,\n    $httpClient,\n    $httpFactory,\n    $cacheItemPool,\n    null, // $expiresAfter int seconds to set the JWKS to expire\n    true  // $rateLimit    true to enable rate limit of 10 RPS on lookup of invalid keys\n);\n\n$jwt = 'eyJhbGci...'; // Some JWT signed by a key from the $jwkUri above\n$decoded = JWT::decode($jwt, $keySet);\n```\n\n----------------------------------------\n\nTITLE: Copying Lamejs file\nDESCRIPTION: This command copies the `lame.all.js` file from the Lamejs installation directory to the corresponding directory in the Moodle installation. This replaces the existing Lamejs library with the newly downloaded version.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncp /tmp/lamejs/node_modules/lamejs/lame.all.js [PATH TO YOUR MOODLE]/lib/editor/tiny/plugins/recordrtc/amd/src/lame.all.js\n```\n\n----------------------------------------\n\nTITLE: Defining Route Groups with Common Prefixes\nDESCRIPTION: Shows how to group routes that share a common URL prefix using the addGroup method, which helps organize routes and reduces repetition.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$r->addGroup('/admin', function (RouteCollector $r) {\n    $r->addRoute('GET', '/do-something', 'handler');\n    $r->addRoute('GET', '/do-another-thing', 'handler');\n    $r->addRoute('GET', '/do-something-else', 'handler');\n});\n```\n\n----------------------------------------\n\nTITLE: Command Dependency Injection in Silly - PHP\nDESCRIPTION: Shows how Silly allows dependency injection with OutputInterface by providing an instance of the application output. Silly framework setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$app->command('greet [name]', function ($name, OutputInterface $output) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Positioning Single Item to the Right with Bootstrap Flexbox\nDESCRIPTION: This snippet shows how to use the .justify-content-end class to position a single item to the right within a .d-flex container.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/positioning.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex justify-content-end\">\n  <button class=\"btn btn-success\">OK</button>\n</div>\n```\n\n----------------------------------------\n\nTITLE: quiz_refresh_events() Additional Parameters (Moodle 3.3.2)\nDESCRIPTION: The `quiz_refresh_events()` function now takes two additional parameters to refine the update to a specific instance. These parameters are the module instance object or ID, and the course module object or ID. It is recommended to send the full objects instead of the IDs to save database calls.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_19\n\nLANGUAGE: text\nCODE:\n```\n\"quiz_refresh_events() Now takes two additional parameters to refine the update to a specific instance. This function\n  now optionally takes the module instance object or ID, and the course module object or ID. Please try to send the full\n  objects instead of the ids to save DB calls.\"\n```\n\n----------------------------------------\n\nTITLE: Getting user initials in PHP\nDESCRIPTION: A new method core_user::get_initials has been added to get the initials of a user in a way that is compatible with internationalization.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncore_user::get_initials($user)\n```\n\n----------------------------------------\n\nTITLE: Adding Primary and Secondary Items to Action Menu in PHP\nDESCRIPTION: Illustrates different ways to add primary and secondary items to an action menu.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Primary items examples.\n$menu->add(new action_menu_link(\n    new moodle_url($PAGE->url),\n    new pix_icon('t/emptystar', ''),\n    'Action link example',\n    true\n));\n$menu->add(new action_menu_link_primary(\n    $PAGE->url,\n    new pix_icon('t/emptystar', ''),\n    'Action link example',\n));\n\n// Secondary items examples.\n$menu->add(new action_menu_link(\n    new moodle_url($PAGE->url),\n    new pix_icon('t/emptystar', ''),\n    'Action link example',\n    false\n));\n$menu->add(new action_menu_link_secondary(\n    $PAGE->url,\n    new pix_icon('t/user', ''),\n    'Action link example',\n));\n```\n\n----------------------------------------\n\nTITLE: Implementing Branded Icons Callback in PHP\nDESCRIPTION: Shows how to implement the is_branded callback for modules to indicate that an activity icon should be displayed with its original colors.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n/**\n * Whether the activity is branded.\n * This information is used, for instance, to decide if a filter should be applied to the icon or not.\n *\n * @return bool True if the activity is branded, false otherwise.\n */\nfunction h5pactivity_is_branded(): bool {\n    return true;\n}\n```\n\n----------------------------------------\n\nTITLE: Streaming Response Handling Comparison\nDESCRIPTION: Shows the difference between handling streaming responses in Guzzle 3.0 and 4.0. Demonstrates how to create streaming requests and read data from response streams.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// 3.0\nuse Guzzle\\Stream\\PhpStreamRequestFactory;\n$request = $client->get('/');\n$factory = new PhpStreamRequestFactory();\n$stream = $factory->fromRequest($request);\n$data = $stream->read(1024);\n\n// 4.0\n$response = $client->get('/', ['stream' => true]);\n// Read some data off of the stream in the response body\n$data = $response->getBody()->read(1024);\n```\n\n----------------------------------------\n\nTITLE: Enrollment Page Hook Implementation in PHP\nDESCRIPTION: Implementation guidance for enrol_page_hook() method using \\core_enrol\\output\\enrol_page renderable for HTML generation with modal form display.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nenrol_page_hook()\n```\n\n----------------------------------------\n\nTITLE: Function Declaration and Refactoring - PHP\nDESCRIPTION: This snippet lists external function declarations and mappings to new core functionalities. This aids in managing the transition from deprecated methods to updated implementations and clarifies the current external API.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_50\n\nLANGUAGE: php\nCODE:\n```\n  Functions:\n    - external_format_string()          => core_external\\util::format_string()\n    - external_format_text()            => core_external\\util::format_text()\n    - external_create_service_token()   => core_external\\util::generate_token()\n    - external_generate_token()         => core_external\\util::generate_token()\n    - external_generate_token_for_current_user()\n                                        => core_external\\util::generate_token_for_current_user()\n    - external_log_token_request        => core_external\\util::log_token_request()\n```\n\n----------------------------------------\n\nTITLE: Combined Bar and Line Chart with Table Configuration\nDESCRIPTION: JSON configuration for a combined chart that displays expenses as a line chart overlaid on sales data shown as bars. This demonstrates how to customize individual series types within the same chart by setting the 'type' property for specific series.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/charts.md#2025-04-21_snippet_8\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"chartdata\": \"{\\u0022type\\u0022:\\u0022bar\\u0022,\\u0022series\\u0022:[{\\u0022label\\u0022:\\u0022Expenses\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:\\u0022line\\u0022,\\u0022values\\u0022:[400,460,1120,540],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null},{\\u0022label\\u0022:\\u0022Sales\\u0022,\\u0022labels\\u0022:null,\\u0022type\\u0022:null,\\u0022values\\u0022:[1000,1170,660,1030],\\u0022colors\\u0022:[],\\u0022axes\\u0022:{\\u0022x\\u0022:null,\\u0022y\\u0022:null},\\u0022smooth\\u0022:null}],\\u0022labels\\u0022:[\\u00222004\\u0022,\\u00222005\\u0022,\\u00222006\\u0022,\\u00222007\\u0022],\\u0022title\\u0022:\\u0022BAR CHART COMBINED WITH LINE CHART\\u0022,\\u0022axes\\u0022:{\\u0022x\\u0022:[],\\u0022y\\u0022:[{\\u0022label\\u0022:null,\\u0022labels\\u0022:null,\\u0022max\\u0022:null,\\u0022min\\u0022:0,\\u0022position\\u0022:null,\\u0022stepSize\\u0022:null}]},\\u0022config_colorset\\u0022:null,\\u0022horizontal\\u0022:false,\\u0022stacked\\u0022:null}\",\n    \"withtable\": true\n}\n```\n\n----------------------------------------\n\nTITLE: Running PHP CodeSniffer for Nullable Parameter Check\nDESCRIPTION: Command to detect implicit nullable parameters that need explicit type hinting for compatibility\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/scssphp/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nphpcs --sniffs=PHPCompatibility.FunctionDeclarations.RemovedImplicitlyNullableParam lib/scssphp\n```\n\n----------------------------------------\n\nTITLE: Fixes for XLSX Reader Merge Range Handling\nDESCRIPTION: This snippet describes fixes for merge range handling in the XLSX Reader of PhpSpreadsheet. The fixes ensure correct reading and interpretation of merged cells in XLSX files, resolving potential issues with data layout and presentation. This contributes to improved compatibility and data integrity when working with XLSX files.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n\"Xlsx Reader merge range fixes. [Issue #2501](https://github.com/PHPOffice/PhpSpreadsheet/issues/2501) [PR #2504](https://github.com/PHPOffice/PhpSpreadsheet/pull/2504)\"\n```\n\n----------------------------------------\n\nTITLE: Search Indexing with Time Limits\nDESCRIPTION: Adds support for time-limited search indexing to improve scheduled task performance, requiring search engine plugins to implement specific parameters\nSOURCE: https://github.com/moodle/moodle/blob/main/search/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n// Time-limited indexing parameters\nadd_documents($stopat = null)\nget_document_recordset()\n```\n\n----------------------------------------\n\nTITLE: Configuring Apache for Shibboleth Authentication in Moodle\nDESCRIPTION: This Apache configuration snippet protects the Moodle Shibboleth authentication directory, requiring a valid Shibboleth session for access. It can be customized to restrict access based on specific attributes.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: apache\nCODE:\n```\n<Directory  /path/to/moodle/auth/shibboleth/index.php>\n        AuthType shibboleth\n        ShibRequireSession On\n        require valid-user\n</Directory>\n```\n\n----------------------------------------\n\nTITLE: Using dependencies in Moodle plugin versioning\nDESCRIPTION: This code snippet illustrates how to define dependencies for a Moodle plugin using the version.php file. This is required when certain behaviours depend on others, specifying minimum version requirements.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/behaviour/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$plugin->dependencies = array(\\n    'qbehaviour_immediatefeedback' => 2011102700,\\n    'qbehaviour_deferredcbm'       => 2011102700\\n);\n```\n\n----------------------------------------\n\nTITLE: Modified Enrollment Welcome Message Method in PHP\nDESCRIPTION: Updated send_course_welcome_message_to_user method in enrol_plugin class to include roleid parameter for course role placeholder population.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nenrol_plugin::send_course_welcome_message_to_user($roleid)\n```\n\n----------------------------------------\n\nTITLE: Partial Rebuild of Course Cache\nDESCRIPTION: Using the added parameter to invalidate only section or module cache rather than entire course cache for better performance.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_68\n\nLANGUAGE: php\nCODE:\n```\nrebuild_course_cache($courseid, $partialrebuild)\n```\n\n----------------------------------------\n\nTITLE: New Method for Test Fixture Paths\nDESCRIPTION: A new static method get_fixture_path() has been added to advanced_testcase to allow unit tests to fetch the path to fixture files.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_56\n\nLANGUAGE: PHP\nCODE:\n```\n\\advanced_testcase::get_fixture_path()\n```\n\n----------------------------------------\n\nTITLE: Dropdown Dialog Template - Mustache\nDESCRIPTION: Mustache template showing the structure of a basic dropdown dialog with button and content.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_2\n\nLANGUAGE: mustache\nCODE:\n```\n{\n    \"buttonid\" : \"example01\",\n    \"buttoncontent\" : \"Open dialog\",\n    \"dialogcontent\" : \"Dialog content\",\n    \"buttonclasses\": \"btn btn-primary extraclass\"\n}\n```\n\n----------------------------------------\n\nTITLE: Default Behavior of Invoker - PHP\nDESCRIPTION: Shows the default usage of the Invoker library where callables can be invoked using named parameters. It demonstrates various ways to call functions, including with arrays, named parameters, and default values. Invoker library setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$invoker = new Invoker\\Invoker;\n\n$invoker->call(function () {\n    echo 'Hello world!';\n});\n\n// Simple parameter array\n$invoker->call(function ($name) {\n    echo 'Hello ' . $name;\n}, ['John']);\n\n// Named parameters\n$invoker->call(function ($name) {\n    echo 'Hello ' . $name;\n}, [\n    'name' => 'John'\n]);\n\n// Use the default value\n$invoker->call(function ($name = 'world') {\n    echo 'Hello ' . $name;\n});\n```\n\nLANGUAGE: php\nCODE:\n```\n$invoker->call(['MyClass', 'myStaticMethod']);\n\n// Using Class::method syntax\n$invoker->call('MyClass::myStaticMethod');\n```\n\n----------------------------------------\n\nTITLE: Modifying YouTube Playback Technology AMD Module Definition for Moodle\nDESCRIPTION: This snippet shows how to modify the AMD module definition in the YouTube Playback Technology plugin to use Moodle's lazy-loaded VideoJS module.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\ndefine(['media_videojs/video-lazy']\n```\n\n----------------------------------------\n\nTITLE: Adding Submission Summary Method for Sub-plugins in PHP\nDESCRIPTION: A new method 'submission_summary_for_messages()' has been added for submission sub-plugins to summarize submitted content for inclusion in confirmation messages to students.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nsubmission_summary_for_messages()\n```\n\n----------------------------------------\n\nTITLE: Implementing Local Plugin Version Specification in PHP\nDESCRIPTION: Defines version information for a local Moodle plugin including version number and minimum Moodle version requirement.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$plugin->version  = 2010022400;   // The (date) version of this plugin\n$plugin->requires = 2010021900;   // Requires this Moodle version\n```\n\n----------------------------------------\n\nTITLE: Apache Configuration for Shibboleth Logout in Moodle\nDESCRIPTION: This Apache configuration snippet demonstrates how to exclude the Moodle Shibboleth logout script from Shibboleth protection, which is necessary for proper logout functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_4\n\nLANGUAGE: apache\nCODE:\n```\n<Directory /path/to/moodle/auth/shibboleth/logout.php>\n    AuthType shibboleth\n    ShibRequireSession Off\n    require shibboleth\n</Directory>\n```\n\n----------------------------------------\n\nTITLE: Generating Library Metadata\nDESCRIPTION: Command for generating library metadata using Phing build tool, which clones the libphonenumber project at the specified version\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\n$ vendor/bin/phing compile\n```\n\n----------------------------------------\n\nTITLE: Moodle User Agent Function Updates\nDESCRIPTION: Documents the transition from standalone user agent related functions to methods in the core_useragent class.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_100\n\nLANGUAGE: php\nCODE:\n```\ncheck_browser_operating_system() -> core_useragent::check_browser_operating_system()\ncheck_browser_version() -> core_useragent::check_browser_version()\nget_device_type() -> core_useragent::get_device_type()\n```\n\n----------------------------------------\n\nTITLE: Updating Configuration Identifier for Database Authentication Plugin (PHP)\nDESCRIPTION: In Moodle 3.3, the configuration file for the database authentication plugin was migrated to use the admin settings API. The identifier for configuration data stored in the config_plugins table was changed from 'auth/db' to 'auth_db'.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/db/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n* The config.html file was migrated to use the admin settings API.\n  The identifier for configuration data stored in config_plugins table was converted from 'auth/db' to 'auth_db'.\n```\n\n----------------------------------------\n\nTITLE: Installing FPDI with TCPDF using Composer (JSON)\nDESCRIPTION: Composer configuration for installing FPDI with TCPDF. Requires tecnickcom/tcpdf version 6.6.* and setasign/fpdi version ^2.5.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"require\": {\n        \"tecnickcom/tcpdf\": \"6.6.*\",\n        \"setasign/fpdi\": \"^2.5\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Supporting Disabled Options in Form Autocomplete\nDESCRIPTION: The `core/form-autocomplete` component now supports disabled options in the source select list.  These options will be displayed in the autocomplete options with the `aria-disabled` attribute and will not be selectable.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_22\n\n\n\n----------------------------------------\n\nTITLE: Simplified JWT Exception Handling in PHP\nDESCRIPTION: This snippet demonstrates a simplified approach to handling JWT exceptions by catching LogicException for environmental setup issues and UnexpectedValueException for JWT signature and claims errors.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse UnexpectedValueException;\ntry {\n    $decoded = JWT::decode($payload, $keys);\n} catch (LogicException $e) {\n    // errors having to do with environmental setup or malformed JWT Keys\n} catch (UnexpectedValueException $e) {\n    // errors having to do with JWT signature and claims\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating ExponentialBackoffPlugin in Guzzle\nDESCRIPTION: Example showing the migration of Guzzle's ExponentialBackoffPlugin to BackoffPlugin. Changes include namespace updates and using a factory method to create the backoff strategy with chaining capability.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_17\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Http\\Plugin\\ExponentialBackoffPlugin;\n\n$backoffPlugin = new ExponentialBackoffPlugin($maxRetries, array_merge(\n        ExponentialBackoffPlugin::getDefaultFailureCodes(), array(429)\n    ));\n\n$client->addSubscriber($backoffPlugin);\n```\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Plugin\\Backoff\\BackoffPlugin;\nuse Guzzle\\Plugin\\Backoff\\HttpBackoffStrategy;\n\n// Use convenient factory method instead -- see implementation for ideas of what\n// you can do with chaining backoff strategies\n$backoffPlugin = BackoffPlugin::getExponentialBackoff($maxRetries, array_merge(\n        HttpBackoffStrategy::getDefaultFailureCodes(), array(429)\n    ));\n$client->addSubscriber($backoffPlugin);\n```\n\n----------------------------------------\n\nTITLE: New Parameter $studentisonline in Quiz API Methods (Moodle 4.0)\nDESCRIPTION: The methods `process_finish()` in `mod/quiz/attemptlib.php`, `quiz_send_confirmation()` in `mod/quiz/locallib.php`, and `quiz_send_notification_messages()` in `mod/quiz/locallib.php` now accept a new parameter, `$studentisonline`. This parameter indicates whether the student is currently interacting with the quiz.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_6\n\nLANGUAGE: text\nCODE:\n```\n\"The following API methods have a new parameter, $studentisonline, to define whether the student is currently interacting:\n  - process_finish() in mod/quiz/attemptlib.php\n  - quiz_send_confirmation() in mod/quiz/locallib.php\n  - quiz_send_notification_messages() in mod/quiz/locallib.php\"\n```\n\n----------------------------------------\n\nTITLE: Updating book_export_contents() in PHP\nDESCRIPTION: The book_export_contents() callback now returns tags information for every chapter as of Moodle 3.7.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nbook_export_contents()\n```\n\n----------------------------------------\n\nTITLE: Implementing Text Truncation in HTML\nDESCRIPTION: Examples of text truncation techniques at both block and inline levels using the text-truncate class, which adds ellipsis to content that exceeds its container.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<!-- Block level -->\n<div class=\"row\">\n  <div class=\"col-2 text-truncate\">\n    Praeterea iter est quasdam res quas ex communi.\n  </div>\n</div>\n\n<!-- Inline level -->\n<span class=\"d-inline-block text-truncate\" style=\"max-width: 150px;\">\n  Praeterea iter est quasdam res quas ex communi.\n</span>\n```\n\n----------------------------------------\n\nTITLE: Using RS256 for Encoding and Decoding JWT\nDESCRIPTION: This example demonstrates encoding a JWT using the RS256 algorithm with a pair of RSA keys. It showcases how to construct the keys and complements the sign and verify process with outputs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\Key;\n\n$privateKey = <<<EOD\n-----BEGIN RSA PRIVATE KEY-----\n... (private key contents)\n-----END RSA PRIVATE KEY-----\nEOD;\n\n$publicKey = <<<EOD\n-----BEGIN PUBLIC KEY-----\n... (public key contents)\n-----END PUBLIC KEY-----\nEOD;\n\n$payload = [\n    'iss' => 'example.org',\n    'aud' => 'example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$jwt = JWT::encode($payload, $privateKey, 'RS256');\necho \"Encode:\\n\" . print_r($jwt, true) . \"\\n\";\n\n$decoded = JWT::decode($jwt, new Key($publicKey, 'RS256'));\n$decoded_array = (array) $decoded;\necho \"Decode:\\n\" . print_r($decoded_array, true) . \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Adding get_default_column_sorting Method in PHP\nDESCRIPTION: This method can be overridden by specific data sources to define their default sorting order for columns when a report is created. It standardizes how data sources manage the display order of report columns.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nfunction get_default_column_sorting() {\n    // Default sorting logic to be defined by subclasses\n}\n```\n\n----------------------------------------\n\nTITLE: Adding 'extrainfo' to DB Options Config\nDESCRIPTION: Added 'extrainfo' to the DB options config. It's extra information for the DB driver, e.g. SQL Server has additional configuration according to its environment, which the administrator can specify to alter and override any connection options.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_44\n\n\n\n----------------------------------------\n\nTITLE: Defining CSS Styles with Charset, Font-face, and Keyframe Animation\nDESCRIPTION: This CSS snippet defines a UTF-8 charset, sets up a custom font-face, applies a font-size to html and body elements, and creates a keyframe animation. It demonstrates various CSS features in a concise example.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_10\n\nLANGUAGE: css\nCODE:\n```\n@charset \"utf-8\";\n\n@font-face {\n  font-family: \"CrassRoots\";\n  src: url(\"../media/cr.ttf\");\n}\n\nhtml, body {\n    font-size: 1.6em;\n}\n\n@keyframes mymove {\n    from { top: 0px; }\n    to { top: 200px; }\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Column Attributes in Flexible Table\nDESCRIPTION: Method to define attributes that will be applied to every cell in a specific column of a flexible_table.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_65\n\nLANGUAGE: php\nCODE:\n```\nflexible_table::set_columnsattributes()\n```\n\n----------------------------------------\n\nTITLE: Configuring Factory Parameters with DI Factory in PHP\nDESCRIPTION: This code snippet demonstrates how to configure factory parameters using the DI\\factory function in PHP. It specifies a host parameter using DI\\get to retrieve the 'db.host' entry from the container. This requires PHP-DI library and a properly configured dependency injection container. The expected input is a set of parameters for the factory function, with the output being a configured factory ready for use.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nreturn [\n    'Database' => DI\\factory(function ($host) {...})\n        ->parameter('host', DI\\get('db.host')),\n];\n```\n\n----------------------------------------\n\nTITLE: Adding New Web Service for Removing Submissions in PHP\nDESCRIPTION: A new web service called 'mod_assign_remove_submission' has been created to remove the submission for a specific user ID and assignment activity ID.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nmod_assign_remove_submission\n```\n\n----------------------------------------\n\nTITLE: Multiple Response Question Example\nDESCRIPTION: This snippet shows the format for a multiple-response (multiple choice allowing multiple selections) question in Moodle. It includes the question text, answer options with percentages indicating the weight of each answer, and specific feedback for each answer. The percentages determine how much credit is awarded for each selected answer.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n// multiple choice, multiple response with specified feedback for right and wrong answers\n::colours:: What's between orange and green in the spectrum?\n{\n    ~%50%yellow # right; good!\n    ~%-100%red # [html]wrong\n    ~%50%off-beige # right; good!\n    ~%-100%[plain]blue # wrong\n}\n```\n\n----------------------------------------\n\nTITLE: Retrieving Feedback Items using External Methods in PHP\nDESCRIPTION: The external methods get_items() and get_page_items() now only return items when the user has access to the feedback. If access is denied, a warning message is returned with reasons.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/feedback/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$result = mod_feedback_external::get_items($feedbackid);\n$result = mod_feedback_external::get_page_items($feedbackid, $page);\n```\n\n----------------------------------------\n\nTITLE: Admin Setting Configuration with OptGroup Example\nDESCRIPTION: Example of configuring admin settings using optgroup tags for grouping options in select and multiselect settings. Shows how to structure option parameters with group names as indexes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n[\n  \"Spain\" =>  [\"madrid\" => \"Madrid\", \"barcelona\" => \"Barcelona\"],\n  \"France\" => [\"paris\" => \"Paris\", \"marseille\" => \"Marseille\"],\n]\n```\n\n----------------------------------------\n\nTITLE: PHP Method Reference - New Hook Implementation in 4.4\nDESCRIPTION: Implementation of \\core_backup\\hook\\before_course_modified_check hook for excluding events from automated backup\nSOURCE: https://github.com/moodle/moodle/blob/main/backup/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core_backup\\hook\\before_course_modified_check\n```\n\n----------------------------------------\n\nTITLE: Installing Guzzle Promises with Composer\nDESCRIPTION: This command adds the `guzzlehttp/promises` package as a dependency to your project using Composer. This allows you to use Guzzle's promise implementation in your PHP project.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\n\"composer require guzzlehttp/promises\"\n```\n\n----------------------------------------\n\nTITLE: Loading Markdown Parser without Autoloading in PHP\nDESCRIPTION: Shows how to include the Markdown parser without using class autoloading by using the .inc.php files which eagerly load all dependencies.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nrequire_once 'Michelf/Markdown.inc.php';\n```\n\n----------------------------------------\n\nTITLE: Updating `\\core_renderer->supportemail()` Method Signature\nDESCRIPTION: The `\\core_renderer->supportemail()` method signature has been updated to allow a second optional parameter. Set it to true to embed the generated link in other inline content.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_31\n\n\n\n----------------------------------------\n\nTITLE: Updating Constructor for EvalMath Library - PHP\nDESCRIPTION: This snippet updates the constructor method from EvalMath::EvalMath() to EvalMath::__construct(). It also introduces EvalMath::EvalMath for maintaining backward compatibility, ensuring that existing implementations continue to function correctly with the new changes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/evalmath/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nclass EvalMath {\n    public function __construct() {\n        // constructor logic here\n    }\n    public static function EvalMath() {\n        // backward compatibility logic here\n    }\n}\n?>\n```\n\n----------------------------------------\n\nTITLE: Modifying contentUserDataAjax Function in H5P JavaScript\nDESCRIPTION: Patch for the contentUserDataAjax function in js/h5p.js that enables overriding the method when used in Moodle. This modification checks for undefined users and allows custom implementations through H5P.contentUserDataAjax.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/core/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nfunction contentUserDataAjax(contentId, dataType, subContentId, done, data, preload, invalidate, async) {\n  if (H5PIntegration.user === undefined) {\n    // Not logged in, no use in saving.\n    done('Not signed in.');\n    return;\n  }\n  // Moodle patch to let override this method.\n  if (H5P.contentUserDataAjax !== undefined) {\n    return H5P.contentUserDataAjax(contentId, dataType, subContentId, done, data, preload, invalidate, async);\n  }\n  // End of Moodle patch.\n\n  var options = {\n```\n\n----------------------------------------\n\nTITLE: Documenting Method Removal in mod_folder 5.0\nDESCRIPTION: Documents the removal of htmllize_tree() method and its replacement with renderable_tree_elements in Moodle folder module version 5.0. References MDL-79214 ticket for additional context.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/folder/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# mod_folder Upgrade notes\n\n## 5.0\n\n### Removed\n\n- Method htmllize_tree() has been removed. Please use renderable_tree_elements instead\n\n  For more information see [MDL-79214](https://tracker.moodle.org/browse/MDL-79214)\n```\n\n----------------------------------------\n\nTITLE: Handling Display-Only Dropdown Status in JavaScript for Moodle\nDESCRIPTION: This JavaScript code snippet shows how to handle user interactions with a display-only dropdown status component in Moodle. It captures click events, sends updates to the backend, and updates the component's value.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_8\n\nLANGUAGE: javascript\nCODE:\n```\nimport {getDropdownStatus} from 'core/local/dropdown/status';\nimport {sendValueToTheBackend} from 'YOURPLUGIN/example';\n\nconst status = getDropdownStatus('#mydropdown');\nstatus.getElement().addEventListener('click', (event) => {\n    const option = event.target.closest(\"[data-action='updateActionName']\");\n    if (!option) {\n        return;\n    }\n    try {\n        if(sendValueToTheBackend(option.dataset.value)) {\n             status.setSelectedValue(option.dataset.value);\n        }\n    } catch (error) {\n        // Do some error handling here.\n    }\n});\n```\n\n----------------------------------------\n\nTITLE: Updated Constructor Parameters for Notification Class\nDESCRIPTION: Two new optional parameters have been added to the core\\output\\notification constructor: title and icon. These allow for more customization of notification displays.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_54\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\output\\notification constructor: null|string $title - null|string $icon\n```\n\n----------------------------------------\n\nTITLE: Extending Completion State Options in get_overall_completion_state Method in Moodle 4.5\nDESCRIPTION: Describes a change to the 'get_overall_completion_state()' method in the activity_custom_completion class, which can now return COMPLETION_COMPLETE_FAIL in addition to the previous COMPLETION_COMPLETE and COMPLETION_INCOMPLETE options.\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n- The `\\core_completion\\activity_custom_completion::get_overall_completion_state()` method can now also return `COMPLETION_COMPLETE_FAIL` and not only `COMPLETION_COMPLETE` and `COMPLETION_INCOMPLETE`.\n```\n\n----------------------------------------\n\nTITLE: Checking Out TinyMCE Version\nDESCRIPTION: This snippet checks out a clean copy of the TinyMCE repository corresponding to the desired Moodle version. It ensures the user is working with the correct branch for patching and building.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ntinymce=`mktemp -d`\ncd \"${tinymce}\"\ngit clone https://github.com/tinymce/tinymce.git\ncd tinymce\ngit checkout -b MOODLE_405_STABLE\ngit reset --hard [desired version]\n```\n\n----------------------------------------\n\nTITLE: Overriding Block Configuration Form Display in PHP\nDESCRIPTION: Example of how block plugins can specify to display configuration form when the block is added to a page by overriding a static method.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nstatic method block_edit_form::display_form_when_adding()\n```\n\n----------------------------------------\n\nTITLE: Preventing Thumbnail Files Being Treated as XML\nDESCRIPTION: This snippet describes a fix in PhpSpreadsheet that prevents thumbnail files from being incorrectly treated as XML files. The fix ensures that thumbnail files within spreadsheet documents are properly identified and handled, preventing parsing errors or unexpected behavior. This enhancement improves the robustness and reliability of file processing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\n\"Don't treat thumbnail file as xml. [Issue #2516](https://github.com/PHPOffice/PhpSpreadsheet/issues/2516) [PR #2517](https://github.com/PHPOffice/PhpSpreadsheet/pull/2517)\"\n```\n\n----------------------------------------\n\nTITLE: Calendar Subscription Method Deprecation - PHP\nDESCRIPTION: List of deprecated calendar subscription related methods and files that were removed in version 4.4.\nSOURCE: https://github.com/moodle/moodle/blob/main/calendar/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncalendar_process_subscription_row\ncalendar_import_icalendar_events\nfake_block_threemonths\ni_click_day_of_this_month_in_calendar\ni_hover_over_today_in_the_calendar\n```\n\n----------------------------------------\n\nTITLE: Subtle Button Variations Implementation\nDESCRIPTION: Implementation of subtle button variants that provide a softer, more understated appearance while maintaining visual presence.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/buttons.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-subtle-secondary\">Subtle Secondary</button>\n<button type=\"button\" class=\"btn btn-subtle-success\">Subtle Succcess</button>\n<button type=\"button\" class=\"btn btn-sm btn-subtle-success\">Subtle Succcess Small</button>\n```\n\n----------------------------------------\n\nTITLE: Registering FPDI Namespace with PSR-4 Autoloader (PHP)\nDESCRIPTION: PHP code to register the FPDI namespace with a PSR-4 compatible autoloader. Adds the namespace 'setasign\\Fpdi' to the specified path.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$loader = new \\Example\\Psr4AutoloaderClass;\n$loader->register();\n$loader->addNamespace('setasign\\Fpdi', 'path/to/src/');\n```\n\n----------------------------------------\n\nTITLE: Implementing Block Content for External Functions in PHP\nDESCRIPTION: Example of how to override the get_content_for_external() method to return block contents rendered for external functions, including handling of formatted content and file downloads.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nblock_base::get_content_for_external()\n```\n\n----------------------------------------\n\nTITLE: Defining Routes with Optional Parameters\nDESCRIPTION: Shows how to define routes with optional parameters using square brackets syntax. Optional parts are only supported at the end of routes, not in the middle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// This route\n$r->addRoute('GET', '/user/{id:\\d+}[/{name}]', 'handler');\n// Is equivalent to these two routes\n$r->addRoute('GET', '/user/{id:\\d+}', 'handler');\n$r->addRoute('GET', '/user/{id:\\d+}/{name}', 'handler');\n\n// Multiple nested optional parts are possible as well\n$r->addRoute('GET', '/user[/{id:\\d+}[/{name}]]', 'handler');\n\n// This route is NOT valid, because optional parts can only occur at the end\n$r->addRoute('GET', '/user[/{id:\\d+}]/{name}', 'handler');\n```\n\n----------------------------------------\n\nTITLE: Introduction of Plugin Features for Qbank in Moodle 4.0 - PHP\nDESCRIPTION: Details the new plugin type aimed at enhancing the question bank, instructing developers to use the class plugin_feature to define features and implement custom functionalities. References are made to the core_question\\local\\bank\\plugin_features_base class for method overrides.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/upgrade.txt#2025-04-21_snippet_4\n\n\n\n----------------------------------------\n\nTITLE: Exception Namespace for APIs - PHP\nDESCRIPTION: Adds a new namespace `exception` in the APIs, which allows better organization and handling of exceptions across the Moodle framework.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_14\n\n\n\n----------------------------------------\n\nTITLE: Enabling Strict CSS Parsing Mode\nDESCRIPTION: Configuring the parser to throw exceptions for invalid or unknown CSS constructs\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$parser = new \\Sabberworm\\CSS\\Parser(\n    file_get_contents('somefile.css'),\n    \\Sabberworm\\CSS\\Settings::create()->beStrict()\n);\n```\n\n----------------------------------------\n\nTITLE: Deprecating Process Save Grading Options Method in PHP\nDESCRIPTION: The method '\\assign::process_save_grading_options()' has been deprecated as it is no longer used.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n\\assign::process_save_grading_options()\n```\n\n----------------------------------------\n\nTITLE: Encoding JWT with Passphrase Protected Private Key\nDESCRIPTION: This example shows how to encode a JWT using a private key protected by a passphrase. It includes the techniques for loading the key and decoding it into a usable format.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\nuse Firebase\\JWT\\Key;\n\n$passphrase = '[YOUR_PASSPHRASE]';\n$privateKeyFile = '/path/to/key-with-passphrase.pem';\n$privateKey = openssl_pkey_get_private(\n    file_get_contents($privateKeyFile),\n    $passphrase\n);\n\n$payload = [\n    'iss' => 'example.org',\n    'aud' => 'example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$jwt = JWT::encode($payload, $privateKey, 'RS256');\necho \"Encode:\\n\" . print_r($jwt, true) . \"\\n\";\n$publicKey = openssl_pkey_get_details($privateKey)['key'];\n$decoded = JWT::decode($jwt, new Key($publicKey, 'RS256'));\necho \"Decode:\\n\" . print_r((array) $decoded, true) . \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Adding Method for Defining Bulk Action Buttons in PHP\nDESCRIPTION: A new method '\\assign_feedback_plugin::get_grading_batch_operation_details()' has been added to the assign_feedback_plugin abstract class for defining bulk action buttons on the assignment grading page.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n\\assign_feedback_plugin::get_grading_batch_operation_details()\n```\n\n----------------------------------------\n\nTITLE: Ensuring SVG Icons Consistency\nDESCRIPTION: All system icons now come with an accompanying SVG file. A PHPUnit test validates the inclusion of SVG files for any new icons.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_29\n\n\n\n----------------------------------------\n\nTITLE: Adding HTML attributes to navigation nodes in PHP\nDESCRIPTION: A new method navigation_node::add_attribute() has been added to allow adding HTML attributes to navigation nodes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$node->add_attribute('data-custom', 'value')\n```\n\n----------------------------------------\n\nTITLE: Question Utility Function for Format in PHP\nDESCRIPTION: A new utility function has been created to format question content based on filters. This allows for consistent formatting of question fragments.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_70\n\nLANGUAGE: PHP\nCODE:\n```\n\\question_utils::format_question_fragment()\n```\n\n----------------------------------------\n\nTITLE: Converting jQuery Module Definition\nDESCRIPTION: Modifying the jQuery plugin wrapper to use AMD module format required by Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/policy/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\n(function($) {\n```\n\nLANGUAGE: javascript\nCODE:\n```\ndefine(['jquery'],function($) {\n```\n\n----------------------------------------\n\nTITLE: Using Specific Encoding Classes in PHP\nDESCRIPTION: Shows how to use specific encoding classes (Base64 and Base32) directly, instead of the general Encoding class. This is useful when only particular encoding variants are needed.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/factor/totp/extlib/ParagonIE/ConstantTime/README.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nuse ParagonIE\\ConstantTime\\Base64;\nuse ParagonIE\\ConstantTime\\Base32;\n\n$data = random_bytes(32);\necho Base64::encode($data), \"\\n\";\necho Base32::encode($data), \"\\n\";\n```\n\n----------------------------------------\n\nTITLE: Using Groups API Function for Cached User Groups\nDESCRIPTION: The recommended way to fetch cached list of groups a user is member of. This replaces any deprecated alternatives.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_63\n\nLANGUAGE: php\nCODE:\n```\ngroups_get_user_groups()\n```\n\n----------------------------------------\n\nTITLE: Centering Moodle Logo in HTML\nDESCRIPTION: This HTML snippet creates a centered container for the Moodle logo image using Bootstrap classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/getting-started.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex\">\n  <div class=\"w-50 ms-auto me-auto\">\n{{< image \"logo.png\" \"The Moodle logo\" \"img-fluid\">\n}}\n</div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Search Indexing with Batch Document Support\nDESCRIPTION: Introduces support for sending multiple documents to the search server in a batch, specifically implemented for the Solr search engine to improve performance\nSOURCE: https://github.com/moodle/moodle/blob/main/search/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// New search engine methods for batch document indexing\nadd_document_batch()\nsupports_add_document_batch()\n```\n\n----------------------------------------\n\nTITLE: New get_deprecated_tables Method in PHP\nDESCRIPTION: Introduce a new method 'get_deprecated_tables' in base entity for handling entity-specific table deprecations.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// New method in base entity class\npublic function get_deprecated_tables() {\n    // Return deprecated tables\n}\n```\n\n----------------------------------------\n\nTITLE: Installing Html2Text via Composer - PHP\nDESCRIPTION: This snippet demonstrates how to install the Html2Text library using Composer, which is a dependency manager for PHP. It is a prerequisite for utilizing the library in any PHP project using HTML to text conversion.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/html2text/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n```\ncomposer require html2text/html2text\n```\n```\n\n----------------------------------------\n\nTITLE: Creating Subpanel in Action Menu with Choicelist in PHP\nDESCRIPTION: Shows how to create a subpanel in an action menu using a renderable choicelist instance.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n/** @var core_renderer $output*/\n$output = $PAGE->get_renderer('core');\n\n// A choice list is a renderable class to outpout a user choice.\n$choice = new core\\output\\choicelist('Choice example');\n$choice->add_option(\"statusa\", \"Status A\", [\n    'url' => $PAGE->url,\n    'description' => 'Status A description',\n    'icon' => new pix_icon('t/user', '', ''),\n]);\n$choice->add_option(\"statusb\", \"Status B\", [\n    'url' => $PAGE->url,\n    'description' => 'Status B description',\n    'icon' => new pix_icon('t/groupv', '', ''),\n]);\n$choice->set_selected_value('statusb');\n\n$menu = new action_menu();\n\n// Add subpanel item.\n$menu->add(new core\\output\\local\\action_menu\\subpanel(\n    'Subpanel example',\n    $choice\n));\n\necho $output->render($menu);\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method Reference\nDESCRIPTION: List of deprecated methods with their recommended replacements. This includes encryption methods, plagiarism plugin methods, and core functions that should no longer be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_27\n\nLANGUAGE: PHP\nCODE:\n```\nreset_password_and_mail\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\plagiarism_plugin::get_configs()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\plagiarism_plugin::get_file_results()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\plagiarism_plugin::update_status()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\plagiarism_get_file_results()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\plagiarism_update_status()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\rc4encrypt()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\rc4decrypt()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\endecrypt()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\print_grade_menu()\n```\n\n----------------------------------------\n\nTITLE: Moved core_reportbuilder_testcase Class in PHP\nDESCRIPTION: The core_reportbuilder_testcase class is now autoloaded from a new location, avoiding manual inclusion of the helper file.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n// Autoloading core_reportbuilder_testcase\nuse core_reportbuilder\\tests\\core_reportbuilder_testcase;\n// Tests can utilize the autoloaded class\n\n```\n\n----------------------------------------\n\nTITLE: Creating Disabled Toggle with Extra Classes in Moodle\nDESCRIPTION: Implementation of a disabled toggle input with additional CSS classes. Demonstrates setting the disabled state and applying extra margin classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/toggle.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"id\": \"example-toggle-2\",\n    \"disabled\": true,\n    \"extraclasses\": \"mt-2 ms-2\",\n    \"dataattributes\": [{\n        \"name\": \"action\",\n        \"value\": \"toggle-status\"\n    }],\n    \"title\": \"Toggle Disabled\",\n    \"label\": \"Enable/disable status\"\n}\n```\n\n----------------------------------------\n\nTITLE: PHPUnit Test Migration Example\nDESCRIPTION: Examples of PHPUnit 9.5 assertion replacements showing deprecated methods and their new alternatives for handling file operations, regular expressions, and exception testing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_70\n\nLANGUAGE: PHP\nCODE:\n```\nassertNotIsReadable()         -> assertIsNotReadable()\nassertNotIsWritable()         -> assertIsNotWritable()\nassertDirectoryNotExists()    -> assertDirectoryDoesNotExist()\nassertDirectoryNotIsReadable()-> assertDirectoryIsNotReadable()\nassertDirectoryNotIsWritable()-> assertDirectoryIsNotWritable()\nassertFileNotExists()         -> assertFileDoesNotExist()\nassertFileNotIsReadable()     -> assertFileIsNotReadable()\nassertFileNotIsWritable()     -> assertFileIsNotWritable()\n```\n\n----------------------------------------\n\nTITLE: Adding Empty Sections During Upgrade - PHP\nDESCRIPTION: The 'format_weeks_upgrade_add_empty_sections' function facilitates the addition of empty sections during the upgrade process. This method ensures that any new sections needed for the course format are created correctly.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nformat_weeks_upgrade_add_empty_sections()\n```\n\n----------------------------------------\n\nTITLE: YUI Help Icon Deprecation Example - JavaScript\nDESCRIPTION: Shows the deprecated M.util.help_icon usage that should be replaced with moodle-core-popuphelp. The update requires removing JS calls and using a span with 'helplink' class.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_101\n\nLANGUAGE: JavaScript\nCODE:\n```\nM.util.help_icon\n```\n\n----------------------------------------\n\nTITLE: Updating `can_user_share` Method Signature\nDESCRIPTION: The `can_user_share` method in the `core\\moodlenet\\local\\can_share_manager` class has been updated to include a `$type` parameter. This parameter specifies the type of resource ('activity' or 'course') being checked for sharing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_7\n\n\n\n----------------------------------------\n\nTITLE: Removing Specific CSS Rules\nDESCRIPTION: Removing specific CSS rules from all rule sets using the library's rule removal methods\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$parser = new \\Sabberworm\\CSS\\Parser($css);\n$cssDocument = $parser->parse();\nforeach($cssDocument->getAllRuleSets() as $oRuleSet) {\n    $oRuleSet->removeRule('font-'); \n    $oRuleSet->removeRule('cursor');\n}\n```\n\n----------------------------------------\n\nTITLE: Creating a Basic Confirmation Modal with Example\nDESCRIPTION: HTML code showing a complete implementation of a confirmation modal button with standard delete confirmation functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"confirmation\" data-modal-title-str='[\"delete\", \"core\"]'\ndata-modal-content-str='[\"areyousure\"]' data-modal-yes-button-str='[\"delete\", \"core\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Extra Slots Added to Attempts (Moodle 2.9)\nDESCRIPTION: Extra slots can get added to an attempt. Developers may get slot numbers beyond the end of the original quiz layout and may want to call `$attemptobj->get_original_slot` to find where the question originally came from.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_28\n\nLANGUAGE: text\nCODE:\n```\n\"Due to MDL-40992, you should be aware that extra slots can get added to an attempt.\n  You may get slot numbers beyone the end of the original quiz layout, and you\n  may want to call $attemptobj->get_original_slot to find where the question\n  originally came from.\"\n```\n\n----------------------------------------\n\nTITLE: Migrating existing admin and course reports\nDESCRIPTION: This snippet outlines the steps required for migrating both existing admin and course reports to a new location structure in Moodle, along with necessary adjustments.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: markdown\nCODE:\n```\n* How to migrate existing admin reports:\n  # move all files to new /report/yourplugin/ location\n  # if settings.php exists add $settings=null;\n  # if settings.php does not exist create it and link the report, index.php is not linked automatically any more\n  # update require('../../config.php'); - remove one ../\n  # update all others includes and requires\n  # update all links to report pages by removing /admin/ or /$CFG->admin/\n  # add language pack with at least 'pluginname' string\n  # update CSS selectors\n\n* How to migrate existing course reports (optional):\n  # move all files to new /report/yourplugin/ location\n  # update require('../../config.php'); - remove one ../\n  # update all others includes and requires\n  # update all links to report pages by removing /course/ part\n  # update all language strings (use 'report_yourplugin' instead of 'coursereport_yourplugin') - use AMOS hints in commit message\n  # update all capability names\n  # grep the plugin codebase and look for any remaining 'coursereport' occurrences\n  # add new navigation hooks in lib.php - ex: report_stats_extend_navigation_course(), report_stats_extend_navigation_user()\n  # add new page types in lib.php\n  # create db/install.php migration script - delete old settings and capabilities (see converted plugins for examples)\n  # update CSS selectors\n```\n\n----------------------------------------\n\nTITLE: Adding Parameter to `course_modinfo::clear_instance_cache`\nDESCRIPTION: Function `course_modinfo::clear_instance_cache` now has an extra optional parameter `$newcacherev`, although this is really intended only for use by `rebuild_course_cache`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_33\n\n\n\n----------------------------------------\n\nTITLE: Synchronous Wait on Rejected Promise in PHP\nDESCRIPTION: This snippet illustrates what happens when `wait` is called on a rejected promise. A `GuzzleHttp\\Promise\\RejectionException` is thrown, with the rejection reason available via the `getReason` method (or the exception itself if the reason is an exception).\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n\"$promise = new Promise();\n$promise->reject('foo');\n$promise->wait();\"\n```\n\n----------------------------------------\n\nTITLE: Creating a Development Container in PHP-DI 4.0\nDESCRIPTION: Using the new ContainerBuilder::buildDevContainer() method in PHP-DI 4.0 to quickly create a default container for development purposes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n$container = ContainerBuilder::buildDevContainer();\n```\n\n----------------------------------------\n\nTITLE: Search Input Group Example with Hugo Shortcode\nDESCRIPTION: Demonstrates the example shortcode usage with an HTML input group and JavaScript console log\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/syntax-highlighting.md#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"input-group\">\n  <input type=\"text\" class=\"form-control\" placeholder=\"Search\">\n  <div class=\"input-group-append\">\n    <button class=\"btn btn-primary\" type=\"button\">\n        <i class=\"fa fa-search\"></i>\n    </button>\n  </div>\n</div>\n{{#js}}\n    window.console.log('hello');\n{{/js}}\n```\n\n----------------------------------------\n\nTITLE: Tagging and Pushing Build to MoodleHQ\nDESCRIPTION: This snippet tags the newly built TinyMCE version and pushes it to the MoodleHQ repository to support future changes. It facilitates coordinated development and version control.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ngit tag v4.5.0\ngit remote add moodlehq --tags\ngit push moodlehq MOODLE_405_STABLE\n```\n\n----------------------------------------\n\nTITLE: New DML Constant for Large Integers - PHP\nDESCRIPTION: Introduces the `SQL_INT_MAX` constant for defining large integer sizes, providing cross-database platform support, and facilitating SQL operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_13\n\n\n\n----------------------------------------\n\nTITLE: Referencing LDAP Sync CLI Script Path\nDESCRIPTION: File path reference to the deprecated and later removed LDAP enrollment synchronization CLI script.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/ldap/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nenrol/ldap/cli/sync.php\n```\n\n----------------------------------------\n\nTITLE: Creating Asynchronous Mimetype Upgrade Task in PHP for Moodle 5.0\nDESCRIPTION: A new ad-hoc task core_files\\task\\asynchronous_mimetype_upgrade_task has been added to upgrade file mimetypes asynchronously during core upgrades. A utility function upgrade_create_async_mimetype_upgrade_task is also provided to create this task.\nSOURCE: https://github.com/moodle/moodle/blob/main/files/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncore_files\\task\\asynchronous_mimetype_upgrade_task\n```\n\nLANGUAGE: php\nCODE:\n```\nupgrade_create_async_mimetype_upgrade_task\n```\n\n----------------------------------------\n\nTITLE: Parameter Validation in External Descriptions - PHP\nDESCRIPTION: This snippet describes the validation of the $required parameter in external descriptions to avoid incorrect usage. It ensures that only valid parameters are passed to constructors, improving API robustness.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_52\n\nLANGUAGE: php\nCODE:\n```\n  * The $required parameter for \\core_external\\external_description is now being validated in order to prevent\n  unintentionally passing incorrect parameters to the external_description's (and its subclasses') constructors (e.g. the parameter\n  description being incorrectly passed for the $required parameter). A debugging notice will be shown when such cases occur.\n```\n\n----------------------------------------\n\nTITLE: Implementing a Draggable List with Event Handling in Moodle\nDESCRIPTION: This JavaScript code demonstrates how to initialize a sortable list with jQuery and register an event handler for the DROP event. It shows the practical implementation of the SortableList component with event logging functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/sortable-list.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(\n[\n    'jquery',\n    'core/sortable_list',\n],\nfunction(\n    $,\n    SortableList\n) {\n     new SortableList('ul.my-draggable-list-ex');\n\n     $('ul.my-draggable-list-ex > *').on(SortableList.EVENTS.DROP, function(evt, info) {\n        console.log(info);\n     });\n});\n```\n\n----------------------------------------\n\nTITLE: CLI Adhoc Task Parameter Additions - PHP\nDESCRIPTION: This snippet details the additional parameters that can now be passed to the adhoc_task script executed from the command line, allowing for more flexible task management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_60\n\nLANGUAGE: php\nCODE:\n```\n  * admin/cli/adhoc_task.php has additional parameters:\n  - id - to run individual tasks by id\n  - classname - to run tasks by classname\n  - taskslimit - to limit the number of tasks in one run\n  - failed - to limit the run to only the tasks that failed in their previous run\n  Can be mixed, apart from 'id' of course.\n```\n\n----------------------------------------\n\nTITLE: Link and Image Custom Attributes in PHP Markdown\nDESCRIPTION: The snippet shows the extended syntax for adding custom class and id attributes to links and images, in line with how it's done for headers. This version allows defining these attributes inside inline or reference-style links and images, enhancing styling and accessibility options. Attributes are defined in curly braces after the link or image definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_10\n\nLANGUAGE: Markdown\nCODE:\n```\n[link](url){#id .class}\\n![img](url){#id .class}\\n\\n[linkref]: url \\\"optional title\\\" {#id .class}\n```\n\n----------------------------------------\n\nTITLE: Installing TinyMCE Dependencies\nDESCRIPTION: This snippet uses Yarn to install all necessary dependencies for building TinyMCE. Yarn must be installed in the system for this operation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nyarn\n```\n\n----------------------------------------\n\nTITLE: Using Container::make() in PHP-DI 4.0\nDESCRIPTION: Example of using the new Container::make() method introduced in PHP-DI 4.0 to resolve an entry. This method creates a new instance of the requested entry.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n$instance = $container->make('my.service');\n```\n\n----------------------------------------\n\nTITLE: Rendering `initials_bar()` in Mini Mode\nDESCRIPTION: In `outputcomponents.php`, `initials_bar()` can now be rendered in a smaller (mini) way. If you use this mini render, you'll need to implement your own form handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_45\n\n\n\n----------------------------------------\n\nTITLE: Database Table quiz_slots_tags Removed (Moodle 4.0)\nDESCRIPTION: The `quiz_slots_tags` database table has been removed, along with the `get_slot_tags_for_slot_id()` method from `mod/quiz/classes/structure.php` and the functions `quiz_retrieve_slot_tags` and `quiz_retrieve_slot_tag_ids` from `locallib.php`. This information is now stored in `question_set_references` and can be accessed using `qbank_helper::get_question_structure`.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_11\n\nLANGUAGE: text\nCODE:\n```\n\"The quiz_slots_tags database table has been removed entirely, as has the get_slot_tags_for_slot_id() method\n  from mod/quiz/classes/structure.php and the the locallib.php functions quiz_retrieve_slot_tags and\n  quiz_retrieve_slot_tag_ids. This information is now stored in question_set_references\n  and can be accessed in the results of qbank_helper::get_question_structure.\"\n```\n\n----------------------------------------\n\nTITLE: Finally Deprecated Methods\nDESCRIPTION: List of methods that have been finally deprecated and will now throw exceptions if called. These methods have reached the end of their deprecation cycle and should not be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_30\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_context_instance()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\can_use_rotated_text()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_system_context()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\print_arrow()\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Size for Activity Icon in PHP\nDESCRIPTION: Demonstrates how to set a custom size for an activity icon using the set_icon_size method and the iconsize enum.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\nuse core\\output\\local\\properties\\iconsize;\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n\n$icon = activity_icon::from_modname('quiz')\n    ->set_icon_size(iconsize::SIZE4);\n\necho $renderer->render($icon);\n```\n\n----------------------------------------\n\nTITLE: External Quiz Functions Sequential Quiz Behavior (Moodle 4.0.3, 4.1)\nDESCRIPTION: For sequential quizzes, the external functions `mod_quiz_external::get_attempt_data` and `mod_quiz_external::get_attempt_summary` will not return data for out-of-sequence questions except when reviewing the quiz. This is a change in behavior to be aware of when using these functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: text\nCODE:\n```\n\"If a quiz is sequential the external functions mod_quiz_external::get_attempt_data, mod_quiz_external::get_attempt_summary will not return any data\nrelated to out of sequence question except while reviewing the quiz (MDL-75210).\"\n```\n\n----------------------------------------\n\nTITLE: Defining Routes with Custom Patterns\nDESCRIPTION: Demonstrates how to define routes with custom placeholder patterns using regular expressions, including numeric constraints and wildcard patterns.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Matches /user/42, but not /user/xyz\n$r->addRoute('GET', '/user/{id:\\d+}', 'handler');\n\n// Matches /user/foobar, but not /user/foo/bar\n$r->addRoute('GET', '/user/{name}', 'handler');\n\n// Matches /user/foo/bar as well\n$r->addRoute('GET', '/user/{name:.+}', 'handler');\n```\n\n----------------------------------------\n\nTITLE: Appending Values to PSR-7 Response Headers in PHP\nDESCRIPTION: Shows how to append additional values to existing headers in a PSR-7 response. This method adds a new value to the header without overwriting existing ones.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$response->withAddedHeader('My-Custom-Header', 'The second message');\n```\n\n----------------------------------------\n\nTITLE: Modified Quiz Statistics Calculate Methods in PHP\nDESCRIPTION: Methods calculate_questions_stats_for_question_bank and get_all_stats_and_analysis received a new optional parameter $calculateifrequired in version 4.3.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/report/statistics/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nquiz_statistics_report::calculate_questions_stats_for_question_bank(/* ... */, $calculateifrequired)\n```\n\nLANGUAGE: php\nCODE:\n```\nget_all_stats_and_analysis(/* ... */, $calculateifrequired)\n```\n\n----------------------------------------\n\nTITLE: Creating Activity Modules in Test Courses with PHP\nDESCRIPTION: This snippet describes a new function 'xxx_course_backend_generator_create_activity' that allows activity modules to create instances in test courses. It also mentions an additional parameter for whitelisting modules in the course generator CLI script.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/generator/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nxxx_course_backend_generator_create_activity\n```\n\n----------------------------------------\n\nTITLE: Parsing CSS Structure with Sabberworm CSS Parser\nDESCRIPTION: This PHP code snippet shows the parsed structure of the CSS using the Sabberworm CSS parser. It details the internal representation of CSS elements as PHP objects, including charset, font-face, selectors, and keyframe animations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_11\n\nLANGUAGE: php\nCODE:\n```\nclass Sabberworm\\CSS\\CSSList\\Document#4 (2) {\n  protected $aContents =>\n  array(4) {\n    [0] =>\n    class Sabberworm\\CSS\\Property\\Charset#6 (2) {\n      private $sCharset =>\n      class Sabberworm\\CSS\\Value\\CSSString#5 (2) {\n        private $sString =>\n        string(5) \"utf-8\"\n        protected $iLineNo =>\n        int(1)\n      }\n      protected $iLineNo =>\n      int(1)\n    }\n    [1] =>\n    class Sabberworm\\CSS\\RuleSet\\AtRuleSet#7 (4) {\n      private $sType =>\n      string(9) \"font-face\"\n      private $sArgs =>\n      string(0) \"\"\n      private $aRules =>\n      array(2) {\n        'font-family' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#8 (4) {\n            private $sRule =>\n            string(11) \"font-family\"\n            private $mValue =>\n            class Sabberworm\\CSS\\Value\\CSSString#9 (2) {\n              private $sString =>\n              string(10) \"CrassRoots\"\n              protected $iLineNo =>\n              int(4)\n            }\n            private $bIsImportant =>\n            bool(false)\n            protected $iLineNo =>\n            int(4)\n          }\n        }\n        'src' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#10 (4) {\n            private $sRule =>\n            string(3) \"src\"\n            private $mValue =>\n            class Sabberworm\\CSS\\Value\\URL#11 (2) {\n              private $oURL =>\n              class Sabberworm\\CSS\\Value\\CSSString#12 (2) {\n                private $sString =>\n                string(15) \"../media/cr.ttf\"\n                protected $iLineNo =>\n                int(5)\n              }\n              protected $iLineNo =>\n              int(5)\n            }\n            private $bIsImportant =>\n            bool(false)\n            protected $iLineNo =>\n            int(5)\n          }\n        }\n      }\n      protected $iLineNo =>\n      int(3)\n    }\n    [2] =>\n    class Sabberworm\\CSS\\RuleSet\\DeclarationBlock#13 (3) {\n      private $aSelectors =>\n      array(2) {\n        [0] =>\n        class Sabberworm\\CSS\\Property\\Selector#14 (2) {\n          private $sSelector =>\n          string(4) \"html\"\n          private $iSpecificity =>\n          NULL\n        }\n        [1] =>\n        class Sabberworm\\CSS\\Property\\Selector#15 (2) {\n          private $sSelector =>\n          string(4) \"body\"\n          private $iSpecificity =>\n          NULL\n        }\n      }\n      private $aRules =>\n      array(1) {\n        'font-size' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#16 (4) {\n            private $sRule =>\n            string(9) \"font-size\"\n            private $mValue =>\n            class Sabberworm\\CSS\\Value\\Size#17 (4) {\n              private $fSize =>\n              double(1.6)\n              private $sUnit =>\n              string(2) \"em\"\n              private $bIsColorComponent =>\n              bool(false)\n              protected $iLineNo =>\n              int(9)\n            }\n            private $bIsImportant =>\n            bool(false)\n            protected $iLineNo =>\n            int(9)\n          }\n        }\n      }\n      protected $iLineNo =>\n      int(8)\n    }\n    [3] =>\n    class Sabberworm\\CSS\\CSSList\\KeyFrame#18 (4) {\n      private $vendorKeyFrame =>\n      string(9) \"keyframes\"\n      private $animationName =>\n      string(6) \"mymove\"\n      protected $aContents =>\n      array(2) {\n        [0] =>\n        class Sabberworm\\CSS\\RuleSet\\DeclarationBlock#19 (3) {\n          private $aSelectors =>\n          array(1) {\n            [0] =>\n            class Sabberworm\\CSS\\Property\\Selector#20 (2) {\n              private $sSelector =>\n              string(4) \"from\"\n              private $iSpecificity =>\n              NULL\n            }\n          }\n          private $aRules =>\n          array(1) {\n            'top' =>\n            array(1) {\n              [0] =>\n              class Sabberworm\\CSS\\Rule\\Rule#21 (4) {\n                private $sRule =>\n                string(3) \"top\"\n                private $mValue =>\n                class Sabberworm\\CSS\\Value\\Size#22 (4) {\n                  private $fSize =>\n                  double(0)\n                  private $sUnit =>\n                  string(2) \"px\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(13)\n                }\n                private $bIsImportant =>\n                bool(false)\n                protected $iLineNo =>\n                int(13)\n              }\n            }\n          }\n          protected $iLineNo =>\n          int(13)\n        }\n        [1] =>\n        class Sabberworm\\CSS\\RuleSet\\DeclarationBlock#23 (3) {\n          private $aSelectors =>\n          array(1) {\n            [0] =>\n            class Sabberworm\\CSS\\Property\\Selector#24 (2) {\n              private $sSelector =>\n              string(2) \"to\"\n              private $iSpecificity =>\n              NULL\n            }\n          }\n          private $aRules =>\n          array(1) {\n            'top' =>\n            array(1) {\n              [0] =>\n              class Sabberworm\\CSS\\Rule\\Rule#25 (4) {\n                private $sRule =>\n                string(3) \"top\"\n                private $mValue =>\n                class Sabberworm\\CSS\\Value\\Size#26 (4) {\n                  private $fSize =>\n                  double(200)\n                  private $sUnit =>\n                  string(2) \"px\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(14)\n                }\n                private $bIsImportant =>\n                bool(false)\n                protected $iLineNo =>\n                int(14)\n              }\n            }\n          }\n          protected $iLineNo =>\n          int(14)\n        }\n      }\n      protected $iLineNo =>\n      int(12)\n    }\n  }\n  protected $iLineNo =>\n  int(1)\n}\n```\n\n----------------------------------------\n\nTITLE: External Quiz Functions New Optional Field settings (Moodle 3.10.1)\nDESCRIPTION: The external functions `mod_quiz_external::get_attempt_data`, `mod_quiz_external::get_attempt_summary`, and `mod_quiz_external::get_attempt_review` now return a new additional optional field called `settings`. This field contains the question definition settings for displaying the question in an external system.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_13\n\nLANGUAGE: text\nCODE:\n```\n\"External functions mod_quiz_external::get_attempt_data, mod_quiz_external::get_attempt_summary\n  and mod_quiz_external::get_attempt_review now return a new additional optional field:\n   - settings: Containing the question definition settings for displaying the question in an external system.\"\n```\n\n----------------------------------------\n\nTITLE: quiz_attempt_overdue_handler Deleted, quiz_send_overdue_message Arguments Changed (Moodle 2.8)\nDESCRIPTION: The quiz no longer handles its own `\\mod_quiz\\event\\attempt_becameoverdue` event, and so the event handler function `quiz_attempt_overdue_handler` has been deleted.  Also, the internal function `quiz_send_overdue_message` has its arguments changed: it now takes the `$attemptobj` object, not separate `stdClass` objects.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_33\n\nLANGUAGE: text\nCODE:\n```\n\"The quiz no longer handles its own \\\\mod_quiz\\event\\attempt_becameoverdue event,\n  and so the event handler function quiz_attempt_overdue_handler has been deleted.\n  Also, the internal function quiz_send_overdue_message has add the arguments\n  changed. It now takes the $attemptobj object, not separate stdClass objects.\"\n```\n\n----------------------------------------\n\nTITLE: Adding groupid Parameter in choice_get_response_data - PHP\nDESCRIPTION: Similar to the previous update, the `choice_get_response_data` function now allows the inclusion of a `groupid` parameter for fetching results related to specific groups, enhancing flexibility in access to choice results.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_36\n\nLANGUAGE: php\nCODE:\n```\n// The function choice_get_response_data has a new parameter that allows specifying the group to get the results for.\n// The default behaviour hasn't changed if the parameter isn't used, the function will return the results for the active group.\n// For more information see [MDL-78449](https://tracker.moodle.org/browse/MDL-78449)\n```\n\n----------------------------------------\n\nTITLE: Enable HTTP Redirections with XML-RPC Client\nDESCRIPTION: The snippet configures the XML-RPC Client to handle HTTP redirections by setting specific CURL options. This allows the client to follow redirections automatically during requests, enhancing its flexibility in dealing with HTTP responses.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n$client->setUseCurl(\\PhpXmlRpc\\Client::USE_CURL_ALWAYS);\n$client->setCurlOptions([CURLOPT_FOLLOWLOCATION => true, CURLOPT_POSTREDIR => 3]);\n```\n\n----------------------------------------\n\nTITLE: Getting Row Cells HTML in Flexible Table\nDESCRIPTION: Method to get HTML for row cells in a flexible_table, extracted from get_row_html so it can be overridden individually.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_66\n\nLANGUAGE: php\nCODE:\n```\nflexible_table::get_row_cells_html()\n```\n\n----------------------------------------\n\nTITLE: Defining Assignment Attempt Limits in Moodle\nDESCRIPTION: Specifies the maxattempts setting which controls the maximum number of submission attempts allowed per student for an assignment instance.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: plaintext\nCODE:\n```\nmaxattempts - The maximum allowed number of attempts per student for this assign instance.\n```\n\n----------------------------------------\n\nTITLE: Overriding Methods for Displaying Statistics in Qbank - PHP\nDESCRIPTION: Developers are instructed to override the get_required_statistics_fields() method in their column classes to display statistics in the question bank, with a reference to accessing aggregate statistics through the qbank object. Direct access is available through a specific class for non-column classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/upgrade.txt#2025-04-21_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Enumerating Assignment Attempt Reopening Methods in Moodle\nDESCRIPTION: Defines the constants used for controlling how assignment attempts can be reopened. Options include no reopening (default), reopening until a passing grade is achieved, or manual reopening by the grader.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: plaintext\nCODE:\n```\nattemptreopenmethod - The way attempts can be reopened. One of:\n                            ASSIGN_ATTEMPT_REOPEN_METHOD_NONE - Attempts cannot be reopened (default)\n                            ASSIGN_ATTEMPT_REOPEN_METHOD_UNTIL_PASS - Attempts are reopened on grading until the gradebook\n                                                                      indicates this student has passed.\n                            ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL - Attempts are reopened on manually by the grader.\n```\n\n----------------------------------------\n\nTITLE: Optimizing Redis Session Cache - PHP\nDESCRIPTION: Improves the Redis session cache mechanism to consolidate two calls into a single call, enhancing performance and resource utilization within Moodle applications.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_6\n\n\n\n----------------------------------------\n\nTITLE: Setting Additional Classes for Action Menu\nDESCRIPTION: Method to add additional CSS classes to an action menu component.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_67\n\nLANGUAGE: php\nCODE:\n```\nset_additional_classes()\n```\n\n----------------------------------------\n\nTITLE: Configuring Shibboleth SP for Moodle Logout Support\nDESCRIPTION: This XML configuration snippet shows how to add a Notify element to the Shibboleth Service Provider configuration file (shibboleth2.xml) to enable Moodle logout support.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_3\n\nLANGUAGE: xml\nCODE:\n```\n<Notify\n    Channel=\"back\"\n    Location=\"https://#YOUR_MOODLE_HOSTNAME#/moodle/auth/shibboleth/logout.php\" />\n```\n\n----------------------------------------\n\nTITLE: Including Composer Autoloader in PHP Project\nDESCRIPTION: Code to include Composer's generated autoloader file to enable class autoloading.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nrequire 'vendor/autoload.php';\n```\n\n----------------------------------------\n\nTITLE: Email Authentication Config Storage Update\nDESCRIPTION: Configuration change in version 3.3 where the storage identifier in config_plugins table was modified from 'auth/email' to 'auth_email', along with migration to admin settings API.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/email/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n'auth/email' to 'auth_email'\n```\n\n----------------------------------------\n\nTITLE: External Function mod_quiz_external::get_user_best_grade New Field (Moodle 3.11)\nDESCRIPTION: The external function `mod_quiz_external::get_user_best_grade` now returns an additional optional field called `gradetopass`. This field represents the grade required to pass the quiz if one is set.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_12\n\nLANGUAGE: text\nCODE:\n```\n\"External function mod_quiz_external::get_user_best_grade now returns and additional optional field:\n  - gradetopass: The grade to pass the quiz (if set)\"\n```\n\n----------------------------------------\n\nTITLE: Styled Dropdown Dialog - PHP\nDESCRIPTION: Creates a dropdown dialog with additional styling classes for both the component and button.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$dialog = new core\\output\\local\\dropdown\\dialog(\n    'Open dialog',\n    'Dialog content',\n    [\n        'classes' => 'mb-4',\n        'buttonclasses' => 'btn btn-primary extraclass',\n    ]\n);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Implementing Custom With Methods in PHP\nDESCRIPTION: Example of implementing specific with* methods for better code readability and type safety.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/spatie/php-cloneable/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nclass Post\n{\n    // \n\n    public function withTitle(string $title): self\n    {\n        return $this->with(title: $title);\n    }\n\n    public function withAuthor(string $author): self\n    {\n        return $this->with(author: $author);\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Parsing Shibboleth Attributes for Moodle User Profile in PHP\nDESCRIPTION: This PHP code snippet demonstrates how to parse Shibboleth attributes to populate Moodle user profile fields. It specifically handles parsing an address attribute to extract institution, street, city, and country information.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n    // Set the zip code and the adress\n    if ($_SERVER[$this->config->field_map_address] != '')\n    {\n        // $address contains something like 'SWITCH$Limmatquai 138$CH-8021 Zurich'\n        // We want to split this up to get:\n        // institution, street, zipcode, city and country\n        $address = $_SERVER[$this->config->field_map_address];\n        list($institution, $street, $zip_city) = explode('$', $address);\n        preg_match('/ (.+)/', $zip_city, $regs);\n        $city = $regs[1];\n\n        preg_match('/(.+)-/',$zip_city, $regs);\n        $country = $regs[1];\n\n        $result[\"address\"] = $street;\n        $result[\"city\"] = $city;\n        $result[\"country\"] = $country;\n        $result[\"department\"] = $institution;\n        $result[\"description\"] = \"I am a Shibboleth user\";\n\n    }\n\n?>\n```\n\n----------------------------------------\n\nTITLE: URI Relativization Example in PHP\nDESCRIPTION: Demonstrates how to generate relative URI references from absolute URIs using the UriResolver::relativize() method. Shows various examples of converting absolute URLs to relative paths based on a base URI.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\n$base = new Uri('http://example.com/a/b/');\necho UriResolver::relativize($base, new Uri('http://example.com/a/b/c'));  // prints 'c'.\necho UriResolver::relativize($base, new Uri('http://example.com/a/x/y'));  // prints '../x/y'.\necho UriResolver::relativize($base, new Uri('http://example.com/a/b/?q')); // prints '?q'.\necho UriResolver::relativize($base, new Uri('http://example.org/a/b/'));   // prints '//example.org/a/b/'.\n```\n\n----------------------------------------\n\nTITLE: Defining Commands in Silly - PHP\nDESCRIPTION: Defines a command in a Silly application with optional arguments and flags. Parameters are used in the callback function where arguments can be injected and optionally modified by flags. Silly application setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$app->command('greet [name] [--yell]', function ($name, $yell) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Referencing New Hook for Activity Completion Update in Moodle 5.0\nDESCRIPTION: Mentions the addition of a new hook 'after_cm_completion_updated' that is triggered when an activity completion is updated. This hook allows for custom actions or processing after completion updates.\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- Add hook after_cm_completion_updated triggered when an activity completion is updated.\n```\n\n----------------------------------------\n\nTITLE: Out of Country Phone Number Formatting\nDESCRIPTION: Shows how to format phone numbers for dialing from different countries using formatOutOfCountryCallingNumber method\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Produces \"011 41 44 668 1800\", the number when it is dialled in the United States.\necho $phoneUtil->formatOutOfCountryCallingNumber($swissNumberProto, \"US\");\n\n// Produces \"00 41 44 668 18 00\", the number when it is dialled in Great Britain.\necho $phoneUtil->formatOutOfCountryCallingNumber($swissNumberProto, \"GB\");\n```\n\n----------------------------------------\n\nTITLE: Modifying Client Get Method Signature in Guzzle\nDESCRIPTION: This code illustrates a change in the signature of `Guzzle\\Http\\ClientInterface::get()`. The `$body` parameter has been replaced with an `$options` parameter, allowing for more flexible configuration. The resource, string, or EntityBody can still be passed in the options parameter to specify the download location.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n\"Changed `Guzzle\\\\Http\\\\ClientInterface::get($uri = null, $headers = null, $body = null)` to\\n  `Guzzle\\\\Http\\\\ClientInterface::get($uri = null, $headers = null, $options = array())`. You can still pass in a\\n  resource, string, or EntityBody into the $options parameter to specify the download location of the response.\"\n```\n\n----------------------------------------\n\nTITLE: Cache System Class Renames for Autoloading\nDESCRIPTION: Legacy cache system classes have been renamed to support autoloading while maintaining backward compatibility. All classes moved to core_cache namespace with more semantic naming.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_63\n\nLANGUAGE: PHP\nCODE:\n```\n\\cache_definition -> \\core_cache\\definition\n\\cache_request -> \\core_cache\\request_cache\n\\cache_session -> \\core_cache\\session_cache\n```\n\n----------------------------------------\n\nTITLE: Hugo Framework Directory Structure\nDESCRIPTION: Shows the directory structure for Hugo-related files including templates, distribution files, and SCSS sources.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/component-library-backend.md#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n hugo\n     archetypes\n     dist\n     scss\n    - site\n```\n\n----------------------------------------\n\nTITLE: Introducing Fixture Path Retrieval in PHP Unit Tests\nDESCRIPTION: A new static method get_fixture_path() has been added to the advanced_testcase class to enable unit tests to fetch the path to a fixture.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_22\n\nLANGUAGE: PHP\nCODE:\n```\n\\advanced_testcase::get_fixture_path()\n```\n\n----------------------------------------\n\nTITLE: Initially Deprecated Core Functions\nDESCRIPTION: List of initially deprecated core functions that are now emitting deprecation notices. These functions have been deprecated for a long time but previously did not emit any warnings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_29\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_core_subsystems()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_plugin_types()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_plugin_list()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_plugin_list_with_class()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_plugin_directory()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\normalize_component()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_component_directory()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\get_context_instance()\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Site Defaults in PHP\nDESCRIPTION: Defines custom default settings for a Moodle installation through local configuration file.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$defaults['moodle']['forcelogin'] = 1;  // new default for $CFG->forcelogin\n$defaults['scorm']['maxgrade'] = 20;    // default for get_config('scorm', 'maxgrade')\n$defaults['moodlecourse']['numsections'] = 11;\n$defaults['moodle']['hiddenuserfields'] = array('city', 'country');\n```\n\n----------------------------------------\n\nTITLE: Rendering Dividers in Select Menu Widget - PHP\nDESCRIPTION: Enhances the `\\core\\output\\select_menu` widget to support rendering dividers based on empty elements in the options array, improving UI organization.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_9\n\n\n\n----------------------------------------\n\nTITLE: Creating Accessible Image Maps in HTML\nDESCRIPTION: This example shows how to implement an accessible image map with proper alt text for area elements.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_1\n\nLANGUAGE: HTML\nCODE:\n```\n<map name=\"anatomymap\">  <area shape=\"rect\" coords=\"0,0,82,126\" href=\"skull.htm\" target=\"_blank\" alt=\"Human skull (opens in new window)\"/>  </map>\n```\n\n----------------------------------------\n\nTITLE: mod_quiz_links_to_other_attempts Array Values (Moodle 2.9)\nDESCRIPTION: The array values in `mod_quiz_links_to_other_attempts` may now be either a `moodle_url` or renderable (or null). Previously, they could only be a `moodle_url` or null.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_30\n\nLANGUAGE: text\nCODE:\n```\n\"The array values in mod_quiz_links_to_other_attempts may now be either a moodle_url,\n  or renderable (or null). Previously they could only be a moodle_url or null.\"\n```\n\n----------------------------------------\n\nTITLE: Adding `joinlist` Parameter to `get_filter_object()`\nDESCRIPTION: A new `joinlist` parameter has been added to `core\\output\\datafilter::get_filter_object()`.  This parameter takes an array of `datafilter::JOINTYPE_*` constants to define which types of join the filter supports. \nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_21\n\n\n\n----------------------------------------\n\nTITLE: Asynchronous Mimetype Upgrade Task in PHP\nDESCRIPTION: Added a new ad-hoc task to upgrade the mimetype of files asynchronously during core upgrades, along with a utility function to create the task.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\ncore_files\\task\\asynchronous_mimetype_upgrade_task\n```\n\nLANGUAGE: PHP\nCODE:\n```\nupgrade_create_async_mimetype_upgrade_task\n```\n\n----------------------------------------\n\nTITLE: Filter Object Constructor Callback\nDESCRIPTION: This snippet refers to changes in Moodle 3.6 related to the `filter_phrases()` helper method. It describes how to use a callback within the `filterobject` constructor to improve performance by computing the replacement HTML only when the phrase is used. The example references a commit in the Moodle GitHub repository to illustrate the usage.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: Plain Text\nCODE:\n```\nhttps://github.com/moodle/moodle/commit/5a8c44d000ecc5669db26aefebe447f688e8f2ce\n```\n\n----------------------------------------\n\nTITLE: Installing Required Polyfill Packages for Moodle\nDESCRIPTION: Installs necessary JavaScript polyfill packages using npm with the --no-save flag to avoid modifying package.json.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/polyfills/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install --no-save mdn-polyfills url-polyfill regenerator-runtime core-js-bundle\n```\n\n----------------------------------------\n\nTITLE: PHPUnit Test Method Example\nDESCRIPTION: Example of PHPUnit test assertion syntax for Moodle 3.10, showing the updated string pattern matching format.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_72\n\nLANGUAGE: php\nCODE:\n```\nI should see \"##tomorrow noon##%A, %d %B %Y, %I:%M %p##\"\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Charset Encoding for XML-RPC Client in PHP\nDESCRIPTION: Configures the character encoding for outgoing XML-RPC requests. This allows specifying charsets other than UTF-8, ISO-8859-1, or ASCII when mbstring is available.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n$client->request_charset_encoding = 'custom_charset';\n```\n\n----------------------------------------\n\nTITLE: Updating `grade_item::set_locked()` Method\nDESCRIPTION: The `grade_item::set_locked()` method now returns `true` if the grade item needs to be updated.  The method schedules the locking of the grade item once recalculations are completed.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_23\n\n\n\n----------------------------------------\n\nTITLE: CSS Table Styling Update\nDESCRIPTION: This snippet demonstrates how to update CSS to use the `nth-of-type` selector instead of the deprecated `.r0` and `.r1` classes for styling table rows. This change is necessary for better support of JavaScript-altered tables and future compatibility. The update replaces the old class-based styling with more modern CSS selectors, specifically targeting even and odd rows.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: CSS\nCODE:\n```\ntable.generaltable .r0 {background-color: #F0F0F0;}\ntable.generaltable .r1 {background-color: #F0F0F0;}\n```\n\nLANGUAGE: CSS\nCODE:\n```\ntable.generaltable > tbody > tr:nth-of-type(even) {background-color: #F0F0F0;}\ntable.generaltable > tbody > tr:nth-of-type(odd) {background-color: #F0F0F0;}\n```\n\n----------------------------------------\n\nTITLE: Defining Default Invalid Image Alt Attribute - PHP\nDESCRIPTION: This snippet defines a default alt attribute for invalid images in Moodle. It specifies the type as a string with a default value of 'Invalid image'. This is particularly useful for enhancing accessibility for users who rely on screen readers.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Attr.DefaultInvalidImageAlt.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$Attr.DefaultInvalidImageAlt\nTYPE: string\nDEFAULT: 'Invalid image'\n--DESCRIPTION--\nThis is the content of the alt tag of an invalid image if the user had not\npreviously specified an alt attribute.  It has no effect when the image is\nvalid but there was no alt attribute present.\n```\n\n----------------------------------------\n\nTITLE: Installing Guzzle with Composer\nDESCRIPTION: This command demonstrates how to install the Guzzle PHP HTTP client using Composer, a dependency management tool for PHP. Running this command will download and install the Guzzle library and its dependencies into your project.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require guzzlehttp/guzzle\n```\n\n----------------------------------------\n\nTITLE: Behat Date Selection Examples\nDESCRIPTION: Examples of using Behat for date and datetime form field selection using natural language syntax\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_71\n\nLANGUAGE: PHP\nCODE:\n```\nI set the field \"<field_string>\" to \"##15 March 2021##\"\nI set the field \"<field_string>\" to \"##first day of January last year##\"\nI set the field \"<field_string>\" to \"##15 March 2021 08:15##\"\nI set the field \"<field_string>\" to \"##first day of January last year noon##\"\n```\n\n----------------------------------------\n\nTITLE: DefaultRevalidation Constructor Change in Guzzle\nDESCRIPTION: The constructor for `DefaultRevalidation` has changed, affecting the dependencies it accepts. The old constructor took `CacheKeyProviderInterface`, `CacheStorageInterface`, and `CachePlugin`, while the new one takes `CacheStorageInterface` and `CanCacheStrategyInterface`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_21\n\nLANGUAGE: PHP\nCODE:\n```\n\"`DefaultRevalidation::__construct(CacheKeyProviderInterface $cacheKey, CacheStorageInterface $cache, CachePlugin\\n  $plugin)` has changed to `DefaultRevalidation::__construct(CacheStorageInterface $cache,\\n  CanCacheStrategyInterface $canCache = null)`\"\n```\n\n----------------------------------------\n\nTITLE: Resolving Callables from a Container - PHP\nDESCRIPTION: Demonstrates how Invoker can be configured with a DI container to resolve invokable class and class methods. This feature can be used for a framework's dispatcher. PSR-11 compliant container setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n$invoker = new Invoker\\Invoker(null, $container);\n// Now 'MyHandler' is resolved using the container!\n$invoker->call('MyHandler');\n```\n\nLANGUAGE: php\nCODE:\n```\n$invoker = new Invoker\\Invoker(null, $container);\n// Now 'WelcomeController' is resolved using the container!\n$invoker->call(['WelcomeController', 'home']);\n// Alternatively we can use the Class::method syntax\n$invoker->call('WelcomeController::home');\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoded SVG Circle Pattern\nDESCRIPTION: Base64 encoded SVG image data URI defining a 240x240 pattern of circles. The pattern consists of a colored background with overlaid circles of varying opacity and stroke widths positioned in a grid layout.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-7.txt#2025-04-21_snippet_0\n\nLANGUAGE: base64\nCODE:\n```\ndata:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMjQwIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJyZ2IoMjUzLCAyMDMsIDExMCkiIC8+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDk4O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSIwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA5ODtzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMCIgY3k9IjI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4wOTg7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4wOTg7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wMjtzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iNDAiIGN5PSIyNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDI7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjgwIiBjeT0iMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wMzczMzMzMzMzMzMzMzM7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjgwIiBjeT0iMjQwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGRkIiBzdHlsZT0ib3BhY2l0eTowLjAzNzMzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4xMTUzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMjQwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjExNTMzMzMzMzMzMzMzO3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIxNjAiIGN5PSIwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGRkIiBzdHlsZT0ib3BhY2l0eTowLjEwNjY2NjY2NjY2NjY3O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIxNjAiIGN5PSIyNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTA2NjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDQ2O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDQ2O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIwIiBjeT0iNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTI0O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4xMjQ7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjQwIiBjeT0iNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMTMyNjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjgwIiBjeT0iNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTA2NjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjQwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjAyODY2NjY2NjY2NjY2NztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iNDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDg5MzMzMzMzMzMzMzMzO3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wODkzMzMzMzMzMzMzMzM7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjAiIGN5PSI4MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4wNDY7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjgwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA0NjtzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iNDAiIGN5PSI4MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wODkzMzMzMzMzMzMzMzM7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDI7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjgwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjAyODY2NjY2NjY2NjY2NztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iODAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDYzMzMzMzMzMzMzMzMzO3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI4MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4wOTg7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjAiIGN5PSIxMjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDU0NjY2NjY2NjY2NjY3O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSIxMjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDU0NjY2NjY2NjY2NjY3O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSI0MCIgY3k9IjEyMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4xMTUzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iODAiIGN5PSIxMjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDcyO3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIxMjAiIGN5PSIxMjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTQxMzMzMzMzMzMzMzM7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjE2MCIgY3k9IjEyMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4wMjg2NjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjEyMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyMiIgc3R5bGU9Im9wYWNpdHk6MC4xMTUzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMCIgY3k9IjE2MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wNTQ2NjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjE2MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4wNTQ2NjY2NjY2NjY2Njc7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjQwIiBjeT0iMTYwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA2MzMzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iODAiIGN5PSIxNjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDM3MzMzMzMzMzMzMzMzO3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIxMjAiIGN5PSIxNjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDgwNjY2NjY2NjY2NjY3O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIxNjAiIGN5PSIxNjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiMyMjIiIHN0eWxlPSJvcGFjaXR5OjAuMDk4O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIxNjAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMDI7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjAiIGN5PSIyMDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTI0O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSIyMDAiIHI9IjM1IiBmaWxsPSJub25lIiBzdHJva2U9IiNkZGQiIHN0eWxlPSJvcGFjaXR5OjAuMTI0O3N0cm9rZS13aWR0aDoxMHB4OyIgLz48Y2lyY2xlIGN4PSI0MCIgY3k9IjIwMCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3R5bGU9Im9wYWNpdHk6MC4xMjQ7c3Ryb2tlLXdpZHRoOjEwcHg7IiAvPjxjaXJjbGUgY3g9IjgwIiBjeT0iMjAwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA2MzMzMzMzMzMzMzMzMztzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMjAwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA0NjtzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMjAwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjIyIiBzdHlsZT0ib3BhY2l0eTowLjA5ODtzdHJva2Utd2lkdGg6MTBweDsiIC8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSIzNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGRkIiBzdHlsZT0ib3BhY2l0eTowLjA1NDY2NjY2NjY2NjY2NztzdHJva2Utd2lkdGg6MTBweDsiIC8+PC9zdmc+\n```\n\n----------------------------------------\n\nTITLE: Icon Rendering Output Example\nDESCRIPTION: HTML output showing how the pix helper renders as a Font Awesome icon with accessibility attributes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/iconsizes.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<i class=\"icon fa fa-arrow-up fa-fw \" title=\"Up\" aria-label=\"Up\"></i>\n```\n\n----------------------------------------\n\nTITLE: Migrating to Guzzle\\Common\\Collection\nDESCRIPTION: Illustrates how to migrate from using `Guzzle\\Service\\Inspector::fromConfig` to `Guzzle\\Common\\Collection::fromConfig` for configuration management in Guzzle clients. This involves replacing the Inspector class with the Collection class for handling configuration settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_13\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse Guzzle\\Common\\Collection;\n\nclass YourClient extends \\Guzzle\\Service\\Client\n{\n    public static function factory($config = array())\n    {\n        $default = array();\n        $required = array('base_url', 'username', 'api_key');\n        $config = Collection::fromConfig($config, $default, $required);\n\n        $client = new self(\n            $config->get('base_url'),\n            $config->get('username'),\n            $config->get('api_key')\n        );\n        $client->setConfig($config);\n\n        $client->setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . 'client.json'));\n\n        return $client;\n    }\n?>\n```\n\n----------------------------------------\n\nTITLE: Class Renaming Table for Core Cache Subsystem in Moodle 4.5\nDESCRIPTION: A markdown table showing the old class names and their corresponding new class names in the core_cache subsystem. The new classes support autoloading and existing classes are currently unaffected.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Old class name                     | New class name                                     |\n| ---                                | ---                                                |\n| `\\cache_definition`                | `\\core_cache\\definition`                           |\n| `\\cache_request`                   | `\\core_cache\\request_cache`                        |\n| `\\cache_session`                   | `\\core_cache\\session_cache`                        |\n| `\\cache_cached_object`             | `\\core_cache\\cached_object`                        |\n| `\\cache_config`                    | `\\core_cache\\config`                               |\n| `\\cache_config_writer`             | `\\core_cache\\config_writer`                        |\n| `\\cache_config_disabled`           | `\\core_cache\\disabled_config`                      |\n| `\\cache_disabled`                  | `\\core_cache\\disabled_cache`                       |\n| `\\config_writer`                   | `\\core_cache\\config_writer`                        |\n| `\\cache_data_source`               | `\\core_cache\\data_source_interface`                |\n| `\\cache_data_source_versionable`   | `\\core_cache\\versionable_data_source_interface`    |\n| `\\cache_exception`                 | `\\core_cache\\exception/cache_exception`            |\n| `\\cache_factory`                   | `\\core_cache\\factory`                               |\n| `\\cache_factory_disabled`          | `\\core_cache\\disabled_factory`                     |\n| `\\cache_helper`                    | `\\core_cache\\helper`                               |\n| `\\cache_is_key_aware`              | `\\core_cache\\key_aware_cache_interface`            |\n| `\\cache_is_lockable`               | `\\core_cache\\lockable_cache_interface`             |\n| `\\cache_is_searchable`             | `\\core_cache\\searchable_cache_interface`           |\n| `\\cache_is_configurable`           | `\\core_cache\\configurable_cache_interface`         |\n| `\\cache_loader`                    | `\\core_cache\\loader_interface`                     |\n| `\\cache_loader_with_locking`       | `\\core_cache\\loader_with_locking_interface`        |\n| `\\cache_lock_interface`            | `\\core_cache\\cache_lock_interface`                 |\n| `\\cache_store`                     | `\\core_cache\\store`                                |\n| `\\cache_store_interface`           | `\\core_cache\\store_interface`                      |\n| `\\cache_ttl_wrapper`               | `\\core_cache\\ttl_wrapper`                          |\n| `\\cacheable_object`                | `\\core_cache\\cacheable_object_interface`           |\n| `\\cacheable_object_array`          | `\\core_cache\\cacheable_object_array`               |\n| `\\cache_definition_mappings_form`  | `\\core_cache\\form/cache_definition_mappings_form`  |\n| `\\cache_definition_sharing_form`   | `\\core_cache\\form/cache_definition_sharing_form`   |\n| `\\cache_lock_form`                 | `\\core_cache\\form/cache_lock_form`                 |\n| `\\cache_mode_mappings_form`        | `\\core_cache\\form/cache_mode_mappings_form`        |\n```\n\n----------------------------------------\n\nTITLE: Emoji Picker HTML Structure\nDESCRIPTION: HTML layout structure for the emoji picker implementation showing the container elements and result display area.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/emojipicker.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"row\">\n    <div data-region=\"emojipickertest\" class=\"col-md-9\">\n    </div>\n<div class=\"col-md-3\">\n  <h4>Emoji picker result:<h4>\n  <div data-region=\"emojivalue\" style=\"font-size: 3rem\"></div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Querying Courses with Action Events in PHP\nDESCRIPTION: In Moodle 4.0, the timeline block's course view was updated to only list courses with at least one action event within the chosen filter. It now uses \\core_course\\external\\get_enrolled_courses_with_action_events_by_timeline_classification instead of core_course_external::get_enrolled_courses_by_timeline_classification.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/timeline/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core_course\\external\\get_enrolled_courses_with_action_events_by_timeline_classification\n```\n\n----------------------------------------\n\nTITLE: Export Data Request Download Link Addition - PHP\nDESCRIPTION: The tool_dataprivacy\\external\\data_request_exporter class now includes an additional optional field 'downloadlink' that provides access to a zip file containing export data request results.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/dataprivacy/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ntool_dataprivacy\\external\\data_request_exporter\n```\n\n----------------------------------------\n\nTITLE: Using the Cloneable With Method in PHP\nDESCRIPTION: Demonstration of how to use the with() method to clone and modify readonly properties using named arguments.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/spatie/php-cloneable/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$postA = new Post(title: 'a', author: 'Brent');\n\n$postB = $postA->with(title: 'b');\n$postC = $postA->with(title: 'c', author: 'Freek');\n```\n\n----------------------------------------\n\nTITLE: Deprecated Methods in Moodle 4.4\nDESCRIPTION: List of deprecated methods in Moodle 4.4, including reset_password_and_mail, plagiarism plugin methods, and rc4 encryption functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_60\n\nLANGUAGE: PHP\nCODE:\n```\nreset_password_and_mail()\nplagiarism_plugin::get_configs()\nplagiarism_plugin::get_file_results()\nplagiarism_plugin::update_status()\nplagiarism_get_file_results()\nplagiarism_update_status()\nrc4encrypt()\nrc4decrypt()\nendecrypt()\nprint_grade_menu()\nget_core_subsystems()\nget_plugin_types()\nget_plugin_list()\nget_plugin_list_with_class()\nget_plugin_directory()\nnormalize_component()\nget_component_directory()\nget_context_instance()\n```\n\n----------------------------------------\n\nTITLE: Question Category and Management Class Migrations\nDESCRIPTION: Several question-related classes have been moved to new namespaces within different Moodle components\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n// Moved classes\n- question_fix_top_names() => qbank_managecategories\\helper::question_fix_top_names()\n- class category_form => qbank_managecategories\\form\\category_form\n```\n\n----------------------------------------\n\nTITLE: Updating Listeners in Guzzle from 3.x to 4.x\nDESCRIPTION: This code demonstrates how to change the listener addition method from Guzzle 3.x to 4.x. It shifts from using `addListener` in `EventDispatcher` to the `on` method in the `Emitter` interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n// 3.x\n$request->getEventDispatcher()->addListener('foo', function (Event $event) { /* ... */ } );\n// 4.x\n$request->getEmitter()->on('foo', function (Event $event, $name) { /* ... */ } );\n```\n\n----------------------------------------\n\nTITLE: Updating Git Submodules for Mustache.php\nDESCRIPTION: Command to initialize and update Git submodules before contributing to the Mustache.php project.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/CONTRIBUTING.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ngit submodule update --init\n```\n\n----------------------------------------\n\nTITLE: Function Deprecation List for Forum Module (PHP)\nDESCRIPTION: List of deprecated forum functions that have been removed or marked for removal across multiple Moodle versions.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/forum/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nforum_make_mail_text\nforum_make_mail_html\nforum_make_mail_post\nforum_cron_minimise_user_record\nforum_cron\nforum_print_discussion\nforum_post_nesting_cache\nforum_should_start_post_nesting\nforum_should_end_post_nesting\nforum_print_post_start\nforum_print_post_end\nforum_print_post\nforum_print_posts_flat\nforum_print_posts_threaded\nforum_print_posts_nested\nforum_print_latest_discussions\nforum_get_user_grades\n```\n\n----------------------------------------\n\nTITLE: Setting Request Options on RequestFactory in Guzzle\nDESCRIPTION: This code shows the addition of an `$options` argument to the end of `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface::createRequest()` and the addition of the `applyOptions()` method to `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface`. These changes enhance the ability to configure requests when using a request factory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added an `$options` argument to the end of `Guzzle\\\\Http\\\\Message\\\\Request\\\\RequestFactoryInterface::createRequest()`\\n* Added an `applyOptions()` method to `Guzzle\\\\Http\\\\Message\\\\Request\\\\RequestFactoryInterface`\"\n```\n\n----------------------------------------\n\nTITLE: Adding Custom Field Exporter in PHP\nDESCRIPTION: Added a new custom field exporter to export custom field data in the core_customfield module.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_customfield\\external\\field_data_exporter\n```\n\n----------------------------------------\n\nTITLE: Preview Links/Buttons/URLs New Optional Argument (Moodle 3.1)\nDESCRIPTION: Several methods relating to preview links/buttons/URLs have a new optional argument to make the preview be of a particular variant.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_26\n\nLANGUAGE: text\nCODE:\n```\n\"Several methods relating to preview links/buttons/urls have a new optional\n  argument to make the preview be of a particular variant.\"\n```\n\n----------------------------------------\n\nTITLE: Updating Group Selector Constructor in PHP\nDESCRIPTION: The $course parameter in the constructor of the \\core_course\\output\\actionbar\\group_selector class has been deprecated and is no longer used.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// Old code (deprecated)\n$selector = new \\core_course\\output\\actionbar\\group_selector($course);\n\n// New code\n$selector = new \\core_course\\output\\actionbar\\group_selector();\n```\n\n----------------------------------------\n\nTITLE: Marked Request Methods as Deprecated in Guzzle\nDESCRIPTION: This code snippet highlights the deprecation of several methods in `Guzzle\\Http\\Message\\Request`. It includes `isResponseBodyRepeatable()`, `canCache()`, `setIsRedirect()`, and `isRedirect()`, along with their recommended alternatives.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Http\\\\Message\\\\Request::isResponseBodyRepeatable()` as deprecated. Use\\n      `$request->getResponseBody()->isRepeatable()` instead.\\n* Marked `Guzzle\\\\Http\\\\Message\\\\Request::canCache()` as deprecated. Use\\n  `Guzzle\\\\Plugin\\\\Cache\\\\DefaultCanCacheStrategy->canCacheRequest()` instead.\\n* Marked `Guzzle\\\\Http\\\\Message\\\\Request::canCache()` as deprecated. Use\\n  `Guzzle\\\\Plugin\\\\Cache\\\\DefaultCanCacheStrategy->canCacheRequest()` instead.\\n* Marked `Guzzle\\\\Http\\\\Message\\\\Request::setIsRedirect()` as deprecated. Use the HistoryPlugin instead.\\n* Marked `Guzzle\\\\Http\\\\Message\\\\Request::isRedirect()` as deprecated. Use the HistoryPlugin instead.\"\n```\n\n----------------------------------------\n\nTITLE: Dependency Injection with PHP-DI - PHP\nDESCRIPTION: Illustrates how PHP-DI can invoke callables and resolve dependencies by using type-hints to get objects from the DI container. PHP-DI container setup with dependency configuration is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$container->call(function (Logger $logger, EntityManager $em) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Composer Installation for PHP CSS Parser\nDESCRIPTION: Command to install the PHP CSS Parser library using Composer package manager\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require sabberworm/php-css-parser\n```\n\n----------------------------------------\n\nTITLE: Synchronous Wait on Fulfilled Promise in PHP\nDESCRIPTION: This example shows that calling `wait` on a promise that has already been fulfilled will not trigger the wait function. Instead, it will simply return the previously resolved value. The `die` statement within the promise constructor will not be executed because the promise is resolved before `wait` is called.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n\"$promise = new Promise(function () { die('this is not called!'); });\n$promise->resolve('foo');\necho $promise->wait(); // outputs \\\"foo\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Navigation Block Content (Moodle 2.9)\nDESCRIPTION: The contents of the navigation block now includes more than just `quiz_nav_question_button`-s. It can also contain `quiz_nav_section_heading`-s. Overridden `mod_quiz_renderer::navigation_panel` methods may need to account for this change, which also has implications for the Edit quiz page.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_31\n\nLANGUAGE: text\nCODE:\n```\n\"The contents of the navigation block is now not just quiz_nav_question_button-s.\n  It can also contain quiz_nav_section_heading-s. If you have overridden\n  mod_quiz_renderer::navigation_panel, then you may need to account for this.\n  This change also has implications for the Edit quiz page.\"\n```\n\n----------------------------------------\n\nTITLE: Core.EscapeInvalidTags Configuration Property Definition\nDESCRIPTION: Configuration property that determines how invalid HTML tags are handled. When set to true, invalid tags are preserved as plain text in the document. When false, invalid tags are removed entirely from the output.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.EscapeInvalidTags.txt#2025-04-21_snippet_0\n\nLANGUAGE: properties\nCODE:\n```\nCore.EscapeInvalidTags\nTYPE: bool\nDEFAULT: false\n```\n\n----------------------------------------\n\nTITLE: Removal of mnetservice_enrol Plugin - PHP\nDESCRIPTION: The `mnetservice_enrol` plugin has been fully removed from the core of Moodle. This simplification helps in maintaining cleaner codebases and focuses efforts on actively supported functionalities.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_26\n\nLANGUAGE: php\nCODE:\n```\n// Removed mnetservice_enrol plugin from core\n// For more information see [MDL-84311](https://tracker.moodle.org/browse/MDL-84311)\n```\n\n----------------------------------------\n\nTITLE: Fixing StreamWrapper::stream_stat() Return\nDESCRIPTION: This snippet addresses a fix in version 2.6.3 where `StreamWrapper::stream_stat()` would return `false` if the inner stream's size was `null`. This ensures proper error handling when determining the size of streams.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/CHANGELOG.md#2025-04-21_snippet_2\n\n\n\n----------------------------------------\n\nTITLE: Deprecation Notices for Removed Methods - PHP\nDESCRIPTION: This snippet highlights methods that have been deprecated and removed, informing users that these functions will no longer be available in future releases. Understanding these changes is crucial for maintaining and updating Moodle code.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_51\n\nLANGUAGE: php\nCODE:\n```\n  * The following methods, deprecated since 3.10, have been removed and can no longer be used:\n  - `\\core\\output\\mustache_helper_collection::strip_blacklisted_helpers`\n  - `\\core_form\\filetypes_util::is_whitelisted`\n  - `\\core_form\\filetypes_util::get_not_whitelisted`\n```\n\n----------------------------------------\n\nTITLE: Adding File Clearing Function in PHP for Moodle 5.0\nDESCRIPTION: A new function file_clear_draft_area() has been added to delete files in a draft area. This addition is part of the Moodle 5.0 upgrade for the core_files subsystem.\nSOURCE: https://github.com/moodle/moodle/blob/main/files/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nfile_clear_draft_area()\n```\n\n----------------------------------------\n\nTITLE: Adding Extra Classes to Activity Icon in PHP\nDESCRIPTION: Shows how to add extra CSS classes to an activity icon container using the set_extra_classes method.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n\n$icon = activity_icon::from_modname('quiz')\n    ->set_extra_classes(['my-extra-class']);\n\necho $renderer->render($icon);\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.SafeEmbed Configuration in Moodle\nDESCRIPTION: This configuration defines the HTML.SafeEmbed setting, which determines whether to allow embed tags with additional security features. It's a boolean setting, introduced in Moodle version 3.1.1, with a default value of false.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.SafeEmbed.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.SafeEmbed\nTYPE: bool\nVERSION: 3.1.1\nDEFAULT: false\n--DESCRIPTION--\n<p>\n    Whether or not to permit embed tags in documents, with a number of extra\n    security features added to prevent script execution. This is similar to\n    what websites like MySpace do to embed tags. Embed is a proprietary\n    element and will cause your website to stop validating; you should\n    see if you can use %Output.FlashCompat with %HTML.SafeObject instead\n    first.</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Loading Test Fixtures in PHP Unit Tests\nDESCRIPTION: A helper method to load fixture data from a component's tests/fixtures folder for use in unit tests. The method takes the component name and fixture identifier as parameters.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_52\n\nLANGUAGE: php\nCODE:\n```\nadvanced_testcase::load_fixture(string $component, string $fixture): void;\n```\n\n----------------------------------------\n\nTITLE: Quiz_cron() Removed (Moodle 3.7)\nDESCRIPTION: The `Quiz_cron()` function has been removed. Sub-plugins should now implement scheduled tasks. However, legacy cron implementations in sub-plugins are still supported.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_15\n\nLANGUAGE: text\nCODE:\n```\n\"Quiz_cron() has been removed. Sub-plugins should implemented scheduled tasks, however legacy cron in subplugins are\n  supported.\"\n```\n\n----------------------------------------\n\nTITLE: Defining Multiple Routes with Same Handler\nDESCRIPTION: Shows how to define multiple routes with different HTTP methods that use the same handler function, demonstrating the array syntax for method specification.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// These two calls\n$r->addRoute('GET', '/test', 'handler');\n$r->addRoute('POST', '/test', 'handler');\n// Are equivalent to this one call\n$r->addRoute(['GET', 'POST'], '/test', 'handler');\n```\n\n----------------------------------------\n\nTITLE: Appending Streams with AppendStream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to use the AppendStream class from GuzzleHttp\\Psr7 to concatenate multiple streams into a single readable stream.  It creates two streams, appends them using AppendStream, and then adds another stream. The final output will be the contents of all three streams combined.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$a = Psr7\\Utils::streamFor('abc, ');\n$b = Psr7\\Utils::streamFor('123.');\n$composed = new Psr7\\AppendStream([$a, $b]);\n\n$composed->addStream(Psr7\\Utils::streamFor(' Above all listen to me'));\n\necho $composed; // abc, 123. Above all listen to me.\n```\n```\n\n----------------------------------------\n\nTITLE: Using get_user_list_sql Function in PHP\nDESCRIPTION: Example of using the new get_user_list_sql function in info_module/info_section objects to get SQL code for filtering user lists based on access permissions.\nSOURCE: https://github.com/moodle/moodle/blob/main/availability/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$info = new \\core_availability\\info_module($cm);\n$sql = $info->get_user_list_sql($onlyactive, $fields, $params);\n```\n\n----------------------------------------\n\nTITLE: Concatenating Polyfill Files into a Single Bundle\nDESCRIPTION: Series of shell commands to navigate into each package directory and concatenate their polyfill files into a single file at lib/polyfills/polyfill.js. Includes a sed command to remove source map reference.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/polyfills/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncd node_modules/mdn-polyfills\ncat CustomEvent.* Element.* Function.* HTMLCanvasElement.* MouseEvent.* Node.prototype.* NodeList.* > ../../lib/polyfills/polyfill.js\n\ncd ../url-polyfill/\ncat url-polyfill.min.js >> ../../lib/polyfills/polyfill.js\n\ncd ../regenerator-runtime\ncat runtime.js >> ../../lib/polyfills/polyfill.js\n\ncd ../core-js-bundle\ncat minified.js >> ../../lib/polyfills/polyfill.js\nsed -i '/\\/\\/\\# sourceMappingURL=minified.js.map/d' ../../lib/polyfills/polyfill.js\n```\n\n----------------------------------------\n\nTITLE: Using core_user::get_dummy_fullname Method in PHP\nDESCRIPTION: A new method for returning a dummy user fullname comprised of configured name fields only. Introduced in Moodle 5.1dev.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_user::get_dummy_fullname(...)\n```\n\n----------------------------------------\n\nTITLE: Installing GeoIP2 Dependencies with Composer\nDESCRIPTION: Command to install the GeoIP2 PHP package and its dependencies using Composer. This adds the geoip2/geoip2 package version 2.0 or higher to the project.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\nphp composer.phar require geoip2/geoip2:~2.0\n```\n\n----------------------------------------\n\nTITLE: Number Provider Class Implementation in PHP\nDESCRIPTION: New class for calculating the number of activities of a specific type within a course.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/field/number/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\\customfield_number\\local\\numberproviders\\nofactivities\n```\n\n----------------------------------------\n\nTITLE: Customizing Activity Icon Colors in SCSS\nDESCRIPTION: Shows how to customize activity icon colors using SCSS variables in the Boost theme's 'Raw initial SCSS' feature.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_6\n\nLANGUAGE: scss\nCODE:\n```\n$activity-icon-administration-bg:     #da58ef !default;\n$activity-icon-assessment-bg:         #f90086 !default;\n$activity-icon-collaboration-bg:      #5b40ff !default;\n$activity-icon-communication-bg:      #eb6200 !default;\n$activity-icon-content-bg:            #0099ad !default;\n$activity-icon-interactivecontent-bg: #8d3d1b !default;\n```\n\n----------------------------------------\n\nTITLE: Synchronous Wait without Unwrapping in PHP\nDESCRIPTION: This code demonstrates how to call `wait` without unwrapping the promise. When `wait(false)` is called, the promise is resolved but the state is not unwrapped and no value is returned.  This is useful for ensuring that the promise has completed without handling the value or exception directly.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n\"$promise = new Promise();\n$promise->reject('foo');\n// This will not throw an exception. It simply ensures the promise has\n// been resolved.\n$promise->wait(false);\"\n```\n\n----------------------------------------\n\nTITLE: Installing PhpRedis Extension via PECL\nDESCRIPTION: Command to install the PhpRedis extension, which is a prerequisite for the Redis cache store plugin in Moodle. This extension enables PHP to interact with Redis servers.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/stores/redis/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\npecl install redis\n```\n\n----------------------------------------\n\nTITLE: Defining Moodle Theme Layout in Markdown\nDESCRIPTION: This snippet demonstrates the Markdown structure for documenting Moodle theme layouts. It includes YAML front matter for metadata and sections covering high-level templates, accessibility considerations, and responsiveness guidelines.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/layout.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n---\nlayout: docs\ntitle: \"Layout\"\ndescription: \"Moodle page layouts for themes\"\ndate: 2019-12-10T13:53:41+01:00\ndraft: false\n---\n\n## High level templates\n\nTheme layouts are the highest level templates found in Moodle. They construct the Moodle Page users see when interacting with Moodle.\n\nLayout files define the location of page elements like the primary and secondary navigation, the main content, Moodle blocks and the footer.\n\nTheme layouts are defined in a themes config.php and themes can serve different layout files depending on the page type, example layouts are\n\n* frontpage\n* course page\n* activity page\n* secure page\n* login page\n\n## Accessibility considerations\n\nWhen interacting with a theme the layout needs to be constructed with a logical DOM order: First render the primary navigation, then the secondary navigation then the page content, then the footer.\n\n## Responsiveness\n\nUse [Bootstrap grids]({{< docsref \"/layout/grid\" >}}) to create a responsive design. Make sure the primary and secondary navigation can be found easily on a mobile device.\n\nAlways try themes on all different theme layouts and ensure font-sizes, paddings and margins are used correctly. Especially for frequently used pages like courses and activities.\n```\n\n----------------------------------------\n\nTITLE: URL Matching Behat Step Example\nDESCRIPTION: Example of using the new Behat step to verify URL patterns during testing. This step allows checking if the current URL matches an expected pattern using regular expressions.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/behat/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: gherkin\nCODE:\n```\nAnd the url should match \"/mod/forum/view\\.php\\?id=[0-9]+\"\n```\n\n----------------------------------------\n\nTITLE: Fix Rounding Error in NumberFormat::NUMBER_PERCENTAGE\nDESCRIPTION: This snippet describes a fix for a rounding error in the NumberFormat::NUMBER_PERCENTAGE and NumberFormat::NUMBER_PERCENTAGE_00 formats within PhpSpreadsheet. The fix ensures accurate rounding of percentage values, preventing discrepancies in displayed numbers. This enhancement improves the accuracy and reliability of number formatting in PhpSpreadsheet.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix rounding error in NumberFormat::NUMBER_PERCENTAGE, NumberFormat::NUMBER_PERCENTAGE_00. [PR #2555](https://github.com/PHPOffice/PhpSpreadsheet/pull/2555)\"\n```\n\n----------------------------------------\n\nTITLE: Dependency Injection with AngularJS - JavaScript\nDESCRIPTION: Demonstrates dependency injection in an AngularJS controller where dependencies are specified in an array along with the controller function. AngularJS framework setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_3\n\nLANGUAGE: js\nCODE:\n```\nangular.controller('MyController', ['dep1', 'dep2', function(dep1, dep2) {\n    // ...\n}]);\n```\n\n----------------------------------------\n\nTITLE: Deprecation of book_get_nav_classes in mod_book - PHP\nDESCRIPTION: The `book_get_nav_classes` method has been deprecated, meaning developers should prepare for the eventual removal of this method and transition their code accordingly.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_34\n\nLANGUAGE: php\nCODE:\n```\n// The method book_get_nav_classes has been finally deprecated and will now throw an exception if called.\n// For more information see [MDL-81328](https://tracker.moodle.org/browse/MDL-81328)\n```\n\n----------------------------------------\n\nTITLE: Using Dependency Injection in Silex - PHP\nDESCRIPTION: Demonstrates type-hinting in a Silex application to inject the application instance into the callback function. Silex framework setup is required, and injection only works with specific classes like Silex\\Application.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$app->get('/hello/{name}', function (Silex\\Application $app, $name) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Updated JavaScript Component Selectors\nDESCRIPTION: Example of updated element ID selectors for Reactive component initialization, showing the change from using 'id' to using '#id' format.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Old format\ndocument.getElementById('id')\n\n// New format\ndocument.querySelector('#id')\n```\n\n----------------------------------------\n\nTITLE: Markdown Release Notes for Tool Mobile 5.0\nDESCRIPTION: Documents the removal of chat and survey support functionality from the tool_mobile module, referencing MDL-82457 ticket for more details.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# tool_mobile Upgrade notes\n\n## 5.0\n\n### Removed\n\n- Remove chat and survey support from tool_mobile.\n\n  For more information see [MDL-82457](https://tracker.moodle.org/browse/MDL-82457)\n```\n\n----------------------------------------\n\nTITLE: Modified Field Controller Method Reference - PHP\nDESCRIPTION: Reference to updated field controller method with new escape parameter functionality in version 4.5.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\\core_customfield\\field_controller::get_formatted_name()\n```\n\n----------------------------------------\n\nTITLE: Calling New Badge Web Services in PHP\nDESCRIPTION: New web services have been added for enabling and disabling badges. These can be called using Moodle's external API system.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$enableresult = core_badges_enable_badges($params);\n$disableresult = core_badges_disable_badges($params);\n```\n\n----------------------------------------\n\nTITLE: Deprecation of get_course_url Method - PHP\nDESCRIPTION: In the format topics module, the `get_course_url` method from the section controlmenu class has been deprecated. The recommended replacement is `$this->format->get_update_url`, which emphasizes adherence to updated code practices.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_19\n\nLANGUAGE: php\nCODE:\n```\n// In format topics, the section controlmenu class deprecates the get_course_url method. Use $this->format->get_update_url instead.\n// For more information see [MDL-82767](https://tracker.moodle.org/browse/MDL-82767)\n```\n\n----------------------------------------\n\nTITLE: Implementing Cron for Moodle Plugins\nDESCRIPTION: This snippet shows how to set up a cron job for a Moodle question behaviour plugin. Implementing a cron job involves defining the qbehaviour_mypluginname_cron function if the plugin requires scheduled tasks.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/behaviour/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nfunction qbehaviour_mypluginname_cron() {};\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Question\nDESCRIPTION: This snippet defines a Moodle question with a specific ID and text. The question asks the user to order a set of words to form the phrase \"Modular Object Oriented Dynamic Learning Environment\".\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/ordering/tests/fixtures/testimport.gift.txt#2025-04-21_snippet_0\n\nLANGUAGE: Moodle Question Format\nCODE:\n```\n// question: 25  name: Moodle\n// [id:myid]\n::Moodle::[html]Put these words in order.{>4 CONTIGUOUS VERT ABSOLUTE TRUE ABCD\nModular\nObject\nOriented\nDynamic\nLearning\nEnvironment\n#### The correct answer is \"Modular Object Oriented Dynamic Learning Environment\".\n}\n```\n\n----------------------------------------\n\nTITLE: Using Cached Key Sets for JWT Verification\nDESCRIPTION: This section describes the advantages of using cached key sets for JWT verification, emphasizing performance benefits, managing key rotation, and dealing with rate limiting when fetching JWKS from a public URI.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Example usage of CachedKeySet class\n// Implements caching features for fetching JWKS.\n```\n\n----------------------------------------\n\nTITLE: Cron Task Implementation in PHP\nDESCRIPTION: New cron task class for automated recalculation of number course custom fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/field/number/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n\\customfield_number\\task\\cron\n```\n\n----------------------------------------\n\nTITLE: Updating Deprecated Badge Page References in PHP\nDESCRIPTION: Several badge-related pages have been deprecated and merged with others. Code should be updated to use the new page locations.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Old\n$url = new moodle_url('/badges/newbadge.php');\n$viewurl = new moodle_url('/badges/view.php');\n\n// New\n$url = new moodle_url('/badges/edit.php');\n$viewurl = new moodle_url('/badges/index.php');\n```\n\n----------------------------------------\n\nTITLE: Documenting Comment API Changes for Moodle 3.8\nDESCRIPTION: Details changes to the external function 'get_comments', including new return values and parameters. Also mentions an update to 'core_comment_get_comments' function.\nSOURCE: https://github.com/moodle/moodle/blob/main/comment/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.8 ===\n  * External function get_comments now returns the total count of comments and the number of comments per page.\n    It also has a new parameter to indicate the sorting direction (defaulted to DESC).\n  * The external function core_comment_get_comments now indicates if the current user can post comments in the requested\n    area.\n```\n\n----------------------------------------\n\nTITLE: Installing PHPComplex Library\nDESCRIPTION: This snippet provides the command needed to install the PHPComplex library via Composer, specifying the version to be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/complex/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require markbaker/complex:^1.0\n```\n\n----------------------------------------\n\nTITLE: Creating and Using a RejectedPromise in PHP\nDESCRIPTION: Demonstrates how to create a RejectedPromise and immediately invoke a rejected callback.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_15\n\nLANGUAGE: php\nCODE:\n```\nuse GuzzleHttp\\Promise\\RejectedPromise;\n\n$promise = new RejectedPromise('Error');\n\n// Rejected callbacks are immediately invoked.\n$promise->then(null, function ($reason) {\n    echo $reason;\n});\n```\n\n----------------------------------------\n\nTITLE: Rendering Custom Activity Icon in PHP\nDESCRIPTION: Illustrates how to render a custom activity icon using the activity_icon class and a cm_info object.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\n\necho $OUTPUT->render(activity_icon::from_cm_info($cminfo));\n```\n\n----------------------------------------\n\nTITLE: Loading MarkdownExtra Parser without Autoloading in PHP\nDESCRIPTION: Shows how to include the MarkdownExtra parser without using class autoloading by using the .inc.php file which eagerly loads all dependencies.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\nrequire_once 'Michelf/MarkdownExtra.inc.php';\n```\n\n----------------------------------------\n\nTITLE: Implementing Question Bank Condition Filter in PHP\nDESCRIPTION: Question bank Condition classes can now implement a function to remove invalid values from the filterconditions array.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\nfilter_invalid_values($filterconditions)\n```\n\n----------------------------------------\n\nTITLE: Adding Double Precision Control in XML-RPC Serialization\nDESCRIPTION: New feature to control precision of DOUBLE value serialization using a static class property\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc::$xmlpc_double_precision\n```\n\n----------------------------------------\n\nTITLE: Basic Dropdown Dialog Implementation - PHP\nDESCRIPTION: Shows the simplest implementation of creating a dropdown dialog with button content and dialog content.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$dialog = new core\\output\\local\\dropdown\\dialog('Open dialog button', 'Dialog content');\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Setting Up Dependency Injection Resolvers - PHP\nDESCRIPTION: Configures the Invoker library to support dependency injection by registering parameter resolvers. Example with TypeHintContainerResolver which injects parameters by searching for type-hints in the DI container. PSR-11 compliant container setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$containerResolver = new TypeHintContainerResolver($container);\n\n$invoker = new Invoker\\Invoker;\n// Register it before all the other parameter resolvers\n$invoker->getParameterResolver()->prependResolver($containerResolver);\n```\n\n----------------------------------------\n\nTITLE: Configuring Aliases in PHP-DI 4.0\nDESCRIPTION: Example of configuring entry aliases in PHP-DI 4.0, which was added as a new feature. This allows mapping one container entry to another.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$containerBuilder->addDefinitions([\n    'alias' => DI\\get('original.id')\n]);\n```\n\n----------------------------------------\n\nTITLE: Web Service Implementation in PHP\nDESCRIPTION: New webservice for recalculating values of number course custom fields.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/field/number/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncustomfield_number_recalculate_value\n```\n\n----------------------------------------\n\nTITLE: Querying Recent Items with Branding Information in PHP\nDESCRIPTION: The external function get_recent_items() now returns an additional field 'branded' to indicate whether a module is branded or not. This change was implemented in Moodle version 4.4.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/recentlyaccesseditems/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\block_recentlyaccesseditems\\external\\get_recent_items()\n```\n\n----------------------------------------\n\nTITLE: Referencing New Custom Field Data Exporter Class - PHP\nDESCRIPTION: Reference to new class implementation for exporting custom field data in version 5.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core_customfield\\external\\field_data_exporter\n```\n\n----------------------------------------\n\nTITLE: Migrating Admin Reports Steps\nDESCRIPTION: Step-by-step instructions for migrating existing admin reports to the new admin tool plugin format. Includes file location changes, language pack updates, and configuration modifications.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n# move all files to new /admin/tool/yourplugin/ location\n# update all links to admin tools /$CFG->admin/report/ to /$CFG->admin/tool/\n# add language pack with at least 'pluginname' string\n# update all language strings (use 'tool_yourplugin' instead of 'report_yourplugin') - use AMOS hints in commit message\n# update all capability names\n# create db/install.php migration script - delete old settings and capabilities (see converted plugins for examples)\n# grep the plugin codebase and look for any remaining 'coursereport' occurrences\n# update CSS selectors\n```\n\n----------------------------------------\n\nTITLE: Functions Changed/Removed from editlib.php (Moodle 2.8)\nDESCRIPTION: The following functions have been changed or removed from `editlib.php`.  If used in custom code, updates are required: `quiz_remove_slot`, `quiz_delete_empty_page`, `quiz_add_page_break_after_slot`, `quiz_update_slot_maxmark`, `_quiz_move_question`, `quiz_move_question_up`, `quiz_move_question_down`, `quiz_print_question_list`, and `quiz_print_pagecontrols`. The `quiz_add_page_break_after_slot` and `quiz_update_slot_maxmark` should now use methods of structure or repaginate classes instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_35\n\nLANGUAGE: text\nCODE:\n```\n\"Here is a list of all the old functions or classes that have changed.\n  If you used any of these in custom code, you will need to update your code.\n  (Note that many of these functions should have been considered private internals\n  of the quiz module, and you should not have been using them!)\n\n  From editlib.php:\n      quiz_remove_slot\n      quiz_delete_empty_page\n      quiz_add_page_break_after_slot    - Use methods of structure or repaginate\n      quiz_update_slot_maxmark          - classes instead.\n      _quiz_move_question\n      quiz_move_question_up\n      quiz_move_question_down\n\n      quiz_print_question_list\n      quiz_print_pagecontrols\"\n```\n\n----------------------------------------\n\nTITLE: Creating a BufferStream with High Water Mark in GuzzleHttp\nDESCRIPTION: This snippet shows how to create a BufferStream with a high water mark using GuzzleHttp\\Psr7. The high water mark (HWM) specifies the maximum preferred size of the buffer. When more data is written to the stream than the configured HWM, the stream may return false to indicate that writers should slow down.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n// When more than 1024 bytes are in the buffer, it will begin returning\n// false to writes. This is an indication that writers should slow down.\n$buffer = new Psr7\\BufferStream(1024);\n```\n```\n\n----------------------------------------\n\nTITLE: Deprecation of Multiple Methods in mod_data - PHP\nDESCRIPTION: A number of methods in `mod_data` have been deprecated, with recommendations to switch to their more modern counterparts. This reflects an ongoing effort to modernize the data handling capabilities of the plugin system.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_39\n\nLANGUAGE: php\nCODE:\n```\n// Final deprecation of \\mod_data_renderer::import_setting_mappings(). Please use \\mod_data_renderer::importing_preset() instead.\n// Final deprecation of data_print_template() function. Please use mod_data\\manager::get_template and mod_data\\template::parse_entries instead.\n// Final deprecation of data_preset_name(). Please use preset::get_name_from_plugin() instead.\n// Final deprecation of data_get_available_presets(). Please use manager::get_available_presets() instead.\n// Final deprecation of data_get_available_site_presets(). Please use manager::get_available_saved_presets() instead.\n// Final deprecation of data_delete_site_preset(). Please use preset::delete() instead.\n// Final deprecation of is_directory_a_preset(). Please use preset::is_directory_a_preset() instead.\n// Final deprecation of data_presets_save(). Please use preset::save() instead.\n// Final deprecation of data_presets_generate_xml(). Please use preset::generate_preset_xml() instead.\n// Final deprecation of data_presets_export(). Please use preset::export() instead.\n// Final deprecation of data_user_can_delete_preset(). Please use preset::can_manage() instead.\n// Final deprecation of data_view(). Please use mod_data\\manager::set_module_viewed() instead.\n// For more information see [MDL-75189](https://tracker.moodle.org/browse/MDL-75189)\n```\n\n----------------------------------------\n\nTITLE: Injecting Mock Plugin Type with Subplugin Support\nDESCRIPTION: Shows how to inject a mock plugin type with subplugin support into core_component. This enables loading of plugins under fullsubtype/ and fulldeprecatedsubtype/ directories.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/tests/fixtures/fakeplugins/fake/fullfeatured/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$this->add_full_mocked_plugintype(\n    plugintype: 'fake',\n    path: 'lib/tests/fixtures/fakeplugins/fake',\n    subpluginsupport: true\n);\n```\n\n----------------------------------------\n\nTITLE: Icon Button Implementation\nDESCRIPTION: Example of icon-only buttons using the btn-icon class with different sizes and styles.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/buttons.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-icon\">\n    <i class=\"icon fa fa-ellipsis-vertical fa-fw\" title=\"Edit\" role=\"img\"></i>\n</button>\n<button type=\"button\" class=\"btn btn-icon text-bg-danger\">\n    <i class=\"icon fa fa-trash-can fa-fw\" title=\"Delete\" role=\"img\"></i>\n</button>\n```\n\n----------------------------------------\n\nTITLE: New Argument quizhasquestions in view_information method (Moodle 4.0)\nDESCRIPTION: A new argument, `quizhasquestions`, has been added to the public method `view_information` in `mod/quiz/renderer.php`. This argument provides information about whether the quiz has questions.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_8\n\nLANGUAGE: text\nCODE:\n```\n\"New argument quizhasquestions has been added to public methods: view_information in mod/quiz/renderer.php.\"\n```\n\n----------------------------------------\n\nTITLE: Rebuilding CKEditor 5 After Configuration Changes\nDESCRIPTION: Command to rebuild the CKEditor 5 editor after making changes to its configuration or plugins. This will create the updated build in the 'build' directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/ckeditor5/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm run build\n```\n\n----------------------------------------\n\nTITLE: Data Privacy API Method - Permission Check\nDESCRIPTION: Method to determine if a user has permission to create their own data download requests.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/dataprivacy/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\napi::can_create_data_download_request_for_self\n```\n\n----------------------------------------\n\nTITLE: JavaScript ActionMenu Event Handler Update\nDESCRIPTION: Updated syntax for calling the hideMenu function on ActionMenu, now requiring an EventFacade parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_91\n\nLANGUAGE: javascript\nCODE:\n```\nM.core.actionmenu.instance.hideMenu(e)\n```\n\n----------------------------------------\n\nTITLE: Updating report_progress method in Moodle\nDESCRIPTION: This snippet describes the addition of a new parameter $activitysection to the method report_progress\\local\\helper::get_activities_to_show(), allowing filtering of activities by sections.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n* The method report_progress\\local\\helper::get_activities_to_show() has an additional parameter $activitysection\n  to support filtering by sections.\n```\n\n----------------------------------------\n\nTITLE: Replacing Old TinyMCE Configuration\nDESCRIPTION: This snippet removes the outdated TinyMCE configuration and replaces it with the newly built version. It is essential to ensure path accuracy for successful replacement.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf \"${MOODLEDIR}/js\"\ncp -r modules/tinymce/js \"${MOODLEDIR}/js\"\n```\n\n----------------------------------------\n\nTITLE: Confirmation Modal with Redirect\nDESCRIPTION: HTML for a confirmation modal that redirects the user to a specified URL after confirmation. The data-confirmation-destination attribute defines the URL to redirect to when the user confirms the action.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_5\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-confirmation=\"modal\" data-confirmation-title-str='[\"save\", \"core\"]'\ndata-confirmation-content-str='[\"areyousure\"]' data-confirmation-yes-button-str='[\"save\", \"core\"]'\ndata-confirmation-destination=\"http://moodle.com\">Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: New File System Hook After File Creation in PHP\nDESCRIPTION: A hook has been created to allow inspection of files after they are saved in the filesystem. This enables plugins to perform actions on files after they're stored.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_66\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_files\\hook\\after_file_created\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Multichoice Question\nDESCRIPTION: This snippet defines a multiple-choice question within the Moodle environment. The question asks the user to select the fruits. The weighting for Apple is 50% which means that this answer will be marked correct and add 50% of total marks for this question.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/multianswer/tests/fixtures/broken_multianswer_2.txt#2025-04-21_snippet_0\n\nLANGUAGE: Moodle Question Format\nCODE:\n```\n\"Please select the fruits {1:MULTICHOICE:Pear#Incorrect~%50%Apple#Correct}\"\n```\n\n----------------------------------------\n\nTITLE: New Enrollment Instance Name Method in PHP\nDESCRIPTION: New method get_instance_name_for_management_page() added to enrol_plugin class to display additional details next to the instance name on management pages.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nenrol_plugin::get_instance_name_for_management_page()\n```\n\n----------------------------------------\n\nTITLE: Accessing Extended Username Characters Setting in Email Auth\nDESCRIPTION: External function update in version 4.4 that adds 'extendedusernamechars' field to the signup settings response.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/email/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nauth_email_external::get_signup_settings()\n```\n\n----------------------------------------\n\nTITLE: Using New JavaScript Module for Adding Blocks\nDESCRIPTION: Example of using the new 'core_block/add_modal' JavaScript module to replace the deprecated 'core/addblockmodal' module.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nrequire(['core_block/add_modal'], function(AddModal) {\n    // Use AddModal here\n});\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: find_system_areas in answerbase Class\nDESCRIPTION: The method find_system_areas in the answerbase class of the core_question area has been deprecated. This is due to system context no longer being a valid context for assigning question categories. No replacement is provided.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\ntool_brickfield\\local\\areas\\core_question\\answerbase::find_system_areas\n```\n\n----------------------------------------\n\nTITLE: Implementing Responsive Grid Layout with Bootstrap in HTML\nDESCRIPTION: Demonstrates a responsive grid layout using Bootstrap's column classes. The example shows a fluid container with multiple breakpoints (xs, md, lg, xl) creating a responsive grid that adapts from 2 to 6 columns depending on screen size. Each grid item includes padding and borders with equal height rows.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/grids.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n      Lorem ipsum dolor sit amet\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n      Lonsectetuer adipiscing elit. Aenean commodo ligula eget dolor.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n      Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    ascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Lretium quis, sem. Nulla consequat massa quis enim.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Aenean commodo massa quis enim.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Aenean commodo ligula eget dolor. Aenean massa. Cu quis enim.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Loltricies nec, pellentesque eu, quis enim.\n      </div>\n    </div>\n    <div class=\"col-6 col-md-4 col-lg-3 col-xl-2 mb-3\">\n      <div class=\"inner h-100 border p-1\">\n    Ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis.\n      </div>\n    </div>\n  </div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Installing PSR Clock Interface via Composer\nDESCRIPTION: Command to install the PSR Clock interface package using Composer. This installs only the interface, not an actual implementation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/clock/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require psr/clock\n```\n\n----------------------------------------\n\nTITLE: Using Semantic HTML for Text Emphasis\nDESCRIPTION: This snippet illustrates the correct usage of semantic HTML tags for emphasizing text, replacing deprecated tags like <b> and <i>.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_2\n\nLANGUAGE: HTML\nCODE:\n```\n<p>This is <strong>really important text</strong>.</p>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Navigation Callback Methods\nDESCRIPTION: Lists the deprecated and new versions of navigation callback methods for local plugins. Shows the transition from extends_navigation to extend_navigation pattern.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nlocal_<plugin>_extends_navigation()\nlocal_<plugin>_extends_settings_navigation()\n\n// Should be renamed to:\nlocal_<plugin>_extend_navigation()\nlocal_<plugin>_extend_settings_navigation()\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.DefinitionRev Configuration Variable\nDESCRIPTION: Specifies the HTML.DefinitionRev variable as an integer with a default value of 1. This variable is used as a revision identifier for custom HTML definitions, allowing for version control and cache management.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.DefinitionRev.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.DefinitionRev\nTYPE: int\nVERSION: 2.0.0\nDEFAULT: 1\n```\n\n----------------------------------------\n\nTITLE: Removing Behat Step Helper behat_gradereport_grader::get_grade_item_id\nDESCRIPTION: The Behat step helper get_grade_item_id has been removed from behat_gradereport_grader. Developers should now use the equivalent method from behat_grades instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/report/grader/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nbehat_gradereport_grader::get_grade_item_id\n```\n\n----------------------------------------\n\nTITLE: Referencing Performance Improvement in count_modules_completed Method in Moodle 5.0\nDESCRIPTION: Describes a performance improvement in the 'count_modules_completed' method, which now delegates the counting logic to the database management system for better efficiency.\nSOURCE: https://github.com/moodle/moodle/blob/main/completion/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- The method `count_modules_completed` now delegate the logic to count the completed modules to the DBMS improving the performance of the method.\n```\n\n----------------------------------------\n\nTITLE: Subplugins JSON Format for Plugin Type Definition\nDESCRIPTION: Updated subplugins.json format that accepts a new 'subplugintypes' object. Paths should be relative to the plugin root instead of the Moodle document root.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: JSON\nCODE:\n```\n{\n    \"subplugintypes\": {\n        \"tiny\": \"plugins\"\n    },\n    \"plugintypes\": {\n        \"tiny\": \"lib/editor/tiny/plugins\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Content Files\nDESCRIPTION: Shows the folder structure for storing markdown content files in the component library.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-images.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n content\n      moodle\n          getting-started\n             adding-images.md\n```\n\n----------------------------------------\n\nTITLE: Removal of Deprecated Modal Libraries - PHP\nDESCRIPTION: This snippet mentions the removal of outdated modal libraries that have not been used, encouraging the adoption of modern JavaScript methodologies for rendering modals. Developers are advised to transition to ESM/AMD JavaScript frameworks.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_53\n\nLANGUAGE: php\nCODE:\n```\n  * The moodle-core-popuphelp YUI modal has been removed. It has not been actively used in Moodle since 3.3. It should be replaced with appropriate ESM/AMD JavaScript.\n  * The moodle-core-tooltip YUI modal has been removed. It should be replaced with appropriate ESM/AMD JavaScript.\n```\n\n----------------------------------------\n\nTITLE: Deprecating Grading Batch Operations Method in PHP\nDESCRIPTION: The '\\assign_feedback_plugin::get_grading_batch_operations()' method is now deprecated. Use assign_feedback_plugin::get_grading_batch_operation_details instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n\\assign_feedback_plugin::get_grading_batch_operations()\n```\n\n----------------------------------------\n\nTITLE: Handling Explicit Date Type for Cells in Xlsx Reader\nDESCRIPTION: This snippet describes an update in the Xlsx Reader of PhpSpreadsheet to handle cells with an explicit \"date\" type. This change ensures that cells explicitly marked as dates are correctly interpreted and processed, preventing potential misinterpretations or errors in date handling. The change enhances the reliability and accuracy of XLSX file reading.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n\"Handle explicit \\\"date\\\" type for Cell in Xlsx Reader. [Issue #2373](https://github.com/PHPOffice/PhpSpreadsheet/issues/2373) [PR #2485](https://github.com/PHPOffice/PhpSpreadsheet/pull/2485)\"\n```\n\n----------------------------------------\n\nTITLE: Removing Plugingradingbatchoperations Property in PHP\nDESCRIPTION: The '\\assign_grading_table::plugingradingbatchoperations' property has been removed. Use \\assign_feedback_plugin::get_grading_batch_operation_details() instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n\\assign_grading_table::plugingradingbatchoperations\n```\n\n----------------------------------------\n\nTITLE: Final Removal of Classes in mod_data - PHP\nDESCRIPTION: The following classes have reached their final removal stage: `data_preset_importer`, `data_preset_existing_importer`, `data_preset_upload_importer`, `data_import_preset_zip_form`. This change streamlines the code and removes outdated elements from the module.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_38\n\nLANGUAGE: php\nCODE:\n```\n// Final deprecation and removal of the following classes:\n// data_preset_importer\n// data_preset_existing_importer\n// data_preset_upload_importer\n// data_import_preset_zip_form\n// For more information see [MDL-75189](https://tracker.moodle.org/browse/MDL-75189)\n```\n\n----------------------------------------\n\nTITLE: Matching Question Example\nDESCRIPTION: This snippet shows the format for a matching question in Moodle. It includes the question title, instructions, and a series of matching pairs with correctly matched descriptions. The descriptions use HTML, Moodle-specific syntax, plain text, and markdown.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n// question: 2  name: Moodle activities\n::Moodle activities::[html]Match the <b>activity</b> to the description.{\n    =[html]An activity supporting asynchronous discussions. -> Forum\n    =[moodle]A teacher asks a question and specifies a choice of multiple responses. -> Choice\n    =[plain]A bank of record entries which participants can add to. -> Database\n    =[markdown]A collection of web pages that anyone can add to or edit. -> Wiki\n    = -> Chat\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring Output.FixInnerHTML Option in HTML Purifier\nDESCRIPTION: Configuration setting that determines if HTML Purifier should add spaces to attributes containing backticks to prevent Internet Explorer innerHTML issues. Default value is true. This protection modifies attribute semantics slightly by appending spaces.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Output.FixInnerHTML.txt#2025-04-21_snippet_0\n\nLANGUAGE: txt\nCODE:\n```\nOutput.FixInnerHTML\nTYPE: bool\nVERSION: 4.3.0\nDEFAULT: true\n```\n\n----------------------------------------\n\nTITLE: Implementing BigBlueButtonBN Extension Class in PHP\nDESCRIPTION: Example of the namespace and class name format for implementing a BigBlueButtonBN extension. This snippet shows how to name and place the extension class for the mod_instance_helper.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/bigbluebuttonbn/extension/README.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\\bbbext_<YOUREXTENSION>\\bigbluebuttonbn\\mod_instance_helper\n```\n\n----------------------------------------\n\nTITLE: Updating External Function Parameter in PHP\nDESCRIPTION: In Moodle 3.0, the 'name' parameter returned by mod_book_external::get_books_by_courses has been changed to PARAM_RAW to accommodate the new external_format_string function when using the moodlewssettingraw parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\nmod_book_external::get_books_by_courses\n```\n\n----------------------------------------\n\nTITLE: Enabling Deprecation Warnings in Guzzle\nDESCRIPTION: Enable user deprecation warnings to identify deprecated method usage in Guzzle library\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_9\n\nLANGUAGE: php\nCODE:\n```\n\\Guzzle\\Common\\Version::$emitWarnings = true;\n```\n\n----------------------------------------\n\nTITLE: Implementing Emphasized Search Input in Moodle\nDESCRIPTION: This snippet shows how to implement an emphasized search input using the btn-primary class. This variant is intended for use when searching is the primary action on a page and is the only search input present (except for navbar search).\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/search-input.md#2025-04-21_snippet_1\n\nLANGUAGE: json\nCODE:\n```\n{\n        \"action\": \"https://moodle.local/admin/search.php\",\n        \"extraclasses\": \"my-2\",\n        \"uniqid\": \"Unique string\",\n        \"inputname\": \"search\",\n        \"inform\": false,\n        \"btnclass\": \"btn-primary\",\n        \"searchstring\": \"Search something\",\n        \"hiddenfields\": [\n            {\n                \"name\": \"context\",\n                \"value\": \"11\"\n            }\n        ]\n    }\n```\n\n----------------------------------------\n\nTITLE: Tag Areas Plugin Configuration in Moodle 3.1\nDESCRIPTION: Requirement for plugins to define tag areas in a specific configuration file, enabling more structured and component-specific tagging strategies.\nSOURCE: https://github.com/moodle/moodle/blob/main/tag/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// Each plugin must define tag areas in:\n// plugindir/db/tag.php\n```\n\n----------------------------------------\n\nTITLE: Installing PSR-16 Simple Cache in Moodle\nDESCRIPTION: Steps to download and integrate the PSR-16 Simple Cache interfaces into Moodle. This process involves downloading the latest release from GitHub, unzipping it in the appropriate folder, and updating the third-party libraries XML file.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/simple-cache/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# PSR-16 Simple Cache\n\nThis is a description for including the PSR-16 Interfaces in Moodle\n\n## Installation\n\n1. Visit https://github.com/php-fig/simple-cache\n2. Download the latest release\n3. Unzip in this folder\n4. Update `thirdpartylibs.xml`\n```\n\n----------------------------------------\n\nTITLE: External Function Call - tool_mobile::get_qrlogin_key (4.0)\nDESCRIPTION: Modified function requiring mobile plugin settings object as parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ntool_mobile\\api::get_qrlogin_key()\n```\n\n----------------------------------------\n\nTITLE: Removed Deprecated Helper Methods in Moodle\nDESCRIPTION: This snippet lists deprecated local helper methods that have been removed from Moodle. These methods can no longer be used. Developers need to find alternative methods to achieve the same functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_10\n\nLANGUAGE: text\nCODE:\n```\n    - `\\core_reportbuilder\\local\\helpers\\audience::get_all_audiences_menu_types()`\n    - `\\core_reportbuilder\\local\\helpers\\report::get_available_columns()`\n```\n\n----------------------------------------\n\nTITLE: Adding PHP Namespace Declaration\nDESCRIPTION: Instructions to add a namespace declaration to all H5P editor PHP files to avoid collisions with other code in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nnamespace Moodle;\n```\n\n----------------------------------------\n\nTITLE: Installing FastRoute with Composer\nDESCRIPTION: Command to install the FastRoute package using Composer package manager. Requires PHP 5.4 or newer.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ncomposer require nikic/fast-route\n```\n\n----------------------------------------\n\nTITLE: Rejection Forwarding with RejectedPromise in PHP\nDESCRIPTION: This example shows how to forward a rejection down the promise chain by returning a `GuzzleHttp\\Promise\\RejectedPromise` in either an `$onFulfilled` or `$onRejected` callback. The subsequent `$onRejected` callback receives the rejection reason from the `RejectedPromise`. The assertion confirms that the reason is 'Error!'.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\nuse GuzzleHttp\\Promise\\RejectedPromise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    return new RejectedPromise($reason);\n})->then(null, function ($reason) {\n    assert($reason === 'Error!');\n});\n\n$promise->reject('Error!');\"\n```\n\n----------------------------------------\n\nTITLE: Updating Git Submodules\nDESCRIPTION: This command initializes and updates all Git submodules within the project. It ensures that the necessary dependencies and external libraries are available for building the project.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_6\n\nLANGUAGE: Shell\nCODE:\n```\n\"git submodule update --init\"\n```\n\n----------------------------------------\n\nTITLE: Using Modal Attribute in YUI Dialogue in JavaScript\nDESCRIPTION: The lightbox attribute for moodle-core-notification-dialogue has been deprecated and replaced by the modal attribute. This change was made in Moodle 2.2 but only marked as deprecated now.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_94\n\nLANGUAGE: JavaScript\nCODE:\n```\nnew Y.Moodle.core.notification.Dialogue({\n    modal: true\n});\n```\n\n----------------------------------------\n\nTITLE: Installing PHP Markdown with Composer\nDESCRIPTION: Command to install the PHP Markdown library using Composer package manager.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ composer require michelf/php-markdown\n```\n\n----------------------------------------\n\nTITLE: Icon Size Classes Implementation\nDESCRIPTION: Comprehensive HTML example showing different icon sizes using icon-size-x classes, demonstrating sizes from 4px to 40px with visual cards.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/iconsizes.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"d-flex\">\n  <div class=\"icon-size-1 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-1<br>4px\n      </div>\n  </div>\n  <div class=\"icon-size-2 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-2<br>8px\n      </div>\n  </div>\n  <div class=\"icon-size-3 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-3<br>16px (default)\n      </div>\n  </div>\n  <div class=\"icon-size-4 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-4<br>24px\n      </div>\n  </div>\n  <div class=\"icon-size-5 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-5<br>32px\n      </div>\n  </div>\n  <div class=\"icon-size-6 card bg-light me-2\">\n    <div class=\"card-body d-flex justify-content-center align-items-center\">\n    <i class=\"fa fa-arrow-up icon\"></i>\n    </div>\n    <div class=\"card-footer\">\n    icon-size-6<br>40px\n      </div>\n  </div>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Adding Submission Summary Method in mod_assign - PHP\nDESCRIPTION: There is now a method `submission_summary_for_messages()` available for submission sub-plugins. This method summarizes submitted materials for inclusion in notification messages, enhancing communication with students.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_30\n\nLANGUAGE: php\nCODE:\n```\n// There is a new method submission_summary_for_messages() for submission sub-plugins to summarise what has been submitted for inclusion in confirmation messages to students.\n// For more information see [MDL-84387](https://tracker.moodle.org/browse/MDL-84387)\n```\n\n----------------------------------------\n\nTITLE: Adding Parameter to `recaptcha_get_challenge_html()`\nDESCRIPTION: A new parameter `$compactmode` has been added to `recaptcha_get_challenge_html()`. This parameter defines whether the reCaptcha element should be displayed in compact mode and defaults to `false`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_13\n\n\n\n----------------------------------------\n\nTITLE: Creating a Plugin File URL in Moodle's Group Context\nDESCRIPTION: This snippet demonstrates how to generate a URL for a plugin file associated with a group's default images in Moodle. It utilizes the moodle_url class to build this URL, requiring the group's context ID and other parameters to fetch the correct resource.\nSOURCE: https://github.com/moodle/moodle/blob/main/group/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$url = moodle_url::make_pluginfile_url(\\\n           $coursecontext->id,\\\n           'group',\\\n           'generated',\\\n           $group->id,\\\n           '/',\\\n           'group.svg'\\\n       );\n```\n\n----------------------------------------\n\nTITLE: Navigation Extension for User Profiles\nDESCRIPTION: Callback method for plugins to extend user navigation. Takes parent node, user object, user context, course object and course context as parameters.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_89\n\nLANGUAGE: php\nCODE:\n```\n<frankenstyle>_extend_navigation_user(navigation_node $parentnode, stdClass $user, context_user $context, stdClass $course, context_course $coursecontext)\n```\n\n----------------------------------------\n\nTITLE: Decoding JWT Headers Without Verification\nDESCRIPTION: This snippet shows how to decode JWT headers without verifying the JWT, highlighting the security risks associated with this approach. It contains the steps to manually decode JWT headers using base64 and JSON functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-jwt/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse Firebase\\JWT\\JWT;\n\n$key = 'example_key';\n$payload = [\n    'iss' => 'http://example.org',\n    'aud' => 'http://example.com',\n    'iat' => 1356999524,\n    'nbf' => 1357000000\n];\n\n$headers = [\n    'x-forwarded-for' => 'www.google.com'\n];\n\n$jwt = JWT::encode($payload, $key, 'HS256', null, $headers);\nlist($headersB64, $payloadB64, $sig) = explode('.', $jwt);\n$decoded = json_decode(base64_decode($headersB64), true);\n\nprint_r($decoded);\n```\n\n----------------------------------------\n\nTITLE: Adding mod_feedback_questions_reorder External Function - PHP\nDESCRIPTION: The new `mod_feedback_questions_reorder` external function has been added to improve feedback management. This function enhances the flexibility of feedback structures within Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_40\n\nLANGUAGE: php\nCODE:\n```\n// Added new mod_feedback_questions_reorder external function\n// For more information see [MDL-81745](https://tracker.moodle.org/browse/MDL-81745)\n```\n\n----------------------------------------\n\nTITLE: Deprecating htmllize_tree() method in Moodle Folder Module\nDESCRIPTION: In Moodle version 4.3, the htmllize_tree() method has been deprecated. Developers are advised to use the renderable_tree_elements() method instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/folder/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.3 ===\n  * htmllize_tree() method has been deprecated. Use renderable_tree_elements() instead.\n```\n\n----------------------------------------\n\nTITLE: Deprecation of Unused Capabilities in mod_data - PHP\nDESCRIPTION: The capabilities `mod/data:comment` and `mod/data:managecomments` have been deprecated due to their lack of use, helping to clean up the permissions architecture within the module.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_37\n\nLANGUAGE: php\nCODE:\n```\n// The following unused capabilities have been deprecated:\n// mod/data:comment\n// mod/data:managecomments\n// For more information see [MDL-84267](https://tracker.moodle.org/browse/MDL-84267)\n```\n\n----------------------------------------\n\nTITLE: Numerical Range Question Example\nDESCRIPTION: This snippet demonstrates a numerical range question format in Moodle. It defines a question asking for a number within a range (1 to 5). The {#3:2~#Completely wrong}\"\" indicates that the acceptable range is from 1 to 5, with some error handling or feedback configuration, although the precise interpretation requires more context.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_4\n\nLANGUAGE: text\nCODE:\n```\n// math range question\n::Q5:: What is a number from 1 to 5? {#3:2~#Completely wrong}\";\n```\n\n----------------------------------------\n\nTITLE: Retrieving Custom Icon URL in PHP\nDESCRIPTION: Shows how to retrieve the URL of a custom activity icon using the get_fast_modinfo() function.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n$iconurl = get_fast_modinfo($courseid)->get_cm($cmid)->get_icon_url()->out(false);\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom HTML Definition in PHP using HTMLPurifier\nDESCRIPTION: This code snippet demonstrates how to set a custom HTML.DefinitionID and add a new attribute to an HTML element using HTMLPurifier's advanced API. It creates a default configuration, sets a custom DefinitionID, and adds a 'tabindex' attribute to the 'a' tag.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.DefinitionID.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$config = HTMLPurifier_Config::createDefault();\n$config->set('HTML', 'DefinitionID', '1');\n$def = $config->getHTMLDefinition();\n$def->addAttribute('a', 'tabindex', 'Number');\n```\n\n----------------------------------------\n\nTITLE: Validating Phone Number in PHP\nDESCRIPTION: Shows how to validate a parsed phone number using libphonenumber's isValidNumber method\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$isValid = $phoneUtil->isValidNumber($swissNumberProto);\nvar_dump($isValid); // true\n```\n\n----------------------------------------\n\nTITLE: Defining Core.AllowParseManyTags Configuration Parameter\nDESCRIPTION: Configuration directive that controls the parsing of nested tags. When set to true, it removes parser limits but may expose the system to DoS attacks. Default value is false and available from Moodle version 4.10.1.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.AllowParseManyTags.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.AllowParseManyTags\nTYPE: bool\nDEFAULT: false\nVERSION: 4.10.1\n```\n\n----------------------------------------\n\nTITLE: Subsequent Cache Request Flow\nDESCRIPTION: Shows the simplified flow for a subsequent request where the data is already present in the cache, demonstrating the performance benefits of caching.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/README.md#2025-04-21_snippet_8\n\nLANGUAGE: text\nCODE:\n```\n=> Code calls get\n    => Loader handles get, passes the request to its store\n        <= Store returns the data\n    <= Loader returns the data\n|= Code has the data\n```\n\n----------------------------------------\n\nTITLE: Updating User File Creation in Test Plan Backend with PHP\nDESCRIPTION: This update to the tool_generator_testplan_backend::create_users_file() function allows passing the size of the testing plan, which must be equal to or smaller than the generated site size. This change helps restrict the exported number of users to the number of threads in the JMeter plan.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/generator/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ntool_generator_testplan_backend::create_users_file()\n```\n\n----------------------------------------\n\nTITLE: Preventing Seeking with NoSeekStream in GuzzleHttp\nDESCRIPTION: This snippet shows how to use NoSeekStream from GuzzleHttp\\Psr7 to wrap an existing stream and disable seeking operations. Attempts to seek the stream will result in no action. This can be useful when working with streams where seeking is not supported or desired.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n$original = Psr7\\Utils::streamFor('foo');\n$noSeek = new Psr7\\NoSeekStream($original);\n\necho $noSeek->read(3);\n// foo\nvar_export($noSeek->isSeekable());\n// false\n$noSeek->seek(0);\nvar_export($noSeek->read(3));\n// NULL\n```\n```\n\n----------------------------------------\n\nTITLE: Rendering Activity Icon in Black Color in PHP\nDESCRIPTION: Illustrates how to render an activity icon in black color for accessibility or usability reasons, using the set_colourize method.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/activityicons.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nuse core_course\\output\\activity_icon;\n$renderer = \\core\\di::get(\\core\\output\\renderer_helper::class)->get_core_renderer();\n\n$icon = activity_icon::from_modname('quiz')\n    ->set_colourize(false);\n\necho $renderer->render($icon);\n```\n\n----------------------------------------\n\nTITLE: Adjusting Compatibility for PHP 8.2 - PHP\nDESCRIPTION: This snippet showcases changes made to ensure compatibility with PHP 8.2 by updating how 'call_user_func_array' is utilized. This change addresses callable deprecations and maintains the functionality of the EvalMath library with the newer PHP version.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/evalmath/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\ncall_user_func_array(array(self::class, 'sum'), $args);\n?>\n```\n\n----------------------------------------\n\nTITLE: Accessing New Badge Fields in PHP\nDESCRIPTION: New fields 'courseid', 'coursefullname', and 'recipientfullname' have been added to various badge exporters and API return structures. These can be accessed when using the relevant external functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$badge = core_badges_get_badge($badgeid);\n$courseid = $badge['courseid'];\n$coursefullname = $badge['coursefullname'];\n\n$userbadge = core_badges_get_user_badge_by_hash($hash);\n$recipientid = $userbadge['recipientid'];\n$recipientfullname = $userbadge['recipientfullname'];\n```\n\n----------------------------------------\n\nTITLE: Referencing UPGRADING.md File in Moodle 4.5\nDESCRIPTION: Indicates that from Moodle 4.5 onwards, this file has been replaced by UPGRADING.md. It references the MDL-81125 issue for more information.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.5 Onwards ===\n\nThis file has been replaced by UPGRADING.md. See MDL-81125 for further information.\n```\n\n----------------------------------------\n\nTITLE: Deprecation of get_highlight_control Method - PHP\nDESCRIPTION: This snippet marks the deprecation of the `get_highlight_control` method in the section controlmenu class, recommending the use of `get_section_highlight_item` to maintain compatibility and reflect the latest coding standards.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_20\n\nLANGUAGE: php\nCODE:\n```\n// The get_highlight_control in the section controlmenu class is now deprecated. Use get_section_highlight_item instead\n// For more information see [MDL-83527](https://tracker.moodle.org/browse/MDL-83527)\n```\n\n----------------------------------------\n\nTITLE: Calendar API Interface Update - PHP\nDESCRIPTION: Addition of get_usermidnight_time() method to the times_interface class in version 3.10.\nSOURCE: https://github.com/moodle/moodle/blob/main/calendar/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ncore_calendar\\local\\event\\value_objects\\times_interface::get_usermidnight_time()\n```\n\n----------------------------------------\n\nTITLE: Removing Headers from PSR-7 HTTP Messages in PHP\nDESCRIPTION: Demonstrates how to remove specific headers from PSR-7 request and response objects using the withoutHeader method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n// removing a header from Request, removing deprecated \"Content-MD5\" header\n$request->withoutHeader('Content-MD5'); \n\n// removing a header from Response\n// effect: the browser won't know the size of the stream\n// the browser will download the stream till it ends\n$response->withoutHeader('Content-Length');\n```\n\n----------------------------------------\n\nTITLE: Allow Underscores in Hostnames - Configuration Parameter\nDESCRIPTION: This configuration parameter allows underscores in hostnames, overriding the RFC 1123 restrictions. Set to true to permit underscores, aiding compatibility with certain websites.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.AllowHostnameUnderscore.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.AllowHostnameUnderscore\nTYPE: bool\nVERSION: 4.6.0\nDEFAULT: false\n--DESCRIPTION--\n<p>\n    By RFC 1123, underscores are not permitted in host names.\n    (This is in contrast to the specification for DNS, RFC\n    2181, which allows underscores.)\n    However, most browsers do the right thing when faced with\n    an underscore in the host name, and so some poorly written\n    websites are written with the expectation this should work.\n    Setting this parameter to true relaxes our allowed character\n    check so that underscores are permitted.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Implementing an Alert Modal in HTML\nDESCRIPTION: HTML code to create a button that displays an alert modal dialog with customizable title and content.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dom-modal.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-modal=\"alert\" data-modal-title-str='[\"cookiesenabled\", \"core\"]'\ndata-modal-content-str='[\"cookiesenabled_help_html\", \"core\"]'>Show alert modal</button>\n```\n\n----------------------------------------\n\nTITLE: Deprecating Assign Course Index Summary in PHP\nDESCRIPTION: The assign_course_index_summary is now deprecated. The assign index is now generated using the mod_assign\\course\\overview integration class.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nassign_course_index_summary\n```\n\n----------------------------------------\n\nTITLE: Creating Link to PDF File with Text Indicator in HTML\nDESCRIPTION: This snippet demonstrates how to create a link to a PDF file, indicating the file type in the link text for user awareness.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/links.md#2025-04-21_snippet_2\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"https://www.w3.org/WAI/WCAG20/versions/guidelines/wcag20-guidelines-20081211-a4.pdf\">\n    PDF version of the Web Content Accessibility Guidelines (WCAG) 2.0\n</a>\n```\n\n----------------------------------------\n\nTITLE: Creating Backup Directory for Moodle Module - PHP\nDESCRIPTION: The snippet provided indicates the approach for creating backup directories in Moodle activity modules by utilizing a new function that allows the backup directory to exist outside of the temporary directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nmake_backup_temp_directory($name);\n```\n\n----------------------------------------\n\nTITLE: Multiple Choice Question Example\nDESCRIPTION: Demonstrates a basic multiple-choice question with weighted answers and feedback\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/examples.txt#2025-04-21_snippet_0\n\nLANGUAGE: gift\nCODE:\n```\nWho's buried in Grant's tomb?{~Grant ~Jefferson =no one}\n```\n\n----------------------------------------\n\nTITLE: Querying GeoIP2 Domain Database in PHP\nDESCRIPTION: Example of using the GeoIP2 Database Reader to look up domain information for an IP address. Creates a Reader object for the Domain database and displays the domain and network information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n<?php\nrequire_once 'vendor/autoload.php';\nuse GeoIp2\\Database\\Reader;\n\n// This creates the Reader object, which should be reused across\n// lookups.\n$domainDbReader = new Reader('/usr/local/share/GeoIP/GeoIP2-Domain.mmdb');\n\n$record = $domainDbReader->domain('128.101.101.101');\n\nprint($record->domain . \"\\n\"); // 'umn.edu'\nprint($record->ipAddress . \"\\n\"); // '128.101.101.101'\nprint($record->network . \"\\n\"); // '128.101.101.101/32'\n```\n\n----------------------------------------\n\nTITLE: Running Behat Accessibility Tests\nDESCRIPTION: Commands to initialize Moodle's behat testing environment and run accessibility-tagged tests to validate the library update.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/behat/axe/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nphp admin/tool/behat/cli/init.php --add-core-features-to-theme\nphp admin/tool/behat/cli/run.php --tags=@accessibility\n```\n\n----------------------------------------\n\nTITLE: Removing Number of Sections During Upgrade - PHP\nDESCRIPTION: The 'format_weeks_upgrade_remove_numsections' function removes the number of sections setting during upgrades. This is in response to changes in how sections are handled, where the actual number of sections is now determined by the course_sections table.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nformat_weeks_upgrade_remove_numsections()\n```\n\n----------------------------------------\n\nTITLE: Hiding Extra Sections During Upgrade - PHP\nDESCRIPTION: The 'format_weeks_upgrade_hide_extra_sections' function hides any extra sections that are not needed during the upgrade process. This is necessary to simplify the user experience and prevent clutter in course displays.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nformat_weeks_upgrade_hide_extra_sections()\n```\n\n----------------------------------------\n\nTITLE: XHProf Output Example\nDESCRIPTION: Example of XHProf profiling output data structure\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\narray(\n    \"main()\" => array(\n        \"wt\" => 237,\n        \"ct\" => 1,\n        \"cpu\" => 100,\n    )\n)\n```\n\n----------------------------------------\n\nTITLE: Prepending Content to PSR-7 Body Using String Manipulation in PHP\nDESCRIPTION: Demonstrates an alternative method of prepending content to a PSR-7 body by manipulating the contents as a string before writing back to the stream.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\n$body = $response->getBody();\n$body->rewind();\n$contents = $body->getContents(); // efabcd\n$contents = 'ef'.$contents;\n$body->rewind();\n$body->write($contents);\n```\n\n----------------------------------------\n\nTITLE: Deprecated Behat Step for File Download in Moodle Admin Presets\nDESCRIPTION: This code snippet shows a deprecated Behat step definition for checking file downloads in the admin presets tool. It also provides the recommended replacement step to use instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/admin_presets/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- behat_admin_presets::following_in_the_should_download_between_and_bytes is deprecated. Use: the following element should download a file that:\n\n  For more information see [MDL-83035](https://tracker.moodle.org/browse/MDL-83035)\n```\n\n----------------------------------------\n\nTITLE: Removal of Cohort Selector Module in Moodle 4.2\nDESCRIPTION: Describes the removal of the 'tool_lp/form-cohort-selector' autocomplete AJAX module in Moodle 4.2, as it was replaced by the core cohort form element with built-in autocomplete functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.2 ===\n\n* The `tool_lp/form-cohort-selector` autocomplete AJAX module has been removed, as it was superseded by the\n  core cohort form element which already provides autocomplete functionality\n```\n\n----------------------------------------\n\nTITLE: Disabling Moodle Enrolment Plugin in Configuration\nDESCRIPTION: This configuration entry disables the 'enrol_cohort' plugin in Moodle. It prevents the cohort-based enrolment method from being available or active in the Moodle instance.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/cohort/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nplugindisabled,enrol_cohort\n```\n\n----------------------------------------\n\nTITLE: Refinement for XIRR Calculation in PhpSpreadsheet\nDESCRIPTION: This snippet describes a refinement made to the XIRR calculation in PhpSpreadsheet. This enhancement ensures that the XIRR function provides more accurate and reliable results for financial calculations. The refinement contributes to improved accuracy and consistency in financial data analysis.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\n\"Refinement for XIRR. [Issue #2469](https://github.com/PHPOffice/PhpSpreadsheet/issues/2469) [PR #2487](https://github.com/PHPOffice/PhpSpreadsheet/pull/2487)\"\n```\n\n----------------------------------------\n\nTITLE: Deprecation Notice for book_get_nav_classes Method\nDESCRIPTION: Documentation about the deprecation of the book_get_nav_classes method in Moodle 5.0. The method has been fully deprecated and will throw an exception when called. Reference ticket MDL-81328 provides additional context.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# mod_book Upgrade notes\n\n## 5.0\n\n### Deprecated\n\n- The method book_get_nav_classes has been finally\n  deprecated and will now throw an exception if called.\n\n  For more information see [MDL-81328](https://tracker.moodle.org/browse/MDL-81328)\n```\n\n----------------------------------------\n\nTITLE: Removing Unnecessary Tab Stop in YUI2 Treeview (JavaScript)\nDESCRIPTION: This code snippet demonstrates an accessibility change in the YUI2 Treeview component. It removes unnecessary tab stops from folders or files that have no children, improving navigation for users relying on keyboard or assistive technologies.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/yuilib/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: JavaScript\nCODE:\n```\nlib/yuilib/2in3/2.9.0/build/yui2-treeview/yui2-treeview.js\n```\n\n----------------------------------------\n\nTITLE: Deprecating enrol_guest_enrol_form Class - PHP\nDESCRIPTION: This snippet informs the user that the `enrol_guest_enrol_form` class is deprecated and suggests the use of `enrol_guest\\form\\enrol_form` instead. This change is aimed at improving code maintainability and should be adhered to by developers using the class.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_16\n\nLANGUAGE: php\nCODE:\n```\n// Class enrol_guest_enrol_form is deprecated, use enrol_guest\\form\\enrol_form instead\n// For more information see [MDL-84142](https://tracker.moodle.org/browse/MDL-84142)\n```\n\n----------------------------------------\n\nTITLE: Checking Out Secure TinyMCE Version\nDESCRIPTION: This snippet checks out a secured copy of TinyMCE from the MoodleHQ repository to incorporate security patches in alignment with Moodle's development.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_11\n\nLANGUAGE: bash\nCODE:\n```\ntinymce=`mktemp -d`\ncd \"${tinymce}\"\ngit clone https://github.com/tinymce/tinymce.git\ncd tinymce\ngit remote add moodlehq https://github.com/moodlehq/tinymce\ngit fetch moodlehq\ngit checkout -b MOODLE_405_STABLE moodlehq/MOODLE_405_STABLE\n```\n\n----------------------------------------\n\nTITLE: Creating a Git Branch for Feature Development\nDESCRIPTION: Command to create a new feature branch from the develop branch following the Git Flow branching model. This is a necessary step before making changes to the codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/plist/CONTRIBUTING.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ngit checkout -b feature/created-branch develop\n```\n\n----------------------------------------\n\nTITLE: Documenting tourconfig Property Change in Moodle 3.9\nDESCRIPTION: Describes the change making the 'tourconfig' property optional in the response of the tool_usertours_fetch_and_start_tour external method.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/usertours/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.9 ===\n* The `tourconfig` property returned by the `tool_usertours_fetch_and_start_tour`\n  external method is now optional, and will be omitted if the tour shouldn't be\n  shown to the current user\n```\n\n----------------------------------------\n\nTITLE: Deprecated Parser in Guzzle\nDESCRIPTION: This code marks `Guzzle\\Parser\\Url\\UrlParser` as deprecated, suggesting the use of PHP's `parse_url()` function and percent encoding for UTF-8.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_17\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Parser\\\\Url\\\\UrlParser` as deprecated. Just use PHP's `parse_url()` and percent encode your UTF-8.\"\n```\n\n----------------------------------------\n\nTITLE: Creating Link to PDF File with Icon Indicator in HTML\nDESCRIPTION: This example shows how to create a link to a PDF file, using an icon with appropriate ARIA labels to indicate the file type.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/links.md#2025-04-21_snippet_3\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"https://www.w3.org/WAI/WCAG20/versions/guidelines/wcag20-guidelines-20081211-a4.pdf\">\n    Web Content Accessibility Guidelines (WCAG) 2.0 <i class=\"fa fa-file-pdf-o\" role=\"img\" aria-label=\"PDF document\" title=\"PDF document\"></i>\n</a>\n```\n\n----------------------------------------\n\nTITLE: Updating Export/Import Methods for Moodle XML Format\nDESCRIPTION: This update addresses changes needed for handling the export and import of questions in Moodle's XML format. Developers are required to adjust their method signatures to accommodate new parameters as per the latest API specifications.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// Example method signature\npublic function export_to_xml(qformat_xml $format) {\n    // implementation here\n}\n```\n\n----------------------------------------\n\nTITLE: Traditional PHP PCRE Function Usage\nDESCRIPTION: Example of traditional PHP preg_* function usage patterns that the composer/pcre library aims to replace with safer alternatives.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nif (preg_match('{fo+}', $string, $matches)) { ... }\nif (preg_match('{fo+}', $string, $matches, PREG_OFFSET_CAPTURE)) { ... }\nif (preg_match_all('{fo+}', $string, $matches)) { ... }\n$newString = preg_replace('{fo+}', 'bar', $string);\n$newString = preg_replace_callback('{fo+}', function ($match) { return strtoupper($match[0]); }, $string);\n$newString = preg_replace_callback_array(['{fo+}' => fn ($match) => strtoupper($match[0])], $string);\n$filtered = preg_grep('{[a-z]}', $elements);\n$array = preg_split('{[a-z]+}', $string);\n```\n\n----------------------------------------\n\nTITLE: Documenting Additional Fields in core_files_external::get_files for Moodle 2.9\nDESCRIPTION: Lists the additional optional fields returned by the external function core_files_external::get_files in Moodle version 2.9. These fields provide more detailed information about files.\nSOURCE: https://github.com/moodle/moodle/blob/main/files/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- timecreated: Time created.\n- filesize: File size.\n- author: File owner.\n- license: File license.\n```\n\n----------------------------------------\n\nTITLE: New report plugin dropdown methods\nDESCRIPTION: This snippet introduces methods for handling dropdowns in new report plugins, specifically save_selected_report and print_report_selector, detailing their purposes.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n* The new report plugin's can have drop down, which can be included by calling static\n  methods save_selected_report and print_report_selector in lib/classes/report_helper.php.\n  The save_selected_report helps to remember the most recently accessed report plugin.\n  print_report_selector would help to show the dropdown, on the report page. Make sure\n  to call print_report_selector after the header is printed/echoed.\n```\n\n----------------------------------------\n\nTITLE: Running Translation Tool for TinyMCE\nDESCRIPTION: This snippet utilizes Node.js to generate language files from extracted language packages. It creates JSON and PHP language string files for integration into Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_8\n\nLANGUAGE: bash\nCODE:\n```\nnode \"${MOODLEDIR}/tools/createLangStrings.mjs\"\n```\n\n----------------------------------------\n\nTITLE: Cache Store Method Changes - PHP\nDESCRIPTION: Examples of method signatures and implementations that have been changed or deprecated across versions, including cache store access, locking mechanisms, and configuration methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/cache/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core\\lock\\lock::extend\n\\core\\lock\\lock_factory::extend_lock\n\\core\\lock\\lock_factory::supports_recursion\n```\n\nLANGUAGE: php\nCODE:\n```\ncache_store::get_last_io_bytes()\ncache_store::cache_size_details()\ncache_store::store_total_size()\ncache_store::estimate_stored_size()\n```\n\nLANGUAGE: php\nCODE:\n```\ncache::set_versioned()\ncache::get_versioned()\ncache_data_source_versionable\n```\n\n----------------------------------------\n\nTITLE: Factory Definition Shorthand in PHP-DI 5.0\nDESCRIPTION: Demonstrates the shorthand syntax for defining factory functions in PHP-DI 5.0, allowing direct closure assignment without using DI\\factory().\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/php-di/change-log.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n'My\\Class' => DI\\factory(function () { ... })\n// now (optional shortcut)\n'My\\Class' => function () { ... }\n```\n\n----------------------------------------\n\nTITLE: Running the Guzzle Promise Task Queue in PHP\nDESCRIPTION: Shows how to run the Guzzle promise task queue, which is necessary for resolving promises asynchronously in an event loop.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Get the global task queue\n$queue = GuzzleHttp\\Promise\\Utils::queue();\n$queue->run();\n```\n\n----------------------------------------\n\nTITLE: Using core_component Methods in PHP\nDESCRIPTION: New methods from core_component class should be used instead of various deprecated functions for plugin management and component handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_96\n\nLANGUAGE: PHP\nCODE:\n```\ncore_component::get_plugin_types();\ncore_component::get_plugin_list();\ncore_component::get_plugin_list_with_class();\ncore_component::get_plugin_directory();\ncore_component::normalize_component();\ncore_component::get_component_directory();\ncore_component::get_plugin_list_with_file();\n```\n\n----------------------------------------\n\nTITLE: Example folder structure for component library\nDESCRIPTION: Illustrates the directory structure for organizing example files in the component library, showing how formfields.php should be placed in the examples folder.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/example-files.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\ncomponentlibrary\n examples\n      formfields.php\n```\n\n----------------------------------------\n\nTITLE: New Backpack API Functions in 3.10\nDESCRIPTION: Details new functions introduced for handling badge backpack operations and configurations.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nbadges_save_external_backpack()\nbadges_save_backpack_credentials()\nbadges_get_user_backpack()\nbadges_get_site_primary_backpack()\nbadges_open_badges_backpack_api()\nbadges_get_site_backpack()\nbadges_external_get_mapping()\n```\n\n----------------------------------------\n\nTITLE: PHP Structure Dump\nDESCRIPTION: Detailed var_dump() output showing the internal PHP object structure after parsing the CSS input\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_14\n\nLANGUAGE: php\nCODE:\n```\nclass Sabberworm\\CSS\\CSSList\\Document#4 (2) {\n  protected $aContents =>\n  array(1) {\n    [0] =>\n    class Sabberworm\\CSS\\RuleSet\\DeclarationBlock#5 (3) {\n      private $aSelectors =>\n      array(1) {\n        [0] =>\n        class Sabberworm\\CSS\\Property\\Selector#6 (2) {\n          private $sSelector =>\n          string(7) \"#header\"\n          private $iSpecificity =>\n          NULL\n        }\n      }\n      private $aRules =>\n      array(3) {\n        'margin' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#7 (4) {\n            private $sRule =>\n            string(6) \"margin\"\n            private $mValue =>\n            class Sabberworm\\CSS\\Value\\RuleValueList#12 (3) {\n              protected $aComponents =>\n              array(4) {\n                [0] =>\n                class Sabberworm\\CSS\\Value\\Size#8 (4) {\n                  private $fSize =>\n                  double(10)\n                  private $sUnit =>\n                  string(2) \"px\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(2)\n                }\n                [1] =>\n                class Sabberworm\\CSS\\Value\\Size#9 (4) {\n                  private $fSize =>\n                  double(2)\n                  private $sUnit =>\n                  string(2) \"em\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(2)\n                }\n                [2] =>\n                class Sabberworm\\CSS\\Value\\Size#10 (4) {\n                  private $fSize =>\n                  double(1)\n                  private $sUnit =>\n                  string(2) \"cm\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(2)\n                }\n                [3] =>\n                class Sabberworm\\CSS\\Value\\Size#11 (4) {\n                  private $fSize =>\n                  double(2)\n                  private $sUnit =>\n                  string(1) \"%\"\n                  private $bIsColorComponent =>\n                  bool(false)\n                  protected $iLineNo =>\n                  int(2)\n                }\n              }\n              protected $sSeparator =>\n              string(1) \" \"\n              protected $iLineNo =>\n              int(2)\n            }\n            private $bIsImportant =>\n            bool(false)\n            protected $iLineNo =>\n            int(2)\n          }\n        }\n        'font-family' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#13 (4) {\n            private $sRule =>\n            string(11) \"font-family\"\n            private $mValue =>\n            class Sabberworm\\CSS\\Value\\RuleValueList#15 (3) {\n              protected $aComponents =>\n              array(4) {\n                [0] =>\n                string(7) \"Verdana\"\n                [1] =>\n                string(9) \"Helvetica\"\n                [2] =>\n                class Sabberworm\\CSS\\Value\\CSSString#14 (2) {\n                  private $sString =>\n                  string(9) \"Gill Sans\"\n                  protected $iLineNo =>\n                  int(3)\n                }\n                [3] =>\n                string(10) \"sans-serif\"\n              }\n              protected $sSeparator =>\n              string(1) \",\"\n              protected $iLineNo =>\n              int(3)\n            }\n            private $bIsImportant =>\n            bool(false)\n            protected $iLineNo =>\n            int(3)\n          }\n        }\n        'color' =>\n        array(1) {\n          [0] =>\n          class Sabberworm\\CSS\\Rule\\Rule#16 (4) {\n            private $sRule =>\n            string(5) \"color\"\n            private $mValue =>\n            string(3) \"red\"\n            private $bIsImportant =>\n            bool(true)\n            protected $iLineNo =>\n            int(4)\n          }\n        }\n      }\n      protected $iLineNo =>\n      int(1)\n    }\n  }\n  protected $iLineNo =>\n  int(1)\n}\n```\n\n----------------------------------------\n\nTITLE: Applying Apache License 2.0 with Turnitin Copyright Notice\nDESCRIPTION: The standard Apache License 2.0 boilerplate notice as applied by Turnitin, LLC. This notice indicates the software is licensed under Apache 2.0 terms and includes the required copyright statement and license conditions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/lti1p3/LICENSE.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n   Copyright 2018 Turnitin, LLC\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n```\n\n----------------------------------------\n\nTITLE: Building AMD Module with Grunt\nDESCRIPTION: Command for building the newly generated emoji data JavaScript file using Grunt task runner. This processes the source file and prepares it for use in the Moodle application.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/emoji-data/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ngrunt amd --files=lib/amd/src/emoji/data.js\n```\n\n----------------------------------------\n\nTITLE: Final Marking of Privacy Provider Test as Final - PHP\nDESCRIPTION: The unit test for the privacy provider in `mod_assign` has been marked as final to clarify that it shouldn't be extended incorrectly. This adjustment helps maintain clean test hierarchies.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_33\n\nLANGUAGE: php\nCODE:\n```\n// The unit test for the privacy provider has been marked as final.\n// A number of core tests had been incorrectly configured to extend this test but should instead be extending \\mod_assign\\tests\\provider_testcase.\n// For more information see [MDL-81520](https://tracker.moodle.org/browse/MDL-81520)\n```\n\n----------------------------------------\n\nTITLE: Passing Request Options to Commands in Guzzle\nDESCRIPTION: This snippet illustrates how to pass request options to requests created by a command in Guzzle using the `command.request_options` property of `Guzzle\\Service\\Command\\AbstractCommand`. These options can include custom headers, query string variables, and timeout settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added `command.request_options` to `Guzzle\\\\Service\\\\Command\\\\AbstractCommand` to pass request options to requests\\n      created by a command (e.g. custom headers, query string variables, timeout settings, etc.).\"\n```\n\n----------------------------------------\n\nTITLE: Replacing Deprecated Functions for PHP 7.2 Compatibility\nDESCRIPTION: This snippet discusses the replacement of the deprecated each() function with a foreach loop to improve compatibility and performance in the current PHP environment.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/pear/readme_moodle.txt#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nMDL-60281 - replaced deprecated function each() with foreach loop for PHP7.2 compatibility\n```\n\n----------------------------------------\n\nTITLE: Removed Functions in Moodle 4.4\nDESCRIPTION: List of removed functions in Moodle 4.4, including search_generate_text_SQL, core_text::reset_caches(), and print_error().\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_61\n\nLANGUAGE: PHP\nCODE:\n```\nsearch_generate_text_SQL()\ncore_text::reset_caches()\nrenderer_base::should_display_main_logo()\nprint_error()\ncore\\task\\manager::ensure_adhoc_task_qos()\n```\n\n----------------------------------------\n\nTITLE: Git Push Command for New Branch\nDESCRIPTION: Command to push local changes to a remote repository on a newly created feature branch.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/plist/CONTRIBUTING.md#2025-04-21_snippet_3\n\nLANGUAGE: console\nCODE:\n```\ngit push origin feature/created-branch\n```\n\n----------------------------------------\n\nTITLE: Deprecating enrol_self_enrol_form Class - PHP\nDESCRIPTION: This snippet advises that the `enrol_self_enrol_form` class has been deprecated, with a recommendation to use `enrol_self\\form\\enrol_form` instead for better code practices and future support.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_17\n\nLANGUAGE: php\nCODE:\n```\n// Class enrol_self_enrol_form is deprecated, use enrol_self\\form\\enrol_form instead\n// For more information see [MDL-84142](https://tracker.moodle.org/browse/MDL-84142)\n```\n\n----------------------------------------\n\nTITLE: Fixing RichText Colors After Namespace Change\nDESCRIPTION: This snippet describes a fix in PhpSpreadsheet addressing an issue where Richtext colors were not being read correctly after a namespace change. This ensures that colors in Richtext elements are accurately interpreted and displayed, maintaining visual consistency in spreadsheet documents. The fix ensures backwards compatibility after the namespace change.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_15\n\nLANGUAGE: PHP\nCODE:\n```\n\"Richtext colors were not being read correctly after namespace change [#2458](https://github.com/PHPOffice/PhpSpreadsheet/issues/2458)\"\n```\n\n----------------------------------------\n\nTITLE: Example Image Files Structure\nDESCRIPTION: Shows an example of image files placed in the correct folder structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-images.md#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n static\n      moodle\n          getting-started\n             adding-images\n                 wildebeest-1200.jpg\n                 kitten1.png\n                 kitten2.png\n```\n\n----------------------------------------\n\nTITLE: Example Good Commit Message Format in Console\nDESCRIPTION: Demonstrates the correct way to format a commit message with a clear title and separated body content.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/plist/CONTRIBUTING.md#2025-04-21_snippet_2\n\nLANGUAGE: console\nCODE:\n```\ndocs(readme): document design improvement change content\n\nfix orthography\nremove out of date paragraph\nfix broken links\n```\n\n----------------------------------------\n\nTITLE: AI Action Settings Form Class in PHP\nDESCRIPTION: Form class that now automatically includes action buttons, removing the need for manual button addition.\nSOURCE: https://github.com/moodle/moodle/blob/main/ai/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n\\core_ai\\form\\action_settings_form\n```\n\n----------------------------------------\n\nTITLE: Configuring IDNA Support in Moodle\nDESCRIPTION: Configuration setting that enables international domain name support in URLs. Requires PEAR Net_IDNA2 module for punycode conversion of internationalized hostnames. Available from Moodle version 4.4.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.EnableIDNA.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nCore.EnableIDNA\nTYPE: bool\nDEFAULT: false\nVERSION: 4.4.0\n```\n\n----------------------------------------\n\nTITLE: Customizing Markdown Parser Configuration\nDESCRIPTION: Example of instantiating the MarkdownExtra parser directly to customize configuration variables before transformation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nuse Michelf\\MarkdownExtra;\n$parser = new MarkdownExtra;\n$parser->fn_id_prefix = \"post22-\";\n$my_html = $parser->transform($my_text);\n```\n\n----------------------------------------\n\nTITLE: Adding AI Action Settings Hook in PHP\nDESCRIPTION: New hook interface for AI provider plugins to add form elements for action settings configuration.\nSOURCE: https://github.com/moodle/moodle/blob/main/ai/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core_ai\\hook\\after_ai_action_settings_form_hook\n```\n\n----------------------------------------\n\nTITLE: New Method for Retrieving Feedback PDF File Areas in PHP (Moodle 4.1)\nDESCRIPTION: Adds a new method get_user_data_file_areas() in feedback/editpdf/locallib.php to return necessary file areas for retrieving a complete feedback PDF.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nget_user_data_file_areas()\n```\n\n----------------------------------------\n\nTITLE: Defining Output.SortAttr Directive\nDESCRIPTION: Defines the Output.SortAttr configuration setting as a boolean. When enabled, it sorts HTML attributes by name before writing back to the document. This ensures consistent attribute order in the output, which helps to mitigate issues caused by specific bugs in FCKeditor.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Output.SortAttr.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nOutput.SortAttr\nTYPE: bool\nVERSION: 3.2.0\nDEFAULT: false\n--DESCRIPTION--\n<p>\n  If true, HTML Purifier will sort attributes by name before writing them back\n  to the document, converting a tag like: <code>&lt;el b=\"\" a=\"\" c=\"\" /&gt;</code>\n  to <code>&lt;el a=\"\" b=\"\" c=\"\" /&gt;</code>. This is a workaround for\n  a bug in FCKeditor which causes it to swap attributes order, adding noise\n  to text diffs. If you're not seeing this bug, chances are, you don't need\n  this directive.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Documenting Addition of endtourlabel Property in Moodle 4.0\nDESCRIPTION: Explains the addition of the 'endtourlabel' property to the 'tourconfig' object returned by the tool_usertours_fetch_and_start_tour external method.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/usertours/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.0 ===\n* The `tourconfig` property returned by the `tool_usertours_fetch_and_start_tour`\n  external method has also an `endtourlabel` property that contains the label to be used\n  for the end tour button.\n```\n\n----------------------------------------\n\nTITLE: Example Javascript import path change\nDESCRIPTION: This code snippet shows an example of how to update the import path for javascript modules to use the correct AMD module names when updating Bootstrap in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nimport Manipulator from '../dom/manipulator.js'\n        to:\n    import Manipulator from '../dom/manipulator'\n```\n\n----------------------------------------\n\nTITLE: Fixing Documentation Instantiation Example\nDESCRIPTION: This snippet describes a fix related to a documentation instantiation example in PhpSpreadsheet. The fix ensures that the example is correct and up-to-date, making it easier for new users to understand and use the library. This enhances the usability of the documentation and lowers the barrier to entry for new users.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_18\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix documentation, instantiation example [#2564](https://github.com/PHPOffice/PhpSpreadsheet/issues/2564)\"\n```\n\n----------------------------------------\n\nTITLE: Finding Lamejs Version (Linux)\nDESCRIPTION: This command utilizes `cat` and `grep` to extract the version number of Lamejs from the `package.json` file on Linux. Alternatively, `jq` can be used as well.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncat package.json | grep lamejs\nor\njq -r '.devDependencies.\"lamejs\"' package.json\n```\n\n----------------------------------------\n\nTITLE: Compiling mimeTeX on Windows\nDESCRIPTION: This snippet provides the steps required to compile mimeTeX using MinGW-w64 on a Windows system. Install MinGW-w64, navigate to the source directory, set the PATH for mingw-w64\\bin, and compile using gcc.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/tex/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\nset path=%path%;c:\\mingw-w64\\bin\n```\n\nLANGUAGE: shell\nCODE:\n```\nc:\\mingw\\bin\\gcc -DAA -DWINDOWS mimetex.c gifsave.c -lm -o mimetex.exe\n```\n\n----------------------------------------\n\nTITLE: Deprecation of remove_contact_button Template - PHP\nDESCRIPTION: This entry notes the deprecation of the `core_message/remove_contact_button` template, which will be removed in a future release.\nSOURCE: https://github.com/moodle/moodle/blob/main/message/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n// Deprecation notice\n// core_message/remove_contact_button template will be removed in future releases.\n\n```\n\n----------------------------------------\n\nTITLE: Adding Bool Encoding to Query::build\nDESCRIPTION: This snippet demonstrates the addition of the ability to encode boolean values as integers within the `Query::build` method in version 2.7.0. This feature might be useful for compatibility with systems that expect integer representations of booleans.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/CHANGELOG.md#2025-04-21_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Setting Nested Values in Guzzle Collection\nDESCRIPTION: This code snippet shows how to set a value into an array using a nested key in Guzzle using the `Guzzle\\Common\\Collection::setPath($path, $value)` method. This enables setting values within multi-dimensional arrays using a path string.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added `Guzzle\\\\Common\\\\Collection::setPath($path, $value)` to set a value into an array using a nested key\\n  (e.g. `$collection->setPath('foo/baz/bar', 'test'); echo $collection['foo']['bar']['bar'];`)\"\n```\n\n----------------------------------------\n\nTITLE: Removal of 'use_template' Template - PHP\nDESCRIPTION: The 'use_template' template has been removed, indicating an effort to streamline template usage and reduce redundancy in the code base.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_42\n\nLANGUAGE: php\nCODE:\n```\n// The 'use_template' template has been removed as it is not needed anymore.\n// For more information see [MDL-81744](https://tracker.moodle.org/browse/MDL-81744)\n```\n\n----------------------------------------\n\nTITLE: Component Path Handler Function Structure\nDESCRIPTION: Callback function signature for plugins to handle file paths. Returns itemid and filepath for given filearea and args.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_79\n\nLANGUAGE: PHP\nCODE:\n```\n<component>_get_path_from_pluginfile($filearea, $args)\n```\n\n----------------------------------------\n\nTITLE: Copying TinyMCE JSON Language File\nDESCRIPTION: This snippet copies the generated `tinystrings.json` file to the Moodle directory for further processing and integration.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_9\n\nLANGUAGE: bash\nCODE:\n```\ncp tinystrings.json \"${MOODLEDIR}/tinystrings.json\"\n```\n\n----------------------------------------\n\nTITLE: Updating Event Handling in Guzzle from 3.x to 4.x\nDESCRIPTION: This snippet illustrates the change in event handling from Guzzle 3.x to 4.x, specifically how to add or remove event subscribers. The move from `EventDispatcher` to `Emitter` necessitates using `attach` and `detach` methods instead of `addSubscriber` and `removeSubscriber`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n$mock = new Mock();\n// 3.x\n$request->getEventDispatcher()->addSubscriber($mock);\n$request->getEventDispatcher()->removeSubscriber($mock);\n// 4.x\n$request->getEmitter()->attach($mock);\n$request->getEmitter()->detach($mock);\n```\n\n----------------------------------------\n\nTITLE: Deprecating `core/modal_factory`\nDESCRIPTION: The `core/modal_factory` has been deprecated. Use `ModalType.create` instead, noting that it does not support the `trigger` option.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_25\n\n\n\n----------------------------------------\n\nTITLE: Defining Local Plugin Capabilities in PHP\nDESCRIPTION: Implements capability definitions for local Moodle plugins, specifying access controls and context levels.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$local_nicehack_capabilities = array(\n    'local/nicehack:nicecapability' => array(\n        'captype' => 'read',\n        'contextlevel' => CONTEXT_SYSTEM,\n    ),\n);\n```\n\n----------------------------------------\n\nTITLE: Configuring Moodle Data Module Event Mappings\nDESCRIPTION: Defines event name mappings for the data module (mod_data) in Moodle, including tag deletion and comment management capabilities.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/data/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\ntagsdeleted,mod_data\ndata:comment,mod_data\ndata:managecomments,mod_data\n```\n\n----------------------------------------\n\nTITLE: Updating Course Module Edit Actions in PHP\nDESCRIPTION: course_get_cm_edit_actions is now deprecated. Formats should extend core_courseformat\\output\\local\\content\\cm\\controlmenu instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/UPGRADING.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n// Old code (deprecated)\n$actions = course_get_cm_edit_actions($cm, $section);\n\n// New code\n// Extend core_courseformat\\output\\local\\content\\cm\\controlmenu class\nclass MyFormatControlMenu extends \\core_courseformat\\output\\local\\content\\cm\\controlmenu {\n    // Implement custom logic\n}\n```\n\n----------------------------------------\n\nTITLE: Replacing Box/Spout with OpenSpout\nDESCRIPTION: Box/Spout has been removed and replaced by OpenSpout.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_47\n\n\n\n----------------------------------------\n\nTITLE: Deprecating display_options and build_query_sql Methods in PHP\nDESCRIPTION: Removed parameters $recurse and $showhidden from the display_options and build_query_sql methods due to implementation changes. Users should now utilize the new display_options_form and build_query methods respectively.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nprotected function display_options() { /* Deprecated: use display_options_form() */ }\nprotected function build_query_sql() { /* Deprecated: use build_query() */ }\n```\n\n----------------------------------------\n\nTITLE: Loading Core Moodle Template in UI Component Library\nDESCRIPTION: This snippet demonstrates how to load a core Moodle template using mustache shortcode syntax in the UI Component library. It specifically shows how to include the 'core/notification_error' template.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/moodle-templates.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n{{</* mustache template=\"core/notification_error\" */>}}\n{{</* /mustache */>}}\n```\n\n----------------------------------------\n\nTITLE: Decorating Streams with FnStream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to decorate a stream with custom functionality using FnStream in GuzzleHttp\\Psr7.  It decorates a stream by adding a custom rewind function that outputs messages before and after the original rewind operation. This allows extending streams without creating concrete classes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n```php\n\nuse GuzzleHttp\\Psr7;\n\n$stream = Psr7\\Utils::streamFor('hi');\n$fnStream = Psr7\\FnStream::decorate($stream, [\n    'rewind' => function () use ($stream) {\n        echo 'About to rewind - ';\n        $stream->rewind();\n        echo 'rewound!';\n    }\n]);\n\n$fnStream->rewind();\n// Outputs: About to rewind - rewound!\n```\n```\n\n----------------------------------------\n\nTITLE: Adding New Getter Method in Renderer Base - PHP\nDESCRIPTION: This snippet introduces a new getter method `\\renderer_base::get_page`, which provides improved functionality for theme rendering in the Moodle plugin architecture. This method is useful for retrieving the current page context in theme development. No additional dependencies are required for its usage.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nclass \\renderer_base {\n    public function get_page() {\n        // Returns information about the current page\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Eliminating Xlsx Reader Warning for Missing Sz Tag\nDESCRIPTION: This snippet describes a fix in the Xlsx Reader of PhpSpreadsheet that eliminates a warning issued when no 'sz' tag is found for RichText. The fix ensures that the reader handles cases where the 'sz' tag is missing gracefully, preventing unnecessary warnings during file parsing. This enhances the user experience and improves the robustness of the XLSX reader.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\n\"Eliminating Xlsx Reader warning when no sz tag for RichText. [Issue #2542](https://github.com/PHPOffice/PhpSpreadsheet/issues/2542) [PR #2550](https://github.com/PHPOffice/PhpSpreadsheet/pull/2550)\"\n```\n\n----------------------------------------\n\nTITLE: Creating Cache Adapters in Guzzle\nDESCRIPTION: This code snippet demonstrates how to easily create cache adapters in Guzzle using `Guzzle\\Cache\\CacheAdapterFactory::fromCache()`. This simplifies the process of setting up different caching mechanisms within Guzzle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added `Guzzle\\\\Cache\\\\CacheAdapterFactory::fromCache()` to more easily create cache adapters\"\n```\n\n----------------------------------------\n\nTITLE: Directory Structure for Content Files\nDESCRIPTION: Shows the basic directory structure for storing Markdown content files in the component library.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/component-library-backend.md#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n content\n     bootstrap\n     moodle\n```\n\n----------------------------------------\n\nTITLE: Custom Field Controller Method Reference - PHP\nDESCRIPTION: References to various controller methods that have been changed or deprecated across Moodle versions, including file handling modifications and structure definitions.\nSOURCE: https://github.com/moodle/moodle/blob/main/customfield/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\core_customfield\\handler::restore_instance_data_from_backup()\n\\core_customfield\\data_controller::backup_define_structure()\n\\core_customfield\\data_controller::restore_define_structure()\n\\customfield_select\\field_controller::get_options_array\n\\core_customfield\\handler::get_field_config_form()\n\\core_customfield\\handler::setup_edit_page()\n```\n\n----------------------------------------\n\nTITLE: Template Tag References\nDESCRIPTION: Template tag examples used in the mod_data\\templates class for field name and description.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/data/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n##otherfields##\n[[FIELD#name]]\n[[FIELD#description]]\n```\n\n----------------------------------------\n\nTITLE: Fixing Markdown Table Rendering Discrepancy\nDESCRIPTION: This snippet describes a fix in PhpSpreadsheet that addresses a discrepancy between the way markdown tables are rendered in ReadTheDocs and in PHPStorm. The fix ensures consistent rendering of markdown tables, improving the overall user experience and maintainability of documentation. This contributes to a more unified and predictable documentation environment.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_16\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix discrepancy between the way markdown tables are rendered in ReadTheDocs and in PHPStorm [#2520](https://github.com/PHPOffice/PhpSpreadsheet/issues/2520)\"\n```\n\n----------------------------------------\n\nTITLE: Including GeoIP2 Phar Archive in PHP\nDESCRIPTION: PHP code to require the GeoIP2 phar archive, which is an alternative installation method to Composer. This single line includes the entire packaged library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nrequire 'geoip2.phar';\n```\n\n----------------------------------------\n\nTITLE: Installing Laravel Serializable Closure with Composer\nDESCRIPTION: This command installs the Laravel Serializable Closure package using Composer, a dependency manager for PHP. This package allows for the serialization of closures in PHP applications.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/laravel/serializable-closure/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n\"composer require laravel/serializable-closure\"\n```\n\n----------------------------------------\n\nTITLE: Removed Deprecated Method in Moodle 5.0\nDESCRIPTION: Documentation noting the removal of the deprecated mnet_peer::get_public_key() method in Moodle 5.0. For more information, users are directed to the corresponding Moodle tracker issue MDL-78304.\nSOURCE: https://github.com/moodle/moodle/blob/main/mnet/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- Remove deprecated mnet_peer::get_public_key()\n\n  For more information see [MDL-78304](https://tracker.moodle.org/browse/MDL-78304)\n```\n\n----------------------------------------\n\nTITLE: PHP Component Version Check\nDESCRIPTION: XML configuration for version-independent plugin environment checks in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_92\n\nLANGUAGE: xml\nCODE:\n```\n<PLUGIN name=\"component_name\">\n```\n\n----------------------------------------\n\nTITLE: Pushing Git Tags to Trigger Release Process\nDESCRIPTION: Command to push Git tags to the remote repository to trigger the release process.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_6\n\nLANGUAGE: bash\nCODE:\n```\ngit push --tags\n```\n\n----------------------------------------\n\nTITLE: Compiling mimeTeX on Apple OSX\nDESCRIPTION: Guidelines for compiling mimeTeX on Apple OSX using XCode command line tools. The snippet uses the cc command with architecture flags to create a Darwin executable.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/tex/readme_moodle.txt#2025-04-21_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ncc -DAA -arch i386 -arch x86_64 -mmacosx-version-min=10.5 mimetex.c gifsave.c -lm -o mimetex.darwin\n```\n\n----------------------------------------\n\nTITLE: Adding Utils::redactUserInfo() Method\nDESCRIPTION: This snippet shows the addition of the `Utils::redactUserInfo()` method in version 2.7.0. The method likely redacts sensitive user information from URIs or other data structures, enhancing security and privacy.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/CHANGELOG.md#2025-04-21_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: HTMLPurifier Lexer Implementation Parameters\nDESCRIPTION: Defines the Core.LexerImpl parameter which controls lexer implementation selection. Can be null for auto-detection, a string identifier for manual override (DOMLex or DirectLex), or a custom lexer object implementing HTMLPurifier_Lexer interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.LexerImpl.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.LexerImpl\nTYPE: mixed/null\nVERSION: 2.0.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: Checking Nullable Parameter Type Hints in Mustache Library\nDESCRIPTION: Command for using PHP CodeSniffer to detect nullable method parameters that need correct type hinting in the Mustache library integration.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphpcs --sniffs=PHPCompatibility.FunctionDeclarations.RemovedImplicitlyNullableParam lib/mustache\n```\n\n----------------------------------------\n\nTITLE: Installing PHPMailer via Composer Command\nDESCRIPTION: This command installs PHPMailer via Composer package manager from the command line, automatically resolving and installing dependencies.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ncomposer require phpmailer/phpmailer\n```\n\n----------------------------------------\n\nTITLE: Running PHPUnit Tests for Mustache.php\nDESCRIPTION: Command to run the PHPUnit test suite to ensure code changes don't break existing functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/CONTRIBUTING.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nphpunit\n```\n\n----------------------------------------\n\nTITLE: Plugin Name String Definition - Legacy vs New Style\nDESCRIPTION: Demonstrates the transition from legacy plugin name string definition to the standardized format used in Moodle plugins, with changes in string naming conventions.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// Legacy Style (Pre-2.2)\n$string['aiken'] = 'Aiken format';\n$string['aiken_help'] = 'This is a simple format ...';\n$string['aiken_link'] = 'qformat/aiken';\n\n// New Standard Style (2.2 Onwards)\n$string['pluginname'] = 'Aiken format';\n$string['pluginname_help'] = 'This is a simple format ...';\n$string['pluginname_link'] = 'qformat/aiken';\n```\n\n----------------------------------------\n\nTITLE: Updating Documentation Location for Moodle xAPI (Version 4.5)\nDESCRIPTION: Indicates that from version 4.5 onwards, the API changes documentation has been moved to UPGRADING.md file. Refers to MDL-81125 for more information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xapi/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\n=== 4.5 Onwards ===\n\nThis file has been replaced by UPGRADING.md. See MDL-81125 for further information.\n```\n\n----------------------------------------\n\nTITLE: Disabling Multibyte Functions in CSS Parsing\nDESCRIPTION: Configuring the parser to use regular string functions instead of multibyte functions for faster parsing\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$settings = \\Sabberworm\\CSS\\Settings::create()->withMultibyteSupport(false);\n$parser = new \\Sabberworm\\CSS\\Parser($css, $settings);\n```\n\n----------------------------------------\n\nTITLE: Namespace References for Database Export/Import Classes\nDESCRIPTION: Code namespaces referenced for database export and import functionality, showing the class hierarchy for CSV and ODS exporters.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/data/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\mod_data\\local\\exporter\\csv_entries_exporter\n\\mod_data\\local\\exporter\\ods_entries_exporter\n\\mod_data\\local\\exporter\\entries_exporter\n\\mod_data\\local\\exporter\\utils::data_exportdata()\n\\mod_data\\local\\importer\\csv_importer\n\\mod_data\\local\\importer\n```\n\n----------------------------------------\n\nTITLE: Modifying CSS Selectors in Moodle's Code Highlighter Filter\nDESCRIPTION: This CSS snippet demonstrates how to adjust selector specificity to avoid conflicts with theme styles. It shows the process of removing code[class*=\"language-\"] selectors and ensuring proper CSS structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/codehighlighter/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\npre[class*=\"language-\"]::-moz-selection,\npre[class*=\"language-\"] ::-moz-selection {\n\npre[class*=\"language-\"]::selection,\npre[class*=\"language-\"] ::selection {\n```\n\n----------------------------------------\n\nTITLE: Using Native Text Formatting Tags in HTML\nDESCRIPTION: Demonstrates various native HTML text formatting tags including mark, del, s, ins, u, small, strong, and em elements with their semantic meanings.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<p>You can use the mark tag to <mark>highlight</mark> text.</p>\n<p><del>This line of text is meant to be treated as deleted text.</del></p>\n<p><s>This line of text is meant to be treated as no longer accurate.</s></p>\n<p><ins>This line of text is meant to be treated as an addition to the document.</ins></p>\n<p><u>This line of text will render as underlined</u></p>\n<p><small>This line of text is meant to be treated as fine print.</small></p>\n<p><strong>This line rendered as bold text.</strong></p>\n<p><em>This line rendered as italicized text.</em></p>\n```\n\n----------------------------------------\n\nTITLE: Downloading Axe Core Library using npm\nDESCRIPTION: Demonstrates how to download the latest version of axe-core library using npm in a temporary directory. Includes instructions for finding the version number.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/behat/axe/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmkdir -p /tmp/axe\ncd /tmp/axe\nnpm install axe-core --save-dev\n```\n\n----------------------------------------\n\nTITLE: Importing the PHP CSS Parser Library via Composer for Moodle\nDESCRIPTION: Shell script for importing sabberworm/php-css-parser library into the Moodle codebase. The script creates a temporary directory, uses Composer to download the library, then copies the files to the appropriate location in the Moodle lib directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ntempdir=`mktemp -d`\ncd $tempdir\ncomposer require sabberworm/php-css-parser\ncd -\ncp lib/php-css-parser/readme_moodle* $tempdir\nrm -rf lib/php-css-parser\ncp -rf $tempdir/vendor/sabberworm/php-css-parser lib/php-css-parser\ncp -rf $tempdir/readme* lib/php-css-parser\n```\n\n----------------------------------------\n\nTITLE: Applying Apache License 2.0 Boilerplate Notice\nDESCRIPTION: Standard boilerplate notice for applying the Apache License 2.0 to a project. This template should be included in source files with the bracketed fields replaced with specific project information.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/core/fonts/open-sans/LICENSE-2.0.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n   Copyright [yyyy] [name of copyright owner]\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n```\n\n----------------------------------------\n\nTITLE: Building JavaScript Libraries and C Wrapper\nDESCRIPTION: This command initiates the build process for the JavaScript libraries and the C wrapper. It configures and builds the project using the defined build system. This command relies on the build utilities installed in the previous step and the configuration defined in the Makefile.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_8\n\nLANGUAGE: Shell\nCODE:\n```\n\"make js\"\n```\n\n----------------------------------------\n\nTITLE: Modifying Library Selector in H5P Editor JavaScript\nDESCRIPTION: Instructions to comment out a specific line in the H5P editor library selector JavaScript file to prevent displaying the Hub Selector in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nthis.$selector.appendTo($element);\n```\n\n----------------------------------------\n\nTITLE: Setting Credentials for XML-RPC Client in PHP\nDESCRIPTION: The xmlrpc_client::setCredentials method is added for supporting HTTP Basic authorization.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_16\n\nLANGUAGE: PHP\nCODE:\n```\n\"* Added support for HTTP Basic authorization through the\n   xmlrpc_client::setCredentials method.\"\n```\n\n----------------------------------------\n\nTITLE: Clearing Draft Area Files in PHP\nDESCRIPTION: A new function has been added to delete files in a draft area in the core_files module.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_8\n\nLANGUAGE: PHP\nCODE:\n```\nfile_clear_draft_area()\n```\n\n----------------------------------------\n\nTITLE: Defining LTI Content Validation Error String in Moodle\nDESCRIPTION: This string definition adds a language label for an error that occurs when selecting LTI content fails validation. This is part of Moodle's language system for internationalization in the mod_lti module.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/lti/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nselectcontentvalidationerror,mod_lti\n```\n\n----------------------------------------\n\nTITLE: Course Reset Form Definition Update\nDESCRIPTION: Example of adding static form element in course reset page to improve UI consistency.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_64\n\nLANGUAGE: PHP\nCODE:\n```\n$mform->addElement('static', 'assigndelete', get_string('delete'));\n```\n\n----------------------------------------\n\nTITLE: Configuring Moodle Feedback Module Access\nDESCRIPTION: A configuration entry that declares public access for the mod_feedback module in Moodle's module system.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/feedback/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\npublic,mod_feedback\n```\n\n----------------------------------------\n\nTITLE: New Mustache Template for Context Header - PHP\nDESCRIPTION: This snippet describes the introduction of a new mustache template `core/context_header` that allows themes to customize the context header display. Themes can override this template to modify its appearance as needed. Requirements include knowledge of mustache templating within the Moodle framework.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n{# core/context_header mustache template #}\n<div class=\"context-header\">\n    {{#context}}\n        <h1>{{context.title}}</h1>\n    {{/context}}\n</div>\n```\n\n----------------------------------------\n\nTITLE: Applying Moodle Customizations to PhpSpreadsheet\nDESCRIPTION: A shell script for applying Moodle-specific customizations to the installed PhpSpreadsheet library. The script applies a patch file and commits the changes to the repository.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: sh\nCODE:\n```\ngit apply lib/phpspreadsheet/moodle.diff\ngit add .\ngit commit\n```\n\n----------------------------------------\n\nTITLE: Fix Partial Function Name Matching in Formula Translation\nDESCRIPTION: This snippet describes a fix for partial function name matching during formula translation in PhpSpreadsheet, specifically when translating from Russian to English. The fix ensures that function names are correctly matched, preventing errors in formula conversion. This contributes to improved localization and interoperability.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix partial function name matching when translating formulae from Russian to English [Issue #2533](https://github.com/PHPOffice/PhpSpreadsheet/issues/2533) [PR #2534](https://github.com/PHPOffice/PhpSpreadsheet/pull/2534)\"\n```\n\n----------------------------------------\n\nTITLE: Explaining the Moodle Acronym\nDESCRIPTION: This snippet provides the full form of the acronym 'Moodle' as part of a quiz. It highlights the modular and dynamic aspects of the learning environment. The expected output is a true/false response regarding the accuracy of the acronym's explanation.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_in_category.gift.txt#2025-04-21_snippet_3\n\nLANGUAGE: html\nCODE:\n```\n// question: 45  name: Moodle acronym\n::Moodle acronym::[html]Moodle is an acronym for <span style\\=\"font-style\\: italic;\">Modular Object-Oriented Dynamic Learning Environment</span>.{TRUE}\n```\n\n----------------------------------------\n\nTITLE: Deprecated quiz_add_quiz_question() for Random Questions (Moodle 3.5)\nDESCRIPTION: Adding \"random\" questions to a quiz via `quiz_add_quiz_question()` has been deprecated. Developers should use `quiz_add_random_questions()` instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_18\n\nLANGUAGE: text\nCODE:\n```\n\"Adding \\\"random\\\" questions to a quiz via quiz_add_quiz_question() has been deprecated. Please use quiz_add_random_questions().\"\n```\n\n----------------------------------------\n\nTITLE: Added Behat Step for URL Matching\nDESCRIPTION: This snippet adds a new Behat step to check the current URL. The new Behat step `\\behat_general::the_url_should_match()` has been added to allow checking the current URL. You can use it to check whether a user has been redirected to the expected location.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_50\n\nLANGUAGE: Behat\nCODE:\n```\n\"\\behat_general::the_url_should_match()\"\n```\n\n----------------------------------------\n\nTITLE: Deprecated Constants in Quiz Statistics Calculator Class in PHP\nDESCRIPTION: The constant calculator::TIME_TO_CACHE has been deprecated in version 4.3 as the caching behavior has changed to always return pre-computed statistics regardless of computation time.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/report/statistics/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncalculator::TIME_TO_CACHE\n```\n\n----------------------------------------\n\nTITLE: Deprecated Quiz Statistics Graph Color Function in PHP\nDESCRIPTION: The function quiz_statistics_graph_get_new_colour() was deprecated in version 3.2 in favor of using the new charting library's functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/report/statistics/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nquiz_statistics_graph_get_new_colour()\n```\n\n----------------------------------------\n\nTITLE: Building Component Library with Grunt\nDESCRIPTION: Command to build the Moodle Component Library pages using Grunt task runner. Requires Node.js installation.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nGrunt componentlibrary\n```\n\n----------------------------------------\n\nTITLE: External Function Call - tool_mobile::get_config (4.5)\nDESCRIPTION: Updates to the get_config function to return timezone and forcetimezone settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ntool_mobile::get_config\n```\n\n----------------------------------------\n\nTITLE: Creating a Matrix Object\nDESCRIPTION: This code snippet illustrates how to instantiate a new Matrix object by providing a 2D array representation of the matrix. It is important to provide the array structure to the constructor.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$grid = [\n    [16,  3,  2, 13],\n    [ 5, 10, 11,  8],\n    [ 9,  6,  7, 12],\n    [ 4, 15, 14,  1],\n];\n\n$matrix = new Matrix\\Matrix($grid);\n```\n\n----------------------------------------\n\nTITLE: SMS Message Truncation Method\nDESCRIPTION: New method in the SMS gateway class for truncating message content based on gateway length limits.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_14\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_sms\\gateway::truncate_message()\n```\n\n----------------------------------------\n\nTITLE: External Function Call - tool_mobile::tool_mobile_call_external_function (3.7)\nDESCRIPTION: New function introduced to handle multiple external function calls and return consolidated responses.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\ntool_mobile::tool_mobile_call_external_function\n```\n\n----------------------------------------\n\nTITLE: Differentiating Table Summary and Caption in HTML\nDESCRIPTION: Explains the distinction between table 'summary' attribute and 'caption' element. The caption identifies the table, while the summary describes its contents.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_9\n\n\n\n----------------------------------------\n\nTITLE: Deprecated PHP Classes\nDESCRIPTION: List of deprecated and removed PHP classes in mod_data module version 5.0\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/data/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\ndata_preset_importer\ndata_preset_existing_importer\ndata_preset_upload_importer\ndata_import_preset_zip_form\n```\n\n----------------------------------------\n\nTITLE: Deprecated jQuery Methods Replacement\nDESCRIPTION: Replacing deprecated jQuery methods with modern JavaScript equivalents in Moodle codebase\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jquery/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Old (deprecated)\nvar trimmedString = jQuery.trim(originalString);\n\n// New (recommended)\nvar trimmedString = originalString.trim();\n```\n\n----------------------------------------\n\nTITLE: Installing Development Dependencies using Composer\nDESCRIPTION: Command to install development dependencies for PhpSpreadsheet using Composer package manager.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer install\n```\n\n----------------------------------------\n\nTITLE: Fixing Xlsx/Xls Writer Handling of Inline Strings\nDESCRIPTION: This snippet describes a fix in the Xlsx/Xls Writer of PhpSpreadsheet regarding the handling of inline strings. The fix ensures that inline strings are correctly written to XLSX and XLS files, preventing data corruption or formatting issues. This enhancement improves the compatibility and reliability of spreadsheet file writing.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_14\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix Xlsx/Xls Writer handling of inline strings. [Issue #353](https://github.com/PHPOffice/PhpSpreadsheet/issues/353) [PR #2569](https://github.com/PHPOffice/PhpSpreadsheet/pull/2569)\"\n```\n\n----------------------------------------\n\nTITLE: Installing jq on macOS using Homebrew\nDESCRIPTION: This snippet demonstrates how to install 'jq' on macOS using Homebrew, necessary for running the build script.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/html/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nbrew install jq\n```\n\n----------------------------------------\n\nTITLE: Defining Event Names for Quiz Module in Moodle\nDESCRIPTION: This snippet lists event identifiers used in the Moodle quiz module. These events are triggered when specific actions occur, such as attempts being deleted, grades being deleted, overrides being removed, or random questions being selected from categories.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nattemptsdeleted,mod_quiz\ngradesdeleted,mod_quiz\nuseroverridesdeleted,mod_quiz\ngroupoverridesdeleted,mod_quiz\nrandomcoursecatwithsubcat,mod_quiz\nrandomcoursewithsubcat,mod_quiz\nrandomsystemwithsubcat,mod_quiz\n```\n\n----------------------------------------\n\nTITLE: Deprecated Classes Reference\nDESCRIPTION: List of deprecated classes in Moodle that should no longer be used. These include list-related and AWS classes that have been replaced by newer implementations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_28\n\nLANGUAGE: PHP\nCODE:\n```\n\\moodle_list\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\list_item\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\aws\\admin_settings_aws_region\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\aws\\aws_helper\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\aws\\client_factory\n```\n\n----------------------------------------\n\nTITLE: Creating an Annotated Git Tag for Release\nDESCRIPTION: Commands to create an annotated Git tag for a new release version.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_5\n\nLANGUAGE: bash\nCODE:\n```\ngit tag -a 1.2.3\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.TargetBlank Configuration in Moodle\nDESCRIPTION: This snippet defines the HTML.TargetBlank configuration setting for Moodle. When enabled, it adds target=blank attributes to all outgoing links, including links from HTTPS to HTTP versions of pages. The setting is of boolean type, introduced in Moodle version 4.4.0, and is disabled by default.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TargetBlank.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.TargetBlank\nTYPE: bool\nVERSION: 4.4.0\nDEFAULT: FALSE\n--DESCRIPTION--\nIf enabled, <code>target=blank</code> attributes are added to all outgoing links.\n(This includes links from an HTTPS version of a page to an HTTP version.)\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Extending Notification Constructor in PHP\nDESCRIPTION: Two new optional parameters have been added to the \\core\\output\\notification constructor: a nullable string for title and a nullable string for icon.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_20\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\output\\notification::__construct(null|string $title, null|string $icon)\n```\n\n----------------------------------------\n\nTITLE: Dropping Data with DroppingStream in GuzzleHttp\nDESCRIPTION: This snippet demonstrates how to use DroppingStream to limit the amount of data written to an underlying stream. Once the size of the underlying stream exceeds a specified limit, any further data written to the DroppingStream will be dropped. It uses GuzzleHttp\\Psr7 to create and manipulate the streams.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n```php\nuse GuzzleHttp\\Psr7;\n\n// Create an empty stream\n$stream = Psr7\\Utils::streamFor();\n\n// Start dropping data when the stream has more than 10 bytes\n$dropping = new Psr7\\DroppingStream($stream, 10);\n\n$dropping->write('01234567890123456789');\necho $stream; // 0123456789\n```\n```\n\n----------------------------------------\n\nTITLE: Deprecation of get_right_avg_row Method - PHP\nDESCRIPTION: The method `gradereport_grader::get_right_avg_row()` has been deprecated and now throws an exception when called. This change aims to improve function handling and provides clearer guidance for developers maintaining their code.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_22\n\nLANGUAGE: php\nCODE:\n```\n// The method gradereport_grader::get_right_avg_row() has been finally deprecated and will now throw an exception if called.\n// For more information see [MDL-78890](https://tracker.moodle.org/browse/MDL-78890)\n```\n\n----------------------------------------\n\nTITLE: mod_quiz_renderer::start_attempt_button Argument Change (Moodle 3.1)\nDESCRIPTION: The third argument to `mod_quiz_renderer::start_attempt_button` has been changed from a warning string to a `mod_quiz_preflight_check_form`.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_23\n\nLANGUAGE: text\nCODE:\n```\n\"The third argument to mod_quiz_renderer::start_attempt_button has been changed\n  from a warning string to a mod_quiz_preflight_check_form.\"\n```\n\n----------------------------------------\n\nTITLE: Installing FPDI with FPDF using Composer (JSON)\nDESCRIPTION: Composer configuration for installing FPDI with FPDF. Requires setasign/fpdf version 1.8.* and setasign/fpdi version ^2.5.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_0\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"require\": {\n        \"setasign/fpdf\": \"1.8.*\",\n        \"setasign/fpdi\": \"^2.5\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Removing Grading Options Form Class in PHP\nDESCRIPTION: The '\\mod_assign_grading_options_form' class has been removed since it is no longer used.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n\\mod_assign_grading_options_form\n```\n\n----------------------------------------\n\nTITLE: Defining External URI Disable Setting\nDESCRIPTION: This snippet defines a boolean configuration setting for disabling external links in the Moodle platform. It details the version, default value, and purpose, emphasizing its anti-spam functionality. The setting restricts external links and images, allowing only domain-specific content.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.DisableExternal.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nURI.DisableExternal\nTYPE: bool\nVERSION: 1.2.0\nDEFAULT: false\n--DESCRIPTION--\nDisables links to external websites.  This is a highly effective anti-spam\nand anti-pagerank-leech measure, but comes at a hefty price: nolinks or\nimages outside of your domain will be allowed.  Non-linkified URIs will\nstill be preserved.  If you want to be able to link to subdomains or use\nabsolute URIs, specify %URI.Host for your website.\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Deprecation of delete_course callback\nDESCRIPTION: This snippet announces the final deprecation of the xxx_delete_course callback, urging users to transition to the event observer for course content deletion.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n* The final deprecation of xxx_delete_course callback means that this function will no longer be called.\n  Please use the observer for event \\core\\event\\course_content_deleted instead.\n```\n\n----------------------------------------\n\nTITLE: Ensuring Valid Function or Variable Name - PHP\nDESCRIPTION: This snippet introduces a function to determine if a given string qualifies as a valid function or variable name, enhancing validation within the EvalMath library and improving overall error handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/evalmath/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nfunction isValidFuncOrVarName($name) {\n    // Example validation logic\n    return preg_match('/^[a-zA-Z_][a-zA-Z0-9_]*$/', $name);\n}\n?>\n```\n\n----------------------------------------\n\nTITLE: Fixing Code Style Issues using Composer\nDESCRIPTION: Command to automatically fix most coding style issues in the codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncomposer fix\n```\n\n----------------------------------------\n\nTITLE: Adding Group Support to H5P Activity Manager Methods (Moodle 4.1)\nDESCRIPTION: Several methods in the H5P activity module now accept an optional $currentgroup parameter to better support group functionality in H5P activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/h5pactivity/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nThe following methods now accept an optional `$currentgroup` parameter in order to better support groups:\n  - `\\mod_h5pactivity\\local\\manager::get_active_users_join`\n  - `\\mod_h5pactivity\\local\\manager::get_report`\n  - `\\mod_h5pactivity\\local\\report\\participants` constructor\n```\n\n----------------------------------------\n\nTITLE: Removed Method Reference in Moodle Enrol Self Plugin\nDESCRIPTION: Documents the removal of get_welcome_email_contact method from enrol_self_plugin class, suggesting use of enrol_plugin::get_welcome_message_contact instead. Related to MDL-81185.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/self/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\nenrol_self_plugin::get_welcome_email_contact\n```\n\n----------------------------------------\n\nTITLE: Cloning Amazon S3 PHP Class Repository\nDESCRIPTION: This snippet documents the source of the Amazon S3 PHP Class repository and provides links for reference. It highlights the need to verify local changes with each upgrade to ensure compliance and functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/s3/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n\n// Cloned from https://github.com/tpyo/amazon-s3-php-class.git\n\n// Documentation for repository:\n// https://github.com/tpyo/amazon-s3-php-class\n// Local changes applied:\n// (verify on each upgrade of the library if they have been applied\n// upstream. Remove the local changes if so)\n\n// MDL-67031 php74 compliance. Change curly to square braces.\n// MDL-77342 PHP 8.2 compliance. Add property $file in class S3Request.\n\n```\n\n----------------------------------------\n\nTITLE: Setting Custom DateTime Format for XML-RPC in PHP\nDESCRIPTION: Configures a custom format for parsing received datetime values in XML-RPC. This allows support for non-standard datetime formats, including those with timezone specifiers.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc\\PhpXmlRpc::$xmlrpc_datetime_format = 'custom_format';\n```\n\n----------------------------------------\n\nTITLE: Updating GeoIP2 Supporting Files\nDESCRIPTION: Commands to update auxiliary files like CHANGELOG, README, composer.json, and LICENSE for both GeoIP2 and MaxMind libraries in the Moodle installation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\nmv GeoIP2-php-X.Y.Z/CHANGELOG.md /path/to/moodle/lib/maxmind/GeoIp2/\nmv GeoIP2-php-X.Y.Z/README.md /path/to/moodle/lib/maxmind/GeoIp2/\nmv GeoIP2-php-X.Y.Z/composer.json /path/to/moodle/lib/maxmind/GeoIp2/\nmv GeoIP2-php-X.Y.Z/LICENSE /path/to/moodle/lib/maxmind/GeoIp2/\n\nmv MaxMind-DB-Reader-php-X.Y.Z/LICENSE /path/to/moodle/lib/maxmind/MaxMind/\nmv MaxMind-DB-Reader-php-X.Y.Z/CHANGELOG.md /path/to/moodle/lib/maxmind/MaxMind/\nmv MaxMind-DB-Reader-php-X.Y.Z/README.md /path/to/moodle/lib/maxmind/MaxMind/\nmv MaxMind-DB-Reader-php-X.Y.Z/composer.json /path/to/moodle/lib/maxmind/MaxMind/\n```\n\n----------------------------------------\n\nTITLE: New column_groupby Method in PHP\nDESCRIPTION: New aggregation method in the base aggregation class to decide if report tables should group by specified columns.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// New column_groupby method\npublic function column_groupby() {\n    // Logic to determine grouping\n}\n```\n\n----------------------------------------\n\nTITLE: Updating Callback Options in Portfolio Integration\nDESCRIPTION: Demonstrates the change in set_callback_options method signature from using file path to component name in Moodle 2.4. The modification affects how portfolio callback options are configured and referenced.\nSOURCE: https://github.com/moodle/moodle/blob/main/portfolio/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n$button->set_callback_options('assignment_portfolio_caller', array('id' => $this->cm->id, 'fileid' => $file->get_id()), '/mod/assignment/locallib.php');\n```\n\nLANGUAGE: PHP\nCODE:\n```\n$button->set_callback_options('assignment_portfolio_caller', array('id' => $this->cm->id, 'fileid' => $file->get_id()), 'mod_assignment');\n```\n\n----------------------------------------\n\nTITLE: External Function Call - tool_mobile::tool_mobile_get_plugins_supporting_mobile (3.5)\nDESCRIPTION: Enhanced function returning additional plugin information for Moodle Mobile 3.5.0 compatibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\ntool_mobile::tool_mobile_get_plugins_supporting_mobile\n```\n\n----------------------------------------\n\nTITLE: Rendering Moodle Icon with Pix Helper\nDESCRIPTION: Example of using the pix template helper to render an up arrow icon with localized string support.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/iconsizes.md#2025-04-21_snippet_0\n\nLANGUAGE: handlebars\nCODE:\n```\n{{#pix}}t/up, moodle, {{#str}} up, moodle {{/str}}{{/pix}}\n```\n\n----------------------------------------\n\nTITLE: Multiple Choice Question Example\nDESCRIPTION: This snippet shows the format for a multiple-choice question in Moodle. It includes the question text, answer options, and specific feedback for correct and incorrect answers. The answers use specific markup to identify correct answers (=) and wrong answers (~). The feedback is displayed based on the selected answer.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_2\n\nLANGUAGE: text\nCODE:\n```\n// multiple choice with specified feedback for right and wrong answers\n::Q2:: What's between orange and green in the spectrum?\n{\n    =yellow # right; good!\n    ~red # [html]wrong, it's yellow\n    ~[plain]blue # wrong, it's yellow\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing DOLLARDE() and DOLLARFR() functions in PhpSpreadsheet\nDESCRIPTION: This snippet describes a fix for the `DOLLARDE()` and `DOLLARFR()` functions within PhpSpreadsheet.  The fix addresses an issue where these functions would produce incorrect results when the dollar value was negative. This ensures accurate calculations involving negative dollar values.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fix bug with `DOLLARDE()` and `DOLLARFR()` functions when the dollar value is negative [Issue #2578](https://github.com/PHPOffice/PhpSpreadsheet/issues/2578) [PR #2579](https://github.com/PHPOffice/PhpSpreadsheet/pull/2579)\"\n```\n\n----------------------------------------\n\nTITLE: Creating and Using OGVPlayer in JavaScript\nDESCRIPTION: Shows how to create an OGVPlayer instance, set options, append it to the DOM, set the source, play the media, and add an event listener.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n// Create a new player with the constructor\nvar player = new OGVPlayer();\n\n// Or with options\nvar player = new OGVPlayer({\n\tdebug: true,\n\tdebugFilter: /demuxer/\n});\n\n// Now treat it just like a video or audio element\ncontainerElement.appendChild(player);\nplayer.src = 'path/to/media.ogv';\nplayer.play();\nplayer.addEventListener('ended', function() {\n  // ta-da!\n});\n```\n\n----------------------------------------\n\nTITLE: Configuration Setting Example in PHP\nDESCRIPTION: Example of setting the cache templates configuration in Moodle's config.php file. This boolean setting determines if templates should be cached.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_78\n\nLANGUAGE: PHP\nCODE:\n```\n$CFG->cachetemplates = false;\n```\n\n----------------------------------------\n\nTITLE: Implementing Deprecated Icon Registration in PHP\nDESCRIPTION: A new method get_deprecated_icons() has been added to the icon_system class to register deprecated icons. Plugins can implement a callback to register their own deprecated icons.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_19\n\nLANGUAGE: PHP\nCODE:\n```\n\\core\\output\\::get_deprecated_icons()\n```\n\nLANGUAGE: PHP\nCODE:\n```\npluginname_get_deprecated_icons()\n```\n\n----------------------------------------\n\nTITLE: Removing `useexternalyui` Configuration Setting\nDESCRIPTION: The `useexternalyui` configuration setting has been removed as a part of the migration away from YUI.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_42\n\n\n\n----------------------------------------\n\nTITLE: Setting OGVLoader Base Path in JavaScript\nDESCRIPTION: Sets the base path for ogv.js resource files. This is necessary when loading ogv.js through a bundler or when the auto-detection of the path fails.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_0\n\nLANGUAGE: javascript\nCODE:\n```\nOGVLoader.base = '/path/to/resources';\n```\n\n----------------------------------------\n\nTITLE: Defining Hidden Elements Array in PHP\nDESCRIPTION: Default configuration array specifying HTML elements (script and style) whose contents should be removed when the elements are not allowed in the HTML definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.HiddenElements.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\narray (\n  'script' => true,\n  'style' => true,\n)\n```\n\n----------------------------------------\n\nTITLE: Modifying Return Type of get_rgb() Method in Brickfield Accessibility Color Test (PHP)\nDESCRIPTION: In Moodle 4.0, the get_rgb() method in the brickfield_accessibility_color_test class has been modified to return either an array or null, instead of an array or false as in previous versions. This change affects the /admin/tool/brickfield/ component.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nclasses/local/htmlchecker/common/brickfield_accessibility_color_test::get_rgb()\n```\n\n----------------------------------------\n\nTITLE: Formatting Phone Numbers in Multiple Formats\nDESCRIPTION: Demonstrates various phone number formatting options provided by libphonenumber, including E164, National, and International formats\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Produces \"+41446681800\"\necho $phoneUtil->format($swissNumberProto, \\libphonenumber\\PhoneNumberFormat::E164);\n\n// Produces \"044 668 18 00\"\necho $phoneUtil->format($swissNumberProto, \\libphonenumber\\PhoneNumberFormat::NATIONAL);\n\n// Produces \"+41 44 668 18 00\"\necho $phoneUtil->format($swissNumberProto, \\libphonenumber\\PhoneNumberFormat::INTERNATIONAL);\n```\n\n----------------------------------------\n\nTITLE: Adding PHP 8.2 Compatibility Attributes with Shell Command\nDESCRIPTION: Bash command to add the #[AllowDynamicProperties] attribute to all PHP class definitions in the Google API library. This fixes PHP 8.2 compatibility warnings about dynamic properties deprecation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/google/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncd lib/google/src\nfor file in `find . -name '*.php' `; do sed -i '/^class /i #[AllowDynamicProperties]' $file; done\n```\n\n----------------------------------------\n\nTITLE: Updated get_active_conditions Method in PHP\nDESCRIPTION: Modification of the 'get_active_conditions' method to include a new parameter for condition availability checks.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n// Updated get_active_conditions method\npublic function get_active_conditions($checkavailable) {\n    // Logic for retrieving conditions\n}\n```\n\n----------------------------------------\n\nTITLE: Installing PHPMatrix via Composer\nDESCRIPTION: This snippet demonstrates how to install the PHPMatrix library using Composer, ensuring that version 3.0 or higher is used.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_0\n\nLANGUAGE: shell\nCODE:\n```\ncomposer require markbaker/matrix:^3.0\n```\n\n----------------------------------------\n\nTITLE: Added date Aggregation Type in PHP\nDESCRIPTION: Introduction of a new date aggregation type applicable to reports in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Example implementation of date aggregation\npublic function date_aggregation() {\n    // Logic for date aggregation\n}\n```\n\n----------------------------------------\n\nTITLE: Modifying Custom Glossary Format Plugin in PHP\nDESCRIPTION: This snippet describes the process of editing the newly created format file. It involves replacing all occurrences of 'TEMPLATE' with the new format name 'THENAME' and making custom modifications to the format.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/formats/README.txt#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n5.-Edit the THENAME_format.php file. Change every ocurrence of TEMPLATE to\n   THENAME.\n...\n8.-Edit the THENAME_format.php. Make your format modifications and reload your\n   web page to see them in your glossary. This file has been commented to make\n   things easier to understand (further suggestions welcome!)\n```\n\n----------------------------------------\n\nTITLE: Component Library Grunt Task Terminal Output\nDESCRIPTION: Shows the expected terminal output when running the componentlibrary Grunt task. The output includes site building statistics, CSS processing information, and task completion status, confirming successful generation of the component library pages.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-pages.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nRunning \"componentlibrary:docsBuild\" task\nBuilding sites \n                   | EN\n+------------------+-----+\n  Pages            | 113\n  Paginator pages  |   0\n  Non-page files   |  18\n  Static files     |  18\n  Processed images |   0\n  Aliases          |   7\n  Sitemaps         |   1\n  Cleaned          |   0\n\nTotal in 913 ms\nRunning \"componentlibrary:cssBuild\" task\nRendering Complete, saving .css file...\nWrote CSS to /var/www/repositories/cl_master/moodle/admin/tool/componentlibrary/hugo/dist/css/docs.css\nWrote Source Map to /var/www/repositories/cl_master/moodle/admin/tool/componentlibrary/hugo/dist/css/docs.css.map\nRunning \"componentlibrary:indexBuild\" task\n\nDone.\n```\n\n----------------------------------------\n\nTITLE: Prepending Content to PSR-7 Body by Rewriting in PHP\nDESCRIPTION: Illustrates how to prepend content to a PSR-7 body by rewriting the entire contents, including handling stream positioning.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n// assuming our response body stream only contains: \"abcd\"\n$body = $response->getBody();\n$body->rewind();\n$contents = $body->getContents(); // abcd\n// seeking the stream to beginning\n$body->rewind();\n$body->write('ef'); // stream contains \"efcd\"\n$body->write($contents); // stream contains \"efabcd\"\n```\n\n----------------------------------------\n\nTITLE: Dynamic Loading of ogv.js with Version Parameter\nDESCRIPTION: Shows how to dynamically load ogv.js with a version parameter for cache busting, using the OGVVersion symbol.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_4\n\nLANGUAGE: javascript\nCODE:\n```\nvar script = document.createElement('script');\nscript.src = 'ogv.js?version=' + encodeURIComponent(OGVVersion);\ndocument.querySelector('head').appendChild(script);\n```\n\n----------------------------------------\n\nTITLE: Configuration Path Reference\nDESCRIPTION: Reference path to the module configuration directory used in various API changes.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n/auth/shibboleth/*\n```\n\n----------------------------------------\n\nTITLE: Implementing Cloneable Post Class in PHP\nDESCRIPTION: Example class implementation showing how to use the Cloneable trait with readonly properties in a Post class.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/spatie/php-cloneable/README.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nclass Post\n{\n    use Cloneable;\n\n    public readonly string $title;\n    \n    public readonly string $author;\n\n    public function __construct(string $title, string $author)\n    {\n        $this->title = $title;\n        $this->author = $author;\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Language String Change in TinyMCE 4.5\nDESCRIPTION: Documentation about a change in version 4.5 where the 'helplinktext' language string is no longer required by editor plugins. Instead, the 'pluginname' will be used in the help dialogue.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n- The `helplinktext` language string is no longer required by editor plugins, instead the `pluginname` will be used in the help dialogue.\n```\n\n----------------------------------------\n\nTITLE: Installing Node.js Build Utilities\nDESCRIPTION: This command uses npm (Node Package Manager) to install the necessary build utilities defined in the project's package.json file. These utilities are required for building and configuring the JavaScript components.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_7\n\nLANGUAGE: Shell\nCODE:\n```\n\"npm install\"\n```\n\n----------------------------------------\n\nTITLE: Adding `set_kebab_trigger` to Action Menu Component\nDESCRIPTION: The actionmenu component has a `set_kebab_trigger` method that sets up the action menu for use in kebab menus.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_41\n\n\n\n----------------------------------------\n\nTITLE: Downloading and Installing Mustache.php in Moodle\nDESCRIPTION: Commands for downloading a specific version of Mustache.php from GitHub, extracting it, and moving the necessary files to the appropriate Moodle directory structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nwget https://github.com/bobthecow/mustache.php/archive/v2.13.0.zip\nunzip v2.13.0.zip\ncd mustache.php-2.13.0/\nmv src /path/to/moodle/lib/mustache/\nmv LICENSE /path/to/moodle/lib/mustache/\n```\n\n----------------------------------------\n\nTITLE: Deprecating Method gradereport_grader::get_right_avg_row()\nDESCRIPTION: The method get_right_avg_row() is now deprecated and will throw an exception when called. This change affects the gradereport_grader class and its method handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/report/grader/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\ngradereport_grader::get_right_avg_row()\n```\n\n----------------------------------------\n\nTITLE: Defining URI Host Blacklist\nDESCRIPTION: This snippet defines a configuration for a list of forbidden URI hostnames in Moodle, intended to block spam and malicious domains. The default value is set to an empty array, which can be modified to include specific blacklist entries as needed. The snippet ensures any hostname matching the entries will be rejected by the URI handling system.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.HostBlacklist.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nURI.HostBlacklist\nTYPE: list\nVERSION: 1.3.0\nDEFAULT: array()\n--DESCRIPTION--\nList of strings that are forbidden in the host of any URI. Use it to kill\ndomain names of spam, etc. Note that it will catch anything in the domain,\nso <tt>moo.com</tt> will catch <tt>moo.com.example.com</tt>.\n--# vim: et sw=4 sts=4\n?>\n```\n\n----------------------------------------\n\nTITLE: Downloading GeoIP2 PHP Libraries\nDESCRIPTION: Commands to download the latest versions of GeoIP2-php and MaxMind-DB-Reader-php libraries from GitHub repositories.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nwget https://github.com/maxmind/GeoIP2-php/archive/vX.Y.Z.zip\nwget https://github.com/maxmind/MaxMind-DB-Reader-php/archive/vX.Y.Z.zip\n```\n\n----------------------------------------\n\nTITLE: Changing get_user_attempts Function in mod_h5pactivity - PHP\nDESCRIPTION: The `get_user_attempts` function now returns the total number of attempts, enhancing the feedback provided on user performance in H5P activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_44\n\nLANGUAGE: php\nCODE:\n```\n// The external function get_user_attempts now returns the total number of attempts.\n// For more information see [MDL-82775](https://tracker.moodle.org/browse/MDL-82775)\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Tidy Additional Fixes\nDESCRIPTION: Configuration section that specifies additional HTML Tidy fixes to be added to the default set. The configuration uses INI-style formatting with type lookup and version 2.0.0 specifications.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TidyAdd.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.TidyAdd\nTYPE: lookup\nVERSION: 2.0.0\nDEFAULT: array()\n```\n\n----------------------------------------\n\nTITLE: Deprecation of PHPUnit Testcase Helper Methods - PHP\nDESCRIPTION: This snippet highlights the removal of deprecated helper methods from PHPUnit advanced test cases, indicating a shift towards updated methodologies in testing frameworks. Developers need to adjust their tests accordingly.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_56\n\nLANGUAGE: php\nCODE:\n```\n  * The following phpunit advanced testcase helper methods, deprecated since 3.10, have been removed and can no longer be used:\n  - `createXMLDataSet`\n  - `createCsvDataSet`\n  - `createArrayDataSet`\n  - `loadDataSet`\n```\n\n----------------------------------------\n\nTITLE: Configuration Definition for Style Block Character Escaping\nDESCRIPTION: Configuration parameter definition that controls whether special HTML characters (<, >, &) in style blocks should be escaped to their hex equivalents (\\3C, \\3E, \\26). This is particularly relevant when style content will be used inline versus in external stylesheets.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.ExtractStyleBlocks.Escaping.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nFilter.ExtractStyleBlocks.Escaping\nTYPE: bool\nVERSION: 3.0.0\nDEFAULT: true\nALIASES: Filter.ExtractStyleBlocksEscaping, FilterParam.ExtractStyleBlocksEscaping\n```\n\n----------------------------------------\n\nTITLE: Matching Question Example\nDESCRIPTION: Shows a matching question format with countries and their capitals\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/examples.txt#2025-04-21_snippet_1\n\nLANGUAGE: gift\nCODE:\n```\nMatch the following countries with their corresponding capitals. {\n    =Canada -> Ottawa\n    =Italy  -> Rome\n    =Japan  -> Tokyo\n    =India  -> New Delhi\n}\n```\n\n----------------------------------------\n\nTITLE: Complete directory structure for component library examples\nDESCRIPTION: Shows the recommended directory structure for organizing all types of example files including classes, pages, and templates in the component library.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/example-files.md#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\ncomponentlibrary\n classes\n     local\n         examples\n             [component folder]\n                 [example classes]\n examples\n     [example page]\n templates\n     examples\n         [component folder]\n             [example templates]\n```\n\n----------------------------------------\n\nTITLE: Moodle MULTICHOICE Question Formatting\nDESCRIPTION: This snippet shows how to define a MULTICHOICE question in Moodle. The format uses curly braces to encapsulate the question and answer options.  The `=Apple#Correct` indicates that \"Apple\" is the correct answer.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/multianswer/tests/fixtures/broken_multianswer_1.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n\"{1:MULTICHOICE:=Apple#Correct}\"\n```\n\n----------------------------------------\n\nTITLE: Integrating Bennu PHP Library\nDESCRIPTION: Code snippet demonstrating how to include the Bennu library in a PHP application by importing the main library file. Requires specifying the correct path to the Bennu library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/bennu/README.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n   include($path_to_bennu.'/library/lib/bennu.inc.php');\n   \n   // the rest of your code goes here\n?>\n```\n\n----------------------------------------\n\nTITLE: Guzzle v5 Event Listener Migration\nDESCRIPTION: Shows the previous event-based approach for modifying requests before sending in Guzzle version 5\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nuse GuzzleHttp\\Event\\BeforeEvent;\n$client = new GuzzleHttp\\Client();\n// Get the emitter and listen to the before event.\n$client->getEmitter()->on('before', function (BeforeEvent $e) {\n    // Guzzle v5 events relied on mutation\n    $e->getRequest()->setHeader('X-Foo', 'Bar');\n});\n```\n\n----------------------------------------\n\nTITLE: HTML XHTML Configuration Parameter Definition\nDESCRIPTION: Defines the XHTML output configuration parameter with type, default value, versioning and deprecation details. This setting determines if the output should be XHTML 1.0 or HTML 4.01 compliant. The parameter has been deprecated since version 1.7.0 in favor of HTML.Doctype.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.XHTML.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nHTML.XHTML\nTYPE: bool\nDEFAULT: true\nVERSION: 1.1.0\nDEPRECATED-VERSION: 1.7.0\nDEPRECATED-USE: HTML.Doctype\n--DESCRIPTION--\nDetermines whether or not output is XHTML 1.0 or HTML 4.01 flavor.\n--ALIASES--\nCore.XHTML\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Form elements example structure\nDESCRIPTION: Specific example showing the directory structure for form elements documentation, including the locations of example classes, pages, and templates.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/example-files.md#2025-04-21_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\ncomponentlibrary\n classes\n     local\n         examples\n             formelements\n                 example.php\n examples\n     formfields.php\n templates\n     examples\n         formelements\n             toggles.mustache\n```\n\n----------------------------------------\n\nTITLE: Defining ID Prefixing for User-Submitted Attributes\nDESCRIPTION: This snippet defines a configurable string attribute, IDPrefix, that allows a prefix to be added to user-submitted IDs. It also specifies a version and default value. The purpose is to prevent potential conflicts with core page IDs in Moodle by easily modifying user-submitted IDs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Attr.IDPrefix.txt#2025-04-21_snippet_0\n\nLANGUAGE: string\nCODE:\n```\n\"Attr.IDPrefix\\nTYPE: string\\nVERSION: 1.2.0\\nDEFAULT: ''\\n--DESCRIPTION--\\nString to prefix to IDs.  If you have no idea what IDs your pages may use,\\nyou may opt to simply add a prefix to all user-submitted ID attributes so\\nthat they are still usable, but will not conflict with core page IDs.\\nExample: setting the directive to 'user_' will result in a user submitted\\n'foo' to become 'user_foo'  Be sure to set %HTML.EnableAttrID to true\\nbefore using this.\\n--# vim: et sw=4 sts=4\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Strict Value Rejection for XML-RPC in PHP\nDESCRIPTION: Enables stricter parsing of received XML data. When set to true, the library will reject incoming XML with data not conforming to expected formats for various value types.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc\\PhpXmlRpc::$xmlrpc_reject_invalid_values = true;\n```\n\n----------------------------------------\n\nTITLE: Deprecating ESM gradereport_grader/group\nDESCRIPTION: The JavaScript ESM (ECMAScript Module) gradereport_grader/group is deprecated. Developers should transition to using core_course/actionbar/group instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/report/grader/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\ngradereport_grader/group\n```\n\n----------------------------------------\n\nTITLE: Deprecating `share_activity` Method\nDESCRIPTION: The `share_activity` method in the `core\\moodlenet\\activity_sender` class has been deprecated and renamed to `share_resource`. The new method is coming from the base class `core\\moodlenet\\resource_sender`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_8\n\n\n\n----------------------------------------\n\nTITLE: Executing Commands in Guzzle\nDESCRIPTION: This code shows how to execute commands using `Guzzle\\Service\\ClientInterface::execute()`, which now accepts an array, single command, or Traversable. This provides flexibility in how commands are executed within a Guzzle service client.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\n\"`Guzzle\\\\Service\\\\ClientInterface::execute()` now accepts an array, single command, or Traversable\"\n```\n\n----------------------------------------\n\nTITLE: Updating File Properties Access in PHP (Moodle 4.3)\nDESCRIPTION: Shows how to update code that previously accessed properties directly on stored_file instances. New methods on the tree object should be used instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n// Old way:\n$file->portfoliobutton\n$file->timemodified\n$file->fileurl\n\n// New way:\n$renderer->get_portfolio_button($file)\n$tree->get_modified_time($file)\n$tree->get_file_url($file)\n```\n\n----------------------------------------\n\nTITLE: Updating choice_refresh_events() Function in Moodle 3.3.2\nDESCRIPTION: The choice_refresh_events() function now accepts two additional parameters for refining updates to specific instances. It can take module instance object/ID and course module object/ID as optional parameters.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/choice/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nchoice_refresh_events()\n```\n\n----------------------------------------\n\nTITLE: Configuring Core.RemoveInvalidImg Directive in Moodle\nDESCRIPTION: This configuration sets up the Core.RemoveInvalidImg directive, which enables pre-emptive URI checking in img tags. It's a boolean value, defaulting to true, introduced in version 1.3.0. Setting it to false reverts to pre-1.3.0 behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.RemoveInvalidImg.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.RemoveInvalidImg\nTYPE: bool\nDEFAULT: true\nVERSION: 1.3.0\n--DESCRIPTION--\n\n<p>\n  This directive enables pre-emptive URI checking in <code>img</code>\n  tags, as the attribute validation strategy is not authorized to\n  remove elements from the document. Revert to pre-1.3.0 behavior by setting to false.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Adding Positive Integer Regex Rule for Quiz Grading\nDESCRIPTION: This snippet includes the introduction of a new regex rule for validation of positive integers, specifically for use in manual grading page size preferences, ensuring values remain positive.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/pear/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nMDL-71126 - Quiz: Manual grading page size preference can get stuck at 0\n            Including in this change:\n             - New positiveint regex rule to check if the value is a positive integer\n```\n\n----------------------------------------\n\nTITLE: Configuring 404 Error Page Front Matter in YAML\nDESCRIPTION: YAML front matter that configures the 404 error page with metadata such as title, layout, URL path, and search engine directives. It specifies that the page should not be indexed by search engines and should be excluded from the sitemap.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/404.md#2025-04-21_snippet_0\n\nLANGUAGE: YAML\nCODE:\n```\n---\ntitle: \"404 - File not found\"\nlayout: 404\ndescription: \"\"\nurl: /404.html\nrobots: noindex,follow\nsitemap_exclude: true\n---\n```\n\n----------------------------------------\n\nTITLE: Customizing Activity Icon Colors with CSS Variables in Moodle Themes\nDESCRIPTION: This snippet describes how to customize activity icon colors in Moodle themes using CSS variables. The new variables are $activity-icon-administration-bg, $activity-icon-assessment-bg, $activity-icon-collaboration-bg, $activity-icon-communication-bg, $activity-icon-content-bg, $activity-icon-interactivecontent-bg. All previous `$activity-icon-*-filter` elements can be removed, as they are no longer in use.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_48\n\nLANGUAGE: CSS\nCODE:\n```\n\"$activity-icon-administration-bg, $activity-icon-assessment-bg, $activity-icon-collaboration-bg, $activity-icon-communication-bg, $activity-icon-content-bg, $activity-icon-interactivecontent-bg\"\n```\n\n----------------------------------------\n\nTITLE: Deprecated Quiz Functions and Files (Moodle 2.6 - 3.3)\nDESCRIPTION: The following functions and files are deprecated in various Moodle versions, from 2.6 to 3.3.  These functions should no longer be used and will be removed in future versions.  Developers should find alternative implementations.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n\"- quiz_groups_member_removed_handler - deprecated since 2.6\n  - quiz_groups_group_deleted_handler - deprecated since 2.6\n  - quiz_groups_members_removed_handler - deprecated since 2.6\n  - The method quiz_settings::confirm_start_attempt_message - deprecated in Moodle 3.1\n  - The field view_page::$startattemptwarning - deprecated in Moodle 3.1\n  - attempts_report::load_relevant_students - deprecated since 3.2\n  - quiz_statistics_graph_get_new_colour - deprecated since 3.2\n  - The file mod/quiz/report/overview/overviewgraph.php - deprecated since 3.2\n  - The file mod/quiz/report/statistics/statistics_graph.php - deprecated since 3.2\n  - quiz_print_overview - deprecated since 3.3\"\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Safe Scripting Settings in Moodle\nDESCRIPTION: This configuration snippet defines the HTML.SafeScripting setting for Moodle. It specifies the type as 'lookup', sets the version to 4.5.0, and defaults to an empty array. The setting controls whether external script tags are permitted in documents, with inline scripting being disallowed and scripts required to match an explicit whitelist.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.SafeScripting.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.SafeScripting\nTYPE: lookup\nVERSION: 4.5.0\nDEFAULT: array()\n```\n\n----------------------------------------\n\nTITLE: Configuring Script Comment Handling in HTML Purifier\nDESCRIPTION: Configuration parameter that determines if HTML Purifier should add comments to script tag contents for legacy browser compatibility. The default value is set to true, with an alias Core.CommentScriptContents.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Output.CommentScriptContents.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nOutput.CommentScriptContents\nTYPE: bool\nVERSION: 2.0.0\nDEFAULT: true\n--DESCRIPTION--\nDetermines whether or not HTML Purifier should attempt to fix up the\ncontents of script tags for legacy browsers with comments.\n--ALIASES--\nCore.CommentScriptContents\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Replacing split with explode in Moodle Core Text\nDESCRIPTION: This snippet reflects the replacement of split() with explode() or preg_split() for string segmentation, enhancing compatibility with newer PHP versions that have deprecated split().\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/pear/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nMDL-20876 - replaced split() with explode() or preg_split() where appropriate\n```\n\n----------------------------------------\n\nTITLE: Installation Steps for FPDI in Moodle\nDESCRIPTION: Step-by-step installation instructions for integrating FPDI into Moodle system, including download, extraction, and file modification requirements. Requires updating Fpdi.php to extend 'pdf' instead of 'TCPDF'.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n1) Download the latest version of fpdi from the url above.\n2) Unzip the src directory files into this directory.\n3) Update mod/assign/feedback/editpdf/fpdi/src/Tcpdf/Fpdi.php(or whichever file it has been replaced with) to extend 'pdf' instead of 'TCPDF'.\n```\n\n----------------------------------------\n\nTITLE: Configuring URI Definition Identifier\nDESCRIPTION: Specifies a unique string identifier for custom URI definitions, which is optional and can be set to null by default. Used when implementing custom URI filters in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.DefinitionID.txt#2025-04-21_snippet_0\n\nLANGUAGE: yaml\nCODE:\n```\nURI.DefinitionID:\n  TYPE: string/null\n  VERSION: 2.1.0\n  DEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: Short Answer Question Example\nDESCRIPTION: This snippet shows the format for a short answer question in Moodle. It includes the question text, acceptable answers, and corresponding feedback.  It uses percentages to assign partial credit. The asterisk (*) represents any input, which is marked as completely wrong.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_5\n\nLANGUAGE: text\nCODE:\n```\n// question: 666  name: Shortanswer\n::Shortanswer::Which is the best animal?{\n    =Frog#Good!\n    =%50%Cat#What is it with Moodlers and cats?\n    =%0%*#Completely wrong\n}\n```\n\n----------------------------------------\n\nTITLE: Migrating from Guzzle\\Service\\Inspector\nDESCRIPTION: Illustrates how to migrate from using `Guzzle\\Service\\Inspector::fromConfig` to `Guzzle\\Common\\Collection::fromConfig` for configuration management in Guzzle clients. This involves replacing the Inspector class with the Collection class for handling configuration settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n<?php\nuse Guzzle\\Service\\Inspector;\n\nclass YourClient extends \\Guzzle\\Service\\Client\n{\n    public static function factory($config = array())\n    {\n        $default = array();\n        $required = array('base_url', 'username', 'api_key');\n        $config = Inspector::fromConfig($config, $default, $required);\n\n        $client = new self(\n            $config->get('base_url'),\n            $config->get('username'),\n            $config->get('api_key')\n        );\n        $client->setConfig($config);\n\n        $client->setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . 'client.json'));\n\n        return $client;\n    }\n?>\n```\n\n----------------------------------------\n\nTITLE: Installing PSR Log Package with Composer\nDESCRIPTION: Command to install the PSR Log package using Composer. This is a prerequisite for using the PSR-3 logger interface in your PHP project.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/log/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require psr/log\n```\n\n----------------------------------------\n\nTITLE: Deprecation of save_selected_report method\nDESCRIPTION: This snippet indicates the deprecation of report_helper::save_selected_report() method as it is no longer in use, which affects report plugin development.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n* The method report_helper::save_selected_report() has been been deprecated because it is no longer used.\n```\n\n----------------------------------------\n\nTITLE: Installing jq on Ubuntu\nDESCRIPTION: This snippet provides the command to install 'jq', a prerequisite for the build script, on Ubuntu systems.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/html/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nsudo apt-get install jq\n```\n\n----------------------------------------\n\nTITLE: Defining Safe Iframe Regular Expression\nDESCRIPTION: The snippet defines a regular expression used to match safe iframe URIs to allow specific video platforms. It specifies acceptable patterns for YouTube and Vimeo videos while noting that this directive does not support more granular control such as disabling autoplay features.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.SafeIframeRegexp.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<p>\n    A PCRE regular expression that will be matched against an iframe URI.  This is\n    a relatively inflexible scheme, but works well enough for the most common\n    use-case of iframes: embedded video.  This directive only has an effect if\n    %HTML.SafeIframe is enabled.  Here are some example values:\n</p>\n<ul>\n    <li><code>%^http://www.youtube.com/embed/%</code> - Allow YouTube videos</li>\n    <li><code>%^http://player.vimeo.com/video/%</code> - Allow Vimeo videos</li>\n    <li><code>%^http://(www.youtube.com/embed/|player.vimeo.com/video/)%</code> - Allow both</li>\n</ul>\n<p>\n    Note that this directive does not give you enough granularity to, say, disable\n    all <code>autoplay</code> videos.  Pipe up on the HTML Purifier forums if this\n    is a capability you want.\n</p>\n```\n\n----------------------------------------\n\nTITLE: Moving Path-Converter Source Files to Moodle Directory\nDESCRIPTION: Command to move the Path-Converter library source files from the downloaded zip archive to the appropriate location in the Moodle file structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/minify/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nmv path-converter-A.B.C/src/ /path/to/moodle/lib/minify/matthiasmullie-pathconverter/\n```\n\n----------------------------------------\n\nTITLE: Documenting Comment API Changes for Moodle 4.2\nDESCRIPTION: Announces the deprecation of the 'print_comments' method in the comment manager, replaced by a new system report class for listing comment data.\nSOURCE: https://github.com/moodle/moodle/blob/main/comment/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.2 ===\n  * The comment manager `print_comments` method has been deprecated, in favour of new system report class for listing\n    comment data\n```\n\n----------------------------------------\n\nTITLE: Replacing PHP Namespace References\nDESCRIPTION: Example of namespace reference replacement needed in H5P PHP files, specifically showing how to modify references to the H5PCore class.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n\\H5PCore\n```\n\n----------------------------------------\n\nTITLE: Removal of Constants - PHP\nDESCRIPTION: This note states the final deprecation of the constants `MESSAGE_DEFAULT_LOGGEDOFF` and `MESSAGE_DEFAULT_LOGGEDIN`, which are removed in this release.\nSOURCE: https://github.com/moodle/moodle/blob/main/message/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// Final removal of the following constants:\n// MESSAGE_DEFAULT_LOGGEDOFF\n// MESSAGE_DEFAULT_LOGGEDIN\n\n```\n\n----------------------------------------\n\nTITLE: HTML.TidyLevel Configuration Definition\nDESCRIPTION: Defines the configuration parameters for HTML tidying level in Moodle. Specifies the type as string, version 2.0.0, and default value of 'medium'. Includes allowed values of none, light, medium, and heavy, each controlling different levels of HTML cleanup intensity.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TidyLevel.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.TidyLevel\nTYPE: string\nVERSION: 2.0.0\nDEFAULT: 'medium'\n--ALLOWED--\n'none', 'light', 'medium', 'heavy'\n```\n\n----------------------------------------\n\nTITLE: Filter Autoloading Support in PHP\nDESCRIPTION: Added support for autoloading of filters from a specific namespace. Existing filter classes should be renamed to use this new namespace pattern for better organization.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_68\n\nLANGUAGE: PHP\nCODE:\n```\n\\filter_[filtername]\\filter\n```\n\n----------------------------------------\n\nTITLE: Installing Dependencies for CKEditor 5 Build in Node.js\nDESCRIPTION: Command to install all the necessary Node.js dependencies for the CKEditor 5 build. This needs to be run in the project directory terminal before rebuilding the editor.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/ckeditor5/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nnpm install\n```\n\n----------------------------------------\n\nTITLE: Modified Quiz Statistics Calculator Methods in PHP\nDESCRIPTION: Methods get_last_calculated_time() and get_cached() were changed in version 4.3 to always return any computed statistics that exist, rather than only returning statistics computed within the last 15 minutes.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/report/statistics/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n\\quiz_statistics\\calculator::get_last_calculated_time()\n```\n\nLANGUAGE: php\nCODE:\n```\ncalculator::get_cached()\n```\n\n----------------------------------------\n\nTITLE: Setting Extra cURL Options for XML-RPC Client in PHP\nDESCRIPTION: Configures additional protocol-specific options for the Socket HTTP transport when using XML-RPC. The options are set as an array with 'socket' or 'ssl' keys.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_6\n\nLANGUAGE: PHP\nCODE:\n```\n$client->setOption('extracurlopts', ['socket' => [], 'ssl' => []]);\n```\n\n----------------------------------------\n\nTITLE: Enhancing Hyperlink with Tel Scheme in PHP Markdown\nDESCRIPTION: This snippet describes the support for 'tel:' URL scheme added to automatic links in PHP Markdown Lib 1.4.0. Adding the 'tel:' prefix in Markdown links results in the correct conversion to an HTML link tag, enabling easier integration of phone links in documents. The input is a telephone URL in Markdown, and the output is the corresponding HTML anchor tag.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_8\n\nLANGUAGE: Markdown\nCODE:\n```\n<tel:+1-111-111-1111>\n```\n\n----------------------------------------\n\nTITLE: Deprecated Request Configuration Example\nDESCRIPTION: Illustrates the transition from older command configuration to new request options approach in Guzzle\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$command = $client->getCommand('foo', array(\n    'command.headers' => array('Test' => '123'),\n    'command.response_body' => '/path/to/file'\n));\n\n// Should be changed to:\n\n$command = $client->getCommand('foo', array(\n    'command.request_options' => array(\n        'headers' => array('Test' => '123'),\n        'save_as' => '/path/to/file'\n    )\n));\n```\n\n----------------------------------------\n\nTITLE: Deprecated Collection Inject in Guzzle\nDESCRIPTION: This code indicates that `Guzzle\\Common\\Collection::inject()` has been marked as deprecated in Guzzle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_18\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Common\\\\Collection::inject()` as deprecated.\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Cookie HTTP Only Setting in PHP\nDESCRIPTION: Configuration code for enabling/disabling HTTP only cookies in Moodle. Shows how to set the cookiehttponly parameter in config.php for both new and upgraded sites.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$CFG->cookiehttponly = true;  // To enable for upgraded sites\n$CFG->cookiehttponly = false; // To disable for new sites\n```\n\n----------------------------------------\n\nTITLE: Removal of mod_chat Module - PHP\nDESCRIPTION: Similar to the `mod_survey`, the `mod_chat` module has also been removed in Moodle 5.0. This change is intended to remove outdated functionalities and focus on more relevant features.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_28\n\nLANGUAGE: php\nCODE:\n```\n// Remove mod_chat from Moodle 5.0\n// For more information see [MDL-82457](https://tracker.moodle.org/browse/MDL-82457)\n```\n\n----------------------------------------\n\nTITLE: Configuring Core Error Collection Settings\nDESCRIPTION: Configuration block defining Core.CollectErrors property with boolean type, introduced in version 2.0.0 with a default value of false. Controls whether filtering errors are collected for user feedback, though the feature is noted as experimental.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.CollectErrors.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nCore.CollectErrors\nTYPE: bool\nVERSION: 2.0.0\nDEFAULT: false\n```\n\n----------------------------------------\n\nTITLE: HTMLPurifier Custom Filter Configuration\nDESCRIPTION: Configuration directive used to specify custom filters for HTMLPurifier. Expects an array of concrete implementations to replace the deprecated HTMLPurifier->addFilter() method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.Custom.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<code>HTMLPurifier-&gt;addFilter()</code>\n```\n\n----------------------------------------\n\nTITLE: Moving Minify Source Files to Moodle Directory\nDESCRIPTION: Command to move the Minify library source files from the downloaded zip archive to the appropriate location in the Moodle file structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/minify/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nmv minify-X.Y.ZZ/src /path/to/moodle/lib/minify/matthiasmullie-minify/\nmv minify-X.Y.ZZ/data /path/to/moodle/lib/minify/matthiasmullie-minify/\n```\n\n----------------------------------------\n\nTITLE: PHP Class Method Changes in base_controller\nDESCRIPTION: Lists deprecated and removed methods from the base_controller class with their replacements.\nSOURCE: https://github.com/moodle/moodle/blob/main/backup/util/ui/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n\\base_controller::set_copy()  // Removed - Use restore controller for storing copy information\n\\base_controller::get_copy()   // Removed - Use \\restore_controller::get_copy()\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML BlockWrapper Element for Inline Content in Block Contexts\nDESCRIPTION: Defines the HTML.BlockWrapper option as a string with default value 'p'. This setting determines the element used to wrap inline content within block contexts, specifically in blockquotes when in strict mode.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.BlockWrapper.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<blockquote>Foo</blockquote>\n```\n\nLANGUAGE: HTML\nCODE:\n```\n<blockquote><p>Foo</p></blockquote>\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Configuration Property Definition\nDESCRIPTION: Defines the Core.MaintainLineNumbers configuration property that enables line number tracking in HTML tokens. When enabled, it adds debugging capabilities but may impact performance. Requires DirectLex lexer.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.MaintainLineNumbers.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.MaintainLineNumbers\nTYPE: bool/null\nVERSION: 2.0.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: Deprecated Class Reference in Moodle Enrol Self Plugin\nDESCRIPTION: Indicates the deprecation of enrol_self_enrol_form class in favor of enrol_self\\form\\enrol_form. Related to MDL-84142.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/self/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nenrol_self_enrol_form is deprecated, use enrol_self\\form\\enrol_form instead\n```\n\n----------------------------------------\n\nTITLE: Installing PHP-DI with Composer (Shell)\nDESCRIPTION: This shell script demonstrates the installation process of PHP-DI and its dependencies using Composer. It creates a temporary directory, navigates into it, and uses Composer to require the php-di/php-di package. Subsequently, it moves the necessary files to the Moodle lib directory and adds readme instructions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/readme_moodle.md#2025-04-21_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ninstalldir=`mktemp -d`\ncd \"$installdir\"\ncomposer require php-di/php-di\ncd -\nrm -rf lib/php-di/php-di lib/php-di/invoker lib/laravel/serializable-closure\ncp -rf \"$installdir\"/vendor/php-di/php-di lib/php-di/php-di\necho \"See instructions in lib/php-di/readme_moodle.md\" > lib/php-di/php-di/readme_moodle.txt\ngit add  lib/php-di/php-di\n\ncp -rf \"$installdir\"/vendor/php-di/invoker lib/php-di/invoker\necho \"See instructions in lib/php-di/readme_moodle.md\" > lib/php-di/invoker/readme_moodle.txt\ngit add  lib/php-di/invoker\n\ncp -rf \"$installdir\"/vendor/laravel/serializable-closure lib/laravel/serializable-closure\necho \"See instructions in lib/php-di/readme_moodle.md\" > lib/laravel/serializable-closure/readme_moodle.txt\ngit add  lib/laravel/serializable-closure\n```\n\n----------------------------------------\n\nTITLE: Compiling SCSS to CSS for H5P Editor\nDESCRIPTION: Commands for compiling SCSS files to CSS within the H5P Editor PHP Library. Provides options for continuous compilation with watch mode or a one-time clean compilation.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncompass watch\n```\n\nLANGUAGE: bash\nCODE:\n```\ncompass clean && compass compile\n```\n\n----------------------------------------\n\nTITLE: Deprecated Filter Manager Method in PHP\nDESCRIPTION: The text_filtering_hash method in the filter_manager class has been finally deprecated and removed from the codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_69\n\nLANGUAGE: PHP\nCODE:\n```\n\\core_filters\\filter_manager::text_filtering_hash\n```\n\n----------------------------------------\n\nTITLE: Retrieving Blog Entries with Tags in Moodle 3.7\nDESCRIPTION: Moodle 3.7 introduces a new 'tags' field in the external function get_entries, which returns the tags associated with a blog post. This enhancement provides more comprehensive information about blog entries.\nSOURCE: https://github.com/moodle/moodle/blob/main/blog/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.7 ===\n  * External function get_entries now returns an additional field \"tags\" returning the post tags.\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Important Rule Handling\nDESCRIPTION: Controls the preservation or stripping of !important CSS modifiers. When set to false, the !important rules will be removed from user-defined CSS stylesheets.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/CSS.AllowImportant.txt#2025-04-21_snippet_0\n\nLANGUAGE: configuration\nCODE:\n```\nCSS.AllowImportant = false\n```\n\n----------------------------------------\n\nTITLE: Overriding Course Enrolment Index Page in PHP\nDESCRIPTION: Themes can now override the course enrolment index page by overriding a new course renderer method.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\nenrolment_options\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Question with Answers and HTML content\nDESCRIPTION: This snippet defines a Moodle question including possible answers. '::asdf::' is the question name, '[html]' specifies the content type as HTML. The content itself is enclosed within '<p>asdf<br></p>'. Inside the curly brackets '{}', the snippet specifies answer possibilities with associated feedback.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_encoding_windows-1252.gift.txt#2025-04-21_snippet_3\n\nLANGUAGE: none\nCODE:\n```\n// question: 19756750  name: asdf\n::asdf::[html]<p>asdf<br></p>{\n\t=<p>adf<br></p> -> asdf\n\t=<p>asdf<br></p> -> asdf\n\t=<p>asdf<br></p> -> asdf\n}\n```\n\n----------------------------------------\n\nTITLE: Running PrismJS Build Script in Moodle's Code Highlighter Filter\nDESCRIPTION: This command is used to build the PrismJS library after making necessary modifications. It's part of the upgrade process for the Code Highlighter Filter in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/codehighlighter/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n./bin/build-prism.js\n```\n\n----------------------------------------\n\nTITLE: Adding Option Disabling Method to URL Select in PHP\nDESCRIPTION: A new method set_disabled_option() has been added to the url_select class to enable or disable an option based on its URL key.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_21\n\nLANGUAGE: PHP\nCODE:\n```\n\\url_select::set_disabled_option()\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.AllowedModules Configuration in INI format\nDESCRIPTION: This snippet defines the HTML.AllowedModules configuration for HTMLPurifier. It specifies the directive type as lookup/null, version 2.0.0, and sets the default value to NULL. This configuration allows users to selectively enable or disable HTML modules without modifying doctypes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.AllowedModules.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.AllowedModules\nTYPE: lookup/null\nVERSION: 2.0.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: Adding Optional Section Name Parameter\nDESCRIPTION: Documents the addition of an optional boolean parameter $showsectionname to the render_section_links() method in version 3.11. When set to true, this parameter enables the display of section names alongside section numbers.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/section_links/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nrender_section_links($showsectionname = false)\n```\n\n----------------------------------------\n\nTITLE: Example Method Signature PHP\nDESCRIPTION: Demonstration of method changes in course format API, showing the transition from section_number to sectionnum\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ncore_courseformat\\base::set_section_number() // Deprecated\ncore_courseformat\\base::get_section_number() // Deprecated\n\ncore_courseformat\\base::set_sectionnum() // New method\ncore_courseformat\\base::get_sectionnum() // New method\n```\n\n----------------------------------------\n\nTITLE: Configuring CSS Parser Charset Settings\nDESCRIPTION: Configuring the default charset for CSS parsing, useful when the CSS file does not specify a charset\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$settings = \\Sabberworm\\CSS\\Settings::create()\n    ->withDefaultCharset('windows-1252');\n$parser = new \\Sabberworm\\CSS\\Parser($css, $settings);\n```\n\n----------------------------------------\n\nTITLE: Extracting GeoIP2 Archives\nDESCRIPTION: Commands to unzip the downloaded GeoIP2 and MaxMind database reader archives.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nunzip vX.Y.Z.zip\nunzip vX.Y.Z.zip\n```\n\n----------------------------------------\n\nTITLE: Removal of mod_survey Module - PHP\nDESCRIPTION: The `mod_survey` module has been removed in Moodle 5.0 as part of an effort to streamline the functional offerings within the platform to better serve user needs.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_27\n\nLANGUAGE: php\nCODE:\n```\n// Remove mod_survey for Moodle 5.0\n// For more information see [MDL-82457](https://tracker.moodle.org/browse/MDL-82457)\n```\n\n----------------------------------------\n\nTITLE: Defining MFA Status Constants\nDESCRIPTION: Defines two core status flags used by the Moodle MFA tool: 'inputrequired' indicating MFA input is needed, and 'setuprequired' indicating MFA setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\ninputrequired,tool_mfa\nsetuprequired,tool_mfa\n```\n\n----------------------------------------\n\nTITLE: Bootstrap Grid Class Replacement\nDESCRIPTION: Replaces the deprecated `.no-gutters` class with the new `.g-0` class in Bootstrap grid system. Ensures compatibility with newer Bootstrap versions.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: css\nCODE:\n```\n// Old: .no-gutters\n// New: .g-0\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Core.NormalizeNewlines Configuration\nDESCRIPTION: Configuration directive that controls whether HTML Purifier should normalize newlines to match the operating system default. When set to false, the system will preserve mixed newline files.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.NormalizeNewlines.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nCore.NormalizeNewlines\nTYPE: bool\nVERSION: 4.2.0\nDEFAULT: true\n```\n\nLANGUAGE: html\nCODE:\n```\n<p>\n    Whether or not to normalize newlines to the operating\n    system default.  When <code>false</code>, HTML Purifier\n    will attempt to preserve mixed newline files.\n</p>\n```\n\n----------------------------------------\n\nTITLE: HTML Button Examples with Focus States\nDESCRIPTION: Demonstrates various button styles with normal and keyboard focus states, including primary, secondary, danger, and outline variants along with clickable links.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/keyboard-access.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div id=\"focusexamples\">\n    <p> Normal buttons</p>\n    <div>\n        <span class=\"me-2\"><button class=\"btn btn-primary\">Primary</button></span>\n        <span class=\"me-2\"><button class=\"btn btn-secondary\">Secondary</button></span>\n        <span class=\"me-2\"><button class=\"btn btn-danger\">Danger</button></span>\n        <span class=\"me-2\"><button class=\"btn btn-outline-secondary\">Outline</button></span>\n        <span class=\"\"><a href=\"#\" class=\"aalink\">clickable link</a></span>\n    </div>\n    <p  class=\"mt-4\"> keyboard focus</p>\n    <div>\n        <span class=\"me-2\"><button class=\"focusloop btn btn-primary\">Primary</button></span>\n        <span class=\"me-2\"><button class=\"focusloop btn btn-secondary\">Secondary</button></span>\n        <span class=\"me-2\"><button class=\"focusloop btn btn-danger\">Danger</button></span>\n        <span class=\"me-2\"><button class=\"focusloop btn btn-outline-secondary\">Outline</button></span>\n        <span class=\"\"><a href=\"#\" class=\"focusloop aalink\">clickable link</a></span>\n    </div>\n    <button id=\"showfocus\" class=\"btn btn-success btn-large mt-5\" type=\"button\">Show focus</button>\n</div>\n```\n\n----------------------------------------\n\nTITLE: Running the build script for library updates\nDESCRIPTION: This snippet outlines the command to execute the build script located at './build/build.sh', which automates the update of JS-Beautify and CodeMirror libraries.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/html/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\n./build/build.sh\n```\n\n----------------------------------------\n\nTITLE: quiz_attempt::question_print_comment_fields() Removed (Moodle 3.1)\nDESCRIPTION: The `quiz_attempt::question_print_comment_fields()` function has been removed. It was broken since at least Moodle 2.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_21\n\nLANGUAGE: text\nCODE:\n```\n\"quiz_attempt::question_print_comment_fields() has been removed. It was broken\n  since at least Moodle 2.0.\"\n```\n\n----------------------------------------\n\nTITLE: Defining Maximum Image Length\nDESCRIPTION: This snippet sets the maximum allowable width and height in pixels for <img> tags to mitigate potential imagecrash vulnerabilities.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.MaxImgLength.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\nHTML.MaxImgLength\\nTYPE: int/null\\nDEFAULT: 1200\\nVERSION: 3.1.1\n```\n\n----------------------------------------\n\nTITLE: Vim Configuration Annotation\nDESCRIPTION: Vim-specific configuration settings for consistent code formatting, specifying indentation and tab settings for the file.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.DefinitionID.txt#2025-04-21_snippet_1\n\nLANGUAGE: vim\nCODE:\n```\n# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: XHProf Enable Options\nDESCRIPTION: PHP code showing how to enable XHProf with specific profiling flags\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nxhprof_enable(XHPROF_FLAGS_NO_BUILTINS | XHPROF_FLAGS_CPU | XHPROF_FLAGS_MEMORY);\n```\n\n----------------------------------------\n\nTITLE: Configuring Span Removal Directive\nDESCRIPTION: Defines a boolean configuration option to remove span tags without attributes. Applies to HTML processing and formatting operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/AutoFormat.RemoveSpansWithoutAttributes.txt#2025-04-21_snippet_0\n\nLANGUAGE: configuration\nCODE:\n```\nAutoFormat.RemoveSpansWithoutAttributes\nTYPE: bool\nVERSION: 4.0.1\nDEFAULT: false\n```\n\n----------------------------------------\n\nTITLE: Replacing Numerical Answer with Calculated Answer Class\nDESCRIPTION: In Moodle 4.3, the calculated question type answer class has been updated. Plugins must now reference \\qtype_calculated\\qtype_calculated_answer instead of \\qtype_numerical_answer.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/type/calculated/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\\qtype_calculated\\qtype_calculated_answer\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\qtype_numerical_answer\n```\n\n----------------------------------------\n\nTITLE: Configuring YouTube Filter in HTML Purifier (INI)\nDESCRIPTION: Defines the configuration for the YouTube filter in HTML Purifier. It sets the filter type as boolean, specifies the version compatibility, and sets the default value to false. The description warns about deprecation and provides guidance on alternative settings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.YouTube.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nFilter.YouTube\nTYPE: bool\nVERSION: 3.1.0\nDEFAULT: false\n--DESCRIPTION--\n<p>\n  <strong>Warning:</strong> Deprecated in favor of %HTML.SafeObject and\n  %Output.FlashCompat (turn both on to allow YouTube videos and other\n  Flash content).\n</p>\n<p>\n  This directive enables YouTube video embedding in HTML Purifier. Check\n  <a href=\"http://htmlpurifier.org/docs/enduser-youtube.html\">this document\n  on embedding videos</a> for more information on what this filter does.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: PHP Method Reference - Database Operations in 2.6\nDESCRIPTION: Removed method reference for creating temporary tables from real tables\nSOURCE: https://github.com/moodle/moodle/blob/main/backup/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nbackup_controller_dbops::create_temptable_from_real_table()\n```\n\n----------------------------------------\n\nTITLE: cURL Request Profiling\nDESCRIPTION: Example of a cURL request that will be profiled by XHProf\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$ch = curl_init();\ncurl_setopt($ch, CURLOPT_URL, \"http://www.baidu.com\");\n$output = curl_exec($ch);\ncurl_close($ch);\n```\n\n----------------------------------------\n\nTITLE: Deprecation of assign_course_index_summary in mod_assign - PHP\nDESCRIPTION: The `assign_course_index_summary` has been deprecated. The new index generation now utilizes the `mod_assign\\course\\overview` integration class for enhanced functionality and maintainability.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_32\n\nLANGUAGE: php\nCODE:\n```\n// The assign_course_index_summary is now deprecated. The assign index is now generated using the mod_assign\\course\\overview integration class.\n// For more information see [MDL-83888](https://tracker.moodle.org/browse/MDL-83888)\n```\n\n----------------------------------------\n\nTITLE: Example Markdown Index File Structure\nDESCRIPTION: Template for _index.md files required in component library navigation folders to create collapsible sections.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n---\ntitle: \"Components\"\ndate: 2021-05-05T15:15:15Z\ndraft: true\nweight: 20\n---\n```\n\n----------------------------------------\n\nTITLE: Generating Tiny Accessibility Checker Help Link Text\nDESCRIPTION: Defines a language string or help link text for the accessibility checker feature in Moodle's Tiny editor. Used to provide contextual help or instructions for accessibility checking functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/accessibilitychecker/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nhelplinktext,tiny_accessibilitychecker\n```\n\n----------------------------------------\n\nTITLE: Removal of imscp_libxml_disable_entity_loader Function - PHP\nDESCRIPTION: The deprecated `imscp_libxml_disable_entity_loader` function has now been removed, suggesting a shift towards more secure and updated practices in handling XML in IMSCP activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_45\n\nLANGUAGE: php\nCODE:\n```\n// Final removal of deprecated imscp_libxml_disable_entity_loader function\n// For more information see [MDL-78635](https://tracker.moodle.org/browse/MDL-78635)\n```\n\n----------------------------------------\n\nTITLE: Migrating LogPlugin in Guzzle\nDESCRIPTION: Example demonstrating the migration of Guzzle's LogPlugin. Changes include namespace updates from Guzzle\\Common\\Log to Guzzle\\Log and replacing verbosity constants with MessageFormatter format strings.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_16\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Common\\Log\\ClosureLogAdapter;\nuse Guzzle\\Http\\Plugin\\LogPlugin;\n\n/** @var \\Guzzle\\Http\\Client */\n$client;\n\n// $verbosity is an integer indicating desired message verbosity level\n$client->addSubscriber(new LogPlugin(new ClosureLogAdapter(function($m) { echo $m; }, $verbosity = LogPlugin::LOG_VERBOSE);\n```\n\nLANGUAGE: php\nCODE:\n```\nuse Guzzle\\Log\\ClosureLogAdapter;\nuse Guzzle\\Log\\MessageFormatter;\nuse Guzzle\\Plugin\\Log\\LogPlugin;\n\n/** @var \\Guzzle\\Http\\Client */\n$client;\n\n// $format is a string indicating desired message format -- @see MessageFormatter\n$client->addSubscriber(new LogPlugin(new ClosureLogAdapter(function($m) { echo $m; }, $format = MessageFormatter::DEBUG_FORMAT);\n```\n\n----------------------------------------\n\nTITLE: Defining HTML Comment Whitelist Configuration\nDESCRIPTION: Configures the HTML.AllowedComments setting which specifies a whitelist of permitted HTML comment bodies. Works in conjunction with HTML.AllowedCommentsRegexp and ignores leading/trailing whitespace.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.AllowedComments.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nHTML.AllowedComments\nTYPE: lookup\nVERSION: 4.4.0\nDEFAULT: array()\n--DESCRIPTION--\nA whitelist which indicates what explicit comment bodies should be\nallowed, modulo leading and trailing whitespace.  See also %HTML.AllowedCommentsRegexp\n(these directives are union'ed together, so a comment is considered\nvalid if any directive deems it valid.)\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Style Block Filter Class Reference\nDESCRIPTION: Defines the ExtractStyleBlocks.TidyImpl configuration parameter that determines how CSS style blocks are cleaned. Can be null for default csstidy implementation, false to disable cleaning, or a custom implementation of the Tidy interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.ExtractStyleBlocks.TidyImpl.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nFilter.ExtractStyleBlocks.TidyImpl\\nTYPE: mixed/null\\nVERSION: 3.1.0\\nDEFAULT: NULL\\nALIASES: FilterParam.ExtractStyleBlocksTidyImpl\n```\n\n----------------------------------------\n\nTITLE: Implementing Accessible Object Elements in HTML\nDESCRIPTION: This example demonstrates the correct usage of the <object> element with proper title and embed tags for accessibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_5\n\nLANGUAGE: HTML\nCODE:\n```\n<object src=\"widget.html\" title=\"A small web widget\"><embed src=\"movie.mov\"></embed></object>\n```\n\n----------------------------------------\n\nTITLE: Example Bad Commit Message Format in Console\nDESCRIPTION: Shows an incorrect way to format a commit message that includes too much information in the description.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/plist/CONTRIBUTING.md#2025-04-21_snippet_1\n\nLANGUAGE: console\nCODE:\n```\ndocs(readme): fix orthography, remove out of date paragraph and fix broken links\n```\n\n----------------------------------------\n\nTITLE: Updating Russian Functions Text File\nDESCRIPTION: This snippet describes an update to the Russian Functions Text File in PhpSpreadsheet. This update ensures that Russian function names and translations are accurate and up-to-date, improving the usability of PhpSpreadsheet for Russian-speaking users. The update contributes to better localization support and a more user-friendly experience.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_17\n\nLANGUAGE: PHP\nCODE:\n```\n\"Update Russian Functions Text File [#2557](https://github.com/PHPOffice/PhpSpreadsheet/issues/2557)\"\n```\n\n----------------------------------------\n\nTITLE: PDO Prepare Statement Profiling\nDESCRIPTION: Examples of PDO prepared statements with both named and positional parameters\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$_sth = $db->prepare(\"SELECT * FROM user where userid = :id and username = :name\");\n$_sth->execute([':id' => '1', ':name' => 'admin']);\n$data1 = $_sth->fetch();\n\n$_sth = $db->prepare(\"SELECT * FROM user where userid = ?\");\n$_sth->execute([1]);\n$data2 = $_sth->fetch();\n```\n\n----------------------------------------\n\nTITLE: Installing PHP Cloneable Package via Composer\nDESCRIPTION: Command to install the spatie/php-cloneable package using Composer package manager.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/spatie/php-cloneable/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require spatie/php-cloneable\n```\n\n----------------------------------------\n\nTITLE: Markdown Version Support Table\nDESCRIPTION: Markdown table showing which Moodle versions are currently supported for security updates and maintenance.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/slim/slim/SECURITY.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n| Version | Supported          |\n| ------- | ------------------ |\n| 3.x.x   | :white_check_mark: |\n| 4.x.x   | :white_check_mark: |\n```\n\n----------------------------------------\n\nTITLE: Importing composer/pcre Package into Moodle Using Shell Commands\nDESCRIPTION: A shell script that safely updates the composer/pcre package in Moodle by creating a temporary directory, installing the latest version via Composer, and copying it to the appropriate location in Moodle's library structure. The script preserves the Moodle-specific readme file during the update process.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ncp lib/composer/pcre/readme_moodle.txt ./\nrm -rf lib/composer/pcre\ntempdir=`mktemp -d`\ncd $tempdir\ncomposer init -n --require composer/pcre:*\ncomposer install\ncd -\ncp -r $tempdir/vendor/composer/pcre lib/composer/pcre\nmv readme_moodle.txt lib/composer/pcre\nrm -rf $tempdir\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method Warning - PHP\nDESCRIPTION: This snippet indicates that the method `\\core\\output\\core_renderer::render_context_header` has been deprecated. Developers must now use the new method `\\core\\output\\core_renderer::render($contextheader)` for rendering context headers. This change suggests an improvement in method handling and encourages using updated practices.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n// Deprecated\n// Use the following method instead:\n\\core\\output\\core_renderer::render($contextheader);\n```\n\n----------------------------------------\n\nTITLE: Adding \"binary\" Datafilter Type\nDESCRIPTION: A new \"binary\" datafilter type has been added for creating filters with a single yes/no option.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_20\n\n\n\n----------------------------------------\n\nTITLE: Simple Cache PSR Header in Markdown\nDESCRIPTION: Header section of the documentation explaining the purpose of PSR-16 Simple Cache specification.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/simple-cache/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\nPHP FIG Simple Cache PSR\n========================\n\nThis repository holds all interfaces related to PSR-16.\n\nNote that this is not a cache implementation of its own. It is merely an interface that describes a cache implementation. See [the specification](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-16-simple-cache.md) for more details.\n\nYou can find implementations of the specification by looking for packages providing the [psr/simple-cache-implementation](https://packagist.org/providers/psr/simple-cache-implementation) virtual package.\n```\n\n----------------------------------------\n\nTITLE: Running Grunt for the Moodle plugin\nDESCRIPTION: This snippet details the commands to navigate to the 'amd' directory and execute Grunt, which is necessary after running the build script.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/html/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ncd amd\ngrunt\n```\n\n----------------------------------------\n\nTITLE: City-State Multiple Choice Question\nDESCRIPTION: An assessment item requiring students to match cities with their correct states using Moodle's multichoice question format\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/multianswer/tests/fixtures/questions.multianswer.txt#2025-04-21_snippet_0\n\nLANGUAGE: moodle quiz syntax\nCODE:\n```\n* San Francisco: {1:MULTICHOICE:=California#OK~Arizona#Wrong}\n```\n\nLANGUAGE: moodle quiz syntax\nCODE:\n```\n* Tucson: {1:MULTICHOICE:California#Wrong~%100%Arizona#OK}\n```\n\nLANGUAGE: moodle quiz syntax\nCODE:\n```\n* Los Angeles: {1:MULTICHOICE:=California#OK~Arizona#Wrong}\n```\n\nLANGUAGE: moodle quiz syntax\nCODE:\n```\n* Phoenix: {1:MULTICHOICE:%0%California#Wrong~=Arizona#OK}\n```\n\n----------------------------------------\n\nTITLE: True/False Question Example with 'TRUE'\nDESCRIPTION: This snippet shows a True/False question in Moodle with the answer set to \"TRUE\", with a question and text.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_8\n\nLANGUAGE: text\nCODE:\n```\n// name 0-11\n::2-08 TSL::TSL is blablabla.{TRUE}\n```\n\n----------------------------------------\n\nTITLE: Adding get_sample_values Method for Stress Testing in PHP\nDESCRIPTION: This method is intended to support stress testing across different filter types by providing sample values. It is meant to be overridden in derived filter classes to supply specific sample data for testing.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nfunction get_sample_values() {\n    // This method should be overridden in subclasses\n}\n```\n\n----------------------------------------\n\nTITLE: Fixing Conditional Formatting Rules and Xlsx Writer Errors\nDESCRIPTION: This snippet describes a fix addressing various bugs related to Conditional Formatting Rules, and errors in the Xlsx Writer for Conditional Formatting in PhpSpreadsheet. The fix ensures that conditional formatting rules are correctly applied and saved in XLSX files, preventing data corruption or unexpected behavior. This enhancement improves the reliability of conditional formatting functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n\"Various bugs related to Conditional Formatting Rules, and errors in the Xlsx Writer for Conditional Formatting [PR #2491](https://github.com/PHPOffice/PhpSpreadsheet/pull/2491)\"\n```\n\n----------------------------------------\n\nTITLE: Applying Mustache Patch for Disabled Rendering in Moodle\nDESCRIPTION: Commands for downloading and applying a specific patch to Mustache.php that enables disabling unnecessary rendering, which improves performance in the Moodle environment.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\npatch --directory . < ~/path/to/patch.patch\nrm DisableLambdaRenderingTest.php\n```\n\n----------------------------------------\n\nTITLE: Adding `$performancehints` Parameter to `assign_capability()`\nDESCRIPTION: The `assign_capability()` method now has an optional `$performancehints` parameter that can be used to reduce the amount of checks it has to do when called in a loop in response to a database query.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_39\n\n\n\n----------------------------------------\n\nTITLE: jQuery Version Update in Moodle Content Writer\nDESCRIPTION: Updating jQuery version references in Moodle's privacy-related HTML content generation methods\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jquery/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\ncore_privacy\\local\\request\\moodle_content_writer::write_html_data()\n```\n\n----------------------------------------\n\nTITLE: Creating GeoIP2 Web Service Client in PHP\nDESCRIPTION: Examples of creating a GeoIP2 Web Service Client with various configurations. Shows how to initialize a client with account credentials and optional parameters for language preferences and different service endpoints.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n$client = new Client(42, 'abcdef123456');\n```\n\nLANGUAGE: php\nCODE:\n```\n$client = new Client(42, 'abcdef123456', ['en'], ['host' => 'geolite.info']);\n```\n\nLANGUAGE: php\nCODE:\n```\n$client = new Client(42, 'abcdef123456', ['en'], ['host' => 'sandbox.maxmind.com']);\n```\n\nLANGUAGE: php\nCODE:\n```\n$record = $client->city('128.101.101.101');\n```\n\n----------------------------------------\n\nTITLE: Configuring URI Definition Revision\nDESCRIPTION: Sets the revision identifier for custom URI definitions with a default value of 1. Used to track and manage definition versions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.DefinitionRev.txt#2025-04-21_snippet_0\n\nLANGUAGE: configuration\nCODE:\n```\nURI.DefinitionRev\nTYPE: int\nVERSION: 2.1.0\nDEFAULT: 1\n```\n\n----------------------------------------\n\nTITLE: Using Scope Declarations in HTML Table Headers\nDESCRIPTION: Recommends using scope declarations in table headers to organize and define table data by row or column, improving accessibility for both sighted and screen reader users.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_11\n\n\n\n----------------------------------------\n\nTITLE: MySQL Query Profiling Example\nDESCRIPTION: Example of mysqli query that will be profiled by XHProf\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$mysqli = new mysqli(\"localhost\", \"my_user\", \"my_password\", \"user\");\n$result = $mysqli->query(\"SELECT * FROM user LIMIT 10\");\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier AllowedElements Configuration\nDESCRIPTION: Configuration definition for HTML.AllowedElements setting that controls which HTML tags are allowed. The setting is of type lookup/null with version 1.3.0 and defaults to NULL. Custom elements require additional configuration through HTML Purifier's advanced customization features.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.AllowedElements.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nHTML.AllowedElements\nTYPE: lookup/null\nVERSION: 1.3.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: OneDrive Files Import Process Key\nDESCRIPTION: Localization key for importing files from OneDrive repository\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/onedrive/lang/en/deprecated.txt#2025-04-21_snippet_1\n\nLANGUAGE: moodle_lang\nCODE:\n```\nimportskydrivefiles\n```\n\n----------------------------------------\n\nTITLE: Geometric SVG Pattern with Polylines\nDESCRIPTION: SVG code defining a repeating geometric pattern using polylines with specific coordinates, transforms, fills and stroke properties. Each polyline creates a hexagon-like shape that is transformed and styled with different opacities.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-5.txt#2025-04-21_snippet_1\n\nLANGUAGE: svg\nCODE:\n```\n<polyline points=\"14.3,0,29.033333333333,0,43.333333333333,14.3,43.333333333333,29.033333333333,29.033333333333,43.333333333333,14.3,43.333333333333,0,29.033333333333,0,14.3,14.3,0\" fill=\"#222\" fill-opacity=\"0.046\" stroke=\"#000\" stroke-opacity=\"0.02\" transform=\"translate(0, 173.333333333333)\" />\n```\n\n----------------------------------------\n\nTITLE: Deprecating booktool_print_get_toc() in PHP\nDESCRIPTION: The booktool_print_get_toc() function has been finally deprecated in Moodle 3.11. Developers should use render_print_book_toc() instead for generating the table of contents.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nbooktool_print_get_toc()\n```\n\n----------------------------------------\n\nTITLE: Fixing Height and Width for oneCellAnchorDrawings in Xlsx Reader\nDESCRIPTION: This snippet describes a fix in the Xlsx Reader of PhpSpreadsheet concerning the height and width of oneCellAnchorDrawings. The fix ensures that the height and width of these drawings are correctly read and interpreted, resolving potential display issues or inconsistencies. This improves the visual accuracy and fidelity of XLSX file reading.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n\"Xlsx Reader fix height and width for oneCellAnchorDrawings. [PR #2492](https://github.com/PHPOffice/PhpSpreadsheet/pull/2492)\"\n```\n\n----------------------------------------\n\nTITLE: Rating Information Addition - Version 3.4\nDESCRIPTION: Documentation of added 'ratinginfo' field in entry-returning external functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n* External functions returning entries now return an additional field \"ratinginfo\" containing the entry rating information.\n```\n\n----------------------------------------\n\nTITLE: Demonstrating HTML element usage in HTML Purifier configuration\nDESCRIPTION: This snippet shows examples of HTML elements that might be forbidden using the HTML.ForbiddenElements configuration. It illustrates the potential limitations of using this approach for content restriction.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.ForbiddenElements.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<code>img</code>\n```\n\nLANGUAGE: html\nCODE:\n```\n<code>background-image</code>\n```\n\n----------------------------------------\n\nTITLE: Deprecated PHP Method Reference - block_calendar_upcoming\nDESCRIPTION: Documentation of the block_calendar_upcoming::get_upcoming_content method that was deprecated in 3.4 and removed in 4.4. Developers should update their code to use the new APIs and reference block_calendar_upcoming::get_content() for implementation examples.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/calendar_upcoming/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nblock_calendar_upcoming::get_upcoming_content\n```\n\n----------------------------------------\n\nTITLE: Creating Action Menu with Items in PHP\nDESCRIPTION: Demonstrates creating an action menu with items passed during initialization.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n/** @var core_renderer $output*/\n$output = $PAGE->get_renderer('core');\n\n$menu = new action_menu([\n    new action_menu_link(\n        new moodle_url($PAGE->url, ['foo' => 'bar']),\n        new pix_icon('t/emptystar', ''),\n        'Action link example',\n        false\n    ),\n]);\n\necho $output->render($menu);\n```\n\n----------------------------------------\n\nTITLE: Removed Quiz Statistics Renumbering Function in PHP\nDESCRIPTION: The function quiz_statistics_renumber_placeholders() was removed in version 3.2 as it became redundant due to changes in MDL-31243 and MDL-27072.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/report/statistics/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nquiz_statistics_renumber_placeholders()\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Question with HTML content\nDESCRIPTION: This snippet defines a Moodle question using a specific syntax. '::test daniel::' is the question name, '[html]' specifies the content type as HTML, and the content itself is enclosed within '<p>asdfasdf</p>'. The '{}' likely signifies the end of the question definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_encoding_windows-1252.gift.txt#2025-04-21_snippet_2\n\nLANGUAGE: none\nCODE:\n```\n// question: 19756810  name: test daniel\n::test daniel::[html]<p>asdfasdf</p>{}\n```\n\n----------------------------------------\n\nTITLE: Essay Question Example\nDESCRIPTION: This snippet shows the format for an essay question in Moodle. It includes the question text and an empty placeholder indicating that no specific answer is expected from the format.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n// essay\n::Q8:: How are you? {}\n```\n\n----------------------------------------\n\nTITLE: France Capital Short Answer Question\nDESCRIPTION: A short answer question testing knowledge of the capital city of France with multiple possible responses and feedback\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/multianswer/tests/fixtures/questions.multianswer.txt#2025-04-21_snippet_1\n\nLANGUAGE: moodle quiz syntax\nCODE:\n```\nThe capital of France is {1:SHORTANSWER:%100%Paris#Congratulations!~%50%Marseille#No, that is the second largest city in France (after Paris).~*#Wrong answer. The capital of France is Paris, of course.}\n```\n\n----------------------------------------\n\nTITLE: Running PHP Script to Generate Emoji Data File\nDESCRIPTION: Command for executing the PHP script that generates the emoji data JavaScript file from the downloaded JSON data. The output is redirected to the appropriate location in the AMD source directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/emoji-data/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp lib/emoji-data/generate_emoji_data.php > lib/amd/src/emoji/data.js\n```\n\n----------------------------------------\n\nTITLE: Updating TinyMCE PHP Language Strings\nDESCRIPTION: This snippet updates the `editor_tiny.php` file in Moodle with new language strings generated from the translation tool. It replaces specific lines and appends new content.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_10\n\nLANGUAGE: bash\nCODE:\n```\nsed -i \"/string\\['tiny:/d\" \"${MOODLEDIR}/lang/en/editor_tiny.php\"\ncat strings.php >> \"${MOODLEDIR}/lang/en/editor_tiny.php\"\n```\n\n----------------------------------------\n\nTITLE: Running PHP Package Tests\nDESCRIPTION: Command to run the test suite for the PHP Cloneable package.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/spatie/php-cloneable/README.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncomposer test\n```\n\n----------------------------------------\n\nTITLE: Migration details for reports accessing log tables\nDESCRIPTION: This snippet provides a link to migration documentation for reports that previously accessed the log table, emphasizing the need for callbacks in lib.php.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n* How to migrate reports accessing table 'log':\n  http://docs.moodle.org/dev/Migrating_log_access_in_reports\n* All reports that use logstores must implement a callback report_reportname_supports_logstore($storeinstance) in lib.php of the\n  report. Refer MDL-44596 for details.\n```\n\n----------------------------------------\n\nTITLE: Creating Accessible Form Fieldsets in HTML\nDESCRIPTION: This snippet shows how to properly structure form fieldsets with meaningful legends for improved accessibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_4\n\nLANGUAGE: HTML\nCODE:\n```\n<fieldset>    <legend>Personal Information:</legend>    <label for=\"name\">Name:</label> <input type=\"text\" size=\"30\" id=\"name\"/><br />    <label for=\"email\">Email:</label> <input type=\"text\" size=\"30\" id=\"email\"/><br /></fieldset>\n```\n\n----------------------------------------\n\nTITLE: Checking Header Existence in PSR-7 Request and Response in PHP\nDESCRIPTION: Illustrates how to check for the presence of specific headers in both PSR-7 request and response objects using the hasHeader method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n$request->hasHeader('My-Custom-Header'); // will return false\n$response->hasHeader('My-Custom-Header'); // will return true\n```\n\n----------------------------------------\n\nTITLE: Manual Installation of FPDI (PHP)\nDESCRIPTION: PHP code to manually include FPDI without using Composer. Requires the autoload.php file in the /src folder.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nrequire_once('src/autoload.php');\n```\n\n----------------------------------------\n\nTITLE: Referencing Visually Hidden CSS Class\nDESCRIPTION: Example showing the CSS class used to hide content visually while keeping it accessible to screen readers.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/hugo/site/layouts/partials/callout-warning-color-assistive-technologies.md#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n.visually-hidden\n```\n\n----------------------------------------\n\nTITLE: Weighted Answer Question\nDESCRIPTION: Shows a multiple-choice question with partial credit and feedback for different answer options\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/examples.txt#2025-04-21_snippet_3\n\nLANGUAGE: gift\nCODE:\n```\n::Jesus' hometown::Jesus Christ was from {\n    ~Jerusalem#This was an important city, but the wrong answer.\n    ~%25%Bethlehem#He was born here, but not raised here.\n    ~%50%Galilee#You need to be more specific.\n    =Nazareth#Yes! That's right!\n}\n```\n\n----------------------------------------\n\nTITLE: OneDrive File Import Success Key\nDESCRIPTION: Localization key indicating successful import of OneDrive files\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/onedrive/lang/en/deprecated.txt#2025-04-21_snippet_3\n\nLANGUAGE: moodle_lang\nCODE:\n```\nskydrivefilesimported\n```\n\n----------------------------------------\n\nTITLE: Geometric Pattern SVG Base64 Image Data\nDESCRIPTION: Base64 encoded SVG image containing a complex geometric pattern with rectangles, polylines and transforms. The SVG defines various shapes with specific dimensions, colors, opacities and transformations to create a repeating pattern.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-8.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\ndata:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxODkiIGhlaWdodD0iMjE4Ij48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJyZ2IoMjUzLCAxMjEsIDE2OCkiIC8+PHJlY3QgeD0iLTIwIiB5PSItMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjE1IiBzdHJva2Utd2lkdGg9IjEiIC8+PHJlY3QgeD0iMTY5LjI4MjAzMjMwMjc2IiB5PSItMjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjE1IiBzdHJva2Utd2lkdGg9IjEiIC8+PHJlY3QgeD0iLTIwIiB5PSIxOTguNTY0MDY0NjA1NTEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjE1IiBzdHJva2Utd2lkdGg9IjEiIC8+PHJlY3QgeD0iMTY5LjI4MjAzMjMwMjc2IiB5PSIxOTguNTY0MDY0NjA1NTEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjE1IiBzdHJva2Utd2lkdGg9IjEiIC8+PHJlY3QgeD0iNzQuNjQxMDE2MTUxMzc4IiB5PSIzNC42NDEwMTYxNTEzNzgiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjE0MTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIC8+PHJlY3QgeD0iLTIwIiB5PSI4OS4yODIwMzIzMDI3NTUiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjA2MzMzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiAvPjxyZWN0IHg9IjE2OS4yODIwMzIzMDI3NiIgeT0iODkuMjgyMDMyMzAyNzU1IiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iMC4wNjMzMzMzMzMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMSIgLz48cmVjdCB4PSI3NC42NDEwMTYxNTEzNzgiIHk9IjE0My45MjMwNDg0NTQxMyIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMTMyNjY2NjY2NjY2NjciIHN0cm9rZS13aWR0aD0iMSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwLCAtMjApIHJvdGF0ZSgwLCAyMCwgMTcuMzIwNTA4MDc1Njg5KSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwLCAyMzguNTY0MDY0NjA1NTEpIHJvdGF0ZSgwLCAyMCwgMTcuMzIwNTA4MDc1Njg5KSBzY2FsZSgxLCAtMSkiIC8+PHBvbHlsaW5lIHBvaW50cz0iMCwgMCwgMzQuNjQxMDE2MTUxMzc4LCAyMCwgMCwgNDAsIDAsIDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iMC4xMTUzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjkuMjgyMDMyMzAyNzYsIC0yMCkgcm90YXRlKDAsIDIwLCAxNy4zMjA1MDgwNzU2ODkpIHNjYWxlKC0xLCAxKSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2OS4yODIwMzIzMDI3NiwgMjM4LjU2NDA2NDYwNTUxKSByb3RhdGUoMCwgMjAsIDE3LjMyMDUwODA3NTY4OSkgc2NhbGUoLTEsIC0xKSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjEyNCIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTQuNjQxMDE2MTUxMzgsIDM0LjY0MTAxNjE1MTM3OCkiIC8+PHBvbHlsaW5lIHBvaW50cz0iMCwgMCwgMzQuNjQxMDE2MTUxMzc4LCAyMCwgMCwgNDAsIDAsIDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4xNDEzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NC42NDEwMTYxNTEzNzgsIDM0LjY0MTAxNjE1MTM3OCkgc2NhbGUoLTEsIDEpIiAvPjxwb2x5bGluZSBwb2ludHM9IjAsIDAsIDM0LjY0MTAxNjE1MTM3OCwgMjAsIDAsIDQwLCAwLCAwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiBmaWxsLW9wYWNpdHk9IjAuMTA2NjY2NjY2NjY2NjciIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTE0LjY0MTAxNjE1MTM4LCAxODMuOTIzMDQ4NDU0MTMpIHNjYWxlKDEsIC0xKSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjA2MzMzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NC42NDEwMTYxNTEzNzgsIDE4My45MjMwNDg0NTQxMykgc2NhbGUoLTEsIC0xKSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjEyNCIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCwgODkuMjgyMDMyMzAyNzU1KSIgLz48cG9seWxpbmUgcG9pbnRzPSIwLCAwLCAzNC42NDEwMTYxNTEzNzgsIDIwLCAwLCA0MCwgMCwgMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjE0MTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2OS4yODIwMzIzMDI3NiwgODkuMjgyMDMyMzAyNzU1KSBzY2FsZSgtMSwgMSkiIC8+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY3IiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwLCAyMCkgcm90YXRlKC0zMCwgMCwgMCkiIC8+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiBmaWxsLW9wYWNpdHk9IjAuMTQxMzMzMzMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0xNjkuMjgyMDMyMzAyNzYsIDIwKSByb3RhdGUoLTMwLCAwLCAwKSIgLz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW9wYWNpdHk9IjAuMDIiIGZpbGw9IiNkZGQiIGZpbGwtb3BhY2l0eT0iMC4wMzczMzMzMzMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAsIDQ5LjI4MjAzMjMwMjc1NSkgcm90YXRlKDMwLCAwLCA0MCkiIC8+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjMjIyIiBmaWxsLW9wYWNpdHk9IjAuMDk4IiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0ic2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTY5LjI4MjAzMjMwMjc2LCA0OS4yODIwMzIzMDI3NTUpIHJvdGF0ZSgzMCwgMCwgNDApIiAvPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjA4OTMzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoMjAsIC0xNjkuMjgyMDMyMzAyNzYpIHJvdGF0ZSgzMCwgMCwgNDApIiAvPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgZmlsbC1vcGFjaXR5PSIwLjA4OTMzMzMzMzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIxIiB0cmFuc2Zvcm09InNjYWxlKC0xLCAtMSkgdHJhbnNsYXRlKC0xNjkuMjgyMDMyMzAyNzYsIC0xNjkuMjgyMDMyMzAyNzYpIHJvdGF0ZSgzMCwgMCwgNDApIiAvPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utb3BhY2l0eT0iMC4wMiIgZmlsbD0iIzIyMiIgZmlsbC1vcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0ic2NhbGUoMSwgLTEpIHRyYW5zbGF0ZSgyMCwgLTE5OC41NjQwNjQ2MDU1MSkgcm90YXRlKC0zMCwgMCwgMCkiIC8+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1vcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiBmaWxsLW9wYWNpdHk9IjAuMDg5MzMzMzMzMzMzMzMzIiBzdHJva2Utd2lkdGg9IjEiIHRyYW5zZm9ybT0ic2NhbGUoLTEsIC0xKSB0cmFuc2xhdGUoLTE2OS4yODIwMzIzMDI3NiwgLTE5OC41NjQwNjQ2MDU1MSkgcm90YXRlKC0zMCwgMCwgMCkiIC8+PC9zdmc+\n```\n\n----------------------------------------\n\nTITLE: Using getRulesAssoc() Method in PHP\nDESCRIPTION: Explains a breaking change where getRules() now returns an index-based array instead of an associative array. The new getRulesAssoc() method should be used to retain the old associative behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nSabberworm\\CSS\\RuleSet->getRulesAssoc()\n```\n\n----------------------------------------\n\nTITLE: Defining Output.FlashCompat Configuration for HTML Purifier\nDESCRIPTION: This configuration defines the Output.FlashCompat option for HTML Purifier. When set to true, it generates Internet Explorer compatibility code for all object code, which is recommended when HTML.SafeObject is enabled.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Output.FlashCompat.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nOutput.FlashCompat\nTYPE: bool\nVERSION: 4.1.0\nDEFAULT: false\n--DESCRIPTION--\n<p>\n  If true, HTML Purifier will generate Internet Explorer compatibility\n  code for all object code.  This is highly recommended if you enable\n  %HTML.SafeObject.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Adding `filteroptions` to `getFilterValue()`\nDESCRIPTION: A new `filteroptions` field has been added to `getFilterValue()` in `core/datafilter/filtertype`. This field is generated by `get filterOptions()` and returns a list of options specific to the filter type, in `[{name:, value}]` format.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_17\n\n\n\n----------------------------------------\n\nTITLE: Removed questionbank.ajax.php (Moodle 3.5)\nDESCRIPTION: The `questionbank.ajax.php` file has been removed. Developers should use the `quiz_question_bank` fragment instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_17\n\nLANGUAGE: text\nCODE:\n```\n\"Removed questionbank.ajax.php. Please use the quiz_question_bank fragment instead.\"\n```\n\n----------------------------------------\n\nTITLE: Updating Custom Renderers in Moodle 2.9\nDESCRIPTION: Custom renderers must be updated to include the 'action=makechoice' field in the display_options() method. This change affects how choices are displayed and processed.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/choice/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: plaintext\nCODE:\n```\ndisplay_options()\n```\n\n----------------------------------------\n\nTITLE: Using Header Split List in PHP\nDESCRIPTION: Demonstrates how to split HTTP headers containing comma-separated values into individual items using the Header::splitList method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_11\n\nLANGUAGE: php\nCODE:\n```\n$knownEtags = Header::splitList($request->getHeader('if-none-match'));\n```\n\n----------------------------------------\n\nTITLE: Unzipping TinyMCE Language Packages\nDESCRIPTION: This snippet extracts the language packages for TinyMCE 7 from a downloaded zip file. This operation is necessary before running the translation tool to update language files.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\nlangdir=`mktemp -d`\ncd \"${langdir}\"\nunzip path/to/langs.zip\n```\n\n----------------------------------------\n\nTITLE: Defining Retained HTML Elements for AutoFormat in PHP\nDESCRIPTION: This snippet provides a lookup type configuration to define which HTML elements should be retained when the AutoFormat.RemoveEmpty and AutoFormat.RemoveEmpty.RemoveNbsp options are enabled. It specifies an array with 'td' and 'th' elements to be preserved. The snippet is part of the AutoFormat feature in Moodle 4.0.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/AutoFormat.RemoveEmpty.RemoveNbsp.Exceptions.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$DEFAULT = array('td' => true, 'th' => true);\n```\n\n----------------------------------------\n\nTITLE: Configuring ID Blacklist in Moodle\nDESCRIPTION: Specifies an array of IDs that are not permitted in the document. Provides a way to exclude specific identifiers from being used.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Attr.IDBlacklist.txt#2025-04-21_snippet_0\n\nLANGUAGE: configuration\nCODE:\n```\nAttr.IDBlacklist = array()\n```\n\n----------------------------------------\n\nTITLE: Vim Editor Configuration\nDESCRIPTION: Vim editor configuration settings specifying expanded tabs and 4-space indentation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.AllowParseManyTags.txt#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Deprecated Badge Methods in 4.4\nDESCRIPTION: Lists methods that have been deprecated in favor of Report Builder reports and removed methods that can no longer be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nrender_badge_collection()\nrender_badge_recipients()\ncore_badges_renderer::print_badge_tabs\n```\n\n----------------------------------------\n\nTITLE: Markdown Installation Instructions for PSR-17 HTTP Factories\nDESCRIPTION: Step-by-step guide for downloading and installing PSR-17 HTTP Factory interfaces from GitHub into a Moodle project. Includes instructions for updating the thirdpartylibs.xml configuration file.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-factory/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# PSR-17 HTTP Factories\n\nThis is a description for including the PSR-17 Interfaces in Moodle\n\n## Installation\n\n1. Visit https://github.com/php-fig/http-factory\n2. Download the latest release\n3. Unzip in this folder\n4. Update `thirdpartylibs.xml`\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoded SVG Pattern\nDESCRIPTION: An SVG image encoded in base64 that creates a geometric pattern with rectangles using transforms, fills, strokes and varying opacities. The pattern consists of a grid of rectangles with different styling and positioning.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-6.txt#2025-04-21_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\ndata:image/svg+xml;base64,PD94bW...\n```\n\n----------------------------------------\n\nTITLE: LDAP Entry Function Update in PHP\nDESCRIPTION: The ldap_get_entries_moodle() function now ensures all returned attribute names are lowercase, fixing previous inconsistent behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_83\n\nLANGUAGE: php\nCODE:\n```\nldap_get_entries_moodle()\n```\n\n----------------------------------------\n\nTITLE: Mounting Static Client Facade in Guzzle\nDESCRIPTION: This code shows how to mount the static facade class in Guzzle, enabling the use of Guzzle with static methods. This is achieved using the `Guzzle\\Http\\StaticClient::mount` method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n\"Added a static facade class that allows you to use Guzzle with static methods and mount the class to `\\\\Guzzle`.\\n  See `Guzzle\\\\Http\\\\StaticClient::mount`.\"\n```\n\n----------------------------------------\n\nTITLE: Installing FPDI with tFPDF using Composer (JSON)\nDESCRIPTION: Composer configuration for installing FPDI with tFPDF. Requires setasign/tfpdf version 1.33.* and setasign/fpdi version ^2.3.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/feedback/editpdf/fpdi/README.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"require\": {\n        \"setasign/tfpdf\": \"1.33.*\",\n        \"setasign/fpdi\": \"^2.3\"\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: AutoFormat RemoveEmpty Predicate Configuration\nDESCRIPTION: This configuration defines which HTML elements, even if empty, should be preserved by the AutoFormat functionality. It specifies an array of tags and the attributes that must be present for the element to be kept. The default configuration preserves empty `colgroup`, `th`, `td` elements and `iframe` elements with a `src` attribute.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/AutoFormat.RemoveEmpty.Predicate.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\"AutoFormat.RemoveEmpty.Predicate\\nTYPE: hash\\nVERSION: 4.7.0\\nDEFAULT: array('colgroup' => array(), 'th' => array(), 'td' => array(), 'iframe' => array('src'))\"\n```\n\n----------------------------------------\n\nTITLE: Debugging XML-RPC with debugmsg in PHP\nDESCRIPTION: The xmlrpc_debugmsg() method allows sending debug info in comments in the return payload from a server.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_14\n\nLANGUAGE: PHP\nCODE:\n```\n\"* xmlrpc_debugmsg() method allows sending of debug info in comments in\n   the return payload from a server\"\n```\n\n----------------------------------------\n\nTITLE: Defining Language String for TinyMCE Link Plugin in Moodle\nDESCRIPTION: A single language string definition for the TinyMCE link plugin in Moodle. The 'helplinktext' identifier is used to provide help text for the link functionality in the TinyMCE editor within Moodle's interface.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/link/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nhelplinktext,tiny_link\n```\n\n----------------------------------------\n\nTITLE: Identifying Moodle Users\nDESCRIPTION: This snippet identifies anyone who uses Moodle as a 'Moodler' and formats it for a Moodle quiz question. It aims to gauge users' understanding of the Moodle community terminology.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_in_category.gift.txt#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n// question: 46  name: Moodle user\n::Moodle user::[html]Anyone who uses Moodle is a ...{\n\t=%100%Moodler#\n}\n```\n\n----------------------------------------\n\nTITLE: Adding Table Headers for Improved Accessibility in HTML\nDESCRIPTION: Emphasizes the importance of including table headers to provide a description of the table structure for both sighted and screen reader users.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_8\n\n\n\n----------------------------------------\n\nTITLE: Compiling mimeTeX on Linux aarch64\nDESCRIPTION: This snippet provides the commands to compile mimeTeX on a Linux aarch64 architecture. Follow similar steps as Linux, with modification for aarch64 in the output file name.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/tex/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: shell\nCODE:\n```\ncc -DAA mimetex.c gifsave.c -lm -o mimetex.linux.aarch64\n```\n\n----------------------------------------\n\nTITLE: Removing Deprecated qbank Templates\nDESCRIPTION: Deprecation of specific Mustache templates used in the qbank plugin, removing category-related template files\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: Mustache\nCODE:\n```\n// Removed templates\ntemplate qbank_managecategories/category_condition_advanced\ntemplate qbank_managecategories/category_condition\ntemplate qbank_managecategories/listitem\n```\n\n----------------------------------------\n\nTITLE: Implementing Heading Sizes with Native Heading Tags in HTML\nDESCRIPTION: Demonstrates the six levels of HTML heading elements (h1-h6) with their default styling in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<h1>h1 heading</h1>\n<h2>h2 heading</h2>\n<h3>h3 heading</h3>\n<h4>h4 heading</h4>\n<h5>h5 heading</h5>\n<h6>h6 heading</h6>\n```\n\n----------------------------------------\n\nTITLE: Enable Additional Info Collection\nDESCRIPTION: PHP.ini setting to enable collection of MySQL and cURL execution information\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_2\n\nLANGUAGE: sh\nCODE:\n```\nxhprof.collect_additional_info = 1\n```\n\n----------------------------------------\n\nTITLE: Moodle Lesson Module Language Strings\nDESCRIPTION: These strings define keys used to retrieve localized text within the Moodle lesson module. They suggest features related to user and group overrides, lesson previews, and reporting capabilities.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/lesson/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: Text\nCODE:\n```\n\"useroverridesdeleted,mod_lesson\"\n```\n\nLANGUAGE: Text\nCODE:\n```\n\"groupoverridesdeleted,mod_lesson\"\n```\n\nLANGUAGE: Text\nCODE:\n```\n\"preview,mod_lesson\"\n```\n\nLANGUAGE: Text\nCODE:\n```\n\"previewlesson,mod_lesson\"\n```\n\nLANGUAGE: Text\nCODE:\n```\n\"viewreports2,mod_lesson\"\n```\n\n----------------------------------------\n\nTITLE: Adding PHP stdClass Import\nDESCRIPTION: Instructions to add the standard class import statement to specific PHP files in the H5P editor library.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse stdClass;\n```\n\n----------------------------------------\n\nTITLE: Installing getallheaders Polyfill for PHP < 5.6\nDESCRIPTION: Composer command to install version 2.x of the getallheaders polyfill package for PHP versions below 5.6.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/ralouphie/getallheaders/README.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require ralouphie/getallheaders \"^2\"\n```\n\n----------------------------------------\n\nTITLE: Library Installation via Composer\nDESCRIPTION: Command for installing the libphonenumber-for-php-lite library using Composer package manager\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\n$ composer require giggsey/libphonenumber-for-php-lite\n```\n\n----------------------------------------\n\nTITLE: Empty Template Context for Toggle Block Example\nDESCRIPTION: Example showing an empty template context when using toggle as a block in other templates. This is used with the tool_componentlibrary/examples/toggle/example template.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/toggle.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n}\n```\n\n----------------------------------------\n\nTITLE: Creating Local Plugin Language Strings in PHP\nDESCRIPTION: Defines language strings for a local Moodle plugin using the standard language file structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/local/readme.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n<?php\n$string['hello'] = 'Hi {$a}';\n$string['nicehack:nicecapability'] = 'Some capability';\n```\n\n----------------------------------------\n\nTITLE: mod_quiz_renderer::review_next_navigation New Optional Argument (Moodle 3.1)\nDESCRIPTION: The `mod_quiz_renderer::review_next_navigation` method has a new optional argument. Overridden methods should be updated to match.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_24\n\nLANGUAGE: text\nCODE:\n```\n\"mod_quiz_renderer::review_next_navigation has a new optional argument. If you\n  have overridden that method, consider updating your code to match.\"\n```\n\n----------------------------------------\n\nTITLE: IIS Configuration for Shibboleth Logout in Moodle\nDESCRIPTION: This XML configuration snippet shows how to configure IIS to exclude the Moodle Shibboleth logout script from requiring a Shibboleth session.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/README.txt#2025-04-21_snippet_5\n\nLANGUAGE: xml\nCODE:\n```\n<Path name=\"auth/shibboleth/logout.php\" requireSession=\"false\" >\n```\n\n----------------------------------------\n\nTITLE: Implementing Accessibility Features for Screen Readers in HTML\nDESCRIPTION: Examples of accessibility features including visually-hidden elements that are only available to screen readers and visually-hidden-focusable elements for keyboard navigation.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_4\n\nLANGUAGE: html\nCODE:\n```\n<h2 class=\"visually-hidden\">Title for screen readers</h2>\n<a class=\"visually-hidden-focusable\" href=\"#content\">Skip to main content</a>\n```\n\n----------------------------------------\n\nTITLE: Code Fixes in Moodle\nDESCRIPTION: Fixed issues in Moodle codebase, including navigation cache improvements, proper PHPUnit setup methods, and timezone handling. These changes improve system performance and reliability.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/UPGRADING.md#2025-04-21_snippet_33\n\nLANGUAGE: PHP\nCODE:\n```\n\\navigation_cache\n```\n\nLANGUAGE: PHP\nCODE:\n```\nsetUp()\n```\n\nLANGUAGE: PHP\nCODE:\n```\ntearDown()\n```\n\nLANGUAGE: PHP\nCODE:\n```\nsetUpBeforeClass()\n```\n\nLANGUAGE: PHP\nCODE:\n```\ntearDownAfterClass()\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\\DateTimeImmutable\n```\n\n----------------------------------------\n\nTITLE: Updating Course Format Ajax Support Check in PHP\nDESCRIPTION: The course_format_ajax_support function is now deprecated. Use course_get_format($course)->supports_ajax() instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n// Old code (deprecated)\n$ajax_supported = course_format_ajax_support($course);\n\n// New code\n$ajax_supported = course_get_format($course)->supports_ajax();\n```\n\n----------------------------------------\n\nTITLE: Refreshing Feedback Events in PHP\nDESCRIPTION: The feedback_refresh_events() function now accepts two additional parameters for the module instance and course module. It's recommended to pass full objects instead of IDs to save database calls.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/feedback/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nfeedback_refresh_events($courseid, $instance = null, $cm = null);\n```\n\n----------------------------------------\n\nTITLE: Special Characters Question\nDESCRIPTION: Demonstrates handling of control characters in GIFT format\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/examples.txt#2025-04-21_snippet_4\n\nLANGUAGE: gift\nCODE:\n```\n::GIFT Control Characters::\nWhich of the following is NOT a control character for the GIFT import format? {\n   ~ \\~     # \\~ is a control character.\n   ~ \\=     # \\= is a control character.\n   ~ \\#     # \\# is a control character.\n   ~ \\{     # \\{ is a control character.\n   ~ \\}     # \\} is a control character.\n   = \\\\     # Correct! \\\\ (backslash) is not a control character.\n}\n```\n\n----------------------------------------\n\nTITLE: Deprecating book_scale_used() in PHP\nDESCRIPTION: The book_scale_used() function has been finally deprecated in Moodle 3.8 and can no longer be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nbook_scale_used()\n```\n\n----------------------------------------\n\nTITLE: Creating Link to External Site with Icon Indicator in HTML\nDESCRIPTION: This snippet demonstrates how to create a link to an external site, using an icon with appropriate ARIA labels to indicate that it leads to an external site.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/accessibility/links.md#2025-04-21_snippet_4\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"https://moodle.org\">\n    Moodle.org <i class=\"fa fa-external-link\" role=\"img\" aria-label=\"Link leads to external site\" title=\"Link leads to external site\"></i>\n</a>\n```\n\n----------------------------------------\n\nTITLE: Updating Array Function Calls in Roundcube Files\nDESCRIPTION: Sed command to replace all instances of array_first() with array_shift() in specific Roundcube files for compatibility with Moodle's requirements.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/messageinbound/roundcube/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nsed -i 's/array_first(/array_shift(/g' \\\nrcube_imap_generic.php \\\nrcube_result_index.php \\\nrcube_result_thread.php\n```\n\n----------------------------------------\n\nTITLE: Configuring PostgreSQL Database Options for Moodle 3.4\nDESCRIPTION: SQL commands to set required database options for PostgreSQL connections in Moodle 3.4. These options reduce connection overhead but may not be compatible with some connection poolers.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/log/store/database/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: sql\nCODE:\n```\nALTER DATABASE moodle SET client_encoding = UTF8;\nALTER DATABASE moodle SET standard_conforming_strings = on;\nALTER DATABASE moodle SET search_path = 'moodle,public';  -- Optional, if you wish to use a custom schema.\n```\n\n----------------------------------------\n\nTITLE: Updating jQuery Library Import in Moodle\nDESCRIPTION: Process for downloading and integrating new jQuery library versions into the Moodle project, involving file replacement and configuration updates\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jquery/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n# Download new jQuery files\nwget http://jquery.com/download/jquery-X.Y.Z.js\nwget http://jquery.com/download/jquery-X.Y.Z.min.js\n```\n\n----------------------------------------\n\nTITLE: Deprecating book_get_nav_types() in PHP\nDESCRIPTION: The book_get_nav_types() function has been deprecated in Moodle 4.0. Related settings have been removed, and navigation is now set to only 'next' and 'previous'.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nbook_get_nav_types()\n```\n\n----------------------------------------\n\nTITLE: Width-Controlled Dropdown - PHP\nDESCRIPTION: Examples of setting fixed widths for dropdown dialogs using WIDTH constants.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n// Big but fixed-width example.\n$dialog = new core\\output\\local\\dropdown\\dialog('Big dialog', $content);\n$dialog->set_dialog_width(core\\output\\local\\dropdown\\dialog::WIDTH['big']);\necho $OUTPUT->render($dialog);\n\n// Small width example.\n$dialog = new core\\output\\local\\dropdown\\dialog('Small dialog', $content);\n$dialog->set_dialog_width(core\\output\\local\\dropdown\\dialog::WIDTH['small']);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Renamed Quiz Classes Removed (Moodle 3.6)\nDESCRIPTION: The following renamed classes have been completely removed: `quiz_question_bank_view` (now `mod_quiz\\question\\bank\\custom_view`), `question_bank_add_to_quiz_action_column` (now `mod_quiz\\question\\bank\\add_action_column`), and `question_bank_question_name_text_column` (now `mod_quiz\\question\\bank\\question_name_text_column`).\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_16\n\nLANGUAGE: text\nCODE:\n```\n\"The following renamed classes have been completely removed:\n  - quiz_question_bank_view (now: mod_quiz\\question\\bank\\custom_view)\n  - question_bank_add_to_quiz_action_column (now: mod_quiz\\question\\bank\\add_action_column)\n  - question_bank_question_name_text_column (now: mod_quiz\\question\\bank\\question_name_text_column)\"\n```\n\n----------------------------------------\n\nTITLE: Azure AI Provider Language String Mappings\nDESCRIPTION: Language string identifiers used for configuring Azure AI provider settings in Moodle LMS. Includes keys for API versioning, deployment settings, system instructions, rate limiting configurations, and endpoint details.\nSOURCE: https://github.com/moodle/moodle/blob/main/ai/provider/azureai/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: properties\nCODE:\n```\naction_apiversion,aiprovider_azureai\naction_deployment,aiprovider_azureai\naction_deployment_desc,aiprovider_azureai\naction_systeminstruction,aiprovider_azureai\naction_systeminstruction_desc,aiprovider_azureai\napikey_desc,aiprovider_azureai\ndeployment,aiprovider_azureai\ndeployment_desc,aiprovider_azureai\nenableglobalratelimit,aiprovider_azureai\nenableglobalratelimit_desc,aiprovider_azureai\nenableuserratelimit,aiprovider_azureai\nenableuserratelimit_desc,aiprovider_azureai\nendpoint_desc,aiprovider_azureai\nglobalratelimit,aiprovider_azureai\nglobalratelimit_desc,aiprovider_azureai\nuserratelimit,aiprovider_azureai\nuserratelimit_desc,aiprovider_azureai\n```\n\n----------------------------------------\n\nTITLE: HTML Syntax Highlighting with Hugo Shortcode\nDESCRIPTION: Demonstrates how to use the highlight shortcode to render HTML code with syntax highlighting\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/syntax-highlighting.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<div class=\"myclass\">\n  This is an example.\n</div>\n```\n\n----------------------------------------\n\nTITLE: Moodle Session Management Updates\nDESCRIPTION: Shows the migration path from legacy session management functions to the new \\core\\session\\manager namespace methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_99\n\nLANGUAGE: php\nCODE:\n```\nsession_get_instance()->xxx() -> \\core\\session\\manager::xxx()\nsession_kill_all() -> \\core\\session\\manager::kill_all_sessions()\nsession_touch() -> \\core\\session\\manager::touch_session()\nsession_kill() -> \\core\\session\\manager::kill_session()\n```\n\n----------------------------------------\n\nTITLE: Installing composer/pcre via Composer\nDESCRIPTION: Command to install the latest version of the composer/pcre library using Composer package manager.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n$ composer require composer/pcre\n```\n\n----------------------------------------\n\nTITLE: Organizing File Structure for Component Library Pages\nDESCRIPTION: Shows the directory structure for adding a new breadcrumbs component page to the Moodle component library. The file needs to be placed in the /content/moodle/components/ directory as a markdown file.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-pages.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\n content\n     moodle\n        components\n           breadcrumbs.md\n```\n\n----------------------------------------\n\nTITLE: Removing Upgrade Functions in PHP\nDESCRIPTION: Several functions used exclusively for upgrades have been removed in Moodle 3.1 due to upgrade cleanup. These include mod_book_migrate_moddata_dir_to_legacy(), mod_book_migrate_all_areas(), and mod_book_migrate_area().\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\nmod_book_migrate_moddata_dir_to_legacy()\nmod_book_migrate_all_areas()\nmod_book_migrate_area()\n```\n\n----------------------------------------\n\nTITLE: JavaScript Operators List\nDESCRIPTION: A comprehensive list of JavaScript operators organized by categories including arithmetic, assignment, bitwise, comparison, logical, and other operators.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/minify/matthiasmullie-minify/data/js/operators_after.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\n+\n-\n*\n/\n%\n=\n+=\n-=\n*=\n/=\n%=\n<<=\n>>=\n>>>=\n&=\n^=\n|=\n&\n|\n^\n<<\n>>\n>>>\n==\n===\n!=\n!==\n>\n<\n>=\n<=\n&&\n||\n.\n[\n]\n?\n:\n,\n;\n(\n)\n}\n```\n\n----------------------------------------\n\nTITLE: Removal of mlbackend_php Plugin - PHP\nDESCRIPTION: The `mlbackend_php` plugin has been removed, replaced by `mlbackend_python`. This update is part of a broader change in the analytics settings for predictions processing, improving overall performance and usability.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_24\n\nLANGUAGE: php\nCODE:\n```\n// The plugin mlbackend_php has been removed and replaced by mlbackend_python as the new default value for the Analytics setting predictionsprocessor.\n// For more information see [MDL-84107](https://tracker.moodle.org/browse/MDL-84107)\n```\n\n----------------------------------------\n\nTITLE: New Badge Webservices in Moodle 4.4\nDESCRIPTION: New webservices added for enabling and disabling badges in Moodle 4.4.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_62\n\nLANGUAGE: PHP\nCODE:\n```\ncore_badges_enable_badges\ncore_badges_disable_badges\n```\n\n----------------------------------------\n\nTITLE: Removing Deprecated Methods in PHP (Moodle 4.3)\nDESCRIPTION: Lists deprecated methods that have been removed from the assign class and assign_plugin class in Moodle 4.3. These methods should no longer be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nassign::add_to_log\nassign::format_grade_for_log\nassign::format_submission_for_log\nassign_plugin::format_for_log\n```\n\n----------------------------------------\n\nTITLE: Authentication Plugin Session Verification\nDESCRIPTION: Reference to session verification method used to check if a session is active in the session handler.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n\\core\\session\\manager::session_exists()\n```\n\n----------------------------------------\n\nTITLE: Performing Mathematical Operations on Complex Numbers\nDESCRIPTION: This snippet illustrates how to add two complex numbers using object methods or static operation methods provided by the library.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/complex/README.md#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\n$complexString1 = '1.23-4.56i';\n$complexString2 = '2.34+5.67i';\n\n$complexObject = new Complex\\Complex($complexString1);\necho $complexObject->add($complexString2);\n```\n\nLANGUAGE: php\nCODE:\n```\n$complexString1 = '1.23-4.56i';\n$complexString2 = '2.34+5.67i';\n\necho Complex\\Operations::add($complexString1, $complexString2);\n```\n\n----------------------------------------\n\nTITLE: Activity Chooser JavaScript Parameter Update\nDESCRIPTION: New optional sectionNum parameter added to activity chooser AMD module initialization.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_65\n\nLANGUAGE: JavaScript\nCODE:\n```\n// Updated module initialization\nactivitychooser.initialize({\n  sectionNum: sectionNumber\n});\n```\n\n----------------------------------------\n\nTITLE: Numerical Question Example\nDESCRIPTION: Demonstrates numerical questions with different answer precision and scoring\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/examples.txt#2025-04-21_snippet_2\n\nLANGUAGE: gift\nCODE:\n```\nWhen was Ulysses S. Grant born? {#\n    =1822:0\n    =%50%1822:2}\n```\n\n----------------------------------------\n\nTITLE: True/False Question Example\nDESCRIPTION: This snippet shows the format for a True/False question in Moodle. It includes the question text, the correct answer (FALSE), general feedback, and a note, with some text formatting.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_6\n\nLANGUAGE: text\nCODE:\n```\n// true/false, with general feedback\n::Q1:: 42 is the Absolute Answer to everything.{\nFALSE#42 is the Ultimate Answer.#You gave the right answer.\n####This is, of course, a Hitchiker's Guide to the Galaxy reference.}\";\n```\n\n----------------------------------------\n\nTITLE: Mustache Template JavaScript Tags\nDESCRIPTION: Example of JavaScript code encapsulation tags used for executing custom JS code within component library documentation.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: mustache\nCODE:\n```\n{{#js}} custom js code {{/js}}\n```\n\n----------------------------------------\n\nTITLE: Generating URI Checksum with Secret Key\nDESCRIPTION: Demonstrates how to generate a secure checksum for a URI using HMAC-SHA256 with a secret key. This provides an additional layer of validation for redirectors to verify URI integrity.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.MungeSecretKey.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$checksum === hash_hmac(\"sha256\", $url, $secret_key)\n```\n\n----------------------------------------\n\nTITLE: Updating Regular Expressions in XML Parser\nDESCRIPTION: This snippet documents the change from using ereg to preg functions in the XML Parser component critical for regex processing. It ensures the XML handling in Moodle aligns with PHPs modern regex standards.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/pear/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// changed ereg_ to preg_\n* http://cvs.moodle.org/moodle/lib/pear/XML/Parser.php.diff?r1=1.1&r2=1.2\n```\n\n----------------------------------------\n\nTITLE: Compiling mimeTeX on FreeBSD\nDESCRIPTION: Compilation instructions for FreeBSD. Navigate into the directory with source files and execute the CC command to build mimeTeX.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/tex/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: shell\nCODE:\n```\ncc -DAA mimetex.c gifsave.c -lm -o mimetex.freebsd\n```\n\n----------------------------------------\n\nTITLE: Copying Axe Library to Moodle Directory\nDESCRIPTION: Command to copy the minified axe library from the downloaded npm package to the Moodle behat accessibility directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/behat/axe/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncp /tmp/axe/node_modules/axe-core/axe.min.js [PATH TO YOUR MOODLE]/lib/behat/axe/\n```\n\n----------------------------------------\n\nTITLE: Combining Markdown with SmartyPants Filter\nDESCRIPTION: Example of using PHP Markdown in combination with SmartyPants for additional text filtering.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\nuse Michelf\\Markdown, Michelf\\SmartyPants;\n$my_html = Markdown::defaultTransform($my_text);\n$my_html = SmartyPants::defaultTransform($my_html);\n```\n\n----------------------------------------\n\nTITLE: Marked CacheAdapterFactory as Deprecated in Guzzle\nDESCRIPTION: This code snippet indicates that `Guzzle\\Cache\\CacheAdapterFactory::factory()` has been marked as deprecated in Guzzle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Cache\\\\CacheAdapterFactory::factory()` as deprecated\"\n```\n\n----------------------------------------\n\nTITLE: Compiling mimeTeX on Linux\nDESCRIPTION: Instructions for compiling mimeTeX on a Linux system using GCC. Navigate to the directory containing the source files and execute the CC command to compile.\nSOURCE: https://github.com/moodle/moodle/blob/main/filter/tex/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: shell\nCODE:\n```\ncc -DAA mimetex.c gifsave.c -lm -o mimetex.linux\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Question with HTML content\nDESCRIPTION: This snippet defines a Moodle question using a specific syntax. '::asdf::' is the question name, '[html]' specifies the content type as HTML, and the content itself is enclosed within '<p>asdf<br></p>'. The '{}' likely signifies the end of the question definition.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_encoding_windows-1252.gift.txt#2025-04-21_snippet_1\n\nLANGUAGE: none\nCODE:\n```\n// question: 19756780  name: asdf\n::asdf::[html]<p>asdf<br></p>{}\n```\n\n----------------------------------------\n\nTITLE: Fixing ReferenceHelper Behavior in PhpSpreadsheet\nDESCRIPTION: This snippet describes a fix in the `ReferenceHelper` class within PhpSpreadsheet. The fix addresses an issue where removing a column before the last column with a null value would result in unexpected behavior.  This ensures correct handling of column removal in specific scenarios.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n\"Fixed `ReferenceHelper@insertNewBefore` behavior when removing column before last column with null value [PR #2541](https://github.com/PHPOffice/PhpSpreadsheet/pull/2541)\"\n```\n\n----------------------------------------\n\nTITLE: Deprecated Behat Step in tool_admin_presets\nDESCRIPTION: This snippet describes the deprecation of the behat_admin_presets::following_in_the_should_download_between_and_bytes Behat step. The recommended replacement is: the following element should download a file that:\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_49\n\nLANGUAGE: Behat\nCODE:\n```\n\"behat_admin_presets::following_in_the_should_download_between_and_bytes\"\n```\n\n----------------------------------------\n\nTITLE: CSS Input Example\nDESCRIPTION: Sample CSS code showing header styling with margin, font-family and color properties\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_13\n\nLANGUAGE: css\nCODE:\n```\n#header {\n    margin: 10px 2em 1cm 2%;\n    font-family: Verdana, Helvetica, \"Gill Sans\", sans-serif;\n    color: red !important;\n}\n```\n\n----------------------------------------\n\nTITLE: Calculating Matrix Trace\nDESCRIPTION: This code snippet demonstrates two methods to compute the trace of a matrix: directly using the instance method of a Matrix object or using a static method from the Functions class.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n$grid = [\n    [16,  3,  2, 13],\n    [ 5, 10, 11,  8],\n    [ 9,  6,  7, 12],\n    [ 4, 15, 14,  1],\n];\n\n$matrix = new Matrix\\Matrix($grid);\necho $matrix->trace();\n```\n\nLANGUAGE: php\nCODE:\n```\necho Matrix\\Functions::trace($matrix);\n```\n\nLANGUAGE: php\nCODE:\n```\necho Matrix\\Functions::trace($grid);\n```\n\n----------------------------------------\n\nTITLE: Updating Activity Chooser Data Attribute in PHP\nDESCRIPTION: The 'data-sectionid' attribute in the activity chooser has been deprecated. Developers should update their code to use 'data-sectionnum' instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// Old code (deprecated)\n$html = '<div data-sectionid=\"1\">...</div>';\n\n// New code\n$html = '<div data-sectionnum=\"1\">...</div>';\n```\n\n----------------------------------------\n\nTITLE: Using Y.all Instead of findChildNodes in JavaScript\nDESCRIPTION: The findChildNodes global function has been deprecated. Y.all should be used instead for selecting child nodes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_95\n\nLANGUAGE: JavaScript\nCODE:\n```\nY.all('.classname');\n```\n\n----------------------------------------\n\nTITLE: Image Insertion Syntax in Markdown\nDESCRIPTION: Shows the syntax for inserting images using a custom shortcode in markdown files.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-images.md#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n{{</* image \"wildebeest-1200.jpg\" \"Image of a Wildebeest\" \"img-fluid\" */>}}\n```\n\n----------------------------------------\n\nTITLE: Defining a Moodle Question Category\nDESCRIPTION: This snippet defines the category for a Moodle question. It assigns the category '$course$/top/Default for LTTEST' to the question, indicating the location within the Moodle course where the question is stored.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_encoding_windows-1252.gift.txt#2025-04-21_snippet_0\n\nLANGUAGE: none\nCODE:\n```\n// question: 0  name: Switch category to $course$/top/Default for LTTEST\n$CATEGORY: $course$/top/Default for LTTEST\n```\n\n----------------------------------------\n\nTITLE: Installing Ruby and Compass Dependencies for H5P Editor\nDESCRIPTION: Commands to install the required dependencies (Ruby and Compass) for compiling SCSS files to CSS in the H5P Editor PHP Library. These commands are intended for Debian-based Linux distributions.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/editor/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nsudo apt update\nsudo apt install ruby-full\nsudo apt install build-essential\nsudo gem install compass\n```\n\n----------------------------------------\n\nTITLE: Deprecated Magic Methods in Guzzle Client\nDESCRIPTION: This code snippet marks `Guzzle\\Service\\Client::enableMagicMethods()` as deprecated, indicating that magic methods can no longer be disabled on a `Guzzle\\Service\\Client`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_16\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Service\\\\Client::enableMagicMethods()` as deprecated. Magic methods can no longer be disabled on a Guzzle\\\\Service\\\\Client.\"\n```\n\n----------------------------------------\n\nTITLE: Removing Legacy Log Functions in PHP\nDESCRIPTION: In Moodle 2.7, bogus legacy log calls were removed, and the set_legacy_logdata() method was removed from the \\mod_book\\event\\chapter_deleted class.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/book/upgrade.txt#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n\\mod_book\\event\\chapter_deleted::set_legacy_logdata()\n```\n\n----------------------------------------\n\nTITLE: Deprecated Method: find_system_areas in base Class\nDESCRIPTION: The method find_system_areas in the base class of the core_question area has been deprecated. This is due to system context no longer being a valid context for assigning question categories. No replacement is provided.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/UPGRADING.md#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\ntool_brickfield\\local\\areas\\core_question\\base::find_system_areas\n```\n\n----------------------------------------\n\nTITLE: Native Function Call Prefix Migration in Guzzle\nDESCRIPTION: Demonstrates how to update native function calls by adding a leading slash to ensure no method overloading occurs\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n// Before:\ncurl_version();\n\n// After:\n\\curl_version();\n```\n\n----------------------------------------\n\nTITLE: Configuring Forbidden Classes in Moodle Attribute\nDESCRIPTION: Specifies a list of forbidden class values that cannot be used in HTML class attributes. Defaults to an empty array, allowing all classes by default.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Attr.ForbiddenClasses.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nAttr.ForbiddenClasses\nTYPE: lookup\nVERSION: 4.0.0\nDEFAULT: array()\n```\n\n----------------------------------------\n\nTITLE: OneDrive File Existence Verification Key\nDESCRIPTION: Localization key for checking if OneDrive files exist before import\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/onedrive/lang/en/deprecated.txt#2025-04-21_snippet_2\n\nLANGUAGE: moodle_lang\nCODE:\n```\nskydrivefilesexist\n```\n\n----------------------------------------\n\nTITLE: Removing Event Binding Code\nDESCRIPTION: Removing the default event binding code for cookie consent changes.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/policy/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n$(document).bind(\"user_cookie_consent_changed\", function(event, object) {\n  console.log(\"User cookie consent changed: \" + $(object).attr('consent') );\n});\n```\n\n----------------------------------------\n\nTITLE: Converting XML Service Description to JSON in Guzzle\nDESCRIPTION: Example showing the conversion from an XML service description format to JSON format. The XML version defines group-related API commands with parameters, while the JSON version reorganizes this into a more structured format with operations and better parameter organization.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/UPGRADING.md#2025-04-21_snippet_14\n\nLANGUAGE: xml\nCODE:\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<client>\n    <commands>\n        <!-- Groups -->\n        <command name=\"list_groups\" method=\"GET\" uri=\"groups.json\">\n            <doc>Get a list of groups</doc>\n        </command>\n        <command name=\"search_groups\" method=\"GET\" uri='search.json?query=\"{{query}} type:group\"'>\n            <doc>Uses a search query to get a list of groups</doc>\n            <param name=\"query\" type=\"string\" required=\"true\" />\n        </command>\n        <command name=\"create_group\" method=\"POST\" uri=\"groups.json\">\n            <doc>Create a group</doc>\n            <param name=\"data\" type=\"array\" location=\"body\" filters=\"json_encode\" doc=\"Group JSON\"/>\n            <param name=\"Content-Type\" location=\"header\" static=\"application/json\"/>\n        </command>\n        <command name=\"delete_group\" method=\"DELETE\" uri=\"groups/{{id}}.json\">\n            <doc>Delete a group by ID</doc>\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n        </command>\n        <command name=\"get_group\" method=\"GET\" uri=\"groups/{{id}}.json\">\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n        </command>\n        <command name=\"update_group\" method=\"PUT\" uri=\"groups/{{id}}.json\">\n            <doc>Update a group</doc>\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n            <param name=\"data\" type=\"array\" location=\"body\" filters=\"json_encode\" doc=\"Group JSON\"/>\n            <param name=\"Content-Type\" location=\"header\" static=\"application/json\"/>\n        </command>\n    </commands>\n</client>\n```\n\nLANGUAGE: json\nCODE:\n```\n{\n    \"name\":       \"Zendesk REST API v2\",\n    \"apiVersion\": \"2012-12-31\",\n    \"description\":\"Provides access to Zendesk views, groups, tickets, ticket fields, and users\",\n    \"operations\": {\n        \"list_groups\":  {\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"groups.json\",\n            \"summary\":   \"Get a list of groups\"\n        },\n        \"search_groups\":{\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"search.json?query=\\\"{query} type:group\\\"\",\n            \"summary\":   \"Uses a search query to get a list of groups\",\n            \"parameters\":{\n                \"query\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Zendesk Search Query\",\n                    \"type\":       \"string\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"create_group\": {\n            \"httpMethod\":\"POST\",\n            \"uri\":       \"groups.json\",\n            \"summary\":   \"Create a group\",\n            \"parameters\":{\n                \"data\":        {\n                    \"type\":       \"array\",\n                    \"location\":   \"body\",\n                    \"description\":\"Group JSON\",\n                    \"filters\":    \"json_encode\",\n                    \"required\":   true\n                },\n                \"Content-Type\":{\n                    \"type\":    \"string\",\n                    \"location\":\"header\",\n                    \"static\":  \"application/json\"\n                }\n            }\n        },\n        \"delete_group\": {\n            \"httpMethod\":\"DELETE\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Delete a group\",\n            \"parameters\":{\n                \"id\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to delete by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"get_group\":    {\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Get a ticket\",\n            \"parameters\":{\n                \"id\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to get by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"update_group\": {\n            \"httpMethod\":\"PUT\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Update a group\",\n            \"parameters\":{\n                \"id\":          {\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to update by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                },\n                \"data\":        {\n                    \"type\":       \"array\",\n                    \"location\":   \"body\",\n                    \"description\":\"Group JSON\",\n                    \"filters\":    \"json_encode\",\n                    \"required\":   true\n                },\n                \"Content-Type\":{\n                    \"type\":    \"string\",\n                    \"location\":\"header\",\n                    \"static\":  \"application/json\"\n                }\n            }\n        }\n}\n```\n\n----------------------------------------\n\nTITLE: Future Icon Deprecation Notice in Moodle 3.1.1\nDESCRIPTION: Warns about the future removal of the 'competency.png/svg' plugin icon in Moodle 3.1.1 and suggests using 'i/competencies' as a replacement.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.1.1 ===\n\n* The plugin icon 'competency.png/svg' will be removed in the future use i/competencies instead.\n```\n\n----------------------------------------\n\nTITLE: Removing Print Course Request Buttons Function in PHP\nDESCRIPTION: The previously deprecated \\print_course_request_buttons() method has been removed and can no longer be used.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\n// Old code (removed)\n\\print_course_request_buttons();\n\n// New code\n// Use alternative method or implement your own solution\n```\n\n----------------------------------------\n\nTITLE: New External Function Addition in TinyMCE 5.0\nDESCRIPTION: Documentation about the new external function 'editor_tiny_get_configuration' added in version 5.0. TinyMCE subplugins can provide configuration to this function by implementing the 'plugin_with_configuration_for_external' interface or overriding the 'is_enabled_for_external' method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- New external function `editor_tiny_get_configuration`.\n  TinyMCE subplugins can provide configuration to the new external function by implementing the `plugin_with_configuration_for_external` interface and/or overriding the `is_enabled_for_external` method.\n```\n\n----------------------------------------\n\nTITLE: Deprecated Tagging Functions in Moodle 3.1\nDESCRIPTION: List of deprecated tag-related functions that require either tag collection ID or component. These functions were phased out to support more flexible tagging mechanisms across different components.\nSOURCE: https://github.com/moodle/moodle/blob/main/tag/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// Deprecated functions include:\n// tag_type_set()\n// tag_description_set()\n// tag_get_tags()\n// tag_add()\n// tag_assign()\n// tag_print_cloud()\n```\n\n----------------------------------------\n\nTITLE: Removal of get_welcome_email_contact Method - PHP\nDESCRIPTION: The `enrol_self_plugin::get_welcome_email_contact` method has been removed. Developers should use the `enrol_plugin::get_welcome_message_contact` as its replacement to ensure notifications continue to function correctly.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_18\n\nLANGUAGE: php\nCODE:\n```\n// Final removal of enrol_self_plugin::get_welcome_email_contact method, please use enrol_plugin::get_welcome_message_contact instead\n// For more information see [MDL-81185](https://tracker.moodle.org/browse/MDL-81185)\n```\n\n----------------------------------------\n\nTITLE: Tracking Assignment Attempt Numbers in Moodle\nDESCRIPTION: Explains how attempt numbers are stored in submission and grade records, starting from 0 and incrementing with each new attempt.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/upgrade.txt#2025-04-21_snippet_6\n\nLANGUAGE: plaintext\nCODE:\n```\nExtra settings on the submission and grade records:\nattemptnumber - Starting from 0 until the latest attempt.\n```\n\n----------------------------------------\n\nTITLE: HTML Output Directory Structure\nDESCRIPTION: Shows the docs directory where generated HTML files are stored.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/component-library-backend.md#2025-04-21_snippet_1\n\nLANGUAGE: plaintext\nCODE:\n```\n docs\n```\n\n----------------------------------------\n\nTITLE: Installing GeoIP2 Source Files in Moodle\nDESCRIPTION: Commands to remove existing source directories and move the new source code into the proper Moodle directory structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nrm -rf lib/maxmind/GeoIp2/src lib/maxmind/MaxMind/src\nmv GeoIP2-php-X.Y.Z/src/ /path/to/moodle/lib/maxmind/GeoIp2/\nmv MaxMind-DB-Reader-php-X.Y.Z/src/ /path/to/moodle/lib/maxmind/MaxMind/\n```\n\n----------------------------------------\n\nTITLE: Mapping Activities in Moodle Quiz\nDESCRIPTION: This snippet presents a set of activities with descriptions formatted for a Moodle quiz, allowing users to match them accordingly. Each description corresponds to a specific Moodle activity type. The expected output is a correctly matched activity list, enhancing the interactive learning experience.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_in_category.gift.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n// question: 44  name: Moodle activities\n::Moodle activities::[html]Match the activity to the description.{\n\t=An activity supporting asynchronous discussions. -> Forum\n\t=A teacher asks a question and specifies a choice of multiple responses. -> Choice\n\t=A bank of record entries which participants can add to. -> Database\n\t=A collection of web pages that anyone can add to or edit. -> Wiki\n\t= -> Chat\n}\n```\n\n----------------------------------------\n\nTITLE: Composer Configuration for PSR Clock Implementation\nDESCRIPTION: JSON configuration for composer.json to indicate that a package provides an implementation of the PSR Clock interface. This should be added to the 'provide' section when creating a custom implementation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/clock/README.md#2025-04-21_snippet_2\n\nLANGUAGE: json\nCODE:\n```\n{\n  \"provide\": {\n    \"psr/clock-implementation\": \"1.0\"\n  }\n}\n```\n\n----------------------------------------\n\nTITLE: Git Commands for Post-Merge Cleanup\nDESCRIPTION: Series of commands to clean up local and remote branches after a successful pull request merge.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/plist/CONTRIBUTING.md#2025-04-21_snippet_4\n\nLANGUAGE: shell\nCODE:\n```\ngit push origin --delete feature/created-branch\n```\n\nLANGUAGE: shell\nCODE:\n```\ngit checkout develop -f\n```\n\nLANGUAGE: shell\nCODE:\n```\ngit branch -D feature/created-branch\n```\n\nLANGUAGE: shell\nCODE:\n```\ngit pull --ff upstream develop\n```\n\n----------------------------------------\n\nTITLE: HTML Tag Exclusion Examples\nDESCRIPTION: Example of HTML tags that are affected by SGML-style exclusions, specifically the object tag being excluded from pre tag descendants.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.DisableExcludes.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<pre>\n  <object>\n  </object>\n</pre>\n```\n\n----------------------------------------\n\nTITLE: Documenting Popper.js Library Relocation in Moodle 3.5\nDESCRIPTION: Indicates the relocation of the Popper.js library from the tool_usertours plugin to the Moodle core.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/usertours/upgrade.txt#2025-04-21_snippet_4\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.5 ===\n* Third party library Popper.js was moved from this plugin into core (core/popper)\n```\n\n----------------------------------------\n\nTITLE: True/False Question Example with 'T'\nDESCRIPTION: This snippet shows a True/False question in Moodle with the answer set to \"T\" (True), with a question and text.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions.gift.txt#2025-04-21_snippet_7\n\nLANGUAGE: text\nCODE:\n```\n// name 0-11\n::2-08 TSL::TSL is blablabla.{T}\n```\n\n----------------------------------------\n\nTITLE: Configuring XML-RPC Deprecation Warnings in PHP\nDESCRIPTION: Sets a flag to enable generation of warning messages for deprecated features in the XML-RPC library. When set to false, deprecation warnings will be added to the PHP error log.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc\\PhpXmlRpc::xmlrpc_silence_deprecations = false;\n```\n\n----------------------------------------\n\nTITLE: Deprecating clean_data method in Database Authentication Plugin (PHP)\nDESCRIPTION: The auth_plugin_db::clean_data() method has been deprecated in Moodle 3.1 and will be removed in a future version. Developers should update their code to use core_user::clean_data() instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/db/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n* The auth_plugin_db::clean_data() has been deprecated and will be removed\n  in a future version. Please update to use core_user::clean_data()\n  instead.\n```\n\n----------------------------------------\n\nTITLE: Deprecation of MNet Plugin Type - PHP\nDESCRIPTION: The `mnetservice` plugintype has been deprecated due to its long-standing status. This action is part of a larger effort to streamline and modernize plugin dependencies in the system.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_25\n\nLANGUAGE: php\nCODE:\n```\n// The plugintype mnetservice was deprecated. MNet has been deprecated for many years now and will be removed.\n// For more information see [MDL-84311](https://tracker.moodle.org/browse/MDL-84311)\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation for Block System Changes\nDESCRIPTION: Documents the removal of block_mnet_hosts plugin from Moodle core, with reference to the relevant tracking issue MDL-84309.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# core_block (subsystem / plugintype) Upgrade notes\n\n## 5.0\n\n### Removed\n\n- Removed block_mnet_hosts plugin from core\n\n  For more information see [MDL-84309](https://tracker.moodle.org/browse/MDL-84309)\n```\n\n----------------------------------------\n\nTITLE: Configuring Flash Full Screen Permission in HTML Output\nDESCRIPTION: This configuration setting determines whether embedded Flash content from HTML.SafeObject is allowed to expand to full screen mode. It corresponds to the 'allowFullScreen' parameter in Flash objects.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.FlashAllowFullScreen.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<code>allowFullScreen</code>\n```\n\n----------------------------------------\n\nTITLE: Configuring Custom HTML Doctype in Moodle\nDESCRIPTION: This configuration snippet defines the parameters for setting a custom HTML doctype in Moodle. It specifies the type, version, default value, and provides a description for power users who need to define their own document type.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.CustomDoctype.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.CustomDoctype\nTYPE: string/null\nVERSION: 2.0.1\nDEFAULT: NULL\n--DESCRIPTION--\n\nA custom doctype for power-users who defined their own document\ntype. This directive only applies when %HTML.Doctype is blank.\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Removed Badge Components in 4.3\nDESCRIPTION: Specifies badge-related components that were deprecated since 3.11 and have been removed from the system.\nSOURCE: https://github.com/moodle/moodle/blob/main/badges/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\nbadges/ajax.js\nbadges_check_backpack_accessibility\nbadges_setup_backpack_js\nbadges_local_backpack_js\n```\n\n----------------------------------------\n\nTITLE: Deprecating Language Strings in Moodle MFA Tool\nDESCRIPTION: Two language strings in the tool_mfa plugin, 'inputrequired' and 'setuprequired', are deprecated in the Moodle 5.0 MFA tool upgrade. This change is part of the ongoing improvements to the MFA system.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\ninputrequired\nsetuprequired\n```\n\n----------------------------------------\n\nTITLE: External Function Call - tool_mobile::get_autologin_key (3.7)\nDESCRIPTION: Security update restricting function to work only with Moodle mobile or desktop app requests to prevent XSS attacks.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mobile/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\ntool_mobile::get_autologin_key\n```\n\n----------------------------------------\n\nTITLE: Documenting Core Analytics Removal Changes\nDESCRIPTION: Documents the removal of chat and survey components from the core_analytics subsystem in Moodle 5.0, with reference to the relevant Moodle tracker issue MDL-82457.\nSOURCE: https://github.com/moodle/moodle/blob/main/analytics/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# core_analytics (subsystem) Upgrade notes\n\n## 5.0\n\n### Removed\n\n- Remove chat and survey from core_analytics.\n\n  For more information see [MDL-82457](https://tracker.moodle.org/browse/MDL-82457)\n```\n\n----------------------------------------\n\nTITLE: Defining RemoveScriptContents Directive for HTML Purifier\nDESCRIPTION: This snippet defines the RemoveScriptContents directive for HTML Purifier. It specifies that the directive is of type bool/null, has a default value of NULL, was introduced in version 2.0.0, and was deprecated in version 2.1.0 in favor of Core.HiddenElements. The directive enables HTML Purifier to remove both script tags and their contents.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.RemoveScriptContents.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.RemoveScriptContents\nTYPE: bool/null\nDEFAULT: NULL\nVERSION: 2.0.0\nDEPRECATED-VERSION: 2.1.0\nDEPRECATED-USE: Core.HiddenElements\n--DESCRIPTION--\n<p>\n  This directive enables HTML Purifier to remove not only script tags\n  but all of their contents.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Database Empty Value Handling - SQL\nDESCRIPTION: Demonstrates the deprecated $DB->sql_empty() method that should be replaced with SQL parameters containing empty values for better Oracle compatibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_102\n\nLANGUAGE: PHP\nCODE:\n```\n$DB->sql_empty()\n```\n\n----------------------------------------\n\nTITLE: Setting Table Caption Example in PHP\nDESCRIPTION: Example showing how to set a caption with attributes for a table using set_caption() method\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$caption = 'Caption for table'\n$captionattributes = ['class' => 'inline']\n```\n\n----------------------------------------\n\nTITLE: Deprecated CurlAuthPlugin in Guzzle\nDESCRIPTION: This code snippet marks `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin` as deprecated and suggests using `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest');` as an alternative.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_19\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked `Guzzle\\\\Plugin\\\\CurlAuth\\\\CurlAuthPlugin` as deprecated. Use `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest');`\"\n```\n\n----------------------------------------\n\nTITLE: Removing `$CFG->svgicons` Setting\nDESCRIPTION: The `$CFG->svgicons` setting has been removed because all modern browsers now handle SVG files correctly.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_30\n\n\n\n----------------------------------------\n\nTITLE: Listing Removed Classes in SMS Factor Authentication for Moodle 4.5\nDESCRIPTION: This snippet enumerates the classes that have been removed from the SMS factor authentication module in Moodle 4.5. The removal is due to the SMS feature now using the core_sms API.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/factor/sms/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n- The following classes are removed as the SMS feature now takes advantage of `core_sms` API:\n  - `\\factor_sms\\event\\sms_sent`\n  - `\\factor_sms\\local\\smsgateway\\aws_sns`\n  - `\\factor_sms\\local\\smsgateway\\gateway_interface`\n\n  For more information see [MDL-80962](https://tracker.moodle.org/browse/MDL-80962)\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.Doctype Configuration for Moodle Filtering\nDESCRIPTION: This configuration defines the HTML.Doctype option used in Moodle's filtering system. It allows specifying the HTML doctype to be used, overriding older directives like %HTML.XHTML or %HTML.Strict. The doctype can be set to one of the allowed values or left as null.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.Doctype.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.Doctype\nTYPE: string/null\nDEFAULT: NULL\n--DESCRIPTION--\nDoctype to use during filtering. Technically speaking this is not actually\na doctype (as it does not identify a corresponding DTD), but we are using\nthis name for sake of simplicity. When non-blank, this will override any\nolder directives like %HTML.XHTML or %HTML.Strict.\n--ALLOWED--\n'HTML 4.01 Transitional', 'HTML 4.01 Strict', 'XHTML 1.0 Transitional', 'XHTML 1.0 Strict', 'XHTML 1.1'\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Documenting Comment API Changes for Moodle 4.5 and Beyond\nDESCRIPTION: Indicates that the current file has been replaced by UPGRADING.md for Moodle version 4.5 and later. Refers to MDL-81125 for more information.\nSOURCE: https://github.com/moodle/moodle/blob/main/comment/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.5 Onwards ===\n\nThis file has been replaced by UPGRADING.md. See MDL-81125 for further information.\n```\n\n----------------------------------------\n\nTITLE: Copying Roundcube Files to Moodle Directory\nDESCRIPTION: Command to copy required Roundcube Framework PHP files to the Moodle messageinbound directory. This command transfers the core functionality files needed for email processing.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/messageinbound/roundcube/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncp rcube_charset.php \\\nrcube_imap_generic.php \\\nrcube_message_header.php \\\nrcube_mime.php \\\nrcube_result_index.php \\\nrcube_result_thread.php \\\nrcube_utils.php \\\n/path/to/moodle/admin/tool/messageinbound/roundcube/\n```\n\n----------------------------------------\n\nTITLE: Deprecated quiz::confirm_start_attempt_message and mod_quiz_view_object::$startattemptwarning (Moodle 3.1)\nDESCRIPTION: The functions `quiz::confirm_start_attempt_message` and `mod_quiz_view_object::$startattemptwarning` have been deprecated. This functionality is now handled entirely within the quiz access rule plugins.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_22\n\nLANGUAGE: text\nCODE:\n```\n\"quiz::confirm_start_attempt_message and mod_quiz_view_object::$startattemptwarning\n  have been deprecated. This functionality is now entirely handled within the\n  quiz access rule plugins.\"\n```\n\n----------------------------------------\n\nTITLE: Terminal Interaction Notice for GNU GPL Programs\nDESCRIPTION: This snippet shows a short notice to be displayed when a GNU GPL program starts in an interactive mode. It includes placeholders for the program name, copyright year, and author name.\nSOURCE: https://github.com/moodle/moodle/blob/main/COPYING.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n<program>  Copyright (C) <year>  <name of author>\nThis program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\nThis is free software, and you are welcome to redistribute it\nunder certain conditions; type `show c' for details.\n```\n\n----------------------------------------\n\nTITLE: Updated PHP Method Reference - Core CourseFormat Base Class\nDESCRIPTION: Shows the signatures of new and updated methods in the core_courseformat\\base class, including get_generic_section_name(), invalidate_all_session_caches(), and others that were added or modified.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\ncore_courseformat\\base::get_generic_section_name();\ncore_courseformat\\base::invalidate_all_session_caches();\ncore_courseformat\\base::get_update_url();\ncore_courseformat\\base::get_sectionnum();\ncore_courseformat\\base::set_sectionnum();\n```\n\n----------------------------------------\n\nTITLE: Updating Git Remote URL for PHPMailer\nDESCRIPTION: Command to update the remote URL for existing git clones to point to the new PHPMailer GitHub organization repository.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_5\n\nLANGUAGE: sh\nCODE:\n```\ngit remote set-url upstream https://github.com/PHPMailer/PHPMailer.git\n```\n\n----------------------------------------\n\nTITLE: Configuring DateTime Object Return for XML-RPC in PHP\nDESCRIPTION: Enables the library to return DateTime objects instead of strings for received dateTime.iso8601 XML-RPC values. This applies to both client-side and server-side operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_2\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc\\PhpXmlRpc::$xmlrpc_return_datetimes = true;\n```\n\n----------------------------------------\n\nTITLE: Removal of htmllize_tree Method - PHP\nDESCRIPTION: In `mod_folder`, the `htmllize_tree()` method has been removed, suggesting the preference for `renderable_tree_elements` for managing tree structures within folder representations.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_43\n\nLANGUAGE: php\nCODE:\n```\n// Method htmllize_tree() has been removed. Please use renderable_tree_elements instead\n// For more information see [MDL-79214](https://tracker.moodle.org/browse/MDL-79214)\n```\n\n----------------------------------------\n\nTITLE: CSS Rendered Output\nDESCRIPTION: The final rendered CSS output after parsing and processing, showing compressed formatting\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_15\n\nLANGUAGE: css\nCODE:\n```\n#header {margin: 10px 2em 1cm 2%;font-family: Verdana,Helvetica,\"Gill Sans\",sans-serif;color: red !important;}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Comment Regex Validation\nDESCRIPTION: Configuration parameter that defines a regular expression pattern to validate HTML comments. Comments are allowed if their body matches the specified regex pattern after trimming whitespace. This works in conjunction with HTML.AllowedComments in a union operation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.AllowedCommentsRegexp.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.AllowedCommentsRegexp\nTYPE: string/null\nVERSION: 4.4.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: Applying GNU GPL Notice to Source Files\nDESCRIPTION: This snippet demonstrates how to add the GNU GPL notice to the start of each source file in a program. It includes placeholders for the program name, copyright year, and author name.\nSOURCE: https://github.com/moodle/moodle/blob/main/COPYING.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n<one line to give the program's name and a brief idea of what it does.>\nCopyright (C) <year>  <name of author>\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n```\n\n----------------------------------------\n\nTITLE: Deprecating Parameters in Grading Action Menu Constructor in PHP\nDESCRIPTION: The $submissionpluginenabled and $submissioncount parameters from the constructor of the \\mod_assign\\output::grading_actionmenu class have been deprecated.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/assign/UPGRADING.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n\\mod_assign\\output::grading_actionmenu\n```\n\n----------------------------------------\n\nTITLE: Modifying External Function Parameters in Moodle 3.0\nDESCRIPTION: The 'name' parameter in get_choices_by_courses and 'text' parameter in get_choice_results have been changed to PARAM_RAW. This change accommodates the new external_format_string function's behavior with the moodlewssettingraw parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/choice/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: plaintext\nCODE:\n```\nmod_choice_external::get_choices_by_courses\nmod_choice_external::get_choice_results\n```\n\n----------------------------------------\n\nTITLE: Installing PHPUnit Dependencies with Composer\nDESCRIPTION: Command to install PHPUnit and its dependencies in the Moodle directory using Composer. This should be executed from the Moodle root directory after installing Composer.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpunit/readme.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nphp composer.phar install\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML.AllowedAttributes for HTML Purifier in Moodle\nDESCRIPTION: Specifies the configuration for HTML.AllowedAttributes, which allows overriding HTML Purifier's default attribute set. It supports tag-specific and global attribute definitions using 'tag.attr' and '*.attr' syntax respectively.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.AllowedAttributes.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.AllowedAttributes\nTYPE: lookup/null\nVERSION: 1.3.0\nDEFAULT: NULL\n```\n\n----------------------------------------\n\nTITLE: mod_quiz\\output\\edit_renderer::start_section_list Argument Change (Moodle 3.1)\nDESCRIPTION: The `mod_quiz\\output\\edit_renderer::start_section_list` method now takes `$structure` as an argument. Overridden methods need to be updated.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_25\n\nLANGUAGE: text\nCODE:\n```\n\"mod_quiz\\output\\edit_renderer::start_section_list now takes $structure as an\n  argument. If you have overridden this method (it's hard to believe anyone ever\n  would) you will need to update your renderer.\"\n```\n\n----------------------------------------\n\nTITLE: Changing Collection Constructor in Guzzle\nDESCRIPTION: This code snippet shows a change in the `Guzzle\\Common\\Collection::__construct($data)` method. It no longer accepts a null value for `$data`, but defaults to an empty array. This enforces a more consistent behavior for collection initialization.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n\"Changed `Guzzle\\\\Common\\\\Collection::__construct($data)` to no longer accepts a null value for `$data` but a\\n  default `array()`\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Cache Serializer Path in Moodle\nDESCRIPTION: Specifies the absolute path for storing serialized cache definitions. The path must be writable by the webserver and defaults to the HTML Purifier library's DefinitionCache/Serializer directory if not explicitly set.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Cache.SerializerPath.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nCache.SerializerPath\n```\n\n----------------------------------------\n\nTITLE: Installing XHProf Extension\nDESCRIPTION: Commands to clone, build and install the XHProf extension from source\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_0\n\nLANGUAGE: sh\nCODE:\n```\ngit clone https://github.com/longxinH/xhprof.git ./xhprof\ncd xhprof/extension/\n/path/to/php7/bin/phpize\n./configure --with-php-config=/path/to/php7/bin/php-config\nmake && sudo make install\n```\n\n----------------------------------------\n\nTITLE: Installing Guzzle Library Dependencies\nDESCRIPTION: This snippet creates a temporary directory, installs Guzzle and its middleware using Composer, and moves the resulting library files to the appropriate Moodle directories.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ninstalldir=`mktemp -d`\ncd \"$installdir\"\ncomposer require guzzlehttp/guzzle kevinrob/guzzle-cache-middleware\n\ncd -\nrm -rf lib/guzzlehttp/guzzle lib/guzzlehttp/psr7 lib/guzzlehttp/promises lib/guzzlehttp/kevinrob/guzzlecache\ncp -rf \"$installdir\"/vendor/guzzlehttp/guzzle lib/guzzlehttp/guzzle\ncp -rf \"$installdir\"/vendor/guzzlehttp/psr7 lib/guzzlehttp/psr7\ncp -rf \"$installdir\"/vendor/guzzlehttp/promises lib/guzzlehttp/promises\ncp -rf \"$installdir\"/vendor/kevinrob/guzzle-cache-middleware lib/guzzlehttp/kevinrob/guzzlecache\nrm -rf lib/guzzlehttp/kevinrob/guzzlecache/*.png\n\necho \"See instructions in lib/guzzlehttp/readme_moodle.md\" > lib/guzzlehttp/guzzle/readme_moodle.txt\necho \"See instructions in lib/guzzlehttp/readme_moodle.md\" > lib/guzzlehttp/promises/readme_moodle.txt\necho \"See instructions in lib/guzzlehttp/readme_moodle.md\" > lib/guzzlehttp/psr7/readme_moodle.txt\necho \"See instructions in lib/guzzlehttp/readme_moodle.md\" > lib/guzzlehttp/kevinrob/guzzlecache/readme_moodle.txt\ngit add lib/guzzlehttp/guzzle lib/guzzlehttp/psr7 lib/guzzlehttp/promises\n```\n\n----------------------------------------\n\nTITLE: ISO8601 Helper Routines for XML-RPC in PHP\nDESCRIPTION: ISO8601 helper routines are included for translation to and from UNIX timestamps in XML-RPC for PHP.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_17\n\nLANGUAGE: PHP\nCODE:\n```\n\"* ISO8601 helper routines for translation to and from UNIX timestamps\"\n```\n\n----------------------------------------\n\nTITLE: Plotting Points with SVG\nDESCRIPTION: This snippet illustrates how to define and visualize points in a 2D Cartesian plane using SVG elements. Each point's position is specified by coordinates, with styles applied for color and stroke. The snippet relies on standard SVG formatting for rendering graphical objects.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-3.txt#2025-04-21_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<svg>\n<circle cx=\"18.06666666666667\" cy=\"22.66666666666667\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"22.66666666666667\" cy=\"0\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"22.66666666666667\" cy=\"22.66666666666667\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"39.2599818304895\" cy=\"0\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"39.2599818304895\" cy=\"22.66666666666667\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"45.33333333333333\" cy=\"0\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"39.2599818304895\" cy=\"0\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n<circle cx=\"0\" cy=\"22.66666666666667\" r=\"1\" fill=\"#222\" stroke=\"#000\" stroke-opacity=\"0.02\"/>\n</svg>\n```\n\n----------------------------------------\n\nTITLE: Audio Greeting Questionnaire for Moodle\nDESCRIPTION: This snippet includes an audio link for a greeting and a question about the language spoken. It tests users' listening comprehension skills in an audio format. The expected output is user responses categorized by their language proficiency.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/gift/tests/fixtures/questions_in_category.gift.txt#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n// question: 43  name: Greeting\n::Greeting::[html]<a href\\=\"http\\://demo.moodle.net/file.php/5/media/bonjour.mp3\">Listen to this greeting\\:</a><br /><br />What language is being spoken?{\n\t~English#Sorry, listen again.\n\t=French#Yes, well done!\n\t~German#Sorry, listen again.\n\t~Spanish#Sorry, listen again.\n}\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Tidy Remove Settings\nDESCRIPTION: Configuration block that defines settings for removing certain Tidy fixes from the default set. Includes version information, type specification, and default empty array value.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.TidyRemove.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nHTML.TidyRemove\nTYPE: lookup\nVERSION: 2.0.0\nDEFAULT: array()\n```\n\n----------------------------------------\n\nTITLE: Using Markdown Extra Syntax\nDESCRIPTION: Example showing how to use the MarkdownExtra class for additional Markdown syntax features.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/markdown/Readme.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nuse Michelf\\MarkdownExtra;\n$my_html = MarkdownExtra::defaultTransform($my_text);\n```\n\n----------------------------------------\n\nTITLE: Defining Disable URI Setting\nDESCRIPTION: This code snippet defines a configuration option to disable all URIs within forms. It specifies the type as boolean, the version, and the default value of the setting. This is useful for controlling hyperlink behavior within the application.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.Disable.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nURI.Disable\nTYPE: bool\nVERSION: 1.3.0\nDEFAULT: false\n--DESCRIPTION--\n\n<p>\n    Disables all URIs in all forms. Not sure why you'd want to do that\n    (after all, the Internet's founded on the notion of a hyperlink).\n</p>\n\n--ALIASES--\nAttr.DisableURI\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Aliasing Old Class Locations for Backwards Compatibility - PHP\nDESCRIPTION: This snippet shows the aliasing of old class locations in Moodle for backwards compatibility. This is crucial as it ensures that deprecated functions still have accessible references to prevent breaking changes for users updating from older versions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_49\n\nLANGUAGE: php\nCODE:\n```\n    - external_settings                 => core_external\\external_settings\n    - external_single_structure         => core_external\\external_single_structure\n    - external_util                     => core_external\\util\n    - external_value                    => core_external\\external_value\n    - external_warnings                 => core_external\\external_warnings\n    - restricted_context_exception      => core_external\\restricted_context_exception\n```\n\n----------------------------------------\n\nTITLE: Creating Test Helpers for Automated Stress Testing in PHP\nDESCRIPTION: These test helper methods facilitate the creation of automated stress tests for various report sources in Moodle. They are essential for validating the performance and stability of data sources under load.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\nfunction datasource_stress_test_columns() {\n    // Implementation for testing report columns under stress\n}\n\nfunction datasource_stress_test_columns_aggregation() {\n    // Implementation for testing aggregation of report columns under stress\n}\n\nfunction datasource_stress_test_conditions() {\n    // Implementation for testing conditions of report sources under stress\n}\n```\n\n----------------------------------------\n\nTITLE: XHProf PHP.ini Configuration\nDESCRIPTION: Basic PHP.ini configuration required to enable XHProf extension\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/xhprof/README.md#2025-04-21_snippet_1\n\nLANGUAGE: ini\nCODE:\n```\n[xhprof]\nextension = xhprof.so\nxhprof.output_dir = /tmp/xhprof\n```\n\n----------------------------------------\n\nTITLE: Creating Frontmatter Metadata for Component Library Pages\nDESCRIPTION: Demonstrates the required YAML frontmatter structure for a component library page. This metadata defines the layout type, page title, creation date, and draft status for the page generation process.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/adding-pages.md#2025-04-21_snippet_1\n\nLANGUAGE: yaml\nCODE:\n```\n---\nlayout: docs\ntitle: \"Breadcrumb navigation\"\ndate: 2020-03-02T10:13:29+01:00\ndraft: false\n---\n```\n\n----------------------------------------\n\nTITLE: Updating YUI3 Version in Moodle Files (Shell)\nDESCRIPTION: This command uses sed to replace all occurrences of '@VERSION@' with the current YUI3 version (3.18.1) in all files within the directory. This ensures that the correct version is specified throughout the codebase after importing a new YUI3 version.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/yuilib/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: Shell\nCODE:\n```\nfind . -type f -exec sed -i \"s/@VERSION@/3.18.1/g\" {} \\;\n```\n\n----------------------------------------\n\nTITLE: Running PHPUnit Tests for jmespath.php\nDESCRIPTION: jmespath.php uses PHPUnit for testing to ensure implementation consistency. After installing dependencies via Composer, tests can be executed using a make command. Included are both compliance and performance tests.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/jmespath/README.rst#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nmake test\n```\n\nLANGUAGE: bash\nCODE:\n```\nmake perf\n```\n\n----------------------------------------\n\nTITLE: YUI Module Renaming - JavaScript\nDESCRIPTION: Shows the renaming of YUI module from moodle-enrol-notification to moodle-core-notification.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_103\n\nLANGUAGE: JavaScript\nCODE:\n```\nmoodle-enrol-notification\n```\n\n----------------------------------------\n\nTITLE: Markdown Documentation Structure\nDESCRIPTION: Core documentation structure for Moodle's README file, including project description, documentation links, community resources, installation guidance, and licensing information.\nSOURCE: https://github.com/moodle/moodle/blob/main/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# Moodle\n\n<p align=\"center\"><a href=\"https://moodle.org\" target=\"_blank\" title=\"Moodle Website\">\n  <img src=\"https://raw.githubusercontent.com/moodle/moodle/main/.github/moodlelogo.svg\" alt=\"The Moodle Logo\">\n</a></p>\n\n[Moodle][1] is the World's Open Source Learning Platform, widely used around the world by countless universities, schools, companies, and all manner of organisations and individuals.\n\nMoodle is designed to allow educators, administrators and learners to create personalised learning environments with a single robust, secure and integrated system.\n\n## Documentation\n\n- Read our [User documentation][3]\n- Discover our [developer documentation][5]\n- Take a look at our [demo site][4]\n\n## Community\n\n[moodle.org][1] is the central hub for the Moodle Community, with spaces for educators, administrators and developers to meet and work together.\n\nYou may also be interested in:\n\n- attending a [Moodle Moot][6]\n- our regular series of [developer meetings][7]\n- the [Moodle User Association][8]\n\n## Installation and hosting\n\nMoodle is Free, and Open Source software. You can easily [download Moodle][9] and run it on your own web server, however you may prefer to work with one of our experienced [Moodle Partners][10].\n\nMoodle also offers hosting through both [MoodleCloud][11], and our [partner network][10].\n\n## License\n\nMoodle is provided freely as open source software, under version 3 of the GNU General Public License. For more information on our license see\n```\n\n----------------------------------------\n\nTITLE: Directly Manipulating PSR-7 Response Body in PHP\nDESCRIPTION: Shows how to directly write to the PSR-7 response body without extracting it separately, useful for simple operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_7\n\nLANGUAGE: PHP\nCODE:\n```\n$response->getBody()->write('hello');\n```\n\n----------------------------------------\n\nTITLE: Adding groupid Parameter in mod_choice - PHP\nDESCRIPTION: The WebService `mod_choice_get_choice_results` now includes a `groupid` parameter, allowing developers to specify a group when retrieving choice results. This enhancement provides more granular control over data retrieval.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_35\n\nLANGUAGE: php\nCODE:\n```\n// The WebService mod_choice_get_choice_results has a new parameter groupid that allows specifying the group to get the results for.\n// The default behaviour hasn't changed if the parameter isn't specified.\n// For more information see [MDL-78449](https://tracker.moodle.org/browse/MDL-78449)\n```\n\n----------------------------------------\n\nTITLE: Overriding Components with Custom Options\nDESCRIPTION: Shows how to override the default route parser, data generator, and dispatcher components through the options array when creating a dispatcher, allowing for customized routing behavior.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_10\n\nLANGUAGE: php\nCODE:\n```\n<?php\n\n$dispatcher = FastRoute\\simpleDispatcher(function(FastRoute\\RouteCollector $r) {\n    /* ... */\n}, [\n    'routeParser' => 'FastRoute\\\\RouteParser\\\\Std',\n    'dataGenerator' => 'FastRoute\\\\DataGenerator\\\\GroupCountBased',\n    'dispatcher' => 'FastRoute\\\\Dispatcher\\\\GroupCountBased',\n]);\n```\n\n----------------------------------------\n\nTITLE: Configuring Allowed URI Schemes in Moodle\nDESCRIPTION: Defines a predefined array of approved URI schemes with safety mechanisms to prevent XSS attacks. Includes common protocols like HTTP, HTTPS, mailto, and FTP while providing flexibility for future scheme additions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/URI.AllowedSchemes.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\narray (\n  'http' => true,\n  'https' => true,\n  'mailto' => true,\n  'ftp' => true,\n  'nntp' => true,\n  'news' => true,\n  'tel' => true,\n)\n```\n\n----------------------------------------\n\nTITLE: Updating SCSS Font Paths\nDESCRIPTION: This SCSS code snippet demonstrates how to update font paths to use the Moodle specific method for referencing fonts. It requires replacing the standard URL path with a Moodle specific syntax. Key parameters include the font name and file format.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/scss/fontawesome/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: scss\nCODE:\n```\nurl('#{$fa-font-path}/fa-xxxxx-400.zzzzz') format('zzzzz')\n```\n\nLANGUAGE: scss\nCODE:\n```\nurl('[[font:core|fa-xxxxx-400.zzzzz]]') format('zzzzz')\n```\n\n----------------------------------------\n\nTITLE: Rendering Display-Only Dropdown Status in PHP for Moodle\nDESCRIPTION: This PHP code snippet demonstrates how to create and render a display-only dropdown status component in Moodle. It sets up a choicelist with options and renders it as a dropdown status.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/dropdowns.md#2025-04-21_snippet_7\n\nLANGUAGE: php\nCODE:\n```\n$choice = new core\\output\\choicelist('Dialog content');\n\n// Add some data attributes to the choices.\n$choice->add_option(\n    'option1',\n    get_string('option1', YOURPLUGIN), [\n    extras' => ['data-action' => 'updateActionName']\n]);\n$choice->add_option(\n    'option2',\n    get_string('option2', YOURPLUGIN), [\n    extras' => ['data-action' => 'updateActionName']\n]);\n$choice->set_selected_value('option2');\n\n// Add some attribute to select through a query selector.\n$dialog = new core\\output\\local\\dropdown\\status(\n    get_string('buttontext', YOURPLUGIN),\n    $choice,\n    ['extras' => ['id' => 'mydropdown']]\n);\necho $OUTPUT->render($dialog);\n```\n\n----------------------------------------\n\nTITLE: Modifying Blog Entry Associations in Moodle 2.7\nDESCRIPTION: Moodle 2.7 changes the behavior of blog_entry methods for managing associations. The add_associations() method no longer accepts parameters, while add_association() now only accepts a single parameter.\nSOURCE: https://github.com/moodle/moodle/blob/main/blog/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n=== 2.7 ===\n\n* blog_entry->add_associations() does not accept any params.\n* blog_entry->add_association() accepts only one param.\n```\n\n----------------------------------------\n\nTITLE: Deprecated Request Interface Methods in Guzzle\nDESCRIPTION: This code snippet shows the removal of `Guzzle\\Http\\Message\\RequestInterface::canCache`, `Guzzle\\Http\\Message\\RequestInterface::setIsRedirect`, and `Guzzle\\Http\\Message\\RequestInterface::isRedirect` from the RequestInterface.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_11\n\nLANGUAGE: PHP\nCODE:\n```\n\"Removed `Guzzle\\\\Http\\\\Message\\\\RequestInterface::canCache`\\n* Removed `Guzzle\\\\Http\\\\Message\\\\RequestInterface::setIsRedirect`\\n* Removed `Guzzle\\\\Http\\\\Message\\\\RequestInterface::isRedirect`\"\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.Trusted Configuration in INI format for Moodle\nDESCRIPTION: This snippet defines the HTML.Trusted configuration setting for Moodle. It specifies the type, version, default value, and provides a description of the setting's purpose and implications.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.Trusted.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.Trusted\nTYPE: bool\nVERSION: 2.0.0\nDEFAULT: false\n--DESCRIPTION--\nIndicates whether or not the user input is trusted or not. If the input is\ntrusted, a more expansive set of allowed tags and attributes will be used.\nSee also %CSS.Trusted.\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Updating togglecontact_link_params() Method - PHP\nDESCRIPTION: This snippet describes the update to the `togglecontact_link_params()` method in the core_message helper. It now accepts a new optional parameter, `$isrequested`, that indicates the status of the contact request.\nSOURCE: https://github.com/moodle/moodle/blob/main/message/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\n// core_message/helper.php\n\n// Updated togglecontact_link_params method\npublic static function togglecontact_link_params($userid, $iscontact = false, $isrequested = false) {\n    // Implementation\n}\n?>\n```\n\n----------------------------------------\n\nTITLE: Modifying Module Closure\nDESCRIPTION: Replacing the jQuery plugin closure with AMD module closure.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/policy/readme_moodle.txt#2025-04-21_snippet_3\n\nLANGUAGE: javascript\nCODE:\n```\n}(jQuery));\n```\n\nLANGUAGE: javascript\nCODE:\n```\n});\n```\n\n----------------------------------------\n\nTITLE: Deprecated function: qbank_bulkmove/helper::get_displaydata\nDESCRIPTION: This snippet indicates that the function `qbank_bulkmove/helper::get_displaydata` has been deprecated. It has been replaced by a modal and webservice implementation, specifically `qbank_bulkmove/modal_question_bank_bulkmove` and `core_question_external\\move_questions`. The deprecation is linked to Moodle tracker issue MDL-71378.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/bulkmove/UPGRADING.md#2025-04-21_snippet_0\n\n\n\n----------------------------------------\n\nTITLE: Updating Event Description in Calendar for Quiz Module - PHP\nDESCRIPTION: This snippet addresses the modification required when setting event descriptions to ensure the integrity of theme and output initialization, specifically for calendar events related to the quiz module.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$event->description = format_module_intro('quiz', $quiz, $cmid, false);\n$event->format = FORMAT_HTML;\n```\n\n----------------------------------------\n\nTITLE: HTML Purifier Core.Encoding Configuration Definition\nDESCRIPTION: Configuration directive that defines the character encoding used by HTML Purifier. Defaults to UTF-8 and only accepts ISO-8859-1 as an alternative when iconv is not enabled. Used as a compatibility option for non-UTF-8 input handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.Encoding.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nCore.Encoding\nTYPE: istring\nDEFAULT: 'utf-8'\n```\n\n----------------------------------------\n\nTITLE: Adding Activity to Section Using Behat Steps in PHP\nDESCRIPTION: New Behat steps for adding activities to course sections without JavaScript dependencies. These steps replace previously deprecated ones and provide more flexibility in specifying activities and courses.\nSOURCE: https://github.com/moodle/moodle/blob/main/course/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nI add a :activityname to section :sectionnum using the activity chooser\nI add a :activitypluginname activity to course :coursefullname section :sectionnum\nI add a :activitypluginname activity to course :coursefullname section :sectionnum and I fill the form with:\n```\n\n----------------------------------------\n\nTITLE: Removing Auto-Initialization Code\nDESCRIPTION: Removing the default initialization code that automatically sets up the cookie popup, allowing for custom initialization in specific Moodle pages.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/policy/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n$(document).ready( function() {\n  if ($(\".eupopup\").length > 0) {\n    $(document).euCookieLawPopup().init({\n      'info' : 'YOU_CAN_ADD_MORE_SETTINGS_HERE',\n      'popupTitle' : 'This website is using cookies. ',\n      'popupText' : 'We use them to give you the best experience. If you continue using our website, we\\'ll assume that you are happy to receive all cookies on this website.'\n    });\n  }\n});\n```\n\n----------------------------------------\n\nTITLE: Setting Up Routes in Silex - PHP\nDESCRIPTION: Defines a route in a Silex application using named parameters. The parameters are included in the URL path, and their values are injected into the callback function. Silex application setup is required.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-di/invoker/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$app->get('/project/{project}/issue/{issue}', function ($project, $issue) {\n    // ...\n});\n```\n\n----------------------------------------\n\nTITLE: Markdown Changelog Entry\nDESCRIPTION: Structured changelog entries documenting fixed issues, added features, and removed functionality in the Slim Framework, including pull request references and descriptions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/slim/slim/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Fixed\n- [2789](https://github.com/slimphp/Slim/pull/2789) Fix Cookie header detection in `ResponseEmitter`\n- [2796](https://github.com/slimphp/Slim/pull/2796) Fix http message format\n- [2800](https://github.com/slimphp/Slim/pull/2800) Fix null comparisons more clear in `ErrorHandler`\n- [2802](https://github.com/slimphp/Slim/pull/2802) Fix incorrect search of a header in stack\n- [2806](https://github.com/slimphp/Slim/pull/2806) Simplify `Route::prepare()` method argument preparation\n- [2809](https://github.com/slimphp/Slim/pull/2809) Eliminate a duplicate code via HOF in `MiddlewareDispatcher`\n- [2816](https://github.com/slimphp/Slim/pull/2816) Fix RouteCollectorProxy::redirect() bug\n\n### Removed\n- [2811](https://github.com/slimphp/Slim/pull/2811) Remove `DeferredCallable`\n\n## 4.1.0 - 2019-08-06\n\n### Added\n- [#2779](https://github.com/slimphp/Slim/pull/2774) Add support for Slim callables `Class:method` resolution & Container Closure auto-binding in `MiddlewareDispatcher`\n- [#2774](https://github.com/slimphp/Slim/pull/2774) Add possibility for custom `RequestHandler` invocation strategies\n\n### Fixed\n- [#2776](https://github.com/slimphp/Slim/pull/2774) Fix group middleware on multiple nested groups\n```\n\n----------------------------------------\n\nTITLE: Defining HTML.SafeObject Configuration in Moodle\nDESCRIPTION: This snippet defines the HTML.SafeObject configuration setting. It specifies the type as boolean, version as 3.1.1, and default value as false. The setting controls whether to allow object tags in documents with additional security measures to prevent script execution.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.SafeObject.txt#2025-04-21_snippet_0\n\nLANGUAGE: plaintext\nCODE:\n```\nHTML.SafeObject\nTYPE: bool\nVERSION: 3.1.1\nDEFAULT: false\n--DESCRIPTION--\n<p>\n    Whether or not to permit object tags in documents, with a number of extra\n    security features added to prevent script execution. This is similar to\n    what websites like MySpace do to object tags.  You should also enable\n    %Output.FlashCompat in order to generate Internet Explorer\n    compatibility code for your object tags.\n</p>\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Updated HTML Template IDs\nDESCRIPTION: Changes to HTML ID attributes in course format templates for section collapse/expand functionality\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: HTML\nCODE:\n```\n<!-- Old format -->\n<div id=\"collapssesection{{num}}\">...</div>\n<div id=\"coursecontentcollapse{{num}}\">...</div>\n\n<!-- New format -->\n<div id=\"collapsesectionid{{id}}\">...</div>\n<div id=\"coursecontentcollapseid{{id}}\">...</div>\n```\n\n----------------------------------------\n\nTITLE: Icon Removal in Moodle 3.2\nDESCRIPTION: Notifies about the removal of the 'competency.png/svg' icon in Moodle 3.2 and recommends using 'i/competencies' instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/upgrade.txt#2025-04-21_snippet_3\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.2 ===\n\n* The icon 'competency.png/svg' has been removed, please use i/competencies instead.\n```\n\n----------------------------------------\n\nTITLE: Example Class Reference PHP\nDESCRIPTION: Reference to deprecated and removed renderer classes in course format API\nSOURCE: https://github.com/moodle/moodle/blob/main/course/format/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ncore_courseformat\\output\\section_renderer::section_edit_control_menu\ncore_courseformat\\output\\section_renderer::section_right_content\ncore_courseformat\\output\\section_renderer::section_left_content\n```\n\n----------------------------------------\n\nTITLE: Removing Deprecated qbank Classes and Methods\nDESCRIPTION: Comprehensive cleanup of deprecated components in the qbank plugin for Moodle version 5.0, removing various renderer, helper methods, and templates\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n// Removed classes and methods\nqbank_managecategories\\output\\renderer::class\nqbank_statistics\\helper::calculate_average_question_discriminative_efficiency()\nqbank_statistics\\helper::calculate_average_question_discrimination_index()\nqbank_statistics\\helper::get_all_places_where_questions_were_attempted()\nqbank_statistics\\helper::calculate_average_question_stats_item()\nqbank_statistics\\helper::calculate_average_question_facility()\nqbank_statistics\\helper::load_statistics_for_place()\nqbank_statistics\\helper::extract_item_value()\n```\n\n----------------------------------------\n\nTITLE: Promise Rejection in PHP\nDESCRIPTION: This example shows how to reject a promise, triggering the `$onRejected` callback. The `$onRejected` callback receives the rejection reason as an argument. In this example, the `$onRejected` callback echoes the rejection reason, resulting in the output 'Error!'.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/promises/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n\"use GuzzleHttp\\Promise\\Promise;\n\n$promise = new Promise();\n$promise->then(null, function ($reason) {\n    echo $reason;\n});\n\n$promise->reject('Error!');\n// Outputs \\\"Error!\\\"\"\n```\n\n----------------------------------------\n\nTITLE: Configuring Link URI Display in Moodle\nDESCRIPTION: A boolean configuration option that changes how hyperlinks are displayed by showing the URI instead of the linked text. When enabled, links will be transformed to show their actual web address.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/AutoFormat.DisplayLinkURI.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nAutoFormat.DisplayLinkURI\nTYPE: bool\nVERSION: 3.2.0\nDEFAULT: false\n```\n\n----------------------------------------\n\nTITLE: Basic Confirmation Modal Example\nDESCRIPTION: HTML for a basic confirmation modal with simple 'ok' action. The data attributes define the modal's title, content message asking for confirmation, and the text for the confirmation button.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/javascript/confirm.md#2025-04-21_snippet_2\n\nLANGUAGE: html\nCODE:\n```\n<button type=\"button\" class=\"btn btn-primary\" data-confirmation=\"modal\" data-confirmation-title-str='[\"ok\", \"core\"]'\ndata-confirmation-content-str='[\"areyousure\"]' data-confirmation-yes-button-str='[\"ok\", \"core\"]'>Show confirmation modal</button>\n```\n\n----------------------------------------\n\nTITLE: Extending `print_object` Function\nDESCRIPTION: The `print_object` function, intended for temporary debugging use, has been extended to handle objects with recursive references, and has an improved display. New parameters are available; see function documentation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_16\n\n\n\n----------------------------------------\n\nTITLE: Deprecation of 'mode' Parameter in mod_feedback - PHP\nDESCRIPTION: The 'mode' parameter from both `edit_template_action_bar` and `templates_table` constructors has been deprecated, indicating a shift towards simpler approaches in managing feedback templates.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_41\n\nLANGUAGE: php\nCODE:\n```\n// The 'mode' parameter has been deprecated from 'edit_template_action_bar' and 'templates_table' constructors.\n// For more information see [MDL-81744](https://tracker.moodle.org/browse/MDL-81744)\n```\n\n----------------------------------------\n\nTITLE: Documenting Activity Selector Removal in Moodle 5.0\nDESCRIPTION: Documentation noting the removal of the 'Activity' selector feature from the social_activities block, with reference to the related Moodle tracker issue MDL-83733.\nSOURCE: https://github.com/moodle/moodle/blob/main/blocks/social_activities/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# block_social_activities Upgrade notes\n\n## 5.0\n\n### Removed\n\n- 'Activity' selector in social_activities block has been deleted.\n\n  For more information see [MDL-83733](https://tracker.moodle.org/browse/MDL-83733)\n```\n\n----------------------------------------\n\nTITLE: Comparing PREG_UNMATCHED_AS_NULL Flag Output\nDESCRIPTION: Example demonstrating the differences in output when using PREG_UNMATCHED_AS_NULL flag versus not using it, showing how the flag provides more predictable results for unmatched groups.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/composer/pcre/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\npreg_match('/(a)(b)*(c)(d)*/', 'ac', $matches, $flags);\n```\n\n----------------------------------------\n\nTITLE: Retrieving Header Values as String from PSR-7 Objects in PHP\nDESCRIPTION: Demonstrates how to get comma-separated values from headers in both PSR-7 request and response objects using the getHeaderLine method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_3\n\nLANGUAGE: PHP\nCODE:\n```\n// getting value from request headers\n$request->getHeaderLine('Content-Type'); // will return: \"text/html; charset=UTF-8\"\n// getting value from response headers\n$response->getHeaderLine('My-Custom-Header'); // will return:  \"My Custom Message; The second message\"\n```\n\n----------------------------------------\n\nTITLE: Defining Help Link Text for TinyMCE RecordRTC Plugin in PHP\nDESCRIPTION: This code defines a language string 'helplinktext' for the TinyMCE RecordRTC plugin. The string provides help text for using audio and video recording functionality within the TinyMCE editor in Moodle.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nhelplinktext,tiny_recordrtc\n```\n\n----------------------------------------\n\nTITLE: Identifying Code Style Issues using Composer\nDESCRIPTION: Command to identify coding style issues in the codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncomposer style\n```\n\n----------------------------------------\n\nTITLE: Documenting Cohort API Changes in Markdown\nDESCRIPTION: This snippet provides a structured changelog of API changes for the cohort module in Moodle. It covers versions 4.5, 4.2, 3.1, and 2.6, detailing new features and corrections to web services.\nSOURCE: https://github.com/moodle/moodle/blob/main/cohort/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.5 Onwards ===\n\nThis file has been replaced by UPGRADING.md. See MDL-81125 for further information.\n\n===\nThis files describes API changes in /cohort/ information provided here is intended\nespecially for developers.\n\n=== 4.2 ===\n* Added cohort custom fields.\n\n=== 3.1 ===\n* The Webservice core_cohort_get_cohorts now has the added functionality of getting all cohorts\n  by not passing any parameters\n\n=== 2.6 ===\n* Webservice core_cohort_update_cohorts was incorrectly specifiying float as the parameter type\n  for cohort id. This field is actually int and input is now reported and processed as such.\n* Webservice core_cohort_get_cohorts was incorrectly specifiying float as the return\n  type for cohort id. The actual return type is int and is now reported as such.\n```\n\n----------------------------------------\n\nTITLE: Referencing LDAP Sync Task Class\nDESCRIPTION: Fully qualified class name for the new LDAP enrollment synchronization task that replaces the CLI script.\nSOURCE: https://github.com/moodle/moodle/blob/main/enrol/ldap/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\nenrol_ldap\\task\\sync_enrolments\n```\n\n----------------------------------------\n\nTITLE: Using Availability Field CSS Selector in JavaScript\nDESCRIPTION: Update to the CSS selector used in condition plugins' JavaScript files. The selector '#fitem_id_availabilityconditionsjson' should be replaced with '.availability-field'.\nSOURCE: https://github.com/moodle/moodle/blob/main/availability/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\n// Old selector\n$(\"#fitem_id_availabilityconditionsjson\")\n\n// New selector\n$(\".availability-field\")\n```\n\n----------------------------------------\n\nTITLE: Stream Creation with Utils::streamFor in PHP\nDESCRIPTION: Shows different ways to create streams using Utils::streamFor method, including from strings, file handles, and generators.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/psr7/README.md#2025-04-21_snippet_12\n\nLANGUAGE: php\nCODE:\n```\n$stream = GuzzleHttp\\Psr7\\Utils::streamFor('foo');\n$stream = GuzzleHttp\\Psr7\\Utils::streamFor(fopen('/path/to/file', 'r'));\n\n$generator = function ($bytes) {\n    for ($i = 0; $i < $bytes; $i++) {\n        yield ' ';\n    }\n}\n\n$stream = GuzzleHttp\\Psr7\\Utils::streamFor($generator(100));\n```\n\n----------------------------------------\n\nTITLE: Retrieving Header Values as Array from PSR-7 Objects in PHP\nDESCRIPTION: Shows how to get an array of values from headers in both PSR-7 request and response objects using the getHeader method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/docs/PSR7-Usage.md#2025-04-21_snippet_4\n\nLANGUAGE: PHP\nCODE:\n```\n// getting value from request headers\n$request->getHeader('Content-Type'); // will return: [\"text/html\", \"charset=UTF-8\"]\n// getting value from response headers\n$response->getHeader('My-Custom-Header'); // will return:  [\"My Custom Message\",  \"The second message\"]\n```\n\n----------------------------------------\n\nTITLE: Removal of get_lang_string Method - PHP\nDESCRIPTION: The `grade_report::get_lang_string` method has been officially removed. Developers are advised to review their implementations to eliminate dependencies on this method for ongoing functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_21\n\nLANGUAGE: php\nCODE:\n```\n// The previously deprecated grade_report::get_lang_string method has been removed\n// For more information see [MDL-78780](https://tracker.moodle.org/browse/MDL-78780)\n```\n\n----------------------------------------\n\nTITLE: Modifying Ogv.js Playback Technology AMD Module Definition for Moodle\nDESCRIPTION: This snippet demonstrates how to adjust the AMD module definition in the Ogv.js Playback Technology plugin to use Moodle's lazy-loaded VideoJS module and local Ogv dependency.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\ndefine(['media_videojs/video-lazy', './local/ogv/ogv']\n```\n\n----------------------------------------\n\nTITLE: Question Category XML Import Structure in Moodle XML Format\nDESCRIPTION: XML snippet demonstrating the new structure for importing question category descriptions in Moodle XML format. Supports saving category descriptions with optional formatting.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/format/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: XML\nCODE:\n```\n<question type=\"category\">\n    <category>\n        <text>${$contexttypename}$/{$category_path}</text>\n    </category>\n    <info format=\"{$format}\">\n        <text>{$info_categorydescription}</text>\n    </info>\n</question>\n```\n\n----------------------------------------\n\nTITLE: Deprecated AbstractCommand Properties in Guzzle\nDESCRIPTION: This code snippet marks 'command.headers', 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand. These will work through Guzzle 4.0.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_14\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked 'command.headers', 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand.\\n  These will work through Guzzle 4.0\"\n```\n\n----------------------------------------\n\nTITLE: Installing PSR-7 HTTP Message in Moodle\nDESCRIPTION: Step-by-step instructions for downloading and installing PSR-7 HTTP Message interfaces from GitHub into a Moodle installation. Requires updating the thirdpartylibs.xml configuration after installation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n1. Visit https://github.com/php-fig/http-message\n2. Download the latest release\n3. Unzip in this folder\n4. Update `thirdpartylibs.xml`\n```\n\n----------------------------------------\n\nTITLE: Rebuilding TinyMCE Package\nDESCRIPTION: This snippet rebuilds the TinyMCE package using Yarn after all necessary patches have been applied. It is crucial to ensure that Node.js is updated to the recommended version for compatibility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\nyarn\nyarn build\n```\n\n----------------------------------------\n\nTITLE: Documentation of removed LTI function in Moodle 5.0\nDESCRIPTION: Notes the final removal of the deprecated 'lti_libxml_disable_entity_loader' function in Moodle version 5.0, with reference to the relevant tracker issue.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/lti/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# mod_lti Upgrade notes\n\n## 5.0\n\n### Removed\n\n- Final removal of deprecated `lti_libxml_disable_entity_loader` function\n\n  For more information see [MDL-78635](https://tracker.moodle.org/browse/MDL-78635)\n```\n\n----------------------------------------\n\nTITLE: PHPSpreadsheet Changelog Format\nDESCRIPTION: Structured markdown format used to document changes in each version, organized into Added, Changed, Deprecated, Removed and Fixed sections.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n### Added\n\n- Option to specify a range of columns/rows for the Row/Column `isEmpty()` methods\n- Option for Cell Iterator to return a null value or create and return a new cell\n- Support for Structured References in the Calculation Engine\n\n### Changed\n\n- Nothing\n\n### Deprecated\n\n- Nothing\n\n### Removed\n\n- Shared/JAMA is removed.\n\n### Fixed\n\n- Namespace-Aware Code for SheetViewOptions, SheetProtection\n- Additional Method for XIRR if Newton-Raphson Doesn't Converge\n```\n\n----------------------------------------\n\nTITLE: Removal of Deprecated CSS Classes - PHP\nDESCRIPTION: This snippet records the removal of several outdated CSS classes from the Moodle theme structure. These include `iconhelp`, `icon-pre`, `icon-post`, `iconlarge`, and `iconsort`. Developers should update their themes to remove references to these classes to ensure compatibility with the latest Moodle version.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n// Removed CSS classes:\n// iconhelp, icon-pre, icon-post, iconlarge, iconsort\n```\n\n----------------------------------------\n\nTITLE: New Excel 2013/2016 Functions\nDESCRIPTION: Additional functions added for text manipulation, logical operations, date/time calculations, lookups, financial calculations, and engineering functions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_20\n\nLANGUAGE: PHP\nCODE:\n```\nCONCAT()        Synonym for CONCATENATE()\nNUMBERVALUE()   Converts text to a number, in a locale-independent way\nUNICHAR()       Synonym for CHAR()\nUNIORD()        Synonym for ORD()\nTEXTJOIN()      Joins together two or more text strings, separated by a delimiter\n```\n\n----------------------------------------\n\nTITLE: Equivalent Long-form HTTP Method Definition\nDESCRIPTION: Shows the equivalent long-form syntax for defining routes with specific HTTP methods, which is functionally identical to using the shortcut methods.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/nikic/fast-route/README.md#2025-04-21_snippet_6\n\nLANGUAGE: php\nCODE:\n```\n$r->addRoute('GET', '/get-route', 'get_handler');\n$r->addRoute('POST', '/post-route', 'post_handler');\n```\n\n----------------------------------------\n\nTITLE: Classes Moved to classes Folder (Moodle 2.8)\nDESCRIPTION: Classes that were defined in various lib files have been moved to the classes folder to take advantage of auto-loading. This has involved renaming them; see the list in `mod/quiz/db/renamedclasses.php`.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/quiz/upgrade.txt#2025-04-21_snippet_32\n\nLANGUAGE: text\nCODE:\n```\n\"Classes that were defined in various lib files have been moved to the classes\n  folder to take advantage of auto-loading. This has involved renaming them.\n  see the list in mod/quiz/db/renamedclasses.php.\"\n```\n\n----------------------------------------\n\nTITLE: Deprecated AI Provider Management Methods in PHP\nDESCRIPTION: Methods that have been deprecated due to refactoring of ai_provider_management_table to inherit from flexible_table instead of plugin_management_table.\nSOURCE: https://github.com/moodle/moodle/blob/main/ai/UPGRADING.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\nget_plugintype\nget_action_url\n```\n\n----------------------------------------\n\nTITLE: Deprecated renderer: qbank_bulkmove\\output\\renderer::render_bulk_move_form\nDESCRIPTION: This snippet highlights the deprecation of the renderer `qbank_bulkmove\\output\\renderer::render_bulk_move_form`.  The replacement is `qbank_bulkmove\\output\\bulk_move`. This change is also associated with Moodle tracker issue MDL-71378.\nSOURCE: https://github.com/moodle/moodle/blob/main/question/bank/bulkmove/UPGRADING.md#2025-04-21_snippet_1\n\n\n\n----------------------------------------\n\nTITLE: Finding Lamejs Version (MacOS)\nDESCRIPTION: This command utilizes `cat` and `grep` to extract the version number of Lamejs from the `package.json` file on MacOS. It is useful for determining the installed version of Lamejs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\ncat package.json | grep lamejs\n```\n\n----------------------------------------\n\nTITLE: Removal of tabs.php in mod_lesson - PHP\nDESCRIPTION: The unused `tabs.php` file in the mod_lesson directory has been removed, reflecting a continued focus on reducing unnecessary files within the codebase.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_46\n\nLANGUAGE: php\nCODE:\n```\n// Remove unused /mod/lesson/tabs.php\n// For more information see [MDL-82937](https://tracker.moodle.org/browse/MDL-82937)\n```\n\n----------------------------------------\n\nTITLE: Building the Demo Application\nDESCRIPTION: This command builds the demo application for ogv.js. It relies on the successful completion of the JavaScript libraries and C wrapper build process. The resulting demo can be found in the 'build/demo/' directory.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_9\n\nLANGUAGE: Shell\nCODE:\n```\n\"make demo\"\n```\n\nLANGUAGE: Shell\nCODE:\n```\n\"make\"\n```\n\n----------------------------------------\n\nTITLE: Documenting User Tours API Changes for Moodle 4.5 Onwards\nDESCRIPTION: Indicates that the file has been replaced by UPGRADING.md and references the related issue MDL-81125.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/usertours/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n=== 4.5 Onwards ===\n\nThis file has been replaced by UPGRADING.md. See MDL-81125 for further information.\n```\n\n----------------------------------------\n\nTITLE: External Function Return Field Update - Version 3.10\nDESCRIPTION: Documentation of added 'permissions' field in get_entries_by_id function return value to indicate user permissions for entry management.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n* External function get_entries_by_id now returns and additional \"permissions\" field indicating the user permissions for managing the entry.\n```\n\n----------------------------------------\n\nTITLE: PHP Form Element Addition with Hugo Shortcode\nDESCRIPTION: Shows how to use the PHP shortcode to display PHP code for adding a password form element\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/syntax-highlighting.md#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\n$mform->addElement('passwordunmask', 'password', get_string('label'), $attributes);\n```\n\n----------------------------------------\n\nTITLE: Installing Lamejs using NPM\nDESCRIPTION: This command uses Node Package Manager (NPM) to install the Lamejs library as a development dependency. The `--save-dev` flag ensures that Lamejs is added to the `devDependencies` section of the `package.json` file.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/recordrtc/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nnpm install lamejs --save-dev\n```\n\n----------------------------------------\n\nTITLE: Deprecated get_schedule_report_count Method in PHP\nDESCRIPTION: The 'get_schedule_report_count' method in the schedule helper class is deprecated, with users directed to use 'get_report_row_count' instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/reportbuilder/UPGRADING.md#2025-04-21_snippet_8\n\nLANGUAGE: php\nCODE:\n```\n// Deprecated method\npublic function get_schedule_report_count() {\n    // Users should use report::get_report_row_count instead\n}\n```\n\n----------------------------------------\n\nTITLE: Class Deprecations in Moodle 3.3\nDESCRIPTION: Lists deprecated classes in the Learning Plans tool and their new equivalents in Moodle 3.3, focusing on exporter classes that have been moved to core modules.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/lp/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: markdown\nCODE:\n```\n=== 3.3 ===\n\n* Deprecated classes and their new equivalent:\n  - tool_lp\\external\\cohort_summary_exporter        -> core_cohort\\external\\cohort_summary_exporter\n  - tool_lp\\external\\course_summary_exporter        -> core_course\\external\\course_summary_exporter\n  - tool_lp\\external\\course_module_summary_exporter -> core_course\\external\\course_module_summary_exporter\n```\n\n----------------------------------------\n\nTITLE: Finding Axe Core Version on MacOS and Linux\nDESCRIPTION: Multiple command-line methods to extract the axe-core version number from package.json file using cat or jq utility.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/behat/axe/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\n# MacOS\ncat package.json | grep axe-core\n\n# Linux alternatives\ncat package.json | grep axe-core\njq -r '.devDependencies.\"axe-core\"' package.json\n```\n\n----------------------------------------\n\nTITLE: Formatting User Data in CSV for Moodle Import\nDESCRIPTION: A CSV format example showing the structure required for importing user data into Moodle. The file contains headers for username and email columns, followed by sample data for two users. This format can be used as a template when preparing user data for bulk import operations.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpunit/tests/fixtures/sample_dataset.txt#2025-04-21_snippet_0\n\nLANGUAGE: csv\nCODE:\n```\nusername,email\npepa.novak,pepa@example.com\nbozka.novakova,bozka@example.com\n```\n\n----------------------------------------\n\nTITLE: Deprecated Behat Step in tool_lp\nDESCRIPTION: This snippet describes the deprecation of the behat_tool_lp_data_generators::the_following_lp_exist Behat step. The recommended replacement is: the following \"core_competency > [competency|framework|plan...]\" exist:\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_51\n\nLANGUAGE: Behat\nCODE:\n```\n\"behat_tool_lp_data_generators::the_following_lp_exist\"\n```\n\n----------------------------------------\n\nTITLE: Storing Environment Variable for TinyMCE\nDESCRIPTION: This snippet stores the path to the TinyMCE directory in Moodle using an environment variable. This path is needed for subsequent operations involving the TinyMCE integration.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\nMOODLEDIR=/your_moodle_dir/lib/editor/tiny\n```\n\n----------------------------------------\n\nTITLE: Adding Logical Functions - PHP\nDESCRIPTION: This snippet creates logical functions 'or' and 'and' to evaluate multiple conditions. The 'or' function returns true if any condition is true, while the 'and' function returns true only if all conditions are true.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/evalmath/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: PHP\nCODE:\n```\n<?php\nfunction or(...$conditions) {\n    foreach ($conditions as $condition) {\n        if ($condition) return true;\n    }\n    return false;\n}\n\nfunction and(...$conditions) {\n    foreach ($conditions as $condition) {\n        if (!$condition) return false;\n    }\n    return true;\n}\n?>\n```\n\n----------------------------------------\n\nTITLE: Configuring HTML Strictness Parameter\nDESCRIPTION: Configuration block defining the HTML.Strict parameter, which controls whether strict or transitional HTML rulesets are applied. This setting was deprecated in version 1.7.0 in favor of HTML.Doctype.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.Strict.txt#2025-04-21_snippet_0\n\nLANGUAGE: ini\nCODE:\n```\nHTML.Strict\nTYPE: bool\nVERSION: 1.3.0\nDEFAULT: false\nDEPRECATED-VERSION: 1.7.0\nDEPRECATED-USE: HTML.Doctype\n--DESCRIPTION--\nDetermines whether or not to use Transitional (loose) or Strict rulesets.\n--# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Setting PHPMailer Language Localization\nDESCRIPTION: Example showing how to set a different language for PHPMailer error messages using the setLanguage method.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpmailer/README.md#2025-04-21_snippet_4\n\nLANGUAGE: php\nCODE:\n```\n//To load the French version\n$mail->setLanguage('fr', '/optional/path/to/language/directory/');\n```\n\n----------------------------------------\n\nTITLE: Multi-sheet Export Methods in 3.4\nDESCRIPTION: Replacement of write_header() and write_footer() with new methods to support multiple sheets in exported files. Includes backwards compatibility support with error logging.\nSOURCE: https://github.com/moodle/moodle/blob/main/dataformat/upgrade.txt#2025-04-21_snippet_2\n\nLANGUAGE: php\nCODE:\n```\nstart_output()\nstart_sheet()\nclose_output()\nclose_sheet()\n```\n\n----------------------------------------\n\nTITLE: Deprecated Client Methods in Guzzle\nDESCRIPTION: This code lists several deprecated methods in `Guzzle\\Http\\ClientInterface`, along with instructions on how to achieve similar functionality using the client's configuration. These deprecated methods include setDefaultHeaders, getDefaultHeaders, expandTemplate, setRequestFactory, and getCurlMulti.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_10\n\nLANGUAGE: PHP\nCODE:\n```\n\"Removed `Guzzle\\\\Http\\\\ClientInterface::setDefaultHeaders(). Use\\n  $client->getConfig()->setPath('request.options/headers/{header_name}', 'value')`. or\\n  $client->getConfig()->setPath('request.options/headers', array('header_name' => 'value'))`.\\n* Removed `Guzzle\\\\Http\\\\ClientInterface::getDefaultHeaders(). Use $client->getConfig()->getPath('request.options/headers')`.\\n* Removed `Guzzle\\\\Http\\\\ClientInterface::expandTemplate()`\\n* Removed `Guzzle\\\\Http\\\\ClientInterface::setRequestFactory()`\\n* Removed `Guzzle\\\\Http\\\\ClientInterface::getCurlMulti()`\"\n```\n\n----------------------------------------\n\nTITLE: Removing Travis CI Integration\nDESCRIPTION: Travis CI integration has been removed from core.  Use GitHub Actions (GHA) instead.  See https://moodledev.io/general/development/tools/gha for more information.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/upgrade.txt#2025-04-21_snippet_35\n\n\n\n----------------------------------------\n\nTITLE: Configuring Interoperable Fault Codes for XML-RPC in PHP\nDESCRIPTION: Modifies the library to use error codes that match the specification described in the XML-RPC Fault Code Interoperability document.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_5\n\nLANGUAGE: PHP\nCODE:\n```\nPhpXmlRpc::useInteropFaults();\n```\n\n----------------------------------------\n\nTITLE: Prepending ID to CSS Selectors\nDESCRIPTION: Modifying CSS selectors by prepending a specific ID to all declaration blocks\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_5\n\nLANGUAGE: php\nCODE:\n```\n$myId = \"#my_id\";\n$parser = new \\Sabberworm\\CSS\\Parser($css);\n$cssDocument = $parser->parse();\nforeach ($cssDocument->getAllDeclarationBlocks() as $block) {\n    foreach ($block->getSelectors() as $selector) {\n        $selector->setSelector($myId.' '.$selector->getSelector());\n    }\n}\n```\n\n----------------------------------------\n\nTITLE: Defining Tiny H5P Help Link Text\nDESCRIPTION: Defines a helper function or string constant for generating help link text related to H5P integration in the Tiny editor plugin\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/h5p/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nhelplinktext,tiny_h5p\n```\n\n----------------------------------------\n\nTITLE: PSR-7 File Links in Markdown\nDESCRIPTION: Markdown links to PSR-7 documentation including interfaces method list and usage guide.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/http-message/README.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n* [`PSR-7 Interfaces Method List`](docs/PSR7-Interfaces.md)\n* [`PSR-7 Usage Guide`](docs/PSR7-Usage.md)\n```\n\n----------------------------------------\n\nTITLE: Adding AllowDynamicProperties attribute to PHP classes for PHP 8.2 compatibility\nDESCRIPTION: A bash command that adds the #[\\AllowDynamicProperties] attribute to all PHP class definitions in the ltiprovider source directory to prevent PHP 8.2 deprecation warnings about dynamic properties.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/ltiprovider/readme_moodle.txt#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncd lib/ltiprovider/src\nfor file in `find . -name '*.php' `; do sed -i '/^class /i #[\\\\AllowDynamicProperties]' $file; done\n```\n\n----------------------------------------\n\nTITLE: Committing Base Changes for TinyMCE\nDESCRIPTION: This snippet commits the initial configuration changes for TinyMCE. A commit message is included to document the change.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/readme_moodle.md#2025-04-21_snippet_3\n\nLANGUAGE: bash\nCODE:\n```\ngit commit -m 'MDL: Add build configuration'\n```\n\n----------------------------------------\n\nTITLE: Importing ogv.js in Node.js Environment\nDESCRIPTION: Demonstrates how to require ogv.js in a Node.js environment and set up the loader base path.\nSOURCE: https://github.com/moodle/moodle/blob/main/media/player/videojs/ogvjs/README.md#2025-04-21_snippet_1\n\nLANGUAGE: javascript\nCODE:\n```\nvar ogv = require('ogv');\n\nogv.OGVLoader.base = '/path/to/resources';\nvar player = new ogv.OGVPlayer();\n```\n\n----------------------------------------\n\nTITLE: HTML Parent Element Configuration\nDESCRIPTION: Configuration property that specifies the parent HTML element type. Default value is 'div' which allows block-level elements, while using 'span' would restrict content to inline elements only.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/HTML.Parent.txt#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\nHTML.Parent\nTYPE: string\nVERSION: 1.3.0\nDEFAULT: 'div'\n```\n\n----------------------------------------\n\nTITLE: Checking Code Against PSR2 Standards\nDESCRIPTION: Command to verify that code changes comply with PSR2 coding standards using PHP_CodeSniffer.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/mustache/CONTRIBUTING.md#2025-04-21_snippet_2\n\nLANGUAGE: bash\nCODE:\n```\nphpcs --standard=PSR2\n```\n\n----------------------------------------\n\nTITLE: CSS Implementation of Padding-Top-3 Class\nDESCRIPTION: Example of how the pt-3 class is implemented in CSS to add padding-top equivalent to 1rem (16px).\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/spacing.md#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n.pt-3 {\n  padding-top: 1rem; /** 16px **/\n}\n```\n\n----------------------------------------\n\nTITLE: Installing getallheaders Polyfill for PHP >= 5.6\nDESCRIPTION: Composer command to install the latest version of the getallheaders polyfill package for PHP versions 5.6 and above.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/ralouphie/getallheaders/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncomposer require ralouphie/getallheaders\n```\n\n----------------------------------------\n\nTITLE: Configuring Git Comment Character\nDESCRIPTION: Command to change the default Git comment character to preserve markdown headings in release notes.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_7\n\nLANGUAGE: bash\nCODE:\n```\ngit config core.commentChar \";\"\n```\n\n----------------------------------------\n\nTITLE: Removing Combo Box for Multiple Display Types\nDESCRIPTION: Explains the change in the grade export UI form by removing the combo box for display types and generating a column for each selected type. This change does not apply to XML export, which maintains the old functionality with a combo box.\nSOURCE: https://github.com/moodle/moodle/blob/main/grade/export/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: Markdown\nCODE:\n```\n\"The combo box was removed from (Open Document, Plain Text, Excel) and for each selected display type a column is generated.\"\n```\n\n----------------------------------------\n\nTITLE: Setting Custom Menu Trigger in PHP\nDESCRIPTION: Demonstrates how to set a custom trigger for an action menu.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/components/actionmenu.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n/** @var core_renderer $output*/\n$output = $PAGE->get_renderer('core');\n\n$menu = new action_menu();\n$menu->set_menu_trigger(get_string('edit'));\n```\n\n----------------------------------------\n\nTITLE: Server Method Identification\nDESCRIPTION: New method to identify system calls, primarily useful for server subclasses and introspectors\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_13\n\nLANGUAGE: PHP\nCODE:\n```\nServer::isSyscall()\n```\n\n----------------------------------------\n\nTITLE: Installing Constant-Time Encoding Library with Composer\nDESCRIPTION: Command to install the constant-time encoding library using Composer package manager.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/factor/totp/extlib/ParagonIE/ConstantTime/README.md#2025-04-21_snippet_0\n\nLANGUAGE: Shell\nCODE:\n```\ncomposer require paragonie/constant_time_encoding\n```\n\n----------------------------------------\n\nTITLE: Testing PHP Version Compatibility using Composer\nDESCRIPTION: Command to test code compatibility across supported PHP versions.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\ncomposer versions\n```\n\n----------------------------------------\n\nTITLE: OneDrive File Import Confirmation Key\nDESCRIPTION: Localization key for confirming the import of files from OneDrive repository\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/onedrive/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: moodle_lang\nCODE:\n```\nconfirmimportskydrive\n```\n\n----------------------------------------\n\nTITLE: Defining Forbidden Properties\nDESCRIPTION: This snippet defines the forbidden CSS properties as an empty array by default. It acts as a reversal of allowed properties and may require careful management to avoid inadvertently disallowing necessary CSS rules.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/CSS.ForbiddenProperties.txt#2025-04-21_snippet_0\n\nLANGUAGE: CSS\nCODE:\n```\nCSS.ForbiddenProperties\nTYPE: lookup\nVERSION: 4.2.0\nDEFAULT: array()\n```\n\n----------------------------------------\n\nTITLE: OneDrive File Import Failure Key\nDESCRIPTION: Localization key indicating unsuccessful import of OneDrive files\nSOURCE: https://github.com/moodle/moodle/blob/main/repository/onedrive/lang/en/deprecated.txt#2025-04-21_snippet_4\n\nLANGUAGE: moodle_lang\nCODE:\n```\nskydrivefilesnotimported\n```\n\n----------------------------------------\n\nTITLE: Validating Code Changes using Composer\nDESCRIPTION: Command to validate all code changes before submitting a pull request.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CONTRIBUTING.md#2025-04-21_snippet_4\n\nLANGUAGE: bash\nCODE:\n```\ncomposer check\n```\n\n----------------------------------------\n\nTITLE: Configuring Default Image Alt Text in Moodle\nDESCRIPTION: Specifies the default alt text for images without an alt attribute. When set to null, the basename of the src tag is used as the alt text. This applies to all images without a valid alt attribute, distinct from invalid image handling.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Attr.DefaultImageAlt.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nAttr.DefaultImageAlt = null\n```\n\n----------------------------------------\n\nTITLE: Configuring HTTP Client Curl Usage Method\nDESCRIPTION: New method to force usage of curl for HTTP 1.0 calls or plain socket for HTTPS calls\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpxmlrpc/NEWS.md#2025-04-21_snippet_12\n\nLANGUAGE: PHP\nCODE:\n```\nClient::setUseCurl()\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoded SVG Geometric Pattern\nDESCRIPTION: A base64 encoded SVG image containing repeating polyline patterns with transforms, fills and opacity variations\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-5.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\ndata:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIH...\n```\n\n----------------------------------------\n\nTITLE: Applying Heading Styles Using CSS Classes in HTML\nDESCRIPTION: Shows how to use heading classes (h1-h6) to style different HTML elements with heading appearances, allowing flexibility in semantic structure.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/moodle/themes/text.md#2025-04-21_snippet_1\n\nLANGUAGE: html\nCODE:\n```\n<p class=\"h1\">h1 heading</p>\n<p class=\"h2\">h2 heading</p>\n<h1 class=\"h3\">h3 heading</h1>\n<p class=\"h4\">h4 heading</p>\n<p class=\"h5\">h5 heading</p>\n<p class=\"h6\">h6 heading</p>\n```\n\n----------------------------------------\n\nTITLE: Using 'del' Instead of Deprecated 'strike' Element in HTML\nDESCRIPTION: Shows how to replace the deprecated 'strike' element with the semantic 'del' element for indicating deleted text. This improves accessibility for screen readers.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_7\n\nLANGUAGE: HTML\nCODE:\n```\n<p><del>(10 remaining)</del> All sold out!</p>\n```\n\n----------------------------------------\n\nTITLE: Base64 Encoded SVG Pattern\nDESCRIPTION: SVG image definition containing a series of rectangular patterns with varying dimensions, opacities, and fills. The SVG creates a visual pattern using both vertical and horizontal rectangles on a colored background.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-4.txt#2025-04-21_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\ndata:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTMiIGhlaWdodD0iNDEzIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJyZ2IoMCwgMTg0LCAxNDgpIiAvPjxyZWN0IHg9IjAiIHk9IjYiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE2IiBvcGFjaXR5PSIwLjExNTMzMzMzMzMzMzMzIiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9IjAiIHk9IjMzIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSI5IiBvcGFjaXR5PSIwLjA1NDY2NjY2NjY2NjY2NyIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIwIiB5PSI1MiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iOCIgb3BhY2l0eT0iMC4wNDYiIGZpbGw9IiMyMjIiIC8+PHJlY3QgeD0iMCIgeT0iNzMiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE0IiBvcGFjaXR5PSIwLjA5OCIgZmlsbD0iIzIyMiIgLz48cmVjdCB4PSIwIiB5PSI5NCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iOSIgb3BhY2l0eT0iMC4wNTQ2NjY2NjY2NjY2NjciIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMCIgeT0iMTE1IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSI4IiBvcGFjaXR5PSIwLjA0NiIgZmlsbD0iIzIyMiIgLz48cmVjdCB4PSIwIiB5PSIxMzgiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjkiIG9wYWNpdHk9IjAuMDU0NjY2NjY2NjY2NjY3IiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjAiIHk9IjE1OCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTIiIG9wYWNpdHk9IjAuMDgwNjY2NjY2NjY2NjY3IiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9IjAiIHk9IjE4OCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iNSIgb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIwIiB5PSIyMDUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjgiIG9wYWNpdHk9IjAuMDQ2IiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9IjAiIHk9IjIyNSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iNyIgb3BhY2l0eT0iMC4wMzczMzMzMzMzMzMzMzMiIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMCIgeT0iMjUwIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSI5IiBvcGFjaXR5PSIwLjA1NDY2NjY2NjY2NjY2NyIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIwIiB5PSIyNjkiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE5IiBvcGFjaXR5PSIwLjE0MTMzMzMzMzMzMzMzIiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjAiIHk9IjMwNCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iNSIgb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIwIiB5PSIzMTkiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjE1IiBvcGFjaXR5PSIwLjEwNjY2NjY2NjY2NjY3IiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjAiIHk9IjM1MCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTciIG9wYWNpdHk9IjAuMTI0IiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjAiIHk9IjM3NCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iNSIgb3BhY2l0eT0iMC4wMiIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIwIiB5PSIzODciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjYiIG9wYWNpdHk9IjAuMDI4NjY2NjY2NjY2NjY3IiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9IjAiIHk9IjQwNCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iOSIgb3BhY2l0eT0iMC4wNTQ2NjY2NjY2NjY2NjciIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iNiIgeT0iMCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMTE1MzMzMzMzMzMzMzMiIGZpbGw9IiMyMjIiIC8+PHJlY3QgeD0iMzMiIHk9IjAiIHdpZHRoPSI5IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMDU0NjY2NjY2NjY2NjY3IiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjUyIiB5PSIwIiB3aWR0aD0iOCIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjA0NiIgZmlsbD0iIzIyMiIgLz48cmVjdCB4PSI3MyIgeT0iMCIgd2lkdGg9IjE0IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMDk4IiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9Ijk0IiB5PSIwIiB3aWR0aD0iOSIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjA1NDY2NjY2NjY2NjY2NyIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIxMTUiIHk9IjAiIHdpZHRoPSI4IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMDQ2IiBmaWxsPSIjMjIyIiAvPjxyZWN0IHg9IjEzOCIgeT0iMCIgd2lkdGg9IjkiIGhlaWdodD0iMTAwJSIgb3BhY2l0eT0iMC4wNTQ2NjY2NjY2NjY2NjciIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMTU4IiB5PSIwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTAwJSIgb3BhY2l0eT0iMC4wODA2NjY2NjY2NjY2NjciIGZpbGw9IiMyMjIiIC8+PHJlY3QgeD0iMTg4IiB5PSIwIiB3aWR0aD0iNSIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjIwNSIgeT0iMCIgd2lkdGg9IjgiIGhlaWdodD0iMTAwJSIgb3BhY2l0eT0iMC4wNDYiIGZpbGw9IiMyMjIiIC8+PHJlY3QgeD0iMjI1IiB5PSIwIiB3aWR0aD0iNyIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjAzNzMzMzMzMzMzMzMzMyIgZmlsbD0iI2RkZCIgLz48cmVjdCB4PSIyNTAiIHk9IjAiIHdpZHRoPSI5IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMDU0NjY2NjY2NjY2NjY3IiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjI2OSIgeT0iMCIgd2lkdGg9IjE5IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMTQxMzMzMzMzMzMzMzMiIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMzA0IiB5PSIwIiB3aWR0aD0iNSIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjMxOSIgeT0iMCIgd2lkdGg9IjE1IiBoZWlnaHQ9IjEwMCUiIG9wYWNpdHk9IjAuMTA2NjY2NjY2NjY2NjciIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMzUwIiB5PSIwIiB3aWR0aD0iMTciIGhlaWdodD0iMTAwJSIgb3BhY2l0eT0iMC4xMjQiIGZpbGw9IiNkZGQiIC8+PHJlY3QgeD0iMzc0IiB5PSIwIiB3aWR0aD0iNSIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjAyIiBmaWxsPSIjZGRkIiAvPjxyZWN0IHg9IjM4NyIgeT0iMCIgd2lkdGg9IjYiIGhlaWdodD0iMTAwJSIgb3BhY2l0eT0iMC4wMjg2NjY2NjY2NjY2NjciIGZpbGw9IiMyMjIiIC8+PHJlY3QgeD0iNDA0IiB5PSIwIiB3aWR0aD0iOSIgaGVpZ2h0PSIxMDAlIiBvcGFjaXR5PSIwLjA1NDY2NjY2NjY2NjY2NyIgZmlsbD0iI2RkZCIgLz48L3N2Zz4=\n```\n\n----------------------------------------\n\nTITLE: Font Awesome Icon Family Selection\nDESCRIPTION: Enhances icon system to support multiple Font Awesome icon families (solid, regular, brands). Allows explicit family selection using class names when displaying icons.\nSOURCE: https://github.com/moodle/moodle/blob/main/theme/boost/UPGRADING.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\n\\core\\outut\\icon_system::FONTAWESOME\n// Use classes: fa-regular, fa-brands, fa-solid\n```\n\n----------------------------------------\n\nTITLE: MIT License Text in Markdown\nDESCRIPTION: Standard MIT license declaration from 2016 for the PHP Framework Interoperability Group, written in markdown format with blockquote syntax.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/psr/simple-cache/LICENSE.md#2025-04-21_snippet_0\n\nLANGUAGE: markdown\nCODE:\n```\n# The MIT License (MIT)\n\nCopyright (c) 2016 PHP Framework Interoperability Group\n\n> Permission is hereby granted, free of charge, to any person obtaining a copy\n> of this software and associated documentation files (the \"Software\"), to deal\n> in the Software without restriction, including without limitation the rights\n> to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n> copies of the Software, and to permit persons to whom the Software is\n> furnished to do so, subject to the following conditions:\n>\n> The above copyright notice and this permission notice shall be included in\n> all copies or substantial portions of the Software.\n>\n> THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n> IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n> FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n> AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n> LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n> OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n> THE SOFTWARE.\n```\n\n----------------------------------------\n\nTITLE: Downloading Composer for GeoIP2 Installation\nDESCRIPTION: Command to download the Composer dependency manager in the root directory of a project. This is the first step for installing the GeoIP2 PHP API via Composer.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/maxmind/GeoIp2/README.md#2025-04-21_snippet_0\n\nLANGUAGE: bash\nCODE:\n```\ncurl -sS https://getcomposer.org/installer | php\n```\n\n----------------------------------------\n\nTITLE: Updating thirdparty libraries XML\nDESCRIPTION: This indicates the need to update the XML file that lists third-party libraries, ensuring that the new Guzzle updates are reflected.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/readme_moodle.txt#2025-04-21_snippet_1\n\nLANGUAGE: bash\nCODE:\n```\nNow update `lib/thirdpartylibs.xml`\n```\n\n----------------------------------------\n\nTITLE: JavaScript Configuration with Hugo Shortcode\nDESCRIPTION: Illustrates using the highlight shortcode to display JavaScript configuration object code\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/syntax-highlighting.md#2025-04-21_snippet_2\n\nLANGUAGE: javascript\nCODE:\n```\nvar config = {\n    test: null,\n    selector: '[data-drag-type=move]'\n};\n```\n\n----------------------------------------\n\nTITLE: Function Deprecation Notice - Version 3.8\nDESCRIPTION: Notice of final deprecation for glossary_scale_used() function.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/glossary/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: markdown\nCODE:\n```\n* The following functions have been finally deprecated and can not be used anymore:\\n    * glossary_scale_used()\n```\n\n----------------------------------------\n\nTITLE: CacheStorageInterface Changes in Guzzle\nDESCRIPTION: This code describes the changes to `CacheStorageInterface` in Guzzle, specifically the changes in the method signatures of `cache()`, `fetch()`, and `delete()`, as well as the addition of `purge()`.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_20\n\nLANGUAGE: PHP\nCODE:\n```\n\"`CacheStorageInterface::cache($key, Response $response, $ttl = null)` has changed to `cache(RequestInterface\\n  $request, Response $response);`\\n* `CacheStorageInterface::fetch($key)` has changed to `fetch(RequestInterface $request);`\\n* `CacheStorageInterface::delete($key)` has changed to `delete(RequestInterface $request);`\\n* Added `CacheStorageInterface::purge($url)`\"\n```\n\n----------------------------------------\n\nTITLE: SVG Path Rendering with Dynamic Transformations\nDESCRIPTION: Complex SVG visualization with multiple curved paths using transform attributes and style properties for creating wave-like visual effects\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/static/moodle/components/coursecards/placeholder-1.txt#2025-04-21_snippet_0\n\nLANGUAGE: svg\nCODE:\n```\n<path d=\"M0 53 C 28 0, 52 0, 80 53 S 132 106, 160 53 S 212 0, 240, 53\" fill=\"none\" stroke=\"#ddd\" style=\"opacity:0.054666666666667;stroke-width:13px;\" transform=\"translate(-40, 180.5)\" />\n```\n\n----------------------------------------\n\nTITLE: Deprecated Request Params in Guzzle Client\nDESCRIPTION: This code indicates that 'request.params' for `Guzzle\\Http\\Client` is deprecated and suggests using [request.options][params] instead.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/guzzlehttp/guzzle/CHANGELOG.md#2025-04-21_snippet_15\n\nLANGUAGE: PHP\nCODE:\n```\n\"Marked 'request.params' for `Guzzle\\\\Http\\\\Client` as deprecated. Use [request.options][params].\"\n```\n\n----------------------------------------\n\nTITLE: Configuration Variable Reference\nDESCRIPTION: Reference to Moodle's data root configuration variable used in security context.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/shibboleth/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n$CFG->dataroot\n```\n\n----------------------------------------\n\nTITLE: Adding GPL Notice to Program Source File\nDESCRIPTION: This code snippet provides the standard GPL notice to be included at the start of each source file in a program. It specifies the copyright information, licensing terms, and warranty disclaimer, as well as providing information on how to obtain a full copy of the license.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/core/LICENSE.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\n\t<one line to give the program's name and a brief idea of what it does.>\n\tCopyright (C) <year>  <name of author>\n\n\tThis program is free software: you can redistribute it and/or modify\n\tit under the terms of the GNU General Public License as published by\n\tthe Free Software Foundation, either version 3 of the License, or\n\t(at your option) any later version.\n\n\tThis program is distributed in the hope that it will be useful,\n\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\n\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\tGNU General Public License for more details.\n\n\tYou should have received a copy of the GNU General Public License\n\talong with this program.  If not, see <http://www.gnu.org/licenses/>.\n```\n\n----------------------------------------\n\nTITLE: Accessing Feedback Summary in PHP\nDESCRIPTION: The constructor of the \\mod_feedback\\output\\summary class no longer accepts the $extradetails parameter as of Moodle 4.3.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/feedback/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nnew \\mod_feedback\\output\\summary($feedback, $cm);\n```\n\n----------------------------------------\n\nTITLE: Accessing Availability Info in PHP\nDESCRIPTION: Example of how to access availability information in PHP code. The 'showmore' information is no longer exported, and components should handle showmore/showless behavior themselves.\nSOURCE: https://github.com/moodle/moodle/blob/main/availability/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$availability_info->export_for_template();\n```\n\n----------------------------------------\n\nTITLE: Implementing Accessible Links in HTML\nDESCRIPTION: This snippet demonstrates how to create accessible links that warn users when opening in a new window and provide descriptive text.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_0\n\nLANGUAGE: HTML\nCODE:\n```\n<a href=\"webpage.html\">View this page (opens in new window)</a>\n```\n\n----------------------------------------\n\nTITLE: Core Encoding Configuration Directive\nDESCRIPTION: Configuration directive that controls how non-ASCII characters are handled in the encoding process. When enabled, it converts all non-ASCII characters to decimal numeric entities before encoding, regardless of native encoding support. This can impact performance with encodings like Big5 that natively support non-ASCII characters.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Core.EscapeNonASCIICharacters.txt#2025-04-21_snippet_0\n\nLANGUAGE: config\nCODE:\n```\nCore.EscapeNonASCIICharacters\nTYPE: bool\nVERSION: 1.4.0\nDEFAULT: false\n```\n\n----------------------------------------\n\nTITLE: Using Valid Title Attribute for Object Elements in HTML\nDESCRIPTION: Demonstrates the correct usage of the 'title' attribute for object elements. The title should not be empty and should provide a meaningful description of the object's content.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_6\n\nLANGUAGE: HTML\nCODE:\n```\n<object src=\"widget.html\" title=\"A small web widget\"></object>\n```\n\n----------------------------------------\n\nTITLE: Parsing Swiss Phone Number in PHP\nDESCRIPTION: Demonstrates parsing and normalizing a Swiss phone number using libphonenumber PhoneNumberUtil, including error handling and type conversion\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/giggsey/libphonenumber-for-php-lite/README.md#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\n$swissNumberStr = \"044 668 18 00\";\n$phoneUtil = \\libphonenumber\\PhoneNumberUtil::getInstance();\ntry {\n    $swissNumberProto = $phoneUtil->parse($swissNumberStr, \"CH\");\n    var_dump($swissNumberProto);\n} catch (\\libphonenumber\\NumberParseException $e) {\n    var_dump($e);\n}\n```\n\n----------------------------------------\n\nTITLE: CSS Selector Scoping Example\nDESCRIPTION: Demonstrates how the ExtractStyleBlocks scope prepends a specified selector to user-defined CSS rules. When scope is set to '#user-content', it automatically prepends this selector to maintain style isolation.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/Filter.ExtractStyleBlocks.Scope.txt#2025-04-21_snippet_0\n\nLANGUAGE: css\nCODE:\n```\n#user-content a:hover\n```\n\nLANGUAGE: css\nCODE:\n```\n#user-content a:hover, #user-content2 a:hover\n```\n\n----------------------------------------\n\nTITLE: Handling Cells with Non-Null Explicit Type and Null Value\nDESCRIPTION: This snippet describes a fix in the Xlsx Reader of PhpSpreadsheet for handling cells that have a non-null explicit type but a null value. The fix ensures that such cells are correctly interpreted, preventing potential errors or inconsistencies in data handling.  This improves the robustness of the XLSX reader.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/phpspreadsheet/CHANGELOG.md#2025-04-21_snippet_9\n\nLANGUAGE: PHP\nCODE:\n```\n\"Xlsx Reader handle cell with non-null explicit type but null value. [Issue #2488](https://github.com/PHPOffice/PhpSpreadsheet/issues/2488) [PR #2489](https://github.com/PHPOffice/PhpSpreadsheet/pull/2489)\"\n```\n\n----------------------------------------\n\nTITLE: BigBlueButton Mobile Message String Constants\nDESCRIPTION: Defines two message string identifiers for the BigBlueButton Moodle plugin mobile interface. The strings relate to page reload time for meeting creation and unsupported group functionality.\nSOURCE: https://github.com/moodle/moodle/blob/main/mod/bigbluebuttonbn/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: text\nCODE:\n```\nview_mobile_message_reload_page_creation_time_meeting,mod_bigbluebuttonbn\nview_mobile_message_groups_not_supported,mod_bigbluebuttonbn\n```\n\n----------------------------------------\n\nTITLE: Sample Auth Plugin Method - User Password History\nDESCRIPTION: Code reference showing the user_add_password_history() method call that should be added to user_signup() implementations.\nSOURCE: https://github.com/moodle/moodle/blob/main/auth/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\nuser_add_password_history()\n```\n\n----------------------------------------\n\nTITLE: Vim Modeline for Indentation\nDESCRIPTION: A Vim configuration comment that sets indentation preferences for the file, ensuring consistent code formatting with 4-space soft tabs and expandable tabs.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/htmlpurifier/HTMLPurifier/ConfigSchema/schema/AutoFormat.DisplayLinkURI.txt#2025-04-21_snippet_1\n\nLANGUAGE: vim\nCODE:\n```\n# vim: et sw=4 sts=4\n```\n\n----------------------------------------\n\nTITLE: Styling Page Title in HTML\nDESCRIPTION: This HTML snippet adds a style tag to hide the bd-title class, which is likely used for the page title.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/componentlibrary/content/library/getting-started.md#2025-04-21_snippet_0\n\nLANGUAGE: html\nCODE:\n```\n<style>\n  .bd-title {\n    display: none;\n  }\n</style>\n```\n\n----------------------------------------\n\nTITLE: Implementing Accessible Embedded Content in HTML\nDESCRIPTION: This example demonstrates how to provide alternative content for embedded elements using the <noembed> tag.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_3\n\nLANGUAGE: HTML\nCODE:\n```\n<embed src=\"multimedia.mov\"/><noembed>Multimedia with <a href=\"multimedia.html\">an available transcript</a>.</noembed>\n```\n\n----------------------------------------\n\nTITLE: Rendering Parsed CSS Structure\nDESCRIPTION: This CSS snippet shows the rendered output of the parsed CSS structure. It compresses the original CSS by removing unnecessary whitespace and newlines, while maintaining the same functionality as the input CSS.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/php-css-parser/README.md#2025-04-21_snippet_12\n\nLANGUAGE: css\nCODE:\n```\n@charset \"utf-8\";\n@font-face {font-family: \"CrassRoots\";src: url(\"../media/cr.ttf\");}\nhtml, body {font-size: 1.6em;}\n@keyframes mymove {from {top: 0px;} to {top: 200px;}}\n```\n\n----------------------------------------\n\nTITLE: Defining language string for TinyMCE autosave plugin in Moodle\nDESCRIPTION: Defines the 'helplinktext' string for the TinyMCE autosave plugin. This string is likely used as the text for a help link related to the autosave functionality in the TinyMCE editor.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/editor/tiny/plugins/autosave/lang/en/deprecated.txt#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\nhelplinktext,tiny_autosave\n```\n\n----------------------------------------\n\nTITLE: Outputting GPL Notice in Terminal Interaction\nDESCRIPTION: This code snippet describes the notice that a program should output when it starts in an interactive mode. It includes the program's copyright information, a warranty disclaimer, and information on how to view the license details.\nSOURCE: https://github.com/moodle/moodle/blob/main/h5p/h5plib/v127/joubel/core/LICENSE.txt#2025-04-21_snippet_1\n\nLANGUAGE: text\nCODE:\n```\n\t<program>  Copyright (C) <year>  <name of author>\n\tThis program comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n\tThis is free software, and you are welcome to redistribute it\n\tunder certain conditions; type `show c' for details.\n```\n\n----------------------------------------\n\nTITLE: Removing Deprecated Methods in report_eventlist List Generator - PHP\nDESCRIPTION: This code snippet lists the deprecated methods from the report_eventlist_list_generator class that have been removed in Moodle 4.5. Developers should update their implementations to avoid using these methods, ensuring code compliance with the latest version.\nSOURCE: https://github.com/moodle/moodle/blob/main/report/eventlist/UPGRADING.md#2025-04-21_snippet_0\n\nLANGUAGE: PHP\nCODE:\n```\n\"\\report_eventlist_list_generator::get_core_events_list()\"\n```\n\nLANGUAGE: PHP\nCODE:\n```\n\"\\report_eventlist_list_generator::get_non_core_event_list()\"\n```\n\n----------------------------------------\n\nTITLE: Renaming MFA Factor Action Form Class (PHP)\nDESCRIPTION: The class tool_mfa\\local\\form\\revoke_factor_form has been renamed to factor_action_confirmation_form. This change better reflects its expanded functionality, which now includes both replace and revoke actions.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/upgrade.txt#2025-04-21_snippet_1\n\nLANGUAGE: php\nCODE:\n```\ntool_mfa\\local\\form\\revoke_factor_form\n```\n\nLANGUAGE: php\nCODE:\n```\ntool_mfa\\local\\form\\factor_action_confirmation_form\n```\n\n----------------------------------------\n\nTITLE: Deprecating setup_factor() Method in MFA Renderer (PHP)\nDESCRIPTION: The setup_factor() method in the tool_mfa\\output\\renderer class has been deprecated. The HTML generated by this method is no longer needed, as similar functionality is now part of the available_factors() method in the MFA renderer.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/mfa/upgrade.txt#2025-04-21_snippet_0\n\nLANGUAGE: php\nCODE:\n```\ntool_mfa\\output\\renderer::setup_factor()\n```\n\n----------------------------------------\n\nTITLE: Performing Matrix Multiplication\nDESCRIPTION: This snippet explains how to multiply two Matrix objects using both instance method and static method approaches. It illustrates the passing of matrices as inputs and outputs back in array form.\nSOURCE: https://github.com/moodle/moodle/blob/main/lib/phpspreadsheet/markbaker/matrix/README.md#2025-04-21_snippet_3\n\nLANGUAGE: php\nCODE:\n```\n$matrix1 = new Matrix\\Matrix([\n    [2, 7, 6],\n    [9, 5, 1],\n    [4, 3, 8],\n]);\n$matrix2 = new Matrix\\Matrix([\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9],\n]);\n\nvar_dump($matrix1->multiply($matrix2)->toArray());\n```\n\nLANGUAGE: php\nCODE:\n```\nvar_dump(Matrix\\Operations::multiply($matrix1, $matrix2)->toArray());\n```\n\n----------------------------------------\n\nTITLE: Avoiding Merged Cells in HTML Tables for Accessibility\nDESCRIPTION: Advises against using merged cells in tables as they can cause issues for screen readers and other accessibility tools.\nSOURCE: https://github.com/moodle/moodle/blob/main/admin/tool/brickfield/classes/local/htmlchecker/guidelines/translations/en.txt#2025-04-21_snippet_10\n\n\n\n----------------------------------------\n\nTITLE: Removal of lti_libxml_disable_entity_loader Function - PHP\nDESCRIPTION: The deprecated `lti_libxml_disable_entity_loader` function has also been removed from the code, indicating a move towards safer coding practices concerning XML processing in LTI activities.\nSOURCE: https://github.com/moodle/moodle/blob/main/UPGRADING.md#2025-04-21_snippet_47\n\nLANGUAGE: php\nCODE:\n```\n// Final removal of deprecated lti_libxml_disable_entity_loader function\n// For more information see [MDL-78635](https://tracker.moodle.org/browse/MDL-78635)\n```"
  }
]